{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Xu Xiao \u5f90\u5578 \u00b6 I am Xiao Xu, a Ph.D. student in Research Center for Social Computing and Information Retrieval at Harbin Institute of Technology (HIT, China) since 2020. I am fortunately advised by Prof. Wanxiang Che . In July 2020, I obtained B.S. degree in Northeastern University (NEU). I love Music, Singing, Animation, Sports, League of Legends, Apex Legends, and all good things in my life. Please contact me via xxu@ir.hit.edu.cn . Find me in: Google Scholar , Semantic Scholar , Github , Zhihu . Research Interests \u00b6 Vision-and-Language, Task-oriented Dialogue System, Natural Language Processing. News \u00b6 Nov., 2021. One paper was accepted by AAAI 2023 . Dec., 2021. One paper was accepted by AAAI 2022 . Aug., 2021. One paper was accepted by EMNLP 2021 . May., 2021. One paper was accepted by ACL 2021 . Sep., 2020. One paper was accepted to EMNLP 2020 . Apr., 2020. One paper was accepted by ACL 2020 . Publications \u00b6 BridgeTower: Building Bridges Between Encoders in Vision-Language Representation Learning. Xiao Xu , Chenfei Wu, Shachar Rosenman, Vasudev Lal, Wanxiang Che, Nan Duan. AAAI 2023. [Paper(Arxiv)] [Code] Text is no more Enough! A Benchmark for Profile-based Spoken Language Understanding. Libo Qin*, Xiao Xu* ,Kaiji Chen, Guoxing Wu, Linlin Li, Wanxiang Che. AAAI 2022. [Paper] [Paper(Arxiv)] [Code] Don't be Contradicted with Anything! CI-ToD: Towards Benchmarking Consistency for Task-oriented Dialogue System. Libo Qin, Tianbao Xie, Shijue Huang, Qiguang Chen, Xiao Xu , Wanxiang Che. EMNLP 2021. [Paper] [Paper(Arxiv)] [Code] GL-GIN: Fast and Accurate Non-Autoregressive Model for Joint Multiple Intent Detection and Slot Filling. Libo Qin, Fuxuan Wei, Tianbao Xie, Xiao Xu , Wanxiang Che, Ting Liu. ACL 2021. [Paper] [Paper(Arxiv)] [Code] AGIF: An Adaptive Graph-Interactive Framework for Joint Multiple Intent Detection and Slot Filling. Libo Qin, Xiao Xu , Wanxiang Che, Ting Liu. EMNLP 2020 Accept-Findings. [Paper] [Paper(Arxiv)] [Code] [Chinese Blog] Dynamic Fusion Network for Multi-Domain End-to-end Task-Oriented Dialog. Libo Qin, Xiao Xu , Wanxiang Che, Yue Zhang, Ting Liu. ACL 2020. [Paper] [Paper(Arxiv)] [Code] [Chinese Blog] Awards \u00b6 Scholarship & Awards \u00b6 National Scholarship for Encouragement 2019. National Undergraduate Scholarship 2018. National Undergraduate Scholarship 2017.","title":"Homepage"},{"location":"#xu-xiao","text":"I am Xiao Xu, a Ph.D. student in Research Center for Social Computing and Information Retrieval at Harbin Institute of Technology (HIT, China) since 2020. I am fortunately advised by Prof. Wanxiang Che . In July 2020, I obtained B.S. degree in Northeastern University (NEU). I love Music, Singing, Animation, Sports, League of Legends, Apex Legends, and all good things in my life. Please contact me via xxu@ir.hit.edu.cn . Find me in: Google Scholar , Semantic Scholar , Github , Zhihu .","title":"Xu Xiao \u5f90\u5578"},{"location":"#research-interests","text":"Vision-and-Language, Task-oriented Dialogue System, Natural Language Processing.","title":"Research Interests"},{"location":"#news","text":"Nov., 2021. One paper was accepted by AAAI 2023 . Dec., 2021. One paper was accepted by AAAI 2022 . Aug., 2021. One paper was accepted by EMNLP 2021 . May., 2021. One paper was accepted by ACL 2021 . Sep., 2020. One paper was accepted to EMNLP 2020 . Apr., 2020. One paper was accepted by ACL 2020 .","title":"News"},{"location":"#publications","text":"BridgeTower: Building Bridges Between Encoders in Vision-Language Representation Learning. Xiao Xu , Chenfei Wu, Shachar Rosenman, Vasudev Lal, Wanxiang Che, Nan Duan. AAAI 2023. [Paper(Arxiv)] [Code] Text is no more Enough! A Benchmark for Profile-based Spoken Language Understanding. Libo Qin*, Xiao Xu* ,Kaiji Chen, Guoxing Wu, Linlin Li, Wanxiang Che. AAAI 2022. [Paper] [Paper(Arxiv)] [Code] Don't be Contradicted with Anything! CI-ToD: Towards Benchmarking Consistency for Task-oriented Dialogue System. Libo Qin, Tianbao Xie, Shijue Huang, Qiguang Chen, Xiao Xu , Wanxiang Che. EMNLP 2021. [Paper] [Paper(Arxiv)] [Code] GL-GIN: Fast and Accurate Non-Autoregressive Model for Joint Multiple Intent Detection and Slot Filling. Libo Qin, Fuxuan Wei, Tianbao Xie, Xiao Xu , Wanxiang Che, Ting Liu. ACL 2021. [Paper] [Paper(Arxiv)] [Code] AGIF: An Adaptive Graph-Interactive Framework for Joint Multiple Intent Detection and Slot Filling. Libo Qin, Xiao Xu , Wanxiang Che, Ting Liu. EMNLP 2020 Accept-Findings. [Paper] [Paper(Arxiv)] [Code] [Chinese Blog] Dynamic Fusion Network for Multi-Domain End-to-end Task-Oriented Dialog. Libo Qin, Xiao Xu , Wanxiang Che, Yue Zhang, Ting Liu. ACL 2020. [Paper] [Paper(Arxiv)] [Code] [Chinese Blog]","title":"Publications"},{"location":"#awards","text":"","title":"Awards"},{"location":"#scholarship-awards","text":"National Scholarship for Encouragement 2019. National Undergraduate Scholarship 2018. National Undergraduate Scholarship 2017.","title":"Scholarship &amp; Awards"},{"location":"Attention/","text":"\u80cc\u666f\u77e5\u8bc6 \u00b6 Attention\u662f\u4e00\u79cd\u7528\u4e8e\u63d0\u5347\u57fa\u4e8eRNN\uff08LSTM\u6216GRU\uff09\u7684Encoder + Decoder\u6a21\u578b\u7684\u6548\u679c\u7684\u7684\u673a\u5236\uff08Mechanism\uff09\uff0c\u4e00\u822c\u79f0\u4e3aAttention Mechanism\u3002Attention Mechanism\u76ee\u524d\u975e\u5e38\u6d41\u884c\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u673a\u5668\u7ffb\u8bd1\u3001\u8bed\u97f3\u8bc6\u522b\u3001\u56fe\u50cf\u6807\u6ce8\uff08Image Caption\uff09\u7b49\u5f88\u591a\u9886\u57df\uff0c\u4e4b\u6240\u4ee5\u5b83\u8fd9\u4e48\u53d7\u6b22\u8fce\uff0c\u662f\u56e0\u4e3aAttention\u7ed9\u6a21\u578b\u8d4b\u4e88\u4e86\u533a\u5206\u8fa8\u522b\u7684\u80fd\u529b\uff0c\u4f8b\u5982\uff0c\u5728\u673a\u5668\u7ffb\u8bd1\u3001\u8bed\u97f3\u8bc6\u522b\u5e94\u7528\u4e2d\uff0c\u4e3a\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u4f7f\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u7684\u5b66\u4e60\u53d8\u5f97\u66f4\u52a0\u7075\u6d3b\uff08soft\uff09\uff0c\u540c\u65f6Attention\u672c\u8eab\u53ef\u4ee5\u505a\u4e3a\u4e00\u79cd\u5bf9\u9f50\u5173\u7cfb\uff0c\u89e3\u91ca\u7ffb\u8bd1\u8f93\u5165/\u8f93\u51fa\u53e5\u5b50\u4e4b\u95f4\u7684\u5bf9\u9f50\u5173\u7cfb\uff0c\u89e3\u91ca\u6a21\u578b\u5230\u5e95\u5b66\u5230\u4e86\u4ec0\u4e48\u77e5\u8bc6\uff0c\u4e3a\u6211\u4eec\u6253\u5f00\u6df1\u5ea6\u5b66\u4e60\u7684\u9ed1\u7bb1\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7a97\u53e3\u3002 Attention Mechanism\u4e0e\u4eba\u7c7b\u5bf9\u5916\u754c\u4e8b\u7269\u7684\u89c2\u5bdf\u673a\u5236\u5f88\u7c7b\u4f3c\uff0c\u5f53\u4eba\u7c7b\u89c2\u5bdf\u5916\u754c\u4e8b\u7269\u7684\u65f6\u5019\uff0c\u4e00\u822c\u4e0d\u4f1a\u628a\u4e8b\u7269\u5f53\u6210\u4e00\u4e2a\u6574\u4f53\u53bb\u770b\uff0c\u5f80\u5f80\u503e\u5411\u4e8e\u6839\u636e\u9700\u8981\u9009\u62e9\u6027\u7684\u53bb\u83b7\u53d6\u88ab\u89c2\u5bdf\u4e8b\u7269\u7684\u67d0\u4e9b\u91cd\u8981\u90e8\u5206\uff0c\u6bd4\u5982\u6211\u4eec\u770b\u5230\u4e00\u4e2a\u4eba\u65f6\uff0c\u5f80\u5f80\u5148Attention\u5230\u8fd9\u4e2a\u4eba\u7684\u8138\uff0c\u7136\u540e\u518d\u628a\u4e0d\u540c\u533a\u57df\u7684\u4fe1\u606f\u7ec4\u5408\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u5bf9\u88ab\u89c2\u5bdf\u4e8b\u7269\u7684\u6574\u4f53\u5370\u8c61\u3002\u56e0\u6b64\uff0cAttention Mechanism\u53ef\u4ee5\u5e2e\u52a9\u6a21\u578b\u5bf9\u8f93\u5165\u7684X\u6bcf\u4e2a\u90e8\u5206\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u62bd\u53d6\u51fa\u66f4\u52a0\u5173\u952e\u53ca\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u4f7f\u6a21\u578b\u505a\u51fa\u66f4\u52a0\u51c6\u786e\u7684\u5224\u65ad\uff0c\u540c\u65f6\u4e0d\u4f1a\u5bf9\u6a21\u578b\u7684\u8ba1\u7b97\u548c\u5b58\u50a8\u5e26\u6765\u66f4\u5927\u7684\u5f00\u9500\uff0c\u8fd9\u4e5f\u662fAttention Mechanism\u5e94\u7528\u5982\u6b64\u5e7f\u6cdb\u7684\u539f\u56e0\u3002 Attention\u7b80\u4ecb \u00b6 \u5f88\u4e45\u4ee5\u524d \u00b6 \u8981\u4e48\u662f\u76f4\u63a5\u4f7f\u7528\u6700\u540e\u4e00\u4e2a time_step \u7684\u8f93\u51fa \u8981\u4e48\u662f\u628a\u6240\u6709 time_step \u7684\u8f93\u51fa max/average \u53d7\u5230\u675f\u7f1a\u7684Attention \u00b6 \u91cd\u70b9\u8bba\u6587 \u00b6 NEURAL MACHINE TRANSLATION BY JOINTLY LEARNING TO ALIGN AND TRANSLATE \u00b6 \u57fa\u4e8eattention\u7684NMT\u5728\u4f20\u7edf\u7684\u57fa\u7840\u4e0a\uff0c\u5b83\u628a\u6e90\u8bed\u8a00\u7aef\u7684\u6bcf\u4e2a\u8bcd\u5b66\u5230\u7684\u8868\u8fbe\uff08\u4f20\u7edf\u7684\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u8bcd\u540e\u5b66\u5230\u7684\u8868\u8fbe\uff09\u548c\u5f53\u524d\u8981\u9884\u6d4b\u7ffb\u8bd1\u7684\u8bcd\u8054\u7cfb\u4e86\u8d77\u6765\uff0c\u8fd9\u6837\u7684\u8054\u7cfb\u5c31\u662f\u901a\u8fc7\u4ed6\u4eec\u8bbe\u8ba1\u7684attention\u8fdb\u884c\u7684\uff0c\u5728\u6a21\u578b\u8bad\u7ec3\u597d\u540e\uff0c\u6839\u636eattention\u77e9\u9635\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u6e90\u8bed\u8a00\u548c\u76ee\u6807\u8bed\u8a00\u7684\u5bf9\u9f50\u77e9\u9635\u4e86\u3002 \u53ef\u4ee5\u770b\u5230\u4ed6\u4eec\u662f\u4f7f\u7528\u4e00\u4e2a\u611f\u77e5\u673a\u516c\u5f0f\u6765\u5c06\u76ee\u6807\u8bed\u8a00\u548c\u6e90\u8bed\u8a00\u7684\u6bcf\u4e2a\u8bcd\u8054\u7cfb\u4e86\u8d77\u6765\uff0c\u7136\u540e\u901a\u8fc7soft\u51fd\u6570\u5c06\u5176\u5f52\u4e00\u5316\u5f97\u5230\u4e00\u4e2a\u6982\u7387\u5206\u5e03\uff0c\u5c31\u662fattention\u77e9\u9635\u3002 SHOW, ATTEND AND TELL: NEURAL IMAGE CAPTION GENERATION WITH VISUAL ATTENTION \u00b6 \u968f\u673a\u6027\u4e0e\u786e\u5b9a\u6027 Stochastic \"Hard\" Attention\u548cDeterministic \"Soft\" Attention \u4f20\u7edf\u7684Attention Mechanism\u5c31\u662fSoft Attention\u3002Soft Attention\u662f\u53c2\u6570\u5316\u7684\uff08Parameterization\uff09\uff0c\u56e0\u6b64\u53ef\u5bfc\uff0c\u53ef\u4ee5\u88ab\u5d4c\u5165\u5230\u6a21\u578b\u4e2d\u53bb\uff0c\u76f4\u63a5\u8bad\u7ec3\u3002\u68af\u5ea6\u53ef\u4ee5\u7ecf\u8fc7Attention Mechanism\u6a21\u5757\uff0c\u53cd\u5411\u4f20\u64ad\u5230\u6a21\u578b\u5176\u4ed6\u90e8\u5206\u3002 \u76f8\u53cd\uff0cHard Attention\u662f\u4e00\u4e2a\u968f\u673a\u7684\u8fc7\u7a0b\u3002Hard Attention\u4e0d\u4f1a\u9009\u62e9\u6574\u4e2aencoder\u7684\u8f93\u51fa\u505a\u4e3a\u5176\u8f93\u5165\uff0cHard Attention\u4f1a\u4f9d\u6982\u7387Si\u6765\u91c7\u6837\u8f93\u5165\u7aef\u7684\u9690\u72b6\u6001\u4e00\u90e8\u5206\u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u800c\u4e0d\u662f\u6574\u4e2aencoder\u7684\u9690\u72b6\u6001\u3002\u4e3a\u4e86\u5b9e\u73b0\u68af\u5ea6\u7684\u53cd\u5411\u4f20\u64ad\uff0c\u9700\u8981\u91c7\u7528\u8499\u7279\u5361\u6d1b\u91c7\u6837\u7684\u65b9\u6cd5\u6765\u4f30\u8ba1\u6a21\u5757\u7684\u68af\u5ea6\u3002 \u4e24\u79cdAttention Mechanism\u90fd\u6709\u5404\u81ea\u7684\u4f18\u52bf\uff0c\u4f46\u76ee\u524d\u66f4\u591a\u7684\u7814\u7a76\u548c\u5e94\u7528\u8fd8\u662f\u66f4\u503e\u5411\u4e8e\u4f7f\u7528Soft Attention\uff0c\u56e0\u4e3a\u5176\u53ef\u4ee5\u76f4\u63a5\u6c42\u5bfc\uff0c\u8fdb\u884c\u68af\u5ea6\u53cd\u5411\u4f20\u64ad\u3002 Image caption (\u56fe\u50cf\u7406\u89e3)\u662f\u8ba1\u7b97\u673a\u89c6\u89c9\u7684\u6700\u521d\u59cb\u4efb\u52a1\uff0c\u4e0d\u4ec5\u8981\u83b7\u5f97\u56fe\u7247\u91cc\u7684\u7269\u4f53\uff0c\u8fd8\u8981\u8868\u8fbe\u4ed6\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u76ee\u524d\u73b0\u5b58\u7684\u65b9\u6cd5\u5927\u90fd\u662fencoder \u2014 decoder\u67b6\u6784\uff0c\u5229\u7528CNN\u3001RNN\u3001LSTM\u7b49\u795e\u7ecf\u7f51\u7edc\u5b8c\u6210caption\u5de5\u4f5c\uff0c\u6bd4\u5982\u8bf4\u53ea\u4f7f\u7528CNN\u5bf9\u56fe\u50cf\u8fdb\u884c\u7279\u5f81\u63d0\u53d6\uff0c\u7136\u540e\u5229\u7528\u63d0\u53d6\u7684\u7279\u5f81\u751f\u6210caption\uff0c\u8fd8\u6709\u7ed3\u5408CNN\u548cRNN\u7684\uff0c\u4f7f\u7528CNN\u63d0\u53d6\u56fe\u50cf\u7279\u5f81\uff0c\u5c06Softmax\u5c42\u4e4b\u524d\u7684\u90a3\u4e00\u5c42vector\u4f5c\u4e3aencoder\u7aef\u7684\u8f93\u51fa\u5e76\u9001\u5165decoder\u4e2d\uff0c\u4f7f\u7528LSTM\u5bf9\u5176\u89e3\u7801\u5e76\u751f\u6210\u53e5\u5b50\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u672c\u6587\u6240\u91c7\u53d6\u7684\u65b9\u6cd5\uff0c\u53ea\u662f\u5728\u6b64\u57fa\u7840\u4e0a\u5d4c\u5165\u4e86soft\u548chard attention\u673a\u5236\u3002 \u6a21\u578b\u7684\u603b\u4f53\u67b6\u6784\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e5f\u662f\u7531encoder\u548cdecoder\u7ec4\u6210\u3002 Encoder: \u6a21\u578b\u4f7f\u7528CNN\u6765\u63d0\u53d6 L \u4e2a D \u7ef4\u7684\u7279\u5f81vector\u4f5c\u4e3a\u6ce8\u91ca\u5411\u91cf\uff0c\u6bcf\u4e00\u4e2a\u90fd\u5bf9\u5e94\u56fe\u50cf\u7684\u4e00\u4e2a\u533a\u57df\uff0c\u5982\u4e0b\u5f0f\u3002 \u4e0e\u6b64\u524d\u7684\u5de5\u4f5c\u4f7f\u7528Softmax\u5c42\u4e4b\u524d\u7684\u5168\u8fde\u63a5\u5c42\u63d0\u53d6\u56fe\u50cf\u7279\u5f81\u4e0d\u540c\uff0c\u672c\u6587\u6240\u63d0\u53d6\u7684\u8fd9\u4e9bvector\u6765\u81ea\u4e8e low-level \u7684\u5377\u79ef\u5c42\uff0c\u8fd9\u4f7f\u5f97decoder\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u6240\u6709\u7279\u5f81\u5411\u91cf\u7684\u5b50\u96c6\u6765\u9009\u62e9\u6027\u5730\u805a\u7126\u4e8e\u56fe\u50cf\u7684\u67d0\u4e9b\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u5c06attention\u673a\u5236\u5d4c\u5165\u3002 Decoder: \u89e3\u7801\u9636\u6bb5\u7528LSTM\u7f51\u7edc\u751f\u6210caption\uff0c\u96c6\u5408\u4e3a\u4e0b\u5f0f\uff0c\u5176\u4e2dC\u662f\u53e5\u5b50\u957f\u5ea6\uff0cK\u662f\u8bcd\u8868\u5927\u5c0f\uff0cy\u662f\u5404\u4e2a\u8bcd\u7684one-hot\u7f16\u7801\u6240\u6784\u6210\u7684\u96c6\u5408\u3002 \u53ef\u4ee5\u770b\u5230\uff0chard attention \u4f1a\u4e13\u6ce8\u4e8e\u5f88\u5c0f\u7684\u533a\u57df\uff0c\u800c soft attention \u7684\u6ce8\u610f\u529b\u76f8\u5bf9\u53d1\u6563 \\(z_t\\) \u7531 \\(a_i\\) \u548c\u6743\u91cd \\(a_{ti}\\) \u901a\u8fc7\u52a0\u6743\u5f97\u5230\u5bf9\u4e8e\u6bcf\u4e2a\u65f6\u95f4\u7684\u6bcf\u4e2a\u533a\u57df\u90fd\u5b9a\u4e49\u4e00\u4e2a\u6743\u91cd\u503c \\(a_{ti}\\) \u3002\u4e3a\u4e86\u6ee1\u8db3\u6743\u91cd\u7684\u5f52\u4e00\u5316\uff0c\u6211\u4eec\u901a\u8fc7softmax\u51fd\u6570\u5b9e\u73b0\uff0c\u5982\u4e0b\u5f0f\uff0cSoftmax\u7684\u8f93\u5165\u9700\u8981\u5305\u542b\u4f4d\u7f6e\u4fe1\u606f\u548c\u524d\u4e00\u65f6\u523b\u9690\u5c42\u503c\uff0c\u672c\u6587\u4e2d\u7684 \\(f_{att}\\) \u662f\u4e00\u4e2a\u591a\u5c42\u611f\u77e5\u673a Stochastic Hard Attention \u00b6 \u8bb0 \\(s_t\\) \u4e3a decoder \u7b2c t \u4e2a\u65f6\u523b\u7684 attention \u6240\u5173\u6ce8\u7684\u4f4d\u7f6e\u7f16\u53f7\uff0c \\(S_ti\\) \u8868\u793a\u7b2c t \u65f6\u523b attention \u662f\u5426\u5173\u6ce8\u4f4d\u7f6e i \uff0c\u670d\u4ece\u591a\u5143\u4f2f\u52aa\u5229\u5206\u5e03\uff0c \\(\u2200t,S_{ti},i=1,2,...,L\\) \u4e2d\u6709\u4e14\u53ea\u6709\u53d6 1\uff0c\u5176\u4f59\u5168\u90e8\u4e3a 0\uff0c\u6240\u4ee5\u662f one-hot \u5f62\u5f0f\u3002\u8fd9\u79cd attention \u6bcf\u6b21\u53ea focus \u4e00\u4e2a\u4f4d\u7f6e\u7684\u505a\u6cd5\uff0c\u5c31\u662f\u201chard\u201d\u79f0\u8c13\u7684\u6765\u6e90\u3002 \\(z_t\\) \u4e5f\u5c31\u88ab\u89c6\u4e3a\u4e00\u4e2a\u53d8\u91cf\uff0c\u8ba1\u7b97\u5982\u4e0b\uff1a \u95ee\u9898\u662f \u03b1ti \u600e\u4e48\u7b97\u5462\uff1f\u628a \u03b1ti \u89c6\u4e3a\u9690\u53d8\u91cf\uff0c\u7814\u7a76\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\uff0c\u8fdb\u800c\u7814\u7a76\u76ee\u6807\u51fd\u6570\u5bf9\u53c2\u6570\u7684\u68af\u5ea6\u3002\u76f4\u89c2\u7406\u89e3\uff0c\u6a21\u578b\u8981\u6839\u636e a=(a1,...,aL) \u6765\u751f\u6210\u5e8f\u5217 y=(y1,...,yC) \uff0c\u6240\u4ee5\u76ee\u6807\u53ef\u4ee5\u662f\u6700\u5927\u5316 log p(y|a) \uff0c\u4f46\u8fd9\u91cc\u6ca1\u6709\u663e\u5f0f\u7684\u5305\u542b s \uff0c\u6240\u4ee5\u4f5c\u8005\u5229\u7528\u8457\u540d\u7684 Jensen \u4e0d\u7b49\u5f0f\uff08Jensen's inequality\uff09\u5bf9\u76ee\u6807\u51fd\u6570\u505a\u4e86\u8f6c\u5316\uff0c\u5f97\u5230\u4e86\u76ee\u6807\u51fd\u6570\u7684\u4e00\u4e2a lower bound\uff0c\u5982\u4e0b\uff1a Deterministic Soft Attention \u00b6 soft attention \u6bcf\u6b21\u4f1a\u7167\u987e\u5230\u5168\u90e8\u7684\u4f4d\u7f6e\uff0c\u53ea\u662f\u4e0d\u540c\u4f4d\u7f6e\u7684\u6743\u91cd\u4e0d\u540c\u7f62\u4e86\u3002\u8fd9\u65f6 Zt \u5373\u4e3a ai \u7684\u52a0\u6743\u6c42\u548c EFFECTIVE APPROACHES TO ATTENTION-BASED NEURAL MACHINE TRANSLATION \u00b6 \u8fd9\u7bc7\u8bba\u6587\u662f\u7ee7\u4e0a\u4e00\u7bc7\u8bba\u6587\u540e\uff0c\u4e00\u7bc7\u5f88\u5177\u4ee3\u8868\u6027\u7684\u8bba\u6587\uff0c\u4ed6\u4eec\u7684\u5de5\u4f5c\u544a\u8bc9\u4e86\u5927\u5bb6attention\u5728RNN\u4e2d\u53ef\u4ee5\u5982\u4f55\u8fdb\u884c\u6269\u5c55\uff0c\u8fd9\u7bc7\u8bba\u6587\u5bf9\u540e\u7eed\u5404\u79cd\u57fa\u4e8eattention\u7684\u6a21\u578b\u5728NLP\u5e94\u7528\u8d77\u5230\u4e86\u5f88\u5927\u7684\u4fc3\u8fdb\u4f5c\u7528\u3002\u5728\u8bba\u6587\u4e2d\u4ed6\u4eec\u63d0\u51fa\u4e86\u4e24\u79cdattention\u673a\u5236\uff0c\u4e00\u79cd\u662f\u5168\u5c40\uff08global\uff09\u673a\u5236\uff0c\u4e00\u79cd\u662f\u5c40\u90e8\uff08local\uff09\u673a\u5236\u3002 Global Attention \u00b6 \u6240\u6709\u7684 hidden state \u90fd\u88ab\u7528\u4e8e\u8ba1\u7b97 Context vector \u7684\u6743\u91cd\uff0c\u5373\u53d8\u957f\u7684\u5bf9\u9f50\u5411\u91cfat\uff0c\u5176\u957f\u5ea6\u7b49\u4e8eencoder\u7aef\u8f93\u5165\u53e5\u5b50\u7684\u957f\u5ea6\u3002\u5728t\u65f6\u523b\uff0c\u9996\u5148\u57fa\u4e8edecoder\u7684\u9690\u72b6\u6001htht\u548c\u6e90\u7aef\u7684\u9690\u72b6\u6001hs\uff0c\u8ba1\u7b97\u4e00\u4e2a\u53d8\u957f\u7684\u9690\u5bf9\u9f50\u6743\u503c\u5411\u91cfat\uff0c\u4e4b\u540e\u901a\u8fc7\u52a0\u6743\u5e73\u5747\u7684\u65b9\u5f0f\uff0c\u5f97\u5230\u4e0a\u4e0b\u6587\u5411\u91cfct\u3002 Local Attention \u00b6 Global Attention\u6709\u4e00\u4e2a\u660e\u663e\u7684\u7f3a\u70b9\u5c31\u662f\uff0c\u6bcf\u4e00\u6b21\uff0cencoder\u7aef\u7684\u6240\u6709hidden state\u90fd\u8981\u53c2\u4e0e\u8ba1\u7b97\uff0c\u8fd9\u6837\u505a\u8ba1\u7b97\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927\uff0c\u7279\u522b\u662f\u5f53encoder\u7684\u53e5\u5b50\u504f\u957f\uff0c\u6bd4\u5982\uff0c\u4e00\u6bb5\u8bdd\u6216\u8005\u4e00\u7bc7\u6587\u7ae0\uff0c\u6548\u7387\u504f\u4f4e\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0cLocal Attention\u5e94\u8fd0\u800c\u751f\u3002 Local Attention\u662f\u4e00\u79cd\u4ecb\u4e8eKelvin Xu\u6240\u63d0\u51fa\u7684Soft Attention\u548cHard Attention\u4e4b\u95f4\u7684\u4e00\u79cdAttention\u65b9\u5f0f\uff0c\u5373\u628a\u4e24\u79cd\u65b9\u5f0f\u7ed3\u5408\u8d77\u6765\u3002\u56e0\u4e3a\u5b83\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u8981\u4f4e\u4e8e global attention\u3001soft attention\uff0c\u800c\u4e14\u4e0e hard attention \u4e0d\u540c\u7684\u662f\uff0clocal attention \u51e0\u4e4e\u5904\u5904\u53ef\u5fae\uff0c\u6613\u4e0e\u8bad\u7ec3\u3002 \u6839\u636e\u4e00\u4e2a\u9884\u6d4b\u51fd\u6570\uff0c\u5148\u9884\u6d4b\u5f53\u524d\u89e3\u7801\u65f6\u8981\u5bf9\u9f50\u7684\u6e90\u8bed\u8a00\u7aef\u7684\u4f4d\u7f6ePt\uff0c\u7136\u540e\u901a\u8fc7\u4e0a\u4e0b\u6587\u7a97\u53e3\uff0c\u4ec5\u8003\u8651\u7a97\u53e3\u5185\u7684\u8bcd\u3002 \u5176\u4e2d pt \u662f\u4e00\u4e2a source position index\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a attention \u7684\u201c\u7126\u70b9\u201d\uff0c\u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0cD\u6839\u636e\u7ecf\u9a8c\u6765\u9009\u62e9\uff08\u6587\u7ae0\u9009\u7528 10\uff09\u3002 \u5173\u4e8e pt \u7684\u8ba1\u7b97\uff0c\u6587\u7ae0\u7ed9\u51fa\u4e86\u4e24\u79cd\u8ba1\u7b97\u65b9\u6848\uff1a local-p local-m \u4e58\u4e86\u4e00\u4e2apt\u4f4d\u7f6e\u76f8\u5173\u7684\u9ad8\u65af\u5206\u5e03 \u5176\u4e2d WpWp\u548cvpvp \u662f\u6a21\u578b\u7684\u53c2\u6570\uff0c S \u662f source sentence \u7684\u957f\u5ea6\uff0c\u6613\u77e5 pt\u2208[0,S] \u3002\u6743\u91cd \u03b1t(s) \u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \u53ef\u4ee5\u770b\u51fa\uff0c\u8ddd\u79bb\u4e2d\u5fc3 pt \u8d8a\u8fdc\u7684\u4f4d\u7f6e\uff0c\u5176\u4f4d\u7f6e\u4e0a\u7684 source hidden state \u5bf9\u5e94\u7684\u6743\u91cd\u5c31\u4f1a\u88ab\u538b\u7f29\u5730\u8d8a\u5389\u5bb3\u3002 \u603b\u7ed3 \u00b6 \u603b\u4e4b\uff0cGlobal Attention\u548cLocal Attention\u5404\u6709\u4f18\u52a3\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0cGlobal Attention\u5e94\u7528\u66f4\u666e\u904d\uff0c\u56e0\u4e3alocal Attention\u9700\u8981\u9884\u6d4b\u4e00\u4e2a\u4f4d\u7f6e\u5411\u91cfp\uff0c\u8fd9\u5c31\u5e26\u6765\u4e24\u4e2a\u95ee\u9898\uff1a1\u3001\u5f53encoder\u53e5\u5b50\u4e0d\u662f\u5f88\u957f\u65f6\uff0c\u76f8\u5bf9Global Attention\uff0c\u8ba1\u7b97\u91cf\u5e76\u6ca1\u6709\u660e\u663e\u51cf\u5c0f\u30022\u3001\u4f4d\u7f6e\u5411\u91cfpt\u7684\u9884\u6d4b\u5e76\u4e0d\u975e\u5e38\u51c6\u786e\uff0c\u8fd9\u5c31\u76f4\u63a5\u8ba1\u7b97\u7684\u5230\u7684local Attention\u7684\u51c6\u786e\u7387\u3002 A STRUCTURED SELF-ATTENTIVE SENTENCE EMBEDDING \u00b6 \u4e0d\u518d\u4f7f\u7528\u4e00\u7ef4\u7684\u6743\u91cd\u503c\u8f6c\u6362\u4e3a\u6743\u91cd\u77e9\u9635\uff0c\u5e76\u4e14\u4e3a\u6b64\u5bf9\u635f\u5931\u51fd\u6570\u52a0\u4ee5\u6539\u8fdb \u7b80\u800c\u8a00\u4e4b \u00b6 \u8f93\u5165q\u3001k\u3001v\uff0c\u5206\u522b\u4ee3\u8868query\u3001key-value pair\u3002\u8fd9\u91cc\u7684 key,value, \u548c query\u9700\u8981\u89e3\u91ca\u4e00\u4e0b\uff0c\u8fd9\u91cc\u628aattention\u62bd\u8c61\u4e3a\u5bf9 value() \u7684\u6bcf\u4e2a token\u8fdb\u884c\u52a0\u6743\uff0c\u800c\u52a0\u6743\u7684weight\u5c31\u662f attentionweight\uff0c\u800c attention weight \u5c31\u662f\u6839\u636e query\u548c key \u8ba1\u7b97\u5f97\u5230\uff0c\u5176\u610f\u4e49\u4e3a\uff1a\u4e3a\u4e86\u7528 value\u6c42\u51fa query\u7684\u7ed3\u679c, \u6839\u636e query\u548c key \u6765\u51b3\u5b9a\u6ce8\u610f\u529b\u5e94\u8be5\u653e\u5728value\u7684\u54ea\u90e8\u5206\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0ckey\u548cvalue\u90fd\u6307\u5411\u5355\u8bcd\u7684embedding\u3002Decoder\u751f\u6210\u7684query\u548cencoder\u751f\u6210\u7684key\u8fd0\u7b97\u5f97\u5230attentionweight \u518d\u548cvalue\u52a0\u6743\u6c42\u548c \u3002 \u672c\u8d28\u7406\u89e3 \u00b6 \u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u770b\u5f85Attention\u673a\u5236\uff1a\u5c06Source\u4e2d\u7684\u6784\u6210\u5143\u7d20\u60f3\u8c61\u6210\u662f\u7531\u4e00\u7cfb\u5217\u7684\u6570\u636e\u5bf9\u6784\u6210\uff0c\u6b64\u65f6\u7ed9\u5b9aTarget\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20Query\uff0c\u901a\u8fc7\u8ba1\u7b97Query\u548c\u5404\u4e2aKey\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff0c\u5f97\u5230\u6bcf\u4e2aKey\u5bf9\u5e94Value\u7684\u6743\u91cd\u7cfb\u6570\uff0c\u7136\u540e\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u5373\u5f97\u5230\u4e86\u6700\u7ec8\u7684Attention\u6570\u503c\u3002\u6240\u4ee5\u672c\u8d28\u4e0aAttention\u673a\u5236\u662f\u5bf9Source\u4e2d\u5143\u7d20\u7684Value\u503c\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u800cQuery\u548cKey\u7528\u6765\u8ba1\u7b97\u5bf9\u5e94Value\u7684\u6743\u91cd\u7cfb\u6570\u3002\u5373\u53ef\u4ee5\u5c06\u5176\u672c\u8d28\u601d\u60f3\u6539\u5199\u4e3a\u5982\u4e0b\u516c\u5f0f\uff1a \u5176\u4e2d\uff0c \\(Lx=|Source|\\) \u4ee3\u8868Source\u7684\u957f\u5ea6\uff0c\u516c\u5f0f\u542b\u4e49\u5373\u5982\u4e0a\u6240\u8ff0\u3002\u4e0a\u6587\u6240\u4e3e\u7684\u673a\u5668\u7ffb\u8bd1\u7684\u4f8b\u5b50\u91cc\uff0c\u56e0\u4e3a\u5728\u8ba1\u7b97Attention\u7684\u8fc7\u7a0b\u4e2d\uff0cSource\u4e2d\u7684Key\u548cValue\u5408\u4e8c\u4e3a\u4e00\uff0c\u6307\u5411\u7684\u662f\u540c\u4e00\u4e2a\u4e1c\u897f\uff0c\u4e5f\u5373\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u5e94\u7684\u8bed\u4e49\u7f16\u7801\uff0c\u6240\u4ee5\u53ef\u80fd\u4e0d\u5bb9\u6613\u770b\u51fa\u8fd9\u79cd\u80fd\u591f\u4f53\u73b0\u672c\u8d28\u601d\u60f3\u7684\u7ed3\u6784\u3002 \u5f53\u7136\uff0c\u4ece\u6982\u5ff5\u4e0a\u7406\u89e3\uff0c\u628aAttention\u4ecd\u7136\u7406\u89e3\u4e3a\u4ece\u5927\u91cf\u4fe1\u606f\u4e2d\u6709\u9009\u62e9\u5730\u7b5b\u9009\u51fa\u5c11\u91cf\u91cd\u8981\u4fe1\u606f\u5e76\u805a\u7126\u5230\u8fd9\u4e9b\u91cd\u8981\u4fe1\u606f\u4e0a\uff0c\u5ffd\u7565\u5927\u591a\u4e0d\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u8fd9\u79cd\u601d\u8def\u4ecd\u7136\u6210\u7acb\u3002\u805a\u7126\u7684\u8fc7\u7a0b\u4f53\u73b0\u5728\u6743\u91cd\u7cfb\u6570\u7684\u8ba1\u7b97\u4e0a\uff0c\u6743\u91cd\u8d8a\u5927\u8d8a\u805a\u7126\u4e8e\u5176\u5bf9\u5e94\u7684Value\u503c\u4e0a\uff0c\u5373\u6743\u91cd\u4ee3\u8868\u4e86\u4fe1\u606f\u7684\u91cd\u8981\u6027\uff0c\u800cValue\u662f\u5176\u5bf9\u5e94\u7684\u4fe1\u606f\u3002 \u4ece\u4e0a\u56fe\u53ef\u4ee5\u5f15\u51fa\u53e6\u5916\u4e00\u79cd\u7406\u89e3\uff0c\u4e5f\u53ef\u4ee5\u5c06Attention\u673a\u5236\u770b\u4f5c\u4e00\u79cd\u8f6f\u5bfb\u5740\uff08Soft Addressing\uff09:Source\u53ef\u4ee5\u770b\u4f5c\u5b58\u50a8\u5668\u5185\u5b58\u50a8\u7684\u5185\u5bb9\uff0c\u5143\u7d20\u7531\u5730\u5740Key\u548c\u503cValue\u7ec4\u6210\uff0c\u5f53\u524d\u6709\u4e2aKey=Query\u7684\u67e5\u8be2\uff0c\u76ee\u7684\u662f\u53d6\u51fa\u5b58\u50a8\u5668\u4e2d\u5bf9\u5e94\u7684Value\u503c\uff0c\u5373Attention\u6570\u503c\u3002\u901a\u8fc7Query\u548c\u5b58\u50a8\u5668\u5185\u5143\u7d20Key\u7684\u5730\u5740\u8fdb\u884c\u76f8\u4f3c\u6027\u6bd4\u8f83\u6765\u5bfb\u5740\uff0c\u4e4b\u6240\u4ee5\u8bf4\u662f\u8f6f\u5bfb\u5740\uff0c\u6307\u7684\u4e0d\u50cf\u4e00\u822c\u5bfb\u5740\u53ea\u4ece\u5b58\u50a8\u5185\u5bb9\u91cc\u9762\u627e\u51fa\u4e00\u6761\u5185\u5bb9\uff0c\u800c\u662f\u53ef\u80fd\u4ece\u6bcf\u4e2aKey\u5730\u5740\u90fd\u4f1a\u53d6\u51fa\u5185\u5bb9\uff0c\u53d6\u51fa\u5185\u5bb9\u7684\u91cd\u8981\u6027\u6839\u636eQuery\u548cKey\u7684\u76f8\u4f3c\u6027\u6765\u51b3\u5b9a\uff0c\u4e4b\u540e\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u53d6\u51fa\u6700\u7ec8\u7684Value\u503c\uff0c\u4e5f\u5373Attention\u503c\u3002\u6240\u4ee5\u4e0d\u5c11\u7814\u7a76\u4eba\u5458\u5c06Attention\u673a\u5236\u770b\u4f5c\u8f6f\u5bfb\u5740\u7684\u4e00\u79cd\u7279\u4f8b\uff0c\u8fd9\u4e5f\u662f\u975e\u5e38\u6709\u9053\u7406\u7684\u3002 \u81f3\u4e8eAttention\u673a\u5236\u7684\u5177\u4f53\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u5982\u679c\u5bf9\u76ee\u524d\u5927\u591a\u6570\u65b9\u6cd5\u8fdb\u884c\u62bd\u8c61\u7684\u8bdd\uff0c\u53ef\u4ee5\u5c06\u5176\u5f52\u7eb3\u4e3a\u4e24\u4e2a\u8fc7\u7a0b\uff1a\u7b2c\u4e00\u4e2a\u8fc7\u7a0b\u662f\u6839\u636eQuery\u548cKey\u8ba1\u7b97\u6743\u91cd\u7cfb\u6570\uff0c\u7b2c\u4e8c\u4e2a\u8fc7\u7a0b\u6839\u636e\u6743\u91cd\u7cfb\u6570\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u3002\u800c\u7b2c\u4e00\u4e2a\u8fc7\u7a0b\u53c8\u53ef\u4ee5\u7ec6\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a\u7b2c\u4e00\u4e2a\u9636\u6bb5\u6839\u636eQuery\u548cKey\u8ba1\u7b97\u4e24\u8005\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff1b\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u5bf9\u7b2c\u4e00\u9636\u6bb5\u7684\u539f\u59cb\u5206\u503c\u8fdb\u884c\u5f52\u4e00\u5316\u5904\u7406\uff1b\u8fd9\u6837\uff0c\u53ef\u4ee5\u5c06Attention\u7684\u8ba1\u7b97\u8fc7\u7a0b\u62bd\u8c61\u4e3a\u5982\u56fe\u5c55\u793a\u7684\u4e09\u4e2a\u9636\u6bb5\u3002 \u5728\u7b2c\u4e00\u4e2a\u9636\u6bb5\uff0c\u53ef\u4ee5\u5f15\u5165\u4e0d\u540c\u7684\u51fd\u6570\u548c\u8ba1\u7b97\u673a\u5236\uff0c\u6839\u636eQuery\u548c\u67d0\u4e2aKey_i\uff0c\u8ba1\u7b97\u4e24\u8005\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff0c\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u5305\u62ec\uff1a\u6c42\u4e24\u8005\u7684\u5411\u91cf\u70b9\u79ef\u3001\u6c42\u4e24\u8005\u7684\u5411\u91cfCosine\u76f8\u4f3c\u6027\u6216\u8005\u901a\u8fc7\u518d\u5f15\u5165\u989d\u5916\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u6c42\u503c\uff0c\u5373\u5982\u4e0b\u65b9\u5f0f\uff1a \u7b2c\u4e00\u9636\u6bb5\u4ea7\u751f\u7684\u5206\u503c\u6839\u636e\u5177\u4f53\u4ea7\u751f\u7684\u65b9\u6cd5\u4e0d\u540c\u5176\u6570\u503c\u53d6\u503c\u8303\u56f4\u4e5f\u4e0d\u4e00\u6837\uff0c\u7b2c\u4e8c\u9636\u6bb5\u5f15\u5165\u7c7b\u4f3cSoftMax\u7684\u8ba1\u7b97\u65b9\u5f0f\u5bf9\u7b2c\u4e00\u9636\u6bb5\u7684\u5f97\u5206\u8fdb\u884c\u6570\u503c\u8f6c\u6362\uff0c\u4e00\u65b9\u9762\u53ef\u4ee5\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5c06\u539f\u59cb\u8ba1\u7b97\u5206\u503c\u6574\u7406\u6210\u6240\u6709\u5143\u7d20\u6743\u91cd\u4e4b\u548c\u4e3a1\u7684\u6982\u7387\u5206\u5e03\uff1b\u53e6\u4e00\u65b9\u9762\u4e5f\u53ef\u4ee5\u901a\u8fc7SoftMax\u7684\u5185\u5728\u673a\u5236\u66f4\u52a0\u7a81\u51fa\u91cd\u8981\u5143\u7d20\u7684\u6743\u91cd\u3002\u5373\u4e00\u822c\u91c7\u7528\u5982\u4e0b\u516c\u5f0f\u8ba1\u7b97\uff1a \u7b2c\u4e8c\u9636\u6bb5\u7684\u8ba1\u7b97\u7ed3\u679caiai\u5373\u4e3avalueivaluei\u5bf9\u5e94\u7684\u6743\u91cd\u7cfb\u6570\uff0c\u7136\u540e\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5373\u53ef\u5f97\u5230Attention\u6570\u503c\uff1a \u901a\u8fc7\u5982\u4e0a\u4e09\u4e2a\u9636\u6bb5\u7684\u8ba1\u7b97\uff0c\u5373\u53ef\u6c42\u51fa\u9488\u5bf9Query\u7684Attention\u6570\u503c\uff0c\u76ee\u524d\u7edd\u5927\u591a\u6570\u5177\u4f53\u7684\u6ce8\u610f\u529b\u673a\u5236\u8ba1\u7b97\u65b9\u6cd5\u90fd\u7b26\u5408\u4e0a\u8ff0\u7684\u4e09\u9636\u6bb5\u62bd\u8c61\u8ba1\u7b97\u8fc7\u7a0b\u3002 \u5176\u4ed6 \u00b6 \u57fa\u4e8eCNN\u7684Seq2Seq+attention\u7684\u4f18\u70b9\uff1a\u57fa\u4e8eCNN\u7684Seq2Seq\u6a21\u578b\u5177\u6709\u57fa\u4e8eRNN\u7684Seq2Seq\u6a21\u578b\u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56\u7684\u80fd\u529b\uff0c\u6b64\u5916\uff0c\u6700\u5927\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u5e76\u884c\u5316\u5b9e\u73b0\uff0c\u6548\u7387\u6bd4\u57fa\u4e8eRNN\u7684Seq2Seq\u6a21\u578b\u9ad8\u3002\u7f3a\u70b9\uff1a\u8ba1\u7b97\u91cf\u4e0e\u89c2\u6d4b\u5e8f\u5217X\u548c\u8f93\u51fa\u5e8f\u5217Y\u7684\u957f\u5ea6\u6210\u6b63\u6bd4\u3002 Transformer: Attention is all your need \u00b6 \u7b80\u4ecb \u00b6 Self Attention\u4e5f\u7ecf\u5e38\u88ab\u79f0\u4e3aintra Attention\u3002\u4e0e\u4f20\u7edf\u7684Attention\u673a\u5236\u975e\u5e38\u7684\u4e0d\u540c\uff1a\u4f20\u7edf\u7684Attention\u662f\u57fa\u4e8esource\u7aef\u548ctarget\u7aef\u7684hidden state\u8ba1\u7b97Attention\u7684\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6e90\u7aef\u7684\u6bcf\u4e2a\u8bcd\u4e0e\u76ee\u6807\u7aef\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u4f46Self Attention\u4e0d\u540c\uff0c\u5b83\u5206\u522b\u5728source\u7aef\u548ctarget\u7aef\u8fdb\u884c\uff0c\u4ec5\u4e0esource input\u6216\u8005target input\u81ea\u8eab\u76f8\u5173\u7684Self Attention\uff0c\u6355\u6349source\u7aef\u6216target\u7aef\u81ea\u8eab\u7684\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u7136\u540e\u518d\u628asource\u7aef\u7684\u5f97\u5230\u7684self Attention\u52a0\u5165\u5230target\u7aef\u5f97\u5230\u7684Attention\u4e2d\uff0c\u6355\u6349source\u7aef\u548ctarget\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u56e0\u6b64\uff0cself Attention Attention\u6bd4\u4f20\u7edf\u7684Attention mechanism\u6548\u679c\u8981\u597d\uff0c\u4e3b\u8981\u539f\u56e0\u4e4b\u4e00\u662f\uff0c\u4f20\u7edf\u7684Attention\u673a\u5236\u5ffd\u7565\u4e86**\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb**\uff0c\u76f8\u5bf9\u6bd4\uff0cself Attention\u53ef\u4ee5\u4e0d\u4ec5\u53ef\u4ee5\u5f97\u5230\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u6709\u6548\u83b7\u53d6\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u81ea\u8eab\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5728\u4e00\u822c\u4efb\u52a1\u7684Encoder-Decoder\u6846\u67b6\u4e2d\uff0c\u8f93\u5165Source\u548c\u8f93\u51faTarget\u5185\u5bb9\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6bd4\u5982\u5bf9\u4e8e\u82f1-\u4e2d\u673a\u5668\u7ffb\u8bd1\u6765\u8bf4\uff0cSource\u662f\u82f1\u6587\u53e5\u5b50\uff0cTarget\u662f\u5bf9\u5e94\u7684\u7ffb\u8bd1\u51fa\u7684\u4e2d\u6587\u53e5\u5b50\uff0cAttention\u673a\u5236\u53d1\u751f\u5728Target\u7684\u5143\u7d20Query\u548cSource\u4e2d\u7684\u6240\u6709\u5143\u7d20\u4e4b\u95f4\u3002\u800cSelf Attention\u987e\u540d\u601d\u4e49\uff0c\u6307\u7684\u4e0d\u662fTarget\u548cSource\u4e4b\u95f4\u7684Attention\u673a\u5236\uff0c\u800c\u662fSource\u5185\u90e8\u5143\u7d20\u4e4b\u95f4\u6216\u8005Target\u5185\u90e8\u5143\u7d20\u4e4b\u95f4\u53d1\u751f\u7684Attention\u673a\u5236\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3aTarget=Source\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0b\u7684\u6ce8\u610f\u529b\u8ba1\u7b97\u673a\u5236\u3002\u5176\u5177\u4f53\u8ba1\u7b97\u8fc7\u7a0b\u662f\u4e00\u6837\u7684\uff0c\u53ea\u662f\u8ba1\u7b97\u5bf9\u8c61\u53d1\u751f\u4e86\u53d8\u5316\u800c\u5df2\uff0c\u6240\u4ee5\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u5176\u8ba1\u7b97\u8fc7\u7a0b\u7ec6\u8282\u3002 \u5982\u679c\u662f\u5e38\u89c4\u7684Target\u4e0d\u7b49\u4e8eSource\u60c5\u5f62\u4e0b\u7684\u6ce8\u610f\u529b\u8ba1\u7b97\uff0c\u5176\u7269\u7406\u542b\u4e49\u6b63\u5982\u4e0a\u6587\u6240\u8bb2\uff0c\u6bd4\u5982\u5bf9\u4e8e\u673a\u5668\u7ffb\u8bd1\u6765\u8bf4\uff0c\u672c\u8d28\u4e0a\u662f\u76ee\u6807\u8bed\u5355\u8bcd\u548c\u6e90\u8bed\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u79cd\u5355\u8bcd\u5bf9\u9f50\u673a\u5236\u3002\u90a3\u4e48\u5982\u679c\u662fSelf Attention\u673a\u5236\uff0c\u4e00\u4e2a\u5f88\u81ea\u7136\u7684\u95ee\u9898\u662f\uff1a\u901a\u8fc7Self Attention\u5230\u5e95\u5b66\u5230\u4e86\u54ea\u4e9b\u89c4\u5f8b\u6216\u8005\u62bd\u53d6\u51fa\u4e86\u54ea\u4e9b\u7279\u5f81\u5462\uff1f\u6216\u8005\u8bf4\u5f15\u5165Self Attention\u6709\u4ec0\u4e48\u589e\u76ca\u6216\u8005\u597d\u5904\u5462\uff1f\u6211\u4eec\u4ecd\u7136\u4ee5\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684Self Attention\u6765\u8bf4\u660e\uff0c\u4e0b\u56fe\u53ef\u89c6\u5316\u5730\u8868\u793aSelf Attention\u5728\u540c\u4e00\u4e2a\u82f1\u8bed\u53e5\u5b50\u5185\u5355\u8bcd\u95f4\u4ea7\u751f\u7684\u8054\u7cfb\u3002 \u4ece\u4e24\u5f20\u56fe\u53ef\u4ee5\u770b\u51fa\uff0cSelf Attention\u53ef\u4ee5\u6355\u83b7\u540c\u4e00\u4e2a\u53e5\u5b50\u4e2d\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e9b\u53e5\u6cd5\u7279\u5f81\uff08\u6bd4\u5982\u5c55\u793a\u7684\u6709\u4e00\u5b9a\u8ddd\u79bb\u7684\u77ed\u8bed\u7ed3\u6784\uff09\u6216\u8005\u8bed\u4e49\u7279\u5f81\uff08\u6bd4\u5982\u5c55\u793a\u7684its\u7684\u6307\u4ee3\u5bf9\u8c61Law\uff09\u3002\u5f88\u660e\u663e\uff0c\u5f15\u5165Self Attention\u540e\u4f1a\u66f4\u5bb9\u6613\u6355\u83b7\u53e5\u5b50\u4e2d\u957f\u8ddd\u79bb\u7684\u76f8\u4e92\u4f9d\u8d56\u7684\u7279\u5f81\uff0c\u56e0\u4e3a\u5982\u679c\u662fRNN\u6216\u8005LSTM\uff0c\u9700\u8981\u4f9d\u6b21\u5e8f\u5e8f\u5217\u8ba1\u7b97\uff0c\u5bf9\u4e8e\u8fdc\u8ddd\u79bb\u7684\u76f8\u4e92\u4f9d\u8d56\u7684\u7279\u5f81\uff0c\u8981\u7ecf\u8fc7\u82e5\u5e72\u65f6\u95f4\u6b65\u6b65\u9aa4\u7684\u4fe1\u606f\u7d2f\u79ef\u624d\u80fd\u5c06\u4e24\u8005\u8054\u7cfb\u8d77\u6765\uff0c\u800c\u8ddd\u79bb\u8d8a\u8fdc\uff0c\u6709\u6548\u6355\u83b7\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002 \u4f46\u662fSelf Attention\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u4f1a\u76f4\u63a5\u5c06\u53e5\u5b50\u4e2d\u4efb\u610f\u4e24\u4e2a\u5355\u8bcd\u7684\u8054\u7cfb\u901a\u8fc7\u4e00\u4e2a\u8ba1\u7b97\u6b65\u9aa4\u76f4\u63a5\u8054\u7cfb\u8d77\u6765\uff0c\u6240\u4ee5\u8fdc\u8ddd\u79bb\u4f9d\u8d56\u7279\u5f81\u4e4b\u95f4\u7684\u8ddd\u79bb\u88ab\u6781\u5927\u7f29\u77ed\uff0c\u6709\u5229\u4e8e\u6709\u6548\u5730\u5229\u7528\u8fd9\u4e9b\u7279\u5f81\u3002\u9664\u6b64\u5916\uff0cSelf Attention\u5bf9\u4e8e\u589e\u52a0\u8ba1\u7b97\u7684\u5e76\u884c\u6027\u4e5f\u6709\u76f4\u63a5\u5e2e\u52a9\u4f5c\u7528\u3002\u8fd9\u662f\u4e3a\u4f55Self Attention\u9010\u6e10\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u4e3b\u8981\u539f\u56e0\u3002 \u5e8f\u5217\u7f16\u7801 \u00b6 \u6df1\u5ea6\u5b66\u4e60\u505aNLP\u7684\u65b9\u6cd5\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u5148\u5c06\u53e5\u5b50\u5206\u8bcd\uff0c\u7136\u540e\u6bcf\u4e2a\u8bcd\u8f6c\u5316\u4e3a\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u5e8f\u5217\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u6bcf\u4e2a\u53e5\u5b50\u90fd\u5bf9\u5e94\u7684\u662f\u4e00\u4e2a\u77e9\u9635 \\(X=(x_1,x_2,\u2026,x_t)\\) \uff0c\u5176\u4e2dxi\u90fd\u4ee3\u8868\u7740\u7b2ci\u4e2a\u8bcd\u7684\u8bcd\u5411\u91cf\uff08\u884c\u5411\u91cf\uff09\uff0c\u7ef4\u5ea6\u4e3ad\u7ef4\uff0c\u6545 \\(X\u2208R_n\u00d7d\\) \u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u7f16\u7801\u8fd9\u4e9b\u5e8f\u5217\u4e86\u3002 RNN \u00b6 \\[ y_t=f(y_{t\u22121},x_t) \\] \u4e0d\u7ba1\u662f\u5df2\u7ecf\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684LSTM\u3001GRU\u8fd8\u662f\u6700\u8fd1\u7684SRU\uff0c\u90fd\u5e76\u672a\u8131\u79bb\u8fd9\u4e2a\u9012\u5f52\u6846\u67b6\u3002RNN\u7ed3\u6784\u672c\u8eab\u6bd4\u8f83\u7b80\u5355\uff0c\u4e5f\u5f88\u9002\u5408\u5e8f\u5217\u5efa\u6a21\uff0c\u4f46RNN\u7684\u660e\u663e\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u65e0\u6cd5\u5e76\u884c\uff0c\u56e0\u6b64\u901f\u5ea6\u8f83\u6162\uff0c\u8fd9\u662f\u9012\u5f52\u7684\u5929\u7136\u7f3a\u9677\u3002\u53e6\u5916\u82cf\u5251\u6797\u535a\u58eb\u8ba4\u4e3aRNN\u65e0\u6cd5\u5f88\u597d\u5730\u5b66\u4e60\u5230\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u56e0\u4e3a\u5b83\u672c\u8d28\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\u3002 \u4e0d\u7ba1\u662f\u5df2\u7ecf\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684LSTM\u3001GRU\u8fd8\u662f\u6700\u8fd1\u7684SRU\uff0c\u90fd\u5e76\u672a\u8131\u79bb\u8fd9\u4e2a\u9012\u5f52\u6846\u67b6\u3002RNN\u7ed3\u6784\u672c\u8eab\u6bd4\u8f83\u7b80\u5355\uff0c\u4e5f\u5f88\u9002\u5408\u5e8f\u5217\u5efa\u6a21\uff0c\u4f46RNN\u7684\u660e\u663e\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u65e0\u6cd5\u5e76\u884c\uff0c\u56e0\u6b64\u901f\u5ea6\u8f83\u6162\uff0c\u8fd9\u662f\u9012\u5f52\u7684\u5929\u7136\u7f3a\u9677\u3002\u53e6\u5916\u82cf\u5251\u6797\u535a\u58eb\u8ba4\u4e3aRNN\u65e0\u6cd5\u5f88\u597d\u5730\u5b66\u4e60\u5230\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u56e0\u4e3a\u5b83\u672c\u8d28\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\u3002 CNN \u00b6 \\[ \\boldsymbol{y}_{t}=f\\left(\\boldsymbol{x}_{t-1}, \\boldsymbol{x}_{t}, \\boldsymbol{x}_{t+1}\\right) \\] \u5728FaceBook\u7684\u8bba\u6587\u4e2d\uff0c\u7eaf\u7cb9\u4f7f\u7528\u5377\u79ef\u4e5f\u5b8c\u6210\u4e86Seq2Seq\u7684\u5b66\u4e60\uff0c\u662f\u5377\u79ef\u7684\u4e00\u4e2a\u7cbe\u81f4\u4e14\u6781\u81f4\u7684\u4f7f\u7528\u6848\u4f8b\uff0c\u70ed\u8877\u5377\u79ef\u7684\u8bfb\u8005\u5fc5\u987b\u5f97\u597d\u597d\u8bfb\u8bfb\u8fd9\u7bc7\u6587\u8bba\u3002CNN\u65b9\u4fbf\u5e76\u884c\uff0c\u800c\u4e14\u5bb9\u6613\u6355\u6349\u5230\u4e00\u4e9b\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\u3002 Attention \u00b6 Google\u7684\u5927\u4f5c\u63d0\u4f9b\u4e86\u7b2c\u4e09\u4e2a\u601d\u8def\uff1a\u7eafAttention\uff0c\u5355\u9760\u6ce8\u610f\u529b\u5c31\u53ef\u4ee5RNN\u8981\u9010\u6b65\u9012\u5f52\u624d\u80fd\u83b7\u5f97\u5168\u5c40\u4fe1\u606f\uff0c\u56e0\u6b64\u4e00\u822c\u8981\u53cc\u5411RNN\u624d\u6bd4\u8f83\u597d\uff1bCNN\u4e8b\u5b9e\u4e0a\u53ea\u80fd\u83b7\u53d6\u5c40\u90e8\u4fe1\u606f\uff0c\u662f\u901a\u8fc7\u5c42\u53e0\u6765\u589e\u5927\u611f\u53d7\u91ce\uff1bAttention\u7684\u601d\u8def\u6700\u4e3a\u7c97\u66b4\uff0c\u5b83\u4e00\u6b65\u5230\u4f4d\u83b7\u53d6\u4e86\u5168\u5c40\u4fe1\u606f\uff01\u5b83\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a \\[ \\boldsymbol{y}_{t}=f\\left(\\boldsymbol{x}_{t}, \\boldsymbol{A}, \\boldsymbol{B}\\right) \\] \u5176\u4e2dA,BA,B\u662f\u53e6\u5916\u4e00\u4e2a\u5e8f\u5217\uff08\u77e9\u9635\uff09\u3002\u5982\u679c\u90fd\u53d6 \\(A=B=X\\) \uff0c\u90a3\u4e48\u5c31\u79f0\u4e3aSelf Attention\uff0c\u5b83\u7684\u610f\u601d\u662f\u76f4\u63a5\u5c06xt\u4e0e\u539f\u6765\u7684\u6bcf\u4e2a\u8bcd\u8fdb\u884c\u6bd4\u8f83\uff0c\u6700\u540e\u7b97\u51fayt\uff01 \u6574\u4f53\u67b6\u6784 \u00b6 Encoder : \u516d\u4e2a\u76f8\u540c\u5c42\u7684\u5806\u53e0\uff0c\u6bcf\u4e00\u5c42\u90fd\u6709\u4e24\u4e2a\u5b50\u5c42\u6784\u6210\u3002\u7b2c\u4e00\u4e2a\u5b50\u5c42\u662f multi-head self-attention mechanism\uff0c\u7136\u540e\u662fposition- wise fully connected feed-forward network\u3002\u5e76\u4e14\u5728\u4e24\u4e2a\u5b50\u5c42\u4e4b\u95f4\u4f7f\u7528\u4e86\u6b8b\u5dee\u8fde\u63a5\u5e76\u540e\u63a5Layer Normalization\uff0c\u6240\u4ee5\u6bcf\u4e2a\u5b50\u5c42\u7684\u8f93\u51fa\u4e3a \\(LayerNorm(x+Sublayer(x))\\) \u3002\u7f51\u7edc\u8f93\u5165\u662f\u4e09\u4e2a\u76f8\u540c\u7684\u5411\u91cfq, k\u548cv\uff0c\u662fword embedding\u548cposition embedding\u76f8\u52a0\u5f97\u5230\u7684\u7ed3\u679c\u3002\u4e3a\u4e86\u65b9\u4fbf\u8fdb\u884c\u6b8b\u5dee\u8fde\u63a5\uff0c\u6211\u4eec\u9700\u8981\u5b50\u5c42\u7684\u8f93\u51fa\u548c\u8f93\u5165\u90fd\u662f\u76f8\u540c\u7684\u7ef4\u5ea6\uff0c\u6240\u6709\u5b50\u5c42\u4ee5\u53ca\u5d4c\u5165\u5c42\u7684\u8f93\u51fa\u90fd\u4e3a \\(dmodel=512\\) \u3002 Decoder : \u540c\u6837\u662f\u516d\u4e2a\u76f8\u540c\u5c42\u7684\u5806\u53e0\uff0cdecoder\u4e2d\u7684Layer\u7531encoder\u7684Layer\u4e2d\u63d2\u5165\u4e00\u4e2aMulti-Head Attention + Add&Norm\u7ec4\u6210\uff0c\u8be5\u5b50\u5c42\u5bf9Encoder Stack\u7684\u8f93\u51fa\u6267\u884c\u591a\u5934\u6ce8\u610f\u3002\u540c\u6837\u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5\u548cLayer Normalization\uff0c\u5e76\u4e14\u8fd8\u4fee\u6539\u4e86Decoder Stack\u4e2d\u7684self-attention\u5b50\u5c42\uff0c\u4ee5\u9632\u6b62\u4f4d\u7f6e\u6ce8\u610f\u5230\u540e\u7eed\u4f4d\u7f6e\u3002 We also modify the self-attention sub-layer in the decoder stack to prevent positions from attending to subsequent positions \u5bf9\u4e8edecoder\u4e2d\u7684\u7b2c\u4e00\u4e2a\u591a\u5934\u6ce8\u610f\u529b\u5b50\u5c42\uff0c\u9700\u8981\u6dfb\u52a0masking\uff0c\u786e\u4fdd\u9884\u6d4b\u4f4d\u7f6ei\u7684\u65f6\u5019\u4ec5\u4ec5\u4f9d\u8d56\u4e8e\u4f4d\u7f6e\u5c0f\u4e8ei\u7684\u8f93\u51fa\u3002 \u7b80\u5355\u6982\u62ec Self Attention\u4e5f\u662f\u5728Scaled Dot-Product Attention\u5355\u5143\u91cc\u9762\u5b9e\u73b0\u7684\uff0c\u5982\u4e0a\u56fe\u5de6\u56fe\u6240\u793a\uff0c\u9996\u5148\u628a\u8f93\u5165Input\u7ecf\u8fc7\u7ebf\u6027\u53d8\u6362\u5206\u522b\u5f97\u5230Q\u3001K\u3001V\uff0c\u6ce8\u610f\uff0cQ\u3001K\u3001V\u90fd\u6765\u81ea\u4e8eInput\uff0c\u53ea\u4e0d\u8fc7\u662f\u7ebf\u6027\u53d8\u6362\u7684\u77e9\u9635\u7684\u6743\u503c\u4e0d\u540c\u800c\u5df2\u3002\u7136\u540e\u628aQ\u548cK\u505adot Product\u76f8\u4e58\uff0c\u5f97\u5230\u8f93\u5165Input\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u7136\u540e\u7ecf\u8fc7\u5c3a\u5ea6\u53d8\u6362\uff08scale\uff09\u3001\u63a9\u7801\uff08mask\uff09\u548csoftmax\u64cd\u4f5c\uff0c\u5f97\u5230\u6700\u7ec8\u7684Self Attention\u77e9\u9635\u3002\u5c3a\u5ea6\u53d8\u6362\u662f\u4e3a\u4e86\u9632\u6b62\u8f93\u5165\u503c\u8fc7\u5927\u5bfc\u81f4\u8bad\u7ec3\u4e0d\u7a33\u5b9a\uff0cmask\u5219\u662f\u4e3a\u4e86\u4fdd\u8bc1\u65f6\u95f4\u7684\u5148\u540e\u5173\u7cfb\u3002 \u6700\u540e\uff0c\u628aencoder\u7aefself Attention\u8ba1\u7b97\u7684\u7ed3\u679c\u52a0\u5165\u5230decoder\u505a\u4e3ak\u548cV\uff0c\u7ed3\u5408decoder\u81ea\u8eab\u7684\u8f93\u51fa\u505a\u4e3aq\uff0c\u5f97\u5230encoder\u7aef\u7684attention\u4e0edecoder\u7aefattention\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5173\u952e\u6280\u672f \u00b6 SCALED DOT-PRODUCT ATTENTION \u00b6 Google\u7684\u4e00\u822c\u5316Attention\u601d\u8def\u4e5f\u662f\u4e00\u4e2a\u7f16\u7801\u5e8f\u5217\u7684\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u8ddfRNN\u3001CNN\u4e00\u6837\uff0c\u90fd\u662f\u4e00\u4e2a\u5e8f\u5217\u7f16\u7801\u7684\u5c42\u3002 \u524d\u9762\u7ed9\u51fa\u7684\u662f\u4e00\u822c\u5316\u7684\u6846\u67b6\u5f62\u5f0f\u7684\u63cf\u8ff0\uff0c\u4e8b\u5b9e\u4e0aGoogle\u7ed9\u51fa\u7684\u65b9\u6848\u662f\u5f88\u5177\u4f53\u7684\u3002\u9996\u5148\uff0c\u5b83\u5148\u628aAttention\u7684\u5b9a\u4e49\u7ed9\u4e86\u51fa\u6765\uff1a $$ (\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\operatorname{softmax}\\left(\\frac{\\boldsymbol{Q} \\boldsymbol{K}^{\\top}}{\\sqrt{d_{k}}}\\right) \\boldsymbol{V} $$ \u5176\u4e2d\uff0c \\(\\boldsymbol{Q} \\in \\mathbb{R}^{n \\times d_{k}}, \\boldsymbol{K} \\in \\mathbb{R}^{m \\times d_{k}}, \\boldsymbol{V} \\in \\mathbb{R}^{m \\times d}\\) \u3002\u5982\u679c\u5ffd\u7565\u6fc0\u6d3b\u51fd\u6570softmax\u7684\u8bdd\uff0c\u90a3\u4e48\u662f\u4e8b\u5b9e\u4e0a\u5c31\u662f\u4e09\u4e2a \\(n \\times d_{k}, d_{k} \\times m, m \\times d_{v}\\) \u77e9\u9635\u76f8\u4e58\uff0c\u6700\u540e\u7684\u7ed3\u679c\u662f\u4e00\u4e2a \\(n \\times d_{v}\\) \u7684\u77e9\u9635\u3002\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5c06 \\(n \\times d_{k}\\) \u7684\u5e8f\u5217 \\(Q\\) \u7f16\u7801\u6210\u4e86\u4e00\u4e2a\u65b0\u7684 \\(n \\times d_{v}\\) \u7684\u5e8f\u5217\u7684Attention\u5c42\u3002 \\[ Attention\\left(\\boldsymbol{q}_{t}, \\boldsymbol{K}, \\boldsymbol{V}\\right)=\\sum_{s=1}^{m} \\frac{1}{Z} \\exp \\left(\\frac{\\left\\langle\\boldsymbol{q}_{t}, \\boldsymbol{k}_{s}\\right\\rangle}{\\sqrt{d_{k}}}\\right) \\boldsymbol{v}_{s} \\] \u5176\u4e2dZ\u662f\u5f52\u4e00\u5316\u56e0\u5b50\u3002\u4e8b\u5b9e\u4e0aq,k,v\u5206\u522b\u662fquery,key,value\u7684\u7b80\u5199\uff0cK,V\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4ed6\u4eec\u5c31\u50cf\u662fkey-value\u7684\u5173\u7cfb\uff0c\u90a3\u4e48\u4e0a\u5f0f\u7684\u610f\u601d\u5c31\u662f\u901a\u8fc7 \\(q_t\\) \u8fd9\u4e2aquery\uff0c\u4ee5\u548c\u5404\u4e2a \\(k_s\\) \u505a\u5185\u79ef\u540esoftmax\u7684\u65b9\u5f0f\uff0c\u6765\u5f97\u5230 \\(q_t\\) \u548c\u5404\u4e2a \\(v_s\\) \u7684\u76f8\u4f3c\u5ea6\uff0c\u7136\u540e\u52a0\u6743\u6c42\u548c\uff0c\u5f97\u5230\u4e00\u4e2a \\(d_v\\) \u7ef4\u7684\u5411\u91cf\u3002 \\(\\sqrt{d_k}\\) \u8d77\u5230\u8c03\u8282\u4f5c\u7528\uff0c\u4f7f\u5f97\u5185\u79ef\u4e0d\u81f3\u4e8e\u592a\u5927\u3002\uff08\u592a\u5927\u7684\u8bddsoftmax\u540e\u5c31\u975e0\u53731\u4e86\uff0c\u4e0d\u591f\u201csoft\u201d\u4e86\uff0c\u68af\u5ea6\u8fc7\u5c0f\uff0c\u4e0d\u5229\u4e8e\u53cd\u5411\u4f20\u64ad\uff09\u3002 \u4e8b\u5b9e\u4e0a\u8fd9\u79cdAttention\u7684\u5b9a\u4e49\u5e76\u4e0d\u65b0\u9c9c\uff0c\u4f46\u7531\u4e8eGoogle\u7684\u5f71\u54cd\u529b\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u73b0\u5728\u662f\u66f4\u52a0\u6b63\u5f0f\u5730\u63d0\u51fa\u4e86\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u5e76\u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u5c42\u5730\u770b\u5f85\uff1b\u6b64\u5916\u8fd9\u4e2a\u5b9a\u4e49\u53ea\u662f\u6ce8\u610f\u529b\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u9009\u62e9\uff0c\u6bd4\u5982query\u8ddfkey\u7684\u8fd0\u7b97\u65b9\u5f0f\u4e0d\u4e00\u5b9a\u662f\u70b9\u4e58\uff08\u8fd8\u53ef\u4ee5\u662f\u62fc\u63a5\u540e\u518d\u5185\u79ef\u4e00\u4e2a\u53c2\u6570\u5411\u91cf\uff09\uff0c\u751a\u81f3\u6743\u91cd\u90fd\u4e0d\u4e00\u5b9a\u8981\u5f52\u4e00\u5316\uff0c\u7b49\u7b49\u3002 MULTI-HEAD ATTENTION \u00b6 \u8fd9\u4e2a\u662fGoogle\u63d0\u51fa\u7684\u65b0\u6982\u5ff5\uff0c\u662fAttention\u673a\u5236\u7684\u5b8c\u5584\u3002\u4e0d\u8fc7\u4ece\u5f62\u5f0f\u4e0a\u770b\uff0c\u5b83\u5176\u5b9e\u5c31\u518d\u7b80\u5355\u4e0d\u8fc7\u4e86\uff0c\u5c31\u662f\u628a \\(Q,K,V\\) \u901a\u8fc7\u53c2\u6570\u77e9\u9635\u6620\u5c04\u4e00\u4e0b\uff0c\u7136\u540e\u518d\u505aAttention\uff0c\u628a\u8fd9\u4e2a\u8fc7\u7a0b\u91cd\u590d\u505a \\(h\\) \u6b21\uff0c\u7ed3\u679c\u62fc\u63a5\u8d77\u6765\u5c31\u884c\u4e86\uff0c\u53ef\u8c13\u201c\u5927\u9053\u81f3\u7b80\u201d\u4e86\u3002 \\[ head_{i}=\\text { Attention }\\left(\\boldsymbol{Q} \\boldsymbol{W}_{i}^{Q}, \\boldsymbol{K} \\boldsymbol{W}_{i}^{K}, \\boldsymbol{V} \\boldsymbol{W}_{i}^{V}\\right) \\] \u8fd9\u91cc \\(\\boldsymbol{W}_{i}^{Q} \\in \\mathbb{R}^{d_{k} \\times \\overline{d}}, \\boldsymbol{W}_{i}^{K} \\in \\mathbb{R}^{d_{k} \\times \\overline{d}} k, \\boldsymbol{W}_{i}^{V} \\in \\mathbb{R}^{d_{v} \\times \\overline{d} v}\\) , \u7136\u540e \\[ \\begin{array}{c}{\\text {MultiHead}(\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\text { Concat (head, }, \\ldots, \\text { head }_{h} )} \\\\ {\\text {where head}_{i}=\\text {Attention}\\left(Q W_{i}^{Q}, K W_{i}^{K}, V W_{i}^{V}\\right)}\\end{array} \\] \u6700\u540e\u5f97\u5230\u4e00\u4e2a \\(n \\times\\left(h \\tilde{d}_{v}\\right)\\) \u7684\u5e8f\u5217\uff0c \u6240\u8c13\u201c\u591a\u5934\u201d\uff08Multi-Head\uff09\uff0c\u5c31\u662f\u53ea\u591a\u505a\u51e0\u6b21\u540c\u6837\u7684\u4e8b\u60c5\uff08\u53c2\u6570\u4e0d\u5171\u4eab\uff09\uff0c\u7136\u540e\u628a\u7ed3\u679c\u62fc\u63a5 \u3002\u53ef\u4ee5\u5141\u8bb8\u6a21\u578b\u5728\u4e0d\u540c\u7684\u8868\u793a\u5b50\u7a7a\u95f4\u91cc\u5b66\u4e60\u5230\u76f8\u5173\u7684\u4fe1\u606f \u7b80\u800c\u8a00\u4e4b\uff0c\u5c06 \\(Q,K,V\\) \u505ah\u6b21\u4e0d\u540c\u7684\u6295\u5f71\uff0c\u91cd\u590d\u505ah\u6b21Attention\u5c42\u8fd0\u7b97\uff0c\u6bcf\u4e2aAttention\u5c42\u7684\u53c2\u6570\u4e4b\u95f4\u4e0d\u5171\u4eab\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u901a\u8fc7\u4e00\u4e2a\u7ebf\u6027\u6620\u5c04\u8f93\u51fa\u3002 \u8fd9\u91cc\u7684\u601d\u60f3\u5f88\u50cfCNN\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u64cd\u4f5c\uff0c\u4e0a\u6587\u8bf4\u5230\u7684 A Structured Self-attentive Sentence Embedding \u4e5f\u4f7f\u7528\u4e86\u7c7b\u4f3c\u7684\u601d\u60f3\u3002 \u5177\u4f53\u5316 \u00b6 \u6211\u4eec\u8bb0 word embedding \u7684 dimension \u4e3a \\(d_{model}\\) \uff0c\u6240\u4ee5 Q \u7684 shape \u5c31\u662f \\(n*d_{model}\\) \uff0c K\u3001V \u4e5f\u662f\u4e00\u6837\uff0c\u7b2c i \u4e2a word \u7684 embedding \u4e3a \\(v_i\\) \uff0c\u6240\u4ee5\u8be5 word \u7684 attention \u5e94\u4e3a\uff1a \u90a3\u540c\u65f6\u505a\u5168\u90e8 word \u7684 attention\uff0c\u5219\u662f\u4e00\u4e0b\u5b50\u628a\u5e8f\u5217\u7684\u5168\u90e8\u5185\u5bb9\u8f93\u8fdb\u53bb\uff1a Mask \u00b6 decoder \u4e2d\u7684 self-attention \u4e5f\u4e00\u6837\u7684\u9053\u7406\uff0c\u53ea\u662f\u8981\u6ce8\u610f\u4e00\u70b9\uff0cdecoder \u4e2d\u4f60\u5728\u7528 vi \u5bf9 vj \u505a attention \u65f6\uff0c\u6709\u4e00\u4e9b pair \u662f\u4e0d\u5408\u6cd5\u7684\u3002\u539f\u56e0\u5728\u4e8e\uff0c\u867d\u7136 encoder \u9636\u6bb5\u4f60\u53ef\u4ee5\u628a\u5e8f\u5217\u7684\u5168\u90e8 word \u4e00\u6b21\u5168\u8f93\u5165\u8fdb\u53bb\uff0c\u4f46\u662f decoder \u9636\u6bb5\u5374\u5e76\u4e0d\u603b\u662f\u53ef\u4ee5\uff0c\u60f3\u8c61\u4e00\u4e0b\u4f60\u5728\u505a inference\uff0cdecoder \u7684\u4ea7\u51fa\u8fd8\u662f\u6309\u4ece\u5de6\u81f3\u53f3\u7684\u987a\u5e8f\uff0c\u6240\u4ee5\u4f60\u7684 vi \u662f\u6ca1\u673a\u4f1a\u548c vj ( j>i ) \u505a attention \u7684\u3002\u90a3\u600e\u4e48\u5c06\u8fd9\u4e00\u70b9\u4f53\u73b0\u5728 attention \u7684\u8ba1\u7b97\u4e2d\u5462\uff1f\u6587\u4e2d\u8bf4\u53ea\u9700\u8981\u4ee4 \\(\\operatorname{score}\\left(v_{i}, v_{j}\\right)=-\\infty\\) \u5373\u53ef\u3002\u4e3a\u4f55\uff1f\u56e0\u4e3a\u8fd9\u6837\u7684\u8bdd\uff1a $$ \\alpha_{i j}=\\operatorname{softmax}\\left(\\operatorname{score}\\left(v_{i}, v_{j}\\right)\\right)=\\operatorname{softmax}(-\\infty)=0 $$ \u6240\u4ee5\u5728\u8ba1\u7b97 vi \u7684 self-attention \u7684\u65f6\u5019\uff0c\u5c31\u80fd\u591f\u628a vj \u5c4f\u853d\u6389\u3002\u6240\u4ee5\u8fd9\u4e2a\u95ee\u9898\u4e5f\u5c31\u89e3\u51b3\u4e86\u3002 \u7406\u89e3 \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u5bf9Attention\u5c42\u7684\u63cf\u8ff0\u90fd\u662f\u4e00\u822c\u5316\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u843d\u5b9e\u4e00\u4e9b\u5e94\u7528\u3002\u6bd4\u5982\uff0c\u5982\u679c\u505a\u9605\u8bfb\u7406\u89e3\u7684\u8bdd\uff0c \\(Q\\) \u53ef\u4ee5\u662f\u7bc7\u7ae0\u7684\u5411\u91cf\u5e8f\u5217\uff0c\u53d6 \\(K=V\\) \u4e3a\u95ee\u9898\u7684\u5411\u91cf\u5e8f\u5217\uff0c\u90a3\u4e48\u8f93\u51fa\u5c31\u662f\u6240\u8c13\u7684Aligned Question Embedding\u3002 \u800c\u5728Google\u7684\u8bba\u6587\u4e2d\uff0c\u5927\u90e8\u5206\u7684Attention\u90fd\u662fSelf Attention\uff0c\u5373\u201c\u81ea\u6ce8\u610f\u529b\u201d\uff0c\u6216\u8005\u53eb\u5185\u90e8\u6ce8\u610f\u529b\u3002 \u6240\u8c13Self Attention\uff0c\u5176\u5b9e\u5c31\u662f \\(Attention(X,X,X)\\) \uff0c \\(X\\) \u5c31\u662f\u524d\u9762\u8bf4\u7684\u8f93\u5165\u5e8f\u5217\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u5e8f\u5217\u5185\u90e8\u505aAttention\uff0c\u5bfb\u627e\u5e8f\u5217\u5185\u90e8\u7684\u8054\u7cfb\u3002Google\u8bba\u6587\u7684\u4e3b\u8981\u8d21\u732e\u4e4b\u4e00\u662f\u5b83\u8868\u660e\u4e86\u5185\u90e8\u6ce8\u610f\u529b\u5728\u673a\u5668\u7ffb\u8bd1\uff08\u751a\u81f3\u662f\u4e00\u822c\u7684Seq2Seq\u4efb\u52a1\uff09\u7684\u5e8f\u5217\u7f16\u7801\u4e0a\u662f\u76f8\u5f53\u91cd\u8981\u7684\uff0c\u800c\u4e4b\u524d\u5173\u4e8eSeq2Seq\u7684\u7814\u7a76\u57fa\u672c\u90fd\u53ea\u662f\u628a\u6ce8\u610f\u529b\u673a\u5236\u7528\u5728\u89e3\u7801\u7aef\u3002\u7c7b\u4f3c\u7684\u4e8b\u60c5\u662f\uff0c\u76ee\u524dSQUAD\u9605\u8bfb\u7406\u89e3\u7684\u699c\u9996\u6a21\u578bR-Net\u4e5f\u52a0\u5165\u4e86\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff0c\u8fd9\u4e5f\u4f7f\u5f97\u5b83\u7684\u6a21\u578b\u6709\u6240\u63d0\u5347\u3002 \u5f53\u7136\uff0c\u66f4\u51c6\u786e\u6765\u8bf4\uff0cGoogle\u6240\u7528\u7684\u662fSelf Multi-Head Attention\uff1a $$ Y=M u l t i H e a d(X, X, X) $$ Attention\u5728\u6a21\u578b\u4e2d\u7684\u5e94\u7528 \u00b6 Self-attention\u5373K=V=Q\uff0c\u4f8b\u5982\u8f93\u5165\u4e00\u4e2a\u53e5\u5b50\uff0c\u90a3\u4e48\u91cc\u9762\u7684\u6bcf\u4e2a\u8bcd\u90fd\u8981\u548c\u8be5\u53e5\u5b50\u4e2d\u7684\u6240\u6709\u8bcd\u8fdb\u884cattention\u8ba1\u7b97\u3002\u76ee\u7684\u662f\u5b66\u4e60\u53e5\u5b50\u5185\u90e8\u7684\u8bcd\u4f9d\u8d56\u5173\u7cfb\uff0c\u6355\u83b7\u53e5\u5b50\u7684\u5185\u90e8\u7ed3\u6784\u3002 Transformer \u4f1a\u5728\u4e09\u4e2a\u4e0d\u540c\u7684\u65b9\u9762\u4f7f\u7528 self multi-head attention \uff1a \u5728 encoder-decoder attention \u5c42\u4e2d\uff0ckey\u548cvalue\u662fencoder\u7684\u8f93\u51fa\uff0cquery\u662f\u524d\u4e00\u5c42Decoder\u7684\u8f93\u51fa\u3002\u8fd9\u4f7f\u5f97Decoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u53c2\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u6240\u6709\u4f4d\u7f6e\u3002\u8fd9\u91cc\u6a21\u4eff\u4e86\u5178\u578b\u7684seq2seq\u4e2d\u6ce8\u610f\u529b\u673a\u5236\u7684\u4f7f\u7528\u3002 \u5728 encoder self-attention \u5c42\u4e2d\uff0c\u67d0\u4e00\u5c42\u4e2d\u6240\u6709\u7684keys\u3001values\u548cqueries\u90fd\u6765\u81ea\u540c\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u662fEncoder\u4e2d\u4e0a\u4e00\u5c42\u7684\u8f93\u51fa\u3002Encoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u5904\u7406Encoder\u4e0a\u4e00\u5c42\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\u3002 \u5728 decoder self-attention \u5c42\u4e2d\u7c7b\u4f3c\u5730\uff0cdecoder\u4e2d\u7684self-attention\u5c42\u5141\u8bb8decoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u5173\u6ce8decoder\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\uff0c\u76f4\u5230\u8be5\u4f4d\u7f6e\u5e76\u5305\u62ec\u8be5\u4f4d\u7f6e\u3002\u4e3a\u4e86\u4fdd\u6301decoder\u7684\u81ea\u56de\u5f52\u7279\u6027\uff0c\u9700\u8981\u9632\u6b62decoder\u4e2d\u7684\u5de6\u5411\u4fe1\u606f\u6d41\u3002\u6211\u4eec\u901a\u8fc7\u5c4f\u853d(\u8bbe\u7f6e\u4e3a\u8d1f\u65e0\u7a77)softmax\u8f93\u5165\u4e2d\u5bf9\u5e94\u4e8e\u975e\u6cd5\u8fde\u63a5\u7684\u6240\u6709\u503c\uff0c\u5b9e\u73b0\u4e86\u5728\u7f29\u653e\u7684\u70b9\u79ef\u6ce8\u610f\u8303\u56f4\u5185\u7684\u8fd9\u79cd\u65b9\u6cd5\u3002 POSITION-WISE FEED-FOWARD NETWORKS \u00b6 \\[ \\mathrm{FFN}(x)=\\max \\left(0, x W_{1}+b_{1}\\right) W_{2}+b_{2} \\] \u9664\u4e86 attention sub-layers\uff0cencoder\u548cdecoder\u4e2d\u7684\u6bcf\u4e00\u5c42\u90fd\u5305\u542b\u4e00\u4e2a\u5b8c\u5168\u8fde\u63a5\u7684\u524d\u9988\u7f51\u7edc\uff0c\u5b83\u5206\u522b\u5e94\u7528\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\uff0c\u5e76\u4e14\u662f\u76f8\u540c\u7684\u3002\u5b83\u7531\u4e24\u4e2a\u7ebf\u6027\u53d8\u6362\u7ec4\u6210\uff0c\u4e2d\u95f4\u6709\u4e00\u4e2aReLU\u6fc0\u6d3b\u3002 \u867d\u7136\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u7684\u7ebf\u6027\u53d8\u6362\u662f\u76f8\u540c\u7684\uff0c\u4f46\u662f\u5b83\u4eec\u5728\u4e0d\u540c\u7684\u5c42\u4e4b\u95f4\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u65b9\u6cd5\u662f\u7528\u5185\u6838\u5927\u5c0f\u4e3a1\u7684\u4e24\u4e2a\u5377\u79ef\u3002\u5176\u5b9e\u5c31\u662f\u4e00\u4e2aMLP \u7f51\u7edc\uff0chidden_size\u53d8\u5316\u4e3a\uff1a \\(512 \\to 2048 \\to 512\\) \u3002 \u6bcf\u4e2a \\(d_{model}\\) \u7ef4\u5411\u91cf x \u5728\u6b64\u5148\u7531 \\(xW_1+b_1\\) \u53d8\u4e3a \\(d_f\\) \u7ef4\u7684 \\(x\u2032\\) \uff0c\u518d\u7ecf\u8fc7 \\(max(0,x\u2032)W_2+b_2\\) \u53d8\u56de \\(d_{model}\\) \u7ef4\u3002\u4e4b\u540e\u518d\u662f\u4e00\u4e2a\u6b8b\u5dee\u8fde\u63a5\u3002\u8f93\u51fa size \u4ecd\u662f \\([sequence_{length},d_{model}]\\) POSITIONAL ENCODING \u00b6 \u7531\u4e8e\u6211\u4eec\u7684\u6a21\u578b\u4e0d\u5305\u542b\u9012\u5f52\u548c\u5377\u79ef\uff0c\u4e3a\u4e86\u4f7f\u6a21\u578b\u5229\u7528\u5e8f\u5217\u7684\u987a\u5e8f\uff0c\u6211\u4eec\u5fc5\u987b\u6ce8\u5165\u4e00\u4e9b\u5173\u4e8e\u5e8f\u5217\u4e2dtoken\u7684\u76f8\u5bf9\u6216\u7edd\u5bf9\u4f4d\u7f6e\u7684\u4fe1\u606f\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u201c\u4f4d\u7f6e\u7f16\u7801\u201d\u6dfb\u52a0\u5230encoder\u548cdecoder stacks\u5e95\u90e8\u7684\u8f93\u5165embeddings\u4e2d\u3002\u4f4d\u7f6e\u7f16\u7801\u7684\u7ef4\u6570 \\(d_{model}\\) \u4e0e\u5d4c\u5165\u7684\u7ef4\u6570\u76f8\u540c\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e8c\u8005\u76f8\u52a0\u3002\u6709\u8bb8\u591a\u4f4d\u7f6e\u7f16\u7801\u7684\u9009\u62e9\uff0c\u5b66\u4e60\u7684\u548c\u56fa\u5b9a\u7684\u90fd\u53ef\u4ee5\u3002 $$ \\begin{equation} \\begin{cases} PE(pos, 2i)=\\sin \\left(pos / 10000^{2 i / d_{model}}\\right) \\ PE(\\text {pos}, 2 i+1)=\\cos \\left(pos / 10000^{2 i / d_{model}}\\right) \\end{cases} \\end{equation} $$ \u5176\u4e2dpos\u4e3a\u4f4d\u7f6e\uff0cii\u4e3a\u7ef4\u5ea6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f4d\u7f6e\u7f16\u7801\u7684\u6bcf\u4e2a\u7ef4\u5ea6\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u6b63\u5f26\u66f2\u7ebf\u3002\u6ce2\u957f\u7ec4\u6210\u51e0\u4f55\u7ea7\u6570\u4ece2\u03c0\u523010000\u00b72\u03c0\u3002\u9009\u62e9\u8fd9\u4e2a\u51fd\u6570\u662f\u56e0\u4e3a\u6211\u4eec\u5047\u8bbe\u5b83\u53ef\u4ee5\u8ba9\u6a21\u578b\u5f88\u5bb9\u6613\u5730\u5b66\u4e60\u5230\u76f8\u5bf9\u4f4d\u7f6e\u7684\u53c2\u4e0e\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u4f55\u56fa\u5b9a\u504f\u79fb\u91cf \\(k, PE_{pos+k}\\) \u90fd\u53ef\u4ee5\u8868\u793a\u4e3a\u7684\u7ebf\u6027\u51fd\u6570 \\(PE_{pos}\\) \u3002\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86learning position embeddings\u8fdb\u884c\u4e86\u5b9e\u9a8c\uff0c\u53d1\u73b0\u8fd9\u4e24\u4e2a\u7248\u672c\u7684\u7ed3\u679c\u51e0\u4e4e\u76f8\u540c\u3002\u6211\u4eec\u9009\u62e9\u6b63\u5f26\u7248\u672c\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u5141\u8bb8\u6a21\u578b\u63a8\u65ad\u51fa\u6bd4\u8bad\u7ec3\u4e2d\u9047\u5230\u7684\u5e8f\u5217\u957f\u5ea6\u66f4\u957f\u7684\u5e8f\u5217\u957f\u5ea6\u3002 \u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u56e0\u4e3a\u6b63\u5f26\u548c\u4f59\u5f26\u51fd\u6570\u5177\u6709\u5468\u671f\u6027\uff0c\u5bf9\u4e8e\u56fa\u5b9a\u957f\u5ea6\u504f\u5deek\uff08\u7c7b\u4f3c\u4e8e\u5468\u671f\uff09\uff0cpost +k\u4f4d\u7f6e\u7684PE\u53ef\u4ee5\u8868\u793a\u6210\u5173\u4e8epos\u4f4d\u7f6ePE\u7684\u4e00\u4e2a\u7ebf\u6027\u53d8\u5316\uff08\u5b58\u5728\u7ebf\u6027\u5173\u7cfb\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u65b9\u4fbf\u6a21\u578b\u5b66\u4e60\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e2a\u76f8\u5bf9\u4f4d\u7f6e\u5173\u7cfb \u53ea\u8981\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\u5c31\u4f1a\u53d1\u73b0\uff0c\u8fd9\u6837\u7684\u6a21\u578b \u5e76\u4e0d\u80fd\u6355\u6349\u5e8f\u5217\u7684\u987a\u5e8f \uff01\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u5c06 \\(K,V\\) \u6309\u884c\u6253\u4e71\u987a\u5e8f\uff08\u76f8\u5f53\u4e8e\u53e5\u5b50\u4e2d\u7684\u8bcd\u5e8f\u6253\u4e71\uff09\uff0c\u90a3\u4e48Attention\u7684\u7ed3\u679c\u8fd8\u662f\u4e00\u6837\u7684\u3002\u8fd9\u5c31\u8868\u660e\u4e86\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\uff0cAttention\u6a21\u578b\u9876\u591a\u662f\u4e00\u4e2a\u975e\u5e38\u7cbe\u5999\u7684\u201c\u8bcd\u888b\u6a21\u578b\u201d\u800c\u5df2\u3002\u8fd9\u95ee\u9898\u5c31\u6bd4\u8f83\u4e25\u91cd\u4e86\uff0c\u5927\u5bb6\u77e5\u9053\uff0c\u5bf9\u4e8e\u65f6\u95f4\u5e8f\u5217\u6765\u8bf4\uff0c\u5c24\u5176\u662f\u5bf9\u4e8eNLP\u4e2d\u7684\u4efb\u52a1\u6765\u8bf4\uff0c\u987a\u5e8f\u662f\u5f88\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u5b83\u4ee3\u8868\u7740\u5c40\u90e8\u751a\u81f3\u662f\u5168\u5c40\u7684\u7ed3\u6784\uff0c\u5b66\u4e60\u4e0d\u5230\u987a\u5e8f\u4fe1\u606f\uff0c\u90a3\u4e48\u6548\u679c\u5c06\u4f1a\u5927\u6253\u6298\u6263\uff08\u6bd4\u5982\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u6709\u53ef\u80fd\u53ea\u628a\u6bcf\u4e2a\u8bcd\u90fd\u7ffb\u8bd1\u51fa\u6765\u4e86\uff0c\u4f46\u662f\u4e0d\u80fd\u7ec4\u7ec7\u6210\u5408\u7406\u7684\u53e5\u5b50\uff09\u3002 \u4e8e\u662fGoogle\u518d\u796d\u51fa\u4e86\u4e00\u62db\u2014\u2014 Position Embedding \uff0c\u4e5f\u5c31\u662f\u201c\u4f4d\u7f6e\u5411\u91cf\u201d\uff0c\u5c06\u6bcf\u4e2a\u4f4d\u7f6e\u7f16\u53f7\uff0c\u7136\u540e\u6bcf\u4e2a\u7f16\u53f7\u5bf9\u5e94\u4e00\u4e2a\u5411\u91cf\uff0c\u901a\u8fc7\u7ed3\u5408\u4f4d\u7f6e\u5411\u91cf\u548c\u8bcd\u5411\u91cf\uff0c\u5c31\u7ed9\u6bcf\u4e2a\u8bcd\u90fd\u5f15\u5165\u4e86\u4e00\u5b9a\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u8fd9\u6837Attention\u5c31\u53ef\u4ee5\u5206\u8fa8\u51fa\u4e0d\u540c\u4f4d\u7f6e\u7684\u8bcd\u4e86\u3002 Position Embedding\u5e76\u4e0d\u7b97\u65b0\u9c9c\u7684\u73a9\u610f\uff0c\u5728FaceBook\u7684\u300aConvolutional Sequence to Sequence Learning\u300b\u4e5f\u7528\u5230\u4e86\u8fd9\u4e2a\u4e1c\u897f\u3002\u4f46\u5728Google\u7684\u8fd9\u4e2a\u4f5c\u54c1\u4e2d\uff0c\u5b83\u7684Position Embedding\u6709\u51e0\u70b9\u533a\u522b\uff1a \u4ee5\u524d\u5728RNN\u3001CNN\u6a21\u578b\u4e2d\u5176\u5b9e\u90fd\u51fa\u73b0\u8fc7Position Embedding\uff0c\u4f46\u5728\u90a3\u4e9b\u6a21\u578b\u4e2d\uff0cPosition Embedding\u662f\u9526\u4e0a\u6dfb\u82b1\u7684\u8f85\u52a9\u624b\u6bb5\uff0c\u4e5f\u5c31\u662f\u201c\u6709\u5b83\u4f1a\u66f4\u597d\u3001\u6ca1\u5b83\u4e5f\u5c31\u5dee\u4e00\u70b9\u70b9\u201d\u7684\u60c5\u51b5\uff0c\u56e0\u4e3aRNN\u3001CNN\u672c\u8eab\u5c31\u80fd\u6355\u6349\u5230\u4f4d\u7f6e\u4fe1\u606f\u3002\u4f46\u662f\u5728\u8fd9\u4e2a\u7eafAttention\u6a21\u578b\u4e2d\uff0cPosition Embedding\u662f\u4f4d\u7f6e\u4fe1\u606f\u7684\u552f\u4e00\u6765\u6e90\uff0c\u56e0\u6b64\u5b83\u662f\u6a21\u578b\u7684\u6838\u5fc3\u6210\u5206\u4e4b\u4e00\uff0c\u5e76\u975e\u4ec5\u4ec5\u662f\u7b80\u5355\u7684\u8f85\u52a9\u624b\u6bb5\u3002 \u5728\u4ee5\u5f80\u7684Position Embedding\u4e2d\uff0c\u57fa\u672c\u90fd\u662f\u6839\u636e\u4efb\u52a1\u8bad\u7ec3\u51fa\u6765\u7684\u5411\u91cf\u3002\u800cGoogle\u76f4\u63a5\u7ed9\u51fa\u4e86\u4e00\u4e2a\u6784\u9020Position Embedding\u7684\u516c\u5f0f\uff1a \u8fd9\u91cc\u7684\u610f\u601d\u662f\u5c06id\u4e3app\u7684\u4f4d\u7f6e\u6620\u5c04\u4e3a\u4e00\u4e2adposdpos\u7ef4\u7684\u4f4d\u7f6e\u5411\u91cf\uff0c\u8fd9\u4e2a\u5411\u91cf\u7684\u7b2cii\u4e2a\u5143\u7d20\u7684\u6570\u503c\u5c31\u662f \\(PE_i(p)\\) \u3002Google\u5728\u8bba\u6587\u4e2d\u8bf4\u5230\u4ed6\u4eec\u6bd4\u8f83\u8fc7\u76f4\u63a5\u8bad\u7ec3\u51fa\u6765\u7684\u4f4d\u7f6e\u5411\u91cf\u548c\u4e0a\u8ff0\u516c\u5f0f\u8ba1\u7b97\u51fa\u6765\u7684\u4f4d\u7f6e\u5411\u91cf\uff0c\u6548\u679c\u662f\u63a5\u8fd1\u7684\u3002\u56e0\u6b64\u663e\u7136\u6211\u4eec\u66f4\u4e50\u610f\u4f7f\u7528\u516c\u5f0f\u6784\u9020\u7684Position Embedding\u4e86\u3002 Position Embedding\u672c\u8eab\u662f\u4e00\u4e2a\u7edd\u5bf9\u4f4d\u7f6e\u7684\u4fe1\u606f\uff0c\u4f46\u5728\u8bed\u8a00\u4e2d\uff0c\u76f8\u5bf9\u4f4d\u7f6e\u4e5f\u5f88\u91cd\u8981\uff0cGoogle\u9009\u62e9\u524d\u8ff0\u7684\u4f4d\u7f6e\u5411\u91cf\u516c\u5f0f\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u662f\uff1a\u7531\u4e8e\u6211\u4eec\u6709 \\(sin\u2061(\u03b1+\u03b2)=sin\u2061\u03b1cos\u2061\u03b2+cos\u2061\u03b1sin\u2061\u03b2\\) \u4ee5\u53ca \\(cos\u2061(\u03b1+\u03b2)=cos\u2061\u03b1cos\u2061\u03b2\u2212sin\u2061\u03b1sin\u2061\u03b2\\) \u3002\u8fd9\u8868\u660e\u4f4d\u7f6e \\(p+k\\) \u7684\u5411\u91cf\u53ef\u4ee5\u8868\u793a\u6210\u4f4d\u7f6e \\(p\\) \u7684\u5411\u91cf\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u8fd9\u63d0\u4f9b\u4e86\u8868\u8fbe\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\u3002 \u7ed3\u5408\u4f4d\u7f6e\u5411\u91cf\u548c\u8bcd\u5411\u91cf\u6709\u51e0\u4e2a\u53ef\u9009\u65b9\u6848\uff0c\u53ef\u4ee5\u628a\u5b83\u4eec\u62fc\u63a5\u8d77\u6765\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u628a\u4f4d\u7f6e\u5411\u91cf\u5b9a\u4e49\u4e3a\u8ddf\u8bcd\u5411\u91cf\u4e00\u6837\u5927\u5c0f\uff0c\u7136\u540e\u4e24\u8005\u52a0\u8d77\u6765\u3002FaceBook\u7684\u8bba\u6587\u548cGoogle\u8bba\u6587\u4e2d\u7528\u7684\u90fd\u662f\u540e\u8005\u3002\u76f4\u89c9\u4e0a\u76f8\u52a0\u4f1a\u5bfc\u81f4\u4fe1\u606f\u635f\u5931\uff0c\u4f3c\u4e4e\u4e0d\u53ef\u53d6\uff0c\u4f46Google\u7684\u6210\u679c\u8bf4\u660e\u76f8\u52a0\u4e5f\u662f\u5f88\u597d\u7684\u65b9\u6848\u3002 Why self attention \u00b6 \u5bf9\u4e8e\u4f7f\u7528\u81ea\u6ce8\u610f\u529b\u673a\u5236\u7684\u539f\u56e0\uff0c\u8bba\u6587\u4e2d\u63d0\u5230\u4e3b\u8981\u4ece\u4e09\u4e2a\u65b9\u9762\u8003\u8651 \u6bcf\u4e00\u5c42\u7684\u603b\u8ba1\u7b97\u590d\u6742\u5ea6 \u53ef\u5e76\u884c\u5316\u7684\u8ba1\u7b97\u91cf\uff0c\u7531\u6240\u9700\u7684\u6700\u5c0f\u987a\u5e8f\u64cd\u4f5c\u6570\u6765\u8861\u91cf\u3002 \u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\uff0c\u5373\u7f51\u7edc\u4e2d\u8fdc\u7a0b\u4f9d\u8d56\u9879\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u3002 \u5728\u8bb8\u591a\u5e8f\u5217\u8f6c\u6362\u4efb\u52a1\u4e2d\uff0c\u5b66\u4e60\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u662f\u4e00\u4e2a\u5173\u952e\u7684\u6311\u6218\u3002\u5f71\u54cd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\u80fd\u529b\u7684\u4e00\u4e2a\u5173\u952e\u56e0\u7d20\u662f\u5728\u7f51\u7edc\u4e2d\u524d\u8fdb\u548c\u540e\u9000\u4fe1\u53f7\u5fc5\u987b\u7ecf\u8fc7\u7684\u8def\u5f84\u7684\u957f\u5ea6\u3002\u8f93\u5165\u548c\u8f93\u51fa\u5e8f\u5217\u4e2d\u4efb\u610f\u4f4d\u7f6e\u7ec4\u5408\u4e4b\u95f4\u7684\u8fd9\u4e9b\u8def\u5f84\u8d8a\u77ed\uff0c\u5c31\u8d8a\u5bb9\u6613\u5b66\u4e60\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u7531\u4e0d\u540c\u5c42\u7c7b\u578b\u7ec4\u6210\u7684\u7f51\u7edc\u4e2d\u4efb\u610f\u4e24\u4e2a\u8f93\u5165\u548c\u8f93\u51fa\u4f4d\u7f6e\u4e4b\u95f4\u7684\u6700\u5927\u8def\u5f84\u957f\u5ea6\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u8f93\u5165\u5e8f\u5217n\u5c0f\u4e8e\u8868\u793a\u7ef4\u5ea6d\u7684\u8bdd\uff0c\u6bcf\u4e00\u5c42\u7684\u65f6\u95f4\u590d\u6742\u5ea6self-attention\u662f\u6bd4\u8f83\u6709\u4f18\u52bf\u7684\u3002\u5f53n\u6bd4\u8f83\u5927\u65f6\uff0c\u4f5c\u8005\u4e5f\u7ed9\u51fa\u4e86\u4e00\u79cd\u89e3\u51b3\u65b9\u6848self-attention\uff08restricted\uff09\u5373\u6bcf\u4e2a\u8bcd\u4e0d\u662f\u548c\u6240\u6709\u8bcd\u8ba1\u7b97attention\uff0c\u800c\u662f\u53ea\u4e0e\u9650\u5236\u7684r\u4e2a\u8bcd\u53bb\u8ba1\u7b97attention\u3002\u5728\u5e76\u884c\u65b9\u9762\uff0c\u591a\u5934attention\u548cCNN\u4e00\u6837\u4e0d\u4f9d\u8d56\u4e8e\u524d\u4e00\u65f6\u523b\u7684\u8ba1\u7b97\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u5e76\u884c\uff0c\u4f18\u4e8eRNN\u3002\u5728\u957f\u8ddd\u79bb\u4f9d\u8d56\u4e0a\uff0c\u7531\u4e8eself-attention\u662f\u6bcf\u4e2a\u8bcd\u548c\u6240\u6709\u8bcd\u90fd\u8981\u8ba1\u7b97attention\uff0c\u6240\u4ee5\u4e0d\u7ba1\u4ed6\u4eec\u4e2d\u95f4\u6709\u591a\u957f\u8ddd\u79bb\uff0c\u6700\u5927\u7684\u8def\u5f84\u957f\u5ea6\u4e5f\u90fd\u53ea\u662f1\u3002\u53ef\u4ee5\u6355\u83b7\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb\u3002 \u6b64\u5916\uff0c\u81ea\u6211\u5173\u6ce8\u8fd8\u53ef\u4ee5\u4ea7\u751f\u66f4\u591a\u53ef\u89e3\u91ca\u7684\u6a21\u578b\u3002\u6211\u4eec\u4ece\u6a21\u578b\u4e2d\u68c0\u67e5\u6ce8\u610f\u5206\u5e03\uff0c\u5e76\u5728\u9644\u5f55\u4e2d\u7ed9\u51fa\u548c\u8ba8\u8bba\u793a\u4f8b\u3002\u4e2a\u4f53\u7684\u6ce8\u610f\u529b\u5934\u4e0d\u4ec5\u6e05\u695a\u5730\u5b66\u4f1a\u4e86\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u8bb8\u591a\u6ce8\u610f\u529b\u5934\u8fd8\u8868\u73b0\u51fa\u4e0e\u53e5\u5b50\u7684\u53e5\u6cd5\u548c\u8bed\u4e49\u7ed3\u6784\u76f8\u5173\u7684\u884c\u4e3a\u3002 Review \u00b6 \u5173\u4e8e\u4f20\u7edfattention\u548cself-attention\u7684\u95ee\u9898\uff0c\u4ed6\u4eec\u5728\u8ba1\u7b97\u4e0a\u7684\u5dee\u522b\u5728\u4e8e\u4f20\u7edf\u7684Attention\u53ea\u662f\u5728\u4e0d\u540c\u7684\u5c42\u6b21\u4e0a\uff08\u5b57\u7b26\u7ea7\u3001\u8bcd\u7ea7\u3001\u53e5\u5b50\u7ea7\u3001\u7bc7\u7ae0\u7ea7\uff09\u5bf9source\u7aef\u548ctarget\u7aef\u7684hidden state\u8fdb\u884c\u5404\u79cd\u5f62\u5f0f\u7684\u8ba1\u7b97\uff0c\u5f97\u5230\u7684\u662f\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u4e4b\u95f4\u8bcd\u4e0e\u8bcd\uff08\u6216\u5176\u4ed6\u5c42\u6b21\uff09\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u800cSelf-Attention\u5219\u4e0d\u540c\uff0c\u5b83\u5206\u522b\u5728source\u7aef\u548ctarget\u7aef\u8fdb\u884c\uff0c\u6355\u6349source\u7aef\u6216target\u7aef\u81ea\u8eab\u7684\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u7136\u540e\u518d\u628asource\u7aef\u7684\u5f97\u5230\u7684self Attention\u52a0\u5165\u5230target\u7aef\u5f97\u5230\u7684Attention\u4e2d\uff0c\u6355\u6349source\u7aef\u548ctarget\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u5206\u522b\u5bf9\u5e94\u4e09\u4e2aMulti-Head Attention\uff09\uff0c\u5176\u5e95\u5c42\u7684\u8ba1\u7b97\u5b9e\u8d28\u4e0a\u662f\u4e00\u6837\u7684\u3002\u5e76\u884c\u5316\u7684Self-Attention\u5e76\u4e0d\u5305\u542b\u9012\u5f52\u548c\u5377\u79ef\uff0c\u6240\u4ee5\u4e22\u5931\u4e86\u5e8f\u5217\u7684\u987a\u5e8f\u4fe1\u606f\uff0c\u4e3a\u6b64\uff0c\u4f7f\u7528Positional Encoding\u673a\u5236\uff0c\u5c06\u4f4d\u7f6e\u7f16\u7801\u4fe1\u606f\u52a0\u5165\u5230\u6bcf\u4e2a\u8bcd\u7684\u8bcd\u5d4c\u5165\u4e2d\u3002 \u5173\u4e8eself-attention\u7684\u5e76\u884c\u5316\u3001\u8ba1\u7b97\u590d\u6742\u5ea6\u5c0f\u548c\u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\u7684\u4f18\u70b9\uff0c\u539f\u6587\u4e2d\u7ed9\u51fa\u4e86\u5341\u5206\u8be6\u7ec6\u7684\u89e3\u91ca\uff0c\u4e3b\u8981\u5728\u4e8e\u5176\u6446\u8131\u4e86\u4f20\u7edfAttention\u4f9d\u8d56\u7684RNN\u6280\u672f\uff08\u5f53\u7136\uff0c\u4e5f\u6709\u90e8\u5206\u4f7f\u7528CNN\u6280\u672f\u4ece\u800c\u964d\u4f4e\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6\u5e76\u4e14\u62e5\u6709\u4e86\u5e76\u884c\u5316\u7684\u4f18\u70b9\uff09\uff0c\u901a\u8fc7Multi-Head Attention\u6280\u672f\uff08\u975e\u5e38\u7c7b\u4f3c\u4e8eCNN\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u64cd\u4f5c\uff09\uff0c\u76f4\u63a5\u8ba1\u7b97\u6574\u4e2a\u5e8f\u5217\u5168\u90e8\u5185\u5bb9\u7684Attention\uff0c\u53ef\u5e76\u884c\u5316\u77e9\u9635\u8fd0\u7b97\uff0c\u5e76\u4e14\u964d\u4f4e\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6-> RNN\u3001CNN\u548c\u539f\u59cbSelf-Attention\u6bcf\u5c42\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5206\u522b\u4e3an*d2\u3001k*n*d2\u3001n^2*d\uff08k\u3001n\u3001d\u5206\u522b\u4ee3\u8868\u5377\u79ef\u6838\u5927\u5c0f\u3001\u5e8f\u5217\u957f\u5ea6\u3001\u8bcd\u5d4c\u5165\u7ef4\u6570\uff09\uff0c\u5982\u679cn\u5c0f\u4e8ed\u7684\u8bdd\uff0cSelf-Attention\u662f\u6bd4\u8f83\u6709\u4f18\u52bf\u7684\u3002\u5f53n\u6bd4\u8f83\u5927\u65f6\uff0c\u4f5c\u8005\u4e5f\u7ed9\u51fa\u4e86\u4e00\u79cd\u89e3\u51b3\u65b9\u6848self-attention\uff08restricted\uff09\uff0c\u5373\u6bcf\u4e2a\u8bcd\u4e0d\u662f\u548c\u6240\u6709\u8bcd\u8ba1\u7b97attention\uff0c\u800c\u662f\u53ea\u4e0e\u9650\u5236\u7684r\u4e2a\u8bcd\u53bb\u8ba1\u7b97attention\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u964d\u4e3ar*n*d\u3002\u800c\u957f\u8ddd\u79bb\u4f9d\u8d56\u95ee\u9898\u662fNLP\u9886\u57df\u7684\u5173\u952e\u95ee\u9898\u4e4b\u4e00\uff0c\u5f71\u54cd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\u80fd\u529b\u7684\u4e00\u4e2a\u5173\u952e\u56e0\u7d20\u662f\u5728\u7f51\u7edc\u4e2d\u524d\u8fdb\u548c\u540e\u9000\u4fe1\u53f7\u5fc5\u987b\u7ecf\u8fc7\u7684\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u4ee5\u4f20\u7edfRNN\u4e3a\u4f8b\uff0c\u5176\u4f9d\u8d56\u9879\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u4e3a\u4e24\u9879\u95f4\u7684\u8ddd\u79bb\uff0c\u800cself-attenion\u662f\u76f4\u63a5\u5bf9QKV\u8fdb\u884c\u77e9\u9635\u8fd0\u7b97\uff0c\u6bcf\u4e2a\u8bcd\u548c\u6240\u6709\u8bcd\u90fd\u8981\u8ba1\u7b97attention\uff0c\u6240\u4ee5\u4e0d\u7ba1\u4e24\u9879\u95f4\u6709\u591a\u957f\u8ddd\u79bb\uff0c\u6700\u5927\u7684\u8def\u5f84\u957f\u5ea6\u4e5f\u90fd\u53ea\u662f1\uff0c\u6a21\u578b\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5b66\u4e60\u5230\u8fd9\u6837\u957f\u8ddd\u79bb\u7684\u4f9d\u8d56\u3002 self-attention\u7684\u660e\u663e\u7f3a\u70b9\u5728\u4e8e\uff0c\u65e0\u6cd5\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u8fdb\u884c\u5f88\u597d\u5730\u5efa\u6a21\uff0c\u8fd9\u662f\u5176Pure Attention\u5e26\u6765\u7684\u786c\u4f24\u3002\u5c3d\u7ba1\u53ef\u4ee5\u5f15\u5165Position Embedding\uff0c\u4f46\u8fd9\u53ea\u662f\u4e00\u4e2a\u7f13\u89e3\u65b9\u6848\uff0c\u5e76\u6ca1\u6709\u6839\u672c\u89e3\u51b3\u95ee\u9898\u3002\u8fd9\u4e00\u673a\u5236\u5728\u6587\u672c\u5206\u7c7b\u6216\u8005\u662f\u673a\u5668\u7ffb\u8bd1\u8fd9\u6837\u5bf9\u8bed\u5e8f\u8981\u6c42\u5e76\u4e0d\u662f\u7279\u522b\u4e25\u683c\u7684\u9886\u57df\uff0c\u90fd\u53d6\u5f97\u4e86\u4ee4\u4eba\u6ee1\u610f\u7684\u6548\u679c\uff0c\u4f46\u662f\u7528\u6765\u5728\u5e8f\u5217\u6807\u6ce8\uff0c\u5982\u5206\u8bcd\u3001\u5b9e\u4f53\u8bc6\u522b\u7b49\uff0c\u6548\u679c\u5c31\u6709\u4e9b\u4e0d\u4ee4\u4eba\u6ee1\u610f\u3002self-attention\u5728\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u53d6\u5f97\u6210\u529f\u7684\u539f\u56e0\u662f\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u5e76\u4e0d\u7279\u522b\u5f3a\u8c03\u8bed\u5e8f\uff0cPosition Embedding\u6240\u5e26\u6765\u7684\u4f4d\u7f6e\u4fe1\u606f\u8db3\u591f\u6a21\u578b\u5b66\u4e60\u4f7f\u7528\uff0c\u5e76\u4e14\u7ffb\u8bd1\u4efb\u52a1\u7684\u4e3b\u6d41\u8bc4\u6d4b\u6307\u6807BLEU\u4e5f\u5e76\u4e0d\u7279\u522b\u5f3a\u8c03\u8bed\u5e8f\uff0c\u53ea\u662f\u901a\u8fc7ngram\u7684\u7edf\u8ba1\u91cf\u6765\u4fdd\u8bc1ngram\u7684\u76f8\u5bf9\u8bed\u5e8f\uff0c\u5e76\u4e0d\u662f\u4e25\u683c\u7684\u6574\u53e5\u7ffb\u8bd1\u7684\u8bed\u5e8f\uff0c\u6240\u4ee5\u673a\u5668\u7ffb\u8bd1\u7684\u4efb\u52a1\u672c\u8eab\u548c\u8bc4\u4ef7\u6807\u51c6\u90fd\u4fc3\u6210\u4e86\u5176\u5728\u8fd9\u4e00\u4efb\u52a1\u4e0a\u7684\u6210\u529f\u3002 restrict\u7684self-attention\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u539f\u673a\u5236\u7684O(n^2)\u7684\u590d\u6742\u5ea6\u800c\u63d0\u51fa\u7684\uff0c\u4e00\u65b9\u9762\u662f\u4e3a\u4e86\u964d\u4f4e\u590d\u6742\u5ea6\uff0c\u4e00\u65b9\u9762\u662f\u56e0\u4e3a\u4e0d\u662f\u6240\u6709\u4efb\u52a1\u90fd\u9700\u8981\u957f\u7a0b\u7684\u3001\u5168\u5c40\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6709\u7684\u4efb\u52a1\u53ea\u4f9d\u8d56\u4e8e\u5c40\u90e8\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5\u91c7\u7528\u4e86\u7c7b\u4f3c\u5377\u79ef\u7a97\u53e3\u7684\u65b9\u5f0f\u5904\u7406\u3002 attention\u673a\u5236\u7684\u63d0\u51fa\u662f\u4e3a\u4e86\u5feb\u51c6\u72e0\u5730\u7528light\u7684\u6743\u91cd\u53c2\u6570\u5e2e\u52a9\u4efb\u52a1\u8fc7\u6ee4\u6389\u65e0\u5173\u4fe1\u606f\u4ece\u800c\u589e\u5f3a\u6548\u679c\uff0c\u5c3d\u7ba1\u5982\u4eca\u53d6\u5f97\u4e86\u4e0d\u9519\u7684\u6548\u679c\uff0c\u4f46\u662f\u5176\u4e0d\u5177\u5907\u8f83\u597d\u7684\u53ef\u63a7\u5236\u6027\u4e0e\u53ef\u89e3\u91ca\u6027\uff0cself-attention\u4e5f\u662f\u548c\u666e\u901aattention\u673a\u5236\u4e00\u6837\u4f7f\u7528BP\u7b97\u6cd5\u66f4\u65b0\u53c2\u6570\uff0c\u4f9d\u9760\u5168\u5c40\u7684Loss\u51fd\u6570\u8fdb\u884c\u4f18\u5316\uff0c\u8fd9\u6837\u7684\u76d1\u7763\u5b66\u4e60\u662f\u4e0d\u591f\u51c6\u786e\u6709\u6548\u7684\uff0c\u65e0\u6cd5\u5c06attention\u673a\u5236\u5728\u6a21\u578b\u4e2d\u7684\u8d21\u732e\u5ea6\u63d0\u5347\u81f3\u6700\u9ad8\uff0c\u9700\u8981\u5f15\u5165\u66f4\u591a\u7684\u4fe1\u606f\u6216\u662f\u66f4\u52a0\u6709\u6548\u7684\u4f18\u5316\u76ee\u6807\u3002\u8fd9\u5c31\u50cf\u662fRL\u4e2dfeedback\u7684\u6982\u5ff5\uff0cattenion\u673a\u5236\u9700\u8981\u66f4\u5408\u9002\u7684feedback\uff0c\u5e2e\u52a9\u5176\u5728\u6a21\u578b\u4e2d\u7684\u8d21\u732e\u5ea6\u5f97\u5230\u63d0\u5347\u3002\u6240\u4ee5\u4e0b\u4e00\u6b65\u7684\u7814\u7a76\uff0c\u5728\u4e8e\u901a\u8fc7\u5f15\u5165\u9664\u4e86\u76ee\u524d\u6846\u67b6\u5185\u7684QKV\u4ee5\u5916\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5e76\u8bbe\u8ba1\u66f4\u52a0\u6709\u6548\u7684\u4f18\u5316\u76ee\u6807\uff0c\u4e3aattention\u673a\u5236\u63d0\u4f9b\u66f4\u52a0\u6709\u6548\u7684feedback\uff0c\u63d0\u5347\u5176\u6a21\u578b\u8d21\u732e\u5ea6\uff0c\u83b7\u5f97\u53ef\u63a7\u5236\u4e0e\u53ef\u89e3\u91ca\u7684attention\u201c\u5c42\u201d\u3002\u539f\u6587\u4e2d\u7684restrict\u7684self-attention\u5df2\u7ecf\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7ed3\u5408cnn\u7684\u5904\u7406\u4f18\u5316\u65b9\u5411\uff0c\u5f15\u5bfc\u672a\u6765\u7684\u7814\u7a76\u66f4\u591a\u7684\u7ed3\u5408RNN\u3001CNN\u4e2d\u7684\u673a\u5236\u3002 \u5728self-attention\u4e2d\uff0c\u5982\u679c\u53d6\u51faPositional Encoding\u7684\u90e8\u5206\uff0cpure attenion\u662f\u4e0d\u80fd\u6355\u6349\u5230\u5e8f\u5217\u4e4b\u95f4\u7684\u987a\u5e8f\u7684\uff0c\u8f93\u5165\u8bed\u53e5\u7684\u8bcd\u5e8f\u6253\u4e71\u5e76\u4e0d\u4f1a\u6539\u53d8\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd9\u6837\u7684\u673a\u5236\u53ea\u662f\u4e00\u4e2a\u7cbe\u5999\u7684\u8bcd\u888b\u6a21\u578b\u3002\u800ctransformer\u901a\u8fc7\u6b63\u5f26/\u4f59\u5f26\u516c\u5f0f\u751f\u6210\u7684Postional Embedding\uff0c\u4e0e\u8bcd\u5411\u91cf\u76f8\u52a0\uff08\u4e24\u8005\u7ef4\u5ea6\u4e00\u81f4\uff09\uff0c\u5c06\u8bed\u5e8f\u4fe1\u606f\u52a0\u5165\u5230\u6a21\u578b\u4e4b\u4e2d\uff0c\u662f\u4f4d\u7f6e\u4fe1\u606f\u7684\u552f\u4e00\u6765\u6e90\uff0c\u6a21\u578b\u7684\u6838\u5fc3\u6210\u5206\u3002\u8bed\u5e8f\u8c03\u6574\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u662f\u5c24\u4e3a\u91cd\u8981\u7684\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u6837\u7684\u5904\u7406\u65b9\u5f0f\u662f\u4e0d\u591f\u5145\u5206\u7684\uff0cPositional Embedding\u672c\u8eab\u53ea\u662f\u7edd\u5bf9\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4f46\u7531\u4e8e\u6b63\u4f59\u5f26\u516c\u5f0f\u7684\u7279\u70b9\uff0csin(\u03b1+\u03b2)=sin\u03b1cos\u03b2+cos\u03b1sin\u03b2 \u4ee5\u53cacos(\u03b1+\u03b2)=cos\u03b1cos\u03b2\u2212sin\u03b1sin\u03b2\uff0c\u4f7f\u5f97\u4f4d\u7f6ep+k\u7684\u5411\u91cf\u53ef\u4ee5\u8868\u793a\u6210\u4f4d\u7f6ep\u7684\u5411\u91cf\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u8fd9\u63d0\u4f9b\u4e86\u8868\u8fbe\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\uff0c\u5b66\u751f\u4ee5\u4e3a\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u6bd4\u7edd\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u4fe1\u606f\u4ef7\u503c\u66f4\u5927\u66f4\u6d53\u7f29\uff0c\u5176\u5bf9\u7ffb\u8bd1\u8d28\u91cf\u7684\u5f71\u54cd\u4e5f\u66f4\u5927\uff0c\u73b0\u6709\u7684\u5904\u7406\u65b9\u5f0f\u5b66\u751f\u8ba4\u4e3a\u5e76\u4e0d\u80fd\u5f88\u597d\u5730\u4f7f\u6a21\u578b\u5b66\u4e60\u5230\u8fd9\u6837\u7684\u4fe1\u606f(\u628a\u8bcd\u5411\u91cf\u4e0e\u4f4d\u7f6e\u5411\u91cf\u62fc\u63a5\u8d77\u6765\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u628a\u4f4d\u7f6e\u5411\u91cf\u5b9a\u4e49\u4e3a\u8ddf\u8bcd\u5411\u91cf\u4e00\u6837\u5927\u5c0f\uff0c\u7136\u540e\u4e24\u8005\u52a0\u8d77\u6765\u3002FaceBook\u7684\u8bba\u6587\u548cGoogle\u8bba\u6587\u4e2d\u7528\u7684\u90fd\u662f\u540e\u8005\u3002\u4f46\u76f4\u89c9\u4e0a\u76f8\u52a0\u4f1a\u5bfc\u81f4\u4fe1\u606f\u635f\u5931\uff0c\u4f3c\u4e4e\u4e0d\u53ef\u53d6\uff0c\u53ef\u662f\u5176\u6210\u679c\u8bf4\u660e\u76f8\u52a0\u662f\u5f88\u597d\u7684\u65b9\u6848\uff0c\u76f4\u89c2\u4e0a\u5e76\u4e0d\u80fd\u591f\u7406\u89e3\u53ef\u884c\u6027\u6765\u6e90)\u3002\u5b66\u751f\u8ba4\u4e3a\u673a\u5668\u7ffb\u8bd1\u76f8\u5bf9\u4e8e\u5206\u8bcd\u548c\u5e8f\u5217\u6807\u6ce8\u8fd9\u6837\u7684\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u800c\u8a00\uff0c\u540e\u8005\u7684\u8bed\u5e8f\u8981\u6c42\u66f4\u52a0\u4e25\u683c\u3002 \u800c\u5bf9\u4e8efeedback\u95ee\u9898\uff0c\u5b66\u751f\u8ba4\u4e3a\u4e00\u65b9\u9762\u53ef\u4ee5\u4ece\u7f51\u7edc\u7ed3\u6784\u6216\u4f18\u5316\u76ee\u6807\u5165\u624b\uff0c\u5982 Modeling Localness for Self-Attention Networks \u4e00\u6587\u4e2d\u63d0\u51fa\u7684\u5728\u4f4e\u5c42\u7f51\u7edc\u4e2d\u4f7f\u7528\u589e\u52a0\u53ef\u5b66\u4e60\u7684\u9ad8\u65af\u504f\u5dee\uff0c\u589e\u5f3a\u7f51\u7edc\u5bf9\u5c40\u90e8\u4e0a\u4e0b\u6587\u7684\u6355\u83b7\u80fd\u529b\uff1b\u4e00\u65b9\u9762\u53ef\u4ee5\u589e\u52a0\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6216\u6807\u8bb0\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5f15\u5165\u77e5\u8bc6\u7684\u601d\u60f3\uff0c\u5c06\u66f4\u4e30\u5bcc\u7684\u77e5\u8bc6\u5f15\u5165\u5230\u673a\u5668\u7ffb\u8bd1\u4e4b\u4e2d\uff0c\u5e76\u4e14\u5efa\u7acb\u8d77\u6709\u6548\u7684\u5229\u7528\u673a\u5236\uff0c\u4f8b\u5982\u5c06\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u7279\u5f81\u5f15\u5165\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\uff0c\u8fd9\u4e0eself-attenion\u673a\u5236\u672c\u8eab\u5e76\u6ca1\u6709\u592a\u5927\u5173\u7cfb\uff0c\u8fd9\u4e00\u601d\u60f3\u7528\u5728RNN\u6216CNN\u4e0a\u4e5f\u4f1a\u6709\u6240\u6539\u8fdb\uff0c\u53ea\u662f\u8fd9\u4e9b\u5f15\u5165\u77e5\u8bc6\u6240\u9700\u8981\u7684\u8868\u793a\u4e0e\u5229\u7528\u7684\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u673a\u5236\u9700\u8981\u5206\u522b\u8bbe\u8ba1\u3002 \u5173\u4e8erestrict\u7684\u95ee\u9898\uff0c\u5982\u679c\u51cf\u5c0f\u4e86attention\u7684\u8303\u56f4\uff0c\u7684\u786e\u4f1a\u5931\u53bb\u5168\u5c40\u4f9d\u8d56\u5efa\u6a21\u8fd9\u4e00\u4f18\u52bf\uff0c\u4f46\u662f\u5e76\u975e\u6240\u6709\u95ee\u9898\u90fd\u9700\u8981\u957f\u7a0b\u7684\u3001\u5168\u5c40\u7684\u4f9d\u8d56\uff0c\u4e5f\u6709\u5f88\u591a\u95ee\u9898\u53ea\u4f9d\u8d56\u4e8e\u5c40\u90e8\u7ed3\u6784\uff0c\u90a3\u4e48\u901a\u8fc7\u8bbe\u5b9a\u4e00\u4e2a\u5408\u9002\u7684\u7a97\u53e3\u8fdb\u884c\u5efa\u6a21\uff0c\u6355\u6349\u5230\u5e8f\u5217\u7684\u5c40\u90e8\u7ed3\u6784\uff0c\u540c\u6837\u80fd\u591f\u6ee1\u8db3\u6a21\u578b\u5b66\u4e60\u7684\u9700\u8981\u3002\u6b64\u65f6\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u4fdd\u6301\u5e76\u884c\u5316\u7684\u540c\u65f6\u590d\u6742\u5ea6\u7684\u964d\u4f4e\uff0c\u5e76\u4e14\u901a\u8fc7\u7a97\u53e3\u7684\u8bbe\u5b9a\uff0c\u53ef\u4ee5\u5bf9\u6a21\u578b\u7684\u5b66\u4e60\u8303\u56f4\u8fdb\u884c\u63a7\u5236\uff0c\u8fd9\u6837\u53ef\u63a7\u5236\u7684\u6a21\u578b\u53ef\u4ee5\u66f4\u597d\u5730\u5e94\u5bf9task-specific\u7684\u60c5\u51b5\uff0c\u5176\u6027\u80fd\u76f8\u8f83\u4e8e\u666e\u901aattention\u7684RNN\u4e4b\u7c7b\u7684\u6a21\u578b\uff0c\u9664\u4e86\u539f\u672c\u7684\u5e76\u884c\u5316\u548c\u8ba1\u7b97\u590d\u6742\u5ea6\u5c0f\u7684\u4f18\u52bf\u4ee5\u5916\uff0c\u5728\u957f\u8ddd\u79bb\u4f9d\u8d56\u4e0a\uff0crestrict\u7684\u6700\u5927\u8def\u5f84\u957f\u5ea6\u4e3aO(n/r)\uff0cn\u4e3a\u5e8f\u5217\u957f\u5ea6\u3002\u5982\u679crestrict\u7684\u7a97\u53e3\u4e3a1\uff0c\u5176\u6700\u5927\u8def\u5f84\u957f\u5ea6\u4e0e\u666e\u901aattention\u7684RNN\u6a21\u578b\u4e00\u81f4\uff0c\u5747\u4e3aO(n)\u3002\u8fd9\u4e00\u8bc1\u660e\u51fa\u81eaself-attention\u7684\u539f\u6587\uff0c\u5e76\u4e14\u539f\u6587\u5e76\u672a\u5bf9restrict\u7684\u7248\u672c\u8fdb\u884c\u5b9e\u9a8c\u8bba\u8bc1\uff0c\u5b66\u751f\u4e5f\u5e76\u672a\u770b\u8fc7\u76f8\u5173\u7684\u8bba\u6587\u8bc1\u660erestrict\u7248\u672c\u7684\u6027\u80fd\u3002 Reference \u00b6 Paper \u00b6 Neural Machine Translation by Jointly Learning to Align and Translate Show, Attend and Tell: Neural Image Caption Generation with Visual Attention Effective Approaches to Attention-based Neural Machine Translation A Structured Self-Attentive Sentence Embedding Attention is All You Need Blog \u00b6 \u6ce8\u610f\u529b\u673a\u5236\uff08Attention Mechanism\uff09\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5e94\u7528 \u6a21\u578b\u6c47\u603b24 - \u6df1\u5ea6\u5b66\u4e60\u4e2dAttention Mechanism\u8be6\u7ec6\u4ecb\u7ecd\uff1a\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5e94\u7528 \u8bba\u6587\u5b66\u4e605\u201cShow, Attend and Tell: Neural Image Caption Generation with Visual Attention\u201d\u6587\u7ae0\u5b66\u4e60 \u771f\u6b63\u7684\u5b8c\u5168\u56fe\u89e3Seq2Seq Attention\u6a21\u578b \u57fa\u4e8e\u591a\u7bc7\u7ecf\u5178\u8bba\u6587\u7efc\u8ff0Attention\u6a21\u578b\u65b9\u6cd5\uff08\u9644\u6e90\u7801\uff09 \u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7406\u89e3\u4e0e\u5e94\u7528 \u8bba\u6587\u7b14\u8bb0\uff1aA Structured Self-Attentive Sentence Embedding Attention\u7684\u7406\u89e3 \u8bba\u6587\u7b14\u8bb0\uff1aAttention is all you need \u300aAttention is All You Need\u300b\u6d45\u8bfb\uff08\u7b80\u4ecb+\u4ee3\u7801\uff09 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff08Self-attention Mechanism\uff09 \u6df1\u5ea6\u957f\u6587\uff1aNLP\u7684\u5de8\u4eba\u80a9\u8180\uff08\u4e0a\uff09 NLP \u7684\u5de8\u4eba\u80a9\u8180\uff08\u4e0b\uff09\uff1a\u4ece CoVe \u5230 BERT \u4e07\u5b57\u957f\u6587\u6982\u8ff0NLP\u4e2d\u7684\u6df1\u5ea6\u5b66\u4e60\u6280\u672f","title":"Attention"},{"location":"Attention/#_1","text":"Attention\u662f\u4e00\u79cd\u7528\u4e8e\u63d0\u5347\u57fa\u4e8eRNN\uff08LSTM\u6216GRU\uff09\u7684Encoder + Decoder\u6a21\u578b\u7684\u6548\u679c\u7684\u7684\u673a\u5236\uff08Mechanism\uff09\uff0c\u4e00\u822c\u79f0\u4e3aAttention Mechanism\u3002Attention Mechanism\u76ee\u524d\u975e\u5e38\u6d41\u884c\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u673a\u5668\u7ffb\u8bd1\u3001\u8bed\u97f3\u8bc6\u522b\u3001\u56fe\u50cf\u6807\u6ce8\uff08Image Caption\uff09\u7b49\u5f88\u591a\u9886\u57df\uff0c\u4e4b\u6240\u4ee5\u5b83\u8fd9\u4e48\u53d7\u6b22\u8fce\uff0c\u662f\u56e0\u4e3aAttention\u7ed9\u6a21\u578b\u8d4b\u4e88\u4e86\u533a\u5206\u8fa8\u522b\u7684\u80fd\u529b\uff0c\u4f8b\u5982\uff0c\u5728\u673a\u5668\u7ffb\u8bd1\u3001\u8bed\u97f3\u8bc6\u522b\u5e94\u7528\u4e2d\uff0c\u4e3a\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u4f7f\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u7684\u5b66\u4e60\u53d8\u5f97\u66f4\u52a0\u7075\u6d3b\uff08soft\uff09\uff0c\u540c\u65f6Attention\u672c\u8eab\u53ef\u4ee5\u505a\u4e3a\u4e00\u79cd\u5bf9\u9f50\u5173\u7cfb\uff0c\u89e3\u91ca\u7ffb\u8bd1\u8f93\u5165/\u8f93\u51fa\u53e5\u5b50\u4e4b\u95f4\u7684\u5bf9\u9f50\u5173\u7cfb\uff0c\u89e3\u91ca\u6a21\u578b\u5230\u5e95\u5b66\u5230\u4e86\u4ec0\u4e48\u77e5\u8bc6\uff0c\u4e3a\u6211\u4eec\u6253\u5f00\u6df1\u5ea6\u5b66\u4e60\u7684\u9ed1\u7bb1\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7a97\u53e3\u3002 Attention Mechanism\u4e0e\u4eba\u7c7b\u5bf9\u5916\u754c\u4e8b\u7269\u7684\u89c2\u5bdf\u673a\u5236\u5f88\u7c7b\u4f3c\uff0c\u5f53\u4eba\u7c7b\u89c2\u5bdf\u5916\u754c\u4e8b\u7269\u7684\u65f6\u5019\uff0c\u4e00\u822c\u4e0d\u4f1a\u628a\u4e8b\u7269\u5f53\u6210\u4e00\u4e2a\u6574\u4f53\u53bb\u770b\uff0c\u5f80\u5f80\u503e\u5411\u4e8e\u6839\u636e\u9700\u8981\u9009\u62e9\u6027\u7684\u53bb\u83b7\u53d6\u88ab\u89c2\u5bdf\u4e8b\u7269\u7684\u67d0\u4e9b\u91cd\u8981\u90e8\u5206\uff0c\u6bd4\u5982\u6211\u4eec\u770b\u5230\u4e00\u4e2a\u4eba\u65f6\uff0c\u5f80\u5f80\u5148Attention\u5230\u8fd9\u4e2a\u4eba\u7684\u8138\uff0c\u7136\u540e\u518d\u628a\u4e0d\u540c\u533a\u57df\u7684\u4fe1\u606f\u7ec4\u5408\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u5bf9\u88ab\u89c2\u5bdf\u4e8b\u7269\u7684\u6574\u4f53\u5370\u8c61\u3002\u56e0\u6b64\uff0cAttention Mechanism\u53ef\u4ee5\u5e2e\u52a9\u6a21\u578b\u5bf9\u8f93\u5165\u7684X\u6bcf\u4e2a\u90e8\u5206\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u62bd\u53d6\u51fa\u66f4\u52a0\u5173\u952e\u53ca\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u4f7f\u6a21\u578b\u505a\u51fa\u66f4\u52a0\u51c6\u786e\u7684\u5224\u65ad\uff0c\u540c\u65f6\u4e0d\u4f1a\u5bf9\u6a21\u578b\u7684\u8ba1\u7b97\u548c\u5b58\u50a8\u5e26\u6765\u66f4\u5927\u7684\u5f00\u9500\uff0c\u8fd9\u4e5f\u662fAttention Mechanism\u5e94\u7528\u5982\u6b64\u5e7f\u6cdb\u7684\u539f\u56e0\u3002","title":"\u80cc\u666f\u77e5\u8bc6"},{"location":"Attention/#attention","text":"","title":"Attention\u7b80\u4ecb"},{"location":"Attention/#_2","text":"\u8981\u4e48\u662f\u76f4\u63a5\u4f7f\u7528\u6700\u540e\u4e00\u4e2a time_step \u7684\u8f93\u51fa \u8981\u4e48\u662f\u628a\u6240\u6709 time_step \u7684\u8f93\u51fa max/average","title":"\u5f88\u4e45\u4ee5\u524d"},{"location":"Attention/#attention_1","text":"","title":"\u53d7\u5230\u675f\u7f1a\u7684Attention"},{"location":"Attention/#_3","text":"","title":"\u91cd\u70b9\u8bba\u6587"},{"location":"Attention/#neural-machine-translation-by-jointly-learning-to-align-and-translate","text":"\u57fa\u4e8eattention\u7684NMT\u5728\u4f20\u7edf\u7684\u57fa\u7840\u4e0a\uff0c\u5b83\u628a\u6e90\u8bed\u8a00\u7aef\u7684\u6bcf\u4e2a\u8bcd\u5b66\u5230\u7684\u8868\u8fbe\uff08\u4f20\u7edf\u7684\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u8bcd\u540e\u5b66\u5230\u7684\u8868\u8fbe\uff09\u548c\u5f53\u524d\u8981\u9884\u6d4b\u7ffb\u8bd1\u7684\u8bcd\u8054\u7cfb\u4e86\u8d77\u6765\uff0c\u8fd9\u6837\u7684\u8054\u7cfb\u5c31\u662f\u901a\u8fc7\u4ed6\u4eec\u8bbe\u8ba1\u7684attention\u8fdb\u884c\u7684\uff0c\u5728\u6a21\u578b\u8bad\u7ec3\u597d\u540e\uff0c\u6839\u636eattention\u77e9\u9635\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u6e90\u8bed\u8a00\u548c\u76ee\u6807\u8bed\u8a00\u7684\u5bf9\u9f50\u77e9\u9635\u4e86\u3002 \u53ef\u4ee5\u770b\u5230\u4ed6\u4eec\u662f\u4f7f\u7528\u4e00\u4e2a\u611f\u77e5\u673a\u516c\u5f0f\u6765\u5c06\u76ee\u6807\u8bed\u8a00\u548c\u6e90\u8bed\u8a00\u7684\u6bcf\u4e2a\u8bcd\u8054\u7cfb\u4e86\u8d77\u6765\uff0c\u7136\u540e\u901a\u8fc7soft\u51fd\u6570\u5c06\u5176\u5f52\u4e00\u5316\u5f97\u5230\u4e00\u4e2a\u6982\u7387\u5206\u5e03\uff0c\u5c31\u662fattention\u77e9\u9635\u3002","title":"NEURAL MACHINE TRANSLATION BY JOINTLY LEARNING TO ALIGN AND TRANSLATE"},{"location":"Attention/#show-attend-and-tell-neural-image-caption-generation-with-visual-attention","text":"\u968f\u673a\u6027\u4e0e\u786e\u5b9a\u6027 Stochastic \"Hard\" Attention\u548cDeterministic \"Soft\" Attention \u4f20\u7edf\u7684Attention Mechanism\u5c31\u662fSoft Attention\u3002Soft Attention\u662f\u53c2\u6570\u5316\u7684\uff08Parameterization\uff09\uff0c\u56e0\u6b64\u53ef\u5bfc\uff0c\u53ef\u4ee5\u88ab\u5d4c\u5165\u5230\u6a21\u578b\u4e2d\u53bb\uff0c\u76f4\u63a5\u8bad\u7ec3\u3002\u68af\u5ea6\u53ef\u4ee5\u7ecf\u8fc7Attention Mechanism\u6a21\u5757\uff0c\u53cd\u5411\u4f20\u64ad\u5230\u6a21\u578b\u5176\u4ed6\u90e8\u5206\u3002 \u76f8\u53cd\uff0cHard Attention\u662f\u4e00\u4e2a\u968f\u673a\u7684\u8fc7\u7a0b\u3002Hard Attention\u4e0d\u4f1a\u9009\u62e9\u6574\u4e2aencoder\u7684\u8f93\u51fa\u505a\u4e3a\u5176\u8f93\u5165\uff0cHard Attention\u4f1a\u4f9d\u6982\u7387Si\u6765\u91c7\u6837\u8f93\u5165\u7aef\u7684\u9690\u72b6\u6001\u4e00\u90e8\u5206\u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u800c\u4e0d\u662f\u6574\u4e2aencoder\u7684\u9690\u72b6\u6001\u3002\u4e3a\u4e86\u5b9e\u73b0\u68af\u5ea6\u7684\u53cd\u5411\u4f20\u64ad\uff0c\u9700\u8981\u91c7\u7528\u8499\u7279\u5361\u6d1b\u91c7\u6837\u7684\u65b9\u6cd5\u6765\u4f30\u8ba1\u6a21\u5757\u7684\u68af\u5ea6\u3002 \u4e24\u79cdAttention Mechanism\u90fd\u6709\u5404\u81ea\u7684\u4f18\u52bf\uff0c\u4f46\u76ee\u524d\u66f4\u591a\u7684\u7814\u7a76\u548c\u5e94\u7528\u8fd8\u662f\u66f4\u503e\u5411\u4e8e\u4f7f\u7528Soft Attention\uff0c\u56e0\u4e3a\u5176\u53ef\u4ee5\u76f4\u63a5\u6c42\u5bfc\uff0c\u8fdb\u884c\u68af\u5ea6\u53cd\u5411\u4f20\u64ad\u3002 Image caption (\u56fe\u50cf\u7406\u89e3)\u662f\u8ba1\u7b97\u673a\u89c6\u89c9\u7684\u6700\u521d\u59cb\u4efb\u52a1\uff0c\u4e0d\u4ec5\u8981\u83b7\u5f97\u56fe\u7247\u91cc\u7684\u7269\u4f53\uff0c\u8fd8\u8981\u8868\u8fbe\u4ed6\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u76ee\u524d\u73b0\u5b58\u7684\u65b9\u6cd5\u5927\u90fd\u662fencoder \u2014 decoder\u67b6\u6784\uff0c\u5229\u7528CNN\u3001RNN\u3001LSTM\u7b49\u795e\u7ecf\u7f51\u7edc\u5b8c\u6210caption\u5de5\u4f5c\uff0c\u6bd4\u5982\u8bf4\u53ea\u4f7f\u7528CNN\u5bf9\u56fe\u50cf\u8fdb\u884c\u7279\u5f81\u63d0\u53d6\uff0c\u7136\u540e\u5229\u7528\u63d0\u53d6\u7684\u7279\u5f81\u751f\u6210caption\uff0c\u8fd8\u6709\u7ed3\u5408CNN\u548cRNN\u7684\uff0c\u4f7f\u7528CNN\u63d0\u53d6\u56fe\u50cf\u7279\u5f81\uff0c\u5c06Softmax\u5c42\u4e4b\u524d\u7684\u90a3\u4e00\u5c42vector\u4f5c\u4e3aencoder\u7aef\u7684\u8f93\u51fa\u5e76\u9001\u5165decoder\u4e2d\uff0c\u4f7f\u7528LSTM\u5bf9\u5176\u89e3\u7801\u5e76\u751f\u6210\u53e5\u5b50\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u672c\u6587\u6240\u91c7\u53d6\u7684\u65b9\u6cd5\uff0c\u53ea\u662f\u5728\u6b64\u57fa\u7840\u4e0a\u5d4c\u5165\u4e86soft\u548chard attention\u673a\u5236\u3002 \u6a21\u578b\u7684\u603b\u4f53\u67b6\u6784\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e5f\u662f\u7531encoder\u548cdecoder\u7ec4\u6210\u3002 Encoder: \u6a21\u578b\u4f7f\u7528CNN\u6765\u63d0\u53d6 L \u4e2a D \u7ef4\u7684\u7279\u5f81vector\u4f5c\u4e3a\u6ce8\u91ca\u5411\u91cf\uff0c\u6bcf\u4e00\u4e2a\u90fd\u5bf9\u5e94\u56fe\u50cf\u7684\u4e00\u4e2a\u533a\u57df\uff0c\u5982\u4e0b\u5f0f\u3002 \u4e0e\u6b64\u524d\u7684\u5de5\u4f5c\u4f7f\u7528Softmax\u5c42\u4e4b\u524d\u7684\u5168\u8fde\u63a5\u5c42\u63d0\u53d6\u56fe\u50cf\u7279\u5f81\u4e0d\u540c\uff0c\u672c\u6587\u6240\u63d0\u53d6\u7684\u8fd9\u4e9bvector\u6765\u81ea\u4e8e low-level \u7684\u5377\u79ef\u5c42\uff0c\u8fd9\u4f7f\u5f97decoder\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u6240\u6709\u7279\u5f81\u5411\u91cf\u7684\u5b50\u96c6\u6765\u9009\u62e9\u6027\u5730\u805a\u7126\u4e8e\u56fe\u50cf\u7684\u67d0\u4e9b\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u5c06attention\u673a\u5236\u5d4c\u5165\u3002 Decoder: \u89e3\u7801\u9636\u6bb5\u7528LSTM\u7f51\u7edc\u751f\u6210caption\uff0c\u96c6\u5408\u4e3a\u4e0b\u5f0f\uff0c\u5176\u4e2dC\u662f\u53e5\u5b50\u957f\u5ea6\uff0cK\u662f\u8bcd\u8868\u5927\u5c0f\uff0cy\u662f\u5404\u4e2a\u8bcd\u7684one-hot\u7f16\u7801\u6240\u6784\u6210\u7684\u96c6\u5408\u3002 \u53ef\u4ee5\u770b\u5230\uff0chard attention \u4f1a\u4e13\u6ce8\u4e8e\u5f88\u5c0f\u7684\u533a\u57df\uff0c\u800c soft attention \u7684\u6ce8\u610f\u529b\u76f8\u5bf9\u53d1\u6563 \\(z_t\\) \u7531 \\(a_i\\) \u548c\u6743\u91cd \\(a_{ti}\\) \u901a\u8fc7\u52a0\u6743\u5f97\u5230\u5bf9\u4e8e\u6bcf\u4e2a\u65f6\u95f4\u7684\u6bcf\u4e2a\u533a\u57df\u90fd\u5b9a\u4e49\u4e00\u4e2a\u6743\u91cd\u503c \\(a_{ti}\\) \u3002\u4e3a\u4e86\u6ee1\u8db3\u6743\u91cd\u7684\u5f52\u4e00\u5316\uff0c\u6211\u4eec\u901a\u8fc7softmax\u51fd\u6570\u5b9e\u73b0\uff0c\u5982\u4e0b\u5f0f\uff0cSoftmax\u7684\u8f93\u5165\u9700\u8981\u5305\u542b\u4f4d\u7f6e\u4fe1\u606f\u548c\u524d\u4e00\u65f6\u523b\u9690\u5c42\u503c\uff0c\u672c\u6587\u4e2d\u7684 \\(f_{att}\\) \u662f\u4e00\u4e2a\u591a\u5c42\u611f\u77e5\u673a","title":"SHOW, ATTEND AND TELL: NEURAL IMAGE CAPTION GENERATION WITH VISUAL ATTENTION"},{"location":"Attention/#stochastic-hard-attention","text":"\u8bb0 \\(s_t\\) \u4e3a decoder \u7b2c t \u4e2a\u65f6\u523b\u7684 attention \u6240\u5173\u6ce8\u7684\u4f4d\u7f6e\u7f16\u53f7\uff0c \\(S_ti\\) \u8868\u793a\u7b2c t \u65f6\u523b attention \u662f\u5426\u5173\u6ce8\u4f4d\u7f6e i \uff0c\u670d\u4ece\u591a\u5143\u4f2f\u52aa\u5229\u5206\u5e03\uff0c \\(\u2200t,S_{ti},i=1,2,...,L\\) \u4e2d\u6709\u4e14\u53ea\u6709\u53d6 1\uff0c\u5176\u4f59\u5168\u90e8\u4e3a 0\uff0c\u6240\u4ee5\u662f one-hot \u5f62\u5f0f\u3002\u8fd9\u79cd attention \u6bcf\u6b21\u53ea focus \u4e00\u4e2a\u4f4d\u7f6e\u7684\u505a\u6cd5\uff0c\u5c31\u662f\u201chard\u201d\u79f0\u8c13\u7684\u6765\u6e90\u3002 \\(z_t\\) \u4e5f\u5c31\u88ab\u89c6\u4e3a\u4e00\u4e2a\u53d8\u91cf\uff0c\u8ba1\u7b97\u5982\u4e0b\uff1a \u95ee\u9898\u662f \u03b1ti \u600e\u4e48\u7b97\u5462\uff1f\u628a \u03b1ti \u89c6\u4e3a\u9690\u53d8\u91cf\uff0c\u7814\u7a76\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\uff0c\u8fdb\u800c\u7814\u7a76\u76ee\u6807\u51fd\u6570\u5bf9\u53c2\u6570\u7684\u68af\u5ea6\u3002\u76f4\u89c2\u7406\u89e3\uff0c\u6a21\u578b\u8981\u6839\u636e a=(a1,...,aL) \u6765\u751f\u6210\u5e8f\u5217 y=(y1,...,yC) \uff0c\u6240\u4ee5\u76ee\u6807\u53ef\u4ee5\u662f\u6700\u5927\u5316 log p(y|a) \uff0c\u4f46\u8fd9\u91cc\u6ca1\u6709\u663e\u5f0f\u7684\u5305\u542b s \uff0c\u6240\u4ee5\u4f5c\u8005\u5229\u7528\u8457\u540d\u7684 Jensen \u4e0d\u7b49\u5f0f\uff08Jensen's inequality\uff09\u5bf9\u76ee\u6807\u51fd\u6570\u505a\u4e86\u8f6c\u5316\uff0c\u5f97\u5230\u4e86\u76ee\u6807\u51fd\u6570\u7684\u4e00\u4e2a lower bound\uff0c\u5982\u4e0b\uff1a","title":"Stochastic Hard Attention"},{"location":"Attention/#deterministic-soft-attention","text":"soft attention \u6bcf\u6b21\u4f1a\u7167\u987e\u5230\u5168\u90e8\u7684\u4f4d\u7f6e\uff0c\u53ea\u662f\u4e0d\u540c\u4f4d\u7f6e\u7684\u6743\u91cd\u4e0d\u540c\u7f62\u4e86\u3002\u8fd9\u65f6 Zt \u5373\u4e3a ai \u7684\u52a0\u6743\u6c42\u548c","title":"Deterministic Soft Attention"},{"location":"Attention/#effective-approaches-to-attention-based-neural-machine-translation","text":"\u8fd9\u7bc7\u8bba\u6587\u662f\u7ee7\u4e0a\u4e00\u7bc7\u8bba\u6587\u540e\uff0c\u4e00\u7bc7\u5f88\u5177\u4ee3\u8868\u6027\u7684\u8bba\u6587\uff0c\u4ed6\u4eec\u7684\u5de5\u4f5c\u544a\u8bc9\u4e86\u5927\u5bb6attention\u5728RNN\u4e2d\u53ef\u4ee5\u5982\u4f55\u8fdb\u884c\u6269\u5c55\uff0c\u8fd9\u7bc7\u8bba\u6587\u5bf9\u540e\u7eed\u5404\u79cd\u57fa\u4e8eattention\u7684\u6a21\u578b\u5728NLP\u5e94\u7528\u8d77\u5230\u4e86\u5f88\u5927\u7684\u4fc3\u8fdb\u4f5c\u7528\u3002\u5728\u8bba\u6587\u4e2d\u4ed6\u4eec\u63d0\u51fa\u4e86\u4e24\u79cdattention\u673a\u5236\uff0c\u4e00\u79cd\u662f\u5168\u5c40\uff08global\uff09\u673a\u5236\uff0c\u4e00\u79cd\u662f\u5c40\u90e8\uff08local\uff09\u673a\u5236\u3002","title":"EFFECTIVE APPROACHES TO ATTENTION-BASED NEURAL MACHINE TRANSLATION"},{"location":"Attention/#global-attention","text":"\u6240\u6709\u7684 hidden state \u90fd\u88ab\u7528\u4e8e\u8ba1\u7b97 Context vector \u7684\u6743\u91cd\uff0c\u5373\u53d8\u957f\u7684\u5bf9\u9f50\u5411\u91cfat\uff0c\u5176\u957f\u5ea6\u7b49\u4e8eencoder\u7aef\u8f93\u5165\u53e5\u5b50\u7684\u957f\u5ea6\u3002\u5728t\u65f6\u523b\uff0c\u9996\u5148\u57fa\u4e8edecoder\u7684\u9690\u72b6\u6001htht\u548c\u6e90\u7aef\u7684\u9690\u72b6\u6001hs\uff0c\u8ba1\u7b97\u4e00\u4e2a\u53d8\u957f\u7684\u9690\u5bf9\u9f50\u6743\u503c\u5411\u91cfat\uff0c\u4e4b\u540e\u901a\u8fc7\u52a0\u6743\u5e73\u5747\u7684\u65b9\u5f0f\uff0c\u5f97\u5230\u4e0a\u4e0b\u6587\u5411\u91cfct\u3002","title":"Global Attention"},{"location":"Attention/#local-attention","text":"Global Attention\u6709\u4e00\u4e2a\u660e\u663e\u7684\u7f3a\u70b9\u5c31\u662f\uff0c\u6bcf\u4e00\u6b21\uff0cencoder\u7aef\u7684\u6240\u6709hidden state\u90fd\u8981\u53c2\u4e0e\u8ba1\u7b97\uff0c\u8fd9\u6837\u505a\u8ba1\u7b97\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927\uff0c\u7279\u522b\u662f\u5f53encoder\u7684\u53e5\u5b50\u504f\u957f\uff0c\u6bd4\u5982\uff0c\u4e00\u6bb5\u8bdd\u6216\u8005\u4e00\u7bc7\u6587\u7ae0\uff0c\u6548\u7387\u504f\u4f4e\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0cLocal Attention\u5e94\u8fd0\u800c\u751f\u3002 Local Attention\u662f\u4e00\u79cd\u4ecb\u4e8eKelvin Xu\u6240\u63d0\u51fa\u7684Soft Attention\u548cHard Attention\u4e4b\u95f4\u7684\u4e00\u79cdAttention\u65b9\u5f0f\uff0c\u5373\u628a\u4e24\u79cd\u65b9\u5f0f\u7ed3\u5408\u8d77\u6765\u3002\u56e0\u4e3a\u5b83\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u8981\u4f4e\u4e8e global attention\u3001soft attention\uff0c\u800c\u4e14\u4e0e hard attention \u4e0d\u540c\u7684\u662f\uff0clocal attention \u51e0\u4e4e\u5904\u5904\u53ef\u5fae\uff0c\u6613\u4e0e\u8bad\u7ec3\u3002 \u6839\u636e\u4e00\u4e2a\u9884\u6d4b\u51fd\u6570\uff0c\u5148\u9884\u6d4b\u5f53\u524d\u89e3\u7801\u65f6\u8981\u5bf9\u9f50\u7684\u6e90\u8bed\u8a00\u7aef\u7684\u4f4d\u7f6ePt\uff0c\u7136\u540e\u901a\u8fc7\u4e0a\u4e0b\u6587\u7a97\u53e3\uff0c\u4ec5\u8003\u8651\u7a97\u53e3\u5185\u7684\u8bcd\u3002 \u5176\u4e2d pt \u662f\u4e00\u4e2a source position index\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a attention \u7684\u201c\u7126\u70b9\u201d\uff0c\u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0cD\u6839\u636e\u7ecf\u9a8c\u6765\u9009\u62e9\uff08\u6587\u7ae0\u9009\u7528 10\uff09\u3002 \u5173\u4e8e pt \u7684\u8ba1\u7b97\uff0c\u6587\u7ae0\u7ed9\u51fa\u4e86\u4e24\u79cd\u8ba1\u7b97\u65b9\u6848\uff1a local-p local-m \u4e58\u4e86\u4e00\u4e2apt\u4f4d\u7f6e\u76f8\u5173\u7684\u9ad8\u65af\u5206\u5e03 \u5176\u4e2d WpWp\u548cvpvp \u662f\u6a21\u578b\u7684\u53c2\u6570\uff0c S \u662f source sentence \u7684\u957f\u5ea6\uff0c\u6613\u77e5 pt\u2208[0,S] \u3002\u6743\u91cd \u03b1t(s) \u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \u53ef\u4ee5\u770b\u51fa\uff0c\u8ddd\u79bb\u4e2d\u5fc3 pt \u8d8a\u8fdc\u7684\u4f4d\u7f6e\uff0c\u5176\u4f4d\u7f6e\u4e0a\u7684 source hidden state \u5bf9\u5e94\u7684\u6743\u91cd\u5c31\u4f1a\u88ab\u538b\u7f29\u5730\u8d8a\u5389\u5bb3\u3002","title":"Local Attention"},{"location":"Attention/#_4","text":"\u603b\u4e4b\uff0cGlobal Attention\u548cLocal Attention\u5404\u6709\u4f18\u52a3\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0cGlobal Attention\u5e94\u7528\u66f4\u666e\u904d\uff0c\u56e0\u4e3alocal Attention\u9700\u8981\u9884\u6d4b\u4e00\u4e2a\u4f4d\u7f6e\u5411\u91cfp\uff0c\u8fd9\u5c31\u5e26\u6765\u4e24\u4e2a\u95ee\u9898\uff1a1\u3001\u5f53encoder\u53e5\u5b50\u4e0d\u662f\u5f88\u957f\u65f6\uff0c\u76f8\u5bf9Global Attention\uff0c\u8ba1\u7b97\u91cf\u5e76\u6ca1\u6709\u660e\u663e\u51cf\u5c0f\u30022\u3001\u4f4d\u7f6e\u5411\u91cfpt\u7684\u9884\u6d4b\u5e76\u4e0d\u975e\u5e38\u51c6\u786e\uff0c\u8fd9\u5c31\u76f4\u63a5\u8ba1\u7b97\u7684\u5230\u7684local Attention\u7684\u51c6\u786e\u7387\u3002","title":"\u603b\u7ed3"},{"location":"Attention/#a-structured-self-attentive-sentence-embedding","text":"\u4e0d\u518d\u4f7f\u7528\u4e00\u7ef4\u7684\u6743\u91cd\u503c\u8f6c\u6362\u4e3a\u6743\u91cd\u77e9\u9635\uff0c\u5e76\u4e14\u4e3a\u6b64\u5bf9\u635f\u5931\u51fd\u6570\u52a0\u4ee5\u6539\u8fdb","title":"A STRUCTURED SELF-ATTENTIVE SENTENCE EMBEDDING"},{"location":"Attention/#_5","text":"\u8f93\u5165q\u3001k\u3001v\uff0c\u5206\u522b\u4ee3\u8868query\u3001key-value pair\u3002\u8fd9\u91cc\u7684 key,value, \u548c query\u9700\u8981\u89e3\u91ca\u4e00\u4e0b\uff0c\u8fd9\u91cc\u628aattention\u62bd\u8c61\u4e3a\u5bf9 value() \u7684\u6bcf\u4e2a token\u8fdb\u884c\u52a0\u6743\uff0c\u800c\u52a0\u6743\u7684weight\u5c31\u662f attentionweight\uff0c\u800c attention weight \u5c31\u662f\u6839\u636e query\u548c key \u8ba1\u7b97\u5f97\u5230\uff0c\u5176\u610f\u4e49\u4e3a\uff1a\u4e3a\u4e86\u7528 value\u6c42\u51fa query\u7684\u7ed3\u679c, \u6839\u636e query\u548c key \u6765\u51b3\u5b9a\u6ce8\u610f\u529b\u5e94\u8be5\u653e\u5728value\u7684\u54ea\u90e8\u5206\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0ckey\u548cvalue\u90fd\u6307\u5411\u5355\u8bcd\u7684embedding\u3002Decoder\u751f\u6210\u7684query\u548cencoder\u751f\u6210\u7684key\u8fd0\u7b97\u5f97\u5230attentionweight \u518d\u548cvalue\u52a0\u6743\u6c42\u548c \u3002","title":"\u7b80\u800c\u8a00\u4e4b"},{"location":"Attention/#_6","text":"\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u770b\u5f85Attention\u673a\u5236\uff1a\u5c06Source\u4e2d\u7684\u6784\u6210\u5143\u7d20\u60f3\u8c61\u6210\u662f\u7531\u4e00\u7cfb\u5217\u7684\u6570\u636e\u5bf9\u6784\u6210\uff0c\u6b64\u65f6\u7ed9\u5b9aTarget\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20Query\uff0c\u901a\u8fc7\u8ba1\u7b97Query\u548c\u5404\u4e2aKey\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff0c\u5f97\u5230\u6bcf\u4e2aKey\u5bf9\u5e94Value\u7684\u6743\u91cd\u7cfb\u6570\uff0c\u7136\u540e\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u5373\u5f97\u5230\u4e86\u6700\u7ec8\u7684Attention\u6570\u503c\u3002\u6240\u4ee5\u672c\u8d28\u4e0aAttention\u673a\u5236\u662f\u5bf9Source\u4e2d\u5143\u7d20\u7684Value\u503c\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u800cQuery\u548cKey\u7528\u6765\u8ba1\u7b97\u5bf9\u5e94Value\u7684\u6743\u91cd\u7cfb\u6570\u3002\u5373\u53ef\u4ee5\u5c06\u5176\u672c\u8d28\u601d\u60f3\u6539\u5199\u4e3a\u5982\u4e0b\u516c\u5f0f\uff1a \u5176\u4e2d\uff0c \\(Lx=|Source|\\) \u4ee3\u8868Source\u7684\u957f\u5ea6\uff0c\u516c\u5f0f\u542b\u4e49\u5373\u5982\u4e0a\u6240\u8ff0\u3002\u4e0a\u6587\u6240\u4e3e\u7684\u673a\u5668\u7ffb\u8bd1\u7684\u4f8b\u5b50\u91cc\uff0c\u56e0\u4e3a\u5728\u8ba1\u7b97Attention\u7684\u8fc7\u7a0b\u4e2d\uff0cSource\u4e2d\u7684Key\u548cValue\u5408\u4e8c\u4e3a\u4e00\uff0c\u6307\u5411\u7684\u662f\u540c\u4e00\u4e2a\u4e1c\u897f\uff0c\u4e5f\u5373\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u5e94\u7684\u8bed\u4e49\u7f16\u7801\uff0c\u6240\u4ee5\u53ef\u80fd\u4e0d\u5bb9\u6613\u770b\u51fa\u8fd9\u79cd\u80fd\u591f\u4f53\u73b0\u672c\u8d28\u601d\u60f3\u7684\u7ed3\u6784\u3002 \u5f53\u7136\uff0c\u4ece\u6982\u5ff5\u4e0a\u7406\u89e3\uff0c\u628aAttention\u4ecd\u7136\u7406\u89e3\u4e3a\u4ece\u5927\u91cf\u4fe1\u606f\u4e2d\u6709\u9009\u62e9\u5730\u7b5b\u9009\u51fa\u5c11\u91cf\u91cd\u8981\u4fe1\u606f\u5e76\u805a\u7126\u5230\u8fd9\u4e9b\u91cd\u8981\u4fe1\u606f\u4e0a\uff0c\u5ffd\u7565\u5927\u591a\u4e0d\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u8fd9\u79cd\u601d\u8def\u4ecd\u7136\u6210\u7acb\u3002\u805a\u7126\u7684\u8fc7\u7a0b\u4f53\u73b0\u5728\u6743\u91cd\u7cfb\u6570\u7684\u8ba1\u7b97\u4e0a\uff0c\u6743\u91cd\u8d8a\u5927\u8d8a\u805a\u7126\u4e8e\u5176\u5bf9\u5e94\u7684Value\u503c\u4e0a\uff0c\u5373\u6743\u91cd\u4ee3\u8868\u4e86\u4fe1\u606f\u7684\u91cd\u8981\u6027\uff0c\u800cValue\u662f\u5176\u5bf9\u5e94\u7684\u4fe1\u606f\u3002 \u4ece\u4e0a\u56fe\u53ef\u4ee5\u5f15\u51fa\u53e6\u5916\u4e00\u79cd\u7406\u89e3\uff0c\u4e5f\u53ef\u4ee5\u5c06Attention\u673a\u5236\u770b\u4f5c\u4e00\u79cd\u8f6f\u5bfb\u5740\uff08Soft Addressing\uff09:Source\u53ef\u4ee5\u770b\u4f5c\u5b58\u50a8\u5668\u5185\u5b58\u50a8\u7684\u5185\u5bb9\uff0c\u5143\u7d20\u7531\u5730\u5740Key\u548c\u503cValue\u7ec4\u6210\uff0c\u5f53\u524d\u6709\u4e2aKey=Query\u7684\u67e5\u8be2\uff0c\u76ee\u7684\u662f\u53d6\u51fa\u5b58\u50a8\u5668\u4e2d\u5bf9\u5e94\u7684Value\u503c\uff0c\u5373Attention\u6570\u503c\u3002\u901a\u8fc7Query\u548c\u5b58\u50a8\u5668\u5185\u5143\u7d20Key\u7684\u5730\u5740\u8fdb\u884c\u76f8\u4f3c\u6027\u6bd4\u8f83\u6765\u5bfb\u5740\uff0c\u4e4b\u6240\u4ee5\u8bf4\u662f\u8f6f\u5bfb\u5740\uff0c\u6307\u7684\u4e0d\u50cf\u4e00\u822c\u5bfb\u5740\u53ea\u4ece\u5b58\u50a8\u5185\u5bb9\u91cc\u9762\u627e\u51fa\u4e00\u6761\u5185\u5bb9\uff0c\u800c\u662f\u53ef\u80fd\u4ece\u6bcf\u4e2aKey\u5730\u5740\u90fd\u4f1a\u53d6\u51fa\u5185\u5bb9\uff0c\u53d6\u51fa\u5185\u5bb9\u7684\u91cd\u8981\u6027\u6839\u636eQuery\u548cKey\u7684\u76f8\u4f3c\u6027\u6765\u51b3\u5b9a\uff0c\u4e4b\u540e\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u53d6\u51fa\u6700\u7ec8\u7684Value\u503c\uff0c\u4e5f\u5373Attention\u503c\u3002\u6240\u4ee5\u4e0d\u5c11\u7814\u7a76\u4eba\u5458\u5c06Attention\u673a\u5236\u770b\u4f5c\u8f6f\u5bfb\u5740\u7684\u4e00\u79cd\u7279\u4f8b\uff0c\u8fd9\u4e5f\u662f\u975e\u5e38\u6709\u9053\u7406\u7684\u3002 \u81f3\u4e8eAttention\u673a\u5236\u7684\u5177\u4f53\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u5982\u679c\u5bf9\u76ee\u524d\u5927\u591a\u6570\u65b9\u6cd5\u8fdb\u884c\u62bd\u8c61\u7684\u8bdd\uff0c\u53ef\u4ee5\u5c06\u5176\u5f52\u7eb3\u4e3a\u4e24\u4e2a\u8fc7\u7a0b\uff1a\u7b2c\u4e00\u4e2a\u8fc7\u7a0b\u662f\u6839\u636eQuery\u548cKey\u8ba1\u7b97\u6743\u91cd\u7cfb\u6570\uff0c\u7b2c\u4e8c\u4e2a\u8fc7\u7a0b\u6839\u636e\u6743\u91cd\u7cfb\u6570\u5bf9Value\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u3002\u800c\u7b2c\u4e00\u4e2a\u8fc7\u7a0b\u53c8\u53ef\u4ee5\u7ec6\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a\u7b2c\u4e00\u4e2a\u9636\u6bb5\u6839\u636eQuery\u548cKey\u8ba1\u7b97\u4e24\u8005\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff1b\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u5bf9\u7b2c\u4e00\u9636\u6bb5\u7684\u539f\u59cb\u5206\u503c\u8fdb\u884c\u5f52\u4e00\u5316\u5904\u7406\uff1b\u8fd9\u6837\uff0c\u53ef\u4ee5\u5c06Attention\u7684\u8ba1\u7b97\u8fc7\u7a0b\u62bd\u8c61\u4e3a\u5982\u56fe\u5c55\u793a\u7684\u4e09\u4e2a\u9636\u6bb5\u3002 \u5728\u7b2c\u4e00\u4e2a\u9636\u6bb5\uff0c\u53ef\u4ee5\u5f15\u5165\u4e0d\u540c\u7684\u51fd\u6570\u548c\u8ba1\u7b97\u673a\u5236\uff0c\u6839\u636eQuery\u548c\u67d0\u4e2aKey_i\uff0c\u8ba1\u7b97\u4e24\u8005\u7684\u76f8\u4f3c\u6027\u6216\u8005\u76f8\u5173\u6027\uff0c\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u5305\u62ec\uff1a\u6c42\u4e24\u8005\u7684\u5411\u91cf\u70b9\u79ef\u3001\u6c42\u4e24\u8005\u7684\u5411\u91cfCosine\u76f8\u4f3c\u6027\u6216\u8005\u901a\u8fc7\u518d\u5f15\u5165\u989d\u5916\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u6c42\u503c\uff0c\u5373\u5982\u4e0b\u65b9\u5f0f\uff1a \u7b2c\u4e00\u9636\u6bb5\u4ea7\u751f\u7684\u5206\u503c\u6839\u636e\u5177\u4f53\u4ea7\u751f\u7684\u65b9\u6cd5\u4e0d\u540c\u5176\u6570\u503c\u53d6\u503c\u8303\u56f4\u4e5f\u4e0d\u4e00\u6837\uff0c\u7b2c\u4e8c\u9636\u6bb5\u5f15\u5165\u7c7b\u4f3cSoftMax\u7684\u8ba1\u7b97\u65b9\u5f0f\u5bf9\u7b2c\u4e00\u9636\u6bb5\u7684\u5f97\u5206\u8fdb\u884c\u6570\u503c\u8f6c\u6362\uff0c\u4e00\u65b9\u9762\u53ef\u4ee5\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5c06\u539f\u59cb\u8ba1\u7b97\u5206\u503c\u6574\u7406\u6210\u6240\u6709\u5143\u7d20\u6743\u91cd\u4e4b\u548c\u4e3a1\u7684\u6982\u7387\u5206\u5e03\uff1b\u53e6\u4e00\u65b9\u9762\u4e5f\u53ef\u4ee5\u901a\u8fc7SoftMax\u7684\u5185\u5728\u673a\u5236\u66f4\u52a0\u7a81\u51fa\u91cd\u8981\u5143\u7d20\u7684\u6743\u91cd\u3002\u5373\u4e00\u822c\u91c7\u7528\u5982\u4e0b\u516c\u5f0f\u8ba1\u7b97\uff1a \u7b2c\u4e8c\u9636\u6bb5\u7684\u8ba1\u7b97\u7ed3\u679caiai\u5373\u4e3avalueivaluei\u5bf9\u5e94\u7684\u6743\u91cd\u7cfb\u6570\uff0c\u7136\u540e\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5373\u53ef\u5f97\u5230Attention\u6570\u503c\uff1a \u901a\u8fc7\u5982\u4e0a\u4e09\u4e2a\u9636\u6bb5\u7684\u8ba1\u7b97\uff0c\u5373\u53ef\u6c42\u51fa\u9488\u5bf9Query\u7684Attention\u6570\u503c\uff0c\u76ee\u524d\u7edd\u5927\u591a\u6570\u5177\u4f53\u7684\u6ce8\u610f\u529b\u673a\u5236\u8ba1\u7b97\u65b9\u6cd5\u90fd\u7b26\u5408\u4e0a\u8ff0\u7684\u4e09\u9636\u6bb5\u62bd\u8c61\u8ba1\u7b97\u8fc7\u7a0b\u3002","title":"\u672c\u8d28\u7406\u89e3"},{"location":"Attention/#_7","text":"\u57fa\u4e8eCNN\u7684Seq2Seq+attention\u7684\u4f18\u70b9\uff1a\u57fa\u4e8eCNN\u7684Seq2Seq\u6a21\u578b\u5177\u6709\u57fa\u4e8eRNN\u7684Seq2Seq\u6a21\u578b\u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56\u7684\u80fd\u529b\uff0c\u6b64\u5916\uff0c\u6700\u5927\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u5e76\u884c\u5316\u5b9e\u73b0\uff0c\u6548\u7387\u6bd4\u57fa\u4e8eRNN\u7684Seq2Seq\u6a21\u578b\u9ad8\u3002\u7f3a\u70b9\uff1a\u8ba1\u7b97\u91cf\u4e0e\u89c2\u6d4b\u5e8f\u5217X\u548c\u8f93\u51fa\u5e8f\u5217Y\u7684\u957f\u5ea6\u6210\u6b63\u6bd4\u3002","title":"\u5176\u4ed6"},{"location":"Attention/#transformer-attention-is-all-your-need","text":"","title":"Transformer: Attention is all your need"},{"location":"Attention/#_8","text":"Self Attention\u4e5f\u7ecf\u5e38\u88ab\u79f0\u4e3aintra Attention\u3002\u4e0e\u4f20\u7edf\u7684Attention\u673a\u5236\u975e\u5e38\u7684\u4e0d\u540c\uff1a\u4f20\u7edf\u7684Attention\u662f\u57fa\u4e8esource\u7aef\u548ctarget\u7aef\u7684hidden state\u8ba1\u7b97Attention\u7684\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6e90\u7aef\u7684\u6bcf\u4e2a\u8bcd\u4e0e\u76ee\u6807\u7aef\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u4f46Self Attention\u4e0d\u540c\uff0c\u5b83\u5206\u522b\u5728source\u7aef\u548ctarget\u7aef\u8fdb\u884c\uff0c\u4ec5\u4e0esource input\u6216\u8005target input\u81ea\u8eab\u76f8\u5173\u7684Self Attention\uff0c\u6355\u6349source\u7aef\u6216target\u7aef\u81ea\u8eab\u7684\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u7136\u540e\u518d\u628asource\u7aef\u7684\u5f97\u5230\u7684self Attention\u52a0\u5165\u5230target\u7aef\u5f97\u5230\u7684Attention\u4e2d\uff0c\u6355\u6349source\u7aef\u548ctarget\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u56e0\u6b64\uff0cself Attention Attention\u6bd4\u4f20\u7edf\u7684Attention mechanism\u6548\u679c\u8981\u597d\uff0c\u4e3b\u8981\u539f\u56e0\u4e4b\u4e00\u662f\uff0c\u4f20\u7edf\u7684Attention\u673a\u5236\u5ffd\u7565\u4e86**\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb**\uff0c\u76f8\u5bf9\u6bd4\uff0cself Attention\u53ef\u4ee5\u4e0d\u4ec5\u53ef\u4ee5\u5f97\u5230\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u6709\u6548\u83b7\u53d6\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u81ea\u8eab\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5728\u4e00\u822c\u4efb\u52a1\u7684Encoder-Decoder\u6846\u67b6\u4e2d\uff0c\u8f93\u5165Source\u548c\u8f93\u51faTarget\u5185\u5bb9\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6bd4\u5982\u5bf9\u4e8e\u82f1-\u4e2d\u673a\u5668\u7ffb\u8bd1\u6765\u8bf4\uff0cSource\u662f\u82f1\u6587\u53e5\u5b50\uff0cTarget\u662f\u5bf9\u5e94\u7684\u7ffb\u8bd1\u51fa\u7684\u4e2d\u6587\u53e5\u5b50\uff0cAttention\u673a\u5236\u53d1\u751f\u5728Target\u7684\u5143\u7d20Query\u548cSource\u4e2d\u7684\u6240\u6709\u5143\u7d20\u4e4b\u95f4\u3002\u800cSelf Attention\u987e\u540d\u601d\u4e49\uff0c\u6307\u7684\u4e0d\u662fTarget\u548cSource\u4e4b\u95f4\u7684Attention\u673a\u5236\uff0c\u800c\u662fSource\u5185\u90e8\u5143\u7d20\u4e4b\u95f4\u6216\u8005Target\u5185\u90e8\u5143\u7d20\u4e4b\u95f4\u53d1\u751f\u7684Attention\u673a\u5236\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3aTarget=Source\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0b\u7684\u6ce8\u610f\u529b\u8ba1\u7b97\u673a\u5236\u3002\u5176\u5177\u4f53\u8ba1\u7b97\u8fc7\u7a0b\u662f\u4e00\u6837\u7684\uff0c\u53ea\u662f\u8ba1\u7b97\u5bf9\u8c61\u53d1\u751f\u4e86\u53d8\u5316\u800c\u5df2\uff0c\u6240\u4ee5\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u5176\u8ba1\u7b97\u8fc7\u7a0b\u7ec6\u8282\u3002 \u5982\u679c\u662f\u5e38\u89c4\u7684Target\u4e0d\u7b49\u4e8eSource\u60c5\u5f62\u4e0b\u7684\u6ce8\u610f\u529b\u8ba1\u7b97\uff0c\u5176\u7269\u7406\u542b\u4e49\u6b63\u5982\u4e0a\u6587\u6240\u8bb2\uff0c\u6bd4\u5982\u5bf9\u4e8e\u673a\u5668\u7ffb\u8bd1\u6765\u8bf4\uff0c\u672c\u8d28\u4e0a\u662f\u76ee\u6807\u8bed\u5355\u8bcd\u548c\u6e90\u8bed\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u79cd\u5355\u8bcd\u5bf9\u9f50\u673a\u5236\u3002\u90a3\u4e48\u5982\u679c\u662fSelf Attention\u673a\u5236\uff0c\u4e00\u4e2a\u5f88\u81ea\u7136\u7684\u95ee\u9898\u662f\uff1a\u901a\u8fc7Self Attention\u5230\u5e95\u5b66\u5230\u4e86\u54ea\u4e9b\u89c4\u5f8b\u6216\u8005\u62bd\u53d6\u51fa\u4e86\u54ea\u4e9b\u7279\u5f81\u5462\uff1f\u6216\u8005\u8bf4\u5f15\u5165Self Attention\u6709\u4ec0\u4e48\u589e\u76ca\u6216\u8005\u597d\u5904\u5462\uff1f\u6211\u4eec\u4ecd\u7136\u4ee5\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684Self Attention\u6765\u8bf4\u660e\uff0c\u4e0b\u56fe\u53ef\u89c6\u5316\u5730\u8868\u793aSelf Attention\u5728\u540c\u4e00\u4e2a\u82f1\u8bed\u53e5\u5b50\u5185\u5355\u8bcd\u95f4\u4ea7\u751f\u7684\u8054\u7cfb\u3002 \u4ece\u4e24\u5f20\u56fe\u53ef\u4ee5\u770b\u51fa\uff0cSelf Attention\u53ef\u4ee5\u6355\u83b7\u540c\u4e00\u4e2a\u53e5\u5b50\u4e2d\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e9b\u53e5\u6cd5\u7279\u5f81\uff08\u6bd4\u5982\u5c55\u793a\u7684\u6709\u4e00\u5b9a\u8ddd\u79bb\u7684\u77ed\u8bed\u7ed3\u6784\uff09\u6216\u8005\u8bed\u4e49\u7279\u5f81\uff08\u6bd4\u5982\u5c55\u793a\u7684its\u7684\u6307\u4ee3\u5bf9\u8c61Law\uff09\u3002\u5f88\u660e\u663e\uff0c\u5f15\u5165Self Attention\u540e\u4f1a\u66f4\u5bb9\u6613\u6355\u83b7\u53e5\u5b50\u4e2d\u957f\u8ddd\u79bb\u7684\u76f8\u4e92\u4f9d\u8d56\u7684\u7279\u5f81\uff0c\u56e0\u4e3a\u5982\u679c\u662fRNN\u6216\u8005LSTM\uff0c\u9700\u8981\u4f9d\u6b21\u5e8f\u5e8f\u5217\u8ba1\u7b97\uff0c\u5bf9\u4e8e\u8fdc\u8ddd\u79bb\u7684\u76f8\u4e92\u4f9d\u8d56\u7684\u7279\u5f81\uff0c\u8981\u7ecf\u8fc7\u82e5\u5e72\u65f6\u95f4\u6b65\u6b65\u9aa4\u7684\u4fe1\u606f\u7d2f\u79ef\u624d\u80fd\u5c06\u4e24\u8005\u8054\u7cfb\u8d77\u6765\uff0c\u800c\u8ddd\u79bb\u8d8a\u8fdc\uff0c\u6709\u6548\u6355\u83b7\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002 \u4f46\u662fSelf Attention\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u4f1a\u76f4\u63a5\u5c06\u53e5\u5b50\u4e2d\u4efb\u610f\u4e24\u4e2a\u5355\u8bcd\u7684\u8054\u7cfb\u901a\u8fc7\u4e00\u4e2a\u8ba1\u7b97\u6b65\u9aa4\u76f4\u63a5\u8054\u7cfb\u8d77\u6765\uff0c\u6240\u4ee5\u8fdc\u8ddd\u79bb\u4f9d\u8d56\u7279\u5f81\u4e4b\u95f4\u7684\u8ddd\u79bb\u88ab\u6781\u5927\u7f29\u77ed\uff0c\u6709\u5229\u4e8e\u6709\u6548\u5730\u5229\u7528\u8fd9\u4e9b\u7279\u5f81\u3002\u9664\u6b64\u5916\uff0cSelf Attention\u5bf9\u4e8e\u589e\u52a0\u8ba1\u7b97\u7684\u5e76\u884c\u6027\u4e5f\u6709\u76f4\u63a5\u5e2e\u52a9\u4f5c\u7528\u3002\u8fd9\u662f\u4e3a\u4f55Self Attention\u9010\u6e10\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u4e3b\u8981\u539f\u56e0\u3002","title":"\u7b80\u4ecb"},{"location":"Attention/#_9","text":"\u6df1\u5ea6\u5b66\u4e60\u505aNLP\u7684\u65b9\u6cd5\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u5148\u5c06\u53e5\u5b50\u5206\u8bcd\uff0c\u7136\u540e\u6bcf\u4e2a\u8bcd\u8f6c\u5316\u4e3a\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u5e8f\u5217\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u6bcf\u4e2a\u53e5\u5b50\u90fd\u5bf9\u5e94\u7684\u662f\u4e00\u4e2a\u77e9\u9635 \\(X=(x_1,x_2,\u2026,x_t)\\) \uff0c\u5176\u4e2dxi\u90fd\u4ee3\u8868\u7740\u7b2ci\u4e2a\u8bcd\u7684\u8bcd\u5411\u91cf\uff08\u884c\u5411\u91cf\uff09\uff0c\u7ef4\u5ea6\u4e3ad\u7ef4\uff0c\u6545 \\(X\u2208R_n\u00d7d\\) \u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u7f16\u7801\u8fd9\u4e9b\u5e8f\u5217\u4e86\u3002","title":"\u5e8f\u5217\u7f16\u7801"},{"location":"Attention/#rnn","text":"\\[ y_t=f(y_{t\u22121},x_t) \\] \u4e0d\u7ba1\u662f\u5df2\u7ecf\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684LSTM\u3001GRU\u8fd8\u662f\u6700\u8fd1\u7684SRU\uff0c\u90fd\u5e76\u672a\u8131\u79bb\u8fd9\u4e2a\u9012\u5f52\u6846\u67b6\u3002RNN\u7ed3\u6784\u672c\u8eab\u6bd4\u8f83\u7b80\u5355\uff0c\u4e5f\u5f88\u9002\u5408\u5e8f\u5217\u5efa\u6a21\uff0c\u4f46RNN\u7684\u660e\u663e\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u65e0\u6cd5\u5e76\u884c\uff0c\u56e0\u6b64\u901f\u5ea6\u8f83\u6162\uff0c\u8fd9\u662f\u9012\u5f52\u7684\u5929\u7136\u7f3a\u9677\u3002\u53e6\u5916\u82cf\u5251\u6797\u535a\u58eb\u8ba4\u4e3aRNN\u65e0\u6cd5\u5f88\u597d\u5730\u5b66\u4e60\u5230\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u56e0\u4e3a\u5b83\u672c\u8d28\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\u3002 \u4e0d\u7ba1\u662f\u5df2\u7ecf\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684LSTM\u3001GRU\u8fd8\u662f\u6700\u8fd1\u7684SRU\uff0c\u90fd\u5e76\u672a\u8131\u79bb\u8fd9\u4e2a\u9012\u5f52\u6846\u67b6\u3002RNN\u7ed3\u6784\u672c\u8eab\u6bd4\u8f83\u7b80\u5355\uff0c\u4e5f\u5f88\u9002\u5408\u5e8f\u5217\u5efa\u6a21\uff0c\u4f46RNN\u7684\u660e\u663e\u7f3a\u70b9\u4e4b\u4e00\u5c31\u662f\u65e0\u6cd5\u5e76\u884c\uff0c\u56e0\u6b64\u901f\u5ea6\u8f83\u6162\uff0c\u8fd9\u662f\u9012\u5f52\u7684\u5929\u7136\u7f3a\u9677\u3002\u53e6\u5916\u82cf\u5251\u6797\u535a\u58eb\u8ba4\u4e3aRNN\u65e0\u6cd5\u5f88\u597d\u5730\u5b66\u4e60\u5230\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u56e0\u4e3a\u5b83\u672c\u8d28\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\u3002","title":"RNN"},{"location":"Attention/#cnn","text":"\\[ \\boldsymbol{y}_{t}=f\\left(\\boldsymbol{x}_{t-1}, \\boldsymbol{x}_{t}, \\boldsymbol{x}_{t+1}\\right) \\] \u5728FaceBook\u7684\u8bba\u6587\u4e2d\uff0c\u7eaf\u7cb9\u4f7f\u7528\u5377\u79ef\u4e5f\u5b8c\u6210\u4e86Seq2Seq\u7684\u5b66\u4e60\uff0c\u662f\u5377\u79ef\u7684\u4e00\u4e2a\u7cbe\u81f4\u4e14\u6781\u81f4\u7684\u4f7f\u7528\u6848\u4f8b\uff0c\u70ed\u8877\u5377\u79ef\u7684\u8bfb\u8005\u5fc5\u987b\u5f97\u597d\u597d\u8bfb\u8bfb\u8fd9\u7bc7\u6587\u8bba\u3002CNN\u65b9\u4fbf\u5e76\u884c\uff0c\u800c\u4e14\u5bb9\u6613\u6355\u6349\u5230\u4e00\u4e9b\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\u3002","title":"CNN"},{"location":"Attention/#attention_2","text":"Google\u7684\u5927\u4f5c\u63d0\u4f9b\u4e86\u7b2c\u4e09\u4e2a\u601d\u8def\uff1a\u7eafAttention\uff0c\u5355\u9760\u6ce8\u610f\u529b\u5c31\u53ef\u4ee5RNN\u8981\u9010\u6b65\u9012\u5f52\u624d\u80fd\u83b7\u5f97\u5168\u5c40\u4fe1\u606f\uff0c\u56e0\u6b64\u4e00\u822c\u8981\u53cc\u5411RNN\u624d\u6bd4\u8f83\u597d\uff1bCNN\u4e8b\u5b9e\u4e0a\u53ea\u80fd\u83b7\u53d6\u5c40\u90e8\u4fe1\u606f\uff0c\u662f\u901a\u8fc7\u5c42\u53e0\u6765\u589e\u5927\u611f\u53d7\u91ce\uff1bAttention\u7684\u601d\u8def\u6700\u4e3a\u7c97\u66b4\uff0c\u5b83\u4e00\u6b65\u5230\u4f4d\u83b7\u53d6\u4e86\u5168\u5c40\u4fe1\u606f\uff01\u5b83\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a \\[ \\boldsymbol{y}_{t}=f\\left(\\boldsymbol{x}_{t}, \\boldsymbol{A}, \\boldsymbol{B}\\right) \\] \u5176\u4e2dA,BA,B\u662f\u53e6\u5916\u4e00\u4e2a\u5e8f\u5217\uff08\u77e9\u9635\uff09\u3002\u5982\u679c\u90fd\u53d6 \\(A=B=X\\) \uff0c\u90a3\u4e48\u5c31\u79f0\u4e3aSelf Attention\uff0c\u5b83\u7684\u610f\u601d\u662f\u76f4\u63a5\u5c06xt\u4e0e\u539f\u6765\u7684\u6bcf\u4e2a\u8bcd\u8fdb\u884c\u6bd4\u8f83\uff0c\u6700\u540e\u7b97\u51fayt\uff01","title":"Attention"},{"location":"Attention/#_10","text":"Encoder : \u516d\u4e2a\u76f8\u540c\u5c42\u7684\u5806\u53e0\uff0c\u6bcf\u4e00\u5c42\u90fd\u6709\u4e24\u4e2a\u5b50\u5c42\u6784\u6210\u3002\u7b2c\u4e00\u4e2a\u5b50\u5c42\u662f multi-head self-attention mechanism\uff0c\u7136\u540e\u662fposition- wise fully connected feed-forward network\u3002\u5e76\u4e14\u5728\u4e24\u4e2a\u5b50\u5c42\u4e4b\u95f4\u4f7f\u7528\u4e86\u6b8b\u5dee\u8fde\u63a5\u5e76\u540e\u63a5Layer Normalization\uff0c\u6240\u4ee5\u6bcf\u4e2a\u5b50\u5c42\u7684\u8f93\u51fa\u4e3a \\(LayerNorm(x+Sublayer(x))\\) \u3002\u7f51\u7edc\u8f93\u5165\u662f\u4e09\u4e2a\u76f8\u540c\u7684\u5411\u91cfq, k\u548cv\uff0c\u662fword embedding\u548cposition embedding\u76f8\u52a0\u5f97\u5230\u7684\u7ed3\u679c\u3002\u4e3a\u4e86\u65b9\u4fbf\u8fdb\u884c\u6b8b\u5dee\u8fde\u63a5\uff0c\u6211\u4eec\u9700\u8981\u5b50\u5c42\u7684\u8f93\u51fa\u548c\u8f93\u5165\u90fd\u662f\u76f8\u540c\u7684\u7ef4\u5ea6\uff0c\u6240\u6709\u5b50\u5c42\u4ee5\u53ca\u5d4c\u5165\u5c42\u7684\u8f93\u51fa\u90fd\u4e3a \\(dmodel=512\\) \u3002 Decoder : \u540c\u6837\u662f\u516d\u4e2a\u76f8\u540c\u5c42\u7684\u5806\u53e0\uff0cdecoder\u4e2d\u7684Layer\u7531encoder\u7684Layer\u4e2d\u63d2\u5165\u4e00\u4e2aMulti-Head Attention + Add&Norm\u7ec4\u6210\uff0c\u8be5\u5b50\u5c42\u5bf9Encoder Stack\u7684\u8f93\u51fa\u6267\u884c\u591a\u5934\u6ce8\u610f\u3002\u540c\u6837\u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5\u548cLayer Normalization\uff0c\u5e76\u4e14\u8fd8\u4fee\u6539\u4e86Decoder Stack\u4e2d\u7684self-attention\u5b50\u5c42\uff0c\u4ee5\u9632\u6b62\u4f4d\u7f6e\u6ce8\u610f\u5230\u540e\u7eed\u4f4d\u7f6e\u3002 We also modify the self-attention sub-layer in the decoder stack to prevent positions from attending to subsequent positions \u5bf9\u4e8edecoder\u4e2d\u7684\u7b2c\u4e00\u4e2a\u591a\u5934\u6ce8\u610f\u529b\u5b50\u5c42\uff0c\u9700\u8981\u6dfb\u52a0masking\uff0c\u786e\u4fdd\u9884\u6d4b\u4f4d\u7f6ei\u7684\u65f6\u5019\u4ec5\u4ec5\u4f9d\u8d56\u4e8e\u4f4d\u7f6e\u5c0f\u4e8ei\u7684\u8f93\u51fa\u3002 \u7b80\u5355\u6982\u62ec Self Attention\u4e5f\u662f\u5728Scaled Dot-Product Attention\u5355\u5143\u91cc\u9762\u5b9e\u73b0\u7684\uff0c\u5982\u4e0a\u56fe\u5de6\u56fe\u6240\u793a\uff0c\u9996\u5148\u628a\u8f93\u5165Input\u7ecf\u8fc7\u7ebf\u6027\u53d8\u6362\u5206\u522b\u5f97\u5230Q\u3001K\u3001V\uff0c\u6ce8\u610f\uff0cQ\u3001K\u3001V\u90fd\u6765\u81ea\u4e8eInput\uff0c\u53ea\u4e0d\u8fc7\u662f\u7ebf\u6027\u53d8\u6362\u7684\u77e9\u9635\u7684\u6743\u503c\u4e0d\u540c\u800c\u5df2\u3002\u7136\u540e\u628aQ\u548cK\u505adot Product\u76f8\u4e58\uff0c\u5f97\u5230\u8f93\u5165Input\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u7136\u540e\u7ecf\u8fc7\u5c3a\u5ea6\u53d8\u6362\uff08scale\uff09\u3001\u63a9\u7801\uff08mask\uff09\u548csoftmax\u64cd\u4f5c\uff0c\u5f97\u5230\u6700\u7ec8\u7684Self Attention\u77e9\u9635\u3002\u5c3a\u5ea6\u53d8\u6362\u662f\u4e3a\u4e86\u9632\u6b62\u8f93\u5165\u503c\u8fc7\u5927\u5bfc\u81f4\u8bad\u7ec3\u4e0d\u7a33\u5b9a\uff0cmask\u5219\u662f\u4e3a\u4e86\u4fdd\u8bc1\u65f6\u95f4\u7684\u5148\u540e\u5173\u7cfb\u3002 \u6700\u540e\uff0c\u628aencoder\u7aefself Attention\u8ba1\u7b97\u7684\u7ed3\u679c\u52a0\u5165\u5230decoder\u505a\u4e3ak\u548cV\uff0c\u7ed3\u5408decoder\u81ea\u8eab\u7684\u8f93\u51fa\u505a\u4e3aq\uff0c\u5f97\u5230encoder\u7aef\u7684attention\u4e0edecoder\u7aefattention\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002","title":"\u6574\u4f53\u67b6\u6784"},{"location":"Attention/#_11","text":"","title":"\u5173\u952e\u6280\u672f"},{"location":"Attention/#scaled-dot-product-attention","text":"Google\u7684\u4e00\u822c\u5316Attention\u601d\u8def\u4e5f\u662f\u4e00\u4e2a\u7f16\u7801\u5e8f\u5217\u7684\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u8ddfRNN\u3001CNN\u4e00\u6837\uff0c\u90fd\u662f\u4e00\u4e2a\u5e8f\u5217\u7f16\u7801\u7684\u5c42\u3002 \u524d\u9762\u7ed9\u51fa\u7684\u662f\u4e00\u822c\u5316\u7684\u6846\u67b6\u5f62\u5f0f\u7684\u63cf\u8ff0\uff0c\u4e8b\u5b9e\u4e0aGoogle\u7ed9\u51fa\u7684\u65b9\u6848\u662f\u5f88\u5177\u4f53\u7684\u3002\u9996\u5148\uff0c\u5b83\u5148\u628aAttention\u7684\u5b9a\u4e49\u7ed9\u4e86\u51fa\u6765\uff1a $$ (\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\operatorname{softmax}\\left(\\frac{\\boldsymbol{Q} \\boldsymbol{K}^{\\top}}{\\sqrt{d_{k}}}\\right) \\boldsymbol{V} $$ \u5176\u4e2d\uff0c \\(\\boldsymbol{Q} \\in \\mathbb{R}^{n \\times d_{k}}, \\boldsymbol{K} \\in \\mathbb{R}^{m \\times d_{k}}, \\boldsymbol{V} \\in \\mathbb{R}^{m \\times d}\\) \u3002\u5982\u679c\u5ffd\u7565\u6fc0\u6d3b\u51fd\u6570softmax\u7684\u8bdd\uff0c\u90a3\u4e48\u662f\u4e8b\u5b9e\u4e0a\u5c31\u662f\u4e09\u4e2a \\(n \\times d_{k}, d_{k} \\times m, m \\times d_{v}\\) \u77e9\u9635\u76f8\u4e58\uff0c\u6700\u540e\u7684\u7ed3\u679c\u662f\u4e00\u4e2a \\(n \\times d_{v}\\) \u7684\u77e9\u9635\u3002\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5c06 \\(n \\times d_{k}\\) \u7684\u5e8f\u5217 \\(Q\\) \u7f16\u7801\u6210\u4e86\u4e00\u4e2a\u65b0\u7684 \\(n \\times d_{v}\\) \u7684\u5e8f\u5217\u7684Attention\u5c42\u3002 \\[ Attention\\left(\\boldsymbol{q}_{t}, \\boldsymbol{K}, \\boldsymbol{V}\\right)=\\sum_{s=1}^{m} \\frac{1}{Z} \\exp \\left(\\frac{\\left\\langle\\boldsymbol{q}_{t}, \\boldsymbol{k}_{s}\\right\\rangle}{\\sqrt{d_{k}}}\\right) \\boldsymbol{v}_{s} \\] \u5176\u4e2dZ\u662f\u5f52\u4e00\u5316\u56e0\u5b50\u3002\u4e8b\u5b9e\u4e0aq,k,v\u5206\u522b\u662fquery,key,value\u7684\u7b80\u5199\uff0cK,V\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4ed6\u4eec\u5c31\u50cf\u662fkey-value\u7684\u5173\u7cfb\uff0c\u90a3\u4e48\u4e0a\u5f0f\u7684\u610f\u601d\u5c31\u662f\u901a\u8fc7 \\(q_t\\) \u8fd9\u4e2aquery\uff0c\u4ee5\u548c\u5404\u4e2a \\(k_s\\) \u505a\u5185\u79ef\u540esoftmax\u7684\u65b9\u5f0f\uff0c\u6765\u5f97\u5230 \\(q_t\\) \u548c\u5404\u4e2a \\(v_s\\) \u7684\u76f8\u4f3c\u5ea6\uff0c\u7136\u540e\u52a0\u6743\u6c42\u548c\uff0c\u5f97\u5230\u4e00\u4e2a \\(d_v\\) \u7ef4\u7684\u5411\u91cf\u3002 \\(\\sqrt{d_k}\\) \u8d77\u5230\u8c03\u8282\u4f5c\u7528\uff0c\u4f7f\u5f97\u5185\u79ef\u4e0d\u81f3\u4e8e\u592a\u5927\u3002\uff08\u592a\u5927\u7684\u8bddsoftmax\u540e\u5c31\u975e0\u53731\u4e86\uff0c\u4e0d\u591f\u201csoft\u201d\u4e86\uff0c\u68af\u5ea6\u8fc7\u5c0f\uff0c\u4e0d\u5229\u4e8e\u53cd\u5411\u4f20\u64ad\uff09\u3002 \u4e8b\u5b9e\u4e0a\u8fd9\u79cdAttention\u7684\u5b9a\u4e49\u5e76\u4e0d\u65b0\u9c9c\uff0c\u4f46\u7531\u4e8eGoogle\u7684\u5f71\u54cd\u529b\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u73b0\u5728\u662f\u66f4\u52a0\u6b63\u5f0f\u5730\u63d0\u51fa\u4e86\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u5e76\u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u5c42\u5730\u770b\u5f85\uff1b\u6b64\u5916\u8fd9\u4e2a\u5b9a\u4e49\u53ea\u662f\u6ce8\u610f\u529b\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u9009\u62e9\uff0c\u6bd4\u5982query\u8ddfkey\u7684\u8fd0\u7b97\u65b9\u5f0f\u4e0d\u4e00\u5b9a\u662f\u70b9\u4e58\uff08\u8fd8\u53ef\u4ee5\u662f\u62fc\u63a5\u540e\u518d\u5185\u79ef\u4e00\u4e2a\u53c2\u6570\u5411\u91cf\uff09\uff0c\u751a\u81f3\u6743\u91cd\u90fd\u4e0d\u4e00\u5b9a\u8981\u5f52\u4e00\u5316\uff0c\u7b49\u7b49\u3002","title":"SCALED DOT-PRODUCT ATTENTION"},{"location":"Attention/#multi-head-attention","text":"\u8fd9\u4e2a\u662fGoogle\u63d0\u51fa\u7684\u65b0\u6982\u5ff5\uff0c\u662fAttention\u673a\u5236\u7684\u5b8c\u5584\u3002\u4e0d\u8fc7\u4ece\u5f62\u5f0f\u4e0a\u770b\uff0c\u5b83\u5176\u5b9e\u5c31\u518d\u7b80\u5355\u4e0d\u8fc7\u4e86\uff0c\u5c31\u662f\u628a \\(Q,K,V\\) \u901a\u8fc7\u53c2\u6570\u77e9\u9635\u6620\u5c04\u4e00\u4e0b\uff0c\u7136\u540e\u518d\u505aAttention\uff0c\u628a\u8fd9\u4e2a\u8fc7\u7a0b\u91cd\u590d\u505a \\(h\\) \u6b21\uff0c\u7ed3\u679c\u62fc\u63a5\u8d77\u6765\u5c31\u884c\u4e86\uff0c\u53ef\u8c13\u201c\u5927\u9053\u81f3\u7b80\u201d\u4e86\u3002 \\[ head_{i}=\\text { Attention }\\left(\\boldsymbol{Q} \\boldsymbol{W}_{i}^{Q}, \\boldsymbol{K} \\boldsymbol{W}_{i}^{K}, \\boldsymbol{V} \\boldsymbol{W}_{i}^{V}\\right) \\] \u8fd9\u91cc \\(\\boldsymbol{W}_{i}^{Q} \\in \\mathbb{R}^{d_{k} \\times \\overline{d}}, \\boldsymbol{W}_{i}^{K} \\in \\mathbb{R}^{d_{k} \\times \\overline{d}} k, \\boldsymbol{W}_{i}^{V} \\in \\mathbb{R}^{d_{v} \\times \\overline{d} v}\\) , \u7136\u540e \\[ \\begin{array}{c}{\\text {MultiHead}(\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\text { Concat (head, }, \\ldots, \\text { head }_{h} )} \\\\ {\\text {where head}_{i}=\\text {Attention}\\left(Q W_{i}^{Q}, K W_{i}^{K}, V W_{i}^{V}\\right)}\\end{array} \\] \u6700\u540e\u5f97\u5230\u4e00\u4e2a \\(n \\times\\left(h \\tilde{d}_{v}\\right)\\) \u7684\u5e8f\u5217\uff0c \u6240\u8c13\u201c\u591a\u5934\u201d\uff08Multi-Head\uff09\uff0c\u5c31\u662f\u53ea\u591a\u505a\u51e0\u6b21\u540c\u6837\u7684\u4e8b\u60c5\uff08\u53c2\u6570\u4e0d\u5171\u4eab\uff09\uff0c\u7136\u540e\u628a\u7ed3\u679c\u62fc\u63a5 \u3002\u53ef\u4ee5\u5141\u8bb8\u6a21\u578b\u5728\u4e0d\u540c\u7684\u8868\u793a\u5b50\u7a7a\u95f4\u91cc\u5b66\u4e60\u5230\u76f8\u5173\u7684\u4fe1\u606f \u7b80\u800c\u8a00\u4e4b\uff0c\u5c06 \\(Q,K,V\\) \u505ah\u6b21\u4e0d\u540c\u7684\u6295\u5f71\uff0c\u91cd\u590d\u505ah\u6b21Attention\u5c42\u8fd0\u7b97\uff0c\u6bcf\u4e2aAttention\u5c42\u7684\u53c2\u6570\u4e4b\u95f4\u4e0d\u5171\u4eab\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u901a\u8fc7\u4e00\u4e2a\u7ebf\u6027\u6620\u5c04\u8f93\u51fa\u3002 \u8fd9\u91cc\u7684\u601d\u60f3\u5f88\u50cfCNN\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u64cd\u4f5c\uff0c\u4e0a\u6587\u8bf4\u5230\u7684 A Structured Self-attentive Sentence Embedding \u4e5f\u4f7f\u7528\u4e86\u7c7b\u4f3c\u7684\u601d\u60f3\u3002","title":"MULTI-HEAD ATTENTION"},{"location":"Attention/#_12","text":"\u6211\u4eec\u8bb0 word embedding \u7684 dimension \u4e3a \\(d_{model}\\) \uff0c\u6240\u4ee5 Q \u7684 shape \u5c31\u662f \\(n*d_{model}\\) \uff0c K\u3001V \u4e5f\u662f\u4e00\u6837\uff0c\u7b2c i \u4e2a word \u7684 embedding \u4e3a \\(v_i\\) \uff0c\u6240\u4ee5\u8be5 word \u7684 attention \u5e94\u4e3a\uff1a \u90a3\u540c\u65f6\u505a\u5168\u90e8 word \u7684 attention\uff0c\u5219\u662f\u4e00\u4e0b\u5b50\u628a\u5e8f\u5217\u7684\u5168\u90e8\u5185\u5bb9\u8f93\u8fdb\u53bb\uff1a","title":"\u5177\u4f53\u5316"},{"location":"Attention/#mask","text":"decoder \u4e2d\u7684 self-attention \u4e5f\u4e00\u6837\u7684\u9053\u7406\uff0c\u53ea\u662f\u8981\u6ce8\u610f\u4e00\u70b9\uff0cdecoder \u4e2d\u4f60\u5728\u7528 vi \u5bf9 vj \u505a attention \u65f6\uff0c\u6709\u4e00\u4e9b pair \u662f\u4e0d\u5408\u6cd5\u7684\u3002\u539f\u56e0\u5728\u4e8e\uff0c\u867d\u7136 encoder \u9636\u6bb5\u4f60\u53ef\u4ee5\u628a\u5e8f\u5217\u7684\u5168\u90e8 word \u4e00\u6b21\u5168\u8f93\u5165\u8fdb\u53bb\uff0c\u4f46\u662f decoder \u9636\u6bb5\u5374\u5e76\u4e0d\u603b\u662f\u53ef\u4ee5\uff0c\u60f3\u8c61\u4e00\u4e0b\u4f60\u5728\u505a inference\uff0cdecoder \u7684\u4ea7\u51fa\u8fd8\u662f\u6309\u4ece\u5de6\u81f3\u53f3\u7684\u987a\u5e8f\uff0c\u6240\u4ee5\u4f60\u7684 vi \u662f\u6ca1\u673a\u4f1a\u548c vj ( j>i ) \u505a attention \u7684\u3002\u90a3\u600e\u4e48\u5c06\u8fd9\u4e00\u70b9\u4f53\u73b0\u5728 attention \u7684\u8ba1\u7b97\u4e2d\u5462\uff1f\u6587\u4e2d\u8bf4\u53ea\u9700\u8981\u4ee4 \\(\\operatorname{score}\\left(v_{i}, v_{j}\\right)=-\\infty\\) \u5373\u53ef\u3002\u4e3a\u4f55\uff1f\u56e0\u4e3a\u8fd9\u6837\u7684\u8bdd\uff1a $$ \\alpha_{i j}=\\operatorname{softmax}\\left(\\operatorname{score}\\left(v_{i}, v_{j}\\right)\\right)=\\operatorname{softmax}(-\\infty)=0 $$ \u6240\u4ee5\u5728\u8ba1\u7b97 vi \u7684 self-attention \u7684\u65f6\u5019\uff0c\u5c31\u80fd\u591f\u628a vj \u5c4f\u853d\u6389\u3002\u6240\u4ee5\u8fd9\u4e2a\u95ee\u9898\u4e5f\u5c31\u89e3\u51b3\u4e86\u3002","title":"Mask"},{"location":"Attention/#_13","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u5bf9Attention\u5c42\u7684\u63cf\u8ff0\u90fd\u662f\u4e00\u822c\u5316\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u843d\u5b9e\u4e00\u4e9b\u5e94\u7528\u3002\u6bd4\u5982\uff0c\u5982\u679c\u505a\u9605\u8bfb\u7406\u89e3\u7684\u8bdd\uff0c \\(Q\\) \u53ef\u4ee5\u662f\u7bc7\u7ae0\u7684\u5411\u91cf\u5e8f\u5217\uff0c\u53d6 \\(K=V\\) \u4e3a\u95ee\u9898\u7684\u5411\u91cf\u5e8f\u5217\uff0c\u90a3\u4e48\u8f93\u51fa\u5c31\u662f\u6240\u8c13\u7684Aligned Question Embedding\u3002 \u800c\u5728Google\u7684\u8bba\u6587\u4e2d\uff0c\u5927\u90e8\u5206\u7684Attention\u90fd\u662fSelf Attention\uff0c\u5373\u201c\u81ea\u6ce8\u610f\u529b\u201d\uff0c\u6216\u8005\u53eb\u5185\u90e8\u6ce8\u610f\u529b\u3002 \u6240\u8c13Self Attention\uff0c\u5176\u5b9e\u5c31\u662f \\(Attention(X,X,X)\\) \uff0c \\(X\\) \u5c31\u662f\u524d\u9762\u8bf4\u7684\u8f93\u5165\u5e8f\u5217\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u5e8f\u5217\u5185\u90e8\u505aAttention\uff0c\u5bfb\u627e\u5e8f\u5217\u5185\u90e8\u7684\u8054\u7cfb\u3002Google\u8bba\u6587\u7684\u4e3b\u8981\u8d21\u732e\u4e4b\u4e00\u662f\u5b83\u8868\u660e\u4e86\u5185\u90e8\u6ce8\u610f\u529b\u5728\u673a\u5668\u7ffb\u8bd1\uff08\u751a\u81f3\u662f\u4e00\u822c\u7684Seq2Seq\u4efb\u52a1\uff09\u7684\u5e8f\u5217\u7f16\u7801\u4e0a\u662f\u76f8\u5f53\u91cd\u8981\u7684\uff0c\u800c\u4e4b\u524d\u5173\u4e8eSeq2Seq\u7684\u7814\u7a76\u57fa\u672c\u90fd\u53ea\u662f\u628a\u6ce8\u610f\u529b\u673a\u5236\u7528\u5728\u89e3\u7801\u7aef\u3002\u7c7b\u4f3c\u7684\u4e8b\u60c5\u662f\uff0c\u76ee\u524dSQUAD\u9605\u8bfb\u7406\u89e3\u7684\u699c\u9996\u6a21\u578bR-Net\u4e5f\u52a0\u5165\u4e86\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff0c\u8fd9\u4e5f\u4f7f\u5f97\u5b83\u7684\u6a21\u578b\u6709\u6240\u63d0\u5347\u3002 \u5f53\u7136\uff0c\u66f4\u51c6\u786e\u6765\u8bf4\uff0cGoogle\u6240\u7528\u7684\u662fSelf Multi-Head Attention\uff1a $$ Y=M u l t i H e a d(X, X, X) $$","title":"\u7406\u89e3"},{"location":"Attention/#attention_3","text":"Self-attention\u5373K=V=Q\uff0c\u4f8b\u5982\u8f93\u5165\u4e00\u4e2a\u53e5\u5b50\uff0c\u90a3\u4e48\u91cc\u9762\u7684\u6bcf\u4e2a\u8bcd\u90fd\u8981\u548c\u8be5\u53e5\u5b50\u4e2d\u7684\u6240\u6709\u8bcd\u8fdb\u884cattention\u8ba1\u7b97\u3002\u76ee\u7684\u662f\u5b66\u4e60\u53e5\u5b50\u5185\u90e8\u7684\u8bcd\u4f9d\u8d56\u5173\u7cfb\uff0c\u6355\u83b7\u53e5\u5b50\u7684\u5185\u90e8\u7ed3\u6784\u3002 Transformer \u4f1a\u5728\u4e09\u4e2a\u4e0d\u540c\u7684\u65b9\u9762\u4f7f\u7528 self multi-head attention \uff1a \u5728 encoder-decoder attention \u5c42\u4e2d\uff0ckey\u548cvalue\u662fencoder\u7684\u8f93\u51fa\uff0cquery\u662f\u524d\u4e00\u5c42Decoder\u7684\u8f93\u51fa\u3002\u8fd9\u4f7f\u5f97Decoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u53c2\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u6240\u6709\u4f4d\u7f6e\u3002\u8fd9\u91cc\u6a21\u4eff\u4e86\u5178\u578b\u7684seq2seq\u4e2d\u6ce8\u610f\u529b\u673a\u5236\u7684\u4f7f\u7528\u3002 \u5728 encoder self-attention \u5c42\u4e2d\uff0c\u67d0\u4e00\u5c42\u4e2d\u6240\u6709\u7684keys\u3001values\u548cqueries\u90fd\u6765\u81ea\u540c\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u662fEncoder\u4e2d\u4e0a\u4e00\u5c42\u7684\u8f93\u51fa\u3002Encoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u5904\u7406Encoder\u4e0a\u4e00\u5c42\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\u3002 \u5728 decoder self-attention \u5c42\u4e2d\u7c7b\u4f3c\u5730\uff0cdecoder\u4e2d\u7684self-attention\u5c42\u5141\u8bb8decoder\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u5173\u6ce8decoder\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\uff0c\u76f4\u5230\u8be5\u4f4d\u7f6e\u5e76\u5305\u62ec\u8be5\u4f4d\u7f6e\u3002\u4e3a\u4e86\u4fdd\u6301decoder\u7684\u81ea\u56de\u5f52\u7279\u6027\uff0c\u9700\u8981\u9632\u6b62decoder\u4e2d\u7684\u5de6\u5411\u4fe1\u606f\u6d41\u3002\u6211\u4eec\u901a\u8fc7\u5c4f\u853d(\u8bbe\u7f6e\u4e3a\u8d1f\u65e0\u7a77)softmax\u8f93\u5165\u4e2d\u5bf9\u5e94\u4e8e\u975e\u6cd5\u8fde\u63a5\u7684\u6240\u6709\u503c\uff0c\u5b9e\u73b0\u4e86\u5728\u7f29\u653e\u7684\u70b9\u79ef\u6ce8\u610f\u8303\u56f4\u5185\u7684\u8fd9\u79cd\u65b9\u6cd5\u3002","title":"Attention\u5728\u6a21\u578b\u4e2d\u7684\u5e94\u7528"},{"location":"Attention/#position-wise-feed-foward-networks","text":"\\[ \\mathrm{FFN}(x)=\\max \\left(0, x W_{1}+b_{1}\\right) W_{2}+b_{2} \\] \u9664\u4e86 attention sub-layers\uff0cencoder\u548cdecoder\u4e2d\u7684\u6bcf\u4e00\u5c42\u90fd\u5305\u542b\u4e00\u4e2a\u5b8c\u5168\u8fde\u63a5\u7684\u524d\u9988\u7f51\u7edc\uff0c\u5b83\u5206\u522b\u5e94\u7528\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\uff0c\u5e76\u4e14\u662f\u76f8\u540c\u7684\u3002\u5b83\u7531\u4e24\u4e2a\u7ebf\u6027\u53d8\u6362\u7ec4\u6210\uff0c\u4e2d\u95f4\u6709\u4e00\u4e2aReLU\u6fc0\u6d3b\u3002 \u867d\u7136\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u7684\u7ebf\u6027\u53d8\u6362\u662f\u76f8\u540c\u7684\uff0c\u4f46\u662f\u5b83\u4eec\u5728\u4e0d\u540c\u7684\u5c42\u4e4b\u95f4\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u3002\u53e6\u4e00\u79cd\u63cf\u8ff0\u65b9\u6cd5\u662f\u7528\u5185\u6838\u5927\u5c0f\u4e3a1\u7684\u4e24\u4e2a\u5377\u79ef\u3002\u5176\u5b9e\u5c31\u662f\u4e00\u4e2aMLP \u7f51\u7edc\uff0chidden_size\u53d8\u5316\u4e3a\uff1a \\(512 \\to 2048 \\to 512\\) \u3002 \u6bcf\u4e2a \\(d_{model}\\) \u7ef4\u5411\u91cf x \u5728\u6b64\u5148\u7531 \\(xW_1+b_1\\) \u53d8\u4e3a \\(d_f\\) \u7ef4\u7684 \\(x\u2032\\) \uff0c\u518d\u7ecf\u8fc7 \\(max(0,x\u2032)W_2+b_2\\) \u53d8\u56de \\(d_{model}\\) \u7ef4\u3002\u4e4b\u540e\u518d\u662f\u4e00\u4e2a\u6b8b\u5dee\u8fde\u63a5\u3002\u8f93\u51fa size \u4ecd\u662f \\([sequence_{length},d_{model}]\\)","title":"POSITION-WISE FEED-FOWARD NETWORKS"},{"location":"Attention/#positional-encoding","text":"\u7531\u4e8e\u6211\u4eec\u7684\u6a21\u578b\u4e0d\u5305\u542b\u9012\u5f52\u548c\u5377\u79ef\uff0c\u4e3a\u4e86\u4f7f\u6a21\u578b\u5229\u7528\u5e8f\u5217\u7684\u987a\u5e8f\uff0c\u6211\u4eec\u5fc5\u987b\u6ce8\u5165\u4e00\u4e9b\u5173\u4e8e\u5e8f\u5217\u4e2dtoken\u7684\u76f8\u5bf9\u6216\u7edd\u5bf9\u4f4d\u7f6e\u7684\u4fe1\u606f\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u201c\u4f4d\u7f6e\u7f16\u7801\u201d\u6dfb\u52a0\u5230encoder\u548cdecoder stacks\u5e95\u90e8\u7684\u8f93\u5165embeddings\u4e2d\u3002\u4f4d\u7f6e\u7f16\u7801\u7684\u7ef4\u6570 \\(d_{model}\\) \u4e0e\u5d4c\u5165\u7684\u7ef4\u6570\u76f8\u540c\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e8c\u8005\u76f8\u52a0\u3002\u6709\u8bb8\u591a\u4f4d\u7f6e\u7f16\u7801\u7684\u9009\u62e9\uff0c\u5b66\u4e60\u7684\u548c\u56fa\u5b9a\u7684\u90fd\u53ef\u4ee5\u3002 $$ \\begin{equation} \\begin{cases} PE(pos, 2i)=\\sin \\left(pos / 10000^{2 i / d_{model}}\\right) \\ PE(\\text {pos}, 2 i+1)=\\cos \\left(pos / 10000^{2 i / d_{model}}\\right) \\end{cases} \\end{equation} $$ \u5176\u4e2dpos\u4e3a\u4f4d\u7f6e\uff0cii\u4e3a\u7ef4\u5ea6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f4d\u7f6e\u7f16\u7801\u7684\u6bcf\u4e2a\u7ef4\u5ea6\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u6b63\u5f26\u66f2\u7ebf\u3002\u6ce2\u957f\u7ec4\u6210\u51e0\u4f55\u7ea7\u6570\u4ece2\u03c0\u523010000\u00b72\u03c0\u3002\u9009\u62e9\u8fd9\u4e2a\u51fd\u6570\u662f\u56e0\u4e3a\u6211\u4eec\u5047\u8bbe\u5b83\u53ef\u4ee5\u8ba9\u6a21\u578b\u5f88\u5bb9\u6613\u5730\u5b66\u4e60\u5230\u76f8\u5bf9\u4f4d\u7f6e\u7684\u53c2\u4e0e\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u4f55\u56fa\u5b9a\u504f\u79fb\u91cf \\(k, PE_{pos+k}\\) \u90fd\u53ef\u4ee5\u8868\u793a\u4e3a\u7684\u7ebf\u6027\u51fd\u6570 \\(PE_{pos}\\) \u3002\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86learning position embeddings\u8fdb\u884c\u4e86\u5b9e\u9a8c\uff0c\u53d1\u73b0\u8fd9\u4e24\u4e2a\u7248\u672c\u7684\u7ed3\u679c\u51e0\u4e4e\u76f8\u540c\u3002\u6211\u4eec\u9009\u62e9\u6b63\u5f26\u7248\u672c\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u5141\u8bb8\u6a21\u578b\u63a8\u65ad\u51fa\u6bd4\u8bad\u7ec3\u4e2d\u9047\u5230\u7684\u5e8f\u5217\u957f\u5ea6\u66f4\u957f\u7684\u5e8f\u5217\u957f\u5ea6\u3002 \u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u56e0\u4e3a\u6b63\u5f26\u548c\u4f59\u5f26\u51fd\u6570\u5177\u6709\u5468\u671f\u6027\uff0c\u5bf9\u4e8e\u56fa\u5b9a\u957f\u5ea6\u504f\u5deek\uff08\u7c7b\u4f3c\u4e8e\u5468\u671f\uff09\uff0cpost +k\u4f4d\u7f6e\u7684PE\u53ef\u4ee5\u8868\u793a\u6210\u5173\u4e8epos\u4f4d\u7f6ePE\u7684\u4e00\u4e2a\u7ebf\u6027\u53d8\u5316\uff08\u5b58\u5728\u7ebf\u6027\u5173\u7cfb\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u65b9\u4fbf\u6a21\u578b\u5b66\u4e60\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e2a\u76f8\u5bf9\u4f4d\u7f6e\u5173\u7cfb \u53ea\u8981\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\u5c31\u4f1a\u53d1\u73b0\uff0c\u8fd9\u6837\u7684\u6a21\u578b \u5e76\u4e0d\u80fd\u6355\u6349\u5e8f\u5217\u7684\u987a\u5e8f \uff01\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u5c06 \\(K,V\\) \u6309\u884c\u6253\u4e71\u987a\u5e8f\uff08\u76f8\u5f53\u4e8e\u53e5\u5b50\u4e2d\u7684\u8bcd\u5e8f\u6253\u4e71\uff09\uff0c\u90a3\u4e48Attention\u7684\u7ed3\u679c\u8fd8\u662f\u4e00\u6837\u7684\u3002\u8fd9\u5c31\u8868\u660e\u4e86\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\uff0cAttention\u6a21\u578b\u9876\u591a\u662f\u4e00\u4e2a\u975e\u5e38\u7cbe\u5999\u7684\u201c\u8bcd\u888b\u6a21\u578b\u201d\u800c\u5df2\u3002\u8fd9\u95ee\u9898\u5c31\u6bd4\u8f83\u4e25\u91cd\u4e86\uff0c\u5927\u5bb6\u77e5\u9053\uff0c\u5bf9\u4e8e\u65f6\u95f4\u5e8f\u5217\u6765\u8bf4\uff0c\u5c24\u5176\u662f\u5bf9\u4e8eNLP\u4e2d\u7684\u4efb\u52a1\u6765\u8bf4\uff0c\u987a\u5e8f\u662f\u5f88\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u5b83\u4ee3\u8868\u7740\u5c40\u90e8\u751a\u81f3\u662f\u5168\u5c40\u7684\u7ed3\u6784\uff0c\u5b66\u4e60\u4e0d\u5230\u987a\u5e8f\u4fe1\u606f\uff0c\u90a3\u4e48\u6548\u679c\u5c06\u4f1a\u5927\u6253\u6298\u6263\uff08\u6bd4\u5982\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u6709\u53ef\u80fd\u53ea\u628a\u6bcf\u4e2a\u8bcd\u90fd\u7ffb\u8bd1\u51fa\u6765\u4e86\uff0c\u4f46\u662f\u4e0d\u80fd\u7ec4\u7ec7\u6210\u5408\u7406\u7684\u53e5\u5b50\uff09\u3002 \u4e8e\u662fGoogle\u518d\u796d\u51fa\u4e86\u4e00\u62db\u2014\u2014 Position Embedding \uff0c\u4e5f\u5c31\u662f\u201c\u4f4d\u7f6e\u5411\u91cf\u201d\uff0c\u5c06\u6bcf\u4e2a\u4f4d\u7f6e\u7f16\u53f7\uff0c\u7136\u540e\u6bcf\u4e2a\u7f16\u53f7\u5bf9\u5e94\u4e00\u4e2a\u5411\u91cf\uff0c\u901a\u8fc7\u7ed3\u5408\u4f4d\u7f6e\u5411\u91cf\u548c\u8bcd\u5411\u91cf\uff0c\u5c31\u7ed9\u6bcf\u4e2a\u8bcd\u90fd\u5f15\u5165\u4e86\u4e00\u5b9a\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u8fd9\u6837Attention\u5c31\u53ef\u4ee5\u5206\u8fa8\u51fa\u4e0d\u540c\u4f4d\u7f6e\u7684\u8bcd\u4e86\u3002 Position Embedding\u5e76\u4e0d\u7b97\u65b0\u9c9c\u7684\u73a9\u610f\uff0c\u5728FaceBook\u7684\u300aConvolutional Sequence to Sequence Learning\u300b\u4e5f\u7528\u5230\u4e86\u8fd9\u4e2a\u4e1c\u897f\u3002\u4f46\u5728Google\u7684\u8fd9\u4e2a\u4f5c\u54c1\u4e2d\uff0c\u5b83\u7684Position Embedding\u6709\u51e0\u70b9\u533a\u522b\uff1a \u4ee5\u524d\u5728RNN\u3001CNN\u6a21\u578b\u4e2d\u5176\u5b9e\u90fd\u51fa\u73b0\u8fc7Position Embedding\uff0c\u4f46\u5728\u90a3\u4e9b\u6a21\u578b\u4e2d\uff0cPosition Embedding\u662f\u9526\u4e0a\u6dfb\u82b1\u7684\u8f85\u52a9\u624b\u6bb5\uff0c\u4e5f\u5c31\u662f\u201c\u6709\u5b83\u4f1a\u66f4\u597d\u3001\u6ca1\u5b83\u4e5f\u5c31\u5dee\u4e00\u70b9\u70b9\u201d\u7684\u60c5\u51b5\uff0c\u56e0\u4e3aRNN\u3001CNN\u672c\u8eab\u5c31\u80fd\u6355\u6349\u5230\u4f4d\u7f6e\u4fe1\u606f\u3002\u4f46\u662f\u5728\u8fd9\u4e2a\u7eafAttention\u6a21\u578b\u4e2d\uff0cPosition Embedding\u662f\u4f4d\u7f6e\u4fe1\u606f\u7684\u552f\u4e00\u6765\u6e90\uff0c\u56e0\u6b64\u5b83\u662f\u6a21\u578b\u7684\u6838\u5fc3\u6210\u5206\u4e4b\u4e00\uff0c\u5e76\u975e\u4ec5\u4ec5\u662f\u7b80\u5355\u7684\u8f85\u52a9\u624b\u6bb5\u3002 \u5728\u4ee5\u5f80\u7684Position Embedding\u4e2d\uff0c\u57fa\u672c\u90fd\u662f\u6839\u636e\u4efb\u52a1\u8bad\u7ec3\u51fa\u6765\u7684\u5411\u91cf\u3002\u800cGoogle\u76f4\u63a5\u7ed9\u51fa\u4e86\u4e00\u4e2a\u6784\u9020Position Embedding\u7684\u516c\u5f0f\uff1a \u8fd9\u91cc\u7684\u610f\u601d\u662f\u5c06id\u4e3app\u7684\u4f4d\u7f6e\u6620\u5c04\u4e3a\u4e00\u4e2adposdpos\u7ef4\u7684\u4f4d\u7f6e\u5411\u91cf\uff0c\u8fd9\u4e2a\u5411\u91cf\u7684\u7b2cii\u4e2a\u5143\u7d20\u7684\u6570\u503c\u5c31\u662f \\(PE_i(p)\\) \u3002Google\u5728\u8bba\u6587\u4e2d\u8bf4\u5230\u4ed6\u4eec\u6bd4\u8f83\u8fc7\u76f4\u63a5\u8bad\u7ec3\u51fa\u6765\u7684\u4f4d\u7f6e\u5411\u91cf\u548c\u4e0a\u8ff0\u516c\u5f0f\u8ba1\u7b97\u51fa\u6765\u7684\u4f4d\u7f6e\u5411\u91cf\uff0c\u6548\u679c\u662f\u63a5\u8fd1\u7684\u3002\u56e0\u6b64\u663e\u7136\u6211\u4eec\u66f4\u4e50\u610f\u4f7f\u7528\u516c\u5f0f\u6784\u9020\u7684Position Embedding\u4e86\u3002 Position Embedding\u672c\u8eab\u662f\u4e00\u4e2a\u7edd\u5bf9\u4f4d\u7f6e\u7684\u4fe1\u606f\uff0c\u4f46\u5728\u8bed\u8a00\u4e2d\uff0c\u76f8\u5bf9\u4f4d\u7f6e\u4e5f\u5f88\u91cd\u8981\uff0cGoogle\u9009\u62e9\u524d\u8ff0\u7684\u4f4d\u7f6e\u5411\u91cf\u516c\u5f0f\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u662f\uff1a\u7531\u4e8e\u6211\u4eec\u6709 \\(sin\u2061(\u03b1+\u03b2)=sin\u2061\u03b1cos\u2061\u03b2+cos\u2061\u03b1sin\u2061\u03b2\\) \u4ee5\u53ca \\(cos\u2061(\u03b1+\u03b2)=cos\u2061\u03b1cos\u2061\u03b2\u2212sin\u2061\u03b1sin\u2061\u03b2\\) \u3002\u8fd9\u8868\u660e\u4f4d\u7f6e \\(p+k\\) \u7684\u5411\u91cf\u53ef\u4ee5\u8868\u793a\u6210\u4f4d\u7f6e \\(p\\) \u7684\u5411\u91cf\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u8fd9\u63d0\u4f9b\u4e86\u8868\u8fbe\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\u3002 \u7ed3\u5408\u4f4d\u7f6e\u5411\u91cf\u548c\u8bcd\u5411\u91cf\u6709\u51e0\u4e2a\u53ef\u9009\u65b9\u6848\uff0c\u53ef\u4ee5\u628a\u5b83\u4eec\u62fc\u63a5\u8d77\u6765\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u628a\u4f4d\u7f6e\u5411\u91cf\u5b9a\u4e49\u4e3a\u8ddf\u8bcd\u5411\u91cf\u4e00\u6837\u5927\u5c0f\uff0c\u7136\u540e\u4e24\u8005\u52a0\u8d77\u6765\u3002FaceBook\u7684\u8bba\u6587\u548cGoogle\u8bba\u6587\u4e2d\u7528\u7684\u90fd\u662f\u540e\u8005\u3002\u76f4\u89c9\u4e0a\u76f8\u52a0\u4f1a\u5bfc\u81f4\u4fe1\u606f\u635f\u5931\uff0c\u4f3c\u4e4e\u4e0d\u53ef\u53d6\uff0c\u4f46Google\u7684\u6210\u679c\u8bf4\u660e\u76f8\u52a0\u4e5f\u662f\u5f88\u597d\u7684\u65b9\u6848\u3002","title":"POSITIONAL ENCODING"},{"location":"Attention/#why-self-attention","text":"\u5bf9\u4e8e\u4f7f\u7528\u81ea\u6ce8\u610f\u529b\u673a\u5236\u7684\u539f\u56e0\uff0c\u8bba\u6587\u4e2d\u63d0\u5230\u4e3b\u8981\u4ece\u4e09\u4e2a\u65b9\u9762\u8003\u8651 \u6bcf\u4e00\u5c42\u7684\u603b\u8ba1\u7b97\u590d\u6742\u5ea6 \u53ef\u5e76\u884c\u5316\u7684\u8ba1\u7b97\u91cf\uff0c\u7531\u6240\u9700\u7684\u6700\u5c0f\u987a\u5e8f\u64cd\u4f5c\u6570\u6765\u8861\u91cf\u3002 \u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\uff0c\u5373\u7f51\u7edc\u4e2d\u8fdc\u7a0b\u4f9d\u8d56\u9879\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u3002 \u5728\u8bb8\u591a\u5e8f\u5217\u8f6c\u6362\u4efb\u52a1\u4e2d\uff0c\u5b66\u4e60\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u662f\u4e00\u4e2a\u5173\u952e\u7684\u6311\u6218\u3002\u5f71\u54cd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\u80fd\u529b\u7684\u4e00\u4e2a\u5173\u952e\u56e0\u7d20\u662f\u5728\u7f51\u7edc\u4e2d\u524d\u8fdb\u548c\u540e\u9000\u4fe1\u53f7\u5fc5\u987b\u7ecf\u8fc7\u7684\u8def\u5f84\u7684\u957f\u5ea6\u3002\u8f93\u5165\u548c\u8f93\u51fa\u5e8f\u5217\u4e2d\u4efb\u610f\u4f4d\u7f6e\u7ec4\u5408\u4e4b\u95f4\u7684\u8fd9\u4e9b\u8def\u5f84\u8d8a\u77ed\uff0c\u5c31\u8d8a\u5bb9\u6613\u5b66\u4e60\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u7531\u4e0d\u540c\u5c42\u7c7b\u578b\u7ec4\u6210\u7684\u7f51\u7edc\u4e2d\u4efb\u610f\u4e24\u4e2a\u8f93\u5165\u548c\u8f93\u51fa\u4f4d\u7f6e\u4e4b\u95f4\u7684\u6700\u5927\u8def\u5f84\u957f\u5ea6\u3002 \u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u8f93\u5165\u5e8f\u5217n\u5c0f\u4e8e\u8868\u793a\u7ef4\u5ea6d\u7684\u8bdd\uff0c\u6bcf\u4e00\u5c42\u7684\u65f6\u95f4\u590d\u6742\u5ea6self-attention\u662f\u6bd4\u8f83\u6709\u4f18\u52bf\u7684\u3002\u5f53n\u6bd4\u8f83\u5927\u65f6\uff0c\u4f5c\u8005\u4e5f\u7ed9\u51fa\u4e86\u4e00\u79cd\u89e3\u51b3\u65b9\u6848self-attention\uff08restricted\uff09\u5373\u6bcf\u4e2a\u8bcd\u4e0d\u662f\u548c\u6240\u6709\u8bcd\u8ba1\u7b97attention\uff0c\u800c\u662f\u53ea\u4e0e\u9650\u5236\u7684r\u4e2a\u8bcd\u53bb\u8ba1\u7b97attention\u3002\u5728\u5e76\u884c\u65b9\u9762\uff0c\u591a\u5934attention\u548cCNN\u4e00\u6837\u4e0d\u4f9d\u8d56\u4e8e\u524d\u4e00\u65f6\u523b\u7684\u8ba1\u7b97\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u5e76\u884c\uff0c\u4f18\u4e8eRNN\u3002\u5728\u957f\u8ddd\u79bb\u4f9d\u8d56\u4e0a\uff0c\u7531\u4e8eself-attention\u662f\u6bcf\u4e2a\u8bcd\u548c\u6240\u6709\u8bcd\u90fd\u8981\u8ba1\u7b97attention\uff0c\u6240\u4ee5\u4e0d\u7ba1\u4ed6\u4eec\u4e2d\u95f4\u6709\u591a\u957f\u8ddd\u79bb\uff0c\u6700\u5927\u7684\u8def\u5f84\u957f\u5ea6\u4e5f\u90fd\u53ea\u662f1\u3002\u53ef\u4ee5\u6355\u83b7\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb\u3002 \u6b64\u5916\uff0c\u81ea\u6211\u5173\u6ce8\u8fd8\u53ef\u4ee5\u4ea7\u751f\u66f4\u591a\u53ef\u89e3\u91ca\u7684\u6a21\u578b\u3002\u6211\u4eec\u4ece\u6a21\u578b\u4e2d\u68c0\u67e5\u6ce8\u610f\u5206\u5e03\uff0c\u5e76\u5728\u9644\u5f55\u4e2d\u7ed9\u51fa\u548c\u8ba8\u8bba\u793a\u4f8b\u3002\u4e2a\u4f53\u7684\u6ce8\u610f\u529b\u5934\u4e0d\u4ec5\u6e05\u695a\u5730\u5b66\u4f1a\u4e86\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u8bb8\u591a\u6ce8\u610f\u529b\u5934\u8fd8\u8868\u73b0\u51fa\u4e0e\u53e5\u5b50\u7684\u53e5\u6cd5\u548c\u8bed\u4e49\u7ed3\u6784\u76f8\u5173\u7684\u884c\u4e3a\u3002","title":"Why self attention"},{"location":"Attention/#review","text":"\u5173\u4e8e\u4f20\u7edfattention\u548cself-attention\u7684\u95ee\u9898\uff0c\u4ed6\u4eec\u5728\u8ba1\u7b97\u4e0a\u7684\u5dee\u522b\u5728\u4e8e\u4f20\u7edf\u7684Attention\u53ea\u662f\u5728\u4e0d\u540c\u7684\u5c42\u6b21\u4e0a\uff08\u5b57\u7b26\u7ea7\u3001\u8bcd\u7ea7\u3001\u53e5\u5b50\u7ea7\u3001\u7bc7\u7ae0\u7ea7\uff09\u5bf9source\u7aef\u548ctarget\u7aef\u7684hidden state\u8fdb\u884c\u5404\u79cd\u5f62\u5f0f\u7684\u8ba1\u7b97\uff0c\u5f97\u5230\u7684\u662f\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u4e4b\u95f4\u8bcd\u4e0e\u8bcd\uff08\u6216\u5176\u4ed6\u5c42\u6b21\uff09\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u800cSelf-Attention\u5219\u4e0d\u540c\uff0c\u5b83\u5206\u522b\u5728source\u7aef\u548ctarget\u7aef\u8fdb\u884c\uff0c\u6355\u6349source\u7aef\u6216target\u7aef\u81ea\u8eab\u7684\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u7136\u540e\u518d\u628asource\u7aef\u7684\u5f97\u5230\u7684self Attention\u52a0\u5165\u5230target\u7aef\u5f97\u5230\u7684Attention\u4e2d\uff0c\u6355\u6349source\u7aef\u548ctarget\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u5206\u522b\u5bf9\u5e94\u4e09\u4e2aMulti-Head Attention\uff09\uff0c\u5176\u5e95\u5c42\u7684\u8ba1\u7b97\u5b9e\u8d28\u4e0a\u662f\u4e00\u6837\u7684\u3002\u5e76\u884c\u5316\u7684Self-Attention\u5e76\u4e0d\u5305\u542b\u9012\u5f52\u548c\u5377\u79ef\uff0c\u6240\u4ee5\u4e22\u5931\u4e86\u5e8f\u5217\u7684\u987a\u5e8f\u4fe1\u606f\uff0c\u4e3a\u6b64\uff0c\u4f7f\u7528Positional Encoding\u673a\u5236\uff0c\u5c06\u4f4d\u7f6e\u7f16\u7801\u4fe1\u606f\u52a0\u5165\u5230\u6bcf\u4e2a\u8bcd\u7684\u8bcd\u5d4c\u5165\u4e2d\u3002 \u5173\u4e8eself-attention\u7684\u5e76\u884c\u5316\u3001\u8ba1\u7b97\u590d\u6742\u5ea6\u5c0f\u548c\u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\u7684\u4f18\u70b9\uff0c\u539f\u6587\u4e2d\u7ed9\u51fa\u4e86\u5341\u5206\u8be6\u7ec6\u7684\u89e3\u91ca\uff0c\u4e3b\u8981\u5728\u4e8e\u5176\u6446\u8131\u4e86\u4f20\u7edfAttention\u4f9d\u8d56\u7684RNN\u6280\u672f\uff08\u5f53\u7136\uff0c\u4e5f\u6709\u90e8\u5206\u4f7f\u7528CNN\u6280\u672f\u4ece\u800c\u964d\u4f4e\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6\u5e76\u4e14\u62e5\u6709\u4e86\u5e76\u884c\u5316\u7684\u4f18\u70b9\uff09\uff0c\u901a\u8fc7Multi-Head Attention\u6280\u672f\uff08\u975e\u5e38\u7c7b\u4f3c\u4e8eCNN\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u64cd\u4f5c\uff09\uff0c\u76f4\u63a5\u8ba1\u7b97\u6574\u4e2a\u5e8f\u5217\u5168\u90e8\u5185\u5bb9\u7684Attention\uff0c\u53ef\u5e76\u884c\u5316\u77e9\u9635\u8fd0\u7b97\uff0c\u5e76\u4e14\u964d\u4f4e\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6-> RNN\u3001CNN\u548c\u539f\u59cbSelf-Attention\u6bcf\u5c42\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5206\u522b\u4e3an*d2\u3001k*n*d2\u3001n^2*d\uff08k\u3001n\u3001d\u5206\u522b\u4ee3\u8868\u5377\u79ef\u6838\u5927\u5c0f\u3001\u5e8f\u5217\u957f\u5ea6\u3001\u8bcd\u5d4c\u5165\u7ef4\u6570\uff09\uff0c\u5982\u679cn\u5c0f\u4e8ed\u7684\u8bdd\uff0cSelf-Attention\u662f\u6bd4\u8f83\u6709\u4f18\u52bf\u7684\u3002\u5f53n\u6bd4\u8f83\u5927\u65f6\uff0c\u4f5c\u8005\u4e5f\u7ed9\u51fa\u4e86\u4e00\u79cd\u89e3\u51b3\u65b9\u6848self-attention\uff08restricted\uff09\uff0c\u5373\u6bcf\u4e2a\u8bcd\u4e0d\u662f\u548c\u6240\u6709\u8bcd\u8ba1\u7b97attention\uff0c\u800c\u662f\u53ea\u4e0e\u9650\u5236\u7684r\u4e2a\u8bcd\u53bb\u8ba1\u7b97attention\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u964d\u4e3ar*n*d\u3002\u800c\u957f\u8ddd\u79bb\u4f9d\u8d56\u95ee\u9898\u662fNLP\u9886\u57df\u7684\u5173\u952e\u95ee\u9898\u4e4b\u4e00\uff0c\u5f71\u54cd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\u80fd\u529b\u7684\u4e00\u4e2a\u5173\u952e\u56e0\u7d20\u662f\u5728\u7f51\u7edc\u4e2d\u524d\u8fdb\u548c\u540e\u9000\u4fe1\u53f7\u5fc5\u987b\u7ecf\u8fc7\u7684\u8def\u5f84\u7684\u957f\u5ea6\uff0c\u4ee5\u4f20\u7edfRNN\u4e3a\u4f8b\uff0c\u5176\u4f9d\u8d56\u9879\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u4e3a\u4e24\u9879\u95f4\u7684\u8ddd\u79bb\uff0c\u800cself-attenion\u662f\u76f4\u63a5\u5bf9QKV\u8fdb\u884c\u77e9\u9635\u8fd0\u7b97\uff0c\u6bcf\u4e2a\u8bcd\u548c\u6240\u6709\u8bcd\u90fd\u8981\u8ba1\u7b97attention\uff0c\u6240\u4ee5\u4e0d\u7ba1\u4e24\u9879\u95f4\u6709\u591a\u957f\u8ddd\u79bb\uff0c\u6700\u5927\u7684\u8def\u5f84\u957f\u5ea6\u4e5f\u90fd\u53ea\u662f1\uff0c\u6a21\u578b\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5b66\u4e60\u5230\u8fd9\u6837\u957f\u8ddd\u79bb\u7684\u4f9d\u8d56\u3002 self-attention\u7684\u660e\u663e\u7f3a\u70b9\u5728\u4e8e\uff0c\u65e0\u6cd5\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u8fdb\u884c\u5f88\u597d\u5730\u5efa\u6a21\uff0c\u8fd9\u662f\u5176Pure Attention\u5e26\u6765\u7684\u786c\u4f24\u3002\u5c3d\u7ba1\u53ef\u4ee5\u5f15\u5165Position Embedding\uff0c\u4f46\u8fd9\u53ea\u662f\u4e00\u4e2a\u7f13\u89e3\u65b9\u6848\uff0c\u5e76\u6ca1\u6709\u6839\u672c\u89e3\u51b3\u95ee\u9898\u3002\u8fd9\u4e00\u673a\u5236\u5728\u6587\u672c\u5206\u7c7b\u6216\u8005\u662f\u673a\u5668\u7ffb\u8bd1\u8fd9\u6837\u5bf9\u8bed\u5e8f\u8981\u6c42\u5e76\u4e0d\u662f\u7279\u522b\u4e25\u683c\u7684\u9886\u57df\uff0c\u90fd\u53d6\u5f97\u4e86\u4ee4\u4eba\u6ee1\u610f\u7684\u6548\u679c\uff0c\u4f46\u662f\u7528\u6765\u5728\u5e8f\u5217\u6807\u6ce8\uff0c\u5982\u5206\u8bcd\u3001\u5b9e\u4f53\u8bc6\u522b\u7b49\uff0c\u6548\u679c\u5c31\u6709\u4e9b\u4e0d\u4ee4\u4eba\u6ee1\u610f\u3002self-attention\u5728\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u53d6\u5f97\u6210\u529f\u7684\u539f\u56e0\u662f\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u5e76\u4e0d\u7279\u522b\u5f3a\u8c03\u8bed\u5e8f\uff0cPosition Embedding\u6240\u5e26\u6765\u7684\u4f4d\u7f6e\u4fe1\u606f\u8db3\u591f\u6a21\u578b\u5b66\u4e60\u4f7f\u7528\uff0c\u5e76\u4e14\u7ffb\u8bd1\u4efb\u52a1\u7684\u4e3b\u6d41\u8bc4\u6d4b\u6307\u6807BLEU\u4e5f\u5e76\u4e0d\u7279\u522b\u5f3a\u8c03\u8bed\u5e8f\uff0c\u53ea\u662f\u901a\u8fc7ngram\u7684\u7edf\u8ba1\u91cf\u6765\u4fdd\u8bc1ngram\u7684\u76f8\u5bf9\u8bed\u5e8f\uff0c\u5e76\u4e0d\u662f\u4e25\u683c\u7684\u6574\u53e5\u7ffb\u8bd1\u7684\u8bed\u5e8f\uff0c\u6240\u4ee5\u673a\u5668\u7ffb\u8bd1\u7684\u4efb\u52a1\u672c\u8eab\u548c\u8bc4\u4ef7\u6807\u51c6\u90fd\u4fc3\u6210\u4e86\u5176\u5728\u8fd9\u4e00\u4efb\u52a1\u4e0a\u7684\u6210\u529f\u3002 restrict\u7684self-attention\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u539f\u673a\u5236\u7684O(n^2)\u7684\u590d\u6742\u5ea6\u800c\u63d0\u51fa\u7684\uff0c\u4e00\u65b9\u9762\u662f\u4e3a\u4e86\u964d\u4f4e\u590d\u6742\u5ea6\uff0c\u4e00\u65b9\u9762\u662f\u56e0\u4e3a\u4e0d\u662f\u6240\u6709\u4efb\u52a1\u90fd\u9700\u8981\u957f\u7a0b\u7684\u3001\u5168\u5c40\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6709\u7684\u4efb\u52a1\u53ea\u4f9d\u8d56\u4e8e\u5c40\u90e8\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5\u91c7\u7528\u4e86\u7c7b\u4f3c\u5377\u79ef\u7a97\u53e3\u7684\u65b9\u5f0f\u5904\u7406\u3002 attention\u673a\u5236\u7684\u63d0\u51fa\u662f\u4e3a\u4e86\u5feb\u51c6\u72e0\u5730\u7528light\u7684\u6743\u91cd\u53c2\u6570\u5e2e\u52a9\u4efb\u52a1\u8fc7\u6ee4\u6389\u65e0\u5173\u4fe1\u606f\u4ece\u800c\u589e\u5f3a\u6548\u679c\uff0c\u5c3d\u7ba1\u5982\u4eca\u53d6\u5f97\u4e86\u4e0d\u9519\u7684\u6548\u679c\uff0c\u4f46\u662f\u5176\u4e0d\u5177\u5907\u8f83\u597d\u7684\u53ef\u63a7\u5236\u6027\u4e0e\u53ef\u89e3\u91ca\u6027\uff0cself-attention\u4e5f\u662f\u548c\u666e\u901aattention\u673a\u5236\u4e00\u6837\u4f7f\u7528BP\u7b97\u6cd5\u66f4\u65b0\u53c2\u6570\uff0c\u4f9d\u9760\u5168\u5c40\u7684Loss\u51fd\u6570\u8fdb\u884c\u4f18\u5316\uff0c\u8fd9\u6837\u7684\u76d1\u7763\u5b66\u4e60\u662f\u4e0d\u591f\u51c6\u786e\u6709\u6548\u7684\uff0c\u65e0\u6cd5\u5c06attention\u673a\u5236\u5728\u6a21\u578b\u4e2d\u7684\u8d21\u732e\u5ea6\u63d0\u5347\u81f3\u6700\u9ad8\uff0c\u9700\u8981\u5f15\u5165\u66f4\u591a\u7684\u4fe1\u606f\u6216\u662f\u66f4\u52a0\u6709\u6548\u7684\u4f18\u5316\u76ee\u6807\u3002\u8fd9\u5c31\u50cf\u662fRL\u4e2dfeedback\u7684\u6982\u5ff5\uff0cattenion\u673a\u5236\u9700\u8981\u66f4\u5408\u9002\u7684feedback\uff0c\u5e2e\u52a9\u5176\u5728\u6a21\u578b\u4e2d\u7684\u8d21\u732e\u5ea6\u5f97\u5230\u63d0\u5347\u3002\u6240\u4ee5\u4e0b\u4e00\u6b65\u7684\u7814\u7a76\uff0c\u5728\u4e8e\u901a\u8fc7\u5f15\u5165\u9664\u4e86\u76ee\u524d\u6846\u67b6\u5185\u7684QKV\u4ee5\u5916\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5e76\u8bbe\u8ba1\u66f4\u52a0\u6709\u6548\u7684\u4f18\u5316\u76ee\u6807\uff0c\u4e3aattention\u673a\u5236\u63d0\u4f9b\u66f4\u52a0\u6709\u6548\u7684feedback\uff0c\u63d0\u5347\u5176\u6a21\u578b\u8d21\u732e\u5ea6\uff0c\u83b7\u5f97\u53ef\u63a7\u5236\u4e0e\u53ef\u89e3\u91ca\u7684attention\u201c\u5c42\u201d\u3002\u539f\u6587\u4e2d\u7684restrict\u7684self-attention\u5df2\u7ecf\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7ed3\u5408cnn\u7684\u5904\u7406\u4f18\u5316\u65b9\u5411\uff0c\u5f15\u5bfc\u672a\u6765\u7684\u7814\u7a76\u66f4\u591a\u7684\u7ed3\u5408RNN\u3001CNN\u4e2d\u7684\u673a\u5236\u3002 \u5728self-attention\u4e2d\uff0c\u5982\u679c\u53d6\u51faPositional Encoding\u7684\u90e8\u5206\uff0cpure attenion\u662f\u4e0d\u80fd\u6355\u6349\u5230\u5e8f\u5217\u4e4b\u95f4\u7684\u987a\u5e8f\u7684\uff0c\u8f93\u5165\u8bed\u53e5\u7684\u8bcd\u5e8f\u6253\u4e71\u5e76\u4e0d\u4f1a\u6539\u53d8\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd9\u6837\u7684\u673a\u5236\u53ea\u662f\u4e00\u4e2a\u7cbe\u5999\u7684\u8bcd\u888b\u6a21\u578b\u3002\u800ctransformer\u901a\u8fc7\u6b63\u5f26/\u4f59\u5f26\u516c\u5f0f\u751f\u6210\u7684Postional Embedding\uff0c\u4e0e\u8bcd\u5411\u91cf\u76f8\u52a0\uff08\u4e24\u8005\u7ef4\u5ea6\u4e00\u81f4\uff09\uff0c\u5c06\u8bed\u5e8f\u4fe1\u606f\u52a0\u5165\u5230\u6a21\u578b\u4e4b\u4e2d\uff0c\u662f\u4f4d\u7f6e\u4fe1\u606f\u7684\u552f\u4e00\u6765\u6e90\uff0c\u6a21\u578b\u7684\u6838\u5fc3\u6210\u5206\u3002\u8bed\u5e8f\u8c03\u6574\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u662f\u5c24\u4e3a\u91cd\u8981\u7684\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u6837\u7684\u5904\u7406\u65b9\u5f0f\u662f\u4e0d\u591f\u5145\u5206\u7684\uff0cPositional Embedding\u672c\u8eab\u53ea\u662f\u7edd\u5bf9\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4f46\u7531\u4e8e\u6b63\u4f59\u5f26\u516c\u5f0f\u7684\u7279\u70b9\uff0csin(\u03b1+\u03b2)=sin\u03b1cos\u03b2+cos\u03b1sin\u03b2 \u4ee5\u53cacos(\u03b1+\u03b2)=cos\u03b1cos\u03b2\u2212sin\u03b1sin\u03b2\uff0c\u4f7f\u5f97\u4f4d\u7f6ep+k\u7684\u5411\u91cf\u53ef\u4ee5\u8868\u793a\u6210\u4f4d\u7f6ep\u7684\u5411\u91cf\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u8fd9\u63d0\u4f9b\u4e86\u8868\u8fbe\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u53ef\u80fd\u6027\uff0c\u5b66\u751f\u4ee5\u4e3a\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u76f8\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u6bd4\u7edd\u5bf9\u4f4d\u7f6e\u4fe1\u606f\u7684\u4fe1\u606f\u4ef7\u503c\u66f4\u5927\u66f4\u6d53\u7f29\uff0c\u5176\u5bf9\u7ffb\u8bd1\u8d28\u91cf\u7684\u5f71\u54cd\u4e5f\u66f4\u5927\uff0c\u73b0\u6709\u7684\u5904\u7406\u65b9\u5f0f\u5b66\u751f\u8ba4\u4e3a\u5e76\u4e0d\u80fd\u5f88\u597d\u5730\u4f7f\u6a21\u578b\u5b66\u4e60\u5230\u8fd9\u6837\u7684\u4fe1\u606f(\u628a\u8bcd\u5411\u91cf\u4e0e\u4f4d\u7f6e\u5411\u91cf\u62fc\u63a5\u8d77\u6765\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u628a\u4f4d\u7f6e\u5411\u91cf\u5b9a\u4e49\u4e3a\u8ddf\u8bcd\u5411\u91cf\u4e00\u6837\u5927\u5c0f\uff0c\u7136\u540e\u4e24\u8005\u52a0\u8d77\u6765\u3002FaceBook\u7684\u8bba\u6587\u548cGoogle\u8bba\u6587\u4e2d\u7528\u7684\u90fd\u662f\u540e\u8005\u3002\u4f46\u76f4\u89c9\u4e0a\u76f8\u52a0\u4f1a\u5bfc\u81f4\u4fe1\u606f\u635f\u5931\uff0c\u4f3c\u4e4e\u4e0d\u53ef\u53d6\uff0c\u53ef\u662f\u5176\u6210\u679c\u8bf4\u660e\u76f8\u52a0\u662f\u5f88\u597d\u7684\u65b9\u6848\uff0c\u76f4\u89c2\u4e0a\u5e76\u4e0d\u80fd\u591f\u7406\u89e3\u53ef\u884c\u6027\u6765\u6e90)\u3002\u5b66\u751f\u8ba4\u4e3a\u673a\u5668\u7ffb\u8bd1\u76f8\u5bf9\u4e8e\u5206\u8bcd\u548c\u5e8f\u5217\u6807\u6ce8\u8fd9\u6837\u7684\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u800c\u8a00\uff0c\u540e\u8005\u7684\u8bed\u5e8f\u8981\u6c42\u66f4\u52a0\u4e25\u683c\u3002 \u800c\u5bf9\u4e8efeedback\u95ee\u9898\uff0c\u5b66\u751f\u8ba4\u4e3a\u4e00\u65b9\u9762\u53ef\u4ee5\u4ece\u7f51\u7edc\u7ed3\u6784\u6216\u4f18\u5316\u76ee\u6807\u5165\u624b\uff0c\u5982 Modeling Localness for Self-Attention Networks \u4e00\u6587\u4e2d\u63d0\u51fa\u7684\u5728\u4f4e\u5c42\u7f51\u7edc\u4e2d\u4f7f\u7528\u589e\u52a0\u53ef\u5b66\u4e60\u7684\u9ad8\u65af\u504f\u5dee\uff0c\u589e\u5f3a\u7f51\u7edc\u5bf9\u5c40\u90e8\u4e0a\u4e0b\u6587\u7684\u6355\u83b7\u80fd\u529b\uff1b\u4e00\u65b9\u9762\u53ef\u4ee5\u589e\u52a0\u5176\u4ed6\u5916\u90e8\u6570\u636e\u6216\u6807\u8bb0\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5f15\u5165\u77e5\u8bc6\u7684\u601d\u60f3\uff0c\u5c06\u66f4\u4e30\u5bcc\u7684\u77e5\u8bc6\u5f15\u5165\u5230\u673a\u5668\u7ffb\u8bd1\u4e4b\u4e2d\uff0c\u5e76\u4e14\u5efa\u7acb\u8d77\u6709\u6548\u7684\u5229\u7528\u673a\u5236\uff0c\u4f8b\u5982\u5c06\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u7279\u5f81\u5f15\u5165\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\uff0c\u8fd9\u4e0eself-attenion\u673a\u5236\u672c\u8eab\u5e76\u6ca1\u6709\u592a\u5927\u5173\u7cfb\uff0c\u8fd9\u4e00\u601d\u60f3\u7528\u5728RNN\u6216CNN\u4e0a\u4e5f\u4f1a\u6709\u6240\u6539\u8fdb\uff0c\u53ea\u662f\u8fd9\u4e9b\u5f15\u5165\u77e5\u8bc6\u6240\u9700\u8981\u7684\u8868\u793a\u4e0e\u5229\u7528\u7684\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u673a\u5236\u9700\u8981\u5206\u522b\u8bbe\u8ba1\u3002 \u5173\u4e8erestrict\u7684\u95ee\u9898\uff0c\u5982\u679c\u51cf\u5c0f\u4e86attention\u7684\u8303\u56f4\uff0c\u7684\u786e\u4f1a\u5931\u53bb\u5168\u5c40\u4f9d\u8d56\u5efa\u6a21\u8fd9\u4e00\u4f18\u52bf\uff0c\u4f46\u662f\u5e76\u975e\u6240\u6709\u95ee\u9898\u90fd\u9700\u8981\u957f\u7a0b\u7684\u3001\u5168\u5c40\u7684\u4f9d\u8d56\uff0c\u4e5f\u6709\u5f88\u591a\u95ee\u9898\u53ea\u4f9d\u8d56\u4e8e\u5c40\u90e8\u7ed3\u6784\uff0c\u90a3\u4e48\u901a\u8fc7\u8bbe\u5b9a\u4e00\u4e2a\u5408\u9002\u7684\u7a97\u53e3\u8fdb\u884c\u5efa\u6a21\uff0c\u6355\u6349\u5230\u5e8f\u5217\u7684\u5c40\u90e8\u7ed3\u6784\uff0c\u540c\u6837\u80fd\u591f\u6ee1\u8db3\u6a21\u578b\u5b66\u4e60\u7684\u9700\u8981\u3002\u6b64\u65f6\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u4fdd\u6301\u5e76\u884c\u5316\u7684\u540c\u65f6\u590d\u6742\u5ea6\u7684\u964d\u4f4e\uff0c\u5e76\u4e14\u901a\u8fc7\u7a97\u53e3\u7684\u8bbe\u5b9a\uff0c\u53ef\u4ee5\u5bf9\u6a21\u578b\u7684\u5b66\u4e60\u8303\u56f4\u8fdb\u884c\u63a7\u5236\uff0c\u8fd9\u6837\u53ef\u63a7\u5236\u7684\u6a21\u578b\u53ef\u4ee5\u66f4\u597d\u5730\u5e94\u5bf9task-specific\u7684\u60c5\u51b5\uff0c\u5176\u6027\u80fd\u76f8\u8f83\u4e8e\u666e\u901aattention\u7684RNN\u4e4b\u7c7b\u7684\u6a21\u578b\uff0c\u9664\u4e86\u539f\u672c\u7684\u5e76\u884c\u5316\u548c\u8ba1\u7b97\u590d\u6742\u5ea6\u5c0f\u7684\u4f18\u52bf\u4ee5\u5916\uff0c\u5728\u957f\u8ddd\u79bb\u4f9d\u8d56\u4e0a\uff0crestrict\u7684\u6700\u5927\u8def\u5f84\u957f\u5ea6\u4e3aO(n/r)\uff0cn\u4e3a\u5e8f\u5217\u957f\u5ea6\u3002\u5982\u679crestrict\u7684\u7a97\u53e3\u4e3a1\uff0c\u5176\u6700\u5927\u8def\u5f84\u957f\u5ea6\u4e0e\u666e\u901aattention\u7684RNN\u6a21\u578b\u4e00\u81f4\uff0c\u5747\u4e3aO(n)\u3002\u8fd9\u4e00\u8bc1\u660e\u51fa\u81eaself-attention\u7684\u539f\u6587\uff0c\u5e76\u4e14\u539f\u6587\u5e76\u672a\u5bf9restrict\u7684\u7248\u672c\u8fdb\u884c\u5b9e\u9a8c\u8bba\u8bc1\uff0c\u5b66\u751f\u4e5f\u5e76\u672a\u770b\u8fc7\u76f8\u5173\u7684\u8bba\u6587\u8bc1\u660erestrict\u7248\u672c\u7684\u6027\u80fd\u3002","title":"Review"},{"location":"Attention/#reference","text":"","title":"Reference"},{"location":"Attention/#paper","text":"Neural Machine Translation by Jointly Learning to Align and Translate Show, Attend and Tell: Neural Image Caption Generation with Visual Attention Effective Approaches to Attention-based Neural Machine Translation A Structured Self-Attentive Sentence Embedding Attention is All You Need","title":"Paper"},{"location":"Attention/#blog","text":"\u6ce8\u610f\u529b\u673a\u5236\uff08Attention Mechanism\uff09\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5e94\u7528 \u6a21\u578b\u6c47\u603b24 - \u6df1\u5ea6\u5b66\u4e60\u4e2dAttention Mechanism\u8be6\u7ec6\u4ecb\u7ecd\uff1a\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5e94\u7528 \u8bba\u6587\u5b66\u4e605\u201cShow, Attend and Tell: Neural Image Caption Generation with Visual Attention\u201d\u6587\u7ae0\u5b66\u4e60 \u771f\u6b63\u7684\u5b8c\u5168\u56fe\u89e3Seq2Seq Attention\u6a21\u578b \u57fa\u4e8e\u591a\u7bc7\u7ecf\u5178\u8bba\u6587\u7efc\u8ff0Attention\u6a21\u578b\u65b9\u6cd5\uff08\u9644\u6e90\u7801\uff09 \u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7406\u89e3\u4e0e\u5e94\u7528 \u8bba\u6587\u7b14\u8bb0\uff1aA Structured Self-Attentive Sentence Embedding Attention\u7684\u7406\u89e3 \u8bba\u6587\u7b14\u8bb0\uff1aAttention is all you need \u300aAttention is All You Need\u300b\u6d45\u8bfb\uff08\u7b80\u4ecb+\u4ee3\u7801\uff09 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff08Self-attention Mechanism\uff09 \u6df1\u5ea6\u957f\u6587\uff1aNLP\u7684\u5de8\u4eba\u80a9\u8180\uff08\u4e0a\uff09 NLP \u7684\u5de8\u4eba\u80a9\u8180\uff08\u4e0b\uff09\uff1a\u4ece CoVe \u5230 BERT \u4e07\u5b57\u957f\u6587\u6982\u8ff0NLP\u4e2d\u7684\u6df1\u5ea6\u5b66\u4e60\u6280\u672f","title":"Blog"},{"location":"CS224n-2019-00-Info/","text":"CS224n: Natural Language Processing with Deep Learning \u00b6 Logistics \u00b6 Stanford / Winter 2019 Public lecture videos: are now publicly available on YouTube . \u56fd\u5185\u89c6\u9891\u8d44\u6e90 2019\u7248|\u82f1\u6587\u5b57\u5e55(\u4ecd\u5728\u66f4\u65b0) 2019\u7248|\u82f1\u6587\u5b57\u5e55(\u5168) 2017\u7248|\u4e2d\u82f1\u5b57\u5e55 \u8bfe\u7a0b\u5b66\u4e60\u8d44\u6599\u6253\u5305 \u5305\u62ec\u8bfe\u4ef6\u3001\u8bb2\u4e49\u3001\u4f5c\u4e1a\u4ee5\u53ca\u63a8\u8350\u7684\u8bba\u6587\u7b49 Content \u00b6 What is this course about? \u00b6 \u81ea\u7136\u8bed\u8a00\u5904\u7406(NLP)\u662f\u4fe1\u606f\u65f6\u4ee3\u6700\u91cd\u8981\u7684\u6280\u672f\u4e4b\u4e00\uff0c\u4e5f\u662f\u4eba\u5de5\u667a\u80fd\u7684\u5173\u952e\u90e8\u5206\u3002 NLP\u7684\u5e94\u7528\u65e0\u5904\u4e0d\u5728\uff0c\u56e0\u4e3a\u4eba\u4eec\u51e0\u4e4e\u7528\u8bed\u8a00\u4ea4\u6d41\u4e00\u5207\uff1a\u7f51\u7edc\u641c\u7d22\uff0c\u5e7f\u544a\uff0c\u7535\u5b50\u90ae\u4ef6\uff0c\u5ba2\u6237\u670d\u52a1\uff0c\u8bed\u8a00\u7ffb\u8bd1\uff0c\u533b\u7597\u62a5\u544a\u7b49\u3002\u8fd1\u5e74\u6765\uff0c\u6df1\u5ea6\u5b66\u4e60\u65b9\u6cd5\u5728\u8bb8\u591a\u4e0d\u540c\u7684NLP\u4efb\u52a1\u4e2d\u83b7\u5f97\u4e86\u975e\u5e38\u9ad8\u7684\u6027\u80fd\uff0c\u4f7f\u7528\u4e00\u4e2a\u7aef\u5230\u7aef\u795e\u7ecf\u6a21\u578b\uff0c\u4e0d\u9700\u8981\u4f20\u7edf\u7684\u3001\u4efb\u52a1\u7279\u5b9a\u7684\u7279\u5f81\u5de5\u7a0b\u3002\u5728\u672c\u8bfe\u7a0b\u4e2d\uff0c\u5b66\u751f\u5c06\u6df1\u5165\u4e86\u89e3NLP\u6df1\u5ea6\u5b66\u4e60\u7684\u524d\u6cbf\u7814\u7a76\u3002\u901a\u8fc7\u8bb2\u5ea7\uff0c\u4f5c\u4e1a\u548c\u6700\u7ec8\u9879\u76ee\uff0c\u5b66\u751f\u5c06\u5b66\u4e60\u8bbe\u8ba1\uff0c\u5b9e\u73b0\u548c\u7406\u89e3\u4ed6\u4eec\u81ea\u5df1\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u6240\u9700\u7684\u6280\u80fd\u3002\u4eca\u5e74\uff0cCS224n\u5c06\u9996\u6b21\u4f7f\u7528 PyTorch \u3002 Previous offerings \u00b6 \u878d\u5408\u4e86earlier CS224n (Natural Language Processing) \u548c CS224d (Natural Language Processing with Deep Learning) Prerequisites \u00b6 \u7cbe\u901aPython \u5927\u5b66\u5fae\u79ef\u5206\uff0c\u7ebf\u6027\u4ee3\u6570 \u4f60\u5e94\u8be5\u719f\u6089(\u591a\u53d8\u91cf)\u6c42\u5bfc,\u7406\u89e3\u77e9\u9635/\u5411\u91cf\u7b26\u53f7\u548c\u64cd\u4f5c\u3002 \u6982\u7387\u548c\u7edf\u8ba1\u5b66\u57fa\u7840 \u673a\u5668\u5b66\u4e60\u57fa\u7840 A Course in Machine Learning Reading the first 5 chapters of that book would be good background. Knowing the first 7 chapters would be even better! Reference Texts \u00b6 \u4ee5\u4e0b\u6587\u672c\u662f\u6709\u7528\u7684\uff0c\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u5728\u7f51\u4e0a\u514d\u8d39\u9605\u8bfb\u3002 Dan Jurafsky and James H. Martin. Speech and Language Processing (3 rd ed. draft) Jacob Eisenstein. Natural Language Processing Yoav Goldberg. A Primer on Neural Network Models for Natural Language Processing Ian Goodfellow, Yoshua Bengio, and Aaron Courville. Deep Learning \u5982\u679c\u4f60\u6ca1\u6709\u795e\u7ecf\u7f51\u7edc\u65b9\u9762\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u8fd8\u662f\u60f3\u4e0a\u8fd9\u95e8\u8bfe\uff0c\u4f60\u5f88\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u4e66\u4e2d\u6709\u4e00\u672c\u5bf9\u4f60\u63d0\u4f9b\u66f4\u591a\u80cc\u666f\u77e5\u8bc6\u5f88\u6709\u5e2e\u52a9 Michael A. Nielsen. Neural Networks and Deep Learning Eugene Charniak. Introduction to Deep Learning Assignments \u00b6 \u6bcf\u5468\u6709\u4e94\u4e2a\u4f5c\u4e1a\uff0c\u8fd9\u5c06\u63d0\u9ad8\u4f60\u7684\u7406\u8bba\u7406\u89e3\u548c\u5b9e\u8df5\u6280\u80fd\u3002\u6240\u6709\u4f5c\u4e1a\u90fd\u5305\u62ec\u4e66\u9762\u95ee\u9898\u548c\u7f16\u7a0b\u90e8\u5206\u3002 Credit Assignment 1 (6%): Introduction to word vectors [ code ] [ preview ] Assignment 2 (12%): Derivatives and implementation of word2vec algorithm [ code ] [ handout ] Assignment 3 (12%): Dependency parsing and neural network foundations [ code ] [ handout ] Assignment 4 (12%): Neural Machine Translation with sequence-to-sequence and attention [ code ] [ handout ] [ Azure Guide ] [ Practical Guide to VMs ] Assignment 5 (12%): Neural Machine Translation with ConvNets and subword modeling [ original code (requires Stanford login) / public version ] [ handout ] Final Project \u00b6 \u671f\u672b\u9879\u76ee\u8ba9\u4f60\u6709\u673a\u4f1a\u5c06\u65b0\u83b7\u5f97\u7684\u6280\u80fd\u5e94\u7528\u5230\u6df1\u5165\u7684\u5e94\u7528\u4e2d\u3002\u5b66\u751f\u6709\u4e24\u79cd\u9009\u62e9: \u9ed8\u8ba4\u671f\u672b\u9879\u76ee (\u5b66\u751f\u5904\u7406\u9884\u5b9a\u4e49\u7684\u4efb\u52a1\uff0c\u5373\u6587\u672c\u95ee\u9898\u56de\u7b54)\u6216**\u81ea\u5b9a\u4e49\u671f\u672b\u9879\u76ee**(\u5b66\u751f\u9009\u62e9\u81ea\u5df1\u7684\u9879\u76ee)\u3002\u4e24\u8005\u7684\u4f8b\u5b50\u90fd\u53ef\u4ee5\u5728 \u53bb\u5e74\u7684\u7f51\u7ad9 \u4e0a\u770b\u5230\u3002 Credit\uff1aFor both default and custom projects, credit for the final project is broken down as follows: Project proposal (5%) [ instructions ] Project milestone (5%) [ instructions ] Project poster/video (3%) [ instructions ] Project report (30%) [ instructions ] Default Final Project [ handout ] [ code ] [ lecture slides ]: In this project, students explore deep learning solutions to the SQuAD (Stanford Question Asking Dataset) challenge . This year's project is similar to last year's , with some changes (e.g. SQuAD 2.0 rather than SQuAD 1.1, baseline code is in PyTorch rather than TensorFlow). Project advice [ lecture slides ] [ lecture notes ]: The Practical Tips for Final Projects lecture provides guidance for choosing and planning your project. To get project advice from staff members, first look at each staff member's areas of expertise on the office hours page . This should help you find a staff member who is knowledgable about your project area. Schedule \u00b6 Stanford / Winter 2019","title":"CS224n-2019 Introduction"},{"location":"CS224n-2019-00-Info/#cs224n-natural-language-processing-with-deep-learning","text":"","title":"CS224n: Natural Language Processing with Deep Learning"},{"location":"CS224n-2019-00-Info/#logistics","text":"Stanford / Winter 2019 Public lecture videos: are now publicly available on YouTube . \u56fd\u5185\u89c6\u9891\u8d44\u6e90 2019\u7248|\u82f1\u6587\u5b57\u5e55(\u4ecd\u5728\u66f4\u65b0) 2019\u7248|\u82f1\u6587\u5b57\u5e55(\u5168) 2017\u7248|\u4e2d\u82f1\u5b57\u5e55 \u8bfe\u7a0b\u5b66\u4e60\u8d44\u6599\u6253\u5305 \u5305\u62ec\u8bfe\u4ef6\u3001\u8bb2\u4e49\u3001\u4f5c\u4e1a\u4ee5\u53ca\u63a8\u8350\u7684\u8bba\u6587\u7b49","title":"Logistics"},{"location":"CS224n-2019-00-Info/#content","text":"","title":"Content"},{"location":"CS224n-2019-00-Info/#what-is-this-course-about","text":"\u81ea\u7136\u8bed\u8a00\u5904\u7406(NLP)\u662f\u4fe1\u606f\u65f6\u4ee3\u6700\u91cd\u8981\u7684\u6280\u672f\u4e4b\u4e00\uff0c\u4e5f\u662f\u4eba\u5de5\u667a\u80fd\u7684\u5173\u952e\u90e8\u5206\u3002 NLP\u7684\u5e94\u7528\u65e0\u5904\u4e0d\u5728\uff0c\u56e0\u4e3a\u4eba\u4eec\u51e0\u4e4e\u7528\u8bed\u8a00\u4ea4\u6d41\u4e00\u5207\uff1a\u7f51\u7edc\u641c\u7d22\uff0c\u5e7f\u544a\uff0c\u7535\u5b50\u90ae\u4ef6\uff0c\u5ba2\u6237\u670d\u52a1\uff0c\u8bed\u8a00\u7ffb\u8bd1\uff0c\u533b\u7597\u62a5\u544a\u7b49\u3002\u8fd1\u5e74\u6765\uff0c\u6df1\u5ea6\u5b66\u4e60\u65b9\u6cd5\u5728\u8bb8\u591a\u4e0d\u540c\u7684NLP\u4efb\u52a1\u4e2d\u83b7\u5f97\u4e86\u975e\u5e38\u9ad8\u7684\u6027\u80fd\uff0c\u4f7f\u7528\u4e00\u4e2a\u7aef\u5230\u7aef\u795e\u7ecf\u6a21\u578b\uff0c\u4e0d\u9700\u8981\u4f20\u7edf\u7684\u3001\u4efb\u52a1\u7279\u5b9a\u7684\u7279\u5f81\u5de5\u7a0b\u3002\u5728\u672c\u8bfe\u7a0b\u4e2d\uff0c\u5b66\u751f\u5c06\u6df1\u5165\u4e86\u89e3NLP\u6df1\u5ea6\u5b66\u4e60\u7684\u524d\u6cbf\u7814\u7a76\u3002\u901a\u8fc7\u8bb2\u5ea7\uff0c\u4f5c\u4e1a\u548c\u6700\u7ec8\u9879\u76ee\uff0c\u5b66\u751f\u5c06\u5b66\u4e60\u8bbe\u8ba1\uff0c\u5b9e\u73b0\u548c\u7406\u89e3\u4ed6\u4eec\u81ea\u5df1\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u6240\u9700\u7684\u6280\u80fd\u3002\u4eca\u5e74\uff0cCS224n\u5c06\u9996\u6b21\u4f7f\u7528 PyTorch \u3002","title":"What is this course about?"},{"location":"CS224n-2019-00-Info/#previous-offerings","text":"\u878d\u5408\u4e86earlier CS224n (Natural Language Processing) \u548c CS224d (Natural Language Processing with Deep Learning)","title":"Previous offerings"},{"location":"CS224n-2019-00-Info/#prerequisites","text":"\u7cbe\u901aPython \u5927\u5b66\u5fae\u79ef\u5206\uff0c\u7ebf\u6027\u4ee3\u6570 \u4f60\u5e94\u8be5\u719f\u6089(\u591a\u53d8\u91cf)\u6c42\u5bfc,\u7406\u89e3\u77e9\u9635/\u5411\u91cf\u7b26\u53f7\u548c\u64cd\u4f5c\u3002 \u6982\u7387\u548c\u7edf\u8ba1\u5b66\u57fa\u7840 \u673a\u5668\u5b66\u4e60\u57fa\u7840 A Course in Machine Learning Reading the first 5 chapters of that book would be good background. Knowing the first 7 chapters would be even better!","title":"Prerequisites"},{"location":"CS224n-2019-00-Info/#reference-texts","text":"\u4ee5\u4e0b\u6587\u672c\u662f\u6709\u7528\u7684\uff0c\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u5728\u7f51\u4e0a\u514d\u8d39\u9605\u8bfb\u3002 Dan Jurafsky and James H. Martin. Speech and Language Processing (3 rd ed. draft) Jacob Eisenstein. Natural Language Processing Yoav Goldberg. A Primer on Neural Network Models for Natural Language Processing Ian Goodfellow, Yoshua Bengio, and Aaron Courville. Deep Learning \u5982\u679c\u4f60\u6ca1\u6709\u795e\u7ecf\u7f51\u7edc\u65b9\u9762\u7684\u80cc\u666f\u77e5\u8bc6\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u8fd8\u662f\u60f3\u4e0a\u8fd9\u95e8\u8bfe\uff0c\u4f60\u5f88\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u4e66\u4e2d\u6709\u4e00\u672c\u5bf9\u4f60\u63d0\u4f9b\u66f4\u591a\u80cc\u666f\u77e5\u8bc6\u5f88\u6709\u5e2e\u52a9 Michael A. Nielsen. Neural Networks and Deep Learning Eugene Charniak. Introduction to Deep Learning","title":"Reference Texts"},{"location":"CS224n-2019-00-Info/#assignments","text":"\u6bcf\u5468\u6709\u4e94\u4e2a\u4f5c\u4e1a\uff0c\u8fd9\u5c06\u63d0\u9ad8\u4f60\u7684\u7406\u8bba\u7406\u89e3\u548c\u5b9e\u8df5\u6280\u80fd\u3002\u6240\u6709\u4f5c\u4e1a\u90fd\u5305\u62ec\u4e66\u9762\u95ee\u9898\u548c\u7f16\u7a0b\u90e8\u5206\u3002 Credit Assignment 1 (6%): Introduction to word vectors [ code ] [ preview ] Assignment 2 (12%): Derivatives and implementation of word2vec algorithm [ code ] [ handout ] Assignment 3 (12%): Dependency parsing and neural network foundations [ code ] [ handout ] Assignment 4 (12%): Neural Machine Translation with sequence-to-sequence and attention [ code ] [ handout ] [ Azure Guide ] [ Practical Guide to VMs ] Assignment 5 (12%): Neural Machine Translation with ConvNets and subword modeling [ original code (requires Stanford login) / public version ] [ handout ]","title":"Assignments"},{"location":"CS224n-2019-00-Info/#final-project","text":"\u671f\u672b\u9879\u76ee\u8ba9\u4f60\u6709\u673a\u4f1a\u5c06\u65b0\u83b7\u5f97\u7684\u6280\u80fd\u5e94\u7528\u5230\u6df1\u5165\u7684\u5e94\u7528\u4e2d\u3002\u5b66\u751f\u6709\u4e24\u79cd\u9009\u62e9: \u9ed8\u8ba4\u671f\u672b\u9879\u76ee (\u5b66\u751f\u5904\u7406\u9884\u5b9a\u4e49\u7684\u4efb\u52a1\uff0c\u5373\u6587\u672c\u95ee\u9898\u56de\u7b54)\u6216**\u81ea\u5b9a\u4e49\u671f\u672b\u9879\u76ee**(\u5b66\u751f\u9009\u62e9\u81ea\u5df1\u7684\u9879\u76ee)\u3002\u4e24\u8005\u7684\u4f8b\u5b50\u90fd\u53ef\u4ee5\u5728 \u53bb\u5e74\u7684\u7f51\u7ad9 \u4e0a\u770b\u5230\u3002 Credit\uff1aFor both default and custom projects, credit for the final project is broken down as follows: Project proposal (5%) [ instructions ] Project milestone (5%) [ instructions ] Project poster/video (3%) [ instructions ] Project report (30%) [ instructions ] Default Final Project [ handout ] [ code ] [ lecture slides ]: In this project, students explore deep learning solutions to the SQuAD (Stanford Question Asking Dataset) challenge . This year's project is similar to last year's , with some changes (e.g. SQuAD 2.0 rather than SQuAD 1.1, baseline code is in PyTorch rather than TensorFlow). Project advice [ lecture slides ] [ lecture notes ]: The Practical Tips for Final Projects lecture provides guidance for choosing and planning your project. To get project advice from staff members, first look at each staff member's areas of expertise on the office hours page . This should help you find a staff member who is knowledgable about your project area.","title":"Final Project"},{"location":"CS224n-2019-00-Info/#schedule","text":"Stanford / Winter 2019","title":"Schedule"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/","text":"Lecture 01 Introduction and Word Vectors \u00b6 Lecture Plan The course Human language and word meaning Word2vec introduction Word2vec objective function gradients Optimization basics Looking at word vectors Human language and word meaning \u00b6 \u4eba\u7c7b\u4e4b\u6240\u4ee5\u6bd4\u7c7b\u4eba\u733f\u66f4\u201c\u806a\u660e\u201d\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u6709\u8bed\u8a00\uff0c\u56e0\u6b64\u662f\u4e00\u4e2a\u4eba\u673a\u7f51\u7edc\uff0c\u5176\u4e2d\u4eba\u7c7b\u8bed\u8a00\u4f5c\u4e3a\u7f51\u7edc\u8bed\u8a00\u3002\u4eba\u7c7b\u8bed\u8a00\u5177\u6709 \u4fe1\u606f\u529f\u80fd \u548c \u793e\u4f1a\u529f\u80fd \u3002 \u636e\u4f30\u8ba1\uff0c\u4eba\u7c7b\u8bed\u8a00\u53ea\u6709\u5927\u7ea65000\u5e74\u7684\u77ed\u6682\u5386\u3002\u8bed\u8a00\u662f\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e3b\u8981\u539f\u56e0\u3002\u5199\u4f5c\u662f\u53e6\u4e00\u4ef6\u8ba9\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e8b\u60c5\u3002\u5b83\u662f\u4f7f\u77e5\u8bc6\u80fd\u591f\u5728\u7a7a\u95f4\u4e0a\u4f20\u9001\u5230\u4e16\u754c\u5404\u5730\uff0c\u5e76\u5728\u65f6\u95f4\u4e0a\u4f20\u9001\u7684\u4e00\u79cd\u5de5\u5177\u3002 \u4f46\u662f\uff0c\u76f8\u8f83\u4e8e\u5982\u4eca\u7684\u4e92\u8054\u7f51\u7684\u4f20\u64ad\u901f\u5ea6\u800c\u8a00\uff0c\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u79cd\u7f13\u6162\u7684\u8bed\u8a00\u3002\u7136\u800c\uff0c\u53ea\u9700\u4eba\u7c7b\u8bed\u8a00\u5f62\u5f0f\u7684\u51e0\u767e\u4f4d\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u6784\u5efa\u6574\u4e2a\u89c6\u89c9\u573a\u666f\u3002\u8fd9\u5c31\u662f\u81ea\u7136\u8bed\u8a00\u5982\u6b64\u8ff7\u4eba\u7684\u539f\u56e0\u3002 How do we represent the meaning of a word? meaning \u7528\u4e00\u4e2a\u8bcd\u3001\u8bcd\u7ec4\u7b49\u8868\u793a\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u4eba\u60f3\u7528\u8bed\u8a00\u3001\u7b26\u53f7\u7b49\u6765\u8868\u8fbe\u7684\u60f3\u6cd5\u3002 \u8868\u8fbe\u5728\u4f5c\u54c1\u3001\u827a\u672f\u7b49\u65b9\u9762\u7684\u601d\u60f3 \u7406\u89e3\u610f\u4e49\u7684\u6700\u666e\u904d\u7684\u8bed\u8a00\u65b9\u5f0f( linguistic way ) : \u8bed\u8a00\u7b26\u53f7\u4e0e\u8bed\u8a00\u7b26\u53f7\u7684\u610f\u4e49\u7684\u8f6c\u5316 $$ \\boxed{\\text{signifier(symbol)}\\Leftrightarrow \\text{signified(idea or thing)}} \\ = \\textbf{denotational semantics} $$ denotational semantics \u6307\u79f0\u8bed\u4e49 How do we have usable meaning in a computer? WordNet , \u4e00\u4e2a\u5305\u542b\u540c\u4e49\u8bcd\u96c6\u548c\u4e0a\u4f4d\u8bcd(\u201cis a\u201d\u5173\u7cfb) synonym sets and hypernyms \u7684\u5217\u8868\u7684\u8f9e\u5178 Problems with resources like WordNet \u4f5c\u4e3a\u4e00\u4e2a\u8d44\u6e90\u5f88\u597d\uff0c\u4f46\u5ffd\u7565\u4e86\u7ec6\u5fae\u5dee\u522b \u4f8b\u5982\u201cproficient\u201d\u88ab\u5217\u4e3a\u201cgood\u201d\u7684\u540c\u4e49\u8bcd\u3002\u8fd9\u53ea\u5728\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4e2d\u662f\u6b63\u786e\u7684\u3002 \u7f3a\u5c11\u5355\u8bcd\u7684\u65b0\u542b\u4e49 \u96be\u4ee5\u6301\u7eed\u66f4\u65b0 \u4f8b\u5982 wicked, badass, nifty, wizard, genius, ninja, bombest \u4e3b\u89c2\u7684 \u9700\u8981\u4eba\u7c7b\u52b3\u52a8\u6765\u521b\u9020\u548c\u8c03\u6574 \u65e0\u6cd5\u8ba1\u7b97\u5355\u8bcd\u76f8\u4f3c\u5ea6 Representing words as discrete symbols \u5728\u4f20\u7edf\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u628a\u8bcd\u8bed\u770b\u4f5c\u79bb\u6563\u7684\u7b26\u53f7: hotel, conference, motel - a localist representation\u3002\u5355\u8bcd\u53ef\u4ee5\u901a\u8fc7\u72ec\u70ed\u5411\u91cf(one-hot vectors\uff0c\u53ea\u6709\u4e00\u4e2a1\uff0c\u5176\u4f59\u5747\u4e3a0\u7684\u7a00\u758f\u5411\u91cf) \u3002\u5411\u91cf\u7ef4\u5ea6=\u8bcd\u6c47\u91cf(\u5982500,000)\u3002 \\[ motel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0] \\\\ hotel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0] \\] Problem with words as discrete symbols \u6240\u6709\u5411\u91cf\u662f\u6b63\u4ea4\u7684\u3002\u5bf9\u4e8e\u72ec\u70ed\u5411\u91cf\uff0c\u6ca1\u6709\u5173\u4e8e\u76f8\u4f3c\u6027\u6982\u5ff5\uff0c\u5e76\u4e14\u5411\u91cf\u7ef4\u5ea6\u8fc7\u5927\u3002 Solutions \u4f7f\u7528\u7c7b\u4f3c WordNet \u7684\u5de5\u5177\u4e2d\u7684\u5217\u8868\uff0c\u83b7\u5f97\u76f8\u4f3c\u5ea6\uff0c\u4f46\u4f1a\u56e0\u4e0d\u591f\u5b8c\u6574\u800c\u5931\u8d25 \u5b66\u4e60\u5728\u5411\u91cf\u672c\u8eab\u4e2d\u7f16\u7801\u76f8\u4f3c\u6027 Representing words by their context Distributional semantics \uff1a\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\u662f\u7531\u7ecf\u5e38\u51fa\u73b0\u5728\u5b83\u9644\u8fd1\u7684\u5355\u8bcd\u7ed9\u51fa\u7684 \u201cYou shall know a word by the company it keeps\u201d (J. R. Firth 1957: 11) \u73b0\u4ee3\u7edf\u8ba1NLP\u6700\u6210\u529f\u7684\u7406\u5ff5\u4e4b\u4e00 \u6709\u70b9\u7269\u4ee5\u7c7b\u805a\uff0c\u4eba\u4ee5\u7fa4\u5206\u7684\u611f\u89c9 \u5f53\u4e00\u4e2a\u5355\u8bcd \\(w\\) \u51fa\u73b0\u5728\u6587\u672c\u4e2d\u65f6\uff0c\u5b83\u7684\u4e0a\u4e0b\u6587\u662f\u51fa\u73b0\u5728\u5176\u9644\u8fd1\u7684\u4e00\u7ec4\u5355\u8bcd(\u5728\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d)\u3002 \u4f7f\u7528 \\(w\\) \u7684\u8bb8\u591a\u4e0a\u4e0b\u6587\u6765\u6784\u5efa \\(w\\) \u7684\u8868\u793a Word2vec introduction \u00b6 \u6211\u4eec\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u6784\u5efa\u4e00\u4e2a \u5bc6\u96c6 \u7684\u5411\u91cf\uff0c\u4f7f\u5176\u4e0e\u51fa\u73b0\u5728\u76f8\u4f3c\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u76f8\u4f3c \u8bcd\u5411\u91cf word vectors \u6709\u65f6\u88ab\u79f0\u4e3a\u8bcd\u5d4c\u5165 word embeddings \u6216\u8bcd\u8868\u793a word representations \u5b83\u4eec\u662f\u5206\u5e03\u5f0f\u8868\u793a distributed representation Word2vec (Mikolov et al. 2013)\u662f\u4e00\u4e2a\u5b66\u4e60\u5355\u8bcd\u5411\u91cf\u7684 \u6846\u67b6 IDEA \uff1a \u6211\u4eec\u6709\u5927\u91cf\u7684\u6587\u672c (corpus means 'body' in Latin. \u590d\u6570\u4e3acorpora) \u56fa\u5b9a\u8bcd\u6c47\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7531\u4e00\u4e2a\u5411\u91cf\u8868\u793a \u6587\u672c\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e \\(t\\) \uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e0a\u4e0b\u6587(\u201c\u5916\u90e8\u201d)\u5355\u8bcd \\(o\\) \u4f7f\u7528 \\(c\\) \u548c \\(o\\) \u7684 \u8bcd\u5411\u91cf\u7684\u76f8\u4f3c\u6027 \u6765\u8ba1\u7b97\u7ed9\u5b9a \\(c\\) \u7684 \\(o\\) \u7684 \u6982\u7387 (\u53cd\u4e4b\u4ea6\u7136) \u4e0d\u65ad\u8c03\u6574\u8bcd\u5411\u91cf \u6765\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u4e0b\u56fe\u4e3a\u7a97\u53e3\u5927\u5c0f \\(j=2\\) \u65f6\u7684 \\(P\\left(w_{t+j} | w_{t}\\right)\\) \u8ba1\u7b97\u8fc7\u7a0b\uff0ccenter word\u5206\u522b\u4e3a \\(into\\) \u548c \\(banking\\) Word2vec objective function \u00b6 \u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e \\(t=1, \\ldots, T\\) \uff0c\u5728\u5927\u5c0f\u4e3a \\(m\\) \u7684\u56fa\u5b9a\u7a97\u53e3\u5185\u9884\u6d4b\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(w_t\\) \\[ Likelihoood = L(\\theta) = \\prod^{T}_{t=1} \\prod_{-m \\leq j \\leq m \\atop j \\neq 0} P(w_{t+j} | w_{t} ; \\theta) \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u4e3a\u6240\u6709\u9700\u8981\u4f18\u5316\u7684\u53d8\u91cf \u76ee\u6807\u51fd\u6570 \\(J(\\theta)\\) (\u6709\u65f6\u88ab\u79f0\u4e3a\u4ee3\u4ef7\u51fd\u6570\u6216\u635f\u5931\u51fd\u6570) \u662f(\u5e73\u5747)\u8d1f\u5bf9\u6570\u4f3c\u7136 \\[ J(\\theta)=-\\frac{1}{T} \\log L(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\log P\\left(w_{t+j} | w_{t} ; \\theta\\right) \\] \u5176\u4e2dlog\u5f62\u5f0f\u662f\u65b9\u4fbf\u5c06\u8fde\u4e58\u8f6c\u5316\u4e3a\u6c42\u548c\uff0c\u8d1f\u53f7\u662f\u5e0c\u671b\u5c06\u6781\u5927\u5316\u4f3c\u7136\u7387\u8f6c\u5316\u4e3a\u6781\u5c0f\u5316\u635f\u5931\u51fd\u6570\u7684\u7b49\u4ef7\u95ee\u9898\u3002 \u5728\u8fde\u4e58\u4e4b\u524d\u4f7f\u7528log\u8f6c\u5316\u4e3a\u6c42\u548c\u975e\u5e38\u6709\u6548\uff0c\u7279\u522b\u662f\u5728\u505a\u4f18\u5316\u65f6 $$ \\log \\prod_i x_i = \\sum_i \\log x_i $$ \u6700\u5c0f\u5316\u76ee\u6807\u51fd\u6570 \\(\\Leftrightarrow\\) \u6700\u5927\u5316\u9884\u6d4b\u7cbe\u5ea6 \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97 \\(P(w_{t+j} | w_{t} ; \\theta)\\) \uff1f \u56de\u7b54 \uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u90fd\u662f\u7528\u4e24\u4e2a\u5411\u91cf \\(v_w\\) \u5f53 \\(w\\) \u662f\u4e2d\u5fc3\u8bcd\u65f6 \\(u_w\\) \u5f53 \\(w\\) \u662f\u4e0a\u4e0b\u6587\u8bcd\u65f6 \u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u516c\u5f0f\u4e2d\uff0c\u5411\u91cf \\(u_o\\) \u548c\u5411\u91cf \\(v_c\\) \u8fdb\u884c\u70b9\u4e58\u3002\u5411\u91cf\u4e4b\u95f4\u8d8a\u76f8\u4f3c\uff0c\u70b9\u4e58\u7ed3\u679c\u8d8a\u5927\uff0c\u4ece\u800c\u5f52\u4e00\u5316\u540e\u5f97\u5230\u7684\u6982\u7387\u503c\u4e5f\u8d8a\u5927\u3002\u6a21\u578b\u7684\u8bad\u7ec3\u6b63\u662f\u4e3a\u4e86\u4f7f\u5f97\u5177\u6709\u76f8\u4f3c\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\uff0c\u5177\u6709\u76f8\u4f3c\u7684\u5411\u91cf\u3002 Word2vec prediction function \u00b6 \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u53d6\u5e42\u4f7f\u4efb\u4f55\u6570\u90fd\u4e3a\u6b63 \u70b9\u79ef\u6bd4\u8f83o\u548cc\u7684\u76f8\u4f3c\u6027 \\(u^{T} v=u . v=\\sum_{i=1}^{n} u_{i} v_{i}\\) \uff0c\u70b9\u79ef\u8d8a\u5927\u5219\u6982\u7387\u8d8a\u5927 \u5206\u6bcd\uff1a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u8868\u8fdb\u884c\u6807\u51c6\u5316\uff0c\u4ece\u800c\u7ed9\u51fa\u6982\u7387\u5206\u5e03 softmax function \\(\\mathbb{R}^{n} \\rightarrow \\mathbb{R}^{n}\\) $$ \\operatorname{softmax}\\left(x_{i}\\right)=\\frac{\\exp \\left(x_{i}\\right)}{\\sum_{j=1}^{n} \\exp \\left(x_{j}\\right)}=p_{i} $$ \u5c06\u4efb\u610f\u503c \\(x_i\\) \u6620\u5c04\u5230\u6982\u7387\u5206\u5e03 \\(p_i\\) max \uff1a\u56e0\u4e3a\u653e\u5927\u4e86\u6700\u5927\u7684\u6982\u7387 soft \uff1a\u56e0\u4e3a\u4ecd\u7136\u4e3a\u8f83\u5c0f\u7684 \\(x_i\\) \u8d4b\u4e88\u4e86\u4e00\u5b9a\u6982\u7387 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5e38\u7528 \u9996\u5148\u6211\u4eec\u968f\u673a\u521d\u59cb\u5316 \\(u_{w}\\in\\mathbb{R}^d\\) \u548c \\(v_{w}\\in\\mathbb{R}^d\\) \uff0c\u800c\u540e\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u8fdb\u884c\u66f4\u65b0 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=\\frac{\\partial}{\\partial v_c}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)} \\end{align} $$ > \u504f\u5bfc\u6570\u53ef\u4ee5\u79fb\u8fdb\u6c42\u548c\u4e2d\uff0c\u5bf9\u5e94\u4e0a\u65b9\u516c\u5f0f\u7684\u6700\u540e\u4e24\u884c\u7684\u63a8\u5bfc > $$ > \\frac{\\partial}{\\partial x}\\sum_iy_i = \\sum_i\\frac{\\partial}{\\partial x}y_i > \\] \u6211\u4eec\u53ef\u4ee5\u5bf9\u4e0a\u8ff0\u7ed3\u679c\u91cd\u65b0\u6392\u5217\u5982\u4e0b\uff0c\u7b2c\u4e00\u9879\u662f\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7b2c\u4e8c\u9879\u662f\u9884\u6d4b\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u3002\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u4e0a\u4e0b\u6587\u5c06\u9010\u6b65\u63a5\u8fd1\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u3002 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=u_o-\\sum_{w\\in V}\\frac{\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}u_w\\\\ &=u_o-\\sum_{w\\in V}P(w|c)u_w \\end{align} \\] \u518d\u5bf9 \\(u_o\\) \u8fdb\u884c\u504f\u5fae\u5206\u8ba1\u7b97\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 \\(u_o\\) \u662f \\(u_{w=o}\\) \u7684\u7b80\u5199\uff0c\u6545\u53ef\u77e5 \\(\\frac{\\partial}{\\partial u_o}\\sum_{w \\in V } u_w^T v_c = \\frac{\\partial}{\\partial u_o} u_o^T v_c = \\frac{\\partial u_o}{\\partial u_o}v_c + \\frac{\\partial v_c}{\\partial u_o}u_o= v_c\\) \\[ \\begin{align} \\frac{\\partial}{\\partial u_o}\\log P(o|c) &=\\frac{\\partial}{\\partial u_o}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=v_c-\\frac{\\sum\\frac{\\partial}{\\partial u_o}\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)v_c}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}v_c\\\\ &=v_c - P(o|c)v_c\\\\ &=(1-P(o|c))v_c \\end{align} \\] \u53ef\u4ee5\u7406\u89e3\uff0c\u5f53 \\(P(o|c) \\to 1\\) \uff0c\u5373\u901a\u8fc7\u4e2d\u5fc3\u8bcd \\(c\\) \u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u9884\u6d4b\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \uff0c\u6b64\u65f6\u6211\u4eec\u4e0d\u9700\u8981\u8c03\u6574 \\(u_o\\) \uff0c\u53cd\u4e4b\uff0c\u5219\u76f8\u5e94\u8c03\u6574 \\(u_o\\) \u3002 \u5173\u4e8e\u6b64\u5904\u7684\u5fae\u79ef\u5206\u77e5\u8bc6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4e2d\u7684 \u9644\u5f55B \u4e86\u89e3\u3002 Notes 01 Introduction, SVD and Word2Vec \u00b6 Keyphrases : Natural Language Processing. Word Vectors. Singular Value Decomposition. Skip-gram. Continuous Bag of Words(CBOW). Negative Sampling. Hierarchical Softmax. Word2Vec. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u9996\u5148\u4ecb\u7ecd\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406(NLP)\u7684\u6982\u5ff5\u53ca\u5176\u9762\u4e34\u7684\u95ee\u9898\u3002\u7136\u540e\u6211\u4eec\u7ee7\u7eed\u8ba8\u8bba\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u6570\u5b57\u5411\u91cf\u7684\u6982\u5ff5\u3002\u6700\u540e\uff0c\u8ba8\u8bba\u4e86\u5e38\u7528\u7684\u8bcd\u5411\u91cf\u8bbe\u8ba1\u65b9\u6cd5\u3002 Introduction to Natural Language Processing \u00b6 What is so special about NLP? Natural language is a discrete/symbolic/categorical system \u79bb\u6563\u7684/\u7b26\u53f7\u7684/\u5206\u7c7b\u7684 \u4eba\u7c7b\u7684\u8bed\u8a00\u6709\u4ec0\u4e48\u7279\u522b\u4e4b\u5904\uff1f\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u4e2a\u4e13\u95e8\u7528\u6765\u8868\u8fbe\u610f\u4e49\u7684\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u7531\u4efb\u4f55\u5f62\u5f0f\u7684\u7269\u7406\u8868\u73b0\u4ea7\u751f\u7684\u3002\u5728\u8fd9\u65b9\u9762\u4e0a\uff0c\u5b83\u4e0e\u89c6\u89c9\u6216\u4efb\u4f55\u5176\u4ed6\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u90fd\u6709\u5f88\u5927\u7684\u4e0d\u540c\u3002 \u5927\u591a\u6570\u5355\u8bcd\u53ea\u662f\u4e00\u4e2a\u8bed\u8a00\u5b66\u4ee5\u5916\u7684\u7684\u7b26\u53f7\uff1a\u5355\u8bcd\u662f\u4e00\u4e2a\u6620\u5c04\u5230\u6240\u6307(signified \u60f3\u6cd5\u6216\u4e8b\u7269)\u7684\u80fd\u6307(signifier)\u3002 \u4f8b\u5982\uff0c\u201crocket\u201d\u4e00\u8bcd\u6307\u7684\u662f\u706b\u7bad\u7684\u6982\u5ff5\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f15\u7533\u4e3a\u706b\u7bad\u7684\u5b9e\u4f8b\u3002\u5f53\u6211\u4eec\u4f7f\u7528\u5355\u8bcd\u548c\u5b57\u6bcd\u6765\u8868\u8fbe\u7b26\u53f7\u65f6\uff0c\u4e5f\u4f1a\u6709\u4e00\u4e9b\u4f8b\u5916\uff0c\u4f8b\u5982\u201cwhoompaa\u201d\u7684\u4f7f\u7528\u3002\u6700\u91cd\u8981\u7684\u662f\uff0c\u8fd9\u4e9b\u8bed\u8a00\u7684\u7b26\u53f7\u53ef\u4ee5\u88ab \u7f16\u7801\u6210\u51e0\u79cd\u5f62\u5f0f\uff1a\u58f0\u97f3\u3001\u624b\u52bf\u3001\u6587\u5b57\u7b49\u7b49\uff0c\u7136\u540e\u901a\u8fc7\u8fde\u7eed\u7684\u4fe1\u53f7\u4f20\u8f93\u7ed9\u5927\u8111\uff0c\u5927\u8111\u672c\u8eab\u4f3c\u4e4e\u4e5f\u80fd\u4ee5\u4e00\u79cd\u8fde\u7eed\u7684\u65b9\u5f0f\u5bf9\u8fd9\u4e9b\u4fe1\u53f7\u8fdb\u884c\u89e3\u7801\u3002\u4eba\u4eec\u5728\u8bed\u8a00\u54f2\u5b66\u548c\u8bed\u8a00\u5b66\u65b9\u9762\u505a\u4e86\u5927\u91cf\u7684\u5de5\u4f5c\u6765\u6982\u5ff5\u5316\u4eba\u7c7b\u8bed\u8a00\uff0c\u5e76\u5c06\u8bcd\u8bed\u4e0e\u5176\u53c2\u7167\u3001\u610f\u4e49\u7b49\u533a\u5206\u5f00\u6765\u3002 Examples of tasks \u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u4e0d\u540c\u5c42\u6b21\u7684\u4efb\u52a1\uff0c\u4ece\u8bed\u8a00\u5904\u7406\u5230\u8bed\u4e49\u89e3\u91ca\u518d\u5230\u8bed\u7bc7\u5904\u7406\u3002\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u76ee\u6807\u662f\u901a\u8fc7\u8bbe\u8ba1\u7b97\u6cd5\u4f7f\u5f97\u8ba1\u7b97\u673a\u80fd\u591f\u201c\u7406\u89e3\u201d\u8bed\u8a00\uff0c\u4ece\u800c\u80fd\u591f\u6267\u884c\u67d0\u4e9b\u7279\u5b9a\u7684\u4efb\u52a1\u3002\u4e0d\u540c\u7684\u4efb\u52a1\u7684\u96be\u5ea6\u662f\u4e0d\u4e00\u6837\u7684 Easy \u62fc\u5199\u68c0\u67e5 Spell Checking \u5173\u952e\u8bcd\u68c0\u7d22 Keyword Search \u540c\u4e49\u8bcd\u67e5\u627e Finding Synonyms Medium \u89e3\u6790\u6765\u81ea\u7f51\u7ad9\u3001\u6587\u6863\u7b49\u7684\u4fe1\u606f Hard \u673a\u5668\u7ffb\u8bd1 Machine Translation \u8bed\u4e49\u5206\u6790 Semantic Analysis \u6307\u4ee3\u6d88\u89e3 Coreference \u95ee\u7b54\u7cfb\u7edf Question Answering How to represent words? \u5728\u6240\u6709\u7684NLP\u4efb\u52a1\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u4e5f\u662f\u53ef\u4ee5\u8bf4\u662f\u6700\u91cd\u8981\u7684\u5171\u540c\u70b9\u662f\u6211\u4eec\u5982\u4f55\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u4efb\u4f55\u6a21\u578b\u7684\u8f93\u5165\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u4e0d\u4f1a\u8ba8\u8bba\u65e9\u671f\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u4f5c\u662f\u5c06\u5355\u8bcd\u89c6\u4e3a\u539f\u5b50\u7b26\u53f7 atomic symbols\u3002\u4e3a\u4e86\u8ba9\u5927\u591a\u6570\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u80fd\u6709\u66f4\u597d\u7684\u8868\u73b0\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u4e86\u89e3\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u548c\u4e0d\u540c\u3002\u6709\u4e86\u8bcd\u5411\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5c06\u5176\u7f16\u7801\u5230\u5411\u91cf\u672c\u8eab\u4e2d\u3002 Word Vectors \u00b6 \u4f7f\u7528\u8bcd\u5411\u91cf\u7f16\u7801\u5355\u8bcd\uff0cN\u7ef4\u7a7a\u95f4\u8db3\u591f\u6211\u4eec\u7f16\u7801\u8bed\u8a00\u7684\u6240\u6709\u8bed\u4e49\uff0c\u6bcf\u4e00\u7ef4\u5ea6\u90fd\u4f1a\u7f16\u7801\u4e00\u4e9b\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u4f20\u9012\u7684\u4fe1\u606f\u3002\u7b80\u5355\u7684one-hot\u5411\u91cf\u65e0\u6cd5\u7ed9\u51fa\u5355\u8bcd\u95f4\u7684\u76f8\u4f3c\u6027\uff0c\u6211\u4eec\u9700\u8981\u5c06\u7ef4\u5ea6 \\(|V|\\) \u51cf\u5c11\u81f3\u4e00\u4e2a\u4f4e\u7eac\u5ea6\u7684\u5b50\u7a7a\u95f4\uff0c\u6765\u83b7\u5f97\u7a20\u5bc6\u7684\u8bcd\u5411\u91cf\uff0c\u83b7\u5f97\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb\u3002 SVD Based Methods \u00b6 \u8fd9\u662f\u4e00\u7c7b\u627e\u5230\u8bcd\u5d4c\u5165\u7684\u65b9\u6cd5\uff08\u5373\u8bcd\u5411\u91cf\uff09\uff0c\u6211\u4eec\u9996\u5148\u904d\u5386\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u636e\u96c6\u548c\u7edf\u8ba1\u8bcd\u7684\u5171\u73b0\u8ba1\u6570\u77e9\u9635 X\uff0c\u7136\u540e\u5bf9\u77e9\u9635 X \u8fdb\u884c SVD \u5206\u89e3\u5f97\u5230 \\(USV^{T}\\) \u3002\u7136\u540e\u6211\u4eec\u4f7f\u7528 U \u7684\u884c\u6765\u4f5c\u4e3a\u5b57\u5178\u4e2d\u6240\u6709\u8bcd\u7684\u8bcd\u5411\u91cf\u3002\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0b\u77e9\u9635 X \u7684\u51e0\u79cd\u9009\u62e9\u3002 Word-Document Matrix \u6211\u4eec\u6700\u521d\u7684\u5c1d\u8bd5\uff0c\u6211\u4eec\u731c\u60f3\u76f8\u5173\u8fde\u7684\u5355\u8bcd\u5728\u540c\u4e00\u4e2a\u6587\u6863\u4e2d\u4f1a\u7ecf\u5e38\u51fa\u73b0\u3002\u4f8b\u5982\uff0c\u201cbanks\u201d \u201cbonds\u201d \u201cstocks\u201d \u201cmoneys\u201d\u7b49\u7b49\uff0c\u51fa\u73b0\u5728\u4e00\u8d77\u7684\u6982\u7387\u4f1a\u6bd4\u8f83\u9ad8\u3002\u4f46\u662f\u201cbanks\u201d \u201coctopus\u201d \u201cbanana\u201d \u201chockey\u201d\u4e0d\u5927\u53ef\u80fd\u4f1a\u8fde\u7eed\u5730\u51fa\u73b0\u3002\u6211\u4eec\u6839\u636e\u8fd9\u4e2a\u60c5\u51b5\u6765\u5efa\u7acb\u4e00\u4e2a Word-Document \u77e9\u9635\uff0c \\(X\\) \u662f\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\u6784\u5efa\uff1a\u904d\u5386\u6570\u4ebf\u7684\u6587\u6863\u548c\u5f53\u8bcd \\(i\\) \u51fa\u73b0\u5728\u6587\u6863 \\(j\\) \uff0c\u6211\u4eec\u5bf9 \\(X_{ij}\\) \u52a0\u4e00\u3002\u8fd9\u663e\u7136\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u77e9\u9635 \\(\\mathbb{R}^{|V|\\times M}\\) \uff0c\u5b83\u7684\u89c4\u6a21\u662f\u548c\u6587\u6863\u6570\u91cf \\(M\\) \u6210\u6b63\u6bd4\u5173\u7cfb\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u597d\u7684\u65b9\u6cd5\u3002 Window based Co-occurrence Matrix \u540c\u6837\u7684\u903b\u8f91\u4e5f\u9002\u7528\u4e8e\u8fd9\u91cc\uff0c\u4f46\u662f\u77e9\u9635 \\(X\\) \u5b58\u50a8\u5355\u8bcd\u7684\u5171\u73b0\uff0c\u4ece\u800c\u6210\u4e3a\u4e00\u4e2a\u5173\u8054\u77e9\u9635\u3002\u5728\u6b64\u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u7279\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u3002\u6211\u4eec\u6309\u7167\u8fd9\u4e2a\u65b9\u6cd5\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u8fdb\u884c\u7edf\u8ba1\u3002 \u751f\u6210\u7ef4\u5ea6\u4e3a \\(|V| \\times|V|\\) \u7684\u5171\u73b0\u77e9\u9635 \\(X\\) \u5728 \\(X\\) \u4e0a\u5e94\u7528 SVD \u4ece\u800c\u5f97\u5230 \\(X = {USV}^T\\) \u9009\u62e9 \\(U\\) \u524d \\(k\\) \u884c \u5f97\u5230 \\(k\\) \u7ef4\u7684\u8bcd\u5411\u91cf \\(\\frac{\\sum_{i=1}^{k} \\sigma_{i}}{\\sum_{i=1}^{|V|} \\sigma_{i}}\\) \u8868\u793a\u7b2c\u4e00\u4e2ak\u7ef4\u6355\u83b7\u7684\u65b9\u5dee\u91cf Applying SVD to the cooccurrence matrix \u6211\u4eec\u5bf9\u77e9\u9635 \\(X\\) \u4f7f\u7528 SVD\uff0c\u89c2\u5bdf\u5947\u5f02\u503c\uff08\u77e9\u9635 S \u4e0a\u5bf9\u89d2\u7ebf\u4e0a\u5143\u7d20\uff09\uff0c\u6839\u636e\u671f\u671b\u7684\u6355\u83b7\u65b9\u5dee\u767e\u5206\u6bd4\u622a\u65ad\uff0c\u7559\u4e0b\u524d k \u4e2a\u5143\u7d20\uff1a \u7136\u540e\u53d6\u5b50\u77e9\u9635 \\(U_{1:|V|, 1:k}\\) \u4f5c\u4e3a\u8bcd\u5d4c\u5165\u77e9\u9635\u3002\u8fd9\u5c31\u7ed9\u51fa\u4e86\u8bcd\u6c47\u8868\u4e2d\u6bcf\u4e2a\u8bcd\u7684 k \u7ef4\u8868\u793a \u5bf9\u77e9\u9635 \\(X\\) \u4f7f\u7528SVD \u901a\u8fc7\u9009\u62e9\u524d k \u4e2a\u5947\u5f02\u5411\u91cf\u6765\u964d\u4f4e\u7ef4\u5ea6 \u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8db3\u591f\u7684\u8bcd\u5411\u91cf\u6765\u7f16\u7801\u8bed\u4e49\u548c\u53e5\u6cd5(part of speech)\u4fe1\u606f\uff0c\u4f46\u4f34\u968f\u8bb8\u591a\u5176\u4ed6\u95ee\u9898 \u77e9\u9635\u7684\u7ef4\u5ea6\u4f1a\u7ecf\u5e38\u53d1\u751f\u6539\u53d8\uff08\u7ecf\u5e38\u589e\u52a0\u65b0\u7684\u5355\u8bcd\u548c\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u4f1a\u6539\u53d8\uff09\u3002 \u77e9\u9635\u4f1a\u975e\u5e38\u7684\u7a00\u758f\uff0c\u56e0\u4e3a\u5f88\u591a\u8bcd\u4e0d\u4f1a\u5171\u73b0\u3002 \u77e9\u9635\u7ef4\u5ea6\u4e00\u822c\u4f1a\u975e\u5e38\u9ad8 \\(\\approx 10^{6}\\times 10^{6}\\) \u57fa\u4e8e SVD \u7684\u65b9\u6cd5\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5f88\u9ad8 ( \\(m\u00d7n\\) \u77e9\u9635\u7684\u8ba1\u7b97\u6210\u672c\u662f \\(O({mn}^2)\\) )\uff0c\u5e76\u4e14\u5f88\u96be\u5408\u5e76\u65b0\u5355\u8bcd\u6216\u6587\u6863 \u9700\u8981\u5728 X \u4e0a\u52a0\u5165\u4e00\u4e9b\u6280\u5de7\u5904\u7406\u6765\u89e3\u51b3\u8bcd\u9891\u7684\u6781\u5267\u7684\u4e0d\u5e73\u8861 \u7136\u800c\uff0c\u57fa\u4e8e\u8ba1\u6570\u7684\u65b9\u6cd5\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528\u7edf\u8ba1\u91cf \u5bf9\u4e0a\u8ff0\u8ba8\u8bba\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u5b58\u5728\u4ee5\u4e0b\u7684\u89e3\u51b3\u65b9\u6cd5\uff1a \u5ffd\u7565\u529f\u80fd\u8bcd\uff0c\u4f8b\u5982 \u201cthe\u201d\uff0c\u201che\u201d\uff0c\u201chas\u201d \u7b49\u7b49\u3002 \u4f7f\u7528 ramp window\uff0c\u5373\u6839\u636e\u6587\u6863\u4e2d\u5355\u8bcd\u4e4b\u95f4\u7684\u8ddd\u79bb\u5bf9\u5171\u73b0\u8ba1\u6570\u8fdb\u884c\u52a0\u6743 \u4f7f\u7528\u76ae\u5c14\u900a\u76f8\u5173\u7cfb\u6570\u5e76\u5c06\u8d1f\u8ba1\u6570\u8bbe\u7f6e\u4e3a0\uff0c\u800c\u4e0d\u662f\u53ea\u4f7f\u7528\u539f\u59cb\u8ba1\u6570 \u6b63\u5982\u6211\u4eec\u5728\u4e0b\u4e00\u8282\u4e2d\u770b\u5230\u7684\uff0c\u57fa\u4e8e\u8fed\u4ee3\u7684\u65b9\u6cd5\u4ee5\u4e00\u79cd\u4f18\u96c5\u5f97\u591a\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u5927\u90e8\u5206\u4e0a\u8ff0\u95ee\u9898\u3002 Iteration Based Methods - Word2vec \u00b6 \u8fd9\u91cc\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e2a\u65b0\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u80fd\u591f\u4e00\u6b21\u5b66\u4e60\u4e00\u4e2a\u8fed\u4ee3\uff0c\u5e76\u6700\u7ec8\u80fd\u591f\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\u7684\u6982\u7387\u8fdb\u884c\u7f16\u7801\uff0c\u800c\u4e0d\u662f\u8ba1\u7b97\u548c\u5b58\u50a8\u4e00\u4e9b\u5927\u578b\u6570\u636e\u96c6(\u53ef\u80fd\u662f\u6570\u5341\u4ebf\u4e2a\u53e5\u5b50)\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u8fd9\u4e2a\u60f3\u6cd5\u662f\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u7684\u53c2\u6570\u5c31\u662f\u8bcd\u5411\u91cf\u3002\u7136\u540e\u6839\u636e\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u6bcf\u6b21\u6a21\u578b\u7684\u8fed\u4ee3\u8ba1\u7b97\u8bef\u5dee\uff0c\u5e76\u9075\u5faa\u4e00\u4e9b\u66f4\u65b0\u89c4\u5219\uff0c\u8be5\u89c4\u5219\u5177\u6709\u60e9\u7f5a\u9020\u6210\u9519\u8bef\u7684\u6a21\u578b\u53c2\u6570\u7684\u4f5c\u7528\uff0c\u4ece\u800c\u53ef\u4ee5\u5b66\u4e60\u5230\u8bcd\u5411\u91cf\u3002\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8ffd\u6eaf\u5230 1986\u5e74\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u65b9\u6cd5\u4e3a\u201c\u53cd\u5411\u4f20\u64ad\u201d\uff0c\u6a21\u578b\u548c\u4efb\u52a1\u8d8a\u7b80\u5355\uff0c\u8bad\u7ec3\u5b83\u7684\u901f\u5ea6\u5c31\u8d8a\u5feb\u3002 \u57fa\u4e8e\u8fed\u4ee3\u7684\u65b9\u6cd5\u4e00\u6b21\u6355\u83b7\u4e00\u4e2a\u5355\u8bcd\u7684\u5171\u73b0\u60c5\u51b5\uff0c\u800c\u4e0d\u662f\u50cfSVD\u65b9\u6cd5\u90a3\u6837\u76f4\u63a5\u6355\u83b7\u6240\u6709\u7684\u5171\u73b0\u8ba1\u6570\u3002 \u5df2\u7ecf\u5f88\u591a\u4eba\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u6d4b\u8bd5\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u3002[Collobert et al., 2011] \u8bbe\u8ba1\u7684\u6a21\u578b\u9996\u5148\u5c06\u6bcf\u4e2a\u5355\u8bcd\u8f6c\u6362\u4e3a\u5411\u91cf\u3002\u5bf9\u6bcf\u4e2a\u7279\u5b9a\u7684\u4efb\u52a1\uff08\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u8bcd\u6027\u6807\u6ce8\u7b49\u7b49\uff09\uff0c\u4ed6\u4eec\u4e0d\u4ec5\u8bad\u7ec3\u6a21\u578b\u7684\u53c2\u6570\uff0c\u540c\u65f6\u4e5f\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\uff0c\u8ba1\u7b97\u51fa\u4e86\u975e\u5e38\u597d\u7684\u8bcd\u5411\u91cf\u7684\u540c\u65f6\u53d6\u5f97\u4e86\u5f88\u597d\u7684\u6027\u80fd\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e2a\u975e\u5e38\u6709\u6548\u7684\u6982\u7387\u6a21\u578b\uff1aWord2vec\u3002Word2vec \u662f\u4e00\u4e2a\u8f6f\u4ef6\u5305\u5b9e\u9645\u4e0a\u5305\u542b\uff1a \u4e24\u4e2a\u7b97\u6cd5 \uff1acontinuous bag-of-words\uff08CBOW\uff09\u548c skip-gram\u3002CBOW \u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u6765\u9884\u6d4b\u8be5\u8bcd\u7684\u8bcd\u5411\u91cf\u3002skip-gram \u5219\u76f8\u53cd\uff0c\u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u9884\u6d4b\u5468\u56f4\u4e0a\u4e0b\u6587\u7684\u8bcd\u7684\u6982\u7387\u5206\u5e03\u3002 \u4e24\u4e2a\u8bad\u7ec3\u65b9\u6cd5 \uff1anegative sampling \u548c hierarchical softmax\u3002Negative sampling \u901a\u8fc7\u62bd\u53d6\u8d1f\u6837\u672c\u6765\u5b9a\u4e49\u76ee\u6807\uff0chierarchical softmax \u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u6709\u6548\u7684\u6811\u7ed3\u6784\u6765\u8ba1\u7b97\u6240\u6709\u8bcd\u7684\u6982\u7387\u6765\u5b9a\u4e49\u76ee\u6807\u3002 Language Models (Unigrams, Bigrams, etc.) \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u6765\u4e3a\u4e00\u7cfb\u5217\u7684\u5355\u8bcd\u5206\u914d\u6982\u7387\u3002\u6211\u4eec\u4ece\u4e00\u4e2a\u4f8b\u5b50\u5f00\u59cb\uff1a \u201cThe cat jumped over the puddle\u201d \u4e00\u4e2a\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f1a\u7ed9\u8fd9\u4e2a\u53e5\u5b50\u5f88\u9ad8\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5728\u53e5\u6cd5\u548c\u8bed\u4e49\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168\u6709\u6548\u7684\u53e5\u5b50\u3002\u76f8\u4f3c\u5730\uff0c\u53e5\u5b50\u201cstock boil fish is toy\u201d\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u3002\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u79f0\u4e3a\u5bf9\u7ed9\u5b9a n \u4e2a\u8bcd\u7684\u5e8f\u5217\u7684\u6982\u7387\u662f\uff1a $$ P(w_{1}, w_{2}, \\ldots, w_{n}) $$ \u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u5143\u8bed\u8a00\u6a21\u578b\u65b9\u6cd5( Unigram model )\uff0c\u5047\u8bbe\u5355\u8bcd\u7684\u51fa\u73b0\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u4ece\u800c\u5206\u89e3\u6982\u7387 $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=1}^{n} P\\left(w_{i}\\right) $$ \u4f46\u662f\u6211\u4eec\u77e5\u9053\u8fd9\u662f\u4e0d\u5927\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u524d\u9762\u7684\u5355\u8bcd\u5e8f\u5217\u7684\u3002\u5982\u679c\u4f7f\u7528\u4e0a\u8ff0\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u5177\u6709\u5f88\u9ad8\u7684\u6982\u7387\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u5e8f\u5217\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u5e8f\u5217\u4e2d\u7684\u5355\u8bcd\u548c\u5176\u65c1\u8fb9\u7684\u5355\u8bcd\u7684\u6210\u5bf9\u6982\u7387\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a bigram \u6a21\u578b\uff1a $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=2}^{n} P\\left(w_{i} | w_{i-1}\\right) $$ \u4f46\u662f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u7b80\u5355\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u5173\u5fc3\u4e00\u5bf9\u90bb\u8fd1\u7684\u5355\u8bcd\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u6574\u4e2a\u53e5\u5b50\u6765\u8003\u8651\u3002\u4f46\u662f\u6211\u4eec\u5c06\u770b\u5230\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u6709\u663e\u8457\u7684\u63d0\u5347\u3002\u8003\u8651\u5728\u8bcd-\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\uff0c\u5171\u73b0\u7a97\u53e3\u4e3a 1\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u80fd\u5f97\u5230\u8fd9\u6837\u7684\u6210\u5bf9\u7684\u6982\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u53c8\u9700\u8981\u8ba1\u7b97\u548c\u5b58\u50a8\u5927\u91cf\u6570\u636e\u96c6\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u7406\u89e3\u4e86\u5982\u4f55\u8003\u8651\u5177\u6709\u6982\u7387\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u8ba9\u6211\u4eec\u89c2\u5bdf\u4e00\u4e9b\u80fd\u591f\u5b66\u4e60\u8fd9\u4e9b\u6982\u7387\u7684\u793a\u4f8b\u6a21\u578b\u3002 Continuous Bag of Words Model (CBOW) \u8fd9\u4e00\u65b9\u6cd5\u662f\u628a {\"The\",\"cat\",\"over\",\"the\",\"puddle\"} \u4f5c\u4e3a\u4e0a\u4e0b\u6587\uff0c\u5e0c\u671b\u4ece\u8fd9\u4e9b\u8bcd\u4e2d\u80fd\u591f\u9884\u6d4b\u6216\u8005\u751f\u6210\u4e2d\u5fc3\u8bcd\u201cjumped\u201d\u3002\u8fd9\u6837\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e4b\u4e3a continuous bag-of-words\uff08CBOW\uff09\u6a21\u578b\u3002 \u5b83\u662f\u4ece\u4e0a\u4e0b\u6587\u4e2d\u9884\u6d4b\u4e2d\u5fc3\u8bcd\u7684\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u5e0c\u671b\u5b66\u4e60\u4e24\u4e2a\u5411\u91cf \\(v\\) (\u8f93\u5165\u5411\u91cf) \u5f53\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d \\(u\\) (\u8f93\u51fa\u5411\u91cf) \u5f53\u8bcd\u662f\u4e2d\u5fc3\u8bcd \u9996\u5148\u6211\u4eec\u8bbe\u5b9a\u5df2\u77e5\u53c2\u6570\u3002\u4ee4\u6211\u4eec\u6a21\u578b\u7684\u5df2\u77e5\u53c2\u6570\u662f one-hot \u5f62\u5f0f\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\u6216\u8005\u4e0a\u4e0b\u6587\u6211\u4eec\u7528 \\(x^{(c)}\\) \u8868\u793a\uff0c\u8f93\u51fa\u7528 \\(y^{(c)}\\) \u8868\u793a\u3002\u5728 CBOW \u6a21\u578b\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\uff0c\u56e0\u6b64\u6211\u4eec\u628a y \u79f0\u4e3a\u662f\u5df2\u77e5\u4e2d\u5fc3\u8bcd\u7684\u7684 one-hot \u5411\u91cf\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5b9a\u4e49\u6a21\u578b\u7684\u672a\u77e5\u53c2\u6570\u3002 \u9996\u5148\u6211\u4eec\u5bf9 CBOW \u6a21\u578b\u4f5c\u51fa\u4ee5\u4e0b\u5b9a\u4e49 \\(w_{i}\\) \uff1a\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u5355\u8bcd \\(i\\) \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \uff1a\u8f93\u5165\u8bcd\u77e9\u9635 \\(v_{i} \uff1a \\mathcal{V}\\) \u7684\u7b2c i \u5217\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u5165\u5411\u91cf\u8868\u793a \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \uff1a\u8f93\u51fa\u8bcd\u77e9\u9635 \\(u_{i} \uff1a \\mathcal{U}\\) \u7684\u7b2c i \u884c\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u51fa\u5411\u91cf\u8868\u793a \u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u77e9\u9635\uff0c \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \u548c \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \u3002\u5176\u4e2d n \u662f\u5d4c\u5165\u7a7a\u95f4\u7684\u4efb\u610f\u7ef4\u5ea6\u5927\u5c0f\u3002 \\(\\mathcal{V}\\) \u662f\u8f93\u5165\u8bcd\u77e9\u9635\uff0c\u4f7f\u5f97\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{V}\\) \u7684\u7b2c i \u5217\u662f\u8bcd \\(w_{i}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49\u8fd9\u4e2a \\(n \\times 1\\) \u7684\u5411\u91cf\u4e3a \\(v_{i}\\) \u3002\u76f8\u4f3c\u5730\uff0c \\(\\mathcal{U}\\) \u662f\u8f93\u51fa\u8bcd\u77e9\u9635\u3002\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{U}\\) \u7684\u7b2c j \u884c\u662f\u8bcd \\(w_{j}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49 \\(\\mathcal{U}\\) \u7684\u8fd9\u884c\u4e3a \\(u_{j}\\) \u3002\u6ce8\u610f\u5b9e\u9645\u4e0a\u5bf9\u6bcf\u4e2a\u8bcd \\(w_{i}\\) \u6211\u4eec\u9700\u8981\u5b66\u4e60\u4e24\u4e2a\u8bcd\u5411\u91cf\uff08\u5373\u8f93\u5165\u8bcd\u5411\u91cf \\(v_{i}\\) \u548c\u8f93\u51fa\u8bcd\u5411\u91cf \\(u_{i}\\) \uff09\u3002 \u6211\u4eec\u5c06\u8fd9\u4e2a\u6a21\u578b\u5206\u89e3\u4e3a\u4ee5\u4e0b\u6b65\u9aa4 \u6211\u4eec\u4e3a\u5927\u5c0f\u4e3a m \u7684\u8f93\u5165\u4e0a\u4e0b\u6587\uff0c\u751f\u6210 one-hot \u8bcd\u5411\u91cf \\( \\((x^{(c-m)},...,x^{(c-1)},x^{(c+1)},...,x^{(c+m)}\\in \\mathbb{R}^{|V|})\\) \\) \u6211\u4eec\u4ece\u4e0a\u4e0b\u6587 \\((v_{c-m}=\\mathcal{V}x^{(c-m)},v_{c-m+1}=\\mathcal{V}x^{(c-m+1)},...,v_{c+m}=\\mathcal{V}x^{(c+m)}\\in \\mathbb{R}^{n})\\) \u5f97\u5230\u5d4c\u5165\u8bcd\u5411\u91cf\u3002 \u5bf9\u4e0a\u8ff0\u7684\u5411\u91cf\u6c42\u5e73\u5747\u503c \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1+...+v_{c+m}}}{2m}\\in \\mathbb{R}^{n}\\) \u3002 \u751f\u6210\u4e00\u4e2a\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}\\widehat{v}\\in \\mathbb{R}^{|V|}\\) \u3002\u5f53\u76f8\u4f3c\u5411\u91cf\u7684\u70b9\u79ef\u8d8a\u9ad8\uff0c\u5c31\u4f1a\u4ee4\u5230\u76f8\u4f3c\u7684\u8bcd\u66f4\u4e3a\u9760\u8fd1\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u9ad8\u7684\u5206\u6570\u3002\u5c06\u5206\u6570\u8f6c\u6362\u4e3a\u6982\u7387 \\(\\widehat{y}=softmax(z)\\in \\mathbb{R}^{|V|}\\) \u3002 \u8fd9\u91cc softmax \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u51fd\u6570\u3002\u5b83\u5c06\u4e00\u4e2a\u5411\u91cf\u8f6c\u6362\u4e3a\u53e6\u5916\u4e00\u4e2a\u5411\u91cf\uff0c\u5176\u4e2d\u8f6c\u6362\u540e\u7684\u5411\u91cf\u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u662f \\(\\frac{e^{\\widehat{y}_i}}{\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}}\\) \u3002\u56e0\u4e3a\u8be5\u51fd\u6570\u662f\u4e00\u4e2a\u6307\u6570\u51fd\u6570\uff0c\u6240\u4ee5\u503c\u4e00\u5b9a\u4e3a\u6b63\u6570\uff1b\u901a\u8fc7\u9664\u4ee5 \\(\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}\\) \u6765\u5f52\u4e00\u5316\u5411\u91cf\uff08\u4f7f\u5f97 \\(\\sum_{k=1}^{|V|}\\widehat{y}_k=1\\) \uff09\u5f97\u5230\u6982\u7387\u3002 \u6211\u4eec\u5e0c\u671b\u751f\u6210\u7684\u6982\u7387 \\(\\widehat{y} \\in \\mathbb{R}^{|V|}\\) \u4e0e\u5b9e\u9645\u7684\u6982\u7387 \\(y \\in \\mathbb{R}^{|V|}\\) \u5339\u914d\u3002\u4f7f\u5f97\u5176\u521a\u597d\u662f\u5b9e\u9645\u7684\u8bcd\u5c31\u662f\u8fd9\u4e2a one-hot \u5411\u91cf\u3002 \u4e0b\u56fe\u662f CBOW \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u5982\u679c\u6709 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u6211\u4eec\u5982\u4f55\u5b66\u4e60\u8fd9\u4e24\u4e2a\u77e9\u9635\u5462\uff1f\u8fd9\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u3002\u4e00\u822c\u6211\u4eec\u60f3\u4ece\u4e00\u4e9b\u771f\u5b9e\u7684\u6982\u7387\u4e2d\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\uff0c\u4fe1\u606f\u8bba\u63d0\u4f9b\u4e86\u4e00\u4e2a \u5ea6\u91cf\u4e24\u4e2a\u6982\u7387\u5206\u5e03\u7684\u8ddd\u79bb \u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4e00\u4e2a\u5e38\u89c1\u7684\u8ddd\u79bb/\u635f\u5931\u65b9\u6cd5\uff0c\u4ea4\u53c9\u71b5 \\(H(\\widehat{y}, y)\\) \u3002 \u5728\u79bb\u6563\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ea4\u53c9\u71b5\u53ef\u4ee5\u76f4\u89c2\u5730\u5f97\u51fa\u635f\u5931\u51fd\u6570\u7684\u516c\u5f0f $$ H(\\hat{y}, y)=-\\sum_{j=1}^{|V|} y_{j} \\log \\left(\\hat{y}_{j}\\right) $$ \u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0cy \u662f one-hot \u5411\u91cf\u3002\u56e0\u6b64\u4e0a\u9762\u7684\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a $$ H(\\widehat{y}, y)= - y_{j}\\,log(\\widehat{y}_{j}) $$ c \u662f\u6b63\u786e\u8bcd\u7684 one-hot \u5411\u91cf\u7684\u7d22\u5f15\u3002\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u6211\u4eec\u7684\u9884\u6d4b\u662f\u5b8c\u7f8e\u5e76\u4e14 \\(\\widehat{y}_{c}=1\\) \u7684\u60c5\u51b5\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97 \\(H(\\widehat{y}, y)=-1\\,log(1)=0\\) \u3002\u56e0\u6b64\uff0c\u5bf9\u4e00\u4e2a\u5b8c\u7f8e\u7684\u9884\u6d4b\uff0c\u6211\u4eec\u4e0d\u4f1a\u9762\u4e34\u4efb\u4f55\u60e9\u7f5a\u6216\u8005\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u76f8\u53cd\u7684\u60c5\u51b5\uff0c\u9884\u6d4b\u975e\u5e38\u5dee\u5e76\u4e14 \\(\\widehat{y}_{c}=0.01\\) \u3002\u548c\u524d\u9762\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u635f\u5931 \\(H(\\widehat{y}, y)=-1\\,log(0.01)=4.605\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u6982\u7387\u5206\u5e03\uff0c\u4ea4\u53c9\u71b5\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u8ddd\u79bb\u5ea6\u91cf\u3002\u56e0\u6b64\u6211\u4eec\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u516c\u5f0f\u4e3a\uff1a $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c} | w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m}\\right) \\ &=-\\log P\\left(u_{c} | \\hat{v}\\right) \\ &=-\\log \\frac{\\exp \\left(u_{c}^{T} \\hat{v}\\right)}{\\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right)} \\ &=-u_{c}^{T} \\hat{v}+\\log \\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right) \\end{aligned} $$ \u6211\u4eec\u4f7f\u7528 SGD \u6765\u66f4\u65b0\u6240\u6709\u76f8\u5173\u7684\u8bcd\u5411\u91cf \\(u_{c}\\) \u548c \\(v_{j}\\) \u3002SGD \u5bf9\u4e00\u4e2a\u7a97\u53e3\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u53c2\u6570\uff1a \\[ \\begin{array}{l}{\\mathcal{U}_{\\text {new}} \\leftarrow \\mathcal{U}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{U}} J} \\\\ {\\mathcal{V}_{\\text {old}} \\leftarrow \\mathcal{V}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{V}} J}\\end{array} \\] Skip-Gram Model Skip-Gram\u6a21\u578b\u4e0eCBOW\u5927\u4f53\u76f8\u540c\uff0c\u4f46\u662f\u4ea4\u6362\u4e86\u6211\u4eec\u7684 x \u548c y\uff0c\u5373 CBOW \u4e2d\u7684 x \u73b0\u5728\u662f y\uff0cy \u73b0\u5728\u662f x\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\uff08\u4e2d\u5fc3\u8bcd\uff09\u6211\u4eec\u8868\u793a\u4e3a x\uff0c\u8f93\u51fa\u5411\u91cf\u4e3a \\(y^{(j)}\\) \u3002\u6211\u4eec\u5b9a\u4e49\u7684 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \u662f\u548c CBOW \u4e00\u6837\u7684\u3002 \u751f\u6210\u4e2d\u5fc3\u8bcd\u7684 one-hot \u5411\u91cf \\(x\\in \\mathbb{R}^{|V|}\\) \u6211\u4eec\u5bf9\u4e2d\u5fc3\u8bcd \\(v_{c}=\\mathcal{V}x\\in \\mathbb{R}^{|V|}\\) \u5f97\u5230\u8bcd\u5d4c\u5165\u5411\u91cf \u751f\u6210\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}v_{c}\\) \u5c06\u5206\u6570\u5411\u91cf\u8f6c\u5316\u4e3a\u6982\u7387\uff0c \\(\\widehat{y}=softmax(z)\\) \u6ce8\u610f \\(\\widehat{y}_{c-m},...,\\widehat{y}_{c-1},\\widehat{y}_{c+1},...,\\widehat{y}_{c+m}\\) \u662f\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u89c2\u5bdf\u5230\u7684\u6982\u7387 \u6211\u4eec\u5e0c\u671b\u6211\u4eec\u751f\u6210\u7684\u6982\u7387\u5411\u91cf\u5339\u914d\u771f\u5b9e\u6982\u7387 \\(y^{(c-m)},...,y^{(c-1)},y^{(c+1)},...,y^{(c+m)}\\) \uff0cone-hot \u5411\u91cf\u662f\u5b9e\u9645\u7684\u8f93\u51fa\u3002 \u4e0b\u56fe\u662f Skip-Gram \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u548c CBOW \u6a21\u578b\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u6765\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u3002\u4e0e CBOW \u6a21\u578b\u7684\u4e00\u4e2a\u4e3b\u8981\u7684\u4e0d\u540c\u662f\u6211\u4eec\u5f15\u7528\u4e86\u4e00\u4e2a\u6734\u7d20\u7684\u8d1d\u53f6\u65af\u5047\u8bbe\u6765\u62c6\u5206\u6982\u7387\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u5f3a\uff08\u6734\u7d20\uff09\u7684\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u3002\u6362\u800c\u8a00\u4e4b\uff0c \u7ed9\u5b9a\u4e2d\u5fc3\u8bcd\uff0c\u6240\u6709\u8f93\u51fa\u7684\u8bcd\u662f\u5b8c\u5168\u72ec\u7acb\u7684 \u3002(\u5373\u516c\u5f0f1\u81f32\u884c) $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(w_{c-m+j} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(u_{c-m+j} | v_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} \\frac{\\exp \\left(u_{c-m+j}^{T} v_{c}\\right)}{\\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right)} \\ &=-\\sum_{j=0, j \\neq m}^{2 m} u_{c-m+j}^{T} v_{c}+2 m \\log \\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right) \\end{aligned} $$ \u901a\u8fc7\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0e\u672a\u77e5\u53c2\u6570\u76f8\u5173\u7684\u68af\u5ea6\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u901a\u8fc7 SGD \u6765\u66f4\u65b0\u5b83\u4eec\u3002 \u6ce8\u610f $$ \\begin{aligned} J &=-\\sum_{j=0, j \\neq m}^{2 m} \\log P\\left(u_{c-m+j} | v_{c}\\right) \\ &=\\sum_{j=0, j \\neq m}^{2 m} H\\left(\\hat{y}, y_{c-m+j}\\right) \\end{aligned} $$ \u5176\u4e2d \\(H(\\widehat{y},y_{c-m+j})\\) \u662f\u5411\u91cf \\(\\widehat{y}\\) \u7684\u6982\u7387\u548c one-hot \u5411\u91cf \\(y_{c-m+j}\\) \u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5\u3002 \u53ea\u6709\u4e00\u4e2a\u6982\u7387\u5411\u91cf \\(\\hat{y}\\) \u662f\u88ab\u8ba1\u7b97\u7684\u3002Skip-Gram \u5bf9\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u5355\u8bcd\u4e00\u89c6\u540c\u4ec1\uff1a\u8be5\u6a21\u578b\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u7684\u6982\u7387\uff0c\u800c\u4e0e\u5b83\u5230\u4e2d\u5fc3\u5355\u8bcd\u7684\u8ddd\u79bb\u65e0\u5173\u3002 Negative Sampling \u8ba9\u6211\u4eec\u518d\u56de\u5230\u76ee\u6807\u51fd\u6570\u4e0a\u3002\u6ce8\u610f\u5bf9 \\(|V|\\) \u7684\u6c42\u548c\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u4efb\u4f55\u7684\u66f4\u65b0\u6216\u8005\u5bf9\u76ee\u6807\u51fd\u6570\u7684\u8bc4\u4f30\u90fd\u8981\u82b1\u8d39 \\(O(|V|)\\) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4e0d\u53bb\u76f4\u63a5\u8ba1\u7b97\uff0c\u800c\u662f\u53bb\u6c42\u8fd1\u4f3c\u503c\u3002 \u5728\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u7684\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u4e0d\u53bb\u904d\u5386\u6574\u4e2a\u8bcd\u6c47\u8868\uff0c\u800c\u4ec5\u4ec5\u662f\u62bd\u53d6\u4e00\u4e9b\u8d1f\u6837\u4f8b\u3002\u6211\u4eec\u5bf9\u566a\u58f0\u5206\u5e03 \\(P_{n}(w)\\) \u201c\u62bd\u6837\u201d\uff0c\u8fd9\u4e2a\u6982\u7387\u662f\u548c\u8bcd\u9891\u7684\u6392\u5e8f\u76f8\u5339\u914d\u7684\u3002\u4e3a\u52a0\u5f3a\u5bf9\u95ee\u9898\u7684\u8868\u8ff0\u4ee5\u7eb3\u5165\u8d1f\u62bd\u6837\uff0c\u6211\u4eec\u53ea\u9700\u66f4\u65b0\u5176 \u76ee\u6807\u51fd\u6570 \u68af\u5ea6 \u66f4\u65b0\u89c4\u5219 Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u3002\u867d\u7136\u8d1f\u91c7\u6837\u662f\u57fa\u4e8e Skip-Gram \u6a21\u578b\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u5bf9\u4e00\u4e2a\u4e0d\u540c\u7684\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u4f18\u5316\u3002 \u8003\u8651\u4e00\u5bf9\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd \\((w,c)\\) \u3002\u8fd9\u8bcd\u5bf9\u662f\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u96c6\u5417\uff1f\u6211\u4eec\u901a\u8fc7 \\(P(D=1\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002\u76f8\u5e94\u5730\uff0c \\(P(D=0\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u4e0d\u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5bf9 \\(P(D=1\\mid w,c)\\) \u7528 sigmoid \u51fd\u6570\u5efa\u6a21\uff1a \\[ P(D=1 | w, c, \\theta)=\\sigma\\left(v_{c}^{T} v_{w}\\right)=\\frac{1}{1+e^{\\left(-v_{c}^{T} v_{w}\\right)}} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=1\\mid w,c)\\) \uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u4e0d\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=0\\mid w,c)\\) \u3002\u6211\u4eec\u5bf9\u8fd9\u4e24\u4e2a\u6982\u7387\u91c7\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7684\u65b9\u6cd5\uff08\u8fd9\u91cc\u6211\u4eec\u628a \\(\\theta\\) \u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0c\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u662f \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff09 \\[ \\begin{aligned} \\theta &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}} P(D=0 | w, c, \\theta) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}}(1-P(D=1 | w, c, \\theta)) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\sum_{(w, c) \\in D} \\log P(D=1 | w, c, \\theta)+\\sum_{(w, c) \\in \\widetilde{D}} \\log (1-P(D=1 | w, c, \\theta)) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(1-\\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}\\right) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\end{aligned} \\] \u6ce8\u610f\u6700\u5927\u5316\u4f3c\u7136\u51fd\u6570\u7b49\u540c\u4e8e\u6700\u5c0f\u5316\u8d1f\u5bf9\u6570\u4f3c\u7136\uff1a \\[ J=-\\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}-\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\] \u6ce8\u610f \\(\\widetilde{D}\\) \u662f\u201c\u5047\u7684\u201d\u6216\u8005\u201c\u8d1f\u7684\u201d\u8bed\u6599\u3002\u4f8b\u5982\u6211\u4eec\u6709\u53e5\u5b50\u7c7b\u4f3c\u201cstock boil fish is toy\u201d\uff0c\u8fd9\u79cd\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u51fa\u73b0\u65f6\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u6599\u5e93\u4e2d\u968f\u673a\u62bd\u6837\u51fa\u8d1f\u6837\u4f8b \\(\\widetilde{D}\\) \u3002 \u5bf9\u4e8e Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(c\\) \u6765\u89c2\u5bdf\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd \\(c-m+j\\) \u7684\u65b0\u76ee\u6807\u51fd\u6570\u4e3a \\[ -\\log \\sigma\\left(u_{c-m+j}^{T} \\cdot v_{c}\\right)-\\sum_{k=1}^{K} \\log \\sigma\\left(-\\tilde{u}_{k}^{T} \\cdot v_{c}\\right) \\] \u5bf9 CBOW \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u5411\u91cf \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1}+...+v_{c+m}}{2m}\\) \u6765\u89c2\u5bdf\u4e2d\u5fc3\u8bcd \\(u_{c}\\) \u7684\u65b0\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ -log\\,\\sigma(u_{c}^{T}\\cdot \\widehat{v})-\\sum_{k=1}^{K}log\\,\\sigma(-\\widetilde{u}_{k}^{T}\\cdot \\widehat{v}) \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\{\\widetilde{u}_{k}\\mid k=1...K\\}\\) \u662f\u4ece \\(P_{n}(w)\\) \u4e2d\u62bd\u6837\u3002\u6709\u5f88\u591a\u5173\u4e8e\u5982\u4f55\u5f97\u5230\u6700\u597d\u8fd1\u4f3c\u7684\u8ba8\u8bba\uff0c\u4ece\u5b9e\u9645\u6548\u679c\u770b\u6765\u6700\u597d\u7684\u662f\u6307\u6570\u4e3a \u00be \u7684 Unigram \u6a21\u578b\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u662f \u00be\uff1f\u4e0b\u9762\u6709\u4e00\u4e9b\u4f8b\u5982\u53ef\u80fd\u8ba9\u4f60\u6709\u4e00\u4e9b\u76f4\u89c2\u7684\u4e86\u89e3\uff1a \\[ \\begin{eqnarray} is: 0.9^{3/4} &=& 0.92 \\nonumber \\\\ Constitution: 0.09^{3/4}&=& 0.16 \\nonumber \\\\ bombastic:0.01^{3/4}&=& 0.032 \\nonumber \\end{eqnarray} \\] \u201cBombastic\u201d\u73b0\u5728\u88ab\u62bd\u6837\u7684\u6982\u7387\u662f\u4e4b\u524d\u7684\u4e09\u500d\uff0c\u800c\u201cis\u201d\u53ea\u6bd4\u4e4b\u524d\u7684\u624d\u63d0\u9ad8\u4e86\u4e00\u70b9\u70b9\u3002 Hierarchical Softmax Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86 hierarchical softmax\uff0c\u76f8\u6bd4\u666e\u901a\u7684 softmax \u8fd9\u662f\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6cd5\u3002 \u5728\u5b9e\u9645\u4e2d\uff0chierarchical softmax \u5bf9\u4f4e\u9891\u8bcd\u5f80\u5f80\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u8d1f\u91c7\u6837\u5bf9\u9ad8\u9891\u8bcd\u548c\u8f83\u4f4e\u7ef4\u5ea6\u5411\u91cf\u8868\u73b0\u5f97\u66f4\u597d \u3002 Hierarchical softmax \u4f7f\u7528\u4e00\u4e2a\u4e8c\u53c9\u6811\u6765\u8868\u793a\u8bcd\u8868\u4e2d\u7684\u6240\u6709\u8bcd\u3002\u6811\u4e2d\u7684\u6bcf\u4e2a\u53f6\u7ed3\u70b9\u90fd\u662f\u4e00\u4e2a\u5355\u8bcd\uff0c\u800c\u4e14\u53ea\u6709\u4e00\u6761\u8def\u5f84\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u3002\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u6ca1\u6709\u8bcd\u7684\u8f93\u51fa\u8868\u793a\u3002\u76f8\u53cd\uff0c\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\uff08\u6839\u8282\u70b9\u548c\u53f6\u7ed3\u70b9\u9664\u5916\uff09\u4e0e\u6a21\u578b\u8981\u5b66\u4e60\u7684\u5411\u91cf\u76f8\u5173\u8054\u3002\u5355\u8bcd\u4f5c\u4e3a\u8f93\u51fa\u5355\u8bcd\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\u4ece\u6839\u968f\u673a\u6e38\u8d70\u5230\u5355\u8bcd\u6240\u5bf9\u5e94\u7684\u53f6\u7684\u6982\u7387\u3002\u8ba1\u7b97\u6210\u672c\u53d8\u4e3a \\(O(log (|V|))\\) \u800c\u4e0d\u662f \\(O(|V|)\\) \u3002 \u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5411\u91cf \\(w_{i}\\) \u7684\u4e0b\u7684\u5355\u8bcd \\(w\\) \u7684\u6982\u7387 \\(p(w\\mid w_{i})\\) \uff0c\u7b49\u4e8e\u4ece\u6839\u7ed3\u70b9\u5f00\u59cb\u5230\u5bf9\u5e94 w \u7684\u53f6\u7ed3\u70b9\u7ed3\u675f\u7684\u968f\u673a\u6f2b\u6b65\u6982\u7387\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6700\u5927\u7684\u4f18\u52bf\u662f\u8ba1\u7b97\u6982\u7387\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ec5\u4ec5\u662f \\(O(log(|V|))\\) \uff0c\u5bf9\u5e94\u7740\u8def\u5f84\u7684\u957f\u5ea6\u3002 \u4e0b\u56fe\u662f Hierarchical softmax \u7684\u4e8c\u53c9\u6811\u793a\u610f\u56fe \u8ba9\u6211\u4eec\u5f15\u5165\u4e00\u4e9b\u6982\u5ff5\u3002\u4ee4 \\(L(w)\\) \u4e3a\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9 \\(w\\) \u7684\u8def\u5f84\u4e2d\u8282\u70b9\u6570\u76ee\u3002\u4f8b\u5982\uff0c\u4e0a\u56fe\u4e2d\u7684 \\(L(w_{2})\\) \u4e3a 3\u3002\u6211\u4eec\u5b9a\u4e49 \\(n(w,i)\\) \u4e3a\u4e0e\u5411\u91cf \\(v_{n(w,i)}\\) \u76f8\u5173\u7684\u8def\u5f84\u4e0a\u7b2c \\(i\\) \u4e2a\u7ed3\u70b9\u3002\u56e0\u6b64 \\(n(w,1)\\) \u662f\u6839\u7ed3\u70b9\uff0c\u800c \\(n(w,L(w))\\) \u662f \\(w\\) \u7684\u7236\u8282\u70b9\u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9 \\(n\\) \uff0c\u6211\u4eec\u4efb\u610f\u9009\u53d6\u4e00\u4e2a\u5b83\u7684\u5b50\u8282\u70b9\uff0c\u5b9a\u4e49\u4e3a \\(ch(n)\\) \uff08\u4e00\u822c\u662f\u5de6\u8282\u70b9\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6982\u7387\u4e3a \\[ p\\left(w | w_{i}\\right)=\\prod_{j=1}^{L(w)-1} \\sigma\\left([n(w, j+1)=\\operatorname{ch}(n(w, j))] \\cdot v_{n(w, j)}^{T} v_{w_{i}}\\right) \\] \u5176\u4e2d \\[ [x]=\\left\\{\\begin{array}{ll}{1} & {\\text { if } x \\text { is true }} \\\\ {-1} & {\\text { otherwise }}\\end{array}\\right. \\] \u8fd9\u4e2a\u516c\u5f0f\u770b\u8d77\u6765\u975e\u5e38\u590d\u6742\uff0c\u8ba9\u6211\u4eec\u7ec6\u7ec6\u68b3\u7406\u4e00\u4e0b\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5c06\u6839\u636e\u4ece\u6839\u8282\u70b9 \\((n(w,1))\\) \u5230\u53f6\u8282\u70b9 \\((w)\\) \u7684\u8def\u5f84\u7684\u5f62\u72b6\u6765\u8ba1\u7b97\u76f8\u4e58\u7684\u9879\u3002\u5982\u679c\u6211\u4eec\u5047\u8bbe \\(ch(n)\\) \u4e00\u76f4\u90fd\u662f \\(n\\) \u7684\u5de6\u8282\u70b9\uff0c\u7136\u540e\u5f53\u8def\u5f84\u5f80\u5de6\u65f6 \\([n(w,j+1)=ch(n(w,j))]\\) \u7684\u503c\u8fd4\u56de 1\uff0c\u5f80\u53f3\u5219\u8fd4\u56de 0\u3002 \u6b64\u5916\uff0c \\([n(w,j+1)=ch(n(w,j))]\\) \u63d0\u4f9b\u4e86\u5f52\u4e00\u5316\u7684\u4f5c\u7528\u3002\u5728\u8282\u70b9 \\(n\\) \u5904\uff0c\u5982\u679c\u6211\u4eec\u5c06\u53bb\u5f80\u5de6\u548c\u53f3\u8282\u70b9\u7684\u6982\u7387\u76f8\u52a0\uff0c\u5bf9\u4e8e \\(v_{n}^{T}v_{w_{i}}\\) \u7684\u4efb\u4f55\u503c\u5219\u53ef\u4ee5\u68c0\u67e5\uff0c \\[ \\sigma\\left(v_{n}^{T} v_{w_{i}}\\right)+\\sigma\\left(-v_{n}^{T} v_{w_{i}}\\right)=1 \\] \u5f52\u4e00\u5316\u4e5f\u4fdd\u8bc1\u4e86 \\(\\sum_{w=1}^{|V|}P(w\\mid w_{i})=1\\) \uff0c\u548c\u5728\u666e\u901a\u7684 softmax \u662f\u4e00\u6837\u7684\u3002 \u6700\u540e\u6211\u4eec\u8ba1\u7b97\u70b9\u79ef\u6765\u6bd4\u8f83\u8f93\u5165\u5411\u91cf \\(v_{w_{i}}\\) \u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u5411\u91cf \\(v_{n(w,j)}^{T}\\) \u7684\u76f8\u4f3c\u5ea6\u3002\u4e0b\u9762\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u4f8b\u5b50\u3002\u4ee5\u4e0a\u56fe\u4e2d\u7684 \\(w_{2}\\) \u4e3a\u4f8b\uff0c\u4ece\u6839\u8282\u70b9\u8981\u7ecf\u8fc7\u4e24\u6b21\u5de6\u8fb9\u7684\u8fb9\u548c\u4e00\u6b21\u53f3\u8fb9\u7684\u8fb9\u624d\u5230\u8fbe \\(w_{2}\\) \uff0c\u56e0\u6b64 \\[ \\begin{aligned} p\\left(w_{2} | w_{i}\\right) &=p\\left(n\\left(w_{2}, 1\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 2\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 3\\right), \\text { right }\\right) \\\\ &=\\sigma\\left(v_{n\\left(w_{2}, 1\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(v_{n\\left(w_{2}, 2\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(-v_{n\\left(w_{2}, 3\\right)}^{T} v_{w_{i}}\\right) \\end{aligned} \\] \u6211\u4eec\u8bad\u7ec3\u6a21\u578b\u7684\u76ee\u6807\u662f\u6700\u5c0f\u5316\u8d1f\u7684\u5bf9\u6570\u4f3c\u7136 \\(-log\\,P(w\\mid w_{i})\\) \u3002\u4e0d\u662f\u66f4\u65b0\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u800c\u662f\u66f4\u65b0\u66f4\u65b0\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u8282\u70b9\u7684\u5411\u91cf\u3002 \u8be5\u65b9\u6cd5\u7684\u901f\u5ea6\u7531\u6784\u5efa\u4e8c\u53c9\u6811\u7684\u65b9\u5f0f\u786e\u5b9a\uff0c\u5e76\u5c06\u8bcd\u5206\u914d\u7ed9\u53f6\u8282\u70b9\u3002Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u4f7f\u7528\u7684\u662f\u54c8\u592b\u66fc\u6811\uff0c\u5728\u6811\u4e2d\u5206\u914d\u9ad8\u9891\u8bcd\u5230\u8f83\u77ed\u7684\u8def\u5f84\u3002 Gensim word vectors example \u00b6 Gensim\u63d0\u4f9b\u4e86\u5c06 Glove \u8f6c\u5316\u4e3aWord2Vec\u683c\u5f0f\u7684API\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86 most_similar , doesnt_match \u7b49API\u3002\u6211\u4eec\u53ef\u4ee5\u5bf9 most_similar \u8fdb\u884c\u5c01\u88c5\uff0c\u8f93\u51fa\u4e09\u5143\u7ec4\u7684\u7c7b\u6bd4\u7ed3\u679c model = KeyedVectors . load_word2vec_format ( word2vec_glove_file ) model . most_similar ( 'banana' ) def analogy ( x1 , x2 , y1 ): result = model . most_similar ( positive = [ y1 , x2 ], negative = [ x1 ]) return result [ 0 ][ 0 ] analogy ( 'japan' , 'japanese' , 'australia' ) model . doesnt_match ( \"breakfast cereal dinner lunch\" . split ())","title":"01 Introduction and Word Vectors"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#lecture-01-introduction-and-word-vectors","text":"Lecture Plan The course Human language and word meaning Word2vec introduction Word2vec objective function gradients Optimization basics Looking at word vectors","title":"Lecture 01 Introduction and Word Vectors"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#human-language-and-word-meaning","text":"\u4eba\u7c7b\u4e4b\u6240\u4ee5\u6bd4\u7c7b\u4eba\u733f\u66f4\u201c\u806a\u660e\u201d\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u6709\u8bed\u8a00\uff0c\u56e0\u6b64\u662f\u4e00\u4e2a\u4eba\u673a\u7f51\u7edc\uff0c\u5176\u4e2d\u4eba\u7c7b\u8bed\u8a00\u4f5c\u4e3a\u7f51\u7edc\u8bed\u8a00\u3002\u4eba\u7c7b\u8bed\u8a00\u5177\u6709 \u4fe1\u606f\u529f\u80fd \u548c \u793e\u4f1a\u529f\u80fd \u3002 \u636e\u4f30\u8ba1\uff0c\u4eba\u7c7b\u8bed\u8a00\u53ea\u6709\u5927\u7ea65000\u5e74\u7684\u77ed\u6682\u5386\u3002\u8bed\u8a00\u662f\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e3b\u8981\u539f\u56e0\u3002\u5199\u4f5c\u662f\u53e6\u4e00\u4ef6\u8ba9\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e8b\u60c5\u3002\u5b83\u662f\u4f7f\u77e5\u8bc6\u80fd\u591f\u5728\u7a7a\u95f4\u4e0a\u4f20\u9001\u5230\u4e16\u754c\u5404\u5730\uff0c\u5e76\u5728\u65f6\u95f4\u4e0a\u4f20\u9001\u7684\u4e00\u79cd\u5de5\u5177\u3002 \u4f46\u662f\uff0c\u76f8\u8f83\u4e8e\u5982\u4eca\u7684\u4e92\u8054\u7f51\u7684\u4f20\u64ad\u901f\u5ea6\u800c\u8a00\uff0c\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u79cd\u7f13\u6162\u7684\u8bed\u8a00\u3002\u7136\u800c\uff0c\u53ea\u9700\u4eba\u7c7b\u8bed\u8a00\u5f62\u5f0f\u7684\u51e0\u767e\u4f4d\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u6784\u5efa\u6574\u4e2a\u89c6\u89c9\u573a\u666f\u3002\u8fd9\u5c31\u662f\u81ea\u7136\u8bed\u8a00\u5982\u6b64\u8ff7\u4eba\u7684\u539f\u56e0\u3002 How do we represent the meaning of a word? meaning \u7528\u4e00\u4e2a\u8bcd\u3001\u8bcd\u7ec4\u7b49\u8868\u793a\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u4eba\u60f3\u7528\u8bed\u8a00\u3001\u7b26\u53f7\u7b49\u6765\u8868\u8fbe\u7684\u60f3\u6cd5\u3002 \u8868\u8fbe\u5728\u4f5c\u54c1\u3001\u827a\u672f\u7b49\u65b9\u9762\u7684\u601d\u60f3 \u7406\u89e3\u610f\u4e49\u7684\u6700\u666e\u904d\u7684\u8bed\u8a00\u65b9\u5f0f( linguistic way ) : \u8bed\u8a00\u7b26\u53f7\u4e0e\u8bed\u8a00\u7b26\u53f7\u7684\u610f\u4e49\u7684\u8f6c\u5316 $$ \\boxed{\\text{signifier(symbol)}\\Leftrightarrow \\text{signified(idea or thing)}} \\ = \\textbf{denotational semantics} $$ denotational semantics \u6307\u79f0\u8bed\u4e49 How do we have usable meaning in a computer? WordNet , \u4e00\u4e2a\u5305\u542b\u540c\u4e49\u8bcd\u96c6\u548c\u4e0a\u4f4d\u8bcd(\u201cis a\u201d\u5173\u7cfb) synonym sets and hypernyms \u7684\u5217\u8868\u7684\u8f9e\u5178 Problems with resources like WordNet \u4f5c\u4e3a\u4e00\u4e2a\u8d44\u6e90\u5f88\u597d\uff0c\u4f46\u5ffd\u7565\u4e86\u7ec6\u5fae\u5dee\u522b \u4f8b\u5982\u201cproficient\u201d\u88ab\u5217\u4e3a\u201cgood\u201d\u7684\u540c\u4e49\u8bcd\u3002\u8fd9\u53ea\u5728\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4e2d\u662f\u6b63\u786e\u7684\u3002 \u7f3a\u5c11\u5355\u8bcd\u7684\u65b0\u542b\u4e49 \u96be\u4ee5\u6301\u7eed\u66f4\u65b0 \u4f8b\u5982 wicked, badass, nifty, wizard, genius, ninja, bombest \u4e3b\u89c2\u7684 \u9700\u8981\u4eba\u7c7b\u52b3\u52a8\u6765\u521b\u9020\u548c\u8c03\u6574 \u65e0\u6cd5\u8ba1\u7b97\u5355\u8bcd\u76f8\u4f3c\u5ea6 Representing words as discrete symbols \u5728\u4f20\u7edf\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u628a\u8bcd\u8bed\u770b\u4f5c\u79bb\u6563\u7684\u7b26\u53f7: hotel, conference, motel - a localist representation\u3002\u5355\u8bcd\u53ef\u4ee5\u901a\u8fc7\u72ec\u70ed\u5411\u91cf(one-hot vectors\uff0c\u53ea\u6709\u4e00\u4e2a1\uff0c\u5176\u4f59\u5747\u4e3a0\u7684\u7a00\u758f\u5411\u91cf) \u3002\u5411\u91cf\u7ef4\u5ea6=\u8bcd\u6c47\u91cf(\u5982500,000)\u3002 \\[ motel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0] \\\\ hotel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0] \\] Problem with words as discrete symbols \u6240\u6709\u5411\u91cf\u662f\u6b63\u4ea4\u7684\u3002\u5bf9\u4e8e\u72ec\u70ed\u5411\u91cf\uff0c\u6ca1\u6709\u5173\u4e8e\u76f8\u4f3c\u6027\u6982\u5ff5\uff0c\u5e76\u4e14\u5411\u91cf\u7ef4\u5ea6\u8fc7\u5927\u3002 Solutions \u4f7f\u7528\u7c7b\u4f3c WordNet \u7684\u5de5\u5177\u4e2d\u7684\u5217\u8868\uff0c\u83b7\u5f97\u76f8\u4f3c\u5ea6\uff0c\u4f46\u4f1a\u56e0\u4e0d\u591f\u5b8c\u6574\u800c\u5931\u8d25 \u5b66\u4e60\u5728\u5411\u91cf\u672c\u8eab\u4e2d\u7f16\u7801\u76f8\u4f3c\u6027 Representing words by their context Distributional semantics \uff1a\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\u662f\u7531\u7ecf\u5e38\u51fa\u73b0\u5728\u5b83\u9644\u8fd1\u7684\u5355\u8bcd\u7ed9\u51fa\u7684 \u201cYou shall know a word by the company it keeps\u201d (J. R. Firth 1957: 11) \u73b0\u4ee3\u7edf\u8ba1NLP\u6700\u6210\u529f\u7684\u7406\u5ff5\u4e4b\u4e00 \u6709\u70b9\u7269\u4ee5\u7c7b\u805a\uff0c\u4eba\u4ee5\u7fa4\u5206\u7684\u611f\u89c9 \u5f53\u4e00\u4e2a\u5355\u8bcd \\(w\\) \u51fa\u73b0\u5728\u6587\u672c\u4e2d\u65f6\uff0c\u5b83\u7684\u4e0a\u4e0b\u6587\u662f\u51fa\u73b0\u5728\u5176\u9644\u8fd1\u7684\u4e00\u7ec4\u5355\u8bcd(\u5728\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d)\u3002 \u4f7f\u7528 \\(w\\) \u7684\u8bb8\u591a\u4e0a\u4e0b\u6587\u6765\u6784\u5efa \\(w\\) \u7684\u8868\u793a","title":"Human language and word meaning"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#word2vec-introduction","text":"\u6211\u4eec\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u6784\u5efa\u4e00\u4e2a \u5bc6\u96c6 \u7684\u5411\u91cf\uff0c\u4f7f\u5176\u4e0e\u51fa\u73b0\u5728\u76f8\u4f3c\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u76f8\u4f3c \u8bcd\u5411\u91cf word vectors \u6709\u65f6\u88ab\u79f0\u4e3a\u8bcd\u5d4c\u5165 word embeddings \u6216\u8bcd\u8868\u793a word representations \u5b83\u4eec\u662f\u5206\u5e03\u5f0f\u8868\u793a distributed representation Word2vec (Mikolov et al. 2013)\u662f\u4e00\u4e2a\u5b66\u4e60\u5355\u8bcd\u5411\u91cf\u7684 \u6846\u67b6 IDEA \uff1a \u6211\u4eec\u6709\u5927\u91cf\u7684\u6587\u672c (corpus means 'body' in Latin. \u590d\u6570\u4e3acorpora) \u56fa\u5b9a\u8bcd\u6c47\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7531\u4e00\u4e2a\u5411\u91cf\u8868\u793a \u6587\u672c\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e \\(t\\) \uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e0a\u4e0b\u6587(\u201c\u5916\u90e8\u201d)\u5355\u8bcd \\(o\\) \u4f7f\u7528 \\(c\\) \u548c \\(o\\) \u7684 \u8bcd\u5411\u91cf\u7684\u76f8\u4f3c\u6027 \u6765\u8ba1\u7b97\u7ed9\u5b9a \\(c\\) \u7684 \\(o\\) \u7684 \u6982\u7387 (\u53cd\u4e4b\u4ea6\u7136) \u4e0d\u65ad\u8c03\u6574\u8bcd\u5411\u91cf \u6765\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u4e0b\u56fe\u4e3a\u7a97\u53e3\u5927\u5c0f \\(j=2\\) \u65f6\u7684 \\(P\\left(w_{t+j} | w_{t}\\right)\\) \u8ba1\u7b97\u8fc7\u7a0b\uff0ccenter word\u5206\u522b\u4e3a \\(into\\) \u548c \\(banking\\)","title":"Word2vec introduction"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#word2vec-objective-function","text":"\u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e \\(t=1, \\ldots, T\\) \uff0c\u5728\u5927\u5c0f\u4e3a \\(m\\) \u7684\u56fa\u5b9a\u7a97\u53e3\u5185\u9884\u6d4b\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(w_t\\) \\[ Likelihoood = L(\\theta) = \\prod^{T}_{t=1} \\prod_{-m \\leq j \\leq m \\atop j \\neq 0} P(w_{t+j} | w_{t} ; \\theta) \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u4e3a\u6240\u6709\u9700\u8981\u4f18\u5316\u7684\u53d8\u91cf \u76ee\u6807\u51fd\u6570 \\(J(\\theta)\\) (\u6709\u65f6\u88ab\u79f0\u4e3a\u4ee3\u4ef7\u51fd\u6570\u6216\u635f\u5931\u51fd\u6570) \u662f(\u5e73\u5747)\u8d1f\u5bf9\u6570\u4f3c\u7136 \\[ J(\\theta)=-\\frac{1}{T} \\log L(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\log P\\left(w_{t+j} | w_{t} ; \\theta\\right) \\] \u5176\u4e2dlog\u5f62\u5f0f\u662f\u65b9\u4fbf\u5c06\u8fde\u4e58\u8f6c\u5316\u4e3a\u6c42\u548c\uff0c\u8d1f\u53f7\u662f\u5e0c\u671b\u5c06\u6781\u5927\u5316\u4f3c\u7136\u7387\u8f6c\u5316\u4e3a\u6781\u5c0f\u5316\u635f\u5931\u51fd\u6570\u7684\u7b49\u4ef7\u95ee\u9898\u3002 \u5728\u8fde\u4e58\u4e4b\u524d\u4f7f\u7528log\u8f6c\u5316\u4e3a\u6c42\u548c\u975e\u5e38\u6709\u6548\uff0c\u7279\u522b\u662f\u5728\u505a\u4f18\u5316\u65f6 $$ \\log \\prod_i x_i = \\sum_i \\log x_i $$ \u6700\u5c0f\u5316\u76ee\u6807\u51fd\u6570 \\(\\Leftrightarrow\\) \u6700\u5927\u5316\u9884\u6d4b\u7cbe\u5ea6 \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97 \\(P(w_{t+j} | w_{t} ; \\theta)\\) \uff1f \u56de\u7b54 \uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u90fd\u662f\u7528\u4e24\u4e2a\u5411\u91cf \\(v_w\\) \u5f53 \\(w\\) \u662f\u4e2d\u5fc3\u8bcd\u65f6 \\(u_w\\) \u5f53 \\(w\\) \u662f\u4e0a\u4e0b\u6587\u8bcd\u65f6 \u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u516c\u5f0f\u4e2d\uff0c\u5411\u91cf \\(u_o\\) \u548c\u5411\u91cf \\(v_c\\) \u8fdb\u884c\u70b9\u4e58\u3002\u5411\u91cf\u4e4b\u95f4\u8d8a\u76f8\u4f3c\uff0c\u70b9\u4e58\u7ed3\u679c\u8d8a\u5927\uff0c\u4ece\u800c\u5f52\u4e00\u5316\u540e\u5f97\u5230\u7684\u6982\u7387\u503c\u4e5f\u8d8a\u5927\u3002\u6a21\u578b\u7684\u8bad\u7ec3\u6b63\u662f\u4e3a\u4e86\u4f7f\u5f97\u5177\u6709\u76f8\u4f3c\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\uff0c\u5177\u6709\u76f8\u4f3c\u7684\u5411\u91cf\u3002","title":"Word2vec objective function"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#word2vec-prediction-function","text":"\\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u53d6\u5e42\u4f7f\u4efb\u4f55\u6570\u90fd\u4e3a\u6b63 \u70b9\u79ef\u6bd4\u8f83o\u548cc\u7684\u76f8\u4f3c\u6027 \\(u^{T} v=u . v=\\sum_{i=1}^{n} u_{i} v_{i}\\) \uff0c\u70b9\u79ef\u8d8a\u5927\u5219\u6982\u7387\u8d8a\u5927 \u5206\u6bcd\uff1a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u8868\u8fdb\u884c\u6807\u51c6\u5316\uff0c\u4ece\u800c\u7ed9\u51fa\u6982\u7387\u5206\u5e03 softmax function \\(\\mathbb{R}^{n} \\rightarrow \\mathbb{R}^{n}\\) $$ \\operatorname{softmax}\\left(x_{i}\\right)=\\frac{\\exp \\left(x_{i}\\right)}{\\sum_{j=1}^{n} \\exp \\left(x_{j}\\right)}=p_{i} $$ \u5c06\u4efb\u610f\u503c \\(x_i\\) \u6620\u5c04\u5230\u6982\u7387\u5206\u5e03 \\(p_i\\) max \uff1a\u56e0\u4e3a\u653e\u5927\u4e86\u6700\u5927\u7684\u6982\u7387 soft \uff1a\u56e0\u4e3a\u4ecd\u7136\u4e3a\u8f83\u5c0f\u7684 \\(x_i\\) \u8d4b\u4e88\u4e86\u4e00\u5b9a\u6982\u7387 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5e38\u7528 \u9996\u5148\u6211\u4eec\u968f\u673a\u521d\u59cb\u5316 \\(u_{w}\\in\\mathbb{R}^d\\) \u548c \\(v_{w}\\in\\mathbb{R}^d\\) \uff0c\u800c\u540e\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u8fdb\u884c\u66f4\u65b0 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=\\frac{\\partial}{\\partial v_c}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)} \\end{align} $$ > \u504f\u5bfc\u6570\u53ef\u4ee5\u79fb\u8fdb\u6c42\u548c\u4e2d\uff0c\u5bf9\u5e94\u4e0a\u65b9\u516c\u5f0f\u7684\u6700\u540e\u4e24\u884c\u7684\u63a8\u5bfc > $$ > \\frac{\\partial}{\\partial x}\\sum_iy_i = \\sum_i\\frac{\\partial}{\\partial x}y_i > \\] \u6211\u4eec\u53ef\u4ee5\u5bf9\u4e0a\u8ff0\u7ed3\u679c\u91cd\u65b0\u6392\u5217\u5982\u4e0b\uff0c\u7b2c\u4e00\u9879\u662f\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7b2c\u4e8c\u9879\u662f\u9884\u6d4b\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u3002\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u4e0a\u4e0b\u6587\u5c06\u9010\u6b65\u63a5\u8fd1\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u3002 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=u_o-\\sum_{w\\in V}\\frac{\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}u_w\\\\ &=u_o-\\sum_{w\\in V}P(w|c)u_w \\end{align} \\] \u518d\u5bf9 \\(u_o\\) \u8fdb\u884c\u504f\u5fae\u5206\u8ba1\u7b97\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 \\(u_o\\) \u662f \\(u_{w=o}\\) \u7684\u7b80\u5199\uff0c\u6545\u53ef\u77e5 \\(\\frac{\\partial}{\\partial u_o}\\sum_{w \\in V } u_w^T v_c = \\frac{\\partial}{\\partial u_o} u_o^T v_c = \\frac{\\partial u_o}{\\partial u_o}v_c + \\frac{\\partial v_c}{\\partial u_o}u_o= v_c\\) \\[ \\begin{align} \\frac{\\partial}{\\partial u_o}\\log P(o|c) &=\\frac{\\partial}{\\partial u_o}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=v_c-\\frac{\\sum\\frac{\\partial}{\\partial u_o}\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)v_c}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}v_c\\\\ &=v_c - P(o|c)v_c\\\\ &=(1-P(o|c))v_c \\end{align} \\] \u53ef\u4ee5\u7406\u89e3\uff0c\u5f53 \\(P(o|c) \\to 1\\) \uff0c\u5373\u901a\u8fc7\u4e2d\u5fc3\u8bcd \\(c\\) \u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u9884\u6d4b\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \uff0c\u6b64\u65f6\u6211\u4eec\u4e0d\u9700\u8981\u8c03\u6574 \\(u_o\\) \uff0c\u53cd\u4e4b\uff0c\u5219\u76f8\u5e94\u8c03\u6574 \\(u_o\\) \u3002 \u5173\u4e8e\u6b64\u5904\u7684\u5fae\u79ef\u5206\u77e5\u8bc6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4e2d\u7684 \u9644\u5f55B \u4e86\u89e3\u3002","title":"Word2vec prediction function"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#notes-01-introduction-svd-and-word2vec","text":"Keyphrases : Natural Language Processing. Word Vectors. Singular Value Decomposition. Skip-gram. Continuous Bag of Words(CBOW). Negative Sampling. Hierarchical Softmax. Word2Vec. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u9996\u5148\u4ecb\u7ecd\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406(NLP)\u7684\u6982\u5ff5\u53ca\u5176\u9762\u4e34\u7684\u95ee\u9898\u3002\u7136\u540e\u6211\u4eec\u7ee7\u7eed\u8ba8\u8bba\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u6570\u5b57\u5411\u91cf\u7684\u6982\u5ff5\u3002\u6700\u540e\uff0c\u8ba8\u8bba\u4e86\u5e38\u7528\u7684\u8bcd\u5411\u91cf\u8bbe\u8ba1\u65b9\u6cd5\u3002","title":"Notes 01  Introduction, SVD and Word2Vec"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#introduction-to-natural-language-processing","text":"What is so special about NLP? Natural language is a discrete/symbolic/categorical system \u79bb\u6563\u7684/\u7b26\u53f7\u7684/\u5206\u7c7b\u7684 \u4eba\u7c7b\u7684\u8bed\u8a00\u6709\u4ec0\u4e48\u7279\u522b\u4e4b\u5904\uff1f\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u4e2a\u4e13\u95e8\u7528\u6765\u8868\u8fbe\u610f\u4e49\u7684\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u7531\u4efb\u4f55\u5f62\u5f0f\u7684\u7269\u7406\u8868\u73b0\u4ea7\u751f\u7684\u3002\u5728\u8fd9\u65b9\u9762\u4e0a\uff0c\u5b83\u4e0e\u89c6\u89c9\u6216\u4efb\u4f55\u5176\u4ed6\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u90fd\u6709\u5f88\u5927\u7684\u4e0d\u540c\u3002 \u5927\u591a\u6570\u5355\u8bcd\u53ea\u662f\u4e00\u4e2a\u8bed\u8a00\u5b66\u4ee5\u5916\u7684\u7684\u7b26\u53f7\uff1a\u5355\u8bcd\u662f\u4e00\u4e2a\u6620\u5c04\u5230\u6240\u6307(signified \u60f3\u6cd5\u6216\u4e8b\u7269)\u7684\u80fd\u6307(signifier)\u3002 \u4f8b\u5982\uff0c\u201crocket\u201d\u4e00\u8bcd\u6307\u7684\u662f\u706b\u7bad\u7684\u6982\u5ff5\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f15\u7533\u4e3a\u706b\u7bad\u7684\u5b9e\u4f8b\u3002\u5f53\u6211\u4eec\u4f7f\u7528\u5355\u8bcd\u548c\u5b57\u6bcd\u6765\u8868\u8fbe\u7b26\u53f7\u65f6\uff0c\u4e5f\u4f1a\u6709\u4e00\u4e9b\u4f8b\u5916\uff0c\u4f8b\u5982\u201cwhoompaa\u201d\u7684\u4f7f\u7528\u3002\u6700\u91cd\u8981\u7684\u662f\uff0c\u8fd9\u4e9b\u8bed\u8a00\u7684\u7b26\u53f7\u53ef\u4ee5\u88ab \u7f16\u7801\u6210\u51e0\u79cd\u5f62\u5f0f\uff1a\u58f0\u97f3\u3001\u624b\u52bf\u3001\u6587\u5b57\u7b49\u7b49\uff0c\u7136\u540e\u901a\u8fc7\u8fde\u7eed\u7684\u4fe1\u53f7\u4f20\u8f93\u7ed9\u5927\u8111\uff0c\u5927\u8111\u672c\u8eab\u4f3c\u4e4e\u4e5f\u80fd\u4ee5\u4e00\u79cd\u8fde\u7eed\u7684\u65b9\u5f0f\u5bf9\u8fd9\u4e9b\u4fe1\u53f7\u8fdb\u884c\u89e3\u7801\u3002\u4eba\u4eec\u5728\u8bed\u8a00\u54f2\u5b66\u548c\u8bed\u8a00\u5b66\u65b9\u9762\u505a\u4e86\u5927\u91cf\u7684\u5de5\u4f5c\u6765\u6982\u5ff5\u5316\u4eba\u7c7b\u8bed\u8a00\uff0c\u5e76\u5c06\u8bcd\u8bed\u4e0e\u5176\u53c2\u7167\u3001\u610f\u4e49\u7b49\u533a\u5206\u5f00\u6765\u3002 Examples of tasks \u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u4e0d\u540c\u5c42\u6b21\u7684\u4efb\u52a1\uff0c\u4ece\u8bed\u8a00\u5904\u7406\u5230\u8bed\u4e49\u89e3\u91ca\u518d\u5230\u8bed\u7bc7\u5904\u7406\u3002\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u76ee\u6807\u662f\u901a\u8fc7\u8bbe\u8ba1\u7b97\u6cd5\u4f7f\u5f97\u8ba1\u7b97\u673a\u80fd\u591f\u201c\u7406\u89e3\u201d\u8bed\u8a00\uff0c\u4ece\u800c\u80fd\u591f\u6267\u884c\u67d0\u4e9b\u7279\u5b9a\u7684\u4efb\u52a1\u3002\u4e0d\u540c\u7684\u4efb\u52a1\u7684\u96be\u5ea6\u662f\u4e0d\u4e00\u6837\u7684 Easy \u62fc\u5199\u68c0\u67e5 Spell Checking \u5173\u952e\u8bcd\u68c0\u7d22 Keyword Search \u540c\u4e49\u8bcd\u67e5\u627e Finding Synonyms Medium \u89e3\u6790\u6765\u81ea\u7f51\u7ad9\u3001\u6587\u6863\u7b49\u7684\u4fe1\u606f Hard \u673a\u5668\u7ffb\u8bd1 Machine Translation \u8bed\u4e49\u5206\u6790 Semantic Analysis \u6307\u4ee3\u6d88\u89e3 Coreference \u95ee\u7b54\u7cfb\u7edf Question Answering How to represent words? \u5728\u6240\u6709\u7684NLP\u4efb\u52a1\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u4e5f\u662f\u53ef\u4ee5\u8bf4\u662f\u6700\u91cd\u8981\u7684\u5171\u540c\u70b9\u662f\u6211\u4eec\u5982\u4f55\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u4efb\u4f55\u6a21\u578b\u7684\u8f93\u5165\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u4e0d\u4f1a\u8ba8\u8bba\u65e9\u671f\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u4f5c\u662f\u5c06\u5355\u8bcd\u89c6\u4e3a\u539f\u5b50\u7b26\u53f7 atomic symbols\u3002\u4e3a\u4e86\u8ba9\u5927\u591a\u6570\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u80fd\u6709\u66f4\u597d\u7684\u8868\u73b0\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u4e86\u89e3\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u548c\u4e0d\u540c\u3002\u6709\u4e86\u8bcd\u5411\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5c06\u5176\u7f16\u7801\u5230\u5411\u91cf\u672c\u8eab\u4e2d\u3002","title":"Introduction to Natural Language Processing"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#word-vectors","text":"\u4f7f\u7528\u8bcd\u5411\u91cf\u7f16\u7801\u5355\u8bcd\uff0cN\u7ef4\u7a7a\u95f4\u8db3\u591f\u6211\u4eec\u7f16\u7801\u8bed\u8a00\u7684\u6240\u6709\u8bed\u4e49\uff0c\u6bcf\u4e00\u7ef4\u5ea6\u90fd\u4f1a\u7f16\u7801\u4e00\u4e9b\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u4f20\u9012\u7684\u4fe1\u606f\u3002\u7b80\u5355\u7684one-hot\u5411\u91cf\u65e0\u6cd5\u7ed9\u51fa\u5355\u8bcd\u95f4\u7684\u76f8\u4f3c\u6027\uff0c\u6211\u4eec\u9700\u8981\u5c06\u7ef4\u5ea6 \\(|V|\\) \u51cf\u5c11\u81f3\u4e00\u4e2a\u4f4e\u7eac\u5ea6\u7684\u5b50\u7a7a\u95f4\uff0c\u6765\u83b7\u5f97\u7a20\u5bc6\u7684\u8bcd\u5411\u91cf\uff0c\u83b7\u5f97\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb\u3002","title":"Word Vectors"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#svd-based-methods","text":"\u8fd9\u662f\u4e00\u7c7b\u627e\u5230\u8bcd\u5d4c\u5165\u7684\u65b9\u6cd5\uff08\u5373\u8bcd\u5411\u91cf\uff09\uff0c\u6211\u4eec\u9996\u5148\u904d\u5386\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u636e\u96c6\u548c\u7edf\u8ba1\u8bcd\u7684\u5171\u73b0\u8ba1\u6570\u77e9\u9635 X\uff0c\u7136\u540e\u5bf9\u77e9\u9635 X \u8fdb\u884c SVD \u5206\u89e3\u5f97\u5230 \\(USV^{T}\\) \u3002\u7136\u540e\u6211\u4eec\u4f7f\u7528 U \u7684\u884c\u6765\u4f5c\u4e3a\u5b57\u5178\u4e2d\u6240\u6709\u8bcd\u7684\u8bcd\u5411\u91cf\u3002\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0b\u77e9\u9635 X \u7684\u51e0\u79cd\u9009\u62e9\u3002 Word-Document Matrix \u6211\u4eec\u6700\u521d\u7684\u5c1d\u8bd5\uff0c\u6211\u4eec\u731c\u60f3\u76f8\u5173\u8fde\u7684\u5355\u8bcd\u5728\u540c\u4e00\u4e2a\u6587\u6863\u4e2d\u4f1a\u7ecf\u5e38\u51fa\u73b0\u3002\u4f8b\u5982\uff0c\u201cbanks\u201d \u201cbonds\u201d \u201cstocks\u201d \u201cmoneys\u201d\u7b49\u7b49\uff0c\u51fa\u73b0\u5728\u4e00\u8d77\u7684\u6982\u7387\u4f1a\u6bd4\u8f83\u9ad8\u3002\u4f46\u662f\u201cbanks\u201d \u201coctopus\u201d \u201cbanana\u201d \u201chockey\u201d\u4e0d\u5927\u53ef\u80fd\u4f1a\u8fde\u7eed\u5730\u51fa\u73b0\u3002\u6211\u4eec\u6839\u636e\u8fd9\u4e2a\u60c5\u51b5\u6765\u5efa\u7acb\u4e00\u4e2a Word-Document \u77e9\u9635\uff0c \\(X\\) \u662f\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\u6784\u5efa\uff1a\u904d\u5386\u6570\u4ebf\u7684\u6587\u6863\u548c\u5f53\u8bcd \\(i\\) \u51fa\u73b0\u5728\u6587\u6863 \\(j\\) \uff0c\u6211\u4eec\u5bf9 \\(X_{ij}\\) \u52a0\u4e00\u3002\u8fd9\u663e\u7136\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u77e9\u9635 \\(\\mathbb{R}^{|V|\\times M}\\) \uff0c\u5b83\u7684\u89c4\u6a21\u662f\u548c\u6587\u6863\u6570\u91cf \\(M\\) \u6210\u6b63\u6bd4\u5173\u7cfb\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u597d\u7684\u65b9\u6cd5\u3002 Window based Co-occurrence Matrix \u540c\u6837\u7684\u903b\u8f91\u4e5f\u9002\u7528\u4e8e\u8fd9\u91cc\uff0c\u4f46\u662f\u77e9\u9635 \\(X\\) \u5b58\u50a8\u5355\u8bcd\u7684\u5171\u73b0\uff0c\u4ece\u800c\u6210\u4e3a\u4e00\u4e2a\u5173\u8054\u77e9\u9635\u3002\u5728\u6b64\u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u7279\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u3002\u6211\u4eec\u6309\u7167\u8fd9\u4e2a\u65b9\u6cd5\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u8fdb\u884c\u7edf\u8ba1\u3002 \u751f\u6210\u7ef4\u5ea6\u4e3a \\(|V| \\times|V|\\) \u7684\u5171\u73b0\u77e9\u9635 \\(X\\) \u5728 \\(X\\) \u4e0a\u5e94\u7528 SVD \u4ece\u800c\u5f97\u5230 \\(X = {USV}^T\\) \u9009\u62e9 \\(U\\) \u524d \\(k\\) \u884c \u5f97\u5230 \\(k\\) \u7ef4\u7684\u8bcd\u5411\u91cf \\(\\frac{\\sum_{i=1}^{k} \\sigma_{i}}{\\sum_{i=1}^{|V|} \\sigma_{i}}\\) \u8868\u793a\u7b2c\u4e00\u4e2ak\u7ef4\u6355\u83b7\u7684\u65b9\u5dee\u91cf Applying SVD to the cooccurrence matrix \u6211\u4eec\u5bf9\u77e9\u9635 \\(X\\) \u4f7f\u7528 SVD\uff0c\u89c2\u5bdf\u5947\u5f02\u503c\uff08\u77e9\u9635 S \u4e0a\u5bf9\u89d2\u7ebf\u4e0a\u5143\u7d20\uff09\uff0c\u6839\u636e\u671f\u671b\u7684\u6355\u83b7\u65b9\u5dee\u767e\u5206\u6bd4\u622a\u65ad\uff0c\u7559\u4e0b\u524d k \u4e2a\u5143\u7d20\uff1a \u7136\u540e\u53d6\u5b50\u77e9\u9635 \\(U_{1:|V|, 1:k}\\) \u4f5c\u4e3a\u8bcd\u5d4c\u5165\u77e9\u9635\u3002\u8fd9\u5c31\u7ed9\u51fa\u4e86\u8bcd\u6c47\u8868\u4e2d\u6bcf\u4e2a\u8bcd\u7684 k \u7ef4\u8868\u793a \u5bf9\u77e9\u9635 \\(X\\) \u4f7f\u7528SVD \u901a\u8fc7\u9009\u62e9\u524d k \u4e2a\u5947\u5f02\u5411\u91cf\u6765\u964d\u4f4e\u7ef4\u5ea6 \u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8db3\u591f\u7684\u8bcd\u5411\u91cf\u6765\u7f16\u7801\u8bed\u4e49\u548c\u53e5\u6cd5(part of speech)\u4fe1\u606f\uff0c\u4f46\u4f34\u968f\u8bb8\u591a\u5176\u4ed6\u95ee\u9898 \u77e9\u9635\u7684\u7ef4\u5ea6\u4f1a\u7ecf\u5e38\u53d1\u751f\u6539\u53d8\uff08\u7ecf\u5e38\u589e\u52a0\u65b0\u7684\u5355\u8bcd\u548c\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u4f1a\u6539\u53d8\uff09\u3002 \u77e9\u9635\u4f1a\u975e\u5e38\u7684\u7a00\u758f\uff0c\u56e0\u4e3a\u5f88\u591a\u8bcd\u4e0d\u4f1a\u5171\u73b0\u3002 \u77e9\u9635\u7ef4\u5ea6\u4e00\u822c\u4f1a\u975e\u5e38\u9ad8 \\(\\approx 10^{6}\\times 10^{6}\\) \u57fa\u4e8e SVD \u7684\u65b9\u6cd5\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5f88\u9ad8 ( \\(m\u00d7n\\) \u77e9\u9635\u7684\u8ba1\u7b97\u6210\u672c\u662f \\(O({mn}^2)\\) )\uff0c\u5e76\u4e14\u5f88\u96be\u5408\u5e76\u65b0\u5355\u8bcd\u6216\u6587\u6863 \u9700\u8981\u5728 X \u4e0a\u52a0\u5165\u4e00\u4e9b\u6280\u5de7\u5904\u7406\u6765\u89e3\u51b3\u8bcd\u9891\u7684\u6781\u5267\u7684\u4e0d\u5e73\u8861 \u7136\u800c\uff0c\u57fa\u4e8e\u8ba1\u6570\u7684\u65b9\u6cd5\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528\u7edf\u8ba1\u91cf \u5bf9\u4e0a\u8ff0\u8ba8\u8bba\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u5b58\u5728\u4ee5\u4e0b\u7684\u89e3\u51b3\u65b9\u6cd5\uff1a \u5ffd\u7565\u529f\u80fd\u8bcd\uff0c\u4f8b\u5982 \u201cthe\u201d\uff0c\u201che\u201d\uff0c\u201chas\u201d \u7b49\u7b49\u3002 \u4f7f\u7528 ramp window\uff0c\u5373\u6839\u636e\u6587\u6863\u4e2d\u5355\u8bcd\u4e4b\u95f4\u7684\u8ddd\u79bb\u5bf9\u5171\u73b0\u8ba1\u6570\u8fdb\u884c\u52a0\u6743 \u4f7f\u7528\u76ae\u5c14\u900a\u76f8\u5173\u7cfb\u6570\u5e76\u5c06\u8d1f\u8ba1\u6570\u8bbe\u7f6e\u4e3a0\uff0c\u800c\u4e0d\u662f\u53ea\u4f7f\u7528\u539f\u59cb\u8ba1\u6570 \u6b63\u5982\u6211\u4eec\u5728\u4e0b\u4e00\u8282\u4e2d\u770b\u5230\u7684\uff0c\u57fa\u4e8e\u8fed\u4ee3\u7684\u65b9\u6cd5\u4ee5\u4e00\u79cd\u4f18\u96c5\u5f97\u591a\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u5927\u90e8\u5206\u4e0a\u8ff0\u95ee\u9898\u3002","title":"SVD Based Methods"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#iteration-based-methods-word2vec","text":"\u8fd9\u91cc\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e2a\u65b0\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u80fd\u591f\u4e00\u6b21\u5b66\u4e60\u4e00\u4e2a\u8fed\u4ee3\uff0c\u5e76\u6700\u7ec8\u80fd\u591f\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\u7684\u6982\u7387\u8fdb\u884c\u7f16\u7801\uff0c\u800c\u4e0d\u662f\u8ba1\u7b97\u548c\u5b58\u50a8\u4e00\u4e9b\u5927\u578b\u6570\u636e\u96c6(\u53ef\u80fd\u662f\u6570\u5341\u4ebf\u4e2a\u53e5\u5b50)\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u8fd9\u4e2a\u60f3\u6cd5\u662f\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u7684\u53c2\u6570\u5c31\u662f\u8bcd\u5411\u91cf\u3002\u7136\u540e\u6839\u636e\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u6bcf\u6b21\u6a21\u578b\u7684\u8fed\u4ee3\u8ba1\u7b97\u8bef\u5dee\uff0c\u5e76\u9075\u5faa\u4e00\u4e9b\u66f4\u65b0\u89c4\u5219\uff0c\u8be5\u89c4\u5219\u5177\u6709\u60e9\u7f5a\u9020\u6210\u9519\u8bef\u7684\u6a21\u578b\u53c2\u6570\u7684\u4f5c\u7528\uff0c\u4ece\u800c\u53ef\u4ee5\u5b66\u4e60\u5230\u8bcd\u5411\u91cf\u3002\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8ffd\u6eaf\u5230 1986\u5e74\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u65b9\u6cd5\u4e3a\u201c\u53cd\u5411\u4f20\u64ad\u201d\uff0c\u6a21\u578b\u548c\u4efb\u52a1\u8d8a\u7b80\u5355\uff0c\u8bad\u7ec3\u5b83\u7684\u901f\u5ea6\u5c31\u8d8a\u5feb\u3002 \u57fa\u4e8e\u8fed\u4ee3\u7684\u65b9\u6cd5\u4e00\u6b21\u6355\u83b7\u4e00\u4e2a\u5355\u8bcd\u7684\u5171\u73b0\u60c5\u51b5\uff0c\u800c\u4e0d\u662f\u50cfSVD\u65b9\u6cd5\u90a3\u6837\u76f4\u63a5\u6355\u83b7\u6240\u6709\u7684\u5171\u73b0\u8ba1\u6570\u3002 \u5df2\u7ecf\u5f88\u591a\u4eba\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u6d4b\u8bd5\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u3002[Collobert et al., 2011] \u8bbe\u8ba1\u7684\u6a21\u578b\u9996\u5148\u5c06\u6bcf\u4e2a\u5355\u8bcd\u8f6c\u6362\u4e3a\u5411\u91cf\u3002\u5bf9\u6bcf\u4e2a\u7279\u5b9a\u7684\u4efb\u52a1\uff08\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u8bcd\u6027\u6807\u6ce8\u7b49\u7b49\uff09\uff0c\u4ed6\u4eec\u4e0d\u4ec5\u8bad\u7ec3\u6a21\u578b\u7684\u53c2\u6570\uff0c\u540c\u65f6\u4e5f\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\uff0c\u8ba1\u7b97\u51fa\u4e86\u975e\u5e38\u597d\u7684\u8bcd\u5411\u91cf\u7684\u540c\u65f6\u53d6\u5f97\u4e86\u5f88\u597d\u7684\u6027\u80fd\u3002 \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e2a\u975e\u5e38\u6709\u6548\u7684\u6982\u7387\u6a21\u578b\uff1aWord2vec\u3002Word2vec \u662f\u4e00\u4e2a\u8f6f\u4ef6\u5305\u5b9e\u9645\u4e0a\u5305\u542b\uff1a \u4e24\u4e2a\u7b97\u6cd5 \uff1acontinuous bag-of-words\uff08CBOW\uff09\u548c skip-gram\u3002CBOW \u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u6765\u9884\u6d4b\u8be5\u8bcd\u7684\u8bcd\u5411\u91cf\u3002skip-gram \u5219\u76f8\u53cd\uff0c\u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u9884\u6d4b\u5468\u56f4\u4e0a\u4e0b\u6587\u7684\u8bcd\u7684\u6982\u7387\u5206\u5e03\u3002 \u4e24\u4e2a\u8bad\u7ec3\u65b9\u6cd5 \uff1anegative sampling \u548c hierarchical softmax\u3002Negative sampling \u901a\u8fc7\u62bd\u53d6\u8d1f\u6837\u672c\u6765\u5b9a\u4e49\u76ee\u6807\uff0chierarchical softmax \u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u6709\u6548\u7684\u6811\u7ed3\u6784\u6765\u8ba1\u7b97\u6240\u6709\u8bcd\u7684\u6982\u7387\u6765\u5b9a\u4e49\u76ee\u6807\u3002 Language Models (Unigrams, Bigrams, etc.) \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u6765\u4e3a\u4e00\u7cfb\u5217\u7684\u5355\u8bcd\u5206\u914d\u6982\u7387\u3002\u6211\u4eec\u4ece\u4e00\u4e2a\u4f8b\u5b50\u5f00\u59cb\uff1a \u201cThe cat jumped over the puddle\u201d \u4e00\u4e2a\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f1a\u7ed9\u8fd9\u4e2a\u53e5\u5b50\u5f88\u9ad8\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5728\u53e5\u6cd5\u548c\u8bed\u4e49\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168\u6709\u6548\u7684\u53e5\u5b50\u3002\u76f8\u4f3c\u5730\uff0c\u53e5\u5b50\u201cstock boil fish is toy\u201d\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u3002\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u79f0\u4e3a\u5bf9\u7ed9\u5b9a n \u4e2a\u8bcd\u7684\u5e8f\u5217\u7684\u6982\u7387\u662f\uff1a $$ P(w_{1}, w_{2}, \\ldots, w_{n}) $$ \u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u5143\u8bed\u8a00\u6a21\u578b\u65b9\u6cd5( Unigram model )\uff0c\u5047\u8bbe\u5355\u8bcd\u7684\u51fa\u73b0\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u4ece\u800c\u5206\u89e3\u6982\u7387 $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=1}^{n} P\\left(w_{i}\\right) $$ \u4f46\u662f\u6211\u4eec\u77e5\u9053\u8fd9\u662f\u4e0d\u5927\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u524d\u9762\u7684\u5355\u8bcd\u5e8f\u5217\u7684\u3002\u5982\u679c\u4f7f\u7528\u4e0a\u8ff0\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u5177\u6709\u5f88\u9ad8\u7684\u6982\u7387\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u5e8f\u5217\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u5e8f\u5217\u4e2d\u7684\u5355\u8bcd\u548c\u5176\u65c1\u8fb9\u7684\u5355\u8bcd\u7684\u6210\u5bf9\u6982\u7387\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a bigram \u6a21\u578b\uff1a $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=2}^{n} P\\left(w_{i} | w_{i-1}\\right) $$ \u4f46\u662f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u7b80\u5355\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u5173\u5fc3\u4e00\u5bf9\u90bb\u8fd1\u7684\u5355\u8bcd\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u6574\u4e2a\u53e5\u5b50\u6765\u8003\u8651\u3002\u4f46\u662f\u6211\u4eec\u5c06\u770b\u5230\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u6709\u663e\u8457\u7684\u63d0\u5347\u3002\u8003\u8651\u5728\u8bcd-\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\uff0c\u5171\u73b0\u7a97\u53e3\u4e3a 1\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u80fd\u5f97\u5230\u8fd9\u6837\u7684\u6210\u5bf9\u7684\u6982\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u53c8\u9700\u8981\u8ba1\u7b97\u548c\u5b58\u50a8\u5927\u91cf\u6570\u636e\u96c6\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u7406\u89e3\u4e86\u5982\u4f55\u8003\u8651\u5177\u6709\u6982\u7387\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u8ba9\u6211\u4eec\u89c2\u5bdf\u4e00\u4e9b\u80fd\u591f\u5b66\u4e60\u8fd9\u4e9b\u6982\u7387\u7684\u793a\u4f8b\u6a21\u578b\u3002 Continuous Bag of Words Model (CBOW) \u8fd9\u4e00\u65b9\u6cd5\u662f\u628a {\"The\",\"cat\",\"over\",\"the\",\"puddle\"} \u4f5c\u4e3a\u4e0a\u4e0b\u6587\uff0c\u5e0c\u671b\u4ece\u8fd9\u4e9b\u8bcd\u4e2d\u80fd\u591f\u9884\u6d4b\u6216\u8005\u751f\u6210\u4e2d\u5fc3\u8bcd\u201cjumped\u201d\u3002\u8fd9\u6837\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e4b\u4e3a continuous bag-of-words\uff08CBOW\uff09\u6a21\u578b\u3002 \u5b83\u662f\u4ece\u4e0a\u4e0b\u6587\u4e2d\u9884\u6d4b\u4e2d\u5fc3\u8bcd\u7684\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u5e0c\u671b\u5b66\u4e60\u4e24\u4e2a\u5411\u91cf \\(v\\) (\u8f93\u5165\u5411\u91cf) \u5f53\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d \\(u\\) (\u8f93\u51fa\u5411\u91cf) \u5f53\u8bcd\u662f\u4e2d\u5fc3\u8bcd \u9996\u5148\u6211\u4eec\u8bbe\u5b9a\u5df2\u77e5\u53c2\u6570\u3002\u4ee4\u6211\u4eec\u6a21\u578b\u7684\u5df2\u77e5\u53c2\u6570\u662f one-hot \u5f62\u5f0f\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\u6216\u8005\u4e0a\u4e0b\u6587\u6211\u4eec\u7528 \\(x^{(c)}\\) \u8868\u793a\uff0c\u8f93\u51fa\u7528 \\(y^{(c)}\\) \u8868\u793a\u3002\u5728 CBOW \u6a21\u578b\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\uff0c\u56e0\u6b64\u6211\u4eec\u628a y \u79f0\u4e3a\u662f\u5df2\u77e5\u4e2d\u5fc3\u8bcd\u7684\u7684 one-hot \u5411\u91cf\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5b9a\u4e49\u6a21\u578b\u7684\u672a\u77e5\u53c2\u6570\u3002 \u9996\u5148\u6211\u4eec\u5bf9 CBOW \u6a21\u578b\u4f5c\u51fa\u4ee5\u4e0b\u5b9a\u4e49 \\(w_{i}\\) \uff1a\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u5355\u8bcd \\(i\\) \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \uff1a\u8f93\u5165\u8bcd\u77e9\u9635 \\(v_{i} \uff1a \\mathcal{V}\\) \u7684\u7b2c i \u5217\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u5165\u5411\u91cf\u8868\u793a \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \uff1a\u8f93\u51fa\u8bcd\u77e9\u9635 \\(u_{i} \uff1a \\mathcal{U}\\) \u7684\u7b2c i \u884c\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u51fa\u5411\u91cf\u8868\u793a \u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u77e9\u9635\uff0c \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \u548c \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \u3002\u5176\u4e2d n \u662f\u5d4c\u5165\u7a7a\u95f4\u7684\u4efb\u610f\u7ef4\u5ea6\u5927\u5c0f\u3002 \\(\\mathcal{V}\\) \u662f\u8f93\u5165\u8bcd\u77e9\u9635\uff0c\u4f7f\u5f97\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{V}\\) \u7684\u7b2c i \u5217\u662f\u8bcd \\(w_{i}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49\u8fd9\u4e2a \\(n \\times 1\\) \u7684\u5411\u91cf\u4e3a \\(v_{i}\\) \u3002\u76f8\u4f3c\u5730\uff0c \\(\\mathcal{U}\\) \u662f\u8f93\u51fa\u8bcd\u77e9\u9635\u3002\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{U}\\) \u7684\u7b2c j \u884c\u662f\u8bcd \\(w_{j}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49 \\(\\mathcal{U}\\) \u7684\u8fd9\u884c\u4e3a \\(u_{j}\\) \u3002\u6ce8\u610f\u5b9e\u9645\u4e0a\u5bf9\u6bcf\u4e2a\u8bcd \\(w_{i}\\) \u6211\u4eec\u9700\u8981\u5b66\u4e60\u4e24\u4e2a\u8bcd\u5411\u91cf\uff08\u5373\u8f93\u5165\u8bcd\u5411\u91cf \\(v_{i}\\) \u548c\u8f93\u51fa\u8bcd\u5411\u91cf \\(u_{i}\\) \uff09\u3002 \u6211\u4eec\u5c06\u8fd9\u4e2a\u6a21\u578b\u5206\u89e3\u4e3a\u4ee5\u4e0b\u6b65\u9aa4 \u6211\u4eec\u4e3a\u5927\u5c0f\u4e3a m \u7684\u8f93\u5165\u4e0a\u4e0b\u6587\uff0c\u751f\u6210 one-hot \u8bcd\u5411\u91cf \\( \\((x^{(c-m)},...,x^{(c-1)},x^{(c+1)},...,x^{(c+m)}\\in \\mathbb{R}^{|V|})\\) \\) \u6211\u4eec\u4ece\u4e0a\u4e0b\u6587 \\((v_{c-m}=\\mathcal{V}x^{(c-m)},v_{c-m+1}=\\mathcal{V}x^{(c-m+1)},...,v_{c+m}=\\mathcal{V}x^{(c+m)}\\in \\mathbb{R}^{n})\\) \u5f97\u5230\u5d4c\u5165\u8bcd\u5411\u91cf\u3002 \u5bf9\u4e0a\u8ff0\u7684\u5411\u91cf\u6c42\u5e73\u5747\u503c \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1+...+v_{c+m}}}{2m}\\in \\mathbb{R}^{n}\\) \u3002 \u751f\u6210\u4e00\u4e2a\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}\\widehat{v}\\in \\mathbb{R}^{|V|}\\) \u3002\u5f53\u76f8\u4f3c\u5411\u91cf\u7684\u70b9\u79ef\u8d8a\u9ad8\uff0c\u5c31\u4f1a\u4ee4\u5230\u76f8\u4f3c\u7684\u8bcd\u66f4\u4e3a\u9760\u8fd1\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u9ad8\u7684\u5206\u6570\u3002\u5c06\u5206\u6570\u8f6c\u6362\u4e3a\u6982\u7387 \\(\\widehat{y}=softmax(z)\\in \\mathbb{R}^{|V|}\\) \u3002 \u8fd9\u91cc softmax \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u51fd\u6570\u3002\u5b83\u5c06\u4e00\u4e2a\u5411\u91cf\u8f6c\u6362\u4e3a\u53e6\u5916\u4e00\u4e2a\u5411\u91cf\uff0c\u5176\u4e2d\u8f6c\u6362\u540e\u7684\u5411\u91cf\u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u662f \\(\\frac{e^{\\widehat{y}_i}}{\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}}\\) \u3002\u56e0\u4e3a\u8be5\u51fd\u6570\u662f\u4e00\u4e2a\u6307\u6570\u51fd\u6570\uff0c\u6240\u4ee5\u503c\u4e00\u5b9a\u4e3a\u6b63\u6570\uff1b\u901a\u8fc7\u9664\u4ee5 \\(\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}\\) \u6765\u5f52\u4e00\u5316\u5411\u91cf\uff08\u4f7f\u5f97 \\(\\sum_{k=1}^{|V|}\\widehat{y}_k=1\\) \uff09\u5f97\u5230\u6982\u7387\u3002 \u6211\u4eec\u5e0c\u671b\u751f\u6210\u7684\u6982\u7387 \\(\\widehat{y} \\in \\mathbb{R}^{|V|}\\) \u4e0e\u5b9e\u9645\u7684\u6982\u7387 \\(y \\in \\mathbb{R}^{|V|}\\) \u5339\u914d\u3002\u4f7f\u5f97\u5176\u521a\u597d\u662f\u5b9e\u9645\u7684\u8bcd\u5c31\u662f\u8fd9\u4e2a one-hot \u5411\u91cf\u3002 \u4e0b\u56fe\u662f CBOW \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u5982\u679c\u6709 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u6211\u4eec\u5982\u4f55\u5b66\u4e60\u8fd9\u4e24\u4e2a\u77e9\u9635\u5462\uff1f\u8fd9\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u3002\u4e00\u822c\u6211\u4eec\u60f3\u4ece\u4e00\u4e9b\u771f\u5b9e\u7684\u6982\u7387\u4e2d\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\uff0c\u4fe1\u606f\u8bba\u63d0\u4f9b\u4e86\u4e00\u4e2a \u5ea6\u91cf\u4e24\u4e2a\u6982\u7387\u5206\u5e03\u7684\u8ddd\u79bb \u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4e00\u4e2a\u5e38\u89c1\u7684\u8ddd\u79bb/\u635f\u5931\u65b9\u6cd5\uff0c\u4ea4\u53c9\u71b5 \\(H(\\widehat{y}, y)\\) \u3002 \u5728\u79bb\u6563\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ea4\u53c9\u71b5\u53ef\u4ee5\u76f4\u89c2\u5730\u5f97\u51fa\u635f\u5931\u51fd\u6570\u7684\u516c\u5f0f $$ H(\\hat{y}, y)=-\\sum_{j=1}^{|V|} y_{j} \\log \\left(\\hat{y}_{j}\\right) $$ \u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0cy \u662f one-hot \u5411\u91cf\u3002\u56e0\u6b64\u4e0a\u9762\u7684\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a $$ H(\\widehat{y}, y)= - y_{j}\\,log(\\widehat{y}_{j}) $$ c \u662f\u6b63\u786e\u8bcd\u7684 one-hot \u5411\u91cf\u7684\u7d22\u5f15\u3002\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u6211\u4eec\u7684\u9884\u6d4b\u662f\u5b8c\u7f8e\u5e76\u4e14 \\(\\widehat{y}_{c}=1\\) \u7684\u60c5\u51b5\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97 \\(H(\\widehat{y}, y)=-1\\,log(1)=0\\) \u3002\u56e0\u6b64\uff0c\u5bf9\u4e00\u4e2a\u5b8c\u7f8e\u7684\u9884\u6d4b\uff0c\u6211\u4eec\u4e0d\u4f1a\u9762\u4e34\u4efb\u4f55\u60e9\u7f5a\u6216\u8005\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u76f8\u53cd\u7684\u60c5\u51b5\uff0c\u9884\u6d4b\u975e\u5e38\u5dee\u5e76\u4e14 \\(\\widehat{y}_{c}=0.01\\) \u3002\u548c\u524d\u9762\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u635f\u5931 \\(H(\\widehat{y}, y)=-1\\,log(0.01)=4.605\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u6982\u7387\u5206\u5e03\uff0c\u4ea4\u53c9\u71b5\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u8ddd\u79bb\u5ea6\u91cf\u3002\u56e0\u6b64\u6211\u4eec\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u516c\u5f0f\u4e3a\uff1a $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c} | w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m}\\right) \\ &=-\\log P\\left(u_{c} | \\hat{v}\\right) \\ &=-\\log \\frac{\\exp \\left(u_{c}^{T} \\hat{v}\\right)}{\\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right)} \\ &=-u_{c}^{T} \\hat{v}+\\log \\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right) \\end{aligned} $$ \u6211\u4eec\u4f7f\u7528 SGD \u6765\u66f4\u65b0\u6240\u6709\u76f8\u5173\u7684\u8bcd\u5411\u91cf \\(u_{c}\\) \u548c \\(v_{j}\\) \u3002SGD \u5bf9\u4e00\u4e2a\u7a97\u53e3\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u53c2\u6570\uff1a \\[ \\begin{array}{l}{\\mathcal{U}_{\\text {new}} \\leftarrow \\mathcal{U}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{U}} J} \\\\ {\\mathcal{V}_{\\text {old}} \\leftarrow \\mathcal{V}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{V}} J}\\end{array} \\] Skip-Gram Model Skip-Gram\u6a21\u578b\u4e0eCBOW\u5927\u4f53\u76f8\u540c\uff0c\u4f46\u662f\u4ea4\u6362\u4e86\u6211\u4eec\u7684 x \u548c y\uff0c\u5373 CBOW \u4e2d\u7684 x \u73b0\u5728\u662f y\uff0cy \u73b0\u5728\u662f x\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\uff08\u4e2d\u5fc3\u8bcd\uff09\u6211\u4eec\u8868\u793a\u4e3a x\uff0c\u8f93\u51fa\u5411\u91cf\u4e3a \\(y^{(j)}\\) \u3002\u6211\u4eec\u5b9a\u4e49\u7684 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \u662f\u548c CBOW \u4e00\u6837\u7684\u3002 \u751f\u6210\u4e2d\u5fc3\u8bcd\u7684 one-hot \u5411\u91cf \\(x\\in \\mathbb{R}^{|V|}\\) \u6211\u4eec\u5bf9\u4e2d\u5fc3\u8bcd \\(v_{c}=\\mathcal{V}x\\in \\mathbb{R}^{|V|}\\) \u5f97\u5230\u8bcd\u5d4c\u5165\u5411\u91cf \u751f\u6210\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}v_{c}\\) \u5c06\u5206\u6570\u5411\u91cf\u8f6c\u5316\u4e3a\u6982\u7387\uff0c \\(\\widehat{y}=softmax(z)\\) \u6ce8\u610f \\(\\widehat{y}_{c-m},...,\\widehat{y}_{c-1},\\widehat{y}_{c+1},...,\\widehat{y}_{c+m}\\) \u662f\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u89c2\u5bdf\u5230\u7684\u6982\u7387 \u6211\u4eec\u5e0c\u671b\u6211\u4eec\u751f\u6210\u7684\u6982\u7387\u5411\u91cf\u5339\u914d\u771f\u5b9e\u6982\u7387 \\(y^{(c-m)},...,y^{(c-1)},y^{(c+1)},...,y^{(c+m)}\\) \uff0cone-hot \u5411\u91cf\u662f\u5b9e\u9645\u7684\u8f93\u51fa\u3002 \u4e0b\u56fe\u662f Skip-Gram \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u548c CBOW \u6a21\u578b\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u6765\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u3002\u4e0e CBOW \u6a21\u578b\u7684\u4e00\u4e2a\u4e3b\u8981\u7684\u4e0d\u540c\u662f\u6211\u4eec\u5f15\u7528\u4e86\u4e00\u4e2a\u6734\u7d20\u7684\u8d1d\u53f6\u65af\u5047\u8bbe\u6765\u62c6\u5206\u6982\u7387\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u5f3a\uff08\u6734\u7d20\uff09\u7684\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u3002\u6362\u800c\u8a00\u4e4b\uff0c \u7ed9\u5b9a\u4e2d\u5fc3\u8bcd\uff0c\u6240\u6709\u8f93\u51fa\u7684\u8bcd\u662f\u5b8c\u5168\u72ec\u7acb\u7684 \u3002(\u5373\u516c\u5f0f1\u81f32\u884c) $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(w_{c-m+j} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(u_{c-m+j} | v_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} \\frac{\\exp \\left(u_{c-m+j}^{T} v_{c}\\right)}{\\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right)} \\ &=-\\sum_{j=0, j \\neq m}^{2 m} u_{c-m+j}^{T} v_{c}+2 m \\log \\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right) \\end{aligned} $$ \u901a\u8fc7\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0e\u672a\u77e5\u53c2\u6570\u76f8\u5173\u7684\u68af\u5ea6\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u901a\u8fc7 SGD \u6765\u66f4\u65b0\u5b83\u4eec\u3002 \u6ce8\u610f $$ \\begin{aligned} J &=-\\sum_{j=0, j \\neq m}^{2 m} \\log P\\left(u_{c-m+j} | v_{c}\\right) \\ &=\\sum_{j=0, j \\neq m}^{2 m} H\\left(\\hat{y}, y_{c-m+j}\\right) \\end{aligned} $$ \u5176\u4e2d \\(H(\\widehat{y},y_{c-m+j})\\) \u662f\u5411\u91cf \\(\\widehat{y}\\) \u7684\u6982\u7387\u548c one-hot \u5411\u91cf \\(y_{c-m+j}\\) \u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5\u3002 \u53ea\u6709\u4e00\u4e2a\u6982\u7387\u5411\u91cf \\(\\hat{y}\\) \u662f\u88ab\u8ba1\u7b97\u7684\u3002Skip-Gram \u5bf9\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u5355\u8bcd\u4e00\u89c6\u540c\u4ec1\uff1a\u8be5\u6a21\u578b\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u7684\u6982\u7387\uff0c\u800c\u4e0e\u5b83\u5230\u4e2d\u5fc3\u5355\u8bcd\u7684\u8ddd\u79bb\u65e0\u5173\u3002 Negative Sampling \u8ba9\u6211\u4eec\u518d\u56de\u5230\u76ee\u6807\u51fd\u6570\u4e0a\u3002\u6ce8\u610f\u5bf9 \\(|V|\\) \u7684\u6c42\u548c\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u4efb\u4f55\u7684\u66f4\u65b0\u6216\u8005\u5bf9\u76ee\u6807\u51fd\u6570\u7684\u8bc4\u4f30\u90fd\u8981\u82b1\u8d39 \\(O(|V|)\\) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4e0d\u53bb\u76f4\u63a5\u8ba1\u7b97\uff0c\u800c\u662f\u53bb\u6c42\u8fd1\u4f3c\u503c\u3002 \u5728\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u7684\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u4e0d\u53bb\u904d\u5386\u6574\u4e2a\u8bcd\u6c47\u8868\uff0c\u800c\u4ec5\u4ec5\u662f\u62bd\u53d6\u4e00\u4e9b\u8d1f\u6837\u4f8b\u3002\u6211\u4eec\u5bf9\u566a\u58f0\u5206\u5e03 \\(P_{n}(w)\\) \u201c\u62bd\u6837\u201d\uff0c\u8fd9\u4e2a\u6982\u7387\u662f\u548c\u8bcd\u9891\u7684\u6392\u5e8f\u76f8\u5339\u914d\u7684\u3002\u4e3a\u52a0\u5f3a\u5bf9\u95ee\u9898\u7684\u8868\u8ff0\u4ee5\u7eb3\u5165\u8d1f\u62bd\u6837\uff0c\u6211\u4eec\u53ea\u9700\u66f4\u65b0\u5176 \u76ee\u6807\u51fd\u6570 \u68af\u5ea6 \u66f4\u65b0\u89c4\u5219 Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u3002\u867d\u7136\u8d1f\u91c7\u6837\u662f\u57fa\u4e8e Skip-Gram \u6a21\u578b\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u5bf9\u4e00\u4e2a\u4e0d\u540c\u7684\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u4f18\u5316\u3002 \u8003\u8651\u4e00\u5bf9\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd \\((w,c)\\) \u3002\u8fd9\u8bcd\u5bf9\u662f\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u96c6\u5417\uff1f\u6211\u4eec\u901a\u8fc7 \\(P(D=1\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002\u76f8\u5e94\u5730\uff0c \\(P(D=0\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u4e0d\u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5bf9 \\(P(D=1\\mid w,c)\\) \u7528 sigmoid \u51fd\u6570\u5efa\u6a21\uff1a \\[ P(D=1 | w, c, \\theta)=\\sigma\\left(v_{c}^{T} v_{w}\\right)=\\frac{1}{1+e^{\\left(-v_{c}^{T} v_{w}\\right)}} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=1\\mid w,c)\\) \uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u4e0d\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=0\\mid w,c)\\) \u3002\u6211\u4eec\u5bf9\u8fd9\u4e24\u4e2a\u6982\u7387\u91c7\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7684\u65b9\u6cd5\uff08\u8fd9\u91cc\u6211\u4eec\u628a \\(\\theta\\) \u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0c\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u662f \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff09 \\[ \\begin{aligned} \\theta &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}} P(D=0 | w, c, \\theta) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}}(1-P(D=1 | w, c, \\theta)) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\sum_{(w, c) \\in D} \\log P(D=1 | w, c, \\theta)+\\sum_{(w, c) \\in \\widetilde{D}} \\log (1-P(D=1 | w, c, \\theta)) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(1-\\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}\\right) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\end{aligned} \\] \u6ce8\u610f\u6700\u5927\u5316\u4f3c\u7136\u51fd\u6570\u7b49\u540c\u4e8e\u6700\u5c0f\u5316\u8d1f\u5bf9\u6570\u4f3c\u7136\uff1a \\[ J=-\\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}-\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\] \u6ce8\u610f \\(\\widetilde{D}\\) \u662f\u201c\u5047\u7684\u201d\u6216\u8005\u201c\u8d1f\u7684\u201d\u8bed\u6599\u3002\u4f8b\u5982\u6211\u4eec\u6709\u53e5\u5b50\u7c7b\u4f3c\u201cstock boil fish is toy\u201d\uff0c\u8fd9\u79cd\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u51fa\u73b0\u65f6\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u6599\u5e93\u4e2d\u968f\u673a\u62bd\u6837\u51fa\u8d1f\u6837\u4f8b \\(\\widetilde{D}\\) \u3002 \u5bf9\u4e8e Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(c\\) \u6765\u89c2\u5bdf\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd \\(c-m+j\\) \u7684\u65b0\u76ee\u6807\u51fd\u6570\u4e3a \\[ -\\log \\sigma\\left(u_{c-m+j}^{T} \\cdot v_{c}\\right)-\\sum_{k=1}^{K} \\log \\sigma\\left(-\\tilde{u}_{k}^{T} \\cdot v_{c}\\right) \\] \u5bf9 CBOW \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u5411\u91cf \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1}+...+v_{c+m}}{2m}\\) \u6765\u89c2\u5bdf\u4e2d\u5fc3\u8bcd \\(u_{c}\\) \u7684\u65b0\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ -log\\,\\sigma(u_{c}^{T}\\cdot \\widehat{v})-\\sum_{k=1}^{K}log\\,\\sigma(-\\widetilde{u}_{k}^{T}\\cdot \\widehat{v}) \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\{\\widetilde{u}_{k}\\mid k=1...K\\}\\) \u662f\u4ece \\(P_{n}(w)\\) \u4e2d\u62bd\u6837\u3002\u6709\u5f88\u591a\u5173\u4e8e\u5982\u4f55\u5f97\u5230\u6700\u597d\u8fd1\u4f3c\u7684\u8ba8\u8bba\uff0c\u4ece\u5b9e\u9645\u6548\u679c\u770b\u6765\u6700\u597d\u7684\u662f\u6307\u6570\u4e3a \u00be \u7684 Unigram \u6a21\u578b\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u662f \u00be\uff1f\u4e0b\u9762\u6709\u4e00\u4e9b\u4f8b\u5982\u53ef\u80fd\u8ba9\u4f60\u6709\u4e00\u4e9b\u76f4\u89c2\u7684\u4e86\u89e3\uff1a \\[ \\begin{eqnarray} is: 0.9^{3/4} &=& 0.92 \\nonumber \\\\ Constitution: 0.09^{3/4}&=& 0.16 \\nonumber \\\\ bombastic:0.01^{3/4}&=& 0.032 \\nonumber \\end{eqnarray} \\] \u201cBombastic\u201d\u73b0\u5728\u88ab\u62bd\u6837\u7684\u6982\u7387\u662f\u4e4b\u524d\u7684\u4e09\u500d\uff0c\u800c\u201cis\u201d\u53ea\u6bd4\u4e4b\u524d\u7684\u624d\u63d0\u9ad8\u4e86\u4e00\u70b9\u70b9\u3002 Hierarchical Softmax Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86 hierarchical softmax\uff0c\u76f8\u6bd4\u666e\u901a\u7684 softmax \u8fd9\u662f\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6cd5\u3002 \u5728\u5b9e\u9645\u4e2d\uff0chierarchical softmax \u5bf9\u4f4e\u9891\u8bcd\u5f80\u5f80\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u8d1f\u91c7\u6837\u5bf9\u9ad8\u9891\u8bcd\u548c\u8f83\u4f4e\u7ef4\u5ea6\u5411\u91cf\u8868\u73b0\u5f97\u66f4\u597d \u3002 Hierarchical softmax \u4f7f\u7528\u4e00\u4e2a\u4e8c\u53c9\u6811\u6765\u8868\u793a\u8bcd\u8868\u4e2d\u7684\u6240\u6709\u8bcd\u3002\u6811\u4e2d\u7684\u6bcf\u4e2a\u53f6\u7ed3\u70b9\u90fd\u662f\u4e00\u4e2a\u5355\u8bcd\uff0c\u800c\u4e14\u53ea\u6709\u4e00\u6761\u8def\u5f84\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u3002\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u6ca1\u6709\u8bcd\u7684\u8f93\u51fa\u8868\u793a\u3002\u76f8\u53cd\uff0c\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\uff08\u6839\u8282\u70b9\u548c\u53f6\u7ed3\u70b9\u9664\u5916\uff09\u4e0e\u6a21\u578b\u8981\u5b66\u4e60\u7684\u5411\u91cf\u76f8\u5173\u8054\u3002\u5355\u8bcd\u4f5c\u4e3a\u8f93\u51fa\u5355\u8bcd\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\u4ece\u6839\u968f\u673a\u6e38\u8d70\u5230\u5355\u8bcd\u6240\u5bf9\u5e94\u7684\u53f6\u7684\u6982\u7387\u3002\u8ba1\u7b97\u6210\u672c\u53d8\u4e3a \\(O(log (|V|))\\) \u800c\u4e0d\u662f \\(O(|V|)\\) \u3002 \u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5411\u91cf \\(w_{i}\\) \u7684\u4e0b\u7684\u5355\u8bcd \\(w\\) \u7684\u6982\u7387 \\(p(w\\mid w_{i})\\) \uff0c\u7b49\u4e8e\u4ece\u6839\u7ed3\u70b9\u5f00\u59cb\u5230\u5bf9\u5e94 w \u7684\u53f6\u7ed3\u70b9\u7ed3\u675f\u7684\u968f\u673a\u6f2b\u6b65\u6982\u7387\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6700\u5927\u7684\u4f18\u52bf\u662f\u8ba1\u7b97\u6982\u7387\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ec5\u4ec5\u662f \\(O(log(|V|))\\) \uff0c\u5bf9\u5e94\u7740\u8def\u5f84\u7684\u957f\u5ea6\u3002 \u4e0b\u56fe\u662f Hierarchical softmax \u7684\u4e8c\u53c9\u6811\u793a\u610f\u56fe \u8ba9\u6211\u4eec\u5f15\u5165\u4e00\u4e9b\u6982\u5ff5\u3002\u4ee4 \\(L(w)\\) \u4e3a\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9 \\(w\\) \u7684\u8def\u5f84\u4e2d\u8282\u70b9\u6570\u76ee\u3002\u4f8b\u5982\uff0c\u4e0a\u56fe\u4e2d\u7684 \\(L(w_{2})\\) \u4e3a 3\u3002\u6211\u4eec\u5b9a\u4e49 \\(n(w,i)\\) \u4e3a\u4e0e\u5411\u91cf \\(v_{n(w,i)}\\) \u76f8\u5173\u7684\u8def\u5f84\u4e0a\u7b2c \\(i\\) \u4e2a\u7ed3\u70b9\u3002\u56e0\u6b64 \\(n(w,1)\\) \u662f\u6839\u7ed3\u70b9\uff0c\u800c \\(n(w,L(w))\\) \u662f \\(w\\) \u7684\u7236\u8282\u70b9\u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9 \\(n\\) \uff0c\u6211\u4eec\u4efb\u610f\u9009\u53d6\u4e00\u4e2a\u5b83\u7684\u5b50\u8282\u70b9\uff0c\u5b9a\u4e49\u4e3a \\(ch(n)\\) \uff08\u4e00\u822c\u662f\u5de6\u8282\u70b9\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6982\u7387\u4e3a \\[ p\\left(w | w_{i}\\right)=\\prod_{j=1}^{L(w)-1} \\sigma\\left([n(w, j+1)=\\operatorname{ch}(n(w, j))] \\cdot v_{n(w, j)}^{T} v_{w_{i}}\\right) \\] \u5176\u4e2d \\[ [x]=\\left\\{\\begin{array}{ll}{1} & {\\text { if } x \\text { is true }} \\\\ {-1} & {\\text { otherwise }}\\end{array}\\right. \\] \u8fd9\u4e2a\u516c\u5f0f\u770b\u8d77\u6765\u975e\u5e38\u590d\u6742\uff0c\u8ba9\u6211\u4eec\u7ec6\u7ec6\u68b3\u7406\u4e00\u4e0b\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5c06\u6839\u636e\u4ece\u6839\u8282\u70b9 \\((n(w,1))\\) \u5230\u53f6\u8282\u70b9 \\((w)\\) \u7684\u8def\u5f84\u7684\u5f62\u72b6\u6765\u8ba1\u7b97\u76f8\u4e58\u7684\u9879\u3002\u5982\u679c\u6211\u4eec\u5047\u8bbe \\(ch(n)\\) \u4e00\u76f4\u90fd\u662f \\(n\\) \u7684\u5de6\u8282\u70b9\uff0c\u7136\u540e\u5f53\u8def\u5f84\u5f80\u5de6\u65f6 \\([n(w,j+1)=ch(n(w,j))]\\) \u7684\u503c\u8fd4\u56de 1\uff0c\u5f80\u53f3\u5219\u8fd4\u56de 0\u3002 \u6b64\u5916\uff0c \\([n(w,j+1)=ch(n(w,j))]\\) \u63d0\u4f9b\u4e86\u5f52\u4e00\u5316\u7684\u4f5c\u7528\u3002\u5728\u8282\u70b9 \\(n\\) \u5904\uff0c\u5982\u679c\u6211\u4eec\u5c06\u53bb\u5f80\u5de6\u548c\u53f3\u8282\u70b9\u7684\u6982\u7387\u76f8\u52a0\uff0c\u5bf9\u4e8e \\(v_{n}^{T}v_{w_{i}}\\) \u7684\u4efb\u4f55\u503c\u5219\u53ef\u4ee5\u68c0\u67e5\uff0c \\[ \\sigma\\left(v_{n}^{T} v_{w_{i}}\\right)+\\sigma\\left(-v_{n}^{T} v_{w_{i}}\\right)=1 \\] \u5f52\u4e00\u5316\u4e5f\u4fdd\u8bc1\u4e86 \\(\\sum_{w=1}^{|V|}P(w\\mid w_{i})=1\\) \uff0c\u548c\u5728\u666e\u901a\u7684 softmax \u662f\u4e00\u6837\u7684\u3002 \u6700\u540e\u6211\u4eec\u8ba1\u7b97\u70b9\u79ef\u6765\u6bd4\u8f83\u8f93\u5165\u5411\u91cf \\(v_{w_{i}}\\) \u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u5411\u91cf \\(v_{n(w,j)}^{T}\\) \u7684\u76f8\u4f3c\u5ea6\u3002\u4e0b\u9762\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u4f8b\u5b50\u3002\u4ee5\u4e0a\u56fe\u4e2d\u7684 \\(w_{2}\\) \u4e3a\u4f8b\uff0c\u4ece\u6839\u8282\u70b9\u8981\u7ecf\u8fc7\u4e24\u6b21\u5de6\u8fb9\u7684\u8fb9\u548c\u4e00\u6b21\u53f3\u8fb9\u7684\u8fb9\u624d\u5230\u8fbe \\(w_{2}\\) \uff0c\u56e0\u6b64 \\[ \\begin{aligned} p\\left(w_{2} | w_{i}\\right) &=p\\left(n\\left(w_{2}, 1\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 2\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 3\\right), \\text { right }\\right) \\\\ &=\\sigma\\left(v_{n\\left(w_{2}, 1\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(v_{n\\left(w_{2}, 2\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(-v_{n\\left(w_{2}, 3\\right)}^{T} v_{w_{i}}\\right) \\end{aligned} \\] \u6211\u4eec\u8bad\u7ec3\u6a21\u578b\u7684\u76ee\u6807\u662f\u6700\u5c0f\u5316\u8d1f\u7684\u5bf9\u6570\u4f3c\u7136 \\(-log\\,P(w\\mid w_{i})\\) \u3002\u4e0d\u662f\u66f4\u65b0\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u800c\u662f\u66f4\u65b0\u66f4\u65b0\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u8282\u70b9\u7684\u5411\u91cf\u3002 \u8be5\u65b9\u6cd5\u7684\u901f\u5ea6\u7531\u6784\u5efa\u4e8c\u53c9\u6811\u7684\u65b9\u5f0f\u786e\u5b9a\uff0c\u5e76\u5c06\u8bcd\u5206\u914d\u7ed9\u53f6\u8282\u70b9\u3002Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u4f7f\u7528\u7684\u662f\u54c8\u592b\u66fc\u6811\uff0c\u5728\u6811\u4e2d\u5206\u914d\u9ad8\u9891\u8bcd\u5230\u8f83\u77ed\u7684\u8def\u5f84\u3002","title":"Iteration Based Methods - Word2vec"},{"location":"CS224n-2019-01-Introduction%20and%20Word%20Vectors/#gensim-word-vectors-example","text":"Gensim\u63d0\u4f9b\u4e86\u5c06 Glove \u8f6c\u5316\u4e3aWord2Vec\u683c\u5f0f\u7684API\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86 most_similar , doesnt_match \u7b49API\u3002\u6211\u4eec\u53ef\u4ee5\u5bf9 most_similar \u8fdb\u884c\u5c01\u88c5\uff0c\u8f93\u51fa\u4e09\u5143\u7ec4\u7684\u7c7b\u6bd4\u7ed3\u679c model = KeyedVectors . load_word2vec_format ( word2vec_glove_file ) model . most_similar ( 'banana' ) def analogy ( x1 , x2 , y1 ): result = model . most_similar ( positive = [ y1 , x2 ], negative = [ x1 ]) return result [ 0 ][ 0 ] analogy ( 'japan' , 'japanese' , 'australia' ) model . doesnt_match ( \"breakfast cereal dinner lunch\" . split ())","title":"Gensim word vectors example"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/","text":"Lecture 02 Word Vectors and Word Senses \u00b6 Lecture Plan Finish looking at word vectors and word2vec Optimization basics Can we capture this essence more effectively by counting? The GloVe model of word vectors Evaluating word vectors Word senses The course Goal : be able to read word embeddings papers by the end of class. Review: Main idea of word2vec \u00b6 \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u904d\u5386\u6574\u4e2a\u8bed\u6599\u5e93\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd \u4f7f\u7528\u5355\u8bcd\u5411\u91cf\u9884\u6d4b\u5468\u56f4\u7684\u5355\u8bcd \u66f4\u65b0\u5411\u91cf\u4ee5\u4fbf\u66f4\u597d\u5730\u9884\u6d4b Word2vec parameters and computations \\(n \\times d \\cdot d \\to 1 \\rightarrow n \\times 1 \\overset{softmax} \\to n \\times 1\\) \u6bcf\u884c\u4ee3\u8868\u4e00\u4e2a\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c\u70b9\u4e58\u540e\u5f97\u5230\u7684\u5206\u6570\u901a\u8fc7softmax\u6620\u5c04\u4e3a\u6982\u7387\u5206\u5e03\uff0c\u5e76\u4e14\u6211\u4eec\u5f97\u5230\u7684\u6982\u7387\u5206\u5e03\u662f\u5bf9\u4e8e\u8be5\u4e2d\u5fc3\u8bcd\u800c\u8a00\u7684\u4e0a\u4e0b\u6587\u4e2d\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\uff0c\u8be5\u5206\u5e03\u4e8e\u4e0a\u4e0b\u6587\u6240\u5728\u7684\u5177\u4f53\u4f4d\u7f6e\u65e0\u5173\uff0c\u6240\u4ee5\u5728\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u9884\u6d4b\u90fd\u662f\u4e00\u6837\u7684 \u6211\u4eec\u5e0c\u671b\u6a21\u578b\u5bf9\u4e0a\u4e0b\u6587\u4e2d(\u76f8\u5f53\u9891\u7e41)\u51fa\u73b0\u7684\u6240\u6709\u5355\u8bcd\u7ed9\u51fa\u4e00\u4e2a\u5408\u7406\u7684\u9ad8\u6982\u7387\u4f30\u8ba1 the, and, that, of \u8fd9\u6837\u7684\u505c\u7528\u8bcd\uff0c\u662f\u6bcf\u4e2a\u5355\u8bcd\u70b9\u4e58\u540e\u5f97\u5230\u7684\u8f83\u5927\u6982\u7387\u7684\u5355\u8bcd \u53bb\u6389\u8fd9\u4e00\u90e8\u5206\u53ef\u4ee5\u4f7f\u8bcd\u5411\u91cf\u6548\u679c\u66f4\u597d Optimization: Gradient Descent \u00b6 Gradient Descent \u6bcf\u6b21\u4f7f\u7528\u5168\u90e8\u6837\u672c\u8fdb\u884c\u66f4\u65b0 Stochastic Gradient Descent \u6bcf\u6b21\u53ea\u662f\u7528\u5355\u4e2a\u6837\u672c\u8fdb\u884c\u66f4\u65b0 Mini-batch\u5177\u6709\u4ee5\u4e0b\u4f18\u70b9 \u901a\u8fc7\u5e73\u5747\u503c\uff0c\u51cf\u5c11\u68af\u5ea6\u4f30\u8ba1\u7684\u566a\u97f3 \u5728GPU\u4e0a\u5e76\u884c\u5316\u8fd0\u7b97\uff0c\u52a0\u5feb\u8fd0\u7b97\u901f\u5ea6 Stochastic gradients with word vectors \\(\\nabla_{\\theta} J_{t}(\\theta)\\) \u5c06\u4f1a\u975e\u5e38\u7a00\u758f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u80fd\u53ea\u66f4\u65b0\u5b9e\u9645\u51fa\u73b0\u7684\u5411\u91cf \u89e3\u51b3\u65b9\u6848 \u9700\u8981\u7a00\u758f\u77e9\u9635\u66f4\u65b0\u64cd\u4f5c\u6765\u53ea\u66f4\u65b0\u77e9\u9635U\u548cV\u4e2d\u7684\u7279\u5b9a\u884c \u9700\u8981\u4fdd\u7559\u5355\u8bcd\u5411\u91cf\u7684\u6563\u5217 \u5982\u679c\u6709\u6570\u767e\u4e07\u4e2a\u5355\u8bcd\u5411\u91cf\uff0c\u5e76\u4e14\u8fdb\u884c\u5206\u5e03\u5f0f\u8ba1\u7b97\uff0c\u90a3\u4e48\u91cd\u8981\u7684\u662f\u4e0d\u5fc5\u5230\u5904\u53d1\u9001\u5de8\u5927\u7684\u66f4\u65b0 Word2vec: More details \u4e3a\u4ec0\u4e48\u4e24\u4e2a\u5411\u91cf\uff1f \u66f4\u5bb9\u6613\u4f18\u5316\uff0c\u6700\u540e\u90fd\u53d6\u5e73\u5747\u503c \u53ef\u4ee5\u6bcf\u4e2a\u5355\u8bcd\u53ea\u7528\u4e00\u4e2a\u5411\u91cf \u4e24\u4e2a\u6a21\u578b\u53d8\u4f53 Skip-grams (SG) \u8f93\u5165\u4e2d\u5fc3\u8bcd\u5e76\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd Continuous Bag of Words (CBOW) \u8f93\u5165\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5e76\u9884\u6d4b\u4e2d\u5fc3\u8bcd \u4e4b\u524d\u4e00\u76f4\u4f7f\u7528naive\u7684softmax(\u7b80\u5355\u4f46\u4ee3\u4ef7\u5f88\u9ad8\u7684\u8bad\u7ec3\u65b9\u6cd5)\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528\u8d1f\u91c7\u6837\u65b9\u6cd5\u52a0\u5feb\u8bad\u7ec3\u901f\u7387 The skip-gram model with negative sampling (HW2) softmax\u4e2d\u7528\u4e8e\u5f52\u4e00\u5316\u7684\u5206\u6bcd\u7684\u8ba1\u7b97\u4ee3\u4ef7\u592a\u9ad8 $$ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} $$ \u6211\u4eec\u5c06\u5728\u4f5c\u4e1a2\u4e2d\u5b9e\u73b0\u4f7f\u7528 negative sampling \u8d1f\u91c7\u6837\u65b9\u6cd5\u7684 skip-gram \u6a21\u578b \u4f7f\u7528\u4e00\u4e2a true pair (\u4e2d\u5fc3\u8bcd\u53ca\u5176\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u8bcd)\u4e0e\u51e0\u4e2a noise pair (\u4e2d\u5fc3\u8bcd\u4e0e\u968f\u673a\u8bcd\u642d\u914d) \u5f62\u6210\u7684\u6837\u672c\uff0c\u8bad\u7ec3\u4e8c\u5143\u903b\u8f91\u56de\u5f52 \u539f\u6587\u4e2d\u7684(\u6700\u5927\u5316)\u76ee\u6807\u51fd\u6570\u662f \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J_{t}(\\theta) \\] \\[ J_{t}(\\theta)=\\log \\sigma\\left(u_{o}^{T} v_{c}\\right)+\\sum_{i=1}^{k} \\mathbb{E}_{j \\sim P(w)}\\left[\\log \\sigma\\left(-u_{j}^{T} v_{c}\\right)\\right] \\] \u672c\u8bfe\u4ee5\u53ca\u4f5c\u4e1a\u4e2d\u7684\u76ee\u6807\u51fd\u6570\u662f \\[ J_{\\text {neg-sample}}\\left(\\boldsymbol{o}, \\boldsymbol{v}_{c}, \\boldsymbol{U}\\right)=-\\log \\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)\\right)-\\sum_{k=1}^{K} \\log \\left(\\sigma\\left(-\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)\\right) \\] \u6211\u4eec\u5e0c\u671b\u4e2d\u5fc3\u8bcd\u4e0e\u771f\u5b9e\u4e0a\u4e0b\u6587\u5355\u8bcd\u7684\u5411\u91cf\u70b9\u79ef\u66f4\u5927\uff0c\u4e2d\u5fc3\u8bcd\u4e0e\u968f\u673a\u5355\u8bcd\u7684\u70b9\u79ef\u66f4\u5c0f k\u662f\u6211\u4eec\u8d1f\u91c7\u6837\u7684\u6837\u672c\u6570\u76ee \\[ P(w)=U(w)^{3 / 4} / Z \\] \u4f7f\u7528\u4e0a\u5f0f\u4f5c\u4e3a\u62bd\u6837\u7684\u5206\u5e03\uff0c \\(U(w)\\) \u662f unigram \u5206\u5e03\uff0c\u901a\u8fc7 \\(\\frac{3}{4}\\) \u6b21\u65b9\uff0c\u76f8\u5bf9\u51cf\u5c11\u5e38\u89c1\u5355\u8bcd\u7684\u9891\u7387\uff0c\u589e\u5927\u7a00\u6709\u8bcd\u7684\u6982\u7387\u3002 \\(Z\\) \u7528\u4e8e\u751f\u6210\u6982\u7387\u5206\u5e03\u3002 But why not capture co-occurrence counts directly? \u00b6 \u5171\u73b0\u77e9\u9635 X \u4e24\u4e2a\u9009\u9879\uff1awindows vs. full document Window \uff1a\u4e0eword2vec\u7c7b\u4f3c\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u5468\u56f4\u90fd\u4f7f\u7528Window\uff0c\u5305\u62ec\u8bed\u6cd5(POS)\u548c\u8bed\u4e49\u4fe1\u606f Word-document \u5171\u73b0\u77e9\u9635\u7684\u57fa\u672c\u5047\u8bbe\u662f\u5728\u540c\u4e00\u7bc7\u6587\u7ae0\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u66f4\u6709\u53ef\u80fd\u76f8\u4e92\u5173\u8054\u3002\u5047\u8bbe\u5355\u8bcd \\(i\\) \u51fa\u73b0\u5728\u6587\u7ae0 \\(j\\) \u4e2d\uff0c\u5219\u77e9\u9635\u5143\u7d20 \\(X_{ij}\\) \u52a0\u4e00\uff0c\u5f53\u6211\u4eec\u5904\u7406\u5b8c\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u6587\u7ae0\u540e\uff0c\u5c31\u5f97\u5230\u4e86\u77e9\u9635 X \uff0c\u5176\u5927\u5c0f\u4e3a \\(|V|\\times M\\) \uff0c\u5176\u4e2d \\(|V|\\) \u4e3a\u8bcd\u6c47\u91cf\uff0c\u800c \\(M\\) \u4e3a\u6587\u7ae0\u6570\u3002\u8fd9\u4e00\u6784\u5efa\u5355\u8bcd\u6587\u7ae0co-occurrence matrix\u7684\u65b9\u6cd5\u4e5f\u662f\u7ecf\u5178\u7684Latent Semantic Analysis\u6240\u91c7\u7528\u7684\u3002 \u6f5c\u5728\u8bed\u4e49\u5206\u6790 \u5229\u7528\u67d0\u4e2a\u5b9a\u957f\u7a97\u53e3\u4e2d\u5355\u8bcd\u4e0e\u5355\u8bcd\u540c\u65f6\u51fa\u73b0\u7684\u6b21\u6570\u6765\u4ea7\u751fwindow-based (word-word) co-occurrence matrix\u3002\u4e0b\u9762\u4ee5\u7a97\u53e3\u957f\u5ea6\u4e3a1\u6765\u4e3e\u4f8b\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u6570\u636e\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u53e5\u5b50\uff1a I like deep learning. I like NLP. I enjoy flying. \u5219\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684word-word co-occurrence matrix: \u4f7f\u7528\u5171\u73b0\u6b21\u6570\u8861\u91cf\u5355\u8bcd\u7684\u76f8\u4f3c\u6027\uff0c\u4f46\u662f\u4f1a\u968f\u7740\u8bcd\u6c47\u91cf\u7684\u589e\u52a0\u800c\u589e\u5927\u77e9\u9635\u7684\u5927\u5c0f\uff0c\u5e76\u4e14\u9700\u8981\u5f88\u591a\u7a7a\u95f4\u6765\u5b58\u50a8\u8fd9\u4e00\u9ad8\u7ef4\u77e9\u9635\uff0c\u540e\u7eed\u7684\u5206\u7c7b\u6a21\u578b\u4e5f\u4f1a\u7531\u4e8e\u77e9\u9635\u7684\u7a00\u758f\u6027\u800c\u5b58\u5728\u7a00\u758f\u6027\u95ee\u9898\uff0c\u4f7f\u5f97\u6548\u679c\u4e0d\u4f73\u3002\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e00\u77e9\u9635\u8fdb\u884c\u964d\u7ef4\uff0c\u83b7\u5f97\u4f4e\u7ef4(25-1000)\u7684\u7a20\u5bc6\u5411\u91cf\u3002 Method 1: Dimensionality Reduction on X (HW1) \u4f7f\u7528SVD\u65b9\u6cd5\u5c06\u5171\u73b0\u77e9\u9635 X \u5206\u89e3\u4e3a \\(U \\Sigma V^{\\top}\\) \uff0c \\(\\sum\\) \u662f\u5bf9\u89d2\u7ebf\u77e9\u9635\uff0c\u5bf9\u89d2\u7ebf\u4e0a\u7684\u503c\u662f\u77e9\u9635\u7684\u5947\u5f02\u503c\u3002 \\(U,V\\) \u662f\u5bf9\u5e94\u4e8e\u884c\u548c\u5217\u7684\u6b63\u4ea4\u57fa\u3002 \u4e3a\u4e86\u51cf\u5c11\u5c3a\u5ea6\u540c\u65f6\u5c3d\u91cf\u4fdd\u5b58\u6709\u6548\u4fe1\u606f\uff0c\u53ef\u4fdd\u7559\u5bf9\u89d2\u77e9\u9635\u7684\u6700\u5927\u7684k\u4e2a\u503c\uff0c\u5e76\u5c06\u77e9\u9635 \\(U,V\\) \u7684\u76f8\u5e94\u7684\u884c\u5217\u4fdd\u7559\u3002\u8fd9\u662f\u7ecf\u5178\u7684\u7ebf\u6027\u4ee3\u6570\u7b97\u6cd5\uff0c\u5bf9\u4e8e\u5927\u578b\u77e9\u9635\u800c\u8a00\uff0c\u8ba1\u7b97\u4ee3\u4ef7\u6602\u8d35\u3002 Hacks to X (several used in Rohde et al. 2005) \u6309\u6bd4\u4f8b\u8c03\u6574 counts \u4f1a\u5f88\u6709\u6548 \u5bf9\u9ad8\u9891\u8bcd\u8fdb\u884c\u7f29\u653e(\u8bed\u6cd5\u6709\u592a\u591a\u7684\u5f71\u54cd) \u4f7f\u7528log\u8fdb\u884c\u7f29\u653e \\(min(X, t), t \\approx 100\\) \u76f4\u63a5\u5168\u90e8\u5ffd\u89c6 \u5728\u57fa\u4e8ewindow\u7684\u8ba1\u6570\u4e2d\uff0c\u63d0\u9ad8\u66f4\u52a0\u63a5\u8fd1\u7684\u5355\u8bcd\u7684\u8ba1\u6570 \u4f7f\u7528Pearson\u76f8\u5173\u7cfb\u6570 Conclusion\uff1a\u5bf9\u8ba1\u6570\u8fdb\u884c\u5904\u7406\u662f\u53ef\u4ee5\u5f97\u5230\u6709\u6548\u7684\u8bcd\u5411\u91cf\u7684 \\(drive \\to driver , swim \\to swimmer, teach \\to teacher\\) \u5728\u5411\u91cf\u4e2d\u51fa\u73b0\u7684\u6709\u8da3\u7684\u53e5\u6cd5\u6a21\u5f0f\uff1a\u8bed\u4e49\u5411\u91cf\u57fa\u672c\u4e0a\u662f\u7ebf\u6027\u7ec4\u4ef6\uff0c\u867d\u7136\u6709\u4e00\u4e9b\u6446\u52a8\uff0c\u4f46\u662f\u57fa\u672c\u662f\u5b58\u5728\u52a8\u8bcd\u548c\u52a8\u8bcd\u5b9e\u65bd\u8005\u7684\u65b9\u5411\u3002 \u57fa\u4e8e\u8ba1\u6570\uff1a\u4f7f\u7528\u6574\u4e2a\u77e9\u9635\u7684\u5168\u5c40\u7edf\u8ba1\u6570\u636e\u6765\u76f4\u63a5\u4f30\u8ba1 \u4f18\u70b9 \u8bad\u7ec3\u5feb\u901f \u7edf\u8ba1\u6570\u636e\u9ad8\u6548\u5229\u7528 \u7f3a\u70b9 \u4e3b\u8981\u7528\u4e8e\u6355\u6349\u5355\u8bcd\u76f8\u4f3c\u6027 \u5bf9\u5927\u91cf\u6570\u636e\u7ed9\u4e88\u6bd4\u4f8b\u5931\u8c03\u7684\u91cd\u89c6 \u8f6c\u6362\u8ba1\u6570\uff1a\u5b9a\u4e49\u6982\u7387\u5206\u5e03\u5e76\u8bd5\u56fe\u9884\u6d4b\u5355\u8bcd \u4f18\u70b9 \u63d0\u9ad8\u5176\u4ed6\u4efb\u52a1\u7684\u6027\u80fd \u80fd\u6355\u83b7\u9664\u4e86\u5355\u8bcd\u76f8\u4f3c\u6027\u4ee5\u5916\u7684\u590d\u6742\u7684\u6a21\u5f0f \u7f3a\u70b9 \u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u6709\u5173\u7684\u91cf\u8868 \u7edf\u8ba1\u6570\u636e\u7684\u4f4e\u6548\u4f7f\u7528\uff08 \u91c7\u6837\u662f\u5bf9\u7edf\u8ba1\u6570\u636e\u7684\u4f4e\u6548\u4f7f\u7528 \uff09 Encoding meaning in vector differences \u00b6 \u5c06\u4e24\u4e2a\u6d41\u6d3e\u7684\u60f3\u6cd5\u7ed3\u5408\u8d77\u6765\uff0c\u5728\u795e\u7ecf\u7f51\u7edc\u4e2d\u4f7f\u7528\u8ba1\u6570\u77e9\u9635 \u5173\u4e8eGlove\u7684\u7406\u8bba\u5206\u6790\u9700\u8981\u9605\u8bfb\u539f\u6587\uff0c\u4e5f\u53ef\u4ee5\u9605\u8bfb CS224N\u7b14\u8bb0(\u4e8c)\uff1aGloVe \u5173\u952e\u601d\u60f3 \uff1a\u5171\u73b0\u6982\u7387\u7684\u6bd4\u503c\u53ef\u4ee5\u5bf9meaning component\u8fdb\u884c\u7f16\u7801 \u91cd\u70b9\u4e0d\u662f\u5355\u4e00\u7684\u6982\u7387\u5927\u5c0f\uff0c\u91cd\u70b9\u662f\u4ed6\u4eec\u4e4b\u95f4\u7684\u6bd4\u503c\uff0c\u5176\u4e2d\u8574\u542b\u7740meaning component\u3002 \u4f8b\u5982\u6211\u4eec\u60f3\u533a\u5206\u70ed\u529b\u5b66\u4e0a\u4e24\u79cd\u4e0d\u540c\u72b6\u6001ice\u51b0\u4e0e\u84b8\u6c7dsteam\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u53ef\u901a\u8fc7\u4e0e\u4e0d\u540c\u7684\u5355\u8bcd x \u7684co-occurrence probability \u7684\u6bd4\u503c\u6765\u63cf\u8ff0\u3002 \u4f8b\u5982\u5bf9\u4e8esolid\u56fa\u6001\uff0c\u867d\u7136 \\(P(solid|ice)\\) \u4e0e \\(P(solid|steam)\\) \u672c\u8eab\u5f88\u5c0f\uff0c\u4e0d\u80fd\u900f\u9732\u6709\u6548\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u6bd4\u503c \\(\\frac{P(solid|ice)}{P(solid|steam)}\\) \u5374\u8f83\u5927\uff0c\u56e0\u4e3asolid\u66f4\u5e38\u7528\u6765\u63cf\u8ff0ice\u7684\u72b6\u6001\u800c\u4e0d\u662fsteam\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u5728ice\u7684\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u51e0\u7387\u8f83\u5927 \u5bf9\u4e8egas\u5219\u6070\u6070\u76f8\u53cd\uff0c\u800c\u5bf9\u4e8ewater\u8fd9\u79cd\u63cf\u8ff0ice\u4e0esteam\u5747\u53ef\u6216\u8005fashion\u8fd9\u79cd\u4e0e\u4e24\u8005\u90fd\u6ca1\u4ec0\u4e48\u8054\u7cfb\u7684\u5355\u8bcd\uff0c\u5219\u6bd4\u503c\u63a5\u8fd1\u4e8e1\u3002\u6240\u4ee5\u76f8\u8f83\u4e8e\u5355\u7eaf\u7684co-occurrence probability\uff0c\u5b9e\u9645\u4e0aco-occurrence probability\u7684\u76f8\u5bf9\u6bd4\u503c\u66f4\u6709\u610f\u4e49 \u6211\u4eec\u5982\u4f55\u5728\u8bcd\u5411\u91cf\u7a7a\u95f4\u4e2d\u4ee5\u7ebf\u6027meaning component\u7684\u5f62\u5f0f\u6355\u83b7\u5171\u73b0\u6982\u7387\u7684\u6bd4\u503c\uff1f log-bilinear \u6a21\u578b : \\(w_{i} \\cdot w_{j}=\\log P(i | j)\\) \u5411\u91cf\u5dee\u5f02 : \\(w_{x} \\cdot\\left(w_{a}-w_{b}\\right)=\\log \\frac{P(x | a)}{P(x | b)}\\) \u5982\u679c\u4f7f\u5411\u91cf\u70b9\u79ef\u7b49\u4e8e\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u90a3\u4e48\u5411\u91cf\u5dee\u5f02\u53d8\u6210\u4e86\u5171\u73b0\u6982\u7387\u7684\u6bd4\u7387 \\[ J=\\sum_{i, j=1}^{V} f\\left(X_{i j}\\right)\\left(w_{i}^{T} \\tilde{w}_{j}+b_{i}+\\tilde{b}_{j}-\\log X_{i j}\\right)^{2} \\] \u4f7f\u7528\u5e73\u65b9\u8bef\u5dee\u4fc3\u4f7f\u70b9\u79ef\u5c3d\u53ef\u80fd\u5f97\u63a5\u8fd1\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570 \u4f7f\u7528 \\(f(x)\\) \u5bf9\u5e38\u89c1\u5355\u8bcd\u8fdb\u884c\u9650\u5236 \u4f18\u70b9 \u8bad\u7ec3\u5feb\u901f \u53ef\u4ee5\u6269\u5c55\u5230\u5927\u578b\u8bed\u6599\u5e93 \u5373\u4f7f\u662f\u5c0f\u8bed\u6599\u5e93\u548c\u5c0f\u5411\u91cf\uff0c\u6027\u80fd\u4e5f\u5f88\u597d How to evaluate word vectors? \u00b6 \u4e0eNLP\u7684\u4e00\u822c\u8bc4\u4f30\u76f8\u5173\uff1a\u5185\u5728\u4e0e\u5916\u5728 \u5185\u5728 \u5bf9\u7279\u5b9a/\u4e2d\u95f4\u5b50\u4efb\u52a1\u8fdb\u884c\u8bc4\u4f30 \u8ba1\u7b97\u901f\u5ea6\u5feb \u6709\u52a9\u4e8e\u7406\u89e3\u8fd9\u4e2a\u7cfb\u7edf \u4e0d\u6e05\u695a\u662f\u5426\u771f\u7684\u6709\u7528\uff0c\u9664\u975e\u4e0e\u5b9e\u9645\u4efb\u52a1\u5efa\u7acb\u4e86\u76f8\u5173\u6027 \u5916\u5728 \u5bf9\u771f\u5b9e\u4efb\u52a1\u7684\u8bc4\u4f30 \u8ba1\u7b97\u7cbe\u786e\u5ea6\u53ef\u80fd\u9700\u8981\u5f88\u957f\u65f6\u95f4 \u4e0d\u6e05\u695a\u5b50\u7cfb\u7edf\u662f\u95ee\u9898\u6240\u5728\uff0c\u662f\u4ea4\u4e92\u95ee\u9898\uff0c\u8fd8\u662f\u5176\u4ed6\u5b50\u7cfb\u7edf \u5982\u679c\u7528\u53e6\u4e00\u4e2a\u5b50\u7cfb\u7edf\u66ff\u6362\u4e00\u4e2a\u5b50\u7cfb\u7edf\u53ef\u4ee5\u63d0\u9ad8\u7cbe\u786e\u5ea6 Intrinsic word vector evaluation \u8bcd\u5411\u91cf\u7c7b\u6bd4 a:b :: c:? \\[ d=\\arg \\max _{i} \\frac{\\left(x_{b}-x_{a}+x_{c}\\right)^{T} x_{i}}{\\left\\|x_{b}-x_{a}+x_{c}\\right\\|} \\] \u901a\u8fc7\u52a0\u6cd5\u540e\u7684\u4f59\u5f26\u8ddd\u79bb\u662f\u5426\u80fd\u5f88\u597d\u5730\u6355\u6349\u5230\u76f4\u89c2\u7684\u8bed\u4e49\u548c\u53e5\u6cd5\u7c7b\u6bd4\u95ee\u9898\u6765\u8bc4\u4f30\u5355\u8bcd\u5411\u91cf \u4ece\u641c\u7d22\u4e2d\u4e22\u5f03\u8f93\u5165\u7684\u5355\u8bcd \u95ee\u9898:\u5982\u679c\u6709\u4fe1\u606f\u4f46\u4e0d\u662f\u7ebf\u6027\u7684\u600e\u4e48\u529e\uff1f Glove\u53ef\u89c6\u5316\u6548\u679c \u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u96c6\u8bc4\u4f30\u8bed\u6cd5\u548c\u8bed\u4e49\u4e0a\u7684\u6548\u679c Analogy evaluation and hyperparameters 300\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u8bcd\u5411\u91cf\u7ef4\u5ea6 \u4e0d\u5bf9\u79f0\u4e0a\u4e0b\u6587(\u53ea\u4f7f\u7528\u5355\u4fa7\u7684\u5355\u8bcd)\u4e0d\u662f\u5f88\u597d\uff0c\u4f46\u662f\u8fd9\u5728\u4e0b\u6e38\u4efb\u52a1\u91cd\u53ef\u80fd\u4e0d\u540c window size \u8bbe\u4e3a 8 \u5bf9 Glove\u5411\u91cf\u6765\u8bf4\u6bd4\u8f83\u597d \u5206\u6790 window size\u8bbe\u4e3a2\u7684\u65f6\u5019\u5b9e\u9645\u4e0a\u6709\u6548\u7684\uff0c\u5e76\u4e14\u5bf9\u4e8e\u53e5\u6cd5\u5206\u6790\u662f\u66f4\u597d\u7684\uff0c\u56e0\u4e3a\u53e5\u6cd5\u6548\u679c\u975e\u5e38\u5c40\u90e8 On the Dimensionality of Word Embedding \u5229\u7528\u77e9\u9635\u6444\u52a8\u7406\u8bba\uff0c\u63ed\u793a\u4e86\u8bcd\u5d4c\u5165\u7ef4\u6570\u9009\u62e9\u7684\u57fa\u672c\u7684\u504f\u5dee\u4e0e\u65b9\u6cd5\u7684\u6743\u8861 \u5f53\u6301\u7eed\u589e\u5927\u8bcd\u5411\u91cf\u7ef4\u5ea6\u7684\u65f6\u5019\uff0c\u8bcd\u5411\u91cf\u7684\u6548\u679c\u4e0d\u4f1a\u4e00\u76f4\u53d8\u5dee\u5e76\u4e14\u4f1a\u4fdd\u6301\u5e73\u7a33 Analogy evaluation and hyperparameters \u8bad\u7ec3\u65f6\u95f4\u8d8a\u957f\u8d8a\u597d \u6570\u636e\u96c6\u8d8a\u5927\u8d8a\u597d\uff0c\u5e76\u4e14\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\u6bd4\u65b0\u95fb\u6587\u672c\u6570\u636e\u96c6\u8981\u597d \u56e0\u4e3a\u7ef4\u57fa\u767e\u79d1\u5c31\u662f\u5728\u89e3\u91ca\u6982\u5ff5\u4ee5\u53ca\u4ed6\u4eec\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u8054\uff0c\u66f4\u591a\u7684\u8bf4\u660e\u6027\u6587\u672c\u663e\u793a\u4e86\u4e8b\u7269\u4e4b\u95f4\u7684\u6240\u6709\u8054\u7cfb \u800c\u65b0\u95fb\u5e76\u4e0d\u53bb\u89e3\u91ca\uff0c\u800c\u53ea\u662f\u53bb\u9610\u8ff0\u4e00\u4e9b\u4e8b\u4ef6 Another intrinsic word vector evaluation \u4f7f\u7528 cosine similarity \u8861\u91cf\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684\u76f8\u4f3c\u7a0b\u5ea6 Word senses and word sense ambiguity \u00b6 \u5927\u591a\u6570\u5355\u8bcd\u90fd\u662f\u591a\u4e49\u7684 \u7279\u522b\u662f\u5e38\u89c1\u5355\u8bcd \u7279\u522b\u662f\u5b58\u5728\u5df2\u4e45\u7684\u5355\u8bcd Improving Word Representations Via Global Context And Multiple Word Prototypes (Huang et al. 2012) \u5c06\u5e38\u7528\u8bcd\u7684\u6240\u6709\u4e0a\u4e0b\u6587\u8fdb\u884c\u805a\u7c7b\uff0c\u901a\u8fc7\u8be5\u8bcd\u5f97\u5230\u4e00\u4e9b\u6e05\u6670\u7684\u7c07\uff0c\u4ece\u800c\u5c06\u8fd9\u4e2a\u5e38\u7528\u8bcd\u5206\u89e3\u4e3a\u591a\u4e2a\u5355\u8bcd\uff0c\u4f8b\u5982 bank_1, bank_2, bank_3 \u867d\u7136\u8fd9\u5f88\u7c97\u7cd9\uff0c\u5e76\u4e14\u6709\u65f6sensors\u4e4b\u95f4\u7684\u5212\u5206\u4e5f\u4e0d\u662f\u5f88\u660e\u786e\u751a\u81f3\u76f8\u4e92\u91cd\u53e0 Linear Algebraic Structure of Word Senses, with Applications to Polysemy\u3001 \u5355\u8bcd\u5728\u6807\u51c6\u5355\u8bcd\u5d4c\u5165(\u5982word2vec)\u4e2d\u7684\u4e0d\u540c\u542b\u4e49\u4ee5\u7ebf\u6027\u53e0\u52a0(\u52a0\u6743\u548c)\u7684\u5f62\u5f0f\u5b58\u5728\uff0c \\(f\\) \u6307\u9891\u7387 \\[ v_{\\text { pike }}=\\alpha_{1} v_{\\text { pike }_{1}}+\\alpha_{2} v_{\\text { pike }_{2}}+\\alpha_{3} v_{\\text { pike }_{3}} \\\\ \\alpha_{1}=\\frac{f_{1}}{f_{1}+f_{2}+f_{3}} \\] \u4ee4\u4eba\u60ca\u8bb6\u7684\u7ed3\u679c\uff0c\u53ea\u662f\u52a0\u6743\u5e73\u5747\u503c\u5c31\u5df2\u7ecf\u53ef\u4ee5\u83b7\u5f97\u5f88\u597d\u7684\u6548\u679c \u7531\u4e8e\u4ece\u7a00\u758f\u7f16\u7801\u4e2d\u5f97\u5230\u7684\u6982\u5ff5\uff0c\u4f60\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5c06\u611f\u5b98\u5206\u79bb\u51fa\u6765(\u524d\u63d0\u662f\u5b83\u4eec\u76f8\u5bf9\u6bd4\u8f83\u5e38\u89c1) \u53ef\u4ee5\u7406\u89e3\u4e3a\u7531\u4e8e\u5355\u8bcd\u5b58\u5728\u4e8e\u9ad8\u7ef4\u7684\u5411\u91cf\u7a7a\u95f4\u4e4b\u4e2d\uff0c\u4e0d\u540c\u7684\u7eac\u5ea6\u6240\u5305\u542b\u7684\u542b\u4e49\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u52a0\u6743\u5e73\u5747\u503c\u5e76\u4e0d\u4f1a\u635f\u5bb3\u5355\u8bcd\u5728\u4e0d\u540c\u542b\u4e49\u6240\u5c5e\u7684\u7eac\u5ea6\u4e0a\u5b58\u50a8\u7684\u4fe1\u606f Extrinsic word vector evaluation \u5355\u8bcd\u5411\u91cf\u7684\u5916\u90e8\u8bc4\u4f30\uff1a\u8bcd\u5411\u91cf\u53ef\u4ee5\u5e94\u7528\u4e8eNLP\u7684\u5f88\u591a\u4efb\u52a1 Notes 02 GloVe, Evaluation and Training \u00b6 Keyphrases : Global Vectors for Word Representation (GloVe). Intrinsic and extrinsic evaluations. Effect of hyperparameters on analogy evaluation tasks. Correlation of human judgment with word vector distances. Dealing with ambiguity in word using contexts. Window classification. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u9996\u5148\u4ecb\u7ecd\u4e86\u8bad\u7ec3\u8bcd\u5411\u91cf\u7684Glove\u6a21\u578b\u3002\u7136\u540e\uff0c\u5b83\u6269\u5c55\u4e86\u6211\u4eec\u5bf9\u8bcd\u5411\u91cf(\u6216\u79f0\u8bcd\u5d4c\u5165)\u7684\u8ba8\u8bba\uff0c\u770b\u770b\u5b83\u4eec\u662f\u5982\u4f55\u901a\u8fc7\u5185\u90e8\u548c\u5916\u90e8\u6765\u8bc4\u4f30\u7684\u3002\u6211\u4eec\u8ba8\u8bba\u4e86\u4ee5\u8bcd\u7c7b\u6bd4\u4f5c\u4e3a\u4e00\u79cd\u5185\u5728\u8bc4\u4ef7\u6280\u672f\u7684\u4f8b\u5b50\uff0c\u4ee5\u53ca\u5b83\u5982\u4f55\u88ab\u7528\u6765\u8c03\u6574\u8bcd\u5d4c\u5165\u6280\u672f\u3002\u7136\u540e\u6211\u4eec\u8ba8\u8bba\u4e86\u8bad\u7ec3\u6a21\u578b\u7684\u6743\u91cd/\u53c2\u6570\u548c\u8bcd\u5411\u91cf\u7684\u5916\u90e8\u4efb\u52a1\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u4f5c\u4e3a\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u7684\u6a21\u578b\u3002 1 Global Vectors for Word Representation (GloVe) \u00b6 1.1 Comparison with Previous Methods \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u7814\u7a76\u4e86\u4e24\u7c7b\u4e3b\u8981\u7684\u8bcd\u5d4c\u5165\u65b9\u6cd5\u3002\u7b2c\u4e00\u7c7b\u662f\u57fa\u4e8e\u7edf\u8ba1\u5e76\u4e14\u4f9d\u8d56\u77e9\u9635\u5206\u89e3\uff08\u4f8b\u5982LSA\uff0cHAL\uff09\u3002\u867d\u7136\u8fd9\u7c7b\u65b9\u6cd5\u6709\u6548\u5730\u5229\u7528\u4e86**\u5168\u5c40\u7684\u4fe1\u606f**\uff0c\u5b83\u4eec\u4e3b\u8981\u7528\u4e8e\u6355\u83b7\u5355\u8bcd\u7684**\u76f8\u4f3c\u6027**\uff0c\u4f46\u662f\u5bf9\u4f8b\u5982\u5355\u8bcd\u7c7b\u6bd4\u7684\u4efb\u52a1\u4e0a\u8868\u73b0\u4e0d\u597d\u3002\u53e6\u5916\u4e00\u7c7b\u65b9\u6cd5\u662f\u57fa\u4e8e\u6d45\u5c42\u7a97\u53e3\uff08\u4f8b\u5982\uff0cSkip-Gram \u548c CBOW \u6a21\u578b\uff09\uff0c\u8fd9\u7c7b\u6a21\u578b\u901a\u8fc7\u5728\u5c40\u90e8\u4e0a\u4e0b\u6587\u7a97\u53e3\u901a\u8fc7\u9884\u6d4b\u6765\u5b66\u4e60\u8bcd\u5411\u91cf\u3002\u8fd9\u4e9b\u6a21\u578b\u9664\u4e86\u5728\u5355\u8bcd\u76f8\u4f3c\u6027\u4efb\u52a1\u4e0a\u8868\u73b0\u826f\u597d\u5916\uff0c\u8fd8\u5c55\u793a\u4e86\u6355\u83b7**\u590d\u6742\u8bed\u8a00\u6a21\u5f0f**\u80fd\u529b\uff0c\u4f46\u672a\u80fd\u5229\u7528\u5230\u5168\u5c40\u5171\u73b0\u7edf\u8ba1\u6570\u636e\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0cGloVe \u7531\u4e00\u4e2a\u52a0\u6743\u6700\u5c0f\u4e8c\u4e58\u6a21\u578b\u7ec4\u6210\uff0c\u57fa\u4e8e\u5168\u5c40word-word\u5171\u73b0\u8ba1\u6570\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ece\u800c\u6709\u6548\u5730\u5229\u7528\u5168\u5c40\u7edf\u8ba1\u6570\u636e\u3002\u6a21\u578b\u751f\u6210\u4e86\u5305\u542b\u6709\u610f\u4e49\u7684\u5b50\u7ed3\u6784\u7684\u5355\u8bcd\u5411\u91cf\u7a7a\u95f4\uff0c\u5728\u8bcd\u7c7b\u6bd4\u4efb\u52a1\u4e0a\u8868\u73b0\u975e\u5e38\u51fa\u8272\u3002 Glove \u5229\u7528\u5168\u5c40\u7edf\u8ba1\u91cf\uff0c\u4ee5\u6700\u5c0f\u4e8c\u4e58\u4e3a\u76ee\u6807\uff0c\u9884\u6d4b\u5355\u8bcd \\(j\\) \u51fa\u73b0\u5728\u5355\u8bcd \\(i\\) \u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\u3002 1.2 Co-occurrence Matrix \u00b6 \\(X\\) \u8868\u793a word-word \u5171\u73b0\u77e9\u9635\uff0c\u5176\u4e2d \\(X_{ij}\\) \u8868\u793a\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6b21\u6570\u3002\u4ee4 \\(X_{i}=\\sum_{k}X_{ik}\\) \u4e3a\u4efb\u610f\u8bcd \\(k\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6b21\u6570\u3002\u6700\u540e\uff0c\u4ee4 \\(P_{ij}=P(w_{j}\\mid w_{i})=\\frac{X_{ij}}{X_{i}}\\) \u662f\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6982\u7387\u3002 \u8ba1\u7b97\u8fd9\u4e2a\u77e9\u9635\u9700\u8981\u904d\u5386\u4e00\u6b21\u6574\u4e2a\u8bed\u6599\u5e93\u83b7\u5f97\u7edf\u8ba1\u4fe1\u606f\u3002\u5bf9\u5e9e\u5927\u7684\u8bed\u6599\u5e93\uff0c\u8fd9\u6837\u7684\u904d\u5386\u4f1a\u4ea7\u751f\u975e\u5e38\u5927\u7684\u8ba1\u7b97\u91cf\uff0c\u4f46\u662f\u8fd9\u53ea\u662f\u4e00\u6b21\u6027\u7684\u524d\u671f\u6295\u5165\u6210\u672c\u3002 1.3 Least Squares Objective \u00b6 \u56de\u60f3\u4e00\u4e0b Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u4f7f\u7528 softmax \u6765\u8ba1\u7b97\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6982\u7387\u3002 \\[ Q_{ij}=\\frac{exp(u_{j}^{T}v_{i})}{\\sum_{w=1}^{W}exp(u_{w}^{T}v_{i})} \\] \u8bad\u7ec3\u65f6\u4ee5\u5728\u7ebf\u968f\u673a\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u4f46\u662f\u9690\u542b\u7684\u5168\u5c40\u4ea4\u53c9\u71b5\u635f\u5931\u53ef\u4ee5\u5982\u4e0b\u8ba1\u7b97\uff1a \\[ J=-\\sum_{i\\in corpus} \\sum_{j\\in context(i)}log\\;Q_{ij} \\] \u540c\u6837\u7684\u5355\u8bcd \\(i\\) \u548c \\(j\\) \u53ef\u80fd\u5728\u8bed\u6599\u5e93\u4e2d\u51fa\u73b0\u591a\u6b21\uff0c\u56e0\u6b64\u9996\u5148\u5c06 \\(i\\) \u548c \\(j\\) \u76f8\u540c\u7684\u503c\u7ec4\u5408\u8d77\u6765\u66f4\u6709\u6548\uff1a \\[ J=-\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{ij}log\\;Q_{ij} \\] \u5176\u4e2d\uff0c\u5171\u73b0\u9891\u7387\u7684\u503c\u662f\u901a\u8fc7\u5171\u73b0\u77e9\u9635 \\(X\\) \u7ed9\u5b9a\u3002 \u4ea4\u53c9\u71b5\u635f\u5931\u7684\u4e00\u4e2a\u663e\u7740\u7f3a\u70b9\u662f\u8981\u6c42\u5206\u5e03 \\(Q\\) \u88ab\u6b63\u786e\u5f52\u4e00\u5316\uff0c\u56e0\u4e3a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u7684\u6c42\u548c\u7684\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u6700\u5c0f\u4e8c\u4e58\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5176\u4e2d \\(P\\) \u548c \\(Q\\) \u7684\u5f52\u4e00\u5316\u56e0\u5b50\u88ab\u4e22\u5f03\u4e86\uff1a \\[ \\widehat{J}=\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(\\widehat{P}_{ij}-\\widehat{Q}_{ij})^{2} \\] \u5176\u4e2d \\(\\hat{P}_{i j}=X_{i j} \\text { and } \\hat{Q}_{i j}=\\exp \\left(\\vec{u}_{j}^{T} \\vec{v}_{i}\\right)\\) \u662f\u672a\u5f52\u4e00\u5316\u5206\u5e03\u3002\u8fd9\u4e2a\u516c\u5f0f\u5e26\u6765\u4e86\u4e00\u4e2a\u65b0\u7684\u95ee\u9898\uff0c \\(X_{ij}\\) \u7ecf\u5e38\u4f1a\u662f\u5f88\u5927\u7684\u503c\uff0c\u4ece\u800c\u96be\u4ee5\u4f18\u5316\u3002\u4e00\u4e2a\u6709\u6548\u7684\u6539\u53d8\u662f\u6700\u5c0f\u5316 \\(\\widehat{P}\\) \u548c \\(\\widehat{Q}\\) \u5bf9\u6570\u7684\u5e73\u65b9\u8bef\u5dee\uff1a \\[ \\begin{eqnarray} \\widehat{J} &=&\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(log(\\widehat{P}_{ij})-log(\\widehat{Q}_{ij}))^{2} \\nonumber \\\\ &=& \\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(u_{j}^{T}v_{i}-log\\; X_{ij})^{2} \\nonumber \\end{eqnarray} \\] \u53e6\u5916\u4e00\u4e2a\u95ee\u9898\u662f\u6743\u503c\u56e0\u5b50 \\(X_{i}\\) \u4e0d\u80fd\u4fdd\u8bc1\u662f\u6700\u4f18\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u66f4\u4e00\u822c\u5316\u7684\u6743\u503c\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u7531\u5730\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u5355\u8bcd\uff1a \\[ \\widehat{J}=\\sum_{i=1}^{W}\\sum_{j=1}^{W}f(X_{ij})(u_{j}^{T}v_{i}-log\\; X_{ij})^{2} \\] 1.4 Conclusion \u00b6 \u603b\u800c\u8a00\u4e4b\uff0cGloVe \u6a21\u578b\u4ec5\u5bf9\u5355\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\u7684\u975e\u96f6\u5143\u7d20\u8bad\u7ec3\uff0c\u4ece\u800c\u6709\u6548\u5730\u5229\u7528\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\uff0c\u5e76\u751f\u6210\u5177\u6709\u6709\u610f\u4e49\u7684\u5b50\u7ed3\u6784\u5411\u91cf\u7a7a\u95f4\u3002\u7ed9\u51fa\u76f8\u540c\u7684\u8bed\u6599\u5e93\uff0c\u8bcd\u6c47\uff0c\u7a97\u53e3\u5927\u5c0f\u548c\u8bad\u7ec3\u65f6\u95f4\uff0c\u5b83\u7684\u8868\u73b0\u90fd\u4f18\u4e8e word2vec\uff0c\u5b83\u53ef\u4ee5\u66f4\u5feb\u5730\u5b9e\u73b0\u66f4\u597d\u7684\u6548\u679c\uff0c\u5e76\u4e14\u65e0\u8bba\u901f\u5ea6\u5982\u4f55\uff0c\u90fd\u80fd\u83b7\u5f97\u6700\u4f73\u6548\u679c\u3002 2 Evaluation of Word Vectors \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u8bf8\u5982 Word2Vec \u548c GloVe \u6765\u8bad\u7ec3\u548c\u53d1\u73b0\u8bed\u4e49\u7a7a\u95f4\u4e2d\u7684\u81ea\u7136\u8bed\u8a00\u8bcd\u8bed\u7684\u6f5c\u5728\u5411\u91cf\u8868\u793a\u3002\u5728\u8fd9\u90e8\u5206\uff0c\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u91cf\u5316\u8bc4\u4f30\u8bcd\u5411\u91cf\u7684\u8d28\u91cf\u3002 2.1 Intrinsic Evaluation \u00b6 \u8bcd\u5411\u91cf\u7684\u5185\u90e8\u8bc4\u4f30\u662f\u5bf9\u4e00\u7ec4\u7531\u5982 Word2Vec \u6216 GloVe \u751f\u6210\u7684\u8bcd\u5411\u91cf\u5728\u7279\u5b9a\u7684\u4e2d\u95f4\u5b50\u4efb\u52a1\uff08\u5982\u8bcd\u7c7b\u6bd4\uff09\u4e0a\u7684\u8bc4\u4f30\u3002\u8fd9\u4e9b\u5b50\u4efb\u52a1\u901a\u5e38\u7b80\u5355\u800c\u4e14\u8ba1\u7b97\u901f\u5ea6\u5feb\uff0c\u4ece\u800c\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u751f\u6210\u7684\u7684\u8bcd\u5411\u91cf\u3002\u5185\u90e8\u8bc4\u4f30\u901a\u5e38\u5e94\u8be5\u8fd4\u56de\u7ed9\u6211\u4eec\u4e00\u4e2a\u6570\u503c\uff0c\u6765\u8868\u793a\u8fd9\u4e9b\u8bcd\u5411\u91cf\u5728\u8bc4\u4f30\u5b50\u4efb\u52a1\u4e0a\u7684\u8868\u73b0\u3002 \u5bf9\u7279\u5b9a\u7684\u4e2d\u95f4\u4efb\u52a1\u8fdb\u884c\u8bc4\u4f30 \u53ef\u4ee5\u5f88\u5feb\u7684\u8ba1\u7b97\u6027\u80fd \u5e2e\u52a9\u7406\u89e3\u5b50\u7cfb\u7edf \u9700\u8981\u548c\u771f\u5b9e\u7684\u4efb\u52a1\u6b63\u76f8\u5173\u6765\u786e\u5b9a\u6709\u7528\u6027 \u5728\u4e0b\u56fe\u4e2d\uff0c\u5de6\u5b50\u7cfb\u7edf\uff08\u7ea2\u8272\uff09\u8bad\u7ec3\u7684\u8ba1\u7b97\u91cf\u5927\uff0c\u56e0\u6b64\u66f4\u6539\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5b50\u7cfb\u7edf\uff08\u7eff\u8272\uff09\u4f5c\u5185\u90e8\u8bc4\u4f30\u3002 **\u52a8\u673a\uff1a**\u6211\u4eec\u8003\u8651\u521b\u5efa\u4e00\u4e2a\u95ee\u7b54\u7cfb\u7edf\uff0c\u5176\u4e2d\u4f7f\u7528\u8bcd\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165\u7684\u4f8b\u5b50\u3002\u4e00\u4e2a\u65b9\u6cd5\u662f\u8bad\u7ec3\u4e00\u4e2a\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff1a \u8f93\u5165\u8bcd\u8bed \u5c06\u8f93\u5165\u8bcd\u8bed\u8f6c\u6362\u4e3a\u8bcd\u5411\u91cf \u5bf9\u4e00\u4e2a\u590d\u6742\u7684\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff0c\u4f7f\u7528\u8bcd\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165 \u5c06\u8f93\u51fa\u7684\u8bcd\u5411\u91cf\u901a\u8fc7\u7cfb\u7edf\u6620\u5c04\u5230\u81ea\u7136\u8bed\u8a00\u8bcd\u8bed\u4e0a\u3002 \u751f\u6210\u8bcd\u8bed\u4f5c\u4e3a\u7b54\u6848 \u5f53\u7136\uff0c\u5728\u8bad\u7ec3\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u7b54\u7cfb\u7edf\u7684\u8fc7\u7a0b\u4e2d\uff0c\u56e0\u4e3a\u5b83\u4eec\u88ab\u7528\u5728\u4e0b\u6e38\u5b50\u7cfb\u7edf\uff08\u4f8b\u5982\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\uff09\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u6700\u4f18\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5bf9 Word2Vec \u5b50\u7cfb\u7edf\u4e2d\u7684\u8bb8\u591a\u8d85\u53c2\u6570\u8fdb\u884c\u8c03\u6574\uff08\u4f8b\u5982\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\uff09\u3002 \u867d\u7136\u6700\u7406\u60f3\u7684\u65b9\u6cd5\u662f\u5728 Word2Vec \u5b50\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55\u53c2\u6570\u6539\u53d8\u540e\u90fd\u91cd\u65b0\u8bad\u7ec3\uff0c\u4f46\u4ece\u5de5\u7a0b\u89d2\u5ea6\u6765\u770b\u662f\u4e0d\u5b9e\u9645\u7684\uff0c\u56e0\u4e3a\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff08\u5728\u7b2c3\u6b65\uff09\u901a\u5e38\u662f\u4e00\u4e2a\u6df1\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u7f51\u7edc\u4e2d\u7684\u6570\u767e\u4e07\u4e2a\u53c2\u6570\u9700\u8981\u5f88\u957f\u7684\u65f6\u95f4\u8bad\u7ec3\u3002 \u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u90e8\u8bc4\u4f30\u6280\u672f\u6765\u5ea6\u91cf\u8bcd\u5411\u91cf\u5b50\u7cfb\u7edf\u7684\u597d\u574f\u3002\u663e\u7136\u7684\u8981\u6c42\u662f\u5185\u90e8\u8bc4\u4ef7\u4e0e\u6700\u7ec8\u4efb\u52a1\u7684\u8868\u73b0\u6709\u6b63\u76f8\u5173\u5173\u7cfb\u3002 2.2 Extrinsic Evaluation \u00b6 \u8bcd\u5411\u91cf\u7684\u5916\u90e8\u8bc4\u4f30\u662f\u5bf9\u4e00\u7ec4\u5728\u5b9e\u9645\u4efb\u52a1\u4e2d\u751f\u6210\u7684\u8bcd\u5411\u91cf\u7684\u8bc4\u4f30\u3002\u8fd9\u4e9b\u4efb\u52a1\u901a\u5e38\u590d\u6742\u800c\u4e14\u8ba1\u7b97\u901f\u5ea6\u6162\u3002\u5bf9\u6211\u4eec\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u5141\u8bb8\u5bf9\u95ee\u9898\u7b54\u6848\u8fdb\u884c\u8bc4\u4f30\u7684\u7cfb\u7edf\u662f\u5916\u90e8\u8bc4\u4f30\u7cfb\u7edf\u3002\u901a\u5e38\uff0c\u4f18\u5316\u8868\u73b0\u4e0d\u4f73\u7684\u5916\u90e8\u8bc4\u4f30\u7cfb\u7edf\u6211\u4eec\u96be\u4ee5\u786e\u5b9a\u54ea\u4e2a\u7279\u5b9a\u5b50\u7cfb\u7edf\u5b58\u5728\u9519\u8bef\uff0c\u8fd9\u5c31\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u5185\u90e8\u8bc4\u4f30\u3002 \u5bf9\u771f\u5b9e\u4efb\u52a1\u7684\u8bc4\u4f30 \u8ba1\u7b97\u6027\u80fd\u53ef\u80fd\u5f88\u6162 \u4e0d\u6e05\u695a\u662f\u5b50\u7cfb\u7edf\u51fa\u4e86\u95ee\u9898\uff0c\u8fd8\u662f\u5176\u4ed6\u5b50\u7cfb\u7edf\u51fa\u4e86\u95ee\u9898\uff0c\u8fd8\u662f\u5185\u90e8\u4ea4\u4e92\u51fa\u4e86\u95ee\u9898 \u5982\u679c\u66ff\u6362\u5b50\u7cfb\u7edf\u63d0\u9ad8\u4e86\u6027\u80fd\uff0c\u90a3\u4e48\u66f4\u6539\u53ef\u80fd\u662f\u597d\u7684 2.3 Intrinsic Evaluation Example: Word Vector Analogies \u00b6 \u4e00\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\u5185\u90e8\u8bc4\u4f30\u7684\u65b9\u6cd5\u662f\u8bcd\u5411\u91cf\u7684\u7c7b\u6bd4\u3002\u5728\u8bcd\u5411\u91cf\u7c7b\u6bd4\u4e2d\uff0c\u7ed9\u5b9a\u4ee5\u4e0b\u5f62\u5f0f\u7684\u4e0d\u5b8c\u6574\u7c7b\u6bd4\uff1a \\[ a:b::c:? \\] \u7136\u540e\u5185\u90e8\u8bc4\u4f30\u7cfb\u7edf\u8ba1\u7b97\u8bcd\u5411\u91cf\u7684\u6700\u5927\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff1a \\[ d=arg\\max_{i}\\frac{(x_{b}-x_{a}+x_{c})^{T}x_{i}}{|x_{b}-x_{a}+x_{c}|} \\] \u8fd9\u4e2a\u6307\u6807\u6709\u76f4\u89c2\u7684\u89e3\u91ca\u3002\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b \\(x_{b}-x_{a}=x_{d}-x_{c}\\) \uff08\u4f8b\u5982\uff0cqueen-king=actress-actor\uff09\u3002\u8fd9\u5c31\u6697\u542b\u7740\u6211\u4eec\u5e0c\u671b \\(x_{b}-x_{a}+x_{c}=x_{d}\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u786e\u5b9a\u53ef\u4ee5\u6700\u5927\u5316\u4e24\u4e2a\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684\u5f52\u4e00\u5316\u70b9\u79ef\u7684\u5411\u91cf \\(x_{d}\\) \u5373\u53ef\uff08\u5373\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff09\u3002\u4f7f\u7528\u8bf8\u5982\u8bcd\u5411\u91cf\u7c7b\u6bd4\u7684\u5185\u90e8\u8bc4\u4f30\u6280\u672f\u5e94\u8be5\u5c0f\u5fc3\u5904\u7406\uff08\u8981\u8003\u8651\u5230\u9884\u8bad\u7ec3\u7684\u8bed\u6599\u5e93\u7684\u5404\u4e2a\u65b9\u9762\uff09\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u7684\u7c7b\u6bd4\u5f62\u5f0f\uff1a \\(City\\;1:State\\;containing\\;City\\;1:\\;:City\\;2:State\\;containing\\;City\\;2\\) \u4e0a\u56fe\u662f\u53ef\u80fd\u53d7\u5230\u5177\u6709\u76f8\u540c\u540d\u79f0\u7684\u4e0d\u540c\u57ce\u5e02\u7684\u8bed\u4e49\u8bcd\u5411\u91cf\u7c7b\u6bd4\uff08\u5185\u5728\u8bc4\u4f30\uff09\u3002\u5728\u4e0a\u9762\u5f88\u591a\u7684\u4f8b\u5b50\uff0c\u7f8e\u56fd\u6709\u5f88\u591a\u540c\u540d\u7684\u57ce\u5e02\uff0f\u57ce\u9547\uff0f\u6751\u5e84\u3002\u56e0\u6b64\uff0c\u5f88\u591a\u5dde\u90fd\u7b26\u5408\u6b63\u786e\u7684\u7b54\u6848\u3002\u4f8b\u5982\uff0c\u5728\u7f8e\u56fd\u81f3\u5c11\u6709 10 \u4e2a\u5730\u65b9\u7684\u540d\u79f0\u662f Phoenix\uff0c\u6240\u4ee5 Arizona \u4e0d\u662f\u552f\u4e00\u7684\u6b63\u786e\u7b54\u6848\u3002\u5728\u8003\u8651\u4ee5\u4e0b\u7684\u7c7b\u6bd4\u5f62\u5f0f\uff1a \\(Capital\\;City\\;1:\\;Country\\;1:\\;:Capital\\;City\\;2:\\;Country\\;2\\) \u4e0a\u56fe\u662f\u53ef\u80fd\u5728\u4e0d\u540c\u65f6\u95f4\u70b9\u6709\u4e0d\u540c\u9996\u90fd\u7684\u56fd\u5bb6\u7684**\u8bed\u4e49**\u8bcd\u5411\u91cf\u7c7b\u6bd4\uff08\u5185\u5728\u8bc4\u4f30\uff09\u3002\u4e0a\u9762\u5f88\u591a\u7684\u4f8b\u5b50\uff0c\u8fd9\u4e2a\u4efb\u52a1\u4e2d\u751f\u6210\u7684\u57ce\u5e02\u4ec5\u4ec5\u662f\u8fd1\u671f\u7684\u56fd\u5bb6\u9996\u90fd\uff0c\u53ef\u80fd\u4f1a\u53d7\u5230\u4e0d\u540c\u56fd\u5bb6\u5728\u4e0d\u540c\u65f6\u95f4\u70b9\u62e5\u6709\u4e0d\u540c\u9996\u90fd\u7684\u5f71\u54cd\u3002\u4f8b\u5982\uff0c1997 \u5e74\u4e4b\u524d Kazakhstan \u7684\u9996\u90fd\u662f Almaty\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u7684\u8bed\u6599\u5e93\u8fc7\u65f6\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 \u4e4b\u524d\u7684\u4e24\u4e2a\u4f8b\u5b50\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u8bcd\u5411\u91cf\u8fdb\u884c\u8bed\u4e49\u6d4b\u8bd5\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8bcd\u5411\u91cf\u7c7b\u4f3c\u8fdb\u884c**\u8bed\u6cd5**\u6d4b\u8bd5\u3002\u4e0b\u9762\u662f\u6d4b\u8bd5\u5f62\u5bb9\u8bcd\u6700\u9ad8\u7ea7\u6982\u5ff5\u7684\u53e5\u6cd5\u8bcd\u5411\u91cf\u7c7b\u6bd4(\u5185\u5728\u8bc4\u4ef7)\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7c7b\u4f3c\u5730\uff0c\u4e0b\u56fe\u7684\u5185\u90e8\u8bc4\u4f30\u5c55\u793a\u4e86\u6d4b\u8bd5\u8bcd\u5411\u91cf\u6355\u83b7\u8fc7\u53bb\u65f6\u6001\u6982\u5ff5\u7684\u80fd\u529b 2.4 Intrinsic Evaluation Tuning Example: Analogy Evaluations \u00b6 \u6211\u4eec\u73b0\u5728\u63a2\u8ba8\u4f7f\u7528\u5185\u5728\u8bc4\u4f30\u7cfb\u7edf\uff08\u5982\u7c7b\u6bd4\u7cfb\u7edf\uff09\u6765\u8c03\u6574\u7684\u8bcd\u5411\u91cf\u5d4c\u5165\u6280\u672f\uff08\u5982 Word2Vec \u548c GloVe\uff09\u4e2d\u7684\u8d85\u53c2\u6570\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b\u5728\u7c7b\u6bd4\u8bc4\u4f30\u4efb\u52a1\u4e2d\uff0c\u5728\u76f8\u540c\u7684\u8d85\u53c2\u6570\u4e0b\uff0c\u7531\u4e0d\u540c\u65b9\u6cd5\u521b\u5efa\u7684\u8bcd\u5411\u91cf\u8868\u73b0\u6548\u679c\uff1a \u6839\u636e\u4e0a\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 3 \u70b9\uff1a \u6a21\u578b\u7684\u8868\u73b0\u9ad8\u5ea6\u4f9d\u8d56\u6a21\u578b\u6240\u4f7f\u7528\u7684\u8bcd\u5411\u91cf\u7684\u6a21\u578b\uff1a \u8fd9\u70b9\u662f\u53ef\u4ee5\u9884\u6599\u5230\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u751f\u6210\u8bcd\u5411\u91cf\u65b9\u6cd5\u662f\u57fa\u4e8e\u4e0d\u540c\u7684**\u7279\u6027**\u7684\uff08\u4f8b\u5982\u5171\u73b0\u8ba1\u6570\uff0c\u5947\u5f02\u5411\u91cf\u7b49\u7b49\uff09\u3002 \u8bed\u6599\u5e93\u66f4\u5927\u6a21\u578b\u7684\u8868\u73b0\u66f4\u597d\uff1a \u8fd9\u662f\u56e0\u4e3a\u6a21\u578b\u8bad\u7ec3\u7684\u8bed\u6599\u8d8a\u5927\uff0c\u6a21\u578b\u7684\u8868\u73b0\u5c31\u4f1a\u66f4\u597d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bad\u7ec3\u7684\u65f6\u5019\u6ca1\u6709\u5305\u542b\u6d4b\u8bd5\u7684\u8bcd\u8bed\uff0c\u90a3\u4e48\u8bcd\u7c7b\u6bd4\u4f1a\u4ea7\u751f\u9519\u8bef\u7684\u7ed3\u679c\u3002 \u5bf9\u4e8e\u6781\u9ad8\u6216\u8005\u6781\u4f4e\u7ef4\u5ea6\u7684\u8bcd\u5411\u91cf\uff0c\u6a21\u578b\u7684\u8868\u73b0\u8f83\u5dee\uff1a \u4f4e\u7ef4\u5ea6\u7684\u8bcd\u5411\u91cf\u4e0d\u80fd\u6355\u83b7\u5728\u8bed\u6599\u5e93\u4e2d\u4e0d\u540c\u8bcd\u8bed\u7684\u610f\u4e49\u3002\u8fd9\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u6211\u4eec\u7684\u6a21\u578b\u590d\u6742\u5ea6\u592a\u4f4e\u7684\u9ad8\u504f\u5dee\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u8003\u8651\u5355\u8bcd\u201cking\u201d\u3001\u201cqueen\u201d\u3001\u201cman\u201d\u3001\u201cwoman\u201d\u3002\u76f4\u89c2\u4e0a\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4f8b\u5982\u201c\u6027\u522b\u201d\u548c\u201c\u9886\u5bfc\u201d\u4e24\u4e2a\u7ef4\u5ea6\u6765\u5c06\u5b83\u4eec\u7f16\u7801\u6210 2 \u5b57\u8282\u7684\u8bcd\u5411\u91cf\u3002\u7ef4\u5ea6\u8f83\u4f4e\u7684\u8bcd\u5411\u91cf\u4e0d\u4f1a\u6355\u83b7\u56db\u4e2a\u5355\u8bcd\u4e4b\u95f4\u7684\u8bed\u4e49\u5dee\u5f02\uff0c\u800c\u8fc7\u9ad8\u7684\u7ef4\u5ea6\u7684\u53ef\u80fd\u6355\u83b7\u8bed\u6599\u5e93\u4e2d\u65e0\u52a9\u4e8e\u6cdb\u5316\u7684\u566a\u58f0-\u5373\u6240\u8c13\u7684\u9ad8\u65b9\u5dee\u95ee\u9898\u3002 GloVe \u4e2d\u4f7f\u7528\u4e2d\u5fc3\u8bcd\u5de6\u53f3\u7684\u7a97\u53e3\u5927\u5c0f\u4e3a 8 \u65f6\u6a21\u578b\u8868\u73b0\u8f83\u597d\u3002 \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u8bad\u7ec3\u65f6\u95f4\u5bf9\u6a21\u578b\u8868\u73b0\u7684\u5f71\u54cd \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u589e\u52a0\u8bed\u6599\u5e93\u89c4\u6a21\u5bf9\u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u4e0d\u540c\u8d85\u53c2\u6570\u5bf9 GloVe \u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd \u8d85\u9ad8\u7ef4\u5411\u91cf\uff1a \u76f4\u89c2\u5730\u8bf4\uff0c\u8fd9\u4e9b\u5411\u91cf\u4f3c\u4e4e\u4f1a\u5728\u8bed\u6599\u5e93\u4e2d\u6355\u83b7\u4e0d\u5141\u8bb8\u6cdb\u5316\u7684\u566a\u58f0\uff0c\u5373\u5bfc\u81f4\u9ad8\u65b9\u5dee\u3002 \u4f46\u662fYin\u7b49\u4eba\u5728On the Dimensionality of Word Embedding\u4e0a\u8868\u660e\uff0cskip-gram \u548c Glove \u5bf9\u8fd9\u79cd\u8fc7\u62df\u5408\u5177\u6709\u9c81\u68d2\u6027\u3002 2.5 Intrinsic Evaluation Example: Correlation Evaluation \u00b6 \u53e6\u5916\u4e00\u4e2a\u8bc4\u4f30\u8bcd\u5411\u91cf\u8d28\u91cf\u7684\u7b80\u5355\u65b9\u6cd5\u662f\uff0c\u8ba9\u4eba\u53bb\u7ed9\u4e24\u4e2a\u8bcd\u7684\u76f8\u4f3c\u5ea6\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u8303\u56f4\u5185\uff08\u4f8b\u5982 0-10\uff09\u8bc4\u5206\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5bf9\u5e94\u8bcd\u5411\u91cf\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8fdb\u884c\u5bf9\u6bd4\u3002\u8fd9\u5df2\u7ecf\u5728\u5305\u542b\u4eba\u4e3a\u8bc4\u4f30\u7684\u5404\u79cd\u6570\u636e\u96c6\u4e0a\u5c1d\u8bd5\u8fc7\u3002 \u4e0b\u56fe\u662f\u4f7f\u7528\u4e0d\u540c\u7684\u8bcd\u5d4c\u5165\u6280\u672f\u4e0e\u4e0d\u540c\u7684\u4eba\u7c7b\u5224\u65ad\u6570\u636e\u96c6\u7684\u8bcd\u5411\u91cf\u76f8\u4f3c\u6027\u4e4b\u95f4\u7684\u76f8\u5173\u6027 2.6 Further Reading: Dealing With Ambiguity \u00b6 \u6211\u4eec\u60f3\u77e5\u9053\u5982\u4f55\u5904\u7406\u5728\u4e0d\u540c\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f7f\u7528\u573a\u666f\u4e0b\uff0c\u7528\u4e0d\u540c\u7684\u7684\u8bcd\u5411\u91cf\u6765\u6355\u83b7\u540c\u4e00\u4e2a\u5355\u8bcd\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u4e0d\u540c\u7528\u6cd5\u3002\u4f8b\u5982\uff0c\u201crun\u201d\u662f\u4e00\u4e2a\u540d\u8bcd\u4e5f\u662f\u4e00\u4e2a\u52a8\u8bcd\uff0c\u5728\u4e0d\u540c\u7684\u8bed\u5883\u4e2d\u5b83\u7684\u8bcd\u6027\u4e5f\u4f1a\u4e0d\u540c\u3002\u8bba\u6587 Improving Word Representations Via Global Context And Multiple Word Prototypes \u63d0\u51fa\u4e0a\u8ff0\u95ee\u9898\u7684\u7684\u89e3\u51b3\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u7684\u672c\u8d28\u5982\u4e0b\uff1a \u6536\u96c6\u6240\u6709\u51fa\u73b0\u7684\u5355\u8bcd\u7684\u56fa\u5b9a\u5927\u5c0f\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u4f8b\u5982\u524d 5 \u4e2a\u548c\u540e 5 \u4e2a)\u3002 \u6bcf\u4e2a\u4e0a\u4e0b\u6587\u4f7f\u7528\u4e0a\u4e0b\u6587\u8bcd\u5411\u91cf\u7684\u52a0\u6743\u5e73\u5747\u503c\u6765\u8868\u793a(\u4f7f\u7528idf\u52a0\u6743)\u3002 \u7528 spherical k-means \u5bf9\u8fd9\u4e9b\u4e0a\u4e0b\u6587\u8868\u793a\u8fdb\u884c\u805a\u7c7b\u3002 \u6700\u540e\uff0c\u6bcf\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u90fd\u91cd\u65b0\u6807\u7b7e\u4e3a\u5176\u76f8\u5173\u8054\u7684\u7c7b\uff0c\u540c\u65f6\u5bf9\u8fd9\u4e2a\u7c7b\uff0c\u6765\u8bad\u7ec3\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \u8981\u5bf9\u8fd9\u4e2a\u95ee\u9898\u8fdb\u884c\u66f4\u4e25\u8c28\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u53c2\u8003\u539f\u6587\u3002 3 Training for Extrinsic Tasks \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4e00\u76f4\u90fd\u5173\u6ce8\u4e8e\u5185\u5728\u4efb\u52a1\uff0c\u5e76\u5f3a\u8c03\u5176\u5728\u5f00\u53d1\u826f\u597d\u7684\u8bcd\u5411\u91cf\u6280\u672f\u4e2d\u7684\u91cd\u8981\u6027\u3002\u4f46\u662f\u5927\u591a\u6570\u5b9e\u9645\u95ee\u9898\u7684\u6700\u7ec8\u76ee\u6807\u662f\u5c06\u8bcd\u5411\u91cf\u7ed3\u679c\u7528\u4e8e\u5176\u4ed6\u7684\u5916\u90e8\u4efb\u52a1\u3002\u63a5\u4e0b\u6765\u4f1a\u8ba8\u8bba\u5904\u7406\u5916\u90e8\u4efb\u52a1\u7684\u65b9\u6cd5\u3002 3.1 Problem Formulation \u00b6 \u5f88\u591a NLP \u7684\u5916\u90e8\u4efb\u52a1\u90fd\u53ef\u4ee5\u8868\u8ff0\u4e3a\u5206\u7c7b\u4efb\u52a1\u3002\u4f8b\u5982\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u53e5\u5b50\u505a\u60c5\u611f\u5206\u7c7b\uff0c\u5224\u65ad\u5176\u60c5\u611f\u7c7b\u522b\u4e3a\u6b63\u9762\uff0c\u8d1f\u9762\u8fd8\u662f\u4e2d\u6027\u3002\u76f8\u4f3c\u5730\uff0c\u5728\u547d\u540d\u5b9e\u4f53\u8bc6\u522b(NER)\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u4e0a\u4e0b\u6587\u548c\u4e00\u4e2a\u4e2d\u5fc3\u8bcd\uff0c\u6211\u4eec\u60f3\u5c06\u4e2d\u5fc3\u8bcd\u5206\u7c7b\u4e3a\u8bb8\u591a\u7c7b\u522b\u4e4b\u4e00\u3002\u5bf9\u8f93\u5165\uff0c\u201cJim bought 300 shares of Acme Corp. in 2006\u201d\uff0c\u6211\u4eec\u5e0c\u671b\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u5206\u7c7b\u7ed3\u679c\uff1a \\([Jim]_{Person} \\ bought \\ 300 \\ shares \\ of [Acme\\;Corp.]_{Organization} \\ in \\ [2006]_{Time}\\) . \u5bf9\u8fd9\u7c7b\u95ee\u9898\uff0c\u6211\u4eec\u4e00\u822c\u6709\u4ee5\u4e0b\u5f62\u5f0f\u7684\u8bad\u7ec3\u96c6\uff1a \\[ \\{x^{(i)},y^{(i)}\\}_{1}^{N} \\] \u5176\u4e2d \\(x^{(i)}\\) \u662f\u4e00\u4e2a d \u7ef4\u7684\u8bcd\u5411\u91cf\uff0c \\(y^{(i)}\\) \u662f\u4e00\u4e2a C \u7ef4\u7684 one-hot \u5411\u91cf\uff0c\u8868\u793a\u6211\u4eec\u5e0c\u671b\u6700\u7ec8\u9884\u6d4b\u7684\u6807\u7b7e\uff08\u60c5\u611f\uff0c\u5176\u4ed6\u8bcd\uff0c\u4e13\u6709\u540d\u8bcd\uff0c\u4e70\uff0f\u5356\u51b3\u7b56\u7b49\uff09\u3002 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8bf8\u5982\u903b\u8f91\u56de\u5f52\u548c SVM \u4e4b\u7c7b\u7684\u7b97\u6cd5\u5bf9 2-D \u8bcd\u5411\u91cf\u6765\u8fdb\u884c\u5206\u7c7b\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u5728\u4e00\u822c\u7684\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u56fa\u5b9a\u8f93\u5165\u6570\u636e\u548c\u76ee\u6807\u6807\u7b7e\uff0c\u7136\u540e\u4f7f\u7528\u4f18\u5316\u7b97\u6cd5\u6765\u8bad\u7ec3\u6743\u91cd\uff08\u4f8b\u5982\u68af\u5ea6\u4e0b\u964d\uff0cL-BFGS\uff0c\u725b\u987f\u6cd5\u7b49\u7b49\uff09\u3002\u7136\u800c\u5728 NLP \u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u601d\u60f3\uff1a\u5728\u8bad\u7ec3\u5916\u90e8\u4efb\u52a1\u65f6\u5bf9\u8f93\u5165\u5b57\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\u3002\u4e0b\u9762\u6211\u4eec\u8ba8\u8bba\u4f55\u65f6\u4f7f\u7528\u4ee5\u53ca\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\u3002 \u5bf9\u4e8e\u5927\u578b\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u5e94\u8003\u8651\u5b57\u5411\u91cf\u518d\u8bad\u7ec3\u3002\u5bf9\u4e8e\u5c0f\u6570\u636e\u96c6\uff0c\u91cd\u65b0\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002 3.2 Retraining Word Vectors \u00b6 \u6b63\u5982\u6211\u4eec\u8fc4\u4eca\u6240\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u6211\u4eec\u7528\u4e8e\u5916\u90e8\u8bc4\u4f30\u7684\u8bcd\u5411\u91cf\u662f\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u90e8\u8bc4\u4f30\u6765\u8fdb\u884c\u4f18\u5316\u5e76\u521d\u59cb\u5316\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u8868\u73b0\u826f\u597d\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u4ecd\u7136\u6709\u63d0\u9ad8\u7684\u53ef\u80fd\u3002\u7136\u800c\uff0c\u91cd\u65b0\u8bad\u7ec3\u5b58\u5728\u7740\u4e00\u5b9a\u7684\u98ce\u9669\u3002 \u5982\u679c\u6211\u4eec\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u91cd\u65b0\u8bad\u7ec3\u8bcd\u5411\u91cf\uff0c\u8fd9\u5c31\u9700\u8981\u4fdd\u8bc1\u8bad\u7ec3\u96c6\u8db3\u591f\u5927\u5e76\u80fd\u8986\u76d6\u8bcd\u6c47\u8868\u4e2d\u5927\u90e8\u5206\u7684\u5355\u8bcd\u3002\u8fd9\u662f\u56e0\u4e3aWord2Vec\u6216GloVe\u4f1a\u751f\u6210\u8bed\u4e49\u76f8\u5173\u7684\u5355\u8bcd\uff0c\u8fd9\u4e9b\u5355\u8bcd\u4f4d\u4e8e\u5355\u8bcd\u7a7a\u95f4\u7684\u540c\u4e00\u90e8\u5206\u3002 \u5047\u8bbe\u9884\u8bad\u7ec3\u5411\u91cf\u4f4d\u4e8e\u4e8c\u7ef4\u7a7a\u95f4\u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u5728\u4e00\u4e9b\u5916\u90e8\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u5355\u8bcd\u5411\u91cf\u88ab\u6b63\u786e\u5206\u7c7b\u3002 \u73b0\u5728\uff0c\u5982\u679c\u6211\u4eec\u56e0\u4e3a\u6709\u9650\u7684\u8bad\u7ec3\u96c6\u5927\u5c0f\u800c\u53ea\u5bf9\u5176\u4e2d\u4e24\u4e2a\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u4e0b\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4e2d\u4e00\u4e2a\u5355\u8bcd\u88ab\u9519\u8bef\u5206\u7c7b\u4e86\uff0c\u56e0\u4e3a\u5355\u8bcd\u5411\u91cf\u66f4\u65b0\u5bfc\u81f4\u8fb9\u754c\u79fb\u52a8\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u8bad\u7ec3\u6570\u636e\u96c6\u5f88\u5c0f\uff0c\u5c31\u4e0d\u5e94\u8be5\u5bf9\u5355\u8bcd\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\u3002\u5982\u679c\u57f9\u8bad\u96c6\u5f88\u5927\uff0c\u518d\u57f9\u8bad\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002 3.3 Softmax Classi\ufb01cation and Regularization \u00b6 \u6211\u4eec\u8003\u8651\u4f7f\u7528 Softmax \u5206\u7c7b\u51fd\u6570\uff0c\u51fd\u6570\u5f62\u5f0f\u5982\u4e0b\u6240\u793a\uff1a \\[ p(y_{j}=1\\mid x)=\\frac{exp(W_{j.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)} \\] \u8fd9\u91cc\u6211\u4eec\u8ba1\u7b97\u8bcd\u5411\u91cf \\(x\\) \u662f\u7c7b\u522b \\(j\\) \u7684\u6982\u7387\u3002\u4f7f\u7528\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\u8ba1\u7b97\u4e00\u4e2a\u6837\u672c\u7684\u635f\u5931\u5982\u4e0b\u6240\u793a\uff1a \\[ -\\sum_{j=1}^{C}y_{j}\\,log(p(y_{j}=1\\mid x))=-\\sum_{j=1}^{C}y_{j}\\,log\\bigg(\\frac{exp(W_{j.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)}\\bigg) \\] \u5f53\u7136\uff0c\u4e0a\u8ff0\u6c42\u548c\u662f\u5bf9 \\((C-1)\\) \u4e2a\u96f6\u503c\u6c42\u548c\uff0c\u56e0\u4e3a \\(y_{j}\\) \u4ec5\u5728\u5355\u4e2a\u7d22\u5f15\u4e3a 1\uff0c\u8fd9\u610f\u5473\u7740 \\(x\\) \u4ec5\u5c5e\u4e8e 1 \u4e2a\u6b63\u786e\u7684\u7c7b\u522b\u3002\u73b0\u5728\u6211\u4eec\u5b9a\u4e49 \\(k\\) \u4e3a\u6b63\u786e\u7c7b\u522b\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u7b80\u5316\u635f\u5931\u51fd\u6570\uff1a \\[ -log\\bigg(\\frac{exp(W_{k.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)}\\bigg) \\] \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u6269\u5c55\u4e3a\u6709 \\(N\\) \u4e2a\u5355\u8bcd\u7684\u635f\u5931\u51fd\u6570\uff1a \\[ -\\sum_{i=1}^{N}log\\bigg(\\frac{exp(W_{k(i).}x^{(i)})}{\\sum_{c=1}^{C}exp(W_{c.}x^{i})}\\bigg) \\] \u4e0a\u9762\u516c\u5f0f\u7684\u552f\u4e00\u4e0d\u540c\u662f \\(k(i)\\) \u73b0\u5728\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de \\(x^{(i)}\\) \u5bf9\u5e94\u7684\u6bcf\u6b63\u786e\u7684\u7c7b\u7684\u7d22\u5f15\u3002 \u73b0\u5728\u6211\u4eec\u6765\u4f30\u8ba1\u4e00\u4e0b\u540c\u65f6\u8bad\u7ec3\u6a21\u578b\u7684\u6743\u503c \\((W)\\) \u548c\u8bcd\u5411\u91cf \\((x)\\) \u65f6\u9700\u8981\u66f4\u65b0\u7684\u53c2\u6570\u7684\u6570\u91cf\u3002\u6211\u4eec\u77e5\u9053\u4e00\u4e2a\u7b80\u5355\u7684\u7ebf\u6027\u51b3\u7b56\u6a21\u578b\u81f3\u5c11\u9700\u8981\u4e00\u4e2a \\(d\\) \u7ef4\u7684\u8bcd\u5411\u91cf\u8f93\u5165\u548c\u751f\u6210\u4e00\u4e2a \\(C\\) \u4e2a\u7c7b\u522b\u7684\u5206\u5e03\u3002\u56e0\u6b64\u66f4\u65b0\u6a21\u578b\u7684\u6743\u503c\uff0c\u6211\u4eec\u9700\u8981 \\(C \\cdot d\\) \u4e2a\u53c2\u6570\u3002\u5982\u679c\u6211\u4eec\u4e5f\u5bf9\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u66f4\u65b0\u8bcd\u5411\u91cf\uff0c\u90a3\u4e48\u5c31\u8981\u66f4\u65b0 \\(|V|\\) \u4e2a\u8bcd\u5411\u91cf\uff0c\u6bcf\u4e00\u4e2a\u7684\u7ef4\u5ea6\u662f \\(d\\) \u7ef4\u3002\u56e0\u6b64\u5bf9\u4e00\u4e2a\u7b80\u5355\u7684\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\uff0c\u603b\u5171\u7684\u53c2\u6570\u6570\u76ee\u662f \\(C \\cdot d + |V|\\) \uff1a \\[ \\begin{eqnarray} \\nabla_{\\theta}J(\\theta) = \\begin{bmatrix} \\nabla_{W_{.1}} \\\\ \\vdots \\\\ \\nabla_{W_{.d}} \\\\ \\nabla_{aardvark} \\\\ \\vdots \\\\ \\nabla_{zebra} \\end{bmatrix} \\nonumber \\end{eqnarray} \\\\ \\] \u5bf9\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u578b\u6765\u8bf4\uff0c\u8fd9\u662f\u76f8\u5f53\u5927\u7684\u53c2\u6570\u91cf\u2014\u2014\u8fd9\u6837\u7684\u53c2\u6570\u91cf\u5f88\u53ef\u80fd\u4f1a\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u95ee\u9898\u3002 \u4e3a\u4e86\u964d\u4f4e\u8fc7\u62df\u5408\u7684\u98ce\u9669\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u4ece\u8d1d\u53f6\u65af\u6d3e\u7684\u601d\u60f3\u770b\uff0c\u8fd9\u4e2a\u6b63\u5219\u9879\u662f\u5bf9\u6a21\u578b\u7684\u53c2\u6570\u52a0\u4e0a\u4e00\u4e2a\u5148\u9a8c\u5206\u5e03\uff0c\u8ba9\u53c2\u6570\u53d8\u5c0f\uff08\u5373\u63a5\u8fd1\u4e8e 0\uff09\uff1a \\[ -\\sum_{i=1}^{N}log\\bigg(\\frac{exp(W_{k(i).}x^{(i)})}{\\sum_{c=1}^{C}exp(W_{c.}x^{i})}\\bigg)+\\lambda\\sum_{k=1}^{C \\cdot d + |V|\\cdot d} \\theta_{k}^{2} \\] \u5982\u679c\u8c03\u6574\u597d\u76ee\u6807\u6743\u91cd \\(\\lambda\\) \u7684\u503c\uff0c\u6700\u5c0f\u5316\u4e0a\u9762\u7684\u51fd\u6570\u5c06\u4f1a\u964d\u4f4e\u51fa\u73b0\u5f88\u5927\u7684\u53c2\u6570\u503c\u7684\u53ef\u80fd\u6027\uff0c\u540c\u65f6\u4e5f\u63d0\u9ad8\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\u3002\u5728\u6211\u4eec\u4f7f\u7528\u66f4\u591a\u53c2\u6570\u66f4\u590d\u6742\u7684\u6a21\u578b\uff08\u4f8b\u5982\u795e\u7ecf\u7f51\u7edc\uff09\u65f6\uff0c\u5c31\u66f4\u52a0\u9700\u8981\u6b63\u5219\u5316\u7684\u601d\u60f3\u3002 3.4 Window Classi\ufb01cation \u00b6 \u4e0b\u56fe\u662f\u6211\u4eec\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd\u548c\u4e00\u4e2a\u957f\u5ea6\u4e3a 2 \u7684\u5bf9\u79f0\u7a97\u53e3\u3002\u8fd9\u6837\u7684\u4e0a\u4e0b\u6587\u53ef\u4ee5\u5e2e\u52a9\u5206\u8fa8 Paris \u662f\u4e00\u4e2a\u5730\u70b9\u8fd8\u662f\u4e00\u4e2a\u540d\u5b57\u3002 \u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4e3b\u8981\u63a2\u8ba8\u4e86\u4f7f\u7528\u5355\u4e2a\u5355\u8bcd\u5411\u91cf \\(x\\) \u9884\u6d4b\u7684\u5916\u90e8\u8bc4\u4f30\u4efb\u52a1\u3002\u5728\u73b0\u5b9e\u4e2d\uff0c\u56e0\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u6027\u8d28\uff0c\u8fd9\u51e0\u4e4e\u4e0d\u4f1a\u6709\u8fd9\u6837\u7684\u4efb\u52a1\u3002\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u5e38\u5e38\u5b58\u5728\u7740\u4e00\u8bcd\u591a\u4e49\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u4e00\u822c\u8981\u5229\u7528\u8bcd\u7684\u4e0a\u4e0b\u6587\u6765\u5224\u65ad\u5176\u4e0d\u540c\u7684\u610f\u4e49\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u8981\u67d0\u4eba\u89e3\u91ca\u201cto sanction\u201d\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u4f60\u4f1a\u9a6c\u4e0a\u610f\u8bc6\u5230\u6839\u636e\u201cto sanction\u201d\u7684\u4e0a\u4e0b\u6587\u5176\u610f\u601d\u53ef\u80fd\u662f\u201cto permit\u201d\u6216\u8005\u201cto punish\u201d\u3002\u5728\u66f4\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u3002\u8fd9\u4e2a\u5e8f\u5217\u662f\u7531\u4e2d\u5fc3\u8bcd\u5411\u91cf\u548c\u4e0a\u4e0b\u6587\u8bcd\u5411\u91cf\u7ec4\u6210\u3002\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u6570\u91cf\u4e5f\u88ab\u79f0\u4e3a\u4e0a\u4e0b\u6587\u7a97\u53e3\u5927\u5c0f\uff0c\u5e76\u6839\u636e\u89e3\u51b3\u7684\u95ee\u9898\u800c\u53d8\u5316\u3002 \u4e00\u822c\u6765\u8bf4,\u8f83\u7a84\u7684\u7a97\u53e3\u5927\u5c0f\u4f1a\u5bfc\u81f4\u5728\u53e5\u6cd5\u6d4b\u8bd5\u4e2d\u66f4\u597d\u7684\u6027\u80fd,\u800c\u66f4\u5bbd\u7684\u7a97\u53e3\u4f1a\u5bfc\u81f4\u5728\u8bed\u4e49\u6d4b\u8bd5\u4e2d\u66f4\u597d\u7684\u6027\u80fd \u3002 \u4e3a\u4e86\u5c06\u4e4b\u524d\u8ba8\u8bba\u7684 Softmax \u6a21\u578b\u4fee\u6539\u4e3a\u4f7f\u7528\u5355\u8bcd\u7684\u7a97\u53e3\u6765\u8fdb\u884c\u5206\u7c7b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6309\u7167\u4e0b\u9762\u5f62\u5f0f\u5c06 \\(x^{(i)}\\) \u66ff\u6362\u4e3a \\(x_{window}^{(i)}\\) \uff1a \\[ \\begin{eqnarray} x_{window}^{(i)} = \\begin{bmatrix} x^{(i-2)} \\\\ x^{(i-1)} \\\\ x^{(i)} \\\\ x^{(i+1)} \\\\ x^{(i+2)} \\end{bmatrix} \\nonumber \\end{eqnarray} \\] \u56e0\u6b64\uff0c\u5f53\u6211\u4eec\u8ba1\u7b97\u5355\u8bcd\u7684\u635f\u5931\u68af\u5ea6\u5982\u4e0b\u6240\u793a\uff0c\u5f53\u7136\u9700\u8981\u5206\u914d\u68af\u5ea6\u6765\u66f4\u65b0\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\uff1a \\[ \\begin{eqnarray} x_{window}^{(i)} = \\begin{bmatrix} \\nabla_{x^{(i-2)}} \\\\ \\nabla_{x^{(i-1)}} \\\\ \\nabla_{x^{(i)}} \\\\ \\nabla_{x^{(i+1)}} \\\\ \\nabla_{x^{(i+2)}} \\end{bmatrix} \\nonumber \\end{eqnarray} \\] \u5f53\u7136\uff0c\u68af\u5ea6\u5c06\u9700\u8981\u5206\u53d1\u6765\u66f4\u65b0\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\u3002 3.5 Non-linear Classi\ufb01ers \u00b6 \u6211\u4eec\u73b0\u5728\u4ecb\u7ecd\u975e\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\uff0c\u5982\u795e\u7ecf\u7f51\u7edc\u3002\u6211\u4eec\u770b\u5230\u5373\u4f7f\u662f\u6700\u4f18\u7684\u7ebf\u6027\u5206\u7c7b\u5e73\u9762\uff0c\u4e5f\u6709\u8bb8\u591a\u6837\u4f8b\u90fd\u88ab\u9519\u8bef\u7684\u5206\u7c7b\u3002\u8fd9\u662f\u56e0\u4e3a\u7ebf\u6027\u6a21\u578b\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u7684\u5206\u7c7b\u80fd\u529b\u6709\u9650\u3002 \u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u975e\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\u53ef\u4ee5\u5bf9\u4e0a\u9762\u7684\u6570\u636e\u96c6\u7684\u6837\u4f8b\u6709\u7740\u66f4\u597d\u7684\u5206\u7c7b\u7ed3\u679c\uff0c\u8fd9\u4e2a\u7b80\u7b54\u7684\u4f8b\u5b50\u53ef\u4ee5\u521d\u6b65\u7684\u8bf4\u660e\u6211\u4eec\u4e3a\u4ec0\u4e48\u9700\u8981\u975e\u7ebf\u6027\u6a21\u578b\u3002 Suggested Readings \u00b6 GloVe Global Vectors for Word Representation \u00b6 \u6b64\u4e3a Glove \u539f\u6587\uff0c\u5df2\u5728 Lecture \u548c Note \u4e2d\u8be6\u7ec6\u8bb0\u5f55\u3002 Improving Distributional Similarity with Lessons Learned from Word Embeddings \u00b6 \u5b9e\u9645\u5e94\u7528\u4e2d\u5982\u4f55\u83b7\u5f97\u66f4\u597d\u7684\u8bcd\u5411\u91cf Abstract \u8fd1\u5e74\u6765\u7684\u7814\u7a76\u8d8b\u52bf\u8868\u660e\uff0c\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u8bcd\u5d4c\u5165\u6a21\u578b\u5728\u8bcd\u76f8\u4f3c\u6027\u548c\u76f8\u4f3c\u6027\u68c0\u6d4b\u4efb\u52a1\u4e0a\u4f18\u4e8e\u4f20\u7edf\u7684\u57fa\u4e8e\u8ba1\u6570\u7684\u5206\u5e03\u6a21\u578b\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u8bcd\u5d4c\u5165\u7684\u6027\u80fd\u63d0\u9ad8\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u7531\u4e8e\u67d0\u4e9b\u7cfb\u7edf\u8bbe\u8ba1\u9009\u62e9\u548c\u8d85\u53c2\u6570\u4f18\u5316\uff0c\u800c\u4e0d\u662f\u5d4c\u5165\u7b97\u6cd5\u672c\u8eab\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8bc1\u660e\u8fd9\u4e9b\u4fee\u6539\u53ef\u4ee5\u8f6c\u79fb\u5230\u4f20\u7edf\u7684\u5206\u914d\u6a21\u578b\uff0c\u4ea7\u751f\u7c7b\u4f3c\u7684\u6536\u76ca\u3002\u4e0e\u4ee5\u524d\u7684\u62a5\u544a\u76f8\u6bd4\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u7684\u65b9\u6cd5\u4e4b\u95f4\u7684\u6027\u80fd\u5dee\u5f02\u4e3b\u8981\u662f\u5c40\u90e8\u7684\u6216\u4e0d\u663e\u8457\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u4e00\u79cd\u65b9\u6cd5\u6bd4\u5176\u4ed6\u65b9\u6cd5\u5177\u6709\u5168\u5c40\u4f18\u52bf\u3002 Introduction \u7136\u800c\uff0c\u6700\u5148\u8fdb\u7684\u5d4c\u5165\u65b9\u6cd5\u90fd\u662f\u57fa\u4e8e\u76f8\u540c\u7684 bag-of-contexts \u7684\u5355\u8bcd\u3002\u6b64\u5916\uff0c\u5206\u6790\u8868\u660e\uff0cword2vec\u7684 SGNS \u9690\u542b\u5730\u5206\u89e3\u4e86\u5355\u8bcd\u4e0a\u4e0b\u6587\u7684PMI\u77e9\u9635\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5176\u6570\u5b66\u76ee\u6807\u548c\u53ef\u7528\u7684\u4fe1\u606f\u6765\u6e90\u5b9e\u9645\u4e0a\u4e0e\u4f20\u7edf\u65b9\u6cd5\u6240\u4f7f\u7528\u7684\u975e\u5e38\u76f8\u4f3c\u3002\u90a3\u4e48\u5176\u4f18\u52bf\u6765\u6e90\u4e8e\u4ec0\u4e48\u5462\uff1f \u867d\u7136\u6a21\u578b\u548c\u4f18\u5316\u7684\u76ee\u6807\u51fd\u6570\u662f\u4e3b\u8981\u56e0\u7d20\uff0c\u4f46\u662f\u5176\u4ed6\u56e0\u7d20\u4e5f\u4f1a\u5f71\u54cd\u7ed3\u679c \u8d85\u53c2\u6570\u4f18\u5316\uff1a\u8d1f\u91c7\u6837\u7684\u6837\u672c\u4e2a\u6570\uff0c\u5e73\u6ed1\u7684\u8d1f\u91c7\u6837\u5206\u5e03\uff0c\u52a8\u6001\u5927\u5c0f\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3 \u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u8d85\u53c2\u6570\u663e\u5f0f\u5316\uff0c\u5e76\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u5b83\u4eec\u5e94\u7528\u5230\u4f20\u7edf\u7684\u57fa\u4e8e\u8ba1\u6570\u5668\u7684\u65b9\u6cd5\u4e2d\u3002\u4e3a\u4e86\u8bc4\u4f30\u6bcf\u4e2a\u8d85\u53c2\u6570\u5bf9\u7b97\u6cd5\u6027\u80fd\u7684\u5f71\u54cd\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u5b9e\u9a8c\uff0c\u6bd4\u8f83\u4e86\u56db\u79cd\u4e0d\u540c\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u540c\u65f6\u63a7\u5236\u4e86\u4e0d\u540c\u7684\u8d85\u53c2\u6570 Practical Recommendations \u901a\u5e38\u5efa\u8bae\u4e3a\u624b\u5934\u7684\u4efb\u52a1\u8c03\u4f18\u6240\u6709\u8d85\u53c2\u6570\uff0c\u4ee5\u53ca\u7279\u5b9a\u4e8e\u7b97\u6cd5\u7684\u8d85\u53c2\u6570\u3002\u7136\u800c\uff0c\u8fd9\u53ef\u80fd\u662f\u8ba1\u7b97\u6602\u8d35\u7684\u3002\u56e0\u6b64\u6211\u4eec\u63d0\u4f9b\u4e00\u4e9b\u201c\u7ecf\u9a8c\u6cd5\u5219\u201d\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u4eec\u5728\u6211\u4eec\u7684\u8bbe\u7f6e\u4e2d\u5de5\u4f5c\u5f97\u5f88\u597d\uff1a \u59cb\u7ec8\u4f7f\u7528\u4e0a\u4e0b\u6587\u5206\u5e03\u5e73\u6ed1(cds = 0.75)\u6765\u4fee\u6539PMI\uff0c\u5e76\u4e14\u9002\u7528\u4e8e PPMI,SVD \u548c SGNS\uff0c\u4e0d\u65ad\u63d0\u9ad8\u6027\u80fd \u4e0d\u8981\u4f7f\u7528 SVD \u201ccorrectly\u201d (eig = 1) \u3002\u4f7f\u7528\u5bf9\u79f0\u53d8\u4f53\u4e4b\u4e00 SGNS\u662f\u5065\u58ee\u7684\u57fa\u7ebf\u3002\u867d\u7136\u5b83\u53ef\u80fd\u4e0d\u662f\u6bcf\u4e2a\u4efb\u52a1\u7684\u6700\u4f73\u65b9\u6cd5\uff0c\u4f46\u5b83\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4e0d\u4f1a\u8868\u73b0\u5f97\u5f88\u5dee\u3002\u6b64\u5916\uff0cSGNS\u662f\u6700\u5feb\u7684\u8bad\u7ec3\u65b9\u6cd5\uff0c\u800c\u4e14\u5728\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u6d88\u8017\u65b9\u9762(\u5230\u76ee\u524d\u4e3a\u6b62)\u4e5f\u662f\u6700\u4fbf\u5b9c\u7684\u3002 SGNS\u9002\u5408\u66f4\u591a\u7684\u8d1f\u6837\u672c \u5bf9\u4e8eSGNS\u548cGloVe\u800c\u8a00\uff0c\u503c\u5f97\u5bf9 \\(\\vec{w}+\\vec{c}\\) \u505a\u5b9e\u9a8c\uff0c\u56e0\u4e3a\u8fd9\u662f\u5bb9\u6613\u5e94\u7528\uff08\u4e0d\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\uff09\u5e76\u4e14\u5e26\u6765\u53ef\u89c2\u6536\u76ca\uff08\u4ee5\u53ca\u53ef\u89c2\u635f\u5931\uff09\u7684\u3002 Conclusion \u6700\u8fd1\u7684\u5d4c\u5165\u65b9\u6cd5\u5f15\u5165\u4e86\u5927\u91cf\u7684\u7f51\u7edc\u7ed3\u6784\u4ee5\u5916\u7684\u8bbe\u8ba1\u9009\u62e9\u548c\u4f18\u5316\u7b97\u6cd5\u3002\u6211\u4eec\u63ed\u793a\u4e86\u8fd9\u4e9b\u770b\u4f3c\u5fae\u5c0f\u7684\u53d8\u5316\u5bf9\u5355\u8bcd\u8868\u793a\u65b9\u6cd5\u7684\u6210\u529f\u6709\u5f88\u5927\u7684\u5f71\u54cd\u3002\u901a\u8fc7\u5c55\u793a\u5982\u4f55\u5728\u4f20\u7edf\u65b9\u6cd5\u4e2d\u9002\u5e94\u548c\u8c03\u6574\u8fd9\u4e9b\u8d85\u53c2\u6570,\u6211\u4eec\u5bf9\u8868\u793a\u8fdb\u884c\u9002\u5f53\u7684\u6bd4\u8f83,\u5e76\u4ece\u8bcd\u5d4c\u5165\u6587\u732e\u4e2d\u6311\u6218\u5404\u79cd\u4f18\u52bf\u3002 \u672c\u7814\u7a76\u8fd8\u63ed\u793a\u4e86\u5bf9\u66f4\u591a\u63a7\u5236\u53d8\u91cf\u5b9e\u9a8c\u7684\u9700\u8981,\u5e76\u5c06\u201c\u53d8\u91cf\u201d\u7684\u6982\u5ff5\u4ece\u660e\u663e\u7684\u4efb\u52a1\u3001\u6570\u636e\u548c\u65b9\u6cd5\u6269\u5c55\u5230\u7ecf\u5e38\u5ffd\u7565\u7684\u9884\u5904\u7406\u6b65\u9aa4\u548c\u8d85\u53c2\u6570\u8bbe\u7f6e\u3002\u6211\u4eec\u8fd8\u5f3a\u8c03\u4e86\u9700\u8981\u8fdb\u884c\u900f\u660e\u548c\u53ef\u91cd\u590d\u7684\u5b9e\u9a8c,\u5e76\u8d5e\u626c\u8bf8\u5982Mikolov\u3001Pennington\u7b49\u4f5c\u8005,\u4ee5\u53ca\u5176\u4ed6\u4eba\u516c\u5f00\u63d0\u4f9b\u4ed6\u4eec\u7684\u4ee3\u7801\u3002\u672c\u7740\u8fd9\u79cd\u7cbe\u795e,\u6211\u4eec\u4e5f\u516c\u5e03\u6211\u4eec\u7684\u4ee3\u7801 Evaluation methods for unsupervised word embeddings \u00b6 Abstract \u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u79cd\u65e0\u76d1\u7763\u5d4c\u5165\u6280\u672f\u7684\u8bc4\u4f30\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u4ece\u6587\u672c\u4e2d\u83b7\u53d6\u6709\u610f\u4e49\u7684\u8868\u793a\u3002\u5d4c\u5165\u65b9\u6cd5\u7684\u987a\u5e8f\u4e0d\u540c\uff0c\u8bc4\u4ef7\u7ed3\u679c\u4e5f\u4e0d\u540c\uff0c\u8fd9\u5c31\u5bf9\u901a\u5e38\u8ba4\u4e3a\u53ea\u6709\u4e00\u4e2a\u6700\u4f18\u5411\u91cf\u8868\u793a\u7684\u5047\u8bbe\u63d0\u51fa\u4e86\u8d28\u7591\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b0\u7684\u8bc4\u4f30\u6280\u672f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u7279\u5b9a\u67e5\u8be2\u6bd4\u8f83\u8bcd\u5d4c\u5165\u3002\u8fd9\u4e9b\u65b9\u6cd5\u51cf\u5c11\u4e86\u504f\u5dee\uff0c\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u6d1e\u5bdf\u529b\uff0c\u5e76\u5141\u8bb8\u6211\u4eec\u901a\u8fc7\u4f17\u5305\u5feb\u901f\u51c6\u786e\u5730\u5f81\u6c42\u6570\u636e\u9a71\u52a8\u7684\u76f8\u5173\u6027\u5224\u65ad\u3002 Discussion \u8d85\u53c2\u6570\u4f18\u5316\u4f1a\u5bfc\u81f4\u660e\u663e\u7684\u6027\u80fd\u5dee\u5f02\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0d\u540c\u7684\u7b97\u6cd5\u7f16\u7801\u7684\u4fe1\u606f\u51fa\u5947\u5730\u4e0d\u540c\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u80fd\u4e0e\u6211\u4eec\u60f3\u8981\u7684\u7528\u4f8b\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u4e0e\u6211\u4eec\u60f3\u8981\u7684\u7528\u4f8b\u4e0d\u4e00\u81f4\u3002 \u4f8b\u5982\uff0c\u6211\u4eec\u53d1\u73b0\u8bcd\u5d4c\u5165\u5c06\u5173\u4e8e\u8bcd\u9891\u7684\u4fe1\u606f\u7684\u7f16\u7801\u7a0b\u5ea6\u4e0d\u540c\uff0c\u5373\u4f7f\u5728\u957f\u5ea6\u5f52\u4e00\u5316\u540e\u4e5f\u662f\u5982\u6b64\u3002 \u8fd9\u4e2a\u7ed3\u679c\u4ee4\u4eba\u60ca\u8bb6 \u9996\u5148\uff0c\u8bb8\u591a\u7b97\u6cd5\u4fdd\u7559\u4e86\u4e0d\u540c\u7684\u62e6\u622a\u53c2\u6570\u6765\u5438\u6536\u57fa\u4e8e\u9891\u7387\u7684\u6548\u679c\u3002 \u5176\u6b21\uff0c\u6211\u4eec\u5e0c\u671b\u5d4c\u5165\u7a7a\u95f4\u7684\u51e0\u4f55\u5f62\u72b6\u4e3b\u8981\u7531\u8bed\u4e49\u9a71\u52a8\uff1a\u9891\u7387\u76f8\u5bf9\u8f83\u5c0f\u7684\u8bcd\u5e94\u8be5\u5747\u5300\u5730\u5206\u5e03\u5728\u7a7a\u95f4\u4e2d\uff0c\u800c\u5927\u91cf\u7f55\u89c1\u7684\u3001\u7279\u5b9a\u7684\u5355\u8bcd\u5e94\u8be5\u56f4\u7ed5\u76f8\u5173\u4f46\u66f4\u9891\u7e41\u7684\u5355\u8bcd\u805a\u96c6\u3002 \u6211\u4eec\u8bad\u7ec3\u4e86\u4e00\u4e2a\u903b\u8f91\u56de\u5f52\u6a21\u578b\u6765\u9884\u6d4b\u57fa\u4e8e\u8bcd\u5411\u91cf\u7684\u8bcd\u9891\u7c7b\u522b\u3002\u8bad\u7ec3\u7ebf\u6027\u5206\u7c7b\u5668\u5c06\u5355\u8bcd\u5206\u7c7b\u4e3a\u5e38\u89c1\u6216\u7f55\u89c1\u7c7b\u522b\uff0c\u9608\u503c\u4ece100\u523050000\u4e0d\u7b49\u3002\u5728\u6bcf\u4e2a\u9608\u503c\u9891\u7387\u4e0b\uff0c\u6211\u4eec\u5bf9\u8bad\u7ec3\u96c6\u8fdb\u884c\u91c7\u6837\u4ee5\u786e\u4fdd\u6807\u7b7e\u5206\u5e03\u5728\u6240\u6709\u9891\u7387\u4e0a\u7684\u4e00\u81f4\u6027\u5e73\u8861\u3002\u6211\u4eec\u4f7f\u7528\u4e86\u957f\u5ea6\u5f52\u4e00\u5316\u7684\u5d4c\u5165\uff0c\u56e0\u4e3a\u7f55\u89c1\u7684\u5355\u8bcd\u5728\u8bad\u7ec3\u671f\u95f4\u66f4\u65b0\u8f83\u5c11\uff0c\u53ef\u80fd\u5177\u6709\u66f4\u77ed\u7684\u5411\u91cf(Turian et al., 2010)\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u62a5\u544a\u4e86\u5728\u6bcf\u4e2a\u9608\u503c\u9891\u7387\u4e0b\u4f7f\u7528\u4e94\u500d\u4ea4\u53c9\u9a8c\u8bc1\u7684\u5e73\u5747\u51c6\u786e\u5ea6\u548c\u6807\u51c6\u504f\u5dee(1 \\(\\sigma\\) )\u3002 \u6240\u6709\u5355\u8bcd\u5d4c\u5165\u90fd\u6bd4\u968f\u673a\u7684\u597d,\u8fd9\u8868\u660e\u5b83\u4eec\u5305\u542b\u4e00\u4e9b\u9891\u7387\u4fe1\u606f\u3002GloVe\u548cTSCCA\u5728\u63a5\u8fd11000\u7684\u8bcd\u9891\u4e0a\u8fbe\u5230\u8fd1100%\u7684\u51c6\u786e\u6027\u3002\u4e0e\u5176\u4ed6\u6240\u6709\u5d4c\u5165\u4e0d\u540c\uff0cC&W\u5d4c\u5165\u7684\u66f4\u5927\u7684\u8bcd\u9891\u7684\u51c6\u786e\u6027\u589e\u52a0\u4e86\u3002\u8fdb\u4e00\u6b65\u7684\u8c03\u67e5\u663e\u793a\uff0c\u6743\u91cd\u77e9\u9635\u7684\u65b9\u5411\u662f\u968f\u8bcd\u9891\u9608\u503c\u6539\u53d8\u7684\uff0c\u8fd9\u8868\u660e\u8bcd\u9891\u4f3c\u4e4e\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u4ee5\u5e73\u6ed1\u7684\u65b9\u5f0f\u88ab\u7f16\u7801\u3002 \u867d\u7136GloVe\u548cCBOW\u662f\u5185\u5728\u4efb\u52a1\u4e0a\u6700\u4f73\u7684\u4e24\u79cd\u5d4c\u5165\uff0c\u4f46\u5b83\u4eec\u5728\u5176\u7f16\u7801\u7684\u9891\u7387\u4fe1\u606f\u91cf\u4e0a\u6709\u5f88\u5927\u7684\u5dee\u5f02\u3002\u56e0\u6b64,\u6211\u4eec\u53ef\u4ee5\u65ad\u5b9a\uff0c\u4e0d\u540c\u7684\u9891\u7387\u9884\u6d4b\u5e76\u4e0d\u662f\u56e0\u4e3a\u81ea\u7136\u8bed\u8a00\u7684\u5185\u5728\u6027\u8d28\uff1a\u5e76\u4e0d\u662f\u8bf4\u9891\u7e41\u7684\u5355\u8bcd\u81ea\u7136\u53ea\u6709\u9891\u7e41\u7684\u90bb\u5c45\u3002 \u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u8bcd\u9891\u4fe1\u606f\u4e5f\u4f1a\u5f71\u54cd\u8bcd\u7684\u76f8\u4f3c\u6027\u3002\u5bf9\u4e8eWordSim-353\u6570\u636e\u96c6\uff0c\u6211\u4eec\u67e5\u8be2\u4e86k = 1000 \u4e2a\u6700\u8fd1\u90bb\u5c45\u3002\u7136\u540e\uff0c\u6211\u4eec\u67e5\u8be2\u5176\u5728\u8bad\u7ec3\u96c6\u8bed\u6599\u5e93\u4e2d\u9891\u7387\u7684\u6392\u540d\uff0c\u5e73\u5747\u4e86\u6240\u6709\u7684\u67e5\u8be2\u8bcd\u3002\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0**\u4e00\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u548c\u5b83\u5728\u6700\u8fd1\u90bb\u4e2d\u7684\u6392\u540d\u4f4d\u7f6e\u6709\u5f88\u5f3a\u7684\u76f8\u5173\u6027\u3002**\u4e0b\u56fe\u663e\u793a\u4e86C&W\u8bcd\u5d4c\u5165\u4e2d\u4e00\u4e2a\u8bcd\u7684\u6700\u8fd1\u90bb\u6392\u540d\uff08\u5173\u4e8e\u4e00\u6b21\u67e5\u8be2\uff09\u548c\u5176\u8bcd\u9891\u5728\u8bad\u7ec3\u96c6\u8bed\u6599\u5e93\u4e2d\u7684\u6392\u540d\u4e4b\u95f4\u7684\u5e42\u5f8b\u5173\u7cfb (nn-rank \u223c 1000 \u00b7 \\(\\text{corpus-rank}^{0.17}\\) )\u3002\u8fd9\u662f\u4e00\u4e2a\u503c\u5f97\u5173\u6ce8\u7684\u95ee\u9898\uff1a\u8bed\u8a00\u4e2d\u5355\u8bcd\u7684\u9891\u7387\u5728\u4eba\u7c7b\u7684\u6587\u5b57\u5904\u7406\u8fc7\u7a0b\u4e2d\u4e5f\u8d77\u7740\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528(Cattell, 1886)\u3002\u56e0\u6b64\uff0c\u5728\u5b9e\u9a8c\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u5730\u628a\u8bcd\u9891\u4f5c\u4e3a\u4e00\u4e2a\u56e0\u7d20\u6765\u8003\u8651\u3002\u540c\u65f6\uff0c\u4e0a\u8ff0\u7ed3\u679c\u4e5f\u8868\u660e\uff0c\u5e38\u7528\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u5728\u5d4c\u5165\u7a7a\u95f4\u5185\u7684\u56fa\u6709\u4efb\u52a1\u65f6\uff0c\u4f1a\u53d7\u5230\u9891\u7387\u6548\u5e94\u7684\u5f71\u54cd\u3002\u6211\u4eec\u8ba4\u4e3a\uff0c\u8fdb\u4e00\u6b65\u7684\u7814\u7a76\u5e94\u8be5\u89e3\u51b3\u5982\u4f55\u66f4\u597d\u5730\u8861\u91cf\u8bcd\u4e0e\u5d4c\u5165\u7a7a\u95f4\u4e4b\u95f4\u7684\u8bed\u8a00\u5173\u7cfb\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u901a\u8fc7\u5b66\u4e60\u81ea\u5b9a\u4e49\u5ea6\u91cf\u3002 Related Work Mikolov et al. (2013b) \u8bf4\u660e\u5d4c\u5165\u7a7a\u95f4\u5b58\u5728\u7279\u5b9a\u7684\u8bed\u8a00\u89c4\u5f8b\u3002\u901a\u8fc7\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u8fdb\u884c\u7b80\u5355\u7684\u5411\u91cf\u8fd0\u7b97\uff0c\u53ef\u4ee5\u89e3\u51b3\u5404\u79cd\u53e5\u6cd5\u548c\u8bed\u4e49\u7c7b\u6bd4\u95ee\u9898\u3002\u8fd9\u4e0e\u4e4b\u524d\u7684\u5de5\u4f5c\u4e0d\u540c\uff0c\u4e4b\u524d\u7684\u5de5\u4f5c\u5c06\u7c7b\u6bd4\u4efb\u52a1\u63cf\u8ff0\u4e3a\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898(Turney, 2008)\u3002\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u8bcd\u5d4c\u5165\u4f3c\u4e4e\u6355\u6349\u5230\u4e86\u66f4\u590d\u6742\u7684\u8bed\u8a00\u7279\u6027\u3002Chen\u7b49\u4eba(2013)\u7684\u7814\u7a76\u8868\u660e\uff0c\u5355\u8bcd\u5d4c\u5165\u751a\u81f3\u5305\u542b\u4e86\u533a\u57df\u62fc\u5199(\u82f1\u5f0f\u4e0e\u7f8e\u5f0f)\u3001\u540d\u8bcd\u6027\u522b\u548c\u60c5\u611f\u6781\u6027\u7b49\u4fe1\u606f\u3002 \u4ee5\u5f80\u7684\u8bcd\u5d4c\u5165\u8bc4\u4ef7\u5de5\u4f5c\u53ef\u5206\u4e3a\u5185\u90e8\u8bc4\u4ef7\u548c\u5916\u90e8\u8bc4\u4ef7\u3002\u5185\u5728\u8bc4\u4ef7\u901a\u8fc7\u76f4\u63a5\u6d4b\u91cf\u8bed\u4e49\u5173\u8054\u548c\u51e0\u4f55\u5173\u8054\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u6765\u8861\u91cf\u8bcd\u5411\u91cf\u7684\u8d28\u91cf\uff0c\u901a\u5e38\u901a\u8fc7\u67e5\u8be2\u672f\u8bed\u7684\u7684\u5e93\u5b58\u6765\u5b9e\u73b0\u3002Baroni\u7b49\u4eba(2014)\u4ee5\u5185\u5728\u5ea6\u91cf\u4e3a\u91cd\u70b9\uff0c\u5728\u5404\u79cd\u67e5\u8be2\u6e05\u5355\u548c\u4efb\u52a1\u4e0a\u6bd4\u8f83\u8bcd\u5d4c\u5165\u548c\u5206\u5e03\u8bcd\u5411\u91cf\u3002Faruqui and Dyer (2014)\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7f51\u7ad9\uff0c\u8be5\u7f51\u7ad9\u5141\u8bb8\u5bf9\u4e00\u4e9b\u67e5\u8be2\u6e05\u5355\u7684\u5d4c\u5165\u8fdb\u884c\u81ea\u52a8\u8bc4\u4f30\u3002Gaoetal.(2014)\u53d1\u8868\u4e86\u4e00\u4efd\u6539\u8fdb\u7684\u7c7b\u6bd4\u63a8\u7406\u4efb\u52a1\u67e5\u8be2\u6e05\u5355\u3002\u6700\u540e\uff0cTsvetkov\u7b49\u4eba(2015)\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u5185\u5728\u5ea6\u91cf\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u66f4\u597d\u5730\u5173\u8054\u5916\u90e8\u6548\u679c\u3002\u7136\u800c\uff0c\u6240\u6709\u8fd9\u4e9b\u8bc4\u4f30\u90fd\u662f\u5728\u9884\u5148\u6536\u96c6\u7684\u6e05\u5355\u4e0a\u8fdb\u884c\u7684\uff0c\u5e76\u4e14\u5927\u591a\u5c40\u9650\u4e8e\u672c\u5730\u6307\u6807\uff0c\u5982\u76f8\u5173\u6027\u3002 \u5916\u90e8\u8bc4\u4f30\u4f7f\u7528\u5d4c\u5165\u4f5c\u4e3a\u5176\u4ed6\u4efb\u52a1\u6a21\u578b\u4e2d\u7684\u7279\u5f81\uff0c\u4f8b\u5982\u8bed\u4e49\u89d2\u8272\u6807\u8bb0\u6216\u8bcd\u6027\u6807\u8bb0(Collobert etal., 2011)\uff0c\u5e76\u63d0\u9ad8\u73b0\u6709\u7cfb\u7edf\u7684\u6027\u80fd(Turianetal.\uff0c2010)\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u5728\u5176\u4ed6\u4efb\u52a1\u4e0a\uff0c\u5982\u89e3\u6790\uff0c\u5219\u4e0d\u592a\u6210\u529f(Andreas\u548cKlein, 2014)\u3002 \u5728\u4e3b\u9898\u6a21\u578b\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u65e0\u76d1\u7763\u8bed\u4e49\u5efa\u6a21\u65b9\u9762\u505a\u4e86\u66f4\u591a\u7684\u5de5\u4f5c\u3002\u4e00\u4e2a\u4f8b\u5b50\u662f\u5355\u8bcd\u5165\u4fb5\u4efb\u52a1(Chang et al.\uff0c 2009)\uff0c\u5176\u4e2d\u6ce8\u91ca\u5668\u88ab\u8981\u6c42\u8bc6\u522b\u63d2\u5165\u5230\u7ed9\u5b9a\u4e3b\u9898\u7684\u4e00\u7ec4\u9ad8\u6982\u7387\u5355\u8bcd\u4e2d\u7684\u968f\u673a\u5355\u8bcd\u3002\u8bcd\u5d4c\u5165\u4e0d\u4ea7\u751f\u53ef\u89e3\u91ca\u7684\u7ef4\u5ea6\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e2a\u57fa\u4e8e\u6700\u8fd1\u90bb\u5c45\u7684\u76f8\u5173\u4efb\u52a1\u3002\u624b\u5de5\u8bc4\u4f30\u662f\u6602\u8d35\u548c\u8017\u65f6\u7684\uff0c\u4f46\u5176\u4ed6\u7814\u7a76\u8868\u660e\uff0c\u81ea\u52a8\u5316\u8bc4\u4f30\u53ef\u4ee5\u7d27\u5bc6\u5730\u6a21\u62df\u4eba\u7c7b\u7684\u76f4\u89c9(Newman et al.\uff0c 2010)\u3002 Conclusion \u5f71\u54cd\u5d4c\u5165\u8d28\u91cf\u7684\u56e0\u7d20\u5f88\u591a\u3002\u6807\u51c6\u7684\u7efc\u5408\u8bc4\u4ef7\u867d\u7136\u6709\u7528\uff0c\u4f46\u4e0d\u80fd\u63d0\u4f9b\u5b8c\u6574\u6216\u4e00\u81f4\u7684\u60c5\u51b5\u3002\u8bcd\u6c47\u9891\u7387\u7b49\u56e0\u7d20\u5728\u5176\u4e2d\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\uff0c\u800c\u8fd9\u5728\u4ee5\u524d\u662f\u4e0d\u4e3a\u4eba\u77e5\u7684\u3002\u8bcd\u9891\u4e5f\u4f1a\u5e72\u6270\u5e38\u7528\u7684\u4f59\u5f26\u76f8\u4f3c\u6027\u5ea6\u91cf\u3002\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u8bc4\u4f30\u6846\u67b6\uff0c\u8be5\u6846\u67b6\u57fa\u4e8e\u5d4c\u5165\u4e4b\u95f4\u7684\u76f4\u63a5\u6bd4\u8f83\uff0c\u4e3a\u8fd9\u4e9b\u5d4c\u5165\u63d0\u4f9b\u4e86\u66f4\u7cbe\u7ec6\u7684\u5206\u6790\uff0c\u5e76\u652f\u6301\u7b80\u5355\u7684\u4f17\u5305\u76f8\u5173\u6027\u5224\u65ad\u3002\u6211\u4eec\u8fd8\u63d0\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u4e00\u81f4\u6027\u4efb\u52a1\uff0c\u5b83\u6d4b\u91cf\u4e86\u6211\u4eec\u7684\u76f4\u89c9\uff0c\u5373\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u90bb\u57df\u5e94\u8be5\u5728\u8bed\u4e49\u6216\u8bed\u6cd5\u4e0a\u76f8\u5173\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5916\u90e8\u8bc4\u4f30\u867d\u7136\u6709\u52a9\u4e8e\u7a81\u51fa\u5d4c\u5165\u6027\u80fd\u7684\u7279\u5b9a\u65b9\u9762\uff0c\u4f46\u4e0d\u5e94\u8be5\u7528\u4f5c\u901a\u7528\u8d28\u91cf\u7684\u4ee3\u7406\u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b (\u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1)","title":"02 Word Vectors 2 and Word Senses"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#lecture-02-word-vectors-and-word-senses","text":"Lecture Plan Finish looking at word vectors and word2vec Optimization basics Can we capture this essence more effectively by counting? The GloVe model of word vectors Evaluating word vectors Word senses The course Goal : be able to read word embeddings papers by the end of class.","title":"Lecture 02 Word Vectors and Word Senses"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#review-main-idea-of-word2vec","text":"\\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u904d\u5386\u6574\u4e2a\u8bed\u6599\u5e93\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd \u4f7f\u7528\u5355\u8bcd\u5411\u91cf\u9884\u6d4b\u5468\u56f4\u7684\u5355\u8bcd \u66f4\u65b0\u5411\u91cf\u4ee5\u4fbf\u66f4\u597d\u5730\u9884\u6d4b Word2vec parameters and computations \\(n \\times d \\cdot d \\to 1 \\rightarrow n \\times 1 \\overset{softmax} \\to n \\times 1\\) \u6bcf\u884c\u4ee3\u8868\u4e00\u4e2a\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c\u70b9\u4e58\u540e\u5f97\u5230\u7684\u5206\u6570\u901a\u8fc7softmax\u6620\u5c04\u4e3a\u6982\u7387\u5206\u5e03\uff0c\u5e76\u4e14\u6211\u4eec\u5f97\u5230\u7684\u6982\u7387\u5206\u5e03\u662f\u5bf9\u4e8e\u8be5\u4e2d\u5fc3\u8bcd\u800c\u8a00\u7684\u4e0a\u4e0b\u6587\u4e2d\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\uff0c\u8be5\u5206\u5e03\u4e8e\u4e0a\u4e0b\u6587\u6240\u5728\u7684\u5177\u4f53\u4f4d\u7f6e\u65e0\u5173\uff0c\u6240\u4ee5\u5728\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u9884\u6d4b\u90fd\u662f\u4e00\u6837\u7684 \u6211\u4eec\u5e0c\u671b\u6a21\u578b\u5bf9\u4e0a\u4e0b\u6587\u4e2d(\u76f8\u5f53\u9891\u7e41)\u51fa\u73b0\u7684\u6240\u6709\u5355\u8bcd\u7ed9\u51fa\u4e00\u4e2a\u5408\u7406\u7684\u9ad8\u6982\u7387\u4f30\u8ba1 the, and, that, of \u8fd9\u6837\u7684\u505c\u7528\u8bcd\uff0c\u662f\u6bcf\u4e2a\u5355\u8bcd\u70b9\u4e58\u540e\u5f97\u5230\u7684\u8f83\u5927\u6982\u7387\u7684\u5355\u8bcd \u53bb\u6389\u8fd9\u4e00\u90e8\u5206\u53ef\u4ee5\u4f7f\u8bcd\u5411\u91cf\u6548\u679c\u66f4\u597d","title":"Review: Main idea of word2vec"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#optimization-gradient-descent","text":"Gradient Descent \u6bcf\u6b21\u4f7f\u7528\u5168\u90e8\u6837\u672c\u8fdb\u884c\u66f4\u65b0 Stochastic Gradient Descent \u6bcf\u6b21\u53ea\u662f\u7528\u5355\u4e2a\u6837\u672c\u8fdb\u884c\u66f4\u65b0 Mini-batch\u5177\u6709\u4ee5\u4e0b\u4f18\u70b9 \u901a\u8fc7\u5e73\u5747\u503c\uff0c\u51cf\u5c11\u68af\u5ea6\u4f30\u8ba1\u7684\u566a\u97f3 \u5728GPU\u4e0a\u5e76\u884c\u5316\u8fd0\u7b97\uff0c\u52a0\u5feb\u8fd0\u7b97\u901f\u5ea6 Stochastic gradients with word vectors \\(\\nabla_{\\theta} J_{t}(\\theta)\\) \u5c06\u4f1a\u975e\u5e38\u7a00\u758f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u80fd\u53ea\u66f4\u65b0\u5b9e\u9645\u51fa\u73b0\u7684\u5411\u91cf \u89e3\u51b3\u65b9\u6848 \u9700\u8981\u7a00\u758f\u77e9\u9635\u66f4\u65b0\u64cd\u4f5c\u6765\u53ea\u66f4\u65b0\u77e9\u9635U\u548cV\u4e2d\u7684\u7279\u5b9a\u884c \u9700\u8981\u4fdd\u7559\u5355\u8bcd\u5411\u91cf\u7684\u6563\u5217 \u5982\u679c\u6709\u6570\u767e\u4e07\u4e2a\u5355\u8bcd\u5411\u91cf\uff0c\u5e76\u4e14\u8fdb\u884c\u5206\u5e03\u5f0f\u8ba1\u7b97\uff0c\u90a3\u4e48\u91cd\u8981\u7684\u662f\u4e0d\u5fc5\u5230\u5904\u53d1\u9001\u5de8\u5927\u7684\u66f4\u65b0 Word2vec: More details \u4e3a\u4ec0\u4e48\u4e24\u4e2a\u5411\u91cf\uff1f \u66f4\u5bb9\u6613\u4f18\u5316\uff0c\u6700\u540e\u90fd\u53d6\u5e73\u5747\u503c \u53ef\u4ee5\u6bcf\u4e2a\u5355\u8bcd\u53ea\u7528\u4e00\u4e2a\u5411\u91cf \u4e24\u4e2a\u6a21\u578b\u53d8\u4f53 Skip-grams (SG) \u8f93\u5165\u4e2d\u5fc3\u8bcd\u5e76\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd Continuous Bag of Words (CBOW) \u8f93\u5165\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5e76\u9884\u6d4b\u4e2d\u5fc3\u8bcd \u4e4b\u524d\u4e00\u76f4\u4f7f\u7528naive\u7684softmax(\u7b80\u5355\u4f46\u4ee3\u4ef7\u5f88\u9ad8\u7684\u8bad\u7ec3\u65b9\u6cd5)\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528\u8d1f\u91c7\u6837\u65b9\u6cd5\u52a0\u5feb\u8bad\u7ec3\u901f\u7387 The skip-gram model with negative sampling (HW2) softmax\u4e2d\u7528\u4e8e\u5f52\u4e00\u5316\u7684\u5206\u6bcd\u7684\u8ba1\u7b97\u4ee3\u4ef7\u592a\u9ad8 $$ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} $$ \u6211\u4eec\u5c06\u5728\u4f5c\u4e1a2\u4e2d\u5b9e\u73b0\u4f7f\u7528 negative sampling \u8d1f\u91c7\u6837\u65b9\u6cd5\u7684 skip-gram \u6a21\u578b \u4f7f\u7528\u4e00\u4e2a true pair (\u4e2d\u5fc3\u8bcd\u53ca\u5176\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u8bcd)\u4e0e\u51e0\u4e2a noise pair (\u4e2d\u5fc3\u8bcd\u4e0e\u968f\u673a\u8bcd\u642d\u914d) \u5f62\u6210\u7684\u6837\u672c\uff0c\u8bad\u7ec3\u4e8c\u5143\u903b\u8f91\u56de\u5f52 \u539f\u6587\u4e2d\u7684(\u6700\u5927\u5316)\u76ee\u6807\u51fd\u6570\u662f \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J_{t}(\\theta) \\] \\[ J_{t}(\\theta)=\\log \\sigma\\left(u_{o}^{T} v_{c}\\right)+\\sum_{i=1}^{k} \\mathbb{E}_{j \\sim P(w)}\\left[\\log \\sigma\\left(-u_{j}^{T} v_{c}\\right)\\right] \\] \u672c\u8bfe\u4ee5\u53ca\u4f5c\u4e1a\u4e2d\u7684\u76ee\u6807\u51fd\u6570\u662f \\[ J_{\\text {neg-sample}}\\left(\\boldsymbol{o}, \\boldsymbol{v}_{c}, \\boldsymbol{U}\\right)=-\\log \\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)\\right)-\\sum_{k=1}^{K} \\log \\left(\\sigma\\left(-\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)\\right) \\] \u6211\u4eec\u5e0c\u671b\u4e2d\u5fc3\u8bcd\u4e0e\u771f\u5b9e\u4e0a\u4e0b\u6587\u5355\u8bcd\u7684\u5411\u91cf\u70b9\u79ef\u66f4\u5927\uff0c\u4e2d\u5fc3\u8bcd\u4e0e\u968f\u673a\u5355\u8bcd\u7684\u70b9\u79ef\u66f4\u5c0f k\u662f\u6211\u4eec\u8d1f\u91c7\u6837\u7684\u6837\u672c\u6570\u76ee \\[ P(w)=U(w)^{3 / 4} / Z \\] \u4f7f\u7528\u4e0a\u5f0f\u4f5c\u4e3a\u62bd\u6837\u7684\u5206\u5e03\uff0c \\(U(w)\\) \u662f unigram \u5206\u5e03\uff0c\u901a\u8fc7 \\(\\frac{3}{4}\\) \u6b21\u65b9\uff0c\u76f8\u5bf9\u51cf\u5c11\u5e38\u89c1\u5355\u8bcd\u7684\u9891\u7387\uff0c\u589e\u5927\u7a00\u6709\u8bcd\u7684\u6982\u7387\u3002 \\(Z\\) \u7528\u4e8e\u751f\u6210\u6982\u7387\u5206\u5e03\u3002","title":"Optimization: Gradient Descent"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#but-why-not-capture-co-occurrence-counts-directly","text":"\u5171\u73b0\u77e9\u9635 X \u4e24\u4e2a\u9009\u9879\uff1awindows vs. full document Window \uff1a\u4e0eword2vec\u7c7b\u4f3c\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u5468\u56f4\u90fd\u4f7f\u7528Window\uff0c\u5305\u62ec\u8bed\u6cd5(POS)\u548c\u8bed\u4e49\u4fe1\u606f Word-document \u5171\u73b0\u77e9\u9635\u7684\u57fa\u672c\u5047\u8bbe\u662f\u5728\u540c\u4e00\u7bc7\u6587\u7ae0\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u66f4\u6709\u53ef\u80fd\u76f8\u4e92\u5173\u8054\u3002\u5047\u8bbe\u5355\u8bcd \\(i\\) \u51fa\u73b0\u5728\u6587\u7ae0 \\(j\\) \u4e2d\uff0c\u5219\u77e9\u9635\u5143\u7d20 \\(X_{ij}\\) \u52a0\u4e00\uff0c\u5f53\u6211\u4eec\u5904\u7406\u5b8c\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u6587\u7ae0\u540e\uff0c\u5c31\u5f97\u5230\u4e86\u77e9\u9635 X \uff0c\u5176\u5927\u5c0f\u4e3a \\(|V|\\times M\\) \uff0c\u5176\u4e2d \\(|V|\\) \u4e3a\u8bcd\u6c47\u91cf\uff0c\u800c \\(M\\) \u4e3a\u6587\u7ae0\u6570\u3002\u8fd9\u4e00\u6784\u5efa\u5355\u8bcd\u6587\u7ae0co-occurrence matrix\u7684\u65b9\u6cd5\u4e5f\u662f\u7ecf\u5178\u7684Latent Semantic Analysis\u6240\u91c7\u7528\u7684\u3002 \u6f5c\u5728\u8bed\u4e49\u5206\u6790 \u5229\u7528\u67d0\u4e2a\u5b9a\u957f\u7a97\u53e3\u4e2d\u5355\u8bcd\u4e0e\u5355\u8bcd\u540c\u65f6\u51fa\u73b0\u7684\u6b21\u6570\u6765\u4ea7\u751fwindow-based (word-word) co-occurrence matrix\u3002\u4e0b\u9762\u4ee5\u7a97\u53e3\u957f\u5ea6\u4e3a1\u6765\u4e3e\u4f8b\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u6570\u636e\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u53e5\u5b50\uff1a I like deep learning. I like NLP. I enjoy flying. \u5219\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684word-word co-occurrence matrix: \u4f7f\u7528\u5171\u73b0\u6b21\u6570\u8861\u91cf\u5355\u8bcd\u7684\u76f8\u4f3c\u6027\uff0c\u4f46\u662f\u4f1a\u968f\u7740\u8bcd\u6c47\u91cf\u7684\u589e\u52a0\u800c\u589e\u5927\u77e9\u9635\u7684\u5927\u5c0f\uff0c\u5e76\u4e14\u9700\u8981\u5f88\u591a\u7a7a\u95f4\u6765\u5b58\u50a8\u8fd9\u4e00\u9ad8\u7ef4\u77e9\u9635\uff0c\u540e\u7eed\u7684\u5206\u7c7b\u6a21\u578b\u4e5f\u4f1a\u7531\u4e8e\u77e9\u9635\u7684\u7a00\u758f\u6027\u800c\u5b58\u5728\u7a00\u758f\u6027\u95ee\u9898\uff0c\u4f7f\u5f97\u6548\u679c\u4e0d\u4f73\u3002\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e00\u77e9\u9635\u8fdb\u884c\u964d\u7ef4\uff0c\u83b7\u5f97\u4f4e\u7ef4(25-1000)\u7684\u7a20\u5bc6\u5411\u91cf\u3002 Method 1: Dimensionality Reduction on X (HW1) \u4f7f\u7528SVD\u65b9\u6cd5\u5c06\u5171\u73b0\u77e9\u9635 X \u5206\u89e3\u4e3a \\(U \\Sigma V^{\\top}\\) \uff0c \\(\\sum\\) \u662f\u5bf9\u89d2\u7ebf\u77e9\u9635\uff0c\u5bf9\u89d2\u7ebf\u4e0a\u7684\u503c\u662f\u77e9\u9635\u7684\u5947\u5f02\u503c\u3002 \\(U,V\\) \u662f\u5bf9\u5e94\u4e8e\u884c\u548c\u5217\u7684\u6b63\u4ea4\u57fa\u3002 \u4e3a\u4e86\u51cf\u5c11\u5c3a\u5ea6\u540c\u65f6\u5c3d\u91cf\u4fdd\u5b58\u6709\u6548\u4fe1\u606f\uff0c\u53ef\u4fdd\u7559\u5bf9\u89d2\u77e9\u9635\u7684\u6700\u5927\u7684k\u4e2a\u503c\uff0c\u5e76\u5c06\u77e9\u9635 \\(U,V\\) \u7684\u76f8\u5e94\u7684\u884c\u5217\u4fdd\u7559\u3002\u8fd9\u662f\u7ecf\u5178\u7684\u7ebf\u6027\u4ee3\u6570\u7b97\u6cd5\uff0c\u5bf9\u4e8e\u5927\u578b\u77e9\u9635\u800c\u8a00\uff0c\u8ba1\u7b97\u4ee3\u4ef7\u6602\u8d35\u3002 Hacks to X (several used in Rohde et al. 2005) \u6309\u6bd4\u4f8b\u8c03\u6574 counts \u4f1a\u5f88\u6709\u6548 \u5bf9\u9ad8\u9891\u8bcd\u8fdb\u884c\u7f29\u653e(\u8bed\u6cd5\u6709\u592a\u591a\u7684\u5f71\u54cd) \u4f7f\u7528log\u8fdb\u884c\u7f29\u653e \\(min(X, t), t \\approx 100\\) \u76f4\u63a5\u5168\u90e8\u5ffd\u89c6 \u5728\u57fa\u4e8ewindow\u7684\u8ba1\u6570\u4e2d\uff0c\u63d0\u9ad8\u66f4\u52a0\u63a5\u8fd1\u7684\u5355\u8bcd\u7684\u8ba1\u6570 \u4f7f\u7528Pearson\u76f8\u5173\u7cfb\u6570 Conclusion\uff1a\u5bf9\u8ba1\u6570\u8fdb\u884c\u5904\u7406\u662f\u53ef\u4ee5\u5f97\u5230\u6709\u6548\u7684\u8bcd\u5411\u91cf\u7684 \\(drive \\to driver , swim \\to swimmer, teach \\to teacher\\) \u5728\u5411\u91cf\u4e2d\u51fa\u73b0\u7684\u6709\u8da3\u7684\u53e5\u6cd5\u6a21\u5f0f\uff1a\u8bed\u4e49\u5411\u91cf\u57fa\u672c\u4e0a\u662f\u7ebf\u6027\u7ec4\u4ef6\uff0c\u867d\u7136\u6709\u4e00\u4e9b\u6446\u52a8\uff0c\u4f46\u662f\u57fa\u672c\u662f\u5b58\u5728\u52a8\u8bcd\u548c\u52a8\u8bcd\u5b9e\u65bd\u8005\u7684\u65b9\u5411\u3002 \u57fa\u4e8e\u8ba1\u6570\uff1a\u4f7f\u7528\u6574\u4e2a\u77e9\u9635\u7684\u5168\u5c40\u7edf\u8ba1\u6570\u636e\u6765\u76f4\u63a5\u4f30\u8ba1 \u4f18\u70b9 \u8bad\u7ec3\u5feb\u901f \u7edf\u8ba1\u6570\u636e\u9ad8\u6548\u5229\u7528 \u7f3a\u70b9 \u4e3b\u8981\u7528\u4e8e\u6355\u6349\u5355\u8bcd\u76f8\u4f3c\u6027 \u5bf9\u5927\u91cf\u6570\u636e\u7ed9\u4e88\u6bd4\u4f8b\u5931\u8c03\u7684\u91cd\u89c6 \u8f6c\u6362\u8ba1\u6570\uff1a\u5b9a\u4e49\u6982\u7387\u5206\u5e03\u5e76\u8bd5\u56fe\u9884\u6d4b\u5355\u8bcd \u4f18\u70b9 \u63d0\u9ad8\u5176\u4ed6\u4efb\u52a1\u7684\u6027\u80fd \u80fd\u6355\u83b7\u9664\u4e86\u5355\u8bcd\u76f8\u4f3c\u6027\u4ee5\u5916\u7684\u590d\u6742\u7684\u6a21\u5f0f \u7f3a\u70b9 \u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u6709\u5173\u7684\u91cf\u8868 \u7edf\u8ba1\u6570\u636e\u7684\u4f4e\u6548\u4f7f\u7528\uff08 \u91c7\u6837\u662f\u5bf9\u7edf\u8ba1\u6570\u636e\u7684\u4f4e\u6548\u4f7f\u7528 \uff09","title":"But why not capture co-occurrence counts directly?"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#encoding-meaning-in-vector-differences","text":"\u5c06\u4e24\u4e2a\u6d41\u6d3e\u7684\u60f3\u6cd5\u7ed3\u5408\u8d77\u6765\uff0c\u5728\u795e\u7ecf\u7f51\u7edc\u4e2d\u4f7f\u7528\u8ba1\u6570\u77e9\u9635 \u5173\u4e8eGlove\u7684\u7406\u8bba\u5206\u6790\u9700\u8981\u9605\u8bfb\u539f\u6587\uff0c\u4e5f\u53ef\u4ee5\u9605\u8bfb CS224N\u7b14\u8bb0(\u4e8c)\uff1aGloVe \u5173\u952e\u601d\u60f3 \uff1a\u5171\u73b0\u6982\u7387\u7684\u6bd4\u503c\u53ef\u4ee5\u5bf9meaning component\u8fdb\u884c\u7f16\u7801 \u91cd\u70b9\u4e0d\u662f\u5355\u4e00\u7684\u6982\u7387\u5927\u5c0f\uff0c\u91cd\u70b9\u662f\u4ed6\u4eec\u4e4b\u95f4\u7684\u6bd4\u503c\uff0c\u5176\u4e2d\u8574\u542b\u7740meaning component\u3002 \u4f8b\u5982\u6211\u4eec\u60f3\u533a\u5206\u70ed\u529b\u5b66\u4e0a\u4e24\u79cd\u4e0d\u540c\u72b6\u6001ice\u51b0\u4e0e\u84b8\u6c7dsteam\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u53ef\u901a\u8fc7\u4e0e\u4e0d\u540c\u7684\u5355\u8bcd x \u7684co-occurrence probability \u7684\u6bd4\u503c\u6765\u63cf\u8ff0\u3002 \u4f8b\u5982\u5bf9\u4e8esolid\u56fa\u6001\uff0c\u867d\u7136 \\(P(solid|ice)\\) \u4e0e \\(P(solid|steam)\\) \u672c\u8eab\u5f88\u5c0f\uff0c\u4e0d\u80fd\u900f\u9732\u6709\u6548\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u6bd4\u503c \\(\\frac{P(solid|ice)}{P(solid|steam)}\\) \u5374\u8f83\u5927\uff0c\u56e0\u4e3asolid\u66f4\u5e38\u7528\u6765\u63cf\u8ff0ice\u7684\u72b6\u6001\u800c\u4e0d\u662fsteam\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u5728ice\u7684\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u51e0\u7387\u8f83\u5927 \u5bf9\u4e8egas\u5219\u6070\u6070\u76f8\u53cd\uff0c\u800c\u5bf9\u4e8ewater\u8fd9\u79cd\u63cf\u8ff0ice\u4e0esteam\u5747\u53ef\u6216\u8005fashion\u8fd9\u79cd\u4e0e\u4e24\u8005\u90fd\u6ca1\u4ec0\u4e48\u8054\u7cfb\u7684\u5355\u8bcd\uff0c\u5219\u6bd4\u503c\u63a5\u8fd1\u4e8e1\u3002\u6240\u4ee5\u76f8\u8f83\u4e8e\u5355\u7eaf\u7684co-occurrence probability\uff0c\u5b9e\u9645\u4e0aco-occurrence probability\u7684\u76f8\u5bf9\u6bd4\u503c\u66f4\u6709\u610f\u4e49 \u6211\u4eec\u5982\u4f55\u5728\u8bcd\u5411\u91cf\u7a7a\u95f4\u4e2d\u4ee5\u7ebf\u6027meaning component\u7684\u5f62\u5f0f\u6355\u83b7\u5171\u73b0\u6982\u7387\u7684\u6bd4\u503c\uff1f log-bilinear \u6a21\u578b : \\(w_{i} \\cdot w_{j}=\\log P(i | j)\\) \u5411\u91cf\u5dee\u5f02 : \\(w_{x} \\cdot\\left(w_{a}-w_{b}\\right)=\\log \\frac{P(x | a)}{P(x | b)}\\) \u5982\u679c\u4f7f\u5411\u91cf\u70b9\u79ef\u7b49\u4e8e\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u90a3\u4e48\u5411\u91cf\u5dee\u5f02\u53d8\u6210\u4e86\u5171\u73b0\u6982\u7387\u7684\u6bd4\u7387 \\[ J=\\sum_{i, j=1}^{V} f\\left(X_{i j}\\right)\\left(w_{i}^{T} \\tilde{w}_{j}+b_{i}+\\tilde{b}_{j}-\\log X_{i j}\\right)^{2} \\] \u4f7f\u7528\u5e73\u65b9\u8bef\u5dee\u4fc3\u4f7f\u70b9\u79ef\u5c3d\u53ef\u80fd\u5f97\u63a5\u8fd1\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570 \u4f7f\u7528 \\(f(x)\\) \u5bf9\u5e38\u89c1\u5355\u8bcd\u8fdb\u884c\u9650\u5236 \u4f18\u70b9 \u8bad\u7ec3\u5feb\u901f \u53ef\u4ee5\u6269\u5c55\u5230\u5927\u578b\u8bed\u6599\u5e93 \u5373\u4f7f\u662f\u5c0f\u8bed\u6599\u5e93\u548c\u5c0f\u5411\u91cf\uff0c\u6027\u80fd\u4e5f\u5f88\u597d","title":"Encoding meaning in vector differences"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#how-to-evaluate-word-vectors","text":"\u4e0eNLP\u7684\u4e00\u822c\u8bc4\u4f30\u76f8\u5173\uff1a\u5185\u5728\u4e0e\u5916\u5728 \u5185\u5728 \u5bf9\u7279\u5b9a/\u4e2d\u95f4\u5b50\u4efb\u52a1\u8fdb\u884c\u8bc4\u4f30 \u8ba1\u7b97\u901f\u5ea6\u5feb \u6709\u52a9\u4e8e\u7406\u89e3\u8fd9\u4e2a\u7cfb\u7edf \u4e0d\u6e05\u695a\u662f\u5426\u771f\u7684\u6709\u7528\uff0c\u9664\u975e\u4e0e\u5b9e\u9645\u4efb\u52a1\u5efa\u7acb\u4e86\u76f8\u5173\u6027 \u5916\u5728 \u5bf9\u771f\u5b9e\u4efb\u52a1\u7684\u8bc4\u4f30 \u8ba1\u7b97\u7cbe\u786e\u5ea6\u53ef\u80fd\u9700\u8981\u5f88\u957f\u65f6\u95f4 \u4e0d\u6e05\u695a\u5b50\u7cfb\u7edf\u662f\u95ee\u9898\u6240\u5728\uff0c\u662f\u4ea4\u4e92\u95ee\u9898\uff0c\u8fd8\u662f\u5176\u4ed6\u5b50\u7cfb\u7edf \u5982\u679c\u7528\u53e6\u4e00\u4e2a\u5b50\u7cfb\u7edf\u66ff\u6362\u4e00\u4e2a\u5b50\u7cfb\u7edf\u53ef\u4ee5\u63d0\u9ad8\u7cbe\u786e\u5ea6 Intrinsic word vector evaluation \u8bcd\u5411\u91cf\u7c7b\u6bd4 a:b :: c:? \\[ d=\\arg \\max _{i} \\frac{\\left(x_{b}-x_{a}+x_{c}\\right)^{T} x_{i}}{\\left\\|x_{b}-x_{a}+x_{c}\\right\\|} \\] \u901a\u8fc7\u52a0\u6cd5\u540e\u7684\u4f59\u5f26\u8ddd\u79bb\u662f\u5426\u80fd\u5f88\u597d\u5730\u6355\u6349\u5230\u76f4\u89c2\u7684\u8bed\u4e49\u548c\u53e5\u6cd5\u7c7b\u6bd4\u95ee\u9898\u6765\u8bc4\u4f30\u5355\u8bcd\u5411\u91cf \u4ece\u641c\u7d22\u4e2d\u4e22\u5f03\u8f93\u5165\u7684\u5355\u8bcd \u95ee\u9898:\u5982\u679c\u6709\u4fe1\u606f\u4f46\u4e0d\u662f\u7ebf\u6027\u7684\u600e\u4e48\u529e\uff1f Glove\u53ef\u89c6\u5316\u6548\u679c \u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u96c6\u8bc4\u4f30\u8bed\u6cd5\u548c\u8bed\u4e49\u4e0a\u7684\u6548\u679c Analogy evaluation and hyperparameters 300\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u8bcd\u5411\u91cf\u7ef4\u5ea6 \u4e0d\u5bf9\u79f0\u4e0a\u4e0b\u6587(\u53ea\u4f7f\u7528\u5355\u4fa7\u7684\u5355\u8bcd)\u4e0d\u662f\u5f88\u597d\uff0c\u4f46\u662f\u8fd9\u5728\u4e0b\u6e38\u4efb\u52a1\u91cd\u53ef\u80fd\u4e0d\u540c window size \u8bbe\u4e3a 8 \u5bf9 Glove\u5411\u91cf\u6765\u8bf4\u6bd4\u8f83\u597d \u5206\u6790 window size\u8bbe\u4e3a2\u7684\u65f6\u5019\u5b9e\u9645\u4e0a\u6709\u6548\u7684\uff0c\u5e76\u4e14\u5bf9\u4e8e\u53e5\u6cd5\u5206\u6790\u662f\u66f4\u597d\u7684\uff0c\u56e0\u4e3a\u53e5\u6cd5\u6548\u679c\u975e\u5e38\u5c40\u90e8 On the Dimensionality of Word Embedding \u5229\u7528\u77e9\u9635\u6444\u52a8\u7406\u8bba\uff0c\u63ed\u793a\u4e86\u8bcd\u5d4c\u5165\u7ef4\u6570\u9009\u62e9\u7684\u57fa\u672c\u7684\u504f\u5dee\u4e0e\u65b9\u6cd5\u7684\u6743\u8861 \u5f53\u6301\u7eed\u589e\u5927\u8bcd\u5411\u91cf\u7ef4\u5ea6\u7684\u65f6\u5019\uff0c\u8bcd\u5411\u91cf\u7684\u6548\u679c\u4e0d\u4f1a\u4e00\u76f4\u53d8\u5dee\u5e76\u4e14\u4f1a\u4fdd\u6301\u5e73\u7a33 Analogy evaluation and hyperparameters \u8bad\u7ec3\u65f6\u95f4\u8d8a\u957f\u8d8a\u597d \u6570\u636e\u96c6\u8d8a\u5927\u8d8a\u597d\uff0c\u5e76\u4e14\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\u6bd4\u65b0\u95fb\u6587\u672c\u6570\u636e\u96c6\u8981\u597d \u56e0\u4e3a\u7ef4\u57fa\u767e\u79d1\u5c31\u662f\u5728\u89e3\u91ca\u6982\u5ff5\u4ee5\u53ca\u4ed6\u4eec\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u8054\uff0c\u66f4\u591a\u7684\u8bf4\u660e\u6027\u6587\u672c\u663e\u793a\u4e86\u4e8b\u7269\u4e4b\u95f4\u7684\u6240\u6709\u8054\u7cfb \u800c\u65b0\u95fb\u5e76\u4e0d\u53bb\u89e3\u91ca\uff0c\u800c\u53ea\u662f\u53bb\u9610\u8ff0\u4e00\u4e9b\u4e8b\u4ef6 Another intrinsic word vector evaluation \u4f7f\u7528 cosine similarity \u8861\u91cf\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684\u76f8\u4f3c\u7a0b\u5ea6","title":"How to evaluate word vectors?"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#word-senses-and-word-sense-ambiguity","text":"\u5927\u591a\u6570\u5355\u8bcd\u90fd\u662f\u591a\u4e49\u7684 \u7279\u522b\u662f\u5e38\u89c1\u5355\u8bcd \u7279\u522b\u662f\u5b58\u5728\u5df2\u4e45\u7684\u5355\u8bcd Improving Word Representations Via Global Context And Multiple Word Prototypes (Huang et al. 2012) \u5c06\u5e38\u7528\u8bcd\u7684\u6240\u6709\u4e0a\u4e0b\u6587\u8fdb\u884c\u805a\u7c7b\uff0c\u901a\u8fc7\u8be5\u8bcd\u5f97\u5230\u4e00\u4e9b\u6e05\u6670\u7684\u7c07\uff0c\u4ece\u800c\u5c06\u8fd9\u4e2a\u5e38\u7528\u8bcd\u5206\u89e3\u4e3a\u591a\u4e2a\u5355\u8bcd\uff0c\u4f8b\u5982 bank_1, bank_2, bank_3 \u867d\u7136\u8fd9\u5f88\u7c97\u7cd9\uff0c\u5e76\u4e14\u6709\u65f6sensors\u4e4b\u95f4\u7684\u5212\u5206\u4e5f\u4e0d\u662f\u5f88\u660e\u786e\u751a\u81f3\u76f8\u4e92\u91cd\u53e0 Linear Algebraic Structure of Word Senses, with Applications to Polysemy\u3001 \u5355\u8bcd\u5728\u6807\u51c6\u5355\u8bcd\u5d4c\u5165(\u5982word2vec)\u4e2d\u7684\u4e0d\u540c\u542b\u4e49\u4ee5\u7ebf\u6027\u53e0\u52a0(\u52a0\u6743\u548c)\u7684\u5f62\u5f0f\u5b58\u5728\uff0c \\(f\\) \u6307\u9891\u7387 \\[ v_{\\text { pike }}=\\alpha_{1} v_{\\text { pike }_{1}}+\\alpha_{2} v_{\\text { pike }_{2}}+\\alpha_{3} v_{\\text { pike }_{3}} \\\\ \\alpha_{1}=\\frac{f_{1}}{f_{1}+f_{2}+f_{3}} \\] \u4ee4\u4eba\u60ca\u8bb6\u7684\u7ed3\u679c\uff0c\u53ea\u662f\u52a0\u6743\u5e73\u5747\u503c\u5c31\u5df2\u7ecf\u53ef\u4ee5\u83b7\u5f97\u5f88\u597d\u7684\u6548\u679c \u7531\u4e8e\u4ece\u7a00\u758f\u7f16\u7801\u4e2d\u5f97\u5230\u7684\u6982\u5ff5\uff0c\u4f60\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5c06\u611f\u5b98\u5206\u79bb\u51fa\u6765(\u524d\u63d0\u662f\u5b83\u4eec\u76f8\u5bf9\u6bd4\u8f83\u5e38\u89c1) \u53ef\u4ee5\u7406\u89e3\u4e3a\u7531\u4e8e\u5355\u8bcd\u5b58\u5728\u4e8e\u9ad8\u7ef4\u7684\u5411\u91cf\u7a7a\u95f4\u4e4b\u4e2d\uff0c\u4e0d\u540c\u7684\u7eac\u5ea6\u6240\u5305\u542b\u7684\u542b\u4e49\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u52a0\u6743\u5e73\u5747\u503c\u5e76\u4e0d\u4f1a\u635f\u5bb3\u5355\u8bcd\u5728\u4e0d\u540c\u542b\u4e49\u6240\u5c5e\u7684\u7eac\u5ea6\u4e0a\u5b58\u50a8\u7684\u4fe1\u606f Extrinsic word vector evaluation \u5355\u8bcd\u5411\u91cf\u7684\u5916\u90e8\u8bc4\u4f30\uff1a\u8bcd\u5411\u91cf\u53ef\u4ee5\u5e94\u7528\u4e8eNLP\u7684\u5f88\u591a\u4efb\u52a1","title":"Word senses and word sense ambiguity"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#notes-02-glove-evaluation-and-training","text":"Keyphrases : Global Vectors for Word Representation (GloVe). Intrinsic and extrinsic evaluations. Effect of hyperparameters on analogy evaluation tasks. Correlation of human judgment with word vector distances. Dealing with ambiguity in word using contexts. Window classification. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u9996\u5148\u4ecb\u7ecd\u4e86\u8bad\u7ec3\u8bcd\u5411\u91cf\u7684Glove\u6a21\u578b\u3002\u7136\u540e\uff0c\u5b83\u6269\u5c55\u4e86\u6211\u4eec\u5bf9\u8bcd\u5411\u91cf(\u6216\u79f0\u8bcd\u5d4c\u5165)\u7684\u8ba8\u8bba\uff0c\u770b\u770b\u5b83\u4eec\u662f\u5982\u4f55\u901a\u8fc7\u5185\u90e8\u548c\u5916\u90e8\u6765\u8bc4\u4f30\u7684\u3002\u6211\u4eec\u8ba8\u8bba\u4e86\u4ee5\u8bcd\u7c7b\u6bd4\u4f5c\u4e3a\u4e00\u79cd\u5185\u5728\u8bc4\u4ef7\u6280\u672f\u7684\u4f8b\u5b50\uff0c\u4ee5\u53ca\u5b83\u5982\u4f55\u88ab\u7528\u6765\u8c03\u6574\u8bcd\u5d4c\u5165\u6280\u672f\u3002\u7136\u540e\u6211\u4eec\u8ba8\u8bba\u4e86\u8bad\u7ec3\u6a21\u578b\u7684\u6743\u91cd/\u53c2\u6570\u548c\u8bcd\u5411\u91cf\u7684\u5916\u90e8\u4efb\u52a1\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u4f5c\u4e3a\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u7684\u6a21\u578b\u3002","title":"Notes 02  GloVe, Evaluation and Training"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#1-global-vectors-for-word-representation-glove","text":"","title":"1 Global Vectors for Word Representation (GloVe)"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#11-comparison-with-previous-methods","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u7814\u7a76\u4e86\u4e24\u7c7b\u4e3b\u8981\u7684\u8bcd\u5d4c\u5165\u65b9\u6cd5\u3002\u7b2c\u4e00\u7c7b\u662f\u57fa\u4e8e\u7edf\u8ba1\u5e76\u4e14\u4f9d\u8d56\u77e9\u9635\u5206\u89e3\uff08\u4f8b\u5982LSA\uff0cHAL\uff09\u3002\u867d\u7136\u8fd9\u7c7b\u65b9\u6cd5\u6709\u6548\u5730\u5229\u7528\u4e86**\u5168\u5c40\u7684\u4fe1\u606f**\uff0c\u5b83\u4eec\u4e3b\u8981\u7528\u4e8e\u6355\u83b7\u5355\u8bcd\u7684**\u76f8\u4f3c\u6027**\uff0c\u4f46\u662f\u5bf9\u4f8b\u5982\u5355\u8bcd\u7c7b\u6bd4\u7684\u4efb\u52a1\u4e0a\u8868\u73b0\u4e0d\u597d\u3002\u53e6\u5916\u4e00\u7c7b\u65b9\u6cd5\u662f\u57fa\u4e8e\u6d45\u5c42\u7a97\u53e3\uff08\u4f8b\u5982\uff0cSkip-Gram \u548c CBOW \u6a21\u578b\uff09\uff0c\u8fd9\u7c7b\u6a21\u578b\u901a\u8fc7\u5728\u5c40\u90e8\u4e0a\u4e0b\u6587\u7a97\u53e3\u901a\u8fc7\u9884\u6d4b\u6765\u5b66\u4e60\u8bcd\u5411\u91cf\u3002\u8fd9\u4e9b\u6a21\u578b\u9664\u4e86\u5728\u5355\u8bcd\u76f8\u4f3c\u6027\u4efb\u52a1\u4e0a\u8868\u73b0\u826f\u597d\u5916\uff0c\u8fd8\u5c55\u793a\u4e86\u6355\u83b7**\u590d\u6742\u8bed\u8a00\u6a21\u5f0f**\u80fd\u529b\uff0c\u4f46\u672a\u80fd\u5229\u7528\u5230\u5168\u5c40\u5171\u73b0\u7edf\u8ba1\u6570\u636e\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0cGloVe \u7531\u4e00\u4e2a\u52a0\u6743\u6700\u5c0f\u4e8c\u4e58\u6a21\u578b\u7ec4\u6210\uff0c\u57fa\u4e8e\u5168\u5c40word-word\u5171\u73b0\u8ba1\u6570\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ece\u800c\u6709\u6548\u5730\u5229\u7528\u5168\u5c40\u7edf\u8ba1\u6570\u636e\u3002\u6a21\u578b\u751f\u6210\u4e86\u5305\u542b\u6709\u610f\u4e49\u7684\u5b50\u7ed3\u6784\u7684\u5355\u8bcd\u5411\u91cf\u7a7a\u95f4\uff0c\u5728\u8bcd\u7c7b\u6bd4\u4efb\u52a1\u4e0a\u8868\u73b0\u975e\u5e38\u51fa\u8272\u3002 Glove \u5229\u7528\u5168\u5c40\u7edf\u8ba1\u91cf\uff0c\u4ee5\u6700\u5c0f\u4e8c\u4e58\u4e3a\u76ee\u6807\uff0c\u9884\u6d4b\u5355\u8bcd \\(j\\) \u51fa\u73b0\u5728\u5355\u8bcd \\(i\\) \u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\u3002","title":"1.1 Comparison with Previous Methods"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#12-co-occurrence-matrix","text":"\\(X\\) \u8868\u793a word-word \u5171\u73b0\u77e9\u9635\uff0c\u5176\u4e2d \\(X_{ij}\\) \u8868\u793a\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6b21\u6570\u3002\u4ee4 \\(X_{i}=\\sum_{k}X_{ik}\\) \u4e3a\u4efb\u610f\u8bcd \\(k\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6b21\u6570\u3002\u6700\u540e\uff0c\u4ee4 \\(P_{ij}=P(w_{j}\\mid w_{i})=\\frac{X_{ij}}{X_{i}}\\) \u662f\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6982\u7387\u3002 \u8ba1\u7b97\u8fd9\u4e2a\u77e9\u9635\u9700\u8981\u904d\u5386\u4e00\u6b21\u6574\u4e2a\u8bed\u6599\u5e93\u83b7\u5f97\u7edf\u8ba1\u4fe1\u606f\u3002\u5bf9\u5e9e\u5927\u7684\u8bed\u6599\u5e93\uff0c\u8fd9\u6837\u7684\u904d\u5386\u4f1a\u4ea7\u751f\u975e\u5e38\u5927\u7684\u8ba1\u7b97\u91cf\uff0c\u4f46\u662f\u8fd9\u53ea\u662f\u4e00\u6b21\u6027\u7684\u524d\u671f\u6295\u5165\u6210\u672c\u3002","title":"1.2 Co-occurrence Matrix"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#13-least-squares-objective","text":"\u56de\u60f3\u4e00\u4e0b Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u4f7f\u7528 softmax \u6765\u8ba1\u7b97\u8bcd \\(j\\) \u51fa\u73b0\u5728\u8bcd \\(i\\) \u7684\u4e0a\u4e0b\u6587\u7684\u6982\u7387\u3002 \\[ Q_{ij}=\\frac{exp(u_{j}^{T}v_{i})}{\\sum_{w=1}^{W}exp(u_{w}^{T}v_{i})} \\] \u8bad\u7ec3\u65f6\u4ee5\u5728\u7ebf\u968f\u673a\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u4f46\u662f\u9690\u542b\u7684\u5168\u5c40\u4ea4\u53c9\u71b5\u635f\u5931\u53ef\u4ee5\u5982\u4e0b\u8ba1\u7b97\uff1a \\[ J=-\\sum_{i\\in corpus} \\sum_{j\\in context(i)}log\\;Q_{ij} \\] \u540c\u6837\u7684\u5355\u8bcd \\(i\\) \u548c \\(j\\) \u53ef\u80fd\u5728\u8bed\u6599\u5e93\u4e2d\u51fa\u73b0\u591a\u6b21\uff0c\u56e0\u6b64\u9996\u5148\u5c06 \\(i\\) \u548c \\(j\\) \u76f8\u540c\u7684\u503c\u7ec4\u5408\u8d77\u6765\u66f4\u6709\u6548\uff1a \\[ J=-\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{ij}log\\;Q_{ij} \\] \u5176\u4e2d\uff0c\u5171\u73b0\u9891\u7387\u7684\u503c\u662f\u901a\u8fc7\u5171\u73b0\u77e9\u9635 \\(X\\) \u7ed9\u5b9a\u3002 \u4ea4\u53c9\u71b5\u635f\u5931\u7684\u4e00\u4e2a\u663e\u7740\u7f3a\u70b9\u662f\u8981\u6c42\u5206\u5e03 \\(Q\\) \u88ab\u6b63\u786e\u5f52\u4e00\u5316\uff0c\u56e0\u4e3a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u7684\u6c42\u548c\u7684\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u6700\u5c0f\u4e8c\u4e58\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5176\u4e2d \\(P\\) \u548c \\(Q\\) \u7684\u5f52\u4e00\u5316\u56e0\u5b50\u88ab\u4e22\u5f03\u4e86\uff1a \\[ \\widehat{J}=\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(\\widehat{P}_{ij}-\\widehat{Q}_{ij})^{2} \\] \u5176\u4e2d \\(\\hat{P}_{i j}=X_{i j} \\text { and } \\hat{Q}_{i j}=\\exp \\left(\\vec{u}_{j}^{T} \\vec{v}_{i}\\right)\\) \u662f\u672a\u5f52\u4e00\u5316\u5206\u5e03\u3002\u8fd9\u4e2a\u516c\u5f0f\u5e26\u6765\u4e86\u4e00\u4e2a\u65b0\u7684\u95ee\u9898\uff0c \\(X_{ij}\\) \u7ecf\u5e38\u4f1a\u662f\u5f88\u5927\u7684\u503c\uff0c\u4ece\u800c\u96be\u4ee5\u4f18\u5316\u3002\u4e00\u4e2a\u6709\u6548\u7684\u6539\u53d8\u662f\u6700\u5c0f\u5316 \\(\\widehat{P}\\) \u548c \\(\\widehat{Q}\\) \u5bf9\u6570\u7684\u5e73\u65b9\u8bef\u5dee\uff1a \\[ \\begin{eqnarray} \\widehat{J} &=&\\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(log(\\widehat{P}_{ij})-log(\\widehat{Q}_{ij}))^{2} \\nonumber \\\\ &=& \\sum_{i=1}^{W}\\sum_{j=1}^{W}X_{i}(u_{j}^{T}v_{i}-log\\; X_{ij})^{2} \\nonumber \\end{eqnarray} \\] \u53e6\u5916\u4e00\u4e2a\u95ee\u9898\u662f\u6743\u503c\u56e0\u5b50 \\(X_{i}\\) \u4e0d\u80fd\u4fdd\u8bc1\u662f\u6700\u4f18\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u66f4\u4e00\u822c\u5316\u7684\u6743\u503c\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u7531\u5730\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u5355\u8bcd\uff1a \\[ \\widehat{J}=\\sum_{i=1}^{W}\\sum_{j=1}^{W}f(X_{ij})(u_{j}^{T}v_{i}-log\\; X_{ij})^{2} \\]","title":"1.3 Least Squares Objective"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#14-conclusion","text":"\u603b\u800c\u8a00\u4e4b\uff0cGloVe \u6a21\u578b\u4ec5\u5bf9\u5355\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\u7684\u975e\u96f6\u5143\u7d20\u8bad\u7ec3\uff0c\u4ece\u800c\u6709\u6548\u5730\u5229\u7528\u5168\u5c40\u7edf\u8ba1\u4fe1\u606f\uff0c\u5e76\u751f\u6210\u5177\u6709\u6709\u610f\u4e49\u7684\u5b50\u7ed3\u6784\u5411\u91cf\u7a7a\u95f4\u3002\u7ed9\u51fa\u76f8\u540c\u7684\u8bed\u6599\u5e93\uff0c\u8bcd\u6c47\uff0c\u7a97\u53e3\u5927\u5c0f\u548c\u8bad\u7ec3\u65f6\u95f4\uff0c\u5b83\u7684\u8868\u73b0\u90fd\u4f18\u4e8e word2vec\uff0c\u5b83\u53ef\u4ee5\u66f4\u5feb\u5730\u5b9e\u73b0\u66f4\u597d\u7684\u6548\u679c\uff0c\u5e76\u4e14\u65e0\u8bba\u901f\u5ea6\u5982\u4f55\uff0c\u90fd\u80fd\u83b7\u5f97\u6700\u4f73\u6548\u679c\u3002","title":"1.4 Conclusion"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#2-evaluation-of-word-vectors","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u8bf8\u5982 Word2Vec \u548c GloVe \u6765\u8bad\u7ec3\u548c\u53d1\u73b0\u8bed\u4e49\u7a7a\u95f4\u4e2d\u7684\u81ea\u7136\u8bed\u8a00\u8bcd\u8bed\u7684\u6f5c\u5728\u5411\u91cf\u8868\u793a\u3002\u5728\u8fd9\u90e8\u5206\uff0c\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u91cf\u5316\u8bc4\u4f30\u8bcd\u5411\u91cf\u7684\u8d28\u91cf\u3002","title":"2 Evaluation of Word Vectors"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#21-intrinsic-evaluation","text":"\u8bcd\u5411\u91cf\u7684\u5185\u90e8\u8bc4\u4f30\u662f\u5bf9\u4e00\u7ec4\u7531\u5982 Word2Vec \u6216 GloVe \u751f\u6210\u7684\u8bcd\u5411\u91cf\u5728\u7279\u5b9a\u7684\u4e2d\u95f4\u5b50\u4efb\u52a1\uff08\u5982\u8bcd\u7c7b\u6bd4\uff09\u4e0a\u7684\u8bc4\u4f30\u3002\u8fd9\u4e9b\u5b50\u4efb\u52a1\u901a\u5e38\u7b80\u5355\u800c\u4e14\u8ba1\u7b97\u901f\u5ea6\u5feb\uff0c\u4ece\u800c\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u751f\u6210\u7684\u7684\u8bcd\u5411\u91cf\u3002\u5185\u90e8\u8bc4\u4f30\u901a\u5e38\u5e94\u8be5\u8fd4\u56de\u7ed9\u6211\u4eec\u4e00\u4e2a\u6570\u503c\uff0c\u6765\u8868\u793a\u8fd9\u4e9b\u8bcd\u5411\u91cf\u5728\u8bc4\u4f30\u5b50\u4efb\u52a1\u4e0a\u7684\u8868\u73b0\u3002 \u5bf9\u7279\u5b9a\u7684\u4e2d\u95f4\u4efb\u52a1\u8fdb\u884c\u8bc4\u4f30 \u53ef\u4ee5\u5f88\u5feb\u7684\u8ba1\u7b97\u6027\u80fd \u5e2e\u52a9\u7406\u89e3\u5b50\u7cfb\u7edf \u9700\u8981\u548c\u771f\u5b9e\u7684\u4efb\u52a1\u6b63\u76f8\u5173\u6765\u786e\u5b9a\u6709\u7528\u6027 \u5728\u4e0b\u56fe\u4e2d\uff0c\u5de6\u5b50\u7cfb\u7edf\uff08\u7ea2\u8272\uff09\u8bad\u7ec3\u7684\u8ba1\u7b97\u91cf\u5927\uff0c\u56e0\u6b64\u66f4\u6539\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5b50\u7cfb\u7edf\uff08\u7eff\u8272\uff09\u4f5c\u5185\u90e8\u8bc4\u4f30\u3002 **\u52a8\u673a\uff1a**\u6211\u4eec\u8003\u8651\u521b\u5efa\u4e00\u4e2a\u95ee\u7b54\u7cfb\u7edf\uff0c\u5176\u4e2d\u4f7f\u7528\u8bcd\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165\u7684\u4f8b\u5b50\u3002\u4e00\u4e2a\u65b9\u6cd5\u662f\u8bad\u7ec3\u4e00\u4e2a\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff1a \u8f93\u5165\u8bcd\u8bed \u5c06\u8f93\u5165\u8bcd\u8bed\u8f6c\u6362\u4e3a\u8bcd\u5411\u91cf \u5bf9\u4e00\u4e2a\u590d\u6742\u7684\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff0c\u4f7f\u7528\u8bcd\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165 \u5c06\u8f93\u51fa\u7684\u8bcd\u5411\u91cf\u901a\u8fc7\u7cfb\u7edf\u6620\u5c04\u5230\u81ea\u7136\u8bed\u8a00\u8bcd\u8bed\u4e0a\u3002 \u751f\u6210\u8bcd\u8bed\u4f5c\u4e3a\u7b54\u6848 \u5f53\u7136\uff0c\u5728\u8bad\u7ec3\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u7b54\u7cfb\u7edf\u7684\u8fc7\u7a0b\u4e2d\uff0c\u56e0\u4e3a\u5b83\u4eec\u88ab\u7528\u5728\u4e0b\u6e38\u5b50\u7cfb\u7edf\uff08\u4f8b\u5982\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\uff09\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u6700\u4f18\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5bf9 Word2Vec \u5b50\u7cfb\u7edf\u4e2d\u7684\u8bb8\u591a\u8d85\u53c2\u6570\u8fdb\u884c\u8c03\u6574\uff08\u4f8b\u5982\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\uff09\u3002 \u867d\u7136\u6700\u7406\u60f3\u7684\u65b9\u6cd5\u662f\u5728 Word2Vec \u5b50\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55\u53c2\u6570\u6539\u53d8\u540e\u90fd\u91cd\u65b0\u8bad\u7ec3\uff0c\u4f46\u4ece\u5de5\u7a0b\u89d2\u5ea6\u6765\u770b\u662f\u4e0d\u5b9e\u9645\u7684\uff0c\u56e0\u4e3a\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\uff08\u5728\u7b2c3\u6b65\uff09\u901a\u5e38\u662f\u4e00\u4e2a\u6df1\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u7f51\u7edc\u4e2d\u7684\u6570\u767e\u4e07\u4e2a\u53c2\u6570\u9700\u8981\u5f88\u957f\u7684\u65f6\u95f4\u8bad\u7ec3\u3002 \u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u90e8\u8bc4\u4f30\u6280\u672f\u6765\u5ea6\u91cf\u8bcd\u5411\u91cf\u5b50\u7cfb\u7edf\u7684\u597d\u574f\u3002\u663e\u7136\u7684\u8981\u6c42\u662f\u5185\u90e8\u8bc4\u4ef7\u4e0e\u6700\u7ec8\u4efb\u52a1\u7684\u8868\u73b0\u6709\u6b63\u76f8\u5173\u5173\u7cfb\u3002","title":"2.1 Intrinsic Evaluation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#22-extrinsic-evaluation","text":"\u8bcd\u5411\u91cf\u7684\u5916\u90e8\u8bc4\u4f30\u662f\u5bf9\u4e00\u7ec4\u5728\u5b9e\u9645\u4efb\u52a1\u4e2d\u751f\u6210\u7684\u8bcd\u5411\u91cf\u7684\u8bc4\u4f30\u3002\u8fd9\u4e9b\u4efb\u52a1\u901a\u5e38\u590d\u6742\u800c\u4e14\u8ba1\u7b97\u901f\u5ea6\u6162\u3002\u5bf9\u6211\u4eec\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u5141\u8bb8\u5bf9\u95ee\u9898\u7b54\u6848\u8fdb\u884c\u8bc4\u4f30\u7684\u7cfb\u7edf\u662f\u5916\u90e8\u8bc4\u4f30\u7cfb\u7edf\u3002\u901a\u5e38\uff0c\u4f18\u5316\u8868\u73b0\u4e0d\u4f73\u7684\u5916\u90e8\u8bc4\u4f30\u7cfb\u7edf\u6211\u4eec\u96be\u4ee5\u786e\u5b9a\u54ea\u4e2a\u7279\u5b9a\u5b50\u7cfb\u7edf\u5b58\u5728\u9519\u8bef\uff0c\u8fd9\u5c31\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u5185\u90e8\u8bc4\u4f30\u3002 \u5bf9\u771f\u5b9e\u4efb\u52a1\u7684\u8bc4\u4f30 \u8ba1\u7b97\u6027\u80fd\u53ef\u80fd\u5f88\u6162 \u4e0d\u6e05\u695a\u662f\u5b50\u7cfb\u7edf\u51fa\u4e86\u95ee\u9898\uff0c\u8fd8\u662f\u5176\u4ed6\u5b50\u7cfb\u7edf\u51fa\u4e86\u95ee\u9898\uff0c\u8fd8\u662f\u5185\u90e8\u4ea4\u4e92\u51fa\u4e86\u95ee\u9898 \u5982\u679c\u66ff\u6362\u5b50\u7cfb\u7edf\u63d0\u9ad8\u4e86\u6027\u80fd\uff0c\u90a3\u4e48\u66f4\u6539\u53ef\u80fd\u662f\u597d\u7684","title":"2.2 Extrinsic Evaluation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#23-intrinsic-evaluation-example-word-vector-analogies","text":"\u4e00\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\u5185\u90e8\u8bc4\u4f30\u7684\u65b9\u6cd5\u662f\u8bcd\u5411\u91cf\u7684\u7c7b\u6bd4\u3002\u5728\u8bcd\u5411\u91cf\u7c7b\u6bd4\u4e2d\uff0c\u7ed9\u5b9a\u4ee5\u4e0b\u5f62\u5f0f\u7684\u4e0d\u5b8c\u6574\u7c7b\u6bd4\uff1a \\[ a:b::c:? \\] \u7136\u540e\u5185\u90e8\u8bc4\u4f30\u7cfb\u7edf\u8ba1\u7b97\u8bcd\u5411\u91cf\u7684\u6700\u5927\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff1a \\[ d=arg\\max_{i}\\frac{(x_{b}-x_{a}+x_{c})^{T}x_{i}}{|x_{b}-x_{a}+x_{c}|} \\] \u8fd9\u4e2a\u6307\u6807\u6709\u76f4\u89c2\u7684\u89e3\u91ca\u3002\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b \\(x_{b}-x_{a}=x_{d}-x_{c}\\) \uff08\u4f8b\u5982\uff0cqueen-king=actress-actor\uff09\u3002\u8fd9\u5c31\u6697\u542b\u7740\u6211\u4eec\u5e0c\u671b \\(x_{b}-x_{a}+x_{c}=x_{d}\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u786e\u5b9a\u53ef\u4ee5\u6700\u5927\u5316\u4e24\u4e2a\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684\u5f52\u4e00\u5316\u70b9\u79ef\u7684\u5411\u91cf \\(x_{d}\\) \u5373\u53ef\uff08\u5373\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff09\u3002\u4f7f\u7528\u8bf8\u5982\u8bcd\u5411\u91cf\u7c7b\u6bd4\u7684\u5185\u90e8\u8bc4\u4f30\u6280\u672f\u5e94\u8be5\u5c0f\u5fc3\u5904\u7406\uff08\u8981\u8003\u8651\u5230\u9884\u8bad\u7ec3\u7684\u8bed\u6599\u5e93\u7684\u5404\u4e2a\u65b9\u9762\uff09\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u7684\u7c7b\u6bd4\u5f62\u5f0f\uff1a \\(City\\;1:State\\;containing\\;City\\;1:\\;:City\\;2:State\\;containing\\;City\\;2\\) \u4e0a\u56fe\u662f\u53ef\u80fd\u53d7\u5230\u5177\u6709\u76f8\u540c\u540d\u79f0\u7684\u4e0d\u540c\u57ce\u5e02\u7684\u8bed\u4e49\u8bcd\u5411\u91cf\u7c7b\u6bd4\uff08\u5185\u5728\u8bc4\u4f30\uff09\u3002\u5728\u4e0a\u9762\u5f88\u591a\u7684\u4f8b\u5b50\uff0c\u7f8e\u56fd\u6709\u5f88\u591a\u540c\u540d\u7684\u57ce\u5e02\uff0f\u57ce\u9547\uff0f\u6751\u5e84\u3002\u56e0\u6b64\uff0c\u5f88\u591a\u5dde\u90fd\u7b26\u5408\u6b63\u786e\u7684\u7b54\u6848\u3002\u4f8b\u5982\uff0c\u5728\u7f8e\u56fd\u81f3\u5c11\u6709 10 \u4e2a\u5730\u65b9\u7684\u540d\u79f0\u662f Phoenix\uff0c\u6240\u4ee5 Arizona \u4e0d\u662f\u552f\u4e00\u7684\u6b63\u786e\u7b54\u6848\u3002\u5728\u8003\u8651\u4ee5\u4e0b\u7684\u7c7b\u6bd4\u5f62\u5f0f\uff1a \\(Capital\\;City\\;1:\\;Country\\;1:\\;:Capital\\;City\\;2:\\;Country\\;2\\) \u4e0a\u56fe\u662f\u53ef\u80fd\u5728\u4e0d\u540c\u65f6\u95f4\u70b9\u6709\u4e0d\u540c\u9996\u90fd\u7684\u56fd\u5bb6\u7684**\u8bed\u4e49**\u8bcd\u5411\u91cf\u7c7b\u6bd4\uff08\u5185\u5728\u8bc4\u4f30\uff09\u3002\u4e0a\u9762\u5f88\u591a\u7684\u4f8b\u5b50\uff0c\u8fd9\u4e2a\u4efb\u52a1\u4e2d\u751f\u6210\u7684\u57ce\u5e02\u4ec5\u4ec5\u662f\u8fd1\u671f\u7684\u56fd\u5bb6\u9996\u90fd\uff0c\u53ef\u80fd\u4f1a\u53d7\u5230\u4e0d\u540c\u56fd\u5bb6\u5728\u4e0d\u540c\u65f6\u95f4\u70b9\u62e5\u6709\u4e0d\u540c\u9996\u90fd\u7684\u5f71\u54cd\u3002\u4f8b\u5982\uff0c1997 \u5e74\u4e4b\u524d Kazakhstan \u7684\u9996\u90fd\u662f Almaty\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u7684\u8bed\u6599\u5e93\u8fc7\u65f6\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 \u4e4b\u524d\u7684\u4e24\u4e2a\u4f8b\u5b50\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u8bcd\u5411\u91cf\u8fdb\u884c\u8bed\u4e49\u6d4b\u8bd5\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8bcd\u5411\u91cf\u7c7b\u4f3c\u8fdb\u884c**\u8bed\u6cd5**\u6d4b\u8bd5\u3002\u4e0b\u9762\u662f\u6d4b\u8bd5\u5f62\u5bb9\u8bcd\u6700\u9ad8\u7ea7\u6982\u5ff5\u7684\u53e5\u6cd5\u8bcd\u5411\u91cf\u7c7b\u6bd4(\u5185\u5728\u8bc4\u4ef7)\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7c7b\u4f3c\u5730\uff0c\u4e0b\u56fe\u7684\u5185\u90e8\u8bc4\u4f30\u5c55\u793a\u4e86\u6d4b\u8bd5\u8bcd\u5411\u91cf\u6355\u83b7\u8fc7\u53bb\u65f6\u6001\u6982\u5ff5\u7684\u80fd\u529b","title":"2.3 Intrinsic Evaluation Example: Word Vector Analogies"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#24-intrinsic-evaluation-tuning-example-analogy-evaluations","text":"\u6211\u4eec\u73b0\u5728\u63a2\u8ba8\u4f7f\u7528\u5185\u5728\u8bc4\u4f30\u7cfb\u7edf\uff08\u5982\u7c7b\u6bd4\u7cfb\u7edf\uff09\u6765\u8c03\u6574\u7684\u8bcd\u5411\u91cf\u5d4c\u5165\u6280\u672f\uff08\u5982 Word2Vec \u548c GloVe\uff09\u4e2d\u7684\u8d85\u53c2\u6570\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b\u5728\u7c7b\u6bd4\u8bc4\u4f30\u4efb\u52a1\u4e2d\uff0c\u5728\u76f8\u540c\u7684\u8d85\u53c2\u6570\u4e0b\uff0c\u7531\u4e0d\u540c\u65b9\u6cd5\u521b\u5efa\u7684\u8bcd\u5411\u91cf\u8868\u73b0\u6548\u679c\uff1a \u6839\u636e\u4e0a\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 3 \u70b9\uff1a \u6a21\u578b\u7684\u8868\u73b0\u9ad8\u5ea6\u4f9d\u8d56\u6a21\u578b\u6240\u4f7f\u7528\u7684\u8bcd\u5411\u91cf\u7684\u6a21\u578b\uff1a \u8fd9\u70b9\u662f\u53ef\u4ee5\u9884\u6599\u5230\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u751f\u6210\u8bcd\u5411\u91cf\u65b9\u6cd5\u662f\u57fa\u4e8e\u4e0d\u540c\u7684**\u7279\u6027**\u7684\uff08\u4f8b\u5982\u5171\u73b0\u8ba1\u6570\uff0c\u5947\u5f02\u5411\u91cf\u7b49\u7b49\uff09\u3002 \u8bed\u6599\u5e93\u66f4\u5927\u6a21\u578b\u7684\u8868\u73b0\u66f4\u597d\uff1a \u8fd9\u662f\u56e0\u4e3a\u6a21\u578b\u8bad\u7ec3\u7684\u8bed\u6599\u8d8a\u5927\uff0c\u6a21\u578b\u7684\u8868\u73b0\u5c31\u4f1a\u66f4\u597d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bad\u7ec3\u7684\u65f6\u5019\u6ca1\u6709\u5305\u542b\u6d4b\u8bd5\u7684\u8bcd\u8bed\uff0c\u90a3\u4e48\u8bcd\u7c7b\u6bd4\u4f1a\u4ea7\u751f\u9519\u8bef\u7684\u7ed3\u679c\u3002 \u5bf9\u4e8e\u6781\u9ad8\u6216\u8005\u6781\u4f4e\u7ef4\u5ea6\u7684\u8bcd\u5411\u91cf\uff0c\u6a21\u578b\u7684\u8868\u73b0\u8f83\u5dee\uff1a \u4f4e\u7ef4\u5ea6\u7684\u8bcd\u5411\u91cf\u4e0d\u80fd\u6355\u83b7\u5728\u8bed\u6599\u5e93\u4e2d\u4e0d\u540c\u8bcd\u8bed\u7684\u610f\u4e49\u3002\u8fd9\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u6211\u4eec\u7684\u6a21\u578b\u590d\u6742\u5ea6\u592a\u4f4e\u7684\u9ad8\u504f\u5dee\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u8003\u8651\u5355\u8bcd\u201cking\u201d\u3001\u201cqueen\u201d\u3001\u201cman\u201d\u3001\u201cwoman\u201d\u3002\u76f4\u89c2\u4e0a\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4f8b\u5982\u201c\u6027\u522b\u201d\u548c\u201c\u9886\u5bfc\u201d\u4e24\u4e2a\u7ef4\u5ea6\u6765\u5c06\u5b83\u4eec\u7f16\u7801\u6210 2 \u5b57\u8282\u7684\u8bcd\u5411\u91cf\u3002\u7ef4\u5ea6\u8f83\u4f4e\u7684\u8bcd\u5411\u91cf\u4e0d\u4f1a\u6355\u83b7\u56db\u4e2a\u5355\u8bcd\u4e4b\u95f4\u7684\u8bed\u4e49\u5dee\u5f02\uff0c\u800c\u8fc7\u9ad8\u7684\u7ef4\u5ea6\u7684\u53ef\u80fd\u6355\u83b7\u8bed\u6599\u5e93\u4e2d\u65e0\u52a9\u4e8e\u6cdb\u5316\u7684\u566a\u58f0-\u5373\u6240\u8c13\u7684\u9ad8\u65b9\u5dee\u95ee\u9898\u3002 GloVe \u4e2d\u4f7f\u7528\u4e2d\u5fc3\u8bcd\u5de6\u53f3\u7684\u7a97\u53e3\u5927\u5c0f\u4e3a 8 \u65f6\u6a21\u578b\u8868\u73b0\u8f83\u597d\u3002 \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u8bad\u7ec3\u65f6\u95f4\u5bf9\u6a21\u578b\u8868\u73b0\u7684\u5f71\u54cd \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u589e\u52a0\u8bed\u6599\u5e93\u89c4\u6a21\u5bf9\u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd \u4e0b\u56fe\u53ef\u4ee5\u770b\u5230\u4e0d\u540c\u8d85\u53c2\u6570\u5bf9 GloVe \u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd \u8d85\u9ad8\u7ef4\u5411\u91cf\uff1a \u76f4\u89c2\u5730\u8bf4\uff0c\u8fd9\u4e9b\u5411\u91cf\u4f3c\u4e4e\u4f1a\u5728\u8bed\u6599\u5e93\u4e2d\u6355\u83b7\u4e0d\u5141\u8bb8\u6cdb\u5316\u7684\u566a\u58f0\uff0c\u5373\u5bfc\u81f4\u9ad8\u65b9\u5dee\u3002 \u4f46\u662fYin\u7b49\u4eba\u5728On the Dimensionality of Word Embedding\u4e0a\u8868\u660e\uff0cskip-gram \u548c Glove \u5bf9\u8fd9\u79cd\u8fc7\u62df\u5408\u5177\u6709\u9c81\u68d2\u6027\u3002","title":"2.4 Intrinsic Evaluation Tuning Example: Analogy Evaluations"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#25-intrinsic-evaluation-example-correlation-evaluation","text":"\u53e6\u5916\u4e00\u4e2a\u8bc4\u4f30\u8bcd\u5411\u91cf\u8d28\u91cf\u7684\u7b80\u5355\u65b9\u6cd5\u662f\uff0c\u8ba9\u4eba\u53bb\u7ed9\u4e24\u4e2a\u8bcd\u7684\u76f8\u4f3c\u5ea6\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u8303\u56f4\u5185\uff08\u4f8b\u5982 0-10\uff09\u8bc4\u5206\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5bf9\u5e94\u8bcd\u5411\u91cf\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8fdb\u884c\u5bf9\u6bd4\u3002\u8fd9\u5df2\u7ecf\u5728\u5305\u542b\u4eba\u4e3a\u8bc4\u4f30\u7684\u5404\u79cd\u6570\u636e\u96c6\u4e0a\u5c1d\u8bd5\u8fc7\u3002 \u4e0b\u56fe\u662f\u4f7f\u7528\u4e0d\u540c\u7684\u8bcd\u5d4c\u5165\u6280\u672f\u4e0e\u4e0d\u540c\u7684\u4eba\u7c7b\u5224\u65ad\u6570\u636e\u96c6\u7684\u8bcd\u5411\u91cf\u76f8\u4f3c\u6027\u4e4b\u95f4\u7684\u76f8\u5173\u6027","title":"2.5 Intrinsic Evaluation Example: Correlation Evaluation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#26-further-reading-dealing-with-ambiguity","text":"\u6211\u4eec\u60f3\u77e5\u9053\u5982\u4f55\u5904\u7406\u5728\u4e0d\u540c\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f7f\u7528\u573a\u666f\u4e0b\uff0c\u7528\u4e0d\u540c\u7684\u7684\u8bcd\u5411\u91cf\u6765\u6355\u83b7\u540c\u4e00\u4e2a\u5355\u8bcd\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u4e0d\u540c\u7528\u6cd5\u3002\u4f8b\u5982\uff0c\u201crun\u201d\u662f\u4e00\u4e2a\u540d\u8bcd\u4e5f\u662f\u4e00\u4e2a\u52a8\u8bcd\uff0c\u5728\u4e0d\u540c\u7684\u8bed\u5883\u4e2d\u5b83\u7684\u8bcd\u6027\u4e5f\u4f1a\u4e0d\u540c\u3002\u8bba\u6587 Improving Word Representations Via Global Context And Multiple Word Prototypes \u63d0\u51fa\u4e0a\u8ff0\u95ee\u9898\u7684\u7684\u89e3\u51b3\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u7684\u672c\u8d28\u5982\u4e0b\uff1a \u6536\u96c6\u6240\u6709\u51fa\u73b0\u7684\u5355\u8bcd\u7684\u56fa\u5b9a\u5927\u5c0f\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u4f8b\u5982\u524d 5 \u4e2a\u548c\u540e 5 \u4e2a)\u3002 \u6bcf\u4e2a\u4e0a\u4e0b\u6587\u4f7f\u7528\u4e0a\u4e0b\u6587\u8bcd\u5411\u91cf\u7684\u52a0\u6743\u5e73\u5747\u503c\u6765\u8868\u793a(\u4f7f\u7528idf\u52a0\u6743)\u3002 \u7528 spherical k-means \u5bf9\u8fd9\u4e9b\u4e0a\u4e0b\u6587\u8868\u793a\u8fdb\u884c\u805a\u7c7b\u3002 \u6700\u540e\uff0c\u6bcf\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u90fd\u91cd\u65b0\u6807\u7b7e\u4e3a\u5176\u76f8\u5173\u8054\u7684\u7c7b\uff0c\u540c\u65f6\u5bf9\u8fd9\u4e2a\u7c7b\uff0c\u6765\u8bad\u7ec3\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \u8981\u5bf9\u8fd9\u4e2a\u95ee\u9898\u8fdb\u884c\u66f4\u4e25\u8c28\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u53c2\u8003\u539f\u6587\u3002","title":"2.6 Further Reading: Dealing With Ambiguity"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#3-training-for-extrinsic-tasks","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4e00\u76f4\u90fd\u5173\u6ce8\u4e8e\u5185\u5728\u4efb\u52a1\uff0c\u5e76\u5f3a\u8c03\u5176\u5728\u5f00\u53d1\u826f\u597d\u7684\u8bcd\u5411\u91cf\u6280\u672f\u4e2d\u7684\u91cd\u8981\u6027\u3002\u4f46\u662f\u5927\u591a\u6570\u5b9e\u9645\u95ee\u9898\u7684\u6700\u7ec8\u76ee\u6807\u662f\u5c06\u8bcd\u5411\u91cf\u7ed3\u679c\u7528\u4e8e\u5176\u4ed6\u7684\u5916\u90e8\u4efb\u52a1\u3002\u63a5\u4e0b\u6765\u4f1a\u8ba8\u8bba\u5904\u7406\u5916\u90e8\u4efb\u52a1\u7684\u65b9\u6cd5\u3002","title":"3 Training for Extrinsic Tasks"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#31-problem-formulation","text":"\u5f88\u591a NLP \u7684\u5916\u90e8\u4efb\u52a1\u90fd\u53ef\u4ee5\u8868\u8ff0\u4e3a\u5206\u7c7b\u4efb\u52a1\u3002\u4f8b\u5982\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u53e5\u5b50\u505a\u60c5\u611f\u5206\u7c7b\uff0c\u5224\u65ad\u5176\u60c5\u611f\u7c7b\u522b\u4e3a\u6b63\u9762\uff0c\u8d1f\u9762\u8fd8\u662f\u4e2d\u6027\u3002\u76f8\u4f3c\u5730\uff0c\u5728\u547d\u540d\u5b9e\u4f53\u8bc6\u522b(NER)\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u4e0a\u4e0b\u6587\u548c\u4e00\u4e2a\u4e2d\u5fc3\u8bcd\uff0c\u6211\u4eec\u60f3\u5c06\u4e2d\u5fc3\u8bcd\u5206\u7c7b\u4e3a\u8bb8\u591a\u7c7b\u522b\u4e4b\u4e00\u3002\u5bf9\u8f93\u5165\uff0c\u201cJim bought 300 shares of Acme Corp. in 2006\u201d\uff0c\u6211\u4eec\u5e0c\u671b\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u5206\u7c7b\u7ed3\u679c\uff1a \\([Jim]_{Person} \\ bought \\ 300 \\ shares \\ of [Acme\\;Corp.]_{Organization} \\ in \\ [2006]_{Time}\\) . \u5bf9\u8fd9\u7c7b\u95ee\u9898\uff0c\u6211\u4eec\u4e00\u822c\u6709\u4ee5\u4e0b\u5f62\u5f0f\u7684\u8bad\u7ec3\u96c6\uff1a \\[ \\{x^{(i)},y^{(i)}\\}_{1}^{N} \\] \u5176\u4e2d \\(x^{(i)}\\) \u662f\u4e00\u4e2a d \u7ef4\u7684\u8bcd\u5411\u91cf\uff0c \\(y^{(i)}\\) \u662f\u4e00\u4e2a C \u7ef4\u7684 one-hot \u5411\u91cf\uff0c\u8868\u793a\u6211\u4eec\u5e0c\u671b\u6700\u7ec8\u9884\u6d4b\u7684\u6807\u7b7e\uff08\u60c5\u611f\uff0c\u5176\u4ed6\u8bcd\uff0c\u4e13\u6709\u540d\u8bcd\uff0c\u4e70\uff0f\u5356\u51b3\u7b56\u7b49\uff09\u3002 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8bf8\u5982\u903b\u8f91\u56de\u5f52\u548c SVM \u4e4b\u7c7b\u7684\u7b97\u6cd5\u5bf9 2-D \u8bcd\u5411\u91cf\u6765\u8fdb\u884c\u5206\u7c7b\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u5728\u4e00\u822c\u7684\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u56fa\u5b9a\u8f93\u5165\u6570\u636e\u548c\u76ee\u6807\u6807\u7b7e\uff0c\u7136\u540e\u4f7f\u7528\u4f18\u5316\u7b97\u6cd5\u6765\u8bad\u7ec3\u6743\u91cd\uff08\u4f8b\u5982\u68af\u5ea6\u4e0b\u964d\uff0cL-BFGS\uff0c\u725b\u987f\u6cd5\u7b49\u7b49\uff09\u3002\u7136\u800c\u5728 NLP \u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u601d\u60f3\uff1a\u5728\u8bad\u7ec3\u5916\u90e8\u4efb\u52a1\u65f6\u5bf9\u8f93\u5165\u5b57\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\u3002\u4e0b\u9762\u6211\u4eec\u8ba8\u8bba\u4f55\u65f6\u4f7f\u7528\u4ee5\u53ca\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\u3002 \u5bf9\u4e8e\u5927\u578b\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u5e94\u8003\u8651\u5b57\u5411\u91cf\u518d\u8bad\u7ec3\u3002\u5bf9\u4e8e\u5c0f\u6570\u636e\u96c6\uff0c\u91cd\u65b0\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002","title":"3.1 Problem Formulation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#32-retraining-word-vectors","text":"\u6b63\u5982\u6211\u4eec\u8fc4\u4eca\u6240\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u6211\u4eec\u7528\u4e8e\u5916\u90e8\u8bc4\u4f30\u7684\u8bcd\u5411\u91cf\u662f\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u90e8\u8bc4\u4f30\u6765\u8fdb\u884c\u4f18\u5316\u5e76\u521d\u59cb\u5316\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u8868\u73b0\u826f\u597d\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u7684\u8868\u73b0\u4ecd\u7136\u6709\u63d0\u9ad8\u7684\u53ef\u80fd\u3002\u7136\u800c\uff0c\u91cd\u65b0\u8bad\u7ec3\u5b58\u5728\u7740\u4e00\u5b9a\u7684\u98ce\u9669\u3002 \u5982\u679c\u6211\u4eec\u5728\u5916\u90e8\u8bc4\u4f30\u4e2d\u91cd\u65b0\u8bad\u7ec3\u8bcd\u5411\u91cf\uff0c\u8fd9\u5c31\u9700\u8981\u4fdd\u8bc1\u8bad\u7ec3\u96c6\u8db3\u591f\u5927\u5e76\u80fd\u8986\u76d6\u8bcd\u6c47\u8868\u4e2d\u5927\u90e8\u5206\u7684\u5355\u8bcd\u3002\u8fd9\u662f\u56e0\u4e3aWord2Vec\u6216GloVe\u4f1a\u751f\u6210\u8bed\u4e49\u76f8\u5173\u7684\u5355\u8bcd\uff0c\u8fd9\u4e9b\u5355\u8bcd\u4f4d\u4e8e\u5355\u8bcd\u7a7a\u95f4\u7684\u540c\u4e00\u90e8\u5206\u3002 \u5047\u8bbe\u9884\u8bad\u7ec3\u5411\u91cf\u4f4d\u4e8e\u4e8c\u7ef4\u7a7a\u95f4\u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u5728\u4e00\u4e9b\u5916\u90e8\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u5355\u8bcd\u5411\u91cf\u88ab\u6b63\u786e\u5206\u7c7b\u3002 \u73b0\u5728\uff0c\u5982\u679c\u6211\u4eec\u56e0\u4e3a\u6709\u9650\u7684\u8bad\u7ec3\u96c6\u5927\u5c0f\u800c\u53ea\u5bf9\u5176\u4e2d\u4e24\u4e2a\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u4e0b\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4e2d\u4e00\u4e2a\u5355\u8bcd\u88ab\u9519\u8bef\u5206\u7c7b\u4e86\uff0c\u56e0\u4e3a\u5355\u8bcd\u5411\u91cf\u66f4\u65b0\u5bfc\u81f4\u8fb9\u754c\u79fb\u52a8\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u8bad\u7ec3\u6570\u636e\u96c6\u5f88\u5c0f\uff0c\u5c31\u4e0d\u5e94\u8be5\u5bf9\u5355\u8bcd\u5411\u91cf\u8fdb\u884c\u518d\u8bad\u7ec3\u3002\u5982\u679c\u57f9\u8bad\u96c6\u5f88\u5927\uff0c\u518d\u57f9\u8bad\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002","title":"3.2 Retraining Word Vectors"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#33-softmax-classification-and-regularization","text":"\u6211\u4eec\u8003\u8651\u4f7f\u7528 Softmax \u5206\u7c7b\u51fd\u6570\uff0c\u51fd\u6570\u5f62\u5f0f\u5982\u4e0b\u6240\u793a\uff1a \\[ p(y_{j}=1\\mid x)=\\frac{exp(W_{j.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)} \\] \u8fd9\u91cc\u6211\u4eec\u8ba1\u7b97\u8bcd\u5411\u91cf \\(x\\) \u662f\u7c7b\u522b \\(j\\) \u7684\u6982\u7387\u3002\u4f7f\u7528\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\u8ba1\u7b97\u4e00\u4e2a\u6837\u672c\u7684\u635f\u5931\u5982\u4e0b\u6240\u793a\uff1a \\[ -\\sum_{j=1}^{C}y_{j}\\,log(p(y_{j}=1\\mid x))=-\\sum_{j=1}^{C}y_{j}\\,log\\bigg(\\frac{exp(W_{j.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)}\\bigg) \\] \u5f53\u7136\uff0c\u4e0a\u8ff0\u6c42\u548c\u662f\u5bf9 \\((C-1)\\) \u4e2a\u96f6\u503c\u6c42\u548c\uff0c\u56e0\u4e3a \\(y_{j}\\) \u4ec5\u5728\u5355\u4e2a\u7d22\u5f15\u4e3a 1\uff0c\u8fd9\u610f\u5473\u7740 \\(x\\) \u4ec5\u5c5e\u4e8e 1 \u4e2a\u6b63\u786e\u7684\u7c7b\u522b\u3002\u73b0\u5728\u6211\u4eec\u5b9a\u4e49 \\(k\\) \u4e3a\u6b63\u786e\u7c7b\u522b\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u7b80\u5316\u635f\u5931\u51fd\u6570\uff1a \\[ -log\\bigg(\\frac{exp(W_{k.}x)}{\\sum_{c=1}^{C}exp(W_{c.}x)}\\bigg) \\] \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u6269\u5c55\u4e3a\u6709 \\(N\\) \u4e2a\u5355\u8bcd\u7684\u635f\u5931\u51fd\u6570\uff1a \\[ -\\sum_{i=1}^{N}log\\bigg(\\frac{exp(W_{k(i).}x^{(i)})}{\\sum_{c=1}^{C}exp(W_{c.}x^{i})}\\bigg) \\] \u4e0a\u9762\u516c\u5f0f\u7684\u552f\u4e00\u4e0d\u540c\u662f \\(k(i)\\) \u73b0\u5728\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de \\(x^{(i)}\\) \u5bf9\u5e94\u7684\u6bcf\u6b63\u786e\u7684\u7c7b\u7684\u7d22\u5f15\u3002 \u73b0\u5728\u6211\u4eec\u6765\u4f30\u8ba1\u4e00\u4e0b\u540c\u65f6\u8bad\u7ec3\u6a21\u578b\u7684\u6743\u503c \\((W)\\) \u548c\u8bcd\u5411\u91cf \\((x)\\) \u65f6\u9700\u8981\u66f4\u65b0\u7684\u53c2\u6570\u7684\u6570\u91cf\u3002\u6211\u4eec\u77e5\u9053\u4e00\u4e2a\u7b80\u5355\u7684\u7ebf\u6027\u51b3\u7b56\u6a21\u578b\u81f3\u5c11\u9700\u8981\u4e00\u4e2a \\(d\\) \u7ef4\u7684\u8bcd\u5411\u91cf\u8f93\u5165\u548c\u751f\u6210\u4e00\u4e2a \\(C\\) \u4e2a\u7c7b\u522b\u7684\u5206\u5e03\u3002\u56e0\u6b64\u66f4\u65b0\u6a21\u578b\u7684\u6743\u503c\uff0c\u6211\u4eec\u9700\u8981 \\(C \\cdot d\\) \u4e2a\u53c2\u6570\u3002\u5982\u679c\u6211\u4eec\u4e5f\u5bf9\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u66f4\u65b0\u8bcd\u5411\u91cf\uff0c\u90a3\u4e48\u5c31\u8981\u66f4\u65b0 \\(|V|\\) \u4e2a\u8bcd\u5411\u91cf\uff0c\u6bcf\u4e00\u4e2a\u7684\u7ef4\u5ea6\u662f \\(d\\) \u7ef4\u3002\u56e0\u6b64\u5bf9\u4e00\u4e2a\u7b80\u5355\u7684\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\uff0c\u603b\u5171\u7684\u53c2\u6570\u6570\u76ee\u662f \\(C \\cdot d + |V|\\) \uff1a \\[ \\begin{eqnarray} \\nabla_{\\theta}J(\\theta) = \\begin{bmatrix} \\nabla_{W_{.1}} \\\\ \\vdots \\\\ \\nabla_{W_{.d}} \\\\ \\nabla_{aardvark} \\\\ \\vdots \\\\ \\nabla_{zebra} \\end{bmatrix} \\nonumber \\end{eqnarray} \\\\ \\] \u5bf9\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u578b\u6765\u8bf4\uff0c\u8fd9\u662f\u76f8\u5f53\u5927\u7684\u53c2\u6570\u91cf\u2014\u2014\u8fd9\u6837\u7684\u53c2\u6570\u91cf\u5f88\u53ef\u80fd\u4f1a\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u95ee\u9898\u3002 \u4e3a\u4e86\u964d\u4f4e\u8fc7\u62df\u5408\u7684\u98ce\u9669\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u4ece\u8d1d\u53f6\u65af\u6d3e\u7684\u601d\u60f3\u770b\uff0c\u8fd9\u4e2a\u6b63\u5219\u9879\u662f\u5bf9\u6a21\u578b\u7684\u53c2\u6570\u52a0\u4e0a\u4e00\u4e2a\u5148\u9a8c\u5206\u5e03\uff0c\u8ba9\u53c2\u6570\u53d8\u5c0f\uff08\u5373\u63a5\u8fd1\u4e8e 0\uff09\uff1a \\[ -\\sum_{i=1}^{N}log\\bigg(\\frac{exp(W_{k(i).}x^{(i)})}{\\sum_{c=1}^{C}exp(W_{c.}x^{i})}\\bigg)+\\lambda\\sum_{k=1}^{C \\cdot d + |V|\\cdot d} \\theta_{k}^{2} \\] \u5982\u679c\u8c03\u6574\u597d\u76ee\u6807\u6743\u91cd \\(\\lambda\\) \u7684\u503c\uff0c\u6700\u5c0f\u5316\u4e0a\u9762\u7684\u51fd\u6570\u5c06\u4f1a\u964d\u4f4e\u51fa\u73b0\u5f88\u5927\u7684\u53c2\u6570\u503c\u7684\u53ef\u80fd\u6027\uff0c\u540c\u65f6\u4e5f\u63d0\u9ad8\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\u3002\u5728\u6211\u4eec\u4f7f\u7528\u66f4\u591a\u53c2\u6570\u66f4\u590d\u6742\u7684\u6a21\u578b\uff08\u4f8b\u5982\u795e\u7ecf\u7f51\u7edc\uff09\u65f6\uff0c\u5c31\u66f4\u52a0\u9700\u8981\u6b63\u5219\u5316\u7684\u601d\u60f3\u3002","title":"3.3 Softmax Classi\ufb01cation and Regularization"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#34-window-classification","text":"\u4e0b\u56fe\u662f\u6211\u4eec\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd\u548c\u4e00\u4e2a\u957f\u5ea6\u4e3a 2 \u7684\u5bf9\u79f0\u7a97\u53e3\u3002\u8fd9\u6837\u7684\u4e0a\u4e0b\u6587\u53ef\u4ee5\u5e2e\u52a9\u5206\u8fa8 Paris \u662f\u4e00\u4e2a\u5730\u70b9\u8fd8\u662f\u4e00\u4e2a\u540d\u5b57\u3002 \u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u4e3b\u8981\u63a2\u8ba8\u4e86\u4f7f\u7528\u5355\u4e2a\u5355\u8bcd\u5411\u91cf \\(x\\) \u9884\u6d4b\u7684\u5916\u90e8\u8bc4\u4f30\u4efb\u52a1\u3002\u5728\u73b0\u5b9e\u4e2d\uff0c\u56e0\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u6027\u8d28\uff0c\u8fd9\u51e0\u4e4e\u4e0d\u4f1a\u6709\u8fd9\u6837\u7684\u4efb\u52a1\u3002\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u5e38\u5e38\u5b58\u5728\u7740\u4e00\u8bcd\u591a\u4e49\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u4e00\u822c\u8981\u5229\u7528\u8bcd\u7684\u4e0a\u4e0b\u6587\u6765\u5224\u65ad\u5176\u4e0d\u540c\u7684\u610f\u4e49\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u8981\u67d0\u4eba\u89e3\u91ca\u201cto sanction\u201d\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u4f60\u4f1a\u9a6c\u4e0a\u610f\u8bc6\u5230\u6839\u636e\u201cto sanction\u201d\u7684\u4e0a\u4e0b\u6587\u5176\u610f\u601d\u53ef\u80fd\u662f\u201cto permit\u201d\u6216\u8005\u201cto punish\u201d\u3002\u5728\u66f4\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u3002\u8fd9\u4e2a\u5e8f\u5217\u662f\u7531\u4e2d\u5fc3\u8bcd\u5411\u91cf\u548c\u4e0a\u4e0b\u6587\u8bcd\u5411\u91cf\u7ec4\u6210\u3002\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u6570\u91cf\u4e5f\u88ab\u79f0\u4e3a\u4e0a\u4e0b\u6587\u7a97\u53e3\u5927\u5c0f\uff0c\u5e76\u6839\u636e\u89e3\u51b3\u7684\u95ee\u9898\u800c\u53d8\u5316\u3002 \u4e00\u822c\u6765\u8bf4,\u8f83\u7a84\u7684\u7a97\u53e3\u5927\u5c0f\u4f1a\u5bfc\u81f4\u5728\u53e5\u6cd5\u6d4b\u8bd5\u4e2d\u66f4\u597d\u7684\u6027\u80fd,\u800c\u66f4\u5bbd\u7684\u7a97\u53e3\u4f1a\u5bfc\u81f4\u5728\u8bed\u4e49\u6d4b\u8bd5\u4e2d\u66f4\u597d\u7684\u6027\u80fd \u3002 \u4e3a\u4e86\u5c06\u4e4b\u524d\u8ba8\u8bba\u7684 Softmax \u6a21\u578b\u4fee\u6539\u4e3a\u4f7f\u7528\u5355\u8bcd\u7684\u7a97\u53e3\u6765\u8fdb\u884c\u5206\u7c7b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6309\u7167\u4e0b\u9762\u5f62\u5f0f\u5c06 \\(x^{(i)}\\) \u66ff\u6362\u4e3a \\(x_{window}^{(i)}\\) \uff1a \\[ \\begin{eqnarray} x_{window}^{(i)} = \\begin{bmatrix} x^{(i-2)} \\\\ x^{(i-1)} \\\\ x^{(i)} \\\\ x^{(i+1)} \\\\ x^{(i+2)} \\end{bmatrix} \\nonumber \\end{eqnarray} \\] \u56e0\u6b64\uff0c\u5f53\u6211\u4eec\u8ba1\u7b97\u5355\u8bcd\u7684\u635f\u5931\u68af\u5ea6\u5982\u4e0b\u6240\u793a\uff0c\u5f53\u7136\u9700\u8981\u5206\u914d\u68af\u5ea6\u6765\u66f4\u65b0\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\uff1a \\[ \\begin{eqnarray} x_{window}^{(i)} = \\begin{bmatrix} \\nabla_{x^{(i-2)}} \\\\ \\nabla_{x^{(i-1)}} \\\\ \\nabla_{x^{(i)}} \\\\ \\nabla_{x^{(i+1)}} \\\\ \\nabla_{x^{(i+2)}} \\end{bmatrix} \\nonumber \\end{eqnarray} \\] \u5f53\u7136\uff0c\u68af\u5ea6\u5c06\u9700\u8981\u5206\u53d1\u6765\u66f4\u65b0\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\u3002","title":"3.4 Window Classi\ufb01cation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#35-non-linear-classifiers","text":"\u6211\u4eec\u73b0\u5728\u4ecb\u7ecd\u975e\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\uff0c\u5982\u795e\u7ecf\u7f51\u7edc\u3002\u6211\u4eec\u770b\u5230\u5373\u4f7f\u662f\u6700\u4f18\u7684\u7ebf\u6027\u5206\u7c7b\u5e73\u9762\uff0c\u4e5f\u6709\u8bb8\u591a\u6837\u4f8b\u90fd\u88ab\u9519\u8bef\u7684\u5206\u7c7b\u3002\u8fd9\u662f\u56e0\u4e3a\u7ebf\u6027\u6a21\u578b\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u7684\u5206\u7c7b\u80fd\u529b\u6709\u9650\u3002 \u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u975e\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\u53ef\u4ee5\u5bf9\u4e0a\u9762\u7684\u6570\u636e\u96c6\u7684\u6837\u4f8b\u6709\u7740\u66f4\u597d\u7684\u5206\u7c7b\u7ed3\u679c\uff0c\u8fd9\u4e2a\u7b80\u7b54\u7684\u4f8b\u5b50\u53ef\u4ee5\u521d\u6b65\u7684\u8bf4\u660e\u6211\u4eec\u4e3a\u4ec0\u4e48\u9700\u8981\u975e\u7ebf\u6027\u6a21\u578b\u3002","title":"3.5 Non-linear Classi\ufb01ers"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#suggested-readings","text":"","title":"Suggested Readings"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#glove-global-vectors-for-word-representation","text":"\u6b64\u4e3a Glove \u539f\u6587\uff0c\u5df2\u5728 Lecture \u548c Note \u4e2d\u8be6\u7ec6\u8bb0\u5f55\u3002","title":"GloVe Global Vectors for Word Representation"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#improving-distributional-similarity-with-lessons-learned-from-word-embeddings","text":"\u5b9e\u9645\u5e94\u7528\u4e2d\u5982\u4f55\u83b7\u5f97\u66f4\u597d\u7684\u8bcd\u5411\u91cf Abstract \u8fd1\u5e74\u6765\u7684\u7814\u7a76\u8d8b\u52bf\u8868\u660e\uff0c\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u8bcd\u5d4c\u5165\u6a21\u578b\u5728\u8bcd\u76f8\u4f3c\u6027\u548c\u76f8\u4f3c\u6027\u68c0\u6d4b\u4efb\u52a1\u4e0a\u4f18\u4e8e\u4f20\u7edf\u7684\u57fa\u4e8e\u8ba1\u6570\u7684\u5206\u5e03\u6a21\u578b\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u8bcd\u5d4c\u5165\u7684\u6027\u80fd\u63d0\u9ad8\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u7531\u4e8e\u67d0\u4e9b\u7cfb\u7edf\u8bbe\u8ba1\u9009\u62e9\u548c\u8d85\u53c2\u6570\u4f18\u5316\uff0c\u800c\u4e0d\u662f\u5d4c\u5165\u7b97\u6cd5\u672c\u8eab\u3002\u6b64\u5916\uff0c\u6211\u4eec\u8bc1\u660e\u8fd9\u4e9b\u4fee\u6539\u53ef\u4ee5\u8f6c\u79fb\u5230\u4f20\u7edf\u7684\u5206\u914d\u6a21\u578b\uff0c\u4ea7\u751f\u7c7b\u4f3c\u7684\u6536\u76ca\u3002\u4e0e\u4ee5\u524d\u7684\u62a5\u544a\u76f8\u6bd4\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u7684\u65b9\u6cd5\u4e4b\u95f4\u7684\u6027\u80fd\u5dee\u5f02\u4e3b\u8981\u662f\u5c40\u90e8\u7684\u6216\u4e0d\u663e\u8457\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u4e00\u79cd\u65b9\u6cd5\u6bd4\u5176\u4ed6\u65b9\u6cd5\u5177\u6709\u5168\u5c40\u4f18\u52bf\u3002 Introduction \u7136\u800c\uff0c\u6700\u5148\u8fdb\u7684\u5d4c\u5165\u65b9\u6cd5\u90fd\u662f\u57fa\u4e8e\u76f8\u540c\u7684 bag-of-contexts \u7684\u5355\u8bcd\u3002\u6b64\u5916\uff0c\u5206\u6790\u8868\u660e\uff0cword2vec\u7684 SGNS \u9690\u542b\u5730\u5206\u89e3\u4e86\u5355\u8bcd\u4e0a\u4e0b\u6587\u7684PMI\u77e9\u9635\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5176\u6570\u5b66\u76ee\u6807\u548c\u53ef\u7528\u7684\u4fe1\u606f\u6765\u6e90\u5b9e\u9645\u4e0a\u4e0e\u4f20\u7edf\u65b9\u6cd5\u6240\u4f7f\u7528\u7684\u975e\u5e38\u76f8\u4f3c\u3002\u90a3\u4e48\u5176\u4f18\u52bf\u6765\u6e90\u4e8e\u4ec0\u4e48\u5462\uff1f \u867d\u7136\u6a21\u578b\u548c\u4f18\u5316\u7684\u76ee\u6807\u51fd\u6570\u662f\u4e3b\u8981\u56e0\u7d20\uff0c\u4f46\u662f\u5176\u4ed6\u56e0\u7d20\u4e5f\u4f1a\u5f71\u54cd\u7ed3\u679c \u8d85\u53c2\u6570\u4f18\u5316\uff1a\u8d1f\u91c7\u6837\u7684\u6837\u672c\u4e2a\u6570\uff0c\u5e73\u6ed1\u7684\u8d1f\u91c7\u6837\u5206\u5e03\uff0c\u52a8\u6001\u5927\u5c0f\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3 \u5728\u8fd9\u9879\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u8d85\u53c2\u6570\u663e\u5f0f\u5316\uff0c\u5e76\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u5b83\u4eec\u5e94\u7528\u5230\u4f20\u7edf\u7684\u57fa\u4e8e\u8ba1\u6570\u5668\u7684\u65b9\u6cd5\u4e2d\u3002\u4e3a\u4e86\u8bc4\u4f30\u6bcf\u4e2a\u8d85\u53c2\u6570\u5bf9\u7b97\u6cd5\u6027\u80fd\u7684\u5f71\u54cd\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u5b9e\u9a8c\uff0c\u6bd4\u8f83\u4e86\u56db\u79cd\u4e0d\u540c\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u540c\u65f6\u63a7\u5236\u4e86\u4e0d\u540c\u7684\u8d85\u53c2\u6570 Practical Recommendations \u901a\u5e38\u5efa\u8bae\u4e3a\u624b\u5934\u7684\u4efb\u52a1\u8c03\u4f18\u6240\u6709\u8d85\u53c2\u6570\uff0c\u4ee5\u53ca\u7279\u5b9a\u4e8e\u7b97\u6cd5\u7684\u8d85\u53c2\u6570\u3002\u7136\u800c\uff0c\u8fd9\u53ef\u80fd\u662f\u8ba1\u7b97\u6602\u8d35\u7684\u3002\u56e0\u6b64\u6211\u4eec\u63d0\u4f9b\u4e00\u4e9b\u201c\u7ecf\u9a8c\u6cd5\u5219\u201d\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u4eec\u5728\u6211\u4eec\u7684\u8bbe\u7f6e\u4e2d\u5de5\u4f5c\u5f97\u5f88\u597d\uff1a \u59cb\u7ec8\u4f7f\u7528\u4e0a\u4e0b\u6587\u5206\u5e03\u5e73\u6ed1(cds = 0.75)\u6765\u4fee\u6539PMI\uff0c\u5e76\u4e14\u9002\u7528\u4e8e PPMI,SVD \u548c SGNS\uff0c\u4e0d\u65ad\u63d0\u9ad8\u6027\u80fd \u4e0d\u8981\u4f7f\u7528 SVD \u201ccorrectly\u201d (eig = 1) \u3002\u4f7f\u7528\u5bf9\u79f0\u53d8\u4f53\u4e4b\u4e00 SGNS\u662f\u5065\u58ee\u7684\u57fa\u7ebf\u3002\u867d\u7136\u5b83\u53ef\u80fd\u4e0d\u662f\u6bcf\u4e2a\u4efb\u52a1\u7684\u6700\u4f73\u65b9\u6cd5\uff0c\u4f46\u5b83\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4e0d\u4f1a\u8868\u73b0\u5f97\u5f88\u5dee\u3002\u6b64\u5916\uff0cSGNS\u662f\u6700\u5feb\u7684\u8bad\u7ec3\u65b9\u6cd5\uff0c\u800c\u4e14\u5728\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u6d88\u8017\u65b9\u9762(\u5230\u76ee\u524d\u4e3a\u6b62)\u4e5f\u662f\u6700\u4fbf\u5b9c\u7684\u3002 SGNS\u9002\u5408\u66f4\u591a\u7684\u8d1f\u6837\u672c \u5bf9\u4e8eSGNS\u548cGloVe\u800c\u8a00\uff0c\u503c\u5f97\u5bf9 \\(\\vec{w}+\\vec{c}\\) \u505a\u5b9e\u9a8c\uff0c\u56e0\u4e3a\u8fd9\u662f\u5bb9\u6613\u5e94\u7528\uff08\u4e0d\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\uff09\u5e76\u4e14\u5e26\u6765\u53ef\u89c2\u6536\u76ca\uff08\u4ee5\u53ca\u53ef\u89c2\u635f\u5931\uff09\u7684\u3002 Conclusion \u6700\u8fd1\u7684\u5d4c\u5165\u65b9\u6cd5\u5f15\u5165\u4e86\u5927\u91cf\u7684\u7f51\u7edc\u7ed3\u6784\u4ee5\u5916\u7684\u8bbe\u8ba1\u9009\u62e9\u548c\u4f18\u5316\u7b97\u6cd5\u3002\u6211\u4eec\u63ed\u793a\u4e86\u8fd9\u4e9b\u770b\u4f3c\u5fae\u5c0f\u7684\u53d8\u5316\u5bf9\u5355\u8bcd\u8868\u793a\u65b9\u6cd5\u7684\u6210\u529f\u6709\u5f88\u5927\u7684\u5f71\u54cd\u3002\u901a\u8fc7\u5c55\u793a\u5982\u4f55\u5728\u4f20\u7edf\u65b9\u6cd5\u4e2d\u9002\u5e94\u548c\u8c03\u6574\u8fd9\u4e9b\u8d85\u53c2\u6570,\u6211\u4eec\u5bf9\u8868\u793a\u8fdb\u884c\u9002\u5f53\u7684\u6bd4\u8f83,\u5e76\u4ece\u8bcd\u5d4c\u5165\u6587\u732e\u4e2d\u6311\u6218\u5404\u79cd\u4f18\u52bf\u3002 \u672c\u7814\u7a76\u8fd8\u63ed\u793a\u4e86\u5bf9\u66f4\u591a\u63a7\u5236\u53d8\u91cf\u5b9e\u9a8c\u7684\u9700\u8981,\u5e76\u5c06\u201c\u53d8\u91cf\u201d\u7684\u6982\u5ff5\u4ece\u660e\u663e\u7684\u4efb\u52a1\u3001\u6570\u636e\u548c\u65b9\u6cd5\u6269\u5c55\u5230\u7ecf\u5e38\u5ffd\u7565\u7684\u9884\u5904\u7406\u6b65\u9aa4\u548c\u8d85\u53c2\u6570\u8bbe\u7f6e\u3002\u6211\u4eec\u8fd8\u5f3a\u8c03\u4e86\u9700\u8981\u8fdb\u884c\u900f\u660e\u548c\u53ef\u91cd\u590d\u7684\u5b9e\u9a8c,\u5e76\u8d5e\u626c\u8bf8\u5982Mikolov\u3001Pennington\u7b49\u4f5c\u8005,\u4ee5\u53ca\u5176\u4ed6\u4eba\u516c\u5f00\u63d0\u4f9b\u4ed6\u4eec\u7684\u4ee3\u7801\u3002\u672c\u7740\u8fd9\u79cd\u7cbe\u795e,\u6211\u4eec\u4e5f\u516c\u5e03\u6211\u4eec\u7684\u4ee3\u7801","title":"Improving Distributional Similarity with Lessons Learned from Word Embeddings"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#evaluation-methods-for-unsupervised-word-embeddings","text":"Abstract \u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u79cd\u65e0\u76d1\u7763\u5d4c\u5165\u6280\u672f\u7684\u8bc4\u4f30\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u4ece\u6587\u672c\u4e2d\u83b7\u53d6\u6709\u610f\u4e49\u7684\u8868\u793a\u3002\u5d4c\u5165\u65b9\u6cd5\u7684\u987a\u5e8f\u4e0d\u540c\uff0c\u8bc4\u4ef7\u7ed3\u679c\u4e5f\u4e0d\u540c\uff0c\u8fd9\u5c31\u5bf9\u901a\u5e38\u8ba4\u4e3a\u53ea\u6709\u4e00\u4e2a\u6700\u4f18\u5411\u91cf\u8868\u793a\u7684\u5047\u8bbe\u63d0\u51fa\u4e86\u8d28\u7591\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b0\u7684\u8bc4\u4f30\u6280\u672f\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u7279\u5b9a\u67e5\u8be2\u6bd4\u8f83\u8bcd\u5d4c\u5165\u3002\u8fd9\u4e9b\u65b9\u6cd5\u51cf\u5c11\u4e86\u504f\u5dee\uff0c\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u6d1e\u5bdf\u529b\uff0c\u5e76\u5141\u8bb8\u6211\u4eec\u901a\u8fc7\u4f17\u5305\u5feb\u901f\u51c6\u786e\u5730\u5f81\u6c42\u6570\u636e\u9a71\u52a8\u7684\u76f8\u5173\u6027\u5224\u65ad\u3002 Discussion \u8d85\u53c2\u6570\u4f18\u5316\u4f1a\u5bfc\u81f4\u660e\u663e\u7684\u6027\u80fd\u5dee\u5f02\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0d\u540c\u7684\u7b97\u6cd5\u7f16\u7801\u7684\u4fe1\u606f\u51fa\u5947\u5730\u4e0d\u540c\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u80fd\u4e0e\u6211\u4eec\u60f3\u8981\u7684\u7528\u4f8b\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u4e0e\u6211\u4eec\u60f3\u8981\u7684\u7528\u4f8b\u4e0d\u4e00\u81f4\u3002 \u4f8b\u5982\uff0c\u6211\u4eec\u53d1\u73b0\u8bcd\u5d4c\u5165\u5c06\u5173\u4e8e\u8bcd\u9891\u7684\u4fe1\u606f\u7684\u7f16\u7801\u7a0b\u5ea6\u4e0d\u540c\uff0c\u5373\u4f7f\u5728\u957f\u5ea6\u5f52\u4e00\u5316\u540e\u4e5f\u662f\u5982\u6b64\u3002 \u8fd9\u4e2a\u7ed3\u679c\u4ee4\u4eba\u60ca\u8bb6 \u9996\u5148\uff0c\u8bb8\u591a\u7b97\u6cd5\u4fdd\u7559\u4e86\u4e0d\u540c\u7684\u62e6\u622a\u53c2\u6570\u6765\u5438\u6536\u57fa\u4e8e\u9891\u7387\u7684\u6548\u679c\u3002 \u5176\u6b21\uff0c\u6211\u4eec\u5e0c\u671b\u5d4c\u5165\u7a7a\u95f4\u7684\u51e0\u4f55\u5f62\u72b6\u4e3b\u8981\u7531\u8bed\u4e49\u9a71\u52a8\uff1a\u9891\u7387\u76f8\u5bf9\u8f83\u5c0f\u7684\u8bcd\u5e94\u8be5\u5747\u5300\u5730\u5206\u5e03\u5728\u7a7a\u95f4\u4e2d\uff0c\u800c\u5927\u91cf\u7f55\u89c1\u7684\u3001\u7279\u5b9a\u7684\u5355\u8bcd\u5e94\u8be5\u56f4\u7ed5\u76f8\u5173\u4f46\u66f4\u9891\u7e41\u7684\u5355\u8bcd\u805a\u96c6\u3002 \u6211\u4eec\u8bad\u7ec3\u4e86\u4e00\u4e2a\u903b\u8f91\u56de\u5f52\u6a21\u578b\u6765\u9884\u6d4b\u57fa\u4e8e\u8bcd\u5411\u91cf\u7684\u8bcd\u9891\u7c7b\u522b\u3002\u8bad\u7ec3\u7ebf\u6027\u5206\u7c7b\u5668\u5c06\u5355\u8bcd\u5206\u7c7b\u4e3a\u5e38\u89c1\u6216\u7f55\u89c1\u7c7b\u522b\uff0c\u9608\u503c\u4ece100\u523050000\u4e0d\u7b49\u3002\u5728\u6bcf\u4e2a\u9608\u503c\u9891\u7387\u4e0b\uff0c\u6211\u4eec\u5bf9\u8bad\u7ec3\u96c6\u8fdb\u884c\u91c7\u6837\u4ee5\u786e\u4fdd\u6807\u7b7e\u5206\u5e03\u5728\u6240\u6709\u9891\u7387\u4e0a\u7684\u4e00\u81f4\u6027\u5e73\u8861\u3002\u6211\u4eec\u4f7f\u7528\u4e86\u957f\u5ea6\u5f52\u4e00\u5316\u7684\u5d4c\u5165\uff0c\u56e0\u4e3a\u7f55\u89c1\u7684\u5355\u8bcd\u5728\u8bad\u7ec3\u671f\u95f4\u66f4\u65b0\u8f83\u5c11\uff0c\u53ef\u80fd\u5177\u6709\u66f4\u77ed\u7684\u5411\u91cf(Turian et al., 2010)\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u62a5\u544a\u4e86\u5728\u6bcf\u4e2a\u9608\u503c\u9891\u7387\u4e0b\u4f7f\u7528\u4e94\u500d\u4ea4\u53c9\u9a8c\u8bc1\u7684\u5e73\u5747\u51c6\u786e\u5ea6\u548c\u6807\u51c6\u504f\u5dee(1 \\(\\sigma\\) )\u3002 \u6240\u6709\u5355\u8bcd\u5d4c\u5165\u90fd\u6bd4\u968f\u673a\u7684\u597d,\u8fd9\u8868\u660e\u5b83\u4eec\u5305\u542b\u4e00\u4e9b\u9891\u7387\u4fe1\u606f\u3002GloVe\u548cTSCCA\u5728\u63a5\u8fd11000\u7684\u8bcd\u9891\u4e0a\u8fbe\u5230\u8fd1100%\u7684\u51c6\u786e\u6027\u3002\u4e0e\u5176\u4ed6\u6240\u6709\u5d4c\u5165\u4e0d\u540c\uff0cC&W\u5d4c\u5165\u7684\u66f4\u5927\u7684\u8bcd\u9891\u7684\u51c6\u786e\u6027\u589e\u52a0\u4e86\u3002\u8fdb\u4e00\u6b65\u7684\u8c03\u67e5\u663e\u793a\uff0c\u6743\u91cd\u77e9\u9635\u7684\u65b9\u5411\u662f\u968f\u8bcd\u9891\u9608\u503c\u6539\u53d8\u7684\uff0c\u8fd9\u8868\u660e\u8bcd\u9891\u4f3c\u4e4e\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u4ee5\u5e73\u6ed1\u7684\u65b9\u5f0f\u88ab\u7f16\u7801\u3002 \u867d\u7136GloVe\u548cCBOW\u662f\u5185\u5728\u4efb\u52a1\u4e0a\u6700\u4f73\u7684\u4e24\u79cd\u5d4c\u5165\uff0c\u4f46\u5b83\u4eec\u5728\u5176\u7f16\u7801\u7684\u9891\u7387\u4fe1\u606f\u91cf\u4e0a\u6709\u5f88\u5927\u7684\u5dee\u5f02\u3002\u56e0\u6b64,\u6211\u4eec\u53ef\u4ee5\u65ad\u5b9a\uff0c\u4e0d\u540c\u7684\u9891\u7387\u9884\u6d4b\u5e76\u4e0d\u662f\u56e0\u4e3a\u81ea\u7136\u8bed\u8a00\u7684\u5185\u5728\u6027\u8d28\uff1a\u5e76\u4e0d\u662f\u8bf4\u9891\u7e41\u7684\u5355\u8bcd\u81ea\u7136\u53ea\u6709\u9891\u7e41\u7684\u90bb\u5c45\u3002 \u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u8bcd\u9891\u4fe1\u606f\u4e5f\u4f1a\u5f71\u54cd\u8bcd\u7684\u76f8\u4f3c\u6027\u3002\u5bf9\u4e8eWordSim-353\u6570\u636e\u96c6\uff0c\u6211\u4eec\u67e5\u8be2\u4e86k = 1000 \u4e2a\u6700\u8fd1\u90bb\u5c45\u3002\u7136\u540e\uff0c\u6211\u4eec\u67e5\u8be2\u5176\u5728\u8bad\u7ec3\u96c6\u8bed\u6599\u5e93\u4e2d\u9891\u7387\u7684\u6392\u540d\uff0c\u5e73\u5747\u4e86\u6240\u6709\u7684\u67e5\u8be2\u8bcd\u3002\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0**\u4e00\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u548c\u5b83\u5728\u6700\u8fd1\u90bb\u4e2d\u7684\u6392\u540d\u4f4d\u7f6e\u6709\u5f88\u5f3a\u7684\u76f8\u5173\u6027\u3002**\u4e0b\u56fe\u663e\u793a\u4e86C&W\u8bcd\u5d4c\u5165\u4e2d\u4e00\u4e2a\u8bcd\u7684\u6700\u8fd1\u90bb\u6392\u540d\uff08\u5173\u4e8e\u4e00\u6b21\u67e5\u8be2\uff09\u548c\u5176\u8bcd\u9891\u5728\u8bad\u7ec3\u96c6\u8bed\u6599\u5e93\u4e2d\u7684\u6392\u540d\u4e4b\u95f4\u7684\u5e42\u5f8b\u5173\u7cfb (nn-rank \u223c 1000 \u00b7 \\(\\text{corpus-rank}^{0.17}\\) )\u3002\u8fd9\u662f\u4e00\u4e2a\u503c\u5f97\u5173\u6ce8\u7684\u95ee\u9898\uff1a\u8bed\u8a00\u4e2d\u5355\u8bcd\u7684\u9891\u7387\u5728\u4eba\u7c7b\u7684\u6587\u5b57\u5904\u7406\u8fc7\u7a0b\u4e2d\u4e5f\u8d77\u7740\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528(Cattell, 1886)\u3002\u56e0\u6b64\uff0c\u5728\u5b9e\u9a8c\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u5730\u628a\u8bcd\u9891\u4f5c\u4e3a\u4e00\u4e2a\u56e0\u7d20\u6765\u8003\u8651\u3002\u540c\u65f6\uff0c\u4e0a\u8ff0\u7ed3\u679c\u4e5f\u8868\u660e\uff0c\u5e38\u7528\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u5728\u5d4c\u5165\u7a7a\u95f4\u5185\u7684\u56fa\u6709\u4efb\u52a1\u65f6\uff0c\u4f1a\u53d7\u5230\u9891\u7387\u6548\u5e94\u7684\u5f71\u54cd\u3002\u6211\u4eec\u8ba4\u4e3a\uff0c\u8fdb\u4e00\u6b65\u7684\u7814\u7a76\u5e94\u8be5\u89e3\u51b3\u5982\u4f55\u66f4\u597d\u5730\u8861\u91cf\u8bcd\u4e0e\u5d4c\u5165\u7a7a\u95f4\u4e4b\u95f4\u7684\u8bed\u8a00\u5173\u7cfb\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u901a\u8fc7\u5b66\u4e60\u81ea\u5b9a\u4e49\u5ea6\u91cf\u3002 Related Work Mikolov et al. (2013b) \u8bf4\u660e\u5d4c\u5165\u7a7a\u95f4\u5b58\u5728\u7279\u5b9a\u7684\u8bed\u8a00\u89c4\u5f8b\u3002\u901a\u8fc7\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u8fdb\u884c\u7b80\u5355\u7684\u5411\u91cf\u8fd0\u7b97\uff0c\u53ef\u4ee5\u89e3\u51b3\u5404\u79cd\u53e5\u6cd5\u548c\u8bed\u4e49\u7c7b\u6bd4\u95ee\u9898\u3002\u8fd9\u4e0e\u4e4b\u524d\u7684\u5de5\u4f5c\u4e0d\u540c\uff0c\u4e4b\u524d\u7684\u5de5\u4f5c\u5c06\u7c7b\u6bd4\u4efb\u52a1\u63cf\u8ff0\u4e3a\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898(Turney, 2008)\u3002\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u8bcd\u5d4c\u5165\u4f3c\u4e4e\u6355\u6349\u5230\u4e86\u66f4\u590d\u6742\u7684\u8bed\u8a00\u7279\u6027\u3002Chen\u7b49\u4eba(2013)\u7684\u7814\u7a76\u8868\u660e\uff0c\u5355\u8bcd\u5d4c\u5165\u751a\u81f3\u5305\u542b\u4e86\u533a\u57df\u62fc\u5199(\u82f1\u5f0f\u4e0e\u7f8e\u5f0f)\u3001\u540d\u8bcd\u6027\u522b\u548c\u60c5\u611f\u6781\u6027\u7b49\u4fe1\u606f\u3002 \u4ee5\u5f80\u7684\u8bcd\u5d4c\u5165\u8bc4\u4ef7\u5de5\u4f5c\u53ef\u5206\u4e3a\u5185\u90e8\u8bc4\u4ef7\u548c\u5916\u90e8\u8bc4\u4ef7\u3002\u5185\u5728\u8bc4\u4ef7\u901a\u8fc7\u76f4\u63a5\u6d4b\u91cf\u8bed\u4e49\u5173\u8054\u548c\u51e0\u4f55\u5173\u8054\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u6765\u8861\u91cf\u8bcd\u5411\u91cf\u7684\u8d28\u91cf\uff0c\u901a\u5e38\u901a\u8fc7\u67e5\u8be2\u672f\u8bed\u7684\u7684\u5e93\u5b58\u6765\u5b9e\u73b0\u3002Baroni\u7b49\u4eba(2014)\u4ee5\u5185\u5728\u5ea6\u91cf\u4e3a\u91cd\u70b9\uff0c\u5728\u5404\u79cd\u67e5\u8be2\u6e05\u5355\u548c\u4efb\u52a1\u4e0a\u6bd4\u8f83\u8bcd\u5d4c\u5165\u548c\u5206\u5e03\u8bcd\u5411\u91cf\u3002Faruqui and Dyer (2014)\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7f51\u7ad9\uff0c\u8be5\u7f51\u7ad9\u5141\u8bb8\u5bf9\u4e00\u4e9b\u67e5\u8be2\u6e05\u5355\u7684\u5d4c\u5165\u8fdb\u884c\u81ea\u52a8\u8bc4\u4f30\u3002Gaoetal.(2014)\u53d1\u8868\u4e86\u4e00\u4efd\u6539\u8fdb\u7684\u7c7b\u6bd4\u63a8\u7406\u4efb\u52a1\u67e5\u8be2\u6e05\u5355\u3002\u6700\u540e\uff0cTsvetkov\u7b49\u4eba(2015)\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u5185\u5728\u5ea6\u91cf\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u66f4\u597d\u5730\u5173\u8054\u5916\u90e8\u6548\u679c\u3002\u7136\u800c\uff0c\u6240\u6709\u8fd9\u4e9b\u8bc4\u4f30\u90fd\u662f\u5728\u9884\u5148\u6536\u96c6\u7684\u6e05\u5355\u4e0a\u8fdb\u884c\u7684\uff0c\u5e76\u4e14\u5927\u591a\u5c40\u9650\u4e8e\u672c\u5730\u6307\u6807\uff0c\u5982\u76f8\u5173\u6027\u3002 \u5916\u90e8\u8bc4\u4f30\u4f7f\u7528\u5d4c\u5165\u4f5c\u4e3a\u5176\u4ed6\u4efb\u52a1\u6a21\u578b\u4e2d\u7684\u7279\u5f81\uff0c\u4f8b\u5982\u8bed\u4e49\u89d2\u8272\u6807\u8bb0\u6216\u8bcd\u6027\u6807\u8bb0(Collobert etal., 2011)\uff0c\u5e76\u63d0\u9ad8\u73b0\u6709\u7cfb\u7edf\u7684\u6027\u80fd(Turianetal.\uff0c2010)\u3002\u7136\u800c\uff0c\u4ed6\u4eec\u5728\u5176\u4ed6\u4efb\u52a1\u4e0a\uff0c\u5982\u89e3\u6790\uff0c\u5219\u4e0d\u592a\u6210\u529f(Andreas\u548cKlein, 2014)\u3002 \u5728\u4e3b\u9898\u6a21\u578b\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u65e0\u76d1\u7763\u8bed\u4e49\u5efa\u6a21\u65b9\u9762\u505a\u4e86\u66f4\u591a\u7684\u5de5\u4f5c\u3002\u4e00\u4e2a\u4f8b\u5b50\u662f\u5355\u8bcd\u5165\u4fb5\u4efb\u52a1(Chang et al.\uff0c 2009)\uff0c\u5176\u4e2d\u6ce8\u91ca\u5668\u88ab\u8981\u6c42\u8bc6\u522b\u63d2\u5165\u5230\u7ed9\u5b9a\u4e3b\u9898\u7684\u4e00\u7ec4\u9ad8\u6982\u7387\u5355\u8bcd\u4e2d\u7684\u968f\u673a\u5355\u8bcd\u3002\u8bcd\u5d4c\u5165\u4e0d\u4ea7\u751f\u53ef\u89e3\u91ca\u7684\u7ef4\u5ea6\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e2a\u57fa\u4e8e\u6700\u8fd1\u90bb\u5c45\u7684\u76f8\u5173\u4efb\u52a1\u3002\u624b\u5de5\u8bc4\u4f30\u662f\u6602\u8d35\u548c\u8017\u65f6\u7684\uff0c\u4f46\u5176\u4ed6\u7814\u7a76\u8868\u660e\uff0c\u81ea\u52a8\u5316\u8bc4\u4f30\u53ef\u4ee5\u7d27\u5bc6\u5730\u6a21\u62df\u4eba\u7c7b\u7684\u76f4\u89c9(Newman et al.\uff0c 2010)\u3002 Conclusion \u5f71\u54cd\u5d4c\u5165\u8d28\u91cf\u7684\u56e0\u7d20\u5f88\u591a\u3002\u6807\u51c6\u7684\u7efc\u5408\u8bc4\u4ef7\u867d\u7136\u6709\u7528\uff0c\u4f46\u4e0d\u80fd\u63d0\u4f9b\u5b8c\u6574\u6216\u4e00\u81f4\u7684\u60c5\u51b5\u3002\u8bcd\u6c47\u9891\u7387\u7b49\u56e0\u7d20\u5728\u5176\u4e2d\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\uff0c\u800c\u8fd9\u5728\u4ee5\u524d\u662f\u4e0d\u4e3a\u4eba\u77e5\u7684\u3002\u8bcd\u9891\u4e5f\u4f1a\u5e72\u6270\u5e38\u7528\u7684\u4f59\u5f26\u76f8\u4f3c\u6027\u5ea6\u91cf\u3002\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u8bc4\u4f30\u6846\u67b6\uff0c\u8be5\u6846\u67b6\u57fa\u4e8e\u5d4c\u5165\u4e4b\u95f4\u7684\u76f4\u63a5\u6bd4\u8f83\uff0c\u4e3a\u8fd9\u4e9b\u5d4c\u5165\u63d0\u4f9b\u4e86\u66f4\u7cbe\u7ec6\u7684\u5206\u6790\uff0c\u5e76\u652f\u6301\u7b80\u5355\u7684\u4f17\u5305\u76f8\u5173\u6027\u5224\u65ad\u3002\u6211\u4eec\u8fd8\u63d0\u51fa\u4e86\u4e00\u4e2a\u65b0\u7684\u4e00\u81f4\u6027\u4efb\u52a1\uff0c\u5b83\u6d4b\u91cf\u4e86\u6211\u4eec\u7684\u76f4\u89c9\uff0c\u5373\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u90bb\u57df\u5e94\u8be5\u5728\u8bed\u4e49\u6216\u8bed\u6cd5\u4e0a\u76f8\u5173\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5916\u90e8\u8bc4\u4f30\u867d\u7136\u6709\u52a9\u4e8e\u7a81\u51fa\u5d4c\u5165\u6027\u80fd\u7684\u7279\u5b9a\u65b9\u9762\uff0c\u4f46\u4e0d\u5e94\u8be5\u7528\u4f5c\u901a\u7528\u8d28\u91cf\u7684\u4ee3\u7406\u3002","title":"Evaluation methods for unsupervised word embeddings"},{"location":"CS224n-2019-02-Word%20Vectors%202%20and%20Word%20Senses/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b (\u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1)","title":"Reference"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/","text":"Lecture 03 Word Window Classification,Neural Networks, and Matrix Calculus \u00b6 Lecture Plan Classification review/introduction Neural networks introduction Named Entity Recognition Binary true vs. corrupted word window classification Matrix calculus introduction \u63d0\u793a \uff1a\u8fd9\u5bf9\u4e00\u4e9b\u4eba\u800c\u8a00\u5c06\u662f\u56f0\u96be\u7684\u4e00\u5468\uff0c\u8bfe\u540e\u9700\u8981\u9605\u8bfb\u63d0\u4f9b\u7684\u8d44\u6599\u3002 Classification setup and notation \u00b6 \u901a\u5e38\u6211\u4eec\u6709\u7531\u6837\u672c\u7ec4\u6210\u7684\u8bad\u7ec3\u6570\u636e\u96c6 \\[ \\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N} \\] \\(x_i\\) \u662f\u8f93\u5165\uff0c\u4f8b\u5982\u5355\u8bcd\uff08\u7d22\u5f15\u6216\u662f\u5411\u91cf\uff09\uff0c\u53e5\u5b50\uff0c\u6587\u6863\u7b49\u7b49\uff0c\u7ef4\u5ea6\u4e3a \\(d\\) \\(y_i\\) \u662f\u6211\u4eec\u5c1d\u8bd5\u9884\u6d4b\u7684\u6807\u7b7e\uff08 \\(C\\) \u4e2a\u7c7b\u522b\u4e2d\u7684\u4e00\u4e2a\uff09\uff0c\u4f8b\u5982\uff1a \u7c7b\u522b\uff1a\u611f\u60c5\uff0c\u547d\u540d\u5b9e\u4f53\uff0c\u8d2d\u4e70/\u552e\u51fa\u7684\u51b3\u5b9a \u5176\u4ed6\u5355\u8bcd \u4e4b\u540e\uff1a\u591a\u8bcd\u5e8f\u5217\u7684 Classification intuition \u8bad\u7ec3\u6570\u636e\uff1a \\(\\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N}\\) \u7b80\u5355\u7684\u8bf4\u660e\u60c5\u51b5 \u56fa\u5b9a\u7684\u4e8c\u7ef4\u5355\u8bcd\u5411\u91cf\u5206\u7c7b \u4f7f\u7528softmax/logistic\u56de\u5f52 \u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u4f20\u7edf\u7684\u673a\u5668\u5b66\u4e60/\u7edf\u8ba1\u5b66\u65b9\u6cd5 \uff1a\u5047\u8bbe \\(x_i\\) \u662f\u56fa\u5b9a\u7684\uff0c\u8bad\u7ec3 softmax/logistic \u56de\u5f52\u7684\u6743\u91cd \\(W \\in \\mathbb{R}^{C \\times d}\\) \u6765\u51b3\u5b9a\u51b3\u5b9a\u8fb9\u754c(\u8d85\u5e73\u9762) \u65b9\u6cd5 \uff1a\u5bf9\u6bcf\u4e2a \\(x\\) \uff0c\u9884\u6d4b $$ p(y | x)=\\frac{\\exp \\left(W_{y} . x\\right)}{\\sum_{c=1}^{C} \\exp \\left(W_{c} \\cdot x\\right)} $$ \u6211\u4eec\u53ef\u4ee5\u5c06\u9884\u6d4b\u51fd\u6570\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\uff1a \u5c06 \\(W\\) \u7684 \\(y^{th}\\) \u884c\u548c \\(x\\) \u4e2d\u7684\u5bf9\u5e94\u884c\u76f8\u4e58\u5f97\u5230\u5206\u6570 $$ W_{y} \\cdot x=\\sum_{i=1}^{d} W_{y i} x_{i}=f_{y} $$ \u8ba1\u7b97\u6240\u6709\u7684 \\(f_c, for \\ c=1,\\dots,C\\) \u4f7f\u7528softmax\u51fd\u6570\u83b7\u5f97\u5f52\u4e00\u5316\u7684\u6982\u7387 \\[ p(y | x)=\\frac{\\exp \\left(f_{y}\\right)}{\\sum_{c=1}^{C} \\exp \\left(f_{c}\\right)}=\\operatorname{softmax}\\left(f_{y}\\right) \\] Training with softmax and cross-entropy loss \u5bf9\u4e8e\u6bcf\u4e2a\u8bad\u7ec3\u6837\u672c \\((x,y)\\) \uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u6700\u5927\u5316\u6b63\u786e\u7c7b \\(y\\) \u7684\u6982\u7387\uff0c\u6216\u8005\u6211\u4eec\u53ef\u4ee5\u6700\u5c0f\u5316\u8be5\u7c7b\u7684\u8d1f\u5bf9\u6570\u6982\u7387 $$ -\\log p(y | x)=-\\log \\left(\\frac{\\exp \\left(f_{y}\\right)}{\\sum_{c=1}^{C} \\exp \\left(f_{c}\\right)}\\right) $$ Background: What is \u201ccross entropy\u201d loss/error? \u4ea4\u53c9\u71b5\u201d\u7684\u6982\u5ff5\u6765\u6e90\u4e8e\u4fe1\u606f\u8bba\uff0c\u8861\u91cf\u4e24\u4e2a\u5206\u5e03\u4e4b\u95f4\u7684\u5dee\u5f02 \u4ee4\u771f\u5b9e\u6982\u7387\u5206\u5e03\u4e3a \\(p\\) \u4ee4\u6211\u4eec\u8ba1\u7b97\u7684\u6a21\u578b\u6982\u7387\u4e3a \\(q\\) \u4ea4\u53c9\u71b5\u4e3a \\[ H(p, q)=-\\sum_{c=1}^{C} p(c) \\log q(c) \\] \u5047\u8bbe groud truth (or true or gold or target)\u7684\u6982\u7387\u5206\u5e03\u5728\u6b63\u786e\u7684\u7c7b\u4e0a\u4e3a1\uff0c\u5728\u5176\u4ed6\u4efb\u4f55\u5730\u65b9\u4e3a0\uff1a \\(p = [0,\u2026,0,1,0,\u20260]\\) \u56e0\u4e3a \\(p\\) \u662f\u72ec\u70ed\u5411\u91cf\uff0c\u6240\u4ee5\u552f\u4e00\u5269\u4e0b\u7684\u9879\u662f\u771f\u5b9e\u7c7b\u7684\u8d1f\u5bf9\u6570\u6982\u7387 Classification over a full dataset \u5728\u6574\u4e2a\u6570\u636e\u96c6 \\(\\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N}\\) \u4e0a\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\uff0c\u662f\u6240\u6709\u6837\u672c\u7684\u4ea4\u53c9\u71b5\u7684\u5747\u503c \\[ J(\\theta)=\\frac{1}{N} \\sum_{i=1}^{N}-\\log \\left(\\frac{e^{f_{y_{i}}}}{\\sum_{c=1}^{C} e^{f_{c}}}\\right) \\] \u6211\u4eec\u4e0d\u4f7f\u7528 \\[ f_{y}=f_{y}(x)=W_{y} \\cdot x=\\sum_{j=1}^{d} W_{y j} x_{j} \\] \u6211\u4eec\u4f7f\u7528\u77e9\u9635\u6765\u8868\u793a \\(f\\) \\[ f = Wx \\] Traditional ML optimization \u4e00\u822c\u673a\u5668\u5b66\u4e60\u7684\u53c2\u6570 \\(\\theta\\) \u901a\u5e38\u53ea\u7531W\u7684\u5217\u7ec4\u6210 \\[ \\theta=\\left[\\begin{array}{c}{W_{\\cdot 1}} \\\\ {\\vdots} \\\\ {W_{\\cdot d}}\\end{array}\\right]=W( :) \\in \\mathbb{R}^{C d} \\] \u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u66f4\u65b0\u51b3\u7b56\u8fb9\u754c \\[ \\nabla_{\\theta} J(\\theta)=\\left[\\begin{array}{c}{\\nabla_{W_{1}}} \\\\ {\\vdots} \\\\ {\\nabla_{W_{d}}}\\end{array}\\right] \\in \\mathbb{R}^{C d} \\] Neural Network Classifiers \u00b6 \u5355\u72ec\u4f7f\u7528Softmax(\u2248logistic\u56de\u5f52)\u5e76\u4e0d\u5341\u5206\u5f3a\u5927 Softmax\u53ea\u7ed9\u51fa\u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u8fd9\u53ef\u80fd\u662f\u76f8\u5f53\u6709\u9650\u7684\uff0c\u5f53\u95ee\u9898\u5f88\u590d\u6742\u65f6\u662f\u65e0\u7528\u7684 \u7ea0\u6b63\u8fd9\u4e9b\u9519\u8bef\u4e0d\u662f\u5f88\u9177\u5417? Neural Nets for the Win! \u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u5b66\u4e60\u66f4\u590d\u6742\u7684\u51fd\u6570\u548c\u975e\u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u66f4\u9ad8\u7ea7\u7684\u5206\u7c7b\u9700\u8981 \u8bcd\u5411\u91cf \u66f4\u6df1\u5c42\u6b21\u7684\u6df1\u5c42\u795e\u7ecf\u7f51\u7edc Classification difference with word vectors \u4e00\u822c\u5728NLP\u6df1\u5ea6\u5b66\u4e60\u4e2d \u6211\u4eec\u5b66\u4e60\u4e86\u77e9\u9635 \\(W\\) \u548c\u8bcd\u5411\u91cf \\(x\\) \u6211\u4eec\u5b66\u4e60\u4f20\u7edf\u53c2\u6570\u548c\u8868\u793a \u8bcd\u5411\u91cf\u662f\u5bf9\u72ec\u70ed\u5411\u91cf\u7684\u91cd\u65b0\u8868\u793a\u2014\u2014\u5728\u4e2d\u95f4\u5c42\u5411\u91cf\u7a7a\u95f4\u4e2d\u79fb\u52a8\u5b83\u4eec\u2014\u2014\u4ee5\u4fbf\u4f7f\u7528(\u7ebf\u6027)softmax\u5206\u7c7b\u5668\u901a\u8fc7 x = Le \u5c42\u8fdb\u884c\u5206\u7c7b \u5373\u5c06\u8bcd\u5411\u91cf\u7406\u89e3\u4e3a\u4e00\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u8f93\u5165\u5355\u8bcd\u7684\u72ec\u70ed\u5411\u91cf\u5e76\u83b7\u5f97\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u6211\u4eec\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u3002\u5176\u4e2d\uff0c \\(Vd\\) \u662f\u6570\u91cf\u5f88\u5927\u7684\u53c2\u6570 \\[ \\nabla_{\\theta} J(\\theta)=\\left[\\begin{array}{c}{\\nabla_{W_{1}}} \\\\ {\\vdots} \\\\ {\\nabla_{W_{d a r d v a r k}}} \\\\ {\\vdots} \\\\ {\\nabla_{x_{z e b r a}}}\\end{array}\\right] \\in \\mathbb{R}^{C d + V d} \\] Neural computation An artificial neuron \u795e\u7ecf\u7f51\u7edc\u6709\u81ea\u5df1\u7684\u672f\u8bed\u5305 \u4f46\u5982\u679c\u4f60\u4e86\u89e3 softmax \u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7406\u89e3\u795e\u7ecf\u5143\u7684\u64cd\u4f5c A neuron can be a binary logistic regression unit \\(f = \\text{nonlinear activation fct. (e.g. sigmoid)} , w =\\text{weights}, b =\\text{bias}, h =\\text{hidden}, x = \\text{inputs}\\) $$ \\begin{array}{l}{h_{w, b}(x)=f\\left(w^{\\top} x+b\\right)} \\ {f(z)=\\frac{1}{1+e^{-z}}}\\end{array} $$ \\(b\\) : \u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u201c\u603b\u662f\u6253\u5f00\u201d\u7684\u7279\u6027\uff0c\u5b83\u7ed9\u51fa\u4e00\u4e2a\u5148\u9a8c\u7c7b\uff0c\u6216\u8005\u5c06\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u504f\u5411\u9879\u5206\u79bb\u51fa\u6765 \\(w,b\\) \u662f\u795e\u7ecf\u5143\u7684\u53c2\u6570 A neural network = running several logistic regressions at the same time \u5982\u679c\u6211\u4eec\u8f93\u5165\u4e00\u4e2a\u5411\u91cf\u901a\u8fc7\u4e00\u7cfb\u5217\u903b\u8f91\u56de\u5f52\u51fd\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u8f93\u51fa\u5411\u91cf\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u9700\u8981\u63d0\u524d\u51b3\u5b9a\u8fd9\u4e9b\u903b\u8f91\u56de\u5f52\u8bd5\u56fe\u9884\u6d4b\u7684\u53d8\u91cf\u662f\u4ec0\u4e48\u3002 \u6211\u4eec\u53ef\u4ee5\u8f93\u5165\u53e6\u4e00\u4e2alogistic\u56de\u5f52\u51fd\u6570\u3002\u635f\u5931\u51fd\u6570\u5c06\u6307\u5bfc\u4e2d\u95f4\u9690\u85cf\u53d8\u91cf\u5e94\u8be5\u662f\u4ec0\u4e48\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u9884\u6d4b\u4e0b\u4e00\u5c42\u7684\u76ee\u6807\u3002\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u3002 Matrix notation for a layer $$ \\begin{array}{l}{a_{1}=f\\left(W_{11} x_{1}+W_{12} x_{2}+W_{13} x_{3}+b_{1}\\right)} \\ {a_{2}=f\\left(W_{21} x_{1}+W_{22} x_{2}+W_{23} x_{3}+b_{2}\\right)}\\ {z=W x+b} \\ {a=f(z)} \\ f\\left(\\left[z_{1}, z_{2}, z_{3}\\right]\\right)=\\left[f\\left(z_{1}\\right), f\\left(z_{2}\\right), f\\left(z_{3}\\right)\\right] \\end{array} $$ \\(f(x)\\) \u5728\u8fd0\u7b97\u65f6\u662f element-wise \u9010\u5143\u7d20\u7684 Non-linearities (aka \u201cf \u201d): Why they\u2019re needed \u4f8b\u5982\uff1a\u51fd\u6570\u8fd1\u4f3c\uff0c\u5982\u56de\u5f52\u6216\u5206\u7c7b \u6ca1\u6709\u975e\u7ebf\u6027\uff0c\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u53ea\u80fd\u505a\u7ebf\u6027\u53d8\u6362 \u591a\u4e2a\u7ebf\u6027\u53d8\u6362\u53ef\u4ee5\u7ec4\u6210\u4e00\u4e2a\u7684\u7ebf\u6027\u53d8\u6362 \\(W_1 W_2 x = Wx\\) \u56e0\u4e3a\u7ebf\u6027\u53d8\u6362\u662f\u4ee5\u67d0\u79cd\u65b9\u5f0f\u65cb\u8f6c\u548c\u62c9\u4f38\u7a7a\u95f4\uff0c\u591a\u6b21\u7684\u65cb\u8f6c\u548c\u62c9\u4f38\u53ef\u4ee5\u878d\u5408\u4e3a\u4e00\u6b21\u7ebf\u6027\u53d8\u6362 \u5bf9\u4e8e\u975e\u7ebf\u6027\u51fd\u6570\u800c\u8a00\uff0c\u4f7f\u7528\u66f4\u591a\u7684\u5c42\uff0c\u4ed6\u4eec\u53ef\u4ee5\u8fd1\u4f3c\u66f4\u590d\u6742\u7684\u51fd\u6570 Named Entity Recognition (NER) \u00b6 \u4efb\u52a1\uff1a\u4f8b\u5982\uff0c\u67e5\u627e\u548c\u5206\u7c7b\u6587\u672c\u4e2d\u7684\u540d\u79f0 \u53ef\u80fd\u7684\u7528\u9014 \u8ddf\u8e2a\u6587\u6863\u4e2d\u63d0\u5230\u7684\u7279\u5b9a\u5b9e\u4f53\uff08\u7ec4\u7ec7\u3001\u4e2a\u4eba\u3001\u5730\u70b9\u3001\u6b4c\u66f2\u540d\u3001\u7535\u5f71\u540d\u7b49\uff09 \u5bf9\u4e8e\u95ee\u9898\u56de\u7b54\uff0c\u7b54\u6848\u901a\u5e38\u662f\u547d\u540d\u5b9e\u4f53 \u8bb8\u591a\u9700\u8981\u7684\u4fe1\u606f\u5b9e\u9645\u4e0a\u662f\u547d\u540d\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u8054 \u540c\u6837\u7684\u6280\u672f\u53ef\u4ee5\u6269\u5c55\u5230\u5176\u4ed6 slot-filling \u69fd\u586b\u5145 \u5206\u7c7b \u901a\u5e38\u540e\u9762\u662f\u547d\u540d\u5b9e\u4f53\u94fe\u63a5/\u89c4\u8303\u5316\u5230\u77e5\u8bc6\u5e93 Named Entity Recognition on word sequences \u6211\u4eec\u901a\u8fc7\u5728\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b\uff0c\u7136\u540e\u5c06\u5b9e\u4f53\u63d0\u53d6\u4e3a\u5355\u8bcd\u5b50\u5e8f\u5217\u6765\u9884\u6d4b\u5b9e\u4f53 Why might NER be hard? \u5f88\u96be\u8ba1\u7b97\u51fa\u5b9e\u4f53\u7684\u8fb9\u754c \u7b2c\u4e00\u4e2a\u5b9e\u4f53\u662f \u201cFirst National Bank\u201d \u8fd8\u662f \u201cNational Bank\u201d \u5f88\u96be\u77e5\u9053\u67d0\u7269\u662f\u5426\u662f\u4e00\u4e2a\u5b9e\u4f53 \u662f\u4e00\u6240\u540d\u4e3a\u201cFuture School\u201d \u7684\u5b66\u6821\uff0c\u8fd8\u662f\u8fd9\u662f\u4e00\u6240\u672a\u6765\u7684\u5b66\u6821\uff1f \u5f88\u96be\u77e5\u9053\u672a\u77e5/\u65b0\u5947\u5b9e\u4f53\u7684\u7c7b\u522b \u201cZig Ziglar\u201d ? \u4e00\u4e2a\u4eba \u5b9e\u4f53\u7c7b\u662f\u6a21\u7cca\u7684\uff0c\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587 \u8fd9\u91cc\u7684\u201cCharles Schwab\u201d \u662f PER \u4e0d\u662f ORG Binary word window classification \u00b6 \u4e3a\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u8bed\u8a00\u6784\u5efa\u5206\u7c7b\u5668 \u4e00\u822c\u6765\u8bf4\uff0c\u5f88\u5c11\u5bf9\u5355\u4e2a\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b \u6709\u8da3\u7684\u95ee\u9898\uff0c\u5982\u4e0a\u4e0b\u6587\u6b67\u4e49\u51fa\u73b0 \u4f8b\u5b50\uff1aauto-antonyms \"To sanction\" can mean \"to permit\" or \"to punish\u201d \"To seed\" can mean \"to place seeds\" or \"to remove seeds\" \u4f8b\u5b50\uff1a\u89e3\u51b3\u6a21\u7cca\u547d\u540d\u5b9e\u4f53\u7684\u94fe\u63a5 Paris \u2192 Paris, France vs. Paris Hilton vs. Paris, Texas Hathaway \u2192 Berkshire Hathaway vs. Anne Hathaway Window classification \u601d\u60f3\uff1a\u5728**\u76f8\u90bb\u8bcd\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3**\u4e2d\u5bf9\u4e00\u4e2a\u8bcd\u8fdb\u884c\u5206\u7c7b \u4f8b\u5982\uff0c\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e2a\u5355\u8bcd\u7684\u547d\u540d\u5b9e\u4f53\u5206\u7c7b \u4eba\u3001\u5730\u70b9\u3001\u7ec4\u7ec7\u3001\u6ca1\u6709 \u5728\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b\u7684\u4e00\u4e2a\u7b80\u5355\u65b9\u6cd5\u53ef\u80fd\u662f\u5bf9\u7a97\u53e3\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u8fdb\u884c**\u5e73\u5747**\uff0c\u5e76\u5bf9\u5e73\u5747\u5411\u91cf\u8fdb\u884c\u5206\u7c7b \u95ee\u9898\uff1a \u8fd9\u4f1a\u4e22\u5931\u4f4d\u7f6e\u4fe1\u606f Window classification: Softmax \u8bad\u7ec3softmax\u5206\u7c7b\u5668\u5bf9\u4e2d\u5fc3\u8bcd\u8fdb\u884c\u5206\u7c7b\uff0c\u65b9\u6cd5\u662f\u5728\u4e00\u4e2a\u7a97\u53e3\u5185**\u5c06\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u8bcd\u5411\u91cf\u4e32\u8054\u8d77\u6765** \u4f8b\u5b50\uff1a\u5728\u8fd9\u53e5\u8bdd\u7684\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u201cParis\u201d\u8fdb\u884c\u5206\u7c7b\uff0c\u7a97\u53e3\u957f\u5ea6\u4e3a2 \u7ed3\u679c\u5411\u91cf \\(x_{window} = x \\in R^{5d}\\) \u662f\u4e00\u4e2a\u5217\u5411\u91cf Simplest window classifier: Softmax \u5bf9\u4e8e \\(x = x_{window}\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0e\u4e4b\u524d\u76f8\u540c\u7684softmax\u5206\u7c7b\u5668 \u5982\u4f55\u66f4\u65b0\u5411\u91cf\uff1f \u7b80\u800c\u8a00\u4e4b\uff1a\u5c31\u50cf\u4e0a\u5468\u90a3\u6837\uff0c\u6c42\u5bfc\u548c\u4f18\u5316 Binary classification with unnormalized scores \u4e4b\u524d\u7684\u4f8b\u5b50\uff1a \\(X_{\\text { window }}=[\\begin{array}{ccc}{\\mathrm{X}_{\\text { museums }}} & {\\mathrm{X}_{\\text { in }}} & {\\mathrm{X}_{\\text { paris }} \\quad \\mathrm{X}_{\\text { are }} \\quad \\mathrm{X}_{\\text { amazing }} ]}\\end{array}\\) \u5047\u8bbe\u6211\u4eec\u8981\u5bf9\u4e2d\u5fc3\u8bcd\u662f\u5426\u4e3a\u4e00\u4e2a\u5730\u70b9\uff0c\u8fdb\u884c\u5206\u7c7b \u4e0eword2vec\u7c7b\u4f3c\uff0c\u6211\u4eec\u5c06\u904d\u5386\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\u3002\u4f46\u8fd9\u4e00\u6b21\uff0c\u5b83\u5c06\u53d7\u5230\u76d1\u7763\uff0c\u53ea\u6709\u4e00\u4e9b\u4f4d\u7f6e\u80fd\u591f\u5f97\u5230\u9ad8\u5206\u3002 \u4f8b\u5982\uff0c\u5728\u4ed6\u4eec\u7684\u4e2d\u5fc3\u6709\u4e00\u4e2a\u5b9e\u9645\u7684NER Location\u7684\u4f4d\u7f6e\u662f\u201c\u771f\u5b9e\u7684\u201d\u4f4d\u7f6e\u4f1a\u83b7\u5f97\u9ad8\u5206 Binary classification for NER Location \u4f8b\u5b50\uff1aNot all museums in Paris are amazing \u8fd9\u91cc\uff1a\u4e00\u4e2a\u771f\u6b63\u7684\u7a97\u53e3\uff0c\u4ee5Paris\u4e3a\u4e2d\u5fc3\u7684\u7a97\u53e3\u548c\u6240\u6709\u5176\u4ed6\u7a97\u53e3\u90fd\u201c\u635f\u574f\u201d\u4e86\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u4e2d\u5fc3\u6ca1\u6709\u6307\u5b9a\u7684\u5b9e\u4f53\u4f4d\u7f6e\u3002 museums in Paris are amazing \u201c\u635f\u574f\u201d\u7a97\u53e3\u5f88\u5bb9\u6613\u627e\u5230\uff0c\u800c\u4e14\u6709\u5f88\u591a\uff1a\u4efb\u4f55\u4e2d\u5fc3\u8bcd\u6ca1\u6709\u5728\u6211\u4eec\u7684\u8bed\u6599\u5e93\u4e2d\u660e\u786e\u6807\u8bb0\u4e3aNER\u4f4d\u7f6e\u7684\u7a97\u53e3 Not all museums in Paris Neural Network Feed-forward Computation \u4f7f\u7528\u795e\u7ecf\u6fc0\u6d3b \\(a\\) \u7b80\u5355\u5730\u7ed9\u51fa\u4e00\u4e2a\u975e\u6807\u51c6\u5316\u7684\u5206\u6570 $$ score(x)=U^{T} a \\in \\mathbb{R} $$ \u6211\u4eec\u7528\u4e00\u4e2a\u4e09\u5c42\u795e\u7ecf\u7f51\u7edc\u8ba1\u7b97\u4e00\u4e2a\u7a97\u53e3\u7684\u5f97\u5206 \\(s = score(\"museums \\ in \\ Paris \\ are \\ amazing\u201d)\\) \\[ \\begin{array}{l}{s=U^{T} f(W x+b)} \\\\ {x \\in \\mathbb{R}^{20 \\times 1}, W \\in \\mathbb{R}^{8 \\times 20}, U \\in \\mathbb{R}^{8 \\times 1}}\\end{array} \\] Main intuition for extra layer \u4e2d\u95f4\u5c42\u5b66\u4e60\u8f93\u5165\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684**\u975e\u7ebf\u6027\u4ea4\u4e92** \u4f8b\u5982\uff1a\u53ea\u6709\u5f53\u201cmuseum\u201d\u662f\u7b2c\u4e00\u4e2a\u5411\u91cf\u65f6\uff0c\u201cin\u201d\u653e\u5728\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u624d\u91cd\u8981 The max-margin loss \u5173\u4e8e\u8bad\u7ec3\u76ee\u6807\u7684\u60f3\u6cd5\uff1a\u8ba9\u771f\u5b9e\u7a97\u53e3\u7684\u5f97\u5206\u66f4\u9ad8\uff0c\u800c\u7834\u574f\u7a97\u53e3\u7684\u5f97\u5206\u66f4\u4f4e(\u76f4\u5230\u8db3\u591f\u597d\u4e3a\u6b62) \\(s = score(\"museums \\ in \\ Paris \\ are \\ amazing\u201d)\\) \\(s_c = score(\"Not \\ all \\ museums \\ in \\ Paris)\\) \u6700\u5c0f\u5316 \\(J=\\max \\left(0,1-s+s_{c}\\right)\\) \u8fd9\u662f\u4e0d\u53ef\u5fae\u7684\uff0c\u4f46\u5b83\u662f\u8fde\u7eed\u7684\u2192\u6211\u4eec\u53ef\u4ee5\u7528SGD\u3002 \u6bcf\u4e2a\u9009\u9879\u90fd\u662f\u8fde\u7eed\u7684 \u5355\u7a97\u53e3\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ J=\\max \\left(0,1-s+s_{c}\\right) \\] \u6bcf\u4e2a\u4e2d\u5fc3\u6709NER\u4f4d\u7f6e\u7684\u7a97\u53e3\u7684\u5f97\u5206\u5e94\u8be5\u6bd4\u4e2d\u5fc3\u6ca1\u6709\u4f4d\u7f6e\u7684\u7a97\u53e3\u9ad81\u5206 \u8981\u83b7\u5f97\u5b8c\u6574\u7684\u76ee\u6807\u51fd\u6570\uff1a\u4e3a\u6bcf\u4e2a\u771f\u7a97\u53e3\u91c7\u6837\u51e0\u4e2a\u635f\u574f\u7684\u7a97\u53e3\u3002\u5bf9\u6240\u6709\u57f9\u8bad\u7a97\u53e3\u6c42\u548c \u7c7b\u4f3c\u4e8eword2vec\u4e2d\u7684\u8d1f\u62bd\u6837 \u4f7f\u7528SGD\u66f4\u65b0\u53c2\u6570 \\(\\theta^{n e w}=\\theta^{o l d} - \\alpha \\nabla_{\\theta} J(\\theta)\\) \\(a\\) \u662f \u6b65\u957f\u6216\u662f\u5b66\u4e60\u7387 \u5982\u4f55\u8ba1\u7b97 \\(\\nabla_{\\theta} J(\\theta)\\) \uff1f \u624b\u5de5\u8ba1\u7b97\uff08\u672c\u8bfe\uff09 \u7b97\u6cd5\uff1a\u53cd\u5411\u4f20\u64ad\uff08\u4e0b\u4e00\u8bfe\uff09 Computing Gradients by Hand \u56de\u987e\u591a\u5143\u5bfc\u6570 \u77e9\u9635\u5fae\u79ef\u5206\uff1a\u5b8c\u5168\u77e2\u91cf\u5316\u7684\u68af\u5ea6 \u6bd4\u975e\u77e2\u91cf\u68af\u5ea6\u5feb\u5f97\u591a\uff0c\u4e5f\u66f4\u6709\u7528 \u4f46\u505a\u4e00\u4e2a\u975e\u77e2\u91cf\u68af\u5ea6\u53ef\u4ee5\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5b9e\u8df5\uff1b\u4ee5\u4e0a\u5468\u7684\u8bb2\u5ea7\u4e3a\u4f8b notes \u66f4\u8be6\u7ec6\u5730\u6db5\u76d6\u4e86\u8fd9\u4e9b\u6750\u6599 Gradients \u00b6 \u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u67091\u4e2a\u8f93\u51fa\u548c1\u4e2a\u8f93\u5165 \\[ f(x) = x^3 \\] \u659c\u7387\u662f\u5b83\u7684\u5bfc\u6570 \\[ \\frac{d f}{d x}=3 x^{2} \\] \u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u67091\u4e2a\u8f93\u51fa\u548c n \u4e2a\u8f93\u5165 \\[ f(\\boldsymbol{x})=f\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right) \\] \u68af\u5ea6\u662f\u5173\u4e8e\u6bcf\u4e2a\u8f93\u5165\u7684\u504f\u5bfc\u6570\u7684\u5411\u91cf \\[ \\frac{\\partial f}{\\partial \\boldsymbol{x}}=\\left[\\frac{\\partial f}{\\partial x_{1}}, \\frac{\\partial f}{\\partial x_{2}}, \\ldots, \\frac{\\partial f}{\\partial x_{n}}\\right] \\] Jacobian Matrix: Generalization of the Gradient \u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u6709 m \u4e2a\u8f93\u51fa\u548c n \u4e2a\u8f93\u5165 \\[ \\boldsymbol{f}(\\boldsymbol{x})=\\left[f_{1}\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right), \\ldots, f_{m}\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)\\right] \\] \u5176\u96c5\u53ef\u6bd4\u77e9\u9635\u662f\u4e00\u4e2a \\(m \\times n\\) \u7684\u504f\u5bfc\u77e9\u9635 \\[ \\frac{\\partial \\boldsymbol{f}}{\\partial \\boldsymbol{x}}=\\left[\\begin{array}{ccc}{\\frac{\\partial f_{1}}{\\partial x_{1}}} & {\\cdots} & {\\frac{\\partial f_{1}}{\\partial x_{n}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial f_{m}}{\\partial x_{1}}} & {\\cdots} & {\\frac{\\partial f_{m}}{\\partial x_{n}}}\\end{array}\\right] \\] \\[ \\left(\\frac{\\partial f}{\\partial x}\\right)_{i j}=\\frac{\\partial f_{i}}{\\partial x_{j}} \\] Chain Rule \u5bf9\u4e8e\u5355\u53d8\u91cf\u51fd\u6570\uff1a\u4e58\u4ee5\u5bfc\u6570 $$ \\begin{array}{l}{z=3 y} \\ {y=x^{2}} \\ {\\frac{d z}{d x}=\\frac{d z}{d y} \\frac{d y}{d x}=(3)(2 x)=6 x}\\end{array} $$ \u5bf9\u4e8e\u4e00\u6b21\u5904\u7406\u591a\u4e2a\u53d8\u91cf\uff1a\u4e58\u4ee5\u96c5\u53ef\u6bd4\u77e9\u9635 $$ \\begin{array}{l}{\\textbf{h}=f(\\textbf{z})} \\ {\\textbf{z}=\\textbf{W} \\textbf{x}+\\textbf{b}} \\ {\\frac{\\partial \\textbf{h}}{\\partial \\textbf{x}}=\\frac{\\partial \\textbf{h}}{\\partial \\textbf{z}} \\frac{\\partial \\textbf{z}}{\\partial \\textbf{x}}=\\dots}\\end{array} $$ Example Jacobian: Elementwise activation Function \\(h=f(z)\\) , \\(\\frac{\\partial \\textbf{h}}{\\partial \\textbf{z}} = ?, \\textbf{h},\\textbf{z} \\in \\mathbb{R}^{n}\\) \u7531\u4e8e\u4f7f\u7528\u7684\u662f element-wise\uff0c\u6240\u4ee5 \\(h_{i}=f\\left(z_{i}\\right)\\) \u51fd\u6570\u6709n\u4e2a\u8f93\u51fa\u548cn\u4e2a\u8f93\u5165 \u2192 n\u00d7n \u7684\u96c5\u53ef\u6bd4\u77e9\u9635 \\[ \\begin{aligned}\\left(\\frac{\\partial h}{\\partial z}\\right)_{i j} &=\\frac{\\partial h_{i}}{\\partial z_{j}}=\\frac{\\partial}{\\partial z_{j}} f\\left(z_{i}\\right), \\text{definition of Jacobian} \\\\ &=\\left\\{\\begin{array}{ll}{f^{\\prime}\\left(z_{i}\\right)} & {\\text { if } i=j} \\\\ {0} & {\\text { if otherwise }} , \\text{regular 1-variable derivative} \\end{array}\\right.\\end{aligned} \\] \\[ \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}}= \\left(\\begin{array}{ccc}{f^{\\prime}\\left(z_{1}\\right)} & { } & {0} \\\\ {} & {\\ddots} & { } \\\\ {0} & { } & {f^{\\prime}\\left(z_{n}\\right)}\\end{array}\\right)=\\operatorname{diag}\\left(\\boldsymbol{f}^{\\prime}(\\boldsymbol{z})\\right) \\] Other Jacobians $$ \\begin{array}{l}{\\frac{\\partial}{\\partial \\boldsymbol{x}}(\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b})=\\boldsymbol{W}} \\ {\\frac{\\partial}{\\partial \\boldsymbol{b}}(\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b})=\\boldsymbol{I} \\text { (Identity matrix) }} \\ \\frac{\\partial}{\\partial \\boldsymbol{u}}\\left(\\boldsymbol{u}^{T} \\boldsymbol{h}\\right)=\\boldsymbol{h}^{\\boldsymbol{T}} \\end{array} $$ \u8fd9\u662f\u6b63\u786e\u7684\u96c5\u53ef\u6bd4\u77e9\u9635\u3002\u7a0d\u540e\u6211\u4eec\u5c06\u8ba8\u8bba\u201c\u5f62\u72b6\u7ea6\u5b9a\u201d\uff1b\u7528\u5b83\u5219\u7b54\u6848\u662f \\(h\\) \u3002 Back to our Neural Net! \u5982\u4f55\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial b}\\) \uff1f \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5173\u5fc3\u7684\u662f\u635f\u5931\u7684\u68af\u5ea6\uff0c\u4f46\u662f\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u5206\u6570\u7684\u68af\u5ea6 Break up equations into simple pieces Apply the chain rule $$ \\begin{array}{l}{s=\\boldsymbol{u}^{T} \\boldsymbol{h}} \\ {\\boldsymbol{h}=f(\\boldsymbol{z})} \\ {\\boldsymbol{z}=\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}} \\ {\\boldsymbol{x}} \\text{ (input) }\\end{array} $$ \\[ \\frac{\\partial s}{\\partial \\boldsymbol{b}}=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}} \\] \u5982\u4f55\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial \\textbf{W}}\\) \uff1f $$ \\begin{aligned} \\frac{\\partial s}{\\partial \\boldsymbol{W}} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\ \\frac{\\partial s}{\\partial \\boldsymbol{b}} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}} \\end{aligned} $$ \u524d\u4e24\u9879\u662f\u91cd\u590d\u7684\uff0c\u65e0\u987b\u91cd\u590d\u8ba1\u7b97 $$ \\begin{aligned} \\frac{\\partial s}{\\partial \\boldsymbol{W}} &=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\ \\frac{\\partial s}{\\partial \\boldsymbol{b}} &=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}}=\\boldsymbol{\\delta} \\ \\boldsymbol{\\delta} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}}=\\boldsymbol{u}^{T} \\circ f^{\\prime}(\\boldsymbol{z}) \\end{aligned} $$ \u5176\u4e2d\uff0c \\(\\delta\\) \u662f\u5c40\u90e8\u8bef\u5dee\u7b26\u53f7 Derivative with respect to Matrix: Output shape \\(\\boldsymbol{W} \\in \\mathbb{R}^{n \\times m}\\) \uff0c \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}\\) \u7684\u5f62\u72b6\u662f 1\u4e2a\u8f93\u51fa\uff0c \\(n \\times m\\) \u4e2a\u8f93\u5165\uff1a1 \u00d7 nm \u7684\u96c5\u53ef\u6bd4\u77e9\u9635\uff1f \u4e0d\u65b9\u4fbf\u66f4\u65b0\u53c2\u6570 \\(\\theta^{n e w}=\\theta^{o l d}-\\alpha \\nabla_{\\theta} J(\\theta)\\) \u800c\u662f\u9075\u5faa\u60ef\u4f8b\uff1a\u5bfc\u6570\u7684\u5f62\u72b6\u662f\u53c2\u6570\u7684\u5f62\u72b6 \uff08\u5f62\u72b6\u7ea6\u5b9a\uff09 \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}\\) \u7684\u5f62\u72b6\u662f \\(n \\times m\\) \\[ \\left[\\begin{array}{ccc}{\\frac{\\partial s}{\\partial W_{11}}} & {\\cdots} & {\\frac{\\partial s}{\\partial W_{1 m}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial s}{\\partial W_{n 1}}} & {\\cdots} & {\\frac{\\partial s}{\\partial W_{n m}}}\\end{array}\\right] \\] Derivative with respect to Matrix \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}}\\) \\(\\delta\\) \u5c06\u51fa\u73b0\u5728\u6211\u4eec\u7684\u7b54\u6848\u4e2d \u53e6\u4e00\u9879\u5e94\u8be5\u662f \\(x\\) \uff0c\u56e0\u4e3a \\(\\boldsymbol{z}=\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}\\) \u8fd9\u8868\u660e \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\boldsymbol{x}^{T}\\) Why the Transposes? $$ \\begin{array}{l}{\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\quad \\boldsymbol{x}^{T}} \\ {[n \\times m]} {[n \\times 1]} {[1 \\times m]}\\end{array} $$ \u7c97\u7cd9\u7684\u56de\u7b54\u662f\uff1a\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u51b3\u5c3a\u5bf8\u95ee\u9898\u4e86 \u68c0\u67e5\u5de5\u4f5c\u7684\u6709\u7528\u6280\u5de7 \u8bfe\u5802\u8bb2\u7a3f\u4e2d\u6709\u5b8c\u6574\u7684\u89e3\u91ca \u6bcf\u4e2a\u8f93\u5165\u5230\u6bcf\u4e2a\u8f93\u51fa\u2014\u2014\u4f60\u5f97\u5230\u7684\u662f\u5916\u90e8\u79ef \\[ \\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\boldsymbol{x}^{T}=\\left[\\begin{array}{c}{\\delta_{1}} \\\\ {\\vdots} \\\\ {\\delta_{n}}\\end{array}\\right]\\left[x_{1}, \\ldots, x_{m}\\right]=\\left[\\begin{array}{ccc}{\\delta_{1} x_{1}} & {\\dots} & {\\delta_{1} x_{m}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\delta_{n} x_{1}} & {\\dots} & {\\delta_{n} x_{m}}\\end{array}\\right] \\] What shape should derivatives be? \\(\\frac{\\partial s}{\\partial \\boldsymbol{b}}=\\boldsymbol{h}^{T} \\circ f^{\\prime}(\\boldsymbol{z})\\) \u662f\u884c\u5411\u91cf \u4f46\u662f\u4e60\u60ef\u4e0a\u8bf4\u68af\u5ea6\u5e94\u8be5\u662f\u4e00\u4e2a\u5217\u5411\u91cf\u56e0\u4e3a \\(b\\) \u662f\u4e00\u4e2a\u5217\u5411\u91cf \u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f(\u8fd9\u4f7f\u5f97\u94fe\u5f0f\u6cd5\u5219\u5f88\u5bb9\u6613)\u548c\u5f62\u72b6\u7ea6\u5b9a(\u8fd9\u4f7f\u5f97SGD\u5f88\u5bb9\u6613\u5b9e\u73b0)\u4e4b\u95f4\u7684\u5206\u6b67 \u6211\u4eec\u5e0c\u671b\u7b54\u6848\u9075\u5faa\u5f62\u72b6\u7ea6\u5b9a \u4f46\u662f\u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f\u5bf9\u4e8e\u8ba1\u7b97\u7b54\u6848\u5f88\u6709\u7528 \u4e24\u4e2a\u9009\u62e9 \u5c3d\u91cf\u4f7f\u7528\u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f\uff0c\u6700\u540e\u6309\u7167\u7ea6\u5b9a\u8fdb\u884c\u6574\u5f62 \u6211\u4eec\u521a\u521a\u505a\u7684\u3002\u4f46\u6700\u540e\u8f6c\u7f6e \\(\\frac{\\partial s}{\\partial \\boldsymbol{b}}\\) \u4f7f\u5bfc\u6570\u6210\u4e3a\u5217\u5411\u91cf\uff0c\u5f97\u5230 \\(\\delta ^ T\\) \u59cb\u7ec8\u9075\u5faa\u60ef\u4f8b \u67e5\u770b\u7ef4\u5ea6\uff0c\u627e\u51fa\u4f55\u65f6\u8f6c\u7f6e \u548c/\u6216 \u91cd\u65b0\u6392\u5e8f\u9879\u3002 \u53cd\u5411\u4f20\u64ad \u7b97\u6cd5\u9ad8\u6548\u5730\u8ba1\u7b97\u68af\u5ea6 \u5c06\u6211\u4eec\u521a\u521a\u624b\u5de5\u5b8c\u6210\u7684\u8f6c\u6362\u6210\u7b97\u6cd5 \u7528\u4e8e\u6df1\u5ea6\u5b66\u4e60\u8f6f\u4ef6\u6846\u67b6(TensorFlow, PyTorch, Chainer, etc.) Notes 03 Neural Networks, Backpropagation \u00b6 Keyphrases : Neural networks.Forward computation.Backward.propagation.Neuron Units.Max-margin Loss.Gradient checks.Xavier parameter initialization.Learning rates.Adagrad. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u4ecb\u7ecd\u4e86\u5355\u5c42\u548c\u591a\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u5b83\u4eec\u7528\u4e8e\u5206\u7c7b\u76ee\u7684\u3002\u7136\u540e\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a\u53cd\u5411\u4f20\u64ad\u7684\u5206\u5e03\u5f0f\u68af\u5ea6\u4e0b\u964d\u6280\u672f\u6765\u8bad\u7ec3\u5b83\u4eec\u3002\u6211\u4eec\u5c06\u770b\u5230\u5982\u4f55\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u53c2\u6570\u66f4\u65b0\u3002\u5728\u5bf9\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u4e25\u683c\u7684\u6570\u5b66\u8ba8\u8bba\u4e4b\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e00\u4e9b\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\u7684\u5b9e\u7528\u6280\u5de7\u548c\u6280\u5de7\uff0c\u5305\u62ec:\u795e\u7ecf\u5143\u5355\u5143(\u975e\u7ebf\u6027)\u3001\u68af\u5ea6\u68c0\u67e5\u3001Xavier\u53c2\u6570\u521d\u59cb\u5316\u3001\u5b66\u4e60\u7387\u3001Adagrad\u7b49\u3002\u6700\u540e,\u6211\u4eec\u5c06\u9f13\u52b1\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4f5c\u4e3a\u8bed\u8a00\u6a21\u578b\u3002 1 Neural Networks: Foundations \u00b6 \u5728\u524d\u9762\u7684\u8ba8\u8bba\u4e2d\u8ba4\u4e3a\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u6570\u636e\u662f\u7ebf\u6027\u4e0d\u53ef\u5206\u7684\u6240\u4ee5\u9700\u8981\u975e\u7ebf\u6027\u5206\u7c7b\u5668\uff0c\u4e0d\u7136\u7684\u8bdd\u7ebf\u6027\u5206\u7c7b\u5668\u5728\u8fd9\u4e9b\u6570\u636e\u4e0a\u7684\u8868\u73b0\u662f\u6709\u9650\u7684\u3002\u795e\u7ecf\u7f51\u7edc\u5c31\u662f\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4e00\u7c7b\u5177\u6709\u975e\u7ebf\u6027\u51b3\u7b56\u5206\u754c\u7684\u5206\u7c7b\u5668\u3002\u73b0\u5728\u6211\u4eec\u77e5\u9053\u795e\u7ecf\u7f51\u7edc\u521b\u5efa\u7684\u51b3\u7b56\u8fb9\u754c\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u662f\u5982\u4f55\u521b\u5efa\u7684\u3002 \u795e\u7ecf\u7f51\u7edc\u662f\u53d7\u751f\u7269\u5b66\u542f\u53d1\u7684\u5206\u7c7b\u5668\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5b83\u4eec\u7ecf\u5e38\u88ab\u79f0\u4e3a\u201c\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u201d\uff0c\u4ee5\u533a\u522b\u4e8e\u6709\u673a\u7c7b\u3002\u7136\u800c\uff0c\u5728\u73b0\u5b9e\u4e2d\uff0c\u4eba\u7c7b\u795e\u7ecf\u7f51\u7edc\u6bd4\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u66f4\u6709\u80fd\u529b\u3001\u66f4\u590d\u6742\uff0c\u56e0\u6b64\u901a\u5e38\u6700\u597d\u4e0d\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u753b\u592a\u591a\u7684\u76f8\u4f3c\u70b9\u3002 1.1 A Neuron \u00b6 \u795e\u7ecf\u5143\u662f\u4e00\u4e2a\u901a\u7528\u7684\u8ba1\u7b97\u5355\u5143\uff0c\u5b83\u63a5\u53d7 \\(n\\) \u4e2a\u8f93\u5165\u5e76\u4ea7\u751f\u4e00\u4e2a\u8f93\u51fa\u3002\u4e0d\u540c\u7684\u795e\u7ecf\u5143\u6839\u636e\u5b83\u4eec\u4e0d\u540c\u7684\u53c2\u6570\uff08\u4e00\u822c\u8ba4\u4e3a\u662f\u795e\u7ecf\u5143\u7684\u6743\u503c\uff09\u4f1a\u6709\u4e0d\u540c\u7684\u8f93\u51fa\u3002\u5bf9\u795e\u7ecf\u5143\u6765\u8bf4\u4e00\u4e2a\u5e38\u89c1\u7684\u9009\u62e9\u662f \\(sigmoid\\) \uff0c\u6216\u8005\u79f0\u4e3a\u201c\u4e8c\u5143\u903b\u8f91\u56de\u5f52\u201d\u5355\u5143\u3002\u8fd9\u79cd\u795e\u7ecf\u5143\u4ee5 \\(n\\) \u7ef4\u7684\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u4e00\u4e2a\u6fc0\u6d3b\u6807\u91cf\uff08\u8f93\u51fa\uff09 \\(a\\) \u3002\u8be5\u795e\u7ecf\u5143\u8fd8\u4e0e\u4e00\u4e2a \\(n\\) \u7ef4\u7684\u6743\u91cd\u5411\u91cf \\(w\\) \u548c\u4e00\u4e2a\u504f\u7f6e\u6807\u91cf \\(b\\) \u76f8\u5173\u8054\u3002\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u51fa\u662f \\[ a=\\frac{1}{1+exp(-(w^{T}x+b))} \\] \u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u4e0a\u9762\u516c\u5f0f\u4e2d\u7684\u6743\u503c\u548c\u504f\u7f6e\u9879\u7ed3\u5408\u5728\u4e00\u8d77\uff1a \\[ a=\\frac{1}{1+exp(-[w^{T}\\;\\;x]\\cdot [x\\;\\;1])} \\] \u8fd9\u4e2a\u516c\u5f0f\u53ef\u4ee5\u4ee5\u4e0b\u56fe\u7684\u5f62\u5f0f\u53ef\u89c6\u5316 \u795e\u7ecf\u5143\u662f\u795e\u7ecf\u7f51\u7edc\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\u3002\u6211\u4eec\u5c06\u770b\u5230\u795e\u7ecf\u5143\u53ef\u4ee5\u662f\u8bb8\u591a\u5141\u8bb8\u975e\u7ebf\u6027\u5728\u7f51\u7edc\u4e2d\u79ef\u7d2f\u7684\u51fd\u6570\u4e4b\u4e00\u3002 1.2 A Single Layer of Neurons \u00b6 \u6211\u4eec\u5c06\u4e0a\u8ff0\u601d\u60f3\u6269\u5c55\u5230\u591a\u4e2a\u795e\u7ecf\u5143\uff0c\u8003\u8651\u8f93\u5165 \\(x\\) \u4f5c\u4e3a\u591a\u4e2a\u8fd9\u6837\u7684\u795e\u7ecf\u5143\u7684\u8f93\u5165\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5982\u679c\u6211\u4eec\u5b9a\u4e49\u4e0d\u540c\u7684\u795e\u7ecf\u5143\u7684\u6743\u503c\u4e3a \\(\\{w^{(1)},...,w^{(m)}\\}\\) \u3001\u504f\u7f6e\u4e3a \\(\\{b_{1},...,b_{m}\\}\\) \u548c\u76f8\u5bf9\u5e94\u7684\u6fc0\u6d3b\u8f93\u51fa\u4e3a \\(\\{a_{1},...,a_{m}\\}\\) \uff1a \\[ \\begin{matrix} a_{1} =\\frac{1}{1+exp(-(w^{(1)T}x+b))} \\\\ \\vdots \\\\ a_{m} =\\frac{1}{1+exp(-(w^{(m)T}x+b))} \\end{matrix} \\\\ \\] \u8ba9\u6211\u4eec\u5b9a\u4e49\u7b80\u5316\u516c\u5f0f\u4ee5\u4fbf\u4e8e\u66f4\u597d\u5730\u8868\u8fbe\u590d\u6742\u7684\u7f51\u7edc\uff1a \\[ \\sigma(z) = \\begin{bmatrix} \\frac{1}{1+exp(z_{1})} \\\\ \\vdots \\\\ \\frac{1}{1+exp(z_{m})} \\end{bmatrix} \\\\ b = \\begin{bmatrix} b_{1} \\\\ \\vdots \\\\ b_{m} \\end{bmatrix} \\in \\mathbb{R}^{m} \\\\ W = \\begin{bmatrix} -\\;\\;w^{(1)T}\\;\\;- \\\\ \\cdots \\\\ -\\;\\;w^{(m)T}\\;\\;- \\end{bmatrix} \\in \\mathbb{R}^{m\\times n} \\\\ \\] \u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u7f29\u653e\u548c\u504f\u5dee\u7684\u8f93\u51fa\u5199\u6210\uff1a \\[ \\mathbf{z}=\\mathbf{W}\\mathbf{x}+\\mathbf{b} \\\\ \\] \u6fc0\u6d3b\u51fd\u6570 sigmoid \u53ef\u4ee5\u53d8\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a \\[ \\begin{bmatrix} a_{1} \\\\ \\vdots \\\\ a_{m} \\end{bmatrix} = \\sigma(\\mathbf{z}) = \\sigma(\\mathbf{W}\\mathbf{x}+\\mathbf{b}) \\\\ \\] \u90a3\u4e48\u8fd9\u4e9b\u6fc0\u6d3b\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6fc0\u6d3b\u770b\u4f5c\u662f\u4e00\u4e9b\u52a0\u6743\u7279\u5f81\u7ec4\u5408\u5b58\u5728\u7684\u6307\u6807\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6fc0\u6d3b\u7684\u7ec4\u5408\u6765\u6267\u884c\u5206\u7c7b\u4efb\u52a1\u3002 1.3 Feed-forward Computation \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\u6211\u4eec\u77e5\u9053\u4e00\u4e2a\u8f93\u5165\u5411\u91cf \\(x\\in \\mathbb{R}^{n}\\) \u53ef\u4ee5\u7ecf\u8fc7\u4e00\u5c42 \\(sigmoid\\) \u5355\u5143\u7684\u53d8\u6362\u5f97\u5230\u6fc0\u6d3b\u8f93\u51fa \\(a\\in \\mathbb{R}^{m}\\) \u3002\u4f46\u662f\u8fd9\u4e48\u505a\u7684\u76f4\u89c9\u662f\u4ec0\u4e48\u5462\uff1f\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a NLP \u4e2d\u7684\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u95ee\u9898\u4f5c\u4e3a\u4f8b\u5b50\uff1a \\[ Museums\\;in\\;Paris \\;are\\;amazing \\\\ \\] \u8fd9\u91cc\u6211\u4eec\u60f3\u5224\u65ad\u4e2d\u5fc3\u8bcd \\(Paris\\) \u662f\u4e0d\u662f\u4ee5\u547d\u540d\u5b9e\u4f53\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5f88\u53ef\u80fd\u4e0d\u4ec5\u60f3\u8981\u6355\u6349\u7a97\u53e3\u4e2d\u5355\u8bcd\u7684\u5355\u8bcd\u5411\u91cf\uff0c\u8fd8\u60f3\u8981\u6355\u6349\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e9b\u5176\u4ed6\u4ea4\u4e92\uff0c\u4ee5\u4fbf\u8fdb\u884c\u5206\u7c7b\u3002\u4f8b\u5982\uff0c\u53ef\u80fd\u53ea\u6709 \\(Museums\\) \u662f\u7b2c\u4e00\u4e2a\u5355\u8bcd\u548c \\(in\\) \u662f\u7b2c\u4e8c\u4e2a\u5355\u8bcd\u7684\u65f6\u5019\uff0c \\(Paris\\) \u624d\u662f\u547d\u540d\u5b9e\u4f53\u3002\u8fd9\u6837\u7684\u975e\u7ebf\u6027\u51b3\u7b56\u901a\u5e38\u4e0d\u80fd\u88ab\u76f4\u63a5\u63d0\u4f9b\u7ed9Softmax\u51fd\u6570\u7684\u8f93\u5165\u6355\u83b7\uff0c\u800c\u662f\u9700\u8981\u7b2c1.2\u8282\u4e2d\u8ba8\u8bba\u7684\u4e2d\u95f4\u5c42\u8fdb\u884c\u8bc4\u5206\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u77e9\u9635 \\(\\mathbf{U} \\in \\mathbb{R}^{m \\times 1}\\) \u4e0e\u6fc0\u6d3b\u8f93\u51fa\u8ba1\u7b97\u5f97\u5230\u672a\u5f52\u4e00\u5316\u7684\u5f97\u5206\u7528\u4e8e\u5206\u7c7b\u4efb\u52a1\uff1a \\[ s=\\mathbf{U}^{T}a=\\mathbf{U}^{T}f(Wx+b) \\] \u5176\u4e2d \\(f\\) \u662f\u6fc0\u6d3b\u51fd\u6570\uff08\u4f8b\u5982 sigmoid \u51fd\u6570\uff09\u3002 \u7ef4\u5ea6\u5206\u6790 \uff1a\u5982\u679c\u6211\u4eec\u4f7f\u7528 4 \u7ef4\u7684\u8bcd\u5411\u91cf\u6765\u8868\u793a\u6bcf\u4e2a\u5355\u8bcd\u5e76\u4f7f\u7528 5 \u4e2a\u8bcd\u7684\u7a97\u53e3\uff0c\u5219\u8f93\u5165\u662f \\(x\\in \\mathbb{R}^{20}\\) \u3002\u5982\u679c\u6211\u4eec\u5728\u9690\u85cf\u5c42\u4f7f\u7528 8 \u4e2a sigmoid \u5355\u5143\u548c\u4ece\u6fc0\u6d3b\u51fd\u6570\u4e2d\u751f\u6210\u4e00\u4e2a\u5206\u6570\u8f93\u51fa\uff0c\u5176\u4e2d \\(W\\in \\mathbb{R}^{8\\times 20}\\) \uff0c \\(b\\in \\mathbb{R}^{8}\\) \uff0c \\(U\\in \\mathbb{R}^{8\\times 1}\\) \uff0c \\(s\\in \\mathbb{R}\\) \u3002 1.4 Maximum Margin Objective Function \u00b6 \u7c7b\u4f3c\u5f88\u591a\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u795e\u7ecf\u7f51\u7edc\u9700\u8981\u4e00\u4e2a\u4f18\u5316\u76ee\u6807\u51fd\u6570\uff0c\u4e00\u4e2a\u6211\u4eec\u60f3\u8981\u6700\u5c0f\u5316\u6216\u6700\u5927\u5316\u7684\u8bef\u5dee\u3002\u8fd9\u91cc\u6211\u4eec\u8ba8\u8bba\u4e00\u4e2a\u5e38\u7528\u7684\u8bef\u5dee\u5ea6\u91cf\u65b9\u6cd5\uff1a maximum margin objective \u6700\u5927\u95f4\u9694\u76ee\u6807\u51fd\u6570\u3002\u4f7f\u7528\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\u7684\u80cc\u540e\u7684\u601d\u60f3\u662f\u4fdd\u8bc1\u5bf9\u201c\u771f\u201d\u6807\u7b7e\u6570\u636e\u7684\u8ba1\u7b97\u5f97\u5206\u8981\u6bd4\u201c\u5047\u201d\u6807\u7b7e\u6570\u636e\u7684\u8ba1\u7b97\u5f97\u5206\u8981\u9ad8\u3002 \u56de\u5230\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u4ee4\u201c\u771f\u201d\u6807\u7b7e\u7a97\u53e3 \\(\\text{Museums in Paris are amazing}\\) \u7684\u8ba1\u7b97\u5f97\u5206\u4e3a s \uff0c\u4ee4\u201c\u5047\u201d\u6807\u7b7e\u7a97\u53e3 \\(\\text{Not all museums in Paris}\\) \u7684\u8ba1\u7b97\u5f97\u5206\u4e3a \\(s_{c}\\) \uff08\u4e0b\u6807 \\(c\\) \u8868\u793a\u8fd9\u4e2a\u8fd9\u4e2a\u7a97\u53e3 corrupt \uff09 \u7136\u540e\uff0c\u6211\u4eec\u5bf9\u76ee\u6807\u51fd\u6570\u6700\u5927\u5316 \\((s-s_{c})\\) \u6216\u8005\u6700\u5c0f\u5316 \\((s_{c}-s)\\) \u3002\u7136\u800c\uff0c\u6211\u4eec\u4fee\u6539\u76ee\u6807\u51fd\u6570\u6765\u4fdd\u8bc1\u8bef\u5dee\u4ec5\u5728 \\(s_{c} > s \\Rightarrow (s_{c}-s) > 0\\) \u624d\u8fdb\u884c\u8ba1\u7b97\u3002\u8fd9\u6837\u505a\u7684\u76f4\u89c9\u662f\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u201c\u6b63\u786e\u201d\u6570\u636e\u70b9\u7684\u5f97\u5206\u9ad8\u4e8e\u201c\u9519\u8bef\u201d\u6570\u636e\u70b9\uff0c\u5176\u4f59\u7684\u90fd\u4e0d\u91cd\u8981\u3002\u56e0\u6b64\uff0c\u5f53 \\(s_{c} > s\\) \u5219\u8bef\u5dee\u4e3a \\((s_{c}-s)\\) \uff0c\u5426\u5219\u4e3a 0 \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7684\u4f18\u5316\u7684\u76ee\u6807\u51fd\u6570\u73b0\u5728\u4e3a\uff1a \\[ minimize\\;J=max\\,(s_{c}-s,0) \\] \u7136\u800c\uff0c\u4e0a\u9762\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u662f\u6709\u98ce\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u4e0d\u80fd\u521b\u9020\u4e00\u4e2a\u5b89\u5168\u7684\u95f4\u9694\u3002\u6211\u4eec\u5e0c\u671b\u201c\u771f\u201d\u6570\u636e\u8981\u6bd4\u201c\u5047\u201d\u6570\u636e\u7684\u5f97\u5206\u5927\u4e8e\u67d0\u4e2a\u6b63\u7684\u95f4\u9694 \\(\\Delta\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u60f3\u8981\u8bef\u5dee\u5728 \\((s-s_{c} < \\Delta)\\) \u5c31\u5f00\u59cb\u8ba1\u7b97\uff0c\u800c\u4e0d\u662f\u5f53 \\((s-s_{c} < 0)\\) \u65f6\u5c31\u8ba1\u7b97\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4fee\u6539\u4f18\u5316\u76ee\u6807\u51fd\u6570\u4e3a\uff1a \\[ minimize\\;J=max\\,(\\Delta+s_{c}-s,0) \\] \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u95f4\u9694\u7f29\u653e\u4f7f\u5f97 \\(\\Delta=1\\) \uff0c\u8ba9\u5176\u4ed6\u53c2\u6570\u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u8fdb\u884c\u8c03\u6574\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u6a21\u578b\u7684\u8868\u73b0\u3002\u5982\u679c\u60f3\u66f4\u591a\u5730\u4e86\u89e3\u8fd9\u65b9\u9762\uff0c\u53ef\u4ee5\u53bb\u8bfb\u4e00\u4e0b \\(SVM\\) \u4e2d\u7684\u51fd\u6570\u95f4\u9694\u548c\u51e0\u4f55\u95f4\u9694\u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u3002\u6700\u540e\uff0c\u6211\u4eec\u5b9a\u4e49\u5728\u6240\u6709\u8bad\u7ec3\u7a97\u53e3\u4e0a\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u4e3a\uff1a \\[ minimize\\;J=max\\,(1+s_{c}-s,0) \\] \u6309\u7167\u4e0a\u9762\u7684\u516c\u5f0f\u6709\uff0c \\(s_{c}=\\mathbf{U}^{T}f(Wx_{c}+b)\\) \u548c \\(s=\\mathbf{U}^{T}f(Wx+b)\\) \u3002 \u6700\u5927\u8fb9\u9645\u76ee\u6807\u51fd\u6570\u901a\u5e38\u4e0e\u652f\u6301\u5411\u91cf\u673a\u4e00\u8d77\u4f7f\u7528 1.5 Training with Backpropagation \u2013 Elemental \u00b6 \u5728\u8fd9\u90e8\u5206\u6211\u4eec\u8ba8\u8bba\u5f531.4\u8282\u4e2d\u8ba8\u8bba\u7684\u635f\u5931\u51fd\u6570 \\(J\\) \u4e3a\u6b63\u65f6\uff0c\u6a21\u578b\u4e2d\u4e0d\u540c\u53c2\u6570\u65f6\u662f\u5982\u4f55\u8bad\u7ec3\u7684\u3002\u5982\u679c\u635f\u5931\u4e3a 0 \u65f6\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u518d\u66f4\u65b0\u53c2\u6570\u3002\u6211\u4eec\u4e00\u822c\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\uff08\u6216\u8005\u50cf SGD \u8fd9\u6837\u7684\u53d8\u4f53\uff09\u6765\u66f4\u65b0\u53c2\u6570\uff0c\u6240\u4ee5\u8981\u77e5\u9053\u5728\u66f4\u65b0\u516c\u5f0f\u4e2d\u9700\u8981\u7684\u4efb\u610f\u53c2\u6570\u7684\u68af\u5ea6\u4fe1\u606f\uff1a \\[ \\theta^{(t+1)}=\\theta^{(t)}-\\alpha\\nabla_{\\theta^{(t)}}J \\] \u53cd\u5411\u4f20\u64ad\u662f\u4e00\u79cd\u5229\u7528\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u6765\u8ba1\u7b97\u6a21\u578b\u4e0a\u4efb\u610f\u53c2\u6570\u7684\u635f\u5931\u68af\u5ea6\u7684\u65b9\u6cd5\u3002\u4e3a\u4e86\u66f4\u8fdb\u4e00\u6b65\u7406\u89e3\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u5148\u770b\u4e0b\u56fe\u4e2d\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u7f51\u7edc \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u53ea\u6709\u5355\u4e2a\u9690\u85cf\u5c42\u548c\u5355\u4e2a\u8f93\u51fa\u5355\u5143\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5148\u5efa\u7acb\u4e00\u4e9b\u7b26\u53f7\u5b9a\u4e49\uff1a \\(x_{i}\\) \u662f\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165 \\(s\\) \u662f\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa \u6bcf\u5c42\uff08\u5305\u62ec\u8f93\u5165\u548c\u8f93\u51fa\u5c42\uff09\u7684\u795e\u7ecf\u5143\u90fd\u63a5\u6536\u4e00\u4e2a\u8f93\u5165\u548c\u751f\u6210\u4e00\u4e2a\u8f93\u51fa\u3002\u7b2c \\(k\\) \u5c42\u7684\u7b2c \\(j\\) \u4e2a\u795e\u7ecf\u5143\u63a5\u6536\u6807\u91cf\u8f93\u5165 \\(z_{j}^{(k)}\\) \u548c\u751f\u6210\u4e00\u4e2a\u6807\u91cf\u6fc0\u6d3b\u8f93\u51fa \\(a_{j}^{(k)}\\) \u6211\u4eec\u628a \\(z_{j}^{(k)}\\) \u8ba1\u7b97\u51fa\u7684\u53cd\u5411\u4f20\u64ad\u8bef\u5dee\u5b9a\u4e49\u4e3a \\(\\delta_{j}^{(k)}\\) \u7b2c \\(1\\) \u5c42\u662f\u8f93\u5165\u5c42\uff0c\u800c\u4e0d\u662f\u7b2c \\(1\\) \u4e2a\u9690\u85cf\u5c42\u3002\u5bf9\u8f93\u5165\u5c42\u800c\u8a00\uff0c \\(x_{j}^{(k)}=z_{j}^{(k)}=a_{j}^{(k)}\\) \\(W^{(k)}\\) \u662f\u5c06\u7b2c k \u5c42\u7684\u8f93\u51fa\u6620\u5c04\u5230\u7b2c \\(k+1\\) \u5c42\u7684\u8f93\u5165\u7684\u8f6c\u79fb\u77e9\u9635\uff0c\u56e0\u6b64\u5c06\u8fd9\u4e2a\u65b0\u7684\u7b26\u53f7\u7528\u5728 \\(Section\\;1.3\\) \u4e2d\u7684\u4f8b\u5b50 \\(W^{(1)}=W\\) \u548c \\(W^{(2)}=U\\) \u3002 \u73b0\u5728\u5f00\u59cb\u53cd\u5411\u4f20\u64ad \uff1a\u5047\u8bbe\u635f\u5931\u51fd\u6570 \\(J=(1+s_{c}-s)\\) \u4e3a\u6b63\u503c\uff0c\u6211\u4eec\u60f3\u66f4\u65b0\u53c2\u6570 \\(W_{14}^{(1)}\\) \uff0c\u6211\u4eec\u770b\u5230 \\(W_{14}^{(1)}\\) \u53ea\u53c2\u4e0e\u4e86 \\(z_{1}^{(2)}\\) \u548c \\(a_{1}^{(2)}\\) \u7684\u8ba1\u7b97\u3002\u8fd9\u70b9\u5bf9\u4e8e\u7406\u89e3\u53cd\u5411\u4f20\u64ad\u662f\u975e\u5e38\u91cd\u8981\u7684\u2014\u2014 \u53cd\u5411\u4f20\u64ad\u7684\u68af\u5ea6\u53ea\u53d7\u5b83\u4eec\u6240\u8d21\u732e\u7684\u503c\u7684\u5f71\u54cd \u3002 \\(a_{1}^{(2)}\\) \u5728\u968f\u540e\u7684\u524d\u5411\u8ba1\u7b97\u4e2d\u548c \\(W_{1}^{(2)}\\) \u76f8\u4e58\u8ba1\u7b97\u5f97\u5206\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u6700\u5927\u95f4\u9694\u635f\u5931\u770b\u5230\uff1a $$ \\frac{\\partial J}{\\partial s}=-\\frac{\\partial J}{\\partial s_{c}}=-1 \\ $$ \u4e3a\u4e86\u7b80\u5316\u6211\u4eec\u53ea\u5206\u6790 \\(\\frac{\\partial s}{\\partial W_{ij}^{(1)}}\\) \u3002\u6240\u4ee5\uff0c \\[ \\begin{eqnarray} \\frac{\\partial s}{\\partial W_{ij}^{(1)}} &=& \\frac{\\partial W^{(2)}a^{(2)}}{\\partial W_{ij}^{(1)}}=\\frac{\\partial W_{i}^{(2)}a_{i}^{(2)}}{\\partial W_{ij}^{(1)}}=W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ \\Rightarrow W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial W_{ij}^{(1)}}&=& W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial z_{i}^{(2)}}\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}\\frac{f(z_{i}^{(2)})}{\\partial z_{i}^{(2)}}\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial}{\\partial W_{ij}^{(1)}}(b_{i}^{(1)}+a_{1}^{(1)}W_{i1}^{(1)}+a_{2}^{(1)}W_{i2}^{(1)}+a_{3}^{(1)}W_{i3}^{(1)}+a_{4}^{(1)}W_{i4}^{(1)}) \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial}{\\partial W_{ij}^{(1)}}(b_{i}^{(1)}+\\sum_{k}a_{k}^{(1)}W_{ik}^{(1)}) \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})a_{j}^{(1)} \\nonumber \\\\ &=& \\delta_{i}^{(2)}\\cdot a_{j}^{(1)} \\nonumber \\end{eqnarray} \\\\ \\] \u5176\u4e2d\uff0c \\(a^{(1)}\\) \u6307\u8f93\u5165\u5c42\u7684\u8f93\u5165\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u68af\u5ea6\u8ba1\u7b97\u6700\u540e\u53ef\u4ee5\u7b80\u5316\u4e3a \\(\\delta_{i}^{(2)}\\cdot a_{j}^{(1)}\\) \uff0c\u5176\u4e2d \\(\\delta_{i}^{(2)}\\) \u672c\u8d28\u4e0a\u662f\u7b2c \\(2\\) \u5c42\u4e2d\u7b2c \\(i\\) \u4e2a\u795e\u7ecf\u5143\u53cd\u5411\u4f20\u64ad\u7684\u8bef\u5dee\u3002 \\(a_{j}^{(1)}\\) \u4e0e \\(W_{ij}\\) \u76f8\u4e58\u7684\u7ed3\u679c\uff0c\u8f93\u5165\u7b2c \\(2\\) \u5c42\u4e2d\u7b2c \\(i\\) \u4e2a\u795e\u7ecf\u5143\u4e2d\u3002 \u6211\u4eec\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff0c\u8ba9\u6211\u4eec\u4ece\u201c\u8bef\u5dee\u5171\u4eab/\u5206\u914d\u201d\u7684\u6765\u9610\u91ca\u4e00\u4e0b\u53cd\u5411\u4f20\u64ad\uff0c\u73b0\u5728\u6211\u4eec\u8981\u66f4\u65b0 \\(W_{14}^{(1)}\\) \uff1a \u6211\u4eec\u4ece \\(a_{1}^{(3)}\\) \u7684 1 \u7684\u8bef\u5dee\u4fe1\u53f7\u5f00\u59cb\u53cd\u5411\u4f20\u64ad\u3002 \u7136\u540e\u6211\u4eec\u628a\u8bef\u5dee\u4e0e\u5c06 \\(z_{1}^{(3)}\\) \u6620\u5c04\u5230 \\(a_{1}^{(3)}\\) \u7684\u795e\u7ecf\u5143\u7684\u5c40\u90e8\u68af\u5ea6\u76f8\u4e58\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u68af\u5ea6\u6b63\u597d\u7b49\u4e8e 1 \uff0c\u5219\u8bef\u5dee\u4ecd\u7136\u4e3a 1 \u3002\u6240\u4ee5\u6709 \\(\\delta_{1}^{(3)}=1\\) \u3002 \u8fd9\u91cc\u8bef\u5dee\u4fe1\u53f7 1 \u5df2\u7ecf\u5230\u8fbe \\(z_{1}^{(3)}\\) \u3002\u6211\u4eec\u73b0\u5728\u9700\u8981\u5206\u914d\u8bef\u5dee\u4fe1\u53f7\u4f7f\u5f97\u8bef\u5dee\u7684\u201c\u516c\u5e73\u5171\u4eab\u201d\u5230\u8fbe \\(a_{1}^{(2)}\\) \u3002 \u73b0\u5728\u5728 \\(a_{1}^{(2)}\\) \u7684\u8bef\u5dee\u4e3a \\(\\delta_{1}^{(3)}\\times W_{1}^{(2)}=W_{1}^{(2)}\\) \uff08\u5728 \\(z_{1}^{(3)}\\) \u7684\u8bef\u5dee\u4fe1\u53f7\u4e3a \\(\\delta_{1}^{(3)}\\) \uff09\u3002\u56e0\u6b64\u5728 \\(a_{1}^{(2)}\\) \u7684\u8bef\u5dee\u4e3a \\(W_{1}^{(2)}\\) \u3002 \u4e0e\u7b2c 2 \u6b65\u7684\u505a\u6cd5\u76f8\u540c\uff0c\u6211\u4eec\u5728\u5c06 \\(z_{1}^{(2)}\\) \u6620\u5c04\u5230 \\(a_{1}^{(2)}\\) \u7684\u795e\u7ecf\u5143\u4e0a\u79fb\u52a8\u8bef\u5dee\uff0c\u5c06 \\(a_{1}^{(2)}\\) \u4e0e\u5c40\u90e8\u68af\u5ea6\u76f8\u4e58\uff0c\u8fd9\u91cc\u7684\u5c40\u90e8\u68af\u5ea6\u4e3a \\(f'(z_{1}^{(2)})\\) \u3002 \u56e0\u6b64\u5728 \\(z_{1}^{(2)}\\) \u7684\u8bef\u5dee\u662f \\(f'(z_{1}^{(2)})W_{1}^{(2)}\\) \uff0c\u6211\u4eec\u5c06\u5176\u5b9a\u4e49\u4e3a \\(\\delta_{1}^{(2)}\\) \u3002 \u6700\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u4e0a\u9762\u7684\u8bef\u5dee\u4e0e\u53c2\u4e0e\u524d\u5411\u8ba1\u7b97\u7684 \\(a_{4}^{(1)}\\) \u76f8\u4e58\uff0c\u628a\u8bef\u5dee\u7684\u201c\u8bef\u5dee\u5171\u4eab\u201d\u5206\u914d\u5230 \\(W_{14}^{(1)}\\) \u3002 \u6240\u4ee5\uff0c\u5bf9\u4e8e \\(W_{14}^{(1)}\\) \u7684\u68af\u5ea6\u635f\u5931\u53ef\u4ee5\u8ba1\u7b97\u4e3a \\(a_{4}^{(1)}f'(z_{1}^{(2)})W_{1}^{(2)}\\) \u3002 \u6ce8\u610f\u6211\u4eec\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5f97\u5230\u7684\u7ed3\u679c\u662f\u548c\u4e4b\u524d\u5fae\u5206\u7684\u65b9\u6cd5\u7684\u7ed3\u679c\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002\u56e0\u6b64\uff0c\u8ba1\u7b97\u7f51\u7edc\u4e2d\u7684\u76f8\u5e94\u53c2\u6570\u7684\u68af\u5ea6\u8bef\u5dee\u65e2\u53ef\u4ee5\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8bef\u5dee\u5171\u4eab\u548c\u5206\u914d\u7684\u65b9\u6cd5\u2014\u2014\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u80fd\u5f97\u5230\u76f8\u540c\u7ed3\u679c\uff0c\u4f46\u662f\u591a\u79cd\u65b9\u5f0f\u8003\u8651\u5b83\u4eec\u53ef\u80fd\u662f\u6709\u5e2e\u52a9\u7684\u3002 \u504f\u7f6e\u66f4\u65b0 \uff1a\u504f\u7f6e\u9879\uff08\u4f8b\u5982 \\(b_{1}^{(1)}\\) \uff09\u548c\u5176\u4ed6\u6743\u503c\u5728\u6570\u5b66\u5f62\u5f0f\u662f\u7b49\u4ef7\u7684\uff0c\u53ea\u662f\u5728\u8ba1\u7b97\u4e0b\u4e00\u5c42\u795e\u7ecf \\(z_{1}^{(2)}\\) \u5143\u8f93\u5165\u65f6\u76f8\u4e58\u7684\u503c\u662f\u5e38\u91cf 1 \u3002\u56e0\u6b64\u5728\u7b2c k \u5c42\u7684\u7b2c i \u4e2a\u795e\u7ecf\u5143\u7684\u504f\u7f6e\u7684\u68af\u5ea6\u65f6 \\(\\delta_{i}^{(k)}\\) \u3002\u4f8b\u5982\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u66f4\u65b0\u7684\u662f \\(b_{1}^{(1)}\\) \u800c\u4e0d\u662f \\(W_{14}^{(1)}\\) \uff0c\u90a3\u4e48\u8fd9\u4e2a\u68af\u5ea6\u4e3a \\(f'(z_{1}^{(2)})W_{1}^{(2)}\\) \u3002 \u4ece \\(\\delta^{(k)}\\) \u5230 \\(\\delta^{(k-1)}\\) \u53cd\u5411\u4f20\u64ad\u7684\u4e00\u822c\u6b65\u9aa4\uff1a \u6211\u4eec\u6709\u4ece \\(z_{i}^{(k)}\\) \u5411\u540e\u4f20\u64ad\u7684\u8bef\u5dee \\(\\delta_{i}^{(k)}\\) \uff0c\u5982\u4e0b\u56fe\u6240\u793a \u6211\u4eec\u901a\u8fc7\u628a \\(\\delta_{i}^{(k)}\\) \u4e0e\u8def\u5f84\u4e0a\u7684\u6743\u503c \\(W_{ij}^{(k-1)}\\) \u76f8\u4e58\uff0c\u5c06\u8fd9\u4e2a\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u5230 \\(a_{j}^{(k-1)}\\) \u3002 \u56e0\u6b64\u5728 \\(a_{j}^{(k-1)}\\) \u63a5\u6536\u7684\u8bef\u5dee\u662f \\(\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002 \u7136\u800c\uff0c \\(a_{j}^{(k-1)}\\) \u5728\u524d\u5411\u8ba1\u7b97\u53ef\u80fd\u51fa\u4e0b\u56fe\u7684\u60c5\u51b5\uff0c\u4f1a\u53c2\u4e0e\u4e0b\u4e00\u5c42\u4e2d\u7684\u591a\u4e2a\u795e\u7ecf\u5143\u7684\u8ba1\u7b97\u3002\u90a3\u4e48\u7b2c k \u5c42\u7684\u7b2c \\(m\\) \u4e2a\u795e\u7ecf\u5143\u7684\u8bef\u5dee\u4e5f\u8981\u4f7f\u7528\u4e0a\u4e00\u6b65\u65b9\u6cd5\u5c06\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u5230 \\(a_{j}^{(k-1)}\\) \u4e0a\u3002 \u56e0\u6b64\u73b0\u5728\u5728 \\(a_{j}^{(k-1)}\\) \u63a5\u6536\u7684\u8bef\u5dee\u662f \\(\\delta_{i}^{(k)}W_{ij}^{(k-1)}+\\delta_{m}^{(k)}W_{mj}^{(k-1)}\\) \u3002 \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u9762\u8bef\u5dee\u548c\u7b80\u5316\u4e3a \\(\\sum_{i}\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002 \u73b0\u5728\u6211\u4eec\u6709\u5728 \\(a_{j}^{(k-1)}\\) \u6b63\u786e\u7684\u8bef\u5dee\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5c40\u90e8\u68af\u5ea6 \\(f'(z_{j}^{(k-1)})\\) \u76f8\u4e58\uff0c\u628a\u8bef\u5dee\u4fe1\u606f\u53cd\u5411\u4f20\u5230\u7b2c \\(k-1\\) \u5c42\u7684\u7b2c \\(j\\) \u4e2a\u795e\u7ecf\u5143\u4e0a\u3002 \u56e0\u6b64\u5230\u8fbe \\(z_{j}^{(k-1)}\\) \u7684\u8bef\u5dee\u4e3a \\(f'(z_{j}^{(k-1)})\\sum_{i}\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002 1.6 Training with Backpropagation \u2013 Vectorized \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u5bf9\u6a21\u578b\u4e2d\u7684\u7ed9\u5b9a\u53c2\u6570\u8ba1\u7b97\u68af\u5ea6\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u4f1a\u4e00\u822c\u6cdb\u5316\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4e00\u6b21\u8fc7\u66f4\u65b0\u6743\u503c\u77e9\u9635\u548c\u504f\u7f6e\u5411\u91cf\u3002\u6ce8\u610f\u8fd9\u53ea\u662f\u5bf9\u4e0a\u9762\u6a21\u578b\u7684\u7b80\u5355\u5730\u6269\u5c55\uff0c\u8fd9\u5c06\u6709\u52a9\u4e8e\u66f4\u597d\u7406\u89e3\u5728\u77e9\u9635-\u5411\u91cf\u7ea7\u522b\u4e0a\u8fdb\u884c\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u7684\u65b9\u6cd5\u3002 \u5bf9\u66f4\u5b9a\u7684\u53c2\u6570 \\(W_{ij}^{(k)}\\) \uff0c\u6211\u4eec\u77e5\u9053\u5b83\u7684\u8bef\u5dee\u68af\u5ea6\u662f \\(\\delta_{j}^{(k+1)}\\cdot a_{j}^{(k)}\\) \u3002\u5176\u4e2d \\(W^{(k)}\\) \u662f\u5c06 \\(a^{(k)}\\) \u6620\u5c04\u5230 \\(z^{(k+1)}\\) \u7684\u77e9\u9635\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u6574\u4e2a\u77e9\u9635 \\(W^{(k)}\\) \u7684\u68af\u5ea6\u8bef\u5dee\u4e3a\uff1a \\[ \\nabla_{W^{(k)}} = \\begin{bmatrix} \\delta_{1}^{(k+1)}a_{1}^{(k)} & \\delta_{1}^{(k+1)}a_{2}^{(k)} & \\cdots \\\\ \\delta_{2}^{(k+1)}a_{1}^{(k)} & \\delta_{2}^{(k+1)}a_{2}^{(k)} & \\cdots \\\\ \\vdots & \\vdots & \\ddots \\\\ \\end{bmatrix} = \\delta^{(k+1)}a^{(k)T} \\\\ \\] \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a\u77e9\u9635\u5f62\u5f0f\u7684\u68af\u5ea6\u5199\u4e3a\u5728\u77e9\u9635\u4e2d\u7684\u53cd\u5411\u4f20\u64ad\u7684\u8bef\u5dee\u5411\u91cf\u548c\u524d\u5411\u6fc0\u6d3b\u8f93\u51fa\u7684**\u5916\u79ef**\u3002 \u73b0\u5728\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u80fd\u591f\u8ba1\u7b97\u8bef\u5dee\u5411\u91cf \\(\\delta^{(k+1)}\\) \u3002\u6211\u4eec\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u6709\uff0c \\(\\delta_{i}^{(k)}=f'(z_{j}^{(k)})\\sum_{i}\\delta_{i}^{(k+1)}W_{ij}^{(k)}\\) \u3002\u8fd9\u53ef\u4ee5\u7b80\u5355\u5730\u6539\u5199\u4e3a\u77e9\u9635\u7684\u5f62\u5f0f\uff1a \\[ \\delta_{i}^{(k)}=f'(z^{(k)})\\circ (W^{(k)T}\\delta^{(k+1)}) \\\\ \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d \\(\\circ\\) \u8fd0\u7b97\u7b26\u662f\u8868\u793a\u5411\u91cf\u4e4b\u95f4\u5bf9\u5e94\u5143\u7d20\u7684\u76f8\u4e58\uff08 \\(\\mathbb{R}^{N}\\times \\mathbb{R}^{N}\\rightarrow \\mathbb{R}^{N}\\) \uff09\u3002 \u8ba1\u7b97\u6548\u7387 \uff1a\u5728\u63a2\u7d22\u4e86 element-wise \u7684\u66f4\u65b0\u548c vector-wise \u7684\u66f4\u65b0\u4e4b\u540e\uff0c\u5fc5\u987b\u8ba4\u8bc6\u5230\u5728\u79d1\u5b66\u8ba1\u7b97\u73af\u5883\u4e2d\uff0c\u5982 MATLAB \u6216 Python\uff08\u4f7f\u7528 Numpy / Scipy \u5e93\uff09\uff0c\u5411\u91cf\u5316\u8fd0\u7b97\u7684\u8ba1\u7b97\u6548\u7387\u662f\u975e\u5e38\u9ad8\u7684\u3002\u56e0\u6b64\u5728\u5b9e\u9645\u4e2d\u5e94\u8be5\u4f7f\u7528\u5411\u91cf\u5316\u8fd0\u7b97\u3002\u6b64\u5916\uff0c\u6211\u4eec\u4e5f\u8981\u51cf\u5c11\u53cd\u5411\u4f20\u64ad\u4e2d\u7684\u591a\u4f59\u7684\u8ba1\u7b97\u2014\u2014\u4f8b\u5982\uff0c\u6ce8\u610f\u5230 \\(\\delta^{(k)}\\) \u662f\u76f4\u63a5\u4f9d\u8d56\u5728 \\(\\delta^{(k+1)}\\) \u4e0a\u3002\u6240\u4ee5\u6211\u4eec\u8981\u4fdd\u8bc1\u4f7f\u7528 \\(\\delta^{(k+1)}\\) \u66f4\u65b0 \\(W^{(k)}\\) \u65f6\uff0c\u8981\u4fdd\u5b58 \\(\\delta^{(k+1)}\\) \u7528\u4e8e\u540e\u9762 \\(\\delta^{(k)}\\) \u7684\u8ba1\u7b97-\u7136\u540e\u8ba1\u7b97 \\((k-1)...(1)\\) \u5c42\u7684\u65f6\u5019\u91cd\u590d\u4e0a\u8ff0\u7684\u6b65\u9aa4\u3002\u8fd9\u6837\u7684\u9012\u5f52\u8fc7\u7a0b\u662f\u4f7f\u5f97\u53cd\u5411\u4f20\u64ad\u6210\u4e3a\u8ba1\u7b97\u4e0a\u53ef\u8d1f\u62c5\u7684\u8fc7\u7a0b\u3002 2 Neural Networks: Tips and Tricks \u00b6 2.1 Gradient Check \u00b6 \u5728\u4e0a\u4e00\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u5730\u8ba8\u8bba\u4e86\u5982\u4f55\u7528\u57fa\u4e8e\u5fae\u79ef\u5206\u7684\u65b9\u6cd5\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u53c2\u6570\u7684\u8bef\u5dee\u68af\u5ea6\uff0f\u66f4\u65b0\u3002\u8fd9\u91cc\u6211\u4eec\u4ecb\u7ecd\u4e00\u79cd\u7528\u6570\u503c\u8fd1\u4f3c\u8fd9\u4e9b\u68af\u5ea6\u7684\u65b9\u6cd5\u2014\u2014\u867d\u7136\u5728\u8ba1\u7b97\u4e0a\u7684\u4f4e\u6548\u4e0d\u80fd\u76f4\u63a5\u7528\u4e8e\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u975e\u5e38\u51c6\u786e\u5730\u4f30\u8ba1\u4efb\u4f55\u53c2\u6570\u7684\u5bfc\u6570\uff1b\u56e0\u6b64\uff0c\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u5bfc\u6570\u7684\u6b63\u786e\u6027\u7684\u6709\u7528\u7684\u68c0\u67e5\u3002\u7ed9\u5b9a\u4e00\u4e2a\u6a21\u578b\u7684\u53c2\u6570\u5411\u91cf \\(\\theta\\) \u548c\u635f\u5931\u51fd\u6570 \\(J\\) \uff0c\u56f4\u7ed5 \\(\\theta_{i}\\) \u7684\u6570\u503c\u68af\u5ea6\u7531 central difference formula \u5f97\u51fa\uff1a \\[ f'(\\theta)\\approx \\frac{J(\\theta^{(i+)})-\\theta^{(i-)})}{2\\epsilon} \\\\ \\] \u5176\u4e2d \\(\\epsilon\\) \u662f\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\uff08\u4e00\u822c\u7ea6\u4e3a \\(1e^{-5}\\) \uff09\u3002\u5f53\u6211\u4eec\u4f7f\u7528 \\(+\\epsilon\\) \u6270\u52a8\u53c2\u6570 \\(\\theta\\) \u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u65f6\uff0c\u5c31\u53ef\u4ee5\u5728\u524d\u5411\u4f20\u64ad\u4e0a\u8ba1\u7b97\u8bef\u5dee \\(J(\\theta^{(i+)})\\) \u3002\u76f8\u4f3c\u5730\uff0c\u5f53\u6211\u4eec\u4f7f\u7528 \\(-\\epsilon\\) \u6270\u52a8\u53c2\u6570 \\(\\theta\\) \u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u65f6\uff0c\u5c31\u53ef\u4ee5\u5728\u524d\u5411\u4f20\u64ad\u4e0a\u8ba1\u7b97\u8bef\u5dee \\(J(\\theta^{(i-)})\\) \u3002\u56e0\u6b64\uff0c\u8ba1\u7b97\u4e24\u6b21\u524d\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u53ef\u4ee5\u4f30\u8ba1\u5728\u6a21\u578b\u4e2d\u4efb\u610f\u7ed9\u5b9a\u53c2\u6570\u7684\u68af\u5ea6\u3002\u6211\u4eec\u6ce8\u610f\u5230\u6570\u503c\u68af\u5ea6\u7684\u5b9a\u4e49\u548c\u5bfc\u6570\u7684\u5b9a\u4e49\u5f88\u76f8\u4f3c\uff0c\u5176\u4e2d\uff0c\u5728\u6807\u91cf\u7684\u60c5\u51b5\u4e0b\uff1a \\[ f'(\\theta)\\approx \\frac{f(x+\\epsilon)-f(x)}{\\epsilon} \\\\ \\] \u5f53\u7136\uff0c\u8fd8\u662f\u6709\u4e00\u70b9\u4e0d\u540c\u2014\u2014\u4e0a\u9762\u7684\u5b9a\u4e49\u4ec5\u4ec5\u5728\u6b63\u5411\u6270\u52a8 \\(x\\) \u8ba1\u7b97\u68af\u5ea6\u3002\u867d\u7136\u662f\u53ef\u4ee5\u7528\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u6570\u503c\u68af\u5ea6\uff0c\u4f46\u5728\u5b9e\u9645\u4e2d\u4f7f\u7528 central difference formula \u5e38\u5e38\u53ef\u4ee5\u66f4\u51c6\u786e\u548c\u66f4\u7a33\u5b9a\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u4e24\u4e2a\u65b9\u5411\u90fd\u5bf9\u53c2\u6570\u6270\u52a8\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u903c\u8fd1\u4e00\u4e2a\u70b9\u9644\u8fd1\u7684\u5bfc\u6570/\u659c\u7387\uff0c\u6211\u4eec\u9700\u8981\u5728\u8be5\u70b9\u7684\u5de6\u8fb9\u548c\u53f3\u8fb9\u68c0\u67e5\u51fd\u6570 \\(f'\\) \u7684\u884c\u4e3a\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6cf0\u52d2\u5b9a\u7406\u6765\u8868\u793a central difference formula \u6709 \\(\\epsilon^{2}\\) \u6bd4\u4f8b\u8bef\u5dee\uff0c\u8fd9\u76f8\u5f53\u5c0f\uff0c\u800c\u5bfc\u6570\u5b9a\u4e49\u66f4\u5bb9\u6613\u51fa\u9519\u3002 \u73b0\u5728\u4f60\u53ef\u80fd\u4f1a\u4ea7\u751f\u7591\u95ee\uff0c\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u8fd9\u4e48\u51c6\u786e\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u7528\u5b83\u800c\u4e0d\u662f\u7528\u53cd\u5411\u4f20\u64ad\u6765\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u7684\u68af\u5ea6\uff1f\u8fd9\u662f\u56e0\u4e3a\u6548\u7387\u7684\u95ee\u9898\u2014\u2014\u6bcf\u5f53\u6211\u4eec\u60f3\u8ba1\u7b97\u4e00\u4e2a\u5143\u7d20\u7684\u68af\u5ea6\uff0c\u9700\u8981\u5728\u7f51\u7edc\u4e2d\u505a\u4e24\u6b21\u524d\u5411\u4f20\u64ad\uff0c\u8fd9\u6837\u662f\u5f88\u8017\u8d39\u8ba1\u7b97\u8d44\u6e90\u7684\u3002\u518d\u8005\uff0c\u5f88\u591a\u5927\u89c4\u6a21\u7684\u795e\u7ecf\u7f51\u7edc\u542b\u6709\u51e0\u767e\u4e07\u7684\u53c2\u6570\uff0c\u5bf9\u6bcf\u4e2a\u53c2\u6570\u90fd\u8ba1\u7b97\u4e24\u6b21\u660e\u663e\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u9009\u62e9\u3002\u540c\u65f6\u5728\u4f8b\u5982 SGD \u8fd9\u6837\u7684\u4f18\u5316\u6280\u672f\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u6570\u5343\u6b21\u7684\u8fed\u4ee3\u6765\u8ba1\u7b97\u68af\u5ea6\uff0c\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\u5f88\u5feb\u4f1a\u53d8\u5f97\u96be\u4ee5\u5e94\u4ed8\u3002\u8fd9\u79cd\u4f4e\u6548\u6027\u662f\u6211\u4eec\u53ea\u4f7f\u7528\u68af\u5ea6\u68c0\u9a8c\u6765\u9a8c\u8bc1\u6211\u4eec\u7684\u5206\u6790\u68af\u5ea6\u7684\u6b63\u786e\u6027\u7684\u539f\u56e0\u3002\u68af\u5ea6\u68c0\u9a8c\u7684\u5b9e\u73b0\u5982\u4e0b\u6240\u793a\uff1a def eval_numerical_gradient ( f , x ): \"\"\" a naive implementation of numerical gradient of f at x - f should be a function that takes a single argument - x is the point (numpy array) to evaluate the gradient at \"\"\" f ( x ) = f ( x ) # evaluate function value at original point grad = np . zeros ( x . shape ) h = 0.00001 # iterate over all indexes in x it = np . nditer ( x , flags = [ 'multi_index' , op_flags = [ 'readwrite' ]) while not it . finished : # evaluate function at x+h ix = it . multi_index old_value = x [ ix ] x [ ix ] = old_value + h # increment by h fxh_left = f ( x ) # evaluate f(x + h) x [ ix ] = old_value - h # decrement by h fxh_right = f ( x ) # evaluate f(x - h) # restore to previous value (very important!) x [ ix ] = old_value # compute the partial derivative # the slope grad [ ix ] = ( fxh_left - fxh_right ) / ( 2 * h ) it . iternext () # step to next dimension return grad 2.2 Regularization \u00b6 \u548c\u5f88\u591a\u673a\u5668\u5b66\u4e60\u7684\u6a21\u578b\u4e00\u6837\uff0c\u795e\u7ecf\u7f51\u7edc\u5f88\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u8fd9\u4ee4\u5230\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u80fd\u83b7\u5f97\u8fd1\u4e4e\u5b8c\u7f8e\u7684\u8868\u73b0\uff0c\u4f46\u662f\u5374\u4e0d\u80fd\u6cdb\u5316\u5230\u6d4b\u8bd5\u96c6\u4e0a\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4e8e\u89e3\u51b3\u8fc7\u62df\u5408\uff08\u201c\u9ad8\u65b9\u5dee\u95ee\u9898\u201d\uff09\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 \\(L2\\) \u6b63\u5219\u5316\u3002\u6211\u4eec\u53ea\u9700\u8981\u5728\u635f\u5931\u51fd\u6570 \\(J\\) \u4e0a\u589e\u52a0\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u73b0\u5728\u7684\u635f\u5931\u51fd\u6570\u5982\u4e0b\uff1a \\[ J_{R}=J+\\lambda\\sum_{i=1}^{L}\\big|\\big|W^{(i)}\\big|\\big|_{F} \\\\ \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\big|\\big|W^{(i)}\\big|\\big|_{F}\\) \u662f\u77e9\u9635 \\(W^{(i)}\\) \uff08\u5728\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u7b2c \\(i\\) \u4e2a\u6743\u503c\u77e9\u9635\uff09\u7684 \\(Frobenius\\) \u8303\u6570, \\(\\lambda\\) \u662f\u8d85\u53c2\u6570\u63a7\u5236\u635f\u5931\u51fd\u6570\u4e2d\u7684\u6743\u503c\u7684\u5927\u5c0f\u3002 \u77e9\u9635 \\(U\\) \u7684 \\(Frobenius\\) \u8303\u6570\u7684\u5b9a\u4e49 \\(\\|U\\|_{F}=\\sqrt{\\sum_{i} \\sum_{l} U_{i l}^{2}}\\) \u5f53\u6211\u4eec\u5c1d\u8bd5\u53bb\u6700\u5c0f\u5316 \\(J_{R}\\) \uff0c\u6b63\u5219\u5316\u672c\u8d28\u4e0a\u5c31\u662f\u5f53\u4f18\u5316\u635f\u5931\u51fd\u6570\u7684\u65f6\u5019\uff0c\u60e9\u7f5a\u6570\u503c\u592a\u5927\u7684\u6743\u503c\uff08\u8ba9\u6743\u503c\u7684\u6570\u503c\u5206\u914d\u66f4\u52a0\u5747\u8861\uff0c\u9632\u6b62\u51fa\u73b0\u90e8\u5206\u6743\u503c\u7279\u522b\u5927\u7684\u60c5\u51b5\uff09\u3002\u7531\u4e8e \\(Frobenius\\) \u8303\u6570\u7684\u4e8c\u6b21\u7684\u6027\u8d28\uff08\u8ba1\u7b97\u77e9\u9635\u7684\u5143\u7d20\u7684\u5e73\u65b9\u548c\uff09\uff0c \\(L2\\) \u6b63\u5219\u9879\u6709\u6548\u5730\u964d\u4f4e\u4e86\u6a21\u578b\u7684\u7075\u6d3b\u6027\u548c\u56e0\u6b64\u51cf\u5c11\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u53ef\u80fd\u6027\u3002\u589e\u52a0\u8fd9\u6837\u4e00\u4e2a\u7ea6\u675f\u53ef\u4ee5**\u4f7f\u7528\u8d1d\u53f6\u65af\u6d3e\u7684\u601d\u60f3\u89e3\u91ca**\uff0c\u8fd9\u4e2a\u6b63\u5219\u9879\u662f\u5bf9\u6a21\u578b\u7684\u53c2\u6570\u52a0\u4e0a\u4e00\u4e2a**\u5148\u9a8c\u5206\u5e03**\uff0c\u4f18\u5316\u6743\u503c\u4f7f\u5176\u63a5\u8fd1\u4e8e 0\u2014\u2014\u6709\u591a\u63a5\u8fd1\u662f\u53d6\u51b3\u4e8e \\(\\lambda\\) \u7684\u503c\u3002\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684 \\(\\lambda\\) \u503c\u662f\u5f88\u91cd\u8981\u7684\uff0c\u5e76\u4e14\u9700\u8981\u901a\u8fc7\u8d85\u53c2\u6570\u8c03\u6574\u6765\u9009\u62e9\u3002 \\(\\lambda\\) \u7684\u503c\u592a\u5927\u4f1a\u4ee4\u5f88\u591a\u6743\u503c\u90fd\u63a5\u8fd1\u4e8e 0 \uff0c\u5219\u6a21\u578b\u5c31\u4e0d\u80fd\u5728\u8bad\u7ec3\u96c6\u4e0a\u5b66\u4e60\u5230\u6709\u610f\u4e49\u7684\u4e1c\u897f\uff0c\u7ecf\u5e38\u5728\u8bad\u7ec3\u3001\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8868\u73b0\u90fd\u975e\u5e38\u5dee\u3002 \\(\\lambda\\) \u7684\u503c\u592a\u5c0f\uff0c\u4f1a\u8ba9\u6a21\u578b\u4ecd\u65e7\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u73b0\u8c61\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u504f\u7f6e\u9879\u4e0d\u4f1a\u88ab\u6b63\u5219\u5316\uff0c\u4e0d\u4f1a\u8ba1\u7b97\u5165\u635f\u5931\u9879\u4e2d\u2014\u2014\u5c1d\u8bd5\u53bb\u601d\u8003\u4e00\u4e0b\u4e3a\u4ec0\u4e48 \u4e3a\u4f55\u5728\u635f\u5931\u9879\u4e2d\u4e0d\u8ba1\u7b97\u504f\u7f6e\u9879\uff1f \u504f\u7f6e\u9879\u5728\u6a21\u578b\u4e2d\u4ec5\u4ec5\u662f\u504f\u79fb\u7684\u5173\u7cfb\uff0c\u4f7f\u7528\u5c11\u91cf\u7684\u6570\u636e\u5c31\u80fd\u62df\u5408\u5230\u8fd9\u9879\uff0c\u800c\u4e14\u4ece\u7ecf\u9a8c\u4e0a\u6765\u8bf4\uff0c\u504f\u7f6e\u503c\u7684\u5927\u5c0f\u5bf9\u6a21\u578b\u8868\u73b0\u6ca1\u6709\u5f88\u663e\u8457\u7684\u5f71\u54cd\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u6b63\u5219\u5316\u504f\u7f6e\u9879 \u6df1\u5ea6\u5b66\u4e60\u91cc\u9762\u7684\u504f\u7f6e\u4e3a\u4ec0\u4e48\u4e0d\u52a0\u6b63\u5219\uff1f \u4e0b\u9762\u6458\u5f55\u5df2\u6709\u7684\u4e09\u6761\u56de\u7b54 \u9996\u5148\u6b63\u5219\u5316\u4e3b\u8981\u662f\u4e3a\u4e86\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u800c\u8fc7\u62df\u5408\u4e00\u822c\u8868\u73b0\u4e3a\u6a21\u578b\u5bf9\u4e8e\u8f93\u5165\u7684\u5fae\u5c0f\u6539\u53d8\u4ea7\u751f\u4e86\u8f93\u51fa\u7684\u8f83\u5927\u5dee\u5f02\uff0c\u8fd9\u4e3b\u8981\u662f\u7531\u4e8e\u6709\u4e9b\u53c2\u6570w\u8fc7\u5927\u7684\u5173\u7cfb\uff0c\u901a\u8fc7\u5bf9||w||\u8fdb\u884c\u60e9\u7f5a\uff0c\u53ef\u4ee5\u7f13\u89e3\u8fd9\u79cd\u95ee\u9898\u3002\u800c\u5982\u679c\u5bf9||b||\u8fdb\u884c\u60e9\u7f5a\uff0c\u5176\u5b9e\u662f\u6ca1\u6709\u4f5c\u7528\u7684\uff0c\u56e0\u4e3a\u5728\u5bf9\u8f93\u51fa\u7ed3\u679c\u7684\u8d21\u732e\u4e2d\uff0c\u53c2\u6570b\u5bf9\u4e8e\u8f93\u5165\u7684\u6539\u53d8\u662f\u4e0d\u654f\u611f\u7684\uff0c\u4e0d\u7ba1\u8f93\u5165\u6539\u53d8\u662f\u5927\u8fd8\u662f\u5c0f\uff0c\u53c2\u6570b\u7684\u8d21\u732e\u5c31\u53ea\u662f\u52a0\u4e2a\u504f\u7f6e\u800c\u5df2\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4f60\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0cw\u548cb\u90fd\u8868\u73b0\u5f97\u5f88\u597d\uff0c\u4f46\u662f\u5728\u6d4b\u8bd5\u96c6\u4e0a\u53d1\u751f\u4e86\u8fc7\u62df\u5408\uff0cb\u662f\u4e0d\u80cc\u8fd9\u4e2a\u9505\u7684\uff0c\u56e0\u4e3a\u5b83\u5bf9\u4e8e\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u4e00\u89c6\u540c\u4ec1\u7684\uff08\u90fd\u53ea\u662f\u7ed9\u5b83\u4eec\u52a0\u4e2a\u504f\u7f6e\uff09\uff0c\u8981\u80cc\u9505\u7684\u662fw\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5bf9\u4e0d\u540c\u7684\u6570\u636e\u4ea7\u751f\u4e0d\u4e00\u6837\u7684\u52a0\u6743\u3002\u6216\u8005\u8bf4\uff0c\u6a21\u578b\u5bf9\u4e8e\u8f93\u5165\u7684\u5fae\u5c0f\u6539\u53d8\u4ea7\u751f\u4e86\u8f93\u51fa\u7684\u8f83\u5927\u5dee\u5f02\uff0c\u8fd9\u662f\u56e0\u4e3a\u6a21\u578b\u7684\u201c\u66f2\u7387\u201d\u592a\u5927\uff0c\u800c\u6a21\u578b\u7684\u66f2\u7387\u662f\u7531w\u51b3\u5b9a\u7684\uff0cb\u4e0d\u8d21\u732e\u66f2\u7387\uff08\u5bf9\u8f93\u5165\u8fdb\u884c\u6c42\u5bfc\uff0cb\u662f\u76f4\u63a5\u7ea6\u6389\u7684\uff09\u3002 \u4ece\u8d1d\u53f6\u65af\u7684\u89d2\u5ea6\u6765\u8bb2\uff0c\u6b63\u5219\u5316\u9879\u901a\u5e38\u90fd\u5305\u542b\u4e00\u5b9a\u7684\u5148\u9a8c\u4fe1\u606f\uff0c\u795e\u7ecf\u7f51\u7edc\u503e\u5411\u4e8e\u8f83\u5c0f\u7684\u6743\u91cd\u4ee5\u4fbf\u66f4\u597d\u5730\u6cdb\u5316\uff0c\u4f46\u662f\u5bf9\u504f\u7f6e\u5c31\u6ca1\u6709\u8fd9\u6837\u4e00\u81f4\u7684\u5148\u9a8c\u77e5\u8bc6\u3002\u53e6\u5916\uff0c\u5f88\u591a\u795e\u7ecf\u7f51\u7edc\u66f4\u503e\u5411\u4e8e\u533a\u5206\u65b9\u5411\u4fe1\u606f\uff08\u5bf9\u5e94\u4e8e\u6743\u91cd\uff09\uff0c\u800c\u4e0d\u662f\u4f4d\u7f6e\u4fe1\u606f\uff08\u5bf9\u5e94\u4e8e\u504f\u7f6e\uff09\uff0c\u6240\u4ee5\u5bf9\u504f\u7f6e\u52a0\u6b63\u5219\u5316\u9879\u5bf9\u63a7\u5236\u8fc7\u62df\u5408\u7684\u4f5c\u7528\u662f\u6709\u9650\u7684\uff0c\u76f8\u53cd\u5f88\u53ef\u80fd\u4f1a\u56e0\u4e3a\u4e0d\u6070\u5f53\u7684\u6b63\u5219\u5f3a\u5ea6\u5f71\u54cd\u795e\u7ecf\u7f51\u7edc\u627e\u5230\u6700\u4f18\u70b9\u3002 \u8fc7\u62df\u5408\u4f1a\u4f7f\u5f97\u6a21\u578b\u5bf9\u5f02\u5e38\u70b9\u5f88\u654f\u611f\uff0c\u5373\u51c6\u786e\u63d2\u5165\u5f02\u5e38\u70b9\uff0c\u5bfc\u81f4\u62df\u5408\u51fd\u6570\u4e2d\u7684\u66f2\u7387\u5f88\u5927\uff08\u5373\u51fd\u6570\u66f2\u7ebf\u7684\u5207\u7ebf\u659c\u7387\u975e\u5e38\u9ad8\uff09\uff0c\u800c\u504f\u7f6e\u5bf9\u6a21\u578b\u7684\u66f2\u7387\u6ca1\u6709\u8d21\u732e\uff08\u5bf9\u591a\u9879\u5f0f\u6a21\u578b\u8fdb\u884c\u6c42\u5bfc\uff0c\u4e3aW\u7684\u7ebf\u6027\u52a0\u548c\uff09\uff0c\u6240\u4ee5\u6b63\u5219\u5316\u4ed6\u4eec\u4e5f\u6ca1\u6709\u4ec0\u4e48\u610f\u4e49\u3002 \u6709\u65f6\u5019\u6211\u4eec\u4f1a\u7528\u5230\u5176\u4ed6\u7c7b\u578b\u7684\u6b63\u5219\u9879\uff0c\u4f8b\u5982 \\(L1\\) \u6b63\u5219\u9879\uff0c\u5b83\u5c06\u53c2\u6570\u5143\u7d20\u7684\u7edd\u5bf9\u503c\u5168\u90e8\u52a0\u8d77\u6765-\u7136\u800c\uff0c\u5728\u5b9e\u9645\u4e2d\u5f88\u5c11\u4f1a\u7528 \\(L1\\) \u6b63\u5219\u9879\uff0c\u56e0\u4e3a\u4f1a\u4ee4\u6743\u503c\u53c2\u6570\u53d8\u5f97\u7a00\u758f\u3002\u5728\u4e0b\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8ba8\u8bba dropout \uff0c\u8fd9\u662f\u53e6\u5916\u4e00\u79cd\u6709\u6548\u7684\u6b63\u5219\u5316\u65b9\u6cd5\uff0c\u901a\u8fc7\u5728\u524d\u5411\u4f20\u64ad\u8fc7\u7a0b\u968f\u673a\u5c06\u795e\u7ecf\u5143\u8bbe\u4e3a 0 Dropout \u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5ffd\u7565\u5b83\u4eec\u7684\u6743\u503c\u6765\u5b9e\u73b0\u201c\u51bb\u7ed3\u201d\u90e8\u5206 unit \u3002\u8fd9\u4e9b\u201c\u51bb\u7ed3\u201d\u7684 unit \u4e0d\u662f\u628a\u5b83\u4eec\u8bbe\u4e3a 0 \uff0c\u800c\u662f\u5bf9\u4e8e\u8be5\u8fed\u4ee3\uff0c\u7f51\u7edc\u5047\u5b9a\u5b83\u4eec\u4e3a 0 \u3002\u201c\u51bb\u7ed3\u201d\u7684 unit \u4e0d\u4f1a\u4e3a\u6b64\u6b21\u8fed\u4ee3\u66f4\u65b0 2.3 Dropout \u00b6 Dropout \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u6b63\u5219\u5316\u6280\u672f\uff0c\u662f Srivastava \u5728\u8bba\u6587 \u300aDropout: A Simple Way to Prevent Neural Networks from Over\ufb01tting\u300b\u4e2d\u9996\u6b21\u63d0\u51fa\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86 dropout \u5982\u4f55\u5e94\u7528\u5728\u795e\u7ecf\u7f51\u7edc\u4e0a\u3002 \u8fd9\u4e2a\u60f3\u6cd5\u662f\u7b80\u5355\u800c\u6709\u6548\u7684\u2014\u2014\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5728\u6bcf\u6b21\u7684\u524d\u5411\uff0f\u53cd\u5411\u4f20\u64ad\u4e2d\u6211\u4eec\u6309\u7167\u4e00\u5b9a\u6982\u7387 \\((1-p)\\) \u968f\u673a\u5730\u201c drop \u201d\u4e00\u4e9b\u795e\u7ecf\u5143\u5b50\u96c6\uff08\u6216\u8005\u7b49\u4ef7\u7684\uff0c\u6211\u4eec\u4fdd\u6301\u4e00\u5b9a\u6982\u7387 \\(p\\) \u7684\u795e\u7ecf\u5143\u662f\u6fc0\u6d3b\u7684\uff09\u3002\u7136\u540e\uff0c\u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u5168\u90e8\u7684\u795e\u7ecf\u5143\u6765\u8fdb\u884c\u9884\u6d4b\u3002\u4f7f\u7528 Dropout \u795e\u7ecf\u7f51\u7edc\u4e00\u822c\u80fd\u4ece\u6570\u636e\u4e2d\u5b66\u5230\u66f4\u591a\u6709\u610f\u4e49\u7684\u4fe1\u606f\uff0c\u66f4\u5c11\u51fa\u73b0\u8fc7\u62df\u5408\u548c\u901a\u5e38\u5728\u73b0\u4eca\u7684\u4efb\u52a1\u4e0a\u83b7\u5f97\u66f4\u9ad8\u7684\u6574\u4f53\u8868\u73b0\u3002\u8fd9\u79cd\u6280\u672f\u5e94\u8be5\u5982\u6b64\u6709\u6548\u7684\u4e00\u4e2a\u76f4\u89c2\u539f\u56e0\u662f\uff0c dropout \u672c\u8d28\u4e0a\u4f5c\u7684\u662f\u4e00\u6b21\u4ee5\u6307\u6570\u5f62\u5f0f\u8bad\u7ec3\u8bb8\u591a\u8f83\u5c0f\u7684\u7f51\u7edc\uff0c\u5e76\u5bf9\u5176\u9884\u6d4b\u8fdb\u884c\u5e73\u5747\u3002 \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4f7f\u7528 dropout \u7684\u65b9\u5f0f\u662f\u6211\u4eec\u53d6\u6bcf\u4e2a\u795e\u7ecf\u5143\u5c42\u7684\u8f93\u51fa \\(h\\) \uff0c\u5e76\u4fdd\u6301\u6982\u7387 \\(p\\) \u7684\u795e\u7ecf\u5143\u662f\u6fc0\u6d3b\u7684\uff0c\u5426\u5219\u5c06\u795e\u7ecf\u5143\u8bbe\u7f6e\u4e3a 0 \u3002\u7136\u540e\uff0c\u5728\u53cd\u5411\u4f20\u64ad\u4e2d\u6211\u4eec\u4ec5\u5bf9\u5728\u524d\u5411\u4f20\u64ad\u4e2d\u6fc0\u6d3b\u7684\u795e\u7ecf\u5143\u56de\u4f20\u68af\u5ea6\u3002\u6700\u540e\uff0c\u5728\u6d4b\u8bd5\u8fc7\u7a0b\uff0c\u6211\u4eec\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u4e2d\u5168\u90e8\u7684\u795e\u7ecf\u5143\u8fdb\u884c\u524d\u5411\u4f20\u64ad\u8ba1\u7b97\u3002\u7136\u800c\uff0c\u6709\u4e00\u4e2a\u5173\u952e\u7684\u5fae\u5999\u4e4b\u5904\uff0c\u4e3a\u4e86\u4f7f dropout \u6709\u6548\u5730\u5de5\u4f5c\uff0c\u6d4b\u8bd5\u9636\u6bb5\u7684\u795e\u7ecf\u5143\u7684\u9884\u671f\u8f93\u51fa\u5e94\u4e0e\u8bad\u7ec3\u9636\u6bb5\u5927\u81f4\u76f8\u540c\u2014\u2014\u5426\u5219\u8f93\u51fa\u7684\u5927\u5c0f\u53ef\u80fd\u4f1a\u6709\u5f88\u5927\u7684\u4e0d\u540c\uff0c\u7f51\u7edc\u7684\u8868\u73b0\u5df2\u7ecf\u4e0d\u518d\u660e\u786e\u4e86\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u901a\u5e38\u5fc5\u987b\u5728\u6d4b\u8bd5\u9636\u6bb5\u5c06\u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u51fa\u9664\u4ee5\u67d0\u4e2a\u503c\u2014\u2014\u8fd9\u7559\u7ed9\u8bfb\u8005\u4f5c\u4e3a\u7ec3\u4e60\u6765\u786e\u5b9a\u8fd9\u4e2a\u503c\u5e94\u8be5\u662f\u591a\u5c11\uff0c\u4ee5\u4fbf\u5728\u8bad\u7ec3\u548c\u6d4b\u8bd5\u671f\u95f4\u7684\u9884\u671f\u8f93\u51fa\u76f8\u7b49\uff08\u8be5\u503c\u4e3a \\(p\\) \uff09 \u3002 \u4ee5\u4e0b\u6e90\u4e8e \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b P190 \u76ee\u7684\uff1a\u7f13\u89e3\u8fc7\u62df\u5408\u95ee\u9898\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u8fbe\u5230\u6b63\u5219\u5316\u7684\u6548\u679c \u6548\u679c\uff1a\u51cf\u5c11\u4e0b\u5c42\u8282\u70b9\u5bf9\u5176\u7684\u4f9d\u8d56\uff0c\u8feb\u4f7f\u7f51\u7edc\u53bb\u5b66\u4e60\u66f4\u52a0**\u9c81\u68d2**\u7684\u7279\u5f81 \u96c6\u6210\u5b66\u4e60\u7684\u89e3\u91ca \ud83d\udc4d \u6bcf\u505a\u4e00\u6b21\u4e22\u5f03\uff0c\u76f8\u5f53\u4e8e\u4ece\u539f\u59cb\u7684\u7f51\u7edc\u4e2d\u91c7\u6837\u5f97\u5230\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002 \u5982\u679c\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u6709 \\(n\\) \u4e2a\u795e\u7ecf\u5143\uff0c\u90a3\u4e48\u603b\u5171\u53ef\u4ee5\u91c7\u6837\u51fa \\(2^n\\) \u4e2a\u5b50\u7f51\u7edc\u3002\u6bcf\u6b21\u8fed\u4ee3\u90fd\u76f8\u5f53\u4e8e\u8bad\u7ec3\u4e00\u4e2a\u4e0d\u540c\u7684\u5b50\u7f51\u7edc\uff0c\u8fd9\u4e9b\u5b50\u7f51\u7edc\u90fd\u5171\u4eab\u539f\u59cb\u7f51\u7edc\u7684\u53c2\u6570\u3002\u90a3\u4e48\uff0c\u6700\u7ec8\u7684\u7f51\u7edc\u53ef\u4ee5\u8fd1\u4f3c\u770b\u4f5c\u662f\u96c6\u6210\u4e86\u6307\u6570\u7ea7\u4e2a\u4e0d\u540c\u7f51\u7edc\u7684\u7ec4\u5408\u6a21\u578b\u3002 \u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u89e3\u91ca \ud83d\udc4d \u4e22\u5f03\u6cd5\u4e5f\u53ef\u4ee5\u89e3\u91ca\u4e3a\u4e00\u79cd\u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u8fd1\u4f3c\u3002\u7528 \\(y=f(\\mathbf{x}, \\theta)\\) \u6765\u8868\u793a\u8981\u5b66\u4e60\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u8d1d\u53f6\u65af\u5b66\u4e60\u662f\u5047\u8bbe\u53c2\u6570 \\(\\theta\\) \u4e3a\u968f\u673a\u5411\u91cf\uff0c\u5e76\u4e14\u5148\u9a8c\u5206\u5e03\u4e3a \\(q(\\theta)\\) \uff0c\u8d1d\u53f6\u65af\u65b9\u6cd5\u7684\u9884\u6d4b\u4e3a \\[ \\begin{aligned} \\mathbb{E}_{q(\\theta)}[y] &=\\int_{q} f(\\mathbf{x}, \\theta) q(\\theta) d \\theta \\\\ & \\approx \\frac{1}{M} \\sum_{m=1}^{M} f\\left(\\mathbf{x}, \\theta_{m}\\right) \\end{aligned} \\] \u5176\u4e2d \\(f(\\mathbf{x}, \\theta_m)\\) \u4e3a\u7b2cm\u6b21\u5e94\u7528\u4e22\u5f03\u65b9\u6cd5\u540e\u7684\u7f51\u7edc\uff0c\u5176\u53c2\u6570 \\(\\theta_m\\) \u4e3a\u5bf9\u5168\u90e8\u53c2\u6570 \\(\\theta\\) \u7684\u4e00\u6b21\u91c7\u6837\u3002 RNN\u4e2d\u7684\u53d8\u5206Dropout Variational Dropout Dropout\u4e00\u822c\u662f\u9488\u5bf9\u795e\u7ecf\u5143\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u6269\u5c55\u5230\u5bf9\u795e\u7ecf\u5143\u4e4b\u95f4 \u7684\u8fde\u63a5\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u6216\u6bcf\u4e00\u5c42\u8fdb\u884c\u968f\u673a\u4e22\u5f03\u3002 \u5728RNN\u4e2d\uff0c\u4e0d\u80fd\u76f4\u63a5\u5bf9\u6bcf\u4e2a\u65f6\u523b\u7684\u9690\u72b6\u6001\u8fdb\u884c\u968f\u673a \u4e22\u5f03\uff0c\u8fd9\u6837\u4f1a\u635f\u5bb3\u5faa\u73af\u7f51\u7edc\u5728\u65f6\u95f4\u7ef4\u5ea6\u4e0a\u8bb0\u5fc6\u80fd\u529b\u3002 \u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5bf9\u975e\u65f6\u95f4\u7ef4\u5ea6\u7684\u8fde\u63a5\uff08\u5373\u975e\u5faa\u73af\u8fde\u63a5\uff09\u8fdb\u884c\u968f\u673a\u4e22\u5931\u3002\u5982\u56fe\u6240\u793a\uff0c\u865a\u7ebf\u8fb9\u8868\u793a\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u4e0d\u540c\u7684\u989c\u8272\u8868\u793a\u4e0d\u540c\u7684\u4e22\u5f03\u63a9\u7801\u3002 \u7136\u800c\u6839\u636e\u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u89e3\u91ca\uff0c\u4e22\u5f03\u6cd5\u662f\u4e00\u79cd\u5bf9\u53c2\u6570 \\(\u03b8\\) \u7684\u91c7\u6837\u3002\u6bcf\u6b21\u91c7\u6837\u7684\u53c2\u6570\u9700\u8981\u5728\u6bcf\u4e2a\u65f6\u523b\u4fdd\u6301\u4e0d\u53d8\u3002\u56e0\u6b64\uff0c\u5728\u5bf9\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0a\u4f7f\u7528\u4e22\u5f03\u6cd5\u65f6\uff0c\u9700\u8981\u5bf9\u53c2\u6570\u77e9\u9635\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u5e76\u5728\u6240\u6709\u65f6\u523b\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u4e22\u5f03\u63a9\u7801\u3002\u8fd9\u79cd\u65b9\u6cd5\u79f0\u4e3a\u53d8\u5206\u4e22\u5f03\u6cd5\uff08Variational Dropout\uff09\u3002 \u56fe7.12\u7ed9\u51fa\u4e86\u53d8\u5206\u4e22\u5f03\u6cd5\u7684\u793a\u4f8b\uff0c \u76f8\u540c\u989c\u8272\u8868\u793a\u4f7f\u7528\u76f8\u540c\u7684\u4e22\u5f03\u63a9\u7801 \u3002 2.4 Neuron Units \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u542b\u6709 sigmoidal neurons \u7684\u975e\u7ebf\u6027\u5206\u7c7b\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u4f46\u662f\u5728\u5f88\u591a\u5e94\u7528\u4e2d\uff0c\u4f7f\u7528\u5176\u4ed6\u6fc0\u6d3b\u51fd\u6570\u53ef\u4ee5\u8bbe\u8ba1\u66f4\u597d\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u4e0b\u9762\u5217\u51fa\u4e00\u4e9b\u5e38\u89c1\u7684\u6fc0\u6d3b\u51fd\u6570\u548c\u6fc0\u6d3b\u51fd\u6570\u7684\u68af\u5ea6\u5b9a\u4e49\uff0c\u5b83\u4eec\u53ef\u4ee5\u548c\u524d\u9762\u8ba8\u8bba\u8fc7\u7684 sigmoidal \u51fd\u6570\u4e92\u76f8\u66ff\u6362\u3002 Sigmoid \uff1a\u8fd9\u662f\u6211\u4eec\u8ba8\u8bba\u8fc7\u7684\u5e38\u7528\u9009\u62e9\uff0c\u6fc0\u6d3b\u51fd\u6570 \\(\\sigma\\) \u4e3a\uff1a $$ \\sigma(z)=\\frac{1}{1+exp(-z)} $$ \u5176\u4e2d \\(\\sigma(z)\\in (0,1)\\) \u3002 \\(\\sigma(z)\\) \u7684\u68af\u5ea6\u4e3a \\[ \\sigma'(z)=\\frac{-exp(-z)}{1+exp(-z)}=\\sigma(z)(1-\\sigma(z)) \\\\ \\] Tanh \uff1a \\(tanh\\) \u51fd\u6570\u662f \\(sigmoid\\) \u51fd\u6570\u4e4b\u5916\u7684\u53e6\u4e00\u4e2a\u9009\u62e9\uff0c\u5728\u5b9e\u9645\u4e2d\u5b83\u80fd\u66f4\u5feb\u5730\u6536\u655b\u3002 \\(tanh\\) \u548c \\(sigmoid\\) \u7684\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e \\(tanh\\) \u7684\u8f93\u51fa\u8303\u56f4\u5728 -1 \u5230 1 \uff0c\u800c \\(sigmoid\\) \u7684\u8f93\u51fa\u8303\u56f4\u5728 0 \u5230 1 \u3002 $$ tanh(z)=\\frac{exp(z)-exp(-z)}{exp(z)+exp(-z)}=2\\sigma(2z)-1 \\ $$ \u5176\u4e2d \\(tanh(z)\\in (-1, 1)\\) \u3002 \\(tanh(z)\\) \u7684\u68af\u5ea6\u4e3a\uff1a \\[ tanh'(z)=\\bigg(\\frac{exp(z)-exp(-z)}{exp(z)+exp(-z)}\\bigg)^{2}=1-tanh^{2}(z) \\\\ \\] Hard tanh \uff1a\u6709\u65f6\u5019 \\(hard\\;tanh\\) \u51fd\u6570\u6709\u65f6\u6bd4 \\(tanh\\) \u51fd\u6570\u7684\u9009\u62e9\u66f4\u4e3a\u4f18\u5148\uff0c\u56e0\u4e3a\u5b83\u7684\u8ba1\u7b97\u91cf\u66f4\u5c0f\u3002\u7136\u800c\u5f53 \\(z\\) \u7684\u503c\u5927\u4e8e \\(1\\) \u65f6\uff0c\u51fd\u6570\u7684\u6570\u503c\u4f1a\u9971\u548c\uff08\u5982\u4e0b\u56fe\u6240\u793a\u4f1a\u6052\u7b49\u4e8e 1\uff09\u3002 \\(hard\\;tanh\\) \u6fc0\u6d3b\u51fd\u6570\u4e3a\uff1a \\[ \\begin{eqnarray} hardtanh(z) &=& \\begin{cases} -1& \\text{:$z<1$}\\\\ z & \\text{:$-1\\le z \\le 1$} \\\\ 1 & \\text{:$z>1$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] \\(hard\\;tanh\\) \u8fd9\u4e2a\u51fd\u6570\u7684\u5fae\u5206\u4e5f\u53ef\u4ee5\u7528\u5206\u6bb5\u51fd\u6570\u7684\u5f62\u5f0f\u8868\u793a\uff1a \\[ \\begin{eqnarray} hardtanh(z) &=& \\begin{cases} 1 & \\text{:$-1\\le z \\le 1$} \\\\ 0 & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] Soft sign \uff1a \\(soft\\;sign\\) \u51fd\u6570\u662f\u53e6\u5916\u4e00\u79cd\u975e\u7ebf\u6027\u6fc0\u6d3b\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u662f \\(tanh\\) \u7684\u53e6\u5916\u4e00\u79cd\u9009\u62e9\uff0c\u56e0\u4e3a\u5b83\u548c \\(hard\\;clipped\\;functions\\) \u4e00\u6837\u4e0d\u4f1a\u8fc7\u65e9\u5730\u9971\u548c\uff1a $$ softsign(z)=\\frac{z}{1+|z|} $$ \\(soft\\;sign\\) \u51fd\u6570\u7684\u5fae\u5206\u8868\u8fbe\u5f0f\u4e3a\uff1a \\[ softsign'(z)=\\frac{sgn(z)}{(1+z)^{2}} \\\\ \\] \u5176\u4e2d \\(sgn\\) \u662f\u7b26\u53f7\u51fd\u6570\uff0c\u6839\u636e \\(z\\) \u7684\u7b26\u53f7\u8fd4\u56de 1 \u6216\u8005 -1 \u3002 ReLU \uff1a \\(ReLU\\) \uff08 \\(Recti\ufb01ed\\;Linear\\;Unit\\) \uff09\u51fd\u6570\u662f\u6fc0\u6d3b\u51fd\u6570\u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u7684\u9009\u62e9\uff0c\u5f53 z \u7684\u503c\u7279\u522b\u5927\u7684\u65f6\u5019\u5b83\u4e5f\u4e0d\u4f1a\u9971\u548c\u3002\u5728\u8ba1\u7b97\u673a\u89c6\u89c9\u5e94\u7528\u4e2d\u53d6\u5f97\u4e86\u5f88\u5927\u7684\u6210\u529f\uff1a $$ rect(z)=max(z,0) $$ \\(ReLU\\) \u51fd\u6570\u7684\u5fae\u5206\u662f\u4e00\u4e2a\u5206\u6bb5\u51fd\u6570\uff1a \\[ \\begin{eqnarray} rect'(z) &=& \\begin{cases} 1 & \\text{$z > 0$} \\\\ 0 & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] Leaky ReLU \uff1a\u4f20\u7edf\u7684 \\(ReLU\\) \u5355\u5143\u5f53 z \u7684\u503c\u5c0f\u4e8e 0 \u65f6\uff0c\u662f\u4e0d\u4f1a\u53cd\u5411\u4f20\u64ad\u8bef\u5dee \\(leaky\\;ReLU\\) \u6539\u5584\u4e86\u8fd9\u4e00\u70b9\uff0c\u5f53 \\(z\\) \u7684\u503c\u5c0f\u4e8e 0 \u65f6\uff0c\u4ecd\u7136\u4f1a\u6709\u4e00\u4e2a\u5f88\u5c0f\u7684\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u56de\u53bb\u3002 $$ leaky(z)=max(z, k\\cdot z) \\ $$ \u5176\u4e2d \\(0<k<1\\) \u3002 \\(leaky\\;ReLU\\) \u51fd\u6570\u7684\u5fae\u5206\u662f\u4e00\u4e2a\u5206\u6bb5\u51fd\u6570\uff1a \\[ \\begin{eqnarray} leaky'(z) &=& \\begin{cases} 1 & \\text{$z > 0$} \\\\ k & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\] 2.5 Data Preprocessing \u00b6 \u4e0e\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4e00\u822c\u60c5\u51b5\u4e00\u6837\uff0c\u786e\u4fdd\u6a21\u578b\u5728\u5f53\u524d\u4efb\u52a1\u4e0a\u83b7\u5f97\u5408\u7406\u6027\u80fd\u7684\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u662f\u5bf9\u6570\u636e\u6267\u884c\u57fa\u672c\u7684\u9884\u5904\u7406\u3002\u4e0b\u9762\u6982\u8ff0\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u6280\u672f\u3002 Mean Subtraction \u7ed9\u5b9a\u4e00\u7ec4\u8f93\u5165\u6570\u636e \\(X\\) \uff0c\u4e00\u822c\u628a \\(X\\) \u4e2d\u7684\u503c\u51cf\u53bb \\(X\\) \u7684\u5e73\u5747\u7279\u5f81\u5411\u91cf\u6765\u4f7f\u6570\u636e**\u96f6\u4e2d\u5fc3\u5316**\u3002\u5728\u5b9e\u8df5\u4e2d\u5f88\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c \u53ea\u8ba1\u7b97\u8bad\u7ec3\u96c6\u7684\u5e73\u5747\u503c \uff0c\u800c\u4e14\u5728**\u8bad\u7ec3\u96c6\uff0c\u9a8c\u8bc1\u96c6\u548c\u6d4b\u8bd5\u96c6**\u90fd\u662f**\u51cf\u53bb\u540c\u4e00\u5e73\u5747\u503c**\u3002 Normalization \u53e6\u5916\u4e00\u4e2a\u5e38\u89c1\u7684\u6280\u672f\uff08\u867d\u7136\u6ca1\u6709 \\(mean\\;Subtraction\\) \u5e38\u7528\uff09\u662f\u5c06\u6bcf\u4e2a\u8f93\u5165\u7279\u5f81\u7ef4\u5ea6\u7f29\u5c0f\uff0c\u8ba9\u6bcf\u4e2a\u8f93\u5165\u7279\u5f81\u7ef4\u5ea6\u5177\u6709\u76f8\u4f3c\u7684\u5e45\u5ea6\u8303\u56f4\u3002\u8fd9\u662f\u5f88\u6709\u7528\u7684\uff0c\u56e0\u6b64\u4e0d\u540c\u7684\u8f93\u5165\u7279\u5f81\u662f\u7528\u4e0d\u540c\u201c\u5355\u4f4d\u201d\u5ea6\u91cf\uff0c\u4f46\u662f\u6700\u521d\u7684\u65f6\u5019\u6211\u4eec\u7ecf\u5e38\u8ba4\u4e3a\u6240\u6709\u7684\u7279\u5f81\u540c\u6837\u91cd\u8981\u3002\u5b9e\u73b0\u65b9\u6cd5\u662f\u5c06\u7279\u5f81\u9664\u4ee5\u5b83\u4eec\u5404\u81ea\u5728\u8bad\u7ec3\u96c6\u4e2d\u8ba1\u7b97\u7684\u6807\u51c6\u5dee\u3002 Whitening \u76f8\u6bd4\u4e0a\u8ff0\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c whitening \u6ca1\u6709\u90a3\u4e48\u5e38\u7528\uff0c\u5b83\u672c\u8d28\u4e0a\u662f\u6570\u636e\u7ecf\u8fc7\u8f6c\u6362\u540e\uff0c\u7279\u5f81\u4e4b\u95f4\u76f8\u5173\u6027\u8f83\u4f4e\uff0c\u6240\u6709\u7279\u5f81\u5177\u6709\u76f8\u540c\u7684\u65b9\u5dee\uff08\u534f\u65b9\u5dee\u9635\u4e3a 1 \uff09\u3002\u9996\u5148\u5bf9\u6570\u636e\u8fdb\u884c Mean Subtraction \u5904\u7406\uff0c\u5f97\u5230 \\(X'\\) \u3002\u7136\u540e\u6211\u4eec\u5bf9 \\(X'\\) \u8fdb\u884c\u5947\u5f02\u503c\u5206\u89e3\u5f97\u5230\u77e9\u9635 \\(U\\) , \\(S\\) , \\(V\\) \uff0c\u8ba1\u7b97 \\(UX'\\) \u5c06 \\(X'\\) \u6295\u5f71\u5230\u7531 \\(U\\) \u7684\u5217\u5b9a\u4e49\u7684\u57fa\u4e0a\u3002\u6211\u4eec\u6700\u540e\u5c06\u7ed3\u679c\u7684\u6bcf\u4e2a\u7ef4\u5ea6\u9664\u4ee5 \\(S\\) \u4e2d\u7684\u76f8\u5e94\u5947\u5f02\u503c\uff0c\u4ece\u800c\u9002\u5f53\u5730\u7f29\u653e\u6211\u4eec\u7684\u6570\u636e\uff08\u5982\u679c\u5176\u4e2d\u6709\u5947\u5f02\u503c\u4e3a 0 \uff0c\u6211\u4eec\u5c31\u9664\u4ee5\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\u4ee3\u66ff\uff09\u3002 2.6 Parameter Initialization \u00b6 \u8ba9\u795e\u7ecf\u7f51\u7edc\u5b9e\u73b0\u6700\u4f73\u6027\u80fd\u7684\u5173\u952e\u4e00\u6b65\u662f\u4ee5\u5408\u7406\u7684\u65b9\u5f0f\u521d\u59cb\u5316\u53c2\u6570\u3002\u4e00\u4e2a\u597d\u7684\u8d77\u59cb\u65b9\u6cd5\u662f\u5c06\u6743\u503c\u521d\u59cb\u5316\u4e3a\u901a\u5e38\u5206\u5e03\u5728 0 \u9644\u8fd1\u7684\u5f88\u5c0f\u7684\u968f\u673a\u6570-\u5728\u5b9e\u8df5\u4e2d\u6548\u679c\u8fd8\u4e0d\u9519\u3002\u5728\u8bba\u6587***Understanding the difficulty*** of training deep feedforward neural networks (2010) , Xavier \u7814\u7a76\u4e0d\u540c\u6743\u503c\u548c\u504f\u7f6e\u521d\u59cb\u5316\u65b9\u6848\u5bf9\u8bad\u7ec3\u52a8\u529b\uff08 training dynamics \u200b \uff09\u7684\u5f71\u54cd\u3002\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0c\u5bf9\u4e8e sigmoid \u548c tanh \u6fc0\u6d3b\u5355\u5143\uff0c\u5f53\u4e00\u4e2a\u6743\u503c\u77e9\u9635 \\(W\\in \\mathbb{R}^{n^{(l+1)}\\times n^{(l)}}\\) \u4ee5\u5982\u4e0b\u7684\u5747\u5300\u5206\u5e03\u7684\u65b9\u5f0f\u968f\u673a\u521d\u59cb\u5316\uff0c\u80fd\u591f\u5b9e\u73b0\u66f4\u5feb\u7684\u6536\u655b\u548c\u5f97\u5230\u66f4\u4f4e\u7684\u8bef\u5dee\uff1a \\[ W\\sim U\\bigg[-\\sqrt{\\frac{6}{n^{(l)}+n^{(l+1)}}},\\sqrt{\\frac{6}{n^{(l)}+n^{(l+1)}}}\\;\\bigg] \\\\ \\] \u5176\u4e2d \\(n^{(l)}\\) \u662f W \\((fan\\text{-}in)\\) \u7684\u8f93\u5165\u5355\u5143\u6570\uff0c \\(n^{(l+1)}\\) \u662f W \\((fan\\text{-}out)\\) \u7684\u8f93\u51fa\u5355\u5143\u6570\u3002\u5728\u8fd9\u4e2a\u53c2\u6570\u521d\u59cb\u5316\u65b9\u6848\u4e2d\uff0c\u504f\u7f6e\u5355\u5143\u662f\u521d\u59cb\u5316\u4e3a 0 \u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u5c1d\u8bd5\u4fdd\u6301\u8de8\u5c42\u4e4b\u95f4\u7684\u6fc0\u6d3b\u65b9\u5dee\u4ee5\u53ca\u53cd\u5411\u4f20\u64ad\u68af\u5ea6\u65b9\u5dee\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u6837\u7684\u521d\u59cb\u5316\uff0c\u68af\u5ea6\u65b9\u5dee\uff08\u5f53\u4e2d\u542b\u6709\u7ea0\u6b63\u4fe1\u606f\uff09\u901a\u5e38\u968f\u7740\u8de8\u5c42\u7684\u53cd\u5411\u4f20\u64ad\u800c\u8870\u51cf\u3002 2.7 Learning Strategies \u00b6 \u8bad\u7ec3\u671f\u95f4\u6a21\u578b\u53c2\u6570\u66f4\u65b0\u7684\u901f\u7387/\u5e45\u5ea6\u53ef\u4ee5\u4f7f\u7528\u5b66\u4e60\u7387\u8fdb\u884c\u63a7\u5236\u3002\u5728\u6700\u7b80\u5355\u7684\u68af\u5ea6\u4e0b\u964d\u516c\u5f0f\u4e2d\uff0c \\(\\alpha\\) \u662f\u5b66\u4e60\u7387\uff1a \\[ \\theta^{new}=\\theta^{old}-\\alpha\\nabla_{\\theta}J_{t}(\\theta) \\\\ \\] \u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\u5982\u679c\u8981\u66f4\u5feb\u5730\u6536\u655b\uff0c\u6211\u4eec\u5e94\u8be5\u5bf9 \\(\\alpha\\) \u53d6\u4e00\u4e2a\u8f83\u5927\u7684\u503c\u2014\u2014\u7136\u800c\uff0c\u5728\u66f4\u5feb\u7684\u6536\u655b\u901f\u5ea6\u4e0b\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u66f4\u5feb\u7684\u6536\u655b\u3002\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u5b66\u4e60\u7387\u975e\u5e38\u9ad8\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u53c2\u6570\u66f4\u65b0\u5e45\u5ea6\u8fc7\u5927\uff0c\u4f1a\u5bfc\u81f4\u6a21\u578b\u8d8a\u8fc7\u51f8\u4f18\u5316\u7684\u6781\u5c0f\u503c\u70b9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5728\u975e\u51f8\u6a21\u578b\u4e2d\uff08\u6211\u4eec\u5f88\u591a\u65f6\u5019\u9047\u5230\u7684\u6a21\u578b\u90fd\u662f\u975e\u51f8\uff09\uff0c\u9ad8\u5b66\u4e60\u7387\u7684\u7ed3\u679c\u662f\u96be\u4ee5\u9884\u6d4b\u7684\uff0c\u4f46\u662f\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u53ef\u80fd\u6027\u662f\u975e\u5e38\u9ad8\u7684\u3002 \u907f\u514d\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u4e00\u4e2a\u7b80\u7b54\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u4e00\u4e2a\u5f88\u5c0f\u7684\u5b66\u4e60\u7387\uff0c\u8ba9\u6a21\u578b\u8c28\u614e\u5730\u5728\u53c2\u6570\u7a7a\u95f4\u4e2d\u8fed\u4ee3\u2014\u2014\u5f53\u7136\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a\u592a\u5c0f\u7684\u5b66\u4e60\u7387\uff0c\u635f\u5931\u51fd\u6570\u53ef\u80fd\u4e0d\u4f1a\u5728\u5408\u7406\u7684\u65f6\u95f4\u5185\u6536\u655b\uff0c\u6216\u8005\u4f1a\u56f0\u5728\u5c40\u90e8\u6700\u4f18\u70b9\u3002\u56e0\u6b64\uff0c\u4e0e\u4efb\u4f55\u5176\u4ed6\u8d85\u53c2\u6570\u4e00\u6837\uff0c\u5b66\u4e60\u7387\u5fc5\u987b\u6709\u6548\u5730\u8c03\u6574\u3002 \u6df1\u5ea6\u5b66\u4e60\u7cfb\u7edf\u4e2d\u6700\u6d88\u8017\u8ba1\u7b97\u8d44\u6e90\u7684\u662f\u8bad\u7ec3\u9636\u6bb5\uff0c\u4e00\u4e9b\u7814\u7a76\u5df2\u5728\u5c1d\u8bd5\u63d0\u5347\u8bbe\u7f6e\u5b66\u4e60\u7387\u7684\u65b0\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c Ronan Collobert \u901a\u8fc7\u53d6 \\(fan\\text{-}in\\) \u7684\u795e\u7ecf\u5143 \\((n^{(l)})\\) \u7684\u5e73\u65b9\u6839\u7684\u5012\u6570\u6765\u7f29\u653e\u6743\u503c \\(W_{ij}\\) ( \\(W\\in \\mathbb{R}^{n^{(l+1)}\\times n^{(l)}}\\) ) \u7684\u5b66\u4e60\u7387\u3002 \u8fd8\u6709\u5176\u4ed6\u5df2\u7ecf\u88ab\u8bc1\u660e\u6709\u6548\u7684\u6280\u672f-\u8fd9\u4e2a\u65b9\u6cd5\u53eb annealing \u9000\u706b \uff0c\u5728\u591a\u6b21\u8fed\u4ee3\u4e4b\u540e\uff0c\u5b66\u4e60\u7387\u4ee5\u4ee5\u4e0b\u65b9\u5f0f\u964d\u4f4e\uff1a\u4fdd\u8bc1\u4ee5\u4e00\u4e2a\u9ad8\u7684\u7684\u5b66\u4e60\u7387\u5f00\u59cb\u8bad\u7ec3\u548c\u5feb\u901f\u903c\u8fd1\u6700\u5c0f\u503c\uff1b\u5f53\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6700\u5c0f\u503c\u65f6\uff0c\u5f00\u59cb\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u66f4\u7ec6\u5fae\u7684\u8303\u56f4\u5185\u627e\u5230\u6700\u4f18\u503c\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u5b9e\u73b0 annealing \u7684\u65b9\u6cd5\u662f\u5728\u6bcf \\(n\\) \u6b21\u7684\u8fed\u4ee3\u5b66\u4e60\u540e\uff0c\u901a\u8fc7\u4e00\u4e2a\u56e0\u5b50 \\(x\\) \u6765\u964d\u4f4e\u5b66\u4e60\u7387 \\(\\alpha\\) \u3002 \u6307\u6570\u8870\u51cf\u4e5f\u662f\u5f88\u5e38\u89c1\u7684\u65b9\u6cd5\uff0c\u5728 \\(t\\) \u6b21\u8fed\u4ee3\u540e\u5b66\u4e60\u7387\u53d8\u4e3a \\(\\alpha(t)=\\alpha_{0}e^{-kt}\\) \uff0c\u5176\u4e2d \\(\\alpha_{0}\\) \u662f\u521d\u59cb\u7684\u5b66\u4e60\u7387\u548c \\(k\\) \u662f\u8d85\u53c2\u6570\u3002 \u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\u662f\u5141\u8bb8\u5b66\u4e60\u7387\u968f\u7740\u65f6\u95f4\u51cf\u5c11\uff1a \\[ \\alpha(t)=\\frac{\\alpha_{0}\\tau}{max(t,\\tau)} \\] \u5728\u4e0a\u8ff0\u7684\u65b9\u6848\u4e2d\uff0c \\(\\alpha_{0}\\) \u662f\u4e00\u4e2a\u53ef\u8c03\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8d77\u59cb\u7684\u5b66\u4e60\u7387\u3002 \\(\\tau\\) \u4e5f\u662f\u4e00\u4e2a\u53ef\u8c03\u53c2\u6570\uff0c\u8868\u793a\u5b66\u4e60\u7387\u5e94\u8be5\u5728\u8be5\u65f6\u95f4\u70b9\u5f00\u59cb\u51cf\u5c11\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5f88\u6709\u6548\u7684\u3002\u5728\u4e0b\u4e00\u90e8\u5206\u6211\u4eec\u8ba8\u8bba\u53e6\u5916\u4e00\u79cd\u4e0d\u9700\u8981\u624b\u52a8\u8bbe\u5b9a\u5b66\u4e60\u7387\u7684\u81ea\u9002\u5e94\u68af\u5ea6\u4e0b\u964d\u7684\u65b9\u6cd5\u3002 2.8 Momentum Updates \u00b6 \u52a8\u91cf\u65b9\u6cd5\uff0c\u7075\u611f\u6765\u81ea\u4e8e\u7269\u7406\u5b66\u4e2d\u7684\u5bf9\u52a8\u529b\u5b66\u7684\u7814\u7a76\uff0c\u662f\u68af\u5ea6\u4e0b\u964d\u65b9\u6cd5\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u5c1d\u8bd5\u4f7f\u7528\u66f4\u65b0\u7684\u201c\u901f\u5ea6\u201d\u7684\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66f4\u65b0\u65b9\u6848\u3002\u52a8\u91cf\u66f4\u65b0\u7684\u4f2a\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a # Computes a standard momentum update # on parameters x v = mu * v - alpha * grad_x x += v 2.9 Adaptive Optimization Methods \u00b6 AdaGrad \u662f\u6807\u51c6\u7684\u968f\u673a\u68af\u5ea6\u4e0b\u964d( SGD )\u7684\u4e00\u79cd\u5b9e\u73b0\uff0c\u4f46\u662f\u6709\u4e00\u70b9\u5173\u952e\u7684\u4e0d\u540c\uff1a\u5bf9\u6bcf\u4e2a\u53c2\u6570\u5b66\u4e60\u7387\u662f\u4e0d\u540c\u7684\u3002\u6bcf\u4e2a\u53c2\u6570\u7684\u5b66\u4e60\u7387\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u53c2\u6570\u68af\u5ea6\u66f4\u65b0\u7684\u5386\u53f2,\u53c2\u6570\u7684\u5386\u53f2\u66f4\u65b0\u8d8a\u5c0f\uff0c\u5c31\u4f7f\u7528\u66f4\u5927\u7684\u5b66\u4e60\u7387\u52a0\u5feb\u66f4\u65b0\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fc7\u53bb\u6ca1\u6709\u66f4\u65b0\u592a\u5927\u7684\u53c2\u6570\u73b0\u5728\u66f4\u6709\u53ef\u80fd\u6709\u66f4\u9ad8\u7684\u5b66\u4e60\u7387\u3002 \\[ \\theta_{t,i}=\\theta_{t-1,i}-\\frac{\\alpha}{\\sqrt{\\sum_{\\tau=1}^{t}g_{\\tau,i}^{2}}} g_{t,i} \\ where \\ g_{t,i}=\\frac{\\partial}{\\partial\\theta_{i}^{t}}J_{t}(\\theta) \\] \u5728\u8fd9\u4e2a\u6280\u672f\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u5982\u679c\u68af\u5ea6\u7684\u5386\u53f2 RMS \u5f88\u4f4e\uff0c\u90a3\u4e48\u5b66\u4e60\u7387\u4f1a\u975e\u5e38\u9ad8\u3002\u8fd9\u4e2a\u6280\u672f\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u73b0\u5982\u4e0b\u6240\u793a\uff1a # Assume the gradient dx and parameter vector x cache += dx ** 2 x += - learning_rate * dx / np . sqrt ( cache + 1e-8 ) \u5176\u4ed6\u5e38\u89c1\u7684\u81ea\u9002\u5e94\u65b9\u6cd5\u6709 RMSProp \u548c Adam \uff0c\u5176\u66f4\u65b0\u89c4\u5219\u5982\u4e0b\u6240\u793a\uff1a # Update rule for RMS prop cache = decay_rate * cache + ( 1 - decay_rate ) * dx ** 2 x += - learning_rate * dx / ( np . sqrt ( cache ) + eps ) # Update rule for Adam m = beta * m + ( 1 - beta1 ) * dx v = beta * v + ( 1 - beta2 ) * ( dx ** 2 ) x += - learning_rate * m / ( np . sqrt ( v ) + eps ) RMSProp \u662f\u5229\u7528\u5e73\u65b9\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5c40\u503c\uff0c\u662f AdaGrad \u7684\u4e00\u4e2a\u53d8\u4f53\u2014\u2014\u5b9e\u9645\u4e0a\uff0c\u548c AdaGrad \u4e0d\u4e00\u6837\uff0c \u5b83\u7684\u66f4\u65b0\u4e0d\u4f1a\u5355\u8c03\u53d8\u5c0f \u3002 Adam \u66f4\u65b0\u89c4\u5219\u53c8\u662f RMSProp \u7684\u4e00\u4e2a\u53d8\u4f53\uff0c\u4f46\u662f\u52a0\u4e0a\u4e86\u52a8\u91cf\u66f4\u65b0\u3002 2.10 More reference \u00b6 \u5982\u679c\u5e0c\u671b\u4e86\u89e3\u4ee5\u4e0a\u7684\u68af\u5ea6\u4f18\u5316\u7b97\u6cd5\u7684\u5177\u4f53\u7ec6\u8282\uff0c\u53ef\u4ee5\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff1a An overview of gradient descent optimization algorithms ) \u3002 Computing Neural Network Gradients \u00b6 1 Introduction \u00b6 \u8fd9\u4e9b\u7b14\u8bb0\u7684\u76ee\u7684\u662f\u6f14\u793a\u5982\u4f55\u4ee5\u5b8c\u5168\u77e2\u91cf\u5316\u7684\u65b9\u5f0f\u5feb\u901f\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u68af\u5ea6\u3002\u8fd9\u662f\u5bf9CS224n 2019\u7b2c\u4e09\u8bb2\u7684\u6700\u540e\u4e00\u90e8\u5206\u7684\u8865\u5145\uff0c\u662f\u540c\u6837\u7684\u6750\u6599 2 Vectorized Gradients \u00b6 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"03 Word Window Classification,Neural Networks, and Matrix Calculus"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#lecture-03-word-window-classificationneural-networks-and-matrix-calculus","text":"Lecture Plan Classification review/introduction Neural networks introduction Named Entity Recognition Binary true vs. corrupted word window classification Matrix calculus introduction \u63d0\u793a \uff1a\u8fd9\u5bf9\u4e00\u4e9b\u4eba\u800c\u8a00\u5c06\u662f\u56f0\u96be\u7684\u4e00\u5468\uff0c\u8bfe\u540e\u9700\u8981\u9605\u8bfb\u63d0\u4f9b\u7684\u8d44\u6599\u3002","title":"Lecture 03 Word Window Classification,Neural Networks, and Matrix Calculus"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#classification-setup-and-notation","text":"\u901a\u5e38\u6211\u4eec\u6709\u7531\u6837\u672c\u7ec4\u6210\u7684\u8bad\u7ec3\u6570\u636e\u96c6 \\[ \\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N} \\] \\(x_i\\) \u662f\u8f93\u5165\uff0c\u4f8b\u5982\u5355\u8bcd\uff08\u7d22\u5f15\u6216\u662f\u5411\u91cf\uff09\uff0c\u53e5\u5b50\uff0c\u6587\u6863\u7b49\u7b49\uff0c\u7ef4\u5ea6\u4e3a \\(d\\) \\(y_i\\) \u662f\u6211\u4eec\u5c1d\u8bd5\u9884\u6d4b\u7684\u6807\u7b7e\uff08 \\(C\\) \u4e2a\u7c7b\u522b\u4e2d\u7684\u4e00\u4e2a\uff09\uff0c\u4f8b\u5982\uff1a \u7c7b\u522b\uff1a\u611f\u60c5\uff0c\u547d\u540d\u5b9e\u4f53\uff0c\u8d2d\u4e70/\u552e\u51fa\u7684\u51b3\u5b9a \u5176\u4ed6\u5355\u8bcd \u4e4b\u540e\uff1a\u591a\u8bcd\u5e8f\u5217\u7684 Classification intuition \u8bad\u7ec3\u6570\u636e\uff1a \\(\\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N}\\) \u7b80\u5355\u7684\u8bf4\u660e\u60c5\u51b5 \u56fa\u5b9a\u7684\u4e8c\u7ef4\u5355\u8bcd\u5411\u91cf\u5206\u7c7b \u4f7f\u7528softmax/logistic\u56de\u5f52 \u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u4f20\u7edf\u7684\u673a\u5668\u5b66\u4e60/\u7edf\u8ba1\u5b66\u65b9\u6cd5 \uff1a\u5047\u8bbe \\(x_i\\) \u662f\u56fa\u5b9a\u7684\uff0c\u8bad\u7ec3 softmax/logistic \u56de\u5f52\u7684\u6743\u91cd \\(W \\in \\mathbb{R}^{C \\times d}\\) \u6765\u51b3\u5b9a\u51b3\u5b9a\u8fb9\u754c(\u8d85\u5e73\u9762) \u65b9\u6cd5 \uff1a\u5bf9\u6bcf\u4e2a \\(x\\) \uff0c\u9884\u6d4b $$ p(y | x)=\\frac{\\exp \\left(W_{y} . x\\right)}{\\sum_{c=1}^{C} \\exp \\left(W_{c} \\cdot x\\right)} $$ \u6211\u4eec\u53ef\u4ee5\u5c06\u9884\u6d4b\u51fd\u6570\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\uff1a \u5c06 \\(W\\) \u7684 \\(y^{th}\\) \u884c\u548c \\(x\\) \u4e2d\u7684\u5bf9\u5e94\u884c\u76f8\u4e58\u5f97\u5230\u5206\u6570 $$ W_{y} \\cdot x=\\sum_{i=1}^{d} W_{y i} x_{i}=f_{y} $$ \u8ba1\u7b97\u6240\u6709\u7684 \\(f_c, for \\ c=1,\\dots,C\\) \u4f7f\u7528softmax\u51fd\u6570\u83b7\u5f97\u5f52\u4e00\u5316\u7684\u6982\u7387 \\[ p(y | x)=\\frac{\\exp \\left(f_{y}\\right)}{\\sum_{c=1}^{C} \\exp \\left(f_{c}\\right)}=\\operatorname{softmax}\\left(f_{y}\\right) \\] Training with softmax and cross-entropy loss \u5bf9\u4e8e\u6bcf\u4e2a\u8bad\u7ec3\u6837\u672c \\((x,y)\\) \uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u6700\u5927\u5316\u6b63\u786e\u7c7b \\(y\\) \u7684\u6982\u7387\uff0c\u6216\u8005\u6211\u4eec\u53ef\u4ee5\u6700\u5c0f\u5316\u8be5\u7c7b\u7684\u8d1f\u5bf9\u6570\u6982\u7387 $$ -\\log p(y | x)=-\\log \\left(\\frac{\\exp \\left(f_{y}\\right)}{\\sum_{c=1}^{C} \\exp \\left(f_{c}\\right)}\\right) $$ Background: What is \u201ccross entropy\u201d loss/error? \u4ea4\u53c9\u71b5\u201d\u7684\u6982\u5ff5\u6765\u6e90\u4e8e\u4fe1\u606f\u8bba\uff0c\u8861\u91cf\u4e24\u4e2a\u5206\u5e03\u4e4b\u95f4\u7684\u5dee\u5f02 \u4ee4\u771f\u5b9e\u6982\u7387\u5206\u5e03\u4e3a \\(p\\) \u4ee4\u6211\u4eec\u8ba1\u7b97\u7684\u6a21\u578b\u6982\u7387\u4e3a \\(q\\) \u4ea4\u53c9\u71b5\u4e3a \\[ H(p, q)=-\\sum_{c=1}^{C} p(c) \\log q(c) \\] \u5047\u8bbe groud truth (or true or gold or target)\u7684\u6982\u7387\u5206\u5e03\u5728\u6b63\u786e\u7684\u7c7b\u4e0a\u4e3a1\uff0c\u5728\u5176\u4ed6\u4efb\u4f55\u5730\u65b9\u4e3a0\uff1a \\(p = [0,\u2026,0,1,0,\u20260]\\) \u56e0\u4e3a \\(p\\) \u662f\u72ec\u70ed\u5411\u91cf\uff0c\u6240\u4ee5\u552f\u4e00\u5269\u4e0b\u7684\u9879\u662f\u771f\u5b9e\u7c7b\u7684\u8d1f\u5bf9\u6570\u6982\u7387 Classification over a full dataset \u5728\u6574\u4e2a\u6570\u636e\u96c6 \\(\\left\\{x_{i}, y_{i}\\right\\}_{i=1}^{N}\\) \u4e0a\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\uff0c\u662f\u6240\u6709\u6837\u672c\u7684\u4ea4\u53c9\u71b5\u7684\u5747\u503c \\[ J(\\theta)=\\frac{1}{N} \\sum_{i=1}^{N}-\\log \\left(\\frac{e^{f_{y_{i}}}}{\\sum_{c=1}^{C} e^{f_{c}}}\\right) \\] \u6211\u4eec\u4e0d\u4f7f\u7528 \\[ f_{y}=f_{y}(x)=W_{y} \\cdot x=\\sum_{j=1}^{d} W_{y j} x_{j} \\] \u6211\u4eec\u4f7f\u7528\u77e9\u9635\u6765\u8868\u793a \\(f\\) \\[ f = Wx \\] Traditional ML optimization \u4e00\u822c\u673a\u5668\u5b66\u4e60\u7684\u53c2\u6570 \\(\\theta\\) \u901a\u5e38\u53ea\u7531W\u7684\u5217\u7ec4\u6210 \\[ \\theta=\\left[\\begin{array}{c}{W_{\\cdot 1}} \\\\ {\\vdots} \\\\ {W_{\\cdot d}}\\end{array}\\right]=W( :) \\in \\mathbb{R}^{C d} \\] \u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u66f4\u65b0\u51b3\u7b56\u8fb9\u754c \\[ \\nabla_{\\theta} J(\\theta)=\\left[\\begin{array}{c}{\\nabla_{W_{1}}} \\\\ {\\vdots} \\\\ {\\nabla_{W_{d}}}\\end{array}\\right] \\in \\mathbb{R}^{C d} \\]","title":"Classification setup and notation"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#neural-network-classifiers","text":"\u5355\u72ec\u4f7f\u7528Softmax(\u2248logistic\u56de\u5f52)\u5e76\u4e0d\u5341\u5206\u5f3a\u5927 Softmax\u53ea\u7ed9\u51fa\u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u8fd9\u53ef\u80fd\u662f\u76f8\u5f53\u6709\u9650\u7684\uff0c\u5f53\u95ee\u9898\u5f88\u590d\u6742\u65f6\u662f\u65e0\u7528\u7684 \u7ea0\u6b63\u8fd9\u4e9b\u9519\u8bef\u4e0d\u662f\u5f88\u9177\u5417? Neural Nets for the Win! \u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u5b66\u4e60\u66f4\u590d\u6742\u7684\u51fd\u6570\u548c\u975e\u7ebf\u6027\u51b3\u7b56\u8fb9\u754c \u66f4\u9ad8\u7ea7\u7684\u5206\u7c7b\u9700\u8981 \u8bcd\u5411\u91cf \u66f4\u6df1\u5c42\u6b21\u7684\u6df1\u5c42\u795e\u7ecf\u7f51\u7edc Classification difference with word vectors \u4e00\u822c\u5728NLP\u6df1\u5ea6\u5b66\u4e60\u4e2d \u6211\u4eec\u5b66\u4e60\u4e86\u77e9\u9635 \\(W\\) \u548c\u8bcd\u5411\u91cf \\(x\\) \u6211\u4eec\u5b66\u4e60\u4f20\u7edf\u53c2\u6570\u548c\u8868\u793a \u8bcd\u5411\u91cf\u662f\u5bf9\u72ec\u70ed\u5411\u91cf\u7684\u91cd\u65b0\u8868\u793a\u2014\u2014\u5728\u4e2d\u95f4\u5c42\u5411\u91cf\u7a7a\u95f4\u4e2d\u79fb\u52a8\u5b83\u4eec\u2014\u2014\u4ee5\u4fbf\u4f7f\u7528(\u7ebf\u6027)softmax\u5206\u7c7b\u5668\u901a\u8fc7 x = Le \u5c42\u8fdb\u884c\u5206\u7c7b \u5373\u5c06\u8bcd\u5411\u91cf\u7406\u89e3\u4e3a\u4e00\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u8f93\u5165\u5355\u8bcd\u7684\u72ec\u70ed\u5411\u91cf\u5e76\u83b7\u5f97\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u6211\u4eec\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u3002\u5176\u4e2d\uff0c \\(Vd\\) \u662f\u6570\u91cf\u5f88\u5927\u7684\u53c2\u6570 \\[ \\nabla_{\\theta} J(\\theta)=\\left[\\begin{array}{c}{\\nabla_{W_{1}}} \\\\ {\\vdots} \\\\ {\\nabla_{W_{d a r d v a r k}}} \\\\ {\\vdots} \\\\ {\\nabla_{x_{z e b r a}}}\\end{array}\\right] \\in \\mathbb{R}^{C d + V d} \\] Neural computation An artificial neuron \u795e\u7ecf\u7f51\u7edc\u6709\u81ea\u5df1\u7684\u672f\u8bed\u5305 \u4f46\u5982\u679c\u4f60\u4e86\u89e3 softmax \u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7406\u89e3\u795e\u7ecf\u5143\u7684\u64cd\u4f5c A neuron can be a binary logistic regression unit \\(f = \\text{nonlinear activation fct. (e.g. sigmoid)} , w =\\text{weights}, b =\\text{bias}, h =\\text{hidden}, x = \\text{inputs}\\) $$ \\begin{array}{l}{h_{w, b}(x)=f\\left(w^{\\top} x+b\\right)} \\ {f(z)=\\frac{1}{1+e^{-z}}}\\end{array} $$ \\(b\\) : \u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e2a\u201c\u603b\u662f\u6253\u5f00\u201d\u7684\u7279\u6027\uff0c\u5b83\u7ed9\u51fa\u4e00\u4e2a\u5148\u9a8c\u7c7b\uff0c\u6216\u8005\u5c06\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u504f\u5411\u9879\u5206\u79bb\u51fa\u6765 \\(w,b\\) \u662f\u795e\u7ecf\u5143\u7684\u53c2\u6570 A neural network = running several logistic regressions at the same time \u5982\u679c\u6211\u4eec\u8f93\u5165\u4e00\u4e2a\u5411\u91cf\u901a\u8fc7\u4e00\u7cfb\u5217\u903b\u8f91\u56de\u5f52\u51fd\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u8f93\u51fa\u5411\u91cf\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u9700\u8981\u63d0\u524d\u51b3\u5b9a\u8fd9\u4e9b\u903b\u8f91\u56de\u5f52\u8bd5\u56fe\u9884\u6d4b\u7684\u53d8\u91cf\u662f\u4ec0\u4e48\u3002 \u6211\u4eec\u53ef\u4ee5\u8f93\u5165\u53e6\u4e00\u4e2alogistic\u56de\u5f52\u51fd\u6570\u3002\u635f\u5931\u51fd\u6570\u5c06\u6307\u5bfc\u4e2d\u95f4\u9690\u85cf\u53d8\u91cf\u5e94\u8be5\u662f\u4ec0\u4e48\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u9884\u6d4b\u4e0b\u4e00\u5c42\u7684\u76ee\u6807\u3002\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u3002 Matrix notation for a layer $$ \\begin{array}{l}{a_{1}=f\\left(W_{11} x_{1}+W_{12} x_{2}+W_{13} x_{3}+b_{1}\\right)} \\ {a_{2}=f\\left(W_{21} x_{1}+W_{22} x_{2}+W_{23} x_{3}+b_{2}\\right)}\\ {z=W x+b} \\ {a=f(z)} \\ f\\left(\\left[z_{1}, z_{2}, z_{3}\\right]\\right)=\\left[f\\left(z_{1}\\right), f\\left(z_{2}\\right), f\\left(z_{3}\\right)\\right] \\end{array} $$ \\(f(x)\\) \u5728\u8fd0\u7b97\u65f6\u662f element-wise \u9010\u5143\u7d20\u7684 Non-linearities (aka \u201cf \u201d): Why they\u2019re needed \u4f8b\u5982\uff1a\u51fd\u6570\u8fd1\u4f3c\uff0c\u5982\u56de\u5f52\u6216\u5206\u7c7b \u6ca1\u6709\u975e\u7ebf\u6027\uff0c\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u53ea\u80fd\u505a\u7ebf\u6027\u53d8\u6362 \u591a\u4e2a\u7ebf\u6027\u53d8\u6362\u53ef\u4ee5\u7ec4\u6210\u4e00\u4e2a\u7684\u7ebf\u6027\u53d8\u6362 \\(W_1 W_2 x = Wx\\) \u56e0\u4e3a\u7ebf\u6027\u53d8\u6362\u662f\u4ee5\u67d0\u79cd\u65b9\u5f0f\u65cb\u8f6c\u548c\u62c9\u4f38\u7a7a\u95f4\uff0c\u591a\u6b21\u7684\u65cb\u8f6c\u548c\u62c9\u4f38\u53ef\u4ee5\u878d\u5408\u4e3a\u4e00\u6b21\u7ebf\u6027\u53d8\u6362 \u5bf9\u4e8e\u975e\u7ebf\u6027\u51fd\u6570\u800c\u8a00\uff0c\u4f7f\u7528\u66f4\u591a\u7684\u5c42\uff0c\u4ed6\u4eec\u53ef\u4ee5\u8fd1\u4f3c\u66f4\u590d\u6742\u7684\u51fd\u6570","title":"Neural Network Classifiers"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#named-entity-recognition-ner","text":"\u4efb\u52a1\uff1a\u4f8b\u5982\uff0c\u67e5\u627e\u548c\u5206\u7c7b\u6587\u672c\u4e2d\u7684\u540d\u79f0 \u53ef\u80fd\u7684\u7528\u9014 \u8ddf\u8e2a\u6587\u6863\u4e2d\u63d0\u5230\u7684\u7279\u5b9a\u5b9e\u4f53\uff08\u7ec4\u7ec7\u3001\u4e2a\u4eba\u3001\u5730\u70b9\u3001\u6b4c\u66f2\u540d\u3001\u7535\u5f71\u540d\u7b49\uff09 \u5bf9\u4e8e\u95ee\u9898\u56de\u7b54\uff0c\u7b54\u6848\u901a\u5e38\u662f\u547d\u540d\u5b9e\u4f53 \u8bb8\u591a\u9700\u8981\u7684\u4fe1\u606f\u5b9e\u9645\u4e0a\u662f\u547d\u540d\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u8054 \u540c\u6837\u7684\u6280\u672f\u53ef\u4ee5\u6269\u5c55\u5230\u5176\u4ed6 slot-filling \u69fd\u586b\u5145 \u5206\u7c7b \u901a\u5e38\u540e\u9762\u662f\u547d\u540d\u5b9e\u4f53\u94fe\u63a5/\u89c4\u8303\u5316\u5230\u77e5\u8bc6\u5e93 Named Entity Recognition on word sequences \u6211\u4eec\u901a\u8fc7\u5728\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b\uff0c\u7136\u540e\u5c06\u5b9e\u4f53\u63d0\u53d6\u4e3a\u5355\u8bcd\u5b50\u5e8f\u5217\u6765\u9884\u6d4b\u5b9e\u4f53 Why might NER be hard? \u5f88\u96be\u8ba1\u7b97\u51fa\u5b9e\u4f53\u7684\u8fb9\u754c \u7b2c\u4e00\u4e2a\u5b9e\u4f53\u662f \u201cFirst National Bank\u201d \u8fd8\u662f \u201cNational Bank\u201d \u5f88\u96be\u77e5\u9053\u67d0\u7269\u662f\u5426\u662f\u4e00\u4e2a\u5b9e\u4f53 \u662f\u4e00\u6240\u540d\u4e3a\u201cFuture School\u201d \u7684\u5b66\u6821\uff0c\u8fd8\u662f\u8fd9\u662f\u4e00\u6240\u672a\u6765\u7684\u5b66\u6821\uff1f \u5f88\u96be\u77e5\u9053\u672a\u77e5/\u65b0\u5947\u5b9e\u4f53\u7684\u7c7b\u522b \u201cZig Ziglar\u201d ? \u4e00\u4e2a\u4eba \u5b9e\u4f53\u7c7b\u662f\u6a21\u7cca\u7684\uff0c\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587 \u8fd9\u91cc\u7684\u201cCharles Schwab\u201d \u662f PER \u4e0d\u662f ORG","title":"Named Entity Recognition (NER)"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#binary-word-window-classification","text":"\u4e3a\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u8bed\u8a00\u6784\u5efa\u5206\u7c7b\u5668 \u4e00\u822c\u6765\u8bf4\uff0c\u5f88\u5c11\u5bf9\u5355\u4e2a\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b \u6709\u8da3\u7684\u95ee\u9898\uff0c\u5982\u4e0a\u4e0b\u6587\u6b67\u4e49\u51fa\u73b0 \u4f8b\u5b50\uff1aauto-antonyms \"To sanction\" can mean \"to permit\" or \"to punish\u201d \"To seed\" can mean \"to place seeds\" or \"to remove seeds\" \u4f8b\u5b50\uff1a\u89e3\u51b3\u6a21\u7cca\u547d\u540d\u5b9e\u4f53\u7684\u94fe\u63a5 Paris \u2192 Paris, France vs. Paris Hilton vs. Paris, Texas Hathaway \u2192 Berkshire Hathaway vs. Anne Hathaway Window classification \u601d\u60f3\uff1a\u5728**\u76f8\u90bb\u8bcd\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3**\u4e2d\u5bf9\u4e00\u4e2a\u8bcd\u8fdb\u884c\u5206\u7c7b \u4f8b\u5982\uff0c\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e2a\u5355\u8bcd\u7684\u547d\u540d\u5b9e\u4f53\u5206\u7c7b \u4eba\u3001\u5730\u70b9\u3001\u7ec4\u7ec7\u3001\u6ca1\u6709 \u5728\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u5355\u8bcd\u8fdb\u884c\u5206\u7c7b\u7684\u4e00\u4e2a\u7b80\u5355\u65b9\u6cd5\u53ef\u80fd\u662f\u5bf9\u7a97\u53e3\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u8fdb\u884c**\u5e73\u5747**\uff0c\u5e76\u5bf9\u5e73\u5747\u5411\u91cf\u8fdb\u884c\u5206\u7c7b \u95ee\u9898\uff1a \u8fd9\u4f1a\u4e22\u5931\u4f4d\u7f6e\u4fe1\u606f Window classification: Softmax \u8bad\u7ec3softmax\u5206\u7c7b\u5668\u5bf9\u4e2d\u5fc3\u8bcd\u8fdb\u884c\u5206\u7c7b\uff0c\u65b9\u6cd5\u662f\u5728\u4e00\u4e2a\u7a97\u53e3\u5185**\u5c06\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u8bcd\u5411\u91cf\u4e32\u8054\u8d77\u6765** \u4f8b\u5b50\uff1a\u5728\u8fd9\u53e5\u8bdd\u7684\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u201cParis\u201d\u8fdb\u884c\u5206\u7c7b\uff0c\u7a97\u53e3\u957f\u5ea6\u4e3a2 \u7ed3\u679c\u5411\u91cf \\(x_{window} = x \\in R^{5d}\\) \u662f\u4e00\u4e2a\u5217\u5411\u91cf Simplest window classifier: Softmax \u5bf9\u4e8e \\(x = x_{window}\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0e\u4e4b\u524d\u76f8\u540c\u7684softmax\u5206\u7c7b\u5668 \u5982\u4f55\u66f4\u65b0\u5411\u91cf\uff1f \u7b80\u800c\u8a00\u4e4b\uff1a\u5c31\u50cf\u4e0a\u5468\u90a3\u6837\uff0c\u6c42\u5bfc\u548c\u4f18\u5316 Binary classification with unnormalized scores \u4e4b\u524d\u7684\u4f8b\u5b50\uff1a \\(X_{\\text { window }}=[\\begin{array}{ccc}{\\mathrm{X}_{\\text { museums }}} & {\\mathrm{X}_{\\text { in }}} & {\\mathrm{X}_{\\text { paris }} \\quad \\mathrm{X}_{\\text { are }} \\quad \\mathrm{X}_{\\text { amazing }} ]}\\end{array}\\) \u5047\u8bbe\u6211\u4eec\u8981\u5bf9\u4e2d\u5fc3\u8bcd\u662f\u5426\u4e3a\u4e00\u4e2a\u5730\u70b9\uff0c\u8fdb\u884c\u5206\u7c7b \u4e0eword2vec\u7c7b\u4f3c\uff0c\u6211\u4eec\u5c06\u904d\u5386\u8bed\u6599\u5e93\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\u3002\u4f46\u8fd9\u4e00\u6b21\uff0c\u5b83\u5c06\u53d7\u5230\u76d1\u7763\uff0c\u53ea\u6709\u4e00\u4e9b\u4f4d\u7f6e\u80fd\u591f\u5f97\u5230\u9ad8\u5206\u3002 \u4f8b\u5982\uff0c\u5728\u4ed6\u4eec\u7684\u4e2d\u5fc3\u6709\u4e00\u4e2a\u5b9e\u9645\u7684NER Location\u7684\u4f4d\u7f6e\u662f\u201c\u771f\u5b9e\u7684\u201d\u4f4d\u7f6e\u4f1a\u83b7\u5f97\u9ad8\u5206 Binary classification for NER Location \u4f8b\u5b50\uff1aNot all museums in Paris are amazing \u8fd9\u91cc\uff1a\u4e00\u4e2a\u771f\u6b63\u7684\u7a97\u53e3\uff0c\u4ee5Paris\u4e3a\u4e2d\u5fc3\u7684\u7a97\u53e3\u548c\u6240\u6709\u5176\u4ed6\u7a97\u53e3\u90fd\u201c\u635f\u574f\u201d\u4e86\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u4e2d\u5fc3\u6ca1\u6709\u6307\u5b9a\u7684\u5b9e\u4f53\u4f4d\u7f6e\u3002 museums in Paris are amazing \u201c\u635f\u574f\u201d\u7a97\u53e3\u5f88\u5bb9\u6613\u627e\u5230\uff0c\u800c\u4e14\u6709\u5f88\u591a\uff1a\u4efb\u4f55\u4e2d\u5fc3\u8bcd\u6ca1\u6709\u5728\u6211\u4eec\u7684\u8bed\u6599\u5e93\u4e2d\u660e\u786e\u6807\u8bb0\u4e3aNER\u4f4d\u7f6e\u7684\u7a97\u53e3 Not all museums in Paris Neural Network Feed-forward Computation \u4f7f\u7528\u795e\u7ecf\u6fc0\u6d3b \\(a\\) \u7b80\u5355\u5730\u7ed9\u51fa\u4e00\u4e2a\u975e\u6807\u51c6\u5316\u7684\u5206\u6570 $$ score(x)=U^{T} a \\in \\mathbb{R} $$ \u6211\u4eec\u7528\u4e00\u4e2a\u4e09\u5c42\u795e\u7ecf\u7f51\u7edc\u8ba1\u7b97\u4e00\u4e2a\u7a97\u53e3\u7684\u5f97\u5206 \\(s = score(\"museums \\ in \\ Paris \\ are \\ amazing\u201d)\\) \\[ \\begin{array}{l}{s=U^{T} f(W x+b)} \\\\ {x \\in \\mathbb{R}^{20 \\times 1}, W \\in \\mathbb{R}^{8 \\times 20}, U \\in \\mathbb{R}^{8 \\times 1}}\\end{array} \\] Main intuition for extra layer \u4e2d\u95f4\u5c42\u5b66\u4e60\u8f93\u5165\u8bcd\u5411\u91cf\u4e4b\u95f4\u7684**\u975e\u7ebf\u6027\u4ea4\u4e92** \u4f8b\u5982\uff1a\u53ea\u6709\u5f53\u201cmuseum\u201d\u662f\u7b2c\u4e00\u4e2a\u5411\u91cf\u65f6\uff0c\u201cin\u201d\u653e\u5728\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u624d\u91cd\u8981 The max-margin loss \u5173\u4e8e\u8bad\u7ec3\u76ee\u6807\u7684\u60f3\u6cd5\uff1a\u8ba9\u771f\u5b9e\u7a97\u53e3\u7684\u5f97\u5206\u66f4\u9ad8\uff0c\u800c\u7834\u574f\u7a97\u53e3\u7684\u5f97\u5206\u66f4\u4f4e(\u76f4\u5230\u8db3\u591f\u597d\u4e3a\u6b62) \\(s = score(\"museums \\ in \\ Paris \\ are \\ amazing\u201d)\\) \\(s_c = score(\"Not \\ all \\ museums \\ in \\ Paris)\\) \u6700\u5c0f\u5316 \\(J=\\max \\left(0,1-s+s_{c}\\right)\\) \u8fd9\u662f\u4e0d\u53ef\u5fae\u7684\uff0c\u4f46\u5b83\u662f\u8fde\u7eed\u7684\u2192\u6211\u4eec\u53ef\u4ee5\u7528SGD\u3002 \u6bcf\u4e2a\u9009\u9879\u90fd\u662f\u8fde\u7eed\u7684 \u5355\u7a97\u53e3\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ J=\\max \\left(0,1-s+s_{c}\\right) \\] \u6bcf\u4e2a\u4e2d\u5fc3\u6709NER\u4f4d\u7f6e\u7684\u7a97\u53e3\u7684\u5f97\u5206\u5e94\u8be5\u6bd4\u4e2d\u5fc3\u6ca1\u6709\u4f4d\u7f6e\u7684\u7a97\u53e3\u9ad81\u5206 \u8981\u83b7\u5f97\u5b8c\u6574\u7684\u76ee\u6807\u51fd\u6570\uff1a\u4e3a\u6bcf\u4e2a\u771f\u7a97\u53e3\u91c7\u6837\u51e0\u4e2a\u635f\u574f\u7684\u7a97\u53e3\u3002\u5bf9\u6240\u6709\u57f9\u8bad\u7a97\u53e3\u6c42\u548c \u7c7b\u4f3c\u4e8eword2vec\u4e2d\u7684\u8d1f\u62bd\u6837 \u4f7f\u7528SGD\u66f4\u65b0\u53c2\u6570 \\(\\theta^{n e w}=\\theta^{o l d} - \\alpha \\nabla_{\\theta} J(\\theta)\\) \\(a\\) \u662f \u6b65\u957f\u6216\u662f\u5b66\u4e60\u7387 \u5982\u4f55\u8ba1\u7b97 \\(\\nabla_{\\theta} J(\\theta)\\) \uff1f \u624b\u5de5\u8ba1\u7b97\uff08\u672c\u8bfe\uff09 \u7b97\u6cd5\uff1a\u53cd\u5411\u4f20\u64ad\uff08\u4e0b\u4e00\u8bfe\uff09 Computing Gradients by Hand \u56de\u987e\u591a\u5143\u5bfc\u6570 \u77e9\u9635\u5fae\u79ef\u5206\uff1a\u5b8c\u5168\u77e2\u91cf\u5316\u7684\u68af\u5ea6 \u6bd4\u975e\u77e2\u91cf\u68af\u5ea6\u5feb\u5f97\u591a\uff0c\u4e5f\u66f4\u6709\u7528 \u4f46\u505a\u4e00\u4e2a\u975e\u77e2\u91cf\u68af\u5ea6\u53ef\u4ee5\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u5b9e\u8df5\uff1b\u4ee5\u4e0a\u5468\u7684\u8bb2\u5ea7\u4e3a\u4f8b notes \u66f4\u8be6\u7ec6\u5730\u6db5\u76d6\u4e86\u8fd9\u4e9b\u6750\u6599","title":"Binary word window classification"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#gradients","text":"\u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u67091\u4e2a\u8f93\u51fa\u548c1\u4e2a\u8f93\u5165 \\[ f(x) = x^3 \\] \u659c\u7387\u662f\u5b83\u7684\u5bfc\u6570 \\[ \\frac{d f}{d x}=3 x^{2} \\] \u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u67091\u4e2a\u8f93\u51fa\u548c n \u4e2a\u8f93\u5165 \\[ f(\\boldsymbol{x})=f\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right) \\] \u68af\u5ea6\u662f\u5173\u4e8e\u6bcf\u4e2a\u8f93\u5165\u7684\u504f\u5bfc\u6570\u7684\u5411\u91cf \\[ \\frac{\\partial f}{\\partial \\boldsymbol{x}}=\\left[\\frac{\\partial f}{\\partial x_{1}}, \\frac{\\partial f}{\\partial x_{2}}, \\ldots, \\frac{\\partial f}{\\partial x_{n}}\\right] \\] Jacobian Matrix: Generalization of the Gradient \u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\uff0c\u6709 m \u4e2a\u8f93\u51fa\u548c n \u4e2a\u8f93\u5165 \\[ \\boldsymbol{f}(\\boldsymbol{x})=\\left[f_{1}\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right), \\ldots, f_{m}\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)\\right] \\] \u5176\u96c5\u53ef\u6bd4\u77e9\u9635\u662f\u4e00\u4e2a \\(m \\times n\\) \u7684\u504f\u5bfc\u77e9\u9635 \\[ \\frac{\\partial \\boldsymbol{f}}{\\partial \\boldsymbol{x}}=\\left[\\begin{array}{ccc}{\\frac{\\partial f_{1}}{\\partial x_{1}}} & {\\cdots} & {\\frac{\\partial f_{1}}{\\partial x_{n}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial f_{m}}{\\partial x_{1}}} & {\\cdots} & {\\frac{\\partial f_{m}}{\\partial x_{n}}}\\end{array}\\right] \\] \\[ \\left(\\frac{\\partial f}{\\partial x}\\right)_{i j}=\\frac{\\partial f_{i}}{\\partial x_{j}} \\] Chain Rule \u5bf9\u4e8e\u5355\u53d8\u91cf\u51fd\u6570\uff1a\u4e58\u4ee5\u5bfc\u6570 $$ \\begin{array}{l}{z=3 y} \\ {y=x^{2}} \\ {\\frac{d z}{d x}=\\frac{d z}{d y} \\frac{d y}{d x}=(3)(2 x)=6 x}\\end{array} $$ \u5bf9\u4e8e\u4e00\u6b21\u5904\u7406\u591a\u4e2a\u53d8\u91cf\uff1a\u4e58\u4ee5\u96c5\u53ef\u6bd4\u77e9\u9635 $$ \\begin{array}{l}{\\textbf{h}=f(\\textbf{z})} \\ {\\textbf{z}=\\textbf{W} \\textbf{x}+\\textbf{b}} \\ {\\frac{\\partial \\textbf{h}}{\\partial \\textbf{x}}=\\frac{\\partial \\textbf{h}}{\\partial \\textbf{z}} \\frac{\\partial \\textbf{z}}{\\partial \\textbf{x}}=\\dots}\\end{array} $$ Example Jacobian: Elementwise activation Function \\(h=f(z)\\) , \\(\\frac{\\partial \\textbf{h}}{\\partial \\textbf{z}} = ?, \\textbf{h},\\textbf{z} \\in \\mathbb{R}^{n}\\) \u7531\u4e8e\u4f7f\u7528\u7684\u662f element-wise\uff0c\u6240\u4ee5 \\(h_{i}=f\\left(z_{i}\\right)\\) \u51fd\u6570\u6709n\u4e2a\u8f93\u51fa\u548cn\u4e2a\u8f93\u5165 \u2192 n\u00d7n \u7684\u96c5\u53ef\u6bd4\u77e9\u9635 \\[ \\begin{aligned}\\left(\\frac{\\partial h}{\\partial z}\\right)_{i j} &=\\frac{\\partial h_{i}}{\\partial z_{j}}=\\frac{\\partial}{\\partial z_{j}} f\\left(z_{i}\\right), \\text{definition of Jacobian} \\\\ &=\\left\\{\\begin{array}{ll}{f^{\\prime}\\left(z_{i}\\right)} & {\\text { if } i=j} \\\\ {0} & {\\text { if otherwise }} , \\text{regular 1-variable derivative} \\end{array}\\right.\\end{aligned} \\] \\[ \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}}= \\left(\\begin{array}{ccc}{f^{\\prime}\\left(z_{1}\\right)} & { } & {0} \\\\ {} & {\\ddots} & { } \\\\ {0} & { } & {f^{\\prime}\\left(z_{n}\\right)}\\end{array}\\right)=\\operatorname{diag}\\left(\\boldsymbol{f}^{\\prime}(\\boldsymbol{z})\\right) \\] Other Jacobians $$ \\begin{array}{l}{\\frac{\\partial}{\\partial \\boldsymbol{x}}(\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b})=\\boldsymbol{W}} \\ {\\frac{\\partial}{\\partial \\boldsymbol{b}}(\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b})=\\boldsymbol{I} \\text { (Identity matrix) }} \\ \\frac{\\partial}{\\partial \\boldsymbol{u}}\\left(\\boldsymbol{u}^{T} \\boldsymbol{h}\\right)=\\boldsymbol{h}^{\\boldsymbol{T}} \\end{array} $$ \u8fd9\u662f\u6b63\u786e\u7684\u96c5\u53ef\u6bd4\u77e9\u9635\u3002\u7a0d\u540e\u6211\u4eec\u5c06\u8ba8\u8bba\u201c\u5f62\u72b6\u7ea6\u5b9a\u201d\uff1b\u7528\u5b83\u5219\u7b54\u6848\u662f \\(h\\) \u3002 Back to our Neural Net! \u5982\u4f55\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial b}\\) \uff1f \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5173\u5fc3\u7684\u662f\u635f\u5931\u7684\u68af\u5ea6\uff0c\u4f46\u662f\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u5206\u6570\u7684\u68af\u5ea6 Break up equations into simple pieces Apply the chain rule $$ \\begin{array}{l}{s=\\boldsymbol{u}^{T} \\boldsymbol{h}} \\ {\\boldsymbol{h}=f(\\boldsymbol{z})} \\ {\\boldsymbol{z}=\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}} \\ {\\boldsymbol{x}} \\text{ (input) }\\end{array} $$ \\[ \\frac{\\partial s}{\\partial \\boldsymbol{b}}=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}} \\] \u5982\u4f55\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial \\textbf{W}}\\) \uff1f $$ \\begin{aligned} \\frac{\\partial s}{\\partial \\boldsymbol{W}} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\ \\frac{\\partial s}{\\partial \\boldsymbol{b}} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}} \\end{aligned} $$ \u524d\u4e24\u9879\u662f\u91cd\u590d\u7684\uff0c\u65e0\u987b\u91cd\u590d\u8ba1\u7b97 $$ \\begin{aligned} \\frac{\\partial s}{\\partial \\boldsymbol{W}} &=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\ \\frac{\\partial s}{\\partial \\boldsymbol{b}} &=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{b}}=\\boldsymbol{\\delta} \\ \\boldsymbol{\\delta} &=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}}=\\boldsymbol{u}^{T} \\circ f^{\\prime}(\\boldsymbol{z}) \\end{aligned} $$ \u5176\u4e2d\uff0c \\(\\delta\\) \u662f\u5c40\u90e8\u8bef\u5dee\u7b26\u53f7 Derivative with respect to Matrix: Output shape \\(\\boldsymbol{W} \\in \\mathbb{R}^{n \\times m}\\) \uff0c \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}\\) \u7684\u5f62\u72b6\u662f 1\u4e2a\u8f93\u51fa\uff0c \\(n \\times m\\) \u4e2a\u8f93\u5165\uff1a1 \u00d7 nm \u7684\u96c5\u53ef\u6bd4\u77e9\u9635\uff1f \u4e0d\u65b9\u4fbf\u66f4\u65b0\u53c2\u6570 \\(\\theta^{n e w}=\\theta^{o l d}-\\alpha \\nabla_{\\theta} J(\\theta)\\) \u800c\u662f\u9075\u5faa\u60ef\u4f8b\uff1a\u5bfc\u6570\u7684\u5f62\u72b6\u662f\u53c2\u6570\u7684\u5f62\u72b6 \uff08\u5f62\u72b6\u7ea6\u5b9a\uff09 \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}\\) \u7684\u5f62\u72b6\u662f \\(n \\times m\\) \\[ \\left[\\begin{array}{ccc}{\\frac{\\partial s}{\\partial W_{11}}} & {\\cdots} & {\\frac{\\partial s}{\\partial W_{1 m}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial s}{\\partial W_{n 1}}} & {\\cdots} & {\\frac{\\partial s}{\\partial W_{n m}}}\\end{array}\\right] \\] Derivative with respect to Matrix \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}}\\) \\(\\delta\\) \u5c06\u51fa\u73b0\u5728\u6211\u4eec\u7684\u7b54\u6848\u4e2d \u53e6\u4e00\u9879\u5e94\u8be5\u662f \\(x\\) \uff0c\u56e0\u4e3a \\(\\boldsymbol{z}=\\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}\\) \u8fd9\u8868\u660e \\(\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\boldsymbol{x}^{T}\\) Why the Transposes? $$ \\begin{array}{l}{\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\quad \\boldsymbol{x}^{T}} \\ {[n \\times m]} {[n \\times 1]} {[1 \\times m]}\\end{array} $$ \u7c97\u7cd9\u7684\u56de\u7b54\u662f\uff1a\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u51b3\u5c3a\u5bf8\u95ee\u9898\u4e86 \u68c0\u67e5\u5de5\u4f5c\u7684\u6709\u7528\u6280\u5de7 \u8bfe\u5802\u8bb2\u7a3f\u4e2d\u6709\u5b8c\u6574\u7684\u89e3\u91ca \u6bcf\u4e2a\u8f93\u5165\u5230\u6bcf\u4e2a\u8f93\u51fa\u2014\u2014\u4f60\u5f97\u5230\u7684\u662f\u5916\u90e8\u79ef \\[ \\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\boldsymbol{x}^{T}=\\left[\\begin{array}{c}{\\delta_{1}} \\\\ {\\vdots} \\\\ {\\delta_{n}}\\end{array}\\right]\\left[x_{1}, \\ldots, x_{m}\\right]=\\left[\\begin{array}{ccc}{\\delta_{1} x_{1}} & {\\dots} & {\\delta_{1} x_{m}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\delta_{n} x_{1}} & {\\dots} & {\\delta_{n} x_{m}}\\end{array}\\right] \\] What shape should derivatives be? \\(\\frac{\\partial s}{\\partial \\boldsymbol{b}}=\\boldsymbol{h}^{T} \\circ f^{\\prime}(\\boldsymbol{z})\\) \u662f\u884c\u5411\u91cf \u4f46\u662f\u4e60\u60ef\u4e0a\u8bf4\u68af\u5ea6\u5e94\u8be5\u662f\u4e00\u4e2a\u5217\u5411\u91cf\u56e0\u4e3a \\(b\\) \u662f\u4e00\u4e2a\u5217\u5411\u91cf \u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f(\u8fd9\u4f7f\u5f97\u94fe\u5f0f\u6cd5\u5219\u5f88\u5bb9\u6613)\u548c\u5f62\u72b6\u7ea6\u5b9a(\u8fd9\u4f7f\u5f97SGD\u5f88\u5bb9\u6613\u5b9e\u73b0)\u4e4b\u95f4\u7684\u5206\u6b67 \u6211\u4eec\u5e0c\u671b\u7b54\u6848\u9075\u5faa\u5f62\u72b6\u7ea6\u5b9a \u4f46\u662f\u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f\u5bf9\u4e8e\u8ba1\u7b97\u7b54\u6848\u5f88\u6709\u7528 \u4e24\u4e2a\u9009\u62e9 \u5c3d\u91cf\u4f7f\u7528\u96c5\u53ef\u6bd4\u77e9\u9635\u5f62\u5f0f\uff0c\u6700\u540e\u6309\u7167\u7ea6\u5b9a\u8fdb\u884c\u6574\u5f62 \u6211\u4eec\u521a\u521a\u505a\u7684\u3002\u4f46\u6700\u540e\u8f6c\u7f6e \\(\\frac{\\partial s}{\\partial \\boldsymbol{b}}\\) \u4f7f\u5bfc\u6570\u6210\u4e3a\u5217\u5411\u91cf\uff0c\u5f97\u5230 \\(\\delta ^ T\\) \u59cb\u7ec8\u9075\u5faa\u60ef\u4f8b \u67e5\u770b\u7ef4\u5ea6\uff0c\u627e\u51fa\u4f55\u65f6\u8f6c\u7f6e \u548c/\u6216 \u91cd\u65b0\u6392\u5e8f\u9879\u3002 \u53cd\u5411\u4f20\u64ad \u7b97\u6cd5\u9ad8\u6548\u5730\u8ba1\u7b97\u68af\u5ea6 \u5c06\u6211\u4eec\u521a\u521a\u624b\u5de5\u5b8c\u6210\u7684\u8f6c\u6362\u6210\u7b97\u6cd5 \u7528\u4e8e\u6df1\u5ea6\u5b66\u4e60\u8f6f\u4ef6\u6846\u67b6(TensorFlow, PyTorch, Chainer, etc.)","title":"Gradients"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#notes-03-neural-networks-backpropagation","text":"Keyphrases : Neural networks.Forward computation.Backward.propagation.Neuron Units.Max-margin Loss.Gradient checks.Xavier parameter initialization.Learning rates.Adagrad. \u6982\u8ff0 \uff1a\u8fd9\u7ec4\u7b14\u8bb0\u4ecb\u7ecd\u4e86\u5355\u5c42\u548c\u591a\u5c42\u795e\u7ecf\u7f51\u7edc\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u5b83\u4eec\u7528\u4e8e\u5206\u7c7b\u76ee\u7684\u3002\u7136\u540e\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a\u53cd\u5411\u4f20\u64ad\u7684\u5206\u5e03\u5f0f\u68af\u5ea6\u4e0b\u964d\u6280\u672f\u6765\u8bad\u7ec3\u5b83\u4eec\u3002\u6211\u4eec\u5c06\u770b\u5230\u5982\u4f55\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219\u6309\u987a\u5e8f\u8fdb\u884c\u53c2\u6570\u66f4\u65b0\u3002\u5728\u5bf9\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u4e25\u683c\u7684\u6570\u5b66\u8ba8\u8bba\u4e4b\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e00\u4e9b\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\u7684\u5b9e\u7528\u6280\u5de7\u548c\u6280\u5de7\uff0c\u5305\u62ec:\u795e\u7ecf\u5143\u5355\u5143(\u975e\u7ebf\u6027)\u3001\u68af\u5ea6\u68c0\u67e5\u3001Xavier\u53c2\u6570\u521d\u59cb\u5316\u3001\u5b66\u4e60\u7387\u3001Adagrad\u7b49\u3002\u6700\u540e,\u6211\u4eec\u5c06\u9f13\u52b1\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4f5c\u4e3a\u8bed\u8a00\u6a21\u578b\u3002","title":"Notes 03 Neural Networks, Backpropagation"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#1-neural-networks-foundations","text":"\u5728\u524d\u9762\u7684\u8ba8\u8bba\u4e2d\u8ba4\u4e3a\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u6570\u636e\u662f\u7ebf\u6027\u4e0d\u53ef\u5206\u7684\u6240\u4ee5\u9700\u8981\u975e\u7ebf\u6027\u5206\u7c7b\u5668\uff0c\u4e0d\u7136\u7684\u8bdd\u7ebf\u6027\u5206\u7c7b\u5668\u5728\u8fd9\u4e9b\u6570\u636e\u4e0a\u7684\u8868\u73b0\u662f\u6709\u9650\u7684\u3002\u795e\u7ecf\u7f51\u7edc\u5c31\u662f\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4e00\u7c7b\u5177\u6709\u975e\u7ebf\u6027\u51b3\u7b56\u5206\u754c\u7684\u5206\u7c7b\u5668\u3002\u73b0\u5728\u6211\u4eec\u77e5\u9053\u795e\u7ecf\u7f51\u7edc\u521b\u5efa\u7684\u51b3\u7b56\u8fb9\u754c\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u662f\u5982\u4f55\u521b\u5efa\u7684\u3002 \u795e\u7ecf\u7f51\u7edc\u662f\u53d7\u751f\u7269\u5b66\u542f\u53d1\u7684\u5206\u7c7b\u5668\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5b83\u4eec\u7ecf\u5e38\u88ab\u79f0\u4e3a\u201c\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u201d\uff0c\u4ee5\u533a\u522b\u4e8e\u6709\u673a\u7c7b\u3002\u7136\u800c\uff0c\u5728\u73b0\u5b9e\u4e2d\uff0c\u4eba\u7c7b\u795e\u7ecf\u7f51\u7edc\u6bd4\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u66f4\u6709\u80fd\u529b\u3001\u66f4\u590d\u6742\uff0c\u56e0\u6b64\u901a\u5e38\u6700\u597d\u4e0d\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u753b\u592a\u591a\u7684\u76f8\u4f3c\u70b9\u3002","title":"1 Neural Networks: Foundations"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#11-a-neuron","text":"\u795e\u7ecf\u5143\u662f\u4e00\u4e2a\u901a\u7528\u7684\u8ba1\u7b97\u5355\u5143\uff0c\u5b83\u63a5\u53d7 \\(n\\) \u4e2a\u8f93\u5165\u5e76\u4ea7\u751f\u4e00\u4e2a\u8f93\u51fa\u3002\u4e0d\u540c\u7684\u795e\u7ecf\u5143\u6839\u636e\u5b83\u4eec\u4e0d\u540c\u7684\u53c2\u6570\uff08\u4e00\u822c\u8ba4\u4e3a\u662f\u795e\u7ecf\u5143\u7684\u6743\u503c\uff09\u4f1a\u6709\u4e0d\u540c\u7684\u8f93\u51fa\u3002\u5bf9\u795e\u7ecf\u5143\u6765\u8bf4\u4e00\u4e2a\u5e38\u89c1\u7684\u9009\u62e9\u662f \\(sigmoid\\) \uff0c\u6216\u8005\u79f0\u4e3a\u201c\u4e8c\u5143\u903b\u8f91\u56de\u5f52\u201d\u5355\u5143\u3002\u8fd9\u79cd\u795e\u7ecf\u5143\u4ee5 \\(n\\) \u7ef4\u7684\u5411\u91cf\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u4e00\u4e2a\u6fc0\u6d3b\u6807\u91cf\uff08\u8f93\u51fa\uff09 \\(a\\) \u3002\u8be5\u795e\u7ecf\u5143\u8fd8\u4e0e\u4e00\u4e2a \\(n\\) \u7ef4\u7684\u6743\u91cd\u5411\u91cf \\(w\\) \u548c\u4e00\u4e2a\u504f\u7f6e\u6807\u91cf \\(b\\) \u76f8\u5173\u8054\u3002\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u51fa\u662f \\[ a=\\frac{1}{1+exp(-(w^{T}x+b))} \\] \u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u4e0a\u9762\u516c\u5f0f\u4e2d\u7684\u6743\u503c\u548c\u504f\u7f6e\u9879\u7ed3\u5408\u5728\u4e00\u8d77\uff1a \\[ a=\\frac{1}{1+exp(-[w^{T}\\;\\;x]\\cdot [x\\;\\;1])} \\] \u8fd9\u4e2a\u516c\u5f0f\u53ef\u4ee5\u4ee5\u4e0b\u56fe\u7684\u5f62\u5f0f\u53ef\u89c6\u5316 \u795e\u7ecf\u5143\u662f\u795e\u7ecf\u7f51\u7edc\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\u3002\u6211\u4eec\u5c06\u770b\u5230\u795e\u7ecf\u5143\u53ef\u4ee5\u662f\u8bb8\u591a\u5141\u8bb8\u975e\u7ebf\u6027\u5728\u7f51\u7edc\u4e2d\u79ef\u7d2f\u7684\u51fd\u6570\u4e4b\u4e00\u3002","title":"1.1 A Neuron"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#12-a-single-layer-of-neurons","text":"\u6211\u4eec\u5c06\u4e0a\u8ff0\u601d\u60f3\u6269\u5c55\u5230\u591a\u4e2a\u795e\u7ecf\u5143\uff0c\u8003\u8651\u8f93\u5165 \\(x\\) \u4f5c\u4e3a\u591a\u4e2a\u8fd9\u6837\u7684\u795e\u7ecf\u5143\u7684\u8f93\u5165\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5982\u679c\u6211\u4eec\u5b9a\u4e49\u4e0d\u540c\u7684\u795e\u7ecf\u5143\u7684\u6743\u503c\u4e3a \\(\\{w^{(1)},...,w^{(m)}\\}\\) \u3001\u504f\u7f6e\u4e3a \\(\\{b_{1},...,b_{m}\\}\\) \u548c\u76f8\u5bf9\u5e94\u7684\u6fc0\u6d3b\u8f93\u51fa\u4e3a \\(\\{a_{1},...,a_{m}\\}\\) \uff1a \\[ \\begin{matrix} a_{1} =\\frac{1}{1+exp(-(w^{(1)T}x+b))} \\\\ \\vdots \\\\ a_{m} =\\frac{1}{1+exp(-(w^{(m)T}x+b))} \\end{matrix} \\\\ \\] \u8ba9\u6211\u4eec\u5b9a\u4e49\u7b80\u5316\u516c\u5f0f\u4ee5\u4fbf\u4e8e\u66f4\u597d\u5730\u8868\u8fbe\u590d\u6742\u7684\u7f51\u7edc\uff1a \\[ \\sigma(z) = \\begin{bmatrix} \\frac{1}{1+exp(z_{1})} \\\\ \\vdots \\\\ \\frac{1}{1+exp(z_{m})} \\end{bmatrix} \\\\ b = \\begin{bmatrix} b_{1} \\\\ \\vdots \\\\ b_{m} \\end{bmatrix} \\in \\mathbb{R}^{m} \\\\ W = \\begin{bmatrix} -\\;\\;w^{(1)T}\\;\\;- \\\\ \\cdots \\\\ -\\;\\;w^{(m)T}\\;\\;- \\end{bmatrix} \\in \\mathbb{R}^{m\\times n} \\\\ \\] \u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u7f29\u653e\u548c\u504f\u5dee\u7684\u8f93\u51fa\u5199\u6210\uff1a \\[ \\mathbf{z}=\\mathbf{W}\\mathbf{x}+\\mathbf{b} \\\\ \\] \u6fc0\u6d3b\u51fd\u6570 sigmoid \u53ef\u4ee5\u53d8\u4e3a\u5982\u4e0b\u5f62\u5f0f\uff1a \\[ \\begin{bmatrix} a_{1} \\\\ \\vdots \\\\ a_{m} \\end{bmatrix} = \\sigma(\\mathbf{z}) = \\sigma(\\mathbf{W}\\mathbf{x}+\\mathbf{b}) \\\\ \\] \u90a3\u4e48\u8fd9\u4e9b\u6fc0\u6d3b\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6fc0\u6d3b\u770b\u4f5c\u662f\u4e00\u4e9b\u52a0\u6743\u7279\u5f81\u7ec4\u5408\u5b58\u5728\u7684\u6307\u6807\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6fc0\u6d3b\u7684\u7ec4\u5408\u6765\u6267\u884c\u5206\u7c7b\u4efb\u52a1\u3002","title":"1.2 A Single Layer of Neurons"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#13-feed-forward-computation","text":"\u5230\u76ee\u524d\u4e3a\u6b62\u6211\u4eec\u77e5\u9053\u4e00\u4e2a\u8f93\u5165\u5411\u91cf \\(x\\in \\mathbb{R}^{n}\\) \u53ef\u4ee5\u7ecf\u8fc7\u4e00\u5c42 \\(sigmoid\\) \u5355\u5143\u7684\u53d8\u6362\u5f97\u5230\u6fc0\u6d3b\u8f93\u51fa \\(a\\in \\mathbb{R}^{m}\\) \u3002\u4f46\u662f\u8fd9\u4e48\u505a\u7684\u76f4\u89c9\u662f\u4ec0\u4e48\u5462\uff1f\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a NLP \u4e2d\u7684\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u95ee\u9898\u4f5c\u4e3a\u4f8b\u5b50\uff1a \\[ Museums\\;in\\;Paris \\;are\\;amazing \\\\ \\] \u8fd9\u91cc\u6211\u4eec\u60f3\u5224\u65ad\u4e2d\u5fc3\u8bcd \\(Paris\\) \u662f\u4e0d\u662f\u4ee5\u547d\u540d\u5b9e\u4f53\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5f88\u53ef\u80fd\u4e0d\u4ec5\u60f3\u8981\u6355\u6349\u7a97\u53e3\u4e2d\u5355\u8bcd\u7684\u5355\u8bcd\u5411\u91cf\uff0c\u8fd8\u60f3\u8981\u6355\u6349\u5355\u8bcd\u4e4b\u95f4\u7684\u4e00\u4e9b\u5176\u4ed6\u4ea4\u4e92\uff0c\u4ee5\u4fbf\u8fdb\u884c\u5206\u7c7b\u3002\u4f8b\u5982\uff0c\u53ef\u80fd\u53ea\u6709 \\(Museums\\) \u662f\u7b2c\u4e00\u4e2a\u5355\u8bcd\u548c \\(in\\) \u662f\u7b2c\u4e8c\u4e2a\u5355\u8bcd\u7684\u65f6\u5019\uff0c \\(Paris\\) \u624d\u662f\u547d\u540d\u5b9e\u4f53\u3002\u8fd9\u6837\u7684\u975e\u7ebf\u6027\u51b3\u7b56\u901a\u5e38\u4e0d\u80fd\u88ab\u76f4\u63a5\u63d0\u4f9b\u7ed9Softmax\u51fd\u6570\u7684\u8f93\u5165\u6355\u83b7\uff0c\u800c\u662f\u9700\u8981\u7b2c1.2\u8282\u4e2d\u8ba8\u8bba\u7684\u4e2d\u95f4\u5c42\u8fdb\u884c\u8bc4\u5206\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u4e2a\u77e9\u9635 \\(\\mathbf{U} \\in \\mathbb{R}^{m \\times 1}\\) \u4e0e\u6fc0\u6d3b\u8f93\u51fa\u8ba1\u7b97\u5f97\u5230\u672a\u5f52\u4e00\u5316\u7684\u5f97\u5206\u7528\u4e8e\u5206\u7c7b\u4efb\u52a1\uff1a \\[ s=\\mathbf{U}^{T}a=\\mathbf{U}^{T}f(Wx+b) \\] \u5176\u4e2d \\(f\\) \u662f\u6fc0\u6d3b\u51fd\u6570\uff08\u4f8b\u5982 sigmoid \u51fd\u6570\uff09\u3002 \u7ef4\u5ea6\u5206\u6790 \uff1a\u5982\u679c\u6211\u4eec\u4f7f\u7528 4 \u7ef4\u7684\u8bcd\u5411\u91cf\u6765\u8868\u793a\u6bcf\u4e2a\u5355\u8bcd\u5e76\u4f7f\u7528 5 \u4e2a\u8bcd\u7684\u7a97\u53e3\uff0c\u5219\u8f93\u5165\u662f \\(x\\in \\mathbb{R}^{20}\\) \u3002\u5982\u679c\u6211\u4eec\u5728\u9690\u85cf\u5c42\u4f7f\u7528 8 \u4e2a sigmoid \u5355\u5143\u548c\u4ece\u6fc0\u6d3b\u51fd\u6570\u4e2d\u751f\u6210\u4e00\u4e2a\u5206\u6570\u8f93\u51fa\uff0c\u5176\u4e2d \\(W\\in \\mathbb{R}^{8\\times 20}\\) \uff0c \\(b\\in \\mathbb{R}^{8}\\) \uff0c \\(U\\in \\mathbb{R}^{8\\times 1}\\) \uff0c \\(s\\in \\mathbb{R}\\) \u3002","title":"1.3 Feed-forward Computation"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#14-maximum-margin-objective-function","text":"\u7c7b\u4f3c\u5f88\u591a\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u795e\u7ecf\u7f51\u7edc\u9700\u8981\u4e00\u4e2a\u4f18\u5316\u76ee\u6807\u51fd\u6570\uff0c\u4e00\u4e2a\u6211\u4eec\u60f3\u8981\u6700\u5c0f\u5316\u6216\u6700\u5927\u5316\u7684\u8bef\u5dee\u3002\u8fd9\u91cc\u6211\u4eec\u8ba8\u8bba\u4e00\u4e2a\u5e38\u7528\u7684\u8bef\u5dee\u5ea6\u91cf\u65b9\u6cd5\uff1a maximum margin objective \u6700\u5927\u95f4\u9694\u76ee\u6807\u51fd\u6570\u3002\u4f7f\u7528\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\u7684\u80cc\u540e\u7684\u601d\u60f3\u662f\u4fdd\u8bc1\u5bf9\u201c\u771f\u201d\u6807\u7b7e\u6570\u636e\u7684\u8ba1\u7b97\u5f97\u5206\u8981\u6bd4\u201c\u5047\u201d\u6807\u7b7e\u6570\u636e\u7684\u8ba1\u7b97\u5f97\u5206\u8981\u9ad8\u3002 \u56de\u5230\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u4ee4\u201c\u771f\u201d\u6807\u7b7e\u7a97\u53e3 \\(\\text{Museums in Paris are amazing}\\) \u7684\u8ba1\u7b97\u5f97\u5206\u4e3a s \uff0c\u4ee4\u201c\u5047\u201d\u6807\u7b7e\u7a97\u53e3 \\(\\text{Not all museums in Paris}\\) \u7684\u8ba1\u7b97\u5f97\u5206\u4e3a \\(s_{c}\\) \uff08\u4e0b\u6807 \\(c\\) \u8868\u793a\u8fd9\u4e2a\u8fd9\u4e2a\u7a97\u53e3 corrupt \uff09 \u7136\u540e\uff0c\u6211\u4eec\u5bf9\u76ee\u6807\u51fd\u6570\u6700\u5927\u5316 \\((s-s_{c})\\) \u6216\u8005\u6700\u5c0f\u5316 \\((s_{c}-s)\\) \u3002\u7136\u800c\uff0c\u6211\u4eec\u4fee\u6539\u76ee\u6807\u51fd\u6570\u6765\u4fdd\u8bc1\u8bef\u5dee\u4ec5\u5728 \\(s_{c} > s \\Rightarrow (s_{c}-s) > 0\\) \u624d\u8fdb\u884c\u8ba1\u7b97\u3002\u8fd9\u6837\u505a\u7684\u76f4\u89c9\u662f\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u201c\u6b63\u786e\u201d\u6570\u636e\u70b9\u7684\u5f97\u5206\u9ad8\u4e8e\u201c\u9519\u8bef\u201d\u6570\u636e\u70b9\uff0c\u5176\u4f59\u7684\u90fd\u4e0d\u91cd\u8981\u3002\u56e0\u6b64\uff0c\u5f53 \\(s_{c} > s\\) \u5219\u8bef\u5dee\u4e3a \\((s_{c}-s)\\) \uff0c\u5426\u5219\u4e3a 0 \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7684\u4f18\u5316\u7684\u76ee\u6807\u51fd\u6570\u73b0\u5728\u4e3a\uff1a \\[ minimize\\;J=max\\,(s_{c}-s,0) \\] \u7136\u800c\uff0c\u4e0a\u9762\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u662f\u6709\u98ce\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u4e0d\u80fd\u521b\u9020\u4e00\u4e2a\u5b89\u5168\u7684\u95f4\u9694\u3002\u6211\u4eec\u5e0c\u671b\u201c\u771f\u201d\u6570\u636e\u8981\u6bd4\u201c\u5047\u201d\u6570\u636e\u7684\u5f97\u5206\u5927\u4e8e\u67d0\u4e2a\u6b63\u7684\u95f4\u9694 \\(\\Delta\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u60f3\u8981\u8bef\u5dee\u5728 \\((s-s_{c} < \\Delta)\\) \u5c31\u5f00\u59cb\u8ba1\u7b97\uff0c\u800c\u4e0d\u662f\u5f53 \\((s-s_{c} < 0)\\) \u65f6\u5c31\u8ba1\u7b97\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4fee\u6539\u4f18\u5316\u76ee\u6807\u51fd\u6570\u4e3a\uff1a \\[ minimize\\;J=max\\,(\\Delta+s_{c}-s,0) \\] \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u95f4\u9694\u7f29\u653e\u4f7f\u5f97 \\(\\Delta=1\\) \uff0c\u8ba9\u5176\u4ed6\u53c2\u6570\u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\u81ea\u52a8\u8fdb\u884c\u8c03\u6574\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u6a21\u578b\u7684\u8868\u73b0\u3002\u5982\u679c\u60f3\u66f4\u591a\u5730\u4e86\u89e3\u8fd9\u65b9\u9762\uff0c\u53ef\u4ee5\u53bb\u8bfb\u4e00\u4e0b \\(SVM\\) \u4e2d\u7684\u51fd\u6570\u95f4\u9694\u548c\u51e0\u4f55\u95f4\u9694\u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u3002\u6700\u540e\uff0c\u6211\u4eec\u5b9a\u4e49\u5728\u6240\u6709\u8bad\u7ec3\u7a97\u53e3\u4e0a\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u4e3a\uff1a \\[ minimize\\;J=max\\,(1+s_{c}-s,0) \\] \u6309\u7167\u4e0a\u9762\u7684\u516c\u5f0f\u6709\uff0c \\(s_{c}=\\mathbf{U}^{T}f(Wx_{c}+b)\\) \u548c \\(s=\\mathbf{U}^{T}f(Wx+b)\\) \u3002 \u6700\u5927\u8fb9\u9645\u76ee\u6807\u51fd\u6570\u901a\u5e38\u4e0e\u652f\u6301\u5411\u91cf\u673a\u4e00\u8d77\u4f7f\u7528","title":"1.4 Maximum Margin Objective Function"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#15-training-with-backpropagation-elemental","text":"\u5728\u8fd9\u90e8\u5206\u6211\u4eec\u8ba8\u8bba\u5f531.4\u8282\u4e2d\u8ba8\u8bba\u7684\u635f\u5931\u51fd\u6570 \\(J\\) \u4e3a\u6b63\u65f6\uff0c\u6a21\u578b\u4e2d\u4e0d\u540c\u53c2\u6570\u65f6\u662f\u5982\u4f55\u8bad\u7ec3\u7684\u3002\u5982\u679c\u635f\u5931\u4e3a 0 \u65f6\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u518d\u66f4\u65b0\u53c2\u6570\u3002\u6211\u4eec\u4e00\u822c\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\uff08\u6216\u8005\u50cf SGD \u8fd9\u6837\u7684\u53d8\u4f53\uff09\u6765\u66f4\u65b0\u53c2\u6570\uff0c\u6240\u4ee5\u8981\u77e5\u9053\u5728\u66f4\u65b0\u516c\u5f0f\u4e2d\u9700\u8981\u7684\u4efb\u610f\u53c2\u6570\u7684\u68af\u5ea6\u4fe1\u606f\uff1a \\[ \\theta^{(t+1)}=\\theta^{(t)}-\\alpha\\nabla_{\\theta^{(t)}}J \\] \u53cd\u5411\u4f20\u64ad\u662f\u4e00\u79cd\u5229\u7528\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u6765\u8ba1\u7b97\u6a21\u578b\u4e0a\u4efb\u610f\u53c2\u6570\u7684\u635f\u5931\u68af\u5ea6\u7684\u65b9\u6cd5\u3002\u4e3a\u4e86\u66f4\u8fdb\u4e00\u6b65\u7406\u89e3\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u5148\u770b\u4e0b\u56fe\u4e2d\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u7f51\u7edc \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u53ea\u6709\u5355\u4e2a\u9690\u85cf\u5c42\u548c\u5355\u4e2a\u8f93\u51fa\u5355\u5143\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5148\u5efa\u7acb\u4e00\u4e9b\u7b26\u53f7\u5b9a\u4e49\uff1a \\(x_{i}\\) \u662f\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165 \\(s\\) \u662f\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa \u6bcf\u5c42\uff08\u5305\u62ec\u8f93\u5165\u548c\u8f93\u51fa\u5c42\uff09\u7684\u795e\u7ecf\u5143\u90fd\u63a5\u6536\u4e00\u4e2a\u8f93\u5165\u548c\u751f\u6210\u4e00\u4e2a\u8f93\u51fa\u3002\u7b2c \\(k\\) \u5c42\u7684\u7b2c \\(j\\) \u4e2a\u795e\u7ecf\u5143\u63a5\u6536\u6807\u91cf\u8f93\u5165 \\(z_{j}^{(k)}\\) \u548c\u751f\u6210\u4e00\u4e2a\u6807\u91cf\u6fc0\u6d3b\u8f93\u51fa \\(a_{j}^{(k)}\\) \u6211\u4eec\u628a \\(z_{j}^{(k)}\\) \u8ba1\u7b97\u51fa\u7684\u53cd\u5411\u4f20\u64ad\u8bef\u5dee\u5b9a\u4e49\u4e3a \\(\\delta_{j}^{(k)}\\) \u7b2c \\(1\\) \u5c42\u662f\u8f93\u5165\u5c42\uff0c\u800c\u4e0d\u662f\u7b2c \\(1\\) \u4e2a\u9690\u85cf\u5c42\u3002\u5bf9\u8f93\u5165\u5c42\u800c\u8a00\uff0c \\(x_{j}^{(k)}=z_{j}^{(k)}=a_{j}^{(k)}\\) \\(W^{(k)}\\) \u662f\u5c06\u7b2c k \u5c42\u7684\u8f93\u51fa\u6620\u5c04\u5230\u7b2c \\(k+1\\) \u5c42\u7684\u8f93\u5165\u7684\u8f6c\u79fb\u77e9\u9635\uff0c\u56e0\u6b64\u5c06\u8fd9\u4e2a\u65b0\u7684\u7b26\u53f7\u7528\u5728 \\(Section\\;1.3\\) \u4e2d\u7684\u4f8b\u5b50 \\(W^{(1)}=W\\) \u548c \\(W^{(2)}=U\\) \u3002 \u73b0\u5728\u5f00\u59cb\u53cd\u5411\u4f20\u64ad \uff1a\u5047\u8bbe\u635f\u5931\u51fd\u6570 \\(J=(1+s_{c}-s)\\) \u4e3a\u6b63\u503c\uff0c\u6211\u4eec\u60f3\u66f4\u65b0\u53c2\u6570 \\(W_{14}^{(1)}\\) \uff0c\u6211\u4eec\u770b\u5230 \\(W_{14}^{(1)}\\) \u53ea\u53c2\u4e0e\u4e86 \\(z_{1}^{(2)}\\) \u548c \\(a_{1}^{(2)}\\) \u7684\u8ba1\u7b97\u3002\u8fd9\u70b9\u5bf9\u4e8e\u7406\u89e3\u53cd\u5411\u4f20\u64ad\u662f\u975e\u5e38\u91cd\u8981\u7684\u2014\u2014 \u53cd\u5411\u4f20\u64ad\u7684\u68af\u5ea6\u53ea\u53d7\u5b83\u4eec\u6240\u8d21\u732e\u7684\u503c\u7684\u5f71\u54cd \u3002 \\(a_{1}^{(2)}\\) \u5728\u968f\u540e\u7684\u524d\u5411\u8ba1\u7b97\u4e2d\u548c \\(W_{1}^{(2)}\\) \u76f8\u4e58\u8ba1\u7b97\u5f97\u5206\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u6700\u5927\u95f4\u9694\u635f\u5931\u770b\u5230\uff1a $$ \\frac{\\partial J}{\\partial s}=-\\frac{\\partial J}{\\partial s_{c}}=-1 \\ $$ \u4e3a\u4e86\u7b80\u5316\u6211\u4eec\u53ea\u5206\u6790 \\(\\frac{\\partial s}{\\partial W_{ij}^{(1)}}\\) \u3002\u6240\u4ee5\uff0c \\[ \\begin{eqnarray} \\frac{\\partial s}{\\partial W_{ij}^{(1)}} &=& \\frac{\\partial W^{(2)}a^{(2)}}{\\partial W_{ij}^{(1)}}=\\frac{\\partial W_{i}^{(2)}a_{i}^{(2)}}{\\partial W_{ij}^{(1)}}=W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ \\Rightarrow W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial W_{ij}^{(1)}}&=& W_{i}^{(2)}\\frac{\\partial a_{i}^{(2)}}{\\partial z_{i}^{(2)}}\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}\\frac{f(z_{i}^{(2)})}{\\partial z_{i}^{(2)}}\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial z_{i}^{(2)}}{\\partial W_{ij}^{(1)}} \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial}{\\partial W_{ij}^{(1)}}(b_{i}^{(1)}+a_{1}^{(1)}W_{i1}^{(1)}+a_{2}^{(1)}W_{i2}^{(1)}+a_{3}^{(1)}W_{i3}^{(1)}+a_{4}^{(1)}W_{i4}^{(1)}) \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})\\frac{\\partial}{\\partial W_{ij}^{(1)}}(b_{i}^{(1)}+\\sum_{k}a_{k}^{(1)}W_{ik}^{(1)}) \\nonumber \\\\ &=& W_{i}^{(2)}f'(z_{i}^{(2)})a_{j}^{(1)} \\nonumber \\\\ &=& \\delta_{i}^{(2)}\\cdot a_{j}^{(1)} \\nonumber \\end{eqnarray} \\\\ \\] \u5176\u4e2d\uff0c \\(a^{(1)}\\) \u6307\u8f93\u5165\u5c42\u7684\u8f93\u5165\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u68af\u5ea6\u8ba1\u7b97\u6700\u540e\u53ef\u4ee5\u7b80\u5316\u4e3a \\(\\delta_{i}^{(2)}\\cdot a_{j}^{(1)}\\) \uff0c\u5176\u4e2d \\(\\delta_{i}^{(2)}\\) \u672c\u8d28\u4e0a\u662f\u7b2c \\(2\\) \u5c42\u4e2d\u7b2c \\(i\\) \u4e2a\u795e\u7ecf\u5143\u53cd\u5411\u4f20\u64ad\u7684\u8bef\u5dee\u3002 \\(a_{j}^{(1)}\\) \u4e0e \\(W_{ij}\\) \u76f8\u4e58\u7684\u7ed3\u679c\uff0c\u8f93\u5165\u7b2c \\(2\\) \u5c42\u4e2d\u7b2c \\(i\\) \u4e2a\u795e\u7ecf\u5143\u4e2d\u3002 \u6211\u4eec\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff0c\u8ba9\u6211\u4eec\u4ece\u201c\u8bef\u5dee\u5171\u4eab/\u5206\u914d\u201d\u7684\u6765\u9610\u91ca\u4e00\u4e0b\u53cd\u5411\u4f20\u64ad\uff0c\u73b0\u5728\u6211\u4eec\u8981\u66f4\u65b0 \\(W_{14}^{(1)}\\) \uff1a \u6211\u4eec\u4ece \\(a_{1}^{(3)}\\) \u7684 1 \u7684\u8bef\u5dee\u4fe1\u53f7\u5f00\u59cb\u53cd\u5411\u4f20\u64ad\u3002 \u7136\u540e\u6211\u4eec\u628a\u8bef\u5dee\u4e0e\u5c06 \\(z_{1}^{(3)}\\) \u6620\u5c04\u5230 \\(a_{1}^{(3)}\\) \u7684\u795e\u7ecf\u5143\u7684\u5c40\u90e8\u68af\u5ea6\u76f8\u4e58\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u68af\u5ea6\u6b63\u597d\u7b49\u4e8e 1 \uff0c\u5219\u8bef\u5dee\u4ecd\u7136\u4e3a 1 \u3002\u6240\u4ee5\u6709 \\(\\delta_{1}^{(3)}=1\\) \u3002 \u8fd9\u91cc\u8bef\u5dee\u4fe1\u53f7 1 \u5df2\u7ecf\u5230\u8fbe \\(z_{1}^{(3)}\\) \u3002\u6211\u4eec\u73b0\u5728\u9700\u8981\u5206\u914d\u8bef\u5dee\u4fe1\u53f7\u4f7f\u5f97\u8bef\u5dee\u7684\u201c\u516c\u5e73\u5171\u4eab\u201d\u5230\u8fbe \\(a_{1}^{(2)}\\) \u3002 \u73b0\u5728\u5728 \\(a_{1}^{(2)}\\) \u7684\u8bef\u5dee\u4e3a \\(\\delta_{1}^{(3)}\\times W_{1}^{(2)}=W_{1}^{(2)}\\) \uff08\u5728 \\(z_{1}^{(3)}\\) \u7684\u8bef\u5dee\u4fe1\u53f7\u4e3a \\(\\delta_{1}^{(3)}\\) \uff09\u3002\u56e0\u6b64\u5728 \\(a_{1}^{(2)}\\) \u7684\u8bef\u5dee\u4e3a \\(W_{1}^{(2)}\\) \u3002 \u4e0e\u7b2c 2 \u6b65\u7684\u505a\u6cd5\u76f8\u540c\uff0c\u6211\u4eec\u5728\u5c06 \\(z_{1}^{(2)}\\) \u6620\u5c04\u5230 \\(a_{1}^{(2)}\\) \u7684\u795e\u7ecf\u5143\u4e0a\u79fb\u52a8\u8bef\u5dee\uff0c\u5c06 \\(a_{1}^{(2)}\\) \u4e0e\u5c40\u90e8\u68af\u5ea6\u76f8\u4e58\uff0c\u8fd9\u91cc\u7684\u5c40\u90e8\u68af\u5ea6\u4e3a \\(f'(z_{1}^{(2)})\\) \u3002 \u56e0\u6b64\u5728 \\(z_{1}^{(2)}\\) \u7684\u8bef\u5dee\u662f \\(f'(z_{1}^{(2)})W_{1}^{(2)}\\) \uff0c\u6211\u4eec\u5c06\u5176\u5b9a\u4e49\u4e3a \\(\\delta_{1}^{(2)}\\) \u3002 \u6700\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u5c06\u4e0a\u9762\u7684\u8bef\u5dee\u4e0e\u53c2\u4e0e\u524d\u5411\u8ba1\u7b97\u7684 \\(a_{4}^{(1)}\\) \u76f8\u4e58\uff0c\u628a\u8bef\u5dee\u7684\u201c\u8bef\u5dee\u5171\u4eab\u201d\u5206\u914d\u5230 \\(W_{14}^{(1)}\\) \u3002 \u6240\u4ee5\uff0c\u5bf9\u4e8e \\(W_{14}^{(1)}\\) \u7684\u68af\u5ea6\u635f\u5931\u53ef\u4ee5\u8ba1\u7b97\u4e3a \\(a_{4}^{(1)}f'(z_{1}^{(2)})W_{1}^{(2)}\\) \u3002 \u6ce8\u610f\u6211\u4eec\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5f97\u5230\u7684\u7ed3\u679c\u662f\u548c\u4e4b\u524d\u5fae\u5206\u7684\u65b9\u6cd5\u7684\u7ed3\u679c\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002\u56e0\u6b64\uff0c\u8ba1\u7b97\u7f51\u7edc\u4e2d\u7684\u76f8\u5e94\u53c2\u6570\u7684\u68af\u5ea6\u8bef\u5dee\u65e2\u53ef\u4ee5\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8bef\u5dee\u5171\u4eab\u548c\u5206\u914d\u7684\u65b9\u6cd5\u2014\u2014\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u80fd\u5f97\u5230\u76f8\u540c\u7ed3\u679c\uff0c\u4f46\u662f\u591a\u79cd\u65b9\u5f0f\u8003\u8651\u5b83\u4eec\u53ef\u80fd\u662f\u6709\u5e2e\u52a9\u7684\u3002 \u504f\u7f6e\u66f4\u65b0 \uff1a\u504f\u7f6e\u9879\uff08\u4f8b\u5982 \\(b_{1}^{(1)}\\) \uff09\u548c\u5176\u4ed6\u6743\u503c\u5728\u6570\u5b66\u5f62\u5f0f\u662f\u7b49\u4ef7\u7684\uff0c\u53ea\u662f\u5728\u8ba1\u7b97\u4e0b\u4e00\u5c42\u795e\u7ecf \\(z_{1}^{(2)}\\) \u5143\u8f93\u5165\u65f6\u76f8\u4e58\u7684\u503c\u662f\u5e38\u91cf 1 \u3002\u56e0\u6b64\u5728\u7b2c k \u5c42\u7684\u7b2c i \u4e2a\u795e\u7ecf\u5143\u7684\u504f\u7f6e\u7684\u68af\u5ea6\u65f6 \\(\\delta_{i}^{(k)}\\) \u3002\u4f8b\u5982\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u66f4\u65b0\u7684\u662f \\(b_{1}^{(1)}\\) \u800c\u4e0d\u662f \\(W_{14}^{(1)}\\) \uff0c\u90a3\u4e48\u8fd9\u4e2a\u68af\u5ea6\u4e3a \\(f'(z_{1}^{(2)})W_{1}^{(2)}\\) \u3002 \u4ece \\(\\delta^{(k)}\\) \u5230 \\(\\delta^{(k-1)}\\) \u53cd\u5411\u4f20\u64ad\u7684\u4e00\u822c\u6b65\u9aa4\uff1a \u6211\u4eec\u6709\u4ece \\(z_{i}^{(k)}\\) \u5411\u540e\u4f20\u64ad\u7684\u8bef\u5dee \\(\\delta_{i}^{(k)}\\) \uff0c\u5982\u4e0b\u56fe\u6240\u793a \u6211\u4eec\u901a\u8fc7\u628a \\(\\delta_{i}^{(k)}\\) \u4e0e\u8def\u5f84\u4e0a\u7684\u6743\u503c \\(W_{ij}^{(k-1)}\\) \u76f8\u4e58\uff0c\u5c06\u8fd9\u4e2a\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u5230 \\(a_{j}^{(k-1)}\\) \u3002 \u56e0\u6b64\u5728 \\(a_{j}^{(k-1)}\\) \u63a5\u6536\u7684\u8bef\u5dee\u662f \\(\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002 \u7136\u800c\uff0c \\(a_{j}^{(k-1)}\\) \u5728\u524d\u5411\u8ba1\u7b97\u53ef\u80fd\u51fa\u4e0b\u56fe\u7684\u60c5\u51b5\uff0c\u4f1a\u53c2\u4e0e\u4e0b\u4e00\u5c42\u4e2d\u7684\u591a\u4e2a\u795e\u7ecf\u5143\u7684\u8ba1\u7b97\u3002\u90a3\u4e48\u7b2c k \u5c42\u7684\u7b2c \\(m\\) \u4e2a\u795e\u7ecf\u5143\u7684\u8bef\u5dee\u4e5f\u8981\u4f7f\u7528\u4e0a\u4e00\u6b65\u65b9\u6cd5\u5c06\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u5230 \\(a_{j}^{(k-1)}\\) \u4e0a\u3002 \u56e0\u6b64\u73b0\u5728\u5728 \\(a_{j}^{(k-1)}\\) \u63a5\u6536\u7684\u8bef\u5dee\u662f \\(\\delta_{i}^{(k)}W_{ij}^{(k-1)}+\\delta_{m}^{(k)}W_{mj}^{(k-1)}\\) \u3002 \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u9762\u8bef\u5dee\u548c\u7b80\u5316\u4e3a \\(\\sum_{i}\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002 \u73b0\u5728\u6211\u4eec\u6709\u5728 \\(a_{j}^{(k-1)}\\) \u6b63\u786e\u7684\u8bef\u5dee\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5c40\u90e8\u68af\u5ea6 \\(f'(z_{j}^{(k-1)})\\) \u76f8\u4e58\uff0c\u628a\u8bef\u5dee\u4fe1\u606f\u53cd\u5411\u4f20\u5230\u7b2c \\(k-1\\) \u5c42\u7684\u7b2c \\(j\\) \u4e2a\u795e\u7ecf\u5143\u4e0a\u3002 \u56e0\u6b64\u5230\u8fbe \\(z_{j}^{(k-1)}\\) \u7684\u8bef\u5dee\u4e3a \\(f'(z_{j}^{(k-1)})\\sum_{i}\\delta_{i}^{(k)}W_{ij}^{(k-1)}\\) \u3002","title":"1.5 Training with Backpropagation \u2013 Elemental"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#16-training-with-backpropagation-vectorized","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u5bf9\u6a21\u578b\u4e2d\u7684\u7ed9\u5b9a\u53c2\u6570\u8ba1\u7b97\u68af\u5ea6\u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u4f1a\u4e00\u822c\u6cdb\u5316\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4e00\u6b21\u8fc7\u66f4\u65b0\u6743\u503c\u77e9\u9635\u548c\u504f\u7f6e\u5411\u91cf\u3002\u6ce8\u610f\u8fd9\u53ea\u662f\u5bf9\u4e0a\u9762\u6a21\u578b\u7684\u7b80\u5355\u5730\u6269\u5c55\uff0c\u8fd9\u5c06\u6709\u52a9\u4e8e\u66f4\u597d\u7406\u89e3\u5728\u77e9\u9635-\u5411\u91cf\u7ea7\u522b\u4e0a\u8fdb\u884c\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u7684\u65b9\u6cd5\u3002 \u5bf9\u66f4\u5b9a\u7684\u53c2\u6570 \\(W_{ij}^{(k)}\\) \uff0c\u6211\u4eec\u77e5\u9053\u5b83\u7684\u8bef\u5dee\u68af\u5ea6\u662f \\(\\delta_{j}^{(k+1)}\\cdot a_{j}^{(k)}\\) \u3002\u5176\u4e2d \\(W^{(k)}\\) \u662f\u5c06 \\(a^{(k)}\\) \u6620\u5c04\u5230 \\(z^{(k+1)}\\) \u7684\u77e9\u9635\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u6574\u4e2a\u77e9\u9635 \\(W^{(k)}\\) \u7684\u68af\u5ea6\u8bef\u5dee\u4e3a\uff1a \\[ \\nabla_{W^{(k)}} = \\begin{bmatrix} \\delta_{1}^{(k+1)}a_{1}^{(k)} & \\delta_{1}^{(k+1)}a_{2}^{(k)} & \\cdots \\\\ \\delta_{2}^{(k+1)}a_{1}^{(k)} & \\delta_{2}^{(k+1)}a_{2}^{(k)} & \\cdots \\\\ \\vdots & \\vdots & \\ddots \\\\ \\end{bmatrix} = \\delta^{(k+1)}a^{(k)T} \\\\ \\] \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a\u77e9\u9635\u5f62\u5f0f\u7684\u68af\u5ea6\u5199\u4e3a\u5728\u77e9\u9635\u4e2d\u7684\u53cd\u5411\u4f20\u64ad\u7684\u8bef\u5dee\u5411\u91cf\u548c\u524d\u5411\u6fc0\u6d3b\u8f93\u51fa\u7684**\u5916\u79ef**\u3002 \u73b0\u5728\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u80fd\u591f\u8ba1\u7b97\u8bef\u5dee\u5411\u91cf \\(\\delta^{(k+1)}\\) \u3002\u6211\u4eec\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u6709\uff0c \\(\\delta_{i}^{(k)}=f'(z_{j}^{(k)})\\sum_{i}\\delta_{i}^{(k+1)}W_{ij}^{(k)}\\) \u3002\u8fd9\u53ef\u4ee5\u7b80\u5355\u5730\u6539\u5199\u4e3a\u77e9\u9635\u7684\u5f62\u5f0f\uff1a \\[ \\delta_{i}^{(k)}=f'(z^{(k)})\\circ (W^{(k)T}\\delta^{(k+1)}) \\\\ \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d \\(\\circ\\) \u8fd0\u7b97\u7b26\u662f\u8868\u793a\u5411\u91cf\u4e4b\u95f4\u5bf9\u5e94\u5143\u7d20\u7684\u76f8\u4e58\uff08 \\(\\mathbb{R}^{N}\\times \\mathbb{R}^{N}\\rightarrow \\mathbb{R}^{N}\\) \uff09\u3002 \u8ba1\u7b97\u6548\u7387 \uff1a\u5728\u63a2\u7d22\u4e86 element-wise \u7684\u66f4\u65b0\u548c vector-wise \u7684\u66f4\u65b0\u4e4b\u540e\uff0c\u5fc5\u987b\u8ba4\u8bc6\u5230\u5728\u79d1\u5b66\u8ba1\u7b97\u73af\u5883\u4e2d\uff0c\u5982 MATLAB \u6216 Python\uff08\u4f7f\u7528 Numpy / Scipy \u5e93\uff09\uff0c\u5411\u91cf\u5316\u8fd0\u7b97\u7684\u8ba1\u7b97\u6548\u7387\u662f\u975e\u5e38\u9ad8\u7684\u3002\u56e0\u6b64\u5728\u5b9e\u9645\u4e2d\u5e94\u8be5\u4f7f\u7528\u5411\u91cf\u5316\u8fd0\u7b97\u3002\u6b64\u5916\uff0c\u6211\u4eec\u4e5f\u8981\u51cf\u5c11\u53cd\u5411\u4f20\u64ad\u4e2d\u7684\u591a\u4f59\u7684\u8ba1\u7b97\u2014\u2014\u4f8b\u5982\uff0c\u6ce8\u610f\u5230 \\(\\delta^{(k)}\\) \u662f\u76f4\u63a5\u4f9d\u8d56\u5728 \\(\\delta^{(k+1)}\\) \u4e0a\u3002\u6240\u4ee5\u6211\u4eec\u8981\u4fdd\u8bc1\u4f7f\u7528 \\(\\delta^{(k+1)}\\) \u66f4\u65b0 \\(W^{(k)}\\) \u65f6\uff0c\u8981\u4fdd\u5b58 \\(\\delta^{(k+1)}\\) \u7528\u4e8e\u540e\u9762 \\(\\delta^{(k)}\\) \u7684\u8ba1\u7b97-\u7136\u540e\u8ba1\u7b97 \\((k-1)...(1)\\) \u5c42\u7684\u65f6\u5019\u91cd\u590d\u4e0a\u8ff0\u7684\u6b65\u9aa4\u3002\u8fd9\u6837\u7684\u9012\u5f52\u8fc7\u7a0b\u662f\u4f7f\u5f97\u53cd\u5411\u4f20\u64ad\u6210\u4e3a\u8ba1\u7b97\u4e0a\u53ef\u8d1f\u62c5\u7684\u8fc7\u7a0b\u3002","title":"1.6 Training with Backpropagation \u2013 Vectorized"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#2-neural-networks-tips-and-tricks","text":"","title":"2 Neural Networks: Tips and Tricks"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#21-gradient-check","text":"\u5728\u4e0a\u4e00\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u8be6\u7ec6\u5730\u8ba8\u8bba\u4e86\u5982\u4f55\u7528\u57fa\u4e8e\u5fae\u79ef\u5206\u7684\u65b9\u6cd5\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u53c2\u6570\u7684\u8bef\u5dee\u68af\u5ea6\uff0f\u66f4\u65b0\u3002\u8fd9\u91cc\u6211\u4eec\u4ecb\u7ecd\u4e00\u79cd\u7528\u6570\u503c\u8fd1\u4f3c\u8fd9\u4e9b\u68af\u5ea6\u7684\u65b9\u6cd5\u2014\u2014\u867d\u7136\u5728\u8ba1\u7b97\u4e0a\u7684\u4f4e\u6548\u4e0d\u80fd\u76f4\u63a5\u7528\u4e8e\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u975e\u5e38\u51c6\u786e\u5730\u4f30\u8ba1\u4efb\u4f55\u53c2\u6570\u7684\u5bfc\u6570\uff1b\u56e0\u6b64\uff0c\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u5bfc\u6570\u7684\u6b63\u786e\u6027\u7684\u6709\u7528\u7684\u68c0\u67e5\u3002\u7ed9\u5b9a\u4e00\u4e2a\u6a21\u578b\u7684\u53c2\u6570\u5411\u91cf \\(\\theta\\) \u548c\u635f\u5931\u51fd\u6570 \\(J\\) \uff0c\u56f4\u7ed5 \\(\\theta_{i}\\) \u7684\u6570\u503c\u68af\u5ea6\u7531 central difference formula \u5f97\u51fa\uff1a \\[ f'(\\theta)\\approx \\frac{J(\\theta^{(i+)})-\\theta^{(i-)})}{2\\epsilon} \\\\ \\] \u5176\u4e2d \\(\\epsilon\\) \u662f\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\uff08\u4e00\u822c\u7ea6\u4e3a \\(1e^{-5}\\) \uff09\u3002\u5f53\u6211\u4eec\u4f7f\u7528 \\(+\\epsilon\\) \u6270\u52a8\u53c2\u6570 \\(\\theta\\) \u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u65f6\uff0c\u5c31\u53ef\u4ee5\u5728\u524d\u5411\u4f20\u64ad\u4e0a\u8ba1\u7b97\u8bef\u5dee \\(J(\\theta^{(i+)})\\) \u3002\u76f8\u4f3c\u5730\uff0c\u5f53\u6211\u4eec\u4f7f\u7528 \\(-\\epsilon\\) \u6270\u52a8\u53c2\u6570 \\(\\theta\\) \u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u65f6\uff0c\u5c31\u53ef\u4ee5\u5728\u524d\u5411\u4f20\u64ad\u4e0a\u8ba1\u7b97\u8bef\u5dee \\(J(\\theta^{(i-)})\\) \u3002\u56e0\u6b64\uff0c\u8ba1\u7b97\u4e24\u6b21\u524d\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u53ef\u4ee5\u4f30\u8ba1\u5728\u6a21\u578b\u4e2d\u4efb\u610f\u7ed9\u5b9a\u53c2\u6570\u7684\u68af\u5ea6\u3002\u6211\u4eec\u6ce8\u610f\u5230\u6570\u503c\u68af\u5ea6\u7684\u5b9a\u4e49\u548c\u5bfc\u6570\u7684\u5b9a\u4e49\u5f88\u76f8\u4f3c\uff0c\u5176\u4e2d\uff0c\u5728\u6807\u91cf\u7684\u60c5\u51b5\u4e0b\uff1a \\[ f'(\\theta)\\approx \\frac{f(x+\\epsilon)-f(x)}{\\epsilon} \\\\ \\] \u5f53\u7136\uff0c\u8fd8\u662f\u6709\u4e00\u70b9\u4e0d\u540c\u2014\u2014\u4e0a\u9762\u7684\u5b9a\u4e49\u4ec5\u4ec5\u5728\u6b63\u5411\u6270\u52a8 \\(x\\) \u8ba1\u7b97\u68af\u5ea6\u3002\u867d\u7136\u662f\u53ef\u4ee5\u7528\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u6570\u503c\u68af\u5ea6\uff0c\u4f46\u5728\u5b9e\u9645\u4e2d\u4f7f\u7528 central difference formula \u5e38\u5e38\u53ef\u4ee5\u66f4\u51c6\u786e\u548c\u66f4\u7a33\u5b9a\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u4e24\u4e2a\u65b9\u5411\u90fd\u5bf9\u53c2\u6570\u6270\u52a8\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u903c\u8fd1\u4e00\u4e2a\u70b9\u9644\u8fd1\u7684\u5bfc\u6570/\u659c\u7387\uff0c\u6211\u4eec\u9700\u8981\u5728\u8be5\u70b9\u7684\u5de6\u8fb9\u548c\u53f3\u8fb9\u68c0\u67e5\u51fd\u6570 \\(f'\\) \u7684\u884c\u4e3a\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6cf0\u52d2\u5b9a\u7406\u6765\u8868\u793a central difference formula \u6709 \\(\\epsilon^{2}\\) \u6bd4\u4f8b\u8bef\u5dee\uff0c\u8fd9\u76f8\u5f53\u5c0f\uff0c\u800c\u5bfc\u6570\u5b9a\u4e49\u66f4\u5bb9\u6613\u51fa\u9519\u3002 \u73b0\u5728\u4f60\u53ef\u80fd\u4f1a\u4ea7\u751f\u7591\u95ee\uff0c\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u8fd9\u4e48\u51c6\u786e\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u7528\u5b83\u800c\u4e0d\u662f\u7528\u53cd\u5411\u4f20\u64ad\u6765\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u7684\u68af\u5ea6\uff1f\u8fd9\u662f\u56e0\u4e3a\u6548\u7387\u7684\u95ee\u9898\u2014\u2014\u6bcf\u5f53\u6211\u4eec\u60f3\u8ba1\u7b97\u4e00\u4e2a\u5143\u7d20\u7684\u68af\u5ea6\uff0c\u9700\u8981\u5728\u7f51\u7edc\u4e2d\u505a\u4e24\u6b21\u524d\u5411\u4f20\u64ad\uff0c\u8fd9\u6837\u662f\u5f88\u8017\u8d39\u8ba1\u7b97\u8d44\u6e90\u7684\u3002\u518d\u8005\uff0c\u5f88\u591a\u5927\u89c4\u6a21\u7684\u795e\u7ecf\u7f51\u7edc\u542b\u6709\u51e0\u767e\u4e07\u7684\u53c2\u6570\uff0c\u5bf9\u6bcf\u4e2a\u53c2\u6570\u90fd\u8ba1\u7b97\u4e24\u6b21\u660e\u663e\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u9009\u62e9\u3002\u540c\u65f6\u5728\u4f8b\u5982 SGD \u8fd9\u6837\u7684\u4f18\u5316\u6280\u672f\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u6570\u5343\u6b21\u7684\u8fed\u4ee3\u6765\u8ba1\u7b97\u68af\u5ea6\uff0c\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\u5f88\u5feb\u4f1a\u53d8\u5f97\u96be\u4ee5\u5e94\u4ed8\u3002\u8fd9\u79cd\u4f4e\u6548\u6027\u662f\u6211\u4eec\u53ea\u4f7f\u7528\u68af\u5ea6\u68c0\u9a8c\u6765\u9a8c\u8bc1\u6211\u4eec\u7684\u5206\u6790\u68af\u5ea6\u7684\u6b63\u786e\u6027\u7684\u539f\u56e0\u3002\u68af\u5ea6\u68c0\u9a8c\u7684\u5b9e\u73b0\u5982\u4e0b\u6240\u793a\uff1a def eval_numerical_gradient ( f , x ): \"\"\" a naive implementation of numerical gradient of f at x - f should be a function that takes a single argument - x is the point (numpy array) to evaluate the gradient at \"\"\" f ( x ) = f ( x ) # evaluate function value at original point grad = np . zeros ( x . shape ) h = 0.00001 # iterate over all indexes in x it = np . nditer ( x , flags = [ 'multi_index' , op_flags = [ 'readwrite' ]) while not it . finished : # evaluate function at x+h ix = it . multi_index old_value = x [ ix ] x [ ix ] = old_value + h # increment by h fxh_left = f ( x ) # evaluate f(x + h) x [ ix ] = old_value - h # decrement by h fxh_right = f ( x ) # evaluate f(x - h) # restore to previous value (very important!) x [ ix ] = old_value # compute the partial derivative # the slope grad [ ix ] = ( fxh_left - fxh_right ) / ( 2 * h ) it . iternext () # step to next dimension return grad","title":"2.1 Gradient Check"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#22-regularization","text":"\u548c\u5f88\u591a\u673a\u5668\u5b66\u4e60\u7684\u6a21\u578b\u4e00\u6837\uff0c\u795e\u7ecf\u7f51\u7edc\u5f88\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u8fd9\u4ee4\u5230\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u80fd\u83b7\u5f97\u8fd1\u4e4e\u5b8c\u7f8e\u7684\u8868\u73b0\uff0c\u4f46\u662f\u5374\u4e0d\u80fd\u6cdb\u5316\u5230\u6d4b\u8bd5\u96c6\u4e0a\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4e8e\u89e3\u51b3\u8fc7\u62df\u5408\uff08\u201c\u9ad8\u65b9\u5dee\u95ee\u9898\u201d\uff09\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 \\(L2\\) \u6b63\u5219\u5316\u3002\u6211\u4eec\u53ea\u9700\u8981\u5728\u635f\u5931\u51fd\u6570 \\(J\\) \u4e0a\u589e\u52a0\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u73b0\u5728\u7684\u635f\u5931\u51fd\u6570\u5982\u4e0b\uff1a \\[ J_{R}=J+\\lambda\\sum_{i=1}^{L}\\big|\\big|W^{(i)}\\big|\\big|_{F} \\\\ \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\big|\\big|W^{(i)}\\big|\\big|_{F}\\) \u662f\u77e9\u9635 \\(W^{(i)}\\) \uff08\u5728\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684\u7b2c \\(i\\) \u4e2a\u6743\u503c\u77e9\u9635\uff09\u7684 \\(Frobenius\\) \u8303\u6570, \\(\\lambda\\) \u662f\u8d85\u53c2\u6570\u63a7\u5236\u635f\u5931\u51fd\u6570\u4e2d\u7684\u6743\u503c\u7684\u5927\u5c0f\u3002 \u77e9\u9635 \\(U\\) \u7684 \\(Frobenius\\) \u8303\u6570\u7684\u5b9a\u4e49 \\(\\|U\\|_{F}=\\sqrt{\\sum_{i} \\sum_{l} U_{i l}^{2}}\\) \u5f53\u6211\u4eec\u5c1d\u8bd5\u53bb\u6700\u5c0f\u5316 \\(J_{R}\\) \uff0c\u6b63\u5219\u5316\u672c\u8d28\u4e0a\u5c31\u662f\u5f53\u4f18\u5316\u635f\u5931\u51fd\u6570\u7684\u65f6\u5019\uff0c\u60e9\u7f5a\u6570\u503c\u592a\u5927\u7684\u6743\u503c\uff08\u8ba9\u6743\u503c\u7684\u6570\u503c\u5206\u914d\u66f4\u52a0\u5747\u8861\uff0c\u9632\u6b62\u51fa\u73b0\u90e8\u5206\u6743\u503c\u7279\u522b\u5927\u7684\u60c5\u51b5\uff09\u3002\u7531\u4e8e \\(Frobenius\\) \u8303\u6570\u7684\u4e8c\u6b21\u7684\u6027\u8d28\uff08\u8ba1\u7b97\u77e9\u9635\u7684\u5143\u7d20\u7684\u5e73\u65b9\u548c\uff09\uff0c \\(L2\\) \u6b63\u5219\u9879\u6709\u6548\u5730\u964d\u4f4e\u4e86\u6a21\u578b\u7684\u7075\u6d3b\u6027\u548c\u56e0\u6b64\u51cf\u5c11\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u53ef\u80fd\u6027\u3002\u589e\u52a0\u8fd9\u6837\u4e00\u4e2a\u7ea6\u675f\u53ef\u4ee5**\u4f7f\u7528\u8d1d\u53f6\u65af\u6d3e\u7684\u601d\u60f3\u89e3\u91ca**\uff0c\u8fd9\u4e2a\u6b63\u5219\u9879\u662f\u5bf9\u6a21\u578b\u7684\u53c2\u6570\u52a0\u4e0a\u4e00\u4e2a**\u5148\u9a8c\u5206\u5e03**\uff0c\u4f18\u5316\u6743\u503c\u4f7f\u5176\u63a5\u8fd1\u4e8e 0\u2014\u2014\u6709\u591a\u63a5\u8fd1\u662f\u53d6\u51b3\u4e8e \\(\\lambda\\) \u7684\u503c\u3002\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684 \\(\\lambda\\) \u503c\u662f\u5f88\u91cd\u8981\u7684\uff0c\u5e76\u4e14\u9700\u8981\u901a\u8fc7\u8d85\u53c2\u6570\u8c03\u6574\u6765\u9009\u62e9\u3002 \\(\\lambda\\) \u7684\u503c\u592a\u5927\u4f1a\u4ee4\u5f88\u591a\u6743\u503c\u90fd\u63a5\u8fd1\u4e8e 0 \uff0c\u5219\u6a21\u578b\u5c31\u4e0d\u80fd\u5728\u8bad\u7ec3\u96c6\u4e0a\u5b66\u4e60\u5230\u6709\u610f\u4e49\u7684\u4e1c\u897f\uff0c\u7ecf\u5e38\u5728\u8bad\u7ec3\u3001\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8868\u73b0\u90fd\u975e\u5e38\u5dee\u3002 \\(\\lambda\\) \u7684\u503c\u592a\u5c0f\uff0c\u4f1a\u8ba9\u6a21\u578b\u4ecd\u65e7\u51fa\u73b0\u8fc7\u62df\u5408\u7684\u73b0\u8c61\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u504f\u7f6e\u9879\u4e0d\u4f1a\u88ab\u6b63\u5219\u5316\uff0c\u4e0d\u4f1a\u8ba1\u7b97\u5165\u635f\u5931\u9879\u4e2d\u2014\u2014\u5c1d\u8bd5\u53bb\u601d\u8003\u4e00\u4e0b\u4e3a\u4ec0\u4e48 \u4e3a\u4f55\u5728\u635f\u5931\u9879\u4e2d\u4e0d\u8ba1\u7b97\u504f\u7f6e\u9879\uff1f \u504f\u7f6e\u9879\u5728\u6a21\u578b\u4e2d\u4ec5\u4ec5\u662f\u504f\u79fb\u7684\u5173\u7cfb\uff0c\u4f7f\u7528\u5c11\u91cf\u7684\u6570\u636e\u5c31\u80fd\u62df\u5408\u5230\u8fd9\u9879\uff0c\u800c\u4e14\u4ece\u7ecf\u9a8c\u4e0a\u6765\u8bf4\uff0c\u504f\u7f6e\u503c\u7684\u5927\u5c0f\u5bf9\u6a21\u578b\u8868\u73b0\u6ca1\u6709\u5f88\u663e\u8457\u7684\u5f71\u54cd\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u6b63\u5219\u5316\u504f\u7f6e\u9879 \u6df1\u5ea6\u5b66\u4e60\u91cc\u9762\u7684\u504f\u7f6e\u4e3a\u4ec0\u4e48\u4e0d\u52a0\u6b63\u5219\uff1f \u4e0b\u9762\u6458\u5f55\u5df2\u6709\u7684\u4e09\u6761\u56de\u7b54 \u9996\u5148\u6b63\u5219\u5316\u4e3b\u8981\u662f\u4e3a\u4e86\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u800c\u8fc7\u62df\u5408\u4e00\u822c\u8868\u73b0\u4e3a\u6a21\u578b\u5bf9\u4e8e\u8f93\u5165\u7684\u5fae\u5c0f\u6539\u53d8\u4ea7\u751f\u4e86\u8f93\u51fa\u7684\u8f83\u5927\u5dee\u5f02\uff0c\u8fd9\u4e3b\u8981\u662f\u7531\u4e8e\u6709\u4e9b\u53c2\u6570w\u8fc7\u5927\u7684\u5173\u7cfb\uff0c\u901a\u8fc7\u5bf9||w||\u8fdb\u884c\u60e9\u7f5a\uff0c\u53ef\u4ee5\u7f13\u89e3\u8fd9\u79cd\u95ee\u9898\u3002\u800c\u5982\u679c\u5bf9||b||\u8fdb\u884c\u60e9\u7f5a\uff0c\u5176\u5b9e\u662f\u6ca1\u6709\u4f5c\u7528\u7684\uff0c\u56e0\u4e3a\u5728\u5bf9\u8f93\u51fa\u7ed3\u679c\u7684\u8d21\u732e\u4e2d\uff0c\u53c2\u6570b\u5bf9\u4e8e\u8f93\u5165\u7684\u6539\u53d8\u662f\u4e0d\u654f\u611f\u7684\uff0c\u4e0d\u7ba1\u8f93\u5165\u6539\u53d8\u662f\u5927\u8fd8\u662f\u5c0f\uff0c\u53c2\u6570b\u7684\u8d21\u732e\u5c31\u53ea\u662f\u52a0\u4e2a\u504f\u7f6e\u800c\u5df2\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4f60\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0cw\u548cb\u90fd\u8868\u73b0\u5f97\u5f88\u597d\uff0c\u4f46\u662f\u5728\u6d4b\u8bd5\u96c6\u4e0a\u53d1\u751f\u4e86\u8fc7\u62df\u5408\uff0cb\u662f\u4e0d\u80cc\u8fd9\u4e2a\u9505\u7684\uff0c\u56e0\u4e3a\u5b83\u5bf9\u4e8e\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u4e00\u89c6\u540c\u4ec1\u7684\uff08\u90fd\u53ea\u662f\u7ed9\u5b83\u4eec\u52a0\u4e2a\u504f\u7f6e\uff09\uff0c\u8981\u80cc\u9505\u7684\u662fw\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5bf9\u4e0d\u540c\u7684\u6570\u636e\u4ea7\u751f\u4e0d\u4e00\u6837\u7684\u52a0\u6743\u3002\u6216\u8005\u8bf4\uff0c\u6a21\u578b\u5bf9\u4e8e\u8f93\u5165\u7684\u5fae\u5c0f\u6539\u53d8\u4ea7\u751f\u4e86\u8f93\u51fa\u7684\u8f83\u5927\u5dee\u5f02\uff0c\u8fd9\u662f\u56e0\u4e3a\u6a21\u578b\u7684\u201c\u66f2\u7387\u201d\u592a\u5927\uff0c\u800c\u6a21\u578b\u7684\u66f2\u7387\u662f\u7531w\u51b3\u5b9a\u7684\uff0cb\u4e0d\u8d21\u732e\u66f2\u7387\uff08\u5bf9\u8f93\u5165\u8fdb\u884c\u6c42\u5bfc\uff0cb\u662f\u76f4\u63a5\u7ea6\u6389\u7684\uff09\u3002 \u4ece\u8d1d\u53f6\u65af\u7684\u89d2\u5ea6\u6765\u8bb2\uff0c\u6b63\u5219\u5316\u9879\u901a\u5e38\u90fd\u5305\u542b\u4e00\u5b9a\u7684\u5148\u9a8c\u4fe1\u606f\uff0c\u795e\u7ecf\u7f51\u7edc\u503e\u5411\u4e8e\u8f83\u5c0f\u7684\u6743\u91cd\u4ee5\u4fbf\u66f4\u597d\u5730\u6cdb\u5316\uff0c\u4f46\u662f\u5bf9\u504f\u7f6e\u5c31\u6ca1\u6709\u8fd9\u6837\u4e00\u81f4\u7684\u5148\u9a8c\u77e5\u8bc6\u3002\u53e6\u5916\uff0c\u5f88\u591a\u795e\u7ecf\u7f51\u7edc\u66f4\u503e\u5411\u4e8e\u533a\u5206\u65b9\u5411\u4fe1\u606f\uff08\u5bf9\u5e94\u4e8e\u6743\u91cd\uff09\uff0c\u800c\u4e0d\u662f\u4f4d\u7f6e\u4fe1\u606f\uff08\u5bf9\u5e94\u4e8e\u504f\u7f6e\uff09\uff0c\u6240\u4ee5\u5bf9\u504f\u7f6e\u52a0\u6b63\u5219\u5316\u9879\u5bf9\u63a7\u5236\u8fc7\u62df\u5408\u7684\u4f5c\u7528\u662f\u6709\u9650\u7684\uff0c\u76f8\u53cd\u5f88\u53ef\u80fd\u4f1a\u56e0\u4e3a\u4e0d\u6070\u5f53\u7684\u6b63\u5219\u5f3a\u5ea6\u5f71\u54cd\u795e\u7ecf\u7f51\u7edc\u627e\u5230\u6700\u4f18\u70b9\u3002 \u8fc7\u62df\u5408\u4f1a\u4f7f\u5f97\u6a21\u578b\u5bf9\u5f02\u5e38\u70b9\u5f88\u654f\u611f\uff0c\u5373\u51c6\u786e\u63d2\u5165\u5f02\u5e38\u70b9\uff0c\u5bfc\u81f4\u62df\u5408\u51fd\u6570\u4e2d\u7684\u66f2\u7387\u5f88\u5927\uff08\u5373\u51fd\u6570\u66f2\u7ebf\u7684\u5207\u7ebf\u659c\u7387\u975e\u5e38\u9ad8\uff09\uff0c\u800c\u504f\u7f6e\u5bf9\u6a21\u578b\u7684\u66f2\u7387\u6ca1\u6709\u8d21\u732e\uff08\u5bf9\u591a\u9879\u5f0f\u6a21\u578b\u8fdb\u884c\u6c42\u5bfc\uff0c\u4e3aW\u7684\u7ebf\u6027\u52a0\u548c\uff09\uff0c\u6240\u4ee5\u6b63\u5219\u5316\u4ed6\u4eec\u4e5f\u6ca1\u6709\u4ec0\u4e48\u610f\u4e49\u3002 \u6709\u65f6\u5019\u6211\u4eec\u4f1a\u7528\u5230\u5176\u4ed6\u7c7b\u578b\u7684\u6b63\u5219\u9879\uff0c\u4f8b\u5982 \\(L1\\) \u6b63\u5219\u9879\uff0c\u5b83\u5c06\u53c2\u6570\u5143\u7d20\u7684\u7edd\u5bf9\u503c\u5168\u90e8\u52a0\u8d77\u6765-\u7136\u800c\uff0c\u5728\u5b9e\u9645\u4e2d\u5f88\u5c11\u4f1a\u7528 \\(L1\\) \u6b63\u5219\u9879\uff0c\u56e0\u4e3a\u4f1a\u4ee4\u6743\u503c\u53c2\u6570\u53d8\u5f97\u7a00\u758f\u3002\u5728\u4e0b\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8ba8\u8bba dropout \uff0c\u8fd9\u662f\u53e6\u5916\u4e00\u79cd\u6709\u6548\u7684\u6b63\u5219\u5316\u65b9\u6cd5\uff0c\u901a\u8fc7\u5728\u524d\u5411\u4f20\u64ad\u8fc7\u7a0b\u968f\u673a\u5c06\u795e\u7ecf\u5143\u8bbe\u4e3a 0 Dropout \u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5ffd\u7565\u5b83\u4eec\u7684\u6743\u503c\u6765\u5b9e\u73b0\u201c\u51bb\u7ed3\u201d\u90e8\u5206 unit \u3002\u8fd9\u4e9b\u201c\u51bb\u7ed3\u201d\u7684 unit \u4e0d\u662f\u628a\u5b83\u4eec\u8bbe\u4e3a 0 \uff0c\u800c\u662f\u5bf9\u4e8e\u8be5\u8fed\u4ee3\uff0c\u7f51\u7edc\u5047\u5b9a\u5b83\u4eec\u4e3a 0 \u3002\u201c\u51bb\u7ed3\u201d\u7684 unit \u4e0d\u4f1a\u4e3a\u6b64\u6b21\u8fed\u4ee3\u66f4\u65b0","title":"2.2 Regularization"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#23-dropout","text":"Dropout \u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u6b63\u5219\u5316\u6280\u672f\uff0c\u662f Srivastava \u5728\u8bba\u6587 \u300aDropout: A Simple Way to Prevent Neural Networks from Over\ufb01tting\u300b\u4e2d\u9996\u6b21\u63d0\u51fa\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86 dropout \u5982\u4f55\u5e94\u7528\u5728\u795e\u7ecf\u7f51\u7edc\u4e0a\u3002 \u8fd9\u4e2a\u60f3\u6cd5\u662f\u7b80\u5355\u800c\u6709\u6548\u7684\u2014\u2014\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u5728\u6bcf\u6b21\u7684\u524d\u5411\uff0f\u53cd\u5411\u4f20\u64ad\u4e2d\u6211\u4eec\u6309\u7167\u4e00\u5b9a\u6982\u7387 \\((1-p)\\) \u968f\u673a\u5730\u201c drop \u201d\u4e00\u4e9b\u795e\u7ecf\u5143\u5b50\u96c6\uff08\u6216\u8005\u7b49\u4ef7\u7684\uff0c\u6211\u4eec\u4fdd\u6301\u4e00\u5b9a\u6982\u7387 \\(p\\) \u7684\u795e\u7ecf\u5143\u662f\u6fc0\u6d3b\u7684\uff09\u3002\u7136\u540e\uff0c\u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u5168\u90e8\u7684\u795e\u7ecf\u5143\u6765\u8fdb\u884c\u9884\u6d4b\u3002\u4f7f\u7528 Dropout \u795e\u7ecf\u7f51\u7edc\u4e00\u822c\u80fd\u4ece\u6570\u636e\u4e2d\u5b66\u5230\u66f4\u591a\u6709\u610f\u4e49\u7684\u4fe1\u606f\uff0c\u66f4\u5c11\u51fa\u73b0\u8fc7\u62df\u5408\u548c\u901a\u5e38\u5728\u73b0\u4eca\u7684\u4efb\u52a1\u4e0a\u83b7\u5f97\u66f4\u9ad8\u7684\u6574\u4f53\u8868\u73b0\u3002\u8fd9\u79cd\u6280\u672f\u5e94\u8be5\u5982\u6b64\u6709\u6548\u7684\u4e00\u4e2a\u76f4\u89c2\u539f\u56e0\u662f\uff0c dropout \u672c\u8d28\u4e0a\u4f5c\u7684\u662f\u4e00\u6b21\u4ee5\u6307\u6570\u5f62\u5f0f\u8bad\u7ec3\u8bb8\u591a\u8f83\u5c0f\u7684\u7f51\u7edc\uff0c\u5e76\u5bf9\u5176\u9884\u6d4b\u8fdb\u884c\u5e73\u5747\u3002 \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4f7f\u7528 dropout \u7684\u65b9\u5f0f\u662f\u6211\u4eec\u53d6\u6bcf\u4e2a\u795e\u7ecf\u5143\u5c42\u7684\u8f93\u51fa \\(h\\) \uff0c\u5e76\u4fdd\u6301\u6982\u7387 \\(p\\) \u7684\u795e\u7ecf\u5143\u662f\u6fc0\u6d3b\u7684\uff0c\u5426\u5219\u5c06\u795e\u7ecf\u5143\u8bbe\u7f6e\u4e3a 0 \u3002\u7136\u540e\uff0c\u5728\u53cd\u5411\u4f20\u64ad\u4e2d\u6211\u4eec\u4ec5\u5bf9\u5728\u524d\u5411\u4f20\u64ad\u4e2d\u6fc0\u6d3b\u7684\u795e\u7ecf\u5143\u56de\u4f20\u68af\u5ea6\u3002\u6700\u540e\uff0c\u5728\u6d4b\u8bd5\u8fc7\u7a0b\uff0c\u6211\u4eec\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u4e2d\u5168\u90e8\u7684\u795e\u7ecf\u5143\u8fdb\u884c\u524d\u5411\u4f20\u64ad\u8ba1\u7b97\u3002\u7136\u800c\uff0c\u6709\u4e00\u4e2a\u5173\u952e\u7684\u5fae\u5999\u4e4b\u5904\uff0c\u4e3a\u4e86\u4f7f dropout \u6709\u6548\u5730\u5de5\u4f5c\uff0c\u6d4b\u8bd5\u9636\u6bb5\u7684\u795e\u7ecf\u5143\u7684\u9884\u671f\u8f93\u51fa\u5e94\u4e0e\u8bad\u7ec3\u9636\u6bb5\u5927\u81f4\u76f8\u540c\u2014\u2014\u5426\u5219\u8f93\u51fa\u7684\u5927\u5c0f\u53ef\u80fd\u4f1a\u6709\u5f88\u5927\u7684\u4e0d\u540c\uff0c\u7f51\u7edc\u7684\u8868\u73b0\u5df2\u7ecf\u4e0d\u518d\u660e\u786e\u4e86\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u901a\u5e38\u5fc5\u987b\u5728\u6d4b\u8bd5\u9636\u6bb5\u5c06\u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u51fa\u9664\u4ee5\u67d0\u4e2a\u503c\u2014\u2014\u8fd9\u7559\u7ed9\u8bfb\u8005\u4f5c\u4e3a\u7ec3\u4e60\u6765\u786e\u5b9a\u8fd9\u4e2a\u503c\u5e94\u8be5\u662f\u591a\u5c11\uff0c\u4ee5\u4fbf\u5728\u8bad\u7ec3\u548c\u6d4b\u8bd5\u671f\u95f4\u7684\u9884\u671f\u8f93\u51fa\u76f8\u7b49\uff08\u8be5\u503c\u4e3a \\(p\\) \uff09 \u3002 \u4ee5\u4e0b\u6e90\u4e8e \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b P190 \u76ee\u7684\uff1a\u7f13\u89e3\u8fc7\u62df\u5408\u95ee\u9898\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u8fbe\u5230\u6b63\u5219\u5316\u7684\u6548\u679c \u6548\u679c\uff1a\u51cf\u5c11\u4e0b\u5c42\u8282\u70b9\u5bf9\u5176\u7684\u4f9d\u8d56\uff0c\u8feb\u4f7f\u7f51\u7edc\u53bb\u5b66\u4e60\u66f4\u52a0**\u9c81\u68d2**\u7684\u7279\u5f81 \u96c6\u6210\u5b66\u4e60\u7684\u89e3\u91ca \ud83d\udc4d \u6bcf\u505a\u4e00\u6b21\u4e22\u5f03\uff0c\u76f8\u5f53\u4e8e\u4ece\u539f\u59cb\u7684\u7f51\u7edc\u4e2d\u91c7\u6837\u5f97\u5230\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002 \u5982\u679c\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u6709 \\(n\\) \u4e2a\u795e\u7ecf\u5143\uff0c\u90a3\u4e48\u603b\u5171\u53ef\u4ee5\u91c7\u6837\u51fa \\(2^n\\) \u4e2a\u5b50\u7f51\u7edc\u3002\u6bcf\u6b21\u8fed\u4ee3\u90fd\u76f8\u5f53\u4e8e\u8bad\u7ec3\u4e00\u4e2a\u4e0d\u540c\u7684\u5b50\u7f51\u7edc\uff0c\u8fd9\u4e9b\u5b50\u7f51\u7edc\u90fd\u5171\u4eab\u539f\u59cb\u7f51\u7edc\u7684\u53c2\u6570\u3002\u90a3\u4e48\uff0c\u6700\u7ec8\u7684\u7f51\u7edc\u53ef\u4ee5\u8fd1\u4f3c\u770b\u4f5c\u662f\u96c6\u6210\u4e86\u6307\u6570\u7ea7\u4e2a\u4e0d\u540c\u7f51\u7edc\u7684\u7ec4\u5408\u6a21\u578b\u3002 \u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u89e3\u91ca \ud83d\udc4d \u4e22\u5f03\u6cd5\u4e5f\u53ef\u4ee5\u89e3\u91ca\u4e3a\u4e00\u79cd\u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u8fd1\u4f3c\u3002\u7528 \\(y=f(\\mathbf{x}, \\theta)\\) \u6765\u8868\u793a\u8981\u5b66\u4e60\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u8d1d\u53f6\u65af\u5b66\u4e60\u662f\u5047\u8bbe\u53c2\u6570 \\(\\theta\\) \u4e3a\u968f\u673a\u5411\u91cf\uff0c\u5e76\u4e14\u5148\u9a8c\u5206\u5e03\u4e3a \\(q(\\theta)\\) \uff0c\u8d1d\u53f6\u65af\u65b9\u6cd5\u7684\u9884\u6d4b\u4e3a \\[ \\begin{aligned} \\mathbb{E}_{q(\\theta)}[y] &=\\int_{q} f(\\mathbf{x}, \\theta) q(\\theta) d \\theta \\\\ & \\approx \\frac{1}{M} \\sum_{m=1}^{M} f\\left(\\mathbf{x}, \\theta_{m}\\right) \\end{aligned} \\] \u5176\u4e2d \\(f(\\mathbf{x}, \\theta_m)\\) \u4e3a\u7b2cm\u6b21\u5e94\u7528\u4e22\u5f03\u65b9\u6cd5\u540e\u7684\u7f51\u7edc\uff0c\u5176\u53c2\u6570 \\(\\theta_m\\) \u4e3a\u5bf9\u5168\u90e8\u53c2\u6570 \\(\\theta\\) \u7684\u4e00\u6b21\u91c7\u6837\u3002 RNN\u4e2d\u7684\u53d8\u5206Dropout Variational Dropout Dropout\u4e00\u822c\u662f\u9488\u5bf9\u795e\u7ecf\u5143\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u6269\u5c55\u5230\u5bf9\u795e\u7ecf\u5143\u4e4b\u95f4 \u7684\u8fde\u63a5\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u6216\u6bcf\u4e00\u5c42\u8fdb\u884c\u968f\u673a\u4e22\u5f03\u3002 \u5728RNN\u4e2d\uff0c\u4e0d\u80fd\u76f4\u63a5\u5bf9\u6bcf\u4e2a\u65f6\u523b\u7684\u9690\u72b6\u6001\u8fdb\u884c\u968f\u673a \u4e22\u5f03\uff0c\u8fd9\u6837\u4f1a\u635f\u5bb3\u5faa\u73af\u7f51\u7edc\u5728\u65f6\u95f4\u7ef4\u5ea6\u4e0a\u8bb0\u5fc6\u80fd\u529b\u3002 \u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5bf9\u975e\u65f6\u95f4\u7ef4\u5ea6\u7684\u8fde\u63a5\uff08\u5373\u975e\u5faa\u73af\u8fde\u63a5\uff09\u8fdb\u884c\u968f\u673a\u4e22\u5931\u3002\u5982\u56fe\u6240\u793a\uff0c\u865a\u7ebf\u8fb9\u8868\u793a\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u4e0d\u540c\u7684\u989c\u8272\u8868\u793a\u4e0d\u540c\u7684\u4e22\u5f03\u63a9\u7801\u3002 \u7136\u800c\u6839\u636e\u8d1d\u53f6\u65af\u5b66\u4e60\u7684\u89e3\u91ca\uff0c\u4e22\u5f03\u6cd5\u662f\u4e00\u79cd\u5bf9\u53c2\u6570 \\(\u03b8\\) \u7684\u91c7\u6837\u3002\u6bcf\u6b21\u91c7\u6837\u7684\u53c2\u6570\u9700\u8981\u5728\u6bcf\u4e2a\u65f6\u523b\u4fdd\u6301\u4e0d\u53d8\u3002\u56e0\u6b64\uff0c\u5728\u5bf9\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0a\u4f7f\u7528\u4e22\u5f03\u6cd5\u65f6\uff0c\u9700\u8981\u5bf9\u53c2\u6570\u77e9\u9635\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u968f\u673a\u4e22\u5f03\uff0c\u5e76\u5728\u6240\u6709\u65f6\u523b\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u4e22\u5f03\u63a9\u7801\u3002\u8fd9\u79cd\u65b9\u6cd5\u79f0\u4e3a\u53d8\u5206\u4e22\u5f03\u6cd5\uff08Variational Dropout\uff09\u3002 \u56fe7.12\u7ed9\u51fa\u4e86\u53d8\u5206\u4e22\u5f03\u6cd5\u7684\u793a\u4f8b\uff0c \u76f8\u540c\u989c\u8272\u8868\u793a\u4f7f\u7528\u76f8\u540c\u7684\u4e22\u5f03\u63a9\u7801 \u3002","title":"2.3 Dropout"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#24-neuron-units","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u542b\u6709 sigmoidal neurons \u7684\u975e\u7ebf\u6027\u5206\u7c7b\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u4f46\u662f\u5728\u5f88\u591a\u5e94\u7528\u4e2d\uff0c\u4f7f\u7528\u5176\u4ed6\u6fc0\u6d3b\u51fd\u6570\u53ef\u4ee5\u8bbe\u8ba1\u66f4\u597d\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u4e0b\u9762\u5217\u51fa\u4e00\u4e9b\u5e38\u89c1\u7684\u6fc0\u6d3b\u51fd\u6570\u548c\u6fc0\u6d3b\u51fd\u6570\u7684\u68af\u5ea6\u5b9a\u4e49\uff0c\u5b83\u4eec\u53ef\u4ee5\u548c\u524d\u9762\u8ba8\u8bba\u8fc7\u7684 sigmoidal \u51fd\u6570\u4e92\u76f8\u66ff\u6362\u3002 Sigmoid \uff1a\u8fd9\u662f\u6211\u4eec\u8ba8\u8bba\u8fc7\u7684\u5e38\u7528\u9009\u62e9\uff0c\u6fc0\u6d3b\u51fd\u6570 \\(\\sigma\\) \u4e3a\uff1a $$ \\sigma(z)=\\frac{1}{1+exp(-z)} $$ \u5176\u4e2d \\(\\sigma(z)\\in (0,1)\\) \u3002 \\(\\sigma(z)\\) \u7684\u68af\u5ea6\u4e3a \\[ \\sigma'(z)=\\frac{-exp(-z)}{1+exp(-z)}=\\sigma(z)(1-\\sigma(z)) \\\\ \\] Tanh \uff1a \\(tanh\\) \u51fd\u6570\u662f \\(sigmoid\\) \u51fd\u6570\u4e4b\u5916\u7684\u53e6\u4e00\u4e2a\u9009\u62e9\uff0c\u5728\u5b9e\u9645\u4e2d\u5b83\u80fd\u66f4\u5feb\u5730\u6536\u655b\u3002 \\(tanh\\) \u548c \\(sigmoid\\) \u7684\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e \\(tanh\\) \u7684\u8f93\u51fa\u8303\u56f4\u5728 -1 \u5230 1 \uff0c\u800c \\(sigmoid\\) \u7684\u8f93\u51fa\u8303\u56f4\u5728 0 \u5230 1 \u3002 $$ tanh(z)=\\frac{exp(z)-exp(-z)}{exp(z)+exp(-z)}=2\\sigma(2z)-1 \\ $$ \u5176\u4e2d \\(tanh(z)\\in (-1, 1)\\) \u3002 \\(tanh(z)\\) \u7684\u68af\u5ea6\u4e3a\uff1a \\[ tanh'(z)=\\bigg(\\frac{exp(z)-exp(-z)}{exp(z)+exp(-z)}\\bigg)^{2}=1-tanh^{2}(z) \\\\ \\] Hard tanh \uff1a\u6709\u65f6\u5019 \\(hard\\;tanh\\) \u51fd\u6570\u6709\u65f6\u6bd4 \\(tanh\\) \u51fd\u6570\u7684\u9009\u62e9\u66f4\u4e3a\u4f18\u5148\uff0c\u56e0\u4e3a\u5b83\u7684\u8ba1\u7b97\u91cf\u66f4\u5c0f\u3002\u7136\u800c\u5f53 \\(z\\) \u7684\u503c\u5927\u4e8e \\(1\\) \u65f6\uff0c\u51fd\u6570\u7684\u6570\u503c\u4f1a\u9971\u548c\uff08\u5982\u4e0b\u56fe\u6240\u793a\u4f1a\u6052\u7b49\u4e8e 1\uff09\u3002 \\(hard\\;tanh\\) \u6fc0\u6d3b\u51fd\u6570\u4e3a\uff1a \\[ \\begin{eqnarray} hardtanh(z) &=& \\begin{cases} -1& \\text{:$z<1$}\\\\ z & \\text{:$-1\\le z \\le 1$} \\\\ 1 & \\text{:$z>1$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] \\(hard\\;tanh\\) \u8fd9\u4e2a\u51fd\u6570\u7684\u5fae\u5206\u4e5f\u53ef\u4ee5\u7528\u5206\u6bb5\u51fd\u6570\u7684\u5f62\u5f0f\u8868\u793a\uff1a \\[ \\begin{eqnarray} hardtanh(z) &=& \\begin{cases} 1 & \\text{:$-1\\le z \\le 1$} \\\\ 0 & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] Soft sign \uff1a \\(soft\\;sign\\) \u51fd\u6570\u662f\u53e6\u5916\u4e00\u79cd\u975e\u7ebf\u6027\u6fc0\u6d3b\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u662f \\(tanh\\) \u7684\u53e6\u5916\u4e00\u79cd\u9009\u62e9\uff0c\u56e0\u4e3a\u5b83\u548c \\(hard\\;clipped\\;functions\\) \u4e00\u6837\u4e0d\u4f1a\u8fc7\u65e9\u5730\u9971\u548c\uff1a $$ softsign(z)=\\frac{z}{1+|z|} $$ \\(soft\\;sign\\) \u51fd\u6570\u7684\u5fae\u5206\u8868\u8fbe\u5f0f\u4e3a\uff1a \\[ softsign'(z)=\\frac{sgn(z)}{(1+z)^{2}} \\\\ \\] \u5176\u4e2d \\(sgn\\) \u662f\u7b26\u53f7\u51fd\u6570\uff0c\u6839\u636e \\(z\\) \u7684\u7b26\u53f7\u8fd4\u56de 1 \u6216\u8005 -1 \u3002 ReLU \uff1a \\(ReLU\\) \uff08 \\(Recti\ufb01ed\\;Linear\\;Unit\\) \uff09\u51fd\u6570\u662f\u6fc0\u6d3b\u51fd\u6570\u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u7684\u9009\u62e9\uff0c\u5f53 z \u7684\u503c\u7279\u522b\u5927\u7684\u65f6\u5019\u5b83\u4e5f\u4e0d\u4f1a\u9971\u548c\u3002\u5728\u8ba1\u7b97\u673a\u89c6\u89c9\u5e94\u7528\u4e2d\u53d6\u5f97\u4e86\u5f88\u5927\u7684\u6210\u529f\uff1a $$ rect(z)=max(z,0) $$ \\(ReLU\\) \u51fd\u6570\u7684\u5fae\u5206\u662f\u4e00\u4e2a\u5206\u6bb5\u51fd\u6570\uff1a \\[ \\begin{eqnarray} rect'(z) &=& \\begin{cases} 1 & \\text{$z > 0$} \\\\ 0 & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\\\ \\] Leaky ReLU \uff1a\u4f20\u7edf\u7684 \\(ReLU\\) \u5355\u5143\u5f53 z \u7684\u503c\u5c0f\u4e8e 0 \u65f6\uff0c\u662f\u4e0d\u4f1a\u53cd\u5411\u4f20\u64ad\u8bef\u5dee \\(leaky\\;ReLU\\) \u6539\u5584\u4e86\u8fd9\u4e00\u70b9\uff0c\u5f53 \\(z\\) \u7684\u503c\u5c0f\u4e8e 0 \u65f6\uff0c\u4ecd\u7136\u4f1a\u6709\u4e00\u4e2a\u5f88\u5c0f\u7684\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u56de\u53bb\u3002 $$ leaky(z)=max(z, k\\cdot z) \\ $$ \u5176\u4e2d \\(0<k<1\\) \u3002 \\(leaky\\;ReLU\\) \u51fd\u6570\u7684\u5fae\u5206\u662f\u4e00\u4e2a\u5206\u6bb5\u51fd\u6570\uff1a \\[ \\begin{eqnarray} leaky'(z) &=& \\begin{cases} 1 & \\text{$z > 0$} \\\\ k & \\text{:$otherwise$} \\end{cases} \\nonumber \\end{eqnarray} \\]","title":"2.4 Neuron Units"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#25-data-preprocessing","text":"\u4e0e\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4e00\u822c\u60c5\u51b5\u4e00\u6837\uff0c\u786e\u4fdd\u6a21\u578b\u5728\u5f53\u524d\u4efb\u52a1\u4e0a\u83b7\u5f97\u5408\u7406\u6027\u80fd\u7684\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u662f\u5bf9\u6570\u636e\u6267\u884c\u57fa\u672c\u7684\u9884\u5904\u7406\u3002\u4e0b\u9762\u6982\u8ff0\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u6280\u672f\u3002 Mean Subtraction \u7ed9\u5b9a\u4e00\u7ec4\u8f93\u5165\u6570\u636e \\(X\\) \uff0c\u4e00\u822c\u628a \\(X\\) \u4e2d\u7684\u503c\u51cf\u53bb \\(X\\) \u7684\u5e73\u5747\u7279\u5f81\u5411\u91cf\u6765\u4f7f\u6570\u636e**\u96f6\u4e2d\u5fc3\u5316**\u3002\u5728\u5b9e\u8df5\u4e2d\u5f88\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c \u53ea\u8ba1\u7b97\u8bad\u7ec3\u96c6\u7684\u5e73\u5747\u503c \uff0c\u800c\u4e14\u5728**\u8bad\u7ec3\u96c6\uff0c\u9a8c\u8bc1\u96c6\u548c\u6d4b\u8bd5\u96c6**\u90fd\u662f**\u51cf\u53bb\u540c\u4e00\u5e73\u5747\u503c**\u3002 Normalization \u53e6\u5916\u4e00\u4e2a\u5e38\u89c1\u7684\u6280\u672f\uff08\u867d\u7136\u6ca1\u6709 \\(mean\\;Subtraction\\) \u5e38\u7528\uff09\u662f\u5c06\u6bcf\u4e2a\u8f93\u5165\u7279\u5f81\u7ef4\u5ea6\u7f29\u5c0f\uff0c\u8ba9\u6bcf\u4e2a\u8f93\u5165\u7279\u5f81\u7ef4\u5ea6\u5177\u6709\u76f8\u4f3c\u7684\u5e45\u5ea6\u8303\u56f4\u3002\u8fd9\u662f\u5f88\u6709\u7528\u7684\uff0c\u56e0\u6b64\u4e0d\u540c\u7684\u8f93\u5165\u7279\u5f81\u662f\u7528\u4e0d\u540c\u201c\u5355\u4f4d\u201d\u5ea6\u91cf\uff0c\u4f46\u662f\u6700\u521d\u7684\u65f6\u5019\u6211\u4eec\u7ecf\u5e38\u8ba4\u4e3a\u6240\u6709\u7684\u7279\u5f81\u540c\u6837\u91cd\u8981\u3002\u5b9e\u73b0\u65b9\u6cd5\u662f\u5c06\u7279\u5f81\u9664\u4ee5\u5b83\u4eec\u5404\u81ea\u5728\u8bad\u7ec3\u96c6\u4e2d\u8ba1\u7b97\u7684\u6807\u51c6\u5dee\u3002 Whitening \u76f8\u6bd4\u4e0a\u8ff0\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c whitening \u6ca1\u6709\u90a3\u4e48\u5e38\u7528\uff0c\u5b83\u672c\u8d28\u4e0a\u662f\u6570\u636e\u7ecf\u8fc7\u8f6c\u6362\u540e\uff0c\u7279\u5f81\u4e4b\u95f4\u76f8\u5173\u6027\u8f83\u4f4e\uff0c\u6240\u6709\u7279\u5f81\u5177\u6709\u76f8\u540c\u7684\u65b9\u5dee\uff08\u534f\u65b9\u5dee\u9635\u4e3a 1 \uff09\u3002\u9996\u5148\u5bf9\u6570\u636e\u8fdb\u884c Mean Subtraction \u5904\u7406\uff0c\u5f97\u5230 \\(X'\\) \u3002\u7136\u540e\u6211\u4eec\u5bf9 \\(X'\\) \u8fdb\u884c\u5947\u5f02\u503c\u5206\u89e3\u5f97\u5230\u77e9\u9635 \\(U\\) , \\(S\\) , \\(V\\) \uff0c\u8ba1\u7b97 \\(UX'\\) \u5c06 \\(X'\\) \u6295\u5f71\u5230\u7531 \\(U\\) \u7684\u5217\u5b9a\u4e49\u7684\u57fa\u4e0a\u3002\u6211\u4eec\u6700\u540e\u5c06\u7ed3\u679c\u7684\u6bcf\u4e2a\u7ef4\u5ea6\u9664\u4ee5 \\(S\\) \u4e2d\u7684\u76f8\u5e94\u5947\u5f02\u503c\uff0c\u4ece\u800c\u9002\u5f53\u5730\u7f29\u653e\u6211\u4eec\u7684\u6570\u636e\uff08\u5982\u679c\u5176\u4e2d\u6709\u5947\u5f02\u503c\u4e3a 0 \uff0c\u6211\u4eec\u5c31\u9664\u4ee5\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\u4ee3\u66ff\uff09\u3002","title":"2.5 Data Preprocessing"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#26-parameter-initialization","text":"\u8ba9\u795e\u7ecf\u7f51\u7edc\u5b9e\u73b0\u6700\u4f73\u6027\u80fd\u7684\u5173\u952e\u4e00\u6b65\u662f\u4ee5\u5408\u7406\u7684\u65b9\u5f0f\u521d\u59cb\u5316\u53c2\u6570\u3002\u4e00\u4e2a\u597d\u7684\u8d77\u59cb\u65b9\u6cd5\u662f\u5c06\u6743\u503c\u521d\u59cb\u5316\u4e3a\u901a\u5e38\u5206\u5e03\u5728 0 \u9644\u8fd1\u7684\u5f88\u5c0f\u7684\u968f\u673a\u6570-\u5728\u5b9e\u8df5\u4e2d\u6548\u679c\u8fd8\u4e0d\u9519\u3002\u5728\u8bba\u6587***Understanding the difficulty*** of training deep feedforward neural networks (2010) , Xavier \u7814\u7a76\u4e0d\u540c\u6743\u503c\u548c\u504f\u7f6e\u521d\u59cb\u5316\u65b9\u6848\u5bf9\u8bad\u7ec3\u52a8\u529b\uff08 training dynamics \u200b \uff09\u7684\u5f71\u54cd\u3002\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0c\u5bf9\u4e8e sigmoid \u548c tanh \u6fc0\u6d3b\u5355\u5143\uff0c\u5f53\u4e00\u4e2a\u6743\u503c\u77e9\u9635 \\(W\\in \\mathbb{R}^{n^{(l+1)}\\times n^{(l)}}\\) \u4ee5\u5982\u4e0b\u7684\u5747\u5300\u5206\u5e03\u7684\u65b9\u5f0f\u968f\u673a\u521d\u59cb\u5316\uff0c\u80fd\u591f\u5b9e\u73b0\u66f4\u5feb\u7684\u6536\u655b\u548c\u5f97\u5230\u66f4\u4f4e\u7684\u8bef\u5dee\uff1a \\[ W\\sim U\\bigg[-\\sqrt{\\frac{6}{n^{(l)}+n^{(l+1)}}},\\sqrt{\\frac{6}{n^{(l)}+n^{(l+1)}}}\\;\\bigg] \\\\ \\] \u5176\u4e2d \\(n^{(l)}\\) \u662f W \\((fan\\text{-}in)\\) \u7684\u8f93\u5165\u5355\u5143\u6570\uff0c \\(n^{(l+1)}\\) \u662f W \\((fan\\text{-}out)\\) \u7684\u8f93\u51fa\u5355\u5143\u6570\u3002\u5728\u8fd9\u4e2a\u53c2\u6570\u521d\u59cb\u5316\u65b9\u6848\u4e2d\uff0c\u504f\u7f6e\u5355\u5143\u662f\u521d\u59cb\u5316\u4e3a 0 \u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u5c1d\u8bd5\u4fdd\u6301\u8de8\u5c42\u4e4b\u95f4\u7684\u6fc0\u6d3b\u65b9\u5dee\u4ee5\u53ca\u53cd\u5411\u4f20\u64ad\u68af\u5ea6\u65b9\u5dee\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u6837\u7684\u521d\u59cb\u5316\uff0c\u68af\u5ea6\u65b9\u5dee\uff08\u5f53\u4e2d\u542b\u6709\u7ea0\u6b63\u4fe1\u606f\uff09\u901a\u5e38\u968f\u7740\u8de8\u5c42\u7684\u53cd\u5411\u4f20\u64ad\u800c\u8870\u51cf\u3002","title":"2.6 Parameter Initialization"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#27-learning-strategies","text":"\u8bad\u7ec3\u671f\u95f4\u6a21\u578b\u53c2\u6570\u66f4\u65b0\u7684\u901f\u7387/\u5e45\u5ea6\u53ef\u4ee5\u4f7f\u7528\u5b66\u4e60\u7387\u8fdb\u884c\u63a7\u5236\u3002\u5728\u6700\u7b80\u5355\u7684\u68af\u5ea6\u4e0b\u964d\u516c\u5f0f\u4e2d\uff0c \\(\\alpha\\) \u662f\u5b66\u4e60\u7387\uff1a \\[ \\theta^{new}=\\theta^{old}-\\alpha\\nabla_{\\theta}J_{t}(\\theta) \\\\ \\] \u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\u5982\u679c\u8981\u66f4\u5feb\u5730\u6536\u655b\uff0c\u6211\u4eec\u5e94\u8be5\u5bf9 \\(\\alpha\\) \u53d6\u4e00\u4e2a\u8f83\u5927\u7684\u503c\u2014\u2014\u7136\u800c\uff0c\u5728\u66f4\u5feb\u7684\u6536\u655b\u901f\u5ea6\u4e0b\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u66f4\u5feb\u7684\u6536\u655b\u3002\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u5b66\u4e60\u7387\u975e\u5e38\u9ad8\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u53c2\u6570\u66f4\u65b0\u5e45\u5ea6\u8fc7\u5927\uff0c\u4f1a\u5bfc\u81f4\u6a21\u578b\u8d8a\u8fc7\u51f8\u4f18\u5316\u7684\u6781\u5c0f\u503c\u70b9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5728\u975e\u51f8\u6a21\u578b\u4e2d\uff08\u6211\u4eec\u5f88\u591a\u65f6\u5019\u9047\u5230\u7684\u6a21\u578b\u90fd\u662f\u975e\u51f8\uff09\uff0c\u9ad8\u5b66\u4e60\u7387\u7684\u7ed3\u679c\u662f\u96be\u4ee5\u9884\u6d4b\u7684\uff0c\u4f46\u662f\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u53ef\u80fd\u6027\u662f\u975e\u5e38\u9ad8\u7684\u3002 \u907f\u514d\u635f\u5931\u51fd\u6570\u96be\u4ee5\u6536\u655b\u7684\u4e00\u4e2a\u7b80\u7b54\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u4e00\u4e2a\u5f88\u5c0f\u7684\u5b66\u4e60\u7387\uff0c\u8ba9\u6a21\u578b\u8c28\u614e\u5730\u5728\u53c2\u6570\u7a7a\u95f4\u4e2d\u8fed\u4ee3\u2014\u2014\u5f53\u7136\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a\u592a\u5c0f\u7684\u5b66\u4e60\u7387\uff0c\u635f\u5931\u51fd\u6570\u53ef\u80fd\u4e0d\u4f1a\u5728\u5408\u7406\u7684\u65f6\u95f4\u5185\u6536\u655b\uff0c\u6216\u8005\u4f1a\u56f0\u5728\u5c40\u90e8\u6700\u4f18\u70b9\u3002\u56e0\u6b64\uff0c\u4e0e\u4efb\u4f55\u5176\u4ed6\u8d85\u53c2\u6570\u4e00\u6837\uff0c\u5b66\u4e60\u7387\u5fc5\u987b\u6709\u6548\u5730\u8c03\u6574\u3002 \u6df1\u5ea6\u5b66\u4e60\u7cfb\u7edf\u4e2d\u6700\u6d88\u8017\u8ba1\u7b97\u8d44\u6e90\u7684\u662f\u8bad\u7ec3\u9636\u6bb5\uff0c\u4e00\u4e9b\u7814\u7a76\u5df2\u5728\u5c1d\u8bd5\u63d0\u5347\u8bbe\u7f6e\u5b66\u4e60\u7387\u7684\u65b0\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c Ronan Collobert \u901a\u8fc7\u53d6 \\(fan\\text{-}in\\) \u7684\u795e\u7ecf\u5143 \\((n^{(l)})\\) \u7684\u5e73\u65b9\u6839\u7684\u5012\u6570\u6765\u7f29\u653e\u6743\u503c \\(W_{ij}\\) ( \\(W\\in \\mathbb{R}^{n^{(l+1)}\\times n^{(l)}}\\) ) \u7684\u5b66\u4e60\u7387\u3002 \u8fd8\u6709\u5176\u4ed6\u5df2\u7ecf\u88ab\u8bc1\u660e\u6709\u6548\u7684\u6280\u672f-\u8fd9\u4e2a\u65b9\u6cd5\u53eb annealing \u9000\u706b \uff0c\u5728\u591a\u6b21\u8fed\u4ee3\u4e4b\u540e\uff0c\u5b66\u4e60\u7387\u4ee5\u4ee5\u4e0b\u65b9\u5f0f\u964d\u4f4e\uff1a\u4fdd\u8bc1\u4ee5\u4e00\u4e2a\u9ad8\u7684\u7684\u5b66\u4e60\u7387\u5f00\u59cb\u8bad\u7ec3\u548c\u5feb\u901f\u903c\u8fd1\u6700\u5c0f\u503c\uff1b\u5f53\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6700\u5c0f\u503c\u65f6\uff0c\u5f00\u59cb\u964d\u4f4e\u5b66\u4e60\u7387\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u66f4\u7ec6\u5fae\u7684\u8303\u56f4\u5185\u627e\u5230\u6700\u4f18\u503c\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u5b9e\u73b0 annealing \u7684\u65b9\u6cd5\u662f\u5728\u6bcf \\(n\\) \u6b21\u7684\u8fed\u4ee3\u5b66\u4e60\u540e\uff0c\u901a\u8fc7\u4e00\u4e2a\u56e0\u5b50 \\(x\\) \u6765\u964d\u4f4e\u5b66\u4e60\u7387 \\(\\alpha\\) \u3002 \u6307\u6570\u8870\u51cf\u4e5f\u662f\u5f88\u5e38\u89c1\u7684\u65b9\u6cd5\uff0c\u5728 \\(t\\) \u6b21\u8fed\u4ee3\u540e\u5b66\u4e60\u7387\u53d8\u4e3a \\(\\alpha(t)=\\alpha_{0}e^{-kt}\\) \uff0c\u5176\u4e2d \\(\\alpha_{0}\\) \u662f\u521d\u59cb\u7684\u5b66\u4e60\u7387\u548c \\(k\\) \u662f\u8d85\u53c2\u6570\u3002 \u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\u662f\u5141\u8bb8\u5b66\u4e60\u7387\u968f\u7740\u65f6\u95f4\u51cf\u5c11\uff1a \\[ \\alpha(t)=\\frac{\\alpha_{0}\\tau}{max(t,\\tau)} \\] \u5728\u4e0a\u8ff0\u7684\u65b9\u6848\u4e2d\uff0c \\(\\alpha_{0}\\) \u662f\u4e00\u4e2a\u53ef\u8c03\u7684\u53c2\u6570\uff0c\u4ee3\u8868\u8d77\u59cb\u7684\u5b66\u4e60\u7387\u3002 \\(\\tau\\) \u4e5f\u662f\u4e00\u4e2a\u53ef\u8c03\u53c2\u6570\uff0c\u8868\u793a\u5b66\u4e60\u7387\u5e94\u8be5\u5728\u8be5\u65f6\u95f4\u70b9\u5f00\u59cb\u51cf\u5c11\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5f88\u6709\u6548\u7684\u3002\u5728\u4e0b\u4e00\u90e8\u5206\u6211\u4eec\u8ba8\u8bba\u53e6\u5916\u4e00\u79cd\u4e0d\u9700\u8981\u624b\u52a8\u8bbe\u5b9a\u5b66\u4e60\u7387\u7684\u81ea\u9002\u5e94\u68af\u5ea6\u4e0b\u964d\u7684\u65b9\u6cd5\u3002","title":"2.7 Learning Strategies"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#28-momentum-updates","text":"\u52a8\u91cf\u65b9\u6cd5\uff0c\u7075\u611f\u6765\u81ea\u4e8e\u7269\u7406\u5b66\u4e2d\u7684\u5bf9\u52a8\u529b\u5b66\u7684\u7814\u7a76\uff0c\u662f\u68af\u5ea6\u4e0b\u964d\u65b9\u6cd5\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u5c1d\u8bd5\u4f7f\u7528\u66f4\u65b0\u7684\u201c\u901f\u5ea6\u201d\u7684\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66f4\u65b0\u65b9\u6848\u3002\u52a8\u91cf\u66f4\u65b0\u7684\u4f2a\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a # Computes a standard momentum update # on parameters x v = mu * v - alpha * grad_x x += v","title":"2.8 Momentum Updates"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#29-adaptive-optimization-methods","text":"AdaGrad \u662f\u6807\u51c6\u7684\u968f\u673a\u68af\u5ea6\u4e0b\u964d( SGD )\u7684\u4e00\u79cd\u5b9e\u73b0\uff0c\u4f46\u662f\u6709\u4e00\u70b9\u5173\u952e\u7684\u4e0d\u540c\uff1a\u5bf9\u6bcf\u4e2a\u53c2\u6570\u5b66\u4e60\u7387\u662f\u4e0d\u540c\u7684\u3002\u6bcf\u4e2a\u53c2\u6570\u7684\u5b66\u4e60\u7387\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u53c2\u6570\u68af\u5ea6\u66f4\u65b0\u7684\u5386\u53f2,\u53c2\u6570\u7684\u5386\u53f2\u66f4\u65b0\u8d8a\u5c0f\uff0c\u5c31\u4f7f\u7528\u66f4\u5927\u7684\u5b66\u4e60\u7387\u52a0\u5feb\u66f4\u65b0\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fc7\u53bb\u6ca1\u6709\u66f4\u65b0\u592a\u5927\u7684\u53c2\u6570\u73b0\u5728\u66f4\u6709\u53ef\u80fd\u6709\u66f4\u9ad8\u7684\u5b66\u4e60\u7387\u3002 \\[ \\theta_{t,i}=\\theta_{t-1,i}-\\frac{\\alpha}{\\sqrt{\\sum_{\\tau=1}^{t}g_{\\tau,i}^{2}}} g_{t,i} \\ where \\ g_{t,i}=\\frac{\\partial}{\\partial\\theta_{i}^{t}}J_{t}(\\theta) \\] \u5728\u8fd9\u4e2a\u6280\u672f\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u5982\u679c\u68af\u5ea6\u7684\u5386\u53f2 RMS \u5f88\u4f4e\uff0c\u90a3\u4e48\u5b66\u4e60\u7387\u4f1a\u975e\u5e38\u9ad8\u3002\u8fd9\u4e2a\u6280\u672f\u7684\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u73b0\u5982\u4e0b\u6240\u793a\uff1a # Assume the gradient dx and parameter vector x cache += dx ** 2 x += - learning_rate * dx / np . sqrt ( cache + 1e-8 ) \u5176\u4ed6\u5e38\u89c1\u7684\u81ea\u9002\u5e94\u65b9\u6cd5\u6709 RMSProp \u548c Adam \uff0c\u5176\u66f4\u65b0\u89c4\u5219\u5982\u4e0b\u6240\u793a\uff1a # Update rule for RMS prop cache = decay_rate * cache + ( 1 - decay_rate ) * dx ** 2 x += - learning_rate * dx / ( np . sqrt ( cache ) + eps ) # Update rule for Adam m = beta * m + ( 1 - beta1 ) * dx v = beta * v + ( 1 - beta2 ) * ( dx ** 2 ) x += - learning_rate * m / ( np . sqrt ( v ) + eps ) RMSProp \u662f\u5229\u7528\u5e73\u65b9\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5c40\u503c\uff0c\u662f AdaGrad \u7684\u4e00\u4e2a\u53d8\u4f53\u2014\u2014\u5b9e\u9645\u4e0a\uff0c\u548c AdaGrad \u4e0d\u4e00\u6837\uff0c \u5b83\u7684\u66f4\u65b0\u4e0d\u4f1a\u5355\u8c03\u53d8\u5c0f \u3002 Adam \u66f4\u65b0\u89c4\u5219\u53c8\u662f RMSProp \u7684\u4e00\u4e2a\u53d8\u4f53\uff0c\u4f46\u662f\u52a0\u4e0a\u4e86\u52a8\u91cf\u66f4\u65b0\u3002","title":"2.9 Adaptive Optimization Methods"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#210-more-reference","text":"\u5982\u679c\u5e0c\u671b\u4e86\u89e3\u4ee5\u4e0a\u7684\u68af\u5ea6\u4f18\u5316\u7b97\u6cd5\u7684\u5177\u4f53\u7ec6\u8282\uff0c\u53ef\u4ee5\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff1a An overview of gradient descent optimization algorithms ) \u3002","title":"2.10 More reference"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#computing-neural-network-gradients","text":"","title":"Computing Neural Network Gradients"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#1-introduction","text":"\u8fd9\u4e9b\u7b14\u8bb0\u7684\u76ee\u7684\u662f\u6f14\u793a\u5982\u4f55\u4ee5\u5b8c\u5168\u77e2\u91cf\u5316\u7684\u65b9\u5f0f\u5feb\u901f\u8ba1\u7b97\u795e\u7ecf\u7f51\u7edc\u68af\u5ea6\u3002\u8fd9\u662f\u5bf9CS224n 2019\u7b2c\u4e09\u8bb2\u7684\u6700\u540e\u4e00\u90e8\u5206\u7684\u8865\u5145\uff0c\u662f\u540c\u6837\u7684\u6750\u6599","title":"1 Introduction"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#2-vectorized-gradients","text":"","title":"2 Vectorized Gradients"},{"location":"CS224n-2019-03-Word%20Window%20Classification%2CNeural%20Networks%2C%20and%20Matrix%20Calculus/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/","text":"Lecture 04 Backpropagation and Computation Graphs \u00b6 Lecture Plan Matrix gradients for our simple neural net and some tips Computation graphs and backpropagation Stuff you should know Regularization to prevent overfitting Vectorization Nonlinearities Initialization Optimizers Learning rates 1. Derivative wrt a weight matrix \u00b6 \u8ba9\u6211\u4eec\u4ed4\u7ec6\u770b\u770b\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial \\textbf{W}}\\) \u518d\u6b21\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219 \\[ \\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\] Deriving gradients for backprop \u8fd9\u4e2a\u51fd\u6570(\u4ece\u4e0a\u6b21\u5f00\u59cb) \\(\\frac{\\partial s}{\\partial W}=\\delta \\frac{\\partial \\mathbf{z}}{\\partial W}=\\boldsymbol{\\delta} \\frac{\\partial}{\\partial \\boldsymbol{W}} \\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}\\) \u8003\u8651\u5355\u4e2a\u6743\u91cd \\(W_{ij}\\) \u7684\u5bfc\u6570 \\(W_{ij}\\) \u53ea\u5bf9 \\(z_i\\) \u6709\u8d21\u732e \u4f8b\u5982 \\(W_{23}\\) \u53ea\u5bf9 \\(z_2\\) \u6709\u8d21\u732e\uff0c\u5bf9\u6ca1\u6709 \\(z_1\\) \u8d21\u732e \\[ \\begin{aligned} \\frac{\\partial z_{i}}{\\partial W_{i j}} &=\\frac{\\partial}{\\partial W_{i j}} W_{i \\cdot} x+b_{i} \\\\ &=\\frac{\\partial}{\\partial W_{i j}} \\sum_{k=1}^{d} W_{i k} x_{k}=x_{j} \\end{aligned} \\] \u5bf9\u4e8e\u5355\u4e2a \\(W_{ij}\\) \u7684\u5bfc\u6570 \u6211\u4eec\u60f3\u8981\u6574\u4e2a W \u7684\u68af\u5ea6\uff0c\u4f46\u662f\u6bcf\u79cd\u60c5\u51b5\u90fd\u662f\u4e00\u6837\u7684 \u603b\u4f53\u7b54\u6848\uff1a\u5916\u79ef \\[ \\begin{array}{l}{\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\quad \\boldsymbol{x}^{T}} \\\\ {[n \\times m] \\quad[n \\times 1][1 \\times m]}\\end{array} \\] Deriving gradients: Tips \u6280\u5de71\uff1a\u4ed4\u7ec6\u5b9a\u4e49\u53d8\u91cf\u5e76\u8ddf\u8e2a\u5b83\u4eec\u7684\u7ef4\u5ea6\uff01 \u6280\u5de72\uff1a\u94fe\u5f0f\u6cd5\u5219\uff01\u5982\u679c \\(y = f(u)\\) , \\(u = g(x)\\) \uff0c\u5373 \\(y = f(g(x))\\) \u5219 \\(\\frac{\\partial \\boldsymbol{y}}{\\partial \\boldsymbol{x}}=\\frac{\\partial \\boldsymbol{y}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{x}}\\) \u8981\u6e05\u695a\u54ea\u4e9b\u53d8\u91cf\u7528\u4e8e\u54ea\u4e9b\u8ba1\u7b97 \u63d0\u793a3\uff1a\u6a21\u578b\u7684\u6700\u4e0a\u9762\u7684softmax\u90e8\u5206\uff1a\u9996\u5148\u8003\u8651\u5f53 \\(c = y\\) (\u6b63\u786e\u7684\u7c7b)\u7684\u5bfc\u6570 \\(f_c\\) \uff0c\u7136\u540e\u518d\u8003\u8651\u5f53 \\(c \\neq y\\) (\u6240\u6709\u4e0d\u6b63\u786e\u7684\u7c7b)\u7684\u5bfc\u6570 \\(f_c\\) \u6280\u5de74\uff1a\u5982\u679c\u4f60\u88ab\u77e9\u9635\u5fae\u79ef\u5206\u641e\u7cca\u6d82\u4e86\uff0c\u8bf7\u8ba1\u7b97\u9010\u4e2a\u5143\u7d20\u7684\u504f\u5bfc\u6570\uff01 \u6280\u5de75\uff1a\u4f7f\u7528\u5f62\u72b6\u7ea6\u5b9a\u3002\u6ce8\u610f\uff1a\u5230\u8fbe\u9690\u85cf\u5c42\u7684\u9519\u8bef\u6d88\u606f \\(\\delta\\) \u5177\u6709\u4e0e\u8be5\u9690\u85cf\u5c42\u76f8\u540c\u7684\u7ef4\u5ea6 Deriving gradients wrt words for window model \u5230\u8fbe\u5e76\u66f4\u65b0\u5355\u8bcd\u5411\u91cf\u7684\u68af\u5ea6\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u89e3\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u5411\u91cf\u7684\u68af\u5ea6 \u4ee4 \\(\\nabla_{x} J=W^{T} \\delta=\\delta_{x_{w i n d o w}}\\) \uff0c\u5f53 \\(X_{\\text { window }}=\\left[\\begin{array}{llll}{\\mathrm{X}_{\\text { museums }}} & {\\mathrm{X}_{\\text { in }}} & {\\mathrm{X}_{\\text { Paris }}} & {\\mathrm{X}_{\\text { are }}} & {\\mathrm{X}_{\\text { amazing }}}\\end{array}\\right]\\) \u5219\u5f97\u5230 \\[ \\begin{align} \\delta_{\\text {window}}=\\left[\\begin{array}{c}{\\nabla_{x_{\\text {museums}}}} \\\\ {\\nabla_{x_{i n}}} \\\\ {\\nabla_{x_{\\text {Pare}}}} \\\\ {\\nabla_{x_{\\text {are}}}} \\\\ {\\nabla_{x_{\\text {amazing}}}}\\end{array}\\right] \\in \\mathbb{R}^{5 d} \\end{align} \\] \u6211\u4eec\u5c06\u6839\u636e\u68af\u5ea6\u9010\u4e2a\u66f4\u65b0\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u77e9\u9635\u4e2d\u7684\u8bcd\u5411\u91cf\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u662f\u5bf9\u8bcd\u5411\u91cf\u77e9\u9635\u7684\u66f4\u65b0\u662f\u975e\u5e38\u7a00\u758f\u7684 Updating word gradients in window model \u5f53\u6211\u4eec\u5c06\u68af\u5ea6\u66f4\u65b0\u5230\u8bcd\u5411\u91cf\u4e2d\u65f6\uff0c\u8fd9\u5c06\u63a8\u52a8\u5355\u8bcd\u5411\u91cf\uff0c\u4f7f\u5b83\u4eec(\u5728\u539f\u5219\u4e0a)\u5728\u786e\u5b9a\u547d\u540d\u5b9e\u4f53\u65f6\u66f4\u6709\u5e2e\u52a9\u3002 \u4f8b\u5982\uff0c\u6a21\u578b\u53ef\u4ee5\u4e86\u89e3\u5230\uff0c\u5f53\u770b\u5230 \\(x_{in}\\) \u662f\u4e2d\u5fc3\u8bcd\u4e4b\u524d\u7684\u5355\u8bcd\u65f6\uff0c\u6307\u793a\u4e2d\u5fc3\u8bcd\u662f\u4e00\u4e2a Location A pitfall when retraining word vectors \u80cc\u666f\uff1a\u6211\u4eec\u6b63\u5728\u8bad\u7ec3\u4e00\u4e2a\u5355\u8bcd\u7535\u5f71\u8bc4\u8bba\u60c5\u7eea\u7684\u903b\u8f91\u56de\u5f52\u5206\u7c7b\u6a21\u578b\u3002 \u5728**\u8bad\u7ec3\u6570\u636e**\u4e2d\uff0c\u6211\u4eec\u6709\u201cTV\u201d\u548c\u201ctelly\u201d \u5728**\u6d4b\u8bd5\u6570\u636e**\u4e2d\u6211\u4eec\u6709\u201ctelevision\u201d\u201d \u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5411\u91cf\u6709\u4e09\u4e2a\u76f8\u4f3c\u4e4b\u5904\uff1a \u95ee\u9898\uff1a\u5f53\u6211\u4eec\u66f4\u65b0\u5411\u91cf\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48 \u56de\u7b54\uff1a \u90a3\u4e9b\u5728**\u8bad\u7ec3\u6570\u636e**\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u56db\u5904\u79fb\u52a8 \u201cTV\u201d\u548c\u201ctelly\u201d **\u6ca1\u6709\u5305\u542b\u5728\u8bad\u7ec3\u6570\u636e**\u4e2d\u7684\u8bcd\u6c47\u4fdd\u6301\u539f\u6837 \u201ctelevision\u201d So what should I do? \u95ee\u9898\uff1a\u5e94\u8be5\u4f7f\u7528\u53ef\u7528\u7684\u201c\u9884\u8bad\u7ec3\u201d\u5b57\u5411\u91cf\u5417\uff1f \u56de\u7b54\uff1a \u51e0\u4e4e\u603b\u5e94\u8be5\u662f\u7528 \u4ed6\u4eec\u63a5\u53d7\u4e86\u5927\u91cf\u7684\u6570\u636e\u8bad\u7ec3\uff0c\u6240\u4ee5\u4ed6\u4eec\u4f1a\u77e5\u9053\u8bad\u7ec3\u6570\u636e\u4e2d\u6ca1\u6709\u7684\u5355\u8bcd\uff0c\u4e5f\u4f1a\u77e5\u9053\u66f4\u591a\u5173\u4e8e\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u5355\u8bcd \u62e5\u6709\u4e0a\u4ebf\u5b57\u7684\u6570\u636e\u5417\uff1f\u597d\u7684\uff0c\u968f\u673a\u5f00\u59cb \u95ee\u9898\uff1a\u6211\u5e94\u8be5\u66f4\u65b0(\u201cfine tune\u201d)\u6211\u81ea\u5df1\u7684\u5355\u8bcd\u5411\u91cf\u5417\uff1f \u56de\u7b54\uff1a \u5982\u679c\u4f60\u53ea\u6709\u4e00\u4e2a\u5c0f\u7684\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u4e0d\u8981\u8bad\u7ec3\u8bcd\u5411\u91cf \u5982\u679c\u60a8\u6709\u4e00\u4e2a\u5927\u578b\u6570\u636e\u96c6\uff0c\u90a3\u4e48 train = update = fine-tune \u8bcd\u5411\u91cf\u5230\u4efb\u52a1\u53ef\u80fd\u4f1a\u66f4\u597d Backpropagation \u6211\u4eec\u51e0\u4e4e\u5df2\u7ecf\u5411\u4f60\u4eec\u5c55\u793a\u4e86\u53cd\u5411\u4f20\u64ad \u6c42\u5bfc\u5e76\u4f7f\u7528(\u5e7f\u4e49)\u94fe\u5f0f\u6cd5\u5219 \u53e6\u4e00\u4e2a\u6280\u5de7\uff1a\u5728\u8ba1\u7b97\u8f83\u4f4e\u5c42\u7684\u5bfc\u6570\u65f6\uff0c\u6211\u4eec**\u91cd\u7528**\u5bf9\u8f83\u9ad8\u5c42\u8ba1\u7b97\u7684\u5bfc\u6570\uff0c\u4ee5\u4f7f\u8ba1\u7b97\u6700\u5c0f\u5316 2. Computation Graphs and Backpropagation \u00b6 \u6211\u4eec\u628a\u795e\u7ecf\u7f51\u7edc\u65b9\u7a0b\u8868\u793a\u6210\u4e00\u4e2a\u56fe $$ s = \\textbf{u}^T\\textbf{h} \\ \\textbf{h} = f(\\textbf{z}) \\ \\textbf{z} = \\textbf{W}\\textbf{x}+\\textbf{b} \\ \\textbf{x} \\quad \\quad (\\text{input}) $$ Forward Propagation \u6e90\u8282\u70b9\uff1a\u8f93\u5165 \u5185\u90e8\u8282\u70b9\uff1a\u64cd\u4f5c \u8fb9\u4f20\u9012\u64cd\u4f5c\u7684\u7ed3\u679c Back Propagation \u6cbf\u7740\u8fb9\u56de\u4f20**\u68af\u5ea6** Backpropagation: Single Node \\[ \\textbf{h} = f(\\textbf{z}) \\] \u8282\u70b9\u63a5\u6536\u201c\u4e0a\u6e38\u68af\u5ea6\u201d \u76ee\u6807\u662f\u4f20\u9012\u6b63\u786e\u7684\u201c\u4e0b\u6e38\u68af\u5ea6\u201d \u6bcf\u4e2a\u8282\u70b9\u90fd\u6709**\u5c40\u90e8\u68af\u5ea6** local gradient \u5b83\u8f93\u51fa\u7684\u68af\u5ea6\u662f\u4e0e\u5b83\u7684\u8f93\u5165\u6709\u5173 [downstream gradient] = [upstream gradient] x [local gradient] \u6709\u591a\u4e2a\u8f93\u5165\u7684\u8282\u70b9\u5462\uff1f $$ \\textbf{z} = \\textbf{W}\\textbf{x} $$ \u591a\u4e2a\u8f93\u5165 \\(\\to\\) \u591a\u4e2a\u5c40\u90e8\u68af\u5ea6 An Example Forward Backward $$ \\begin{aligned} \\frac{\\partial f}{\\partial x} = 2 \\ \\frac{\\partial f}{\\partial y} = 3 + 2 = 5 \\ \\frac{\\partial f}{\\partial z} = 0 \\end{aligned} $$ Gradients sum at outward branches \u4e0a\u56fe\u4e2d\u7684 \\(\\frac{\\partial f}{\\partial y}\\) \u7684\u68af\u5ea6\u7684\u8ba1\u7b97 $$ a = x + y \\ b = max(y,z) \\ f = ab \\ \\frac{\\partial f}{\\partial y} = \\frac{\\partial f}{\\partial a}\\frac{\\partial a}{\\partial y} + \\frac{\\partial f}{\\partial b}\\frac{\\partial b}{\\partial y} $$ Node Intuitions \\(+\\) \u201c\u5206\u53d1\u201d \u4e0a\u6e38\u68af\u5ea6\u7ed9\u6bcf\u4e2a \\(summand\\) \\(max\\) \u201c\u8def\u7531\u201d \u4e0a\u6e38\u68af\u5ea6\uff0c\u5c06\u68af\u5ea6\u53d1\u9001\u5230\u6700\u5927\u7684\u65b9\u5411 \\(*\\) \u201c\u5207\u6362\u201d\u4e0a\u6e38\u68af\u5ea6 Efficiency: compute all gradients at once \u4e0d\u91cd\u590d\u8ba1\u7b97\u68af\u5ea6 Back-Prop in General Computation Graph Fprop\uff1a\u6309\u62d3\u6251\u6392\u5e8f\u987a\u5e8f\u8bbf\u95ee\u8282\u70b9 \u8ba1\u7b97\u7ed9\u5b9a\u7236\u8282\u70b9\u7684\u8282\u70b9\u7684\u503c Bprop\uff1a \u521d\u59cb\u5316\u8f93\u51fa\u68af\u5ea6\u4e3a 1 \u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u65b9\u4f4d\u8282\u70b9\uff0c\u4f7f\u7528\u8282\u70b9\u7684\u540e\u7ee7\u7684\u68af\u5ea6\u6765\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u7684\u68af\u5ea6 \\(\\{y_1,y_2,\\dots,y_n\\}\\) \u662f \\(x\\) \u7684\u540e\u7ee7 \\(\\frac{\\partial z}{\\partial x} = \\sum_{i=1}^n \\frac{\\partial z}{\\partial y_i}\\frac{\\partial y_i}{\\partial x}\\) \u6b63\u786e\u5730\u8bf4\uff0cFprop \u548c Bprop \u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u662f\u4e00\u6837\u7684 \u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u6709\u56fa\u5b9a\u7684\u5c42\u7ed3\u6784\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u77e9\u9635\u548c\u96c5\u53ef\u6bd4\u77e9\u9635 Automatic Differentiation \u68af\u5ea6\u8ba1\u7b97\u53ef\u4ee5\u4ece Fprop \u7684\u7b26\u53f7\u8868\u8fbe\u5f0f\u4e2d\u81ea\u52a8\u63a8\u65ad \u6bcf\u4e2a\u8282\u70b9\u7c7b\u578b\u9700\u8981\u77e5\u9053\u5982\u4f55\u8ba1\u7b97\u5176\u8f93\u51fa\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u7ed9\u5b9a\u5176\u8f93\u51fa\u7684\u68af\u5ea6\u540e\u8ba1\u7b97\u5176\u8f93\u5165\u7684\u68af\u5ea6 \u73b0\u4ee3DL\u6846\u67b6(Tensorflow, Pytoch)\u4e3a\u60a8\u505a\u53cd\u5411\u4f20\u64ad\uff0c\u4f46\u4e3b\u8981\u662f\u4ee4\u4f5c\u8005\u624b\u5de5\u8ba1\u7b97\u5c42/\u8282\u70b9\u7684\u5c40\u90e8\u5bfc\u6570 Backprop Implementations \u4e3a\u4e86\u8ba1\u7b97\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u9700\u8981\u5728\u524d\u5411\u4f20\u64ad\u65f6\u5b58\u50a8\u4e00\u4e9b\u53d8\u91cf\u7684\u503c Gradient checking: Numeric Gradient \u5bf9\u4e8e \\(h \\approx 1e^{-4}\\) , \\(f^{\\prime}(x) \\approx \\frac{f(x+h)-f(x-h)}{2 h}\\) \u6613\u4e8e\u6b63\u786e\u5b9e\u73b0 \u4f46\u8fd1\u4f3c\u4e14\u975e\u5e38\u7f13\u6162 \u5fc5\u987b\u5bf9\u6a21\u578b\u7684\u6bcf\u4e2a\u53c2\u6570\u91cd\u65b0\u8ba1\u7b97 \\(f\\) \u7528\u4e8e\u68c0\u67e5\u60a8\u7684\u5b9e\u73b0 \u5728\u8fc7\u53bb\u6211\u4eec\u624b\u5199\u6240\u6709\u4e1c\u897f\u7684\u65f6\u5019\uff0c\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u8fd9\u6837\u505a\u662f\u5173\u952e\u3002 \u73b0\u5728\uff0c\u5f53\u628a\u56fe\u5c42\u653e\u5728\u4e00\u8d77\u65f6\uff0c\u5c31\u4e0d\u9700\u8981\u90a3\u4e48\u591a\u4e86 Summary \u6211\u4eec\u5df2\u7ecf\u638c\u63e1\u4e86\u795e\u7ecf\u7f51\u7edc\u7684\u6838\u5fc3\u6280\u672f \u53cd\u5411\u4f20\u64ad\uff1a\u6cbf\u8ba1\u7b97\u56fe\u9012\u5f52\u5e94\u7528\u94fe\u5f0f\u6cd5\u5219 [downstream gradient] = [upstream gradient] x [local gradient] \u524d\u5411\u4f20\u9012\uff1a\u8ba1\u7b97\u64cd\u4f5c\u7ed3\u679c\u5e76\u4fdd\u5b58\u4e2d\u95f4\u503c \u53cd\u5411\u4f20\u9012\uff1a\u5e94\u7528\u94fe\u5f0f\u6cd5\u5219\u8ba1\u7b97\u68af\u5ea6 Why learn all these details about gradients? \u73b0\u4ee3\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e3a\u60a8\u8ba1\u7b97\u68af\u5ea6 \u4f46\u662f\uff0c\u5f53\u7f16\u8bd1\u5668\u6216\u7cfb\u7edf\u4e3a\u60a8\u5b9e\u73b0\u65f6\uff0c\u4e3a\u4ec0\u4e48\u8981\u5b66\u4e60\u5b83\u4eec\u5462\uff1f \u4e86\u89e3\u5f15\u64ce\u76d6\u4e0b\u53d1\u751f\u4e86\u4ec0\u4e48\u662f\u6709\u7528\u7684 \u53cd\u5411\u4f20\u64ad\u5e76\u4e0d\u603b\u662f\u5b8c\u7f8e\u5730\u5de5\u4f5c \u7406\u89e3\u4e3a\u4ec0\u4e48\u5bf9\u8c03\u8bd5\u548c\u6539\u8fdb\u6a21\u578b\u81f3\u5173\u91cd\u8981 \u53c2\u89c1 Karpathy\u6587\u7ae0 \uff08\u5728\u6559\u5b66\u5927\u7eb2\u4e2d\uff09 \u672a\u6765\u8bfe\u7a0b\u7684\u4f8b\u5b50:\u7206\u70b8\u548c\u6d88\u5931\u7684\u68af\u5ea6 3. We have models with many params! Regularization! \u00b6 \u5b9e\u9645\u4e0a\u4e00\u4e2a\u5b8c\u6574\u7684\u635f\u5931\u51fd\u6570\u5305\u542b\u4e86\u6240\u6709\u53c2\u6570 \\(\\theta\\) \u7684\u6b63\u5219\u5316\uff08\u4e0b\u5f0f\u4e2d\u6700\u540e\u4e00\u9879\uff09\uff0c\u4f8b\u5982L2\u6b63\u5219\u5316\uff1a \\[ J(\\theta)=\\frac{1}{N} \\sum_{i=1}^{N}-\\log \\left(\\frac{e^{f_{y_{i}}}}{\\sum_{c=1}^{C} e^{f_{c}}}\\right)+\\lambda \\sum_{k} \\theta_{k}^{2} \\] \u6b63\u5219\u5316(\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a)\u53ef\u4ee5\u9632\u6b62\u5728\u6211\u4eec\u6709\u5f88\u591a\u7279\u5f81\u65f6\u8fc7\u62df\u5408(\u6216\u8005\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927/\u6df1\u5c42\u7684\u6a21\u578b\u7b49\u7b49) \u201cVectorization\u201d \u4f8b\u5982\uff0c\u5bf9\u5355\u8bcd\u5411\u91cf\u8fdb\u884c\u5faa\u73af\uff0c\u800c\u4e0d\u662f\u5c06\u5b83\u4eec\u5168\u90e8\u8fde\u63a5\u5230\u4e00\u4e2a\u5927\u77e9\u9635\u4e2d\uff0c\u7136\u540e\u5c06softmax\u6743\u503c\u4e0e\u8be5\u77e9\u9635\u76f8\u4e58 1000 loops, best of 3: 639 \u03bcs per loop 10000 loops, best of 3: 53.8 \u03bcs per loop (10x)\u66f4\u5feb\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 \\(C \\times N\\) \u77e9\u9635 \u603b\u662f\u5c1d\u8bd5\u4f7f\u7528\u5411\u91cf\u548c\u77e9\u9635\uff0c\u800c\u4e0d\u662f\u5faa\u73af \u4f60\u4e5f\u5e94\u8be5\u5feb\u901f\u6d4b\u8bd5\u4f60\u7684\u4ee3\u7801 \u7b80\u5355\u6765\u8bf4\uff1a\u77e9\u9635\u592a\u68d2\u4e86 Non-linearities: The starting points tanh \u53ea\u662f\u4e00\u4e2a\u91cd\u65b0\u653e\u7f29\u548c\u79fb\u52a8\u7684 sigmoid (\u4e24\u500d\u9661\u5ced\uff0c[-1,1]) $$ \\tanh (z)=2 \\operatorname{logistic}(2 z)-1 $$ logistic \u548c tanh \u4ecd\u7136\u88ab\u7528\u4e8e\u7279\u5b9a\u7684\u7528\u9014\uff0c\u4f46\u4e0d\u518d\u662f\u6784\u5efa\u6df1\u5ea6\u7f51\u7edc\u7684\u9ed8\u8ba4\u503c\u3002 logistic\u548ctanh: \u8bbe\u8ba1\u590d\u6742\u7684\u6570\u5b66\u8fd0\u7b97\uff0c\u6307\u6570\u8ba1\u7b97\u4f1a\u51cf\u6162\u901f\u5ea6\u3002\u6240\u4ee5\u4eba\u4eec\u63d0\u51fa\u4e86 hard tanh\uff0c\u5e76\u4e14\u6548\u679c\u5f88\u4e0d\u9519\u3002\u4e8e\u662f\u624d\u6709\u4e86 ReLU Non-linearities: The new world order \u4e3a\u4e86\u5efa\u7acb\u4e00\u4e2a\u524d\u9988\u6df1\u5ea6\u7f51\u7edc\uff0c\u4f60\u5e94\u8be5\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u662fReLU\u2014\u2014\u7531\u4e8e\u826f\u597d\u7684**\u68af\u5ea6\u56de\u6d41**\uff0c\u8bad\u7ec3\u901f\u5ea6\u5feb\uff0c\u6027\u80fd\u597d \u6bcf\u4e2a\u5355\u5143\u8981\u4e48\u5df2\u7ecf\u6b7b\u4e86\uff0c\u8981\u4e48\u5728\u4f20\u9012\u4fe1\u606f\u3002 \u975e\u96f6\u8303\u56f4\u5185\u53ea\u6709\u4e00\u4e2a\u659c\u7387\uff0c\u8fd9\u4e00\u4f4d\u7f6e\u68af\u5ea6\u5341\u5206\u6709\u6548\u7684\u4f20\u9012\u7ed9\u4e86\u8f93\u5165\uff0c\u6240\u4ee5\u6a21\u578b\u975e\u5e38\u6709\u6548\u7684\u8bad\u7ec3 Parameter Initialization \u901a\u5e38 \u5fc5\u987b\u5c06\u6743\u91cd\u521d\u59cb\u5316\u4e3a\u5c0f\u7684\u968f\u673a\u503c \uff08\u8fd9\u6837\u624d\u80fd\u5728\u6fc0\u6d3b\u51fd\u6570\u7684\u6709\u6548\u8303\u56f4\u5185\uff0c \u5373\u5b58\u5728\u68af\u5ea6\u53ef\u4ee5\u4f7f\u5176\u66f4\u65b0\uff09 \u907f\u514d\u5bf9\u79f0\u6027\u59a8\u788d\u5b66\u4e60/\u7279\u6b8a\u5316\u7684 \u521d\u59cb\u5316\u9690\u542b\u5c42\u504f\u5dee\u4e3a0\uff0c\u5982\u679c\u6743\u91cd\u4e3a0\uff0c\u5219\u8f93\u51fa(\u6216\u91cd\u6784)\u504f\u5dee\u4e3a\u6700\u4f18\u503c(\u4f8b\u5982\uff0c\u5747\u503c\u76ee\u6807\u6216\u5747\u503c\u76ee\u6807\u7684\u53cds\u5f62) \u521d\u59cb\u5316 \u6240\u6709\u5176\u4ed6\u6743\u91cd \u4e3aUniform(\u2013r, r)\uff0c\u9009\u62e9\u4f7f\u6570\u5b57\u65e2\u4e0d\u4f1a\u592a\u5927\u4e5f\u4e0d\u4f1a\u592a\u5c0f\u7684 r Xavier\u521d\u59cb\u5316\u4e2d\uff0c\u65b9\u5dee\u4e0e fan-in \\(n_{in}\\) (\u524d\u4e00\u5c42\u5c3a\u5bf8)\u548c fan-out \\(n_{out}\\) (\u4e0b\u4e00\u5c42\u5c3a\u5bf8)\u6210\u53cd\u6bd4 \\[ \\operatorname{Var}\\left(W_{i}\\right)=\\frac{2}{n_{\\mathrm{in}}+n_{\\mathrm{out}}} \\] Optimizers \u901a\u5e38\uff0c\u7b80\u5355\u7684SGD\u5c31\u53ef\u4ee5\u4e86 \u7136\u800c\uff0c\u8981\u5f97\u5230\u597d\u7684\u7ed3\u679c\u901a\u5e38\u9700\u8981\u624b\u52a8\u8c03\u6574\u5b66\u4e60\u901f\u5ea6(\u4e0b\u4e00\u5f20\u5e7b\u706f\u7247) \u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u7f51\u7edc\u548c\u60c5\u51b5\uff0c\u6216\u8005\u53ea\u662f\u4e3a\u4e86\u907f\u514d\u62c5\u5fc3\uff0c\u66f4\u6709\u7ecf\u9a8c\u7684\u590d\u6742\u7684 \u201c\u81ea\u9002\u5e94\u201d\u4f18\u5316\u5668\u901a\u5e38\u4f1a\u4ee4\u4f60\u505a\u5f97\u66f4\u597d\uff0c\u901a\u8fc7\u7d2f\u79ef\u68af\u5ea6\u7f29\u653e\u53c2\u6570\u8c03\u6574\u3002 \u8fd9\u4e9b\u6a21\u578b\u7ed9\u51fa\u4e86\u6bcf\u4e2a\u53c2\u6570\u7684\u5b66\u4e60\u901f\u5ea6 Adagrad RMSprop Adam \\(\\leftarrow\\) \u76f8\u5f53\u597d,\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\u662f\u5b89\u5168\u7684\u9009\u62e9 SparseAdam \u2026 Learning Rates \u4f60\u53ef\u4ee5\u7528\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b66\u4e60\u901f\u5ea6\u3002\u4ecelr = 0.001\u5f00\u59cb\uff1f \u5b83\u5fc5\u987b\u662f\u6570\u91cf\u7ea7\u7684\u2014\u2014\u5c1d\u8bd510\u7684\u5e42 \u592a\u5927\uff1a\u6a21\u578b\u53ef\u80fd\u4f1a\u53d1\u6563\u6216\u4e0d\u6536\u655b \u592a\u5c0f\uff1a\u4f60\u7684\u6a21\u578b\u53ef\u80fd\u8bad\u7ec3\u4e0d\u51fa\u5f88\u597d\u7684\u6548\u679c \u5982\u679c\u4f60\u5728\u8bad\u7ec3\u65f6\u964d\u4f4e\u5b66\u4e60\u901f\u5ea6\uff0c\u901a\u5e38\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6548\u679c \u624b\u5de5\uff1a\u6bcf\u9694 \\(k\\) \u4e2a\u9636\u6bb5(epoch)\u5c06\u5b66\u4e60\u901f\u5ea6\u51cf\u534a epoch = \u904d\u5386\u4e00\u6b21\u6570\u636e (\u6253\u4e71\u6216\u91c7\u6837\u7684) \u901a\u8fc7\u4e00\u4e2a\u516c\u5f0f\uff1a \\(l r=l r_{0} e^{-k t}, \\text{for epoch }t\\) \u8fd8\u6709\u66f4\u65b0\u5947\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5faa\u73af\u5b66\u4e60\u7387(q.v.) \u66f4\u9ad8\u7ea7\u7684\u4f18\u5316\u5668\u4ecd\u7136\u4f7f\u7528\u5b66\u4e60\u7387\uff0c\u4f46\u5b83\u53ef\u80fd\u662f\u4f18\u5316\u5668\u7f29\u5c0f\u7684\u521d\u59cb\u901f\u5ea6\u2014\u2014\u56e0\u6b64\u53ef\u80fd\u53ef\u4ee5\u4ece\u8f83\u9ad8\u7684\u901f\u5ea6\u5f00\u59cb Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"04 Backpropagation and Computation Graphs"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/#lecture-04-backpropagation-and-computation-graphs","text":"Lecture Plan Matrix gradients for our simple neural net and some tips Computation graphs and backpropagation Stuff you should know Regularization to prevent overfitting Vectorization Nonlinearities Initialization Optimizers Learning rates","title":"Lecture 04 Backpropagation and Computation Graphs"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/#1-derivative-wrt-a-weight-matrix","text":"\u8ba9\u6211\u4eec\u4ed4\u7ec6\u770b\u770b\u8ba1\u7b97 \\(\\frac{\\partial s}{\\partial \\textbf{W}}\\) \u518d\u6b21\u4f7f\u7528\u94fe\u5f0f\u6cd5\u5219 \\[ \\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\frac{\\partial s}{\\partial \\boldsymbol{h}} \\frac{\\partial \\boldsymbol{h}}{\\partial \\boldsymbol{z}} \\frac{\\partial \\boldsymbol{z}}{\\partial \\boldsymbol{W}} \\] Deriving gradients for backprop \u8fd9\u4e2a\u51fd\u6570(\u4ece\u4e0a\u6b21\u5f00\u59cb) \\(\\frac{\\partial s}{\\partial W}=\\delta \\frac{\\partial \\mathbf{z}}{\\partial W}=\\boldsymbol{\\delta} \\frac{\\partial}{\\partial \\boldsymbol{W}} \\boldsymbol{W} \\boldsymbol{x}+\\boldsymbol{b}\\) \u8003\u8651\u5355\u4e2a\u6743\u91cd \\(W_{ij}\\) \u7684\u5bfc\u6570 \\(W_{ij}\\) \u53ea\u5bf9 \\(z_i\\) \u6709\u8d21\u732e \u4f8b\u5982 \\(W_{23}\\) \u53ea\u5bf9 \\(z_2\\) \u6709\u8d21\u732e\uff0c\u5bf9\u6ca1\u6709 \\(z_1\\) \u8d21\u732e \\[ \\begin{aligned} \\frac{\\partial z_{i}}{\\partial W_{i j}} &=\\frac{\\partial}{\\partial W_{i j}} W_{i \\cdot} x+b_{i} \\\\ &=\\frac{\\partial}{\\partial W_{i j}} \\sum_{k=1}^{d} W_{i k} x_{k}=x_{j} \\end{aligned} \\] \u5bf9\u4e8e\u5355\u4e2a \\(W_{ij}\\) \u7684\u5bfc\u6570 \u6211\u4eec\u60f3\u8981\u6574\u4e2a W \u7684\u68af\u5ea6\uff0c\u4f46\u662f\u6bcf\u79cd\u60c5\u51b5\u90fd\u662f\u4e00\u6837\u7684 \u603b\u4f53\u7b54\u6848\uff1a\u5916\u79ef \\[ \\begin{array}{l}{\\frac{\\partial s}{\\partial \\boldsymbol{W}}=\\boldsymbol{\\delta}^{T} \\quad \\boldsymbol{x}^{T}} \\\\ {[n \\times m] \\quad[n \\times 1][1 \\times m]}\\end{array} \\] Deriving gradients: Tips \u6280\u5de71\uff1a\u4ed4\u7ec6\u5b9a\u4e49\u53d8\u91cf\u5e76\u8ddf\u8e2a\u5b83\u4eec\u7684\u7ef4\u5ea6\uff01 \u6280\u5de72\uff1a\u94fe\u5f0f\u6cd5\u5219\uff01\u5982\u679c \\(y = f(u)\\) , \\(u = g(x)\\) \uff0c\u5373 \\(y = f(g(x))\\) \u5219 \\(\\frac{\\partial \\boldsymbol{y}}{\\partial \\boldsymbol{x}}=\\frac{\\partial \\boldsymbol{y}}{\\partial \\boldsymbol{u}} \\frac{\\partial \\boldsymbol{u}}{\\partial \\boldsymbol{x}}\\) \u8981\u6e05\u695a\u54ea\u4e9b\u53d8\u91cf\u7528\u4e8e\u54ea\u4e9b\u8ba1\u7b97 \u63d0\u793a3\uff1a\u6a21\u578b\u7684\u6700\u4e0a\u9762\u7684softmax\u90e8\u5206\uff1a\u9996\u5148\u8003\u8651\u5f53 \\(c = y\\) (\u6b63\u786e\u7684\u7c7b)\u7684\u5bfc\u6570 \\(f_c\\) \uff0c\u7136\u540e\u518d\u8003\u8651\u5f53 \\(c \\neq y\\) (\u6240\u6709\u4e0d\u6b63\u786e\u7684\u7c7b)\u7684\u5bfc\u6570 \\(f_c\\) \u6280\u5de74\uff1a\u5982\u679c\u4f60\u88ab\u77e9\u9635\u5fae\u79ef\u5206\u641e\u7cca\u6d82\u4e86\uff0c\u8bf7\u8ba1\u7b97\u9010\u4e2a\u5143\u7d20\u7684\u504f\u5bfc\u6570\uff01 \u6280\u5de75\uff1a\u4f7f\u7528\u5f62\u72b6\u7ea6\u5b9a\u3002\u6ce8\u610f\uff1a\u5230\u8fbe\u9690\u85cf\u5c42\u7684\u9519\u8bef\u6d88\u606f \\(\\delta\\) \u5177\u6709\u4e0e\u8be5\u9690\u85cf\u5c42\u76f8\u540c\u7684\u7ef4\u5ea6 Deriving gradients wrt words for window model \u5230\u8fbe\u5e76\u66f4\u65b0\u5355\u8bcd\u5411\u91cf\u7684\u68af\u5ea6\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u89e3\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u5411\u91cf\u7684\u68af\u5ea6 \u4ee4 \\(\\nabla_{x} J=W^{T} \\delta=\\delta_{x_{w i n d o w}}\\) \uff0c\u5f53 \\(X_{\\text { window }}=\\left[\\begin{array}{llll}{\\mathrm{X}_{\\text { museums }}} & {\\mathrm{X}_{\\text { in }}} & {\\mathrm{X}_{\\text { Paris }}} & {\\mathrm{X}_{\\text { are }}} & {\\mathrm{X}_{\\text { amazing }}}\\end{array}\\right]\\) \u5219\u5f97\u5230 \\[ \\begin{align} \\delta_{\\text {window}}=\\left[\\begin{array}{c}{\\nabla_{x_{\\text {museums}}}} \\\\ {\\nabla_{x_{i n}}} \\\\ {\\nabla_{x_{\\text {Pare}}}} \\\\ {\\nabla_{x_{\\text {are}}}} \\\\ {\\nabla_{x_{\\text {amazing}}}}\\end{array}\\right] \\in \\mathbb{R}^{5 d} \\end{align} \\] \u6211\u4eec\u5c06\u6839\u636e\u68af\u5ea6\u9010\u4e2a\u66f4\u65b0\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u77e9\u9635\u4e2d\u7684\u8bcd\u5411\u91cf\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u662f\u5bf9\u8bcd\u5411\u91cf\u77e9\u9635\u7684\u66f4\u65b0\u662f\u975e\u5e38\u7a00\u758f\u7684 Updating word gradients in window model \u5f53\u6211\u4eec\u5c06\u68af\u5ea6\u66f4\u65b0\u5230\u8bcd\u5411\u91cf\u4e2d\u65f6\uff0c\u8fd9\u5c06\u63a8\u52a8\u5355\u8bcd\u5411\u91cf\uff0c\u4f7f\u5b83\u4eec(\u5728\u539f\u5219\u4e0a)\u5728\u786e\u5b9a\u547d\u540d\u5b9e\u4f53\u65f6\u66f4\u6709\u5e2e\u52a9\u3002 \u4f8b\u5982\uff0c\u6a21\u578b\u53ef\u4ee5\u4e86\u89e3\u5230\uff0c\u5f53\u770b\u5230 \\(x_{in}\\) \u662f\u4e2d\u5fc3\u8bcd\u4e4b\u524d\u7684\u5355\u8bcd\u65f6\uff0c\u6307\u793a\u4e2d\u5fc3\u8bcd\u662f\u4e00\u4e2a Location A pitfall when retraining word vectors \u80cc\u666f\uff1a\u6211\u4eec\u6b63\u5728\u8bad\u7ec3\u4e00\u4e2a\u5355\u8bcd\u7535\u5f71\u8bc4\u8bba\u60c5\u7eea\u7684\u903b\u8f91\u56de\u5f52\u5206\u7c7b\u6a21\u578b\u3002 \u5728**\u8bad\u7ec3\u6570\u636e**\u4e2d\uff0c\u6211\u4eec\u6709\u201cTV\u201d\u548c\u201ctelly\u201d \u5728**\u6d4b\u8bd5\u6570\u636e**\u4e2d\u6211\u4eec\u6709\u201ctelevision\u201d\u201d \u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5411\u91cf\u6709\u4e09\u4e2a\u76f8\u4f3c\u4e4b\u5904\uff1a \u95ee\u9898\uff1a\u5f53\u6211\u4eec\u66f4\u65b0\u5411\u91cf\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48 \u56de\u7b54\uff1a \u90a3\u4e9b\u5728**\u8bad\u7ec3\u6570\u636e**\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u56db\u5904\u79fb\u52a8 \u201cTV\u201d\u548c\u201ctelly\u201d **\u6ca1\u6709\u5305\u542b\u5728\u8bad\u7ec3\u6570\u636e**\u4e2d\u7684\u8bcd\u6c47\u4fdd\u6301\u539f\u6837 \u201ctelevision\u201d So what should I do? \u95ee\u9898\uff1a\u5e94\u8be5\u4f7f\u7528\u53ef\u7528\u7684\u201c\u9884\u8bad\u7ec3\u201d\u5b57\u5411\u91cf\u5417\uff1f \u56de\u7b54\uff1a \u51e0\u4e4e\u603b\u5e94\u8be5\u662f\u7528 \u4ed6\u4eec\u63a5\u53d7\u4e86\u5927\u91cf\u7684\u6570\u636e\u8bad\u7ec3\uff0c\u6240\u4ee5\u4ed6\u4eec\u4f1a\u77e5\u9053\u8bad\u7ec3\u6570\u636e\u4e2d\u6ca1\u6709\u7684\u5355\u8bcd\uff0c\u4e5f\u4f1a\u77e5\u9053\u66f4\u591a\u5173\u4e8e\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u5355\u8bcd \u62e5\u6709\u4e0a\u4ebf\u5b57\u7684\u6570\u636e\u5417\uff1f\u597d\u7684\uff0c\u968f\u673a\u5f00\u59cb \u95ee\u9898\uff1a\u6211\u5e94\u8be5\u66f4\u65b0(\u201cfine tune\u201d)\u6211\u81ea\u5df1\u7684\u5355\u8bcd\u5411\u91cf\u5417\uff1f \u56de\u7b54\uff1a \u5982\u679c\u4f60\u53ea\u6709\u4e00\u4e2a\u5c0f\u7684\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u4e0d\u8981\u8bad\u7ec3\u8bcd\u5411\u91cf \u5982\u679c\u60a8\u6709\u4e00\u4e2a\u5927\u578b\u6570\u636e\u96c6\uff0c\u90a3\u4e48 train = update = fine-tune \u8bcd\u5411\u91cf\u5230\u4efb\u52a1\u53ef\u80fd\u4f1a\u66f4\u597d Backpropagation \u6211\u4eec\u51e0\u4e4e\u5df2\u7ecf\u5411\u4f60\u4eec\u5c55\u793a\u4e86\u53cd\u5411\u4f20\u64ad \u6c42\u5bfc\u5e76\u4f7f\u7528(\u5e7f\u4e49)\u94fe\u5f0f\u6cd5\u5219 \u53e6\u4e00\u4e2a\u6280\u5de7\uff1a\u5728\u8ba1\u7b97\u8f83\u4f4e\u5c42\u7684\u5bfc\u6570\u65f6\uff0c\u6211\u4eec**\u91cd\u7528**\u5bf9\u8f83\u9ad8\u5c42\u8ba1\u7b97\u7684\u5bfc\u6570\uff0c\u4ee5\u4f7f\u8ba1\u7b97\u6700\u5c0f\u5316","title":"1. Derivative wrt a weight matrix"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/#2-computation-graphs-and-backpropagation","text":"\u6211\u4eec\u628a\u795e\u7ecf\u7f51\u7edc\u65b9\u7a0b\u8868\u793a\u6210\u4e00\u4e2a\u56fe $$ s = \\textbf{u}^T\\textbf{h} \\ \\textbf{h} = f(\\textbf{z}) \\ \\textbf{z} = \\textbf{W}\\textbf{x}+\\textbf{b} \\ \\textbf{x} \\quad \\quad (\\text{input}) $$ Forward Propagation \u6e90\u8282\u70b9\uff1a\u8f93\u5165 \u5185\u90e8\u8282\u70b9\uff1a\u64cd\u4f5c \u8fb9\u4f20\u9012\u64cd\u4f5c\u7684\u7ed3\u679c Back Propagation \u6cbf\u7740\u8fb9\u56de\u4f20**\u68af\u5ea6** Backpropagation: Single Node \\[ \\textbf{h} = f(\\textbf{z}) \\] \u8282\u70b9\u63a5\u6536\u201c\u4e0a\u6e38\u68af\u5ea6\u201d \u76ee\u6807\u662f\u4f20\u9012\u6b63\u786e\u7684\u201c\u4e0b\u6e38\u68af\u5ea6\u201d \u6bcf\u4e2a\u8282\u70b9\u90fd\u6709**\u5c40\u90e8\u68af\u5ea6** local gradient \u5b83\u8f93\u51fa\u7684\u68af\u5ea6\u662f\u4e0e\u5b83\u7684\u8f93\u5165\u6709\u5173 [downstream gradient] = [upstream gradient] x [local gradient] \u6709\u591a\u4e2a\u8f93\u5165\u7684\u8282\u70b9\u5462\uff1f $$ \\textbf{z} = \\textbf{W}\\textbf{x} $$ \u591a\u4e2a\u8f93\u5165 \\(\\to\\) \u591a\u4e2a\u5c40\u90e8\u68af\u5ea6 An Example Forward Backward $$ \\begin{aligned} \\frac{\\partial f}{\\partial x} = 2 \\ \\frac{\\partial f}{\\partial y} = 3 + 2 = 5 \\ \\frac{\\partial f}{\\partial z} = 0 \\end{aligned} $$ Gradients sum at outward branches \u4e0a\u56fe\u4e2d\u7684 \\(\\frac{\\partial f}{\\partial y}\\) \u7684\u68af\u5ea6\u7684\u8ba1\u7b97 $$ a = x + y \\ b = max(y,z) \\ f = ab \\ \\frac{\\partial f}{\\partial y} = \\frac{\\partial f}{\\partial a}\\frac{\\partial a}{\\partial y} + \\frac{\\partial f}{\\partial b}\\frac{\\partial b}{\\partial y} $$ Node Intuitions \\(+\\) \u201c\u5206\u53d1\u201d \u4e0a\u6e38\u68af\u5ea6\u7ed9\u6bcf\u4e2a \\(summand\\) \\(max\\) \u201c\u8def\u7531\u201d \u4e0a\u6e38\u68af\u5ea6\uff0c\u5c06\u68af\u5ea6\u53d1\u9001\u5230\u6700\u5927\u7684\u65b9\u5411 \\(*\\) \u201c\u5207\u6362\u201d\u4e0a\u6e38\u68af\u5ea6 Efficiency: compute all gradients at once \u4e0d\u91cd\u590d\u8ba1\u7b97\u68af\u5ea6 Back-Prop in General Computation Graph Fprop\uff1a\u6309\u62d3\u6251\u6392\u5e8f\u987a\u5e8f\u8bbf\u95ee\u8282\u70b9 \u8ba1\u7b97\u7ed9\u5b9a\u7236\u8282\u70b9\u7684\u8282\u70b9\u7684\u503c Bprop\uff1a \u521d\u59cb\u5316\u8f93\u51fa\u68af\u5ea6\u4e3a 1 \u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u65b9\u4f4d\u8282\u70b9\uff0c\u4f7f\u7528\u8282\u70b9\u7684\u540e\u7ee7\u7684\u68af\u5ea6\u6765\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u7684\u68af\u5ea6 \\(\\{y_1,y_2,\\dots,y_n\\}\\) \u662f \\(x\\) \u7684\u540e\u7ee7 \\(\\frac{\\partial z}{\\partial x} = \\sum_{i=1}^n \\frac{\\partial z}{\\partial y_i}\\frac{\\partial y_i}{\\partial x}\\) \u6b63\u786e\u5730\u8bf4\uff0cFprop \u548c Bprop \u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u662f\u4e00\u6837\u7684 \u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u6709\u56fa\u5b9a\u7684\u5c42\u7ed3\u6784\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u77e9\u9635\u548c\u96c5\u53ef\u6bd4\u77e9\u9635 Automatic Differentiation \u68af\u5ea6\u8ba1\u7b97\u53ef\u4ee5\u4ece Fprop \u7684\u7b26\u53f7\u8868\u8fbe\u5f0f\u4e2d\u81ea\u52a8\u63a8\u65ad \u6bcf\u4e2a\u8282\u70b9\u7c7b\u578b\u9700\u8981\u77e5\u9053\u5982\u4f55\u8ba1\u7b97\u5176\u8f93\u51fa\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u7ed9\u5b9a\u5176\u8f93\u51fa\u7684\u68af\u5ea6\u540e\u8ba1\u7b97\u5176\u8f93\u5165\u7684\u68af\u5ea6 \u73b0\u4ee3DL\u6846\u67b6(Tensorflow, Pytoch)\u4e3a\u60a8\u505a\u53cd\u5411\u4f20\u64ad\uff0c\u4f46\u4e3b\u8981\u662f\u4ee4\u4f5c\u8005\u624b\u5de5\u8ba1\u7b97\u5c42/\u8282\u70b9\u7684\u5c40\u90e8\u5bfc\u6570 Backprop Implementations \u4e3a\u4e86\u8ba1\u7b97\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u4eec\u9700\u8981\u5728\u524d\u5411\u4f20\u64ad\u65f6\u5b58\u50a8\u4e00\u4e9b\u53d8\u91cf\u7684\u503c Gradient checking: Numeric Gradient \u5bf9\u4e8e \\(h \\approx 1e^{-4}\\) , \\(f^{\\prime}(x) \\approx \\frac{f(x+h)-f(x-h)}{2 h}\\) \u6613\u4e8e\u6b63\u786e\u5b9e\u73b0 \u4f46\u8fd1\u4f3c\u4e14\u975e\u5e38\u7f13\u6162 \u5fc5\u987b\u5bf9\u6a21\u578b\u7684\u6bcf\u4e2a\u53c2\u6570\u91cd\u65b0\u8ba1\u7b97 \\(f\\) \u7528\u4e8e\u68c0\u67e5\u60a8\u7684\u5b9e\u73b0 \u5728\u8fc7\u53bb\u6211\u4eec\u624b\u5199\u6240\u6709\u4e1c\u897f\u7684\u65f6\u5019\uff0c\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u8fd9\u6837\u505a\u662f\u5173\u952e\u3002 \u73b0\u5728\uff0c\u5f53\u628a\u56fe\u5c42\u653e\u5728\u4e00\u8d77\u65f6\uff0c\u5c31\u4e0d\u9700\u8981\u90a3\u4e48\u591a\u4e86 Summary \u6211\u4eec\u5df2\u7ecf\u638c\u63e1\u4e86\u795e\u7ecf\u7f51\u7edc\u7684\u6838\u5fc3\u6280\u672f \u53cd\u5411\u4f20\u64ad\uff1a\u6cbf\u8ba1\u7b97\u56fe\u9012\u5f52\u5e94\u7528\u94fe\u5f0f\u6cd5\u5219 [downstream gradient] = [upstream gradient] x [local gradient] \u524d\u5411\u4f20\u9012\uff1a\u8ba1\u7b97\u64cd\u4f5c\u7ed3\u679c\u5e76\u4fdd\u5b58\u4e2d\u95f4\u503c \u53cd\u5411\u4f20\u9012\uff1a\u5e94\u7528\u94fe\u5f0f\u6cd5\u5219\u8ba1\u7b97\u68af\u5ea6 Why learn all these details about gradients? \u73b0\u4ee3\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e3a\u60a8\u8ba1\u7b97\u68af\u5ea6 \u4f46\u662f\uff0c\u5f53\u7f16\u8bd1\u5668\u6216\u7cfb\u7edf\u4e3a\u60a8\u5b9e\u73b0\u65f6\uff0c\u4e3a\u4ec0\u4e48\u8981\u5b66\u4e60\u5b83\u4eec\u5462\uff1f \u4e86\u89e3\u5f15\u64ce\u76d6\u4e0b\u53d1\u751f\u4e86\u4ec0\u4e48\u662f\u6709\u7528\u7684 \u53cd\u5411\u4f20\u64ad\u5e76\u4e0d\u603b\u662f\u5b8c\u7f8e\u5730\u5de5\u4f5c \u7406\u89e3\u4e3a\u4ec0\u4e48\u5bf9\u8c03\u8bd5\u548c\u6539\u8fdb\u6a21\u578b\u81f3\u5173\u91cd\u8981 \u53c2\u89c1 Karpathy\u6587\u7ae0 \uff08\u5728\u6559\u5b66\u5927\u7eb2\u4e2d\uff09 \u672a\u6765\u8bfe\u7a0b\u7684\u4f8b\u5b50:\u7206\u70b8\u548c\u6d88\u5931\u7684\u68af\u5ea6","title":"2. Computation Graphs and Backpropagation"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/#3-we-have-models-with-many-params-regularization","text":"\u5b9e\u9645\u4e0a\u4e00\u4e2a\u5b8c\u6574\u7684\u635f\u5931\u51fd\u6570\u5305\u542b\u4e86\u6240\u6709\u53c2\u6570 \\(\\theta\\) \u7684\u6b63\u5219\u5316\uff08\u4e0b\u5f0f\u4e2d\u6700\u540e\u4e00\u9879\uff09\uff0c\u4f8b\u5982L2\u6b63\u5219\u5316\uff1a \\[ J(\\theta)=\\frac{1}{N} \\sum_{i=1}^{N}-\\log \\left(\\frac{e^{f_{y_{i}}}}{\\sum_{c=1}^{C} e^{f_{c}}}\\right)+\\lambda \\sum_{k} \\theta_{k}^{2} \\] \u6b63\u5219\u5316(\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a)\u53ef\u4ee5\u9632\u6b62\u5728\u6211\u4eec\u6709\u5f88\u591a\u7279\u5f81\u65f6\u8fc7\u62df\u5408(\u6216\u8005\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927/\u6df1\u5c42\u7684\u6a21\u578b\u7b49\u7b49) \u201cVectorization\u201d \u4f8b\u5982\uff0c\u5bf9\u5355\u8bcd\u5411\u91cf\u8fdb\u884c\u5faa\u73af\uff0c\u800c\u4e0d\u662f\u5c06\u5b83\u4eec\u5168\u90e8\u8fde\u63a5\u5230\u4e00\u4e2a\u5927\u77e9\u9635\u4e2d\uff0c\u7136\u540e\u5c06softmax\u6743\u503c\u4e0e\u8be5\u77e9\u9635\u76f8\u4e58 1000 loops, best of 3: 639 \u03bcs per loop 10000 loops, best of 3: 53.8 \u03bcs per loop (10x)\u66f4\u5feb\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 \\(C \\times N\\) \u77e9\u9635 \u603b\u662f\u5c1d\u8bd5\u4f7f\u7528\u5411\u91cf\u548c\u77e9\u9635\uff0c\u800c\u4e0d\u662f\u5faa\u73af \u4f60\u4e5f\u5e94\u8be5\u5feb\u901f\u6d4b\u8bd5\u4f60\u7684\u4ee3\u7801 \u7b80\u5355\u6765\u8bf4\uff1a\u77e9\u9635\u592a\u68d2\u4e86 Non-linearities: The starting points tanh \u53ea\u662f\u4e00\u4e2a\u91cd\u65b0\u653e\u7f29\u548c\u79fb\u52a8\u7684 sigmoid (\u4e24\u500d\u9661\u5ced\uff0c[-1,1]) $$ \\tanh (z)=2 \\operatorname{logistic}(2 z)-1 $$ logistic \u548c tanh \u4ecd\u7136\u88ab\u7528\u4e8e\u7279\u5b9a\u7684\u7528\u9014\uff0c\u4f46\u4e0d\u518d\u662f\u6784\u5efa\u6df1\u5ea6\u7f51\u7edc\u7684\u9ed8\u8ba4\u503c\u3002 logistic\u548ctanh: \u8bbe\u8ba1\u590d\u6742\u7684\u6570\u5b66\u8fd0\u7b97\uff0c\u6307\u6570\u8ba1\u7b97\u4f1a\u51cf\u6162\u901f\u5ea6\u3002\u6240\u4ee5\u4eba\u4eec\u63d0\u51fa\u4e86 hard tanh\uff0c\u5e76\u4e14\u6548\u679c\u5f88\u4e0d\u9519\u3002\u4e8e\u662f\u624d\u6709\u4e86 ReLU Non-linearities: The new world order \u4e3a\u4e86\u5efa\u7acb\u4e00\u4e2a\u524d\u9988\u6df1\u5ea6\u7f51\u7edc\uff0c\u4f60\u5e94\u8be5\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u662fReLU\u2014\u2014\u7531\u4e8e\u826f\u597d\u7684**\u68af\u5ea6\u56de\u6d41**\uff0c\u8bad\u7ec3\u901f\u5ea6\u5feb\uff0c\u6027\u80fd\u597d \u6bcf\u4e2a\u5355\u5143\u8981\u4e48\u5df2\u7ecf\u6b7b\u4e86\uff0c\u8981\u4e48\u5728\u4f20\u9012\u4fe1\u606f\u3002 \u975e\u96f6\u8303\u56f4\u5185\u53ea\u6709\u4e00\u4e2a\u659c\u7387\uff0c\u8fd9\u4e00\u4f4d\u7f6e\u68af\u5ea6\u5341\u5206\u6709\u6548\u7684\u4f20\u9012\u7ed9\u4e86\u8f93\u5165\uff0c\u6240\u4ee5\u6a21\u578b\u975e\u5e38\u6709\u6548\u7684\u8bad\u7ec3 Parameter Initialization \u901a\u5e38 \u5fc5\u987b\u5c06\u6743\u91cd\u521d\u59cb\u5316\u4e3a\u5c0f\u7684\u968f\u673a\u503c \uff08\u8fd9\u6837\u624d\u80fd\u5728\u6fc0\u6d3b\u51fd\u6570\u7684\u6709\u6548\u8303\u56f4\u5185\uff0c \u5373\u5b58\u5728\u68af\u5ea6\u53ef\u4ee5\u4f7f\u5176\u66f4\u65b0\uff09 \u907f\u514d\u5bf9\u79f0\u6027\u59a8\u788d\u5b66\u4e60/\u7279\u6b8a\u5316\u7684 \u521d\u59cb\u5316\u9690\u542b\u5c42\u504f\u5dee\u4e3a0\uff0c\u5982\u679c\u6743\u91cd\u4e3a0\uff0c\u5219\u8f93\u51fa(\u6216\u91cd\u6784)\u504f\u5dee\u4e3a\u6700\u4f18\u503c(\u4f8b\u5982\uff0c\u5747\u503c\u76ee\u6807\u6216\u5747\u503c\u76ee\u6807\u7684\u53cds\u5f62) \u521d\u59cb\u5316 \u6240\u6709\u5176\u4ed6\u6743\u91cd \u4e3aUniform(\u2013r, r)\uff0c\u9009\u62e9\u4f7f\u6570\u5b57\u65e2\u4e0d\u4f1a\u592a\u5927\u4e5f\u4e0d\u4f1a\u592a\u5c0f\u7684 r Xavier\u521d\u59cb\u5316\u4e2d\uff0c\u65b9\u5dee\u4e0e fan-in \\(n_{in}\\) (\u524d\u4e00\u5c42\u5c3a\u5bf8)\u548c fan-out \\(n_{out}\\) (\u4e0b\u4e00\u5c42\u5c3a\u5bf8)\u6210\u53cd\u6bd4 \\[ \\operatorname{Var}\\left(W_{i}\\right)=\\frac{2}{n_{\\mathrm{in}}+n_{\\mathrm{out}}} \\] Optimizers \u901a\u5e38\uff0c\u7b80\u5355\u7684SGD\u5c31\u53ef\u4ee5\u4e86 \u7136\u800c\uff0c\u8981\u5f97\u5230\u597d\u7684\u7ed3\u679c\u901a\u5e38\u9700\u8981\u624b\u52a8\u8c03\u6574\u5b66\u4e60\u901f\u5ea6(\u4e0b\u4e00\u5f20\u5e7b\u706f\u7247) \u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u7f51\u7edc\u548c\u60c5\u51b5\uff0c\u6216\u8005\u53ea\u662f\u4e3a\u4e86\u907f\u514d\u62c5\u5fc3\uff0c\u66f4\u6709\u7ecf\u9a8c\u7684\u590d\u6742\u7684 \u201c\u81ea\u9002\u5e94\u201d\u4f18\u5316\u5668\u901a\u5e38\u4f1a\u4ee4\u4f60\u505a\u5f97\u66f4\u597d\uff0c\u901a\u8fc7\u7d2f\u79ef\u68af\u5ea6\u7f29\u653e\u53c2\u6570\u8c03\u6574\u3002 \u8fd9\u4e9b\u6a21\u578b\u7ed9\u51fa\u4e86\u6bcf\u4e2a\u53c2\u6570\u7684\u5b66\u4e60\u901f\u5ea6 Adagrad RMSprop Adam \\(\\leftarrow\\) \u76f8\u5f53\u597d,\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\u662f\u5b89\u5168\u7684\u9009\u62e9 SparseAdam \u2026 Learning Rates \u4f60\u53ef\u4ee5\u7528\u4e00\u4e2a\u56fa\u5b9a\u7684\u5b66\u4e60\u901f\u5ea6\u3002\u4ecelr = 0.001\u5f00\u59cb\uff1f \u5b83\u5fc5\u987b\u662f\u6570\u91cf\u7ea7\u7684\u2014\u2014\u5c1d\u8bd510\u7684\u5e42 \u592a\u5927\uff1a\u6a21\u578b\u53ef\u80fd\u4f1a\u53d1\u6563\u6216\u4e0d\u6536\u655b \u592a\u5c0f\uff1a\u4f60\u7684\u6a21\u578b\u53ef\u80fd\u8bad\u7ec3\u4e0d\u51fa\u5f88\u597d\u7684\u6548\u679c \u5982\u679c\u4f60\u5728\u8bad\u7ec3\u65f6\u964d\u4f4e\u5b66\u4e60\u901f\u5ea6\uff0c\u901a\u5e38\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6548\u679c \u624b\u5de5\uff1a\u6bcf\u9694 \\(k\\) \u4e2a\u9636\u6bb5(epoch)\u5c06\u5b66\u4e60\u901f\u5ea6\u51cf\u534a epoch = \u904d\u5386\u4e00\u6b21\u6570\u636e (\u6253\u4e71\u6216\u91c7\u6837\u7684) \u901a\u8fc7\u4e00\u4e2a\u516c\u5f0f\uff1a \\(l r=l r_{0} e^{-k t}, \\text{for epoch }t\\) \u8fd8\u6709\u66f4\u65b0\u5947\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5faa\u73af\u5b66\u4e60\u7387(q.v.) \u66f4\u9ad8\u7ea7\u7684\u4f18\u5316\u5668\u4ecd\u7136\u4f7f\u7528\u5b66\u4e60\u7387\uff0c\u4f46\u5b83\u53ef\u80fd\u662f\u4f18\u5316\u5668\u7f29\u5c0f\u7684\u521d\u59cb\u901f\u5ea6\u2014\u2014\u56e0\u6b64\u53ef\u80fd\u53ef\u4ee5\u4ece\u8f83\u9ad8\u7684\u901f\u5ea6\u5f00\u59cb","title":"3. We have models with many params! Regularization!"},{"location":"CS224n-2019-04-Backpropagation%20and%20Computation%20Graphs/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/","text":"Lecture 05 Linguistic Structure: Dependency Parsing \u00b6 Lecture Plan Syntactic Structure: Consistency and Dependency Dependency Grammar and Treebanks Transition-based dependency parsing Neural dependency parsing Dependency Parsing: \u4f9d\u5b58\u5173\u7cfb\u8bed\u6cd5\u5206\u6790\uff0c\u7b80\u79f0 \u4f9d\u5b58\u5206\u6790\u3002 1. Two views of linguistic structure \u00b6 Constituency Parsing \u00b6 Constituency = phrase structure grammar = context-free grammars (CFGs) context-free grammars (CFGs) \u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5 \u53e5\u5b50\u662f\u4f7f\u7528\u9010\u6b65\u5d4c\u5957\u7684\u5355\u5143\u6784\u5efa\u7684 \u77ed\u8bed\u7ed3\u6784\u5c06\u5355\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u7684\u6210\u5206 \u8d77\u6b65\u5355\u5143\uff1a\u5355\u8bcd \u88ab\u8d4b\u4e88\u4e00\u4e2a\u7c7b\u522b (part of speech=pos \u8bcd\u6027) \u5355\u8bcd\u7ec4\u5408\u6210\u4e0d\u540c\u7c7b\u522b\u7684\u77ed\u8bed \u77ed\u8bed\u53ef\u4ee5 \u9012\u5f52 \u5730\u7ec4\u5408\u6210\u66f4\u5927\u7684\u77ed\u8bed \u4e0a\u56fe\u4e2d Det \u6307\u7684\u662f Determiner \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u9650\u5b9a\u8bcd NP \u6307\u7684\u662f Noun Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u540d\u8bcd\u77ed\u8bed VP \u6307\u7684\u662f Verb Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u52a8\u8bcd\u77ed\u8bed P \u6307\u7684\u662f Preposition \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u4ecb\u8bcd PP \u6307\u7684\u662f Prepositional Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u4ecb\u8bcd\u77ed\u8bed \\(\\text{NP} \\to \\text{Det N}\\) \\(\\text{NP} \\to \\text{Det (Adj) N}\\) \\(\\text{NP} \\to \\text{Det (Adj) N PP}\\) \\(\\text{PP} \\to \\text{P NP}\\) \\(\\text{VP} \\to \\text{V PP}\\) \u4e2d\u6587\u4e2d\uff0c\u4ecb\u8bcd\u77ed\u8bed\u4f1a\u51fa\u73b0\u5728\u52a8\u8bcd\u4e4b\u524d Example : The cat by the large crate on the large table by the door \u4f46\u662f\u53e6\u4e00\u79cd\u89c2\u70b9\u5728\u8ba1\u7b97\u8bed\u8a00\u5b66\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002 Dependency Parsing \u00b6 \u4e0d\u662f\u4f7f\u7528\u5404\u79cd\u7c7b\u578b\u7684\u77ed\u8bed\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u5355\u8bcd\u4e0e\u5176\u4ed6\u7684\u5355\u8bcd\u5173\u7cfb\u8868\u793a\u53e5\u5b50\u7684\u7ed3\u6784\uff0c\u663e\u793a\u54ea\u4e9b\u5355\u8bcd\u4f9d\u8d56\u4e8e(\u4fee\u9970\u6216\u662f\u5176\u53c2\u6570)\u54ea\u4e9b\u5176\u4ed6\u5355\u8bcd \\(\\text{look}\\) \u662f\u6574\u4e2a\u53e5\u5b50\u7684\u6839\u6e90\uff0c \\(\\text{look}\\) \u4f9d\u8d56\u4e8e \\(\\text{crate}\\) \uff08\u6216\u8005\u8bf4 \\(\\text{crate}\\) \u662f \\(\\text{look}\\) \u7684\u4f9d\u8d56\uff09 \\(\\text{in, the, large}\\) \u90fd\u662f \\(\\text{crate}\\) \u7684\u4f9d\u8d56 \\(\\text{in the kitchen}\\) \u662f \\(\\text{crate}\\) \u7684\u4fee\u9970 \\(\\text{in, the}\\) \u90fd\u662f \\(\\text{kitchen}\\) \u7684\u4f9d\u8d56 \\(\\text{by the door}\\) \u662f \\(\\text{crate}\\) \u7684\u4f9d\u8d56 Why do we need sentence structure? \u4e3a\u4e86\u80fd\u591f\u6b63\u786e\u5730\u89e3\u91ca\u8bed\u8a00\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u53e5\u5b50\u7ed3\u6784 \u4eba\u7c7b\u901a\u8fc7\u5c06\u5355\u8bcd\u7ec4\u5408\u6210\u66f4\u5927\u7684\u5355\u5143\u6765\u4f20\u8fbe\u590d\u6742\u7684\u610f\u601d\uff0c\u4ece\u800c\u4ea4\u6d41\u590d\u6742\u7684\u601d\u60f3 \u6211\u4eec\u9700\u8981\u77e5\u9053\u4ec0\u4e48\u4e0e\u4ec0\u4e48\u76f8\u5173\u8054 \u9664\u975e\u6211\u4eec\u77e5\u9053\u54ea\u4e9b\u8bcd\u662f\u5176\u4ed6\u8bcd\u7684\u53c2\u6570\u6216\u4fee\u9970\u8bcd\uff0c\u5426\u5219\u6211\u4eec\u65e0\u6cd5\u5f04\u6e05\u695a\u53e5\u5b50\u662f\u4ec0\u4e48\u610f\u601d Prepositional phrase attachment ambiguity \u00b6 \u4ecb\u8bcd\u77ed\u8bed\u4f9d\u9644\u6b67\u4e49 \\(\\text{San Jose cops kill man with knife}\\) \u8b66\u5bdf\u7528\u5200\u6740\u4e86\u90a3\u4e2a\u7537\u5b50 cops \u662f kill \u7684 subject (subject \u6307 \u4e3b\u8bed) man \u662f kill \u7684 object (object \u6307 \u5bbe\u8bed) knife \u662f kill \u7684 modifier (modifier \u6307 \u4fee\u9970\u7b26) \u8b66\u5bdf\u6740\u4e86\u90a3\u4e2a\u6709\u5200\u7684\u7537\u5b50 knife \u662f man \u7684 modifier (\u540d\u8bcd\u4fee\u9970\u7b26\uff0c\u7b80\u79f0\u4e3a nmod ) from space \u8fd9\u4e00\u4ecb\u8bcd\u77ed\u8bed\u4fee\u9970\u7684\u662f\u524d\u9762\u7684\u52a8\u8bcd count \u8fd8\u662f\u540d\u8bcd whales \uff1f \u8fd9\u5c31\u662f\u4eba\u7c7b\u8bed\u8a00\u548c\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4e0d\u540c\u7684\u5730\u65b9 \u5173\u952e\u7684\u89e3\u6790\u51b3\u7b56\u662f\u6211\u4eec\u5982\u4f55 \u201c\u4f9d\u5b58\u201d \u5404\u79cd\u6210\u5206 \u4ecb\u8bcd\u77ed\u8bed\u3001\u72b6\u8bed\u6216\u5206\u8bcd\u77ed\u8bed\u3001\u4e0d\u5b9a\u5f0f\u3001\u534f\u8c03\u7b49\u3002 \u4e0a\u8ff0\u53e5\u5b50\u4e2d\u6709\u56db\u4e2a\u4ecb\u8bcd\u77ed\u8bed board \u662f approved \u7684 \u4e3b\u8bed\uff0c acquisition \u662f approved \u7684\u8c13\u8bed by Royal Trustco Ltd. \u662f\u4fee\u9970 acquisition \u7684\uff0c\u5373\u8463\u4e8b\u4f1a\u6279\u51c6\u4e86\u8fd9\u5bb6\u516c\u53f8\u7684\u6536\u8d2d of Toronto \u53ef\u4ee5\u4fee\u9970 approved, acquisition, Royal Trustco Ltd. \u4e4b\u4e00\uff0c\u7ecf\u8fc7\u5206\u6790\u53ef\u4ee5\u5f97\u77e5\u662f\u4fee\u9970 Royal Trustco Ltd. \u5373\u8868\u793a\u8fd9\u5bb6\u516c\u53f8\u7684\u4f4d\u7f6e for $27 a share \u4fee\u9970 acquisition at its monthly meeting \u4fee\u9970 approved \uff0c\u5373\u8868\u793a\u6279\u51c6\u7684\u65f6\u95f4\u5730\u70b9 \u9762\u5bf9\u8fd9\u6837\u590d\u6742\u7684\u53e5\u5b50\u7ed3\u6784\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651 \u6307\u6570\u7ea7 \u7684\u53ef\u80fd\u7ed3\u6784\uff0c\u8fd9\u4e2a\u5e8f\u5217\u88ab\u79f0\u4e3a Catalan numbers Catalan numbers : \\(C_{n}=(2 n) ! /[(n+1) ! n !]\\) \u4e00\u4e2a\u6307\u6570\u589e\u957f\u7684\u5e8f\u5217\uff0c\u51fa\u73b0\u5728\u8bb8\u591a\u7c7b\u4f3c\u6811\u7684\u73af\u5883\u4e2d \u4f8b\u5982\uff0c\u4e00\u4e2a n+2 \u8fb9\u7684\u591a\u8fb9\u5f62\u53ef\u80fd\u7684\u4e09\u89d2\u5256\u5206\u7684\u6570\u91cf \u51fa\u73b0\u5728\u6982\u7387\u56fe\u5f62\u6a21\u578b\u7684\u4e09\u89d2\u5256\u5206\u4e2d(CS228) Coordination scope ambiguity \u00b6 \u534f\u8c03\u8303\u56f4\u6a21\u7cca \u4f8b\u53e5\uff1aShuttle veteran and longtime NASA executive Fred Gregory appointed to board \u4e00\u4e2a\u4eba\uff1a[[Shuttle veteran and longtime NASA executive] Fred Gregory] appointed to board \u4e24\u4e2a\u4eba\uff1a[Shuttle veteran] and [longtime NASA executive Fred Gregory] appointed to board \u4f8b\u53e5\uff1aDoctor: No heart, cognitive issues Adjectival Modifier Ambiguity \u00b6 \u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed\u6b67\u4e49 \u4f8b\u53e5\uff1aStudents get first hand job experience first hand \u8868\u793a \u7b2c\u4e00\u624b\u7684\uff0c\u76f4\u63a5\u7684\uff0c\u5373\u5b66\u751f\u83b7\u5f97\u4e86\u76f4\u63a5\u7684\u5de5\u4f5c\u7ecf\u9a8c first \u662f hand \u7684\u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed(amod) first \u4fee\u9970 experience, hand \u4fee\u9970 job Verb Phrase (VP) attachment ambiguity \u00b6 \u52a8\u8bcd\u77ed\u8bed(VP)\u4f9d\u5b58\u6b67\u4e49 \u4f8b\u53e5\uff1aMutilated body washes up on Rio beach to be used for Olympic beach volleyball. to be used for Olympic beach volleyball \u662f \u52a8\u8bcd\u77ed\u8bed (VP) \u4fee\u9970\u7684\u662f body \u8fd8\u662f beach Dependency paths identify semantic relations \u2013e.g., for protein interaction \u4f9d\u8d56\u8def\u5f84\u8bc6\u522b\u8bed\u4e49\u5173\u7cfb 2. Dependency Grammar and Dependency Structure \u00b6 \u5173\u8054\u8bed\u6cd5\u5047\u8bbe\u53e5\u6cd5\u7ed3\u6784\u5305\u62ec\u8bcd\u6c47\u9879\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u901a\u5e38\u662f\u4e8c\u5143\u4e0d\u5bf9\u79f0\u5173\u7cfb(\u201c\u7bad\u5934\u201d)\uff0c\u79f0\u4e3a\u4f9d\u8d56\u5173\u7cfb Dependency Structure\u6709\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f \u4e00\u79cd\u662f\u76f4\u63a5\u5728\u53e5\u5b50\u4e0a\u6807\u51fa\u4f9d\u5b58\u5173\u7cfb\u7bad\u5934\u53ca\u8bed\u6cd5\u5173\u7cfb \u53e6\u4e00\u79cd\u662f\u5c06\u5176\u505a\u6210\u6811\u72b6\u673a\u6784\uff08Dependency Tree Graph\uff09 \u7bad\u5934\u901a\u5e38\u6807\u8bb0( type )\u4e3a\u8bed\u6cd5\u5173\u7cfb\u7684\u540d\u79f0(\u4e3b\u9898\u3001\u4ecb\u8bcd\u5bf9\u8c61\u3001apposition\u7b49)\u3002 \u4f9d\u8d56\u5173\u7cfb\u6807\u7b7e\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982 universal dependency \u901a\u7528\u4f9d\u8d56 \u7bad\u5934\u8fde\u63a5\u5934\u90e8( head )(\u8c03\u901f\u5668,\u4e0a\u7ea7,regent)\u548c\u4e00\u4e2a\u4f9d\u8d56(\u4fee\u9970\u8bcd,\u4e0b\u7ea7,\u4e0b\u5c5e) A \\(\\to\\) \u4f9d\u8d56\u4e8e A \u7684\u4e8b\u60c5 \u901a\u5e38,\u4f9d\u8d56\u5173\u7cfb\u5f62\u6210\u4e00\u68f5\u6811(\u5355\u5934 \u65e0\u73af \u8fde\u63a5\u56fe) Dependency Grammar/Parsing History \u4f9d\u8d56\u7ed3\u6784\u7684\u6982\u5ff5\u53ef\u4ee5\u8ffd\u6eaf\u5230\u5f88\u4e45\u4ee5\u524d P\u0101\u1e47ini\u7684\u8bed\u6cd5(\u516c\u5143\u524d5\u4e16\u7eaa) \u4e00\u5343\u5e74 \u963f\u62c9\u4f2f\u8bed\u7684\u8bed\u6cd5\u7684\u57fa\u672c\u65b9\u6cd5 \u9009\u533a/\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\u662f\u4e00\u4e2a\u65b0\u5947\u7684\u53d1\u660e 20\u4e16\u7eaa\u53d1\u660e(R.S.Wells,1947; then Chomsky) \u73b0\u4ee3\u4f9d\u8d56\u5de5\u4f5c\u7ecf\u5e38\u6e90\u4e8e L. Tesni\u00e8re(1959) \u662f20\u4e16\u7eaa\u201c\u4e1c\u65b9\u201d\u7684\u4e3b\u5bfc\u65b9\u6cd5(\u4fc4\u7f57\u65af\uff0c\u4e2d\u56fd\uff0c\u2026) \u6709\u5229\u4e8e\u66f4\u81ea\u7531\u7684\u8bed\u5e8f\u8bed\u8a00 NLP\u4e2d\u6700\u65e9\u7c7b\u578b\u7684\u89e3\u6790\u5668\u5728\u7f8e\u56fd David Hays \u662f\u7f8e\u56fd\u8ba1\u7b97\u8bed\u8a00\u5b66\u7684\u521b\u59cb\u4eba\u4e4b\u4e00\uff0c\u4ed6\u5f88\u65e9\u5c31(\u7b2c\u4e00\u4e2a?)\u6784\u5efa\u4e86\u4f9d\u8d56\u89e3\u6790\u5668(Hays 1962)\u3002 Dependency Grammar and Dependency Structure \u4eba\u4eec\u5bf9\u7bad\u5934\u6307\u5411\u7684\u65b9\u5f0f\u4e0d\u4e00\u81f4\uff1a\u6709\u4e9b\u4eba\u628a\u7bad\u5934\u671d\u4e00\u4e2a\u65b9\u5411\u753b\uff1b\u6709\u4eba\u662f\u53cd\u8fc7\u6765\u7684 Tesni\u00e8re \u4ece\u5934\u5f00\u59cb\u6307\u5411\u4f9d\u8d56\uff0c\u672c\u8bfe\u4f7f\u7528\u6b64\u79cd\u65b9\u5f0f \u901a\u5e38\u6dfb\u52a0\u4e00\u4e2a\u4f2a\u6839\u6307\u5411\u6574\u4e2a\u53e5\u5b50\u7684\u5934\u90e8\uff0c\u8fd9\u6837\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7cbe\u786e\u5730\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u8282\u70b9 The rise of annotated data: Universal Dependencies treebanks [Universal Dependencies: http://universaldependencies.org/ ; cf. Marcus et al. 1993, The Penn Treebank, Computational Linguistics] Universal Dependencies \uff1a\u6211\u4eec\u60f3\u8981\u62e5\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u3001\u5e76\u884c\u7684\u4f9d\u8d56\u63cf\u8ff0\uff0c\u53ef\u7528\u4e8e\u4efb\u4f55\u4eba\u7c7b\u8bed\u8a00 \u4ece\u524d\u624b\u5de5\u7f16\u5199\u8bed\u6cd5\u7136\u540e\u8bad\u7ec3\u5f97\u5230\u53ef\u4ee5\u89e3\u6790\u53e5\u5b50\u7684\u89e3\u6790\u5668 \u7528\u4e00\u6761\u89c4\u5219\u6355\u6349\u5f88\u591a\u4e1c\u897f\u771f\u7684\u5f88\u6709\u6548\u7387\uff0c\u4f46\u662f\u4e8b\u5b9e\u8bc1\u660e\u8fd9\u5728\u5b9e\u8df5\u4e2d\u4e0d\u662f\u4e00\u4e2a\u597d\u4e3b\u610f \u8bed\u6cd5\u89c4\u5219\u7b26\u53f7\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u5e76\u4e14\u6ca1\u6709\u5171\u4eab\u548c\u91cd\u7528\u4eba\u7c7b\u6240\u505a\u7684\u5de5\u4f5c \u53e5\u5b50\u7ed3\u6784\u4e0a\u7684treebanks \u652f\u6301\u7ed3\u6784\u66f4\u6709\u6548 The rise of annotated data \u4ece\u4e00\u5f00\u59cb\uff0c\u6784\u5efa treebank \u4f3c\u4e4e\u6bd4\u6784\u5efa\u8bed\u6cd5\u6162\u5f97\u591a\uff0c\u4e5f\u6ca1\u6709\u90a3\u4e48\u6709\u7528 \u4f46\u662f treebank \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e1c\u897f \u52b3\u52a8\u529b\u7684\u53ef\u91cd\u7528\u6027 \u8bb8\u591a\u89e3\u6790\u5668\u3001\u8bcd\u6027\u6807\u8bb0\u5668\u7b49\u53ef\u4ee5\u6784\u5efa\u5728\u5b83\u4e4b\u4e0a \u8bed\u8a00\u5b66\u7684\u5b9d\u8d35\u8d44\u6e90 \u5e7f\u6cdb\u7684\u8986\u76d6\u9762\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e9b\u76f4\u89c9 \u9891\u7387\u548c\u5206\u5e03\u4fe1\u606f \u4e00\u79cd\u8bc4\u4f30\u7cfb\u7edf\u7684\u65b9\u6cd5 Dependency Conditioning Preferences \u4f9d\u8d56\u9879\u89e3\u6790\u7684\u4fe1\u606f\u6765\u6e90\u662f\u4ec0\u4e48\uff1f Bilexical affinities (\u4e24\u4e2a\u5355\u8bcd\u95f4\u7684\u5bc6\u5207\u5173\u7cfb) [discussion \\(\\to\\) issues] \u662f\u770b\u4e0a\u53bb\u6709\u9053\u7406\u7684 Dependency distance \u4f9d\u8d56\u8ddd\u79bb \u4e3b\u8981\u662f\u4e0e\u76f8\u90bb\u8bcd Intervening material \u4ecb\u4e8e\u4e2d\u95f4\u7684\u7269\u8d28 \u4f9d\u8d56\u5f88\u5c11\u8de8\u8d8a\u4ecb\u4e8e\u4e2d\u95f4\u7684\u52a8\u8bcd\u6216\u6807\u70b9\u7b26\u53f7 Valency of heads How many dependents on which side are usual for a head? Dependency Parsing \u00b6 \u901a\u8fc7\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u9009\u62e9\u5b83\u6240\u4f9d\u8d56\u7684\u5176\u4ed6\u5355\u8bcd(\u5305\u62ec\u6839)\u6765\u89e3\u6790\u4e00\u4e2a\u53e5\u5b50 \u901a\u5e38\u6709\u4e00\u4e9b\u9650\u5236 \u53ea\u6709\u4e00\u4e2a\u5355\u8bcd\u662f\u4f9d\u8d56\u4e8e\u6839\u7684 \u4e0d\u5b58\u5728\u5faa\u73af \\(A \\to B, B \\to A\\) \u8fd9\u4f7f\u5f97\u4f9d\u8d56\u9879\u6210\u4e3a\u6811 \u6700\u540e\u4e00\u4e2a\u95ee\u9898\u662f\u7bad\u5934\u662f\u5426\u53ef\u4ee5\u4ea4\u53c9(\u975e\u6295\u5f71\u7684 non-projective) \u6ca1\u6709\u4ea4\u53c9\u7684\u5c31\u662fnon-projectice Projectivity \u5b9a\u4e49\uff1a\u5f53\u5355\u8bcd\u6309\u7ebf\u6027\u987a\u5e8f\u6392\u5217\u65f6\uff0c\u6ca1\u6709\u4ea4\u53c9\u7684\u4f9d\u8d56\u5f27\uff0c\u6240\u6709\u7684\u5f27\u90fd\u5728\u5355\u8bcd\u7684\u4e0a\u65b9 \u4e0eCFG\u6811\u5e76\u884c\u7684\u4f9d\u8d56\u5173\u7cfb\u5fc5\u987b\u662f\u6295\u5f71\u7684 \u901a\u8fc7\u5c06\u6bcf\u4e2a\u7c7b\u522b\u7684\u4e00\u4e2a\u5b50\u7c7b\u522b\u4f5c\u4e3a\u5934\u6765\u5f62\u6210\u4f9d\u8d56\u5173\u7cfb \u4f46\u662f\u4f9d\u8d56\u7406\u8bba\u901a\u5e38\u5141\u8bb8\u975e\u6295\u5c04\u7ed3\u6784\u6765\u89e3\u91ca\u79fb\u4f4d\u7684\u6210\u5206 \u5982\u679c\u6ca1\u6709\u8fd9\u4e9b\u975e\u6295\u5c04\u4f9d\u8d56\u5173\u7cfb\uff0c\u5c31\u4e0d\u53ef\u80fd\u5f88\u5bb9\u6613\u83b7\u5f97\u67d0\u4e9b\u7ed3\u6784\u7684\u8bed\u4e49 Methods of Dependency Parsing \u00b6 Dynamic programming Eisner(1996)\u63d0\u51fa\u4e86\u4e00\u79cd\u590d\u6742\u5ea6\u4e3a \\(O(n^3)\\) \u7684\u806a\u660e\u7b97\u6cd5\uff0c\u5b83\u751f\u6210\u5934\u90e8\u4f4d\u4e8e\u672b\u5c3e\u800c\u4e0d\u662f\u4e2d\u95f4\u7684\u89e3\u6790\u9879 Graph algorithms \u4e3a\u4e00\u4e2a\u53e5\u5b50\u521b\u5efa\u4e00\u4e2a\u6700\u5c0f\u751f\u6210\u6811 McDonald et al.\u2019s (2005) MSTParser \u4f7f\u7528ML\u5206\u7c7b\u5668\u72ec\u7acb\u5730\u5bf9\u4f9d\u8d56\u9879\u8fdb\u884c\u8bc4\u5206(\u4ed6\u4f7f\u7528MIRA\u8fdb\u884c\u5728\u7ebf\u5b66\u4e60\uff0c\u4f46\u5b83\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u4e1c\u897f) Constraint Satisfaction \u53bb\u6389\u4e0d\u6ee1\u8db3\u786c\u7ea6\u675f\u7684\u8fb9 Karlsson(1990), etc. \u201cTransition-based parsing\u201d or \u201cdeterministic dependency parsing\u201c \u826f\u597d\u7684\u673a\u5668\u5b66\u4e60\u5206\u7c7b\u5668 MaltParser(Nivreet al. 2008) \u6307\u5bfc\u4e0b\u7684\u4f9d\u5b58\u8d2a\u5a6a\u9009\u62e9\u3002\u5df2\u8bc1\u660e\u975e\u5e38\u6709\u6548\u3002 3. Greedy transition-based parsing [Nivre 2003] \u00b6 \u8d2a\u5a6a\u5224\u522b\u4f9d\u8d56\u89e3\u6790\u5668 greedy discriminative dependency parser \u7684\u4e00\u79cd\u7b80\u5355\u5f62\u5f0f \u89e3\u6790\u5668\u6267\u884c\u4e00\u7cfb\u5217\u81ea\u5e95\u5411\u4e0a\u7684\u64cd\u4f5c \u5927\u81f4\u7c7b\u4f3c\u4e8e shift-reduce\u89e3\u6790\u5668 \u4e2d\u7684\u201cshift\u201d\u6216\u201creduce\u201d\uff0c\u4f46\u201creduce\u201d\u64cd\u4f5c\u4e13\u95e8\u7528\u4e8e\u521b\u5efa\u5934\u5728\u5de6\u6216\u53f3\u7684\u4f9d\u8d56\u9879 \u89e3\u6790\u5668\u5982\u4e0b\uff1a \u6808 \\(\\sigma\\) \u4ee5 ROOT \u7b26\u53f7\u5f00\u59cb\uff0c\u7531\u82e5\u5e72 \\(w_i\\) \u7ec4\u6210 \u7f13\u5b58 \\(\\beta\\) \u4ee5\u8f93\u5165\u5e8f\u5217\u5f00\u59cb\uff0c\u7531\u82e5\u5e72 \\(w_i\\) \u7ec4\u6210 \u4e00\u4e2a\u4f9d\u5b58\u5f27\u7684\u96c6\u5408 \\(A\\) \uff0c\u4e00\u5f00\u59cb\u4e3a\u7a7a\u3002\u6bcf\u6761\u8fb9\u7684\u5f62\u5f0f\u662f \\((w_i,r,w_j)\\) \uff0c\u5176\u4e2d \\(r\\) \u63cf\u8ff0\u4e86\u8282\u70b9\u7684\u4f9d\u5b58\u5173\u7cfb \u4e00\u7ec4\u64cd\u4f5c \u6700\u7ec8\u76ee\u6807\u662f \\(\\sigma = [\\text{ROOT}], \\beta = \\phi\\) \uff0c \\(A\\) \u5305\u542b\u4e86\u6240\u6709\u7684\u4f9d\u5b58\u5f27 Basic transition-based dependency parser state\u4e4b\u95f4\u7684transition\u6709\u4e09\u7c7b\uff1a SHIFT\uff1a\u5c06buffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\u79fb\u51fa\u5e76\u653e\u5230stack\u4e0a\u3002 LEFT-ARC\uff1a\u5c06 \\((w_j,r,w_i)\\) \u52a0\u5165\u8fb9\u7684\u96c6\u5408 A \uff0c\u5176\u4e2d \\(w_i\\) \u662fstack\u4e0a\u7684\u6b21\u9876\u5c42\u7684\u8bcd\uff0c \\(w_j\\) \u662fstack\u4e0a\u7684\u6700\u9876\u5c42\u7684\u8bcd\u3002 RIGHT-ARC:\u5c06 \\((w_i,r,w_j)\\) \u52a0\u5165\u8fb9\u7684\u96c6\u5408 A \uff0c\u5176\u4e2d \\(w_i\\) \u662fstack\u4e0a\u7684\u6b21\u9876\u5c42\u7684\u8bcd\uff0c \\(w_j\\) \u662fstack\u4e0a\u7684\u6700\u9876\u5c42\u7684\u8bcd\u3002 \u6211\u4eec\u4e0d\u65ad\u7684\u8fdb\u884c\u4e0a\u8ff0\u4e09\u7c7b\u64cd\u4f5c\uff0c\u76f4\u5230\u4ece\u521d\u59cb\u6001\u8fbe\u5230\u6700\u7ec8\u6001\u3002 \u5728\u6bcf\u4e2a\u72b6\u6001\u4e0b\u5982\u4f55\u9009\u62e9\u54ea\u79cd\u64cd\u4f5c\u5462\uff1f\u5f53\u6211\u4eec\u8003\u8651\u5230LEFT-ARC\u4e0eRIGHT-ARC\u5404\u6709 \\(|R|\\) \uff08 \\(|R|\\) \u4e3a \\(r\\) \u7684\u7c7b\u7684\u4e2a\u6570\uff09\u79cd\u7c7b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u770b\u505a\u662fclass\u6570\u4e3a \\(2|R|+1\\) \u7684\u5206\u7c7b\u95ee\u9898\uff0c\u53ef\u4ee5\u7528SVM\u7b49\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u65b9\u6cd5\u89e3\u51b3\u3002 Arc-standard transition-based parser \u8fd8\u6709\u5176\u4ed6\u7684 transition \u65b9\u6848 Analysis of \u201c I ate fish \u201d MaltParser [Nivreand Hall 2005] \u6211\u4eec\u9700\u8981\u89e3\u91ca\u5982\u4f55\u9009\u62e9\u4e0b\u4e00\u6b65\u884c\u52a8 Answer\uff1a\u673a\u5668\u5b66\u4e60 \u6bcf\u4e2a\u52a8\u4f5c\u90fd\u7531\u4e00\u4e2a\u6709\u533a\u522b\u5206\u7c7b\u5668(\u4f8b\u5982softmax classifier)\u5bf9\u6bcf\u4e2a\u5408\u6cd5\u7684\u79fb\u52a8\u8fdb\u884c\u9884\u6d4b \u6700\u591a\u4e09\u79cd\u65e0\u7c7b\u578b\u7684\u9009\u62e9\uff0c\u5f53\u5e26\u6709\u7c7b\u578b\u65f6\uff0c\u6700\u591a \\(|R| \\times 2 + 1\\) \u79cd Features\uff1a\u6808\u9876\u5355\u8bcd\uff0cPOS\uff1bbuffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0cPOS\uff1b\u7b49\u7b49 \u5728\u6700\u7b80\u5355\u7684\u5f62\u5f0f\u4e2d\u662f\u6ca1\u6709\u641c\u7d22\u7684 \u4f46\u662f\uff0c\u5982\u679c\u4f60\u613f\u610f\uff0c\u4f60\u53ef\u4ee5\u6709\u6548\u5730\u6267\u884c\u4e00\u4e2a Beam search \u675f\u641c\u7d22(\u867d\u7136\u901f\u5ea6\u8f83\u6162\uff0c\u4f46\u6548\u679c\u66f4\u597d)\uff1a\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u9aa4\u4e2d\u4fdd\u7559 k\u4e2a\u597d\u7684\u89e3\u6790\u524d\u7f00 \u8be5\u6a21\u578b\u7684\u7cbe\u5ea6\u7565\u4f4e\u4e8e\u4f9d\u8d56\u89e3\u6790\u7684\u6700\u9ad8\u6c34\u5e73\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u975e\u5e38\u5feb\u7684\u7ebf\u6027\u65f6\u95f4\u89e3\u6790\uff0c\u6027\u80fd\u975e\u5e38\u597d Conventional Feature Representation \u4f20\u7edf\u7684\u7279\u5f81\u8868\u793a\u4f7f\u7528\u4e8c\u5143\u7684\u7a00\u758f\u5411\u91cf \\(10^6 \\sim 10^7\\) \u7279\u5f81\u6a21\u677f\uff1a\u901a\u5e38\u7531\u914d\u7f6e\u4e2d\u76841 ~ 3\u4e2a\u5143\u7d20\u7ec4\u6210 Indicator features Evaluation of Dependency Parsing: (labeled) dependency accuracy \u00b6 \u5176\u4e2d\uff0c UAS (unlabeled attachment score) \u6307 \u65e0\u6807\u8bb0\u4f9d\u5b58\u6b63\u786e\u7387 \uff0c LAS (labeled attachment score) \u6307 \u6709\u6807\u8bb0\u4f9d\u5b58\u6b63\u786e\u7387 Handling non-projectivity \u6211\u4eec\u63d0\u51fa\u7684\u5f27\u6807\u51c6\u7b97\u6cd5\u53ea\u6784\u5efa\u6295\u5f71\u4f9d\u8d56\u6811 \u5934\u90e8\u53ef\u80fd\u7684\u65b9\u5411 \u5728\u975e\u6295\u5f71\u5f27\u4e0a\u5ba3\u5e03\u5931\u8d25 \u53ea\u5177\u6709\u6295\u5f71\u8868\u793a\u65f6\u4f7f\u7528\u4f9d\u8d56\u5f62\u5f0f CFG\u53ea\u5141\u8bb8\u6295\u5f71\u7ed3\u6784 \u4f7f\u7528\u6295\u5f71\u4f9d\u8d56\u9879\u89e3\u6790\u7b97\u6cd5\u7684\u540e\u5904\u7406\u5668\u6765\u8bc6\u522b\u548c\u89e3\u6790\u975e\u6295\u5f71\u94fe\u63a5 \u6dfb\u52a0\u989d\u5916\u7684\u8f6c\u6362\uff0c\u81f3\u5c11\u53ef\u4ee5\u5bf9\u5927\u591a\u6570\u975e\u6295\u5f71\u7ed3\u6784\u5efa\u6a21\uff08\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u4ea4\u6362\u8f6c\u6362\uff0c\u5192\u6ce1\u6392\u5e8f\uff09 \u8f6c\u79fb\u5230\u4e0d\u4f7f\u7528\u6216\u4e0d\u9700\u8981\u5bf9\u6295\u5c04\u6027\u8fdb\u884c\u4efb\u4f55\u7ea6\u675f\u7684\u89e3\u6790\u673a\u5236(\u4f8b\u5982\uff0c\u57fa\u4e8e\u56fe\u7684MSTParser) 4. Why train a neural dependency parser? Indicator Features Revisited \u00b6 Indicator Features\u7684\u95ee\u9898 \u7a00\u758f \u4e0d\u5b8c\u6574 \u8ba1\u7b97\u590d\u6742 \u8d85\u8fc795%\u7684\u89e3\u6790\u65f6\u95f4\u90fd\u7528\u4e8e\u7279\u5f81\u8ba1\u7b97 A neural dependency parser [Chen and Manning 2014] \u65af\u5766\u798f\u4f9d\u8d56\u5173\u7cfb\u7684\u82f1\u8bed\u89e3\u6790 Unlabeled attachment score (UAS) = head Labeled attachment score (LAS) = head and label \u6548\u679c\u597d\uff0c\u901f\u5ea6\u5feb Distributed Representations \u6211\u4eec\u5c06\u6bcf\u4e2a\u5355\u8bcd\u8868\u793a\u4e3a\u4e00\u4e2ad\u7ef4\u7a20\u5bc6\u5411\u91cf\uff08\u5982\u8bcd\u5411\u91cf\uff09 \u76f8\u4f3c\u7684\u5355\u8bcd\u5e94\u8be5\u6709\u76f8\u8fd1\u7684\u5411\u91cf \u540c\u65f6\uff0c part-of-speech tags \u8bcd\u6027\u6807\u7b7e(POS)\u548c dependency labels \u4f9d\u8d56\u6807\u7b7e\u4e5f\u8868\u793a\u4e3ad\u7ef4\u5411\u91cf \u8f83\u5c0f\u7684\u79bb\u6563\u96c6\u4e5f\u8868\u73b0\u51fa\u8bb8\u591a\u8bed\u4e49\u4e0a\u7684\u76f8\u4f3c\u6027\u3002 NNS (\u590d\u6570\u540d\u8bcd)\u5e94\u8be5\u63a5\u8fd1**NN**(\u5355\u6570\u540d\u8bcd) num (\u6570\u503c\u4fee\u9970\u8bed)\u5e94\u8be5\u63a5\u8fd1**amod**(\u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed)\u3002 \u5bf9\u4e8eNeural Dependency Parser\uff0c\u5176\u8f93\u5165\u7279\u5f81\u901a\u5e38\u5305\u542b\u4e09\u79cd stack\u548cbuffer\u4e2d\u7684\u5355\u8bcd\u53ca\u5176dependent word \u5355\u8bcd\u7684part-of-speech tag \u63cf\u8ff0\u8bed\u6cd5\u5173\u7cfb\u7684arc label \u6211\u4eec\u6839\u636e\u5806\u6808/\u7f13\u51b2\u533a\u4f4d\u7f6e\u63d0\u53d6\u4e00\u7ec4\u4ee4\u724c: \u6211\u4eec\u5c06\u5176\u8f6c\u6362\u4e3a\u8bcd\u5411\u91cf\u5e76\u5c06\u5b83\u4eec\u8054\u7ed3\u8d77\u6765\u4f5c\u4e3a\u8f93\u5165\u5c42\uff0c\u518d\u7ecf\u8fc7\u82e5\u5e72\u975e\u7ebf\u6027\u7684\u9690\u85cf\u5c42\uff0c\u6700\u540e\u52a0\u5165softmax layer\u5f97\u5230shift-reduce\u89e3\u6790\u5668\u7684\u52a8\u4f5c Model Architecture Dependency parsing for sentence structure \u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u51c6\u786e\u5730\u786e\u5b9a\u53e5\u5b50\u7684\u7ed3\u6784\uff0c\u652f\u6301\u89e3\u91ca Chen and Manning(2014)\u662f\u7b2c\u4e00\u4e2a\u7b80\u5355\uff0c\u6210\u529f\u7684\u795e\u7ecf\u4f9d\u8d56\u89e3\u6790\u5668 \u5bc6\u96c6\u7684\u8868\u793a\u4f7f\u5f97\u5b83\u5728**\u7cbe\u5ea6\u548c\u901f\u5ea6**\u4e0a\u90fd\u4f18\u4e8e\u5176\u4ed6\u8d2a\u5a6a\u7684\u89e3\u6790\u5668 Further developments in transition-based neural dependency parsing \u8fd9\u9879\u5de5\u4f5c\u7531\u5176\u4ed6\u4eba\u8fdb\u4e00\u6b65\u5f00\u53d1\u548c\u6539\u8fdb\uff0c\u7279\u522b\u662f\u5728\u8c37\u6b4c \u66f4\u5927\u3001\u66f4\u6df1\u7684\u7f51\u7edc\u4e2d\uff0c\u5177\u6709\u66f4\u597d\u8c03\u4f18\u7684\u8d85\u53c2\u6570 Beam Search \u66f4\u591a\u7684\u63a2\u7d22\u52a8\u4f5c\u5e8f\u5217\u7684\u53ef\u80fd\u6027\uff0c\u800c\u4e0d\u662f\u53ea\u8003\u8651\u5f53\u524d\u7684\u6700\u4f18 \u5168\u5c40\u3001\u6761\u4ef6\u968f\u673a\u573a(CRF)\u7684\u63a8\u7406\u51fa\u51b3\u7b56\u5e8f\u5217 \u8fd9\u5c31\u5f15\u51fa\u4e86SyntaxNet\u548cParsey McParseFace\u6a21\u578b Graph-based dependency parsers \u4e3a\u6bcf\u6761\u8fb9\u7684\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7684\u4f9d\u8d56\u5173\u7cfb\u8ba1\u7b97\u4e00\u4e2a\u5206\u6570 \u7136\u540e\u5c06\u6bcf\u4e2a\u5355\u8bcd\u7684\u8fb9\u7f18\u6dfb\u52a0\u5230\u5176\u5f97\u5206\u6700\u9ad8\u7684\u5019\u9009\u5934\u90e8 \u5e76\u5bf9\u6bcf\u4e2a\u5355\u8bcd\u91cd\u590d\u76f8\u540c\u7684\u64cd\u4f5c A Neural graph-based dependency parser [Dozat and Manning 2017; Dozat, Qi, and Manning 2017] \u5728\u795e\u7ecf\u6a21\u578b\u4e2d\u4e3a\u57fa\u4e8e\u56fe\u7684\u4f9d\u8d56\u5206\u6790\u6ce8\u5165\u6d3b\u529b \u4e3a\u795e\u7ecf\u4f9d\u8d56\u5206\u6790\u8bbe\u8ba1\u4e00\u4e2a\u53cc\u4eff\u5c04\u8bc4\u5206\u6a21\u578b \u4e5f\u4f7f\u7528\u795e\u7ecf\u5e8f\u5217\u6a21\u578b\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u5468\u8ba8\u8bba \u975e\u5e38\u68d2\u7684\u7ed3\u679c \u4f46\u662f\u6bd4\u7b80\u5355\u7684\u57fa\u4e8e\u795e\u7ecf\u4f20\u9012\u7684\u89e3\u6790\u5668\u8981\u6162 \u5728\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u53e5\u5b50\u4e2d\u53ef\u80fd\u6709 \\(n^2\\) \u4e2a\u4f9d\u8d56\u9879 Notes 04 Dependency Parsing \u00b6 Keyphrases : Dependency Parsing 1 Dependency Grammar and Dependency Structure \u00b6 \u4e0e\u7f16\u8bd1\u5668\u4e2d\u7684\u89e3\u6790\u6811\u7c7b\u4f3c\uff0c NLP \u4e2d\u7684\u89e3\u6790\u6811\u662f\u7528\u4e8e\u5206\u6790\u53e5\u5b50\u7684\u53e5\u6cd5\u7ed3\u6784\u3002\u4f7f\u7528\u7684\u7ed3\u6784\u4e3b\u8981\u6709\u4e24\u79cd\u7c7b\u578b\u2014\u2014\u77ed\u8bed\u7ed3\u6784\u548c\u4f9d\u5b58\u7ed3\u6784\u3002 \u77ed\u8bed\u7ed3\u6784\u6587\u6cd5\u4f7f\u7528\u77ed\u8bed\u7ed3\u6784\u8bed\u6cd5\u5c06\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u6210\u5206\u3002\u4ee5\u4e0b\u7ae0\u8282\u5c06\u5bf9\u6b64\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e\u3002\u6211\u4eec\u73b0\u5728\u5173\u6ce8\u4f9d\u5b58\u8bed\u6cd5\u3002 \u53e5\u5b50\u7684\u4f9d\u5b58\u7ed3\u6784\u5c55\u793a\u4e86\u5355\u8bcd\u4f9d\u8d56\u4e8e\u53e6\u5916\u4e00\u4e2a\u5355\u8bcd\uff08\u4fee\u9970\u6216\u8005\u662f\u53c2\u6570\uff09\u3002\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4e8c\u5143\u975e\u5bf9\u79f0\u5173\u7cfb\u79f0\u4e3a\u4f9d\u5b58\u5173\u7cfb\uff0c\u63cf\u8ff0\u4e3a\u4ece head \uff08\u88ab\u4fee\u9970\u7684\u4e3b\u9898\uff09\u7528\u7bad\u5934\u6307\u5411 dependent \uff08\u4fee\u9970\u8bed\uff09\u3002\u4e00\u822c\u8fd9\u4e9b\u4f9d\u5b58\u5173\u7cfb\u5f62\u6210\u6811\u7ed3\u6784\u3002\u4ed6\u4eec\u901a\u5e38\u7528\u8bed\u6cd5\u5173\u7cfb\u7684\u540d\u79f0\uff08\u4e3b\u4f53\uff0c\u4ecb\u8bcd\u5bbe\u8bed\uff0c\u540c\u4f4d\u8bed\u7b49\uff09\u3002\u4e00\u4e2a\u4f9d\u5b58\u6811\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6709\u65f6\uff0c\u5728\u6811\u7684\u5934\u90e8\u589e\u52a0\u4e00\u4e2a\u5047\u7684 ROOT \u8282\u70b9\uff0c\u8fd9\u6837\u6bcf\u4e2a\u5355\u8bcd\u90fd\u4f9d\u5b58\u4e8e\u552f\u4e00\u4e00\u4e2a\u8282\u70b9\u3002 1.1 Dependency Parsing \u00b6 \u4f9d\u5b58\u8bed\u6cd5\u662f\u7ed9\u5b9a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50 \\(S\\) \uff0c\u5206\u6790\u53e5\u5b50\u7684\u53e5\u6cd5\u4f9d\u5b58\u7ed3\u6784\u7684\u4efb\u52a1\u3002\u4f9d\u5b58\u53e5\u6cd5\u7684\u8f93\u51fa\u662f\u4e00\u68f5\u4f9d\u5b58\u8bed\u6cd5\u6811\uff0c\u5176\u4e2d\u8f93\u5165\u53e5\u5b50\u7684\u5355\u8bcd\u662f\u901a\u8fc7\u4f9d\u5b58\u5173\u7cfb\u7684\u65b9\u5f0f\u8fde\u63a5\u3002\u6b63\u5f0f\u5730\uff0c\u4f9d\u5b58\u8bed\u6cd5\u95ee\u9898\u662f\u521b\u5efa\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u5355\u8bcd \\(S=w_{0}w_{1}...w_{n}\\) \uff08\u5176\u4e2d \\(w_{0}\\) \u662f ROOT \uff09\u5230\u5b83\u7684\u4f9d\u5b58\u8bed\u6cd5\u6811\u7684\u6620\u5c04\u56fe \\(G\\) \u3002\u6700\u8fd1\u51e0\u5e74\u63d0\u51fa\u4e86\u5f88\u591a\u4ee5\u4f9d\u5b58\u53e5\u6cd5\u4e3a\u57fa\u7840\u7684\u7684\u53d8\u4f53\uff0c\u5305\u62ec\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\u3002 \u786e\u5207\u5730\u8bf4\uff0c\u5728\u4f9d\u5b58\u8bed\u6cd5\u4e2d\u6709\u4e24\u4e2a\u5b50\u95ee\u9898\uff1a \u5b66\u4e60\uff1a\u7ed9\u5b9a\u7528\u4f9d\u8d56\u8bed\u6cd5\u56fe\u6807\u6ce8\u7684\u53e5\u5b50\u7684\u8bad\u7ec3\u96c6 \\(D\\) \uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u7528\u4e8e\u89e3\u6790\u65b0\u53e5\u5b50\u7684\u89e3\u6790\u6a21\u578b \\(M\\) \u89e3\u6790\uff1a\u7ed9\u5b9a\u89e3\u6790\u6a21\u578b \\(M\\) \u548c\u53e5\u5b50 \\(S\\) \uff0c\u6839\u636e \\(M\\) \u5f97\u5230 \\(S\\) \u7684\u6700\u4f18\u4f9d\u5b58\u8bed\u6cd5\u56fe 1.2 Transition-Based Dependency Parsing \u00b6 Transition-based \u4f9d\u5b58\u8bed\u6cd5\u4f9d\u8d56\u4e8e\u5b9a\u4e49\u53ef\u80fd\u8f6c\u6362\u7684\u72b6\u6001\u673a\uff0c\u4ee5\u521b\u5efa\u4ece\u8f93\u5165\u53e5\u5230\u4f9d\u5b58\u53e5\u6cd5\u6811\u7684\u6620\u5c04\u3002\u5b66\u4e60\u95ee\u9898\u662f\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u6839\u636e\u8f6c\u79fb\u5386\u53f2\u6765\u9884\u6d4b\u72b6\u6001\u673a\u4e2d\u7684\u4e0b\u4e00\u4e2a\u8f6c\u6362\u7684\u6a21\u578b\u3002\u5206\u6790\u95ee\u9898\u662f\u4f7f\u7528\u5728\u5b66\u4e60\u95ee\u9898\u4e2d\u5f97\u5230\u7684\u6a21\u578b\u5bf9\u8f93\u5165\u53e5\u5b50\u6784\u5efa\u4e00\u4e2a**\u6700\u4f18\u7684\u8f6c\u79fb\u5e8f\u5217**\u3002\u5927\u591a\u6570 Transition-based \u7cfb\u7edf\u4e0d\u4f1a\u4f7f\u7528\u6b63\u5f0f\u7684\u8bed\u6cd5\u3002 1.3 Greedy Deterministic Transition-Based Parsing \u00b6 \u8fd9\u4e2a\u7cfb\u7edf\u662f\u7531 Nivre \u5728 2003 \u5e74\u63d0\u51fa\uff0c\u4e0e\u5f53\u65f6\u7684\u5e38\u7528\u65b9\u6cd5\u622a\u7136\u4e0d\u540c\u3002 \u8fd9\u4e2a\u8f6c\u6362\u7cfb\u7edf\u662f\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5b83\u7531\u72b6\u6001\u548c\u8fd9\u4e9b\u72b6\u6001\u4e4b\u95f4\u7684\u8f6c\u6362\u7ec4\u6210\u3002\u8be5\u6a21\u578b\u5bfc\u51fa\u4e86\u4ece\u521d\u59cb\u72b6\u6001\u5230\u51e0\u79cd\u7ec8\u7aef\u72b6\u6001\u4e4b\u4e00\u7684\u4e00\u7cfb\u5217\u8f6c\u6362\u3002 \u72b6\u6001 \uff1a\u5bf9\u4efb\u610f\u53e5\u5b50 \\(S=w_{0}w_{1}...w_{n}\\) \uff0c\u4e00\u4e2a\u72b6\u6001\u53ef\u4ee5\u63cf\u8ff0\u4e3a\u4e00\u4e2a\u4e09\u5143\u7ec4 \\(c=(\\sigma, \\beta,A)\\) \uff1a \u6765\u81ea S \u7684\u5355\u8bcd \\(w_{i}\\) \u7684\u5806 \\(\\sigma\\) \u6765\u81ea \\(S\\) \u7684\u5355\u8bcd \\(w_{i}\\) \u7684\u7f13\u51b2\u533a \\(\\beta\\) \u4e00\u7ec4\u5f62\u5f0f\u4e3a \\((w_{i},r,w_{j})\\) \u7684\u4f9d\u5b58\u5f27\uff0c\u5176\u4e2d \\(w_{i},w_{j}\\) \u662f\u6765\u81ea \\(S\\) \uff0c\u548c \\(r\\) \u63cf\u8ff0\u4f9d\u5b58\u5173\u7cfb\u3002 \u56e0\u6b64\uff0c\u5bf9\u4e8e\u4efb\u610f\u53e5\u5b50 \\(S=w_{0}w_{1}...w_{n}\\) \u4e00\u4e2a\u5f62\u5f0f\u4e3a \\(([w_{0}]_{\\sigma},[w_{1}...w_{n}]_{\\beta},\\varnothing)\\) \u7684\u521d\u59cb\u72b6\u6001 \\(c_{0}\\) \uff08\u73b0\u5728\u53ea\u6709 ROOT \u5728\u5806 \\(\\sigma\\) \u4e2d\uff0c\u6ca1\u6709\u88ab\u9009\u62e9\u7684\u5355\u8bcd\u90fd\u5728\u7f13\u51b2\u533a \\(\\beta\\) \u4e2d\u3002 \u4e00\u4e2a\u5f62\u5f0f\u4e3a \\((\\sigma,[]_{\\beta},A)\\) \u7684\u7ec8\u70b9\u72b6\u6001\u3002 \u8f6c\u79fb \uff1a\u5728\u72b6\u6001\u4e4b\u95f4\u6709\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u8f6c\u79fb\uff1a SHIFT \uff1a\u79fb\u9664\u5728\u7f13\u51b2\u533a\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0c\u7136\u540e\u5c06\u5176\u653e\u5728\u5806\u7684\u9876\u90e8\uff08\u524d\u63d0\u6761\u4ef6\uff1a\u7f13\u51b2\u533a\u4e0d\u80fd\u4e3a\u7a7a\uff09\u3002 \\(Left\\text{-}Arc_{r}\\) \uff1a\u5411\u4f9d\u5b58\u5f27\u96c6\u5408 A \u4e2d\u52a0\u5165\u4e00\u4e2a\u4f9d\u5b58\u5f27 \\((w_{j},r,w_{i})\\) \uff0c\u5176\u4e2d \\(w_{i}\\) \u662f\u5806\u9876\u7684\u7b2c\u4e8c\u4e2a\u5355\u8bcd\uff0c \\(w_{j}\\) \u662f\u5806\u9876\u90e8\u7684\u5355\u8bcd\u3002\u4ece\u6808\u4e2d\u79fb\u9664 \\(w_{i}\\) \uff08\u524d\u63d0\u6761\u4ef6\uff1a\u5806\u5fc5\u987b\u5305\u542b\u4e24\u4e2a\u5355\u8bcd\u4ee5\u53ca \\(w_{i}\\) \u4e0d\u662f ROOT \uff09\u3002 \\(Right\\text{-}Arc_{r}\\) \uff1a\u5411\u4f9d\u5b58\u5f27\u96c6\u5408 A \u4e2d\u52a0\u5165\u4e00\u4e2a\u4f9d\u5b58\u5f27 \\((w_{i},r,w_{j})\\) \uff0c\u5176\u4e2d \\(w_{i}\\) \u662f\u5806\u9876\u7684\u7b2c\u4e8c\u4e2a\u5355\u8bcd\uff0c \\(w_{j}\\) \u662f\u5806\u9876\u90e8\u7684\u5355\u8bcd\u3002\u4ece\u6808\u4e2d\u79fb\u9664 \\(w_{j}\\) \uff08\u524d\u63d0\u6761\u4ef6\uff1a\u5806\u5fc5\u987b\u5305\u542b\u4e24\u4e2a\u5355\u8bcd\uff09\u3002 \u4e0b\u56fe\u7ed9\u51fa\u4e86\u8fd9\u4e09\u4e2a\u8f6c\u6362\u7684\u66f4\u6b63\u5f0f\u7684\u5b9a\u4e49 1.4 Neural Dependency Parsing \u867d\u7136\u4f9d\u8d56\u9879\u89e3\u6790\u6709\u5f88\u591a\u6df1\u5c42\u6a21\u578b\uff0c\u8fd9\u90e8\u5206\u7279\u522b\u4fa7\u91cd\u4e8e\u8d2a\u5fc3\uff0c\u57fa\u4e8e\u8f6c\u79fb\u7684\u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u3002\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5224\u522b\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u76f8\u6bd4\uff0c\u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u6027\u80fd\u548c\u6548\u679c\u66f4\u597d\u3002\u4e0e\u4ee5\u524d\u6a21\u578b\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u8fd9\u7c7b\u6a21\u578b\u4f9d\u8d56\u7a20\u5bc6\u800c\u4e0d\u662f\u7a00\u758f\u7684\u7279\u5f81\u8868\u793a\u3002 \u6211\u4eec\u5c06\u8981\u63cf\u8ff0\u7684\u6a21\u578b\u91c7\u7528\u4e0a\u4e00\u90e8\u5206\u4e2d\u8bb2\u8ff0\u7684\u6807\u51c6\u4f9d\u5b58\u5f27\u8f6c\u6362\u7cfb\u7edf\u3002\u6700\u7ec8\uff0c\u6a21\u578b\u7684\u76ee\u6807\u662f\u9884\u6d4b\u4ece\u4e00\u4e9b\u521d\u59cb\u72b6\u6001 \\(c\\) \u5230\u4e00\u4e2a\u7ec8\u70b9\u72b6\u6001\u7684\u8f6c\u6362\u5e8f\u5217\uff0c\u5bf9\u6a21\u578b\u4e2d\u7684\u4f9d\u5b58\u8bed\u6cd5\u6811\u8fdb\u884c\u7f16\u7801\u7684\u3002\u7531\u4e8e\u6a21\u578b\u662f\u8d2a\u5fc3\u7684\uff0c\u5b83\u57fa\u4e8e\u4ece\u5f53\u524d\u7684\u72b6\u6001 \\(c=(\\sigma, \\beta, A)\\) \u63d0\u53d6\u7279\u5f81\uff0c\u7136\u540e\u5c1d\u8bd5\u4e00\u6b21\u6b63\u786e\u5730\u9884\u6d4b\u4e00\u6b21\u8f6c\u79fb \\(T\\in \\{SHIFT, Left\\text{-}Arc_{r},Right\\text{-}Arc_{r}\\}\\) \u3002\u56de\u60f3\u4e00\u4e0b\uff0c \\(\\sigma\\) \u662f\u6808\uff0c \\(\\beta\\) \u662f\u7f13\u5b58, \\(A\\) \u662f\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u53e5\u5b50\u7684\u4f9d\u8d56\u5f27\u7684\u96c6\u5408 \u7279\u5f81\u9009\u62e9 \uff1a\u6839\u636e\u8be5\u6a21\u578b\u6240\u9700\u7684\u590d\u6742\u6027\uff0c\u5b9a\u4e49\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165\u662f\u6709\u7075\u6d3b\u6027\u7684\u3002\u5bf9\u7ed9\u5b9a\u53e5\u5b50 \\(S\\) \u7684\u7279\u5f81\u5305\u542b\u4e00\u4e9b\u5b50\u96c6\uff1a \\(S_{word}\\) \uff1a\u5728\u5806 \\(\\sigma\\) \u7684\u9876\u90e8\u548c\u7f13\u51b2\u533a \\(\\beta\\) \u7684 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff08\u548c\u5b83\u4eec\u7684\u4f9d\u5b58\uff09\u3002 \\(S_{tag}\\) \uff1a\u5728 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u8bcd\u6027\u6807\u6ce8\uff08 POS \uff09\u3002\u8bcd\u6027\u6807\u6ce8\u662f\u7531\u4e00\u4e2a\u79bb\u6563\u96c6\u5408\u7ec4\u6210\uff1a \\(\\mathcal{P}=\\{NN,NNP,NNS,DT,JJ,...\\}\\) \u3002 \\(S_{label}\\) \uff1a\u5728 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u4f9d\u5b58\u6807\u7b7e\u3002\u4f9d\u5b58\u6807\u7b7e\u662f\u7531\u4e00\u4e2a\u4f9d\u5b58\u5173\u7cfb\u7684\u79bb\u6563\u96c6\u5408\u7ec4\u6210\uff1a \\(\\mathcal{L}=\\{amod,tmod,nsubj,csubj,dobj,...\\}\\) \u3002 \u5bf9\u6bcf\u79cd\u7279\u5f81\u7c7b\u578b\uff0c\u6211\u4eec\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u5c06\u7279\u5f81\u7684 one-hot \u7f16\u7801\u6620\u5c04\u5230\u4e00\u4e2a \\(d\\) \u7ef4\u7684\u7a20\u5bc6\u7684\u5411\u91cf\u8868\u793a\u7684\u5d4c\u5165\u77e9\u9635\u3002 \\(S_{word}\\) \u7684\u5b8c\u5168\u5d4c\u5165\u77e9\u9635\u662f \\(E^{w}\\in \\mathbb{R}^{d\\times N_{w}}\\) \uff0c\u5176\u4e2d \\(N_{w}\\) \u662f\u5b57\u5178/\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u76f8\u5e94\u5730\uff0cPOS \u548c\u4f9d\u5b58\u6807\u7b7e\u7684\u5d4c\u5165\u77e9\u9635\u5206\u522b\u4e3a \\(E^{t}\\in \\mathbb{R}^{d\\times N_{t}}\\) \u548c \\(E^{l}\\in \\mathbb{R}^{d\\times N_{l}}\\) \uff0c\u5176\u4e2d \\(N_{t}\\) \u548c \\(N_{l}\\) \u5206\u522b\u4e3a\u4e0d\u540c\u8bcd\u6027\u6807\u6ce8\u548c\u4f9d\u5b58\u6807\u7b7e\u7684\u4e2a\u6570\u3002\u6700\u540e\uff0c\u5b9a\u4e49\u4ece\u6bcf\u7ec4\u7279\u5f81\u4e2d\u9009\u51fa\u7684\u5143\u7d20\u7684\u6570\u91cf\u5206\u522b\u4e3a \\(n_{word}, n_{tag}, n_{label}\\) \u3002 \u7279\u5f81\u9009\u62e9\u7684\u4f8b\u5b50 \uff1a\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8003\u8651\u4e00\u4e0b\u5bf9 \\(S_{word}\\) \uff0c \\(S_{tag}\\) \u548c \\(S_{label}\\) \u7684\u9009\u62e9\uff1a \\(S_{word}\\) \uff1a\u5728\u5806\u548c\u7f13\u51b2\u533a\u7684\u524d\u4e09\u4e2a\u5355\u8bcd\uff1a \\(s_{1},s_{2},s_{3},b_{1},b_{2},b_{3}\\) \u3002\u6808\u9876\u90e8\u4e24\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2a\u7684 leftmost / rightmost \u7684\u5b50\u5355\u8bcd\uff1a \\(lc_{1}(s_{i}),rc_{1}(s_{i}),lc_{2}(s_{i}),rc_{2}(s_{i}),i=1,2\\) \u3002\u6808\u9876\u90e8\u4e24\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2a\u7684 leftmost of leftmost / rightmost of rightmost \u7684\u5b50\u5355\u8bcd\uff1a \\(lc_{1}(lc_{1}(s_{i})),rc_{1}(rc_{1}(s_{i})),i=1,2\\) \u3002 \\(S_{word}\\) \u603b\u5171\u542b\u6709 \\(n_{word}=18\\) \u4e2a\u5143\u7d20\u3002 \\(S_{tag}\\) \uff1a\u76f8\u5e94\u7684\u8bcd\u6027\u6807\u6ce8\uff0c\u5219 \\(S_{tag}\\) \u542b\u6709 \\(n_{tag}=18\\) \u4e2a\u5143\u7d20\u3002 \\(S_{label}\\) \uff1a\u5355\u8bcd\u7684\u5bf9\u5e94\u7684\u4f9d\u5b58\u6807\u7b7e\uff0c\u4e0d\u5305\u62ec\u5806/\u7f13\u51b2\u533a\u4e0a\u7684 6 \u4e2a\u5355\u8bcd\uff0c\u56e0\u6b64 \\(S_{label}\\) \u542b\u6709 \\(n_{label}=12\\) \u4e2a\u5143\u7d20\u3002 \u6ce8\u610f\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684 \\(NULL\\) \u8868\u793a\u4e0d\u5b58\u5728\u7684\u5143\u7d20\uff1a\u5f53\u5806\u548c\u7f13\u51b2\u533a\u4e3a\u7a7a\u6216\u8005\u8fd8\u6ca1\u6709\u6307\u5b9a\u4f9d\u5b58\u5173\u7cfb\u65f6\u3002\u5bf9\u4e00\u4e2a\u7ed9\u5b9a\u53e5\u5b50\u4f8b\u5b50\uff0c\u6211\u4eec\u6309\u7167\u4e0a\u8ff0\u7684\u65b9\u6cd5\u9009\u62e9\u5355\u8bcd\uff0c\u8bcd\u6027\u6807\u6ce8\u548c\u4f9d\u5b58\u6807\u7b7e\uff0c\u4ece\u5d4c\u5165\u77e9\u9635 \\(E^{w},E^{t},E^{l}\\) \u4e2d\u63d0\u53d6\u5b83\u4eec\u5bf9\u5e94\u7684\u7a20\u5bc6\u7684\u7279\u5f81\u7684\u8868\u793a\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u5411\u91cf\u8fde\u63a5\u8d77\u6765\u4f5c\u4e3a\u8f93\u5165 \\([x^{w},x^{t},x^{l}]\\) \u3002\u5728\u8bad\u7ec3\u65f6\u95f4\uff0c\u6211\u4eec\u53cd\u5411\u4f20\u64ad\u5230\u7a20\u5bc6\u7684\u5411\u91cf\u8868\u793a\uff0c\u4ee5\u53ca\u540e\u9762\u5404\u5c42\u7684\u53c2\u6570\u3002 \u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff1a\u8fd9\u4e2a\u795e\u7ecf\u7f51\u7edc\u5305\u542b\u4e00\u4e2a\u8f93\u5165\u5c42 \\([x^{w},x^{t},x^{l}]\\) \uff0c\u4e00\u4e2a\u9690\u85cf\u5c42\uff0c\u4ee5\u53ca\u5177\u6709\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\u7684\u6700\u7ec8 softmax \u5c42\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u9690\u85cf\u5c42\u4e2d\u5b9a\u4e49\u5355\u4e2a\u6743\u503c\u77e9\u9635\uff0c\u4e0e \\([x^{w},x^{t},x^{l}]\\) \u8fdb\u884c\u8fd0\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e09\u4e2a\u6743\u503c\u77e9\u9635 \\([W^{w}_{1},W^{t}_{1},W^{l}_{1}]\\) \uff0c\u6bcf\u4e2a\u77e9\u9635\u5bf9\u5e94\u7740\u76f8\u5e94\u7684\u8f93\u5165\u7c7b\u578b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7136\u540e\u6211\u4eec\u5e94\u7528\u4e00\u4e2a\u975e\u7ebf\u6027\u51fd\u6570\u5e76\u4f7f\u7528\u4e00\u4e2a\u989d\u5916\u7684\u4eff\u5c04\u5c42 \\([W_{2}]\\) \uff0c\u4f7f\u5f97\u5bf9\u4e8e\u53ef\u80fd\u7684\u8f6c\u79fb\u6b21\u6570\uff08\u8f93\u51fa\u7ef4\u5ea6\uff09\uff0c\u6709\u76f8\u540c\u6570\u91cf\u7684 softmax \u6982\u7387\u3002 \u6ce8\u610f\u5728\u4e0a\u56fe\u4e2d\uff0c\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f \\(f(x)=x^{3}\\) \u3002 \u6709\u5173 greedy transition-based \u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u7684\u66f4\u5b8c\u6574\u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003\u8bba\u6587\uff1a A Fast and Accurate Dependency Parser using Neural Networks \u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"05 Linguistic Structure Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#lecture-05-linguistic-structure-dependency-parsing","text":"Lecture Plan Syntactic Structure: Consistency and Dependency Dependency Grammar and Treebanks Transition-based dependency parsing Neural dependency parsing Dependency Parsing: \u4f9d\u5b58\u5173\u7cfb\u8bed\u6cd5\u5206\u6790\uff0c\u7b80\u79f0 \u4f9d\u5b58\u5206\u6790\u3002","title":"Lecture 05 Linguistic Structure: Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#1-two-views-of-linguistic-structure","text":"","title":"1. Two views of linguistic structure"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#constituency-parsing","text":"Constituency = phrase structure grammar = context-free grammars (CFGs) context-free grammars (CFGs) \u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5 \u53e5\u5b50\u662f\u4f7f\u7528\u9010\u6b65\u5d4c\u5957\u7684\u5355\u5143\u6784\u5efa\u7684 \u77ed\u8bed\u7ed3\u6784\u5c06\u5355\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u7684\u6210\u5206 \u8d77\u6b65\u5355\u5143\uff1a\u5355\u8bcd \u88ab\u8d4b\u4e88\u4e00\u4e2a\u7c7b\u522b (part of speech=pos \u8bcd\u6027) \u5355\u8bcd\u7ec4\u5408\u6210\u4e0d\u540c\u7c7b\u522b\u7684\u77ed\u8bed \u77ed\u8bed\u53ef\u4ee5 \u9012\u5f52 \u5730\u7ec4\u5408\u6210\u66f4\u5927\u7684\u77ed\u8bed \u4e0a\u56fe\u4e2d Det \u6307\u7684\u662f Determiner \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u9650\u5b9a\u8bcd NP \u6307\u7684\u662f Noun Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u540d\u8bcd\u77ed\u8bed VP \u6307\u7684\u662f Verb Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u52a8\u8bcd\u77ed\u8bed P \u6307\u7684\u662f Preposition \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u4ecb\u8bcd PP \u6307\u7684\u662f Prepositional Phrase \uff0c\u5728\u8bed\u8a00\u5b66\u4e2d\u7684\u542b\u4e49\u4e3a \u4ecb\u8bcd\u77ed\u8bed \\(\\text{NP} \\to \\text{Det N}\\) \\(\\text{NP} \\to \\text{Det (Adj) N}\\) \\(\\text{NP} \\to \\text{Det (Adj) N PP}\\) \\(\\text{PP} \\to \\text{P NP}\\) \\(\\text{VP} \\to \\text{V PP}\\) \u4e2d\u6587\u4e2d\uff0c\u4ecb\u8bcd\u77ed\u8bed\u4f1a\u51fa\u73b0\u5728\u52a8\u8bcd\u4e4b\u524d Example : The cat by the large crate on the large table by the door \u4f46\u662f\u53e6\u4e00\u79cd\u89c2\u70b9\u5728\u8ba1\u7b97\u8bed\u8a00\u5b66\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002","title":"Constituency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#dependency-parsing","text":"\u4e0d\u662f\u4f7f\u7528\u5404\u79cd\u7c7b\u578b\u7684\u77ed\u8bed\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u5355\u8bcd\u4e0e\u5176\u4ed6\u7684\u5355\u8bcd\u5173\u7cfb\u8868\u793a\u53e5\u5b50\u7684\u7ed3\u6784\uff0c\u663e\u793a\u54ea\u4e9b\u5355\u8bcd\u4f9d\u8d56\u4e8e(\u4fee\u9970\u6216\u662f\u5176\u53c2\u6570)\u54ea\u4e9b\u5176\u4ed6\u5355\u8bcd \\(\\text{look}\\) \u662f\u6574\u4e2a\u53e5\u5b50\u7684\u6839\u6e90\uff0c \\(\\text{look}\\) \u4f9d\u8d56\u4e8e \\(\\text{crate}\\) \uff08\u6216\u8005\u8bf4 \\(\\text{crate}\\) \u662f \\(\\text{look}\\) \u7684\u4f9d\u8d56\uff09 \\(\\text{in, the, large}\\) \u90fd\u662f \\(\\text{crate}\\) \u7684\u4f9d\u8d56 \\(\\text{in the kitchen}\\) \u662f \\(\\text{crate}\\) \u7684\u4fee\u9970 \\(\\text{in, the}\\) \u90fd\u662f \\(\\text{kitchen}\\) \u7684\u4f9d\u8d56 \\(\\text{by the door}\\) \u662f \\(\\text{crate}\\) \u7684\u4f9d\u8d56 Why do we need sentence structure? \u4e3a\u4e86\u80fd\u591f\u6b63\u786e\u5730\u89e3\u91ca\u8bed\u8a00\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u53e5\u5b50\u7ed3\u6784 \u4eba\u7c7b\u901a\u8fc7\u5c06\u5355\u8bcd\u7ec4\u5408\u6210\u66f4\u5927\u7684\u5355\u5143\u6765\u4f20\u8fbe\u590d\u6742\u7684\u610f\u601d\uff0c\u4ece\u800c\u4ea4\u6d41\u590d\u6742\u7684\u601d\u60f3 \u6211\u4eec\u9700\u8981\u77e5\u9053\u4ec0\u4e48\u4e0e\u4ec0\u4e48\u76f8\u5173\u8054 \u9664\u975e\u6211\u4eec\u77e5\u9053\u54ea\u4e9b\u8bcd\u662f\u5176\u4ed6\u8bcd\u7684\u53c2\u6570\u6216\u4fee\u9970\u8bcd\uff0c\u5426\u5219\u6211\u4eec\u65e0\u6cd5\u5f04\u6e05\u695a\u53e5\u5b50\u662f\u4ec0\u4e48\u610f\u601d","title":"Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#prepositional-phrase-attachment-ambiguity","text":"\u4ecb\u8bcd\u77ed\u8bed\u4f9d\u9644\u6b67\u4e49 \\(\\text{San Jose cops kill man with knife}\\) \u8b66\u5bdf\u7528\u5200\u6740\u4e86\u90a3\u4e2a\u7537\u5b50 cops \u662f kill \u7684 subject (subject \u6307 \u4e3b\u8bed) man \u662f kill \u7684 object (object \u6307 \u5bbe\u8bed) knife \u662f kill \u7684 modifier (modifier \u6307 \u4fee\u9970\u7b26) \u8b66\u5bdf\u6740\u4e86\u90a3\u4e2a\u6709\u5200\u7684\u7537\u5b50 knife \u662f man \u7684 modifier (\u540d\u8bcd\u4fee\u9970\u7b26\uff0c\u7b80\u79f0\u4e3a nmod ) from space \u8fd9\u4e00\u4ecb\u8bcd\u77ed\u8bed\u4fee\u9970\u7684\u662f\u524d\u9762\u7684\u52a8\u8bcd count \u8fd8\u662f\u540d\u8bcd whales \uff1f \u8fd9\u5c31\u662f\u4eba\u7c7b\u8bed\u8a00\u548c\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4e0d\u540c\u7684\u5730\u65b9 \u5173\u952e\u7684\u89e3\u6790\u51b3\u7b56\u662f\u6211\u4eec\u5982\u4f55 \u201c\u4f9d\u5b58\u201d \u5404\u79cd\u6210\u5206 \u4ecb\u8bcd\u77ed\u8bed\u3001\u72b6\u8bed\u6216\u5206\u8bcd\u77ed\u8bed\u3001\u4e0d\u5b9a\u5f0f\u3001\u534f\u8c03\u7b49\u3002 \u4e0a\u8ff0\u53e5\u5b50\u4e2d\u6709\u56db\u4e2a\u4ecb\u8bcd\u77ed\u8bed board \u662f approved \u7684 \u4e3b\u8bed\uff0c acquisition \u662f approved \u7684\u8c13\u8bed by Royal Trustco Ltd. \u662f\u4fee\u9970 acquisition \u7684\uff0c\u5373\u8463\u4e8b\u4f1a\u6279\u51c6\u4e86\u8fd9\u5bb6\u516c\u53f8\u7684\u6536\u8d2d of Toronto \u53ef\u4ee5\u4fee\u9970 approved, acquisition, Royal Trustco Ltd. \u4e4b\u4e00\uff0c\u7ecf\u8fc7\u5206\u6790\u53ef\u4ee5\u5f97\u77e5\u662f\u4fee\u9970 Royal Trustco Ltd. \u5373\u8868\u793a\u8fd9\u5bb6\u516c\u53f8\u7684\u4f4d\u7f6e for $27 a share \u4fee\u9970 acquisition at its monthly meeting \u4fee\u9970 approved \uff0c\u5373\u8868\u793a\u6279\u51c6\u7684\u65f6\u95f4\u5730\u70b9 \u9762\u5bf9\u8fd9\u6837\u590d\u6742\u7684\u53e5\u5b50\u7ed3\u6784\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651 \u6307\u6570\u7ea7 \u7684\u53ef\u80fd\u7ed3\u6784\uff0c\u8fd9\u4e2a\u5e8f\u5217\u88ab\u79f0\u4e3a Catalan numbers Catalan numbers : \\(C_{n}=(2 n) ! /[(n+1) ! n !]\\) \u4e00\u4e2a\u6307\u6570\u589e\u957f\u7684\u5e8f\u5217\uff0c\u51fa\u73b0\u5728\u8bb8\u591a\u7c7b\u4f3c\u6811\u7684\u73af\u5883\u4e2d \u4f8b\u5982\uff0c\u4e00\u4e2a n+2 \u8fb9\u7684\u591a\u8fb9\u5f62\u53ef\u80fd\u7684\u4e09\u89d2\u5256\u5206\u7684\u6570\u91cf \u51fa\u73b0\u5728\u6982\u7387\u56fe\u5f62\u6a21\u578b\u7684\u4e09\u89d2\u5256\u5206\u4e2d(CS228)","title":"Prepositional phrase attachment ambiguity"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#coordination-scope-ambiguity","text":"\u534f\u8c03\u8303\u56f4\u6a21\u7cca \u4f8b\u53e5\uff1aShuttle veteran and longtime NASA executive Fred Gregory appointed to board \u4e00\u4e2a\u4eba\uff1a[[Shuttle veteran and longtime NASA executive] Fred Gregory] appointed to board \u4e24\u4e2a\u4eba\uff1a[Shuttle veteran] and [longtime NASA executive Fred Gregory] appointed to board \u4f8b\u53e5\uff1aDoctor: No heart, cognitive issues","title":"Coordination scope ambiguity"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#adjectival-modifier-ambiguity","text":"\u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed\u6b67\u4e49 \u4f8b\u53e5\uff1aStudents get first hand job experience first hand \u8868\u793a \u7b2c\u4e00\u624b\u7684\uff0c\u76f4\u63a5\u7684\uff0c\u5373\u5b66\u751f\u83b7\u5f97\u4e86\u76f4\u63a5\u7684\u5de5\u4f5c\u7ecf\u9a8c first \u662f hand \u7684\u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed(amod) first \u4fee\u9970 experience, hand \u4fee\u9970 job","title":"Adjectival Modifier Ambiguity"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#verb-phrase-vp-attachment-ambiguity","text":"\u52a8\u8bcd\u77ed\u8bed(VP)\u4f9d\u5b58\u6b67\u4e49 \u4f8b\u53e5\uff1aMutilated body washes up on Rio beach to be used for Olympic beach volleyball. to be used for Olympic beach volleyball \u662f \u52a8\u8bcd\u77ed\u8bed (VP) \u4fee\u9970\u7684\u662f body \u8fd8\u662f beach Dependency paths identify semantic relations \u2013e.g., for protein interaction \u4f9d\u8d56\u8def\u5f84\u8bc6\u522b\u8bed\u4e49\u5173\u7cfb","title":"Verb Phrase (VP) attachment ambiguity"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#2-dependency-grammar-and-dependency-structure","text":"\u5173\u8054\u8bed\u6cd5\u5047\u8bbe\u53e5\u6cd5\u7ed3\u6784\u5305\u62ec\u8bcd\u6c47\u9879\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u901a\u5e38\u662f\u4e8c\u5143\u4e0d\u5bf9\u79f0\u5173\u7cfb(\u201c\u7bad\u5934\u201d)\uff0c\u79f0\u4e3a\u4f9d\u8d56\u5173\u7cfb Dependency Structure\u6709\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f \u4e00\u79cd\u662f\u76f4\u63a5\u5728\u53e5\u5b50\u4e0a\u6807\u51fa\u4f9d\u5b58\u5173\u7cfb\u7bad\u5934\u53ca\u8bed\u6cd5\u5173\u7cfb \u53e6\u4e00\u79cd\u662f\u5c06\u5176\u505a\u6210\u6811\u72b6\u673a\u6784\uff08Dependency Tree Graph\uff09 \u7bad\u5934\u901a\u5e38\u6807\u8bb0( type )\u4e3a\u8bed\u6cd5\u5173\u7cfb\u7684\u540d\u79f0(\u4e3b\u9898\u3001\u4ecb\u8bcd\u5bf9\u8c61\u3001apposition\u7b49)\u3002 \u4f9d\u8d56\u5173\u7cfb\u6807\u7b7e\u7684\u7cfb\u7edf\uff0c\u4f8b\u5982 universal dependency \u901a\u7528\u4f9d\u8d56 \u7bad\u5934\u8fde\u63a5\u5934\u90e8( head )(\u8c03\u901f\u5668,\u4e0a\u7ea7,regent)\u548c\u4e00\u4e2a\u4f9d\u8d56(\u4fee\u9970\u8bcd,\u4e0b\u7ea7,\u4e0b\u5c5e) A \\(\\to\\) \u4f9d\u8d56\u4e8e A \u7684\u4e8b\u60c5 \u901a\u5e38,\u4f9d\u8d56\u5173\u7cfb\u5f62\u6210\u4e00\u68f5\u6811(\u5355\u5934 \u65e0\u73af \u8fde\u63a5\u56fe) Dependency Grammar/Parsing History \u4f9d\u8d56\u7ed3\u6784\u7684\u6982\u5ff5\u53ef\u4ee5\u8ffd\u6eaf\u5230\u5f88\u4e45\u4ee5\u524d P\u0101\u1e47ini\u7684\u8bed\u6cd5(\u516c\u5143\u524d5\u4e16\u7eaa) \u4e00\u5343\u5e74 \u963f\u62c9\u4f2f\u8bed\u7684\u8bed\u6cd5\u7684\u57fa\u672c\u65b9\u6cd5 \u9009\u533a/\u4e0a\u4e0b\u6587\u65e0\u5173\u6587\u6cd5\u662f\u4e00\u4e2a\u65b0\u5947\u7684\u53d1\u660e 20\u4e16\u7eaa\u53d1\u660e(R.S.Wells,1947; then Chomsky) \u73b0\u4ee3\u4f9d\u8d56\u5de5\u4f5c\u7ecf\u5e38\u6e90\u4e8e L. Tesni\u00e8re(1959) \u662f20\u4e16\u7eaa\u201c\u4e1c\u65b9\u201d\u7684\u4e3b\u5bfc\u65b9\u6cd5(\u4fc4\u7f57\u65af\uff0c\u4e2d\u56fd\uff0c\u2026) \u6709\u5229\u4e8e\u66f4\u81ea\u7531\u7684\u8bed\u5e8f\u8bed\u8a00 NLP\u4e2d\u6700\u65e9\u7c7b\u578b\u7684\u89e3\u6790\u5668\u5728\u7f8e\u56fd David Hays \u662f\u7f8e\u56fd\u8ba1\u7b97\u8bed\u8a00\u5b66\u7684\u521b\u59cb\u4eba\u4e4b\u4e00\uff0c\u4ed6\u5f88\u65e9\u5c31(\u7b2c\u4e00\u4e2a?)\u6784\u5efa\u4e86\u4f9d\u8d56\u89e3\u6790\u5668(Hays 1962)\u3002 Dependency Grammar and Dependency Structure \u4eba\u4eec\u5bf9\u7bad\u5934\u6307\u5411\u7684\u65b9\u5f0f\u4e0d\u4e00\u81f4\uff1a\u6709\u4e9b\u4eba\u628a\u7bad\u5934\u671d\u4e00\u4e2a\u65b9\u5411\u753b\uff1b\u6709\u4eba\u662f\u53cd\u8fc7\u6765\u7684 Tesni\u00e8re \u4ece\u5934\u5f00\u59cb\u6307\u5411\u4f9d\u8d56\uff0c\u672c\u8bfe\u4f7f\u7528\u6b64\u79cd\u65b9\u5f0f \u901a\u5e38\u6dfb\u52a0\u4e00\u4e2a\u4f2a\u6839\u6307\u5411\u6574\u4e2a\u53e5\u5b50\u7684\u5934\u90e8\uff0c\u8fd9\u6837\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7cbe\u786e\u5730\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u8282\u70b9 The rise of annotated data: Universal Dependencies treebanks [Universal Dependencies: http://universaldependencies.org/ ; cf. Marcus et al. 1993, The Penn Treebank, Computational Linguistics] Universal Dependencies \uff1a\u6211\u4eec\u60f3\u8981\u62e5\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u3001\u5e76\u884c\u7684\u4f9d\u8d56\u63cf\u8ff0\uff0c\u53ef\u7528\u4e8e\u4efb\u4f55\u4eba\u7c7b\u8bed\u8a00 \u4ece\u524d\u624b\u5de5\u7f16\u5199\u8bed\u6cd5\u7136\u540e\u8bad\u7ec3\u5f97\u5230\u53ef\u4ee5\u89e3\u6790\u53e5\u5b50\u7684\u89e3\u6790\u5668 \u7528\u4e00\u6761\u89c4\u5219\u6355\u6349\u5f88\u591a\u4e1c\u897f\u771f\u7684\u5f88\u6709\u6548\u7387\uff0c\u4f46\u662f\u4e8b\u5b9e\u8bc1\u660e\u8fd9\u5728\u5b9e\u8df5\u4e2d\u4e0d\u662f\u4e00\u4e2a\u597d\u4e3b\u610f \u8bed\u6cd5\u89c4\u5219\u7b26\u53f7\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u5e76\u4e14\u6ca1\u6709\u5171\u4eab\u548c\u91cd\u7528\u4eba\u7c7b\u6240\u505a\u7684\u5de5\u4f5c \u53e5\u5b50\u7ed3\u6784\u4e0a\u7684treebanks \u652f\u6301\u7ed3\u6784\u66f4\u6709\u6548 The rise of annotated data \u4ece\u4e00\u5f00\u59cb\uff0c\u6784\u5efa treebank \u4f3c\u4e4e\u6bd4\u6784\u5efa\u8bed\u6cd5\u6162\u5f97\u591a\uff0c\u4e5f\u6ca1\u6709\u90a3\u4e48\u6709\u7528 \u4f46\u662f treebank \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e1c\u897f \u52b3\u52a8\u529b\u7684\u53ef\u91cd\u7528\u6027 \u8bb8\u591a\u89e3\u6790\u5668\u3001\u8bcd\u6027\u6807\u8bb0\u5668\u7b49\u53ef\u4ee5\u6784\u5efa\u5728\u5b83\u4e4b\u4e0a \u8bed\u8a00\u5b66\u7684\u5b9d\u8d35\u8d44\u6e90 \u5e7f\u6cdb\u7684\u8986\u76d6\u9762\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e9b\u76f4\u89c9 \u9891\u7387\u548c\u5206\u5e03\u4fe1\u606f \u4e00\u79cd\u8bc4\u4f30\u7cfb\u7edf\u7684\u65b9\u6cd5 Dependency Conditioning Preferences \u4f9d\u8d56\u9879\u89e3\u6790\u7684\u4fe1\u606f\u6765\u6e90\u662f\u4ec0\u4e48\uff1f Bilexical affinities (\u4e24\u4e2a\u5355\u8bcd\u95f4\u7684\u5bc6\u5207\u5173\u7cfb) [discussion \\(\\to\\) issues] \u662f\u770b\u4e0a\u53bb\u6709\u9053\u7406\u7684 Dependency distance \u4f9d\u8d56\u8ddd\u79bb \u4e3b\u8981\u662f\u4e0e\u76f8\u90bb\u8bcd Intervening material \u4ecb\u4e8e\u4e2d\u95f4\u7684\u7269\u8d28 \u4f9d\u8d56\u5f88\u5c11\u8de8\u8d8a\u4ecb\u4e8e\u4e2d\u95f4\u7684\u52a8\u8bcd\u6216\u6807\u70b9\u7b26\u53f7 Valency of heads How many dependents on which side are usual for a head?","title":"2. Dependency Grammar and Dependency Structure"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#dependency-parsing_1","text":"\u901a\u8fc7\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u9009\u62e9\u5b83\u6240\u4f9d\u8d56\u7684\u5176\u4ed6\u5355\u8bcd(\u5305\u62ec\u6839)\u6765\u89e3\u6790\u4e00\u4e2a\u53e5\u5b50 \u901a\u5e38\u6709\u4e00\u4e9b\u9650\u5236 \u53ea\u6709\u4e00\u4e2a\u5355\u8bcd\u662f\u4f9d\u8d56\u4e8e\u6839\u7684 \u4e0d\u5b58\u5728\u5faa\u73af \\(A \\to B, B \\to A\\) \u8fd9\u4f7f\u5f97\u4f9d\u8d56\u9879\u6210\u4e3a\u6811 \u6700\u540e\u4e00\u4e2a\u95ee\u9898\u662f\u7bad\u5934\u662f\u5426\u53ef\u4ee5\u4ea4\u53c9(\u975e\u6295\u5f71\u7684 non-projective) \u6ca1\u6709\u4ea4\u53c9\u7684\u5c31\u662fnon-projectice Projectivity \u5b9a\u4e49\uff1a\u5f53\u5355\u8bcd\u6309\u7ebf\u6027\u987a\u5e8f\u6392\u5217\u65f6\uff0c\u6ca1\u6709\u4ea4\u53c9\u7684\u4f9d\u8d56\u5f27\uff0c\u6240\u6709\u7684\u5f27\u90fd\u5728\u5355\u8bcd\u7684\u4e0a\u65b9 \u4e0eCFG\u6811\u5e76\u884c\u7684\u4f9d\u8d56\u5173\u7cfb\u5fc5\u987b\u662f\u6295\u5f71\u7684 \u901a\u8fc7\u5c06\u6bcf\u4e2a\u7c7b\u522b\u7684\u4e00\u4e2a\u5b50\u7c7b\u522b\u4f5c\u4e3a\u5934\u6765\u5f62\u6210\u4f9d\u8d56\u5173\u7cfb \u4f46\u662f\u4f9d\u8d56\u7406\u8bba\u901a\u5e38\u5141\u8bb8\u975e\u6295\u5c04\u7ed3\u6784\u6765\u89e3\u91ca\u79fb\u4f4d\u7684\u6210\u5206 \u5982\u679c\u6ca1\u6709\u8fd9\u4e9b\u975e\u6295\u5c04\u4f9d\u8d56\u5173\u7cfb\uff0c\u5c31\u4e0d\u53ef\u80fd\u5f88\u5bb9\u6613\u83b7\u5f97\u67d0\u4e9b\u7ed3\u6784\u7684\u8bed\u4e49","title":"Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#methods-of-dependency-parsing","text":"Dynamic programming Eisner(1996)\u63d0\u51fa\u4e86\u4e00\u79cd\u590d\u6742\u5ea6\u4e3a \\(O(n^3)\\) \u7684\u806a\u660e\u7b97\u6cd5\uff0c\u5b83\u751f\u6210\u5934\u90e8\u4f4d\u4e8e\u672b\u5c3e\u800c\u4e0d\u662f\u4e2d\u95f4\u7684\u89e3\u6790\u9879 Graph algorithms \u4e3a\u4e00\u4e2a\u53e5\u5b50\u521b\u5efa\u4e00\u4e2a\u6700\u5c0f\u751f\u6210\u6811 McDonald et al.\u2019s (2005) MSTParser \u4f7f\u7528ML\u5206\u7c7b\u5668\u72ec\u7acb\u5730\u5bf9\u4f9d\u8d56\u9879\u8fdb\u884c\u8bc4\u5206(\u4ed6\u4f7f\u7528MIRA\u8fdb\u884c\u5728\u7ebf\u5b66\u4e60\uff0c\u4f46\u5b83\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u4e1c\u897f) Constraint Satisfaction \u53bb\u6389\u4e0d\u6ee1\u8db3\u786c\u7ea6\u675f\u7684\u8fb9 Karlsson(1990), etc. \u201cTransition-based parsing\u201d or \u201cdeterministic dependency parsing\u201c \u826f\u597d\u7684\u673a\u5668\u5b66\u4e60\u5206\u7c7b\u5668 MaltParser(Nivreet al. 2008) \u6307\u5bfc\u4e0b\u7684\u4f9d\u5b58\u8d2a\u5a6a\u9009\u62e9\u3002\u5df2\u8bc1\u660e\u975e\u5e38\u6709\u6548\u3002","title":"Methods of Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#3-greedy-transition-based-parsing-nivre-2003","text":"\u8d2a\u5a6a\u5224\u522b\u4f9d\u8d56\u89e3\u6790\u5668 greedy discriminative dependency parser \u7684\u4e00\u79cd\u7b80\u5355\u5f62\u5f0f \u89e3\u6790\u5668\u6267\u884c\u4e00\u7cfb\u5217\u81ea\u5e95\u5411\u4e0a\u7684\u64cd\u4f5c \u5927\u81f4\u7c7b\u4f3c\u4e8e shift-reduce\u89e3\u6790\u5668 \u4e2d\u7684\u201cshift\u201d\u6216\u201creduce\u201d\uff0c\u4f46\u201creduce\u201d\u64cd\u4f5c\u4e13\u95e8\u7528\u4e8e\u521b\u5efa\u5934\u5728\u5de6\u6216\u53f3\u7684\u4f9d\u8d56\u9879 \u89e3\u6790\u5668\u5982\u4e0b\uff1a \u6808 \\(\\sigma\\) \u4ee5 ROOT \u7b26\u53f7\u5f00\u59cb\uff0c\u7531\u82e5\u5e72 \\(w_i\\) \u7ec4\u6210 \u7f13\u5b58 \\(\\beta\\) \u4ee5\u8f93\u5165\u5e8f\u5217\u5f00\u59cb\uff0c\u7531\u82e5\u5e72 \\(w_i\\) \u7ec4\u6210 \u4e00\u4e2a\u4f9d\u5b58\u5f27\u7684\u96c6\u5408 \\(A\\) \uff0c\u4e00\u5f00\u59cb\u4e3a\u7a7a\u3002\u6bcf\u6761\u8fb9\u7684\u5f62\u5f0f\u662f \\((w_i,r,w_j)\\) \uff0c\u5176\u4e2d \\(r\\) \u63cf\u8ff0\u4e86\u8282\u70b9\u7684\u4f9d\u5b58\u5173\u7cfb \u4e00\u7ec4\u64cd\u4f5c \u6700\u7ec8\u76ee\u6807\u662f \\(\\sigma = [\\text{ROOT}], \\beta = \\phi\\) \uff0c \\(A\\) \u5305\u542b\u4e86\u6240\u6709\u7684\u4f9d\u5b58\u5f27 Basic transition-based dependency parser state\u4e4b\u95f4\u7684transition\u6709\u4e09\u7c7b\uff1a SHIFT\uff1a\u5c06buffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\u79fb\u51fa\u5e76\u653e\u5230stack\u4e0a\u3002 LEFT-ARC\uff1a\u5c06 \\((w_j,r,w_i)\\) \u52a0\u5165\u8fb9\u7684\u96c6\u5408 A \uff0c\u5176\u4e2d \\(w_i\\) \u662fstack\u4e0a\u7684\u6b21\u9876\u5c42\u7684\u8bcd\uff0c \\(w_j\\) \u662fstack\u4e0a\u7684\u6700\u9876\u5c42\u7684\u8bcd\u3002 RIGHT-ARC:\u5c06 \\((w_i,r,w_j)\\) \u52a0\u5165\u8fb9\u7684\u96c6\u5408 A \uff0c\u5176\u4e2d \\(w_i\\) \u662fstack\u4e0a\u7684\u6b21\u9876\u5c42\u7684\u8bcd\uff0c \\(w_j\\) \u662fstack\u4e0a\u7684\u6700\u9876\u5c42\u7684\u8bcd\u3002 \u6211\u4eec\u4e0d\u65ad\u7684\u8fdb\u884c\u4e0a\u8ff0\u4e09\u7c7b\u64cd\u4f5c\uff0c\u76f4\u5230\u4ece\u521d\u59cb\u6001\u8fbe\u5230\u6700\u7ec8\u6001\u3002 \u5728\u6bcf\u4e2a\u72b6\u6001\u4e0b\u5982\u4f55\u9009\u62e9\u54ea\u79cd\u64cd\u4f5c\u5462\uff1f\u5f53\u6211\u4eec\u8003\u8651\u5230LEFT-ARC\u4e0eRIGHT-ARC\u5404\u6709 \\(|R|\\) \uff08 \\(|R|\\) \u4e3a \\(r\\) \u7684\u7c7b\u7684\u4e2a\u6570\uff09\u79cd\u7c7b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u770b\u505a\u662fclass\u6570\u4e3a \\(2|R|+1\\) \u7684\u5206\u7c7b\u95ee\u9898\uff0c\u53ef\u4ee5\u7528SVM\u7b49\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u65b9\u6cd5\u89e3\u51b3\u3002 Arc-standard transition-based parser \u8fd8\u6709\u5176\u4ed6\u7684 transition \u65b9\u6848 Analysis of \u201c I ate fish \u201d MaltParser [Nivreand Hall 2005] \u6211\u4eec\u9700\u8981\u89e3\u91ca\u5982\u4f55\u9009\u62e9\u4e0b\u4e00\u6b65\u884c\u52a8 Answer\uff1a\u673a\u5668\u5b66\u4e60 \u6bcf\u4e2a\u52a8\u4f5c\u90fd\u7531\u4e00\u4e2a\u6709\u533a\u522b\u5206\u7c7b\u5668(\u4f8b\u5982softmax classifier)\u5bf9\u6bcf\u4e2a\u5408\u6cd5\u7684\u79fb\u52a8\u8fdb\u884c\u9884\u6d4b \u6700\u591a\u4e09\u79cd\u65e0\u7c7b\u578b\u7684\u9009\u62e9\uff0c\u5f53\u5e26\u6709\u7c7b\u578b\u65f6\uff0c\u6700\u591a \\(|R| \\times 2 + 1\\) \u79cd Features\uff1a\u6808\u9876\u5355\u8bcd\uff0cPOS\uff1bbuffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0cPOS\uff1b\u7b49\u7b49 \u5728\u6700\u7b80\u5355\u7684\u5f62\u5f0f\u4e2d\u662f\u6ca1\u6709\u641c\u7d22\u7684 \u4f46\u662f\uff0c\u5982\u679c\u4f60\u613f\u610f\uff0c\u4f60\u53ef\u4ee5\u6709\u6548\u5730\u6267\u884c\u4e00\u4e2a Beam search \u675f\u641c\u7d22(\u867d\u7136\u901f\u5ea6\u8f83\u6162\uff0c\u4f46\u6548\u679c\u66f4\u597d)\uff1a\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u9aa4\u4e2d\u4fdd\u7559 k\u4e2a\u597d\u7684\u89e3\u6790\u524d\u7f00 \u8be5\u6a21\u578b\u7684\u7cbe\u5ea6\u7565\u4f4e\u4e8e\u4f9d\u8d56\u89e3\u6790\u7684\u6700\u9ad8\u6c34\u5e73\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u975e\u5e38\u5feb\u7684\u7ebf\u6027\u65f6\u95f4\u89e3\u6790\uff0c\u6027\u80fd\u975e\u5e38\u597d Conventional Feature Representation \u4f20\u7edf\u7684\u7279\u5f81\u8868\u793a\u4f7f\u7528\u4e8c\u5143\u7684\u7a00\u758f\u5411\u91cf \\(10^6 \\sim 10^7\\) \u7279\u5f81\u6a21\u677f\uff1a\u901a\u5e38\u7531\u914d\u7f6e\u4e2d\u76841 ~ 3\u4e2a\u5143\u7d20\u7ec4\u6210 Indicator features","title":"3. Greedy transition-based parsing [Nivre 2003]"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#evaluation-of-dependency-parsing-labeled-dependency-accuracy","text":"\u5176\u4e2d\uff0c UAS (unlabeled attachment score) \u6307 \u65e0\u6807\u8bb0\u4f9d\u5b58\u6b63\u786e\u7387 \uff0c LAS (labeled attachment score) \u6307 \u6709\u6807\u8bb0\u4f9d\u5b58\u6b63\u786e\u7387 Handling non-projectivity \u6211\u4eec\u63d0\u51fa\u7684\u5f27\u6807\u51c6\u7b97\u6cd5\u53ea\u6784\u5efa\u6295\u5f71\u4f9d\u8d56\u6811 \u5934\u90e8\u53ef\u80fd\u7684\u65b9\u5411 \u5728\u975e\u6295\u5f71\u5f27\u4e0a\u5ba3\u5e03\u5931\u8d25 \u53ea\u5177\u6709\u6295\u5f71\u8868\u793a\u65f6\u4f7f\u7528\u4f9d\u8d56\u5f62\u5f0f CFG\u53ea\u5141\u8bb8\u6295\u5f71\u7ed3\u6784 \u4f7f\u7528\u6295\u5f71\u4f9d\u8d56\u9879\u89e3\u6790\u7b97\u6cd5\u7684\u540e\u5904\u7406\u5668\u6765\u8bc6\u522b\u548c\u89e3\u6790\u975e\u6295\u5f71\u94fe\u63a5 \u6dfb\u52a0\u989d\u5916\u7684\u8f6c\u6362\uff0c\u81f3\u5c11\u53ef\u4ee5\u5bf9\u5927\u591a\u6570\u975e\u6295\u5f71\u7ed3\u6784\u5efa\u6a21\uff08\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u4ea4\u6362\u8f6c\u6362\uff0c\u5192\u6ce1\u6392\u5e8f\uff09 \u8f6c\u79fb\u5230\u4e0d\u4f7f\u7528\u6216\u4e0d\u9700\u8981\u5bf9\u6295\u5c04\u6027\u8fdb\u884c\u4efb\u4f55\u7ea6\u675f\u7684\u89e3\u6790\u673a\u5236(\u4f8b\u5982\uff0c\u57fa\u4e8e\u56fe\u7684MSTParser)","title":"Evaluation of Dependency Parsing: (labeled) dependency accuracy"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#4-why-train-a-neural-dependency-parser-indicator-features-revisited","text":"Indicator Features\u7684\u95ee\u9898 \u7a00\u758f \u4e0d\u5b8c\u6574 \u8ba1\u7b97\u590d\u6742 \u8d85\u8fc795%\u7684\u89e3\u6790\u65f6\u95f4\u90fd\u7528\u4e8e\u7279\u5f81\u8ba1\u7b97 A neural dependency parser [Chen and Manning 2014] \u65af\u5766\u798f\u4f9d\u8d56\u5173\u7cfb\u7684\u82f1\u8bed\u89e3\u6790 Unlabeled attachment score (UAS) = head Labeled attachment score (LAS) = head and label \u6548\u679c\u597d\uff0c\u901f\u5ea6\u5feb Distributed Representations \u6211\u4eec\u5c06\u6bcf\u4e2a\u5355\u8bcd\u8868\u793a\u4e3a\u4e00\u4e2ad\u7ef4\u7a20\u5bc6\u5411\u91cf\uff08\u5982\u8bcd\u5411\u91cf\uff09 \u76f8\u4f3c\u7684\u5355\u8bcd\u5e94\u8be5\u6709\u76f8\u8fd1\u7684\u5411\u91cf \u540c\u65f6\uff0c part-of-speech tags \u8bcd\u6027\u6807\u7b7e(POS)\u548c dependency labels \u4f9d\u8d56\u6807\u7b7e\u4e5f\u8868\u793a\u4e3ad\u7ef4\u5411\u91cf \u8f83\u5c0f\u7684\u79bb\u6563\u96c6\u4e5f\u8868\u73b0\u51fa\u8bb8\u591a\u8bed\u4e49\u4e0a\u7684\u76f8\u4f3c\u6027\u3002 NNS (\u590d\u6570\u540d\u8bcd)\u5e94\u8be5\u63a5\u8fd1**NN**(\u5355\u6570\u540d\u8bcd) num (\u6570\u503c\u4fee\u9970\u8bed)\u5e94\u8be5\u63a5\u8fd1**amod**(\u5f62\u5bb9\u8bcd\u4fee\u9970\u8bed)\u3002 \u5bf9\u4e8eNeural Dependency Parser\uff0c\u5176\u8f93\u5165\u7279\u5f81\u901a\u5e38\u5305\u542b\u4e09\u79cd stack\u548cbuffer\u4e2d\u7684\u5355\u8bcd\u53ca\u5176dependent word \u5355\u8bcd\u7684part-of-speech tag \u63cf\u8ff0\u8bed\u6cd5\u5173\u7cfb\u7684arc label \u6211\u4eec\u6839\u636e\u5806\u6808/\u7f13\u51b2\u533a\u4f4d\u7f6e\u63d0\u53d6\u4e00\u7ec4\u4ee4\u724c: \u6211\u4eec\u5c06\u5176\u8f6c\u6362\u4e3a\u8bcd\u5411\u91cf\u5e76\u5c06\u5b83\u4eec\u8054\u7ed3\u8d77\u6765\u4f5c\u4e3a\u8f93\u5165\u5c42\uff0c\u518d\u7ecf\u8fc7\u82e5\u5e72\u975e\u7ebf\u6027\u7684\u9690\u85cf\u5c42\uff0c\u6700\u540e\u52a0\u5165softmax layer\u5f97\u5230shift-reduce\u89e3\u6790\u5668\u7684\u52a8\u4f5c Model Architecture Dependency parsing for sentence structure \u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u51c6\u786e\u5730\u786e\u5b9a\u53e5\u5b50\u7684\u7ed3\u6784\uff0c\u652f\u6301\u89e3\u91ca Chen and Manning(2014)\u662f\u7b2c\u4e00\u4e2a\u7b80\u5355\uff0c\u6210\u529f\u7684\u795e\u7ecf\u4f9d\u8d56\u89e3\u6790\u5668 \u5bc6\u96c6\u7684\u8868\u793a\u4f7f\u5f97\u5b83\u5728**\u7cbe\u5ea6\u548c\u901f\u5ea6**\u4e0a\u90fd\u4f18\u4e8e\u5176\u4ed6\u8d2a\u5a6a\u7684\u89e3\u6790\u5668 Further developments in transition-based neural dependency parsing \u8fd9\u9879\u5de5\u4f5c\u7531\u5176\u4ed6\u4eba\u8fdb\u4e00\u6b65\u5f00\u53d1\u548c\u6539\u8fdb\uff0c\u7279\u522b\u662f\u5728\u8c37\u6b4c \u66f4\u5927\u3001\u66f4\u6df1\u7684\u7f51\u7edc\u4e2d\uff0c\u5177\u6709\u66f4\u597d\u8c03\u4f18\u7684\u8d85\u53c2\u6570 Beam Search \u66f4\u591a\u7684\u63a2\u7d22\u52a8\u4f5c\u5e8f\u5217\u7684\u53ef\u80fd\u6027\uff0c\u800c\u4e0d\u662f\u53ea\u8003\u8651\u5f53\u524d\u7684\u6700\u4f18 \u5168\u5c40\u3001\u6761\u4ef6\u968f\u673a\u573a(CRF)\u7684\u63a8\u7406\u51fa\u51b3\u7b56\u5e8f\u5217 \u8fd9\u5c31\u5f15\u51fa\u4e86SyntaxNet\u548cParsey McParseFace\u6a21\u578b Graph-based dependency parsers \u4e3a\u6bcf\u6761\u8fb9\u7684\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7684\u4f9d\u8d56\u5173\u7cfb\u8ba1\u7b97\u4e00\u4e2a\u5206\u6570 \u7136\u540e\u5c06\u6bcf\u4e2a\u5355\u8bcd\u7684\u8fb9\u7f18\u6dfb\u52a0\u5230\u5176\u5f97\u5206\u6700\u9ad8\u7684\u5019\u9009\u5934\u90e8 \u5e76\u5bf9\u6bcf\u4e2a\u5355\u8bcd\u91cd\u590d\u76f8\u540c\u7684\u64cd\u4f5c A Neural graph-based dependency parser [Dozat and Manning 2017; Dozat, Qi, and Manning 2017] \u5728\u795e\u7ecf\u6a21\u578b\u4e2d\u4e3a\u57fa\u4e8e\u56fe\u7684\u4f9d\u8d56\u5206\u6790\u6ce8\u5165\u6d3b\u529b \u4e3a\u795e\u7ecf\u4f9d\u8d56\u5206\u6790\u8bbe\u8ba1\u4e00\u4e2a\u53cc\u4eff\u5c04\u8bc4\u5206\u6a21\u578b \u4e5f\u4f7f\u7528\u795e\u7ecf\u5e8f\u5217\u6a21\u578b\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u5468\u8ba8\u8bba \u975e\u5e38\u68d2\u7684\u7ed3\u679c \u4f46\u662f\u6bd4\u7b80\u5355\u7684\u57fa\u4e8e\u795e\u7ecf\u4f20\u9012\u7684\u89e3\u6790\u5668\u8981\u6162 \u5728\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u53e5\u5b50\u4e2d\u53ef\u80fd\u6709 \\(n^2\\) \u4e2a\u4f9d\u8d56\u9879","title":"4. Why train a neural dependency parser? Indicator Features Revisited"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#notes-04-dependency-parsing","text":"Keyphrases : Dependency Parsing","title":"Notes 04  Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#1-dependency-grammar-and-dependency-structure","text":"\u4e0e\u7f16\u8bd1\u5668\u4e2d\u7684\u89e3\u6790\u6811\u7c7b\u4f3c\uff0c NLP \u4e2d\u7684\u89e3\u6790\u6811\u662f\u7528\u4e8e\u5206\u6790\u53e5\u5b50\u7684\u53e5\u6cd5\u7ed3\u6784\u3002\u4f7f\u7528\u7684\u7ed3\u6784\u4e3b\u8981\u6709\u4e24\u79cd\u7c7b\u578b\u2014\u2014\u77ed\u8bed\u7ed3\u6784\u548c\u4f9d\u5b58\u7ed3\u6784\u3002 \u77ed\u8bed\u7ed3\u6784\u6587\u6cd5\u4f7f\u7528\u77ed\u8bed\u7ed3\u6784\u8bed\u6cd5\u5c06\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u6210\u5206\u3002\u4ee5\u4e0b\u7ae0\u8282\u5c06\u5bf9\u6b64\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e\u3002\u6211\u4eec\u73b0\u5728\u5173\u6ce8\u4f9d\u5b58\u8bed\u6cd5\u3002 \u53e5\u5b50\u7684\u4f9d\u5b58\u7ed3\u6784\u5c55\u793a\u4e86\u5355\u8bcd\u4f9d\u8d56\u4e8e\u53e6\u5916\u4e00\u4e2a\u5355\u8bcd\uff08\u4fee\u9970\u6216\u8005\u662f\u53c2\u6570\uff09\u3002\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4e8c\u5143\u975e\u5bf9\u79f0\u5173\u7cfb\u79f0\u4e3a\u4f9d\u5b58\u5173\u7cfb\uff0c\u63cf\u8ff0\u4e3a\u4ece head \uff08\u88ab\u4fee\u9970\u7684\u4e3b\u9898\uff09\u7528\u7bad\u5934\u6307\u5411 dependent \uff08\u4fee\u9970\u8bed\uff09\u3002\u4e00\u822c\u8fd9\u4e9b\u4f9d\u5b58\u5173\u7cfb\u5f62\u6210\u6811\u7ed3\u6784\u3002\u4ed6\u4eec\u901a\u5e38\u7528\u8bed\u6cd5\u5173\u7cfb\u7684\u540d\u79f0\uff08\u4e3b\u4f53\uff0c\u4ecb\u8bcd\u5bbe\u8bed\uff0c\u540c\u4f4d\u8bed\u7b49\uff09\u3002\u4e00\u4e2a\u4f9d\u5b58\u6811\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6709\u65f6\uff0c\u5728\u6811\u7684\u5934\u90e8\u589e\u52a0\u4e00\u4e2a\u5047\u7684 ROOT \u8282\u70b9\uff0c\u8fd9\u6837\u6bcf\u4e2a\u5355\u8bcd\u90fd\u4f9d\u5b58\u4e8e\u552f\u4e00\u4e00\u4e2a\u8282\u70b9\u3002","title":"1 Dependency Grammar and Dependency Structure"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#11-dependency-parsing","text":"\u4f9d\u5b58\u8bed\u6cd5\u662f\u7ed9\u5b9a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50 \\(S\\) \uff0c\u5206\u6790\u53e5\u5b50\u7684\u53e5\u6cd5\u4f9d\u5b58\u7ed3\u6784\u7684\u4efb\u52a1\u3002\u4f9d\u5b58\u53e5\u6cd5\u7684\u8f93\u51fa\u662f\u4e00\u68f5\u4f9d\u5b58\u8bed\u6cd5\u6811\uff0c\u5176\u4e2d\u8f93\u5165\u53e5\u5b50\u7684\u5355\u8bcd\u662f\u901a\u8fc7\u4f9d\u5b58\u5173\u7cfb\u7684\u65b9\u5f0f\u8fde\u63a5\u3002\u6b63\u5f0f\u5730\uff0c\u4f9d\u5b58\u8bed\u6cd5\u95ee\u9898\u662f\u521b\u5efa\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u5355\u8bcd \\(S=w_{0}w_{1}...w_{n}\\) \uff08\u5176\u4e2d \\(w_{0}\\) \u662f ROOT \uff09\u5230\u5b83\u7684\u4f9d\u5b58\u8bed\u6cd5\u6811\u7684\u6620\u5c04\u56fe \\(G\\) \u3002\u6700\u8fd1\u51e0\u5e74\u63d0\u51fa\u4e86\u5f88\u591a\u4ee5\u4f9d\u5b58\u53e5\u6cd5\u4e3a\u57fa\u7840\u7684\u7684\u53d8\u4f53\uff0c\u5305\u62ec\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\u3002 \u786e\u5207\u5730\u8bf4\uff0c\u5728\u4f9d\u5b58\u8bed\u6cd5\u4e2d\u6709\u4e24\u4e2a\u5b50\u95ee\u9898\uff1a \u5b66\u4e60\uff1a\u7ed9\u5b9a\u7528\u4f9d\u8d56\u8bed\u6cd5\u56fe\u6807\u6ce8\u7684\u53e5\u5b50\u7684\u8bad\u7ec3\u96c6 \\(D\\) \uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u7528\u4e8e\u89e3\u6790\u65b0\u53e5\u5b50\u7684\u89e3\u6790\u6a21\u578b \\(M\\) \u89e3\u6790\uff1a\u7ed9\u5b9a\u89e3\u6790\u6a21\u578b \\(M\\) \u548c\u53e5\u5b50 \\(S\\) \uff0c\u6839\u636e \\(M\\) \u5f97\u5230 \\(S\\) \u7684\u6700\u4f18\u4f9d\u5b58\u8bed\u6cd5\u56fe","title":"1.1 Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#12-transition-based-dependency-parsing","text":"Transition-based \u4f9d\u5b58\u8bed\u6cd5\u4f9d\u8d56\u4e8e\u5b9a\u4e49\u53ef\u80fd\u8f6c\u6362\u7684\u72b6\u6001\u673a\uff0c\u4ee5\u521b\u5efa\u4ece\u8f93\u5165\u53e5\u5230\u4f9d\u5b58\u53e5\u6cd5\u6811\u7684\u6620\u5c04\u3002\u5b66\u4e60\u95ee\u9898\u662f\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u6839\u636e\u8f6c\u79fb\u5386\u53f2\u6765\u9884\u6d4b\u72b6\u6001\u673a\u4e2d\u7684\u4e0b\u4e00\u4e2a\u8f6c\u6362\u7684\u6a21\u578b\u3002\u5206\u6790\u95ee\u9898\u662f\u4f7f\u7528\u5728\u5b66\u4e60\u95ee\u9898\u4e2d\u5f97\u5230\u7684\u6a21\u578b\u5bf9\u8f93\u5165\u53e5\u5b50\u6784\u5efa\u4e00\u4e2a**\u6700\u4f18\u7684\u8f6c\u79fb\u5e8f\u5217**\u3002\u5927\u591a\u6570 Transition-based \u7cfb\u7edf\u4e0d\u4f1a\u4f7f\u7528\u6b63\u5f0f\u7684\u8bed\u6cd5\u3002","title":"1.2 Transition-Based Dependency Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#13-greedy-deterministic-transition-based-parsing","text":"\u8fd9\u4e2a\u7cfb\u7edf\u662f\u7531 Nivre \u5728 2003 \u5e74\u63d0\u51fa\uff0c\u4e0e\u5f53\u65f6\u7684\u5e38\u7528\u65b9\u6cd5\u622a\u7136\u4e0d\u540c\u3002 \u8fd9\u4e2a\u8f6c\u6362\u7cfb\u7edf\u662f\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5b83\u7531\u72b6\u6001\u548c\u8fd9\u4e9b\u72b6\u6001\u4e4b\u95f4\u7684\u8f6c\u6362\u7ec4\u6210\u3002\u8be5\u6a21\u578b\u5bfc\u51fa\u4e86\u4ece\u521d\u59cb\u72b6\u6001\u5230\u51e0\u79cd\u7ec8\u7aef\u72b6\u6001\u4e4b\u4e00\u7684\u4e00\u7cfb\u5217\u8f6c\u6362\u3002 \u72b6\u6001 \uff1a\u5bf9\u4efb\u610f\u53e5\u5b50 \\(S=w_{0}w_{1}...w_{n}\\) \uff0c\u4e00\u4e2a\u72b6\u6001\u53ef\u4ee5\u63cf\u8ff0\u4e3a\u4e00\u4e2a\u4e09\u5143\u7ec4 \\(c=(\\sigma, \\beta,A)\\) \uff1a \u6765\u81ea S \u7684\u5355\u8bcd \\(w_{i}\\) \u7684\u5806 \\(\\sigma\\) \u6765\u81ea \\(S\\) \u7684\u5355\u8bcd \\(w_{i}\\) \u7684\u7f13\u51b2\u533a \\(\\beta\\) \u4e00\u7ec4\u5f62\u5f0f\u4e3a \\((w_{i},r,w_{j})\\) \u7684\u4f9d\u5b58\u5f27\uff0c\u5176\u4e2d \\(w_{i},w_{j}\\) \u662f\u6765\u81ea \\(S\\) \uff0c\u548c \\(r\\) \u63cf\u8ff0\u4f9d\u5b58\u5173\u7cfb\u3002 \u56e0\u6b64\uff0c\u5bf9\u4e8e\u4efb\u610f\u53e5\u5b50 \\(S=w_{0}w_{1}...w_{n}\\) \u4e00\u4e2a\u5f62\u5f0f\u4e3a \\(([w_{0}]_{\\sigma},[w_{1}...w_{n}]_{\\beta},\\varnothing)\\) \u7684\u521d\u59cb\u72b6\u6001 \\(c_{0}\\) \uff08\u73b0\u5728\u53ea\u6709 ROOT \u5728\u5806 \\(\\sigma\\) \u4e2d\uff0c\u6ca1\u6709\u88ab\u9009\u62e9\u7684\u5355\u8bcd\u90fd\u5728\u7f13\u51b2\u533a \\(\\beta\\) \u4e2d\u3002 \u4e00\u4e2a\u5f62\u5f0f\u4e3a \\((\\sigma,[]_{\\beta},A)\\) \u7684\u7ec8\u70b9\u72b6\u6001\u3002 \u8f6c\u79fb \uff1a\u5728\u72b6\u6001\u4e4b\u95f4\u6709\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u8f6c\u79fb\uff1a SHIFT \uff1a\u79fb\u9664\u5728\u7f13\u51b2\u533a\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0c\u7136\u540e\u5c06\u5176\u653e\u5728\u5806\u7684\u9876\u90e8\uff08\u524d\u63d0\u6761\u4ef6\uff1a\u7f13\u51b2\u533a\u4e0d\u80fd\u4e3a\u7a7a\uff09\u3002 \\(Left\\text{-}Arc_{r}\\) \uff1a\u5411\u4f9d\u5b58\u5f27\u96c6\u5408 A \u4e2d\u52a0\u5165\u4e00\u4e2a\u4f9d\u5b58\u5f27 \\((w_{j},r,w_{i})\\) \uff0c\u5176\u4e2d \\(w_{i}\\) \u662f\u5806\u9876\u7684\u7b2c\u4e8c\u4e2a\u5355\u8bcd\uff0c \\(w_{j}\\) \u662f\u5806\u9876\u90e8\u7684\u5355\u8bcd\u3002\u4ece\u6808\u4e2d\u79fb\u9664 \\(w_{i}\\) \uff08\u524d\u63d0\u6761\u4ef6\uff1a\u5806\u5fc5\u987b\u5305\u542b\u4e24\u4e2a\u5355\u8bcd\u4ee5\u53ca \\(w_{i}\\) \u4e0d\u662f ROOT \uff09\u3002 \\(Right\\text{-}Arc_{r}\\) \uff1a\u5411\u4f9d\u5b58\u5f27\u96c6\u5408 A \u4e2d\u52a0\u5165\u4e00\u4e2a\u4f9d\u5b58\u5f27 \\((w_{i},r,w_{j})\\) \uff0c\u5176\u4e2d \\(w_{i}\\) \u662f\u5806\u9876\u7684\u7b2c\u4e8c\u4e2a\u5355\u8bcd\uff0c \\(w_{j}\\) \u662f\u5806\u9876\u90e8\u7684\u5355\u8bcd\u3002\u4ece\u6808\u4e2d\u79fb\u9664 \\(w_{j}\\) \uff08\u524d\u63d0\u6761\u4ef6\uff1a\u5806\u5fc5\u987b\u5305\u542b\u4e24\u4e2a\u5355\u8bcd\uff09\u3002 \u4e0b\u56fe\u7ed9\u51fa\u4e86\u8fd9\u4e09\u4e2a\u8f6c\u6362\u7684\u66f4\u6b63\u5f0f\u7684\u5b9a\u4e49 1.4 Neural Dependency Parsing \u867d\u7136\u4f9d\u8d56\u9879\u89e3\u6790\u6709\u5f88\u591a\u6df1\u5c42\u6a21\u578b\uff0c\u8fd9\u90e8\u5206\u7279\u522b\u4fa7\u91cd\u4e8e\u8d2a\u5fc3\uff0c\u57fa\u4e8e\u8f6c\u79fb\u7684\u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u3002\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5224\u522b\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u76f8\u6bd4\uff0c\u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u6027\u80fd\u548c\u6548\u679c\u66f4\u597d\u3002\u4e0e\u4ee5\u524d\u6a21\u578b\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u8fd9\u7c7b\u6a21\u578b\u4f9d\u8d56\u7a20\u5bc6\u800c\u4e0d\u662f\u7a00\u758f\u7684\u7279\u5f81\u8868\u793a\u3002 \u6211\u4eec\u5c06\u8981\u63cf\u8ff0\u7684\u6a21\u578b\u91c7\u7528\u4e0a\u4e00\u90e8\u5206\u4e2d\u8bb2\u8ff0\u7684\u6807\u51c6\u4f9d\u5b58\u5f27\u8f6c\u6362\u7cfb\u7edf\u3002\u6700\u7ec8\uff0c\u6a21\u578b\u7684\u76ee\u6807\u662f\u9884\u6d4b\u4ece\u4e00\u4e9b\u521d\u59cb\u72b6\u6001 \\(c\\) \u5230\u4e00\u4e2a\u7ec8\u70b9\u72b6\u6001\u7684\u8f6c\u6362\u5e8f\u5217\uff0c\u5bf9\u6a21\u578b\u4e2d\u7684\u4f9d\u5b58\u8bed\u6cd5\u6811\u8fdb\u884c\u7f16\u7801\u7684\u3002\u7531\u4e8e\u6a21\u578b\u662f\u8d2a\u5fc3\u7684\uff0c\u5b83\u57fa\u4e8e\u4ece\u5f53\u524d\u7684\u72b6\u6001 \\(c=(\\sigma, \\beta, A)\\) \u63d0\u53d6\u7279\u5f81\uff0c\u7136\u540e\u5c1d\u8bd5\u4e00\u6b21\u6b63\u786e\u5730\u9884\u6d4b\u4e00\u6b21\u8f6c\u79fb \\(T\\in \\{SHIFT, Left\\text{-}Arc_{r},Right\\text{-}Arc_{r}\\}\\) \u3002\u56de\u60f3\u4e00\u4e0b\uff0c \\(\\sigma\\) \u662f\u6808\uff0c \\(\\beta\\) \u662f\u7f13\u5b58, \\(A\\) \u662f\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u53e5\u5b50\u7684\u4f9d\u8d56\u5f27\u7684\u96c6\u5408 \u7279\u5f81\u9009\u62e9 \uff1a\u6839\u636e\u8be5\u6a21\u578b\u6240\u9700\u7684\u590d\u6742\u6027\uff0c\u5b9a\u4e49\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165\u662f\u6709\u7075\u6d3b\u6027\u7684\u3002\u5bf9\u7ed9\u5b9a\u53e5\u5b50 \\(S\\) \u7684\u7279\u5f81\u5305\u542b\u4e00\u4e9b\u5b50\u96c6\uff1a \\(S_{word}\\) \uff1a\u5728\u5806 \\(\\sigma\\) \u7684\u9876\u90e8\u548c\u7f13\u51b2\u533a \\(\\beta\\) \u7684 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff08\u548c\u5b83\u4eec\u7684\u4f9d\u5b58\uff09\u3002 \\(S_{tag}\\) \uff1a\u5728 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u8bcd\u6027\u6807\u6ce8\uff08 POS \uff09\u3002\u8bcd\u6027\u6807\u6ce8\u662f\u7531\u4e00\u4e2a\u79bb\u6563\u96c6\u5408\u7ec4\u6210\uff1a \\(\\mathcal{P}=\\{NN,NNP,NNS,DT,JJ,...\\}\\) \u3002 \\(S_{label}\\) \uff1a\u5728 \\(S\\) \u4e2d\u4e00\u4e9b\u5355\u8bcd\u7684\u4f9d\u5b58\u6807\u7b7e\u3002\u4f9d\u5b58\u6807\u7b7e\u662f\u7531\u4e00\u4e2a\u4f9d\u5b58\u5173\u7cfb\u7684\u79bb\u6563\u96c6\u5408\u7ec4\u6210\uff1a \\(\\mathcal{L}=\\{amod,tmod,nsubj,csubj,dobj,...\\}\\) \u3002 \u5bf9\u6bcf\u79cd\u7279\u5f81\u7c7b\u578b\uff0c\u6211\u4eec\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u5c06\u7279\u5f81\u7684 one-hot \u7f16\u7801\u6620\u5c04\u5230\u4e00\u4e2a \\(d\\) \u7ef4\u7684\u7a20\u5bc6\u7684\u5411\u91cf\u8868\u793a\u7684\u5d4c\u5165\u77e9\u9635\u3002 \\(S_{word}\\) \u7684\u5b8c\u5168\u5d4c\u5165\u77e9\u9635\u662f \\(E^{w}\\in \\mathbb{R}^{d\\times N_{w}}\\) \uff0c\u5176\u4e2d \\(N_{w}\\) \u662f\u5b57\u5178/\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u76f8\u5e94\u5730\uff0cPOS \u548c\u4f9d\u5b58\u6807\u7b7e\u7684\u5d4c\u5165\u77e9\u9635\u5206\u522b\u4e3a \\(E^{t}\\in \\mathbb{R}^{d\\times N_{t}}\\) \u548c \\(E^{l}\\in \\mathbb{R}^{d\\times N_{l}}\\) \uff0c\u5176\u4e2d \\(N_{t}\\) \u548c \\(N_{l}\\) \u5206\u522b\u4e3a\u4e0d\u540c\u8bcd\u6027\u6807\u6ce8\u548c\u4f9d\u5b58\u6807\u7b7e\u7684\u4e2a\u6570\u3002\u6700\u540e\uff0c\u5b9a\u4e49\u4ece\u6bcf\u7ec4\u7279\u5f81\u4e2d\u9009\u51fa\u7684\u5143\u7d20\u7684\u6570\u91cf\u5206\u522b\u4e3a \\(n_{word}, n_{tag}, n_{label}\\) \u3002 \u7279\u5f81\u9009\u62e9\u7684\u4f8b\u5b50 \uff1a\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8003\u8651\u4e00\u4e0b\u5bf9 \\(S_{word}\\) \uff0c \\(S_{tag}\\) \u548c \\(S_{label}\\) \u7684\u9009\u62e9\uff1a \\(S_{word}\\) \uff1a\u5728\u5806\u548c\u7f13\u51b2\u533a\u7684\u524d\u4e09\u4e2a\u5355\u8bcd\uff1a \\(s_{1},s_{2},s_{3},b_{1},b_{2},b_{3}\\) \u3002\u6808\u9876\u90e8\u4e24\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2a\u7684 leftmost / rightmost \u7684\u5b50\u5355\u8bcd\uff1a \\(lc_{1}(s_{i}),rc_{1}(s_{i}),lc_{2}(s_{i}),rc_{2}(s_{i}),i=1,2\\) \u3002\u6808\u9876\u90e8\u4e24\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2a\u7684 leftmost of leftmost / rightmost of rightmost \u7684\u5b50\u5355\u8bcd\uff1a \\(lc_{1}(lc_{1}(s_{i})),rc_{1}(rc_{1}(s_{i})),i=1,2\\) \u3002 \\(S_{word}\\) \u603b\u5171\u542b\u6709 \\(n_{word}=18\\) \u4e2a\u5143\u7d20\u3002 \\(S_{tag}\\) \uff1a\u76f8\u5e94\u7684\u8bcd\u6027\u6807\u6ce8\uff0c\u5219 \\(S_{tag}\\) \u542b\u6709 \\(n_{tag}=18\\) \u4e2a\u5143\u7d20\u3002 \\(S_{label}\\) \uff1a\u5355\u8bcd\u7684\u5bf9\u5e94\u7684\u4f9d\u5b58\u6807\u7b7e\uff0c\u4e0d\u5305\u62ec\u5806/\u7f13\u51b2\u533a\u4e0a\u7684 6 \u4e2a\u5355\u8bcd\uff0c\u56e0\u6b64 \\(S_{label}\\) \u542b\u6709 \\(n_{label}=12\\) \u4e2a\u5143\u7d20\u3002 \u6ce8\u610f\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684 \\(NULL\\) \u8868\u793a\u4e0d\u5b58\u5728\u7684\u5143\u7d20\uff1a\u5f53\u5806\u548c\u7f13\u51b2\u533a\u4e3a\u7a7a\u6216\u8005\u8fd8\u6ca1\u6709\u6307\u5b9a\u4f9d\u5b58\u5173\u7cfb\u65f6\u3002\u5bf9\u4e00\u4e2a\u7ed9\u5b9a\u53e5\u5b50\u4f8b\u5b50\uff0c\u6211\u4eec\u6309\u7167\u4e0a\u8ff0\u7684\u65b9\u6cd5\u9009\u62e9\u5355\u8bcd\uff0c\u8bcd\u6027\u6807\u6ce8\u548c\u4f9d\u5b58\u6807\u7b7e\uff0c\u4ece\u5d4c\u5165\u77e9\u9635 \\(E^{w},E^{t},E^{l}\\) \u4e2d\u63d0\u53d6\u5b83\u4eec\u5bf9\u5e94\u7684\u7a20\u5bc6\u7684\u7279\u5f81\u7684\u8868\u793a\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u5411\u91cf\u8fde\u63a5\u8d77\u6765\u4f5c\u4e3a\u8f93\u5165 \\([x^{w},x^{t},x^{l}]\\) \u3002\u5728\u8bad\u7ec3\u65f6\u95f4\uff0c\u6211\u4eec\u53cd\u5411\u4f20\u64ad\u5230\u7a20\u5bc6\u7684\u5411\u91cf\u8868\u793a\uff0c\u4ee5\u53ca\u540e\u9762\u5404\u5c42\u7684\u53c2\u6570\u3002 \u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff1a\u8fd9\u4e2a\u795e\u7ecf\u7f51\u7edc\u5305\u542b\u4e00\u4e2a\u8f93\u5165\u5c42 \\([x^{w},x^{t},x^{l}]\\) \uff0c\u4e00\u4e2a\u9690\u85cf\u5c42\uff0c\u4ee5\u53ca\u5177\u6709\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\u7684\u6700\u7ec8 softmax \u5c42\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u9690\u85cf\u5c42\u4e2d\u5b9a\u4e49\u5355\u4e2a\u6743\u503c\u77e9\u9635\uff0c\u4e0e \\([x^{w},x^{t},x^{l}]\\) \u8fdb\u884c\u8fd0\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e09\u4e2a\u6743\u503c\u77e9\u9635 \\([W^{w}_{1},W^{t}_{1},W^{l}_{1}]\\) \uff0c\u6bcf\u4e2a\u77e9\u9635\u5bf9\u5e94\u7740\u76f8\u5e94\u7684\u8f93\u5165\u7c7b\u578b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7136\u540e\u6211\u4eec\u5e94\u7528\u4e00\u4e2a\u975e\u7ebf\u6027\u51fd\u6570\u5e76\u4f7f\u7528\u4e00\u4e2a\u989d\u5916\u7684\u4eff\u5c04\u5c42 \\([W_{2}]\\) \uff0c\u4f7f\u5f97\u5bf9\u4e8e\u53ef\u80fd\u7684\u8f6c\u79fb\u6b21\u6570\uff08\u8f93\u51fa\u7ef4\u5ea6\uff09\uff0c\u6709\u76f8\u540c\u6570\u91cf\u7684 softmax \u6982\u7387\u3002 \u6ce8\u610f\u5728\u4e0a\u56fe\u4e2d\uff0c\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f \\(f(x)=x^{3}\\) \u3002 \u6709\u5173 greedy transition-based \u795e\u7ecf\u7f51\u7edc\u4f9d\u5b58\u8bed\u6cd5\u89e3\u6790\u5668\u7684\u66f4\u5b8c\u6574\u7684\u89e3\u91ca\uff0c\u8bf7\u53c2\u8003\u8bba\u6587\uff1a A Fast and Accurate Dependency Parser using Neural Networks \u3002","title":"1.3 Greedy Deterministic Transition-Based Parsing"},{"location":"CS224n-2019-05-Linguistic%20Structure%20Dependency%20Parsing/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/","text":"Lecture 06 The probability of a sentence Recurrent Neural Networks and Language Models \u00b6 Overview \u4ecb\u7ecd\u4e00\u4e2a\u65b0\u7684NLP\u4efb\u52a1 Language Modeling (motivate RNNs) \u4ecb\u7ecd\u4e00\u4e2a\u65b0\u7684\u795e\u7ecf\u7f51\u7edc\u5bb6\u65cf Recurrent Neural Networks (RNNs) Language Modeling \u8bed\u8a00\u5efa\u6a21\u7684\u4efb\u52a1\u662f\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u4ec0\u4e48\u3002 \u66f4\u6b63\u5f0f\u7684\u8bf4\u6cd5\u662f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \\(\\boldsymbol{x}^{(1)}, \\boldsymbol{x}^{(2)}, \\ldots, \\boldsymbol{x}^{(t)}\\) \uff0c\u8ba1\u7b97\u4e0b\u4e00\u4e2a\u5355\u8bcd \\(x^{(t+1)}\\) \u7684\u6982\u7387\u5206\u5e03 \\[ P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\] \u5176\u4e2d\uff0c \\(x^{(t+1)}\\) \u53ef\u4ee5\u662f\u8bcd\u8868\u4e2d\u7684\u4efb\u610f\u5355\u8bcd \\(V=\\left\\{\\boldsymbol{w}_{1}, \\ldots, \\boldsymbol{w}_{|V|}\\right\\}\\) \u8fd9\u6837\u505a\u7684\u7cfb\u7edf\u79f0\u4e3a Language Model \u8bed\u8a00\u6a21\u578b \u8fd8\u53ef\u4ee5\u5c06\u8bed\u8a00\u6a21\u578b\u770b\u4f5c\u662f\u4e00\u4e2a\u5c06\u6982\u7387\u5206\u914d\u7ed9\u4e00\u6bb5\u6587\u672c\u7684\u7cfb\u7edf \u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e00\u6bb5\u6587\u672c \\(x^{(1)},\\dots,x^{(T)}\\) \u5219\u8fd9\u6bb5\u6587\u672c\u7684\u6982\u7387(\u6839\u636e\u8bed\u8a00\u6a21\u578b)\u4e3a \\[ \\begin{aligned} P\\left(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\right) &=P\\left(\\boldsymbol{x}^{(1)}\\right) \\times P\\left(\\boldsymbol{x}^{(2)} | \\boldsymbol{x}^{(1)}\\right) \\times \\cdots \\times P\\left(\\boldsymbol{x}^{(T)} | \\boldsymbol{x}^{(T-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\\\ &=\\prod_{t=1}^{T} P\\left(\\boldsymbol{x}^{(t)} | \\boldsymbol{x}^{(t-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\end{aligned} \\] \u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u7684\u662f \\(\\prod_{t=1}^{T} P\\left(\\boldsymbol{x}^{(t)} | \\boldsymbol{x}^{(t-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right)\\) n-gram Language Models $$ \\text{the students opened their ______} $$ \u95ee\u9898 \uff1a\u5982\u4f55\u5b66\u4e60\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\uff1f \u56de\u7b54 (pre-DeepLearning)\uff1a\u5b66\u4e60\u4e00\u4e2a n-gram \u8bed\u8a00\u6a21\u578b \u5b9a\u4e49 \uff1an-gram \u662f \u4e00\u4e2a\u7531n\u4e2a\u8fde\u7eed\u5355\u8bcd\u7ec4\u6210\u7684\u5757 unigrams: \u201cthe\u201d, \u201cstudents\u201d, \u201copened\u201d, \u201dtheir\u201d bigrams: \u201cthe students\u201d, \u201cstudents opened\u201d, \u201copened their\u201d trigrams: \u201cthe students opened\u201d, \u201cstudents opened their\u201d 4-grams: \u201cthe students opened their\u201d \u60f3\u6cd5 \uff1a\u6536\u96c6\u5173\u4e8e\u4e0d\u540cn-gram\u51fa\u73b0\u9891\u7387\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u5e76\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002 \u9996\u5148\uff0c\u6211\u4eec\u505a\u4e00\u4e2a \u7b80\u5316\u5047\u8bbe \uff1a \\(x^{(t+1)}\\) \u53ea\u4f9d\u8d56\u4e8e\u524d\u9762\u7684n-1\u4e2a\u5355\u8bcd \\[ \\begin{aligned} P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) & =P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right) \\\\ &=\\frac{P\\left(\\boldsymbol{x}^{(t+1)}, \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)}{P\\left(\\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)} \\end{aligned} \\] \u5177\u4f53\u542b\u4e49\u5982\u4e0b\u56fe\u6240\u793a \u95ee\u9898 \uff1a\u5982\u4f55\u5f97\u5230n-gram\u548c(n-1)-gram\u7684\u6982\u7387\uff1f \u56de\u7b54 \uff1a\u901a\u8fc7\u5728\u4e00\u4e9b\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u4e2d\u8ba1\u7b97\u5b83\u4eec(\u7edf\u8ba1\u8fd1\u4f3c) \\[ \\approx \\frac{\\operatorname{count}\\left(\\boldsymbol{x}^{(t+1)}, \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)}{\\operatorname{count}\\left(\\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)} \\] \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u5b66\u4e60\u4e00\u4e2a 4-gram \u7684\u8bed\u8a00\u6a21\u578b \u4f8b\u5982\uff0c\u5047\u8bbe\u5728\u8bed\u6599\u5e93\u4e2d\uff1a \u201cstudents opened their\u201d \u51fa\u73b0\u4e861000\u6b21 \u201cstudents opened their books\u201d \u51fa\u73b0\u4e86400\u6b21 \\(P(\\text { books } | \\text { students opened their })=0.4\\) \u201cstudents opened their exams\u201d \u51fa\u73b0\u4e86100\u6b21 \\(P(\\text { exams } | \\text { students opened their })=0.1\\) \u6211\u4eec\u5e94\u8be5\u5ffd\u89c6\u4e0a\u4e0b\u6587\u4e2d\u7684\u201cproctor\u201d\u5417\uff1f \u5728\u672c\u4f8b\u4e2d\uff0c\u4e0a\u4e0b\u6587\u91cc\u51fa\u73b0\u4e86\u201cproctor\u201d\uff0c\u6240\u4ee5exams\u5728\u8fd9\u91cc\u7684\u4e0a\u4e0b\u6587\u4e2d\u5e94\u8be5\u662f\u6bd4books\u6982\u7387\u66f4\u5927\u7684\u3002 Sparsity Problems with n-gram Language Models \u95ee\u9898 \uff1a\u5982\u679c\u201cstudents open their \\(w\\) \u201d \u4ece\u672a\u51fa\u73b0\u5728\u6570\u636e\u4e2d\uff0c\u90a3\u4e48\u6982\u7387\u503c\u4e3a 0 (Partial)\u89e3\u51b3\u65b9\u6848 \uff1a\u4e3a\u6bcf\u4e2a \\(w\\in V\\) \u6dfb\u52a0\u6781\u5c0f\u6570 \\(\\delta\\) \u3002\u8fd9\u53eb\u505a\u5e73\u6ed1\u3002\u8fd9\u4f7f\u5f97\u8bcd\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u81f3\u5c11\u6709\u5f88\u5c0f\u7684\u6982\u7387\u3002 \u95ee\u9898 \uff1a\u5982\u679c\u201cstudents open their\u201d \u4ece\u672a\u51fa\u73b0\u5728\u6570\u636e\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u65e0\u6cd5\u8ba1\u7b97\u4efb\u4f55\u5355\u8bcd \\(w\\) \u7684\u6982\u7387\u503c (Partial)\u89e3\u51b3\u65b9\u6848 \uff1a\u5c06\u6761\u4ef6\u6539\u4e3a\u201copen their\u201d\u3002\u8fd9\u53eb\u505a\u540e\u9000\u3002 Note: n \u7684\u589e\u52a0\u4f7f\u7a00\u758f\u6027\u95ee\u9898\u53d8\u5f97\u66f4\u7cdf\u3002\u4e00\u822c\u60c5\u51b5\u4e0b n \u4e0d\u80fd\u5927\u4e8e5\u3002 Storage Problems with n-gram Language Models \u589e\u52a0 n \u6216\u589e\u52a0\u8bed\u6599\u5e93\u90fd\u4f1a\u589e\u52a0\u6a21\u578b\u5927\u5c0f n-gram Language Models in practice \u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\uff0c\u5728\u51e0\u79d2\u949f\u5185\u5efa\u7acb\u4e00\u4e2a\u8d85\u8fc7170\u4e07\u4e2a\u5355\u8bcd\u5e93(Reuters)\u7684\u7b80\u5355\u7684\u4e09\u5143\u7ec4\u8bed\u8a00\u6a21\u578b Reuters \u662f \u5546\u4e1a\u548c\u91d1\u878d\u65b0\u95fb\u7684\u6570\u636e\u96c6 \u7a00\u758f\u6027\u95ee\u9898 \uff1a\u6982\u7387\u5206\u5e03\u7684\u7c92\u5ea6\u4e0d\u5927\u3002\u201ctoday the company\u201d \u548c \u201ctoday the bank\u201d\u90fd\u662f \\(\\frac{4}{26}\\) \uff0c\u90fd\u53ea\u51fa\u73b0\u8fc7\u56db\u6b21 Generating text with a n-gram Language Model \u8fd8\u53ef\u4ee5\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u6765\u751f\u6210\u6587\u672c \u4f7f\u7528trigram\u8fd0\u884c\u4ee5\u4e0a\u751f\u6210\u8fc7\u7a0b\u65f6\uff0c\u4f1a\u5f97\u5230\u5982\u4e0b\u6587\u672c today the price of gold per ton , while production of shoe lasts and shoe industry , the bank intervened just after it considered and rejected an imf demand to rebuild depleted european stocks , sept 30 end primary 76 cts a share . \u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\u5176\u5177\u6709\u8bed\u6cd5\u4f46\u662f\u662f\u4e0d\u8fde\u8d2f\u7684\u3002\u5982\u679c\u6211\u4eec\u60f3\u8981\u5f88\u597d\u5730\u6a21\u62df\u8bed\u8a00\uff0c\u6211\u4eec\u9700\u8981\u540c\u65f6\u8003\u8651\u4e09\u4e2a\u4ee5\u4e0a\u7684\u5355\u8bcd\u3002\u4f46\u589e\u52a0 n \u4f7f\u6a21\u578b\u7684\u7a00\u758f\u6027\u95ee\u9898\u6076\u5316\uff0c\u6a21\u578b\u5c3a\u5bf8\u589e\u5927\u3002 How to build a neural Language Model? \u56de\u5fc6\u4e00\u4e0b\u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u8f93\u5165\uff1a\u5355\u8bcd\u5e8f\u5217 \\(\\boldsymbol{x}^{(1)}, \\boldsymbol{x}^{(2)}, \\ldots, \\boldsymbol{x}^{(t)}\\) \u8f93\u51fa\uff1a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \\(P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right)\\) window-based neural model \u5728\u7b2c\u4e09\u8bb2\u4e2d\u88ab\u7528\u4e8eNER\u95ee\u9898 A fixed-window neural Language Model \u4f7f\u7528\u548cNER\u95ee\u9898\u4e2d\u540c\u6837\u7f51\u7edc\u7ed3\u6784 \u8d85\u8d8a n-gram \u8bed\u8a00\u6a21\u578b\u7684 \u6539\u8fdb \u6ca1\u6709\u7a00\u758f\u6027\u95ee\u9898 \u4e0d\u9700\u8981\u89c2\u5bdf\u5230\u6240\u6709\u7684n-grams \u5b58\u5728\u7684\u95ee\u9898 \u56fa\u5b9a\u7a97\u53e3\u592a\u5c0f \u6269\u5927\u7a97\u53e3\u5c31\u9700\u8981\u6269\u5927\u6743\u91cd\u77e9\u9635 \\(W\\) \u7a97\u53e3\u518d\u5927\u4e5f\u4e0d\u591f\u7528 \\(x^{(1)}\\) \u548c \\(x^{(2)}\\) \u4e58\u4ee5\u5b8c\u5168\u4e0d\u540c\u7684\u6743\u91cd\u3002\u8f93\u5165\u7684\u5904\u7406 \u4e0d\u5bf9\u79f0 \u3002 \u6211\u4eec\u9700\u8981\u4e00\u4e2a\u795e\u7ecf\u7ed3\u6784\uff0c\u53ef\u4ee5\u5904\u7406\u4efb\u4f55\u957f\u5ea6\u7684\u8f93\u5165 Recurrent Neural Networks (RNN) \u6838\u5fc3\u60f3\u6cd5 \uff1a\u91cd\u590d\u4f7f\u7528 \u76f8\u540c \u7684\u6743\u91cd\u77e9\u9635 \\(W\\) RNN\u7684 \u4f18\u70b9 \u53ef\u4ee5\u5904\u7406 \u4efb\u610f\u957f\u5ea6 \u7684\u8f93\u5165 \u6b65\u9aa4 t \u7684\u8ba1\u7b97(\u7406\u8bba\u4e0a)\u53ef\u4ee5\u4f7f\u7528 \u8bb8\u591a\u6b65\u9aa4\u524d \u7684\u4fe1\u606f \u6a21\u578b\u5927\u5c0f\u4e0d\u4f1a \u968f\u7740\u8f93\u5165\u7684\u589e\u52a0\u800c**\u589e\u52a0** \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e0a\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709 \u5bf9\u79f0\u6027 RNN\u7684 \u7f3a\u70b9 \u9012\u5f52\u8ba1\u7b97\u901f\u5ea6 \u6162 \u5728\u5b9e\u8df5\u4e2d\uff0c\u5f88\u96be\u4ece **\u8bb8\u591a\u6b65\u9aa4\u524d**\u8fd4\u56de\u4fe1\u606f \u540e\u9762\u7684\u8bfe\u7a0b\u4e2d\u4f1a\u8be6\u7ec6\u4ecb\u7ecd Training a RNN Language Model \u83b7\u53d6\u4e00\u4e2a\u8f83\u5927\u7684\u6587\u672c\u8bed\u6599\u5e93\uff0c\u8be5\u8bed\u6599\u5e93\u662f\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \u8f93\u5165RNN-LM\uff1b\u8ba1\u7b97\u6bcf\u4e2a\u6b65\u9aa4 t \u7684\u8f93\u51fa\u5206\u5e03 \u5373\u9884\u6d4b\u5230\u76ee\u524d\u4e3a\u6b62\u7ed9\u5b9a\u7684\u6bcf\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \u6b65\u9aa4 t \u4e0a\u7684\u635f\u5931\u51fd\u6570\u4e3a\u9884\u6d4b\u6982\u7387\u5206\u5e03 \\(\\hat{\\boldsymbol{y}}^{(t)}\\) \u4e0e\u771f\u5b9e\u4e0b\u4e00\u4e2a\u5355\u8bcd \\({\\boldsymbol{y}}^{(t)}\\) ( \\(x^{(t+1)}\\) \u7684\u72ec\u70ed\u5411\u91cf)\u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5 \\[ J^{(t)}(\\theta)=C E\\left(\\boldsymbol{y}^{(t)}, \\hat{\\boldsymbol{y}}^{(t)}\\right)=-\\sum_{w \\in V} \\boldsymbol{y}_{w}^{(t)} \\log \\hat{\\boldsymbol{y}}_{w}^{(t)}=-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)} \\] \u5c06\u5176\u5e73\u5747\uff0c\u5f97\u5230\u6574\u4e2a\u57f9\u8bad\u96c6\u7684 \u603b\u4f53\u635f\u5931 \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T}-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)} \\] \\[ J^{(1)}(\\theta)+J^{(2)}(\\theta)+J^{(3)}(\\theta)+J^{(4)}(\\theta)+\\ldots=J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta) \\] \u7136\u800c\uff1a\u8ba1\u7b97 \u6574\u4e2a\u8bed\u6599\u5e93 \\(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\) \u7684\u635f\u5931\u548c\u68af\u5ea6\u592a\u6602\u8d35\u4e86 \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta) \\] \u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u5c06 \\(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\) \u770b\u505a\u4e00\u4e2a \u53e5\u5b50 \u6216\u662f \u6587\u6863 \u56de\u5fc6 \uff1a\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u5141\u8bb8\u6211\u4eec\u8ba1\u7b97\u5c0f\u5757\u6570\u636e\u7684\u635f\u5931\u548c\u68af\u5ea6\uff0c\u5e76\u8fdb\u884c\u66f4\u65b0\u3002 \u8ba1\u7b97\u4e00\u4e2a\u53e5\u5b50\u7684\u635f\u5931 \\(J(\\theta)\\) (\u5b9e\u9645\u4e0a\u662f\u4e00\u6279\u53e5\u5b50)\uff0c\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u6743\u91cd\u3002\u91cd\u590d\u4e0a\u8ff0\u64cd\u4f5c\u3002 Backpropagation for RNNs \u95ee\u9898 \uff1a\u5173\u4e8e \u91cd\u590d\u7684 \u6743\u91cd\u77e9\u9635 \\(W_h\\) \u7684\u504f\u5bfc\u6570 \\(J^{(t)}(\\theta)\\) \u56de\u7b54 \uff1a\u91cd\u590d\u6743\u91cd\u7684\u68af\u5ea6\u662f\u6bcf\u6b21\u5176\u51fa\u73b0\u65f6\u7684\u68af\u5ea6\u7684\u603b\u548c \\[ \\frac{\\partial J^{(t)}}{\\partial \\boldsymbol{W}_{\\boldsymbol{h}}}=\\sum_{i=1}^{t}\\left.\\frac{\\partial J^{(t)}}{\\partial \\boldsymbol{W}_{\\boldsymbol{h}}}\\right|_{(i)} \\] Multivariable Chain Rule \u5bf9\u4e8e\u4e00\u4e2a\u591a\u53d8\u91cf\u51fd\u6570 \\(f(x,y)\\) \u548c\u4e24\u4e2a\u5355\u53d8\u91cf\u51fd\u6570 \\(x(t)\\) \u548c \\(y(t)\\) \uff0c\u5176\u94fe\u5f0f\u6cd5\u5219\u5982\u4e0b\uff1a \\[ \\frac{d}{d t} f(x(t), y(t))=\\frac{\\partial f}{\\partial x} \\frac{d x}{d t}+\\frac{\\partial f}{\\partial y} \\frac{d y}{d t} \\] Backpropagation for RNNs: Proof sketch Backpropagation for RNNs \u95ee\u9898 \uff1a \u5982\u4f55\u8ba1\u7b97\uff1f \u56de\u7b54 \uff1a\u53cd\u5411\u4f20\u64ad\u7684\u65f6\u95f4\u6b65\u957f \\(i=t,\\dots,0\\) \u3002\u7d2f\u52a0\u68af\u5ea6\u3002\u8fd9\u4e2a\u7b97\u6cd5\u53eb\u505a\u201c backpropagation through time \u201d Generating text with a RNN Language Model \u5c31\u50cfn-gram\u8bed\u8a00\u6a21\u578b\u4e00\u6837\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528RNN\u8bed\u8a00\u6a21\u578b\u901a\u8fc7 \u91cd\u590d\u91c7\u6837 \u6765 \u751f\u6210\u6587\u672c \u3002\u91c7\u6837\u8f93\u51fa\u662f\u4e0b\u4e00\u6b65\u7684\u8f93\u5165\u3002 \u76f8\u6bd4n-gram\u66f4\u6d41\u7545\uff0c\u8bed\u6cd5\u6b63\u786e\uff0c\u4f46\u603b\u4f53\u4e0a\u4ecd\u7136\u5f88\u4e0d\u8fde\u8d2f \u98df\u8c31\u7684\u4f8b\u5b50\u4e2d\uff0c\u751f\u6210\u7684\u6587\u672c\u5e76\u6ca1\u6709\u8bb0\u4f4f\u6587\u672c\u7684\u4e3b\u9898\u662f\u4ec0\u4e48 \u54c8\u5229\u6ce2\u7279\u7684\u4f8b\u5b50\u4e2d\uff0c\u751a\u81f3\u6709\u4f53\u73b0\u51fa\u4e86\u4eba\u7269\u7684\u7279\u70b9\uff0c\u5e76\u4e14\u5f15\u53f7\u7684\u5f00\u95ed\u4e5f\u6ca1\u6709\u51fa\u73b0\u95ee\u9898 \u4e5f\u8bb8\u67d0\u4e9b\u795e\u7ecf\u5143\u6216\u8005\u9690\u85cf\u72b6\u6001\u5728\u8ddf\u8e2a\u6a21\u578b\u7684\u8f93\u51fa\u662f\u5426\u5728\u5f15\u53f7\u4e2d RNN\u662f\u5426\u53ef\u4ee5\u548c\u624b\u5de5\u89c4\u5219\u7ed3\u5408\uff1f \u4f8b\u5982Beam Serach\uff0c\u4f46\u662f\u53ef\u80fd\u5f88\u96be\u505a\u5230 Evaluating Language Models \u6807\u51c6\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u6307\u6807\u662f perplexity \u56f0\u60d1\u5ea6 \u8fd9\u7b49\u4e8e\u4ea4\u53c9\u71b5\u635f\u5931 \\(J(\\theta)\\) \u7684\u6307\u6570 \\[ =\\prod_{t=1}^{T}\\left(\\frac{1}{\\hat{y}_{x_{t+1}}^{(t)}}\\right)^{1 / T}=\\exp \\left(\\frac{1}{T} \\sum_{t=1}^{T}-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)}\\right)=\\exp (J(\\theta)) \\] \u4f4e\u56f0\u60d1\u5ea6\u662f\u66f4\u597d\u7684 RNNs have greatly improved perplexity Why should we care about Language Modeling? \u8bed\u8a00\u6a21\u578b\u662f\u4e00\u9879 \u57fa\u51c6\u6d4b\u8bd5 \u4efb\u52a1\uff0c\u5b83\u5e2e\u52a9\u6211\u4eec \u8861\u91cf \u6211\u4eec\u5728\u7406\u89e3\u8bed\u8a00\u65b9\u9762\u7684 \u8fdb\u5c55 \u751f\u6210\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u9700\u8981\u8bed\u6cd5\uff0c\u53e5\u6cd5\uff0c\u903b\u8f91\uff0c\u63a8\u7406\uff0c\u73b0\u5b9e\u4e16\u754c\u7684\u77e5\u8bc6\u7b49 \u8bed\u8a00\u5efa\u6a21\u662f\u8bb8\u591aNLP\u4efb\u52a1\u7684 \u5b50\u7ec4\u4ef6 \uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u6d89\u53ca \u751f\u6210\u6587\u672c \u6216 \u4f30\u8ba1\u6587\u672c\u6982\u7387 \u7684\u4efb\u52a1 \u9884\u6d4b\u6027\u6253\u5b57 \u8bed\u97f3\u8bc6\u522b \u624b\u5199\u8bc6\u522b \u62fc\u5199/\u8bed\u6cd5\u7ea0\u6b63 \u4f5c\u8005\u8bc6\u522b \u673a\u5668\u7ffb\u8bd1 \u6458\u8981 \u5bf9\u8bdd \u7b49\u7b49 Recap \u8bed\u8a00\u6a21\u578b\uff1a \u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u7684\u7cfb\u7edf \u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff1a\u4e00\u7cfb\u5217\u795e\u7ecf\u7f51\u7edc \u91c7\u7528\u4efb\u610f\u957f\u5ea6\u7684\u987a\u5e8f\u8f93\u5165 \u5728\u6bcf\u4e00\u6b65\u4e0a\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd \u53ef\u4ee5\u9009\u62e9\u5728\u6bcf\u4e00\u6b65\u4e0a\u751f\u6210\u8f93\u51fa \u9012\u5f52\u795e\u7ecf\u7f51\u7edc \\(\\neq\\) \u8bed\u8a00\u6a21\u578b \u6211\u4eec\u5df2\u7ecf\u8bc1\u660e\uff0cRNNs\u662f\u6784\u5efaLM\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u3002 \u4f46RNNs\u7684\u7528\u5904\u8981\u5927\u5f97\u591a! RNNs can be used for tagging e.g. part-of-speech tagging , named entity recognition RNNs can be used for sentence classification e.g. sentiment classification \u5982\u4f55\u8ba1\u7b97\u53e5\u5b50\u7f16\u7801 \u4f7f\u7528\u6700\u7ec8\u9690\u5c42\u72b6\u6001 \u4f7f\u7528\u6240\u6709\u9690\u5c42\u72b6\u6001\u7684\u9010\u5143\u7d20\u6700\u503c\u6216\u5747\u503c RNNs can be used as an encoder module e.g. question answering , machine translation, many other tasks! Encoder\u7684\u7ed3\u6784\u5728NLP\u4e2d\u975e\u5e38\u5e38\u89c1 RNN-LMs can be used to generate text e.g. speech recognition , machine translation, summarization \u8fd9\u662f\u4e00\u4e2a\u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u7684\u793a\u4f8b\u3002\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u7ec4\u4ef6\uff0c\u5e76\u4e14\u6700\u5173\u952e\u7684\u662f\uff0c\u6211\u4eec\u6839\u636e\u6761\u4ef6\u6765\u8c03\u6574\u5b83 \u7a0d\u540e\u6211\u4eec\u4f1a\u66f4\u8be6\u7ec6\u5730\u770b\u5230\u673a\u5668\u7ffb\u8bd1\u3002 A note on terminology \u672c\u8bfe\u63d0\u5230\u7684RNN\u662f \u201c\u201cvanilla RNN\u201d \u4e0b\u8282\u8bfe\u5c06\u4f1a\u5b66\u4e60GRU\u548cLSTM\u4ee5\u53ca\u591a\u5c42RNN \u672c\u8bfe\u7a0b\u7ed3\u675f\u65f6\uff0c\u4f60\u4f1a\u7406\u89e3\u7c7b\u4f3c\u201cstacked bidirectional LSTM with residual connections and self-attention\u201d\u7684\u77ed\u8bed Notes 05 Language Models, RNN, GRU and LSTM \u00b6 Keyphrases : Language Models. RNN. Bi-directional RNN. Deep RNN. GRU. LSTM. 1 Language Models \u00b6 1.1 Introduction \u8bed\u8a00\u6a21\u578b\u8ba1\u7b97\u7279\u5b9a\u5e8f\u5217\u4e2d\u591a\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u6982\u7387\u3002\u4e00\u4e2a m \u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(\\left\\{w_{1}, \\dots, w_{m}\\right\\}\\) \u7684\u6982\u7387\u5b9a\u4e49\u4e3a \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u3002\u5355\u8bcd \\(w_i\\) \u524d\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5355\u8bcd\uff0c\u5176\u7279\u6027\u4f1a\u6839\u636e\u5b83\u5728\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u800c\u6539\u53d8\uff0c \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u4e00\u822c\u53ea\u8003\u8651\u524d \\(n\\) \u4e2a\u5355\u8bcd\u800c\u4e0d\u662f\u8003\u8651\u5168\u90e8\u4e4b\u524d\u7684\u5355\u8bcd\u3002 \\[ P\\left(w_{1}, \\ldots, w_{m}\\right)=\\prod_{i=1}^{i=m} P\\left(w_{i} | w_{1}, \\ldots, w_{i-1}\\right) \\approx \\prod_{i=1}^{i=m} P\\left(w_{i} | w_{i-n}, \\ldots, w_{i-1}\\right) \\] \u4e0a\u9762\u7684\u516c\u5f0f\u5728\u8bed\u97f3\u8bc6\u522b\u548c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u5224\u65ad\u4e00\u4e2a\u8bcd\u5e8f\u5217\u662f\u5426\u4e3a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u51c6\u786e\u7ffb\u8bd1\u8d77\u5230\u4e86\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u73b0\u6709\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u6bcf\u4e2a\u77ed\u8bed/\u53e5\u5b50\u7ffb\u8bd1\uff0c\u7cfb\u7edf\u751f\u6210\u4e00\u4e9b\u5019\u9009\u7684\u8bcd\u5e8f\u5217\uff08\u4f8b\u5982\uff0c{I have,I has,I had,me have,me had}\uff09\uff0c\u5e76\u5bf9\u5176\u8bc4\u5206\u4ee5\u786e\u5b9a\u6700\u53ef\u80fd\u7684\u7ffb\u8bd1\u5e8f\u5217\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u5bf9\u4e00\u4e2a\u8f93\u5165\u77ed\u8bed\uff0c\u901a\u8fc7\u8bc4\u5224\u6bcf\u4e2a\u5019\u9009\u8f93\u51fa\u8bcd\u5e8f\u5217\u7684\u5f97\u5206\u7684\u9ad8\u4f4e\uff0c\u6765\u9009\u51fa\u6700\u597d\u7684\u8bcd\u987a\u5e8f\u3002\u4e3a\u6b64\uff0c\u6a21\u578b\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5355\u8bcd\u6392\u5e8f\u6216\u5355\u8bcd\u9009\u62e9\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002\u5b83\u5c06\u901a\u8fc7\u4e00\u4e2a\u6982\u7387\u51fd\u6570\u8fd0\u884c\u6240\u6709\u5355\u8bcd\u5e8f\u5217\u5019\u9009\u9879\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5019\u9009\u9879\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u6700\u9ad8\u5f97\u5206\u7684\u5e8f\u5217\u5c31\u662f\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u76f8\u6bd4 small is the cat\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 the cat is small \u66f4\u9ad8\u7684\u5f97\u5206\uff1b\u76f8\u6bd4 walking house after school\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 walking home after school \u66f4\u9ad8\u7684\u5f97\u5206\u3002 1.2 n-gram Language Models \u4e3a\u4e86\u8ba1\u7b97\u8fd9\u4e9b\u6982\u7387\uff0c\u6bcf\u4e2a n-gram \u7684\u8ba1\u6570\u5c06\u4e0e\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u4e2a\u79f0\u4e3a n-gram \u8bed\u8a00\u6a21\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9 bi-gram \u6a21\u578b\uff0c\u6bcf\u4e00\u4e2a bi-gram \u7684\u9891\u7387\uff0c\u901a\u8fc7\u5c06\u5355\u8bcd\u4e0e\u5176\u524d\u4e00\u4e2a\u5355\u8bcd\u76f8\u7ed3\u5408\u8fdb\u884c\u8ba1\u7b97\uff0c\u7136\u540e\u9664\u4ee5\u5bf9\u5e94\u7684 uni-gram \u7684\u9891\u7387\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u516c\u5f0f\u5c55\u793a\u4e86 bi-gram \u6a21\u578b\u548c tri-gram \u6a21\u578b\u7684\u533a\u522b\u3002 \\[ \\begin{aligned} p\\left(w_{2} | w_{1}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}\\right)}{\\operatorname{count}\\left(w_{1}\\right)} \\\\ p\\left(w_{3} | w_{1}, w_{2}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}, w_{3}\\right)}{\\operatorname{count}\\left(w_{1}, w_{2}\\right)} \\end{aligned} \\] \u4e0a\u5f0f tri-gram \u6a21\u578b\u7684\u5173\u7cfb\u4e3b\u8981\u662f\u57fa\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u5373\u524dn\u4e2a\u5355\u8bcd)\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e00\u822c n \u7684\u53d6\u503c\u4e3a\u591a\u5927\u624d\u597d\u5462\uff1f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u8fde\u7eed\u7684 n \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3\u53ef\u80fd\u4e0d\u8db3\u4ee5\u6355\u83b7\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u53e5\u5b50\uff08\u7c7b\u4f3c\u5b8c\u5f62\u586b\u7a7a\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff09 \u201cAsthe proctor started the clock, the students opened their ____\u201d\u3002\u5982\u679c\u7a97\u53e3\u53ea\u662f\u57fa\u4e8e\u524d\u9762\u7684\u4e09\u4e2a\u5355\u8bcd\u201cthe students opened their\u201d\uff0c\u90a3\u4e48\u6025\u4e8e\u8fd9\u4e9b\u8bed\u6599\u8ba1\u7b97\u7684\u4e0b\u5212\u7ebf\u4e2d\u6700\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u5c31\u662f\u4e3a\u201cbooks\u201d\u2014\u2014\u4f46\u662f\u5982\u679c n \u8db3\u591f\u5927\uff0c\u80fd\u5305\u62ec\u5168\u90e8\u7684\u4e0a\u4e0b\u6587\uff0c\u90a3\u4e48\u4e0b\u5212\u7ebf\u4e2d\u6700\u4f18\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u662f\u201cexam\u201d\u3002 \u8fd9\u5c31\u5f15\u51fa\u4e86 n-gram \u8bed\u8a00\u6a21\u578b\u7684\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a\u7a00\u758f\u6027\u548c\u5b58\u50a8\u3002 Sparsity problems with n-gram Language models n-gram \u8bed\u8a00\u6a21\u578b\u7684\u95ee\u9898\u6e90\u4e8e\u4e24\u4e2a\u95ee\u9898\u3002 \u9996\u5148\uff0c\u6ce8\u610f\u516c\u5f0f\u4e2d\u7684\u5206\u5b50\u3002\u5982\u679c \\(w_1,w_2.w_3\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c31\u662f 0\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u8ba1\u6570\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u5f88\u5c0f\u7684 \\(\\delta\\) \uff0c\u8fd9\u5c31\u662f\u5e73\u6ed1\u64cd\u4f5c\u3002 \u7136\u540e\uff0c\u8003\u8651\u516c\u5f0f\u4e2d\u7684\u5206\u6bcd\u3002 \u5982\u679c \\(w_1,w_2\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c06\u4f1a\u65e0\u6cd5\u8ba1\u7b97\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5\u53ea\u662f\u5355\u72ec\u8003\u8651 \\(w_2\\) \uff0c\u8fd9\u5c31\u662f\u201cbackoff\u201d\u64cd\u4f5c\u3002 \u589e\u52a0 n \u4f1a\u8ba9\u7a00\u758f\u95ee\u9898\u66f4\u52a0\u4e25\u91cd\uff0c\u6240\u4ee5\u4e00\u822c \\(n \\leq 5\\) \u3002 Storage problems with n-gram Language models \u6211\u4eec\u77e5\u9053\u9700\u8981\u5b58\u50a8\u5728\u8bed\u6599\u5e93\u4e2d\u770b\u5230\u7684\u6240\u6709 n-gram \u7684\u7edf\u8ba1\u6570\u3002\u968f\u7740 n \u7684\u589e\u52a0(\u6216\u8bed\u6599\u5e93\u5927\u5c0f\u7684\u589e\u52a0)\uff0c\u6a21\u578b\u7684\u5927\u5c0f\u4e5f\u4f1a\u589e\u52a0\u3002 1.3 Window-based Neural Language Model Bengio \u7684\u8bba\u6587\u300aA Neural Probabilistic Language Model\u300b\u4e2d\u9996\u6b21\u89e3\u51b3\u4e86\u4e0a\u9762\u6240\u8bf4\u7684\u201c\u7ef4\u5ea6\u707e\u96be\u201d\uff0c\u8fd9\u7bc7\u8bba\u6587\u63d0\u51fa\u4e00\u4e2a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5927\u89c4\u6a21\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e2a\u6a21\u578b\u80fd\u591f\u901a\u8fc7\u5b66\u4e60\u5355\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ee5\u53ca\u7528\u8fd9\u4e9b\u8868\u793a\u6765\u8868\u793a\u5355\u8bcd\u7684\u6982\u7387\u51fd\u6570\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u5bf9\u5e94\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u8f93\u5165\u5411\u91cf\u5728\u9690\u85cf\u5c42\u548c\u8f93\u51fa\u5c42\u4e2d\u90fd\u88ab\u4f7f\u7528\u3002 \u4e0b\u9762\u516c\u5f0f\u5c55\u793a\u4e86\u7531\u6807\u51c6 tanh \u51fd\u6570\uff08\u5373\u9690\u85cf\u5c42\uff09\u7ec4\u6210\u7684 softmax \u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u7ebf\u6027\u51fd\u6570 \\(W^{(3)} x+b^{(3)}\\) \uff0c\u6355\u83b7\u6240\u6709\u524d\u9762 n \u4e2a\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\[ \\hat{y}=\\operatorname{softmax}\\left(W^{(2)} \\tanh \\left(W^{(1)}x+b^{(1)}\\right)+W^{(3)} x+b^{(3)}\\right) \\] \u6ce8\u610f\u6743\u91cd\u77e9\u9635 \\(W^{(1)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\u4e0a\uff08\u4e0a\u56fe\u4e2d\u7684\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\uff0c \\(W^{(2)}\\) \u662f\u5e94\u7528\u5728\u9690\u85cf\u5c42\uff08\u4e5f\u662f\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\u548c \\(W^{(3)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\uff08\u7eff\u8272\u865a\u7ebf\u7bad\u5934\uff09\u3002 \u8fd9\u4e2a\u6a21\u578b\u7684\u7b80\u5316\u7248\u672c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u84dd\u8272\u7684\u5c42\u8868\u793a\u8f93\u5165\u5355\u8bcd\u7684 embedding \u62fc\u63a5\uff1a \\(e=\\left[e^{(1)} ; e^{(2)} ; e^{(3)} ; e^{(4)}\\right]\\) \uff0c\u7ea2\u8272\u7684\u5c42\u8868\u793a\u9690\u85cf\u5c42\uff1a \\(\\boldsymbol{h}=f\\left(\\boldsymbol{W} e+\\boldsymbol{b}_{1}\\right)\\) \uff0c\u7eff\u8272\u7684\u8f93\u51fa\u5206\u5e03\u662f\u5bf9\u8bcd\u8868\u7684\u4e00\u4e2a softmax \u6982\u7387\u5206\u5e03\uff1a \\(\\hat{y}=\\operatorname{softmax}\\left(U h+b_{2}\\right)\\) \u3002 2 Recurrent Neural Networks (RNN) \u00b6 \u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u53ea\u80fd\u4ee5\u6709\u9650\u7a97\u53e3\u5927\u5c0f\u7684\u524d n \u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\uff0c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0e\u5176\u4e0d\u540c\uff0cRNN \u6709\u80fd\u529b\u4ee5\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u524d\u9762\u7684\u5355\u8bcd\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\u3002 \u4e0b\u56fe\u5c55\u793a\u7684 RNN \u7684\u67b6\u6784\uff0c\u5176\u4e2d\u77e9\u5f62\u6846\u662f\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u4e00\u4e2a\u9690\u85cf\u5c42 t\u3002 \u6bcf\u4e2a\u8fd9\u6837\u7684\u9690\u85cf\u5c42\u90fd\u6709\u82e5\u5e72\u4e2a\u795e\u7ecf\u5143\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u5bf9\u8f93\u5165\u5411\u91cf\u7528\u4e00\u4e2a\u7ebf\u6027\u77e9\u9635\u8fd0\u7b97\u7136\u540e\u901a\u8fc7\u975e\u7ebf\u6027\u53d8\u5316\uff08\u4f8b\u5982 tanh \u51fd\u6570\uff09\u5f97\u5230\u8f93\u51fa\u3002\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u9690\u85cf\u5c42\u90fd\u6709\u4e24\u4e2a\u8f93\u5165\uff1a\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \uff0c\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u901a\u8fc7\u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hh)}\\) \u76f8\u4e58\u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hx)}\\) \u76f8\u4e58\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_t\\) \uff0c\u7136\u540e\u518d\u5c06 \\(h_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(S)}\\) \u76f8\u4e58\uff0c\u63a5\u7740\u5bf9\u6574\u4e2a\u8bcd\u8868\u901a\u8fc7 softmax \u8ba1\u7b97\u5f97\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u9884\u6d4b\u7ed3\u679c \\(\\hat y\\) \uff0c\u5982\u4e0b\u9762\u516c\u5f0f\u6240\u793a\uff1a \\[ \\begin{aligned} h_{t} &=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{[t]}\\right) \\\\ \\hat{y} &=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right) \\end{aligned} \\] \u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u662f\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd \\(W^{(hh)}\\) \u548c \\(W^{(hx)}\\) \u3002\u8fd9\u6837\u6a21\u578b\u9700\u8981\u5b66\u4e60\u7684\u53c2\u6570\u5c31\u53d8\u5c11\u4e86\uff0c\u8fd9\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6\u65e0\u5173\u2014\u2014\u8fd9\u4ece\u800c\u89e3\u51b3\u4e86\u7ef4\u5ea6\u707e\u96be\u3002 \u4ee5\u4e0b\u662f\u7f51\u7edc\u4e2d\u6bcf\u4e2a\u53c2\u6570\u76f8\u5173\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \\(x_{1}, \\dots, x_{t-1}, x_{t}, x_{t+1}, \\dots x_{T}\\) \uff1a\u542b\u6709 T \u4e2a\u5355\u8bcd\u7684\u8bed\u6599\u5e93\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \\(h_{t}=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)\\) \uff1a\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa\u7279\u5f81\u7684\u8ba1\u7b97\u5173\u7cfb \\(x_{t} \\in \\mathbb{R}^{d}\\) \uff1a\u5728\u65f6\u95f4\u6b65 t \u7684\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\(W^{h x} \\in \\mathbb{R}^{D_{h} \\times d}\\) \uff1a\u8f93\u5165\u8bcd\u5411\u91cf \\(x_t\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(W^{h h} \\in \\mathbb{R}^{D_{h} \\times D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa \\(h_{t-1}\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(h_{t-1} \\in \\mathbb{R}^{D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65 t-1 \u7684\u975e\u7ebf\u6027\u51fd\u6570\u8f93\u51fa\u3002 \\(h_{0} \\in \\mathbb{R}^{D_{h}}\\) \u662f\u5728\u65f6\u95f4\u6b65 t=0 \u7684\u9690\u85cf\u5c42\u7684\u4e00\u4e2a\u521d\u59cb\u5316\u5411\u91cf\u3002 \\(\\sigma\\) \uff1a\u975e\u7ebf\u6027\u51fd\u6570\uff08\u8fd9\u91cc\u662f sigmoid \u51fd\u6570\uff09\u3002 \\(\\hat{y}=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right)\\) \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\u8f93\u51fa\u3002\u672c\u8d28\u4e0a\uff0c \\(\\hat y\\) \u662f\u7ed9\u5b9a\u6587\u6863\u4e0a\u4e0b\u6587\u5206\u6570\uff08\u4f8b\u5982 \\(h_{t-1}\\) \uff09\u548c\u6700\u540e\u89c2\u6d4b\u7684\u8bcd\u5411\u91cf \\(x_t\\) \uff0c\u5bf9\u4e00\u4e2a\u51fa\u73b0\u5355\u8bcd\u7684\u9884\u6d4b\u3002\u8fd9\u91cc\uff0c \\(W^{(S)} \\in \\mathbb{R}^{|V| \\times D_{h}}\\) \uff0c \\(\\hat{y} \\in \\mathbb{R}^{|V|}\\) \uff0c\u5176\u4e2d \\(|V|\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002 \u4e00\u4e2a RNN \u8bed\u8a00\u6a21\u578b\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\u3002\u4e0b\u56fe\u4e2d\u7684\u7b26\u53f7\u6709\u4e00\u4e9b\u7684\u4e0d\u540c\uff1a \\(W_h\\) \u7b49\u540c\u4e8e \\(W^{(hh)}\\) \uff0c \\(W_e\\) \u7b49\u540c\u4e8e \\(W^{(hx)}\\) \uff0c \\(U\\) \u7b49\u540c\u4e8e \\(W^{(S)}\\) \u3002 \\(E\\) \u8868\u793a\u5355\u8bcd\u8f93\u5165 \\(x^{(t)}\\) \u8f6c\u5316\u4e3a \\(e^{(t)}\\) \u3002 \u5728 RNN \u4e2d\u5e38\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u5728\u4e4b\u524d\u4ecb\u7ecd\u8fc7\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002\u4e0b\u9762\u7684\u516c\u5f0f\u662f\u8fd9\u4e2a\u51fd\u6570\u5728\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6c42\u548c\u3002\u6700\u540e\u8ba1\u7b97\u8bcd\u8868\u4e2d\u7684 softmax \u8ba1\u7b97\u7ed3\u679c\u5c55\u793a\u4e86\u57fa\u4e8e\u524d\u9762\u6240\u6709\u7684\u5355\u8bcd\u5bf9\u8f93\u51fa\u5355\u8bcd \\(x^{(5)}\\) \u7684\u4e0d\u540c\u9009\u62e9\u7684\u6982\u7387\u5206\u5e03\u3002\u8fd9\u65f6\u7684\u8f93\u5165\u53ef\u4ee5\u6bd4 4 \u5230 5 \u4e2a\u5355\u8bcd\u66f4\u957f\u3002 2.1 RNN Loss and Perplexity RNN \u7684\u635f\u5931\u51fd\u6570\u4e00\u822c\u662f\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002 \\[ J^{(t)}(\\theta)=\\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] \u5728\u5927\u5c0f\u4e3a T \u7684\u8bed\u6599\u5e93\u4e0a\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \\[ J=-\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] 2.2 Advantages, Disadvantages and Applications of RNNs RNN \u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u5b83\u53ef\u4ee5\u5904\u7406\u4efb\u610f\u957f\u5ea6\u7684\u5e8f\u5217 \u5bf9\u66f4\u957f\u7684\u8f93\u5165\u5e8f\u5217\u4e0d\u4f1a\u589e\u52a0\u6a21\u578b\u7684\u53c2\u6570\u5927\u5c0f \u5bf9\u65f6\u95f4\u6b65 t \u7684\u8ba1\u7b97\u7406\u8bba\u4e0a\u53ef\u4ee5\u5229\u7528\u524d\u9762\u5f88\u591a\u65f6\u95f4\u6b65\u7684\u4fe1\u606f \u5bf9\u8f93\u5165\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709\u5bf9\u79f0\u6027 \u4f46\u662f RNN \u4e5f\u6709\u4ee5\u4e0b\u7f3a\u70b9\uff1a \u8ba1\u7b97\u901f\u5ea6\u5f88\u6162\u2014\u2014\u56e0\u4e3a\u5b83\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u9700\u8981\u4f9d\u8d56\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u6240\u4ee5\u4e0d\u80fd\u5e76\u884c\u5316 \u5728\u5b9e\u9645\u4e2d\u56e0\u4e3a\u68af\u5ea6\u6d88\u5931\u548c\u68af\u5ea6\u7206\u70b8\uff0c\u5f88\u96be\u5229\u7528\u5230\u524d\u9762\u65f6\u95f4\u6b65\u7684\u4fe1\u606f\u3002 \u8fd0\u884c\u4e00\u5c42 RNN \u6240\u9700\u7684\u5185\u5b58\u91cf\u4e0e\u8bed\u6599\u5e93\u4e2d\u7684\u5355\u8bcd\u6570\u6210\u6b63\u6bd4\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u53e5\u5b50\u662f\u4e3a\u4e00\u4e2a mini batch\uff0c\u90a3\u4e48\u4e00\u4e2a\u6709 k \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u5728\u5185\u5b58\u4e2d\u5c31\u4f1a\u5360\u7528 k \u4e2a\u8bcd\u5411\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u540c\u65f6\uff0cRNN \u5fc5\u987b\u7ef4\u6301\u4e24\u5bf9 \\(W\\) \u548c \\(b\\) \u77e9\u9635\u3002\u7136\u800c \\(W\\) \u7684\u53ef\u80fd\u662f\u975e\u5e38\u5927\u7684\uff0c\u5b83\u7684\u5927\u5c0f\u4e0d\u4f1a\u968f\u7740\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u800c\u53d8\u5316\uff08\u4e0e\u4f20\u7edf\u7684\u8bed\u8a00\u6a21\u578b\u4e0d\u4e00\u6837\uff09\u3002\u5bf9\u4e8e\u5177\u6709 1000 \u4e2a\u5faa\u73af\u5c42\u7684 RNN\uff0c\u77e9\u9635 \\(W\\) \u7684\u5927\u5c0f\u4e3a \\(1000 \\times 1000\\) \u800c\u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u65e0\u5173\u3002 RNN \u53ef\u4ee5\u5e94\u7528\u5728\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u6807\u6ce8\u4efb\u52a1\uff08\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff09\uff0c\u53e5\u5b50\u5206\u7c7b\uff08\u60c5\u611f\u5206\u7c7b\uff09\uff0c\u7f16\u7801\u6a21\u5757\uff08\u95ee\u7b54\u4efb\u52a1\uff0c\u673a\u5668\u7ffb\u8bd1\u548c\u5176\u4ed6\u5f88\u591a\u4efb\u52a1\uff09\u3002\u5728\u540e\u9762\u7684\u4e24\u4e2a\u4efb\u52a1\uff0c\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u5bf9\u53e5\u5b50\u7684\u8868\u793a\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u91c7\u7528\u8be5\u53e5\u5b50\u4e2d\u65f6\u95f4\u6b65\u957f\u7684\u6240\u6709\u9690\u85cf\u72b6\u6001\u7684 \\(element-wise\\) \u7684\u6700\u5927\u503c\u6216\u5e73\u5747\u503c\u6765\u83b7\u5f97\u3002 \u4e0b\u56fe\u662f\u4e00\u4e9b\u51fa\u7248\u7269\u4e2d\u5bf9 RNN \u6a21\u578b\u7684\u53e6\u5916\u4e00\u79cd\u8868\u793a\u3002\u5b83\u5c06 RNN \u7684\u6bcf\u4e2a\u9690\u5c42\u7528\u4e00\u4e2a\u73af\u6765\u8868\u793a\u3002 2.3 Vanishing Gradient & Gradient Explosion Problems RNN \u4ece\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f20\u64ad\u6743\u503c\u77e9\u9635\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u3002\u56de\u60f3\u4e00\u4e0b\uff0cRNN \u5b9e\u73b0\u7684\u76ee\u6807\u662f\u901a\u8fc7\u957f\u8ddd\u79bb\u7684\u65f6\u95f4\u6b65\u6765\u4f20\u64ad\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u4e24\u4e2a\u53e5\u5b50\uff1a \u5bf9\u4e0a\u9762\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u6839\u636e\u4e0a\u4e0b\u6587\uff0c\u90fd\u53ef\u4ee5\u77e5\u9053\u7a7a\u767d\u5904\u7684\u7b54\u6848\u662f\u201cJohn\u201d,\u7b2c\u4e8c\u4e2a\u5728\u4e24\u4e2a\u53e5\u5b50\u7684\u4e0a\u4e0b\u6587\u4e2d\u5747\u63d0\u53ca\u4e86\u597d\u51e0\u6b21\u7684\u4eba\u3002\u8fc4\u4eca\u4e3a\u6b62\u6211\u4eec\u5bf9 RNN \u7684\u4e86\u89e3\uff0c\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0cRNN \u4e5f\u662f\u80fd\u591f\u8ba1\u7b97\u5f97\u5230\u6b63\u786e\u7684\u7b54\u6848\u3002\u7136\u800c\uff0c\u5728\u5b9e\u9645\u4e2d\uff0cRNN \u9884\u6d4b\u53e5\u5b50\u4e2d\u7684\u7a7a\u767d\u5904\u7b54\u6848\u6b63\u786e\u53ef\u80fd\u6027\uff0c\u7b2c\u4e00\u53e5\u8981\u6bd4\u7b2c\u4e8c\u53e5\u9ad8\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u53cd\u5411\u4f20\u64ad\u7684\u9636\u6bb5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u524d\u9762\u65f6\u95f4\u6b65\u4e2d\u56de\u4f20\u8fc7\u6765\u7684\u68af\u5ea6\u503c\u4f1a\u9010\u6e10\u6d88\u5931\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u957f\u53e5\u5b50\uff0c\u9884\u6d4b\u5230\u201cJohn\u201d\u662f\u7a7a\u767d\u5904\u7684\u7b54\u6848\u7684\u6982\u7387\u4f1a\u968f\u7740\u4e0a\u4e0b\u6587\u4fe1\u606f\u589e\u5927\u800c\u51cf\u5c11\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u8ba8\u8bba\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u80cc\u540e\u7684\u6570\u5b66\u539f\u56e0\u3002 \u8003\u8651\u516c\u5f0f\u5728\u65f6\u95f4\u6b65 t \uff0c\u8ba1\u7b97 RNN \u8bef\u5dee \\(\\frac{dE}{dW}\\) \uff0c\u7136\u540e\u6211\u4eec\u628a\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u8bef\u5dee\u90fd\u52a0\u8d77\u6765\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ba1\u7b97\u5e76\u7d2f\u79ef\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f t \u7684 \\( \\(\\frac{dE_t}{dW}\\) \\) \u3002 \\[ \\frac{\\partial E}{\\partial W}=\\sum_{i=1}^{T} \\frac{\\partial E_{t}}{\\partial W} \\] \u901a\u8fc7\u5c06\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u5e94\u7528\u4e8e\u516c\u5f0f (6) \u548c (5) \u6765\u8ba1\u7b97\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u8bef\u5dee\uff1b\u516c\u5f0f (11) \u5c55\u793a\u5bf9\u5e94\u7684\u5fae\u5206\u8ba1\u7b97\u3002\u6ce8\u610f \\(\\frac{d h_{t}}{d h_{k}}\\) \u662f \\(h_t\\) \u5bf9\u4e4b\u524d\u6240\u6709\u7684 k \u4e2a\u65f6\u95f4\u6b65\u7684\u504f\u5bfc\u6570\u3002 \\[ \\frac{\\partial E_{t}}{\\partial W}=\\sum_{k=1}^{T} \\frac{\\partial E_{t}}{\\partial y_{t}} \\frac{\\partial y_{t}}{\\partial h_{t}} \\frac{\\partial h_{t}}{\\partial h_{k}} \\frac{\\partial h_{k}}{\\partial W} \\] \u4e0b\u5f0f \u5c55\u793a\u4e86\u8ba1\u7b97\u6bcf\u4e2a \\(\\frac{d h_{t}}{d h_{k}}\\) \u7684\u5173\u7cfb\uff1b\u8fd9\u662f\u5728\u65f6\u95f4\u95f4\u9694 \\([k,t]\\) \u5185\u5bf9\u6240\u6709\u7684\u9690\u85cf\u5c42\u7684\u5e94\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u3002 \\[ \\frac{\\partial h_{t}}{\\partial h_{k}}=\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}=\\prod_{j=k+1}^{t} W^{T} \\times \\operatorname{diag}\\left[f^{\\prime}\\left(j_{j-1}\\right)\\right] \\] \u56e0\u4e3a \\(h \\in \\mathbb{R}^{D_{n}}\\) \uff0c\u6bcf\u4e2a \\(\\frac{\\partial h_{j}}{\\partial h_{j-1}}\\) \u662f h \u7684 Jacobian \u77e9\u9635\u7684\u5143\u7d20\uff1a \\[ \\frac{\\partial h_{j}}{\\partial h_{j-1}}=\\left[\\frac{\\partial h_{j}}{\\partial h_{j-1,1}} \\cdots \\frac{\\partial h_{j}}{\\partial h_{j-1, D_{n}}}\\right]=\\left[\\begin{array}{ccc}{\\frac{\\partial h_{j, 1}}{\\partial h_{j-1,1}}} & {\\cdots} & {\\frac{\\partial h_{j,1}}{\\partial h_{j-1, D_{n}}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial h_{j, D_{n}}}{\\partial h_{j - 1,1}}} & {\\cdots} & {\\frac{\\partial h_{j, D_{n}}}{\\partial h_{j-1, D_{n}}}}\\end{array}\\right] \\] \u5c06\u516c\u5f0f\u5408\u8d77\u6765\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u5173\u7cfb\u3002 \\[ \\frac{\\partial E}{\\partial W}=\\sum_{t=1}^{T} \\sum_{k=1}^{t} \\frac{\\partial E_{t}}{\\partial y_{t}} \\frac{\\partial y_{t}}{\\partial h_{t}}\\left(\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right) \\frac{\\partial h_{k}}{\\partial W} \\] \u4e0b\u5f0f\u5c55\u793a\u4e86 Jacobian \u77e9\u9635\u7684\u8303\u6570\u3002\u8fd9\u91cc\u7684 \\(\\beta_{W}\\) \u548c \\(\\beta_{h}\\) \u662f\u8fd9\u4e24\u4e2a\u77e9\u9635\u8303\u6570\u7684\u4e0a\u754c\u503c\u3002\u56e0\u6b64\u901a\u8fc7\u516c\u5f0f\u6240\u793a\u7684\u5173\u7cfb\u8ba1\u7b97\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u90e8\u5206\u68af\u5ea6\u8303\u6570\u3002 \\[ \\left\\|\\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right\\| \\leq\\left\\|W^{T}\\right\\|\\left\\|\\operatorname{diag}\\left[f^{\\prime}\\left(h_{j-1}\\right)\\right]\\right\\| \\leq \\beta_{W} \\beta_{h} \\] \u8ba1\u7b97\u8fd9\u4e24\u4e2a\u77e9\u9635\u7684 L2 \u8303\u6570\u3002\u5728\u7ed9\u5b9a\u7684\u975e\u7ebf\u6027\u51fd\u6570 sigmoid \u4e0b\uff0c \\(f^{\\prime}\\left(h_{j-1}\\right)\\) \u7684\u8303\u6570\u53ea\u80fd\u7b49\u4e8e 1\u3002 \\[ \\left\\|\\frac{\\partial h_{t}}{\\partial h_{k}}\\right\\|=\\left\\|\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right\\| \\leq\\left(\\beta_{W} \\beta_{h}\\right)^{t-k} \\] \u5f53 \\(t - k\\) \u8db3\u591f\u5927\u548c \\(\\beta_{W} \\beta_{h}\\) \u8fdc\u8fdc\u5c0f\u4e8e 1 \u6216\u8005\u8fdc\u8fdc\u5927\u4e8e 1\uff0c\u6307\u6570\u9879 \\(\\left(\\beta_{W} \\beta_{h}\\right)^{t-k}\\) \u7684\u503c\u5c31\u5f88\u5bb9\u6613\u53d8\u5f97\u975e\u5e38\u5c0f\u6216\u8005\u975e\u5e38\u5927\u3002\u7531\u4e8e\u5355\u8bcd\u4e4b\u95f4\u7684\u8ddd\u79bb\u8fc7\u5927\uff0c\u7528\u4e00\u4e2a\u5f88\u5927\u7684 \\(t-k\\) \u8bc4\u4f30\u4ea4\u53c9\u71b5\u8bef\u5dee\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u5728\u53cd\u5411\u4f20\u64ad\u7684\u65e9\u671f\u5c31\u51fa\u73b0\u68af\u5ea6\u6d88\u5931\uff0c\u90a3\u4e48\u8fdc\u5904\u5355\u8bcd\u5bf9\u5728\u65f6\u95f4\u6b65\u957f t \u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u4e2d\uff0c\u6240\u8d77\u5230\u7684\u4f5c\u7528\u5c31\u4f1a\u53d8\u5f97\u5f88\u5c0f\u3002 \u5728\u5b9e\u9a8c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u65e6\u68af\u5ea6\u7684\u503c\u53d8\u5f97\u975e\u5e38\u5927\uff0c\u4f1a\u5bfc\u81f4\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5bb9\u6613\u68c0\u6d4b\u5230\u5176\u5f15\u8d77\u7684\u6ea2\u51fa\uff08\u5373 NaN\uff09\uff1b\u8fd9\u6837\u7684\u95ee\u9898\u79f0\u4e3a\u68af\u5ea6\u7206\u70b8\u95ee\u9898\u3002\u7136\u800c\uff0c\u5f53\u68af\u5ea6\u63a5\u8fd1\u4e3a 0 \u7684\u65f6\u5019\uff0c\u68af\u5ea6\u8fd1\u4e4e\u4e0d\u518d\u5b58\u5728\uff0c\u540c\u65f6\u964d\u4f4e\u6a21\u578b\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u8fdc\u8ddd\u79bb\u7684\u5355\u8bcd\u7684\u5b66\u4e60\u8d28\u91cf\uff1b\u8fd9\u6837\u7684\u95ee\u9898\u79f0\u4e3a\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002\u5982\u679c\u76f8\u5bf9\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u7684\u6709\u66f4\u76f4\u89c2\u7684\u4e86\u89e3\uff0c\u4f60\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a \u6837\u4f8b\u7f51\u7ad9 \u3002 2.4 Solution to the Exploding & Vanishing Gradients \u73b0\u5728\u6211\u4eec\u77e5\u9053\u4e86\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u7684\u672c\u8d28\u4ee5\u53ca\u5b83\u5728\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u4e2d\u5982\u4f55\u8868\u73b0\u51fa\u6765\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e9b\u7b80\u5355\u5b9e\u7528\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002 \u4e3a\u4e86\u89e3\u51b3\u68af\u5ea6\u7206\u70b8\u7684\u95ee\u9898\uff0cThomas Mikolov \u7b49\u4eba\u9996\u5148\u63d0\u51fa\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u6bcf\u5f53\u68af\u5ea6\u5927\u4e8e\u4e00\u4e2a\u9608\u503c\u7684\u65f6\u5019\uff0c\u5c06\u5176\u622a\u65ad\u4e3a\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\uff0c\u5177\u4f53\u5982\u4e0b\u9762\u7b97\u6cd5\u4e2d\u7684\u4f2a\u4ee3\u7801\u6240\u793a\u3002 \u4e0b\u56fe\u53ef\u89c6\u5316\u4e86\u68af\u5ea6\u622a\u65ad\u7684\u6548\u679c\u3002\u5b83\u5c55\u793a\u4e86\u4e00\u4e2a\u6743\u503c\u77e9\u9635\u4e3a \\(W\\) \u548c\u504f\u7f6e\u9879\u4e3a \\(b\\) \u7684\u5f88\u5c0f\u7684 RNN \u795e\u7ecf\u7f51\u7edc\u7684\u51b3\u7b56\u754c\u9762\u3002\u8be5\u6a21\u578b\u7531\u4e00\u4e2a\u5355\u4e00\u5355\u5143\u7684\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7ec4\u6210\uff0c\u5728\u5c11\u91cf\u7684\u65f6\u95f4\u6b65\u957f\u4e0a\u8fd0\u884c\uff1b\u5b9e\u5fc3\u7bad\u5934\u9610\u8ff0\u4e86\u5728\u6bcf\u4e2a\u68af\u5ea6\u4e0b\u964d\u6b65\u9aa4\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002\u5f53\u5728\u68af\u5ea6\u4e0b\u964d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6a21\u578b\u78b0\u5230\u76ee\u6807\u51fd\u6570\u4e2d\u7684\u9ad8\u8bef\u5dee\u58c1\u65f6\uff0c\u68af\u5ea6\u88ab\u63a8\u5230\u51b3\u7b56\u9762\u4e0a\u7684\u4e00\u4e2a\u9065\u8fdc\u7684\u4f4d\u7f6e\u3002\u622a\u65ad\u6a21\u578b\u751f\u6210\u4e86\u865a\u7ebf\uff0c\u5728\u90a3\u91cc\u5b83\u5c06\u8bef\u5dee\u68af\u5ea6\u62c9\u56de\u5230\u9760\u8fd1\u539f\u59cb\u68af\u5ea6\u7684\u5730\u65b9\u3002 \u4e3a\u4e86\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e24\u4e2a\u6280\u672f\u3002\u7b2c\u4e00\u4e2a\u6280\u672f\u662f\u4e0d\u53bb\u968f\u673a\u521d\u59cb\u5316 \\(W^{(hh)}\\) \uff0c\u800c\u662f\u521d\u59cb\u5316\u4e3a\u5355\u4f4d\u77e9\u9635\u3002 \u7b2c\u4e8c\u4e2a\u6280\u672f\u662f\u4f7f\u7528 Rectified Linear\uff08ReLU\uff09\u5355\u5143\u4ee3\u66ff sigmoid \u51fd\u6570\u3002ReLU \u7684\u5bfc\u6570\u662f 0 \u6216\u8005 1\u3002\u8fd9\u6837\u68af\u5ea6\u4f20\u56de\u795e\u7ecf\u5143\u7684\u5bfc\u6570\u662f 1\uff0c\u800c\u4e0d\u4f1a\u5728\u53cd\u5411\u4f20\u64ad\u4e86\u4e00\u5b9a\u7684\u65f6\u95f4\u6b65\u540e\u68af\u5ea6\u53d8\u5c0f\u3002 2.5 Deep Bidirectional RNNs \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u7528 RNN \u5982\u4f55\u4f7f\u7528\u8fc7\u53bb\u7684\u8bcd\u6765\u9884\u6d4b\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u540c\u7406\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee4 RNN \u6a21\u578b\u5411\u53cd\u5411\u8bfb\u53d6\u8bed\u6599\u5e93\uff0c\u6839\u636e\u672a\u6765\u5355\u8bcd\u8fdb\u884c\u9884\u6d4b\u3002Irsoy \u7b49\u4eba\u5c55\u793a\u4e86\u4e00\u4e2a\u53cc\u5411\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\uff1b\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t\uff0c\u8fd9\u4e2a\u7f51\u7edc\u7ef4\u6301\u4e24\u4e2a\u9690\u85cf\u5c42\uff0c\u4e00\u4e2a\u662f\u4ece\u5de6\u5230\u53f3\u4f20\u64ad\u800c\u53e6\u5916\u4e00\u4e2a\u662f\u4ece\u53f3\u5230\u5de6\u4f20\u64ad\u3002\u4e3a\u4e86\u5728\u4efb\u4f55\u65f6\u5019\u7ef4\u6301\u4e24\u4e2a\u9690\u85cf\u5c42\uff0c\u8be5\u7f51\u7edc\u8981\u6d88\u8017\u7684\u4e24\u500d\u5b58\u50a8\u7a7a\u95f4\u6765\u5b58\u50a8\u6743\u503c\u548c\u504f\u7f6e\u53c2\u6570\u3002\u6700\u540e\u7684\u5206\u7c7b\u7ed3\u679c \\(\\hat y\\) \uff0c\u662f\u7ed3\u5408\u7531\u4e24\u4e2a RNN \u9690\u85cf\u5c42\u751f\u6210\u7684\u7ed3\u679c\u5f97\u5206\u4ea7\u751f\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u53cc\u5411 RNN \u7684\u7f51\u7edc\u7ed3\u6784\u3002 \u800c\u4e0b\u5f0f\u5c55\u793a\u4e86\u7ed9\u51fa\u4e86\u5efa\u7acb\u53cc\u5411RNN\u9690\u5c42\u7684\u6570\u5b66\u516c\u5f0f\u3002\u4e24\u4e2a\u516c\u5f0f\u4e4b\u95f4\u552f\u4e00\u7684\u533a\u522b\u662f\u9012\u5f52\u8bfb\u53d6\u8bed\u6599\u5e93\u7684\u65b9\u5411\u4e0d\u540c\u3002\u6700\u540e\u4e00\u884c\u5c55\u793a\u4e86\u901a\u8fc7\u603b\u7ed3\u8fc7\u53bb\u548c\u5c06\u6765\u7684\u5355\u8bcd\u8868\u793a\uff0c\u663e\u793a\u7528\u4e8e\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5206\u7c7b\u5173\u7cfb\u3002 \\[ \\overrightarrow{h}_{t}=f\\left(\\overrightarrow{W} x_{t}+\\overrightarrow{V} \\overrightarrow{h}_{t-1}+\\overrightarrow{b}\\right) \\\\ \\overleftarrow{h}_{t}=f\\left(\\overleftarrow{W} x_{t}+\\overleftarrow{V} \\overleftarrow{h}_{t-1}+\\overleftarrow{b}\\right) \\\\ \\hat{y}_{t}=g\\left(U h_{t}+c\\right)=g\\left(U\\left[\\overrightarrow{h}_{t} ; \\overleftarrow{h}_{t}\\right]+c\\right) \\] RNN\u4e5f\u53ef\u4ee5\u662f\u591a\u5c42\u7684\u3002\u4e0b\u56fe\u5c55\u793a\u4e00\u4e2a\u591a\u5c42\u7684\u53cc\u5411 RNN\uff0c\u5176\u4e2d\u4e0b\u9762\u7684\u9690\u85cf\u5c42\u4f20\u64ad\u5230\u4e0b\u4e00\u5c42\u3002\u5982\u56fe\u6240\u793a\uff0c\u5728\u8be5\u7f51\u7edc\u67b6\u6784\u4e2d\uff0c\u5728\u65f6\u95f4\u6b65 t\uff0c\u6bcf\u4e2a\u4e2d\u95f4\u795e\u7ecf\u5143\u4ece\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\uff08\u5728\u76f8\u540c\u7684 RNN \u5c42\uff09\u63a5\u6536\u4e00\u7ec4\u53c2\u6570\u548c\u524d\u4e00\u4e2a RNN \u9690\u85cf\u5c42\u7684\u4e24\u7ec4\u53c2\u6570\uff1b\u8fd9\u4e24\u7ec4\u53c2\u6570\u4e00\u7ec4\u662f\u4ece\u5de6\u5230\u53f3\u7684 RNN \u8f93\u5165\uff0c\u53e6\u5916\u4e00\u7ec4\u662f\u4ece\u53f3\u5230\u5de6\u7684 RNN \u8f93\u5165\u3002 \u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a L \u5c42\u7684\u6df1\u5ea6 RNN\uff0c\u4e0a\u8ff0\u7684\u5173\u7cfb\u8981\u4fee\u6539\u4e3a\u5728\u516c\u5f0f\u4e2d\u7684\u5173\u7cfb\uff0c\u5176\u4e2d\u5728\u7b2c \\(i\\) \u5c42\u7684\u6bcf\u4e2a\u4e2d\u95f4\u795e\u7ecf\u5143\u7684\u8f93\u5165\u662f\u5728\u76f8\u540c\u65f6\u95f4\u6b65 t \u7684 RNN \u7b2c \\(i-1\\) \u5c42\u7684\u8f93\u51fa\u3002\u6700\u540e\u7684\u8f93\u51fa \\(\\hat y\\) \uff0c\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u662f\u8f93\u5165\u53c2\u6570\u901a\u8fc7\u6240\u6709\u9690\u5c42\u4f20\u64ad\u7684\u7ed3\u679c\u3002 \\[ \\overrightarrow{h}_{t}^{(i)}=f\\left(\\overrightarrow{W}^{(i)} h_{t}+\\overrightarrow{V} \\overrightarrow{h}_{t-1}+\\overrightarrow{b}\\right) \\\\ \\overleftarrow{h}_{t}=f\\left(\\overleftarrow{W} x_{t}+\\overleftarrow{V} \\overleftarrow{h}_{t-1}+\\overleftarrow{b}\\right) \\\\ \\hat{y}_{t}=g\\left(U h_{t}+c\\right)=g\\left(U\\left[\\overrightarrow{h}_{t} ; \\overleftarrow{h}_{t}\\right]+c\\right) \\] 2.6 Application: RNN Translation Model \u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u662f\u975e\u5e38\u590d\u6742\u7684\uff1a\u5b83\u4eec\u5305\u542b\u5f88\u591a\u5e94\u7528\u5728\u8bed\u8a00\u7ffb\u8bd1\u6d41\u7a0b\u7684\u4e0d\u540c\u9636\u6bb5\u7684\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u91c7\u7528 RNN \u4f5c\u4e3a\u4f20\u7edf\u7ffb\u8bd1\u6a21\u578b\u7684\u66ff\u4ee3\u65b9\u6cd5\u7684\u6f5c\u529b\u3002\u8003\u8651\u4e0b\u56fe\u4e2d\u5c55\u793a\u7684 RNN \u6a21\u578b\uff1b\u5176\u4e2d\u5fb7\u8bed\u77ed\u8bed Echt dicke Kiste \u7ffb\u8bd1\u4e3a Awesome sauce\u3002 \u9996\u5148\uff0c\u524d\u4e09\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \u7f16\u7801 \u5fb7\u8bed\u5355\u8bcd\u4e3a\u4e00\u4e9b\u8bed\u8a00\u7684\u5355\u8bcd\u7279\u5f81\uff08 \\(h_3\\) \uff09\u3002\u540e\u9762\u4e24\u4e2a\u65f6\u95f4\u6b65\u89e3\u7801 \\(h_3\\) \u4e3a\u82f1\u8bed\u5355\u8bcd\u8f93\u51fa\u3002\u4e0b\u5f0f\u5206\u522b\u5c55\u793a\u4e86\u7f16\u7801\u9636\u6bb5\u548c\u89e3\u7801\u9636\u6bb5(\u540e\u4e24\u884c)\u3002 \\[ \\begin{array}{c}{h_{t}=\\phi\\left(h_{t-1}, x_{t}\\right)=f\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)} \\\\ {h_{t}=\\phi\\left(h_{t-1}\\right)=f\\left(W^{(h h)} h_{t-1}\\right)} \\\\ {y_{t}=\\operatorname{softmax}\\left(W^{(s)} h_{t}\\right)}\\end{array} \\] \u4e00\u822c\u53ef\u4ee5\u8ba4\u4e3a\u4f7f\u7528\u4ea4\u53c9\u71b5\u51fd\u6570\u7684 RNN \u6a21\u578b\u53ef\u4ee5\u751f\u6210\u9ad8\u7cbe\u5ea6\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u5728\u6a21\u578b\u4e2d\u589e\u52a0\u4e00\u4e9b\u6269\u5c55\u65b9\u6cd5\u53ef\u4ee5\u63d0\u5347\u7ffb\u8bd1\u7684\u51c6\u786e\u5ea6\u8868\u73b0\u3002 \\[ \\max _{\\theta} \\frac{1}{N} \\sum_{n=1}^{N} \\log p_{\\theta}\\left(y^{(n)} | x^{(n)}\\right) \\] \u6269\u5c55 1 \uff1a\u5728\u8bad\u7ec3 RNN \u7684\u7f16\u7801\u548c\u89e3\u7801\u9636\u6bb5\u65f6\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u6743\u503c\u3002\u8fd9\u4f7f\u4e24\u4e2a\u5355\u5143\u89e3\u8026\uff0c\u8ba9\u4e24\u4e2a RNN \u6a21\u5757\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8fdb\u884c\u66f4\u7cbe\u786e\u7684\u9884\u6d4b\u3002\u8fd9\u610f\u5473\u7740\u5728\u516c\u5f0f (23) \u548c (24) \u5728 \\(\\phi( )\\) \u51fd\u6570\u4e2d\u662f\u4f7f\u7528\u4e0d\u540c\u7684 \\(W^{(hh)}\\) \u77e9\u9635\u3002 \u6269\u5c55 2 \uff1a\u4f7f\u7528\u4e09\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\u8ba1\u7b97\u89e3\u7801\u5668\u4e2d\u7684\u6bcf\u4e2a\u9690\u85cf\u72b6\u6001 \u524d\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \uff08\u6807\u51c6\u7684\uff09 \u7f16\u7801\u9636\u6bb5\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5c42\uff08\u4e0a\u56fe\u4e2d\u7684 \\(c=h_T\\) \uff09 \u524d\u4e00\u4e2a\u9884\u6d4b\u7684\u8f93\u51fa\u5355\u8bcd \\(\\hat y_{t-1}\\) \u5c06\u4e0a\u8ff0\u7684\u4e09\u4e2a\u8f93\u5165\u7ed3\u5408\u5c06\u4e4b\u524d\u516c\u5f0f\u7684\u89e3\u7801\u51fd\u6570\u4e2d\u7684 \\(\\phi\\) \u51fd\u6570\u8f6c\u6362\u4e3a\u4e0b\u5f0f\u7684 \\(\\phi\\) \u51fd\u6570\u3002\u4e0a\u56fe\u5c55\u793a\u4e86\u8fd9\u4e2a\u6a21\u578b\u3002 \\[ h_{t}=\\phi\\left(h_{t-1}, c, y_{t-1}\\right) \\] \u6269\u5c55 3 \uff1a\u4f7f\u7528\u591a\u4e2a RNN \u5c42\u6765\u8bad\u7ec3\u6df1\u5ea6\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u3002\u795e\u7ecf\u7f51\u7edc\u7684\u5c42\u8d8a\u6df1\uff0c\u6a21\u578b\u7684\u5c31\u5177\u6709\u66f4\u5f3a\u7684\u5b66\u4e60\u80fd\u529b\u4ece\u800c\u80fd\u63d0\u5347\u9884\u6d4b\u7684\u51c6\u786e\u5ea6\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\u9700\u8981\u4f7f\u7528\u5927\u89c4\u6a21\u7684\u8bed\u6599\u5e93\u6765\u8bad\u7ec3\u8fd9\u4e2a\u6a21\u578b\u3002 \u6269\u5c55 4 \uff1a\u8bad\u7ec3\u53cc\u5411\u7f16\u7801\u5668\uff0c\u63d0\u9ad8\u51c6\u786e\u5ea6\u3002 \u6269\u5c55 5 \uff1a\u7ed9\u5b9a\u4e00\u4e2a\u5fb7\u8bed\u8bcd\u5e8f\u5217 A B C\uff0c\u5b83\u7684\u82f1\u8bed\u7ffb\u8bd1\u662f X Y\u3002\u5728\u8bad\u7ec3 \\(RNN\\) \u65f6\u4e0d\u4f7f\u7528 A B C \\(\\to\\) X Y\uff0c\u800c\u662f\u4f7f\u7528 C B A \\(\\to\\) X Y\u3002\u8fd9\u4e48\u5904\u7406\u7684\u539f\u56e0\u662f A \u66f4\u6709\u53ef\u80fd\u88ab\u7ffb\u8bd1\u6210 X\u3002\u56e0\u6b64\u5bf9\u524d\u9762\u8ba8\u8bba\u7684\u68af\u5ea6\u6d88\u5931\u95ee\u9898\uff0c \u53cd\u8f6c\u8f93\u5165\u53e5\u5b50\u7684\u987a\u5e8f\u6709\u52a9\u4e8e\u964d\u4f4e\u8f93\u51fa\u77ed\u8bed\u7684\u9519\u8bef\u7387 \u3002 3 Gated Recurrent Units \u00b6 \u9664\u4e86\u8fc4\u4eca\u4e3a\u6b62\u8ba8\u8bba\u7684\u6269\u5c55\u65b9\u6cd5\u4e4b\u5916\uff0c\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0 RNN \u901a\u8fc7\u4f7f\u7528\u66f4\u590d\u6742\u7684\u6fc0\u6d3b\u5355\u5143\u6765\u83b7\u5f97\u8868\u73b0\u66f4\u597d\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u4ece\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u5411 \\(h_t\\) \u8f6c\u6362\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u4e86\u4e00\u4e2a\u4eff\u5c04\u8f6c\u6362\u548c \\(point-wise\\) \u7684\u975e\u7ebf\u6027\u8f6c\u6362\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u8ba8\u8bba\u95e8\u6fc0\u6d3b\u51fd\u6570\u7684\u4f7f\u7528\u5e76\u4fee\u6539 RNN \u7ed3\u6784\u3002\u867d\u7136\u7406\u8bba\u4e0a RNN \u80fd\u6355\u83b7\u957f\u8ddd\u79bb\u4fe1\u606f\uff0c\u4f46\u5b9e\u9645\u4e0a\u5f88\u96be\u8bad\u7ec3\u7f51\u7edc\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u95e8\u63a7\u5236\u5355\u5143\u53ef\u4ee5\u8ba9 RNN \u5177\u6709\u66f4\u591a\u7684\u6301\u4e45\u6027\u5185\u5b58\uff0c\u4ece\u800c\u66f4\u5bb9\u6613\u6355\u83b7\u957f\u8ddd\u79bb\u4fe1\u606f\u3002\u8ba9\u6211\u4eec\u4ece\u6570\u5b66\u89d2\u5ea6\u4e0a\u8ba8\u8bba GRU \u5982\u4f55\u4f7f\u7528 \\(h_{t-1}\\) \u548c \\(x_t\\) \u6765\u751f\u6210\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u3002\u7136\u540e\u6211\u4eec\u5c06\u6df1\u5165\u4e86\u89e3 GRU \u67b6\u6784\u3002 \\[ \\begin{array}{rlr}{z_{t}} & {=\\sigma\\left(W^{(z)} x_{t}+U^{(z)} h_{t-1}\\right)} & {(\\text {Update gate})} \\\\ {r_{t}} & {=\\sigma\\left(W^{(r)} x_{t}+U^{(r)} h_{t-1}\\right)} & {\\text { (Reset gate) }} \\\\ {\\tilde{h}_{t}} & {=\\tanh \\left(r_{t} \\circ U h_{t-1}+W x_{t}\\right)} & {\\text { (New memory) }} \\\\ {h_{t}} & {=\\left(1-z_{t}\\right) \\circ \\tilde{h}_{t}+z_{t} \\circ h_{t-1}} & {\\text { (Hidden state) }}\\end{array} \\] \u4e0a\u8ff0\u7684\u5171\u8bc6\u53ef\u4ee5\u8ba4\u4e3a\u662f GRU \u7684\u56db\u4e2a\u57fa\u672c\u64cd\u4f5c\u9636\u6bb5\uff0c\u4e0b\u9762\u5bf9\u8fd9\u4e9b\u516c\u5f0f\u4f5c\u51fa\u66f4\u76f4\u89c2\u7684\u89e3\u91ca\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86 GRU \u7684\u57fa\u672c\u7ed3\u6784\u548c\u8ba1\u7b97\u6d41\u7a0b\uff1a New memory generation \uff1a\u4e00\u4e2a\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u662f\u7531\u4e00\u4e2a\u65b0\u7684\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u5171\u540c\u8ba1\u7b97\u6240\u5f97\u3002\u8fd9\u4e2a\u9636\u6bb5\u662f\u5c06\u65b0\u8f93\u5165\u7684\u5355\u8bcd\u4e0e\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u76f8\u7ed3\u5408\uff0c\u6839\u636e\u8fc7\u53bb\u7684\u4e0a\u4e0b\u6587\u6765\u603b\u7ed3\u5f97\u5230\u5411\u91cf \\(\\tilde{h}_{t}\\) \u3002 Reset Gate \uff1a\u590d\u4f4d\u4fe1\u53f7 \\(r_t\\) \u662f\u8d1f\u8d23\u786e\u5b9a \\(h_{t-1}\\) \u5bf9\u603b\u7ed3 \\(\\tilde{h}_{t}\\) \u7684\u91cd\u8981\u7a0b\u5ea6\u3002\u5982\u679c\u786e\u5b9a \\(\\tilde{h}_{t}\\) \u4e0e\u65b0\u7684\u8bb0\u5fc6\u7684\u8ba1\u7b97\u65e0\u5173\uff0c\u5219\u590d\u4f4d\u95e8\u80fd\u591f\u5b8c\u5168\u6d88\u9664\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff08\u5373\u5ffd\u7565\u4e4b\u524d\u9690\u85cf\u7684\u4fe1\u606f\uff09\u3002 Update Gate \uff1a\u66f4\u65b0\u4fe1\u53f7 \\(z_t\\) \u8d1f\u8d23\u786e\u5b9a\u6709\u591a\u5c11 \\(h_{t-1}\\) \u53ef\u4ee5\u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u5982\u679c \\(z_{t} \\approx 1\\) \uff0c\u7136\u540e \\(h_{t-1}\\) \u51e0\u4e4e\u662f\u5b8c\u5168\u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001\u3002\u53cd\u8fc7\u6765\uff0c\u5982\u679c \\(z_{t} \\approx 0\\) \uff0c\u7136\u540e\u5927\u90e8\u5206\u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001\u3002 Hidden state \uff1a\u5229\u7528\u66f4\u65b0\u95e8\u7684\u5efa\u8bae\uff0c\u4f7f\u7528\u8fc7\u53bb\u7684\u9690\u85cf\u8f93\u5165 \\({h}_{t-1}\\) \u548c\u65b0\u751f\u6210\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u751f\u6210\u9690\u85cf\u72b6\u6001 \\({h}_{t}\\) \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u8bad\u7ec3 GRU\uff0c\u6211\u4eec\u9700\u8981\u5b66\u4e60\u6240\u6709\u4e0d\u540c\u7684\u53c2\u6570\uff1a \\(W, U, W^{(r)}, U^{(r)}, W^{(z)}, U^{(z)}\\) \u3002\u8fd9\u4e9b\u53c2\u6570\u540c\u6837\u662f\u901a\u8fc7\u53cd\u5411\u4f20\u64ad\u7b97\u6cd5\u5b66\u4e60\u6240\u5f97\u3002 4 Long-Short-Term-Memories \u00b6 Long-Short-Term-Memories \u662f\u548c GRU \u6709\u4e00\u70b9\u4e0d\u540c\u7684\u53e6\u5916\u4e00\u79cd\u7c7b\u578b\u7684\u590d\u6742\u6fc0\u6d3b\u795e\u7ecf\u5143\u3002\u5b83\u7684\u4f5c\u7528\u4e0e GRU \u7c7b\u4f3c\uff0c\u4f46\u662f\u795e\u7ecf\u5143\u7684\u7ed3\u6784\u6709\u4e00\u70b9\u533a\u522b\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b LSTM \u795e\u7ecf\u5143\u7684\u6570\u5b66\u516c\u5f0f\uff0c\u7136\u540e\u518d\u6df1\u5165\u4e86\u89e3\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8bbe\u8ba1\u67b6\u6784\uff1a \\[ \\begin{aligned} {i_{t}} & {=\\sigma\\left(W^{(i)} x_{t}+U^{(i)} h_{t-1}\\right)} & {\\text { (Input gate) }} \\\\ {f_{t}} & {=\\sigma\\left(W^{(f)} x_{t}+U^{(f)} h_{t-1}\\right)} & {\\text { (Forget gate) }} \\\\ {o_{t}} & {=\\sigma\\left(W^{(o)} x_{t}+U^{(o)} h_{t-1}\\right)} & {\\text { (Output/Exposure gate) }} \\\\ {\\tilde{c}_{t}} & {=\\tanh \\left(W^{(c)} x_{t}+U^{(c)} h_{t-1}\\right)} & {\\text { (New memory cell) }} \\\\ {c_{t}} & {=f_{t} \\circ c_{t-1}+i_{t} \\circ \\tilde{c}_{t}} & {\\text { (Final memory cell) }} \\\\ {h_{t}} & {=o_{t} \\circ \\tanh \\left(c_{t}\\right)} \\end{aligned} \\] \u4e0b\u56fe\u662fLSTM\u7684\u8ba1\u7b97\u56fe\u793a \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u4e86\u89e3 LSTM \u7684\u67b6\u6784\u4ee5\u53ca\u8fd9\u4e2a\u67b6\u6784\u80cc\u540e\u7684\u610f\u4e49\uff1a New memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u662f\u7c7b\u4f3c\u4e8e GRU \u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u7684\u9636\u6bb5\u3002\u6211\u4eec\u57fa\u672c\u4e0a\u662f\u7528\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u751f\u6210\u4e00\u4e2a\u5305\u62ec\u65b0\u5355\u8bcd \\(x^{(t)}\\) \u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{c}_{t}\\) \u3002 Input Gate \uff1a\u6211\u4eec\u770b\u5230\u5728\u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u4e4b\u524d\uff0c\u65b0\u7684\u8bb0\u5fc6\u7684\u751f\u6210\u9636\u6bb5\u4e0d\u4f1a\u68c0\u67e5\u65b0\u5355\u8bcd\u662f\u5426\u91cd\u8981\u2014\u2014\u8fd9\u9700\u8981\u8f93\u5165\u95e8\u51fd\u6570\u6765\u505a\u8fd9\u4e2a\u5224\u65ad\u3002\u8f93\u5165\u95e8\u4f7f\u7528\u8f93\u5165\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u51b3\u5b9a\u8f93\u5165\u503c\u662f\u5426\u503c\u5f97\u4fdd\u5b58\uff0c\u4ece\u800c\u7528\u6765\u8fdb\u5165\u65b0\u5185\u5b58\u3002\u56e0\u6b64\uff0c\u5b83\u4ea7\u751f\u5b83\u4f5c\u4e3a\u8fd9\u4e2a\u4fe1\u606f\u7684\u6307\u793a\u5668\u3002 Forget Gate \uff1a\u8fd9\u4e2a\u95e8\u4e0e\u8f93\u5165\u95e8\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u4e0d\u786e\u5b9a\u8f93\u5165\u5355\u8bcd\u7684\u6709\u7528\u6027\u2014\u2014\u800c\u662f\u8bc4\u4f30\u8fc7\u53bb\u7684\u8bb0\u5fc6\u662f\u5426\u5bf9\u5f53\u524d\u8bb0\u5fc6\u7684\u8ba1\u7b97\u6709\u7528\u3002\u56e0\u6b64\uff0c\u9057\u5fd8\u95e8\u67e5\u770b\u8f93\u5165\u5355\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff0c\u5e76\u751f\u6210 \\(f_t\\) \u3002 Final memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u9996\u5148\u6839\u636e\u5fd8\u8bb0\u95e8 \\(f_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u5fd8\u8bb0\u8fc7\u53bb\u7684\u8bb0\u5fc6 \\(c_{t-1}\\) \u3002\u7c7b\u4f3c\u5730\uff0c\u6839\u636e\u8f93\u5165\u95e8 \\(i_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u8f93\u5165\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde c_t\\) \u3002\u7136\u540e\u5c06\u4e0a\u9762\u7684\u4e24\u4e2a\u7ed3\u679c\u76f8\u52a0\u751f\u6210\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u3002 Output/Exposure Gate \uff1a\u8fd9\u662f GRU \u4e2d\u6ca1\u6709\u660e\u786e\u5b58\u5728\u7684\u95e8\u3002\u8fd9\u4e2a\u95e8\u7684\u76ee\u7684\u662f\u4ece\u9690\u85cf\u72b6\u6001\u4e2d\u5206\u79bb\u6700\u7ec8\u7684\u8bb0\u5fc6\u3002\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u5305\u542b\u5f88\u591a\u4e0d\u9700\u8981\u5b58\u50a8\u5728\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f\u3002\u9690\u85cf\u72b6\u6001\u7528\u4e8e LSTM \u7684\u6bcf\u4e2a\u5355\u4e2a\u95e8\uff0c\u56e0\u6b64\uff0c\u8be5\u95e8\u662f\u8981\u8bc4\u4f30\u5173\u4e8e\u8bb0\u5fc6\u5355\u5143 \\(c_t\\) \u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u663e\u9732\u5728\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u4e2d\u3002\u7528\u4e8e\u8bc4\u4f30\u7684\u4fe1\u53f7\u662f \\(o_t\\) \uff0c\u7136\u540e\u4e0e \\(c_t\\) \u901a\u8fc7 \\(o_{t} \\circ \\tanh \\left(c_{t}\\right)\\) \u8fd0\u7b97\u5f97\u5230\u6700\u7ec8\u7684 \\(h_t\\) \u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"06 The probability of a sentence Recurrent Neural Networks and Language Models"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#lecture-06-the-probability-of-a-sentence-recurrent-neural-networks-and-language-models","text":"Overview \u4ecb\u7ecd\u4e00\u4e2a\u65b0\u7684NLP\u4efb\u52a1 Language Modeling (motivate RNNs) \u4ecb\u7ecd\u4e00\u4e2a\u65b0\u7684\u795e\u7ecf\u7f51\u7edc\u5bb6\u65cf Recurrent Neural Networks (RNNs) Language Modeling \u8bed\u8a00\u5efa\u6a21\u7684\u4efb\u52a1\u662f\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u4ec0\u4e48\u3002 \u66f4\u6b63\u5f0f\u7684\u8bf4\u6cd5\u662f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \\(\\boldsymbol{x}^{(1)}, \\boldsymbol{x}^{(2)}, \\ldots, \\boldsymbol{x}^{(t)}\\) \uff0c\u8ba1\u7b97\u4e0b\u4e00\u4e2a\u5355\u8bcd \\(x^{(t+1)}\\) \u7684\u6982\u7387\u5206\u5e03 \\[ P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\] \u5176\u4e2d\uff0c \\(x^{(t+1)}\\) \u53ef\u4ee5\u662f\u8bcd\u8868\u4e2d\u7684\u4efb\u610f\u5355\u8bcd \\(V=\\left\\{\\boldsymbol{w}_{1}, \\ldots, \\boldsymbol{w}_{|V|}\\right\\}\\) \u8fd9\u6837\u505a\u7684\u7cfb\u7edf\u79f0\u4e3a Language Model \u8bed\u8a00\u6a21\u578b \u8fd8\u53ef\u4ee5\u5c06\u8bed\u8a00\u6a21\u578b\u770b\u4f5c\u662f\u4e00\u4e2a\u5c06\u6982\u7387\u5206\u914d\u7ed9\u4e00\u6bb5\u6587\u672c\u7684\u7cfb\u7edf \u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e00\u6bb5\u6587\u672c \\(x^{(1)},\\dots,x^{(T)}\\) \u5219\u8fd9\u6bb5\u6587\u672c\u7684\u6982\u7387(\u6839\u636e\u8bed\u8a00\u6a21\u578b)\u4e3a \\[ \\begin{aligned} P\\left(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\right) &=P\\left(\\boldsymbol{x}^{(1)}\\right) \\times P\\left(\\boldsymbol{x}^{(2)} | \\boldsymbol{x}^{(1)}\\right) \\times \\cdots \\times P\\left(\\boldsymbol{x}^{(T)} | \\boldsymbol{x}^{(T-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\\\ &=\\prod_{t=1}^{T} P\\left(\\boldsymbol{x}^{(t)} | \\boldsymbol{x}^{(t-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) \\end{aligned} \\] \u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u7684\u662f \\(\\prod_{t=1}^{T} P\\left(\\boldsymbol{x}^{(t)} | \\boldsymbol{x}^{(t-1)}, \\ldots, \\boldsymbol{x}^{(1)}\\right)\\) n-gram Language Models $$ \\text{the students opened their ______} $$ \u95ee\u9898 \uff1a\u5982\u4f55\u5b66\u4e60\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\uff1f \u56de\u7b54 (pre-DeepLearning)\uff1a\u5b66\u4e60\u4e00\u4e2a n-gram \u8bed\u8a00\u6a21\u578b \u5b9a\u4e49 \uff1an-gram \u662f \u4e00\u4e2a\u7531n\u4e2a\u8fde\u7eed\u5355\u8bcd\u7ec4\u6210\u7684\u5757 unigrams: \u201cthe\u201d, \u201cstudents\u201d, \u201copened\u201d, \u201dtheir\u201d bigrams: \u201cthe students\u201d, \u201cstudents opened\u201d, \u201copened their\u201d trigrams: \u201cthe students opened\u201d, \u201cstudents opened their\u201d 4-grams: \u201cthe students opened their\u201d \u60f3\u6cd5 \uff1a\u6536\u96c6\u5173\u4e8e\u4e0d\u540cn-gram\u51fa\u73b0\u9891\u7387\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u5e76\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002 \u9996\u5148\uff0c\u6211\u4eec\u505a\u4e00\u4e2a \u7b80\u5316\u5047\u8bbe \uff1a \\(x^{(t+1)}\\) \u53ea\u4f9d\u8d56\u4e8e\u524d\u9762\u7684n-1\u4e2a\u5355\u8bcd \\[ \\begin{aligned} P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right) & =P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right) \\\\ &=\\frac{P\\left(\\boldsymbol{x}^{(t+1)}, \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)}{P\\left(\\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)} \\end{aligned} \\] \u5177\u4f53\u542b\u4e49\u5982\u4e0b\u56fe\u6240\u793a \u95ee\u9898 \uff1a\u5982\u4f55\u5f97\u5230n-gram\u548c(n-1)-gram\u7684\u6982\u7387\uff1f \u56de\u7b54 \uff1a\u901a\u8fc7\u5728\u4e00\u4e9b\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u4e2d\u8ba1\u7b97\u5b83\u4eec(\u7edf\u8ba1\u8fd1\u4f3c) \\[ \\approx \\frac{\\operatorname{count}\\left(\\boldsymbol{x}^{(t+1)}, \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)}{\\operatorname{count}\\left(\\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(t-n+2)}\\right)} \\] \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u5b66\u4e60\u4e00\u4e2a 4-gram \u7684\u8bed\u8a00\u6a21\u578b \u4f8b\u5982\uff0c\u5047\u8bbe\u5728\u8bed\u6599\u5e93\u4e2d\uff1a \u201cstudents opened their\u201d \u51fa\u73b0\u4e861000\u6b21 \u201cstudents opened their books\u201d \u51fa\u73b0\u4e86400\u6b21 \\(P(\\text { books } | \\text { students opened their })=0.4\\) \u201cstudents opened their exams\u201d \u51fa\u73b0\u4e86100\u6b21 \\(P(\\text { exams } | \\text { students opened their })=0.1\\) \u6211\u4eec\u5e94\u8be5\u5ffd\u89c6\u4e0a\u4e0b\u6587\u4e2d\u7684\u201cproctor\u201d\u5417\uff1f \u5728\u672c\u4f8b\u4e2d\uff0c\u4e0a\u4e0b\u6587\u91cc\u51fa\u73b0\u4e86\u201cproctor\u201d\uff0c\u6240\u4ee5exams\u5728\u8fd9\u91cc\u7684\u4e0a\u4e0b\u6587\u4e2d\u5e94\u8be5\u662f\u6bd4books\u6982\u7387\u66f4\u5927\u7684\u3002 Sparsity Problems with n-gram Language Models \u95ee\u9898 \uff1a\u5982\u679c\u201cstudents open their \\(w\\) \u201d \u4ece\u672a\u51fa\u73b0\u5728\u6570\u636e\u4e2d\uff0c\u90a3\u4e48\u6982\u7387\u503c\u4e3a 0 (Partial)\u89e3\u51b3\u65b9\u6848 \uff1a\u4e3a\u6bcf\u4e2a \\(w\\in V\\) \u6dfb\u52a0\u6781\u5c0f\u6570 \\(\\delta\\) \u3002\u8fd9\u53eb\u505a\u5e73\u6ed1\u3002\u8fd9\u4f7f\u5f97\u8bcd\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u81f3\u5c11\u6709\u5f88\u5c0f\u7684\u6982\u7387\u3002 \u95ee\u9898 \uff1a\u5982\u679c\u201cstudents open their\u201d \u4ece\u672a\u51fa\u73b0\u5728\u6570\u636e\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u65e0\u6cd5\u8ba1\u7b97\u4efb\u4f55\u5355\u8bcd \\(w\\) \u7684\u6982\u7387\u503c (Partial)\u89e3\u51b3\u65b9\u6848 \uff1a\u5c06\u6761\u4ef6\u6539\u4e3a\u201copen their\u201d\u3002\u8fd9\u53eb\u505a\u540e\u9000\u3002 Note: n \u7684\u589e\u52a0\u4f7f\u7a00\u758f\u6027\u95ee\u9898\u53d8\u5f97\u66f4\u7cdf\u3002\u4e00\u822c\u60c5\u51b5\u4e0b n \u4e0d\u80fd\u5927\u4e8e5\u3002 Storage Problems with n-gram Language Models \u589e\u52a0 n \u6216\u589e\u52a0\u8bed\u6599\u5e93\u90fd\u4f1a\u589e\u52a0\u6a21\u578b\u5927\u5c0f n-gram Language Models in practice \u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\uff0c\u5728\u51e0\u79d2\u949f\u5185\u5efa\u7acb\u4e00\u4e2a\u8d85\u8fc7170\u4e07\u4e2a\u5355\u8bcd\u5e93(Reuters)\u7684\u7b80\u5355\u7684\u4e09\u5143\u7ec4\u8bed\u8a00\u6a21\u578b Reuters \u662f \u5546\u4e1a\u548c\u91d1\u878d\u65b0\u95fb\u7684\u6570\u636e\u96c6 \u7a00\u758f\u6027\u95ee\u9898 \uff1a\u6982\u7387\u5206\u5e03\u7684\u7c92\u5ea6\u4e0d\u5927\u3002\u201ctoday the company\u201d \u548c \u201ctoday the bank\u201d\u90fd\u662f \\(\\frac{4}{26}\\) \uff0c\u90fd\u53ea\u51fa\u73b0\u8fc7\u56db\u6b21 Generating text with a n-gram Language Model \u8fd8\u53ef\u4ee5\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u6765\u751f\u6210\u6587\u672c \u4f7f\u7528trigram\u8fd0\u884c\u4ee5\u4e0a\u751f\u6210\u8fc7\u7a0b\u65f6\uff0c\u4f1a\u5f97\u5230\u5982\u4e0b\u6587\u672c today the price of gold per ton , while production of shoe lasts and shoe industry , the bank intervened just after it considered and rejected an imf demand to rebuild depleted european stocks , sept 30 end primary 76 cts a share . \u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\u5176\u5177\u6709\u8bed\u6cd5\u4f46\u662f\u662f\u4e0d\u8fde\u8d2f\u7684\u3002\u5982\u679c\u6211\u4eec\u60f3\u8981\u5f88\u597d\u5730\u6a21\u62df\u8bed\u8a00\uff0c\u6211\u4eec\u9700\u8981\u540c\u65f6\u8003\u8651\u4e09\u4e2a\u4ee5\u4e0a\u7684\u5355\u8bcd\u3002\u4f46\u589e\u52a0 n \u4f7f\u6a21\u578b\u7684\u7a00\u758f\u6027\u95ee\u9898\u6076\u5316\uff0c\u6a21\u578b\u5c3a\u5bf8\u589e\u5927\u3002 How to build a neural Language Model? \u56de\u5fc6\u4e00\u4e0b\u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u8f93\u5165\uff1a\u5355\u8bcd\u5e8f\u5217 \\(\\boldsymbol{x}^{(1)}, \\boldsymbol{x}^{(2)}, \\ldots, \\boldsymbol{x}^{(t)}\\) \u8f93\u51fa\uff1a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \\(P\\left(\\boldsymbol{x}^{(t+1)} | \\boldsymbol{x}^{(t)}, \\ldots, \\boldsymbol{x}^{(1)}\\right)\\) window-based neural model \u5728\u7b2c\u4e09\u8bb2\u4e2d\u88ab\u7528\u4e8eNER\u95ee\u9898 A fixed-window neural Language Model \u4f7f\u7528\u548cNER\u95ee\u9898\u4e2d\u540c\u6837\u7f51\u7edc\u7ed3\u6784 \u8d85\u8d8a n-gram \u8bed\u8a00\u6a21\u578b\u7684 \u6539\u8fdb \u6ca1\u6709\u7a00\u758f\u6027\u95ee\u9898 \u4e0d\u9700\u8981\u89c2\u5bdf\u5230\u6240\u6709\u7684n-grams \u5b58\u5728\u7684\u95ee\u9898 \u56fa\u5b9a\u7a97\u53e3\u592a\u5c0f \u6269\u5927\u7a97\u53e3\u5c31\u9700\u8981\u6269\u5927\u6743\u91cd\u77e9\u9635 \\(W\\) \u7a97\u53e3\u518d\u5927\u4e5f\u4e0d\u591f\u7528 \\(x^{(1)}\\) \u548c \\(x^{(2)}\\) \u4e58\u4ee5\u5b8c\u5168\u4e0d\u540c\u7684\u6743\u91cd\u3002\u8f93\u5165\u7684\u5904\u7406 \u4e0d\u5bf9\u79f0 \u3002 \u6211\u4eec\u9700\u8981\u4e00\u4e2a\u795e\u7ecf\u7ed3\u6784\uff0c\u53ef\u4ee5\u5904\u7406\u4efb\u4f55\u957f\u5ea6\u7684\u8f93\u5165 Recurrent Neural Networks (RNN) \u6838\u5fc3\u60f3\u6cd5 \uff1a\u91cd\u590d\u4f7f\u7528 \u76f8\u540c \u7684\u6743\u91cd\u77e9\u9635 \\(W\\) RNN\u7684 \u4f18\u70b9 \u53ef\u4ee5\u5904\u7406 \u4efb\u610f\u957f\u5ea6 \u7684\u8f93\u5165 \u6b65\u9aa4 t \u7684\u8ba1\u7b97(\u7406\u8bba\u4e0a)\u53ef\u4ee5\u4f7f\u7528 \u8bb8\u591a\u6b65\u9aa4\u524d \u7684\u4fe1\u606f \u6a21\u578b\u5927\u5c0f\u4e0d\u4f1a \u968f\u7740\u8f93\u5165\u7684\u589e\u52a0\u800c**\u589e\u52a0** \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e0a\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709 \u5bf9\u79f0\u6027 RNN\u7684 \u7f3a\u70b9 \u9012\u5f52\u8ba1\u7b97\u901f\u5ea6 \u6162 \u5728\u5b9e\u8df5\u4e2d\uff0c\u5f88\u96be\u4ece **\u8bb8\u591a\u6b65\u9aa4\u524d**\u8fd4\u56de\u4fe1\u606f \u540e\u9762\u7684\u8bfe\u7a0b\u4e2d\u4f1a\u8be6\u7ec6\u4ecb\u7ecd Training a RNN Language Model \u83b7\u53d6\u4e00\u4e2a\u8f83\u5927\u7684\u6587\u672c\u8bed\u6599\u5e93\uff0c\u8be5\u8bed\u6599\u5e93\u662f\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \u8f93\u5165RNN-LM\uff1b\u8ba1\u7b97\u6bcf\u4e2a\u6b65\u9aa4 t \u7684\u8f93\u51fa\u5206\u5e03 \u5373\u9884\u6d4b\u5230\u76ee\u524d\u4e3a\u6b62\u7ed9\u5b9a\u7684\u6bcf\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \u6b65\u9aa4 t \u4e0a\u7684\u635f\u5931\u51fd\u6570\u4e3a\u9884\u6d4b\u6982\u7387\u5206\u5e03 \\(\\hat{\\boldsymbol{y}}^{(t)}\\) \u4e0e\u771f\u5b9e\u4e0b\u4e00\u4e2a\u5355\u8bcd \\({\\boldsymbol{y}}^{(t)}\\) ( \\(x^{(t+1)}\\) \u7684\u72ec\u70ed\u5411\u91cf)\u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5 \\[ J^{(t)}(\\theta)=C E\\left(\\boldsymbol{y}^{(t)}, \\hat{\\boldsymbol{y}}^{(t)}\\right)=-\\sum_{w \\in V} \\boldsymbol{y}_{w}^{(t)} \\log \\hat{\\boldsymbol{y}}_{w}^{(t)}=-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)} \\] \u5c06\u5176\u5e73\u5747\uff0c\u5f97\u5230\u6574\u4e2a\u57f9\u8bad\u96c6\u7684 \u603b\u4f53\u635f\u5931 \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T}-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)} \\] \\[ J^{(1)}(\\theta)+J^{(2)}(\\theta)+J^{(3)}(\\theta)+J^{(4)}(\\theta)+\\ldots=J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta) \\] \u7136\u800c\uff1a\u8ba1\u7b97 \u6574\u4e2a\u8bed\u6599\u5e93 \\(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\) \u7684\u635f\u5931\u548c\u68af\u5ea6\u592a\u6602\u8d35\u4e86 \\[ J(\\theta)=\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta) \\] \u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u5c06 \\(\\boldsymbol{x}^{(1)}, \\ldots, \\boldsymbol{x}^{(T)}\\) \u770b\u505a\u4e00\u4e2a \u53e5\u5b50 \u6216\u662f \u6587\u6863 \u56de\u5fc6 \uff1a\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u5141\u8bb8\u6211\u4eec\u8ba1\u7b97\u5c0f\u5757\u6570\u636e\u7684\u635f\u5931\u548c\u68af\u5ea6\uff0c\u5e76\u8fdb\u884c\u66f4\u65b0\u3002 \u8ba1\u7b97\u4e00\u4e2a\u53e5\u5b50\u7684\u635f\u5931 \\(J(\\theta)\\) (\u5b9e\u9645\u4e0a\u662f\u4e00\u6279\u53e5\u5b50)\uff0c\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u6743\u91cd\u3002\u91cd\u590d\u4e0a\u8ff0\u64cd\u4f5c\u3002 Backpropagation for RNNs \u95ee\u9898 \uff1a\u5173\u4e8e \u91cd\u590d\u7684 \u6743\u91cd\u77e9\u9635 \\(W_h\\) \u7684\u504f\u5bfc\u6570 \\(J^{(t)}(\\theta)\\) \u56de\u7b54 \uff1a\u91cd\u590d\u6743\u91cd\u7684\u68af\u5ea6\u662f\u6bcf\u6b21\u5176\u51fa\u73b0\u65f6\u7684\u68af\u5ea6\u7684\u603b\u548c \\[ \\frac{\\partial J^{(t)}}{\\partial \\boldsymbol{W}_{\\boldsymbol{h}}}=\\sum_{i=1}^{t}\\left.\\frac{\\partial J^{(t)}}{\\partial \\boldsymbol{W}_{\\boldsymbol{h}}}\\right|_{(i)} \\] Multivariable Chain Rule \u5bf9\u4e8e\u4e00\u4e2a\u591a\u53d8\u91cf\u51fd\u6570 \\(f(x,y)\\) \u548c\u4e24\u4e2a\u5355\u53d8\u91cf\u51fd\u6570 \\(x(t)\\) \u548c \\(y(t)\\) \uff0c\u5176\u94fe\u5f0f\u6cd5\u5219\u5982\u4e0b\uff1a \\[ \\frac{d}{d t} f(x(t), y(t))=\\frac{\\partial f}{\\partial x} \\frac{d x}{d t}+\\frac{\\partial f}{\\partial y} \\frac{d y}{d t} \\] Backpropagation for RNNs: Proof sketch Backpropagation for RNNs \u95ee\u9898 \uff1a \u5982\u4f55\u8ba1\u7b97\uff1f \u56de\u7b54 \uff1a\u53cd\u5411\u4f20\u64ad\u7684\u65f6\u95f4\u6b65\u957f \\(i=t,\\dots,0\\) \u3002\u7d2f\u52a0\u68af\u5ea6\u3002\u8fd9\u4e2a\u7b97\u6cd5\u53eb\u505a\u201c backpropagation through time \u201d Generating text with a RNN Language Model \u5c31\u50cfn-gram\u8bed\u8a00\u6a21\u578b\u4e00\u6837\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528RNN\u8bed\u8a00\u6a21\u578b\u901a\u8fc7 \u91cd\u590d\u91c7\u6837 \u6765 \u751f\u6210\u6587\u672c \u3002\u91c7\u6837\u8f93\u51fa\u662f\u4e0b\u4e00\u6b65\u7684\u8f93\u5165\u3002 \u76f8\u6bd4n-gram\u66f4\u6d41\u7545\uff0c\u8bed\u6cd5\u6b63\u786e\uff0c\u4f46\u603b\u4f53\u4e0a\u4ecd\u7136\u5f88\u4e0d\u8fde\u8d2f \u98df\u8c31\u7684\u4f8b\u5b50\u4e2d\uff0c\u751f\u6210\u7684\u6587\u672c\u5e76\u6ca1\u6709\u8bb0\u4f4f\u6587\u672c\u7684\u4e3b\u9898\u662f\u4ec0\u4e48 \u54c8\u5229\u6ce2\u7279\u7684\u4f8b\u5b50\u4e2d\uff0c\u751a\u81f3\u6709\u4f53\u73b0\u51fa\u4e86\u4eba\u7269\u7684\u7279\u70b9\uff0c\u5e76\u4e14\u5f15\u53f7\u7684\u5f00\u95ed\u4e5f\u6ca1\u6709\u51fa\u73b0\u95ee\u9898 \u4e5f\u8bb8\u67d0\u4e9b\u795e\u7ecf\u5143\u6216\u8005\u9690\u85cf\u72b6\u6001\u5728\u8ddf\u8e2a\u6a21\u578b\u7684\u8f93\u51fa\u662f\u5426\u5728\u5f15\u53f7\u4e2d RNN\u662f\u5426\u53ef\u4ee5\u548c\u624b\u5de5\u89c4\u5219\u7ed3\u5408\uff1f \u4f8b\u5982Beam Serach\uff0c\u4f46\u662f\u53ef\u80fd\u5f88\u96be\u505a\u5230 Evaluating Language Models \u6807\u51c6\u8bed\u8a00\u6a21\u578b\u8bc4\u4f30\u6307\u6807\u662f perplexity \u56f0\u60d1\u5ea6 \u8fd9\u7b49\u4e8e\u4ea4\u53c9\u71b5\u635f\u5931 \\(J(\\theta)\\) \u7684\u6307\u6570 \\[ =\\prod_{t=1}^{T}\\left(\\frac{1}{\\hat{y}_{x_{t+1}}^{(t)}}\\right)^{1 / T}=\\exp \\left(\\frac{1}{T} \\sum_{t=1}^{T}-\\log \\hat{\\boldsymbol{y}}_{\\boldsymbol{x}_{t+1}}^{(t)}\\right)=\\exp (J(\\theta)) \\] \u4f4e\u56f0\u60d1\u5ea6\u662f\u66f4\u597d\u7684 RNNs have greatly improved perplexity Why should we care about Language Modeling? \u8bed\u8a00\u6a21\u578b\u662f\u4e00\u9879 \u57fa\u51c6\u6d4b\u8bd5 \u4efb\u52a1\uff0c\u5b83\u5e2e\u52a9\u6211\u4eec \u8861\u91cf \u6211\u4eec\u5728\u7406\u89e3\u8bed\u8a00\u65b9\u9762\u7684 \u8fdb\u5c55 \u751f\u6210\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u9700\u8981\u8bed\u6cd5\uff0c\u53e5\u6cd5\uff0c\u903b\u8f91\uff0c\u63a8\u7406\uff0c\u73b0\u5b9e\u4e16\u754c\u7684\u77e5\u8bc6\u7b49 \u8bed\u8a00\u5efa\u6a21\u662f\u8bb8\u591aNLP\u4efb\u52a1\u7684 \u5b50\u7ec4\u4ef6 \uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u6d89\u53ca \u751f\u6210\u6587\u672c \u6216 \u4f30\u8ba1\u6587\u672c\u6982\u7387 \u7684\u4efb\u52a1 \u9884\u6d4b\u6027\u6253\u5b57 \u8bed\u97f3\u8bc6\u522b \u624b\u5199\u8bc6\u522b \u62fc\u5199/\u8bed\u6cd5\u7ea0\u6b63 \u4f5c\u8005\u8bc6\u522b \u673a\u5668\u7ffb\u8bd1 \u6458\u8981 \u5bf9\u8bdd \u7b49\u7b49 Recap \u8bed\u8a00\u6a21\u578b\uff1a \u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u7684\u7cfb\u7edf \u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff1a\u4e00\u7cfb\u5217\u795e\u7ecf\u7f51\u7edc \u91c7\u7528\u4efb\u610f\u957f\u5ea6\u7684\u987a\u5e8f\u8f93\u5165 \u5728\u6bcf\u4e00\u6b65\u4e0a\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd \u53ef\u4ee5\u9009\u62e9\u5728\u6bcf\u4e00\u6b65\u4e0a\u751f\u6210\u8f93\u51fa \u9012\u5f52\u795e\u7ecf\u7f51\u7edc \\(\\neq\\) \u8bed\u8a00\u6a21\u578b \u6211\u4eec\u5df2\u7ecf\u8bc1\u660e\uff0cRNNs\u662f\u6784\u5efaLM\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u3002 \u4f46RNNs\u7684\u7528\u5904\u8981\u5927\u5f97\u591a! RNNs can be used for tagging e.g. part-of-speech tagging , named entity recognition RNNs can be used for sentence classification e.g. sentiment classification \u5982\u4f55\u8ba1\u7b97\u53e5\u5b50\u7f16\u7801 \u4f7f\u7528\u6700\u7ec8\u9690\u5c42\u72b6\u6001 \u4f7f\u7528\u6240\u6709\u9690\u5c42\u72b6\u6001\u7684\u9010\u5143\u7d20\u6700\u503c\u6216\u5747\u503c RNNs can be used as an encoder module e.g. question answering , machine translation, many other tasks! Encoder\u7684\u7ed3\u6784\u5728NLP\u4e2d\u975e\u5e38\u5e38\u89c1 RNN-LMs can be used to generate text e.g. speech recognition , machine translation, summarization \u8fd9\u662f\u4e00\u4e2a\u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u7684\u793a\u4f8b\u3002\u6211\u4eec\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u7ec4\u4ef6\uff0c\u5e76\u4e14\u6700\u5173\u952e\u7684\u662f\uff0c\u6211\u4eec\u6839\u636e\u6761\u4ef6\u6765\u8c03\u6574\u5b83 \u7a0d\u540e\u6211\u4eec\u4f1a\u66f4\u8be6\u7ec6\u5730\u770b\u5230\u673a\u5668\u7ffb\u8bd1\u3002 A note on terminology \u672c\u8bfe\u63d0\u5230\u7684RNN\u662f \u201c\u201cvanilla RNN\u201d \u4e0b\u8282\u8bfe\u5c06\u4f1a\u5b66\u4e60GRU\u548cLSTM\u4ee5\u53ca\u591a\u5c42RNN \u672c\u8bfe\u7a0b\u7ed3\u675f\u65f6\uff0c\u4f60\u4f1a\u7406\u89e3\u7c7b\u4f3c\u201cstacked bidirectional LSTM with residual connections and self-attention\u201d\u7684\u77ed\u8bed","title":"Lecture 06 The probability of a sentence Recurrent Neural Networks and Language Models"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#notes-05-language-models-rnn-gru-and-lstm","text":"Keyphrases : Language Models. RNN. Bi-directional RNN. Deep RNN. GRU. LSTM.","title":"Notes 05 Language Models, RNN, GRU and LSTM"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#1-language-models","text":"1.1 Introduction \u8bed\u8a00\u6a21\u578b\u8ba1\u7b97\u7279\u5b9a\u5e8f\u5217\u4e2d\u591a\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u6982\u7387\u3002\u4e00\u4e2a m \u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(\\left\\{w_{1}, \\dots, w_{m}\\right\\}\\) \u7684\u6982\u7387\u5b9a\u4e49\u4e3a \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u3002\u5355\u8bcd \\(w_i\\) \u524d\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5355\u8bcd\uff0c\u5176\u7279\u6027\u4f1a\u6839\u636e\u5b83\u5728\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u800c\u6539\u53d8\uff0c \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u4e00\u822c\u53ea\u8003\u8651\u524d \\(n\\) \u4e2a\u5355\u8bcd\u800c\u4e0d\u662f\u8003\u8651\u5168\u90e8\u4e4b\u524d\u7684\u5355\u8bcd\u3002 \\[ P\\left(w_{1}, \\ldots, w_{m}\\right)=\\prod_{i=1}^{i=m} P\\left(w_{i} | w_{1}, \\ldots, w_{i-1}\\right) \\approx \\prod_{i=1}^{i=m} P\\left(w_{i} | w_{i-n}, \\ldots, w_{i-1}\\right) \\] \u4e0a\u9762\u7684\u516c\u5f0f\u5728\u8bed\u97f3\u8bc6\u522b\u548c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u5224\u65ad\u4e00\u4e2a\u8bcd\u5e8f\u5217\u662f\u5426\u4e3a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u51c6\u786e\u7ffb\u8bd1\u8d77\u5230\u4e86\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u73b0\u6709\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u6bcf\u4e2a\u77ed\u8bed/\u53e5\u5b50\u7ffb\u8bd1\uff0c\u7cfb\u7edf\u751f\u6210\u4e00\u4e9b\u5019\u9009\u7684\u8bcd\u5e8f\u5217\uff08\u4f8b\u5982\uff0c{I have,I has,I had,me have,me had}\uff09\uff0c\u5e76\u5bf9\u5176\u8bc4\u5206\u4ee5\u786e\u5b9a\u6700\u53ef\u80fd\u7684\u7ffb\u8bd1\u5e8f\u5217\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u5bf9\u4e00\u4e2a\u8f93\u5165\u77ed\u8bed\uff0c\u901a\u8fc7\u8bc4\u5224\u6bcf\u4e2a\u5019\u9009\u8f93\u51fa\u8bcd\u5e8f\u5217\u7684\u5f97\u5206\u7684\u9ad8\u4f4e\uff0c\u6765\u9009\u51fa\u6700\u597d\u7684\u8bcd\u987a\u5e8f\u3002\u4e3a\u6b64\uff0c\u6a21\u578b\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5355\u8bcd\u6392\u5e8f\u6216\u5355\u8bcd\u9009\u62e9\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002\u5b83\u5c06\u901a\u8fc7\u4e00\u4e2a\u6982\u7387\u51fd\u6570\u8fd0\u884c\u6240\u6709\u5355\u8bcd\u5e8f\u5217\u5019\u9009\u9879\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5019\u9009\u9879\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u6700\u9ad8\u5f97\u5206\u7684\u5e8f\u5217\u5c31\u662f\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u76f8\u6bd4 small is the cat\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 the cat is small \u66f4\u9ad8\u7684\u5f97\u5206\uff1b\u76f8\u6bd4 walking house after school\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 walking home after school \u66f4\u9ad8\u7684\u5f97\u5206\u3002 1.2 n-gram Language Models \u4e3a\u4e86\u8ba1\u7b97\u8fd9\u4e9b\u6982\u7387\uff0c\u6bcf\u4e2a n-gram \u7684\u8ba1\u6570\u5c06\u4e0e\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u4e2a\u79f0\u4e3a n-gram \u8bed\u8a00\u6a21\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9 bi-gram \u6a21\u578b\uff0c\u6bcf\u4e00\u4e2a bi-gram \u7684\u9891\u7387\uff0c\u901a\u8fc7\u5c06\u5355\u8bcd\u4e0e\u5176\u524d\u4e00\u4e2a\u5355\u8bcd\u76f8\u7ed3\u5408\u8fdb\u884c\u8ba1\u7b97\uff0c\u7136\u540e\u9664\u4ee5\u5bf9\u5e94\u7684 uni-gram \u7684\u9891\u7387\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u516c\u5f0f\u5c55\u793a\u4e86 bi-gram \u6a21\u578b\u548c tri-gram \u6a21\u578b\u7684\u533a\u522b\u3002 \\[ \\begin{aligned} p\\left(w_{2} | w_{1}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}\\right)}{\\operatorname{count}\\left(w_{1}\\right)} \\\\ p\\left(w_{3} | w_{1}, w_{2}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}, w_{3}\\right)}{\\operatorname{count}\\left(w_{1}, w_{2}\\right)} \\end{aligned} \\] \u4e0a\u5f0f tri-gram \u6a21\u578b\u7684\u5173\u7cfb\u4e3b\u8981\u662f\u57fa\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u5373\u524dn\u4e2a\u5355\u8bcd)\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e00\u822c n \u7684\u53d6\u503c\u4e3a\u591a\u5927\u624d\u597d\u5462\uff1f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u8fde\u7eed\u7684 n \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3\u53ef\u80fd\u4e0d\u8db3\u4ee5\u6355\u83b7\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u53e5\u5b50\uff08\u7c7b\u4f3c\u5b8c\u5f62\u586b\u7a7a\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff09 \u201cAsthe proctor started the clock, the students opened their ____\u201d\u3002\u5982\u679c\u7a97\u53e3\u53ea\u662f\u57fa\u4e8e\u524d\u9762\u7684\u4e09\u4e2a\u5355\u8bcd\u201cthe students opened their\u201d\uff0c\u90a3\u4e48\u6025\u4e8e\u8fd9\u4e9b\u8bed\u6599\u8ba1\u7b97\u7684\u4e0b\u5212\u7ebf\u4e2d\u6700\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u5c31\u662f\u4e3a\u201cbooks\u201d\u2014\u2014\u4f46\u662f\u5982\u679c n \u8db3\u591f\u5927\uff0c\u80fd\u5305\u62ec\u5168\u90e8\u7684\u4e0a\u4e0b\u6587\uff0c\u90a3\u4e48\u4e0b\u5212\u7ebf\u4e2d\u6700\u4f18\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u662f\u201cexam\u201d\u3002 \u8fd9\u5c31\u5f15\u51fa\u4e86 n-gram \u8bed\u8a00\u6a21\u578b\u7684\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a\u7a00\u758f\u6027\u548c\u5b58\u50a8\u3002 Sparsity problems with n-gram Language models n-gram \u8bed\u8a00\u6a21\u578b\u7684\u95ee\u9898\u6e90\u4e8e\u4e24\u4e2a\u95ee\u9898\u3002 \u9996\u5148\uff0c\u6ce8\u610f\u516c\u5f0f\u4e2d\u7684\u5206\u5b50\u3002\u5982\u679c \\(w_1,w_2.w_3\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c31\u662f 0\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u8ba1\u6570\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u5f88\u5c0f\u7684 \\(\\delta\\) \uff0c\u8fd9\u5c31\u662f\u5e73\u6ed1\u64cd\u4f5c\u3002 \u7136\u540e\uff0c\u8003\u8651\u516c\u5f0f\u4e2d\u7684\u5206\u6bcd\u3002 \u5982\u679c \\(w_1,w_2\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c06\u4f1a\u65e0\u6cd5\u8ba1\u7b97\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5\u53ea\u662f\u5355\u72ec\u8003\u8651 \\(w_2\\) \uff0c\u8fd9\u5c31\u662f\u201cbackoff\u201d\u64cd\u4f5c\u3002 \u589e\u52a0 n \u4f1a\u8ba9\u7a00\u758f\u95ee\u9898\u66f4\u52a0\u4e25\u91cd\uff0c\u6240\u4ee5\u4e00\u822c \\(n \\leq 5\\) \u3002 Storage problems with n-gram Language models \u6211\u4eec\u77e5\u9053\u9700\u8981\u5b58\u50a8\u5728\u8bed\u6599\u5e93\u4e2d\u770b\u5230\u7684\u6240\u6709 n-gram \u7684\u7edf\u8ba1\u6570\u3002\u968f\u7740 n \u7684\u589e\u52a0(\u6216\u8bed\u6599\u5e93\u5927\u5c0f\u7684\u589e\u52a0)\uff0c\u6a21\u578b\u7684\u5927\u5c0f\u4e5f\u4f1a\u589e\u52a0\u3002 1.3 Window-based Neural Language Model Bengio \u7684\u8bba\u6587\u300aA Neural Probabilistic Language Model\u300b\u4e2d\u9996\u6b21\u89e3\u51b3\u4e86\u4e0a\u9762\u6240\u8bf4\u7684\u201c\u7ef4\u5ea6\u707e\u96be\u201d\uff0c\u8fd9\u7bc7\u8bba\u6587\u63d0\u51fa\u4e00\u4e2a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5927\u89c4\u6a21\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e2a\u6a21\u578b\u80fd\u591f\u901a\u8fc7\u5b66\u4e60\u5355\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ee5\u53ca\u7528\u8fd9\u4e9b\u8868\u793a\u6765\u8868\u793a\u5355\u8bcd\u7684\u6982\u7387\u51fd\u6570\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u5bf9\u5e94\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u8f93\u5165\u5411\u91cf\u5728\u9690\u85cf\u5c42\u548c\u8f93\u51fa\u5c42\u4e2d\u90fd\u88ab\u4f7f\u7528\u3002 \u4e0b\u9762\u516c\u5f0f\u5c55\u793a\u4e86\u7531\u6807\u51c6 tanh \u51fd\u6570\uff08\u5373\u9690\u85cf\u5c42\uff09\u7ec4\u6210\u7684 softmax \u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u7ebf\u6027\u51fd\u6570 \\(W^{(3)} x+b^{(3)}\\) \uff0c\u6355\u83b7\u6240\u6709\u524d\u9762 n \u4e2a\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\[ \\hat{y}=\\operatorname{softmax}\\left(W^{(2)} \\tanh \\left(W^{(1)}x+b^{(1)}\\right)+W^{(3)} x+b^{(3)}\\right) \\] \u6ce8\u610f\u6743\u91cd\u77e9\u9635 \\(W^{(1)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\u4e0a\uff08\u4e0a\u56fe\u4e2d\u7684\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\uff0c \\(W^{(2)}\\) \u662f\u5e94\u7528\u5728\u9690\u85cf\u5c42\uff08\u4e5f\u662f\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\u548c \\(W^{(3)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\uff08\u7eff\u8272\u865a\u7ebf\u7bad\u5934\uff09\u3002 \u8fd9\u4e2a\u6a21\u578b\u7684\u7b80\u5316\u7248\u672c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u84dd\u8272\u7684\u5c42\u8868\u793a\u8f93\u5165\u5355\u8bcd\u7684 embedding \u62fc\u63a5\uff1a \\(e=\\left[e^{(1)} ; e^{(2)} ; e^{(3)} ; e^{(4)}\\right]\\) \uff0c\u7ea2\u8272\u7684\u5c42\u8868\u793a\u9690\u85cf\u5c42\uff1a \\(\\boldsymbol{h}=f\\left(\\boldsymbol{W} e+\\boldsymbol{b}_{1}\\right)\\) \uff0c\u7eff\u8272\u7684\u8f93\u51fa\u5206\u5e03\u662f\u5bf9\u8bcd\u8868\u7684\u4e00\u4e2a softmax \u6982\u7387\u5206\u5e03\uff1a \\(\\hat{y}=\\operatorname{softmax}\\left(U h+b_{2}\\right)\\) \u3002","title":"1 Language Models"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#2-recurrent-neural-networks-rnn","text":"\u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u53ea\u80fd\u4ee5\u6709\u9650\u7a97\u53e3\u5927\u5c0f\u7684\u524d n \u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\uff0c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0e\u5176\u4e0d\u540c\uff0cRNN \u6709\u80fd\u529b\u4ee5\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u524d\u9762\u7684\u5355\u8bcd\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\u3002 \u4e0b\u56fe\u5c55\u793a\u7684 RNN \u7684\u67b6\u6784\uff0c\u5176\u4e2d\u77e9\u5f62\u6846\u662f\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u4e00\u4e2a\u9690\u85cf\u5c42 t\u3002 \u6bcf\u4e2a\u8fd9\u6837\u7684\u9690\u85cf\u5c42\u90fd\u6709\u82e5\u5e72\u4e2a\u795e\u7ecf\u5143\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u5bf9\u8f93\u5165\u5411\u91cf\u7528\u4e00\u4e2a\u7ebf\u6027\u77e9\u9635\u8fd0\u7b97\u7136\u540e\u901a\u8fc7\u975e\u7ebf\u6027\u53d8\u5316\uff08\u4f8b\u5982 tanh \u51fd\u6570\uff09\u5f97\u5230\u8f93\u51fa\u3002\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u9690\u85cf\u5c42\u90fd\u6709\u4e24\u4e2a\u8f93\u5165\uff1a\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \uff0c\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u901a\u8fc7\u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hh)}\\) \u76f8\u4e58\u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hx)}\\) \u76f8\u4e58\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_t\\) \uff0c\u7136\u540e\u518d\u5c06 \\(h_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(S)}\\) \u76f8\u4e58\uff0c\u63a5\u7740\u5bf9\u6574\u4e2a\u8bcd\u8868\u901a\u8fc7 softmax \u8ba1\u7b97\u5f97\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u9884\u6d4b\u7ed3\u679c \\(\\hat y\\) \uff0c\u5982\u4e0b\u9762\u516c\u5f0f\u6240\u793a\uff1a \\[ \\begin{aligned} h_{t} &=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{[t]}\\right) \\\\ \\hat{y} &=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right) \\end{aligned} \\] \u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u662f\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd \\(W^{(hh)}\\) \u548c \\(W^{(hx)}\\) \u3002\u8fd9\u6837\u6a21\u578b\u9700\u8981\u5b66\u4e60\u7684\u53c2\u6570\u5c31\u53d8\u5c11\u4e86\uff0c\u8fd9\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6\u65e0\u5173\u2014\u2014\u8fd9\u4ece\u800c\u89e3\u51b3\u4e86\u7ef4\u5ea6\u707e\u96be\u3002 \u4ee5\u4e0b\u662f\u7f51\u7edc\u4e2d\u6bcf\u4e2a\u53c2\u6570\u76f8\u5173\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \\(x_{1}, \\dots, x_{t-1}, x_{t}, x_{t+1}, \\dots x_{T}\\) \uff1a\u542b\u6709 T \u4e2a\u5355\u8bcd\u7684\u8bed\u6599\u5e93\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \\(h_{t}=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)\\) \uff1a\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa\u7279\u5f81\u7684\u8ba1\u7b97\u5173\u7cfb \\(x_{t} \\in \\mathbb{R}^{d}\\) \uff1a\u5728\u65f6\u95f4\u6b65 t \u7684\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\(W^{h x} \\in \\mathbb{R}^{D_{h} \\times d}\\) \uff1a\u8f93\u5165\u8bcd\u5411\u91cf \\(x_t\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(W^{h h} \\in \\mathbb{R}^{D_{h} \\times D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa \\(h_{t-1}\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(h_{t-1} \\in \\mathbb{R}^{D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65 t-1 \u7684\u975e\u7ebf\u6027\u51fd\u6570\u8f93\u51fa\u3002 \\(h_{0} \\in \\mathbb{R}^{D_{h}}\\) \u662f\u5728\u65f6\u95f4\u6b65 t=0 \u7684\u9690\u85cf\u5c42\u7684\u4e00\u4e2a\u521d\u59cb\u5316\u5411\u91cf\u3002 \\(\\sigma\\) \uff1a\u975e\u7ebf\u6027\u51fd\u6570\uff08\u8fd9\u91cc\u662f sigmoid \u51fd\u6570\uff09\u3002 \\(\\hat{y}=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right)\\) \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\u8f93\u51fa\u3002\u672c\u8d28\u4e0a\uff0c \\(\\hat y\\) \u662f\u7ed9\u5b9a\u6587\u6863\u4e0a\u4e0b\u6587\u5206\u6570\uff08\u4f8b\u5982 \\(h_{t-1}\\) \uff09\u548c\u6700\u540e\u89c2\u6d4b\u7684\u8bcd\u5411\u91cf \\(x_t\\) \uff0c\u5bf9\u4e00\u4e2a\u51fa\u73b0\u5355\u8bcd\u7684\u9884\u6d4b\u3002\u8fd9\u91cc\uff0c \\(W^{(S)} \\in \\mathbb{R}^{|V| \\times D_{h}}\\) \uff0c \\(\\hat{y} \\in \\mathbb{R}^{|V|}\\) \uff0c\u5176\u4e2d \\(|V|\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002 \u4e00\u4e2a RNN \u8bed\u8a00\u6a21\u578b\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\u3002\u4e0b\u56fe\u4e2d\u7684\u7b26\u53f7\u6709\u4e00\u4e9b\u7684\u4e0d\u540c\uff1a \\(W_h\\) \u7b49\u540c\u4e8e \\(W^{(hh)}\\) \uff0c \\(W_e\\) \u7b49\u540c\u4e8e \\(W^{(hx)}\\) \uff0c \\(U\\) \u7b49\u540c\u4e8e \\(W^{(S)}\\) \u3002 \\(E\\) \u8868\u793a\u5355\u8bcd\u8f93\u5165 \\(x^{(t)}\\) \u8f6c\u5316\u4e3a \\(e^{(t)}\\) \u3002 \u5728 RNN \u4e2d\u5e38\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u5728\u4e4b\u524d\u4ecb\u7ecd\u8fc7\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002\u4e0b\u9762\u7684\u516c\u5f0f\u662f\u8fd9\u4e2a\u51fd\u6570\u5728\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6c42\u548c\u3002\u6700\u540e\u8ba1\u7b97\u8bcd\u8868\u4e2d\u7684 softmax \u8ba1\u7b97\u7ed3\u679c\u5c55\u793a\u4e86\u57fa\u4e8e\u524d\u9762\u6240\u6709\u7684\u5355\u8bcd\u5bf9\u8f93\u51fa\u5355\u8bcd \\(x^{(5)}\\) \u7684\u4e0d\u540c\u9009\u62e9\u7684\u6982\u7387\u5206\u5e03\u3002\u8fd9\u65f6\u7684\u8f93\u5165\u53ef\u4ee5\u6bd4 4 \u5230 5 \u4e2a\u5355\u8bcd\u66f4\u957f\u3002 2.1 RNN Loss and Perplexity RNN \u7684\u635f\u5931\u51fd\u6570\u4e00\u822c\u662f\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002 \\[ J^{(t)}(\\theta)=\\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] \u5728\u5927\u5c0f\u4e3a T \u7684\u8bed\u6599\u5e93\u4e0a\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \\[ J=-\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] 2.2 Advantages, Disadvantages and Applications of RNNs RNN \u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u5b83\u53ef\u4ee5\u5904\u7406\u4efb\u610f\u957f\u5ea6\u7684\u5e8f\u5217 \u5bf9\u66f4\u957f\u7684\u8f93\u5165\u5e8f\u5217\u4e0d\u4f1a\u589e\u52a0\u6a21\u578b\u7684\u53c2\u6570\u5927\u5c0f \u5bf9\u65f6\u95f4\u6b65 t \u7684\u8ba1\u7b97\u7406\u8bba\u4e0a\u53ef\u4ee5\u5229\u7528\u524d\u9762\u5f88\u591a\u65f6\u95f4\u6b65\u7684\u4fe1\u606f \u5bf9\u8f93\u5165\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709\u5bf9\u79f0\u6027 \u4f46\u662f RNN \u4e5f\u6709\u4ee5\u4e0b\u7f3a\u70b9\uff1a \u8ba1\u7b97\u901f\u5ea6\u5f88\u6162\u2014\u2014\u56e0\u4e3a\u5b83\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u9700\u8981\u4f9d\u8d56\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u6240\u4ee5\u4e0d\u80fd\u5e76\u884c\u5316 \u5728\u5b9e\u9645\u4e2d\u56e0\u4e3a\u68af\u5ea6\u6d88\u5931\u548c\u68af\u5ea6\u7206\u70b8\uff0c\u5f88\u96be\u5229\u7528\u5230\u524d\u9762\u65f6\u95f4\u6b65\u7684\u4fe1\u606f\u3002 \u8fd0\u884c\u4e00\u5c42 RNN \u6240\u9700\u7684\u5185\u5b58\u91cf\u4e0e\u8bed\u6599\u5e93\u4e2d\u7684\u5355\u8bcd\u6570\u6210\u6b63\u6bd4\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u53e5\u5b50\u662f\u4e3a\u4e00\u4e2a mini batch\uff0c\u90a3\u4e48\u4e00\u4e2a\u6709 k \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u5728\u5185\u5b58\u4e2d\u5c31\u4f1a\u5360\u7528 k \u4e2a\u8bcd\u5411\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u540c\u65f6\uff0cRNN \u5fc5\u987b\u7ef4\u6301\u4e24\u5bf9 \\(W\\) \u548c \\(b\\) \u77e9\u9635\u3002\u7136\u800c \\(W\\) \u7684\u53ef\u80fd\u662f\u975e\u5e38\u5927\u7684\uff0c\u5b83\u7684\u5927\u5c0f\u4e0d\u4f1a\u968f\u7740\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u800c\u53d8\u5316\uff08\u4e0e\u4f20\u7edf\u7684\u8bed\u8a00\u6a21\u578b\u4e0d\u4e00\u6837\uff09\u3002\u5bf9\u4e8e\u5177\u6709 1000 \u4e2a\u5faa\u73af\u5c42\u7684 RNN\uff0c\u77e9\u9635 \\(W\\) \u7684\u5927\u5c0f\u4e3a \\(1000 \\times 1000\\) \u800c\u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u65e0\u5173\u3002 RNN \u53ef\u4ee5\u5e94\u7528\u5728\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u6807\u6ce8\u4efb\u52a1\uff08\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff09\uff0c\u53e5\u5b50\u5206\u7c7b\uff08\u60c5\u611f\u5206\u7c7b\uff09\uff0c\u7f16\u7801\u6a21\u5757\uff08\u95ee\u7b54\u4efb\u52a1\uff0c\u673a\u5668\u7ffb\u8bd1\u548c\u5176\u4ed6\u5f88\u591a\u4efb\u52a1\uff09\u3002\u5728\u540e\u9762\u7684\u4e24\u4e2a\u4efb\u52a1\uff0c\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u5bf9\u53e5\u5b50\u7684\u8868\u793a\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u91c7\u7528\u8be5\u53e5\u5b50\u4e2d\u65f6\u95f4\u6b65\u957f\u7684\u6240\u6709\u9690\u85cf\u72b6\u6001\u7684 \\(element-wise\\) \u7684\u6700\u5927\u503c\u6216\u5e73\u5747\u503c\u6765\u83b7\u5f97\u3002 \u4e0b\u56fe\u662f\u4e00\u4e9b\u51fa\u7248\u7269\u4e2d\u5bf9 RNN \u6a21\u578b\u7684\u53e6\u5916\u4e00\u79cd\u8868\u793a\u3002\u5b83\u5c06 RNN \u7684\u6bcf\u4e2a\u9690\u5c42\u7528\u4e00\u4e2a\u73af\u6765\u8868\u793a\u3002 2.3 Vanishing Gradient & Gradient Explosion Problems RNN \u4ece\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f20\u64ad\u6743\u503c\u77e9\u9635\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u3002\u56de\u60f3\u4e00\u4e0b\uff0cRNN \u5b9e\u73b0\u7684\u76ee\u6807\u662f\u901a\u8fc7\u957f\u8ddd\u79bb\u7684\u65f6\u95f4\u6b65\u6765\u4f20\u64ad\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u4ee5\u4e0b\u4e24\u4e2a\u53e5\u5b50\uff1a \u5bf9\u4e0a\u9762\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u6839\u636e\u4e0a\u4e0b\u6587\uff0c\u90fd\u53ef\u4ee5\u77e5\u9053\u7a7a\u767d\u5904\u7684\u7b54\u6848\u662f\u201cJohn\u201d,\u7b2c\u4e8c\u4e2a\u5728\u4e24\u4e2a\u53e5\u5b50\u7684\u4e0a\u4e0b\u6587\u4e2d\u5747\u63d0\u53ca\u4e86\u597d\u51e0\u6b21\u7684\u4eba\u3002\u8fc4\u4eca\u4e3a\u6b62\u6211\u4eec\u5bf9 RNN \u7684\u4e86\u89e3\uff0c\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0cRNN \u4e5f\u662f\u80fd\u591f\u8ba1\u7b97\u5f97\u5230\u6b63\u786e\u7684\u7b54\u6848\u3002\u7136\u800c\uff0c\u5728\u5b9e\u9645\u4e2d\uff0cRNN \u9884\u6d4b\u53e5\u5b50\u4e2d\u7684\u7a7a\u767d\u5904\u7b54\u6848\u6b63\u786e\u53ef\u80fd\u6027\uff0c\u7b2c\u4e00\u53e5\u8981\u6bd4\u7b2c\u4e8c\u53e5\u9ad8\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u53cd\u5411\u4f20\u64ad\u7684\u9636\u6bb5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u524d\u9762\u65f6\u95f4\u6b65\u4e2d\u56de\u4f20\u8fc7\u6765\u7684\u68af\u5ea6\u503c\u4f1a\u9010\u6e10\u6d88\u5931\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u957f\u53e5\u5b50\uff0c\u9884\u6d4b\u5230\u201cJohn\u201d\u662f\u7a7a\u767d\u5904\u7684\u7b54\u6848\u7684\u6982\u7387\u4f1a\u968f\u7740\u4e0a\u4e0b\u6587\u4fe1\u606f\u589e\u5927\u800c\u51cf\u5c11\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u8ba8\u8bba\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u80cc\u540e\u7684\u6570\u5b66\u539f\u56e0\u3002 \u8003\u8651\u516c\u5f0f\u5728\u65f6\u95f4\u6b65 t \uff0c\u8ba1\u7b97 RNN \u8bef\u5dee \\(\\frac{dE}{dW}\\) \uff0c\u7136\u540e\u6211\u4eec\u628a\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u8bef\u5dee\u90fd\u52a0\u8d77\u6765\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ba1\u7b97\u5e76\u7d2f\u79ef\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f t \u7684 \\( \\(\\frac{dE_t}{dW}\\) \\) \u3002 \\[ \\frac{\\partial E}{\\partial W}=\\sum_{i=1}^{T} \\frac{\\partial E_{t}}{\\partial W} \\] \u901a\u8fc7\u5c06\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u5e94\u7528\u4e8e\u516c\u5f0f (6) \u548c (5) \u6765\u8ba1\u7b97\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u8bef\u5dee\uff1b\u516c\u5f0f (11) \u5c55\u793a\u5bf9\u5e94\u7684\u5fae\u5206\u8ba1\u7b97\u3002\u6ce8\u610f \\(\\frac{d h_{t}}{d h_{k}}\\) \u662f \\(h_t\\) \u5bf9\u4e4b\u524d\u6240\u6709\u7684 k \u4e2a\u65f6\u95f4\u6b65\u7684\u504f\u5bfc\u6570\u3002 \\[ \\frac{\\partial E_{t}}{\\partial W}=\\sum_{k=1}^{T} \\frac{\\partial E_{t}}{\\partial y_{t}} \\frac{\\partial y_{t}}{\\partial h_{t}} \\frac{\\partial h_{t}}{\\partial h_{k}} \\frac{\\partial h_{k}}{\\partial W} \\] \u4e0b\u5f0f \u5c55\u793a\u4e86\u8ba1\u7b97\u6bcf\u4e2a \\(\\frac{d h_{t}}{d h_{k}}\\) \u7684\u5173\u7cfb\uff1b\u8fd9\u662f\u5728\u65f6\u95f4\u95f4\u9694 \\([k,t]\\) \u5185\u5bf9\u6240\u6709\u7684\u9690\u85cf\u5c42\u7684\u5e94\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u5fae\u5206\u94fe\u5f0f\u6cd5\u5219\u3002 \\[ \\frac{\\partial h_{t}}{\\partial h_{k}}=\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}=\\prod_{j=k+1}^{t} W^{T} \\times \\operatorname{diag}\\left[f^{\\prime}\\left(j_{j-1}\\right)\\right] \\] \u56e0\u4e3a \\(h \\in \\mathbb{R}^{D_{n}}\\) \uff0c\u6bcf\u4e2a \\(\\frac{\\partial h_{j}}{\\partial h_{j-1}}\\) \u662f h \u7684 Jacobian \u77e9\u9635\u7684\u5143\u7d20\uff1a \\[ \\frac{\\partial h_{j}}{\\partial h_{j-1}}=\\left[\\frac{\\partial h_{j}}{\\partial h_{j-1,1}} \\cdots \\frac{\\partial h_{j}}{\\partial h_{j-1, D_{n}}}\\right]=\\left[\\begin{array}{ccc}{\\frac{\\partial h_{j, 1}}{\\partial h_{j-1,1}}} & {\\cdots} & {\\frac{\\partial h_{j,1}}{\\partial h_{j-1, D_{n}}}} \\\\ {\\vdots} & {\\ddots} & {\\vdots} \\\\ {\\frac{\\partial h_{j, D_{n}}}{\\partial h_{j - 1,1}}} & {\\cdots} & {\\frac{\\partial h_{j, D_{n}}}{\\partial h_{j-1, D_{n}}}}\\end{array}\\right] \\] \u5c06\u516c\u5f0f\u5408\u8d77\u6765\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u5173\u7cfb\u3002 \\[ \\frac{\\partial E}{\\partial W}=\\sum_{t=1}^{T} \\sum_{k=1}^{t} \\frac{\\partial E_{t}}{\\partial y_{t}} \\frac{\\partial y_{t}}{\\partial h_{t}}\\left(\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right) \\frac{\\partial h_{k}}{\\partial W} \\] \u4e0b\u5f0f\u5c55\u793a\u4e86 Jacobian \u77e9\u9635\u7684\u8303\u6570\u3002\u8fd9\u91cc\u7684 \\(\\beta_{W}\\) \u548c \\(\\beta_{h}\\) \u662f\u8fd9\u4e24\u4e2a\u77e9\u9635\u8303\u6570\u7684\u4e0a\u754c\u503c\u3002\u56e0\u6b64\u901a\u8fc7\u516c\u5f0f\u6240\u793a\u7684\u5173\u7cfb\u8ba1\u7b97\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u90e8\u5206\u68af\u5ea6\u8303\u6570\u3002 \\[ \\left\\|\\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right\\| \\leq\\left\\|W^{T}\\right\\|\\left\\|\\operatorname{diag}\\left[f^{\\prime}\\left(h_{j-1}\\right)\\right]\\right\\| \\leq \\beta_{W} \\beta_{h} \\] \u8ba1\u7b97\u8fd9\u4e24\u4e2a\u77e9\u9635\u7684 L2 \u8303\u6570\u3002\u5728\u7ed9\u5b9a\u7684\u975e\u7ebf\u6027\u51fd\u6570 sigmoid \u4e0b\uff0c \\(f^{\\prime}\\left(h_{j-1}\\right)\\) \u7684\u8303\u6570\u53ea\u80fd\u7b49\u4e8e 1\u3002 \\[ \\left\\|\\frac{\\partial h_{t}}{\\partial h_{k}}\\right\\|=\\left\\|\\prod_{j=k+1}^{t} \\frac{\\partial h_{j}}{\\partial h_{j-1}}\\right\\| \\leq\\left(\\beta_{W} \\beta_{h}\\right)^{t-k} \\] \u5f53 \\(t - k\\) \u8db3\u591f\u5927\u548c \\(\\beta_{W} \\beta_{h}\\) \u8fdc\u8fdc\u5c0f\u4e8e 1 \u6216\u8005\u8fdc\u8fdc\u5927\u4e8e 1\uff0c\u6307\u6570\u9879 \\(\\left(\\beta_{W} \\beta_{h}\\right)^{t-k}\\) \u7684\u503c\u5c31\u5f88\u5bb9\u6613\u53d8\u5f97\u975e\u5e38\u5c0f\u6216\u8005\u975e\u5e38\u5927\u3002\u7531\u4e8e\u5355\u8bcd\u4e4b\u95f4\u7684\u8ddd\u79bb\u8fc7\u5927\uff0c\u7528\u4e00\u4e2a\u5f88\u5927\u7684 \\(t-k\\) \u8bc4\u4f30\u4ea4\u53c9\u71b5\u8bef\u5dee\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u5728\u53cd\u5411\u4f20\u64ad\u7684\u65e9\u671f\u5c31\u51fa\u73b0\u68af\u5ea6\u6d88\u5931\uff0c\u90a3\u4e48\u8fdc\u5904\u5355\u8bcd\u5bf9\u5728\u65f6\u95f4\u6b65\u957f t \u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u4e2d\uff0c\u6240\u8d77\u5230\u7684\u4f5c\u7528\u5c31\u4f1a\u53d8\u5f97\u5f88\u5c0f\u3002 \u5728\u5b9e\u9a8c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u65e6\u68af\u5ea6\u7684\u503c\u53d8\u5f97\u975e\u5e38\u5927\uff0c\u4f1a\u5bfc\u81f4\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5bb9\u6613\u68c0\u6d4b\u5230\u5176\u5f15\u8d77\u7684\u6ea2\u51fa\uff08\u5373 NaN\uff09\uff1b\u8fd9\u6837\u7684\u95ee\u9898\u79f0\u4e3a\u68af\u5ea6\u7206\u70b8\u95ee\u9898\u3002\u7136\u800c\uff0c\u5f53\u68af\u5ea6\u63a5\u8fd1\u4e3a 0 \u7684\u65f6\u5019\uff0c\u68af\u5ea6\u8fd1\u4e4e\u4e0d\u518d\u5b58\u5728\uff0c\u540c\u65f6\u964d\u4f4e\u6a21\u578b\u5bf9\u8bed\u6599\u5e93\u4e2d\u7684\u8fdc\u8ddd\u79bb\u7684\u5355\u8bcd\u7684\u5b66\u4e60\u8d28\u91cf\uff1b\u8fd9\u6837\u7684\u95ee\u9898\u79f0\u4e3a\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002\u5982\u679c\u76f8\u5bf9\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u7684\u6709\u66f4\u76f4\u89c2\u7684\u4e86\u89e3\uff0c\u4f60\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a \u6837\u4f8b\u7f51\u7ad9 \u3002 2.4 Solution to the Exploding & Vanishing Gradients \u73b0\u5728\u6211\u4eec\u77e5\u9053\u4e86\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u7684\u672c\u8d28\u4ee5\u53ca\u5b83\u5728\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u4e2d\u5982\u4f55\u8868\u73b0\u51fa\u6765\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e9b\u7b80\u5355\u5b9e\u7528\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002 \u4e3a\u4e86\u89e3\u51b3\u68af\u5ea6\u7206\u70b8\u7684\u95ee\u9898\uff0cThomas Mikolov \u7b49\u4eba\u9996\u5148\u63d0\u51fa\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u6bcf\u5f53\u68af\u5ea6\u5927\u4e8e\u4e00\u4e2a\u9608\u503c\u7684\u65f6\u5019\uff0c\u5c06\u5176\u622a\u65ad\u4e3a\u4e00\u4e2a\u5f88\u5c0f\u7684\u503c\uff0c\u5177\u4f53\u5982\u4e0b\u9762\u7b97\u6cd5\u4e2d\u7684\u4f2a\u4ee3\u7801\u6240\u793a\u3002 \u4e0b\u56fe\u53ef\u89c6\u5316\u4e86\u68af\u5ea6\u622a\u65ad\u7684\u6548\u679c\u3002\u5b83\u5c55\u793a\u4e86\u4e00\u4e2a\u6743\u503c\u77e9\u9635\u4e3a \\(W\\) \u548c\u504f\u7f6e\u9879\u4e3a \\(b\\) \u7684\u5f88\u5c0f\u7684 RNN \u795e\u7ecf\u7f51\u7edc\u7684\u51b3\u7b56\u754c\u9762\u3002\u8be5\u6a21\u578b\u7531\u4e00\u4e2a\u5355\u4e00\u5355\u5143\u7684\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7ec4\u6210\uff0c\u5728\u5c11\u91cf\u7684\u65f6\u95f4\u6b65\u957f\u4e0a\u8fd0\u884c\uff1b\u5b9e\u5fc3\u7bad\u5934\u9610\u8ff0\u4e86\u5728\u6bcf\u4e2a\u68af\u5ea6\u4e0b\u964d\u6b65\u9aa4\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002\u5f53\u5728\u68af\u5ea6\u4e0b\u964d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6a21\u578b\u78b0\u5230\u76ee\u6807\u51fd\u6570\u4e2d\u7684\u9ad8\u8bef\u5dee\u58c1\u65f6\uff0c\u68af\u5ea6\u88ab\u63a8\u5230\u51b3\u7b56\u9762\u4e0a\u7684\u4e00\u4e2a\u9065\u8fdc\u7684\u4f4d\u7f6e\u3002\u622a\u65ad\u6a21\u578b\u751f\u6210\u4e86\u865a\u7ebf\uff0c\u5728\u90a3\u91cc\u5b83\u5c06\u8bef\u5dee\u68af\u5ea6\u62c9\u56de\u5230\u9760\u8fd1\u539f\u59cb\u68af\u5ea6\u7684\u5730\u65b9\u3002 \u4e3a\u4e86\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e24\u4e2a\u6280\u672f\u3002\u7b2c\u4e00\u4e2a\u6280\u672f\u662f\u4e0d\u53bb\u968f\u673a\u521d\u59cb\u5316 \\(W^{(hh)}\\) \uff0c\u800c\u662f\u521d\u59cb\u5316\u4e3a\u5355\u4f4d\u77e9\u9635\u3002 \u7b2c\u4e8c\u4e2a\u6280\u672f\u662f\u4f7f\u7528 Rectified Linear\uff08ReLU\uff09\u5355\u5143\u4ee3\u66ff sigmoid \u51fd\u6570\u3002ReLU \u7684\u5bfc\u6570\u662f 0 \u6216\u8005 1\u3002\u8fd9\u6837\u68af\u5ea6\u4f20\u56de\u795e\u7ecf\u5143\u7684\u5bfc\u6570\u662f 1\uff0c\u800c\u4e0d\u4f1a\u5728\u53cd\u5411\u4f20\u64ad\u4e86\u4e00\u5b9a\u7684\u65f6\u95f4\u6b65\u540e\u68af\u5ea6\u53d8\u5c0f\u3002 2.5 Deep Bidirectional RNNs \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u7528 RNN \u5982\u4f55\u4f7f\u7528\u8fc7\u53bb\u7684\u8bcd\u6765\u9884\u6d4b\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u540c\u7406\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee4 RNN \u6a21\u578b\u5411\u53cd\u5411\u8bfb\u53d6\u8bed\u6599\u5e93\uff0c\u6839\u636e\u672a\u6765\u5355\u8bcd\u8fdb\u884c\u9884\u6d4b\u3002Irsoy \u7b49\u4eba\u5c55\u793a\u4e86\u4e00\u4e2a\u53cc\u5411\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\uff1b\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t\uff0c\u8fd9\u4e2a\u7f51\u7edc\u7ef4\u6301\u4e24\u4e2a\u9690\u85cf\u5c42\uff0c\u4e00\u4e2a\u662f\u4ece\u5de6\u5230\u53f3\u4f20\u64ad\u800c\u53e6\u5916\u4e00\u4e2a\u662f\u4ece\u53f3\u5230\u5de6\u4f20\u64ad\u3002\u4e3a\u4e86\u5728\u4efb\u4f55\u65f6\u5019\u7ef4\u6301\u4e24\u4e2a\u9690\u85cf\u5c42\uff0c\u8be5\u7f51\u7edc\u8981\u6d88\u8017\u7684\u4e24\u500d\u5b58\u50a8\u7a7a\u95f4\u6765\u5b58\u50a8\u6743\u503c\u548c\u504f\u7f6e\u53c2\u6570\u3002\u6700\u540e\u7684\u5206\u7c7b\u7ed3\u679c \\(\\hat y\\) \uff0c\u662f\u7ed3\u5408\u7531\u4e24\u4e2a RNN \u9690\u85cf\u5c42\u751f\u6210\u7684\u7ed3\u679c\u5f97\u5206\u4ea7\u751f\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u53cc\u5411 RNN \u7684\u7f51\u7edc\u7ed3\u6784\u3002 \u800c\u4e0b\u5f0f\u5c55\u793a\u4e86\u7ed9\u51fa\u4e86\u5efa\u7acb\u53cc\u5411RNN\u9690\u5c42\u7684\u6570\u5b66\u516c\u5f0f\u3002\u4e24\u4e2a\u516c\u5f0f\u4e4b\u95f4\u552f\u4e00\u7684\u533a\u522b\u662f\u9012\u5f52\u8bfb\u53d6\u8bed\u6599\u5e93\u7684\u65b9\u5411\u4e0d\u540c\u3002\u6700\u540e\u4e00\u884c\u5c55\u793a\u4e86\u901a\u8fc7\u603b\u7ed3\u8fc7\u53bb\u548c\u5c06\u6765\u7684\u5355\u8bcd\u8868\u793a\uff0c\u663e\u793a\u7528\u4e8e\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5206\u7c7b\u5173\u7cfb\u3002 \\[ \\overrightarrow{h}_{t}=f\\left(\\overrightarrow{W} x_{t}+\\overrightarrow{V} \\overrightarrow{h}_{t-1}+\\overrightarrow{b}\\right) \\\\ \\overleftarrow{h}_{t}=f\\left(\\overleftarrow{W} x_{t}+\\overleftarrow{V} \\overleftarrow{h}_{t-1}+\\overleftarrow{b}\\right) \\\\ \\hat{y}_{t}=g\\left(U h_{t}+c\\right)=g\\left(U\\left[\\overrightarrow{h}_{t} ; \\overleftarrow{h}_{t}\\right]+c\\right) \\] RNN\u4e5f\u53ef\u4ee5\u662f\u591a\u5c42\u7684\u3002\u4e0b\u56fe\u5c55\u793a\u4e00\u4e2a\u591a\u5c42\u7684\u53cc\u5411 RNN\uff0c\u5176\u4e2d\u4e0b\u9762\u7684\u9690\u85cf\u5c42\u4f20\u64ad\u5230\u4e0b\u4e00\u5c42\u3002\u5982\u56fe\u6240\u793a\uff0c\u5728\u8be5\u7f51\u7edc\u67b6\u6784\u4e2d\uff0c\u5728\u65f6\u95f4\u6b65 t\uff0c\u6bcf\u4e2a\u4e2d\u95f4\u795e\u7ecf\u5143\u4ece\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\uff08\u5728\u76f8\u540c\u7684 RNN \u5c42\uff09\u63a5\u6536\u4e00\u7ec4\u53c2\u6570\u548c\u524d\u4e00\u4e2a RNN \u9690\u85cf\u5c42\u7684\u4e24\u7ec4\u53c2\u6570\uff1b\u8fd9\u4e24\u7ec4\u53c2\u6570\u4e00\u7ec4\u662f\u4ece\u5de6\u5230\u53f3\u7684 RNN \u8f93\u5165\uff0c\u53e6\u5916\u4e00\u7ec4\u662f\u4ece\u53f3\u5230\u5de6\u7684 RNN \u8f93\u5165\u3002 \u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a L \u5c42\u7684\u6df1\u5ea6 RNN\uff0c\u4e0a\u8ff0\u7684\u5173\u7cfb\u8981\u4fee\u6539\u4e3a\u5728\u516c\u5f0f\u4e2d\u7684\u5173\u7cfb\uff0c\u5176\u4e2d\u5728\u7b2c \\(i\\) \u5c42\u7684\u6bcf\u4e2a\u4e2d\u95f4\u795e\u7ecf\u5143\u7684\u8f93\u5165\u662f\u5728\u76f8\u540c\u65f6\u95f4\u6b65 t \u7684 RNN \u7b2c \\(i-1\\) \u5c42\u7684\u8f93\u51fa\u3002\u6700\u540e\u7684\u8f93\u51fa \\(\\hat y\\) \uff0c\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u662f\u8f93\u5165\u53c2\u6570\u901a\u8fc7\u6240\u6709\u9690\u5c42\u4f20\u64ad\u7684\u7ed3\u679c\u3002 \\[ \\overrightarrow{h}_{t}^{(i)}=f\\left(\\overrightarrow{W}^{(i)} h_{t}+\\overrightarrow{V} \\overrightarrow{h}_{t-1}+\\overrightarrow{b}\\right) \\\\ \\overleftarrow{h}_{t}=f\\left(\\overleftarrow{W} x_{t}+\\overleftarrow{V} \\overleftarrow{h}_{t-1}+\\overleftarrow{b}\\right) \\\\ \\hat{y}_{t}=g\\left(U h_{t}+c\\right)=g\\left(U\\left[\\overrightarrow{h}_{t} ; \\overleftarrow{h}_{t}\\right]+c\\right) \\] 2.6 Application: RNN Translation Model \u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u662f\u975e\u5e38\u590d\u6742\u7684\uff1a\u5b83\u4eec\u5305\u542b\u5f88\u591a\u5e94\u7528\u5728\u8bed\u8a00\u7ffb\u8bd1\u6d41\u7a0b\u7684\u4e0d\u540c\u9636\u6bb5\u7684\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u91c7\u7528 RNN \u4f5c\u4e3a\u4f20\u7edf\u7ffb\u8bd1\u6a21\u578b\u7684\u66ff\u4ee3\u65b9\u6cd5\u7684\u6f5c\u529b\u3002\u8003\u8651\u4e0b\u56fe\u4e2d\u5c55\u793a\u7684 RNN \u6a21\u578b\uff1b\u5176\u4e2d\u5fb7\u8bed\u77ed\u8bed Echt dicke Kiste \u7ffb\u8bd1\u4e3a Awesome sauce\u3002 \u9996\u5148\uff0c\u524d\u4e09\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \u7f16\u7801 \u5fb7\u8bed\u5355\u8bcd\u4e3a\u4e00\u4e9b\u8bed\u8a00\u7684\u5355\u8bcd\u7279\u5f81\uff08 \\(h_3\\) \uff09\u3002\u540e\u9762\u4e24\u4e2a\u65f6\u95f4\u6b65\u89e3\u7801 \\(h_3\\) \u4e3a\u82f1\u8bed\u5355\u8bcd\u8f93\u51fa\u3002\u4e0b\u5f0f\u5206\u522b\u5c55\u793a\u4e86\u7f16\u7801\u9636\u6bb5\u548c\u89e3\u7801\u9636\u6bb5(\u540e\u4e24\u884c)\u3002 \\[ \\begin{array}{c}{h_{t}=\\phi\\left(h_{t-1}, x_{t}\\right)=f\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)} \\\\ {h_{t}=\\phi\\left(h_{t-1}\\right)=f\\left(W^{(h h)} h_{t-1}\\right)} \\\\ {y_{t}=\\operatorname{softmax}\\left(W^{(s)} h_{t}\\right)}\\end{array} \\] \u4e00\u822c\u53ef\u4ee5\u8ba4\u4e3a\u4f7f\u7528\u4ea4\u53c9\u71b5\u51fd\u6570\u7684 RNN \u6a21\u578b\u53ef\u4ee5\u751f\u6210\u9ad8\u7cbe\u5ea6\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u5728\u6a21\u578b\u4e2d\u589e\u52a0\u4e00\u4e9b\u6269\u5c55\u65b9\u6cd5\u53ef\u4ee5\u63d0\u5347\u7ffb\u8bd1\u7684\u51c6\u786e\u5ea6\u8868\u73b0\u3002 \\[ \\max _{\\theta} \\frac{1}{N} \\sum_{n=1}^{N} \\log p_{\\theta}\\left(y^{(n)} | x^{(n)}\\right) \\] \u6269\u5c55 1 \uff1a\u5728\u8bad\u7ec3 RNN \u7684\u7f16\u7801\u548c\u89e3\u7801\u9636\u6bb5\u65f6\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u6743\u503c\u3002\u8fd9\u4f7f\u4e24\u4e2a\u5355\u5143\u89e3\u8026\uff0c\u8ba9\u4e24\u4e2a RNN \u6a21\u5757\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8fdb\u884c\u66f4\u7cbe\u786e\u7684\u9884\u6d4b\u3002\u8fd9\u610f\u5473\u7740\u5728\u516c\u5f0f (23) \u548c (24) \u5728 \\(\\phi( )\\) \u51fd\u6570\u4e2d\u662f\u4f7f\u7528\u4e0d\u540c\u7684 \\(W^{(hh)}\\) \u77e9\u9635\u3002 \u6269\u5c55 2 \uff1a\u4f7f\u7528\u4e09\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\u8ba1\u7b97\u89e3\u7801\u5668\u4e2d\u7684\u6bcf\u4e2a\u9690\u85cf\u72b6\u6001 \u524d\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \uff08\u6807\u51c6\u7684\uff09 \u7f16\u7801\u9636\u6bb5\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5c42\uff08\u4e0a\u56fe\u4e2d\u7684 \\(c=h_T\\) \uff09 \u524d\u4e00\u4e2a\u9884\u6d4b\u7684\u8f93\u51fa\u5355\u8bcd \\(\\hat y_{t-1}\\) \u5c06\u4e0a\u8ff0\u7684\u4e09\u4e2a\u8f93\u5165\u7ed3\u5408\u5c06\u4e4b\u524d\u516c\u5f0f\u7684\u89e3\u7801\u51fd\u6570\u4e2d\u7684 \\(\\phi\\) \u51fd\u6570\u8f6c\u6362\u4e3a\u4e0b\u5f0f\u7684 \\(\\phi\\) \u51fd\u6570\u3002\u4e0a\u56fe\u5c55\u793a\u4e86\u8fd9\u4e2a\u6a21\u578b\u3002 \\[ h_{t}=\\phi\\left(h_{t-1}, c, y_{t-1}\\right) \\] \u6269\u5c55 3 \uff1a\u4f7f\u7528\u591a\u4e2a RNN \u5c42\u6765\u8bad\u7ec3\u6df1\u5ea6\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u3002\u795e\u7ecf\u7f51\u7edc\u7684\u5c42\u8d8a\u6df1\uff0c\u6a21\u578b\u7684\u5c31\u5177\u6709\u66f4\u5f3a\u7684\u5b66\u4e60\u80fd\u529b\u4ece\u800c\u80fd\u63d0\u5347\u9884\u6d4b\u7684\u51c6\u786e\u5ea6\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\u9700\u8981\u4f7f\u7528\u5927\u89c4\u6a21\u7684\u8bed\u6599\u5e93\u6765\u8bad\u7ec3\u8fd9\u4e2a\u6a21\u578b\u3002 \u6269\u5c55 4 \uff1a\u8bad\u7ec3\u53cc\u5411\u7f16\u7801\u5668\uff0c\u63d0\u9ad8\u51c6\u786e\u5ea6\u3002 \u6269\u5c55 5 \uff1a\u7ed9\u5b9a\u4e00\u4e2a\u5fb7\u8bed\u8bcd\u5e8f\u5217 A B C\uff0c\u5b83\u7684\u82f1\u8bed\u7ffb\u8bd1\u662f X Y\u3002\u5728\u8bad\u7ec3 \\(RNN\\) \u65f6\u4e0d\u4f7f\u7528 A B C \\(\\to\\) X Y\uff0c\u800c\u662f\u4f7f\u7528 C B A \\(\\to\\) X Y\u3002\u8fd9\u4e48\u5904\u7406\u7684\u539f\u56e0\u662f A \u66f4\u6709\u53ef\u80fd\u88ab\u7ffb\u8bd1\u6210 X\u3002\u56e0\u6b64\u5bf9\u524d\u9762\u8ba8\u8bba\u7684\u68af\u5ea6\u6d88\u5931\u95ee\u9898\uff0c \u53cd\u8f6c\u8f93\u5165\u53e5\u5b50\u7684\u987a\u5e8f\u6709\u52a9\u4e8e\u964d\u4f4e\u8f93\u51fa\u77ed\u8bed\u7684\u9519\u8bef\u7387 \u3002","title":"2 Recurrent Neural Networks (RNN)"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#3-gated-recurrent-units","text":"\u9664\u4e86\u8fc4\u4eca\u4e3a\u6b62\u8ba8\u8bba\u7684\u6269\u5c55\u65b9\u6cd5\u4e4b\u5916\uff0c\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0 RNN \u901a\u8fc7\u4f7f\u7528\u66f4\u590d\u6742\u7684\u6fc0\u6d3b\u5355\u5143\u6765\u83b7\u5f97\u8868\u73b0\u66f4\u597d\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u4ece\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u5411 \\(h_t\\) \u8f6c\u6362\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u4e86\u4e00\u4e2a\u4eff\u5c04\u8f6c\u6362\u548c \\(point-wise\\) \u7684\u975e\u7ebf\u6027\u8f6c\u6362\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u8ba8\u8bba\u95e8\u6fc0\u6d3b\u51fd\u6570\u7684\u4f7f\u7528\u5e76\u4fee\u6539 RNN \u7ed3\u6784\u3002\u867d\u7136\u7406\u8bba\u4e0a RNN \u80fd\u6355\u83b7\u957f\u8ddd\u79bb\u4fe1\u606f\uff0c\u4f46\u5b9e\u9645\u4e0a\u5f88\u96be\u8bad\u7ec3\u7f51\u7edc\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u95e8\u63a7\u5236\u5355\u5143\u53ef\u4ee5\u8ba9 RNN \u5177\u6709\u66f4\u591a\u7684\u6301\u4e45\u6027\u5185\u5b58\uff0c\u4ece\u800c\u66f4\u5bb9\u6613\u6355\u83b7\u957f\u8ddd\u79bb\u4fe1\u606f\u3002\u8ba9\u6211\u4eec\u4ece\u6570\u5b66\u89d2\u5ea6\u4e0a\u8ba8\u8bba GRU \u5982\u4f55\u4f7f\u7528 \\(h_{t-1}\\) \u548c \\(x_t\\) \u6765\u751f\u6210\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u3002\u7136\u540e\u6211\u4eec\u5c06\u6df1\u5165\u4e86\u89e3 GRU \u67b6\u6784\u3002 \\[ \\begin{array}{rlr}{z_{t}} & {=\\sigma\\left(W^{(z)} x_{t}+U^{(z)} h_{t-1}\\right)} & {(\\text {Update gate})} \\\\ {r_{t}} & {=\\sigma\\left(W^{(r)} x_{t}+U^{(r)} h_{t-1}\\right)} & {\\text { (Reset gate) }} \\\\ {\\tilde{h}_{t}} & {=\\tanh \\left(r_{t} \\circ U h_{t-1}+W x_{t}\\right)} & {\\text { (New memory) }} \\\\ {h_{t}} & {=\\left(1-z_{t}\\right) \\circ \\tilde{h}_{t}+z_{t} \\circ h_{t-1}} & {\\text { (Hidden state) }}\\end{array} \\] \u4e0a\u8ff0\u7684\u5171\u8bc6\u53ef\u4ee5\u8ba4\u4e3a\u662f GRU \u7684\u56db\u4e2a\u57fa\u672c\u64cd\u4f5c\u9636\u6bb5\uff0c\u4e0b\u9762\u5bf9\u8fd9\u4e9b\u516c\u5f0f\u4f5c\u51fa\u66f4\u76f4\u89c2\u7684\u89e3\u91ca\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86 GRU \u7684\u57fa\u672c\u7ed3\u6784\u548c\u8ba1\u7b97\u6d41\u7a0b\uff1a New memory generation \uff1a\u4e00\u4e2a\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u662f\u7531\u4e00\u4e2a\u65b0\u7684\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u5171\u540c\u8ba1\u7b97\u6240\u5f97\u3002\u8fd9\u4e2a\u9636\u6bb5\u662f\u5c06\u65b0\u8f93\u5165\u7684\u5355\u8bcd\u4e0e\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001 \\(h_{t-1}\\) \u76f8\u7ed3\u5408\uff0c\u6839\u636e\u8fc7\u53bb\u7684\u4e0a\u4e0b\u6587\u6765\u603b\u7ed3\u5f97\u5230\u5411\u91cf \\(\\tilde{h}_{t}\\) \u3002 Reset Gate \uff1a\u590d\u4f4d\u4fe1\u53f7 \\(r_t\\) \u662f\u8d1f\u8d23\u786e\u5b9a \\(h_{t-1}\\) \u5bf9\u603b\u7ed3 \\(\\tilde{h}_{t}\\) \u7684\u91cd\u8981\u7a0b\u5ea6\u3002\u5982\u679c\u786e\u5b9a \\(\\tilde{h}_{t}\\) \u4e0e\u65b0\u7684\u8bb0\u5fc6\u7684\u8ba1\u7b97\u65e0\u5173\uff0c\u5219\u590d\u4f4d\u95e8\u80fd\u591f\u5b8c\u5168\u6d88\u9664\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff08\u5373\u5ffd\u7565\u4e4b\u524d\u9690\u85cf\u7684\u4fe1\u606f\uff09\u3002 Update Gate \uff1a\u66f4\u65b0\u4fe1\u53f7 \\(z_t\\) \u8d1f\u8d23\u786e\u5b9a\u6709\u591a\u5c11 \\(h_{t-1}\\) \u53ef\u4ee5\u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u5982\u679c \\(z_{t} \\approx 1\\) \uff0c\u7136\u540e \\(h_{t-1}\\) \u51e0\u4e4e\u662f\u5b8c\u5168\u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001\u3002\u53cd\u8fc7\u6765\uff0c\u5982\u679c \\(z_{t} \\approx 0\\) \uff0c\u7136\u540e\u5927\u90e8\u5206\u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u5411\u524d\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u9690\u85cf\u72b6\u6001\u3002 Hidden state \uff1a\u5229\u7528\u66f4\u65b0\u95e8\u7684\u5efa\u8bae\uff0c\u4f7f\u7528\u8fc7\u53bb\u7684\u9690\u85cf\u8f93\u5165 \\({h}_{t-1}\\) \u548c\u65b0\u751f\u6210\u7684\u8bb0\u5fc6 \\(\\tilde{h}_{t}\\) \u751f\u6210\u9690\u85cf\u72b6\u6001 \\({h}_{t}\\) \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u8bad\u7ec3 GRU\uff0c\u6211\u4eec\u9700\u8981\u5b66\u4e60\u6240\u6709\u4e0d\u540c\u7684\u53c2\u6570\uff1a \\(W, U, W^{(r)}, U^{(r)}, W^{(z)}, U^{(z)}\\) \u3002\u8fd9\u4e9b\u53c2\u6570\u540c\u6837\u662f\u901a\u8fc7\u53cd\u5411\u4f20\u64ad\u7b97\u6cd5\u5b66\u4e60\u6240\u5f97\u3002","title":"3 Gated Recurrent Units"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#4-long-short-term-memories","text":"Long-Short-Term-Memories \u662f\u548c GRU \u6709\u4e00\u70b9\u4e0d\u540c\u7684\u53e6\u5916\u4e00\u79cd\u7c7b\u578b\u7684\u590d\u6742\u6fc0\u6d3b\u795e\u7ecf\u5143\u3002\u5b83\u7684\u4f5c\u7528\u4e0e GRU \u7c7b\u4f3c\uff0c\u4f46\u662f\u795e\u7ecf\u5143\u7684\u7ed3\u6784\u6709\u4e00\u70b9\u533a\u522b\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b LSTM \u795e\u7ecf\u5143\u7684\u6570\u5b66\u516c\u5f0f\uff0c\u7136\u540e\u518d\u6df1\u5165\u4e86\u89e3\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8bbe\u8ba1\u67b6\u6784\uff1a \\[ \\begin{aligned} {i_{t}} & {=\\sigma\\left(W^{(i)} x_{t}+U^{(i)} h_{t-1}\\right)} & {\\text { (Input gate) }} \\\\ {f_{t}} & {=\\sigma\\left(W^{(f)} x_{t}+U^{(f)} h_{t-1}\\right)} & {\\text { (Forget gate) }} \\\\ {o_{t}} & {=\\sigma\\left(W^{(o)} x_{t}+U^{(o)} h_{t-1}\\right)} & {\\text { (Output/Exposure gate) }} \\\\ {\\tilde{c}_{t}} & {=\\tanh \\left(W^{(c)} x_{t}+U^{(c)} h_{t-1}\\right)} & {\\text { (New memory cell) }} \\\\ {c_{t}} & {=f_{t} \\circ c_{t-1}+i_{t} \\circ \\tilde{c}_{t}} & {\\text { (Final memory cell) }} \\\\ {h_{t}} & {=o_{t} \\circ \\tanh \\left(c_{t}\\right)} \\end{aligned} \\] \u4e0b\u56fe\u662fLSTM\u7684\u8ba1\u7b97\u56fe\u793a \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u4e86\u89e3 LSTM \u7684\u67b6\u6784\u4ee5\u53ca\u8fd9\u4e2a\u67b6\u6784\u80cc\u540e\u7684\u610f\u4e49\uff1a New memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u662f\u7c7b\u4f3c\u4e8e GRU \u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u7684\u9636\u6bb5\u3002\u6211\u4eec\u57fa\u672c\u4e0a\u662f\u7528\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u751f\u6210\u4e00\u4e2a\u5305\u62ec\u65b0\u5355\u8bcd \\(x^{(t)}\\) \u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{c}_{t}\\) \u3002 Input Gate \uff1a\u6211\u4eec\u770b\u5230\u5728\u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u4e4b\u524d\uff0c\u65b0\u7684\u8bb0\u5fc6\u7684\u751f\u6210\u9636\u6bb5\u4e0d\u4f1a\u68c0\u67e5\u65b0\u5355\u8bcd\u662f\u5426\u91cd\u8981\u2014\u2014\u8fd9\u9700\u8981\u8f93\u5165\u95e8\u51fd\u6570\u6765\u505a\u8fd9\u4e2a\u5224\u65ad\u3002\u8f93\u5165\u95e8\u4f7f\u7528\u8f93\u5165\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u51b3\u5b9a\u8f93\u5165\u503c\u662f\u5426\u503c\u5f97\u4fdd\u5b58\uff0c\u4ece\u800c\u7528\u6765\u8fdb\u5165\u65b0\u5185\u5b58\u3002\u56e0\u6b64\uff0c\u5b83\u4ea7\u751f\u5b83\u4f5c\u4e3a\u8fd9\u4e2a\u4fe1\u606f\u7684\u6307\u793a\u5668\u3002 Forget Gate \uff1a\u8fd9\u4e2a\u95e8\u4e0e\u8f93\u5165\u95e8\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u4e0d\u786e\u5b9a\u8f93\u5165\u5355\u8bcd\u7684\u6709\u7528\u6027\u2014\u2014\u800c\u662f\u8bc4\u4f30\u8fc7\u53bb\u7684\u8bb0\u5fc6\u662f\u5426\u5bf9\u5f53\u524d\u8bb0\u5fc6\u7684\u8ba1\u7b97\u6709\u7528\u3002\u56e0\u6b64\uff0c\u9057\u5fd8\u95e8\u67e5\u770b\u8f93\u5165\u5355\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff0c\u5e76\u751f\u6210 \\(f_t\\) \u3002 Final memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u9996\u5148\u6839\u636e\u5fd8\u8bb0\u95e8 \\(f_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u5fd8\u8bb0\u8fc7\u53bb\u7684\u8bb0\u5fc6 \\(c_{t-1}\\) \u3002\u7c7b\u4f3c\u5730\uff0c\u6839\u636e\u8f93\u5165\u95e8 \\(i_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u8f93\u5165\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde c_t\\) \u3002\u7136\u540e\u5c06\u4e0a\u9762\u7684\u4e24\u4e2a\u7ed3\u679c\u76f8\u52a0\u751f\u6210\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u3002 Output/Exposure Gate \uff1a\u8fd9\u662f GRU \u4e2d\u6ca1\u6709\u660e\u786e\u5b58\u5728\u7684\u95e8\u3002\u8fd9\u4e2a\u95e8\u7684\u76ee\u7684\u662f\u4ece\u9690\u85cf\u72b6\u6001\u4e2d\u5206\u79bb\u6700\u7ec8\u7684\u8bb0\u5fc6\u3002\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u5305\u542b\u5f88\u591a\u4e0d\u9700\u8981\u5b58\u50a8\u5728\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f\u3002\u9690\u85cf\u72b6\u6001\u7528\u4e8e LSTM \u7684\u6bcf\u4e2a\u5355\u4e2a\u95e8\uff0c\u56e0\u6b64\uff0c\u8be5\u95e8\u662f\u8981\u8bc4\u4f30\u5173\u4e8e\u8bb0\u5fc6\u5355\u5143 \\(c_t\\) \u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u663e\u9732\u5728\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u4e2d\u3002\u7528\u4e8e\u8bc4\u4f30\u7684\u4fe1\u53f7\u662f \\(o_t\\) \uff0c\u7136\u540e\u4e0e \\(c_t\\) \u901a\u8fc7 \\(o_{t} \\circ \\tanh \\left(c_{t}\\right)\\) \u8fd0\u7b97\u5f97\u5230\u6700\u7ec8\u7684 \\(h_t\\) \u3002","title":"4 Long-Short-Term-Memories"},{"location":"CS224n-2019-06-The%20probability%20of%20a%20sentence%20Recurrent%20Neural%20Networks%20and%20Language%20Models/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-07-Vanishing%20Gradients%20and%20Fancy%20RNNs/","text":"Lecture 07 Vanishing Gradients and Fancy RNNs \u00b6 Lecture Plan \u4e0a\u8282\u8bfe\u6211\u4eec\u5b66\u4e86**\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs)** \u4ee5\u53ca\u4e3a\u4ec0\u4e48\u5b83\u4eec\u5bf9\u4e8e\u8bed\u8a00\u5efa\u6a21(LM)\u5f88\u6709\u7528\u3002\u4eca\u5929\u6211\u4eec\u5c06\u5b66\u4e60 RNNs\u7684 \u95ee\u9898 \u4ee5\u53ca\u5982\u4f55\u4fee\u590d\u5b83\u4eec \u66f4\u590d\u6742\u7684 RNN\u53d8\u4f53 \u4e0b\u4e00\u8282\u8bfe\u6211\u4eec\u5c06\u5b66\u4e60 \u5982\u4f55\u4f7f\u7528\u57fa\u4e8e RNN-based \u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5373 sequence-to-sequence with attention \u6765\u5b9e\u73b0 \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1 (NMT) Today\u2019s lecture \u68af\u5ea6\u6d88\u5931\u95ee\u9898 \\(\\to\\) \u4e24\u79cd\u65b0\u7c7b\u578bRNN\uff1aLSTM\u548cGRU \u5176\u4ed6\u68af\u5ea6\u6d88\u5931\uff08\u7206\u70b8\uff09\u7684\u89e3\u51b3\u65b9\u6848 Gradient clipping Skip connections \u66f4\u591a\u82b1\u54e8\u7684RNN\u53d8\u4f53 \u53cc\u5411RNN \u591a\u5c42RNN Vanishing gradient intuition \u5f53\u8fd9\u4e9b\u68af\u5ea6\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53cd\u5411\u4f20\u64ad\u7684\u8d8a\u6df1\u5165\uff0c\u68af\u5ea6\u4fe1\u53f7\u5c31\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f Vanishing gradient proof sketch $$ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W} {h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right) $$ \u56e0\u6b64\u901a\u8fc7\u94fe\u5f0f\u6cd5\u5219\u5f97\u5230\uff1a \\[ \\frac{\\partial \\boldsymbol{h}^{(t)}}{\\partial \\boldsymbol{h}^{(t-1)}}=\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right) \\boldsymbol{W}_{h} \\] \u8003\u8651\u7b2c i \u6b65\u4e0a\u7684\u635f\u5931\u68af\u5ea6 \\(J^{(i)}(\\theta)\\) \uff0c\u76f8\u5bf9\u4e8e\u7b2c j \u6b65\u4e0a\u7684\u9690\u85cf\u72b6\u6001 \\(\\boldsymbol{h}^{(j)}\\) \u5982\u679c\u6743\u91cd\u77e9\u9635 \\(W_h\\) \u5f88\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e00\u9879\u4e5f\u4f1a\u968f\u7740 i \u548c j \u7684\u8ddd\u79bb\u8d8a\u6765\u8d8a\u8fdc\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f \u8003\u8651\u77e9\u9635\u7684 L2 \u8303\u6570 \\[ \\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\right\\| \\leq\\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(i)}}\\right\\|\\left\\|\\boldsymbol{W}_{h}\\right\\|^{(i-j)} \\prod_{j<t \\leq i}\\left\\|\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right)\\right\\| \\] Pascanu et al \u8868\u660e\uff0c\u5982\u679c \\(W_h\\) \u7684 \u6700\u5927\u7279\u5f81\u503c < 1 \uff0c\u68af\u5ea6 \\(\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\|\\) \u5c06\u5448\u6307\u6570\u8870\u51cf \u8fd9\u91cc\u7684\u754c\u9650\u662f1\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f sigmoid \u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u8bc1\u660e\u5c06\u4e00\u4e2a \u6700\u5927\u7684\u7279\u5f81\u503c >1 \u4e0e \u68af\u5ea6\u7206\u70b8 \u8054\u7cfb\u8d77\u6765 Why is vanishing gradient a problem? \u6765\u81ea\u8fdc\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u4f1a\u4e22\u5931\uff0c\u56e0\u4e3a\u5b83\u6bd4\u6765\u81ea\u8fd1\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u5c0f\u5f97\u591a\u3002 \u56e0\u6b64\uff0c\u6a21\u578b\u6743\u91cd\u53ea\u4f1a\u6839\u636e\u8fd1\u671f\u6548\u5e94\u800c\u4e0d\u662f\u957f\u671f\u6548\u5e94\u8fdb\u884c\u66f4\u65b0\u3002 \u53e6\u4e00\u79cd\u89e3\u91ca \uff1a \u68af\u5ea6 \u53ef\u4ee5\u88ab\u770b\u4f5c\u662f \u8fc7\u53bb\u5bf9\u672a\u6765\u7684\u5f71\u54cd \u7684\u8861\u91cf\u6807\u51c6 \u5982\u679c\u68af\u5ea6\u5728\u8f83\u957f\u4e00\u6bb5\u8ddd\u79bb\u5185(\u4ece\u65f6\u95f4\u6b65 t \u5230 t+n )\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u5224\u65ad: \u5728\u6570\u636e\u4e2d\uff0c\u6b65\u9aa4 t \u548c t+n \u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb \u6211\u4eec\u7528 \u9519\u8bef\u7684\u53c2\u6570 \u6765\u6355\u83b7 t \u548c t+n \u4e4b\u95f4\u7684\u771f\u6b63\u4f9d\u8d56\u5173\u7cfb Effect of vanishing gradient on RNN-LM \u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u4e3a\u4e86\u4ece\u8fd9\u4e2a\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5b66\u4e60\uff0cRNN-LM\u9700\u8981\u5bf9\u7b2c7\u6b65\u7684\u201ctickets\u201d\u548c\u6700\u540e\u7684\u76ee\u6807\u5355\u8bcd\u201ctickets\u201d\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5efa\u6a21\u3002 \u4f46\u662f\u5982\u679c\u68af\u5ea6\u5f88\u5c0f\uff0c\u6a21\u578b\u5c31 \u4e0d\u80fd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb \u56e0\u6b64\u6a21\u578b\u65e0\u6cd5\u5728\u6d4b\u8bd5\u65f6 \u9884\u6d4b\u7c7b\u4f3c\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb Correct answer : The writer of the books is planning a sequel \u8bed\u6cd5\u8fd1\u56e0 \u987a\u5e8f\u8fd1\u56e0 \u7531\u4e8e\u68af\u5ea6\u7684\u6d88\u5931\uff0cRNN-LMs\u66f4\u5584\u4e8e\u4ece \u987a\u5e8f\u8fd1\u56e0 \u5b66\u4e60\u800c\u4e0d\u662f \u8bed\u6cd5\u8fd1\u56e0 \uff0c\u6240\u4ee5\u4ed6\u4eec\u72af\u8fd9\u79cd\u9519\u8bef\u7684\u9891\u7387\u6bd4\u6211\u4eec\u5e0c\u671b\u7684\u8981\u9ad8[Linzen et al . 2016] Why is exploding gradient a problem? \u5982\u679c\u68af\u5ea6\u8fc7\u5927\uff0c\u5219SGD\u66f4\u65b0\u6b65\u9aa4\u8fc7\u5927 \u8fd9\u53ef\u80fd\u5bfc\u81f4 \u9519\u8bef\u7684\u66f4\u65b0 \uff1a\u6211\u4eec\u66f4\u65b0\u7684\u592a\u591a\uff0c\u5bfc\u81f4\u9519\u8bef\u7684\u53c2\u6570\u914d\u7f6e(\u635f\u5931\u5f88\u5927) \u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7f51\u7edc\u4e2d\u7684 Inf \u6216 NaN (\u7136\u540e\u60a8\u5fc5\u987b\u4ece\u8f83\u65e9\u7684\u68c0\u67e5\u70b9\u91cd\u65b0\u542f\u52a8\u8bad\u7ec3) Gradient clipping: solution for exploding gradient \u68af\u5ea6\u88c1\u526a \uff1a\u5982\u679c\u68af\u5ea6\u7684\u8303\u6570\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\uff0c\u5728\u5e94\u7528SGD\u66f4\u65b0\u4e4b\u524d\u5c06\u5176\u7f29\u5c0f \u76f4\u89c9 \uff1a\u671d\u7740\u540c\u6837\u7684\u65b9\u5411\u8fc8\u51fa\u4e00\u6b65\uff0c\u4f46\u8981\u5c0f\u4e00\u70b9 \u8fd9\u663e\u793a\u4e86\u4e00\u4e2a\u7b80\u5355RNN\u7684\u635f\u5931\u9762(\u9690\u85cf\u5c42\u72b6\u6001\u662f\u4e00\u4e2a\u6807\u91cf\u4e0d\u662f\u4e00\u4e2a\u5411\u91cf) \u201c\u60ac\u5d16\u201d\u662f\u5371\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u6709\u9661\u5761 \u5728\u5de6\u8fb9\uff0c\u7531\u4e8e\u9661\u5761\uff0c\u68af\u5ea6\u4e0b\u964d\u6709\u4e24\u4e2a\u975e\u5e38\u5927\u7684\u6b65\u9aa4\uff0c\u5bfc\u81f4\u6500\u767b\u60ac\u5d16\u7136\u540e\u5411\u53f3\u5c04\u51fb(\u90fd\u662f\u80e1\u6d69\u7684\u66f4\u65b0) \u5728\u53f3\u8fb9\uff0c\u68af\u5ea6\u526a\u88c1\u51cf\u5c11\u4e86\u8fd9\u4e9b\u6b65\u9aa4\u7684\u5927\u5c0f,\u6240\u4ee5\u6548\u679c\u4e0d\u592a\u6fc0\u70c8 How to fix vanishing gradient problem? \u4e3b\u8981\u95ee\u9898\u662fRNN\u5f88\u96be\u5b66\u4e60\u5728\u591a\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u60c5\u51b5\u4e0b\u4fdd\u5b58\u4fe1\u606f \u5728\u666e\u901a\u7684RNN\u4e2d\uff0c\u9690\u85cf\u72b6\u6001\u4e0d\u65ad\u88ab\u91cd\u5199 \\[ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}\\right) \\] \u4e00\u4e2a\u5177\u6709\u72ec\u7acb\u8bb0\u5fc6\u7684RNN\u600e\u4e48\u6837\uff1f Long Short-Term Memory (LSTM) Hochreiter\u548cSchmidhuber\u57281997\u5e74\u63d0\u51fa\u4e86\u4e00\u79cdRNN\uff0c\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002 \u5728\u7b2c t \u6b65\uff0c\u6709\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u4e00\u4e2a\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u90fd\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5355\u5143\u5b58\u50a8\u957f\u671f\u4fe1\u606f LSTM\u53ef\u4ee5\u4ece\u5355\u5143\u4e2d\u5220\u9664\u3001\u5199\u5165\u548c\u8bfb\u53d6\u4fe1\u606f \u4fe1\u606f\u88ab \u64e6\u9664 / \u5199\u5165 / \u8bfb\u53d6 \u7684\u9009\u62e9\u7531\u4e09\u4e2a\u5bf9\u5e94\u7684\u95e8\u63a7\u5236 \u95e8\u4e5f\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u95e8\u7684\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u6253\u5f00(1)\u3001\u5173\u95ed(0)\u6216\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4 \u95e8\u662f\u52a8\u6001\u7684\uff1a\u5b83\u4eec\u7684\u503c\u662f\u57fa\u4e8e\u5f53\u524d\u4e0a\u4e0b\u6587\u8ba1\u7b97\u7684 \u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u5165\u5e8f\u5217 \\(x^{(t)}\\) \uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u7684\u5e8f\u5217\u3002\u5728\u65f6\u95f4\u6b65 t \u65f6 \u9057\u5fd8\u95e8\uff1a\u63a7\u5236\u4e0a\u4e00\u4e2a\u5355\u5143\u72b6\u6001\u7684\u4fdd\u5b58\u4e0e\u9057\u5fd8 \u8f93\u5165\u95e8\uff1a\u63a7\u5236\u5199\u5165\u5355\u5143\u683c\u7684\u65b0\u5355\u5143\u5185\u5bb9\u7684\u54ea\u4e9b\u90e8\u5206 \u8f93\u51fa\u95e8\uff1a\u63a7\u5236\u5355\u5143\u7684\u54ea\u4e9b\u5185\u5bb9\u8f93\u51fa\u5230\u9690\u85cf\u72b6\u6001 \u65b0\u5355\u5143\u5185\u5bb9\uff1a\u8fd9\u662f\u8981\u5199\u5165\u5355\u5143\u7684\u65b0\u5185\u5bb9 \u5355\u5143\u72b6\u6001\uff1a\u5220\u9664(\u201c\u5fd8\u8bb0\u201d)\u4e0a\u6b21\u5355\u5143\u72b6\u6001\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u5e76\u5199\u5165(\u201c\u8f93\u5165\u201d)\u4e00\u4e9b\u65b0\u7684\u5355\u5143\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u4ece\u5355\u5143\u4e2d\u8bfb\u53d6(\u201coutput\u201d)\u4e00\u4e9b\u5185\u5bb9 Sigmoid\u51fd\u6570\uff1a\u6240\u6709\u7684\u95e8\u7684\u503c\u90fd\u57280\u52301\u4e4b\u95f4 \u901a\u8fc7\u9010\u5143\u7d20\u7684\u4e58\u79ef\u6765\u5e94\u7528\u95e8 \u8fd9\u4e9b\u662f\u957f\u5ea6\u76f8\u540c\u7684\u5411\u91cf \u4f60\u53ef\u4ee5\u628aLSTM\u65b9\u7a0b\u60f3\u8c61\u6210\u8fd9\u6837\uff1a How does LSTM solve vanishing gradients? RNN\u7684LSTM\u67b6\u6784\u66f4\u5bb9\u6613\u4fdd\u5b58\u8bb8\u591a\u65f6\u95f4\u6b65\u4e0a\u7684\u4fe1\u606f \u5982\u679c\u5fd8\u8bb0\u95e8\u8bbe\u7f6e\u4e3a\u8bb0\u5f97\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u90a3\u4e48\u5355\u5143\u4e2d\u7684\u4fe1\u606f\u88ab\u65e0\u9650\u5730\u4fdd\u5b58 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u666e\u901aRNN\u66f4\u96be\u5b66\u4e60\u91cd\u590d\u4f7f\u7528\u5e76\u4e14\u5728\u9690\u85cf\u72b6\u6001\u4e2d\u4fdd\u5b58\u4fe1\u606f\u7684\u77e9\u9635 \\(W_h\\) LSTM\u5e76\u4e0d\u4fdd\u8bc1\u6ca1\u6709\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\uff0c\u4f46\u5b83\u786e\u5b9e\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5bb9\u6613\u7684\u65b9\u6cd5\u6765\u5b66\u4e60\u8fdc\u7a0b\u4f9d\u8d56\u5173\u7cfb LSTMs: real-world success 2013-2015\u5e74\uff0cLSTM\u5f00\u59cb\u5b9e\u73b0\u6700\u5148\u8fdb\u7684\u7ed3\u679c \u6210\u529f\u7684\u4efb\u52a1\u5305\u62ec\uff1a\u624b\u5199\u8bc6\u522b\u3001\u8bed\u97f3\u8bc6\u522b\u3001\u673a\u5668\u7ffb\u8bd1\u3001\u89e3\u6790\u3001\u56fe\u50cf\u5b57\u5e55 LSTM\u6210\u4e3a\u4e3b\u5bfc\u65b9\u6cd5 \u73b0\u5728(2019\u5e74)\uff0c\u5176\u4ed6\u65b9\u6cd5(\u5982Transformers)\u5728\u67d0\u4e9b\u4efb\u52a1\u4e0a\u53d8\u5f97\u66f4\u52a0\u4e3b\u5bfc\u3002 \u4f8b\u5982\u5728WMT (a MT conference + competition)\u4e2d \u57282016\u5e74WMT\u4e2d\uff0c\u603b\u7ed3\u62a5\u544a\u5305\u542b\u201cRNN\u201d44\u6b21 \u57282018\u5e74WMT\u4e2d\uff0c\u603b\u7ed3\u62a5\u544a\u5305\u542b\u201cRNN\u201d9\u6b21\uff0c\u201cTransformers\u201d 63\u6b21 Gated Recurrent Units (GRU) Cho\u7b49\u4eba\u57282014\u5e74\u63d0\u51fa\u4e86LSTM\u7684\u4e00\u4e2a\u66f4\u7b80\u5355\u7684\u66ff\u4ee3\u65b9\u6848 \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u4e0a\uff0c\u6211\u4eec\u90fd\u6709\u8f93\u5165 \\(x^{(t)}\\) \u548c\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) (\u6ca1\u6709\u5355\u5143\u72b6\u6001) \u66f4\u65b0\u95e8\uff1a\u63a7\u5236\u9690\u85cf\u72b6\u6001\u7684\u54ea\u4e9b\u90e8\u5206\u88ab\u66f4\u65b0\uff0c\u54ea\u4e9b\u90e8\u5206\u88ab\u4fdd\u7559 \u91cd\u7f6e\u95e8\uff1a\u63a7\u5236\u4e4b\u524d\u9690\u85cf\u72b6\u6001\u7684\u54ea\u4e9b\u90e8\u5206\u88ab\u7528\u4e8e\u8ba1\u7b97\u65b0\u5185\u5bb9 \u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9\uff1a\u91cd\u7f6e\u95e8\u9009\u62e9\u4e4b\u524d\u9690\u85cf\u72b6\u6001\u7684\u6709\u7528\u90e8\u5206\u3002\u4f7f\u7528\u8fd9\u4e00\u90e8\u5206\u548c\u5f53\u524d\u8f93\u5165\u6765\u8ba1\u7b97\u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u66f4\u65b0\u95e8\u540c\u65f6\u63a7\u5236\u4ece\u4ee5\u524d\u7684\u9690\u85cf\u72b6\u6001\u4fdd\u7559\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u66f4\u65b0\u5230\u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9\u7684\u5185\u5bb9 \u8fd9\u5982\u4f55\u89e3\u51b3\u6d88\u5931\u68af\u5ea6\uff1f \u4e0eLSTM\u7c7b\u4f3c\uff0cGRU\u4f7f\u957f\u671f\u4fdd\u5b58\u4fe1\u606f\u53d8\u5f97\u66f4\u5bb9\u6613(\u4f8b\u5982\uff0c\u5c06update gate\u8bbe\u7f6e\u4e3a0) LSTM vs GRU \u7814\u7a76\u4eba\u5458\u63d0\u51fa\u4e86\u8bb8\u591a\u95e8\u63a7RNN\u53d8\u4f53\uff0c\u5176\u4e2dLSTM\u548cGRU\u7684\u5e94\u7528\u6700\u4e3a\u5e7f\u6cdb \u6700\u5927\u7684\u533a\u522b\u662fGRU\u8ba1\u7b97\u901f\u5ea6\u66f4\u5feb\uff0c\u53c2\u6570\u66f4\u5c11 \u6ca1\u6709\u786e\u51ff\u7684\u8bc1\u636e\u8868\u660e\u5176\u4e2d\u4e00\u4e2a\u603b\u662f\u6bd4\u53e6\u4e00\u4e2a\u8868\u73b0\u5f97\u66f4\u597d LSTM\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9ed8\u8ba4\u9009\u62e9(\u7279\u522b\u662f\u5f53\u60a8\u7684\u6570\u636e\u5177\u6709\u975e\u5e38\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6216\u8005\u60a8\u6709\u5f88\u591a\u8bad\u7ec3\u6570\u636e\u65f6) \u7ecf\u9a8c\u6cd5\u5219\uff1a\u4eceLSTM\u5f00\u59cb\uff0c\u4f46\u662f\u5982\u679c\u4f60\u60f3\u8981\u66f4\u6709\u6548\u7387\uff0c\u5c31\u5207\u6362\u5230GRU Is vanishing/exploding gradient just a RNN problem? \u4e0d\uff01\u8fd9\u5bf9\u4e8e\u6240\u6709\u7684\u795e\u7ecf\u7ed3\u6784(\u5305\u62ec\u524d\u9988\u548c\u5377\u79ef)\u90fd\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u6df1\u5ea6\u7ed3\u6784 \u7531\u4e8e\u94fe\u5f0f\u6cd5\u5219/\u9009\u62e9\u975e\u7ebf\u6027\u51fd\u6570\uff0c\u53cd\u5411\u4f20\u64ad\u65f6\u68af\u5ea6\u53ef\u4ee5\u53d8\u5f97\u5f88\u5c0f\u5f88\u5c0f \u56e0\u6b64\uff0c\u8f83\u4f4e\u5c42\u6b21\u7684\u5b66\u4e60\u975e\u5e38\u7f13\u6162(\u96be\u4ee5\u8bad\u7ec3) \u89e3\u51b3\u65b9\u6848\uff1a\u5927\u91cf\u65b0\u7684\u6df1\u5c42\u524d\u9988 / \u5377\u79ef\u67b6\u6784\uff0c\u6dfb\u52a0\u66f4\u591a\u7684\u76f4\u63a5\u8fde\u63a5(\u4ece\u800c\u4f7f\u68af\u5ea6\u53ef\u4ee5\u6d41\u52a8) \u4f8b\u5982\uff1a Residual connections \u6b8b\u5dee\u8fde\u63a5\u53c8\u540d\u201cResNet\u201d \u4e5f\u79f0\u4e3a\u8df3\u8f6c\u8fde\u63a5 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6807\u8bc6\u8fde\u63a5\u4fdd\u5b58\u4fe1\u606f \u8fd9\u4f7f\u5f97\u6df1\u5c42\u7f51\u7edc\u66f4\u5bb9\u6613\u8bad\u7ec3 \u4f8b\u5982\uff1a Dense connections \u5bc6\u96c6\u8fde\u63a5\u53c8\u540d\u201cDenseNet\u201d \u76f4\u63a5\u5c06\u6240\u6709\u5185\u5bb9\u8fde\u63a5\u5230\u6240\u6709\u5185\u5bb9 \u4f8b\u5982\uff1a Highway connections \u9ad8\u901f\u516c\u8def\u8fde\u63a5\u53c8\u79f0\u201c\u9ad8\u901f\u516c\u8def\u7f51\u201d \u7c7b\u4f3c\u4e8e\u5269\u4f59\u8fde\u63a5\uff0c\u4f46\u6807\u8bc6\u8fde\u63a5\u4e0e\u8f6c\u6362\u5c42\u7531\u52a8\u6001\u95e8\u63a7\u5236 \u7075\u611f\u6765\u81eaLSTMs\uff0c\u4f46\u9002\u7528\u4e8e\u6df1\u5ea6\u524d\u9988/\u5377\u79ef\u7f51\u7edc \u7ed3\u8bba \uff1a\u867d\u7136\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\u662f\u4e00\u4e2a\u666e\u904d\u7684\u95ee\u9898\uff0c\u4f46\u7531\u4e8e\u91cd\u590d\u4e58\u4ee5\u76f8\u540c\u7684\u6743\u77e9\u9635\uff0cRNN\u5c24\u5176\u4e0d\u7a33\u5b9a[Bengio et al, 1994] Recap Bidirectional RNNs: motivation Task: Sentiment Classification \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u79cd\u9690\u85cf\u72b6\u6001\u770b\u4f5c\u662f\u8fd9\u4e2a\u53e5\u5b50\u4e2d\u5355\u8bcd\u201cterribly\u201d\u7684\u4e00\u79cd\u8868\u793a\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e0a\u4e0b\u6587\u8868\u793a\u3002 \u8fd9\u4e9b\u4e0a\u4e0b\u6587\u8868\u793a\u53ea\u5305\u542b\u5173\u4e8e\u5de6\u4e0a\u4e0b\u6587\u7684\u4fe1\u606f(\u4f8b\u5982\u201cthe movie was\u201d)\u3002 \u90a3\u4e48\u6b63\u786e\u7684\u4e0a\u4e0b\u6587\u5462? \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u201cexciting\u201d\u5728\u53f3\u4e0a\u4e0b\u6587\u4e2d\uff0c\u5b83\u4fee\u9970\u4e86\u201cterribly\u201d\u7684\u610f\u601d(\u4ece\u5426\u5b9a\u53d8\u4e3a\u80af\u5b9a) \u201cterribly\u201d\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u540c\u65f6\u5177\u6709\u5de6\u4e0a\u4e0b\u6587\u548c\u53f3\u4e0a\u4e0b\u6587 \u8fd9\u662f\u4e00\u4e2a\u8868\u793a\u201c\u8ba1\u7b97RNN\u7684\u4e00\u4e2a\u5411\u524d\u6b65\u9aa4\u201d\u7684\u901a\u7528\u7b26\u53f7\u2014\u2014\u5b83\u53ef\u4ee5\u662f\u666e\u901a\u7684\u3001LSTM\u6216GRU\u8ba1\u7b97\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u53cc\u5411RNN\u7684\u201c\u9690\u85cf\u72b6\u6001\u201d\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u4f20\u9012\u7ed9\u7f51\u7edc\u4e0b\u4e00\u90e8\u5206\u7684\u4e1c\u897f\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2aRNNs\u6709\u5404\u81ea\u7684\u6743\u91cd Bidirectional RNNs: simplified diagram \u53cc\u5411\u7bad\u5934\u8868\u793a\u53cc\u5411\u6027\uff0c\u6240\u63cf\u8ff0\u7684\u9690\u85cf\u72b6\u6001\u662f\u6b63\u5411+\u53cd\u5411\u72b6\u6001\u7684\u8fde\u63a5 \u6ce8\u610f\uff1a\u53cc\u5411RNNs\u53ea\u9002\u7528\u4e8e\u8bbf\u95ee\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u60c5\u51b5 \u5b83\u4eec\u4e0d\u9002\u7528\u4e8e\u8bed\u8a00\u5efa\u6a21\uff0c\u56e0\u4e3a\u5728LM\u4e2d\uff0c\u60a8\u53ea\u5269\u4e0b\u53ef\u7528\u7684\u4e0a\u4e0b\u6587 \u5982\u679c\u4f60\u6709\u5b8c\u6574\u7684\u8f93\u5165\u5e8f\u5217(\u4f8b\u5982\u4efb\u4f55\u4e00\u79cd\u7f16\u7801)\uff0c\u53cc\u5411\u6027\u662f\u5f3a\u5927\u7684(\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f60\u5e94\u8be5\u4f7f\u7528\u5b83) \u4f8b\u5982\uff0cBERT(\u6765\u81eatransformer\u7684\u53cc\u5411\u7f16\u7801\u5668\u8868\u793a)\u662f\u4e00\u4e2a\u57fa\u4e8e\u53cc\u5411\u6027\u7684\u5f3a\u5927\u7684\u9884\u8bad\u7ec3\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u7cfb\u7edf \u4f60\u4f1a\u5728\u8bfe\u7a0b\u7684\u540e\u9762\u5b66\u5230\u66f4\u591a\u5173\u4e8eBERT\u7684\u77e5\u8bc6! Multi-layer RNNs RNNs\u5728\u4e00\u4e2a\u7ef4\u5ea6\u4e0a\u5df2\u7ecf\u662f\u201c\u6df1\u7684\u201d(\u5b83\u4eec\u5c55\u5f00\u5230\u8bb8\u591a\u65f6\u95f4\u6b65\u957f) \u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5e94\u7528\u591a\u4e2aRNNs\u4f7f\u5b83\u4eec\u201c\u6df1\u5165\u201d\u5230\u53e6\u4e00\u4e2a\u7ef4\u5ea6\u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u591a\u5c42RNN \u8f83\u4f4e\u7684RNNs\u5e94\u8be5\u8ba1\u7b97\u8f83\u4f4e\u7ea7\u522b\u7684\u7279\u6027\uff0c\u800c\u8f83\u9ad8\u7684RNNs\u5e94\u8be5\u8ba1\u7b97\u8f83\u9ad8\u7ea7\u522b\u7684\u7279\u6027 \u591a\u5c42RNNs\u4e5f\u79f0\u4e3a\u5806\u53e0RNNs\u3002 RNN\u5c42 \\(i\\) \u7684\u9690\u85cf\u72b6\u6001\u662fRNN\u5c42 \\(i+1\\) \u7684\u8f93\u5165 Multi-layer RNNs in practice \u9ad8\u6027\u80fd\u7684RNNs\u901a\u5e38\u662f\u591a\u5c42\u7684(\u4f46\u6ca1\u6709\u5377\u79ef\u6216\u524d\u9988\u7f51\u7edc\u90a3\u4e48\u6df1) \u4f8b\u5982\uff1a\u57282017\u5e74\u7684\u4e00\u7bc7\u8bba\u6587\uff0cBritz et al \u53d1\u73b0\u5728\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c2\u52304\u5c42RNN\u7f16\u7801\u5668\u662f\u6700\u597d\u7684,\u548c4\u5c42RNN\u89e3\u7801\u5668 Keyphrases : RNN\u65e0\u6cd5\u5e76\u884c\u5316\uff0c\u8ba1\u7b97\u4ee3\u4ef7\u8fc7\u5927\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8fc7\u6df1 Transformer-based \u7684\u7f51\u7edc(\u5982BERT)\u53ef\u4ee5\u591a\u8fbe24\u5c42\u3002\u4ed6\u4eec\u6709\u5f88\u591askipping-like\u7684\u8fde\u63a5 In summary Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"07 Vanishing Gradients and Fancy RNNs"},{"location":"CS224n-2019-07-Vanishing%20Gradients%20and%20Fancy%20RNNs/#lecture-07-vanishing-gradients-and-fancy-rnns","text":"Lecture Plan \u4e0a\u8282\u8bfe\u6211\u4eec\u5b66\u4e86**\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs)** \u4ee5\u53ca\u4e3a\u4ec0\u4e48\u5b83\u4eec\u5bf9\u4e8e\u8bed\u8a00\u5efa\u6a21(LM)\u5f88\u6709\u7528\u3002\u4eca\u5929\u6211\u4eec\u5c06\u5b66\u4e60 RNNs\u7684 \u95ee\u9898 \u4ee5\u53ca\u5982\u4f55\u4fee\u590d\u5b83\u4eec \u66f4\u590d\u6742\u7684 RNN\u53d8\u4f53 \u4e0b\u4e00\u8282\u8bfe\u6211\u4eec\u5c06\u5b66\u4e60 \u5982\u4f55\u4f7f\u7528\u57fa\u4e8e RNN-based \u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5373 sequence-to-sequence with attention \u6765\u5b9e\u73b0 \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1 (NMT) Today\u2019s lecture \u68af\u5ea6\u6d88\u5931\u95ee\u9898 \\(\\to\\) \u4e24\u79cd\u65b0\u7c7b\u578bRNN\uff1aLSTM\u548cGRU \u5176\u4ed6\u68af\u5ea6\u6d88\u5931\uff08\u7206\u70b8\uff09\u7684\u89e3\u51b3\u65b9\u6848 Gradient clipping Skip connections \u66f4\u591a\u82b1\u54e8\u7684RNN\u53d8\u4f53 \u53cc\u5411RNN \u591a\u5c42RNN Vanishing gradient intuition \u5f53\u8fd9\u4e9b\u68af\u5ea6\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53cd\u5411\u4f20\u64ad\u7684\u8d8a\u6df1\u5165\uff0c\u68af\u5ea6\u4fe1\u53f7\u5c31\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f Vanishing gradient proof sketch $$ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W} {h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right) $$ \u56e0\u6b64\u901a\u8fc7\u94fe\u5f0f\u6cd5\u5219\u5f97\u5230\uff1a \\[ \\frac{\\partial \\boldsymbol{h}^{(t)}}{\\partial \\boldsymbol{h}^{(t-1)}}=\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right) \\boldsymbol{W}_{h} \\] \u8003\u8651\u7b2c i \u6b65\u4e0a\u7684\u635f\u5931\u68af\u5ea6 \\(J^{(i)}(\\theta)\\) \uff0c\u76f8\u5bf9\u4e8e\u7b2c j \u6b65\u4e0a\u7684\u9690\u85cf\u72b6\u6001 \\(\\boldsymbol{h}^{(j)}\\) \u5982\u679c\u6743\u91cd\u77e9\u9635 \\(W_h\\) \u5f88\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e00\u9879\u4e5f\u4f1a\u968f\u7740 i \u548c j \u7684\u8ddd\u79bb\u8d8a\u6765\u8d8a\u8fdc\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f \u8003\u8651\u77e9\u9635\u7684 L2 \u8303\u6570 \\[ \\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\right\\| \\leq\\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(i)}}\\right\\|\\left\\|\\boldsymbol{W}_{h}\\right\\|^{(i-j)} \\prod_{j<t \\leq i}\\left\\|\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right)\\right\\| \\] Pascanu et al \u8868\u660e\uff0c\u5982\u679c \\(W_h\\) \u7684 \u6700\u5927\u7279\u5f81\u503c < 1 \uff0c\u68af\u5ea6 \\(\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\|\\) \u5c06\u5448\u6307\u6570\u8870\u51cf \u8fd9\u91cc\u7684\u754c\u9650\u662f1\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f sigmoid \u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u8bc1\u660e\u5c06\u4e00\u4e2a \u6700\u5927\u7684\u7279\u5f81\u503c >1 \u4e0e \u68af\u5ea6\u7206\u70b8 \u8054\u7cfb\u8d77\u6765 Why is vanishing gradient a problem? \u6765\u81ea\u8fdc\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u4f1a\u4e22\u5931\uff0c\u56e0\u4e3a\u5b83\u6bd4\u6765\u81ea\u8fd1\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u5c0f\u5f97\u591a\u3002 \u56e0\u6b64\uff0c\u6a21\u578b\u6743\u91cd\u53ea\u4f1a\u6839\u636e\u8fd1\u671f\u6548\u5e94\u800c\u4e0d\u662f\u957f\u671f\u6548\u5e94\u8fdb\u884c\u66f4\u65b0\u3002 \u53e6\u4e00\u79cd\u89e3\u91ca \uff1a \u68af\u5ea6 \u53ef\u4ee5\u88ab\u770b\u4f5c\u662f \u8fc7\u53bb\u5bf9\u672a\u6765\u7684\u5f71\u54cd \u7684\u8861\u91cf\u6807\u51c6 \u5982\u679c\u68af\u5ea6\u5728\u8f83\u957f\u4e00\u6bb5\u8ddd\u79bb\u5185(\u4ece\u65f6\u95f4\u6b65 t \u5230 t+n )\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u5224\u65ad: \u5728\u6570\u636e\u4e2d\uff0c\u6b65\u9aa4 t \u548c t+n \u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb \u6211\u4eec\u7528 \u9519\u8bef\u7684\u53c2\u6570 \u6765\u6355\u83b7 t \u548c t+n \u4e4b\u95f4\u7684\u771f\u6b63\u4f9d\u8d56\u5173\u7cfb Effect of vanishing gradient on RNN-LM \u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u4e3a\u4e86\u4ece\u8fd9\u4e2a\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5b66\u4e60\uff0cRNN-LM\u9700\u8981\u5bf9\u7b2c7\u6b65\u7684\u201ctickets\u201d\u548c\u6700\u540e\u7684\u76ee\u6807\u5355\u8bcd\u201ctickets\u201d\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5efa\u6a21\u3002 \u4f46\u662f\u5982\u679c\u68af\u5ea6\u5f88\u5c0f\uff0c\u6a21\u578b\u5c31 \u4e0d\u80fd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb \u56e0\u6b64\u6a21\u578b\u65e0\u6cd5\u5728\u6d4b\u8bd5\u65f6 \u9884\u6d4b\u7c7b\u4f3c\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb Correct answer : The writer of the books is planning a sequel \u8bed\u6cd5\u8fd1\u56e0 \u987a\u5e8f\u8fd1\u56e0 \u7531\u4e8e\u68af\u5ea6\u7684\u6d88\u5931\uff0cRNN-LMs\u66f4\u5584\u4e8e\u4ece \u987a\u5e8f\u8fd1\u56e0 \u5b66\u4e60\u800c\u4e0d\u662f \u8bed\u6cd5\u8fd1\u56e0 \uff0c\u6240\u4ee5\u4ed6\u4eec\u72af\u8fd9\u79cd\u9519\u8bef\u7684\u9891\u7387\u6bd4\u6211\u4eec\u5e0c\u671b\u7684\u8981\u9ad8[Linzen et al . 2016] Why is exploding gradient a problem? \u5982\u679c\u68af\u5ea6\u8fc7\u5927\uff0c\u5219SGD\u66f4\u65b0\u6b65\u9aa4\u8fc7\u5927 \u8fd9\u53ef\u80fd\u5bfc\u81f4 \u9519\u8bef\u7684\u66f4\u65b0 \uff1a\u6211\u4eec\u66f4\u65b0\u7684\u592a\u591a\uff0c\u5bfc\u81f4\u9519\u8bef\u7684\u53c2\u6570\u914d\u7f6e(\u635f\u5931\u5f88\u5927) \u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7f51\u7edc\u4e2d\u7684 Inf \u6216 NaN (\u7136\u540e\u60a8\u5fc5\u987b\u4ece\u8f83\u65e9\u7684\u68c0\u67e5\u70b9\u91cd\u65b0\u542f\u52a8\u8bad\u7ec3) Gradient clipping: solution for exploding gradient \u68af\u5ea6\u88c1\u526a \uff1a\u5982\u679c\u68af\u5ea6\u7684\u8303\u6570\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\uff0c\u5728\u5e94\u7528SGD\u66f4\u65b0\u4e4b\u524d\u5c06\u5176\u7f29\u5c0f \u76f4\u89c9 \uff1a\u671d\u7740\u540c\u6837\u7684\u65b9\u5411\u8fc8\u51fa\u4e00\u6b65\uff0c\u4f46\u8981\u5c0f\u4e00\u70b9 \u8fd9\u663e\u793a\u4e86\u4e00\u4e2a\u7b80\u5355RNN\u7684\u635f\u5931\u9762(\u9690\u85cf\u5c42\u72b6\u6001\u662f\u4e00\u4e2a\u6807\u91cf\u4e0d\u662f\u4e00\u4e2a\u5411\u91cf) \u201c\u60ac\u5d16\u201d\u662f\u5371\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u6709\u9661\u5761 \u5728\u5de6\u8fb9\uff0c\u7531\u4e8e\u9661\u5761\uff0c\u68af\u5ea6\u4e0b\u964d\u6709\u4e24\u4e2a\u975e\u5e38\u5927\u7684\u6b65\u9aa4\uff0c\u5bfc\u81f4\u6500\u767b\u60ac\u5d16\u7136\u540e\u5411\u53f3\u5c04\u51fb(\u90fd\u662f\u80e1\u6d69\u7684\u66f4\u65b0) \u5728\u53f3\u8fb9\uff0c\u68af\u5ea6\u526a\u88c1\u51cf\u5c11\u4e86\u8fd9\u4e9b\u6b65\u9aa4\u7684\u5927\u5c0f,\u6240\u4ee5\u6548\u679c\u4e0d\u592a\u6fc0\u70c8 How to fix vanishing gradient problem? \u4e3b\u8981\u95ee\u9898\u662fRNN\u5f88\u96be\u5b66\u4e60\u5728\u591a\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u60c5\u51b5\u4e0b\u4fdd\u5b58\u4fe1\u606f \u5728\u666e\u901a\u7684RNN\u4e2d\uff0c\u9690\u85cf\u72b6\u6001\u4e0d\u65ad\u88ab\u91cd\u5199 \\[ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}\\right) \\] \u4e00\u4e2a\u5177\u6709\u72ec\u7acb\u8bb0\u5fc6\u7684RNN\u600e\u4e48\u6837\uff1f Long Short-Term Memory (LSTM) Hochreiter\u548cSchmidhuber\u57281997\u5e74\u63d0\u51fa\u4e86\u4e00\u79cdRNN\uff0c\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002 \u5728\u7b2c t \u6b65\uff0c\u6709\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u4e00\u4e2a\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u90fd\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5355\u5143\u5b58\u50a8\u957f\u671f\u4fe1\u606f LSTM\u53ef\u4ee5\u4ece\u5355\u5143\u4e2d\u5220\u9664\u3001\u5199\u5165\u548c\u8bfb\u53d6\u4fe1\u606f \u4fe1\u606f\u88ab \u64e6\u9664 / \u5199\u5165 / \u8bfb\u53d6 \u7684\u9009\u62e9\u7531\u4e09\u4e2a\u5bf9\u5e94\u7684\u95e8\u63a7\u5236 \u95e8\u4e5f\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u95e8\u7684\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u6253\u5f00(1)\u3001\u5173\u95ed(0)\u6216\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4 \u95e8\u662f\u52a8\u6001\u7684\uff1a\u5b83\u4eec\u7684\u503c\u662f\u57fa\u4e8e\u5f53\u524d\u4e0a\u4e0b\u6587\u8ba1\u7b97\u7684 \u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u5165\u5e8f\u5217 \\(x^{(t)}\\) \uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u7684\u5e8f\u5217\u3002\u5728\u65f6\u95f4\u6b65 t \u65f6 \u9057\u5fd8\u95e8\uff1a\u63a7\u5236\u4e0a\u4e00\u4e2a\u5355\u5143\u72b6\u6001\u7684\u4fdd\u5b58\u4e0e\u9057\u5fd8 \u8f93\u5165\u95e8\uff1a\u63a7\u5236\u5199\u5165\u5355\u5143\u683c\u7684\u65b0\u5355\u5143\u5185\u5bb9\u7684\u54ea\u4e9b\u90e8\u5206 \u8f93\u51fa\u95e8\uff1a\u63a7\u5236\u5355\u5143\u7684\u54ea\u4e9b\u5185\u5bb9\u8f93\u51fa\u5230\u9690\u85cf\u72b6\u6001 \u65b0\u5355\u5143\u5185\u5bb9\uff1a\u8fd9\u662f\u8981\u5199\u5165\u5355\u5143\u7684\u65b0\u5185\u5bb9 \u5355\u5143\u72b6\u6001\uff1a\u5220\u9664(\u201c\u5fd8\u8bb0\u201d)\u4e0a\u6b21\u5355\u5143\u72b6\u6001\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u5e76\u5199\u5165(\u201c\u8f93\u5165\u201d)\u4e00\u4e9b\u65b0\u7684\u5355\u5143\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u4ece\u5355\u5143\u4e2d\u8bfb\u53d6(\u201coutput\u201d)\u4e00\u4e9b\u5185\u5bb9 Sigmoid\u51fd\u6570\uff1a\u6240\u6709\u7684\u95e8\u7684\u503c\u90fd\u57280\u52301\u4e4b\u95f4 \u901a\u8fc7\u9010\u5143\u7d20\u7684\u4e58\u79ef\u6765\u5e94\u7528\u95e8 \u8fd9\u4e9b\u662f\u957f\u5ea6\u76f8\u540c\u7684\u5411\u91cf \u4f60\u53ef\u4ee5\u628aLSTM\u65b9\u7a0b\u60f3\u8c61\u6210\u8fd9\u6837\uff1a How does LSTM solve vanishing gradients? RNN\u7684LSTM\u67b6\u6784\u66f4\u5bb9\u6613\u4fdd\u5b58\u8bb8\u591a\u65f6\u95f4\u6b65\u4e0a\u7684\u4fe1\u606f \u5982\u679c\u5fd8\u8bb0\u95e8\u8bbe\u7f6e\u4e3a\u8bb0\u5f97\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u90a3\u4e48\u5355\u5143\u4e2d\u7684\u4fe1\u606f\u88ab\u65e0\u9650\u5730\u4fdd\u5b58 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u666e\u901aRNN\u66f4\u96be\u5b66\u4e60\u91cd\u590d\u4f7f\u7528\u5e76\u4e14\u5728\u9690\u85cf\u72b6\u6001\u4e2d\u4fdd\u5b58\u4fe1\u606f\u7684\u77e9\u9635 \\(W_h\\) LSTM\u5e76\u4e0d\u4fdd\u8bc1\u6ca1\u6709\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\uff0c\u4f46\u5b83\u786e\u5b9e\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5bb9\u6613\u7684\u65b9\u6cd5\u6765\u5b66\u4e60\u8fdc\u7a0b\u4f9d\u8d56\u5173\u7cfb LSTMs: real-world success 2013-2015\u5e74\uff0cLSTM\u5f00\u59cb\u5b9e\u73b0\u6700\u5148\u8fdb\u7684\u7ed3\u679c \u6210\u529f\u7684\u4efb\u52a1\u5305\u62ec\uff1a\u624b\u5199\u8bc6\u522b\u3001\u8bed\u97f3\u8bc6\u522b\u3001\u673a\u5668\u7ffb\u8bd1\u3001\u89e3\u6790\u3001\u56fe\u50cf\u5b57\u5e55 LSTM\u6210\u4e3a\u4e3b\u5bfc\u65b9\u6cd5 \u73b0\u5728(2019\u5e74)\uff0c\u5176\u4ed6\u65b9\u6cd5(\u5982Transformers)\u5728\u67d0\u4e9b\u4efb\u52a1\u4e0a\u53d8\u5f97\u66f4\u52a0\u4e3b\u5bfc\u3002 \u4f8b\u5982\u5728WMT (a MT conference + competition)\u4e2d \u57282016\u5e74WMT\u4e2d\uff0c\u603b\u7ed3\u62a5\u544a\u5305\u542b\u201cRNN\u201d44\u6b21 \u57282018\u5e74WMT\u4e2d\uff0c\u603b\u7ed3\u62a5\u544a\u5305\u542b\u201cRNN\u201d9\u6b21\uff0c\u201cTransformers\u201d 63\u6b21 Gated Recurrent Units (GRU) Cho\u7b49\u4eba\u57282014\u5e74\u63d0\u51fa\u4e86LSTM\u7684\u4e00\u4e2a\u66f4\u7b80\u5355\u7684\u66ff\u4ee3\u65b9\u6848 \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u4e0a\uff0c\u6211\u4eec\u90fd\u6709\u8f93\u5165 \\(x^{(t)}\\) \u548c\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) (\u6ca1\u6709\u5355\u5143\u72b6\u6001) \u66f4\u65b0\u95e8\uff1a\u63a7\u5236\u9690\u85cf\u72b6\u6001\u7684\u54ea\u4e9b\u90e8\u5206\u88ab\u66f4\u65b0\uff0c\u54ea\u4e9b\u90e8\u5206\u88ab\u4fdd\u7559 \u91cd\u7f6e\u95e8\uff1a\u63a7\u5236\u4e4b\u524d\u9690\u85cf\u72b6\u6001\u7684\u54ea\u4e9b\u90e8\u5206\u88ab\u7528\u4e8e\u8ba1\u7b97\u65b0\u5185\u5bb9 \u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9\uff1a\u91cd\u7f6e\u95e8\u9009\u62e9\u4e4b\u524d\u9690\u85cf\u72b6\u6001\u7684\u6709\u7528\u90e8\u5206\u3002\u4f7f\u7528\u8fd9\u4e00\u90e8\u5206\u548c\u5f53\u524d\u8f93\u5165\u6765\u8ba1\u7b97\u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u66f4\u65b0\u95e8\u540c\u65f6\u63a7\u5236\u4ece\u4ee5\u524d\u7684\u9690\u85cf\u72b6\u6001\u4fdd\u7559\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u66f4\u65b0\u5230\u65b0\u7684\u9690\u85cf\u72b6\u6001\u5185\u5bb9\u7684\u5185\u5bb9 \u8fd9\u5982\u4f55\u89e3\u51b3\u6d88\u5931\u68af\u5ea6\uff1f \u4e0eLSTM\u7c7b\u4f3c\uff0cGRU\u4f7f\u957f\u671f\u4fdd\u5b58\u4fe1\u606f\u53d8\u5f97\u66f4\u5bb9\u6613(\u4f8b\u5982\uff0c\u5c06update gate\u8bbe\u7f6e\u4e3a0) LSTM vs GRU \u7814\u7a76\u4eba\u5458\u63d0\u51fa\u4e86\u8bb8\u591a\u95e8\u63a7RNN\u53d8\u4f53\uff0c\u5176\u4e2dLSTM\u548cGRU\u7684\u5e94\u7528\u6700\u4e3a\u5e7f\u6cdb \u6700\u5927\u7684\u533a\u522b\u662fGRU\u8ba1\u7b97\u901f\u5ea6\u66f4\u5feb\uff0c\u53c2\u6570\u66f4\u5c11 \u6ca1\u6709\u786e\u51ff\u7684\u8bc1\u636e\u8868\u660e\u5176\u4e2d\u4e00\u4e2a\u603b\u662f\u6bd4\u53e6\u4e00\u4e2a\u8868\u73b0\u5f97\u66f4\u597d LSTM\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9ed8\u8ba4\u9009\u62e9(\u7279\u522b\u662f\u5f53\u60a8\u7684\u6570\u636e\u5177\u6709\u975e\u5e38\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6216\u8005\u60a8\u6709\u5f88\u591a\u8bad\u7ec3\u6570\u636e\u65f6) \u7ecf\u9a8c\u6cd5\u5219\uff1a\u4eceLSTM\u5f00\u59cb\uff0c\u4f46\u662f\u5982\u679c\u4f60\u60f3\u8981\u66f4\u6709\u6548\u7387\uff0c\u5c31\u5207\u6362\u5230GRU Is vanishing/exploding gradient just a RNN problem? \u4e0d\uff01\u8fd9\u5bf9\u4e8e\u6240\u6709\u7684\u795e\u7ecf\u7ed3\u6784(\u5305\u62ec\u524d\u9988\u548c\u5377\u79ef)\u90fd\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u6df1\u5ea6\u7ed3\u6784 \u7531\u4e8e\u94fe\u5f0f\u6cd5\u5219/\u9009\u62e9\u975e\u7ebf\u6027\u51fd\u6570\uff0c\u53cd\u5411\u4f20\u64ad\u65f6\u68af\u5ea6\u53ef\u4ee5\u53d8\u5f97\u5f88\u5c0f\u5f88\u5c0f \u56e0\u6b64\uff0c\u8f83\u4f4e\u5c42\u6b21\u7684\u5b66\u4e60\u975e\u5e38\u7f13\u6162(\u96be\u4ee5\u8bad\u7ec3) \u89e3\u51b3\u65b9\u6848\uff1a\u5927\u91cf\u65b0\u7684\u6df1\u5c42\u524d\u9988 / \u5377\u79ef\u67b6\u6784\uff0c\u6dfb\u52a0\u66f4\u591a\u7684\u76f4\u63a5\u8fde\u63a5(\u4ece\u800c\u4f7f\u68af\u5ea6\u53ef\u4ee5\u6d41\u52a8) \u4f8b\u5982\uff1a Residual connections \u6b8b\u5dee\u8fde\u63a5\u53c8\u540d\u201cResNet\u201d \u4e5f\u79f0\u4e3a\u8df3\u8f6c\u8fde\u63a5 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6807\u8bc6\u8fde\u63a5\u4fdd\u5b58\u4fe1\u606f \u8fd9\u4f7f\u5f97\u6df1\u5c42\u7f51\u7edc\u66f4\u5bb9\u6613\u8bad\u7ec3 \u4f8b\u5982\uff1a Dense connections \u5bc6\u96c6\u8fde\u63a5\u53c8\u540d\u201cDenseNet\u201d \u76f4\u63a5\u5c06\u6240\u6709\u5185\u5bb9\u8fde\u63a5\u5230\u6240\u6709\u5185\u5bb9 \u4f8b\u5982\uff1a Highway connections \u9ad8\u901f\u516c\u8def\u8fde\u63a5\u53c8\u79f0\u201c\u9ad8\u901f\u516c\u8def\u7f51\u201d \u7c7b\u4f3c\u4e8e\u5269\u4f59\u8fde\u63a5\uff0c\u4f46\u6807\u8bc6\u8fde\u63a5\u4e0e\u8f6c\u6362\u5c42\u7531\u52a8\u6001\u95e8\u63a7\u5236 \u7075\u611f\u6765\u81eaLSTMs\uff0c\u4f46\u9002\u7528\u4e8e\u6df1\u5ea6\u524d\u9988/\u5377\u79ef\u7f51\u7edc \u7ed3\u8bba \uff1a\u867d\u7136\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\u662f\u4e00\u4e2a\u666e\u904d\u7684\u95ee\u9898\uff0c\u4f46\u7531\u4e8e\u91cd\u590d\u4e58\u4ee5\u76f8\u540c\u7684\u6743\u77e9\u9635\uff0cRNN\u5c24\u5176\u4e0d\u7a33\u5b9a[Bengio et al, 1994] Recap Bidirectional RNNs: motivation Task: Sentiment Classification \u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u79cd\u9690\u85cf\u72b6\u6001\u770b\u4f5c\u662f\u8fd9\u4e2a\u53e5\u5b50\u4e2d\u5355\u8bcd\u201cterribly\u201d\u7684\u4e00\u79cd\u8868\u793a\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e0a\u4e0b\u6587\u8868\u793a\u3002 \u8fd9\u4e9b\u4e0a\u4e0b\u6587\u8868\u793a\u53ea\u5305\u542b\u5173\u4e8e\u5de6\u4e0a\u4e0b\u6587\u7684\u4fe1\u606f(\u4f8b\u5982\u201cthe movie was\u201d)\u3002 \u90a3\u4e48\u6b63\u786e\u7684\u4e0a\u4e0b\u6587\u5462? \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u201cexciting\u201d\u5728\u53f3\u4e0a\u4e0b\u6587\u4e2d\uff0c\u5b83\u4fee\u9970\u4e86\u201cterribly\u201d\u7684\u610f\u601d(\u4ece\u5426\u5b9a\u53d8\u4e3a\u80af\u5b9a) \u201cterribly\u201d\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u540c\u65f6\u5177\u6709\u5de6\u4e0a\u4e0b\u6587\u548c\u53f3\u4e0a\u4e0b\u6587 \u8fd9\u662f\u4e00\u4e2a\u8868\u793a\u201c\u8ba1\u7b97RNN\u7684\u4e00\u4e2a\u5411\u524d\u6b65\u9aa4\u201d\u7684\u901a\u7528\u7b26\u53f7\u2014\u2014\u5b83\u53ef\u4ee5\u662f\u666e\u901a\u7684\u3001LSTM\u6216GRU\u8ba1\u7b97\u3002 \u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u53cc\u5411RNN\u7684\u201c\u9690\u85cf\u72b6\u6001\u201d\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u4f20\u9012\u7ed9\u7f51\u7edc\u4e0b\u4e00\u90e8\u5206\u7684\u4e1c\u897f\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2aRNNs\u6709\u5404\u81ea\u7684\u6743\u91cd Bidirectional RNNs: simplified diagram \u53cc\u5411\u7bad\u5934\u8868\u793a\u53cc\u5411\u6027\uff0c\u6240\u63cf\u8ff0\u7684\u9690\u85cf\u72b6\u6001\u662f\u6b63\u5411+\u53cd\u5411\u72b6\u6001\u7684\u8fde\u63a5 \u6ce8\u610f\uff1a\u53cc\u5411RNNs\u53ea\u9002\u7528\u4e8e\u8bbf\u95ee\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u60c5\u51b5 \u5b83\u4eec\u4e0d\u9002\u7528\u4e8e\u8bed\u8a00\u5efa\u6a21\uff0c\u56e0\u4e3a\u5728LM\u4e2d\uff0c\u60a8\u53ea\u5269\u4e0b\u53ef\u7528\u7684\u4e0a\u4e0b\u6587 \u5982\u679c\u4f60\u6709\u5b8c\u6574\u7684\u8f93\u5165\u5e8f\u5217(\u4f8b\u5982\u4efb\u4f55\u4e00\u79cd\u7f16\u7801)\uff0c\u53cc\u5411\u6027\u662f\u5f3a\u5927\u7684(\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f60\u5e94\u8be5\u4f7f\u7528\u5b83) \u4f8b\u5982\uff0cBERT(\u6765\u81eatransformer\u7684\u53cc\u5411\u7f16\u7801\u5668\u8868\u793a)\u662f\u4e00\u4e2a\u57fa\u4e8e\u53cc\u5411\u6027\u7684\u5f3a\u5927\u7684\u9884\u8bad\u7ec3\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u7cfb\u7edf \u4f60\u4f1a\u5728\u8bfe\u7a0b\u7684\u540e\u9762\u5b66\u5230\u66f4\u591a\u5173\u4e8eBERT\u7684\u77e5\u8bc6! Multi-layer RNNs RNNs\u5728\u4e00\u4e2a\u7ef4\u5ea6\u4e0a\u5df2\u7ecf\u662f\u201c\u6df1\u7684\u201d(\u5b83\u4eec\u5c55\u5f00\u5230\u8bb8\u591a\u65f6\u95f4\u6b65\u957f) \u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5e94\u7528\u591a\u4e2aRNNs\u4f7f\u5b83\u4eec\u201c\u6df1\u5165\u201d\u5230\u53e6\u4e00\u4e2a\u7ef4\u5ea6\u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u591a\u5c42RNN \u8f83\u4f4e\u7684RNNs\u5e94\u8be5\u8ba1\u7b97\u8f83\u4f4e\u7ea7\u522b\u7684\u7279\u6027\uff0c\u800c\u8f83\u9ad8\u7684RNNs\u5e94\u8be5\u8ba1\u7b97\u8f83\u9ad8\u7ea7\u522b\u7684\u7279\u6027 \u591a\u5c42RNNs\u4e5f\u79f0\u4e3a\u5806\u53e0RNNs\u3002 RNN\u5c42 \\(i\\) \u7684\u9690\u85cf\u72b6\u6001\u662fRNN\u5c42 \\(i+1\\) \u7684\u8f93\u5165 Multi-layer RNNs in practice \u9ad8\u6027\u80fd\u7684RNNs\u901a\u5e38\u662f\u591a\u5c42\u7684(\u4f46\u6ca1\u6709\u5377\u79ef\u6216\u524d\u9988\u7f51\u7edc\u90a3\u4e48\u6df1) \u4f8b\u5982\uff1a\u57282017\u5e74\u7684\u4e00\u7bc7\u8bba\u6587\uff0cBritz et al \u53d1\u73b0\u5728\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c2\u52304\u5c42RNN\u7f16\u7801\u5668\u662f\u6700\u597d\u7684,\u548c4\u5c42RNN\u89e3\u7801\u5668 Keyphrases : RNN\u65e0\u6cd5\u5e76\u884c\u5316\uff0c\u8ba1\u7b97\u4ee3\u4ef7\u8fc7\u5927\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8fc7\u6df1 Transformer-based \u7684\u7f51\u7edc(\u5982BERT)\u53ef\u4ee5\u591a\u8fbe24\u5c42\u3002\u4ed6\u4eec\u6709\u5f88\u591askipping-like\u7684\u8fde\u63a5 In summary","title":"Lecture 07 Vanishing Gradients and Fancy RNNs"},{"location":"CS224n-2019-07-Vanishing%20Gradients%20and%20Fancy%20RNNs/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/","text":"Lecture 08 Machine Translation, Sequence-to-sequence and Attention \u00b6 Lecture Plan \u5f15\u5165\u65b0\u4efb\u52a1\uff1a\u673a\u5668\u7ffb\u8bd1 \u5f15\u5165\u4e00\u79cd\u65b0\u7684\u795e\u7ecf\u7ed3\u6784\uff1asequence-to-sequence \u673a\u5668\u7ffb\u8bd1\u662fsequence-to-sequence\u7684\u4e00\u4e2a\u4e3b\u8981\u7528\u4f8b \u5f15\u5165\u4e00\u79cd\u65b0\u7684\u795e\u7ecf\u6280\u672f\uff1a\u6ce8\u610f\u529b sequence-to-sequence\u901a\u8fc7attention\u5f97\u5230\u63d0\u5347 Section 1: Pre-Neural Machine Translation \u00b6 Machine Translation \u673a\u5668\u7ffb\u8bd1(MT)\u662f\u5c06\u4e00\u4e2a\u53e5\u5b50 x \u4ece\u4e00\u79cd\u8bed\u8a00( \u6e90\u8bed\u8a00 )\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u8bed\u8a00( \u76ee\u6807\u8bed\u8a00 )\u7684\u53e5\u5b50 y \u7684\u4efb\u52a1\u3002 1950s: Early Machine Translation \u673a\u5668\u7ffb\u8bd1\u7814\u7a76\u59cb\u4e8e20\u4e16\u7eaa50\u5e74\u4ee3\u521d\u3002 \u4fc4\u8bed \\(\\to\\) \u82f1\u8bed(\u51b7\u6218\u7684\u63a8\u52a8) \u7cfb\u7edf\u4e3b\u8981\u662f\u57fa\u4e8e\u89c4\u5219\u7684\uff0c\u4f7f\u7528\u53cc\u8bed\u8bcd\u5178\u6765\u8bb2\u4fc4\u8bed\u5355\u8bcd\u6620\u5c04\u4e3a\u5bf9\u5e94\u7684\u82f1\u8bed\u90e8\u5206 1990s-2010s: Statistical Machine Translation \u6838\u5fc3\u60f3\u6cd5 \uff1a\u4ece\u6570\u636e\u4e2d\u5b66\u4e60\u6982\u7387\u6a21\u578b\u3002 \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u7ffb\u8bd1\u6cd5\u8bed \\(\\to\\) \u82f1\u8bed\u3002 \u6211\u4eec\u60f3\u8981\u627e\u5230\u6700\u597d\u7684\u82f1\u8bed\u53e5\u5b50 y \uff0c\u7ed9\u5b9a\u6cd5\u8bed\u53e5\u5b50 x \\[ argmax_yP(y|x) \\] \u4f7f\u7528Bayes\u89c4\u5219\u5c06\u5176\u5206\u89e3\u4e3a\u4e24\u4e2a\u7ec4\u4ef6\u4ece\u800c\u5206\u522b\u5b66\u4e60 \\[ argmax_yP(x|y)P(y) \\] \\(P(x|y)\\) \u7ffb\u8bd1\u6a21\u578b \u5206\u6790\u5355\u8bcd\u548c\u77ed\u8bed\u5e94\u8be5\u5982\u4f55\u7ffb\u8bd1(\u903c\u771f) \u4ece\u5e76\u884c\u6570\u636e\u4e2d\u5b66\u4e60 \\(P(y)\\) \u8bed\u8a00\u6a21\u578b \u6a21\u578b\u5982\u4f55\u5199\u51fa\u597d\u82f1\u8bed(\u6d41\u5229) \u4ece\u5355\u8bed\u6570\u636e\u4e2d\u5b66\u4e60 \u95ee\u9898 \uff1a\u5982\u4f55\u5b66\u4e60\u7ffb\u8bd1\u6a21\u578b \\(P(x|y)\\) \u9996\u5148\uff0c\u9700\u8981\u5927\u91cf\u7684\u5e76\u884c\u6570\u636e(\u4f8b\u5982\u6210\u5bf9\u7684\u4eba\u5de5\u7ffb\u8bd1\u7684\u6cd5\u8bed/\u82f1\u8bed\u53e5\u5b50) Learning alignment for SMT \u95ee\u9898 \uff1a\u5982\u4f55\u4ece\u5e76\u884c\u8bed\u6599\u5e93\u4e2d\u5b66\u4e60\u7ffb\u8bd1\u6a21\u578b \\(P(x|y)\\) \u8fdb\u4e00\u6b65\u5206\u89e3:\u6211\u4eec\u5b9e\u9645\u4e0a\u60f3\u8981\u8003\u8651 \\[ P(x,a|y) \\] \\(a\\) \u662f\u5bf9\u9f50\uff0c\u5373\u6cd5\u8bed\u53e5\u5b50 x \u548c\u82f1\u8bed\u53e5\u5b50 y \u4e4b\u95f4\u7684\u5355\u8bcd\u7ea7\u5bf9\u5e94 What is alignment? \u5bf9\u9f50\u662f\u7ffb\u8bd1\u53e5\u5b50\u4e2d\u7279\u5b9a\u8bcd\u8bed\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u3002 \u6ce8\u610f\uff1a\u6709\u4e9b\u8bcd\u6ca1\u6709\u5bf9\u5e94\u8bcd Alignment is complex \u5bf9\u9f50\u53ef\u4ee5\u662f\u591a\u5bf9\u4e00\u7684 \u5bf9\u9f50\u53ef\u4ee5\u662f\u4e00\u5bf9\u591a\u7684 \u6709\u4e9b\u8bcd\u5f88\u4e30\u5bcc \u5bf9\u9f50\u53ef\u4ee5\u662f\u591a\u5bf9\u591a(\u77ed\u8bed\u7ea7) Learning alignment for SMT \u6211\u4eec\u5b66\u4e60\u5f88\u591a\u56e0\u7d20\u7684\u7ec4\u5408\uff0c\u5305\u62ec \u7279\u5b9a\u5355\u8bcd\u5bf9\u9f50\u7684\u6982\u7387(\u4e5f\u53d6\u51b3\u4e8e\u53d1\u9001\u4f4d\u7f6e) \u7279\u5b9a\u5355\u8bcd\u5177\u6709\u7279\u5b9a\u751f\u80b2\u7387\u7684\u6982\u7387(\u5bf9\u5e94\u5355\u8bcd\u7684\u6570\u91cf) \u7b49\u7b49 Decoding for SMT \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97argmax \u6211\u4eec\u53ef\u4ee5\u5217\u4e3e\u6240\u6709\u53ef\u80fd\u7684 y \u5e76\u8ba1\u7b97\u6982\u7387\uff1f \\(\\to\\) \u592a\u8d35\u4e86 \u4f7f\u7528\u542f\u53d1\u5f0f\u641c\u7d22\u7b97\u6cd5\u641c\u7d22\u6700\u4f73\u7ffb\u8bd1\uff0c\u4e22\u5f03\u6982\u7387\u8fc7\u4f4e\u7684\u5047\u8bbe \u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u89e3\u7801 SMT\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u7814\u7a76\u9886\u57df \u6700\u597d\u7684\u7cfb\u7edf\u975e\u5e38\u590d\u6742 \u6570\u4ee5\u767e\u8ba1\u7684\u91cd\u8981\u7ec6\u8282\u6211\u4eec\u8fd8\u6ca1\u6709\u63d0\u5230 \u7cfb\u7edf\u6709\u8bb8\u591a\u5206\u522b\u8bbe\u8ba1\u5b50\u7ec4\u4ef6\u5de5\u7a0b \u5f88\u591a\u529f\u80fd\u9700\u8981\u8bbe\u8ba1\u7279\u6027\u6765\u83b7\u53d6\u7279\u5b9a\u7684\u8bed\u8a00\u73b0\u8c61 \u9700\u8981\u7f16\u8bd1\u548c\u7ef4\u62a4\u989d\u5916\u7684\u8d44\u6e90 \u6bd4\u5982\u7b49\u4ef7\u77ed\u8bed\u8868 \u9700\u8981\u5927\u91cf\u7684\u4eba\u529b\u6765\u7ef4\u62a4 \u5bf9\u4e8e\u6bcf\u4e00\u5bf9\u8bed\u8a00\u90fd\u9700\u8981\u91cd\u590d\u64cd\u4f5c Section 2: Neural Machine Translation \u00b6 What is Neural Machine Translation? \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u662f\u5229\u7528\u5355\u4e2a\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u673a\u5668\u7ffb\u8bd1\u7684\u4e00\u79cd\u65b9\u6cd5 \u795e\u7ecf\u7f51\u7edc\u67b6\u6784\u79f0\u4e3asequence-to-sequence (\u53c8\u540dseq2seq)\uff0c\u5b83\u5305\u542b\u4e24\u4e2aRNNs Neural Machine Translation (NMT) \u7f16\u7801\u5668RNN\u751f\u6210\u6e90\u8bed\u53e5\u7684\u7f16\u7801 \u6e90\u8bed\u53e5\u7684\u7f16\u7801\u4e3a\u89e3\u7801\u5668RNN\u63d0\u4f9b\u521d\u59cb\u9690\u85cf\u72b6\u6001 \u89e3\u7801\u5668RNN\u662f\u4e00\u79cd\u4ee5\u7f16\u7801\u4e3a\u6761\u4ef6\u751f\u6210\u76ee\u6807\u53e5\u7684\u8bed\u8a00\u6a21\u578b \u6ce8\u610f\uff1a\u6b64\u56fe\u663e\u793a\u4e86\u6d4b\u8bd5\u65f6\u884c\u4e3a \\(\\to\\) \u89e3\u7801\u5668\u8f93\u51fa\u4f5c\u4e3a\u4e0b\u4e00\u6b65\u7684\u8f93\u5165 Sequence-to-sequence is versatile! \u5e8f\u5217\u5230\u5e8f\u5217\u4e0d\u4ec5\u4ec5\u5bf9MT\u6709\u7528 \u8bb8\u591aNLP\u4efb\u52a1\u53ef\u4ee5\u6309\u7167\u987a\u5e8f\u8fdb\u884c\u8868\u8fbe \u6458\u8981(\u957f\u6587\u672c \\(\\to\\) \u77ed\u6587\u672c) \u5bf9\u8bdd(\u524d\u4e00\u53e5\u8bdd \\(\\to\\) \u4e0b\u4e00\u53e5\u8bdd) \u89e3\u6790(\u8f93\u5165\u6587\u672c \\(\\to\\) \u8f93\u51fa\u89e3\u6790\u4e3a\u5e8f\u5217) \u4ee3\u7801\u751f\u6210(\u81ea\u7136\u8bed\u8a00 \\(\\to\\) Python\u4ee3\u7801) sequence-to-sequence \u6a21\u578b\u662f Conditional Language Model \u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u7684\u4e00\u4e2a\u4f8b\u5b50 \u8bed\u8a00\u6a21\u578b\uff0c\u56e0\u4e3a\u89e3\u7801\u5668\u6b63\u5728\u9884\u6d4b\u76ee\u6807\u53e5\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd y \u6709\u6761\u4ef6\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u9884\u6d4b\u4e5f\u53d6\u51b3\u4e8e\u6e90\u53e5 x NMT\u76f4\u63a5\u8ba1\u7b97 \\(P(y|x)\\) \\[ P(y | x)=P\\left(y_{1} | x\\right) P\\left(y_{2} | y_{1}, x\\right) P\\left(y_{3} | y_{1}, y_{2}, x\\right) \\ldots P\\left(y_{T} | y_{1}, \\ldots, y_{T-1}, x\\right) \\] \u4e0a\u5f0f\u4e2d\u6700\u540e\u4e00\u9879\u4e3a\uff0c\u7ed9\u5b9a\u5230\u76ee\u524d\u4e3a\u6b62\u7684\u76ee\u6807\u8bcd\u548c\u6e90\u53e5 x \uff0c\u4e0b\u4e00\u4e2a\u76ee\u6807\u8bcd\u7684\u6982\u7387 \u95ee\u9898 \uff1a\u5982\u4f55\u57f9\u8badNMT\u7cfb\u7edf\uff1f \u56de\u7b54 \uff1a\u627e\u4e00\u4e2a\u5927\u7684\u5e73\u884c\u8bed\u6599\u5e93 \u200b Seq2seq\u88ab\u4f18\u5316\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u7cfb\u7edf\u3002\u53cd\u5411\u4f20\u64ad\u8fd0\u884c\u5728\u201c\u7aef\u5230\u7aef\u201d\u4e2d Greedy decoding \u6211\u4eec\u4e86\u89e3\u4e86\u5982\u4f55\u751f\u6210(\u6216\u201c\u89e3\u7801\u201d)\u76ee\u6807\u53e5\uff0c\u901a\u8fc7\u5bf9\u89e3\u7801\u5668\u7684\u6bcf\u4e2a\u6b65\u9aa4\u4f7f\u7528 argmax \u8fd9\u662f\u8d2a\u5a6a\u89e3\u7801(\u6bcf\u4e00\u6b65\u90fd\u53d6\u6700\u53ef\u80fd\u7684\u5355\u8bcd) \u8fd9\u79cd\u65b9\u6cd5\u6709\u95ee\u9898\u5417\uff1f Problems with greedy decoding \u8d2a\u5a6a\u89e3\u7801\u6ca1\u6709\u529e\u6cd5\u64a4\u9500\u51b3\u5b9a \u5982\u4f55\u4fee\u590d\uff1f Exhaustive search decoding \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u60f3\u8981\u627e\u5230\u4e00\u4e2a(\u957f\u5ea6\u4e3a T )\u7684\u7ffb\u8bd1 y \u4f7f\u5176\u6700\u5927\u5316 \u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8ba1\u7b97\u6240\u6709\u53ef\u80fd\u7684\u5e8f\u5217 y \u8fd9\u610f\u5473\u7740\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65 t \uff0c\u6211\u4eec\u8ddf\u8e2a \\(V^t\\) \u4e2a\u53ef\u80fd\u7684\u90e8\u5206\u7ffb\u8bd1\uff0c\u5176\u4e2d \\(V\\) \u662f vocab \u5927\u5c0f \u8fd9\u79cd \\(O(V^T)\\) \u7684\u590d\u6742\u6027\u592a\u6602\u8d35\u4e86\uff01 Beam search decoding \u6838\u5fc3\u601d\u60f3 \uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u8ddf\u8e2a k \u4e2a\u6700\u53ef\u80fd\u7684\u90e8\u5206\u7ffb\u8bd1(\u6211\u4eec\u79f0\u4e4b\u4e3a hypotheses \u5047\u8bbe ) k\u662fBeam\u7684\u5927\u5c0f(\u5b9e\u9645\u4e2d\u5927\u7ea6\u662f5\u523010) \\[ \\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\log P_{\\mathrm{LM}}\\left(y_{1}, \\ldots, y_{t} | x\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] \u5047\u8bbe \\(y_{1}, \\dots, y_{t}\\) \u6709\u4e00\u4e2a\u5206\u6570\uff0c\u5373\u5b83\u7684\u5bf9\u6570\u6982\u7387 \u5206\u6570\u90fd\u662f\u8d1f\u6570\uff0c\u5206\u6570\u8d8a\u9ad8\u8d8a\u597d \u6211\u4eec\u5bfb\u627e\u5f97\u5206\u8f83\u9ad8\u7684\u5047\u8bbe\uff0c\u8ddf\u8e2a\u6bcf\u4e00\u6b65\u7684 top k \u4e2a\u90e8\u5206\u7ffb\u8bd1 \u6ce2\u675f\u641c\u7d22 \u4e0d\u4e00\u5b9a\u80fd \u627e\u5230\u6700\u4f18\u89e3 \u4f46\u6bd4\u7a77\u4e3e\u641c\u7d22\u6548\u7387\u9ad8\u5f97\u591a Beam search decoding: example Beam size = k = 2 \u84dd\u8272\u7684\u6570\u5b57\u662f \\(\\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right)\\) \u7684\u7ed3\u679c \u8ba1\u7b97\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \u53d6\u524dk\u4e2a\u5355\u8bcd\u5e76\u8ba1\u7b97\u5206\u6570 \u5bf9\u4e8e\u6bcf\u4e00\u6b21\u7684 k \u4e2a\u5047\u8bbe\uff0c\u627e\u51fa\u6700\u524d\u9762\u7684 k \u4e2a\u5355\u8bcd\u5e76\u8ba1\u7b97\u5206\u6570 \u5728 \\(k^2\\) \u7684\u5047\u8bbe\u4e2d\uff0c\u4fdd\u7559 k \u4e2a\u6700\u9ad8\u7684\u5206\u503c\uff0c\u5982 t = 2 \u65f6\uff0c\u4fdd\u7559\u5206\u6570\u6700\u9ad8\u7684 hit \u548c was Beam search decoding: stopping criterion \u5728\u8d2a\u5fc3\u89e3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u89e3\u7801\u5230\u6a21\u578b\u4ea7\u751f\u4e00\u4e2a \\(\\text{<END>}\\) \u4ee4\u724c \u4f8b\u5982: \\(\\text{<START>}\\) he hit me with a pie \\(\\text{<END>}\\) \u5728 Beam Search \u89e3\u7801\u4e2d\uff0c\u4e0d\u540c\u7684\u5047\u8bbe\u53ef\u80fd\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6b65\u957f\u4e0a\u4ea7\u751f \\(\\text{<END>}\\) \u4ee4\u724c \u5f53\u4e00\u4e2a\u5047\u8bbe\u751f\u6210\u4e86 \\(\\text{<END>}\\) \u4ee4\u724c\uff0c\u8be5\u5047\u8bbe\u5b8c\u6210 \u628a\u5b83\u653e\u5728\u4e00\u8fb9\uff0c\u901a\u8fc7 Beam Search \u7ee7\u7eed\u63a2\u7d22\u5176\u4ed6\u5047\u8bbe \u901a\u5e38\u6211\u4eec\u7ee7\u7eed\u8fdb\u884c Beam Search \uff0c\u76f4\u5230 \u6211\u4eec\u5230\u8fbe\u65f6\u95f4\u6b65\u957f T (\u5176\u4e2d T \u662f\u9884\u5b9a\u4e49\u622a\u6b62\u70b9) \u6211\u4eec\u81f3\u5c11\u6709 n \u4e2a\u5df2\u5b8c\u6210\u7684\u5047\u8bbe(\u5176\u4e2d n \u662f\u9884\u5b9a\u4e49\u622a\u6b62\u70b9) Beam search decoding: finishing up \u6211\u4eec\u6709\u5b8c\u6574\u7684\u5047\u8bbe\u5217\u8868 \u5982\u4f55\u9009\u62e9\u5f97\u5206\u6700\u9ad8\u7684\uff1f \u6211\u4eec\u6e05\u5355\u4e0a\u7684\u6bcf\u4e2a\u5047\u8bbe \\(y_{1}, \\dots, y_{t}\\) \u90fd\u6709\u4e00\u4e2a\u5206\u6570 \\[ \\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\log P_{\\mathrm{LM}}\\left(y_{1}, \\ldots, y_{t} | x\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] \u95ee\u9898\u5728\u4e8e \uff1a\u8f83\u957f\u7684\u5047\u8bbe\u5f97\u5206\u8f83\u4f4e \u4fee\u6b63 \uff1a\u6309\u957f\u5ea6\u6807\u51c6\u5316\u3002\u7528\u4e0b\u5f0f\u6765\u9009\u62e9top one \\[ \\frac{1}{t} \\sum_{i=1}^{t} \\log P_{\\mathrm{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] Advantages of NMT \u4e0eSMT\u76f8\u6bd4\uff0cNMT\u6709\u5f88\u591a\u4f18\u70b9 \u66f4\u597d\u7684\u6027\u80fd \u66f4\u6d41\u5229 \u66f4\u597d\u5730\u4f7f\u7528\u4e0a\u4e0b\u6587 \u66f4\u597d\u5730\u4f7f\u7528\u77ed\u8bed\u76f8\u4f3c\u6027 \u5355\u4e2a\u795e\u7ecf\u7f51\u7edc\u7aef\u5230\u7aef\u4f18\u5316 \u6ca1\u6709\u5b50\u7ec4\u4ef6\u9700\u8981\u5355\u72ec\u4f18\u5316 \u5bf9\u6240\u6709\u8bed\u8a00\u5bf9\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5 Disadvantages of NMT? SMT\u76f8\u6bd4 NMT\u7684\u53ef\u89e3\u91ca\u6027\u8f83\u5dee \u96be\u4ee5\u8c03\u8bd5 NMT\u5f88\u96be\u63a7\u5236 \u4f8b\u5982\uff0c\u4e0d\u80fd\u8f7b\u677e\u6307\u5b9a\u7ffb\u8bd1\u89c4\u5219\u6216\u6307\u5357 \u5b89\u5168\u95ee\u9898 How do we evaluate Machine Translation? BLEU (Bilingual Evaluation Understudy) \u4f60\u5c06\u4f1a\u5728 Assignment 4 \u4e2d\u770b\u5230BLEU\u7684\u7ec6\u8282 BLEU\u5c06\u673a\u5668\u7ffb\u8bd1\u548c\u4eba\u5de5\u7ffb\u8bd1(\u4e00\u4e2a\u6216\u591a\u4e2a)\uff0c\u5e76\u8ba1\u7b97\u4e00\u4e2a\u76f8\u4f3c\u7684\u5206\u6570 n-gram \u7cbe\u5ea6 (\u901a\u5e38\u4e3a1-4) \u5bf9\u8fc7\u4e8e\u77ed\u7684\u673a\u5668\u7ffb\u8bd1\u7684\u52a0\u4e0a\u60e9\u7f5a BLEU\u5f88\u6709\u7528,\u4f46\u4e0d\u5b8c\u7f8e \u6709\u5f88\u591a\u6709\u6548\u7684\u65b9\u6cd5\u6765\u7ffb\u8bd1\u4e00\u4e2a\u53e5\u5b50 \u6240\u4ee5\u4e00\u4e2a\u597d\u7684\u7ffb\u8bd1\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7cdf\u7cd5\u7684BLEU score\uff0c\u56e0\u4e3a\u5b83\u4e0e\u4eba\u5de5\u7ffb\u8bd1\u7684n-gram\u91cd\u53e0\u8f83\u4f4e MT progress over time NMT: the biggest success story of NLP Deep Learning \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e8e2014\u5e74\u4ece\u8fb9\u7f18\u7814\u7a76\u6d3b\u52a8\u52302016\u5e74\u6210\u4e3a\u9886\u5148\u6807\u51c6\u65b9\u6cd5 2014\uff1a\u7b2c\u4e00\u7bc7 seq2seq \u7684\u6587\u7ae0\u53d1\u5e03 2016\uff1a\u8c37\u6b4c\u7ffb\u8bd1\u4ece SMT \u6362\u6210\u4e86 NMT \u8fd9\u662f\u60ca\u4eba\u7684 \u7531\u6570\u767e\u540d\u5de5\u7a0b\u5e08\u5386\u7ecf\u591a\u5e74\u6253\u9020\u7684SMT\u7cfb\u7edf\uff0c\u5728\u77ed\u77ed\u51e0\u4e2a\u6708\u5185\u5c31\u88ab\u5c11\u6570\u5de5\u7a0b\u5e08\u8bad\u7ec3\u8fc7\u7684NMT\u7cfb\u7edf\u8d85\u8d8a So is Machine Translation solved? \u4e0d\uff01 \u8bb8\u591a\u56f0\u96be\u4ecd\u7136\u5b58\u5728 \u8bcd\u8868\u5916\u7684\u5355\u8bcd\u5904\u7406 \u8bad\u7ec3\u548c\u6d4b\u8bd5\u6570\u636e\u4e4b\u95f4\u7684 \u9886\u57df\u4e0d\u5339\u914d \u5728\u8f83\u957f\u6587\u672c\u4e0a\u7ef4\u62a4\u4e0a\u4e0b\u6587 \u8d44\u6e90\u8f83\u4f4e\u7684\u8bed\u8a00\u5bf9 \u4f7f\u7528\u5e38\u8bc6\u4ecd\u7136\u5f88\u96be NMT\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u53d1\u73b0\u504f\u5dee \u65e0\u6cd5\u89e3\u91ca\u7684\u7cfb\u7edf\u4f1a\u505a\u4e00\u4e9b\u5947\u602a\u7684\u4e8b\u60c5 NMT research continues NMT\u662fNLP\u6df1\u5ea6\u5b66\u4e60\u7684\u6838\u5fc3\u4efb\u52a1 NMT\u7814\u7a76\u5f15\u9886\u4e86NLP\u6df1\u5ea6\u5b66\u4e60\u7684\u8bb8\u591a\u6700\u65b0\u521b\u65b0 2019\u5e74\uff1aNMT\u7814\u7a76\u5c06\u7ee7\u7eed\u84ec\u52c3\u53d1\u5c55 \u7814\u7a76\u4eba\u5458\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6211\u4eec\u4eca\u5929\u4ecb\u7ecd\u7684\u666e\u901aseq2seq NMT\u7cfb\u7edf\uff0c\u6709\u5f88\u591a\u3001\u5f88\u591a\u7684\u6539\u8fdb\u3002 \u4f46\u6709\u4e00\u4e2a\u6539\u8fdb\u662f\u5982\u6b64\u4e0d\u53ef\u6216\u7f3a Section 3: Attention \u00b6 Sequence-to-sequence: the bottleneck problem \u6e90\u8bed\u53e5\u7684\u7f16\u7801\u9700\u8981\u6355\u83b7\u5173\u4e8e\u6e90\u8bed\u53e5\u7684\u6240\u6709\u4fe1\u606f \u4fe1\u606f\u74f6\u9888\uff01 Attention \u6ce8\u610f\u529b\u4e3a\u74f6\u9888\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848 \u6838\u5fc3\u7406\u5ff5 \uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u4f7f\u7528 \u4e0e\u7f16\u7801\u5668\u7684\u76f4\u63a5\u8fde\u63a5 \u6765\u4e13\u6ce8\u4e8e\u6e90\u5e8f\u5217\u7684\u7279\u5b9a\u90e8\u5206 \u9996\u5148\u6211\u4eec\u5c06\u901a\u8fc7\u56fe\u8868\u5c55\u793a(\u6ca1\u6709\u65b9\u7a0b)\uff0c\u7136\u540e\u6211\u4eec\u5c06\u7528\u65b9\u7a0b\u5c55\u793a \u5c06\u89e3\u7801\u5668\u90e8\u5206\u7684\u7b2c\u4e00\u4e2atoken \\(\\text{<START>}\\) \u4e0e\u6e90\u8bed\u53e5\u4e2d\u7684\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u72b6\u6001\u8fdb\u884c Dot Product \u5f97\u5230\u6bcf\u4e00\u65f6\u95f4\u6b65\u7684\u5206\u6570 \u901a\u8fc7softmax\u5c06\u5206\u6570\u8f6c\u5316\u4e3a\u6982\u7387\u5206\u5e03 \u5728\u8fd9\u4e2a\u89e3\u7801\u5668\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u7b2c\u4e00\u4e2a\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001(\u201che\u201d) \u5229\u7528\u6ce8\u610f\u529b\u5206\u5e03\u5bf9\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001\u8fdb\u884c\u52a0\u6743\u6c42\u548c \u6ce8\u610f\u529b\u8f93\u51fa\u4e3b\u8981\u5305\u542b\u6765\u81ea\u4e8e\u53d7\u5230\u9ad8\u5ea6\u5173\u6ce8\u7684\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f \u8fde\u63a5\u7684 \u6ce8\u610f\u529b\u8f93\u51fa \u4e0e \u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \uff0c\u7136\u540e\u7528\u6765\u8ba1\u7b97 \\(\\hat y_1\\) \u6709\u65f6\uff0c\u6211\u4eec\u4ece\u524d\u9762\u7684\u6b65\u9aa4\u4e2d\u63d0\u53d6\u6ce8\u610f\u529b\u8f93\u51fa\uff0c\u5e76\u5c06\u5176\u8f93\u5165\u89e3\u7801\u5668(\u8fde\u540c\u901a\u5e38\u7684\u89e3\u7801\u5668\u8f93\u5165)\u3002\u6211\u4eec\u5728\u4f5c\u4e1a4\u4e2d\u505a\u8fd9\u4e2a\u3002 Attention: in equations \u6211\u4eec\u6709\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(h_{1}, \\ldots, h_{N} \\in \\mathbb{R}^{h}\\) \u5728\u65f6\u95f4\u6b65 t \u4e0a\uff0c\u6211\u4eec\u6709\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(s_{t} \\in \\mathbb{R}^{h}\\) \u6211\u4eec\u5f97\u5230\u8fd9\u4e00\u6b65\u7684\u6ce8\u610f\u5206\u6570 \\[ e^{t}=\\left[s_{t}^{T} \\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{s}_{t}^{T} \\boldsymbol{h}_{N}\\right] \\in \\mathbb{R}^{N} \\] \u6211\u4eec\u4f7f\u7528softmax\u5f97\u5230\u8fd9\u4e00\u6b65\u7684\u6ce8\u610f\u5206\u5e03 \\(\\alpha^{t}\\) (\u8fd9\u662f\u4e00\u4e2a\u6982\u7387\u5206\u5e03\uff0c\u548c\u4e3a1) \\[ \\alpha^{t}=\\operatorname{softmax}\\left(e^{t}\\right) \\in \\mathbb{R}^{N} \\] \u6211\u4eec\u4f7f\u7528 \\(\\alpha^{t}\\) \u6765\u83b7\u5f97\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001\u7684\u52a0\u6743\u548c\uff0c\u5f97\u5230\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{a}_{t}\\) \\[ \\boldsymbol{a}_{t}=\\sum_{i=1}^{N} \\alpha_{i}^{t} \\boldsymbol{h}_{i} \\in \\mathbb{R}^{h} \\] \u6700\u540e\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u8f93\u51fa \\(\\boldsymbol{a}_{t}\\) \u4e0e\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001\u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u6309\u7167\u975e\u6ce8\u610fseq2seq\u6a21\u578b\u7ee7\u7eed\u8fdb\u884c \\[ \\left[\\boldsymbol{a}_{t} ; \\boldsymbol{s}_{t}\\right] \\in \\mathbb{R}^{2 h} \\] Attention is great \u6ce8\u610f\u529b\u663e\u8457\u63d0\u9ad8\u4e86NMT\u6027\u80fd \u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u8ba9\u89e3\u7801\u5668\u4e13\u6ce8\u4e8e\u67d0\u4e9b\u90e8\u5206\u7684\u6e90\u8bed\u53e5 \u6ce8\u610f\u529b\u89e3\u51b3\u74f6\u9888\u95ee\u9898 \u6ce8\u610f\u529b\u5141\u8bb8\u89e3\u7801\u5668\u76f4\u63a5\u67e5\u770b\u6e90\u8bed\u53e5\uff1b\u7ed5\u8fc7\u74f6\u9888 \u6ce8\u610f\u529b\u5e2e\u52a9\u6d88\u5931\u68af\u5ea6\u95ee\u9898 \u63d0\u4f9b\u4e86\u901a\u5f80\u9065\u8fdc\u72b6\u6001\u7684\u6377\u5f84 \u6ce8\u610f\u529b\u63d0\u4f9b\u4e86\u4e00\u4e9b\u53ef\u89e3\u91ca\u6027 \u901a\u8fc7\u68c0\u67e5\u6ce8\u610f\u529b\u7684\u5206\u5e03\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u89e3\u7801\u5668\u5728\u5173\u6ce8\u4ec0\u4e48 \u6211\u4eec\u53ef\u4ee5\u514d\u8d39\u5f97\u5230(\u8f6f)\u5bf9\u9f50 \u8fd9\u5f88\u9177\uff0c\u56e0\u4e3a\u6211\u4eec\u4ece\u6765\u6ca1\u6709\u660e\u786e\u8bad\u7ec3\u8fc7\u5bf9\u9f50\u7cfb\u7edf \u7f51\u7edc\u53ea\u662f\u81ea\u4e3b\u5b66\u4e60\u4e86\u5bf9\u9f50 Attention is a general Deep Learning technique \u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c\u6ce8\u610f\u529b\u662f\u6539\u8fdb\u673a\u5668\u7ffb\u8bd1\u7684\u5e8f\u5217\u5230\u5e8f\u5217\u6a21\u578b\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5 \u7136\u800c \uff1a\u60a8\u53ef\u4ee5\u5728\u8bb8\u591a\u4f53\u7cfb\u7ed3\u6784(\u4e0d\u4ec5\u4ec5\u662fseq2seq)\u548c\u8bb8\u591a\u4efb\u52a1(\u4e0d\u4ec5\u4ec5\u662fMT)\u4e2d\u4f7f\u7528\u6ce8\u610f\u529b \u6ce8\u610f\u529b\u7684\u66f4\u4e00\u822c\u5b9a\u4e49 \u7ed9\u5b9a\u4e00\u7ec4\u5411\u91cf \u503c \u548c\u4e00\u4e2a\u5411\u91cf \u67e5\u8be2 \uff0c\u6ce8\u610f\u529b\u662f\u4e00\u79cd\u6839\u636e\u67e5\u8be2\uff0c\u8ba1\u7b97\u503c\u7684\u52a0\u6743\u548c\u7684\u6280\u672f \u6211\u4eec\u6709\u65f6\u8bf4 query attends to the values \u4f8b\u5982\uff0c\u5728seq2seq + attention\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e2a\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001(\u67e5\u8be2)\u5173\u6ce8\u6240\u6709\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001(\u503c) \u76f4\u89c9 \u52a0\u6743\u548c\u662f\u503c\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u7684\u9009\u62e9\u6027\u6c47\u603b\uff0c\u67e5\u8be2\u5728\u5176\u4e2d\u786e\u5b9a\u8981\u5173\u6ce8\u54ea\u4e9b\u503c \u6ce8\u610f\u662f\u4e00\u79cd\u83b7\u53d6\u4efb\u610f\u4e00\u7ec4\u8868\u793a(\u503c)\u7684\u56fa\u5b9a\u5927\u5c0f\u8868\u793a\u7684\u65b9\u6cd5\uff0c\u4f9d\u8d56\u4e8e\u5176\u4ed6\u4e00\u4e9b\u8868\u793a(\u67e5\u8be2)\u3002 There are several attention variants \u6211\u4eec\u6709\u4e00\u4e9b\u503c \\(\\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{h}_{N} \\in \\mathbb{R}^{d_{1}}\\) \u548c\u4e00\u4e2a\u67e5\u8be2 \\(s \\in \\mathbb{R}^{d_{2}}\\) \u6ce8\u610f\u529b\u603b\u662f\u5305\u62ec \u8ba1\u7b97\u6ce8\u610f\u529b\u5f97\u5206 \\(e \\in \\mathbb{R}^{N}\\) \uff08\u5f88\u591a\u79cd\u8ba1\u7b97\u65b9\u5f0f\uff09 \u91c7\u53d6softmax\u6765\u83b7\u5f97\u6ce8\u610f\u529b\u5206\u5e03 \\(\\alpha\\) \\[ \\alpha=\\operatorname{softmax}(\\boldsymbol{e}) \\in \\mathbb{R}^{N} \\] \u4f7f\u7528\u6ce8\u610f\u529b\u5206\u5e03\u5bf9\u503c\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff1a\u4ece\u800c\u5f97\u5230\u6ce8\u610f\u8f93\u51fa \\(\\boldsymbol{a}\\) (\u6709\u65f6\u79f0\u4e3a\u4e0a\u4e0b\u6587\u5411\u91cf) \\[ \\boldsymbol{a}=\\sum_{i=1}^{N} \\alpha_{i} \\boldsymbol{h}_{i} \\in \\mathbb{R}^{d_{1}} \\] Attention variants \u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4ece \\(\\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{h}_{N} \\in \\mathbb{R}^{d_{1}}\\) \u8ba1\u7b97 \\(e \\in \\mathbb{R}^{N}\\) \u548c \\(\\boldsymbol{s} \\in \\mathbb{R}^{d_{2}}\\) \u57fa\u672c\u7684\u70b9\u4e58\u6ce8\u610f\u529b \\(\\boldsymbol{e}_{i}=\\boldsymbol{s}^{T} \\boldsymbol{h}_{i} \\in \\mathbb{R}\\) \u6ce8\u610f\uff1a\u8fd9\u91cc\u5047\u8bbe \\(d_1 = d_2\\) \u8fd9\u662f\u6211\u4eec\u4e4b\u524d\u770b\u5230\u7684\u7248\u672c \u4e58\u6cd5\u6ce8\u610f\u529b \\(e_{i}=s^{T} \\boldsymbol{W} \\boldsymbol{h}_{i} \\in \\mathbb{R}\\) \\(\\boldsymbol{W} \\in \\mathbb{R}^{d_{2} \\times d_{1}}\\) \u662f\u6743\u91cd\u77e9\u9635 \u52a0\u6cd5\u6ce8\u610f\u529b \\(e_{i}=\\boldsymbol{v}^{T} \\tanh \\left(\\boldsymbol{W}_{1} \\boldsymbol{h}_{i}+\\boldsymbol{W}_{2} \\boldsymbol{s}\\right) \\in \\mathbb{R}\\) \u5176\u4e2d \\(\\boldsymbol{W}_{1} \\in \\mathbb{R}^{d_{3} \\times d_{1}}, \\boldsymbol{W}_{2} \\in \\mathbb{R}^{d_{3} \\times d_{2}}\\) \u662f\u6743\u91cd\u77e9\u9635\uff0c \\(\\boldsymbol{v} \\in \\mathbb{R}^{d_{3}}\\) \u662f\u6743\u91cd\u5411\u91cf \\(d_3\\) (\u6ce8\u610f\u529b\u7ef4\u5ea6)\u662f\u4e00\u4e2a\u8d85\u53c2\u6570 \u4f60\u4eec\u5c06\u5728\u4f5c\u4e1a4\u4e2d\u8003\u8651\u8fd9\u4e9b\u7684\u76f8\u5bf9\u4f18\u52bf/\u52a3\u52bf\uff01 Summary of today\u2019s lecture Notes 06 Neural Machine Translation, Seq2seq and Attention \u00b6 Keyphrases : Seq2Seq and Attention Mechanisms, Neural Machine Translation, Speech Processing 1 Neural Machine Translation with Seq2Seq \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u5904\u7406\u4e86\u9884\u6d4b\u5355\u4e2a\u8f93\u51fa\u7684\u95ee\u9898\uff1a\u4e00\u4e2a\u5355\u8bcd\u7684 NER \u6807\u7b7e\uff0c\u5728\u4e00\u4e2a\u53e5\u5b50\u4e2d\u6839\u636e\u524d\u9762\u7684\u5355\u8bcd\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff0c\u7b49\u7b49\u3002\u7136\u800c\u6709\u4e00\u7c7b\u7684 NLP \u4efb\u52a1\u662f\u4f9d\u8d56\u5e8f\u5217\u8f93\u51fa\u7684\uff0c\u6216\u8005\u8f93\u51fa\u662f\u957f\u5ea6\u53d8\u5316\u7684\u5e8f\u5217\u3002\u4f8b\u5982\uff1a Translation \uff1a\u5c06\u4e00\u79cd\u8bed\u8a00\u7684\u4e00\u4e2a\u53e5\u5b50\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u8f93\u51fa\u662f\u53e6\u5916\u4e00\u79cd\u8bed\u8a00\u7684\u76f8\u540c\u7684\u610f\u601d\u7684\u53e5\u5b50\u3002 Conversation \uff1a\u4ee5\u9648\u8ff0\u6216\u95ee\u9898\u4f5c\u4e3a\u8f93\u5165\u5e76\u4f5c\u51fa\u56de\u5e94\u3002 Summarization \uff1a\u5c06\u5927\u91cf\u6587\u672c\u4f5c\u4e3a\u8f93\u5165\u5e76\u8f93\u51fa\u5176\u6458\u8981\u3002 \u5728\u4e0b\u9762\u7684\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd Seq2Seq \u6a21\u578b\uff0c\u4e00\u4e2a\u7528\u6765\u5904\u7406\u4e0a\u8ff0\u95ee\u9898\u7684\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u3002\u8fd9\u4e2a\u6846\u67b6\u88ab\u8bc1\u660e\u4e86\u662f\u975e\u5e38\u6709\u6548\u7684\uff0c\u5728\u4e0d\u5230\u4e09\u5e74\u7684\u65f6\u95f4\u91cc\u6210\u4e3a\u4e86\u673a\u5668\u7ffb\u8bd1\u7684\u6807\u51c6\u65b9\u6cd5\u3002 1.1 Brief Note on Historical Approaches \u5728\u8fc7\u53bb\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u662f\u57fa\u4e8e\u6982\u7387\u6a21\u578b\u6784\u5efa\u7684 \u4e00\u4e2a \u7ffb\u8bd1\u6a21\u578b \uff0c\u544a\u8bc9\u6211\u4eec\u4e00\u4e2a\u6e90\u8bed\u8a00\u4e2d\u6700\u6709\u53ef\u80fd\u88ab\u7ffb\u8bd1\u4e3a\u7684\u53e5\u5b50/\u77ed\u8bed\u3002 \u4e00\u4e2a \u8bed\u8a00\u6a21\u578b \uff0c\u544a\u8bc9\u6211\u4eec\u7ed9\u5b9a\u53e5\u5b50/\u77ed\u8bed\u7684\u6574\u4f53\u53ef\u80fd\u6027\u3002 \u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7528\u4e8e\u6784\u5efa\u57fa\u4e8e\u5355\u8bcd\u6216\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u3002\u6b63\u5982\u4f60\u6240\u60f3\u5230\u7684\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u7684\u57fa\u4e8e\u5355\u8bcd\u7684\u7ffb\u8bd1\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u80fd\u6355\u83b7\u8bed\u8a00\u4e4b\u95f4\u7684\u6392\u5e8f\u5dee\u5f02\uff08\u4f8b\u5982\uff0c\u5426\u5b9a\u8bcd\u79fb\u52a8\uff0c\u53e5\u5b50\u4e2d\u7684\u4e3b\u8bed\u548c\u52a8\u8bcd\u7684\u4f4d\u7f6e\u7b49\uff09\u3002 \u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u5728 Seq2Seq \u4e4b\u524d\u662f\u975e\u5e38\u5e38\u89c1\u7684\u3002\u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u53ef\u4ee5\u6839\u636e\u77ed\u8bed\u5e8f\u5217\u8003\u8651\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u76f8\u6bd4\u6bd4\u57fa\u4e8e\u8bcd\u7684\u7cfb\u7edf\u53ef\u4ee5\u5904\u7406\u66f4\u590d\u6742\u7684\u8bed\u6cd5\u3002\u7136\u800c\uff0c\u5728\u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u4ecd\u7136\u96be\u4ee5\u6355\u83b7\u957f\u8ddd\u79bb\u7684\u4fe1\u606f\u3002 Seq2Seq \u5e26\u6765\u5f88\u5927\u7684\u4f18\u52bf\uff0c\u5c24\u5176\u662f\u4f7f\u7528 LSTM\uff0c\u73b0\u4ee3\u7ffb\u8bd1\u7cfb\u7edf\u53ef\u4ee5\u5728\u89c2\u6d4b\u5230\u6574\u4e2a\u8f93\u5165\u540e\u751f\u6210\u4efb\u610f\u7684\u8f93\u51fa\u5e8f\u5217\u3002\u4ed6\u4eec\u751a\u81f3\u53ef\u4ee5\u81ea\u52a8\u5730\u4e13\u6ce8\u4e8e\u8f93\u5165\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u4ee5\u5e2e\u52a9\u751f\u6210\u6709\u7528\u7684\u7ffb\u8bd1\u3002 1.2 Sequence-to-sequence Basics \u5e8f\u5217\u5230\u5e8f\u5217\uff0c\u6216\u8005 Seq2Seq\uff0c\u662f\u4e00\u4e2a\u6bd4\u8f83\u65b0\u7684\u6a21\u578b\uff0c\u5728 2014 \u5e74\u88ab\u63d0\u51fa\u7528\u82f1\u8bed-\u6cd5\u8bed\u7ffb\u8bd1\u3002\u5728\u66f4\u9ad8\u7684\u5c42\u9762\u4e0a\uff0cSeq2Seq \u662f\u4e00\u4e2a\u6709\u4e24\u4e2aRNN\u7ec4\u6210\u7684\u7aef\u5230\u7aef\u6a21\u578b \u4e00\u4e2a encoder \u7f16\u7801\u5668\uff0c\u5c06\u6a21\u578b\u7684\u8f93\u5165\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u7f16\u7801\u56fa\u5b9a\u5927\u5c0f\u7684\u201c\u4e0a\u4e0b\u6587\u5411\u91cf\u201d\u3002 \u4e00\u4e2a decoder \u89e3\u7801\u5668\uff0c\u4f7f\u7528\u6765\u81ea\u7f16\u7801\u5668\u751f\u6210\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u4f5c\u4e3a\u4ece\u5176\u751f\u6210\u8f93\u51fa\u5e8f\u5217\u7684\u201c\u79cd\u5b50\u201d\u3002 \u56e0\u6b64\uff0cSeq2Seq \u6a21\u578b\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u7f16\u7801\u5668-\u89e3\u7801\u5668\u6a21\u578b\u201d\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u5206\u522b\u8ba8\u8bba\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u7ec6\u8282\u3002 1.3 Seq2Seq architecture - encoder \u7f16\u7801\u5668\u7f51\u7edc\u7684\u4f5c\u7528\u662f\u8bfb\u53d6\u8f93\u5165\u5e8f\u5217\u5230\u6211\u4eec\u7684 Seq2Seq \u6a21\u578b\u4e2d\uff0c\u7136\u540e\u5bf9\u8be5\u5e8f\u5217\u751f\u6210\u4e00\u4e2a\u56fa\u5b9a\u7ef4\u5ea6\u7684\u4e0a\u4e0b\u6587\u5411\u91cf \\(C\\) \u3002\u4e3a\u6b64\uff0c\u7f16\u7801\u5668\u4f7f\u7528\u4e00\u4e2a\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u5355\u5143\u2014\u2014\u4e00\u822c\u4f7f\u7528 LSTM\u2014\u2014\u6bcf\u4e2a\u65f6\u95f4\u6b65\u8bfb\u53d6\u4e00\u4e2a\u8f93\u5165\u5355\u8bcd\u3002\u5355\u5143\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u5c31\u662f \\(C\\) \u3002\u7136\u800c\uff0c\u56e0\u4e3a\u5c06\u4e00\u4e2a\u4efb\u610f\u957f\u5ea6\u5e8f\u5217\u538b\u7f29\u5230\u4e00\u4e2a\u5355\u4e00\u56fa\u5b9a\u5927\u5c0f\u7684\u5411\u91cf\u662f\u5f88\u56f0\u96be\u7684\uff08\u7279\u522b\u662f\u50cf\u7ffb\u8bd1\u8fd9\u6837\u7684\u56f0\u96be\u4efb\u52a1\uff09\uff0c\u7f16\u7801\u5668\u901a\u5e38\u7531\u5806\u53e0\u7684 LSTM \u7ec4\u6210\uff1a\u4e00\u7cfb\u5217 LSTM\u201c\u5c42\u201d\uff0c\u5176\u4e2d\u6bcf\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u5c42\u7684\u8f93\u5165\u5e8f\u5217\u3002LSTM \u6700\u540e\u4e00\u5c42\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u5c31\u662f \\(C\\) \u3002 Seq2Seq \u7f16\u7801\u5668\u901a\u5e38\u4f1a\u505a\u4e00\u4e9b\u5947\u602a\u7684\u4e8b\u60c5\uff1a\u5b83\u4eec\u5c06\u53cd\u5411\u5904\u7406\u8f93\u5165\u5e8f\u5217\u3002\u5b9e\u9645\u4e0a\u8fd9\u4e48\u5904\u7406\u662f\u6709\u76ee\u7684\u7684\u3002\u901a\u8fc7\u8fd9\u6837\u505a\uff0c\u7f16\u7801\u5668\u770b\u5230\u7684\u6700\u540e\u7684\u4fe1\u606f\uff08\u7c97\u7565\u5730\uff09\u5bf9\u5e94\u4e8e\u6a21\u578b\u8f93\u51fa\u7684\u5f00\u59cb\u4fe1\u606f\uff1b\u8fd9\u4f7f\u5f97\u89e3\u7801\u5668\u66f4\u5bb9\u6613\u5728\u8f93\u51fa\u4e0a\u201c\u5f00\u59cb\u201d\uff0c\u540c\u65f6\u89e3\u7801\u5668\u4e5f\u66f4\u5bb9\u6613\u5730\u4ea7\u751f\u9002\u5f53\u7684\u8f93\u51fa\u53e5\u5b50\u3002\u5728\u7ffb\u8bd1\u7684\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5141\u8bb8\u7f51\u7edc\u5728\u770b\u5230\u8f93\u5165\u7684\u524d\u51e0\u4e2a\u5355\u8bcd\u65f6\u5c31\u8fdb\u884c\u7ffb\u8bd1\uff1b\u4e00\u65e6\u524d\u51e0\u4e2a\u5355\u8bcd\u88ab\u6b63\u786e\u5730\u7ffb\u8bd1\uff0c\u6784\u5efa\u4e00\u4e2a\u6b63\u786e\u7684\u53e5\u5b50\u6bd4\u4ece\u5934\u5f00\u59cb\u66f4\u52a0\u5bb9\u6613\u3002 \u4e0b\u56fe\u662f\u4e00\u4e2a\u5c55\u793a\u7f16\u7801\u5668\u7684\u4f8b\u5b50\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u662f\u7ffb\u8bd1\u82f1\u8bed\u53e5\u5b50\u201cwhat is your name?\u201d\u6ce8\u610f\u8fd9\u91cc\u662f\u53cd\u5411\u8bfb\u53d6\u8f93\u5165\u5355\u8bcd\u7684\u3002\u6ce8\u610f\u7f51\u7edc\u662f\u5c55\u5f00\u7684\uff0c\u6bcf\u4e00\u5217\u662f\u4e00\u4e2a\u65f6\u95f4\u6b65\u548c\u6bcf\u4e00\u884c\u662f\u5355\u4e00\u5c42\uff0c\u6240\u4ee5\u6c34\u5e73\u7bad\u5934\u662f\u5bf9\u5e94\u9690\u85cf\u72b6\u6001\u548c\u5782\u76f4\u7bad\u5934\u662f LSTM \u7684\u8f93\u5165/\u8f93\u51fa\u3002 1.4 Seq2Seq architecture - decoder \u89e3\u7801\u5668\u4e5f\u662f\u4e00\u4e2a LSTM \u7f51\u7edc\uff0c\u4f46\u662f\u5b83\u7684\u4f7f\u7528\u6bd4\u7f16\u7801\u5668\u7f51\u7edc\u7565\u5fae\u590d\u6742\u3002\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u4f5c\u4e3a\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u4ee5\u201c\u77e5\u9053\u201d\u5230\u76ee\u524d\u4e3a\u6b62\u751f\u6210\u7684\u5355\u8bcd\u548c\u8f93\u5165\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u7f16\u7801\u5668\u4fdd\u6301\u201c\u5806\u53e0\u201d\u7684 LSTM \u67b6\u6784\uff0c\u4f46\u662f\u6211\u4eec\u5c06\u4f7f\u7528\u7f16\u7801\u5668\u751f\u6210\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u521d\u59cb\u5316\u7b2c\u4e00\u5c42\u7684\u9690\u85cf\u5c42\uff1b\u7136\u540e\u7f16\u7801\u5668\u5c06\u4f7f\u7528\u8f93\u5165\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u9010\u8bcd\u5730\u751f\u6210\u8f93\u51fa\u3002 \u4e00\u65e6\u7f16\u7801\u5668\u4f7f\u7528\u5176\u4e0a\u4e0b\u6587\u5411\u91cf\u8bbe\u7f6e\u597d\uff0c\u6211\u4eec\u5c06\u4f20\u5165\u4e00\u4e2a\u7279\u6b8a\u7684\u5b57\u7b26\u6765\u8868\u793a\u751f\u6210\u8f93\u51fa\u7684\u5f00\u59cb\u3002\u5728\u6587\u732e\u4e2d\uff0c\u4e00\u822c\u662f\u9644\u52a0\u5230\u8f93\u5165\u7ed3\u5c3e\u7684 \\(\\text{<EOS>}\\) \u6807\u8bb0\uff08\u5728\u8f93\u51fa\u7684\u7ed3\u5c3e\u4e5f\u6709\u8fd9\u6837\u7684\u6807\u8bb0\uff0c\u8868\u793a\u751f\u6210\u8f93\u51fa\u5b8c\u6210\uff09\u3002\u7136\u540e\u6211\u4eec\u7b2c\u4e00\u4e2a\u65f6\u95f4\u6b65\u5c06\u4e00\u5c42\u63a5\u4e00\u5c42\u5730\u8fd0\u884c\u8fd9\u4e2a\u4e09\u5c42\u7684 LSTM\uff0c\u5c06\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u653e\u5230 softmax \u51fd\u6570\u4e2d\u751f\u6210\u4e00\u4e2a\u8f93\u51fa\u5355\u8bcd\u3002\u7136\u540e\u6211\u4eec\u628a\u8fd9\u4e2a\u8bcd\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7b2c\u4e00\u5c42\uff0c\u91cd\u590d\u4e0a\u8ff0\u7684\u6d41\u7a0b\u751f\u6210\u8f93\u51fa\u5355\u8bcd\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u5982\u4f55\u4f7f LSTM \u50cf\u8bed\u8a00\u6a21\u578b\u4e00\u6837\u8d77\u4f5c\u7528\u3002 \u4e0b\u56fe\u662f\u4e00\u4e2a\u5c55\u793a\u89e3\u7801\u5668\u7684\u4f8b\u5b50\u3002\u8be5\u89e3\u7801\u5668\u6b63\u5728\u89e3\u7801\u201cwhat is your name?\u201d\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u6ce8\u610f\u5728\u751f\u6210\u7684\u5f00\u59cb\u4f7f\u7528\u4e86\u4e00\u4e2a\u7279\u6b8a\u7684\u7b26\u53f7\u201cGO\u201d\uff0c\u800c\u4e14\u89e3\u7801\u7684\u751f\u6210\u662f\u6309\u7167\u6b63\u5e38\u7684\u53e5\u5b50\u987a\u5e8f\uff0c\u800c\u4e0d\u662f\u53cd\u5411\u8bfb\u53d6\u7684\u8f93\u5165\u3002\u6ce8\u610f\u8f93\u5165\u548c\u8f93\u51fa\u957f\u5ea6\u4e0d\u9700\u8981\u76f8\u540c\u3002 \u4e00\u65e6\u6211\u4eec\u6709\u4e86\u8f93\u51fa\u5e8f\u5217\uff0c\u6211\u4eec\u5c31\u50cf\u5f80\u5e38\u4e00\u6837\u4f7f\u7528\u76f8\u540c\u7684\u5b66\u4e60\u7b56\u7565\u3002\u6211\u4eec\u5bf9\u9884\u6d4b\u5e8f\u5217\u5b9a\u4e49\u4e00\u4e2a\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\uff0c\u7136\u540e\u7528\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u548c\u53cd\u5411\u4f20\u64ad\u7b97\u6cd5\u6765\u6700\u5c0f\u5316\u635f\u5931\u51fd\u6570\u3002\u540c\u65f6\u5bf9\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u8fdb\u884c\u8bad\u7ec3\uff0c\u4f7f\u5f97\u5b83\u4eec\u90fd\u5b66\u4e60\u5230\u76f8\u540c\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u8868\u793a\u3002 1.5 Recap & Basic NMT Example \u6ce8\u610f\u8f93\u5165\u548c\u8f93\u51fa\u7684\u957f\u5ea6\u4e4b\u95f4\u662f\u6ca1\u6709\u4efb\u4f55\u8054\u7cfb\u7684\uff1b\u6a21\u578b\u7684\u8f93\u5165\u53e5\u5b50\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u7684\uff0c\u6a21\u578b\u7684\u8f93\u51fa\u53e5\u5b50\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u7684\u3002\u7136\u800c\uff0c\u5df2\u7ecf\u77e5\u9053 Seq2Seq \u6a21\u578b\u5728\u8f93\u5165\u53e5\u5b50\u5f88\u957f\u7684\u60c5\u51b5\u4e0b\u6548\u679c\u4f1a\u53d8\u5f97\u5f88\u5dee\uff0cLSTM \u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u6709\u4e00\u7cfb\u5217\u7684\u9650\u5236\u3002 \u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b Seq2Seq \u6a21\u578b\u4e3a\u4e86\u5c06\u82f1\u8bed\u201cwhat is your name?\u201d\u7ffb\u8bd1\u4e3a\u6cd5\u8bed\u201ccomment t\u2019appelles tu\u201d\u7684\u4f8b\u5b50\u3002\u9996\u5148\uff0c\u6211\u4eec\u4ece\u56db\u4e2a one-hot \u5411\u91cf\u8f93\u5165\u5f00\u59cb\u3002\u8fd9\u4e9b\u8f93\u5165\u9700\u8981\u6216\u8005\u4e0d\u9700\u8981\uff08\u5bf9\u7ffb\u8bd1\u4efb\u52a1\uff0c\u4e00\u822c\u9700\u8981\uff09\u7528\u4e00\u4e2a\u7a20\u5bc6\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u7136\u540e\uff0c\u4e00\u4e2a\u5c42\u53e0 LSTM \u53cd\u5411\u8bfb\u53d6\u8f93\u5165\u5e8f\u5217\uff0c\u5c06\u5176\u7f16\u7801\u4e3a\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u662f\u4e00\u4e2a\u5411\u91cf\u7a7a\u95f4\u8868\u793a\uff0c\u8868\u793a\u201c\u8be2\u95ee\u67d0\u4eba\u4ed6\u4eec\u7684\u540d\u5b57\u201d\uff08\u8f93\u5165\u7684\u82f1\u6587\u53e5\u5b50\uff09\u7684\u610f\u601d\u3002\u6211\u4eec\u8fd0\u884c\u8fd9\u4e2a\u7f51\u7edc\u7684\u6bcf\u4e00\u5c42\u7684\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u5bf9\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u653e\u5230 softmax \u51fd\u6570\u4e2d\u8ba1\u7b97\uff0c\u5e76\u751f\u6210\u6211\u4eec\u7b2c\u4e00\u4e2a\u8f93\u51fa\u5355\u8bcd\u3002\u8fd9\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u7f51\u7edc\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u5165\uff0c\u5e76\u4e14\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u89e3\u7801\u53e5\u5b50\u201ccomment t\u2019appelles tu\u201d\u7684\u5269\u4f59\u90e8\u5206\u3002\u5728\u53cd\u5411\u4f20\u64ad\u671f\u95f4\uff0c\u7f16\u7801\u5668\u7684 LSTM \u7684\u6743\u503c\u88ab\u66f4\u65b0\uff0c\u4f7f\u5f97\u5b83\u80fd\u5b66\u4e60\u5230\u66f4\u597d\u7684\u53e5\u5b50\u5411\u91cf\u8868\u793a\uff0c\u540c\u65f6\u8bad\u7ec3\u89e3\u7801\u5668\u7684 LSTM \u6743\u503c\uff0c\u4f7f\u5f97\u5b83\u80fd\u751f\u6210\u4e0e\u4e0a\u4e0b\u6587\u5411\u91cf\u76f8\u5173\u7684\u6b63\u786e\u8bed\u6cd5\u7684\u53e5\u5b50\u3002 Encoder\uff1a\u9010\u5c42\u8fd0\u884c\uff0c\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u5c42\u7684\u8f93\u5165 Decoder\uff1a\u9010\u65f6\u95f4\u6b65\u8fd0\u884c\uff0c\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7b2c\u4e00\u5c42\u7684\u8f93\u5165 1.6 Bidirectional RNNs \u4e4b\u524d\u8ba8\u8bba\u8fc7\u53e5\u5b50\u7684\u4f9d\u8d56\u4e0d\u4ec5\u4ec5\u5728\u4e00\u4e2a\u65b9\u5411\u7684\u4f20\u64ad\u8d77\u4f5c\u7528\uff1b\u4e00\u4e2a\u5355\u8bcd\u53ef\u4ee5\u4f9d\u8d56\u5b83\u524d\u9762\u6216\u8005\u540e\u9762\u7684\u5355\u8bcd\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u7684 Seq2Seq \u6a21\u578b\u5e76\u6ca1\u6709\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff1b\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u53ea\u662f\u8003\u8651\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u5355\u8bcd\u7684\u524d\u9762\u5355\u8bcd\u7684\u4fe1\u606f\uff08\u901a\u8fc7 LSTM \u7684\u9690\u85cf\u72b6\u6001\uff09\u3002\u5bf9\u4e8e NMT\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u6709\u6548\u5730\u5bf9\u4efb\u610f\u8f93\u5165\u8fdb\u884c\u7f16\u7801\uff0c\u800c\u4e0d\u7ba1\u4e0e\u8f93\u5165\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u7684\u65b9\u5411\uff0c\u56e0\u6b64\u8fd9\u624d\u80fd\u591f\u8ba9\u83b7\u5f97\u7684\u4fe1\u606f\u4e0d\u4f1a\u51cf\u5c11\u3002 \u53cc\u5411RNN\u901a\u8fc7\u904d\u5386\u5e8f\u5217\u7684\u4e24\u4e2a\u65b9\u5411\u5e76\u8fde\u63a5\u6240\u5f97\u5230\u7684\u8f93\u51fa\uff08\u795e\u7ecf\u5143\u8f93\u51fa\u548c\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u90fd\u8fdb\u884c\u8fde\u63a5\uff09\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5bf9\u4e8e\u6bcf\u4e2a RNN \u795e\u7ecf\u5143\uff0c\u6211\u4eec\u7b80\u5355\u5730\u6dfb\u52a0\u53e6\u4e00\u4e2a\u795e\u7ecf\u5143\uff0c\u4f46\u662f\u4ee5\u76f8\u53cd\u7684\u65b9\u5411\u5411\u5176\u653e\u5165\u8f93\u5165\uff1b\u5bf9\u5e94\u7b2c t \u4e2a\u5355\u8bcd\u7684\u8f93\u51fa \\(o_t\\) \u662f\u8fde\u63a5\u4e86\u5411\u91cf \\(\\left[o_{t}^{(f)} \\quad o_{t}^{(b)}\\right]\\) \uff0c\u5176\u4e2d \\(o_{t}^{(f)}\\) \u662f\u8bcd t \u5728\u6b63\u5411\u7684 RNN \u7684\u8f93\u51fa\uff0c \\(o_{t}^{(b)}\\) \u662f\u8bcd t \u5728\u53cd\u5411\u7684 RNN \u7684\u8f93\u51fa\u3002\u7c7b\u4f3c\u5730\uff0c\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u662f \\(\\left[h^{(f)} \\quad h^{(b)}\\right]\\) \uff0c\u5176\u4e2d \\(h^{(f)}\\) \u662f\u6b63\u5411\u7684 RNN \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u548c \\(h^{(b)}\\) \u662f\u53cd\u5411\u7684 RNN \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u3002\u4e0b\u56fe\u662f\u4e00\u4e2a\u53cc\u5411 LSTM \u89e3\u7801\u5668\u7684\u4f8b\u5b50\u3002 2 Attention Mechanism \u00b6 2.1 Motivation \u5f53\u4f60\u542c\u5230\u53e5\u5b50\u201cthe ball is on the \ufb01eld\u201d\uff0c\u4f60\u4e0d\u4f1a\u8ba4\u4e3a\u8fd9 6 \u4e2a\u5355\u8bcd\u90fd\u4e00\u6837\u91cd\u8981\u3002\u4f60\u9996\u5148\u4f1a\u6ce8\u610f\u5230\u5355\u8bcd\u201cball\u201d\uff0c\u201con\u201d \u548c \u201c\ufb01eld\u201d\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5355\u8bcd\u4f60\u662f\u89c9\u5f97\u6700\u201c\u91cd\u8981\u201d\u7684\u3002\u7c7b\u4f3c\u7684\uff0cBahdanau \u7b49\u4eba\u6ce8\u610f\u5230\u4f7f\u7528 RNN \u7684\u6700\u7ec8\u72b6\u6001\u4f5c\u4e3a Seq2Seq \u6a21\u578b\u7684\u5355\u4e00\u201c\u4e0a\u4e0b\u6587\u5411\u91cf\u201d\u7684\u7f3a\u70b9\uff1a\u4e00\u822c\u800c\u8a00\uff0c\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u5177\u6709\u4e0d\u540c\u7684\u91cd\u8981\u7a0b\u5ea6\u3002\u518d\u8005\uff0c\u6b64\u5916\uff0c\u8f93\u51fa\u7684\u4e0d\u540c\u90e8\u5206\u751a\u81f3\u53ef\u4ee5\u8003\u8651\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u662f\u201c\u91cd\u8981\u201d\u7684\u3002\u4f8b\u5982\uff0c\u5728\u7ffb\u8bd1\u4efb\u52a1\u4e2d\uff0c\u8f93\u51fa\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u662f\u4e00\u822c\u662f\u57fa\u4e8e\u8f93\u5165\u7684\u524d\u51e0\u4e2a\u8bcd\uff0c\u8f93\u51fa\u7684\u6700\u540e\u51e0\u4e2a\u8bcd\u53ef\u80fd\u57fa\u4e8e\u8f93\u5165\u7684\u51e0\u4e2a\u8bcd\u3002 \u6ce8\u610f\u673a\u5236\u5229\u7528\u8fd9\u4e00\u89c2\u5bdf\u7ed3\u679c\uff0c\u4e3a\u89e3\u7801\u5668\u7f51\u7edc\u63d0\u4f9b\u4e86\u5728\u6bcf\u4e2a\u89e3\u7801\u6b65\u9aa4\u67e5\u770b\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u529f\u80fd\uff1b\u7136\u540e\u89e3\u7801\u5668\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\u51b3\u5b9a\u54ea\u4e9b\u8f93\u5165\u5355\u8bcd\u662f\u91cd\u8981\u7684\u3002\u6709\u5f88\u591a\u7c7b\u578b\u7684\u7f16\u7801\u5668\u673a\u5236\uff0c\u4f46\u662f\u6211\u4eec\u5c06\u8ba8\u8bba\u7531 Bahdanau \u63d0\u51fa\u7684\u673a\u5236\u3002 2.2 Bahdanau et al. NMT model \u518d\u56de\u987e\u4e00\u4e0b\u6211\u4eec\u7684 Seq2Seq \u6a21\u578b\u662f\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u4e00\u4e2a\u7f16\u7801\u5668\u5c06\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7f16\u7801\uff0c\u4ee5\u53ca\u5229\u7528\u89e3\u7801\u5668\u6240\u63d0\u53d6\u7684\u4fe1\u606f\u751f\u6210\u7ffb\u8bd1\u53e5\u5b50\u7684\u89e3\u7801\u5668\u3002\u57fa\u672c\u4e0a\uff0c\u6211\u4eec\u7684\u8f93\u5165\u53e5\u5b50\u662f\u4e00\u4e2a\u6211\u4eec\u60f3\u8981\u7ffb\u8bd1\u7684\u8bcd\u5e8f\u5217 \\(x_{1}, \\ldots, x_{n}\\) \uff0c\u6211\u4eec\u7684\u7ffb\u8bd1\u8fc7\u7ed3\u679c\uff08\u76ee\u6807\u53e5\u5b50\uff09\u662f\u4e00\u4e2a\u8bcd\u5e8f\u5217 \\(y_{1}, \\ldots, y_{m}\\) \u3002 Encoder \u4ee4 \\(\\left(h_{1}, \\ldots, h_{n}\\right)\\) \u662f\u8f93\u5165\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf\u8868\u793a\u3002\u8fd9\u4e9b\u5411\u91cf\u662f\u4f8b\u5982 bi-LSTM \u7684\u8f93\u51fa\uff0c\u5e76\u4e14\u6355\u83b7\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u3002 Decoder \u6211\u4eec\u60f3\u4f7f\u7528\u4ee5\u4e0b\u5f62\u5f0f\u7684\u9012\u5f52\u516c\u5f0f\u8ba1\u7b97\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(s_i\\) \\[ s_{i}=f\\left(s_{i-1}, y_{i-1}, c_{i}\\right) \\] \u5176\u4e2d \\(s_{i-1}\\) \u662f\u524d\u9762\u7684\u9690\u85cf\u5411\u91cf\uff0c \\(y_{i-1}\\) \u662f\u524d\u9762\u65f6\u95f4\u6b65\u751f\u6210\u7684\u5355\u8bcd\uff0c\u548c \\(c_i\\) \u662f\u4ece\u539f\u59cb\u53e5\u5b50\u6355\u83b7\u4e0e\u89e3\u7801\u5668\u7684\u65f6\u95f4\u6b65 \\(i\\) \u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002 \u4e0a\u4e0b\u6587\u5411\u91cf \\(c_i\\) \u6355\u83b7\u5bf9\u7b2c \\(i\\) \u4e2a\u89e3\u7801\u65f6\u95f4\u6b65\u7684\u76f8\u5173\u4fe1\u606f\uff08\u4e0e\u6807\u51c6\u7684\u7684 Seq2Seq \u6a21\u578b\u53ea\u6709\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u4e0d\u540c\uff09\u3002\u5bf9\u6bcf\u4e2a\u539f\u59cb\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf \\(h_j\\) \uff0c\u8ba1\u7b97\u5206\u6570 \\[ e_{i, j}=a\\left(s_{i-1}, h_{j}\\right) \\] \u5176\u4e2d \\(a\\) \u662f\u5728 \\(\\mathbb{R}\\) \u4e2d\u5177\u6709\u503c\u7684\u4efb\u610f\u51fd\u6570\uff0c\u4f8b\u5982\u662f\u4e00\u4e2a\u5355\u5c42\u7684\u5168\u8fde\u63a5\u795e\u7ecf\u7f51\u7edc\u3002\u7136\u540e\uff0c\u6211\u4eec\u5f97\u5230\u4e00\u7cfb\u5217\u6807\u91cf\u503c \\(e_{i, 1}, \\ldots, e_{i, n}\\) \u3002\u7136\u540e\uff0c\u4f7f\u7528 softmax \u5c42\u5bf9\u8fd9\u4e9b\u5206\u6570\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5f97\u5230\u5411\u91cf \\(\\alpha_{i}=\\left(\\alpha_{i, 1}, \\ldots, \\alpha_{i, n}\\right)\\) \\[ \\alpha_{i, j}=\\frac{\\exp \\left(e_{i, j}\\right)}{\\sum_{k=1}^{n} \\exp \\left(e_{i, k}\\right)} \\] \u7136\u540e\uff0c\u8ba1\u7b97\u539f\u59cb\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf\u4e0e\u6ce8\u610f\u529b\u5411\u91cf\u7684\u52a0\u6743\u5e73\u5747\u503c\u4f5c\u4e3a\u4e0a\u4e0b\u5411\u91cf \\(c_i\\) \\[ c_{i}=\\sum_{j=1}^{n} \\alpha_{i, j} h_{j} \\] \u76f4\u89c2\u4e0a\u770b\uff0c\u8be5\u5411\u91cf\u4ece\u539f\u59cb\u53e5\u5b50\u7684\u89e3\u7801\u5668\u7684\u7b2c \\(i\\) \u4e2a\u65f6\u95f4\u6b65\u4e2d\u6355\u83b7\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002 2.3 Connection with translation alignment \u57fa\u4e8e\u6ce8\u610f\u529b\u7684\u6a21\u578b\u4e3a\u8f93\u51fa\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u5206\u914d\u5bf9\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u7684\u663e\u7740\u6027\uff08\u201c\u91cd\u8981\u6027\u201d\uff09\u3002\u5728\u7ffb\u8bd1\u4efb\u52a1\u4e2d\uff0c\u6ce8\u610f\u529b\u53ef\u4ee5\u8ba4\u4e3a\u662f\u201c\u5bf9\u9f50\u201d\u3002Bahdanau \u7b49\u4eba\u8ba4\u4e3a\u5728\u89e3\u7801\u7684\u65f6\u95f4\u6b65 \\(i\\) \u4e2d\u7684\u6ce8\u610f\u529b\u5206\u6570 \\(\\alpha_{ij}\\) \u8868\u793a\u6e90\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\u76ee\u6807\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd \\(i\\) \u3002\u6ce8\u610f\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6ce8\u610f\u529b\u5206\u6570\u6765\u6784\u5efa\u4e00\u4e2a\u5bf9\u9f50\u8868\u2014\u2014\u8fd9\u4e2a\u8868\u662f\u5c06\u6e90\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u6620\u5c04\u5230\u76ee\u6807\u53e5\u5b50\u4e2d\u7684\u76f8\u5e94\u5355\u8bcd\u2014\u2014\u57fa\u4e8e\u4ece\u6211\u4eec\u4ece Seq2Seq NMT \u7cfb\u7edf\u4e2d\u5b66\u4e60\u5230\u7684\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u3002\u4e0b\u56fe\u662f\u4e00\u4e2a\u5bf9\u9f50\u8868\u7684\u4f8b\u5b50\uff1a 2.4 Performance on long sentences \u57fa\u4e8e\u6ce8\u610f\u529b\u6a21\u578b\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u80fd\u591f\u6709\u6548\u5730\u7ffb\u8bd1\u957f\u53e5\u3002\u5f53\u53e5\u5b50\u7684\u8f93\u5165\u957f\u5ea6\u53d8\u5927\u65f6\uff0c\u6a21\u578b\u5982\u679c\u53ea\u4f7f\u7528\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u8868\u793a\u800c\u4e0d\u4f7f\u7528\u6ce8\u610f\u673a\u5236\uff0c\u8fd9\u4f1a\u4e22\u5931\u4fe1\u606f\u548c\u964d\u4f4e\u51c6\u786e\u5ea6\u3002\u6ce8\u610f\u529b\u673a\u5236\u662f\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5e76\u4e14\u73b0\u5728\u5f88\u591a\u5b9e\u9a8c\u4e5f\u8bc1\u5b9e\u4e86\u786e\u5b9e\u5982\u6b64\u3002\u4e0b\u56fe\u662f\u957f\u53e5\u5b50\u5728\u4e0d\u540c\u7684 NMT \u6a21\u578b\u4e2d\u7684\u8868\u73b0 3 Other Models \u00b6 3.1 Luong et al. NMT model Luong \u7b49\u4eba\u5728\u8bba\u6587 \u300aEffective Approaches to Attention-based Neural Machine Translation\u300b \u63d0\u51fa\u4e86\u4e00\u4e2a\u6ce8\u610f\u529b\u673a\u5236\u6a21\u578b\u7684\u53d8\u4f53\uff0c\u662f\u7531\u4e24\u4e2a\u4e0d\u540c\u7684\u6ce8\u610f\u529b\u673a\u5236\u7ec4\u6210\u3002 Global attention \uff1a\u6211\u4eec\u8fd0\u884c\u7b80\u5355\u7684 Seq2Seq NMT\u3002\u6211\u4eec\u79f0\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(h_{1}, \\ldots, h_{n}\\) \uff0c\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(\\overline{h}_{1}, \\ldots, \\overline{h}_{n}\\) \u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a \\(\\overline{h}_{i}\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001\u7684\u6ce8\u610f\u529b\u5411\u91cf\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u5176\u4e2d\u4e00\u4e2a\u5f97\u5206\u51fd\u6570\uff1a \\[ \\operatorname{score}\\left(h_{i}, \\overline{h}_{j}\\right)=\\left\\{\\begin{array}{l}{h_{i}^{T} \\overline{h}_{j}} \\\\ {h_{i}^{T} W \\overline{h}_{j} \\quad \\in \\mathbb{R}} \\\\ {W\\left[h_{i}, \\overline{h}_{j}\\right]}\\end{array}\\right. \\] \u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2a\u5206\u6570\u7684\u5411\u91cf\uff0c\u7136\u540e\u53ef\u4ee5\u7528 Bahdanau \u7b49\u4eba\u63d0\u51fa\u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u9996\u5148\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a softmax \u5c42\u6765\u5bf9\u5206\u6570\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5f97\u5230\u5411\u91cf \\(\\alpha_{i}=\\left(\\alpha_{i, 1}, \\ldots, \\alpha_{i, n}\\right)\\) \\[ \\alpha_{i, j}=\\frac{\\exp \\left(\\operatorname{score}\\left(h_{j}, \\overline{h}_{i}\\right)\\right)}{\\sum_{k=1}^{n} \\exp \\left(\\operatorname{score}\\left(h_{k}, \\overline{h}_{i}\\right)\\right)} \\] \\[ c_{i}=\\sum_{j=1}^{n} \\alpha_{i, j} h_{j} \\] \u7136\u540e\u518d\u8ba1\u7b97\u4e0a\u4e0b\u6587\u5411\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u6587\u5411\u91cf\u548c\u9690\u85cf\u72b6\u6001\u5bf9\u89e3\u7801\u5668\u7684\u7b2c \\(i\\) \u4e2a\u65f6\u95f4\u6b65\u8ba1\u7b97\u4e00\u4e2a\u65b0\u7684\u5411\u91cf \\[ \\tilde{h}_{i}=f\\left(\\left[\\overline{h}_{i}, c_{i}\\right]\\right) \\] \u6700\u540e\u4e00\u6b65\u662f\u4f7f\u7528 \\(\\tilde{h}_{i}\\) \u6765\u5bf9\u89e3\u7801\u5668\u8fdb\u884c\u6700\u7ec8\u9884\u6d4b\u3002\u4e3a\u4e86\u89e3\u51b3\u8986\u76d6\u95ee\u9898\uff0cLuong \u7b49\u4eba\u4f7f\u7528\u4e86\u4e00\u4e2a input-feeding \u65b9\u6cd5\u3002\u6ce8\u610f\u529b\u52a0\u6743\u7684\u5411\u91cf \\(\\tilde{h}_{i}\\) \u662f\u4f5c\u4e3a\u89e3\u7801\u5668\u7684\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u6700\u7ec8\u9884\u6d4b\u3002\u8fd9\u7c7b\u4f3c\u4e8e Bahdanau \u7b49\u4eba\u63d0\u51fa\u7684\u65b9\u6cd5\uff0c\u4ed6\u4eec\u4f7f\u7528\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u8ba1\u7b97\u89e3\u7801\u5668\u7684\u9690\u85cf\u5411\u91cf\u3002 Local attention \uff1a\u8be5\u6a21\u578b\u9884\u6d4b\u8f93\u5165\u5e8f\u5217\u4e2d\u7684\u5bf9\u9f50\u4f4d\u7f6e\u3002\u7136\u540e\uff0c\u5b83\u4f7f\u7528\u4ee5\u6b64\u4f4d\u7f6e\u4e3a\u4e2d\u5fc3\u7684\u7a97\u53e3\u6765\u8ba1\u7b97\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u8fd9\u4e2a\u8ba1\u7b97\u8017\u8d39\u7684\u8ba1\u7b97\u8d44\u6e90\u662f\u6052\u5b9a\u7684\uff0c\u4e0d\u4f1a\u968f\u7740\u53e5\u5b50\u7684\u957f\u5ea6\u800c\u66b4\u589e\u3002 \u6709\u5f88\u591a\u65b9\u6cd5\u6765\u4f7f\u7528\u6ce8\u610f\u529b\u673a\u5236 3.2 Google\u2019s new NMT \u7b80\u800c\u8a00\u4e4b\uff0cGoogle \u6700\u8fd1\u901a\u8fc7\u63d0\u5347\u81ea\u5df1\u7684\u7ffb\u8bd1\u7cfb\u7edf\u4e3a NMT \u505a\u51fa\u4e86\u91cd\u5927\u7a81\u7834\u3002\u4e0d\u662f\u4e3a\u4ed6\u4eec\u652f\u6301\u7ffb\u8bd1\u7684\u6bcf\u4e00\u79cd\u8bed\u8a00\u7ef4\u62a4\u4e00\u4e2a\u5b8c\u6574\u7684 Seq2Seq \u6a21\u578b\u2014\u2014\u6bcf\u79cd\u8bed\u8a00\u4e0d\u662f\u5355\u72ec\u8fdb\u884c\u8bad\u7ec3\uff0c\u800c\u662f\u6784\u5efa\u4e00\u4e2a\u5355\u72ec\u7cfb\u7edf\u53ef\u4ee5\u7ffb\u8bd1\u4efb\u610f\u4e24\u79cd\u8bed\u8a00\uff0c\u8fd9\u5728\u6570\u636e\u548c\u8ba1\u7b97\u65f6\u95f4\u65b9\u9762\u90fd\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6210\u5c31\u3002\u8fd9\u662f\u4e00\u4e2a Seq2Seq \u6a21\u578b\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217\u548c\u4e00\u4e2a\u6307\u5b9a\u8981\u7ffb\u8bd1\u7684\u8bed\u8a00\u7684\u7b26\u53f7\u4f5c\u4e3a\u8f93\u5165\u3002\u8be5\u6a21\u578b\u4f7f\u7528\u5171\u4eab\u53c2\u6570\u6765\u7ffb\u8bd1\u4e3a\u4efb\u4f55\u76ee\u6807\u8bed\u8a00\u3002 \u8fd9\u4e2a\u65b0\u7684\u7684\u591a\u8bed\u8a00\u6a21\u5f0f\u4e0d\u4ec5\u6539\u5584\u4e86\u4ed6\u4eec\u7684\u7ffb\u8bd1\u8868\u73b0\uff0c\u8fd8\u80fd\u591f\u201c\u96f6\u6570\u636e\u7ffb\u8bd1\u201d\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u7ffb\u8bd1\u7684\u8bad\u7ec3\u6570\u636e\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u4e24\u79cd\u8bed\u8a00\u4e4b\u95f4\u8fdb\u884c\u7ffb\u8bd1\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u5982\u679c\u4ec5\u6709\u65e5\u8bed-\u82f1\u8bed\u7684\u7ffb\u8bd1\u6570\u636e\u548c\u97e9\u8bed-\u82f1\u8bed\u7684\u7ffb\u8bd1\u6570\u636e\uff0cGoogle \u56e2\u961f\u53d1\u73b0\u591a\u8bed\u8a00 NMT \u7cfb\u7edf\u5bf9\u8fd9\u4e9b\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\u540e\u7684\u5b9e\u9645\u4e0a\u53ef\u4ee5\u4ea7\u751f\u5408\u7406\u7684\u65e5\u8bed-\u97e9\u8bed\u7ffb\u8bd1\u3002\u8fd9\u4e2a\u53d1\u73b0\u7684\u91cd\u8981\u610f\u4e49\u5728\u4e8e\uff0c\u89e3\u7801\u8fc7\u7a0b\u7684\u90e8\u5206\u5e76\u4e0d\u662f\u7279\u5b9a\u4e8e\u8bed\u8a00\u7684\uff0c\u800c\u4e14\u8be5\u6a21\u578b\u5b9e\u9645\u4e0a\u7ef4\u6301\u4e00\u4e2a\u4e86 \u72ec\u7acb\u4e8e\u6240\u6d89\u53ca\u7684\u5b9e\u9645\u8bed\u8a00\u7684\u8f93\u5165/\u8f93\u51fa\u53e5\u5b50\u7684\u5185\u90e8\u8868\u793a \u3002 3.3 More advanced papers using attention Show, Attend and Tell: Neural Image Caption Generation with Visual Attention \u8fd9\u7bc7\u8bba\u6587\u662f\u63d0\u51fa\u5355\u8bcd/\u56fe\u50cf\u5bf9\u9f50\u7684\u65b9\u6cd5 Modeling Coverage for Neural Machine Translation \u4ed6\u4eec\u7684\u6a21\u578b\u4f7f\u7528\u8986\u76d6\u5411\u91cf\uff0c\u8003\u8651\u5230\u4f7f\u7528\u6ce8\u610f\u529b\u7684\u5386\u53f2\u4ee5\u5e2e\u52a9\u8ba1\u7b97\u5c06\u6765\u7684\u6ce8\u610f\u529b\u3002 Incorporating Structural Alignment Biases into an Attentional Neural Translation Model \u8fd9\u7bc7\u8bba\u6587\u901a\u8fc7\u5f15\u5165\u5176\u4ed6\u4f20\u7edf\u8bed\u8a00\u5b66\u7684\u601d\u60f3\u6765\u63d0\u9ad8\u6ce8\u610f\u529b\u8868\u73b0\u3002 4 Sequence model decoders \u00b6 \u673a\u5668\u7ffb\u8bd1\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u6765\u81ea\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1\u3002\u8003\u8651\u4e00\u4e2a\u8ba1\u7b97\u7ed9\u5b9a\u539f\u59cb\u53e5\u5b50 \\(s\\) \u7684\u7ffb\u8bd1 \\(\\overline{s}\\) \u7684\u6982\u7387\u6a21\u578b \\(P(\\overline{s} | s)\\) \u3002\u6211\u4eec\u60f3\u4ece\u8fd9\u4e2a\u6982\u7387\u6a21\u578b\u4e2d\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u7ffb\u8bd1 \\(\\overline{s} *\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u5e0c\u671b \\[ \\overline{s} *=\\arg \\max _{\\overline{s}} P(\\overline{s} | s) \\] \u56e0\u4e3a\u641c\u7d22\u7684\u7a7a\u95f4\u53ef\u80fd\u4f1a\u975e\u5e38\u7684\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7f29\u5c0f\u5b83\u7684\u5927\u5c0f\u3002\u4ee5\u4e0b\u662f\u5e8f\u5217\u6a21\u578b\u89e3\u7801\u5668\u7684\u5217\u8868\uff08\u5305\u542b\u597d\u7684\u548c\u4e0d\u597d\u7684\uff09\u3002 Exhaustive search \uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u601d\u8def\u3002\u5bf9\u6bcf\u4e2a\u53ef\u80fd\u7684\u5e8f\u5217\u8ba1\u7b97\u5176\u6982\u7387\uff0c\u7136\u540e\u6211\u4eec\u4ece\u4e2d\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217\u3002\u4f46\u662f\uff0c\u641c\u7d22\u7a7a\u95f4\u5bf9\u8f93\u5165\u7684\u5927\u5c0f\u662f\u5448\u6307\u6570\u7ea7\u589e\u957f\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b9\u6cd5\u5728\u5f88\u96be\u6269\u5c55\u5230\u5927\u89c4\u6a21\u8f93\u51fa\u7684\u60c5\u51b5\u3002\u5728\u8fd9\u4e2a\u60c5\u51b5\u7684\u89e3\u7801\u8fc7\u7a0b\u662f NP \u96be\u5ea6\u7684\u95ee\u9898\u3002 Ancestral sampling \uff1a\u5728\u65f6\u95f4\u6b65 \\(t\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u57fa\u4e8e\u65f6\u95f4\u6b65 \\(t\\) \u524d\u9762\u7684\u5355\u8bcd\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\uff0c\u5e76\u4ece\u8be5\u5206\u5e03\u4e2d\u8fdb\u884c\u62bd\u6837\u5f97\u5230 \\(x_t\\) \u3002 \\[ x_{t} \\sim \\mathbb{P}\\left(x_{l} | x_{1}, \\ldots, x_{n}\\right) \\] \u7406\u8bba\u4e0a\u8fd9\u4e2a\u6280\u672f\u662f\u6709\u6548\u7684\u6e10\u8fdb\u7cbe\u786e\u7684\u3002\u7136\u800c\u5728\u5b9e\u9645\u4e2d\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8868\u73b0\u5f88\u5dee\u548c\u4f1a\u51fa\u73b0\u9ad8\u65b9\u5dee\u3002 Greedy Search \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u9009\u62e9\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff0c\u6362\u800c\u8a00\u4e4b \\[ x_{l}=\\operatorname{argmax}_{x_{l}} \\mathbb{P}\\left(\\tilde{x}_{t} | x_{1}, \\ldots, x_{n}\\right) \\] \u8fd9\u79cd\u6280\u672f\u662f\u6709\u6548\u7684\uff0c\u4f46\u662f\u5b83\u63a2\u7d22\u4e86\u4e00\u5c0f\u90e8\u5206\u7684\u641c\u7d22\u7a7a\u95f4\uff0c\u5982\u679c\u6211\u4eec\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u4e2d\u51fa\u73b0\u4e00\u4e2a\u9519\u8bef\uff0c\u90a3\u4e48\u5269\u4e0b\u7684\u53e5\u5b50\u751f\u6210\u53ef\u80fd\u4f1a\u53d7\u5230\u5f88\u5927\u7684\u5f71\u54cd\u3002 Beam search \uff1a\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4fdd\u6301\u7740 K \u4e2a\u5019\u9009\u5355\u8bcd \\[ \\mathcal{H}_{t}=\\left\\{\\left(x_{1}^{1}, \\ldots, x_{t}^{1}\\right), \\ldots,\\left(x_{1}^{K}, \\ldots, x_{t}^{K}\\right)\\right\\} \\] \u901a\u8fc7\u6269\u5c55 \\(\\mathcal{H}_{t}\\) \u5e76\u4fdd\u6301 K \u4e2a\u6700\u597d\u7684\u5019\u9009\u5355\u8bcd\u6765\u8ba1\u7b97 \\(\\mathcal{H}_{t+1}\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u5728\u4e0b\u9762\u7684\u96c6\u5408\u4e2d\u9009\u62e9\u6700\u597d\u7684 K \u4e2a\u5e8f\u5217 \\[ \\tilde{\\mathcal{H}}_{t+1}=\\bigcup_{k=1}^{K} \\mathcal{H}_{t+1}^{\\tilde{k}} \\] \\[ \\mathcal{H}_{t+1}^{\\tilde{k}}=\\left\\{\\left(x_{1}^{1}, \\ldots, x_{t}^{1}, v_{1}\\right), \\ldots,\\left(x_{1}^{K}, \\ldots, x_{t}^{K}, v_{|V|}\\right)\\right\\} \\] \u968f\u7740\u589e\u52a0 K \u7684\u589e\u52a0\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u51c6\u786e\u7387\u548c\u6e10\u8fd1\u5730\u7cbe\u786e\u3002\u7136\u800c\uff0c\u63d0\u9ad8\u5e76\u4e0d\u5177\u6709\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8bbe\u7f6e\u4e00\u4e2a K\uff0c\u65e2\u8981\u8003\u8651\u5408\u7406\u6027\u80fd\u53c8\u8981\u8003\u8651\u8ba1\u7b97\u6548\u7387\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0cbeam search \u662f\u5728 NMT \u4e2d\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u3002 5 Evaluation of Machine Translation Systems \u00b6 \u73b0\u5728\u6211\u4eec\u77e5\u9053\u6709\u5173\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e00\u4e9b\u8bc4\u4f30\u8fd9\u4e9b\u6a21\u578b\u7684\u65b9\u6cd5\u3002\u8bc4\u4f30\u7ffb\u8bd1\u8d28\u91cf\u662f\u4e00\u4e2a\u975e\u5e38\u68d8\u624b\u548c\u4e3b\u89c2\u7684\u4efb\u52a1\u3002\u5728\u73b0\u5b9e\u751f\u6d3b\u4e2d\uff0c\u5982\u679c\u60a8\u7ed9\u5341\u4e2a\u4e0d\u540c\u7684\u7ffb\u8bd1\u8005\u63d0\u4f9b\u4e00\u6bb5\u76f8\u540c\u7684\u6587\u5b57\uff0c\u60a8\u5c06\u83b7\u5f97\u5341\u4e2a\u4e0d\u540c\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u7ffb\u8bd1\u5728\u5b9e\u8df5\u4e2d\u662f\u4e0d\u5b8c\u7f8e\u548c\u6709\u566a\u58f0\u7684\u3002\u4ed6\u4eec\u5173\u6ce8\u4e0d\u540c\u7684\u4fe1\u606f\uff0c\u5f3a\u8c03\u4e0d\u540c\u7684\u542b\u4e49\u3002\u4e00\u79cd\u7ffb\u8bd1\u53ef\u4ee5\u4fdd\u5b58\u9690\u55bb\u548c\u957f\u671f\u601d\u60f3\u7684\u5b8c\u6574\u6027\uff0c\u800c\u800c\u53e6\u4e00\u79cd\u7ffb\u8bd1\u53ef\u4ee5\u66f4\u5fe0\u5b9e\u5730\u91cd\u6784\u53e5\u6cd5\u548c\u98ce\u683c\uff0c\u5c1d\u8bd5\u9010\u5b57\u7ffb\u8bd1\u3002\u6ce8\u610f\uff0c\u8fd9\u79cd\u7075\u6d3b\u6027\u5e76\u4e0d\u662f\u8d1f\u62c5\uff1b\u8fd9\u8bc1\u660e\u4e86\u8bed\u8a00\u7684\u590d\u6742\u6027\u548c\u6211\u4eec\u89e3\u7801\u548c\u89e3\u91ca\u610f\u601d\u7684\u80fd\u529b\uff0c\u4e5f\u662f\u6211\u4eec\u4ea4\u6d41\u80fd\u529b\u7684\u4e00\u4e2a\u5947\u5999\u65b9\u9762\u3002 \u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0c\u6a21\u578b\u7684\u76ee\u6807\u635f\u5931\u51fd\u6570\u4e0e\u6211\u4eec\u5c06\u8981\u8ba8\u8bba\u7684\u8bc4\u4f30\u65b9\u6cd5\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002\u7531\u4e8e\u635f\u5931\u51fd\u6570\u672c\u8d28\u4e0a\u662f\u5bf9\u6a21\u578b\u9884\u6d4b\u7684\u4e00\u4e2a\u8bc4\u4f30\uff0c\u6240\u4ee5\u5f88\u5bb9\u6613\u6df7\u6dc6\u8fd9\u4e24\u4e2a\u6982\u5ff5\u3002\u524d\u9762\u7684\u8bc4\u4f30\u6307\u6807\u9488\u5bf9\u4e00\u4e9b\u5ea6\u91cf\u6807\u51c6\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6700\u7ec8\u7684\u3001\u603b\u7ed3\u6027\u7684\u8bc4\u4ef7\uff0c\u6ca1\u6709\u4e00\u4e2a\u5ea6\u91cf\u65b9\u6cd5\u4f18\u4e8e\u6240\u6709\u5176\u4ed6\u65b9\u6cd5\uff0c\u867d\u7136\u6709\u4e9b\u5177\u6709\u660e\u663e\u7684\u4f18\u52bf\u548c\u591a\u6570\u504f\u597d\u3002 \u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u7ffb\u8bd1\u7684\u8d28\u91cf\u5df2\u7ecf\u81ea\u6210\u4f53\u7cfb\u4e3a\u4e00\u4e2a\u7814\u7a76\u9886\u57df\uff0c\u5df2\u7ecf\u63d0\u51fa\u4e86\u8bb8\u591a\u8bc4\u4f30\u7684\u65b9\u6cd5 TER, METEOR, MaxSim, SEPIA \u548c RTE-MT \u3002\u6211\u4eec\u5c06\u91cd\u70b9\u5173\u6ce8\u4e24\u4e2a\u57fa\u51c6\u8bc4\u4f30\u65b9\u6cd5\u548c BLEU\u3002 5.1 Human Evaluation \u7b2c\u4e00\u4e2a\u4e5f\u662f\u6700\u4e0d\u4ee4\u4eba\u60ca\u8bb6\u7684\u65b9\u6cd5\u662f\u8ba9\u4eba\u4eec\u624b\u52a8\u8bc4\u4f30\u7cfb\u7edf\u7684\u6b63\u786e\u6027\u3001\u5145\u5206\u6027\u548c\u6d41\u7545\u6027\u3002\u5c31\u50cf\u56fe\u7075\u6d4b\u8bd5\u4e00\u6837\uff0c\u5982\u679c\u4f60\u80fd\u9a97\u8fc7\u4e00\u4e2a\u4eba\uff0c\u8ba9\u4ed6\u65e0\u6cd5\u533a\u5206\u4eba\u5de5\u7ffb\u8bd1\u548c\u7cfb\u7edf\u7ffb\u8bd1\uff0c\u90a3\u4e48\u4f60\u7684\u6a21\u578b\u5c31\u901a\u8fc7\u4e86\u770b\u8d77\u6765\u50cf\u771f\u5b9e\u53e5\u5b50\u7684\u6d4b\u8bd5\uff01\u8fd9\u79cd\u65b9\u6cd5\u7684\u4e00\u4e2a\u660e\u663e\u95ee\u9898\u662f\u6210\u672c\u9ad8\u4e14\u6548\u7387\u4f4e\uff0c\u5c3d\u7ba1\u5b83\u4ecd\u7136\u662f\u673a\u5668\u7ffb\u8bd1\u7684\u9ec4\u91d1\u6807\u51c6\u3002 5.2 Evaluation against another task \u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5\u662f\u8f93\u51fa\u6709\u7528\u7684\u8868\u793a\u6570\u636e\uff08\u8868\u793a\u4e3a\u7ffb\u8bd1\u6216\u6458\u8981\uff09\uff0c\u5982\u679c\u60a8\u7684\u9884\u6d4b\u5bf9\u89e3\u51b3\u67d0\u4e9b\u5177\u6709\u6311\u6218\u6027\u7684\u4efb\u52a1\u5f88\u5e2e\u52a9\uff0c\u90a3\u4e48\u6a21\u578b\u5fc5\u987b\u5728\u9884\u6d4b\u4e2d\u7f16\u7801\u76f8\u5173\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u4f1a\u8003\u8651\u5728\u7ffb\u8bd1\u8bed\u8a00\u7684\u95ee\u7b54\u4efb\u52a1\u4e2d\u8bad\u7ec3\u7ffb\u8bd1\u9884\u6d4b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u60a8\u4f7f\u7528\u7cfb\u7edf\u7684\u8f93\u51fa\u4f5c\u4e3a\u5176\u4ed6\u4efb\u52a1(\u95ee\u7b54)\u6a21\u578b\u7684\u8f93\u5165\u3002\u5982\u679c\u60a8\u7684\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u5728\u60a8\u7684\u9884\u6d4b\u4e0a\u548c\u5728\u7ffb\u8bd1\u8bed\u8a00\u7684\u683c\u5f0f\u826f\u597d\u7684\u6570\u636e\u4e0a\u4e00\u6837\u51fa\u8272\uff0c\u8fd9\u610f\u5473\u7740\u60a8\u7684\u8f93\u5165\u5177\u6709\u6ee1\u8db3\u4efb\u52a1\u9700\u6c42\u7684\u76f8\u5173\u4fe1\u606f\u6216\u6a21\u5f0f\u3002 \u8fd9\u79cd\u65b9\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u53ef\u80fd\u4e0d\u4f1a\u53d7\u5230\u8bb8\u591a\u7ffb\u8bd1\u7ec6\u8282\u7684\u5f71\u54cd\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u5728\u67e5\u8be2\u68c0\u7d22\u4efb\u52a1\u4e2d\u8861\u91cf\u7ffb\u8bd1\u8d28\u91cf\uff08\u4f8b\u5982\uff0c\u63d0\u53d6\u641c\u7d22\u67e5\u8be2\u7684\u6b63\u786e\u7f51\u9875\uff09\uff0c\u4f60\u4f1a\u53d1\u73b0\u4e00\u4e2a\u7ffb\u8bd1\u6709\u52a9\u4e8e\u4fdd\u62a4\u6587\u6863\u7684\u4e3b\u9898\u53e5,\u4f46\u5ffd\u7565\u4e86\u8bed\u6cd5\u548c\u8bed\u6cd5\u4ecd\u7136\u53ef\u80fd\u9002\u5408\u7684\u4efb\u52a1\u3002\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u7ffb\u8bd1\u8d28\u91cf\u662f\u51c6\u786e\u53ef\u9760\u7684\u3002\u56e0\u6b64\uff0c\u786e\u5b9a\u7ffb\u8bd1\u6a21\u578b\u7684\u8d28\u91cf\u53ea\u662f\u4e3a\u4e86\u786e\u5b9a\u4efb\u52a1\u672c\u8eab\u7684\u8d28\u91cf\uff0c\u8fd9\u53ef\u80fd\u662f\u4e5f\u53ef\u80fd\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u6807\u51c6\u3002 5.3 Bilingual Evaluation Understudy (BLEU) \u5728 2002 \u5e74\uff0cIBM \u7684\u7814\u7a76\u8005\u63d0\u51fa\u4e86 Bilingual Evaluation Understudy\uff08BELU\uff09\uff0c\u65f6\u81f3\u4eca\u65e5\uff0c\u8be5\u65b9\u6cd5\u7684\u5f88\u591a\u53d8\u4f53\uff0c\u662f\u673a\u5668\u7ffb\u8bd1\u4e2d\u6700\u53ef\u9760\u7684\u8bc4\u4f30\u65b9\u6cd5\u4e4b\u4e00\u3002 BELU \u7b97\u6cd5\u901a\u8fc7\u53c2\u8003\u4eba\u5de5\u7ffb\u8bd1\u6765\u8bc4\u4f30\u673a\u5668\u7ffb\u8bd1\u7684\u7cbe\u786e\u5ea6\u5206\u6570\u3002\u53c2\u8003\u4eba\u5de5\u7ffb\u8bd1\u88ab\u5047\u5b9a\u4e3a\u662f\u4e00\u4e2a\u7ffb\u8bd1\u7684\u6a21\u578b\u6837\u4f8b\uff0c\u7136\u540e\u6211\u4eec\u4f7f\u7528 n-gram \u5339\u914d\u5019\u9009\u7ffb\u8bd1\u4e0e\u4eba\u5de5\u7ffb\u8bd1\u4e4b\u95f4\u7684\u76f8\u4f3c\u7a0b\u5ea6\u4f5c\u4e3a\u5ea6\u91cf\u6807\u6ce8\u3002\u8003\u8651\u4e00\u4e2a\u53c2\u8003\u53e5\u5b50 A \u548c\u5019\u9009\u7ffb\u8bd1 B\uff1a A\uff1athere are many ways to evaluate the quality of a translation, like comparing the number of n-grams between a candidate translation and reference. B\uff1athe quality of a translation is evaluate of n-grams in a reference and with translation. BELU \u5206\u6570\u662f\u67e5\u627e\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u662f\u5426\u6709 n-grams \u4e5f\u51fa\u73b0\u5728\u53c2\u8003\u7ffb\u8bd1\u4e2d\u3002\u4ee5\u4e0b\u5f69\u8272\u7684\u7ffb\u8bd1\u662f\u53c2\u8003\u7ffb\u8bd1\u548c\u5019\u9009\u7ffb\u8bd1\u4e4b\u95f4\u5171\u4eab\u7684\u4e0d\u540c\u5927\u5c0f\u7684 n-grams \u7684\u4e00\u4e9b\u793a\u4f8b\u3002 BELU \u7b97\u6cd5\u901a\u8fc7\u8bc6\u522b\u4e0a\u8ff0\u6240\u6709\u7684 n-grams \u5339\u914d\uff0c\u5305\u62ec unigram \u5339\u914d\uff0c\u7136\u540e\u7528\u7cbe\u786e\u5ea6\u5206\u6570\u6765\u8bc4\u4f30\u7ffb\u8bd1\u7684\u597d\u574f\u3002\u7cbe\u786e\u5ea6\u5206\u6570\u662f n-grams \u65e2\u51fa\u73b0\u5728\u53c2\u8003\u7ffb\u8bd1\u4e2d\u4e5f\u51fa\u73b0\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u767e\u5206\u6bd4\u3002 \u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u6ee1\u8db3\u5176\u4ed6\u7684\u4e24\u4e2a\u9650\u5236\u3002\u5bf9\u6bcf\u4e2a n-grams \u7684\u5927\u5c0f\uff0c\u53c2\u8003\u7ffb\u8bd1\u4e2d\u7684 gram \u4e0d\u80fd\u5339\u914d\u591a\u4e8e\u4e00\u6b21\u3002\u4f8b\u5982\uff0cunigram \u201ca\u201d \u5728 B \u4e2d\u51fa\u73b0\u4e86\u4e24\u6b21\u800c\u5728 A \u4e2d\u53ea\u51fa\u73b0\u4e86\u4e00\u6b21\u3002\u8fd9\u53ea\u7edf\u8ba1\u4e24\u4e2a\u7ffb\u8bd1\u53e5\u5b50\u4e4b\u95f4\u5339\u914d\u4e00\u6b21\u7684\u7684\u6b21\u6570\u3002\u53e6\u5916\uff0c\u6211\u4eec\u5f3a\u52a0\u4e00\u4e2a\u7b80\u5355\u7684\u60e9\u7f5a\uff0c\u4f7f\u5f97\u7cbe\u786e\u5ea6\u5206\u6570\u662f 1.0\uff08\u201c\u5b8c\u7f8e\u201d\u5339\u914d\uff09\u7684\u77ed\u53e5\u5b50\u4e0d\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u5bf9\u5355\u4e2a\u5355\u8bcd there \u4f1a\u5f97\u5230\u4e00\u4e2a\u7cbe\u786e\u5ea6\u5206\u6570\u4e3a 1.0 \u7684\u5339\u914d\uff0c\u4f46\u662f\u5f88\u660e\u663e\u8fd9\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u5339\u914d\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b\u5b9e\u9645\u4e2d\u5982\u4f55\u8ba1\u7b97 BELU \u5206\u6570\u3002\u9996\u5148\u4ee4 k \u662f\u6211\u4eec\u8981\u8bc4\u4f30\u7684\u5206\u6570\u7684\u6700\u5927 n-gram \u3002\u5373\u5982\u679c k=4\uff0cBELU \u5206\u6570\u4ec5\u8ba1\u7b97\u5927\u5c0f \\(\\leq 4\\) \u7684 n-grams \uff0c\u5e76\u5ffd\u7565\u5927\u4e8e 4 \u7684 n-grams \u3002\u4ee4 \\[ p_{n}=\\# \\text {matched n-grams} / \\text{# n-grams in candidate translation} \\] \u4e3a\u5bf9\u957f\u5ea6\u662f n \u7684 grams \u7684\u7cbe\u786e\u5ea6\u5206\u6570\u3002\u6700\u540e\uff0c\u4ee4 \\(w_{n}=1 / 2^{n}\\) \u662f\u7b2c n \u4e2a gram \u7684\u51e0\u4f55\u52a0\u6743\u3002\u6211\u4eec\u7b80\u5355\u60e9\u7f5a\u7684\u5b9a\u4e49\u4e3a \\[ \\beta=e^{\\min \\left(0,1-\\frac{len_{ref}}{len_{MT}}\\right)} \\] \u5176\u4e2d \\(len_{ref}\\) \u662f\u53c2\u8003\u7ffb\u8bd1\u7684\u53e5\u5b50\u957f\u5ea6\uff0c \\(len_{MT}\\) \u662f\u673a\u5668\u7ffb\u8bd1\u7684\u53e5\u5b50\u957f\u5ea6\u3002 BELU \u5206\u6570\u7136\u540e\u5b9a\u4e49\u4e3a\uff1a \\[ B E L U=\\beta \\prod_{i=1}^{k} p_{n}^{w_{n}} \\] BLEU \u8bc4\u5206\u4e0e\u4eba\u7c7b\u5bf9\u4f18\u79c0\u7ffb\u8bd1\u7684\u5224\u65ad\u5bc6\u5207\u76f8\u5173\uff0c\u56e0\u6b64\u4ecd\u7136\u662f\u6240\u6709\u8bc4\u4f30\u6307\u6807\u7684\u57fa\u51c6\u3002\u7136\u800c\uff0c\u5b83\u8fd8\u662f\u6709\u8bb8\u591a\u9650\u5236\u7684\u3002\u5b83\u53ea\u80fd\u5728\u8bed\u6599\u5e93\u7ea7\u522b\u4e0a\u5de5\u4f5c\u5f97\u5f88\u597d\uff0c\u56e0\u4e3a\u7cbe\u5ea6\u5f97\u5206\u4e2d\u7684\u4efb\u4f55\u96f6\u90fd\u5c06\u4f7f\u6574\u4e2aBLEU\u5f97\u5206\u4e3a\u96f6\u3002\u53e6\u5916\uff0cBLEU \u5f97\u5206\u4ec5\u4ec5\u5c06\u673a\u5668\u7ffb\u8bd1\u4e0e\u5355\u4e2a\u4eba\u5de5\u7ffb\u8bd1\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u80af\u5b9a\u9700\u8981\u5339\u914d\u76f8\u5173\u7684 n-grams \u7684\u566a\u58f0\u8868\u793a\u3002BLEU \u7684\u53d8\u4f53\u5df2\u7ecf\u5c06\u8fd9\u4e2a\u7b97\u6cd5\u4fee\u6539\u4e3a\u53ef\u4ee5\u5c06\u5019\u9009\u673a\u5668\u7ffb\u8bd1\u4e0e\u591a\u4e2a\u4eba\u5de5\u7ffb\u8bd1\u8fdb\u884c\u6bd4\u8f83\u3002\u6b64\u5916\uff0cBLEU\u5206\u6570\u53ef\u80fd\u53ea\u662f\u4e00\u4e2a\u5fc5\u8981\u7684\uff0c\u4f46\u5e76\u4e0d\u8db3\u4ee5\u901a\u8fc7\u4e00\u4e2a\u826f\u597d\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u7684\u57fa\u51c6\u3002\u8bb8\u591a\u7814\u7a76\u4eba\u5458\u5bf9 BLEU \u7684\u5206\u6570\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u76f4\u5230\u4ed6\u4eec\u5f00\u59cb\u63a5\u8fd1\u53c2\u8003\u8bd1\u6587\u4e4b\u95f4\u76f8\u540c\u7684BLEU\u5206\u6570\uff0c\u4f46\u771f\u6b63\u7684\u8d28\u91cf\u4ecd\u7136\u8fdc\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u8bd1\u6587\u3002 6 Dealing with the large output vocabulary \u00b6 \u5c3d\u7ba1\u73b0\u4ee3\u7684 NMT \u7cfb\u7edf\u53d6\u5f97\u4e86\u6210\u529f\uff0c\u4f46\u662f\u4ed6\u4eec\u5f88\u96be\u5904\u7406\u5927\u91cf\u7684\u8bcd\u6c47\u91cf\u3002\u7279\u522b\u5730\uff0c\u8fd9\u4e9b Seq2Seq \u6a21\u578b\u901a\u8fc7\u4f7f\u7528 softmax \u8ba1\u7b97\u6574\u4e2a\u8bcd\u6c47\u8868\u4e0a\u7684\u76ee\u6807\u6982\u7387\u5206\u5e03\u6765\u9884\u6d4b\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u4f7f\u7528\u5927\u91cf\u8bcd\u6c47\u8868\u6765\u8ba1\u7b97 softmax \u53ef\u80fd\u76f8\u5f53\u8017\u8d39\u8ba1\u7b97\u8d44\u6e90\uff0c\u800c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u4f1a\u4e0e\u8bcd\u6c47\u5927\u5c0f\u6210\u6b63\u6bd4\u3002\u6211\u4eec\u73b0\u5728\u5c06\u7814\u7a76\u4e00\u4e9b\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u3002 6.1 Scaling softmax \u4e00\u4e2a\u975e\u5e38\u81ea\u7136\u7684\u60f3\u6cd5\u662f\u95ee\u201c\u6211\u4eec\u80fd\u627e\u5230\u66f4\u6709\u6548\u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u76ee\u6807\u6982\u7387\u5206\u5e03\u5417\uff1f\u201d\u7b54\u6848\u662f\u53ef\u4ee5\u7684\uff01\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u4e24\u79cd\u53ef\u4ee5\u964d\u4f4e\u201csoftmax\u201d\u590d\u6742\u5ea6\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u9762\u56de\u987e\u4e00\u4e0b\uff08\u66f4\u591a\u7ec6\u8282\u8bf7\u770b lecture one \u4e2d\u7684\u76f8\u5173\u65b9\u6cd5\u7684\u4ecb\u7ecd\uff09\u3002 Noise Contrastive Estimation NCE \u7684\u60f3\u6cd5\u662f\u901a\u8fc7\u968f\u673a\u5730\u4ece\u8d1f\u6837\u672c\u4e2d\u62bd\u53d6 K \u4e2a\u5355\u8bcd\u6765\u8fd1\u4f3c\u201csoftmax\u201d\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u590d\u6742\u5ea6\u964d\u4f4e\u4e86 \\(\\frac{|V|}{K}\\) \u500d\uff0c\u5176\u4e2d \\({|V|}\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u8fd9\u4e2a\u65b9\u6cd5\u5728 word2vec \u4e2d\u8bc1\u660e\u4e86\u975e\u5e38\u6709\u6548\u3002Zoph \u7b49\u4eba\u6700\u8fd1\u7684\u4e00\u9879\u5de5\u4f5c\u662f\u5e94\u7528\u8fd9\u79cd\u6280\u672f\u6765\u5b66\u4e60 LSTM \u8bed\u8a00\u6a21\u578b\uff0c\u4ed6\u4eec\u8fd8\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a mini batch \u7684\u76f8\u540c\u6837\u672c\u6765\u5f15\u5165\u4e00\u4e2a\u6280\u5de7\uff0c\u4f7f GPU \u7684\u8bad\u7ec3\u6548\u7387\u66f4\u9ad8\u3002 Hierarchical Softmax Morin \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u4e8c\u53c9\u6811\u7ed3\u6784\u4ece\u800c\u80fd\u591f\u66f4\u6709\u6548\u7387\u5730\u8ba1\u7b97 \u76ee\u6807\u5206\u5e03\u4e2d\u7684\u6bcf\u4e2a\u6982\u7387\u90fd\u662f\u901a\u8fc7\u5c06\u6811\u4e0a\u7684\u4e00\u4e2a\u8def\u5f84\u8ba1\u7b97\u51fa\u6765\u201csoftmax\u201d\uff0c\u8be5\u8ba1\u7b97\u8be5\u8def\u5f84\u53ea\u9700\u8981 \\(O(\\log |V|)\\) \u6b65\u957f\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5c3d\u7ba1 Hierarchical Softmax \u53ef\u4ee5\u8282\u7701\u8ba1\u7b97\u91cf\uff0c\u4f46\u662f\u5b83\u4e0d\u80fd\u5728 GPU \u4e0a\u5e76\u884c\u8fd0\u7b97\u3002 \u8fd9\u4e24\u79cd\u65b9\u6cd5\u7684\u4e00\u4e2a\u9650\u5236\u662f\u5b83\u4eec\u4ec5\u5728\u8bad\u7ec3\u9636\u6bb5\u4e2d\u8282\u7701\u8ba1\u7b97\u91cf\uff08\u5f53\u76ee\u6807\u8bcd\u5df2\u77e5\u65f6\uff09\u3002\u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8ba1\u7b97\u8bcd\u6c47\u8868\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u7684\u6982\u7387\uff0c\u7136\u540e\u505a\u51fa\u9884\u6d4b\u3002 6.2 Reducing vocabulary \u9664\u4e86\u4f18\u5316\u201csoftmax\u201d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c1d\u8bd5\u51cf\u5c11\u6709\u6548\u7684\u8bcd\u6c47\u91cf\uff0c\u8fd9\u5c06\u52a0\u5feb\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8fc7\u7a0b\u3002\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5c06\u8bcd\u6c47\u91cf\u9650\u5236\u5728\u4e00\u4e2a\u5f88\u5c0f\u7684\u6570\u91cf\u4e0a\uff0c\u7528\u4e00\u4e2a\u6807\u7b7e \\(\\text{<UNK>}\\) \u66ff\u6362\u9650\u5236\u540e\u7684\u8bcd\u6c47\u8868\u5916\u7684\u5355\u8bcd\u3002\u73b0\u5728\uff0c\u65e0\u8bba\u662f\u8bad\u7ec3\u548c\u6d4b\u8bd5\u65f6\u95f4\u53ef\u4ee5\u663e\u7740\u5730\u964d\u4f4e\u4e86\uff0c\u4f46\u8fd9\u663e\u7136\u662f\u4e0d\u7406\u60f3\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u4f1a\u4ea7\u751f\u5f88\u591a \\(\\text{<UNK>}\\) \u7684\u8f93\u51fa\u3002 Jean \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u4fdd\u6301\u56fa\u5b9a\u8bcd\u6c47\u5927\u5c0f \\(\\left|V^{\\prime}\\right|\\) \u7684\u65b9\u6cd5\uff0c \u901a\u8fc7\u5c06\u8bad\u7ec3\u6570\u636e\u5206\u6210\u5177\u6709 \\(\\tau\\) \u4e2a\u552f\u4e00\u76ee\u6807\u5355\u8bcd\u7684\u5b50\u96c6\uff0c\u5176\u4e2d \\(\\tau=\\left|V^{\\prime}\\right|\\) \u3002\u53ef\u4ee5\u901a\u8fc7\u4f9d\u6b21\u626b\u63cf\u539f\u59cb\u6570\u636e\u96c6\u76f4\u5230\u68c0\u6d4b \\(\\tau\\) \u4e2a\u552f\u4e00\u7684\u76ee\u6807\u5355\u8bcd\uff0c\u4ece\u800c\u5f62\u6210\u4e00\u4e2a\u5b50\u96c6\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09 \u7136\u540e\u6309\u7167\u4e0a\u8ff0\u8fc7\u7a0b\u904d\u5386\u6574\u4e2a\u6570\u636e\u96c6\uff0c\u4ee5\u4ea7\u751f\u6240\u6709\u7684 mini-batch \u5b50\u96c6\u3002\u5b9e\u9645\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u8bcd\u6c47\u91cf\u4e3a \\(|V|=500 K\\) \u5b9e\u73b0\u4e86 10 \u500d\u4ee5\u4e0a\u7684\u8282\u7701\uff08 \\(\\left|V^{\\prime}\\right|=30 K, 50 K\\) \uff09\u3002 \u8fd9\u4e2a\u6982\u5ff5\u548c NCE \u975e\u5e38\u7c7b\u4f3c\uff0c\u5bf9\u4efb\u610f\u7ed9\u5b9a\u7684\u5355\u8bcd\uff0c\u8f93\u51fa\u7684\u8bcd\u6c47\u5305\u542b\u76ee\u6807\u5355\u8bcd\u548c \\(\\left|V^{\\prime}\\right|-1\\) \u4e2a\u8d1f\uff08\u566a\u58f0\uff09\u6837\u4f8b\u3002\u7136\u800c\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u4e3b\u8981\u7684\u4e0d\u540c\u662f\uff0c\u5bf9\u6bcf\u4e2a\u5b50\u96c6 \\(\\left|V^{\\prime}\\right|\\) \uff0c\u662f\u4ece\u504f\u7f6e\u5206\u5e03 \\(|Q|\\) \u4e2d\u91c7\u6837\u8fd9\u4e9b\u8d1f\u6837\u4f8b\uff0c\u5176\u4e2d \\[ \\mathcal{Q}_{y_{t}}=\\left\\{\\begin{array}{l}{\\frac{1}{\\left|V^{\\prime}\\right|}, \\text { if } y_{t} \\in\\left|V^{\\prime}\\right|} \\\\ {0, \\text { otherwise }}\\end{array}\\right. \\] \u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u4ece\u6574\u4e2a\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5b50\u96c6(\u79f0\u4e3a\u5019\u9009\u5217\u8868)\u6765\u9884\u6d4b\u76ee\u6807\u5355\u8bcd\u3002\u6311\u6218\u5728\u4e8e\uff0c\u6b63\u786e\u7684\u76ee\u6807\u8bcd\u662f\u672a\u77e5\u7684\uff0c\u6211\u4eec\u5fc5\u987b\u201c\u731c\u6d4b\u201d\u76ee\u6807\u8bcd\u53ef\u80fd\u662f\u4ec0\u4e48\u3002\u5728\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u63d0\u51fa\u4f7f\u7528 \\(K\\) \u4e2a\u6700\u5e38\u7528\u7684\u5355\u8bcd\uff08\u57fa\u4e8e unigram \u6982\u7387\uff09\u548c \\(K'\\) \u4e2a\u53ef\u80fd\u7684\u76ee\u6807\u8bcd\u4e3a\u6bcf\u4e2a\u6e90\u53e5\u6784\u5efa\u4e00\u4e2a\u5019\u9009\u5217\u8868\u3002\u5728\u4e0b\u56fe\u4e2d\u5c55\u793a\u4e86\u4e00\u4e2a \\(K^{\\prime}=3\\) \u7684\u4f8b\u5b50\u548c\u5019\u9009\u5217\u8868\u7531\u7d2b\u8272\u6846\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u7ec4\u6210\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u7684\u53c2\u6570\u503c\uff1a \\(K=15 k, 30 k, 50 k, K^{\\prime}=10,20\\) \u3002 6.3 Handling unknown words \u5f53 NMT \u7cfb\u7edf\u4f7f\u7528\u4e0a\u9762\u63d0\u5230\u7684\u65b9\u6cd5\u6765\u4ee5\u964d\u4f4e\u6709\u6548\u8bcd\u6c47\u91cf\uff0c\u4e0d\u53ef\u907f\u514d\u5730\uff0c\u67d0\u4e9b\u5355\u8bcd\u5c06\u88ab\u6620\u5c04\u5230 \\(\\text{<UNK>}\\) \u3002\u4f8b\u5982\uff0c\u5f53\u9884\u6d4b\u8bcd\uff08\u901a\u5e38\u662f\u7f55\u89c1\u8bcd\uff09\u4e0d\u5728\u5019\u9009\u5217\u8868\u4e2d\u6216\u5f53\u6211\u4eec\u5728\u6d4b\u8bd5\u9636\u6bb5\u9047\u5230\u672a\u77e5\u7684\u5355\u8bcd\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u6211\u4eec\u9700\u8981\u65b0\u7684\u673a\u5236\u6765\u89e3\u51b3\u7f55\u89c1\u548c\u672a\u77e5\u7684\u5355\u8bcd\u95ee\u9898\u3002 Gulcehre \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u60f3\u6cd5\u6765\u5904\u7406\u8fd9\u4e9b\u95ee\u9898\uff1a\u5b66\u4e60\u4ece\u6e90\u6587\u672c\u4e2d\u201c\u590d\u5236\u201d\u3002\u8be5\u6a21\u578b\u5e94\u7528\u4e86\u6ce8\u610f\u529b\u5206\u5e03 \\(l_t\\) \u6765\u51b3\u5b9a\u6e90\u6587\u672c\u4e2d\u7684\u6307\u5411\u4f4d\u7f6e\uff0c\u5e76\u4f7f\u7528\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(S_t\\) \u6765\u9884\u6d4b\u4e8c\u5206\u7c7b\u53d8\u91cf \\(Z_t\\) \uff0c\u4ece\u800c\u51b3\u5b9a\u4f55\u65f6\u4ece\u6e90\u6587\u672c\u4e2d\u590d\u5236\u3002 \u6700\u540e\u7684\u9884\u6d4b\u7ed3\u679c\u662f\u6839\u636e \\(Z_t\\) \u7684\u503c\uff0c\u5728\u5019\u9009\u5217\u8868\u4e2d\u7531\u524d\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\u4f7f\u7528 softmax \u9009\u62e9\u7684\u8bcd \\(y_{t}^{w}\\) \uff0c\u6216\u8005\u4ece\u6e90\u6587\u672c\u590d\u5236\u7684 \\(y_{t}^{l}\\) \u3002\u4ed6\u4eec\u5728\u8bba\u6587\u4e2d\u7684\u7ed3\u679c\u8868\u660e\uff0c\u8be5\u65b9\u6cd5\u63d0\u9ad8\u4e86\u673a\u5668\u7ffb\u8bd1\u548c\u6587\u672c\u6458\u8981\u7b49\u4efb\u52a1\u7684\u8868\u73b0\u3002 \u7136\u800c\u53ef\u4ee5\u60f3\u5230\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u6709\u5c40\u9650\u6027\u7684\u3002\u8fd9\u662f\u8981\u91cd\u70b9\u6307\u51fa\u7684\u662f\u5728 Google NMT \u8bba\u6587\u4e2d\u5bf9\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4e00\u4e2a\u8bc4\u8bba\uff1a\u201c\u8fd9\u79cd\u505a\u6cd5\u5728\u89c4\u6a21\u5f88\u5927\u65f6\u662f\u4e0d\u53ef\u9760\u7684\u2014\u2014\u5f53\u7f51\u7edc\u662f\u5f88\u6df1\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u529b\u673a\u5236\u662f\u4e0d\u7a33\u5b9a\u7684\u2014\u2014\u800c\u590d\u5236\u673a\u5236\u53ef\u80fd\u4e0d\u662f\u6700\u9002\u5408\u5904\u7406\u7f55\u89c1\u5355\u8bcd\u7684\u7b56\u7565\u2014\u2014\u6709\u65f6\u97f3\u8bd1\u66f4\u5408\u9002\u201d\u3002 7 Word and character-based models \u00b6 \u5982\u4e0a\u4e00\u90e8\u5206\u6240\u8ff0\uff0c\u201c\u590d\u5236\u201d\u673a\u5236\u5728\u5904\u7406\u7f55\u89c1\u6216\u672a\u77e5\u8bcd\u8bed\u4e0a\u4ecd\u7136\u5b58\u5728\u4e0d\u8db3\u3002\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u7684\u53e6\u4e00\u4e2a\u601d\u8def\u662f\u5728 sub-word \u7684\u7ea7\u522b\u8fdb\u884c\u64cd\u4f5c\u3002\u4e00\u4e2a\u8d8b\u52bf\u662f\u4f7f\u7528\u76f8\u540c\u7684 Seq2Seq \u67b6\u6784\uff0c\u4f46\u662f\u5728\u66f4\u5c0f\u7684\u5355\u5143\u4e0a\u64cd\u4f5c\u2014\u2014\u57fa\u4e8e\u5b57\u7b26\u7684\u5206\u8bcd\u6a21\u578b\u3002\u53e6\u4e00\u4e2a\u8d8b\u52bf\u662f\u5bf9\u5355\u8bcd\u548c\u5b57\u7b26\u91c7\u7528\u6df7\u5408\u67b6\u6784\u3002 7.1 Word segmentation Sennrich \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u901a\u8fc7\u5c06\u7f55\u89c1\u548c\u672a\u77e5\u7684\u5355\u8bcd\u4f5c\u4e3a\u4e00\u4e2a subword units \u7684\u5e8f\u5217\u6765\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47\u7ffb\u8bd1\u7684\u65b9\u6cd5\u3002 \u8fd9\u901a\u8fc7\u8c03\u6574\u79f0\u4e3a Byte Pair Encoding \u7684\u538b\u7f29\u7b97\u6cd5\u6765\u5b9e\u73b0\u3002\u57fa\u672c\u601d\u60f3\u662f\u4ece\u5b57\u7b26\u8bcd\u6c47\u8868\u5f00\u59cb\uff0c\u5e76\u4e14\u7ee7\u7eed\u6269\u5c55\u6570\u636e\u96c6\u4e2d\u6700\u5e38\u89c1\u7684 n-gram \u5bf9\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u7684\u6570\u636e\u96c6\u5305\u542b 4 \u4e2a\u5355\u8bcd\uff0c\u56fe\u4e2d\u7684\u5de6\u8fb9\u7684\u8868\u793a\u5355\u8bcd\u9891\u7387\uff0c\u4f8b\u5982\u201clow\u201d\u51fa\u73b0\u4e86 5 \u6b21\u3002\u7528 \\((p,q,f)\\) \u6765\u8868\u793a\u4e00\u4e2a n-gram \u5bf9 \\(p,q\\) \u548c\u51fa\u73b0\u7684\u9891\u7387 \\(f\\) \u3002\u5982\u56fe\u4e2d\u6240\u793a\uff0c\u6211\u4eec\u5df2\u7ecf\u9009\u62e9\u7684\u9891\u7387\u6700\u9ad8\u7684\u7684 n-gram \u5bf9 \\((e,s,9)\\) \uff0c\u7136\u540e\u6211\u4eec\u73b0\u5728\u589e\u52a0\u5f53\u524d\u9891\u7387\u6700\u9ad8\u7684\u7684 n-gram \u5bf9 \\((es,t,9)\\) \u3002\u91cd\u590d\u6b64\u8fc7\u7a0b\uff0c\u76f4\u5230\u6240\u6709 n-gram \u5bf9\u88ab\u9009\u62e9\u8fc7\u6216\u8bcd\u6c47\u5927\u5c0f\u8fbe\u5230\u67d0\u4e2a\u9608\u503c\u3002 \u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4e3a\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u6784\u5efa\u5355\u72ec\u7684\u8bcd\u6c47\u8868\uff0c\u6216\u8005\u5171\u540c\u6784\u5efa\u4e00\u4e2a\u8bcd\u6c47\u8868\u3002\u5728\u6784\u5efa\u8bcd\u6c47\u8868\u4e4b\u540e\uff0c\u4e00\u4e2a\u5e26\u6709 Seq2Seq \u4f53\u7cfb\u7ed3\u6784\u7684 NMT \u7cfb\u7edf\uff08Bahdanau \u7b49\u4eba\u5728\u8bba\u6587\u4e2d\u4f7f\u7528\u7684\uff09\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bad\u7ec3\u8fd9\u4e9b\u8bcd\u6bb5\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u8d62\u5f97\u4e86 WMT 2016 \u7684\u7b2c\u4e00\u540d\u3002 7.2 Character-based model Ling \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u57fa\u4e8e\u5b57\u7b26\u7684\u6a21\u578b\u6765\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47\u8868\u793a\u3002\u5bf9\u4e8e\u5177\u6709 m \u4e2a\u5b57\u7b26\u7684\u6bcf\u4e2a\u5355\u8bcd w\uff0c\u8be5\u6a21\u578b\u4e0d\u662f\u5b58\u50a8\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c\u800c\u662f\u904d\u5386\u6240\u6709\u5b57\u7b26 \\(c_{1}, c_{2} \\dots c_{m}\\) \u67e5\u627e\u5b57\u7b26\u5d4c\u5165 \\(e_{1}, e_{2} \\dots e_{m}\\) \u3002\u7136\u540e\u5c06\u8fd9\u4e9b\u5b57\u7b26\u5d4c\u5165\u4f5c\u4e3a biLSTM \u8f93\u5165\uff0c\u4ee5\u5206\u522b\u83b7\u5f97\u7528\u4e8e\u524d\u5411\u548c\u540e\u5411\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001 \\(h_{f}, h_{b}\\) \u3002\u6700\u7ec8\u7684\u8bcd\u5411\u91cf\u662f\u7531\u4e24\u4e2a\u9690\u85cf\u72b6\u6001\u7684\u4eff\u5c04\u53d8\u6362\u6765\u8ba1\u7b97\u800c\u5f97\uff1a $$ e_{w}=W_{f} H_{f}+W_{b} H_{b}+b $$ 7.3 Hybrid NMT Luong \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u6df7\u5408\u8bcd\u5b57\u6a21\u578b\u6765\u5904\u7406\u672a\u77e5\u8bcd\uff0c\u4ece\u800c\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47 NMT\u3002\u7cfb\u7edf\u4e3b\u8981\u8fdb\u884c\u5355\u8bcd\u7ea7\u7ffb\u8bd1\uff0c\u5e76\u67e5\u9605\u7f55\u89c1\u5355\u8bcd\u7684\u5b57\u7b26\u7ec4\u6210\u3002\u5728\u9ad8\u5c42\u6b21\u4e0a\uff0c\u5b57\u7b26\u7ea7\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u8ba1\u7b97\u6e90\u5355\u8bcd\u8bcd\u8868\u793a\uff0c\u5e76\u5728\u9700\u8981\u65f6\u91cd\u65b0\u83b7\u5f97\u672a\u77e5\u76ee\u6807\u5355\u8bcd\u3002\u8fd9\u79cd\u6df7\u5408\u65b9\u6cd5\u7684\u53cc\u91cd\u4f18\u70b9\u5728\u4e8e\uff0c\u5b83\u7684\u8bad\u7ec3\u6bd4\u57fa\u4e8e\u5b57\u7b26\u7684\u65b9\u6cd5\u8981\u5feb\u5f97\u591a\uff0c\u800c\u4e14\u66f4\u5bb9\u6613\u8fdb\u884c\u8bad\u7ec3\uff1b\u540c\u65f6\uff0c\u5b83\u4e0d\u4f1a\u50cf\u57fa\u4e8e\u5355\u8bcd\u7684\u6a21\u578b\uff0c\u4ea7\u751f\u672a\u77e5\u7684\u5355\u8bcd\u3002 \u57fa\u4e8e\u5355\u8bcd\u7684\u7ffb\u8bd1\u4f5c\u4e3a\u4e3b\u5e72 \uff1a\u6df7\u5408 NMT \u7684\u6838\u5fc3\u662f\u4e00\u4e2a\u5355\u8bcd\u7ea7\u7ffb\u8bd1\u7684\u6df1\u5ea6 LSTM \u7f16\u7801\u5668\u2014\u89e3\u7801\u5668\u3002\u6211\u4eec\u5bf9\u6bcf\u79cd\u8bed\u8a00\u7ef4\u62a4\u5927\u5c0f \\(|V|\\) \u7684\u8bcd\u6c47\u8868\u548c\u4f7f\u7528 \\(\\text{<UNK>}\\) \u6765\u8868\u793a OOV \u8bcd\u6c47\u3002 \u57fa\u4e8e\u5b57\u7b26\u8868\u793a \uff1a\u5728\u5e38\u89c4\u7684\u57fa\u4e8e\u5355\u8bcd\u7684 NMT\uff0c\u662f\u4f7f\u7528\u4e00\u4e2a\u901a\u7528\u7684 \\(\\text{<UNK>}\\) \u8bcd\u5411\u91cf\u6765\u8868\u793a\u5168\u90e8 OOV \u8bcd\u6c47\u3002\u8fd9\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\u5b83\u4e22\u5f03\u4e86\u5173\u4e8e\u6e90\u5355\u8bcd\u7684\u6709\u4ef7\u503c\u7684\u4fe1\u606f\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u4e00\u4e2a\u5173\u4e8e\u7f55\u89c1\u5355\u8bcd\u7684\u5b57\u7b26\u7684\u6df1\u5c42 LSTM \u6a21\u578b\uff0c\u5e76\u4f7f\u7528 LSTM \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u4f5c\u4e3a\u7f55\u89c1\u5355\u8bcd\u7684\u8868\u793a\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002 \u76ee\u6807\u5b57\u7b26\u7ea7\u522b\u751f\u6210 \uff1a\u4e00\u822c\u57fa\u4e8e\u5355\u8bcd\u7684 NMT \u5141\u8bb8\u76ee\u6807\u8f93\u51fa\u751f\u6210\u7684 \\(\\text{<UNK>}\\) \u3002\u76f8\u53cd\uff0c\u8fd9\u91cc\u7684\u76ee\u6807\u662f\u521b\u5efa\u4e00\u4e2a\u5904\u7406\u65e0\u9650\u8f93\u51fa\u8bcd\u6c47\u8868\u7684\u8fde\u8d2f\u6846\u67b6\u3002\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u5728\u7ed9\u5b9a\u5f53\u524d\u5355\u8bcd\u7ea7\u522b\u7684\u72b6\u6001\u4e0b\uff0c\u4f7f\u7528\u4e00\u4e2a\u5355\u72ec\u7684\u6df1\u5c42 LSTM \u6765\u8fdb\u884c\u5b57\u7b26\u7ea7\u522b\u7684\u201c\u7ffb\u8bd1\u201d\u3002\u6ce8\u610f\uff0c\u5f53\u524d\u5355\u8bcd\u4e0a\u4e0b\u6587\u7528\u4e8e\u521d\u59cb\u5316\u5b57\u7b26\u7ea7\u7f16\u7801\u5668\u3002\u8be5\u7cfb\u7edf\u7684\u8bad\u7ec3\u65b9\u6cd5\u662f\uff0c\u6bcf\u5f53\u5355\u8bcd\u7ea7\u522b\u7684 NMT \u4ea7\u751f\u4e00\u4e2a\u7684 \\(\\text{<UNK>}\\) \u65f6\u5019\uff0c\u5b57\u7b26\u7ea7\u7684\u89e3\u7801\u5668\u5c31\u88ab\u8981\u6c42\u91cd\u65b0\u672a\u77e5\u76ee\u6807\u5355\u8bcd\u7684\u6b63\u786e\u7684 surface form\u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"08 Machine Translation, Sequence-to-sequence and Attention"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#lecture-08-machine-translation-sequence-to-sequence-and-attention","text":"Lecture Plan \u5f15\u5165\u65b0\u4efb\u52a1\uff1a\u673a\u5668\u7ffb\u8bd1 \u5f15\u5165\u4e00\u79cd\u65b0\u7684\u795e\u7ecf\u7ed3\u6784\uff1asequence-to-sequence \u673a\u5668\u7ffb\u8bd1\u662fsequence-to-sequence\u7684\u4e00\u4e2a\u4e3b\u8981\u7528\u4f8b \u5f15\u5165\u4e00\u79cd\u65b0\u7684\u795e\u7ecf\u6280\u672f\uff1a\u6ce8\u610f\u529b sequence-to-sequence\u901a\u8fc7attention\u5f97\u5230\u63d0\u5347","title":"Lecture 08 Machine Translation, Sequence-to-sequence and Attention"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#section-1-pre-neural-machine-translation","text":"Machine Translation \u673a\u5668\u7ffb\u8bd1(MT)\u662f\u5c06\u4e00\u4e2a\u53e5\u5b50 x \u4ece\u4e00\u79cd\u8bed\u8a00( \u6e90\u8bed\u8a00 )\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u8bed\u8a00( \u76ee\u6807\u8bed\u8a00 )\u7684\u53e5\u5b50 y \u7684\u4efb\u52a1\u3002 1950s: Early Machine Translation \u673a\u5668\u7ffb\u8bd1\u7814\u7a76\u59cb\u4e8e20\u4e16\u7eaa50\u5e74\u4ee3\u521d\u3002 \u4fc4\u8bed \\(\\to\\) \u82f1\u8bed(\u51b7\u6218\u7684\u63a8\u52a8) \u7cfb\u7edf\u4e3b\u8981\u662f\u57fa\u4e8e\u89c4\u5219\u7684\uff0c\u4f7f\u7528\u53cc\u8bed\u8bcd\u5178\u6765\u8bb2\u4fc4\u8bed\u5355\u8bcd\u6620\u5c04\u4e3a\u5bf9\u5e94\u7684\u82f1\u8bed\u90e8\u5206 1990s-2010s: Statistical Machine Translation \u6838\u5fc3\u60f3\u6cd5 \uff1a\u4ece\u6570\u636e\u4e2d\u5b66\u4e60\u6982\u7387\u6a21\u578b\u3002 \u5047\u8bbe\u6211\u4eec\u6b63\u5728\u7ffb\u8bd1\u6cd5\u8bed \\(\\to\\) \u82f1\u8bed\u3002 \u6211\u4eec\u60f3\u8981\u627e\u5230\u6700\u597d\u7684\u82f1\u8bed\u53e5\u5b50 y \uff0c\u7ed9\u5b9a\u6cd5\u8bed\u53e5\u5b50 x \\[ argmax_yP(y|x) \\] \u4f7f\u7528Bayes\u89c4\u5219\u5c06\u5176\u5206\u89e3\u4e3a\u4e24\u4e2a\u7ec4\u4ef6\u4ece\u800c\u5206\u522b\u5b66\u4e60 \\[ argmax_yP(x|y)P(y) \\] \\(P(x|y)\\) \u7ffb\u8bd1\u6a21\u578b \u5206\u6790\u5355\u8bcd\u548c\u77ed\u8bed\u5e94\u8be5\u5982\u4f55\u7ffb\u8bd1(\u903c\u771f) \u4ece\u5e76\u884c\u6570\u636e\u4e2d\u5b66\u4e60 \\(P(y)\\) \u8bed\u8a00\u6a21\u578b \u6a21\u578b\u5982\u4f55\u5199\u51fa\u597d\u82f1\u8bed(\u6d41\u5229) \u4ece\u5355\u8bed\u6570\u636e\u4e2d\u5b66\u4e60 \u95ee\u9898 \uff1a\u5982\u4f55\u5b66\u4e60\u7ffb\u8bd1\u6a21\u578b \\(P(x|y)\\) \u9996\u5148\uff0c\u9700\u8981\u5927\u91cf\u7684\u5e76\u884c\u6570\u636e(\u4f8b\u5982\u6210\u5bf9\u7684\u4eba\u5de5\u7ffb\u8bd1\u7684\u6cd5\u8bed/\u82f1\u8bed\u53e5\u5b50) Learning alignment for SMT \u95ee\u9898 \uff1a\u5982\u4f55\u4ece\u5e76\u884c\u8bed\u6599\u5e93\u4e2d\u5b66\u4e60\u7ffb\u8bd1\u6a21\u578b \\(P(x|y)\\) \u8fdb\u4e00\u6b65\u5206\u89e3:\u6211\u4eec\u5b9e\u9645\u4e0a\u60f3\u8981\u8003\u8651 \\[ P(x,a|y) \\] \\(a\\) \u662f\u5bf9\u9f50\uff0c\u5373\u6cd5\u8bed\u53e5\u5b50 x \u548c\u82f1\u8bed\u53e5\u5b50 y \u4e4b\u95f4\u7684\u5355\u8bcd\u7ea7\u5bf9\u5e94 What is alignment? \u5bf9\u9f50\u662f\u7ffb\u8bd1\u53e5\u5b50\u4e2d\u7279\u5b9a\u8bcd\u8bed\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u3002 \u6ce8\u610f\uff1a\u6709\u4e9b\u8bcd\u6ca1\u6709\u5bf9\u5e94\u8bcd Alignment is complex \u5bf9\u9f50\u53ef\u4ee5\u662f\u591a\u5bf9\u4e00\u7684 \u5bf9\u9f50\u53ef\u4ee5\u662f\u4e00\u5bf9\u591a\u7684 \u6709\u4e9b\u8bcd\u5f88\u4e30\u5bcc \u5bf9\u9f50\u53ef\u4ee5\u662f\u591a\u5bf9\u591a(\u77ed\u8bed\u7ea7) Learning alignment for SMT \u6211\u4eec\u5b66\u4e60\u5f88\u591a\u56e0\u7d20\u7684\u7ec4\u5408\uff0c\u5305\u62ec \u7279\u5b9a\u5355\u8bcd\u5bf9\u9f50\u7684\u6982\u7387(\u4e5f\u53d6\u51b3\u4e8e\u53d1\u9001\u4f4d\u7f6e) \u7279\u5b9a\u5355\u8bcd\u5177\u6709\u7279\u5b9a\u751f\u80b2\u7387\u7684\u6982\u7387(\u5bf9\u5e94\u5355\u8bcd\u7684\u6570\u91cf) \u7b49\u7b49 Decoding for SMT \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97argmax \u6211\u4eec\u53ef\u4ee5\u5217\u4e3e\u6240\u6709\u53ef\u80fd\u7684 y \u5e76\u8ba1\u7b97\u6982\u7387\uff1f \\(\\to\\) \u592a\u8d35\u4e86 \u4f7f\u7528\u542f\u53d1\u5f0f\u641c\u7d22\u7b97\u6cd5\u641c\u7d22\u6700\u4f73\u7ffb\u8bd1\uff0c\u4e22\u5f03\u6982\u7387\u8fc7\u4f4e\u7684\u5047\u8bbe \u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u89e3\u7801 SMT\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u7814\u7a76\u9886\u57df \u6700\u597d\u7684\u7cfb\u7edf\u975e\u5e38\u590d\u6742 \u6570\u4ee5\u767e\u8ba1\u7684\u91cd\u8981\u7ec6\u8282\u6211\u4eec\u8fd8\u6ca1\u6709\u63d0\u5230 \u7cfb\u7edf\u6709\u8bb8\u591a\u5206\u522b\u8bbe\u8ba1\u5b50\u7ec4\u4ef6\u5de5\u7a0b \u5f88\u591a\u529f\u80fd\u9700\u8981\u8bbe\u8ba1\u7279\u6027\u6765\u83b7\u53d6\u7279\u5b9a\u7684\u8bed\u8a00\u73b0\u8c61 \u9700\u8981\u7f16\u8bd1\u548c\u7ef4\u62a4\u989d\u5916\u7684\u8d44\u6e90 \u6bd4\u5982\u7b49\u4ef7\u77ed\u8bed\u8868 \u9700\u8981\u5927\u91cf\u7684\u4eba\u529b\u6765\u7ef4\u62a4 \u5bf9\u4e8e\u6bcf\u4e00\u5bf9\u8bed\u8a00\u90fd\u9700\u8981\u91cd\u590d\u64cd\u4f5c","title":"Section 1: Pre-Neural Machine Translation"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#section-2-neural-machine-translation","text":"What is Neural Machine Translation? \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u662f\u5229\u7528\u5355\u4e2a\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c\u673a\u5668\u7ffb\u8bd1\u7684\u4e00\u79cd\u65b9\u6cd5 \u795e\u7ecf\u7f51\u7edc\u67b6\u6784\u79f0\u4e3asequence-to-sequence (\u53c8\u540dseq2seq)\uff0c\u5b83\u5305\u542b\u4e24\u4e2aRNNs Neural Machine Translation (NMT) \u7f16\u7801\u5668RNN\u751f\u6210\u6e90\u8bed\u53e5\u7684\u7f16\u7801 \u6e90\u8bed\u53e5\u7684\u7f16\u7801\u4e3a\u89e3\u7801\u5668RNN\u63d0\u4f9b\u521d\u59cb\u9690\u85cf\u72b6\u6001 \u89e3\u7801\u5668RNN\u662f\u4e00\u79cd\u4ee5\u7f16\u7801\u4e3a\u6761\u4ef6\u751f\u6210\u76ee\u6807\u53e5\u7684\u8bed\u8a00\u6a21\u578b \u6ce8\u610f\uff1a\u6b64\u56fe\u663e\u793a\u4e86\u6d4b\u8bd5\u65f6\u884c\u4e3a \\(\\to\\) \u89e3\u7801\u5668\u8f93\u51fa\u4f5c\u4e3a\u4e0b\u4e00\u6b65\u7684\u8f93\u5165 Sequence-to-sequence is versatile! \u5e8f\u5217\u5230\u5e8f\u5217\u4e0d\u4ec5\u4ec5\u5bf9MT\u6709\u7528 \u8bb8\u591aNLP\u4efb\u52a1\u53ef\u4ee5\u6309\u7167\u987a\u5e8f\u8fdb\u884c\u8868\u8fbe \u6458\u8981(\u957f\u6587\u672c \\(\\to\\) \u77ed\u6587\u672c) \u5bf9\u8bdd(\u524d\u4e00\u53e5\u8bdd \\(\\to\\) \u4e0b\u4e00\u53e5\u8bdd) \u89e3\u6790(\u8f93\u5165\u6587\u672c \\(\\to\\) \u8f93\u51fa\u89e3\u6790\u4e3a\u5e8f\u5217) \u4ee3\u7801\u751f\u6210(\u81ea\u7136\u8bed\u8a00 \\(\\to\\) Python\u4ee3\u7801) sequence-to-sequence \u6a21\u578b\u662f Conditional Language Model \u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u7684\u4e00\u4e2a\u4f8b\u5b50 \u8bed\u8a00\u6a21\u578b\uff0c\u56e0\u4e3a\u89e3\u7801\u5668\u6b63\u5728\u9884\u6d4b\u76ee\u6807\u53e5\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd y \u6709\u6761\u4ef6\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u9884\u6d4b\u4e5f\u53d6\u51b3\u4e8e\u6e90\u53e5 x NMT\u76f4\u63a5\u8ba1\u7b97 \\(P(y|x)\\) \\[ P(y | x)=P\\left(y_{1} | x\\right) P\\left(y_{2} | y_{1}, x\\right) P\\left(y_{3} | y_{1}, y_{2}, x\\right) \\ldots P\\left(y_{T} | y_{1}, \\ldots, y_{T-1}, x\\right) \\] \u4e0a\u5f0f\u4e2d\u6700\u540e\u4e00\u9879\u4e3a\uff0c\u7ed9\u5b9a\u5230\u76ee\u524d\u4e3a\u6b62\u7684\u76ee\u6807\u8bcd\u548c\u6e90\u53e5 x \uff0c\u4e0b\u4e00\u4e2a\u76ee\u6807\u8bcd\u7684\u6982\u7387 \u95ee\u9898 \uff1a\u5982\u4f55\u57f9\u8badNMT\u7cfb\u7edf\uff1f \u56de\u7b54 \uff1a\u627e\u4e00\u4e2a\u5927\u7684\u5e73\u884c\u8bed\u6599\u5e93 \u200b Seq2seq\u88ab\u4f18\u5316\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u7cfb\u7edf\u3002\u53cd\u5411\u4f20\u64ad\u8fd0\u884c\u5728\u201c\u7aef\u5230\u7aef\u201d\u4e2d Greedy decoding \u6211\u4eec\u4e86\u89e3\u4e86\u5982\u4f55\u751f\u6210(\u6216\u201c\u89e3\u7801\u201d)\u76ee\u6807\u53e5\uff0c\u901a\u8fc7\u5bf9\u89e3\u7801\u5668\u7684\u6bcf\u4e2a\u6b65\u9aa4\u4f7f\u7528 argmax \u8fd9\u662f\u8d2a\u5a6a\u89e3\u7801(\u6bcf\u4e00\u6b65\u90fd\u53d6\u6700\u53ef\u80fd\u7684\u5355\u8bcd) \u8fd9\u79cd\u65b9\u6cd5\u6709\u95ee\u9898\u5417\uff1f Problems with greedy decoding \u8d2a\u5a6a\u89e3\u7801\u6ca1\u6709\u529e\u6cd5\u64a4\u9500\u51b3\u5b9a \u5982\u4f55\u4fee\u590d\uff1f Exhaustive search decoding \u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u60f3\u8981\u627e\u5230\u4e00\u4e2a(\u957f\u5ea6\u4e3a T )\u7684\u7ffb\u8bd1 y \u4f7f\u5176\u6700\u5927\u5316 \u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8ba1\u7b97\u6240\u6709\u53ef\u80fd\u7684\u5e8f\u5217 y \u8fd9\u610f\u5473\u7740\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65 t \uff0c\u6211\u4eec\u8ddf\u8e2a \\(V^t\\) \u4e2a\u53ef\u80fd\u7684\u90e8\u5206\u7ffb\u8bd1\uff0c\u5176\u4e2d \\(V\\) \u662f vocab \u5927\u5c0f \u8fd9\u79cd \\(O(V^T)\\) \u7684\u590d\u6742\u6027\u592a\u6602\u8d35\u4e86\uff01 Beam search decoding \u6838\u5fc3\u601d\u60f3 \uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u8ddf\u8e2a k \u4e2a\u6700\u53ef\u80fd\u7684\u90e8\u5206\u7ffb\u8bd1(\u6211\u4eec\u79f0\u4e4b\u4e3a hypotheses \u5047\u8bbe ) k\u662fBeam\u7684\u5927\u5c0f(\u5b9e\u9645\u4e2d\u5927\u7ea6\u662f5\u523010) \\[ \\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\log P_{\\mathrm{LM}}\\left(y_{1}, \\ldots, y_{t} | x\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] \u5047\u8bbe \\(y_{1}, \\dots, y_{t}\\) \u6709\u4e00\u4e2a\u5206\u6570\uff0c\u5373\u5b83\u7684\u5bf9\u6570\u6982\u7387 \u5206\u6570\u90fd\u662f\u8d1f\u6570\uff0c\u5206\u6570\u8d8a\u9ad8\u8d8a\u597d \u6211\u4eec\u5bfb\u627e\u5f97\u5206\u8f83\u9ad8\u7684\u5047\u8bbe\uff0c\u8ddf\u8e2a\u6bcf\u4e00\u6b65\u7684 top k \u4e2a\u90e8\u5206\u7ffb\u8bd1 \u6ce2\u675f\u641c\u7d22 \u4e0d\u4e00\u5b9a\u80fd \u627e\u5230\u6700\u4f18\u89e3 \u4f46\u6bd4\u7a77\u4e3e\u641c\u7d22\u6548\u7387\u9ad8\u5f97\u591a Beam search decoding: example Beam size = k = 2 \u84dd\u8272\u7684\u6570\u5b57\u662f \\(\\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right)\\) \u7684\u7ed3\u679c \u8ba1\u7b97\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03 \u53d6\u524dk\u4e2a\u5355\u8bcd\u5e76\u8ba1\u7b97\u5206\u6570 \u5bf9\u4e8e\u6bcf\u4e00\u6b21\u7684 k \u4e2a\u5047\u8bbe\uff0c\u627e\u51fa\u6700\u524d\u9762\u7684 k \u4e2a\u5355\u8bcd\u5e76\u8ba1\u7b97\u5206\u6570 \u5728 \\(k^2\\) \u7684\u5047\u8bbe\u4e2d\uff0c\u4fdd\u7559 k \u4e2a\u6700\u9ad8\u7684\u5206\u503c\uff0c\u5982 t = 2 \u65f6\uff0c\u4fdd\u7559\u5206\u6570\u6700\u9ad8\u7684 hit \u548c was Beam search decoding: stopping criterion \u5728\u8d2a\u5fc3\u89e3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u89e3\u7801\u5230\u6a21\u578b\u4ea7\u751f\u4e00\u4e2a \\(\\text{<END>}\\) \u4ee4\u724c \u4f8b\u5982: \\(\\text{<START>}\\) he hit me with a pie \\(\\text{<END>}\\) \u5728 Beam Search \u89e3\u7801\u4e2d\uff0c\u4e0d\u540c\u7684\u5047\u8bbe\u53ef\u80fd\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6b65\u957f\u4e0a\u4ea7\u751f \\(\\text{<END>}\\) \u4ee4\u724c \u5f53\u4e00\u4e2a\u5047\u8bbe\u751f\u6210\u4e86 \\(\\text{<END>}\\) \u4ee4\u724c\uff0c\u8be5\u5047\u8bbe\u5b8c\u6210 \u628a\u5b83\u653e\u5728\u4e00\u8fb9\uff0c\u901a\u8fc7 Beam Search \u7ee7\u7eed\u63a2\u7d22\u5176\u4ed6\u5047\u8bbe \u901a\u5e38\u6211\u4eec\u7ee7\u7eed\u8fdb\u884c Beam Search \uff0c\u76f4\u5230 \u6211\u4eec\u5230\u8fbe\u65f6\u95f4\u6b65\u957f T (\u5176\u4e2d T \u662f\u9884\u5b9a\u4e49\u622a\u6b62\u70b9) \u6211\u4eec\u81f3\u5c11\u6709 n \u4e2a\u5df2\u5b8c\u6210\u7684\u5047\u8bbe(\u5176\u4e2d n \u662f\u9884\u5b9a\u4e49\u622a\u6b62\u70b9) Beam search decoding: finishing up \u6211\u4eec\u6709\u5b8c\u6574\u7684\u5047\u8bbe\u5217\u8868 \u5982\u4f55\u9009\u62e9\u5f97\u5206\u6700\u9ad8\u7684\uff1f \u6211\u4eec\u6e05\u5355\u4e0a\u7684\u6bcf\u4e2a\u5047\u8bbe \\(y_{1}, \\dots, y_{t}\\) \u90fd\u6709\u4e00\u4e2a\u5206\u6570 \\[ \\operatorname{score}\\left(y_{1}, \\ldots, y_{t}\\right)=\\log P_{\\mathrm{LM}}\\left(y_{1}, \\ldots, y_{t} | x\\right)=\\sum_{i=1}^{t} \\log P_{\\operatorname{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] \u95ee\u9898\u5728\u4e8e \uff1a\u8f83\u957f\u7684\u5047\u8bbe\u5f97\u5206\u8f83\u4f4e \u4fee\u6b63 \uff1a\u6309\u957f\u5ea6\u6807\u51c6\u5316\u3002\u7528\u4e0b\u5f0f\u6765\u9009\u62e9top one \\[ \\frac{1}{t} \\sum_{i=1}^{t} \\log P_{\\mathrm{LM}}\\left(y_{i} | y_{1}, \\ldots, y_{i-1}, x\\right) \\] Advantages of NMT \u4e0eSMT\u76f8\u6bd4\uff0cNMT\u6709\u5f88\u591a\u4f18\u70b9 \u66f4\u597d\u7684\u6027\u80fd \u66f4\u6d41\u5229 \u66f4\u597d\u5730\u4f7f\u7528\u4e0a\u4e0b\u6587 \u66f4\u597d\u5730\u4f7f\u7528\u77ed\u8bed\u76f8\u4f3c\u6027 \u5355\u4e2a\u795e\u7ecf\u7f51\u7edc\u7aef\u5230\u7aef\u4f18\u5316 \u6ca1\u6709\u5b50\u7ec4\u4ef6\u9700\u8981\u5355\u72ec\u4f18\u5316 \u5bf9\u6240\u6709\u8bed\u8a00\u5bf9\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5 Disadvantages of NMT? SMT\u76f8\u6bd4 NMT\u7684\u53ef\u89e3\u91ca\u6027\u8f83\u5dee \u96be\u4ee5\u8c03\u8bd5 NMT\u5f88\u96be\u63a7\u5236 \u4f8b\u5982\uff0c\u4e0d\u80fd\u8f7b\u677e\u6307\u5b9a\u7ffb\u8bd1\u89c4\u5219\u6216\u6307\u5357 \u5b89\u5168\u95ee\u9898 How do we evaluate Machine Translation? BLEU (Bilingual Evaluation Understudy) \u4f60\u5c06\u4f1a\u5728 Assignment 4 \u4e2d\u770b\u5230BLEU\u7684\u7ec6\u8282 BLEU\u5c06\u673a\u5668\u7ffb\u8bd1\u548c\u4eba\u5de5\u7ffb\u8bd1(\u4e00\u4e2a\u6216\u591a\u4e2a)\uff0c\u5e76\u8ba1\u7b97\u4e00\u4e2a\u76f8\u4f3c\u7684\u5206\u6570 n-gram \u7cbe\u5ea6 (\u901a\u5e38\u4e3a1-4) \u5bf9\u8fc7\u4e8e\u77ed\u7684\u673a\u5668\u7ffb\u8bd1\u7684\u52a0\u4e0a\u60e9\u7f5a BLEU\u5f88\u6709\u7528,\u4f46\u4e0d\u5b8c\u7f8e \u6709\u5f88\u591a\u6709\u6548\u7684\u65b9\u6cd5\u6765\u7ffb\u8bd1\u4e00\u4e2a\u53e5\u5b50 \u6240\u4ee5\u4e00\u4e2a\u597d\u7684\u7ffb\u8bd1\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7cdf\u7cd5\u7684BLEU score\uff0c\u56e0\u4e3a\u5b83\u4e0e\u4eba\u5de5\u7ffb\u8bd1\u7684n-gram\u91cd\u53e0\u8f83\u4f4e MT progress over time NMT: the biggest success story of NLP Deep Learning \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e8e2014\u5e74\u4ece\u8fb9\u7f18\u7814\u7a76\u6d3b\u52a8\u52302016\u5e74\u6210\u4e3a\u9886\u5148\u6807\u51c6\u65b9\u6cd5 2014\uff1a\u7b2c\u4e00\u7bc7 seq2seq \u7684\u6587\u7ae0\u53d1\u5e03 2016\uff1a\u8c37\u6b4c\u7ffb\u8bd1\u4ece SMT \u6362\u6210\u4e86 NMT \u8fd9\u662f\u60ca\u4eba\u7684 \u7531\u6570\u767e\u540d\u5de5\u7a0b\u5e08\u5386\u7ecf\u591a\u5e74\u6253\u9020\u7684SMT\u7cfb\u7edf\uff0c\u5728\u77ed\u77ed\u51e0\u4e2a\u6708\u5185\u5c31\u88ab\u5c11\u6570\u5de5\u7a0b\u5e08\u8bad\u7ec3\u8fc7\u7684NMT\u7cfb\u7edf\u8d85\u8d8a So is Machine Translation solved? \u4e0d\uff01 \u8bb8\u591a\u56f0\u96be\u4ecd\u7136\u5b58\u5728 \u8bcd\u8868\u5916\u7684\u5355\u8bcd\u5904\u7406 \u8bad\u7ec3\u548c\u6d4b\u8bd5\u6570\u636e\u4e4b\u95f4\u7684 \u9886\u57df\u4e0d\u5339\u914d \u5728\u8f83\u957f\u6587\u672c\u4e0a\u7ef4\u62a4\u4e0a\u4e0b\u6587 \u8d44\u6e90\u8f83\u4f4e\u7684\u8bed\u8a00\u5bf9 \u4f7f\u7528\u5e38\u8bc6\u4ecd\u7136\u5f88\u96be NMT\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u53d1\u73b0\u504f\u5dee \u65e0\u6cd5\u89e3\u91ca\u7684\u7cfb\u7edf\u4f1a\u505a\u4e00\u4e9b\u5947\u602a\u7684\u4e8b\u60c5 NMT research continues NMT\u662fNLP\u6df1\u5ea6\u5b66\u4e60\u7684\u6838\u5fc3\u4efb\u52a1 NMT\u7814\u7a76\u5f15\u9886\u4e86NLP\u6df1\u5ea6\u5b66\u4e60\u7684\u8bb8\u591a\u6700\u65b0\u521b\u65b0 2019\u5e74\uff1aNMT\u7814\u7a76\u5c06\u7ee7\u7eed\u84ec\u52c3\u53d1\u5c55 \u7814\u7a76\u4eba\u5458\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6211\u4eec\u4eca\u5929\u4ecb\u7ecd\u7684\u666e\u901aseq2seq NMT\u7cfb\u7edf\uff0c\u6709\u5f88\u591a\u3001\u5f88\u591a\u7684\u6539\u8fdb\u3002 \u4f46\u6709\u4e00\u4e2a\u6539\u8fdb\u662f\u5982\u6b64\u4e0d\u53ef\u6216\u7f3a","title":"Section 2: Neural Machine Translation"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#section-3-attention","text":"Sequence-to-sequence: the bottleneck problem \u6e90\u8bed\u53e5\u7684\u7f16\u7801\u9700\u8981\u6355\u83b7\u5173\u4e8e\u6e90\u8bed\u53e5\u7684\u6240\u6709\u4fe1\u606f \u4fe1\u606f\u74f6\u9888\uff01 Attention \u6ce8\u610f\u529b\u4e3a\u74f6\u9888\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848 \u6838\u5fc3\u7406\u5ff5 \uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u4f7f\u7528 \u4e0e\u7f16\u7801\u5668\u7684\u76f4\u63a5\u8fde\u63a5 \u6765\u4e13\u6ce8\u4e8e\u6e90\u5e8f\u5217\u7684\u7279\u5b9a\u90e8\u5206 \u9996\u5148\u6211\u4eec\u5c06\u901a\u8fc7\u56fe\u8868\u5c55\u793a(\u6ca1\u6709\u65b9\u7a0b)\uff0c\u7136\u540e\u6211\u4eec\u5c06\u7528\u65b9\u7a0b\u5c55\u793a \u5c06\u89e3\u7801\u5668\u90e8\u5206\u7684\u7b2c\u4e00\u4e2atoken \\(\\text{<START>}\\) \u4e0e\u6e90\u8bed\u53e5\u4e2d\u7684\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u72b6\u6001\u8fdb\u884c Dot Product \u5f97\u5230\u6bcf\u4e00\u65f6\u95f4\u6b65\u7684\u5206\u6570 \u901a\u8fc7softmax\u5c06\u5206\u6570\u8f6c\u5316\u4e3a\u6982\u7387\u5206\u5e03 \u5728\u8fd9\u4e2a\u89e3\u7801\u5668\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u6211\u4eec\u4e3b\u8981\u5173\u6ce8\u7b2c\u4e00\u4e2a\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001(\u201che\u201d) \u5229\u7528\u6ce8\u610f\u529b\u5206\u5e03\u5bf9\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001\u8fdb\u884c\u52a0\u6743\u6c42\u548c \u6ce8\u610f\u529b\u8f93\u51fa\u4e3b\u8981\u5305\u542b\u6765\u81ea\u4e8e\u53d7\u5230\u9ad8\u5ea6\u5173\u6ce8\u7684\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f \u8fde\u63a5\u7684 \u6ce8\u610f\u529b\u8f93\u51fa \u4e0e \u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \uff0c\u7136\u540e\u7528\u6765\u8ba1\u7b97 \\(\\hat y_1\\) \u6709\u65f6\uff0c\u6211\u4eec\u4ece\u524d\u9762\u7684\u6b65\u9aa4\u4e2d\u63d0\u53d6\u6ce8\u610f\u529b\u8f93\u51fa\uff0c\u5e76\u5c06\u5176\u8f93\u5165\u89e3\u7801\u5668(\u8fde\u540c\u901a\u5e38\u7684\u89e3\u7801\u5668\u8f93\u5165)\u3002\u6211\u4eec\u5728\u4f5c\u4e1a4\u4e2d\u505a\u8fd9\u4e2a\u3002 Attention: in equations \u6211\u4eec\u6709\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(h_{1}, \\ldots, h_{N} \\in \\mathbb{R}^{h}\\) \u5728\u65f6\u95f4\u6b65 t \u4e0a\uff0c\u6211\u4eec\u6709\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(s_{t} \\in \\mathbb{R}^{h}\\) \u6211\u4eec\u5f97\u5230\u8fd9\u4e00\u6b65\u7684\u6ce8\u610f\u5206\u6570 \\[ e^{t}=\\left[s_{t}^{T} \\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{s}_{t}^{T} \\boldsymbol{h}_{N}\\right] \\in \\mathbb{R}^{N} \\] \u6211\u4eec\u4f7f\u7528softmax\u5f97\u5230\u8fd9\u4e00\u6b65\u7684\u6ce8\u610f\u5206\u5e03 \\(\\alpha^{t}\\) (\u8fd9\u662f\u4e00\u4e2a\u6982\u7387\u5206\u5e03\uff0c\u548c\u4e3a1) \\[ \\alpha^{t}=\\operatorname{softmax}\\left(e^{t}\\right) \\in \\mathbb{R}^{N} \\] \u6211\u4eec\u4f7f\u7528 \\(\\alpha^{t}\\) \u6765\u83b7\u5f97\u7f16\u7801\u5668\u9690\u85cf\u72b6\u6001\u7684\u52a0\u6743\u548c\uff0c\u5f97\u5230\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{a}_{t}\\) \\[ \\boldsymbol{a}_{t}=\\sum_{i=1}^{N} \\alpha_{i}^{t} \\boldsymbol{h}_{i} \\in \\mathbb{R}^{h} \\] \u6700\u540e\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u8f93\u51fa \\(\\boldsymbol{a}_{t}\\) \u4e0e\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001\u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u6309\u7167\u975e\u6ce8\u610fseq2seq\u6a21\u578b\u7ee7\u7eed\u8fdb\u884c \\[ \\left[\\boldsymbol{a}_{t} ; \\boldsymbol{s}_{t}\\right] \\in \\mathbb{R}^{2 h} \\] Attention is great \u6ce8\u610f\u529b\u663e\u8457\u63d0\u9ad8\u4e86NMT\u6027\u80fd \u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u8ba9\u89e3\u7801\u5668\u4e13\u6ce8\u4e8e\u67d0\u4e9b\u90e8\u5206\u7684\u6e90\u8bed\u53e5 \u6ce8\u610f\u529b\u89e3\u51b3\u74f6\u9888\u95ee\u9898 \u6ce8\u610f\u529b\u5141\u8bb8\u89e3\u7801\u5668\u76f4\u63a5\u67e5\u770b\u6e90\u8bed\u53e5\uff1b\u7ed5\u8fc7\u74f6\u9888 \u6ce8\u610f\u529b\u5e2e\u52a9\u6d88\u5931\u68af\u5ea6\u95ee\u9898 \u63d0\u4f9b\u4e86\u901a\u5f80\u9065\u8fdc\u72b6\u6001\u7684\u6377\u5f84 \u6ce8\u610f\u529b\u63d0\u4f9b\u4e86\u4e00\u4e9b\u53ef\u89e3\u91ca\u6027 \u901a\u8fc7\u68c0\u67e5\u6ce8\u610f\u529b\u7684\u5206\u5e03\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u89e3\u7801\u5668\u5728\u5173\u6ce8\u4ec0\u4e48 \u6211\u4eec\u53ef\u4ee5\u514d\u8d39\u5f97\u5230(\u8f6f)\u5bf9\u9f50 \u8fd9\u5f88\u9177\uff0c\u56e0\u4e3a\u6211\u4eec\u4ece\u6765\u6ca1\u6709\u660e\u786e\u8bad\u7ec3\u8fc7\u5bf9\u9f50\u7cfb\u7edf \u7f51\u7edc\u53ea\u662f\u81ea\u4e3b\u5b66\u4e60\u4e86\u5bf9\u9f50 Attention is a general Deep Learning technique \u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c\u6ce8\u610f\u529b\u662f\u6539\u8fdb\u673a\u5668\u7ffb\u8bd1\u7684\u5e8f\u5217\u5230\u5e8f\u5217\u6a21\u578b\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5 \u7136\u800c \uff1a\u60a8\u53ef\u4ee5\u5728\u8bb8\u591a\u4f53\u7cfb\u7ed3\u6784(\u4e0d\u4ec5\u4ec5\u662fseq2seq)\u548c\u8bb8\u591a\u4efb\u52a1(\u4e0d\u4ec5\u4ec5\u662fMT)\u4e2d\u4f7f\u7528\u6ce8\u610f\u529b \u6ce8\u610f\u529b\u7684\u66f4\u4e00\u822c\u5b9a\u4e49 \u7ed9\u5b9a\u4e00\u7ec4\u5411\u91cf \u503c \u548c\u4e00\u4e2a\u5411\u91cf \u67e5\u8be2 \uff0c\u6ce8\u610f\u529b\u662f\u4e00\u79cd\u6839\u636e\u67e5\u8be2\uff0c\u8ba1\u7b97\u503c\u7684\u52a0\u6743\u548c\u7684\u6280\u672f \u6211\u4eec\u6709\u65f6\u8bf4 query attends to the values \u4f8b\u5982\uff0c\u5728seq2seq + attention\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e2a\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001(\u67e5\u8be2)\u5173\u6ce8\u6240\u6709\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001(\u503c) \u76f4\u89c9 \u52a0\u6743\u548c\u662f\u503c\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u7684\u9009\u62e9\u6027\u6c47\u603b\uff0c\u67e5\u8be2\u5728\u5176\u4e2d\u786e\u5b9a\u8981\u5173\u6ce8\u54ea\u4e9b\u503c \u6ce8\u610f\u662f\u4e00\u79cd\u83b7\u53d6\u4efb\u610f\u4e00\u7ec4\u8868\u793a(\u503c)\u7684\u56fa\u5b9a\u5927\u5c0f\u8868\u793a\u7684\u65b9\u6cd5\uff0c\u4f9d\u8d56\u4e8e\u5176\u4ed6\u4e00\u4e9b\u8868\u793a(\u67e5\u8be2)\u3002 There are several attention variants \u6211\u4eec\u6709\u4e00\u4e9b\u503c \\(\\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{h}_{N} \\in \\mathbb{R}^{d_{1}}\\) \u548c\u4e00\u4e2a\u67e5\u8be2 \\(s \\in \\mathbb{R}^{d_{2}}\\) \u6ce8\u610f\u529b\u603b\u662f\u5305\u62ec \u8ba1\u7b97\u6ce8\u610f\u529b\u5f97\u5206 \\(e \\in \\mathbb{R}^{N}\\) \uff08\u5f88\u591a\u79cd\u8ba1\u7b97\u65b9\u5f0f\uff09 \u91c7\u53d6softmax\u6765\u83b7\u5f97\u6ce8\u610f\u529b\u5206\u5e03 \\(\\alpha\\) \\[ \\alpha=\\operatorname{softmax}(\\boldsymbol{e}) \\in \\mathbb{R}^{N} \\] \u4f7f\u7528\u6ce8\u610f\u529b\u5206\u5e03\u5bf9\u503c\u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff1a\u4ece\u800c\u5f97\u5230\u6ce8\u610f\u8f93\u51fa \\(\\boldsymbol{a}\\) (\u6709\u65f6\u79f0\u4e3a\u4e0a\u4e0b\u6587\u5411\u91cf) \\[ \\boldsymbol{a}=\\sum_{i=1}^{N} \\alpha_{i} \\boldsymbol{h}_{i} \\in \\mathbb{R}^{d_{1}} \\] Attention variants \u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4ece \\(\\boldsymbol{h}_{1}, \\ldots, \\boldsymbol{h}_{N} \\in \\mathbb{R}^{d_{1}}\\) \u8ba1\u7b97 \\(e \\in \\mathbb{R}^{N}\\) \u548c \\(\\boldsymbol{s} \\in \\mathbb{R}^{d_{2}}\\) \u57fa\u672c\u7684\u70b9\u4e58\u6ce8\u610f\u529b \\(\\boldsymbol{e}_{i}=\\boldsymbol{s}^{T} \\boldsymbol{h}_{i} \\in \\mathbb{R}\\) \u6ce8\u610f\uff1a\u8fd9\u91cc\u5047\u8bbe \\(d_1 = d_2\\) \u8fd9\u662f\u6211\u4eec\u4e4b\u524d\u770b\u5230\u7684\u7248\u672c \u4e58\u6cd5\u6ce8\u610f\u529b \\(e_{i}=s^{T} \\boldsymbol{W} \\boldsymbol{h}_{i} \\in \\mathbb{R}\\) \\(\\boldsymbol{W} \\in \\mathbb{R}^{d_{2} \\times d_{1}}\\) \u662f\u6743\u91cd\u77e9\u9635 \u52a0\u6cd5\u6ce8\u610f\u529b \\(e_{i}=\\boldsymbol{v}^{T} \\tanh \\left(\\boldsymbol{W}_{1} \\boldsymbol{h}_{i}+\\boldsymbol{W}_{2} \\boldsymbol{s}\\right) \\in \\mathbb{R}\\) \u5176\u4e2d \\(\\boldsymbol{W}_{1} \\in \\mathbb{R}^{d_{3} \\times d_{1}}, \\boldsymbol{W}_{2} \\in \\mathbb{R}^{d_{3} \\times d_{2}}\\) \u662f\u6743\u91cd\u77e9\u9635\uff0c \\(\\boldsymbol{v} \\in \\mathbb{R}^{d_{3}}\\) \u662f\u6743\u91cd\u5411\u91cf \\(d_3\\) (\u6ce8\u610f\u529b\u7ef4\u5ea6)\u662f\u4e00\u4e2a\u8d85\u53c2\u6570 \u4f60\u4eec\u5c06\u5728\u4f5c\u4e1a4\u4e2d\u8003\u8651\u8fd9\u4e9b\u7684\u76f8\u5bf9\u4f18\u52bf/\u52a3\u52bf\uff01 Summary of today\u2019s lecture","title":"Section 3: Attention"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#notes-06-neural-machine-translation-seq2seq-and-attention","text":"Keyphrases : Seq2Seq and Attention Mechanisms, Neural Machine Translation, Speech Processing","title":"Notes 06 Neural Machine Translation, Seq2seq and Attention"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#1-neural-machine-translation-with-seq2seq","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u5904\u7406\u4e86\u9884\u6d4b\u5355\u4e2a\u8f93\u51fa\u7684\u95ee\u9898\uff1a\u4e00\u4e2a\u5355\u8bcd\u7684 NER \u6807\u7b7e\uff0c\u5728\u4e00\u4e2a\u53e5\u5b50\u4e2d\u6839\u636e\u524d\u9762\u7684\u5355\u8bcd\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff0c\u7b49\u7b49\u3002\u7136\u800c\u6709\u4e00\u7c7b\u7684 NLP \u4efb\u52a1\u662f\u4f9d\u8d56\u5e8f\u5217\u8f93\u51fa\u7684\uff0c\u6216\u8005\u8f93\u51fa\u662f\u957f\u5ea6\u53d8\u5316\u7684\u5e8f\u5217\u3002\u4f8b\u5982\uff1a Translation \uff1a\u5c06\u4e00\u79cd\u8bed\u8a00\u7684\u4e00\u4e2a\u53e5\u5b50\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u8f93\u51fa\u662f\u53e6\u5916\u4e00\u79cd\u8bed\u8a00\u7684\u76f8\u540c\u7684\u610f\u601d\u7684\u53e5\u5b50\u3002 Conversation \uff1a\u4ee5\u9648\u8ff0\u6216\u95ee\u9898\u4f5c\u4e3a\u8f93\u5165\u5e76\u4f5c\u51fa\u56de\u5e94\u3002 Summarization \uff1a\u5c06\u5927\u91cf\u6587\u672c\u4f5c\u4e3a\u8f93\u5165\u5e76\u8f93\u51fa\u5176\u6458\u8981\u3002 \u5728\u4e0b\u9762\u7684\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd Seq2Seq \u6a21\u578b\uff0c\u4e00\u4e2a\u7528\u6765\u5904\u7406\u4e0a\u8ff0\u95ee\u9898\u7684\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u3002\u8fd9\u4e2a\u6846\u67b6\u88ab\u8bc1\u660e\u4e86\u662f\u975e\u5e38\u6709\u6548\u7684\uff0c\u5728\u4e0d\u5230\u4e09\u5e74\u7684\u65f6\u95f4\u91cc\u6210\u4e3a\u4e86\u673a\u5668\u7ffb\u8bd1\u7684\u6807\u51c6\u65b9\u6cd5\u3002 1.1 Brief Note on Historical Approaches \u5728\u8fc7\u53bb\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u662f\u57fa\u4e8e\u6982\u7387\u6a21\u578b\u6784\u5efa\u7684 \u4e00\u4e2a \u7ffb\u8bd1\u6a21\u578b \uff0c\u544a\u8bc9\u6211\u4eec\u4e00\u4e2a\u6e90\u8bed\u8a00\u4e2d\u6700\u6709\u53ef\u80fd\u88ab\u7ffb\u8bd1\u4e3a\u7684\u53e5\u5b50/\u77ed\u8bed\u3002 \u4e00\u4e2a \u8bed\u8a00\u6a21\u578b \uff0c\u544a\u8bc9\u6211\u4eec\u7ed9\u5b9a\u53e5\u5b50/\u77ed\u8bed\u7684\u6574\u4f53\u53ef\u80fd\u6027\u3002 \u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7528\u4e8e\u6784\u5efa\u57fa\u4e8e\u5355\u8bcd\u6216\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u3002\u6b63\u5982\u4f60\u6240\u60f3\u5230\u7684\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u7684\u57fa\u4e8e\u5355\u8bcd\u7684\u7ffb\u8bd1\u7cfb\u7edf\u5c06\u5b8c\u5168\u4e0d\u80fd\u6355\u83b7\u8bed\u8a00\u4e4b\u95f4\u7684\u6392\u5e8f\u5dee\u5f02\uff08\u4f8b\u5982\uff0c\u5426\u5b9a\u8bcd\u79fb\u52a8\uff0c\u53e5\u5b50\u4e2d\u7684\u4e3b\u8bed\u548c\u52a8\u8bcd\u7684\u4f4d\u7f6e\u7b49\uff09\u3002 \u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u5728 Seq2Seq \u4e4b\u524d\u662f\u975e\u5e38\u5e38\u89c1\u7684\u3002\u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u53ef\u4ee5\u6839\u636e\u77ed\u8bed\u5e8f\u5217\u8003\u8651\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u76f8\u6bd4\u6bd4\u57fa\u4e8e\u8bcd\u7684\u7cfb\u7edf\u53ef\u4ee5\u5904\u7406\u66f4\u590d\u6742\u7684\u8bed\u6cd5\u3002\u7136\u800c\uff0c\u5728\u57fa\u4e8e\u77ed\u8bed\u7684\u7ffb\u8bd1\u7cfb\u7edf\u4ecd\u7136\u96be\u4ee5\u6355\u83b7\u957f\u8ddd\u79bb\u7684\u4fe1\u606f\u3002 Seq2Seq \u5e26\u6765\u5f88\u5927\u7684\u4f18\u52bf\uff0c\u5c24\u5176\u662f\u4f7f\u7528 LSTM\uff0c\u73b0\u4ee3\u7ffb\u8bd1\u7cfb\u7edf\u53ef\u4ee5\u5728\u89c2\u6d4b\u5230\u6574\u4e2a\u8f93\u5165\u540e\u751f\u6210\u4efb\u610f\u7684\u8f93\u51fa\u5e8f\u5217\u3002\u4ed6\u4eec\u751a\u81f3\u53ef\u4ee5\u81ea\u52a8\u5730\u4e13\u6ce8\u4e8e\u8f93\u5165\u7684\u7279\u5b9a\u90e8\u5206\uff0c\u4ee5\u5e2e\u52a9\u751f\u6210\u6709\u7528\u7684\u7ffb\u8bd1\u3002 1.2 Sequence-to-sequence Basics \u5e8f\u5217\u5230\u5e8f\u5217\uff0c\u6216\u8005 Seq2Seq\uff0c\u662f\u4e00\u4e2a\u6bd4\u8f83\u65b0\u7684\u6a21\u578b\uff0c\u5728 2014 \u5e74\u88ab\u63d0\u51fa\u7528\u82f1\u8bed-\u6cd5\u8bed\u7ffb\u8bd1\u3002\u5728\u66f4\u9ad8\u7684\u5c42\u9762\u4e0a\uff0cSeq2Seq \u662f\u4e00\u4e2a\u6709\u4e24\u4e2aRNN\u7ec4\u6210\u7684\u7aef\u5230\u7aef\u6a21\u578b \u4e00\u4e2a encoder \u7f16\u7801\u5668\uff0c\u5c06\u6a21\u578b\u7684\u8f93\u5165\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\uff0c\u7136\u540e\u7f16\u7801\u56fa\u5b9a\u5927\u5c0f\u7684\u201c\u4e0a\u4e0b\u6587\u5411\u91cf\u201d\u3002 \u4e00\u4e2a decoder \u89e3\u7801\u5668\uff0c\u4f7f\u7528\u6765\u81ea\u7f16\u7801\u5668\u751f\u6210\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u4f5c\u4e3a\u4ece\u5176\u751f\u6210\u8f93\u51fa\u5e8f\u5217\u7684\u201c\u79cd\u5b50\u201d\u3002 \u56e0\u6b64\uff0cSeq2Seq \u6a21\u578b\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u7f16\u7801\u5668-\u89e3\u7801\u5668\u6a21\u578b\u201d\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u5206\u522b\u8ba8\u8bba\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u7ec6\u8282\u3002 1.3 Seq2Seq architecture - encoder \u7f16\u7801\u5668\u7f51\u7edc\u7684\u4f5c\u7528\u662f\u8bfb\u53d6\u8f93\u5165\u5e8f\u5217\u5230\u6211\u4eec\u7684 Seq2Seq \u6a21\u578b\u4e2d\uff0c\u7136\u540e\u5bf9\u8be5\u5e8f\u5217\u751f\u6210\u4e00\u4e2a\u56fa\u5b9a\u7ef4\u5ea6\u7684\u4e0a\u4e0b\u6587\u5411\u91cf \\(C\\) \u3002\u4e3a\u6b64\uff0c\u7f16\u7801\u5668\u4f7f\u7528\u4e00\u4e2a\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u5355\u5143\u2014\u2014\u4e00\u822c\u4f7f\u7528 LSTM\u2014\u2014\u6bcf\u4e2a\u65f6\u95f4\u6b65\u8bfb\u53d6\u4e00\u4e2a\u8f93\u5165\u5355\u8bcd\u3002\u5355\u5143\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u5c31\u662f \\(C\\) \u3002\u7136\u800c\uff0c\u56e0\u4e3a\u5c06\u4e00\u4e2a\u4efb\u610f\u957f\u5ea6\u5e8f\u5217\u538b\u7f29\u5230\u4e00\u4e2a\u5355\u4e00\u56fa\u5b9a\u5927\u5c0f\u7684\u5411\u91cf\u662f\u5f88\u56f0\u96be\u7684\uff08\u7279\u522b\u662f\u50cf\u7ffb\u8bd1\u8fd9\u6837\u7684\u56f0\u96be\u4efb\u52a1\uff09\uff0c\u7f16\u7801\u5668\u901a\u5e38\u7531\u5806\u53e0\u7684 LSTM \u7ec4\u6210\uff1a\u4e00\u7cfb\u5217 LSTM\u201c\u5c42\u201d\uff0c\u5176\u4e2d\u6bcf\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u5c42\u7684\u8f93\u5165\u5e8f\u5217\u3002LSTM \u6700\u540e\u4e00\u5c42\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u5c31\u662f \\(C\\) \u3002 Seq2Seq \u7f16\u7801\u5668\u901a\u5e38\u4f1a\u505a\u4e00\u4e9b\u5947\u602a\u7684\u4e8b\u60c5\uff1a\u5b83\u4eec\u5c06\u53cd\u5411\u5904\u7406\u8f93\u5165\u5e8f\u5217\u3002\u5b9e\u9645\u4e0a\u8fd9\u4e48\u5904\u7406\u662f\u6709\u76ee\u7684\u7684\u3002\u901a\u8fc7\u8fd9\u6837\u505a\uff0c\u7f16\u7801\u5668\u770b\u5230\u7684\u6700\u540e\u7684\u4fe1\u606f\uff08\u7c97\u7565\u5730\uff09\u5bf9\u5e94\u4e8e\u6a21\u578b\u8f93\u51fa\u7684\u5f00\u59cb\u4fe1\u606f\uff1b\u8fd9\u4f7f\u5f97\u89e3\u7801\u5668\u66f4\u5bb9\u6613\u5728\u8f93\u51fa\u4e0a\u201c\u5f00\u59cb\u201d\uff0c\u540c\u65f6\u89e3\u7801\u5668\u4e5f\u66f4\u5bb9\u6613\u5730\u4ea7\u751f\u9002\u5f53\u7684\u8f93\u51fa\u53e5\u5b50\u3002\u5728\u7ffb\u8bd1\u7684\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5141\u8bb8\u7f51\u7edc\u5728\u770b\u5230\u8f93\u5165\u7684\u524d\u51e0\u4e2a\u5355\u8bcd\u65f6\u5c31\u8fdb\u884c\u7ffb\u8bd1\uff1b\u4e00\u65e6\u524d\u51e0\u4e2a\u5355\u8bcd\u88ab\u6b63\u786e\u5730\u7ffb\u8bd1\uff0c\u6784\u5efa\u4e00\u4e2a\u6b63\u786e\u7684\u53e5\u5b50\u6bd4\u4ece\u5934\u5f00\u59cb\u66f4\u52a0\u5bb9\u6613\u3002 \u4e0b\u56fe\u662f\u4e00\u4e2a\u5c55\u793a\u7f16\u7801\u5668\u7684\u4f8b\u5b50\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u662f\u7ffb\u8bd1\u82f1\u8bed\u53e5\u5b50\u201cwhat is your name?\u201d\u6ce8\u610f\u8fd9\u91cc\u662f\u53cd\u5411\u8bfb\u53d6\u8f93\u5165\u5355\u8bcd\u7684\u3002\u6ce8\u610f\u7f51\u7edc\u662f\u5c55\u5f00\u7684\uff0c\u6bcf\u4e00\u5217\u662f\u4e00\u4e2a\u65f6\u95f4\u6b65\u548c\u6bcf\u4e00\u884c\u662f\u5355\u4e00\u5c42\uff0c\u6240\u4ee5\u6c34\u5e73\u7bad\u5934\u662f\u5bf9\u5e94\u9690\u85cf\u72b6\u6001\u548c\u5782\u76f4\u7bad\u5934\u662f LSTM \u7684\u8f93\u5165/\u8f93\u51fa\u3002 1.4 Seq2Seq architecture - decoder \u89e3\u7801\u5668\u4e5f\u662f\u4e00\u4e2a LSTM \u7f51\u7edc\uff0c\u4f46\u662f\u5b83\u7684\u4f7f\u7528\u6bd4\u7f16\u7801\u5668\u7f51\u7edc\u7565\u5fae\u590d\u6742\u3002\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u4f5c\u4e3a\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u4ee5\u201c\u77e5\u9053\u201d\u5230\u76ee\u524d\u4e3a\u6b62\u751f\u6210\u7684\u5355\u8bcd\u548c\u8f93\u5165\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u7f16\u7801\u5668\u4fdd\u6301\u201c\u5806\u53e0\u201d\u7684 LSTM \u67b6\u6784\uff0c\u4f46\u662f\u6211\u4eec\u5c06\u4f7f\u7528\u7f16\u7801\u5668\u751f\u6210\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u521d\u59cb\u5316\u7b2c\u4e00\u5c42\u7684\u9690\u85cf\u5c42\uff1b\u7136\u540e\u7f16\u7801\u5668\u5c06\u4f7f\u7528\u8f93\u5165\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u9010\u8bcd\u5730\u751f\u6210\u8f93\u51fa\u3002 \u4e00\u65e6\u7f16\u7801\u5668\u4f7f\u7528\u5176\u4e0a\u4e0b\u6587\u5411\u91cf\u8bbe\u7f6e\u597d\uff0c\u6211\u4eec\u5c06\u4f20\u5165\u4e00\u4e2a\u7279\u6b8a\u7684\u5b57\u7b26\u6765\u8868\u793a\u751f\u6210\u8f93\u51fa\u7684\u5f00\u59cb\u3002\u5728\u6587\u732e\u4e2d\uff0c\u4e00\u822c\u662f\u9644\u52a0\u5230\u8f93\u5165\u7ed3\u5c3e\u7684 \\(\\text{<EOS>}\\) \u6807\u8bb0\uff08\u5728\u8f93\u51fa\u7684\u7ed3\u5c3e\u4e5f\u6709\u8fd9\u6837\u7684\u6807\u8bb0\uff0c\u8868\u793a\u751f\u6210\u8f93\u51fa\u5b8c\u6210\uff09\u3002\u7136\u540e\u6211\u4eec\u7b2c\u4e00\u4e2a\u65f6\u95f4\u6b65\u5c06\u4e00\u5c42\u63a5\u4e00\u5c42\u5730\u8fd0\u884c\u8fd9\u4e2a\u4e09\u5c42\u7684 LSTM\uff0c\u5c06\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u653e\u5230 softmax \u51fd\u6570\u4e2d\u751f\u6210\u4e00\u4e2a\u8f93\u51fa\u5355\u8bcd\u3002\u7136\u540e\u6211\u4eec\u628a\u8fd9\u4e2a\u8bcd\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7b2c\u4e00\u5c42\uff0c\u91cd\u590d\u4e0a\u8ff0\u7684\u6d41\u7a0b\u751f\u6210\u8f93\u51fa\u5355\u8bcd\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u5982\u4f55\u4f7f LSTM \u50cf\u8bed\u8a00\u6a21\u578b\u4e00\u6837\u8d77\u4f5c\u7528\u3002 \u4e0b\u56fe\u662f\u4e00\u4e2a\u5c55\u793a\u89e3\u7801\u5668\u7684\u4f8b\u5b50\u3002\u8be5\u89e3\u7801\u5668\u6b63\u5728\u89e3\u7801\u201cwhat is your name?\u201d\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u6ce8\u610f\u5728\u751f\u6210\u7684\u5f00\u59cb\u4f7f\u7528\u4e86\u4e00\u4e2a\u7279\u6b8a\u7684\u7b26\u53f7\u201cGO\u201d\uff0c\u800c\u4e14\u89e3\u7801\u7684\u751f\u6210\u662f\u6309\u7167\u6b63\u5e38\u7684\u53e5\u5b50\u987a\u5e8f\uff0c\u800c\u4e0d\u662f\u53cd\u5411\u8bfb\u53d6\u7684\u8f93\u5165\u3002\u6ce8\u610f\u8f93\u5165\u548c\u8f93\u51fa\u957f\u5ea6\u4e0d\u9700\u8981\u76f8\u540c\u3002 \u4e00\u65e6\u6211\u4eec\u6709\u4e86\u8f93\u51fa\u5e8f\u5217\uff0c\u6211\u4eec\u5c31\u50cf\u5f80\u5e38\u4e00\u6837\u4f7f\u7528\u76f8\u540c\u7684\u5b66\u4e60\u7b56\u7565\u3002\u6211\u4eec\u5bf9\u9884\u6d4b\u5e8f\u5217\u5b9a\u4e49\u4e00\u4e2a\u4ea4\u53c9\u71b5\u635f\u5931\u51fd\u6570\uff0c\u7136\u540e\u7528\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u548c\u53cd\u5411\u4f20\u64ad\u7b97\u6cd5\u6765\u6700\u5c0f\u5316\u635f\u5931\u51fd\u6570\u3002\u540c\u65f6\u5bf9\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u8fdb\u884c\u8bad\u7ec3\uff0c\u4f7f\u5f97\u5b83\u4eec\u90fd\u5b66\u4e60\u5230\u76f8\u540c\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u8868\u793a\u3002 1.5 Recap & Basic NMT Example \u6ce8\u610f\u8f93\u5165\u548c\u8f93\u51fa\u7684\u957f\u5ea6\u4e4b\u95f4\u662f\u6ca1\u6709\u4efb\u4f55\u8054\u7cfb\u7684\uff1b\u6a21\u578b\u7684\u8f93\u5165\u53e5\u5b50\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u7684\uff0c\u6a21\u578b\u7684\u8f93\u51fa\u53e5\u5b50\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u7684\u3002\u7136\u800c\uff0c\u5df2\u7ecf\u77e5\u9053 Seq2Seq \u6a21\u578b\u5728\u8f93\u5165\u53e5\u5b50\u5f88\u957f\u7684\u60c5\u51b5\u4e0b\u6548\u679c\u4f1a\u53d8\u5f97\u5f88\u5dee\uff0cLSTM \u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u6709\u4e00\u7cfb\u5217\u7684\u9650\u5236\u3002 \u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b Seq2Seq \u6a21\u578b\u4e3a\u4e86\u5c06\u82f1\u8bed\u201cwhat is your name?\u201d\u7ffb\u8bd1\u4e3a\u6cd5\u8bed\u201ccomment t\u2019appelles tu\u201d\u7684\u4f8b\u5b50\u3002\u9996\u5148\uff0c\u6211\u4eec\u4ece\u56db\u4e2a one-hot \u5411\u91cf\u8f93\u5165\u5f00\u59cb\u3002\u8fd9\u4e9b\u8f93\u5165\u9700\u8981\u6216\u8005\u4e0d\u9700\u8981\uff08\u5bf9\u7ffb\u8bd1\u4efb\u52a1\uff0c\u4e00\u822c\u9700\u8981\uff09\u7528\u4e00\u4e2a\u7a20\u5bc6\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u7136\u540e\uff0c\u4e00\u4e2a\u5c42\u53e0 LSTM \u53cd\u5411\u8bfb\u53d6\u8f93\u5165\u5e8f\u5217\uff0c\u5c06\u5176\u7f16\u7801\u4e3a\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u662f\u4e00\u4e2a\u5411\u91cf\u7a7a\u95f4\u8868\u793a\uff0c\u8868\u793a\u201c\u8be2\u95ee\u67d0\u4eba\u4ed6\u4eec\u7684\u540d\u5b57\u201d\uff08\u8f93\u5165\u7684\u82f1\u6587\u53e5\u5b50\uff09\u7684\u610f\u601d\u3002\u6211\u4eec\u8fd0\u884c\u8fd9\u4e2a\u7f51\u7edc\u7684\u6bcf\u4e00\u5c42\u7684\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u5bf9\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u653e\u5230 softmax \u51fd\u6570\u4e2d\u8ba1\u7b97\uff0c\u5e76\u751f\u6210\u6211\u4eec\u7b2c\u4e00\u4e2a\u8f93\u51fa\u5355\u8bcd\u3002\u8fd9\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u7f51\u7edc\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u5165\uff0c\u5e76\u4e14\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u89e3\u7801\u53e5\u5b50\u201ccomment t\u2019appelles tu\u201d\u7684\u5269\u4f59\u90e8\u5206\u3002\u5728\u53cd\u5411\u4f20\u64ad\u671f\u95f4\uff0c\u7f16\u7801\u5668\u7684 LSTM \u7684\u6743\u503c\u88ab\u66f4\u65b0\uff0c\u4f7f\u5f97\u5b83\u80fd\u5b66\u4e60\u5230\u66f4\u597d\u7684\u53e5\u5b50\u5411\u91cf\u8868\u793a\uff0c\u540c\u65f6\u8bad\u7ec3\u89e3\u7801\u5668\u7684 LSTM \u6743\u503c\uff0c\u4f7f\u5f97\u5b83\u80fd\u751f\u6210\u4e0e\u4e0a\u4e0b\u6587\u5411\u91cf\u76f8\u5173\u7684\u6b63\u786e\u8bed\u6cd5\u7684\u53e5\u5b50\u3002 Encoder\uff1a\u9010\u5c42\u8fd0\u884c\uff0c\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u5c42\u7684\u8f93\u5165 Decoder\uff1a\u9010\u65f6\u95f4\u6b65\u8fd0\u884c\uff0c\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u662f\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7b2c\u4e00\u5c42\u7684\u8f93\u5165 1.6 Bidirectional RNNs \u4e4b\u524d\u8ba8\u8bba\u8fc7\u53e5\u5b50\u7684\u4f9d\u8d56\u4e0d\u4ec5\u4ec5\u5728\u4e00\u4e2a\u65b9\u5411\u7684\u4f20\u64ad\u8d77\u4f5c\u7528\uff1b\u4e00\u4e2a\u5355\u8bcd\u53ef\u4ee5\u4f9d\u8d56\u5b83\u524d\u9762\u6216\u8005\u540e\u9762\u7684\u5355\u8bcd\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u7684 Seq2Seq \u6a21\u578b\u5e76\u6ca1\u6709\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff1b\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u53ea\u662f\u8003\u8651\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u5355\u8bcd\u7684\u524d\u9762\u5355\u8bcd\u7684\u4fe1\u606f\uff08\u901a\u8fc7 LSTM \u7684\u9690\u85cf\u72b6\u6001\uff09\u3002\u5bf9\u4e8e NMT\uff0c\u6211\u4eec\u9700\u8981\u80fd\u591f\u6709\u6548\u5730\u5bf9\u4efb\u610f\u8f93\u5165\u8fdb\u884c\u7f16\u7801\uff0c\u800c\u4e0d\u7ba1\u4e0e\u8f93\u5165\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u7684\u65b9\u5411\uff0c\u56e0\u6b64\u8fd9\u624d\u80fd\u591f\u8ba9\u83b7\u5f97\u7684\u4fe1\u606f\u4e0d\u4f1a\u51cf\u5c11\u3002 \u53cc\u5411RNN\u901a\u8fc7\u904d\u5386\u5e8f\u5217\u7684\u4e24\u4e2a\u65b9\u5411\u5e76\u8fde\u63a5\u6240\u5f97\u5230\u7684\u8f93\u51fa\uff08\u795e\u7ecf\u5143\u8f93\u51fa\u548c\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u90fd\u8fdb\u884c\u8fde\u63a5\uff09\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5bf9\u4e8e\u6bcf\u4e2a RNN \u795e\u7ecf\u5143\uff0c\u6211\u4eec\u7b80\u5355\u5730\u6dfb\u52a0\u53e6\u4e00\u4e2a\u795e\u7ecf\u5143\uff0c\u4f46\u662f\u4ee5\u76f8\u53cd\u7684\u65b9\u5411\u5411\u5176\u653e\u5165\u8f93\u5165\uff1b\u5bf9\u5e94\u7b2c t \u4e2a\u5355\u8bcd\u7684\u8f93\u51fa \\(o_t\\) \u662f\u8fde\u63a5\u4e86\u5411\u91cf \\(\\left[o_{t}^{(f)} \\quad o_{t}^{(b)}\\right]\\) \uff0c\u5176\u4e2d \\(o_{t}^{(f)}\\) \u662f\u8bcd t \u5728\u6b63\u5411\u7684 RNN \u7684\u8f93\u51fa\uff0c \\(o_{t}^{(b)}\\) \u662f\u8bcd t \u5728\u53cd\u5411\u7684 RNN \u7684\u8f93\u51fa\u3002\u7c7b\u4f3c\u5730\uff0c\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u662f \\(\\left[h^{(f)} \\quad h^{(b)}\\right]\\) \uff0c\u5176\u4e2d \\(h^{(f)}\\) \u662f\u6b63\u5411\u7684 RNN \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u548c \\(h^{(b)}\\) \u662f\u53cd\u5411\u7684 RNN \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u3002\u4e0b\u56fe\u662f\u4e00\u4e2a\u53cc\u5411 LSTM \u89e3\u7801\u5668\u7684\u4f8b\u5b50\u3002","title":"1 Neural Machine Translation with Seq2Seq"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#2-attention-mechanism","text":"2.1 Motivation \u5f53\u4f60\u542c\u5230\u53e5\u5b50\u201cthe ball is on the \ufb01eld\u201d\uff0c\u4f60\u4e0d\u4f1a\u8ba4\u4e3a\u8fd9 6 \u4e2a\u5355\u8bcd\u90fd\u4e00\u6837\u91cd\u8981\u3002\u4f60\u9996\u5148\u4f1a\u6ce8\u610f\u5230\u5355\u8bcd\u201cball\u201d\uff0c\u201con\u201d \u548c \u201c\ufb01eld\u201d\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5355\u8bcd\u4f60\u662f\u89c9\u5f97\u6700\u201c\u91cd\u8981\u201d\u7684\u3002\u7c7b\u4f3c\u7684\uff0cBahdanau \u7b49\u4eba\u6ce8\u610f\u5230\u4f7f\u7528 RNN \u7684\u6700\u7ec8\u72b6\u6001\u4f5c\u4e3a Seq2Seq \u6a21\u578b\u7684\u5355\u4e00\u201c\u4e0a\u4e0b\u6587\u5411\u91cf\u201d\u7684\u7f3a\u70b9\uff1a\u4e00\u822c\u800c\u8a00\uff0c\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u5177\u6709\u4e0d\u540c\u7684\u91cd\u8981\u7a0b\u5ea6\u3002\u518d\u8005\uff0c\u6b64\u5916\uff0c\u8f93\u51fa\u7684\u4e0d\u540c\u90e8\u5206\u751a\u81f3\u53ef\u4ee5\u8003\u8651\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u662f\u201c\u91cd\u8981\u201d\u7684\u3002\u4f8b\u5982\uff0c\u5728\u7ffb\u8bd1\u4efb\u52a1\u4e2d\uff0c\u8f93\u51fa\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u662f\u4e00\u822c\u662f\u57fa\u4e8e\u8f93\u5165\u7684\u524d\u51e0\u4e2a\u8bcd\uff0c\u8f93\u51fa\u7684\u6700\u540e\u51e0\u4e2a\u8bcd\u53ef\u80fd\u57fa\u4e8e\u8f93\u5165\u7684\u51e0\u4e2a\u8bcd\u3002 \u6ce8\u610f\u673a\u5236\u5229\u7528\u8fd9\u4e00\u89c2\u5bdf\u7ed3\u679c\uff0c\u4e3a\u89e3\u7801\u5668\u7f51\u7edc\u63d0\u4f9b\u4e86\u5728\u6bcf\u4e2a\u89e3\u7801\u6b65\u9aa4\u67e5\u770b\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u529f\u80fd\uff1b\u7136\u540e\u89e3\u7801\u5668\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\u51b3\u5b9a\u54ea\u4e9b\u8f93\u5165\u5355\u8bcd\u662f\u91cd\u8981\u7684\u3002\u6709\u5f88\u591a\u7c7b\u578b\u7684\u7f16\u7801\u5668\u673a\u5236\uff0c\u4f46\u662f\u6211\u4eec\u5c06\u8ba8\u8bba\u7531 Bahdanau \u63d0\u51fa\u7684\u673a\u5236\u3002 2.2 Bahdanau et al. NMT model \u518d\u56de\u987e\u4e00\u4e0b\u6211\u4eec\u7684 Seq2Seq \u6a21\u578b\u662f\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u4e00\u4e2a\u7f16\u7801\u5668\u5c06\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7f16\u7801\uff0c\u4ee5\u53ca\u5229\u7528\u89e3\u7801\u5668\u6240\u63d0\u53d6\u7684\u4fe1\u606f\u751f\u6210\u7ffb\u8bd1\u53e5\u5b50\u7684\u89e3\u7801\u5668\u3002\u57fa\u672c\u4e0a\uff0c\u6211\u4eec\u7684\u8f93\u5165\u53e5\u5b50\u662f\u4e00\u4e2a\u6211\u4eec\u60f3\u8981\u7ffb\u8bd1\u7684\u8bcd\u5e8f\u5217 \\(x_{1}, \\ldots, x_{n}\\) \uff0c\u6211\u4eec\u7684\u7ffb\u8bd1\u8fc7\u7ed3\u679c\uff08\u76ee\u6807\u53e5\u5b50\uff09\u662f\u4e00\u4e2a\u8bcd\u5e8f\u5217 \\(y_{1}, \\ldots, y_{m}\\) \u3002 Encoder \u4ee4 \\(\\left(h_{1}, \\ldots, h_{n}\\right)\\) \u662f\u8f93\u5165\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf\u8868\u793a\u3002\u8fd9\u4e9b\u5411\u91cf\u662f\u4f8b\u5982 bi-LSTM \u7684\u8f93\u51fa\uff0c\u5e76\u4e14\u6355\u83b7\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u3002 Decoder \u6211\u4eec\u60f3\u4f7f\u7528\u4ee5\u4e0b\u5f62\u5f0f\u7684\u9012\u5f52\u516c\u5f0f\u8ba1\u7b97\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(s_i\\) \\[ s_{i}=f\\left(s_{i-1}, y_{i-1}, c_{i}\\right) \\] \u5176\u4e2d \\(s_{i-1}\\) \u662f\u524d\u9762\u7684\u9690\u85cf\u5411\u91cf\uff0c \\(y_{i-1}\\) \u662f\u524d\u9762\u65f6\u95f4\u6b65\u751f\u6210\u7684\u5355\u8bcd\uff0c\u548c \\(c_i\\) \u662f\u4ece\u539f\u59cb\u53e5\u5b50\u6355\u83b7\u4e0e\u89e3\u7801\u5668\u7684\u65f6\u95f4\u6b65 \\(i\\) \u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002 \u4e0a\u4e0b\u6587\u5411\u91cf \\(c_i\\) \u6355\u83b7\u5bf9\u7b2c \\(i\\) \u4e2a\u89e3\u7801\u65f6\u95f4\u6b65\u7684\u76f8\u5173\u4fe1\u606f\uff08\u4e0e\u6807\u51c6\u7684\u7684 Seq2Seq \u6a21\u578b\u53ea\u6709\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u4e0d\u540c\uff09\u3002\u5bf9\u6bcf\u4e2a\u539f\u59cb\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf \\(h_j\\) \uff0c\u8ba1\u7b97\u5206\u6570 \\[ e_{i, j}=a\\left(s_{i-1}, h_{j}\\right) \\] \u5176\u4e2d \\(a\\) \u662f\u5728 \\(\\mathbb{R}\\) \u4e2d\u5177\u6709\u503c\u7684\u4efb\u610f\u51fd\u6570\uff0c\u4f8b\u5982\u662f\u4e00\u4e2a\u5355\u5c42\u7684\u5168\u8fde\u63a5\u795e\u7ecf\u7f51\u7edc\u3002\u7136\u540e\uff0c\u6211\u4eec\u5f97\u5230\u4e00\u7cfb\u5217\u6807\u91cf\u503c \\(e_{i, 1}, \\ldots, e_{i, n}\\) \u3002\u7136\u540e\uff0c\u4f7f\u7528 softmax \u5c42\u5bf9\u8fd9\u4e9b\u5206\u6570\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5f97\u5230\u5411\u91cf \\(\\alpha_{i}=\\left(\\alpha_{i, 1}, \\ldots, \\alpha_{i, n}\\right)\\) \\[ \\alpha_{i, j}=\\frac{\\exp \\left(e_{i, j}\\right)}{\\sum_{k=1}^{n} \\exp \\left(e_{i, k}\\right)} \\] \u7136\u540e\uff0c\u8ba1\u7b97\u539f\u59cb\u53e5\u5b50\u7684\u9690\u85cf\u5411\u91cf\u4e0e\u6ce8\u610f\u529b\u5411\u91cf\u7684\u52a0\u6743\u5e73\u5747\u503c\u4f5c\u4e3a\u4e0a\u4e0b\u5411\u91cf \\(c_i\\) \\[ c_{i}=\\sum_{j=1}^{n} \\alpha_{i, j} h_{j} \\] \u76f4\u89c2\u4e0a\u770b\uff0c\u8be5\u5411\u91cf\u4ece\u539f\u59cb\u53e5\u5b50\u7684\u89e3\u7801\u5668\u7684\u7b2c \\(i\\) \u4e2a\u65f6\u95f4\u6b65\u4e2d\u6355\u83b7\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002 2.3 Connection with translation alignment \u57fa\u4e8e\u6ce8\u610f\u529b\u7684\u6a21\u578b\u4e3a\u8f93\u51fa\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u5206\u914d\u5bf9\u8f93\u5165\u7684\u4e0d\u540c\u90e8\u5206\u7684\u663e\u7740\u6027\uff08\u201c\u91cd\u8981\u6027\u201d\uff09\u3002\u5728\u7ffb\u8bd1\u4efb\u52a1\u4e2d\uff0c\u6ce8\u610f\u529b\u53ef\u4ee5\u8ba4\u4e3a\u662f\u201c\u5bf9\u9f50\u201d\u3002Bahdanau \u7b49\u4eba\u8ba4\u4e3a\u5728\u89e3\u7801\u7684\u65f6\u95f4\u6b65 \\(i\\) \u4e2d\u7684\u6ce8\u610f\u529b\u5206\u6570 \\(\\alpha_{ij}\\) \u8868\u793a\u6e90\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\u76ee\u6807\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd \\(i\\) \u3002\u6ce8\u610f\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6ce8\u610f\u529b\u5206\u6570\u6765\u6784\u5efa\u4e00\u4e2a\u5bf9\u9f50\u8868\u2014\u2014\u8fd9\u4e2a\u8868\u662f\u5c06\u6e90\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u6620\u5c04\u5230\u76ee\u6807\u53e5\u5b50\u4e2d\u7684\u76f8\u5e94\u5355\u8bcd\u2014\u2014\u57fa\u4e8e\u4ece\u6211\u4eec\u4ece Seq2Seq NMT \u7cfb\u7edf\u4e2d\u5b66\u4e60\u5230\u7684\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u3002\u4e0b\u56fe\u662f\u4e00\u4e2a\u5bf9\u9f50\u8868\u7684\u4f8b\u5b50\uff1a 2.4 Performance on long sentences \u57fa\u4e8e\u6ce8\u610f\u529b\u6a21\u578b\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u80fd\u591f\u6709\u6548\u5730\u7ffb\u8bd1\u957f\u53e5\u3002\u5f53\u53e5\u5b50\u7684\u8f93\u5165\u957f\u5ea6\u53d8\u5927\u65f6\uff0c\u6a21\u578b\u5982\u679c\u53ea\u4f7f\u7528\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u8868\u793a\u800c\u4e0d\u4f7f\u7528\u6ce8\u610f\u673a\u5236\uff0c\u8fd9\u4f1a\u4e22\u5931\u4fe1\u606f\u548c\u964d\u4f4e\u51c6\u786e\u5ea6\u3002\u6ce8\u610f\u529b\u673a\u5236\u662f\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5e76\u4e14\u73b0\u5728\u5f88\u591a\u5b9e\u9a8c\u4e5f\u8bc1\u5b9e\u4e86\u786e\u5b9e\u5982\u6b64\u3002\u4e0b\u56fe\u662f\u957f\u53e5\u5b50\u5728\u4e0d\u540c\u7684 NMT \u6a21\u578b\u4e2d\u7684\u8868\u73b0","title":"2 Attention Mechanism"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#3-other-models","text":"3.1 Luong et al. NMT model Luong \u7b49\u4eba\u5728\u8bba\u6587 \u300aEffective Approaches to Attention-based Neural Machine Translation\u300b \u63d0\u51fa\u4e86\u4e00\u4e2a\u6ce8\u610f\u529b\u673a\u5236\u6a21\u578b\u7684\u53d8\u4f53\uff0c\u662f\u7531\u4e24\u4e2a\u4e0d\u540c\u7684\u6ce8\u610f\u529b\u673a\u5236\u7ec4\u6210\u3002 Global attention \uff1a\u6211\u4eec\u8fd0\u884c\u7b80\u5355\u7684 Seq2Seq NMT\u3002\u6211\u4eec\u79f0\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(h_{1}, \\ldots, h_{n}\\) \uff0c\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(\\overline{h}_{1}, \\ldots, \\overline{h}_{n}\\) \u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a \\(\\overline{h}_{i}\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u7f16\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001\u7684\u6ce8\u610f\u529b\u5411\u91cf\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u5176\u4e2d\u4e00\u4e2a\u5f97\u5206\u51fd\u6570\uff1a \\[ \\operatorname{score}\\left(h_{i}, \\overline{h}_{j}\\right)=\\left\\{\\begin{array}{l}{h_{i}^{T} \\overline{h}_{j}} \\\\ {h_{i}^{T} W \\overline{h}_{j} \\quad \\in \\mathbb{R}} \\\\ {W\\left[h_{i}, \\overline{h}_{j}\\right]}\\end{array}\\right. \\] \u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2a\u5206\u6570\u7684\u5411\u91cf\uff0c\u7136\u540e\u53ef\u4ee5\u7528 Bahdanau \u7b49\u4eba\u63d0\u51fa\u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u9996\u5148\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a softmax \u5c42\u6765\u5bf9\u5206\u6570\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u5f97\u5230\u5411\u91cf \\(\\alpha_{i}=\\left(\\alpha_{i, 1}, \\ldots, \\alpha_{i, n}\\right)\\) \\[ \\alpha_{i, j}=\\frac{\\exp \\left(\\operatorname{score}\\left(h_{j}, \\overline{h}_{i}\\right)\\right)}{\\sum_{k=1}^{n} \\exp \\left(\\operatorname{score}\\left(h_{k}, \\overline{h}_{i}\\right)\\right)} \\] \\[ c_{i}=\\sum_{j=1}^{n} \\alpha_{i, j} h_{j} \\] \u7136\u540e\u518d\u8ba1\u7b97\u4e0a\u4e0b\u6587\u5411\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u6587\u5411\u91cf\u548c\u9690\u85cf\u72b6\u6001\u5bf9\u89e3\u7801\u5668\u7684\u7b2c \\(i\\) \u4e2a\u65f6\u95f4\u6b65\u8ba1\u7b97\u4e00\u4e2a\u65b0\u7684\u5411\u91cf \\[ \\tilde{h}_{i}=f\\left(\\left[\\overline{h}_{i}, c_{i}\\right]\\right) \\] \u6700\u540e\u4e00\u6b65\u662f\u4f7f\u7528 \\(\\tilde{h}_{i}\\) \u6765\u5bf9\u89e3\u7801\u5668\u8fdb\u884c\u6700\u7ec8\u9884\u6d4b\u3002\u4e3a\u4e86\u89e3\u51b3\u8986\u76d6\u95ee\u9898\uff0cLuong \u7b49\u4eba\u4f7f\u7528\u4e86\u4e00\u4e2a input-feeding \u65b9\u6cd5\u3002\u6ce8\u610f\u529b\u52a0\u6743\u7684\u5411\u91cf \\(\\tilde{h}_{i}\\) \u662f\u4f5c\u4e3a\u89e3\u7801\u5668\u7684\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u6700\u7ec8\u9884\u6d4b\u3002\u8fd9\u7c7b\u4f3c\u4e8e Bahdanau \u7b49\u4eba\u63d0\u51fa\u7684\u65b9\u6cd5\uff0c\u4ed6\u4eec\u4f7f\u7528\u4e0a\u4e0b\u6587\u5411\u91cf\u6765\u8ba1\u7b97\u89e3\u7801\u5668\u7684\u9690\u85cf\u5411\u91cf\u3002 Local attention \uff1a\u8be5\u6a21\u578b\u9884\u6d4b\u8f93\u5165\u5e8f\u5217\u4e2d\u7684\u5bf9\u9f50\u4f4d\u7f6e\u3002\u7136\u540e\uff0c\u5b83\u4f7f\u7528\u4ee5\u6b64\u4f4d\u7f6e\u4e3a\u4e2d\u5fc3\u7684\u7a97\u53e3\u6765\u8ba1\u7b97\u4e0a\u4e0b\u6587\u5411\u91cf\u3002\u8fd9\u4e2a\u8ba1\u7b97\u8017\u8d39\u7684\u8ba1\u7b97\u8d44\u6e90\u662f\u6052\u5b9a\u7684\uff0c\u4e0d\u4f1a\u968f\u7740\u53e5\u5b50\u7684\u957f\u5ea6\u800c\u66b4\u589e\u3002 \u6709\u5f88\u591a\u65b9\u6cd5\u6765\u4f7f\u7528\u6ce8\u610f\u529b\u673a\u5236 3.2 Google\u2019s new NMT \u7b80\u800c\u8a00\u4e4b\uff0cGoogle \u6700\u8fd1\u901a\u8fc7\u63d0\u5347\u81ea\u5df1\u7684\u7ffb\u8bd1\u7cfb\u7edf\u4e3a NMT \u505a\u51fa\u4e86\u91cd\u5927\u7a81\u7834\u3002\u4e0d\u662f\u4e3a\u4ed6\u4eec\u652f\u6301\u7ffb\u8bd1\u7684\u6bcf\u4e00\u79cd\u8bed\u8a00\u7ef4\u62a4\u4e00\u4e2a\u5b8c\u6574\u7684 Seq2Seq \u6a21\u578b\u2014\u2014\u6bcf\u79cd\u8bed\u8a00\u4e0d\u662f\u5355\u72ec\u8fdb\u884c\u8bad\u7ec3\uff0c\u800c\u662f\u6784\u5efa\u4e00\u4e2a\u5355\u72ec\u7cfb\u7edf\u53ef\u4ee5\u7ffb\u8bd1\u4efb\u610f\u4e24\u79cd\u8bed\u8a00\uff0c\u8fd9\u5728\u6570\u636e\u548c\u8ba1\u7b97\u65f6\u95f4\u65b9\u9762\u90fd\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6210\u5c31\u3002\u8fd9\u662f\u4e00\u4e2a Seq2Seq \u6a21\u578b\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217\u548c\u4e00\u4e2a\u6307\u5b9a\u8981\u7ffb\u8bd1\u7684\u8bed\u8a00\u7684\u7b26\u53f7\u4f5c\u4e3a\u8f93\u5165\u3002\u8be5\u6a21\u578b\u4f7f\u7528\u5171\u4eab\u53c2\u6570\u6765\u7ffb\u8bd1\u4e3a\u4efb\u4f55\u76ee\u6807\u8bed\u8a00\u3002 \u8fd9\u4e2a\u65b0\u7684\u7684\u591a\u8bed\u8a00\u6a21\u5f0f\u4e0d\u4ec5\u6539\u5584\u4e86\u4ed6\u4eec\u7684\u7ffb\u8bd1\u8868\u73b0\uff0c\u8fd8\u80fd\u591f\u201c\u96f6\u6570\u636e\u7ffb\u8bd1\u201d\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u7ffb\u8bd1\u7684\u8bad\u7ec3\u6570\u636e\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u4e24\u79cd\u8bed\u8a00\u4e4b\u95f4\u8fdb\u884c\u7ffb\u8bd1\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u5982\u679c\u4ec5\u6709\u65e5\u8bed-\u82f1\u8bed\u7684\u7ffb\u8bd1\u6570\u636e\u548c\u97e9\u8bed-\u82f1\u8bed\u7684\u7ffb\u8bd1\u6570\u636e\uff0cGoogle \u56e2\u961f\u53d1\u73b0\u591a\u8bed\u8a00 NMT \u7cfb\u7edf\u5bf9\u8fd9\u4e9b\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\u540e\u7684\u5b9e\u9645\u4e0a\u53ef\u4ee5\u4ea7\u751f\u5408\u7406\u7684\u65e5\u8bed-\u97e9\u8bed\u7ffb\u8bd1\u3002\u8fd9\u4e2a\u53d1\u73b0\u7684\u91cd\u8981\u610f\u4e49\u5728\u4e8e\uff0c\u89e3\u7801\u8fc7\u7a0b\u7684\u90e8\u5206\u5e76\u4e0d\u662f\u7279\u5b9a\u4e8e\u8bed\u8a00\u7684\uff0c\u800c\u4e14\u8be5\u6a21\u578b\u5b9e\u9645\u4e0a\u7ef4\u6301\u4e00\u4e2a\u4e86 \u72ec\u7acb\u4e8e\u6240\u6d89\u53ca\u7684\u5b9e\u9645\u8bed\u8a00\u7684\u8f93\u5165/\u8f93\u51fa\u53e5\u5b50\u7684\u5185\u90e8\u8868\u793a \u3002 3.3 More advanced papers using attention Show, Attend and Tell: Neural Image Caption Generation with Visual Attention \u8fd9\u7bc7\u8bba\u6587\u662f\u63d0\u51fa\u5355\u8bcd/\u56fe\u50cf\u5bf9\u9f50\u7684\u65b9\u6cd5 Modeling Coverage for Neural Machine Translation \u4ed6\u4eec\u7684\u6a21\u578b\u4f7f\u7528\u8986\u76d6\u5411\u91cf\uff0c\u8003\u8651\u5230\u4f7f\u7528\u6ce8\u610f\u529b\u7684\u5386\u53f2\u4ee5\u5e2e\u52a9\u8ba1\u7b97\u5c06\u6765\u7684\u6ce8\u610f\u529b\u3002 Incorporating Structural Alignment Biases into an Attentional Neural Translation Model \u8fd9\u7bc7\u8bba\u6587\u901a\u8fc7\u5f15\u5165\u5176\u4ed6\u4f20\u7edf\u8bed\u8a00\u5b66\u7684\u601d\u60f3\u6765\u63d0\u9ad8\u6ce8\u610f\u529b\u8868\u73b0\u3002","title":"3 Other Models"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#4-sequence-model-decoders","text":"\u673a\u5668\u7ffb\u8bd1\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u6765\u81ea\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1\u3002\u8003\u8651\u4e00\u4e2a\u8ba1\u7b97\u7ed9\u5b9a\u539f\u59cb\u53e5\u5b50 \\(s\\) \u7684\u7ffb\u8bd1 \\(\\overline{s}\\) \u7684\u6982\u7387\u6a21\u578b \\(P(\\overline{s} | s)\\) \u3002\u6211\u4eec\u60f3\u4ece\u8fd9\u4e2a\u6982\u7387\u6a21\u578b\u4e2d\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u7ffb\u8bd1 \\(\\overline{s} *\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u5e0c\u671b \\[ \\overline{s} *=\\arg \\max _{\\overline{s}} P(\\overline{s} | s) \\] \u56e0\u4e3a\u641c\u7d22\u7684\u7a7a\u95f4\u53ef\u80fd\u4f1a\u975e\u5e38\u7684\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7f29\u5c0f\u5b83\u7684\u5927\u5c0f\u3002\u4ee5\u4e0b\u662f\u5e8f\u5217\u6a21\u578b\u89e3\u7801\u5668\u7684\u5217\u8868\uff08\u5305\u542b\u597d\u7684\u548c\u4e0d\u597d\u7684\uff09\u3002 Exhaustive search \uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u601d\u8def\u3002\u5bf9\u6bcf\u4e2a\u53ef\u80fd\u7684\u5e8f\u5217\u8ba1\u7b97\u5176\u6982\u7387\uff0c\u7136\u540e\u6211\u4eec\u4ece\u4e2d\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217\u3002\u4f46\u662f\uff0c\u641c\u7d22\u7a7a\u95f4\u5bf9\u8f93\u5165\u7684\u5927\u5c0f\u662f\u5448\u6307\u6570\u7ea7\u589e\u957f\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b9\u6cd5\u5728\u5f88\u96be\u6269\u5c55\u5230\u5927\u89c4\u6a21\u8f93\u51fa\u7684\u60c5\u51b5\u3002\u5728\u8fd9\u4e2a\u60c5\u51b5\u7684\u89e3\u7801\u8fc7\u7a0b\u662f NP \u96be\u5ea6\u7684\u95ee\u9898\u3002 Ancestral sampling \uff1a\u5728\u65f6\u95f4\u6b65 \\(t\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u57fa\u4e8e\u65f6\u95f4\u6b65 \\(t\\) \u524d\u9762\u7684\u5355\u8bcd\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\uff0c\u5e76\u4ece\u8be5\u5206\u5e03\u4e2d\u8fdb\u884c\u62bd\u6837\u5f97\u5230 \\(x_t\\) \u3002 \\[ x_{t} \\sim \\mathbb{P}\\left(x_{l} | x_{1}, \\ldots, x_{n}\\right) \\] \u7406\u8bba\u4e0a\u8fd9\u4e2a\u6280\u672f\u662f\u6709\u6548\u7684\u6e10\u8fdb\u7cbe\u786e\u7684\u3002\u7136\u800c\u5728\u5b9e\u9645\u4e2d\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8868\u73b0\u5f88\u5dee\u548c\u4f1a\u51fa\u73b0\u9ad8\u65b9\u5dee\u3002 Greedy Search \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u9009\u62e9\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff0c\u6362\u800c\u8a00\u4e4b \\[ x_{l}=\\operatorname{argmax}_{x_{l}} \\mathbb{P}\\left(\\tilde{x}_{t} | x_{1}, \\ldots, x_{n}\\right) \\] \u8fd9\u79cd\u6280\u672f\u662f\u6709\u6548\u7684\uff0c\u4f46\u662f\u5b83\u63a2\u7d22\u4e86\u4e00\u5c0f\u90e8\u5206\u7684\u641c\u7d22\u7a7a\u95f4\uff0c\u5982\u679c\u6211\u4eec\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u4e2d\u51fa\u73b0\u4e00\u4e2a\u9519\u8bef\uff0c\u90a3\u4e48\u5269\u4e0b\u7684\u53e5\u5b50\u751f\u6210\u53ef\u80fd\u4f1a\u53d7\u5230\u5f88\u5927\u7684\u5f71\u54cd\u3002 Beam search \uff1a\u8fd9\u4e2a\u65b9\u6cd5\u662f\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4fdd\u6301\u7740 K \u4e2a\u5019\u9009\u5355\u8bcd \\[ \\mathcal{H}_{t}=\\left\\{\\left(x_{1}^{1}, \\ldots, x_{t}^{1}\\right), \\ldots,\\left(x_{1}^{K}, \\ldots, x_{t}^{K}\\right)\\right\\} \\] \u901a\u8fc7\u6269\u5c55 \\(\\mathcal{H}_{t}\\) \u5e76\u4fdd\u6301 K \u4e2a\u6700\u597d\u7684\u5019\u9009\u5355\u8bcd\u6765\u8ba1\u7b97 \\(\\mathcal{H}_{t+1}\\) \u3002\u6362\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u5728\u4e0b\u9762\u7684\u96c6\u5408\u4e2d\u9009\u62e9\u6700\u597d\u7684 K \u4e2a\u5e8f\u5217 \\[ \\tilde{\\mathcal{H}}_{t+1}=\\bigcup_{k=1}^{K} \\mathcal{H}_{t+1}^{\\tilde{k}} \\] \\[ \\mathcal{H}_{t+1}^{\\tilde{k}}=\\left\\{\\left(x_{1}^{1}, \\ldots, x_{t}^{1}, v_{1}\\right), \\ldots,\\left(x_{1}^{K}, \\ldots, x_{t}^{K}, v_{|V|}\\right)\\right\\} \\] \u968f\u7740\u589e\u52a0 K \u7684\u589e\u52a0\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u51c6\u786e\u7387\u548c\u6e10\u8fd1\u5730\u7cbe\u786e\u3002\u7136\u800c\uff0c\u63d0\u9ad8\u5e76\u4e0d\u5177\u6709\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8bbe\u7f6e\u4e00\u4e2a K\uff0c\u65e2\u8981\u8003\u8651\u5408\u7406\u6027\u80fd\u53c8\u8981\u8003\u8651\u8ba1\u7b97\u6548\u7387\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0cbeam search \u662f\u5728 NMT \u4e2d\u6700\u5e38\u89c1\u7684\u65b9\u6cd5\u3002","title":"4 Sequence model decoders"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#5-evaluation-of-machine-translation-systems","text":"\u73b0\u5728\u6211\u4eec\u77e5\u9053\u6709\u5173\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e00\u4e9b\u8bc4\u4f30\u8fd9\u4e9b\u6a21\u578b\u7684\u65b9\u6cd5\u3002\u8bc4\u4f30\u7ffb\u8bd1\u8d28\u91cf\u662f\u4e00\u4e2a\u975e\u5e38\u68d8\u624b\u548c\u4e3b\u89c2\u7684\u4efb\u52a1\u3002\u5728\u73b0\u5b9e\u751f\u6d3b\u4e2d\uff0c\u5982\u679c\u60a8\u7ed9\u5341\u4e2a\u4e0d\u540c\u7684\u7ffb\u8bd1\u8005\u63d0\u4f9b\u4e00\u6bb5\u76f8\u540c\u7684\u6587\u5b57\uff0c\u60a8\u5c06\u83b7\u5f97\u5341\u4e2a\u4e0d\u540c\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u7ffb\u8bd1\u5728\u5b9e\u8df5\u4e2d\u662f\u4e0d\u5b8c\u7f8e\u548c\u6709\u566a\u58f0\u7684\u3002\u4ed6\u4eec\u5173\u6ce8\u4e0d\u540c\u7684\u4fe1\u606f\uff0c\u5f3a\u8c03\u4e0d\u540c\u7684\u542b\u4e49\u3002\u4e00\u79cd\u7ffb\u8bd1\u53ef\u4ee5\u4fdd\u5b58\u9690\u55bb\u548c\u957f\u671f\u601d\u60f3\u7684\u5b8c\u6574\u6027\uff0c\u800c\u800c\u53e6\u4e00\u79cd\u7ffb\u8bd1\u53ef\u4ee5\u66f4\u5fe0\u5b9e\u5730\u91cd\u6784\u53e5\u6cd5\u548c\u98ce\u683c\uff0c\u5c1d\u8bd5\u9010\u5b57\u7ffb\u8bd1\u3002\u6ce8\u610f\uff0c\u8fd9\u79cd\u7075\u6d3b\u6027\u5e76\u4e0d\u662f\u8d1f\u62c5\uff1b\u8fd9\u8bc1\u660e\u4e86\u8bed\u8a00\u7684\u590d\u6742\u6027\u548c\u6211\u4eec\u89e3\u7801\u548c\u89e3\u91ca\u610f\u601d\u7684\u80fd\u529b\uff0c\u4e5f\u662f\u6211\u4eec\u4ea4\u6d41\u80fd\u529b\u7684\u4e00\u4e2a\u5947\u5999\u65b9\u9762\u3002 \u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0c\u6a21\u578b\u7684\u76ee\u6807\u635f\u5931\u51fd\u6570\u4e0e\u6211\u4eec\u5c06\u8981\u8ba8\u8bba\u7684\u8bc4\u4f30\u65b9\u6cd5\u4e4b\u95f4\u5b58\u5728\u5dee\u5f02\u3002\u7531\u4e8e\u635f\u5931\u51fd\u6570\u672c\u8d28\u4e0a\u662f\u5bf9\u6a21\u578b\u9884\u6d4b\u7684\u4e00\u4e2a\u8bc4\u4f30\uff0c\u6240\u4ee5\u5f88\u5bb9\u6613\u6df7\u6dc6\u8fd9\u4e24\u4e2a\u6982\u5ff5\u3002\u524d\u9762\u7684\u8bc4\u4f30\u6307\u6807\u9488\u5bf9\u4e00\u4e9b\u5ea6\u91cf\u6807\u51c6\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6700\u7ec8\u7684\u3001\u603b\u7ed3\u6027\u7684\u8bc4\u4ef7\uff0c\u6ca1\u6709\u4e00\u4e2a\u5ea6\u91cf\u65b9\u6cd5\u4f18\u4e8e\u6240\u6709\u5176\u4ed6\u65b9\u6cd5\uff0c\u867d\u7136\u6709\u4e9b\u5177\u6709\u660e\u663e\u7684\u4f18\u52bf\u548c\u591a\u6570\u504f\u597d\u3002 \u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u7ffb\u8bd1\u7684\u8d28\u91cf\u5df2\u7ecf\u81ea\u6210\u4f53\u7cfb\u4e3a\u4e00\u4e2a\u7814\u7a76\u9886\u57df\uff0c\u5df2\u7ecf\u63d0\u51fa\u4e86\u8bb8\u591a\u8bc4\u4f30\u7684\u65b9\u6cd5 TER, METEOR, MaxSim, SEPIA \u548c RTE-MT \u3002\u6211\u4eec\u5c06\u91cd\u70b9\u5173\u6ce8\u4e24\u4e2a\u57fa\u51c6\u8bc4\u4f30\u65b9\u6cd5\u548c BLEU\u3002 5.1 Human Evaluation \u7b2c\u4e00\u4e2a\u4e5f\u662f\u6700\u4e0d\u4ee4\u4eba\u60ca\u8bb6\u7684\u65b9\u6cd5\u662f\u8ba9\u4eba\u4eec\u624b\u52a8\u8bc4\u4f30\u7cfb\u7edf\u7684\u6b63\u786e\u6027\u3001\u5145\u5206\u6027\u548c\u6d41\u7545\u6027\u3002\u5c31\u50cf\u56fe\u7075\u6d4b\u8bd5\u4e00\u6837\uff0c\u5982\u679c\u4f60\u80fd\u9a97\u8fc7\u4e00\u4e2a\u4eba\uff0c\u8ba9\u4ed6\u65e0\u6cd5\u533a\u5206\u4eba\u5de5\u7ffb\u8bd1\u548c\u7cfb\u7edf\u7ffb\u8bd1\uff0c\u90a3\u4e48\u4f60\u7684\u6a21\u578b\u5c31\u901a\u8fc7\u4e86\u770b\u8d77\u6765\u50cf\u771f\u5b9e\u53e5\u5b50\u7684\u6d4b\u8bd5\uff01\u8fd9\u79cd\u65b9\u6cd5\u7684\u4e00\u4e2a\u660e\u663e\u95ee\u9898\u662f\u6210\u672c\u9ad8\u4e14\u6548\u7387\u4f4e\uff0c\u5c3d\u7ba1\u5b83\u4ecd\u7136\u662f\u673a\u5668\u7ffb\u8bd1\u7684\u9ec4\u91d1\u6807\u51c6\u3002 5.2 Evaluation against another task \u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5\u662f\u8f93\u51fa\u6709\u7528\u7684\u8868\u793a\u6570\u636e\uff08\u8868\u793a\u4e3a\u7ffb\u8bd1\u6216\u6458\u8981\uff09\uff0c\u5982\u679c\u60a8\u7684\u9884\u6d4b\u5bf9\u89e3\u51b3\u67d0\u4e9b\u5177\u6709\u6311\u6218\u6027\u7684\u4efb\u52a1\u5f88\u5e2e\u52a9\uff0c\u90a3\u4e48\u6a21\u578b\u5fc5\u987b\u5728\u9884\u6d4b\u4e2d\u7f16\u7801\u76f8\u5173\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u4f1a\u8003\u8651\u5728\u7ffb\u8bd1\u8bed\u8a00\u7684\u95ee\u7b54\u4efb\u52a1\u4e2d\u8bad\u7ec3\u7ffb\u8bd1\u9884\u6d4b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u60a8\u4f7f\u7528\u7cfb\u7edf\u7684\u8f93\u51fa\u4f5c\u4e3a\u5176\u4ed6\u4efb\u52a1(\u95ee\u7b54)\u6a21\u578b\u7684\u8f93\u5165\u3002\u5982\u679c\u60a8\u7684\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u5728\u60a8\u7684\u9884\u6d4b\u4e0a\u548c\u5728\u7ffb\u8bd1\u8bed\u8a00\u7684\u683c\u5f0f\u826f\u597d\u7684\u6570\u636e\u4e0a\u4e00\u6837\u51fa\u8272\uff0c\u8fd9\u610f\u5473\u7740\u60a8\u7684\u8f93\u5165\u5177\u6709\u6ee1\u8db3\u4efb\u52a1\u9700\u6c42\u7684\u76f8\u5173\u4fe1\u606f\u6216\u6a21\u5f0f\u3002 \u8fd9\u79cd\u65b9\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u53ef\u80fd\u4e0d\u4f1a\u53d7\u5230\u8bb8\u591a\u7ffb\u8bd1\u7ec6\u8282\u7684\u5f71\u54cd\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u5728\u67e5\u8be2\u68c0\u7d22\u4efb\u52a1\u4e2d\u8861\u91cf\u7ffb\u8bd1\u8d28\u91cf\uff08\u4f8b\u5982\uff0c\u63d0\u53d6\u641c\u7d22\u67e5\u8be2\u7684\u6b63\u786e\u7f51\u9875\uff09\uff0c\u4f60\u4f1a\u53d1\u73b0\u4e00\u4e2a\u7ffb\u8bd1\u6709\u52a9\u4e8e\u4fdd\u62a4\u6587\u6863\u7684\u4e3b\u9898\u53e5,\u4f46\u5ffd\u7565\u4e86\u8bed\u6cd5\u548c\u8bed\u6cd5\u4ecd\u7136\u53ef\u80fd\u9002\u5408\u7684\u4efb\u52a1\u3002\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u7ffb\u8bd1\u8d28\u91cf\u662f\u51c6\u786e\u53ef\u9760\u7684\u3002\u56e0\u6b64\uff0c\u786e\u5b9a\u7ffb\u8bd1\u6a21\u578b\u7684\u8d28\u91cf\u53ea\u662f\u4e3a\u4e86\u786e\u5b9a\u4efb\u52a1\u672c\u8eab\u7684\u8d28\u91cf\uff0c\u8fd9\u53ef\u80fd\u662f\u4e5f\u53ef\u80fd\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u6807\u51c6\u3002 5.3 Bilingual Evaluation Understudy (BLEU) \u5728 2002 \u5e74\uff0cIBM \u7684\u7814\u7a76\u8005\u63d0\u51fa\u4e86 Bilingual Evaluation Understudy\uff08BELU\uff09\uff0c\u65f6\u81f3\u4eca\u65e5\uff0c\u8be5\u65b9\u6cd5\u7684\u5f88\u591a\u53d8\u4f53\uff0c\u662f\u673a\u5668\u7ffb\u8bd1\u4e2d\u6700\u53ef\u9760\u7684\u8bc4\u4f30\u65b9\u6cd5\u4e4b\u4e00\u3002 BELU \u7b97\u6cd5\u901a\u8fc7\u53c2\u8003\u4eba\u5de5\u7ffb\u8bd1\u6765\u8bc4\u4f30\u673a\u5668\u7ffb\u8bd1\u7684\u7cbe\u786e\u5ea6\u5206\u6570\u3002\u53c2\u8003\u4eba\u5de5\u7ffb\u8bd1\u88ab\u5047\u5b9a\u4e3a\u662f\u4e00\u4e2a\u7ffb\u8bd1\u7684\u6a21\u578b\u6837\u4f8b\uff0c\u7136\u540e\u6211\u4eec\u4f7f\u7528 n-gram \u5339\u914d\u5019\u9009\u7ffb\u8bd1\u4e0e\u4eba\u5de5\u7ffb\u8bd1\u4e4b\u95f4\u7684\u76f8\u4f3c\u7a0b\u5ea6\u4f5c\u4e3a\u5ea6\u91cf\u6807\u6ce8\u3002\u8003\u8651\u4e00\u4e2a\u53c2\u8003\u53e5\u5b50 A \u548c\u5019\u9009\u7ffb\u8bd1 B\uff1a A\uff1athere are many ways to evaluate the quality of a translation, like comparing the number of n-grams between a candidate translation and reference. B\uff1athe quality of a translation is evaluate of n-grams in a reference and with translation. BELU \u5206\u6570\u662f\u67e5\u627e\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u662f\u5426\u6709 n-grams \u4e5f\u51fa\u73b0\u5728\u53c2\u8003\u7ffb\u8bd1\u4e2d\u3002\u4ee5\u4e0b\u5f69\u8272\u7684\u7ffb\u8bd1\u662f\u53c2\u8003\u7ffb\u8bd1\u548c\u5019\u9009\u7ffb\u8bd1\u4e4b\u95f4\u5171\u4eab\u7684\u4e0d\u540c\u5927\u5c0f\u7684 n-grams \u7684\u4e00\u4e9b\u793a\u4f8b\u3002 BELU \u7b97\u6cd5\u901a\u8fc7\u8bc6\u522b\u4e0a\u8ff0\u6240\u6709\u7684 n-grams \u5339\u914d\uff0c\u5305\u62ec unigram \u5339\u914d\uff0c\u7136\u540e\u7528\u7cbe\u786e\u5ea6\u5206\u6570\u6765\u8bc4\u4f30\u7ffb\u8bd1\u7684\u597d\u574f\u3002\u7cbe\u786e\u5ea6\u5206\u6570\u662f n-grams \u65e2\u51fa\u73b0\u5728\u53c2\u8003\u7ffb\u8bd1\u4e2d\u4e5f\u51fa\u73b0\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u767e\u5206\u6bd4\u3002 \u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u6ee1\u8db3\u5176\u4ed6\u7684\u4e24\u4e2a\u9650\u5236\u3002\u5bf9\u6bcf\u4e2a n-grams \u7684\u5927\u5c0f\uff0c\u53c2\u8003\u7ffb\u8bd1\u4e2d\u7684 gram \u4e0d\u80fd\u5339\u914d\u591a\u4e8e\u4e00\u6b21\u3002\u4f8b\u5982\uff0cunigram \u201ca\u201d \u5728 B \u4e2d\u51fa\u73b0\u4e86\u4e24\u6b21\u800c\u5728 A \u4e2d\u53ea\u51fa\u73b0\u4e86\u4e00\u6b21\u3002\u8fd9\u53ea\u7edf\u8ba1\u4e24\u4e2a\u7ffb\u8bd1\u53e5\u5b50\u4e4b\u95f4\u5339\u914d\u4e00\u6b21\u7684\u7684\u6b21\u6570\u3002\u53e6\u5916\uff0c\u6211\u4eec\u5f3a\u52a0\u4e00\u4e2a\u7b80\u5355\u7684\u60e9\u7f5a\uff0c\u4f7f\u5f97\u7cbe\u786e\u5ea6\u5206\u6570\u662f 1.0\uff08\u201c\u5b8c\u7f8e\u201d\u5339\u914d\uff09\u7684\u77ed\u53e5\u5b50\u4e0d\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u5bf9\u5355\u4e2a\u5355\u8bcd there \u4f1a\u5f97\u5230\u4e00\u4e2a\u7cbe\u786e\u5ea6\u5206\u6570\u4e3a 1.0 \u7684\u5339\u914d\uff0c\u4f46\u662f\u5f88\u660e\u663e\u8fd9\u4e0d\u662f\u4e00\u4e2a\u597d\u7684\u5339\u914d\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b\u5b9e\u9645\u4e2d\u5982\u4f55\u8ba1\u7b97 BELU \u5206\u6570\u3002\u9996\u5148\u4ee4 k \u662f\u6211\u4eec\u8981\u8bc4\u4f30\u7684\u5206\u6570\u7684\u6700\u5927 n-gram \u3002\u5373\u5982\u679c k=4\uff0cBELU \u5206\u6570\u4ec5\u8ba1\u7b97\u5927\u5c0f \\(\\leq 4\\) \u7684 n-grams \uff0c\u5e76\u5ffd\u7565\u5927\u4e8e 4 \u7684 n-grams \u3002\u4ee4 \\[ p_{n}=\\# \\text {matched n-grams} / \\text{# n-grams in candidate translation} \\] \u4e3a\u5bf9\u957f\u5ea6\u662f n \u7684 grams \u7684\u7cbe\u786e\u5ea6\u5206\u6570\u3002\u6700\u540e\uff0c\u4ee4 \\(w_{n}=1 / 2^{n}\\) \u662f\u7b2c n \u4e2a gram \u7684\u51e0\u4f55\u52a0\u6743\u3002\u6211\u4eec\u7b80\u5355\u60e9\u7f5a\u7684\u5b9a\u4e49\u4e3a \\[ \\beta=e^{\\min \\left(0,1-\\frac{len_{ref}}{len_{MT}}\\right)} \\] \u5176\u4e2d \\(len_{ref}\\) \u662f\u53c2\u8003\u7ffb\u8bd1\u7684\u53e5\u5b50\u957f\u5ea6\uff0c \\(len_{MT}\\) \u662f\u673a\u5668\u7ffb\u8bd1\u7684\u53e5\u5b50\u957f\u5ea6\u3002 BELU \u5206\u6570\u7136\u540e\u5b9a\u4e49\u4e3a\uff1a \\[ B E L U=\\beta \\prod_{i=1}^{k} p_{n}^{w_{n}} \\] BLEU \u8bc4\u5206\u4e0e\u4eba\u7c7b\u5bf9\u4f18\u79c0\u7ffb\u8bd1\u7684\u5224\u65ad\u5bc6\u5207\u76f8\u5173\uff0c\u56e0\u6b64\u4ecd\u7136\u662f\u6240\u6709\u8bc4\u4f30\u6307\u6807\u7684\u57fa\u51c6\u3002\u7136\u800c\uff0c\u5b83\u8fd8\u662f\u6709\u8bb8\u591a\u9650\u5236\u7684\u3002\u5b83\u53ea\u80fd\u5728\u8bed\u6599\u5e93\u7ea7\u522b\u4e0a\u5de5\u4f5c\u5f97\u5f88\u597d\uff0c\u56e0\u4e3a\u7cbe\u5ea6\u5f97\u5206\u4e2d\u7684\u4efb\u4f55\u96f6\u90fd\u5c06\u4f7f\u6574\u4e2aBLEU\u5f97\u5206\u4e3a\u96f6\u3002\u53e6\u5916\uff0cBLEU \u5f97\u5206\u4ec5\u4ec5\u5c06\u673a\u5668\u7ffb\u8bd1\u4e0e\u5355\u4e2a\u4eba\u5de5\u7ffb\u8bd1\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u80af\u5b9a\u9700\u8981\u5339\u914d\u76f8\u5173\u7684 n-grams \u7684\u566a\u58f0\u8868\u793a\u3002BLEU \u7684\u53d8\u4f53\u5df2\u7ecf\u5c06\u8fd9\u4e2a\u7b97\u6cd5\u4fee\u6539\u4e3a\u53ef\u4ee5\u5c06\u5019\u9009\u673a\u5668\u7ffb\u8bd1\u4e0e\u591a\u4e2a\u4eba\u5de5\u7ffb\u8bd1\u8fdb\u884c\u6bd4\u8f83\u3002\u6b64\u5916\uff0cBLEU\u5206\u6570\u53ef\u80fd\u53ea\u662f\u4e00\u4e2a\u5fc5\u8981\u7684\uff0c\u4f46\u5e76\u4e0d\u8db3\u4ee5\u901a\u8fc7\u4e00\u4e2a\u826f\u597d\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u7684\u57fa\u51c6\u3002\u8bb8\u591a\u7814\u7a76\u4eba\u5458\u5bf9 BLEU \u7684\u5206\u6570\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u76f4\u5230\u4ed6\u4eec\u5f00\u59cb\u63a5\u8fd1\u53c2\u8003\u8bd1\u6587\u4e4b\u95f4\u76f8\u540c\u7684BLEU\u5206\u6570\uff0c\u4f46\u771f\u6b63\u7684\u8d28\u91cf\u4ecd\u7136\u8fdc\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u8bd1\u6587\u3002","title":"5 Evaluation of Machine Translation Systems"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#6-dealing-with-the-large-output-vocabulary","text":"\u5c3d\u7ba1\u73b0\u4ee3\u7684 NMT \u7cfb\u7edf\u53d6\u5f97\u4e86\u6210\u529f\uff0c\u4f46\u662f\u4ed6\u4eec\u5f88\u96be\u5904\u7406\u5927\u91cf\u7684\u8bcd\u6c47\u91cf\u3002\u7279\u522b\u5730\uff0c\u8fd9\u4e9b Seq2Seq \u6a21\u578b\u901a\u8fc7\u4f7f\u7528 softmax \u8ba1\u7b97\u6574\u4e2a\u8bcd\u6c47\u8868\u4e0a\u7684\u76ee\u6807\u6982\u7387\u5206\u5e03\u6765\u9884\u6d4b\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u4f7f\u7528\u5927\u91cf\u8bcd\u6c47\u8868\u6765\u8ba1\u7b97 softmax \u53ef\u80fd\u76f8\u5f53\u8017\u8d39\u8ba1\u7b97\u8d44\u6e90\uff0c\u800c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u4f1a\u4e0e\u8bcd\u6c47\u5927\u5c0f\u6210\u6b63\u6bd4\u3002\u6211\u4eec\u73b0\u5728\u5c06\u7814\u7a76\u4e00\u4e9b\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u3002 6.1 Scaling softmax \u4e00\u4e2a\u975e\u5e38\u81ea\u7136\u7684\u60f3\u6cd5\u662f\u95ee\u201c\u6211\u4eec\u80fd\u627e\u5230\u66f4\u6709\u6548\u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u76ee\u6807\u6982\u7387\u5206\u5e03\u5417\uff1f\u201d\u7b54\u6848\u662f\u53ef\u4ee5\u7684\uff01\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u4e24\u79cd\u53ef\u4ee5\u964d\u4f4e\u201csoftmax\u201d\u590d\u6742\u5ea6\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u9762\u56de\u987e\u4e00\u4e0b\uff08\u66f4\u591a\u7ec6\u8282\u8bf7\u770b lecture one \u4e2d\u7684\u76f8\u5173\u65b9\u6cd5\u7684\u4ecb\u7ecd\uff09\u3002 Noise Contrastive Estimation NCE \u7684\u60f3\u6cd5\u662f\u901a\u8fc7\u968f\u673a\u5730\u4ece\u8d1f\u6837\u672c\u4e2d\u62bd\u53d6 K \u4e2a\u5355\u8bcd\u6765\u8fd1\u4f3c\u201csoftmax\u201d\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u590d\u6742\u5ea6\u964d\u4f4e\u4e86 \\(\\frac{|V|}{K}\\) \u500d\uff0c\u5176\u4e2d \\({|V|}\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u8fd9\u4e2a\u65b9\u6cd5\u5728 word2vec \u4e2d\u8bc1\u660e\u4e86\u975e\u5e38\u6709\u6548\u3002Zoph \u7b49\u4eba\u6700\u8fd1\u7684\u4e00\u9879\u5de5\u4f5c\u662f\u5e94\u7528\u8fd9\u79cd\u6280\u672f\u6765\u5b66\u4e60 LSTM \u8bed\u8a00\u6a21\u578b\uff0c\u4ed6\u4eec\u8fd8\u901a\u8fc7\u4f7f\u7528\u6bcf\u4e2a mini batch \u7684\u76f8\u540c\u6837\u672c\u6765\u5f15\u5165\u4e00\u4e2a\u6280\u5de7\uff0c\u4f7f GPU \u7684\u8bad\u7ec3\u6548\u7387\u66f4\u9ad8\u3002 Hierarchical Softmax Morin \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u4e8c\u53c9\u6811\u7ed3\u6784\u4ece\u800c\u80fd\u591f\u66f4\u6709\u6548\u7387\u5730\u8ba1\u7b97 \u76ee\u6807\u5206\u5e03\u4e2d\u7684\u6bcf\u4e2a\u6982\u7387\u90fd\u662f\u901a\u8fc7\u5c06\u6811\u4e0a\u7684\u4e00\u4e2a\u8def\u5f84\u8ba1\u7b97\u51fa\u6765\u201csoftmax\u201d\uff0c\u8be5\u8ba1\u7b97\u8be5\u8def\u5f84\u53ea\u9700\u8981 \\(O(\\log |V|)\\) \u6b65\u957f\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5c3d\u7ba1 Hierarchical Softmax \u53ef\u4ee5\u8282\u7701\u8ba1\u7b97\u91cf\uff0c\u4f46\u662f\u5b83\u4e0d\u80fd\u5728 GPU \u4e0a\u5e76\u884c\u8fd0\u7b97\u3002 \u8fd9\u4e24\u79cd\u65b9\u6cd5\u7684\u4e00\u4e2a\u9650\u5236\u662f\u5b83\u4eec\u4ec5\u5728\u8bad\u7ec3\u9636\u6bb5\u4e2d\u8282\u7701\u8ba1\u7b97\u91cf\uff08\u5f53\u76ee\u6807\u8bcd\u5df2\u77e5\u65f6\uff09\u3002\u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8ba1\u7b97\u8bcd\u6c47\u8868\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u7684\u6982\u7387\uff0c\u7136\u540e\u505a\u51fa\u9884\u6d4b\u3002 6.2 Reducing vocabulary \u9664\u4e86\u4f18\u5316\u201csoftmax\u201d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c1d\u8bd5\u51cf\u5c11\u6709\u6548\u7684\u8bcd\u6c47\u91cf\uff0c\u8fd9\u5c06\u52a0\u5feb\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8fc7\u7a0b\u3002\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5c06\u8bcd\u6c47\u91cf\u9650\u5236\u5728\u4e00\u4e2a\u5f88\u5c0f\u7684\u6570\u91cf\u4e0a\uff0c\u7528\u4e00\u4e2a\u6807\u7b7e \\(\\text{<UNK>}\\) \u66ff\u6362\u9650\u5236\u540e\u7684\u8bcd\u6c47\u8868\u5916\u7684\u5355\u8bcd\u3002\u73b0\u5728\uff0c\u65e0\u8bba\u662f\u8bad\u7ec3\u548c\u6d4b\u8bd5\u65f6\u95f4\u53ef\u4ee5\u663e\u7740\u5730\u964d\u4f4e\u4e86\uff0c\u4f46\u8fd9\u663e\u7136\u662f\u4e0d\u7406\u60f3\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u4f1a\u4ea7\u751f\u5f88\u591a \\(\\text{<UNK>}\\) \u7684\u8f93\u51fa\u3002 Jean \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u4fdd\u6301\u56fa\u5b9a\u8bcd\u6c47\u5927\u5c0f \\(\\left|V^{\\prime}\\right|\\) \u7684\u65b9\u6cd5\uff0c \u901a\u8fc7\u5c06\u8bad\u7ec3\u6570\u636e\u5206\u6210\u5177\u6709 \\(\\tau\\) \u4e2a\u552f\u4e00\u76ee\u6807\u5355\u8bcd\u7684\u5b50\u96c6\uff0c\u5176\u4e2d \\(\\tau=\\left|V^{\\prime}\\right|\\) \u3002\u53ef\u4ee5\u901a\u8fc7\u4f9d\u6b21\u626b\u63cf\u539f\u59cb\u6570\u636e\u96c6\u76f4\u5230\u68c0\u6d4b \\(\\tau\\) \u4e2a\u552f\u4e00\u7684\u76ee\u6807\u5355\u8bcd\uff0c\u4ece\u800c\u5f62\u6210\u4e00\u4e2a\u5b50\u96c6\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09 \u7136\u540e\u6309\u7167\u4e0a\u8ff0\u8fc7\u7a0b\u904d\u5386\u6574\u4e2a\u6570\u636e\u96c6\uff0c\u4ee5\u4ea7\u751f\u6240\u6709\u7684 mini-batch \u5b50\u96c6\u3002\u5b9e\u9645\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u8bcd\u6c47\u91cf\u4e3a \\(|V|=500 K\\) \u5b9e\u73b0\u4e86 10 \u500d\u4ee5\u4e0a\u7684\u8282\u7701\uff08 \\(\\left|V^{\\prime}\\right|=30 K, 50 K\\) \uff09\u3002 \u8fd9\u4e2a\u6982\u5ff5\u548c NCE \u975e\u5e38\u7c7b\u4f3c\uff0c\u5bf9\u4efb\u610f\u7ed9\u5b9a\u7684\u5355\u8bcd\uff0c\u8f93\u51fa\u7684\u8bcd\u6c47\u5305\u542b\u76ee\u6807\u5355\u8bcd\u548c \\(\\left|V^{\\prime}\\right|-1\\) \u4e2a\u8d1f\uff08\u566a\u58f0\uff09\u6837\u4f8b\u3002\u7136\u800c\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u4e3b\u8981\u7684\u4e0d\u540c\u662f\uff0c\u5bf9\u6bcf\u4e2a\u5b50\u96c6 \\(\\left|V^{\\prime}\\right|\\) \uff0c\u662f\u4ece\u504f\u7f6e\u5206\u5e03 \\(|Q|\\) \u4e2d\u91c7\u6837\u8fd9\u4e9b\u8d1f\u6837\u4f8b\uff0c\u5176\u4e2d \\[ \\mathcal{Q}_{y_{t}}=\\left\\{\\begin{array}{l}{\\frac{1}{\\left|V^{\\prime}\\right|}, \\text { if } y_{t} \\in\\left|V^{\\prime}\\right|} \\\\ {0, \\text { otherwise }}\\end{array}\\right. \\] \u5728\u6d4b\u8bd5\u9636\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u4ece\u6574\u4e2a\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5b50\u96c6(\u79f0\u4e3a\u5019\u9009\u5217\u8868)\u6765\u9884\u6d4b\u76ee\u6807\u5355\u8bcd\u3002\u6311\u6218\u5728\u4e8e\uff0c\u6b63\u786e\u7684\u76ee\u6807\u8bcd\u662f\u672a\u77e5\u7684\uff0c\u6211\u4eec\u5fc5\u987b\u201c\u731c\u6d4b\u201d\u76ee\u6807\u8bcd\u53ef\u80fd\u662f\u4ec0\u4e48\u3002\u5728\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u63d0\u51fa\u4f7f\u7528 \\(K\\) \u4e2a\u6700\u5e38\u7528\u7684\u5355\u8bcd\uff08\u57fa\u4e8e unigram \u6982\u7387\uff09\u548c \\(K'\\) \u4e2a\u53ef\u80fd\u7684\u76ee\u6807\u8bcd\u4e3a\u6bcf\u4e2a\u6e90\u53e5\u6784\u5efa\u4e00\u4e2a\u5019\u9009\u5217\u8868\u3002\u5728\u4e0b\u56fe\u4e2d\u5c55\u793a\u4e86\u4e00\u4e2a \\(K^{\\prime}=3\\) \u7684\u4f8b\u5b50\u548c\u5019\u9009\u5217\u8868\u7531\u7d2b\u8272\u6846\u4e2d\u7684\u6240\u6709\u5355\u8bcd\u7ec4\u6210\u3002\u5728\u5b9e\u9645\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u7684\u53c2\u6570\u503c\uff1a \\(K=15 k, 30 k, 50 k, K^{\\prime}=10,20\\) \u3002 6.3 Handling unknown words \u5f53 NMT \u7cfb\u7edf\u4f7f\u7528\u4e0a\u9762\u63d0\u5230\u7684\u65b9\u6cd5\u6765\u4ee5\u964d\u4f4e\u6709\u6548\u8bcd\u6c47\u91cf\uff0c\u4e0d\u53ef\u907f\u514d\u5730\uff0c\u67d0\u4e9b\u5355\u8bcd\u5c06\u88ab\u6620\u5c04\u5230 \\(\\text{<UNK>}\\) \u3002\u4f8b\u5982\uff0c\u5f53\u9884\u6d4b\u8bcd\uff08\u901a\u5e38\u662f\u7f55\u89c1\u8bcd\uff09\u4e0d\u5728\u5019\u9009\u5217\u8868\u4e2d\u6216\u5f53\u6211\u4eec\u5728\u6d4b\u8bd5\u9636\u6bb5\u9047\u5230\u672a\u77e5\u7684\u5355\u8bcd\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002\u6211\u4eec\u9700\u8981\u65b0\u7684\u673a\u5236\u6765\u89e3\u51b3\u7f55\u89c1\u548c\u672a\u77e5\u7684\u5355\u8bcd\u95ee\u9898\u3002 Gulcehre \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u60f3\u6cd5\u6765\u5904\u7406\u8fd9\u4e9b\u95ee\u9898\uff1a\u5b66\u4e60\u4ece\u6e90\u6587\u672c\u4e2d\u201c\u590d\u5236\u201d\u3002\u8be5\u6a21\u578b\u5e94\u7528\u4e86\u6ce8\u610f\u529b\u5206\u5e03 \\(l_t\\) \u6765\u51b3\u5b9a\u6e90\u6587\u672c\u4e2d\u7684\u6307\u5411\u4f4d\u7f6e\uff0c\u5e76\u4f7f\u7528\u89e3\u7801\u5668\u7684\u9690\u85cf\u72b6\u6001 \\(S_t\\) \u6765\u9884\u6d4b\u4e8c\u5206\u7c7b\u53d8\u91cf \\(Z_t\\) \uff0c\u4ece\u800c\u51b3\u5b9a\u4f55\u65f6\u4ece\u6e90\u6587\u672c\u4e2d\u590d\u5236\u3002 \u6700\u540e\u7684\u9884\u6d4b\u7ed3\u679c\u662f\u6839\u636e \\(Z_t\\) \u7684\u503c\uff0c\u5728\u5019\u9009\u5217\u8868\u4e2d\u7531\u524d\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\u4f7f\u7528 softmax \u9009\u62e9\u7684\u8bcd \\(y_{t}^{w}\\) \uff0c\u6216\u8005\u4ece\u6e90\u6587\u672c\u590d\u5236\u7684 \\(y_{t}^{l}\\) \u3002\u4ed6\u4eec\u5728\u8bba\u6587\u4e2d\u7684\u7ed3\u679c\u8868\u660e\uff0c\u8be5\u65b9\u6cd5\u63d0\u9ad8\u4e86\u673a\u5668\u7ffb\u8bd1\u548c\u6587\u672c\u6458\u8981\u7b49\u4efb\u52a1\u7684\u8868\u73b0\u3002 \u7136\u800c\u53ef\u4ee5\u60f3\u5230\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u6709\u5c40\u9650\u6027\u7684\u3002\u8fd9\u662f\u8981\u91cd\u70b9\u6307\u51fa\u7684\u662f\u5728 Google NMT \u8bba\u6587\u4e2d\u5bf9\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4e00\u4e2a\u8bc4\u8bba\uff1a\u201c\u8fd9\u79cd\u505a\u6cd5\u5728\u89c4\u6a21\u5f88\u5927\u65f6\u662f\u4e0d\u53ef\u9760\u7684\u2014\u2014\u5f53\u7f51\u7edc\u662f\u5f88\u6df1\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u529b\u673a\u5236\u662f\u4e0d\u7a33\u5b9a\u7684\u2014\u2014\u800c\u590d\u5236\u673a\u5236\u53ef\u80fd\u4e0d\u662f\u6700\u9002\u5408\u5904\u7406\u7f55\u89c1\u5355\u8bcd\u7684\u7b56\u7565\u2014\u2014\u6709\u65f6\u97f3\u8bd1\u66f4\u5408\u9002\u201d\u3002","title":"6 Dealing with the large output vocabulary"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#7-word-and-character-based-models","text":"\u5982\u4e0a\u4e00\u90e8\u5206\u6240\u8ff0\uff0c\u201c\u590d\u5236\u201d\u673a\u5236\u5728\u5904\u7406\u7f55\u89c1\u6216\u672a\u77e5\u8bcd\u8bed\u4e0a\u4ecd\u7136\u5b58\u5728\u4e0d\u8db3\u3002\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u7684\u53e6\u4e00\u4e2a\u601d\u8def\u662f\u5728 sub-word \u7684\u7ea7\u522b\u8fdb\u884c\u64cd\u4f5c\u3002\u4e00\u4e2a\u8d8b\u52bf\u662f\u4f7f\u7528\u76f8\u540c\u7684 Seq2Seq \u67b6\u6784\uff0c\u4f46\u662f\u5728\u66f4\u5c0f\u7684\u5355\u5143\u4e0a\u64cd\u4f5c\u2014\u2014\u57fa\u4e8e\u5b57\u7b26\u7684\u5206\u8bcd\u6a21\u578b\u3002\u53e6\u4e00\u4e2a\u8d8b\u52bf\u662f\u5bf9\u5355\u8bcd\u548c\u5b57\u7b26\u91c7\u7528\u6df7\u5408\u67b6\u6784\u3002 7.1 Word segmentation Sennrich \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u901a\u8fc7\u5c06\u7f55\u89c1\u548c\u672a\u77e5\u7684\u5355\u8bcd\u4f5c\u4e3a\u4e00\u4e2a subword units \u7684\u5e8f\u5217\u6765\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47\u7ffb\u8bd1\u7684\u65b9\u6cd5\u3002 \u8fd9\u901a\u8fc7\u8c03\u6574\u79f0\u4e3a Byte Pair Encoding \u7684\u538b\u7f29\u7b97\u6cd5\u6765\u5b9e\u73b0\u3002\u57fa\u672c\u601d\u60f3\u662f\u4ece\u5b57\u7b26\u8bcd\u6c47\u8868\u5f00\u59cb\uff0c\u5e76\u4e14\u7ee7\u7eed\u6269\u5c55\u6570\u636e\u96c6\u4e2d\u6700\u5e38\u89c1\u7684 n-gram \u5bf9\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u7684\u6570\u636e\u96c6\u5305\u542b 4 \u4e2a\u5355\u8bcd\uff0c\u56fe\u4e2d\u7684\u5de6\u8fb9\u7684\u8868\u793a\u5355\u8bcd\u9891\u7387\uff0c\u4f8b\u5982\u201clow\u201d\u51fa\u73b0\u4e86 5 \u6b21\u3002\u7528 \\((p,q,f)\\) \u6765\u8868\u793a\u4e00\u4e2a n-gram \u5bf9 \\(p,q\\) \u548c\u51fa\u73b0\u7684\u9891\u7387 \\(f\\) \u3002\u5982\u56fe\u4e2d\u6240\u793a\uff0c\u6211\u4eec\u5df2\u7ecf\u9009\u62e9\u7684\u9891\u7387\u6700\u9ad8\u7684\u7684 n-gram \u5bf9 \\((e,s,9)\\) \uff0c\u7136\u540e\u6211\u4eec\u73b0\u5728\u589e\u52a0\u5f53\u524d\u9891\u7387\u6700\u9ad8\u7684\u7684 n-gram \u5bf9 \\((es,t,9)\\) \u3002\u91cd\u590d\u6b64\u8fc7\u7a0b\uff0c\u76f4\u5230\u6240\u6709 n-gram \u5bf9\u88ab\u9009\u62e9\u8fc7\u6216\u8bcd\u6c47\u5927\u5c0f\u8fbe\u5230\u67d0\u4e2a\u9608\u503c\u3002 \u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4e3a\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u6784\u5efa\u5355\u72ec\u7684\u8bcd\u6c47\u8868\uff0c\u6216\u8005\u5171\u540c\u6784\u5efa\u4e00\u4e2a\u8bcd\u6c47\u8868\u3002\u5728\u6784\u5efa\u8bcd\u6c47\u8868\u4e4b\u540e\uff0c\u4e00\u4e2a\u5e26\u6709 Seq2Seq \u4f53\u7cfb\u7ed3\u6784\u7684 NMT \u7cfb\u7edf\uff08Bahdanau \u7b49\u4eba\u5728\u8bba\u6587\u4e2d\u4f7f\u7528\u7684\uff09\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bad\u7ec3\u8fd9\u4e9b\u8bcd\u6bb5\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u8d62\u5f97\u4e86 WMT 2016 \u7684\u7b2c\u4e00\u540d\u3002 7.2 Character-based model Ling \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u57fa\u4e8e\u5b57\u7b26\u7684\u6a21\u578b\u6765\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47\u8868\u793a\u3002\u5bf9\u4e8e\u5177\u6709 m \u4e2a\u5b57\u7b26\u7684\u6bcf\u4e2a\u5355\u8bcd w\uff0c\u8be5\u6a21\u578b\u4e0d\u662f\u5b58\u50a8\u5355\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c\u800c\u662f\u904d\u5386\u6240\u6709\u5b57\u7b26 \\(c_{1}, c_{2} \\dots c_{m}\\) \u67e5\u627e\u5b57\u7b26\u5d4c\u5165 \\(e_{1}, e_{2} \\dots e_{m}\\) \u3002\u7136\u540e\u5c06\u8fd9\u4e9b\u5b57\u7b26\u5d4c\u5165\u4f5c\u4e3a biLSTM \u8f93\u5165\uff0c\u4ee5\u5206\u522b\u83b7\u5f97\u7528\u4e8e\u524d\u5411\u548c\u540e\u5411\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001 \\(h_{f}, h_{b}\\) \u3002\u6700\u7ec8\u7684\u8bcd\u5411\u91cf\u662f\u7531\u4e24\u4e2a\u9690\u85cf\u72b6\u6001\u7684\u4eff\u5c04\u53d8\u6362\u6765\u8ba1\u7b97\u800c\u5f97\uff1a $$ e_{w}=W_{f} H_{f}+W_{b} H_{b}+b $$ 7.3 Hybrid NMT Luong \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u6df7\u5408\u8bcd\u5b57\u6a21\u578b\u6765\u5904\u7406\u672a\u77e5\u8bcd\uff0c\u4ece\u800c\u5b9e\u73b0\u5f00\u653e\u8bcd\u6c47 NMT\u3002\u7cfb\u7edf\u4e3b\u8981\u8fdb\u884c\u5355\u8bcd\u7ea7\u7ffb\u8bd1\uff0c\u5e76\u67e5\u9605\u7f55\u89c1\u5355\u8bcd\u7684\u5b57\u7b26\u7ec4\u6210\u3002\u5728\u9ad8\u5c42\u6b21\u4e0a\uff0c\u5b57\u7b26\u7ea7\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u8ba1\u7b97\u6e90\u5355\u8bcd\u8bcd\u8868\u793a\uff0c\u5e76\u5728\u9700\u8981\u65f6\u91cd\u65b0\u83b7\u5f97\u672a\u77e5\u76ee\u6807\u5355\u8bcd\u3002\u8fd9\u79cd\u6df7\u5408\u65b9\u6cd5\u7684\u53cc\u91cd\u4f18\u70b9\u5728\u4e8e\uff0c\u5b83\u7684\u8bad\u7ec3\u6bd4\u57fa\u4e8e\u5b57\u7b26\u7684\u65b9\u6cd5\u8981\u5feb\u5f97\u591a\uff0c\u800c\u4e14\u66f4\u5bb9\u6613\u8fdb\u884c\u8bad\u7ec3\uff1b\u540c\u65f6\uff0c\u5b83\u4e0d\u4f1a\u50cf\u57fa\u4e8e\u5355\u8bcd\u7684\u6a21\u578b\uff0c\u4ea7\u751f\u672a\u77e5\u7684\u5355\u8bcd\u3002 \u57fa\u4e8e\u5355\u8bcd\u7684\u7ffb\u8bd1\u4f5c\u4e3a\u4e3b\u5e72 \uff1a\u6df7\u5408 NMT \u7684\u6838\u5fc3\u662f\u4e00\u4e2a\u5355\u8bcd\u7ea7\u7ffb\u8bd1\u7684\u6df1\u5ea6 LSTM \u7f16\u7801\u5668\u2014\u89e3\u7801\u5668\u3002\u6211\u4eec\u5bf9\u6bcf\u79cd\u8bed\u8a00\u7ef4\u62a4\u5927\u5c0f \\(|V|\\) \u7684\u8bcd\u6c47\u8868\u548c\u4f7f\u7528 \\(\\text{<UNK>}\\) \u6765\u8868\u793a OOV \u8bcd\u6c47\u3002 \u57fa\u4e8e\u5b57\u7b26\u8868\u793a \uff1a\u5728\u5e38\u89c4\u7684\u57fa\u4e8e\u5355\u8bcd\u7684 NMT\uff0c\u662f\u4f7f\u7528\u4e00\u4e2a\u901a\u7528\u7684 \\(\\text{<UNK>}\\) \u8bcd\u5411\u91cf\u6765\u8868\u793a\u5168\u90e8 OOV \u8bcd\u6c47\u3002\u8fd9\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\u5b83\u4e22\u5f03\u4e86\u5173\u4e8e\u6e90\u5355\u8bcd\u7684\u6709\u4ef7\u503c\u7684\u4fe1\u606f\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u4e00\u4e2a\u5173\u4e8e\u7f55\u89c1\u5355\u8bcd\u7684\u5b57\u7b26\u7684\u6df1\u5c42 LSTM \u6a21\u578b\uff0c\u5e76\u4f7f\u7528 LSTM \u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u4f5c\u4e3a\u7f55\u89c1\u5355\u8bcd\u7684\u8868\u793a\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002 \u76ee\u6807\u5b57\u7b26\u7ea7\u522b\u751f\u6210 \uff1a\u4e00\u822c\u57fa\u4e8e\u5355\u8bcd\u7684 NMT \u5141\u8bb8\u76ee\u6807\u8f93\u51fa\u751f\u6210\u7684 \\(\\text{<UNK>}\\) \u3002\u76f8\u53cd\uff0c\u8fd9\u91cc\u7684\u76ee\u6807\u662f\u521b\u5efa\u4e00\u4e2a\u5904\u7406\u65e0\u9650\u8f93\u51fa\u8bcd\u6c47\u8868\u7684\u8fde\u8d2f\u6846\u67b6\u3002\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u5728\u7ed9\u5b9a\u5f53\u524d\u5355\u8bcd\u7ea7\u522b\u7684\u72b6\u6001\u4e0b\uff0c\u4f7f\u7528\u4e00\u4e2a\u5355\u72ec\u7684\u6df1\u5c42 LSTM \u6765\u8fdb\u884c\u5b57\u7b26\u7ea7\u522b\u7684\u201c\u7ffb\u8bd1\u201d\u3002\u6ce8\u610f\uff0c\u5f53\u524d\u5355\u8bcd\u4e0a\u4e0b\u6587\u7528\u4e8e\u521d\u59cb\u5316\u5b57\u7b26\u7ea7\u7f16\u7801\u5668\u3002\u8be5\u7cfb\u7edf\u7684\u8bad\u7ec3\u65b9\u6cd5\u662f\uff0c\u6bcf\u5f53\u5355\u8bcd\u7ea7\u522b\u7684 NMT \u4ea7\u751f\u4e00\u4e2a\u7684 \\(\\text{<UNK>}\\) \u65f6\u5019\uff0c\u5b57\u7b26\u7ea7\u7684\u89e3\u7801\u5668\u5c31\u88ab\u8981\u6c42\u91cd\u65b0\u672a\u77e5\u76ee\u6807\u5355\u8bcd\u7684\u6b63\u786e\u7684 surface form\u3002","title":"7 Word and character-based models"},{"location":"CS224n-2019-08-Machine%20Translation%2C%20Sequence-to-sequence%20and%20Attention/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/","text":"Lecture 09 Practical Tips for Final Projects \u00b6 Lecture Plan Final project types and details; assessment revisited Finding research topics; a couple of examples Finding data Review of gated neural sequence models A couple of MT topics Doing your research Presenting your results and evaluation This lecture is still relevant ... Even if doing DFP At a lofty level \u4e86\u89e3\u4e00\u4e9b\u5173\u4e8e\u505a\u7814\u7a76\u7684\u77e5\u8bc6\u662f\u6709\u597d\u5904\u7684 \u6211\u4eec\u5c06\u63a5\u89e6\u5230: \u57fa\u7ebf \u57fa\u51c6 \u8bc4\u4f30 \u9519\u8bef\u5206\u6790 \u8bba\u6587\u5199\u4f5c \u8fd9\u4e5f\u662f \u9ed8\u8ba4\u6700\u7ec8\u9879\u76ee \u7684\u4e00\u5927\u7279\u70b9 2. Finding Research Topics \u00b6 \u6240\u6709\u79d1\u5b66\u7684\u4e24\u4e2a\u57fa\u672c\u51fa\u53d1\u70b9 [\u9489\u5b50]\u4ece\u4e00\u4e2a(\u9886\u57df)\u611f\u5174\u8da3\u7684\u95ee\u9898\u5f00\u59cb\uff0c\u5e76\u8bd5\u56fe\u627e\u5230\u6bd4\u76ee\u524d\u5df2\u77e5\u7684/\u4f7f\u7528\u7684\u66f4\u597d\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u5b83\u3002 [\u9524\u5b50]\u4ece\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u6280\u672f\u65b9\u6cd5\u5f00\u59cb\uff0c\u627e\u51fa\u6269\u5c55\u6216\u6539\u8fdb\u5b83\u6216\u5e94\u7528\u5b83\u7684\u65b0\u65b9\u6cd5\u7684\u597d\u65b9\u6cd5 Project types \u8fd9\u4e0d\u662f\u4e00\u4e2a\u8be6\u5c3d\u7684\u5217\u8868\uff0c\u4f46\u5927\u591a\u6570\u9879\u76ee\u90fd\u662f\u5176\u4e2d\u4e4b\u4e00 \u627e\u5230\u611f\u5174\u8da3\u7684\u5e94\u7528\u7a0b\u5e8f/\u4efb\u52a1\uff0c\u63a2\u7d22\u5982\u4f55\u6709\u6548\u5730\u63a5\u8fd1/\u89e3\u51b3\u5b83\uff0c\u901a\u5e38\u5e94\u7528\u73b0\u6709\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b \u5b9e\u73b0\u4e86\u4e00\u4e2a\u590d\u6742\u7684\u795e\u7ecf\u7ed3\u6784\uff0c\u5e76\u5728\u4e00\u4e9b\u6570\u636e\u4e0a\u5c55\u793a\u4e86\u5b83\u7684\u6027\u80fd \u63d0\u51fa\u4e00\u79cd\u65b0\u7684\u6216\u53d8\u5f02\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff0c\u5e76\u63a2\u8ba8\u5176\u7ecf\u9a8c\u4e0a\u7684\u6210\u529f \u5206\u6790\u9879\u76ee\u3002\u5206\u6790\u4e00\u4e2a\u6a21\u578b\u7684\u884c\u4e3a\uff1a\u5b83\u5982\u4f55\u8868\u793a\u8bed\u8a00\u77e5\u8bc6\uff0c\u6216\u8005\u5b83\u80fd\u5904\u7406\u4ec0\u4e48\u6837\u7684\u73b0\u8c61\uff0c\u6216\u8005\u5b83\u72af\u4e86\u4ec0\u4e48\u6837\u7684\u9519\u8bef \u7a00\u6709\u7684\u7406\u8bba\u9879\u76ee\uff1a\u663e\u793a\u6a21\u578b\u7c7b\u578b\u3001\u6570\u636e\u6216\u6570\u636e\u8868\u793a\u7684\u4e00\u4e9b\u6709\u8da3\u7684\u3001\u91cd\u8981\u7684\u5c5e\u6027 How to find an interesting place to start? Look at ACL anthology for NLP papers https://aclanthology.info Also look at the online proceedings of major ML conferences NeurIPS, ICML, ICLR \u2022 Look at past cs224n project See the class website Look at online preprint servers, especially https://arxiv.org Even better: look for an interesting problem in the world ArxivSanity Preserver by Stanford grad Andrej Karpathy of cs231n Great new site \u2013a much needed resource for this \u2013 lots of NLP tasks Not always correct, though Finding a topic \u201cIf you see a research area where many people are working, go somewhere else.\u201d Must-haves (for most* custom final projects) \u5408\u9002\u7684\u6570\u636e \u901a\u5e38\u76ee\u6807:10000 +\u6807\u8bb0\u7684\u4f8b\u5b50\u91cc\u7a0b\u7891 \u53ef\u884c\u7684\u4efb\u52a1 \u81ea\u52a8\u8bc4\u4f30\u6307\u6807 NLP\u662f\u9879\u76ee\u7684\u6838\u5fc3 3. Finding data \u00b6 \u6709\u4e9b\u4eba\u4f1a\u4e3a\u4e00\u4e2a\u9879\u76ee\u6536\u96c6\u4ed6\u4eec\u81ea\u5df1\u7684\u6570\u636e \u4f60\u53ef\u80fd\u6709\u4e00\u4e2a\u4f7f\u7528\u201c\u65e0\u76d1\u7763\u201d\u6570\u636e\u7684\u9879\u76ee \u4f60\u53ef\u4ee5\u6ce8\u91ca\u5c11\u91cf\u7684\u6570\u636e \u4f60\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u7f51\u7ad9\uff0c\u6709\u6548\u5730\u63d0\u4f9b\u6ce8\u91ca\uff0c\u5982\u559c\u6b22\uff0c\u660e\u661f\uff0c\u8bc4\u7ea7\u7b49 \u6709\u4e9b\u4eba\u4f7f\u7528\u73b0\u6709\u7684\u7814\u7a76\u9879\u76ee\u6216\u516c\u53f8\u7684\u6570\u636e \u5982\u679c\u4f60\u53ef\u4ee5\u63d0\u4f9b\u63d0\u4ea4\u3001\u62a5\u544a\u7b49\u6570\u636e\u6837\u672c \u5927\u591a\u6570\u4eba\u4f7f\u7528\u73b0\u6709\u7684\uff0c\u7531\u4ee5\u524d\u7684\u7814\u7a76\u4eba\u5458\u5efa\u7acb\u7684\u6570\u636e\u96c6 \u4f60\u6709\u4e00\u4e2a\u5feb\u901f\u7684\u5f00\u59cb\uff0c\u6709\u660e\u663e\u7684\u524d\u671f\u5de5\u4f5c\u548c\u57fa\u7ebf linguistic data consortium \u8bed\u8a00\u6570\u636e\u8054\u76df https://catalog.ldc.upenn.edu/ Stanford licenses data; you can get access by signing up at: https://linguistics.stanford.edu/resources/resources-corpora Treebanks, named entities, coreference data,lots of newswire, lots of speech with transcription, parallel MT data Look at their catalog Don\u2019t use for non Stanford purposes! Machine translation http://statmt.org \u7279\u522b\u8981\u6ce8\u610f\u5404\u79cd WMT \u5171\u4eab\u4efb\u52a1 Dependency parsing: Universal Dependencies https://universaldependencies.org Many, many more \u73b0\u5728\u7f51\u4e0a\u6709\u5f88\u591a\u5176\u4ed6\u7684\u6570\u636e\u96c6\u53ef\u4ee5\u7528\u4e8e\u5404\u79cd\u5404\u6837\u7684\u76ee\u7684 \u770bKaggle \u770b\u7814\u7a76\u8bba\u6587 \u770b\u6570\u636e\u96c6\u5217\u8868 https://machinelearningmastery.com/datasets-natural-languageprocessing/ https://github.com/niderhoff/nlp-datasets 4. One more look at gated recurrent units and MT \u00b6 Backpropagation through Time \u68af\u5ea6\u6d88\u5931\u95ee\u9898\u5341\u5206\u4e25\u91cd \u5f53\u68af\u5ea6\u8d8b\u8fd1\u4e8e 0 \u65f6\uff0c\u6211\u4eec\u65e0\u6cd5\u5224\u65ad \u6570\u636e\u4e2ddet \u548c t+n \u4e4b\u95f4\u4e0d\u518d\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb \u53c2\u6570\u8bbe\u7f6e\u9519\u8bef\uff08\u68af\u5ea6\u6d88\u5931\u6761\u4ef6\uff09 \u8fd9\u662f\u539f\u59cb\u8f6c\u6362\u51fd\u6570\u7684\u95ee\u9898\u5417\uff1f \\[ f(h_{t-1}, x_t) = \\tanh(W[x_t] + U h_{t-1} + b) \\] \u6709\u4e86\u5b83\uff0c\u65f6\u95f4\u5bfc\u6570\u5c31\u4f1a\u6d88\u5931 \\[ \\frac{\\partial h_{t+1}}{\\partial h_{t}}=U^{\\top} \\frac{\\partial \\tanh (a)}{\\partial a} \\] Gated Recurrent Unit \u8fd9\u610f\u5473\u7740\u9519\u8bef\u5fc5\u987b\u901a\u8fc7\u6240\u6709\u4e2d\u95f4\u8282\u70b9\u53cd\u5411\u4f20\u64ad \u6216\u8bb8\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u5feb\u6377\u8fde\u63a5 \u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u81ea\u9002\u5e94\u7684\u5feb\u6377\u8fde\u63a5 \\[ f\\left(h_{t-1}, x_{t}\\right)=u_{t} \\odot \\tilde{h}_{t}+\\left(1-u_{t}\\right) \\odot h_{t-1} \\] \u5019\u9009\u66f4\u65b0 \\(\\tilde{h}_{t}=\\tanh \\left(W\\left[x_{t}\\right]+U h_{t-1}+b\\right)\\) \u66f4\u65b0\u95e8 \\(u_{t}=\\sigma\\left(W_{u}\\left[x_{t}\\right]+U_{u} h_{t-1}+b_{u}\\right)\\) \\(\\odot\\) \u8868\u793a\u9010\u5143\u7d20\u7684\u4e58\u6cd5 \u8ba9\u7f51\u7edc\u81ea\u9002\u5e94\u5730\u4fee\u526a\u4e0d\u5fc5\u8981\u7684\u8fde\u63a5 \\[ f\\left(h_{t-1}, x_{t}\\right)=u_{t} \\odot \\tilde{h}_{t}+\\left(1-u_{t}\\right) \\odot h_{t-1} \\] \u5019\u9009\u66f4\u65b0 \\(\\tilde{h}_{t}=\\tanh \\left(W\\left[x_{t}\\right]+U\\left(r_{t} \\odot h_{t-1}\\right)+b\\right)\\) \u91cd\u7f6e\u95e8 \\(r_{t}=\\sigma\\left(W_{r}\\left[x_{t}\\right]+U_{r} h_{t-1}+b_{r}\\right)\\) \u66f4\u65b0\u95e8 \\(u_{t}=\\sigma\\left(W_{u}\\left[x_{t}\\right]+U_{u} h_{t-1}+b_{u}\\right)\\) \u5c06RNN\u5355\u5143\u60f3\u8c61\u4e3a\u4e00\u4e2a\u5fae\u578b\u8ba1\u7b97\u673a tanh-RNN GRU \u95e8\u63a7\u5faa\u73af\u5355\u4f4d\u66f4\u73b0\u5b9e \u6ce8\u610f\uff0c\u5728\u601d\u60f3\u548c\u6ce8\u610f\u529b\u4e0a\u6709\u4e00\u4e9b\u91cd\u53e0 \u4e24\u4e2a\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u95e8\u63a7\u5faa\u73af\u5355\u4f4d\uff1aGRU\u548cLSTM The LSTM (\u7eff\u8272)LSTM\u95e8\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u88ab\u9057\u5fd8/\u5ffd\u7565\uff0c\u800c\u4e0d\u662f\u628a\u6240\u6709\u7684\u4e1c\u897f\u90fd\u585e\u5230\u5176\u4ed6\u6240\u6709\u4e1c\u897f\u4e0a\u9762 (\u6a59\u8272)\u4e0b\u4e00\u6b65\u7684\u975e\u7ebf\u6027\u66f4\u65b0\u5c31\u50cf\u4e00\u4e2aRNN (\u7d2b\u8272)\u8fd9\u90e8\u5206\u662f\u6838\u5fc3\uff08ResNets\u4e5f\u662f\u5982\u6b64\uff09\u4e0d\u662f\u4e58\uff0c\u800c\u662f\u5c06\u975e\u7ebf\u6027\u7684\u4e1c\u897f\u548c \\(c_{t-1}\\) \u76f8\u52a0\u5f97\u5230 \\(c_t\\) \u3002 \\(c_t, c_{t-1}\\) \u4e4b\u95f4\u5b58\u5728\u7ebf\u6027\u8054\u7edc 5. The large output vocabulary problem in NMT (or all NLG) \u00b6 Softmax \u8ba1\u7b97\u4ee3\u4ef7\u6602\u8d35 The word generation problem \u8bcd\u6c47\u751f\u6210\u95ee\u9898 \u8bcd\u6c47\u91cf\u901a\u5e38\u9002\u4e2d:50K Possible approaches for output Hierarchical softmax : tree-structured vocabulary Noise-contrastive estimation : binary classification Train on a subset of the vocabulary at a time; test on a smart on the set of possible translations \u6bcf\u6b21\u5728\u8bcd\u6c47\u8868\u7684\u5b50\u96c6\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u6d4b\u8bd5\u65f6\u81ea\u9002\u5e94\u7684\u9009\u62e9\u8bcd\u6c47\u8868\u7684\u5b50\u96c6 Jean, Cho, Memisevic, Bengio. ACL2015 Use attention to work out what you are translating You can do something simple like dictionary lookup \u76f4\u63a5\u590d\u5236\u539f\u53e5\u4e2d\u7684\u751f\u8bcd\uff1a \u201c\u590d\u5236\u201d\u6a21\u578b More ideas we will get to : Word pieces; char. models MT Evaluation \u2013an example of eval \u4eba\u5de5(\u6700\u597d\u7684!?) Adequacy and Fluency \u5145\u5206\u6027\u548c\u6d41\u7545\u6027(5\u62167\u5c3a\u5ea6) \u9519\u8bef\u5206\u7c7b \u7ffb\u8bd1\u6392\u540d\u6bd4\u8f83\uff08\u4f8b\u5982\u4eba\u5de5\u5224\u65ad\u4e24\u4e2a\u7ffb\u8bd1\u54ea\u4e00\u4e2a\u66f4\u597d\uff09 \u5728\u4f7f\u7528MT\u4f5c\u4e3a\u5b50\u7ec4\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6d4b\u8bd5 \u5982\u95ee\u7b54\u4ece\u5916\u8bed\u6587\u4ef6 \u65e0\u6cd5\u6d4b\u8bd5\u7ffb\u8bd1\u7684\u5f88\u591a\u65b9\u9762(\u4f8b\u5982,\u8de8\u8bed\u8a00IR) \u81ea\u52a8\u5ea6\u91cf BLEU (\u53cc\u8bed\u8bc4\u4ef7\u66ff\u624b) Others like TER, METEOR, \u2026\u2026 BLEU Evaluation Metric N-gram \u7cbe\u5ea6(\u5f97\u5206\u57280\u548c1\u4e4b\u95f4) \u53c2\u8003\u8bd1\u6587\u4e2d\u673a\u5668\u8bd1\u6587\u7684 N-gram \u7684\u767e\u5206\u6bd4\u662f\u591a\u5c11? \u4e00\u4e2an-gram\u662f\u7531n\u4e2a\u5355\u8bcd\u7ec4\u6210\u7684\u5e8f\u5217 \u5728\u4e00\u5b9a\u7684n-gram\u6c34\u5e73\u4e0a\u4e0d\u5141\u8bb8\u4e24\u6b21\u5339\u914d\u76f8\u540c\u7684\u53c2\u8003\u8bd1\u6587\u90e8\u5206(\u4e24\u4e2aMT\u5355\u8bcdairport\u53ea\u6709\u5728\u4e24\u4e2a\u53c2\u8003\u5355\u8bcdairport\u65f6\u624d\u6b63\u786e\uff1b\u4e0d\u80fd\u901a\u8fc7\u8f93\u5165\u201cthe the the the the\u201d\u6765\u4f5c\u5f0a) \u4e5f\u8981\u7528 unigrams \u6765\u8ba1\u7b97\u5355\u4f4d\u7684\u7cbe\u5ea6\uff0c\u7b49\u7b49 \u7b80\u6d01\u60e9\u7f5a BP \u4e0d\u80fd\u53ea\u8f93\u5165\u4e00\u4e2a\u5355\u8bcd\u201cthe\u201d(\u7cbe\u786e\u5ea61.0!) \u4eba\u4eec\u8ba4\u4e3a\u8981\u201c\u73a9\u5f04\u201d\u8fd9\u4e2a\u7cfb\u7edf\u662f\u76f8\u5f53\u56f0\u96be\u7684\u3002\u4f8b\u5982\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\u6765\u6539\u53d8\u673a\u5668\u7684\u8f93\u51fa\uff0c\u4f7fBLEU\u4e0a\u5347\uff0c\u4f46\u8d28\u91cf\u4e0d\u4f1a\u4e0b\u964d\u3002 BLEU\u662f\u4e00\u4e2a\u52a0\u6743\u7684\u51e0\u4f55\u5e73\u5747\u503c\uff0c\u52a0\u4e0a\u4e00\u4e2a\u7b80\u6d01\u7684\u60e9\u7f5a\u56e0\u5b50 \u6ce8\u610f\uff1a\u53ea\u5728\u8bed\u6599\u5e93\u7ea7\u8d77\u4f5c\u7528(0\u4f1a\u6740\u6b7b\u5b83)\uff1b\u53e5\u5b50\u7ea7\u6709\u4e00\u4e2a\u5e73\u6ed1\u7684\u53d8\u4f53 \u4e0b\u56fe\u662f n-grams 1-4 \u7684BLEU\u8ba1\u7b97\u516c\u5f0f Initial results showed that BLEU predicts human judgments well Automatic evaluation of MT \u4eba\u4eec\u5f00\u59cb\u4f18\u5316\u7cfb\u7edf\u6700\u5927\u5316BLEU\u5206\u6570 BLEU\u5206\u6570\u8fc5\u901f\u63d0\u9ad8 BLEU\u548c\u4eba\u7c7b\u5224\u65ad\u8d28\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb\u4e00\u76f4\u4e0b\u964d MT BLEU\u5206\u6570\u63a5\u8fd1\u4eba\u7c7b\u7ffb\u8bd1\u4f46\u662f\u4ed6\u4eec\u7684\u771f\u5b9e\u8d28\u91cf\u4ecd\u7136\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u7ffb\u8bd1 \u60f3\u51fa\u81ea\u52a8MT\u8bc4\u4f30\u5df2\u7ecf\u6210\u4e3a\u81ea\u5df1\u7684\u7814\u7a76\u9886\u57df \u6709\u8bb8\u591a\u5efa\u8bae:TER, METEOR, MaxSim, SEPIA\uff0c\u6211\u4eec\u81ea\u5df1\u7684RTE-MT TERpA \u662f\u4e00\u4e2a\u5177\u6709\u4ee3\u8868\u6027\u7684\uff0c\u597d\u5904\u7406\u4e00\u4e9b\u8bcd\u7684\u9009\u62e9\u53d8\u5316\u7684\u5ea6\u91cf MT\u7814\u7a76\u9700\u8981\u4e00\u4e9b\u81ea\u52a8\u7684\u5ea6\u91cf\uff0c\u4ee5\u5141\u8bb8\u5feb\u901f\u7684\u5f00\u53d1\u548c\u8bc4\u4f30 6. Doing your research example: Straightforward Class Project: Apply NNets to Task \u00b6 \u5b9a\u4e49\u4efb\u52a1 \u793a\u4f8b\uff1a\u603b\u7ed3 \u5b9a\u4e49\u6570\u636e\u96c6 \u641c\u7d22\u5b66\u672f\u6570\u636e\u96c6 \u4ed6\u4eec\u5df2\u7ecf\u6709\u57fa\u7ebf \u4f8b\u5982 Newsroom Summarization Dataset https://summari.es \u5b9a\u4e49\u4f60\u81ea\u5df1\u7684\u6570\u636e(\u66f4\u96be\uff0c\u9700\u8981\u65b0\u7684\u57fa\u7ebf) \u5141\u8bb8\u8fde\u63a5\u5230\u4f60\u7684\u7814\u7a76 \u65b0\u95ee\u9898\u63d0\u4f9b\u4e86\u65b0\u7684\u673a\u4f1a \u6709\u521b\u610f:Twitter\u3001\u535a\u5ba2\u3001\u65b0\u95fb\u7b49\u7b49\u3002\u6709\u8bb8\u591a\u6574\u6d01\u7684\u7f51\u7ad9\u4e3a\u65b0\u4efb\u52a1\u63d0\u4f9b\u4e86\u521b\u9020\u6027\u7684\u673a\u4f1a \u6570\u636e\u96c6\u536b\u751f \u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5206\u79bbdevtest and test \u63a5\u4e0b\u6765\u8ba8\u8bba\u66f4\u591a \u5b9a\u4e49\u60a8\u7684\u5ea6\u91cf(s) \u5728\u7ebf\u641c\u7d22\u6b64\u4efb\u52a1\u7684\u5df2\u5efa\u7acb\u7684\u5ea6\u91cf \u6458\u8981: Rouge (Recall-Oriented Understudy for GistingEvaluation) \uff0c\u5b83\u5b9a\u4e49\u4e86\u4eba\u5de5\u6458\u8981\u7684 n-gram\u91cd\u53e0 \u4eba\u5de5\u8bc4\u4ef7\u4ecd\u7136\u66f4\u9002\u5408\u4e8e\u6458\u8981\uff1b\u4f60\u53ef\u4ee5\u505a\u4e00\u4e2a\u5c0f\u89c4\u6a21\u7684\u4eba\u7c7b\u8ba1\u7b97 \u5efa\u7acb\u57fa\u7ebf \u9996\u5148\u5b9e\u73b0\u6700\u7b80\u5355\u7684\u6a21\u578b(\u901a\u5e38\u5bf9unigrams\u3001bigrams \u6216\u5e73\u5747\u5b57\u5411\u91cf\u8fdb\u884c\u903b\u8f91\u56de\u5f52) \u5728\u8bad\u7ec3\u548c\u5f00\u53d1\u4e2d\u8ba1\u7b97\u6307\u6807 \u5982\u679c\u5ea6\u91cf\u4ee4\u4eba\u60ca\u8bb6\u4e14\u6ca1\u6709\u9519\u8bef\uff0c\u90a3\u4e48 \u5b8c\u6210!\u95ee\u9898\u592a\u7b80\u5355\u4e86\u3002\u9700\u8981\u91cd\u542f \u5b9e\u73b0\u73b0\u6709\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b \u5728\u8bad\u7ec3\u548c\u5f00\u53d1\u4e2d\u8ba1\u7b97\u6307\u6807 \u5206\u6790\u8f93\u51fa\u548c\u9519\u8bef \u8fd9\u95e8\u8bfe\u7684\u6700\u4f4e\u6807\u51c6 \u6c38\u8fdc\u8981\u63a5\u8fd1\u60a8\u7684\u6570\u636e\uff08\u9664\u4e86\u6700\u540e\u7684\u6d4b\u8bd5\u96c6\uff09 \u53ef\u89c6\u5316\u6570\u636e\u96c6 \u6536\u96c6\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f \u67e5\u770b\u9519\u8bef \u5206\u6790\u4e0d\u540c\u7684\u8d85\u53c2\u6570\u5982\u4f55\u5f71\u54cd\u6027\u80fd \u901a\u8fc7\u826f\u597d\u7684\u5b9e\u9a8c\u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e0d\u540c\u7684\u6a21\u578b\u548c\u6a21\u578b\u53d8\u4f53\uff0c\u8fbe\u5230\u5feb\u901f\u8fed\u4ee3\u7684\u76ee\u7684 Fixed window neural model Recurrent neural network Recursive neural network Convolutional neural network Attention-basedmodel Pots of data \u8bb8\u591a\u516c\u5f00\u53ef\u7528\u7684\u6570\u636e\u96c6\u90fd\u662f\u4f7f\u7528train/dev/test\u7ed3\u6784\u53d1\u5e03\u7684\u3002\u6211\u4eec\u90fd\u5728\u8363\u8a89\u7cfb\u7edf\u4e0a\uff0c\u53ea\u5728\u5f00\u53d1\u5b8c\u6210\u65f6\u624d\u8fd0\u884c\u6d4b\u8bd5\u96c6 \u8fd9\u6837\u7684\u5206\u5272\u5047\u8bbe\u6709\u4e00\u4e2a\u76f8\u5f53\u5927\u7684\u6570\u636e\u96c6 \u5982\u679c\u6ca1\u6709\u5f00\u53d1\u96c6\u6216\u8005\u60a8\u60f3\u8981\u4e00\u4e2a\u5355\u72ec\u7684\u8c03\u4f18\u96c6\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u901a\u8fc7\u5206\u5272\u8bad\u7ec3\u6570\u636e\u6765\u521b\u5efa\u4e00\u4e2a\u8c03\u4f18\u96c6\uff0c\u5c3d\u7ba1\u60a8\u5fc5\u987b\u6743\u8861\u5b83\u7684\u5927\u5c0f/\u6709\u7528\u6027\u4e0e\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u51cf\u5c11 \u62e5\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684\u6d4b\u8bd5\u96c6\uff0c\u786e\u4fdd\u6240\u6709\u7cfb\u7edf\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u9ec4\u91d1\u6570\u636e\u8fdb\u884c\u8bc4\u4f30\u3002\u8fd9\u901a\u5e38\u662f\u597d\u7684\uff0c\u4f46\u662f\u5982\u679c\u6d4b\u8bd5\u96c6\u5177\u6709\u4e0d\u5bfb\u5e38\u7684\u5c5e\u6027\uff0c\u4ece\u800c\u626d\u66f2\u4e86\u4efb\u52a1\u7684\u8fdb\u5ea6\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 Training models and pots of data \u8bad\u7ec3\u65f6,\u6a21\u578b\u8fc7\u62df\u5408 \u8be5\u6a21\u578b\u6b63\u786e\u5730\u63cf\u8ff0\u4e86\u60a8\u6240\u8bad\u7ec3\u7684\u7279\u5b9a\u6570\u636e\u4e2d\u53d1\u751f\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u6a21\u5f0f\u8fd8\u4e0d\u591f\u901a\u7528\uff0c\u4e0d\u9002\u5408\u5e94\u7528\u4e8e\u65b0\u6570\u636e \u76d1\u63a7\u548c\u907f\u514d\u95ee\u9898\u8fc7\u5ea6\u62df\u5408\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u72ec\u7acb\u7684\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u96c6\u2026 \u60a8\u5728\u4e00\u4e2a\u8bad\u7ec3\u96c6\u4e0a\u6784\u5efa(\u8bc4\u4ef7/\u8bad\u7ec3)\u4e00\u4e2a\u6a21\u578b\u3002 \u901a\u5e38\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u96c6\u4e0a\u8bbe\u7f6e\u8fdb\u4e00\u6b65\u7684\u8d85\u53c2\u6570\uff0c\u5373\u8c03\u4f18\u96c6 \u8c03\u4f18\u96c6\u662f\u7528\u6765\u8c03\u6574\u8d85\u53c2\u6570\u7684\u8bad\u7ec3\u96c6 \u5728\u5f00\u53d1\u96c6(\u5f00\u53d1\u6d4b\u8bd5\u96c6\u6216\u9a8c\u8bc1\u96c6)\u4e0a\u5ea6\u91cf\u8fdb\u5ea6 \u5982\u679c\u60a8\u7ecf\u5e38\u8fd9\u6837\u505a\uff0c\u5c31\u4f1a\u8fc7\u5ea6\u9002\u5e94\u5f00\u53d1\u96c6\uff0c\u6240\u4ee5\u6700\u597d\u6709\u7b2c\u4e8c\u4e2a\u5f00\u53d1\u96c6\uff0c\u5373dev2set \u53ea\u6709\u6700\u540e,\u4f60\u8bc4\u4f30\u548c\u6700\u7ec8\u6570\u636e\u5728\u4e00\u4e2a\u6d4b\u8bd5\u96c6 \u975e\u5e38\u5c11\u5730\u4f7f\u7528\u6700\u7ec8\u6d4b\u8bd5\u96c6\u2026\u2026\u7406\u60f3\u60c5\u51b5\u4e0b\u53ea\u4f7f\u7528\u4e00\u6b21 \u57f9\u8bad\u3001\u8c03\u4f18\u3001\u5f00\u53d1\u548c\u6d4b\u8bd5\u96c6\u9700\u8981\u5b8c\u5168\u4e0d\u540c \u5728\u8bad\u7ec3\u6240\u4f7f\u7528\u7684\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u6d4b\u8bd5\u662f\u65e0\u6548\u7684 \u60a8\u5c06\u5f97\u5230\u4e00\u4e2a\u9519\u8bef\u7684\u826f\u597d\u6027\u80fd\u3002\u6211\u4eec\u901a\u5e38\u8bad\u7ec3\u65f6\u4f1a\u8fc7\u62df\u5408 \u60a8\u9700\u8981\u4e00\u4e2a\u72ec\u7acb\u7684\u8c03\u4f18 \u5982\u679c\u8c03\u4f18\u4e0etrain\u76f8\u540c\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u8bbe\u7f6e\u8d85\u53c2\u6570 \u5982\u679c\u4f60\u4e00\u76f4\u8fd0\u884c\u5728\u76f8\u540c\u7684\u8bc4\u4ef7\u96c6\uff0c\u4f60\u5f00\u59cb\u5728\u8bc4\u4ef7\u96c6\u4e0a\u8fc7\u62df\u5408 \u5b9e\u9645\u4e0a\uff0c\u4f60\u662f\u5728\u5bf9\u8bc4\u4f30\u96c6\u8fdb\u884c\u201c\u8bad\u7ec3\u201d\u2026\u2026\u4f60\u5728\u5b66\u4e60\u90a3\u4e9b\u5bf9\u7279\u5b9a\u7684\u8bc4\u4f30\u96c6\u6709\u7528\u548c\u6ca1\u7528\u7684\u4e1c\u897f\uff0c\u5e76\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f \u8981\u83b7\u5f97\u7cfb\u7edf\u6027\u80fd\u7684\u6709\u6548\u5ea6\u91cf\uff0c\u60a8\u9700\u8981\u53e6\u4e00\u4e2a\u672a\u7ecf\u8bad\u7ec3\u7684\u72ec\u7acb\u6d4b\u8bd5\u96c6\uff0c\u5373 dev2 \u548c\u6700\u7ec8\u6d4b\u8bd5 \u6211\u4eec\u9700\u8981\u610f\u8bc6\u5230\uff0c\u6bcf\u4e00\u6b21\u901a\u8fc7\u8bc4\u4f30\u7ed3\u679c\u7684\u53d8\u5316\u800c\u5b8c\u6210\u7684\u8c03\u6574\uff0c\u90fd\u662f\u5bf9\u6570\u636e\u96c6\u7684\u62df\u5408\u8fc7\u7a0b\u3002\u6211\u4eec\u9700\u8981\u5bf9\u6570\u636e\u96c6\u7684\u8fc7\u62df\u5408\uff0c\u4f46\u662f\u4e0d\u53ef\u4ee5\u5728\u72ec\u7acb\u6d4b\u8bd5\u96c6\u4e0a\u8fc7\u62df\u5408\uff0c\u5426\u5219\u5c31\u5931\u53bb\u4e86\u6d4b\u8bd5\u96c6\u7684\u610f\u4e49 Getting your neural network to train \u4ece\u79ef\u6781\u7684\u6001\u5ea6\u5f00\u59cb \u795e\u7ecf\u7f51\u7edc\u60f3\u8981\u5b66\u4e60 \u5982\u679c\u7f51\u7edc\u6ca1\u6709\u5b66\u4e60\uff0c\u4f60\u5c31\u662f\u5728\u505a\u4e00\u4e9b\u4e8b\u60c5\u6765\u963b\u6b62\u5b83\u6210\u529f\u5730\u5b66\u4e60 \u8ba4\u6e05\u6b8b\u9177\u7684\u73b0\u5b9e \u6709\u5f88\u591a\u4e8b\u60c5\u4f1a\u5bfc\u81f4\u795e\u7ecf\u7f51\u7edc\u5b8c\u5168\u4e0d\u5b66\u4e60\u6216\u8005\u5b66\u4e60\u4e0d\u597d \u627e\u5230\u5e76\u4fee\u590d\u5b83\u4eec(\u201c\u8c03\u8bd5\u548c\u8c03\u4f18\u201d)\u901a\u5e38\u9700\u8981\u66f4\u591a\u7684\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u5b9e\u73b0\u60a8\u7684\u6a21\u578b \u5f88\u96be\u7b97\u51fa\u8fd9\u4e9b\u4e1c\u897f\u662f\u4ec0\u4e48 \u4f46\u662f\u7ecf\u9a8c\u3001\u5b9e\u9a8c\u548c\u7ecf\u9a8c\u6cd5\u5219\u4f1a\u6709\u6240\u5e2e\u52a9\uff01 Models are sensitive to learning rates From Andrej Karpathy, CS231n course notes Models are sensitive to initialization From Michael Nielsen http://neuralnetworksanddeeplearning.com/chap3.html Training a (gated) RNN \u4f7f\u7528LSTM\u6216GRU\uff1a\u5b83\u4f7f\u60a8\u7684\u751f\u6d3b\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\uff01 \u521d\u59cb\u5316\u9012\u5f52\u77e9\u9635\u4e3a\u6b63\u4ea4\u77e9\u9635 \u7528\u4e00\u4e2a\u53ef\u611f\u77e5\u7684(\u5c0f\u7684)\u6bd4\u4f8b\u521d\u59cb\u5316\u5176\u4ed6\u77e9\u9635 \u521d\u59cb\u5316\u5fd8\u8bb0\u95e8\u504f\u5dee\u4e3a1\uff1a\u9ed8\u8ba4\u8bb0\u4f4f \u4f7f\u7528\u81ea\u9002\u5e94\u5b66\u4e60\u901f\u7387\u7b97\u6cd5\uff1aAdam, AdaDelta\uff0c\u2026 \u68af\u5ea6\u8303\u6570\u7684\u88c1\u526a\uff1a1-5\u4f3c\u4e4e\u662f\u4e00\u4e2a\u5408\u7406\u7684\u9608\u503c\uff0c\u5f53\u4e0eAdam \u6216 AdaDelta\u4e00\u8d77\u4f7f\u7528 \u8981\u4e48\u53ea\u4f7f\u7528 dropout vertically\uff0c\u8981\u4e48\u7814\u7a76\u4f7f\u7528Bayesian dropout(Gal\u548cgahramani -\u4e0d\u5728PyTorch\u4e2d\u539f\u751f\u652f\u6301) \u8981\u6709\u8010\u5fc3\uff01\u4f18\u5316\u9700\u8981\u65f6\u95f4 Experimental strategy \u589e\u91cf\u5730\u5de5\u4f5c\uff01 \u4ece\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u6a21\u578b\u5f00\u59cb \u8ba9\u5b83\u5f00\u59cb\u5de5\u4f5c\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u6dfb\u52a0\u4fee\u9970\u7269\uff0c\u8ba9\u6a21\u578b\u4f7f\u7528\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a(\u6216\u8005\u653e\u5f03\u5b83\u4eec) \u6700\u521d\u8fd0\u884c\u5728\u5c11\u91cf\u6570\u636e\u4e0a \u4f60\u4f1a\u66f4\u5bb9\u6613\u5728\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\u4e2d\u770b\u5230bug \u50cf8\u4e2a\u4f8b\u5b50\u8fd9\u6837\u7684\u4e1c\u897f\u5f88\u597d \u901a\u5e38\u5408\u6210\u6570\u636e\u5bf9\u8fd9\u5f88\u6709\u7528 \u786e\u4fdd\u4f60\u80fd\u5f97\u5230100%\u7684\u6570\u636e \u5426\u5219\u4f60\u7684\u6a21\u578b\u80af\u5b9a\u8981\u4e48\u4e0d\u591f\u5f3a\u5927\uff0c\u8981\u4e48\u662f\u7834\u788e\u7684 \u5728\u5927\u578b\u6570\u636e\u96c6\u4e2d\u8fd0\u884c \u6a21\u578b\u4f18\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e\u4ecd\u5e94\u63a5\u8fd1100% \u5426\u5219\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u8003\u8651\u4e00\u79cd\u66f4\u5f3a\u5927\u7684\u6a21\u5f0f\u6765\u8fc7\u62df\u5408\u8bad\u7ec3\u6570\u636e \u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u8fc7\u62df\u5408\u5728\u8fdb\u884c\u6df1\u5ea6\u5b66\u4e60\u65f6\u5e76\u4e0d\u53ef\u6015 \u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u5584\u4e8e\u4e00\u822c\u5316\uff0c\u56e0\u4e3a\u5206\u5e03\u5f0f\u8868\u793a\u5171\u4eab\u7edf\u8ba1\u5f3a\u5ea6\uff0c\u548c\u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u8fc7\u5ea6\u62df\u5408\u65e0\u5173 \u4f46\u662f\uff0c\u73b0\u5728\u4ecd\u7136\u9700\u8981\u826f\u597d\u7684\u6cdb\u5316\u6027\u80fd \u5bf9\u6a21\u578b\u8fdb\u884c\u6b63\u5219\u5316\uff0c\u76f4\u5230\u5b83\u4e0d\u4e0edev\u6570\u636e\u8fc7\u62df\u5408\u4e3a\u6b62 \u50cfL2\u6b63\u5219\u5316\u8fd9\u6837\u7684\u7b56\u7565\u662f\u6709\u7528\u7684 \u4f46\u901a\u5e38Dropout\u662f\u6210\u529f\u7684\u79d8\u8bc0 Details matter! \u67e5\u770b\u60a8\u7684\u6570\u636e\uff0c\u6536\u96c6\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f \u67e5\u770b\u60a8\u7684\u6a21\u578b\u7684\u8f93\u51fa\uff0c\u8fdb\u884c\u9519\u8bef\u5206\u6790 \u8c03\u4f18\u8d85\u53c2\u6570\u5bf9\u4e8e\u795e\u7ecf\u7f51\u7edc\u51e0\u4e4e\u6240\u6709\u7684\u6210\u529f\u90fd\u975e\u5e38\u91cd\u8981 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"09 Practical Tips for Final Projects"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#lecture-09-practical-tips-for-final-projects","text":"Lecture Plan Final project types and details; assessment revisited Finding research topics; a couple of examples Finding data Review of gated neural sequence models A couple of MT topics Doing your research Presenting your results and evaluation This lecture is still relevant ... Even if doing DFP At a lofty level \u4e86\u89e3\u4e00\u4e9b\u5173\u4e8e\u505a\u7814\u7a76\u7684\u77e5\u8bc6\u662f\u6709\u597d\u5904\u7684 \u6211\u4eec\u5c06\u63a5\u89e6\u5230: \u57fa\u7ebf \u57fa\u51c6 \u8bc4\u4f30 \u9519\u8bef\u5206\u6790 \u8bba\u6587\u5199\u4f5c \u8fd9\u4e5f\u662f \u9ed8\u8ba4\u6700\u7ec8\u9879\u76ee \u7684\u4e00\u5927\u7279\u70b9","title":"Lecture 09 Practical Tips for Final Projects"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#2-finding-research-topics","text":"\u6240\u6709\u79d1\u5b66\u7684\u4e24\u4e2a\u57fa\u672c\u51fa\u53d1\u70b9 [\u9489\u5b50]\u4ece\u4e00\u4e2a(\u9886\u57df)\u611f\u5174\u8da3\u7684\u95ee\u9898\u5f00\u59cb\uff0c\u5e76\u8bd5\u56fe\u627e\u5230\u6bd4\u76ee\u524d\u5df2\u77e5\u7684/\u4f7f\u7528\u7684\u66f4\u597d\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u5b83\u3002 [\u9524\u5b50]\u4ece\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u6280\u672f\u65b9\u6cd5\u5f00\u59cb\uff0c\u627e\u51fa\u6269\u5c55\u6216\u6539\u8fdb\u5b83\u6216\u5e94\u7528\u5b83\u7684\u65b0\u65b9\u6cd5\u7684\u597d\u65b9\u6cd5 Project types \u8fd9\u4e0d\u662f\u4e00\u4e2a\u8be6\u5c3d\u7684\u5217\u8868\uff0c\u4f46\u5927\u591a\u6570\u9879\u76ee\u90fd\u662f\u5176\u4e2d\u4e4b\u4e00 \u627e\u5230\u611f\u5174\u8da3\u7684\u5e94\u7528\u7a0b\u5e8f/\u4efb\u52a1\uff0c\u63a2\u7d22\u5982\u4f55\u6709\u6548\u5730\u63a5\u8fd1/\u89e3\u51b3\u5b83\uff0c\u901a\u5e38\u5e94\u7528\u73b0\u6709\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b \u5b9e\u73b0\u4e86\u4e00\u4e2a\u590d\u6742\u7684\u795e\u7ecf\u7ed3\u6784\uff0c\u5e76\u5728\u4e00\u4e9b\u6570\u636e\u4e0a\u5c55\u793a\u4e86\u5b83\u7684\u6027\u80fd \u63d0\u51fa\u4e00\u79cd\u65b0\u7684\u6216\u53d8\u5f02\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff0c\u5e76\u63a2\u8ba8\u5176\u7ecf\u9a8c\u4e0a\u7684\u6210\u529f \u5206\u6790\u9879\u76ee\u3002\u5206\u6790\u4e00\u4e2a\u6a21\u578b\u7684\u884c\u4e3a\uff1a\u5b83\u5982\u4f55\u8868\u793a\u8bed\u8a00\u77e5\u8bc6\uff0c\u6216\u8005\u5b83\u80fd\u5904\u7406\u4ec0\u4e48\u6837\u7684\u73b0\u8c61\uff0c\u6216\u8005\u5b83\u72af\u4e86\u4ec0\u4e48\u6837\u7684\u9519\u8bef \u7a00\u6709\u7684\u7406\u8bba\u9879\u76ee\uff1a\u663e\u793a\u6a21\u578b\u7c7b\u578b\u3001\u6570\u636e\u6216\u6570\u636e\u8868\u793a\u7684\u4e00\u4e9b\u6709\u8da3\u7684\u3001\u91cd\u8981\u7684\u5c5e\u6027 How to find an interesting place to start? Look at ACL anthology for NLP papers https://aclanthology.info Also look at the online proceedings of major ML conferences NeurIPS, ICML, ICLR \u2022 Look at past cs224n project See the class website Look at online preprint servers, especially https://arxiv.org Even better: look for an interesting problem in the world ArxivSanity Preserver by Stanford grad Andrej Karpathy of cs231n Great new site \u2013a much needed resource for this \u2013 lots of NLP tasks Not always correct, though Finding a topic \u201cIf you see a research area where many people are working, go somewhere else.\u201d Must-haves (for most* custom final projects) \u5408\u9002\u7684\u6570\u636e \u901a\u5e38\u76ee\u6807:10000 +\u6807\u8bb0\u7684\u4f8b\u5b50\u91cc\u7a0b\u7891 \u53ef\u884c\u7684\u4efb\u52a1 \u81ea\u52a8\u8bc4\u4f30\u6307\u6807 NLP\u662f\u9879\u76ee\u7684\u6838\u5fc3","title":"2. Finding Research Topics"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#3-finding-data","text":"\u6709\u4e9b\u4eba\u4f1a\u4e3a\u4e00\u4e2a\u9879\u76ee\u6536\u96c6\u4ed6\u4eec\u81ea\u5df1\u7684\u6570\u636e \u4f60\u53ef\u80fd\u6709\u4e00\u4e2a\u4f7f\u7528\u201c\u65e0\u76d1\u7763\u201d\u6570\u636e\u7684\u9879\u76ee \u4f60\u53ef\u4ee5\u6ce8\u91ca\u5c11\u91cf\u7684\u6570\u636e \u4f60\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u7f51\u7ad9\uff0c\u6709\u6548\u5730\u63d0\u4f9b\u6ce8\u91ca\uff0c\u5982\u559c\u6b22\uff0c\u660e\u661f\uff0c\u8bc4\u7ea7\u7b49 \u6709\u4e9b\u4eba\u4f7f\u7528\u73b0\u6709\u7684\u7814\u7a76\u9879\u76ee\u6216\u516c\u53f8\u7684\u6570\u636e \u5982\u679c\u4f60\u53ef\u4ee5\u63d0\u4f9b\u63d0\u4ea4\u3001\u62a5\u544a\u7b49\u6570\u636e\u6837\u672c \u5927\u591a\u6570\u4eba\u4f7f\u7528\u73b0\u6709\u7684\uff0c\u7531\u4ee5\u524d\u7684\u7814\u7a76\u4eba\u5458\u5efa\u7acb\u7684\u6570\u636e\u96c6 \u4f60\u6709\u4e00\u4e2a\u5feb\u901f\u7684\u5f00\u59cb\uff0c\u6709\u660e\u663e\u7684\u524d\u671f\u5de5\u4f5c\u548c\u57fa\u7ebf linguistic data consortium \u8bed\u8a00\u6570\u636e\u8054\u76df https://catalog.ldc.upenn.edu/ Stanford licenses data; you can get access by signing up at: https://linguistics.stanford.edu/resources/resources-corpora Treebanks, named entities, coreference data,lots of newswire, lots of speech with transcription, parallel MT data Look at their catalog Don\u2019t use for non Stanford purposes! Machine translation http://statmt.org \u7279\u522b\u8981\u6ce8\u610f\u5404\u79cd WMT \u5171\u4eab\u4efb\u52a1 Dependency parsing: Universal Dependencies https://universaldependencies.org Many, many more \u73b0\u5728\u7f51\u4e0a\u6709\u5f88\u591a\u5176\u4ed6\u7684\u6570\u636e\u96c6\u53ef\u4ee5\u7528\u4e8e\u5404\u79cd\u5404\u6837\u7684\u76ee\u7684 \u770bKaggle \u770b\u7814\u7a76\u8bba\u6587 \u770b\u6570\u636e\u96c6\u5217\u8868 https://machinelearningmastery.com/datasets-natural-languageprocessing/ https://github.com/niderhoff/nlp-datasets","title":"3. Finding data"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#4-one-more-look-at-gated-recurrent-units-and-mt","text":"Backpropagation through Time \u68af\u5ea6\u6d88\u5931\u95ee\u9898\u5341\u5206\u4e25\u91cd \u5f53\u68af\u5ea6\u8d8b\u8fd1\u4e8e 0 \u65f6\uff0c\u6211\u4eec\u65e0\u6cd5\u5224\u65ad \u6570\u636e\u4e2ddet \u548c t+n \u4e4b\u95f4\u4e0d\u518d\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb \u53c2\u6570\u8bbe\u7f6e\u9519\u8bef\uff08\u68af\u5ea6\u6d88\u5931\u6761\u4ef6\uff09 \u8fd9\u662f\u539f\u59cb\u8f6c\u6362\u51fd\u6570\u7684\u95ee\u9898\u5417\uff1f \\[ f(h_{t-1}, x_t) = \\tanh(W[x_t] + U h_{t-1} + b) \\] \u6709\u4e86\u5b83\uff0c\u65f6\u95f4\u5bfc\u6570\u5c31\u4f1a\u6d88\u5931 \\[ \\frac{\\partial h_{t+1}}{\\partial h_{t}}=U^{\\top} \\frac{\\partial \\tanh (a)}{\\partial a} \\] Gated Recurrent Unit \u8fd9\u610f\u5473\u7740\u9519\u8bef\u5fc5\u987b\u901a\u8fc7\u6240\u6709\u4e2d\u95f4\u8282\u70b9\u53cd\u5411\u4f20\u64ad \u6216\u8bb8\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u5feb\u6377\u8fde\u63a5 \u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u81ea\u9002\u5e94\u7684\u5feb\u6377\u8fde\u63a5 \\[ f\\left(h_{t-1}, x_{t}\\right)=u_{t} \\odot \\tilde{h}_{t}+\\left(1-u_{t}\\right) \\odot h_{t-1} \\] \u5019\u9009\u66f4\u65b0 \\(\\tilde{h}_{t}=\\tanh \\left(W\\left[x_{t}\\right]+U h_{t-1}+b\\right)\\) \u66f4\u65b0\u95e8 \\(u_{t}=\\sigma\\left(W_{u}\\left[x_{t}\\right]+U_{u} h_{t-1}+b_{u}\\right)\\) \\(\\odot\\) \u8868\u793a\u9010\u5143\u7d20\u7684\u4e58\u6cd5 \u8ba9\u7f51\u7edc\u81ea\u9002\u5e94\u5730\u4fee\u526a\u4e0d\u5fc5\u8981\u7684\u8fde\u63a5 \\[ f\\left(h_{t-1}, x_{t}\\right)=u_{t} \\odot \\tilde{h}_{t}+\\left(1-u_{t}\\right) \\odot h_{t-1} \\] \u5019\u9009\u66f4\u65b0 \\(\\tilde{h}_{t}=\\tanh \\left(W\\left[x_{t}\\right]+U\\left(r_{t} \\odot h_{t-1}\\right)+b\\right)\\) \u91cd\u7f6e\u95e8 \\(r_{t}=\\sigma\\left(W_{r}\\left[x_{t}\\right]+U_{r} h_{t-1}+b_{r}\\right)\\) \u66f4\u65b0\u95e8 \\(u_{t}=\\sigma\\left(W_{u}\\left[x_{t}\\right]+U_{u} h_{t-1}+b_{u}\\right)\\) \u5c06RNN\u5355\u5143\u60f3\u8c61\u4e3a\u4e00\u4e2a\u5fae\u578b\u8ba1\u7b97\u673a tanh-RNN GRU \u95e8\u63a7\u5faa\u73af\u5355\u4f4d\u66f4\u73b0\u5b9e \u6ce8\u610f\uff0c\u5728\u601d\u60f3\u548c\u6ce8\u610f\u529b\u4e0a\u6709\u4e00\u4e9b\u91cd\u53e0 \u4e24\u4e2a\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u95e8\u63a7\u5faa\u73af\u5355\u4f4d\uff1aGRU\u548cLSTM The LSTM (\u7eff\u8272)LSTM\u95e8\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u88ab\u9057\u5fd8/\u5ffd\u7565\uff0c\u800c\u4e0d\u662f\u628a\u6240\u6709\u7684\u4e1c\u897f\u90fd\u585e\u5230\u5176\u4ed6\u6240\u6709\u4e1c\u897f\u4e0a\u9762 (\u6a59\u8272)\u4e0b\u4e00\u6b65\u7684\u975e\u7ebf\u6027\u66f4\u65b0\u5c31\u50cf\u4e00\u4e2aRNN (\u7d2b\u8272)\u8fd9\u90e8\u5206\u662f\u6838\u5fc3\uff08ResNets\u4e5f\u662f\u5982\u6b64\uff09\u4e0d\u662f\u4e58\uff0c\u800c\u662f\u5c06\u975e\u7ebf\u6027\u7684\u4e1c\u897f\u548c \\(c_{t-1}\\) \u76f8\u52a0\u5f97\u5230 \\(c_t\\) \u3002 \\(c_t, c_{t-1}\\) \u4e4b\u95f4\u5b58\u5728\u7ebf\u6027\u8054\u7edc","title":"4. One more look at gated recurrent units and MT"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#5-the-large-output-vocabulary-problem-in-nmt-or-all-nlg","text":"Softmax \u8ba1\u7b97\u4ee3\u4ef7\u6602\u8d35 The word generation problem \u8bcd\u6c47\u751f\u6210\u95ee\u9898 \u8bcd\u6c47\u91cf\u901a\u5e38\u9002\u4e2d:50K Possible approaches for output Hierarchical softmax : tree-structured vocabulary Noise-contrastive estimation : binary classification Train on a subset of the vocabulary at a time; test on a smart on the set of possible translations \u6bcf\u6b21\u5728\u8bcd\u6c47\u8868\u7684\u5b50\u96c6\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u6d4b\u8bd5\u65f6\u81ea\u9002\u5e94\u7684\u9009\u62e9\u8bcd\u6c47\u8868\u7684\u5b50\u96c6 Jean, Cho, Memisevic, Bengio. ACL2015 Use attention to work out what you are translating You can do something simple like dictionary lookup \u76f4\u63a5\u590d\u5236\u539f\u53e5\u4e2d\u7684\u751f\u8bcd\uff1a \u201c\u590d\u5236\u201d\u6a21\u578b More ideas we will get to : Word pieces; char. models MT Evaluation \u2013an example of eval \u4eba\u5de5(\u6700\u597d\u7684!?) Adequacy and Fluency \u5145\u5206\u6027\u548c\u6d41\u7545\u6027(5\u62167\u5c3a\u5ea6) \u9519\u8bef\u5206\u7c7b \u7ffb\u8bd1\u6392\u540d\u6bd4\u8f83\uff08\u4f8b\u5982\u4eba\u5de5\u5224\u65ad\u4e24\u4e2a\u7ffb\u8bd1\u54ea\u4e00\u4e2a\u66f4\u597d\uff09 \u5728\u4f7f\u7528MT\u4f5c\u4e3a\u5b50\u7ec4\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6d4b\u8bd5 \u5982\u95ee\u7b54\u4ece\u5916\u8bed\u6587\u4ef6 \u65e0\u6cd5\u6d4b\u8bd5\u7ffb\u8bd1\u7684\u5f88\u591a\u65b9\u9762(\u4f8b\u5982,\u8de8\u8bed\u8a00IR) \u81ea\u52a8\u5ea6\u91cf BLEU (\u53cc\u8bed\u8bc4\u4ef7\u66ff\u624b) Others like TER, METEOR, \u2026\u2026 BLEU Evaluation Metric N-gram \u7cbe\u5ea6(\u5f97\u5206\u57280\u548c1\u4e4b\u95f4) \u53c2\u8003\u8bd1\u6587\u4e2d\u673a\u5668\u8bd1\u6587\u7684 N-gram \u7684\u767e\u5206\u6bd4\u662f\u591a\u5c11? \u4e00\u4e2an-gram\u662f\u7531n\u4e2a\u5355\u8bcd\u7ec4\u6210\u7684\u5e8f\u5217 \u5728\u4e00\u5b9a\u7684n-gram\u6c34\u5e73\u4e0a\u4e0d\u5141\u8bb8\u4e24\u6b21\u5339\u914d\u76f8\u540c\u7684\u53c2\u8003\u8bd1\u6587\u90e8\u5206(\u4e24\u4e2aMT\u5355\u8bcdairport\u53ea\u6709\u5728\u4e24\u4e2a\u53c2\u8003\u5355\u8bcdairport\u65f6\u624d\u6b63\u786e\uff1b\u4e0d\u80fd\u901a\u8fc7\u8f93\u5165\u201cthe the the the the\u201d\u6765\u4f5c\u5f0a) \u4e5f\u8981\u7528 unigrams \u6765\u8ba1\u7b97\u5355\u4f4d\u7684\u7cbe\u5ea6\uff0c\u7b49\u7b49 \u7b80\u6d01\u60e9\u7f5a BP \u4e0d\u80fd\u53ea\u8f93\u5165\u4e00\u4e2a\u5355\u8bcd\u201cthe\u201d(\u7cbe\u786e\u5ea61.0!) \u4eba\u4eec\u8ba4\u4e3a\u8981\u201c\u73a9\u5f04\u201d\u8fd9\u4e2a\u7cfb\u7edf\u662f\u76f8\u5f53\u56f0\u96be\u7684\u3002\u4f8b\u5982\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\u6765\u6539\u53d8\u673a\u5668\u7684\u8f93\u51fa\uff0c\u4f7fBLEU\u4e0a\u5347\uff0c\u4f46\u8d28\u91cf\u4e0d\u4f1a\u4e0b\u964d\u3002 BLEU\u662f\u4e00\u4e2a\u52a0\u6743\u7684\u51e0\u4f55\u5e73\u5747\u503c\uff0c\u52a0\u4e0a\u4e00\u4e2a\u7b80\u6d01\u7684\u60e9\u7f5a\u56e0\u5b50 \u6ce8\u610f\uff1a\u53ea\u5728\u8bed\u6599\u5e93\u7ea7\u8d77\u4f5c\u7528(0\u4f1a\u6740\u6b7b\u5b83)\uff1b\u53e5\u5b50\u7ea7\u6709\u4e00\u4e2a\u5e73\u6ed1\u7684\u53d8\u4f53 \u4e0b\u56fe\u662f n-grams 1-4 \u7684BLEU\u8ba1\u7b97\u516c\u5f0f Initial results showed that BLEU predicts human judgments well Automatic evaluation of MT \u4eba\u4eec\u5f00\u59cb\u4f18\u5316\u7cfb\u7edf\u6700\u5927\u5316BLEU\u5206\u6570 BLEU\u5206\u6570\u8fc5\u901f\u63d0\u9ad8 BLEU\u548c\u4eba\u7c7b\u5224\u65ad\u8d28\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb\u4e00\u76f4\u4e0b\u964d MT BLEU\u5206\u6570\u63a5\u8fd1\u4eba\u7c7b\u7ffb\u8bd1\u4f46\u662f\u4ed6\u4eec\u7684\u771f\u5b9e\u8d28\u91cf\u4ecd\u7136\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u7ffb\u8bd1 \u60f3\u51fa\u81ea\u52a8MT\u8bc4\u4f30\u5df2\u7ecf\u6210\u4e3a\u81ea\u5df1\u7684\u7814\u7a76\u9886\u57df \u6709\u8bb8\u591a\u5efa\u8bae:TER, METEOR, MaxSim, SEPIA\uff0c\u6211\u4eec\u81ea\u5df1\u7684RTE-MT TERpA \u662f\u4e00\u4e2a\u5177\u6709\u4ee3\u8868\u6027\u7684\uff0c\u597d\u5904\u7406\u4e00\u4e9b\u8bcd\u7684\u9009\u62e9\u53d8\u5316\u7684\u5ea6\u91cf MT\u7814\u7a76\u9700\u8981\u4e00\u4e9b\u81ea\u52a8\u7684\u5ea6\u91cf\uff0c\u4ee5\u5141\u8bb8\u5feb\u901f\u7684\u5f00\u53d1\u548c\u8bc4\u4f30","title":"5. The large output vocabulary problem in NMT (or all NLG)"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#6-doing-your-research-example-straightforward-class-project-apply-nnets-to-task","text":"\u5b9a\u4e49\u4efb\u52a1 \u793a\u4f8b\uff1a\u603b\u7ed3 \u5b9a\u4e49\u6570\u636e\u96c6 \u641c\u7d22\u5b66\u672f\u6570\u636e\u96c6 \u4ed6\u4eec\u5df2\u7ecf\u6709\u57fa\u7ebf \u4f8b\u5982 Newsroom Summarization Dataset https://summari.es \u5b9a\u4e49\u4f60\u81ea\u5df1\u7684\u6570\u636e(\u66f4\u96be\uff0c\u9700\u8981\u65b0\u7684\u57fa\u7ebf) \u5141\u8bb8\u8fde\u63a5\u5230\u4f60\u7684\u7814\u7a76 \u65b0\u95ee\u9898\u63d0\u4f9b\u4e86\u65b0\u7684\u673a\u4f1a \u6709\u521b\u610f:Twitter\u3001\u535a\u5ba2\u3001\u65b0\u95fb\u7b49\u7b49\u3002\u6709\u8bb8\u591a\u6574\u6d01\u7684\u7f51\u7ad9\u4e3a\u65b0\u4efb\u52a1\u63d0\u4f9b\u4e86\u521b\u9020\u6027\u7684\u673a\u4f1a \u6570\u636e\u96c6\u536b\u751f \u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5206\u79bbdevtest and test \u63a5\u4e0b\u6765\u8ba8\u8bba\u66f4\u591a \u5b9a\u4e49\u60a8\u7684\u5ea6\u91cf(s) \u5728\u7ebf\u641c\u7d22\u6b64\u4efb\u52a1\u7684\u5df2\u5efa\u7acb\u7684\u5ea6\u91cf \u6458\u8981: Rouge (Recall-Oriented Understudy for GistingEvaluation) \uff0c\u5b83\u5b9a\u4e49\u4e86\u4eba\u5de5\u6458\u8981\u7684 n-gram\u91cd\u53e0 \u4eba\u5de5\u8bc4\u4ef7\u4ecd\u7136\u66f4\u9002\u5408\u4e8e\u6458\u8981\uff1b\u4f60\u53ef\u4ee5\u505a\u4e00\u4e2a\u5c0f\u89c4\u6a21\u7684\u4eba\u7c7b\u8ba1\u7b97 \u5efa\u7acb\u57fa\u7ebf \u9996\u5148\u5b9e\u73b0\u6700\u7b80\u5355\u7684\u6a21\u578b(\u901a\u5e38\u5bf9unigrams\u3001bigrams \u6216\u5e73\u5747\u5b57\u5411\u91cf\u8fdb\u884c\u903b\u8f91\u56de\u5f52) \u5728\u8bad\u7ec3\u548c\u5f00\u53d1\u4e2d\u8ba1\u7b97\u6307\u6807 \u5982\u679c\u5ea6\u91cf\u4ee4\u4eba\u60ca\u8bb6\u4e14\u6ca1\u6709\u9519\u8bef\uff0c\u90a3\u4e48 \u5b8c\u6210!\u95ee\u9898\u592a\u7b80\u5355\u4e86\u3002\u9700\u8981\u91cd\u542f \u5b9e\u73b0\u73b0\u6709\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b \u5728\u8bad\u7ec3\u548c\u5f00\u53d1\u4e2d\u8ba1\u7b97\u6307\u6807 \u5206\u6790\u8f93\u51fa\u548c\u9519\u8bef \u8fd9\u95e8\u8bfe\u7684\u6700\u4f4e\u6807\u51c6 \u6c38\u8fdc\u8981\u63a5\u8fd1\u60a8\u7684\u6570\u636e\uff08\u9664\u4e86\u6700\u540e\u7684\u6d4b\u8bd5\u96c6\uff09 \u53ef\u89c6\u5316\u6570\u636e\u96c6 \u6536\u96c6\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f \u67e5\u770b\u9519\u8bef \u5206\u6790\u4e0d\u540c\u7684\u8d85\u53c2\u6570\u5982\u4f55\u5f71\u54cd\u6027\u80fd \u901a\u8fc7\u826f\u597d\u7684\u5b9e\u9a8c\u8bbe\u7f6e\uff0c\u5c1d\u8bd5\u4e0d\u540c\u7684\u6a21\u578b\u548c\u6a21\u578b\u53d8\u4f53\uff0c\u8fbe\u5230\u5feb\u901f\u8fed\u4ee3\u7684\u76ee\u7684 Fixed window neural model Recurrent neural network Recursive neural network Convolutional neural network Attention-basedmodel Pots of data \u8bb8\u591a\u516c\u5f00\u53ef\u7528\u7684\u6570\u636e\u96c6\u90fd\u662f\u4f7f\u7528train/dev/test\u7ed3\u6784\u53d1\u5e03\u7684\u3002\u6211\u4eec\u90fd\u5728\u8363\u8a89\u7cfb\u7edf\u4e0a\uff0c\u53ea\u5728\u5f00\u53d1\u5b8c\u6210\u65f6\u624d\u8fd0\u884c\u6d4b\u8bd5\u96c6 \u8fd9\u6837\u7684\u5206\u5272\u5047\u8bbe\u6709\u4e00\u4e2a\u76f8\u5f53\u5927\u7684\u6570\u636e\u96c6 \u5982\u679c\u6ca1\u6709\u5f00\u53d1\u96c6\u6216\u8005\u60a8\u60f3\u8981\u4e00\u4e2a\u5355\u72ec\u7684\u8c03\u4f18\u96c6\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u901a\u8fc7\u5206\u5272\u8bad\u7ec3\u6570\u636e\u6765\u521b\u5efa\u4e00\u4e2a\u8c03\u4f18\u96c6\uff0c\u5c3d\u7ba1\u60a8\u5fc5\u987b\u6743\u8861\u5b83\u7684\u5927\u5c0f/\u6709\u7528\u6027\u4e0e\u8bad\u7ec3\u96c6\u5927\u5c0f\u7684\u51cf\u5c11 \u62e5\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684\u6d4b\u8bd5\u96c6\uff0c\u786e\u4fdd\u6240\u6709\u7cfb\u7edf\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u9ec4\u91d1\u6570\u636e\u8fdb\u884c\u8bc4\u4f30\u3002\u8fd9\u901a\u5e38\u662f\u597d\u7684\uff0c\u4f46\u662f\u5982\u679c\u6d4b\u8bd5\u96c6\u5177\u6709\u4e0d\u5bfb\u5e38\u7684\u5c5e\u6027\uff0c\u4ece\u800c\u626d\u66f2\u4e86\u4efb\u52a1\u7684\u8fdb\u5ea6\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u3002 Training models and pots of data \u8bad\u7ec3\u65f6,\u6a21\u578b\u8fc7\u62df\u5408 \u8be5\u6a21\u578b\u6b63\u786e\u5730\u63cf\u8ff0\u4e86\u60a8\u6240\u8bad\u7ec3\u7684\u7279\u5b9a\u6570\u636e\u4e2d\u53d1\u751f\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u6a21\u5f0f\u8fd8\u4e0d\u591f\u901a\u7528\uff0c\u4e0d\u9002\u5408\u5e94\u7528\u4e8e\u65b0\u6570\u636e \u76d1\u63a7\u548c\u907f\u514d\u95ee\u9898\u8fc7\u5ea6\u62df\u5408\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u72ec\u7acb\u7684\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u96c6\u2026 \u60a8\u5728\u4e00\u4e2a\u8bad\u7ec3\u96c6\u4e0a\u6784\u5efa(\u8bc4\u4ef7/\u8bad\u7ec3)\u4e00\u4e2a\u6a21\u578b\u3002 \u901a\u5e38\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u96c6\u4e0a\u8bbe\u7f6e\u8fdb\u4e00\u6b65\u7684\u8d85\u53c2\u6570\uff0c\u5373\u8c03\u4f18\u96c6 \u8c03\u4f18\u96c6\u662f\u7528\u6765\u8c03\u6574\u8d85\u53c2\u6570\u7684\u8bad\u7ec3\u96c6 \u5728\u5f00\u53d1\u96c6(\u5f00\u53d1\u6d4b\u8bd5\u96c6\u6216\u9a8c\u8bc1\u96c6)\u4e0a\u5ea6\u91cf\u8fdb\u5ea6 \u5982\u679c\u60a8\u7ecf\u5e38\u8fd9\u6837\u505a\uff0c\u5c31\u4f1a\u8fc7\u5ea6\u9002\u5e94\u5f00\u53d1\u96c6\uff0c\u6240\u4ee5\u6700\u597d\u6709\u7b2c\u4e8c\u4e2a\u5f00\u53d1\u96c6\uff0c\u5373dev2set \u53ea\u6709\u6700\u540e,\u4f60\u8bc4\u4f30\u548c\u6700\u7ec8\u6570\u636e\u5728\u4e00\u4e2a\u6d4b\u8bd5\u96c6 \u975e\u5e38\u5c11\u5730\u4f7f\u7528\u6700\u7ec8\u6d4b\u8bd5\u96c6\u2026\u2026\u7406\u60f3\u60c5\u51b5\u4e0b\u53ea\u4f7f\u7528\u4e00\u6b21 \u57f9\u8bad\u3001\u8c03\u4f18\u3001\u5f00\u53d1\u548c\u6d4b\u8bd5\u96c6\u9700\u8981\u5b8c\u5168\u4e0d\u540c \u5728\u8bad\u7ec3\u6240\u4f7f\u7528\u7684\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u6d4b\u8bd5\u662f\u65e0\u6548\u7684 \u60a8\u5c06\u5f97\u5230\u4e00\u4e2a\u9519\u8bef\u7684\u826f\u597d\u6027\u80fd\u3002\u6211\u4eec\u901a\u5e38\u8bad\u7ec3\u65f6\u4f1a\u8fc7\u62df\u5408 \u60a8\u9700\u8981\u4e00\u4e2a\u72ec\u7acb\u7684\u8c03\u4f18 \u5982\u679c\u8c03\u4f18\u4e0etrain\u76f8\u540c\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u8bbe\u7f6e\u8d85\u53c2\u6570 \u5982\u679c\u4f60\u4e00\u76f4\u8fd0\u884c\u5728\u76f8\u540c\u7684\u8bc4\u4ef7\u96c6\uff0c\u4f60\u5f00\u59cb\u5728\u8bc4\u4ef7\u96c6\u4e0a\u8fc7\u62df\u5408 \u5b9e\u9645\u4e0a\uff0c\u4f60\u662f\u5728\u5bf9\u8bc4\u4f30\u96c6\u8fdb\u884c\u201c\u8bad\u7ec3\u201d\u2026\u2026\u4f60\u5728\u5b66\u4e60\u90a3\u4e9b\u5bf9\u7279\u5b9a\u7684\u8bc4\u4f30\u96c6\u6709\u7528\u548c\u6ca1\u7528\u7684\u4e1c\u897f\uff0c\u5e76\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f \u8981\u83b7\u5f97\u7cfb\u7edf\u6027\u80fd\u7684\u6709\u6548\u5ea6\u91cf\uff0c\u60a8\u9700\u8981\u53e6\u4e00\u4e2a\u672a\u7ecf\u8bad\u7ec3\u7684\u72ec\u7acb\u6d4b\u8bd5\u96c6\uff0c\u5373 dev2 \u548c\u6700\u7ec8\u6d4b\u8bd5 \u6211\u4eec\u9700\u8981\u610f\u8bc6\u5230\uff0c\u6bcf\u4e00\u6b21\u901a\u8fc7\u8bc4\u4f30\u7ed3\u679c\u7684\u53d8\u5316\u800c\u5b8c\u6210\u7684\u8c03\u6574\uff0c\u90fd\u662f\u5bf9\u6570\u636e\u96c6\u7684\u62df\u5408\u8fc7\u7a0b\u3002\u6211\u4eec\u9700\u8981\u5bf9\u6570\u636e\u96c6\u7684\u8fc7\u62df\u5408\uff0c\u4f46\u662f\u4e0d\u53ef\u4ee5\u5728\u72ec\u7acb\u6d4b\u8bd5\u96c6\u4e0a\u8fc7\u62df\u5408\uff0c\u5426\u5219\u5c31\u5931\u53bb\u4e86\u6d4b\u8bd5\u96c6\u7684\u610f\u4e49 Getting your neural network to train \u4ece\u79ef\u6781\u7684\u6001\u5ea6\u5f00\u59cb \u795e\u7ecf\u7f51\u7edc\u60f3\u8981\u5b66\u4e60 \u5982\u679c\u7f51\u7edc\u6ca1\u6709\u5b66\u4e60\uff0c\u4f60\u5c31\u662f\u5728\u505a\u4e00\u4e9b\u4e8b\u60c5\u6765\u963b\u6b62\u5b83\u6210\u529f\u5730\u5b66\u4e60 \u8ba4\u6e05\u6b8b\u9177\u7684\u73b0\u5b9e \u6709\u5f88\u591a\u4e8b\u60c5\u4f1a\u5bfc\u81f4\u795e\u7ecf\u7f51\u7edc\u5b8c\u5168\u4e0d\u5b66\u4e60\u6216\u8005\u5b66\u4e60\u4e0d\u597d \u627e\u5230\u5e76\u4fee\u590d\u5b83\u4eec(\u201c\u8c03\u8bd5\u548c\u8c03\u4f18\u201d)\u901a\u5e38\u9700\u8981\u66f4\u591a\u7684\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u5b9e\u73b0\u60a8\u7684\u6a21\u578b \u5f88\u96be\u7b97\u51fa\u8fd9\u4e9b\u4e1c\u897f\u662f\u4ec0\u4e48 \u4f46\u662f\u7ecf\u9a8c\u3001\u5b9e\u9a8c\u548c\u7ecf\u9a8c\u6cd5\u5219\u4f1a\u6709\u6240\u5e2e\u52a9\uff01 Models are sensitive to learning rates From Andrej Karpathy, CS231n course notes Models are sensitive to initialization From Michael Nielsen http://neuralnetworksanddeeplearning.com/chap3.html Training a (gated) RNN \u4f7f\u7528LSTM\u6216GRU\uff1a\u5b83\u4f7f\u60a8\u7684\u751f\u6d3b\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\uff01 \u521d\u59cb\u5316\u9012\u5f52\u77e9\u9635\u4e3a\u6b63\u4ea4\u77e9\u9635 \u7528\u4e00\u4e2a\u53ef\u611f\u77e5\u7684(\u5c0f\u7684)\u6bd4\u4f8b\u521d\u59cb\u5316\u5176\u4ed6\u77e9\u9635 \u521d\u59cb\u5316\u5fd8\u8bb0\u95e8\u504f\u5dee\u4e3a1\uff1a\u9ed8\u8ba4\u8bb0\u4f4f \u4f7f\u7528\u81ea\u9002\u5e94\u5b66\u4e60\u901f\u7387\u7b97\u6cd5\uff1aAdam, AdaDelta\uff0c\u2026 \u68af\u5ea6\u8303\u6570\u7684\u88c1\u526a\uff1a1-5\u4f3c\u4e4e\u662f\u4e00\u4e2a\u5408\u7406\u7684\u9608\u503c\uff0c\u5f53\u4e0eAdam \u6216 AdaDelta\u4e00\u8d77\u4f7f\u7528 \u8981\u4e48\u53ea\u4f7f\u7528 dropout vertically\uff0c\u8981\u4e48\u7814\u7a76\u4f7f\u7528Bayesian dropout(Gal\u548cgahramani -\u4e0d\u5728PyTorch\u4e2d\u539f\u751f\u652f\u6301) \u8981\u6709\u8010\u5fc3\uff01\u4f18\u5316\u9700\u8981\u65f6\u95f4 Experimental strategy \u589e\u91cf\u5730\u5de5\u4f5c\uff01 \u4ece\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u6a21\u578b\u5f00\u59cb \u8ba9\u5b83\u5f00\u59cb\u5de5\u4f5c\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u6dfb\u52a0\u4fee\u9970\u7269\uff0c\u8ba9\u6a21\u578b\u4f7f\u7528\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a(\u6216\u8005\u653e\u5f03\u5b83\u4eec) \u6700\u521d\u8fd0\u884c\u5728\u5c11\u91cf\u6570\u636e\u4e0a \u4f60\u4f1a\u66f4\u5bb9\u6613\u5728\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\u4e2d\u770b\u5230bug \u50cf8\u4e2a\u4f8b\u5b50\u8fd9\u6837\u7684\u4e1c\u897f\u5f88\u597d \u901a\u5e38\u5408\u6210\u6570\u636e\u5bf9\u8fd9\u5f88\u6709\u7528 \u786e\u4fdd\u4f60\u80fd\u5f97\u5230100%\u7684\u6570\u636e \u5426\u5219\u4f60\u7684\u6a21\u578b\u80af\u5b9a\u8981\u4e48\u4e0d\u591f\u5f3a\u5927\uff0c\u8981\u4e48\u662f\u7834\u788e\u7684 \u5728\u5927\u578b\u6570\u636e\u96c6\u4e2d\u8fd0\u884c \u6a21\u578b\u4f18\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e\u4ecd\u5e94\u63a5\u8fd1100% \u5426\u5219\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u8003\u8651\u4e00\u79cd\u66f4\u5f3a\u5927\u7684\u6a21\u5f0f\u6765\u8fc7\u62df\u5408\u8bad\u7ec3\u6570\u636e \u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u8fc7\u62df\u5408\u5728\u8fdb\u884c\u6df1\u5ea6\u5b66\u4e60\u65f6\u5e76\u4e0d\u53ef\u6015 \u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u5584\u4e8e\u4e00\u822c\u5316\uff0c\u56e0\u4e3a\u5206\u5e03\u5f0f\u8868\u793a\u5171\u4eab\u7edf\u8ba1\u5f3a\u5ea6\uff0c\u548c\u5bf9\u8bad\u7ec3\u6570\u636e\u7684\u8fc7\u5ea6\u62df\u5408\u65e0\u5173 \u4f46\u662f\uff0c\u73b0\u5728\u4ecd\u7136\u9700\u8981\u826f\u597d\u7684\u6cdb\u5316\u6027\u80fd \u5bf9\u6a21\u578b\u8fdb\u884c\u6b63\u5219\u5316\uff0c\u76f4\u5230\u5b83\u4e0d\u4e0edev\u6570\u636e\u8fc7\u62df\u5408\u4e3a\u6b62 \u50cfL2\u6b63\u5219\u5316\u8fd9\u6837\u7684\u7b56\u7565\u662f\u6709\u7528\u7684 \u4f46\u901a\u5e38Dropout\u662f\u6210\u529f\u7684\u79d8\u8bc0 Details matter! \u67e5\u770b\u60a8\u7684\u6570\u636e\uff0c\u6536\u96c6\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f \u67e5\u770b\u60a8\u7684\u6a21\u578b\u7684\u8f93\u51fa\uff0c\u8fdb\u884c\u9519\u8bef\u5206\u6790 \u8c03\u4f18\u8d85\u53c2\u6570\u5bf9\u4e8e\u795e\u7ecf\u7f51\u7edc\u51e0\u4e4e\u6240\u6709\u7684\u6210\u529f\u90fd\u975e\u5e38\u91cd\u8981","title":"6. Doing your research example: Straightforward Class Project: Apply NNets to Task"},{"location":"CS224n-2019-09-Practical%20Tips%20for%20Final%20Projects/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/","text":"Lecture 10 Question Answering and the Default Final Project \u00b6 Lecture Plan Final final project notes, etc. Motivation/History The SQuADdataset The Stanford Attentive Reader model BiDAF Recent, more advanced architectures ELMo and BERT preview Project writeup Abstract Introduction Prior related work Model Data Experiments Results Analysis & Conclusion \u5728\u8c37\u6b4c\u4e2d\u68c0\u7d22\u8c01\u662f\u6fb3\u5927\u5229\u4e9a\u7b2c\u4e09\u4efb\u603b\u7406\uff0c\u53ef\u4ee5\u83b7\u5f97\u7b54\u6848\u3002 \u6280\u672f\u8bf4\u660e\uff1a\u8fd9\u662f\u4eceweb\u9875\u9762\u4e2d\u63d0\u53d6\u7684\u201c\u7279\u6027\u7247\u6bb5\u201d\u56de\u7b54\uff0c\u800c\u4e0d\u662f\u4f7f\u7528(\u7ed3\u6784\u5316\u7684)\u8c37\u6b4c\u77e5\u8bc6\u56fe(\u4ee5\u524d\u79f0\u4e3aFreebase)\u56de\u7b54\u7684\u95ee\u9898\u3002 \u6211\u4eec\u4eca\u5929\u8981\u8c08\u8bba\u7684\u5c31\u662f\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u7ed3\u6784\u5316\u6570\u636e\u5b58\u50a8\u7684\u95ee\u7b54\u3002 2. Motivation: Question answering \u00b6 \u62e5\u6709\u5927\u91cf\u7684\u5168\u6587\u6587\u6863\u96c6\u5408\uff0c\u4f8b\u5982\u7f51\u7edc\uff0c\u7b80\u5355\u5730\u8fd4\u56de\u76f8\u5173\u6587\u6863\u7684\u4f5c\u7528\u662f\u6709\u9650\u7684 \u76f8\u53cd\uff0c\u6211\u4eec\u7ecf\u5e38\u60f3\u8981\u5f97\u5230\u95ee\u9898\u7684\u7b54\u6848 \u5c24\u5176\u662f\u5728\u79fb\u52a8\u8bbe\u5907\u4e0a \u6216\u662f\u4f7f\u7528\u50cfAlexa\u3001Google assistant\u8fd9\u6837\u7684\u6570\u5b57\u52a9\u7406\u8bbe\u5907\u3002 \u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5206\u89e3\u6210\u4e24\u90e8\u5206 \u67e5\u627e(\u53ef\u80fd)\u5305\u542b\u7b54\u6848\u7684\u6587\u6863 \u53ef\u4ee5\u901a\u8fc7\u4f20\u7edf\u7684\u4fe1\u606f\u68c0\u7d22/web\u641c\u7d22\u5904\u7406 (\u4e0b\u4e2a\u5b63\u5ea6\u6211\u5c06\u8bb2\u6388cs276\uff0c\u5b83\u5c06\u5904\u7406\u8fd9\u4e2a\u95ee\u9898 \u5728\u4e00\u6bb5\u6216\u4e00\u4efd\u6587\u4ef6\u4e2d\u627e\u5230\u7b54\u6848 \u8fd9\u4e2a\u95ee\u9898\u901a\u5e38\u88ab\u79f0\u4e3a\u9605\u8bfb\u7406\u89e3 \u8fd9\u5c31\u662f\u6211\u4eec\u4eca\u5929\u8981\u5173\u6ce8\u7684 A Brief History of Reading Comprehension \u8bb8\u591a\u65e9\u671f\u7684NLP\u5de5\u4f5c\u5c1d\u8bd5\u9605\u8bfb\u7406\u89e3 Schank, Abelson, Lehnert et al. c. 1977 \u2013\u201cYale A.I. Project\u201d \u7531Lynette Hirschman\u57281999\u5e74\u590d\u6d3b NLP\u7cfb\u7edf\u80fd\u56de\u7b54\u4e09\u81f3\u516d\u5e74\u7ea7\u5b66\u751f\u7684\u4eba\u7c7b\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u5417?\u7b80\u5355\u7684\u65b9\u6cd5\u5c1d\u8bd5 Chris Burges\u4e8e2013\u5e74\u901a\u8fc7 MCTest \u53c8\u91cd\u65b0\u590d\u6d3b RC \u518d\u6b21\u901a\u8fc7\u7b80\u5355\u7684\u6545\u4e8b\u6587\u672c\u56de\u7b54\u95ee\u9898 2015/16\u5e74\uff0c\u968f\u7740\u5927\u578b\u6570\u636e\u96c6\u7684\u4ea7\u751f\uff0c\u95f8\u95e8\u5f00\u542f\uff0c\u53ef\u4ee5\u5efa\u7acb\u76d1\u7763\u795e\u7ecf\u7cfb\u7edf Hermann et al. (NIPS 2015) DeepMind CNN/DM dataset Rajpurkaret al. (EMNLP 2016) SQuAD MS MARCO, TriviaQA, RACE, NewsQA, NarrativeQA, \u2026 Machine Comprehension (Burges 2013) \u201c\u4e00\u53f0\u673a\u5668\u80fd\u591f\u7406\u89e3\u6587\u672c\u7684\u6bb5\u843d\uff0c\u5bf9\u4e8e\u5927\u591a\u6570\u6bcd\u8bed\u4f7f\u7528\u8005\u80fd\u591f\u6b63\u786e\u56de\u7b54\u7684\u5173\u4e8e\u6587\u672c\u7684\u4efb\u4f55\u95ee\u9898\uff0c\u8be5\u673a\u5668\u90fd\u80fd\u63d0\u4f9b\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e9b\u8bf4\u8bdd\u8005\u65e2\u80fd\u56de\u7b54\u8be5\u95ee\u9898\uff0c\u53c8\u4e0d\u4f1a\u5305\u542b\u4e0e\u8be5\u95ee\u9898\u65e0\u5173\u7684\u4fe1\u606f\u3002\u201d MCTestReading Comprehension A Brief History of Open-domain Question Answering Simmons et al. (1964) \u9996\u5148\u63a2\u7d22\u4e86\u5982\u4f55\u57fa\u4e8e\u5339\u914d\u95ee\u9898\u548c\u7b54\u6848\u7684\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\uff0c\u4ece\u8bf4\u660e\u6027\u6587\u672c\u4e2d\u56de\u7b54\u95ee\u9898 Murax(Kupiec1993) \u65e8\u5728\u4f7f\u7528IR\u548c\u6d45\u5c42\u8bed\u8a00\u5904\u7406\u5728\u5728\u7ebf\u767e\u79d1\u5168\u4e66\u4e0a\u56de\u7b54\u95ee\u9898 NIST TREC QA track \u59cb\u4e8e1999\u5e74\uff0c\u9996\u6b21\u4e25\u683c\u8c03\u67e5\u4e86\u5bf9\u5927\u91cf\u6587\u6863\u7684\u4e8b\u5b9e\u95ee\u9898\u7684\u56de\u7b54 IBM\u7684\u5192\u9669\uff01System (DeepQA, 2011)\u63d0\u51fa\u4e86\u4e00\u4e2a\u7248\u672c\u7684\u95ee\u9898;\u5b83\u4f7f\u7528\u4e86\u8bb8\u591a\u65b9\u6cd5\u7684\u96c6\u5408 DrQA(Chen et al. 2016)\u91c7\u7528IR\u7ed3\u5408\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\uff0c\u5c06\u6df1\u5ea6\u5b66\u4e60\u5f15\u5165\u5f00\u653e\u9886\u57df\u7684QA Turn-of-the Millennium Full NLP QA [architecture of LCC (Harabagiu/Moldovan) QA system, circa 2003] \u590d\u6742\u7684\u7cfb\u7edf\uff0c\u4f46\u4ed6\u4eec\u5728\u201c\u4e8b\u5b9e\u201d\u95ee\u9898\u4e0a\u505a\u5f97\u76f8\u5f53\u597d \u975e\u5e38\u590d\u6742\u7684\u591a\u6a21\u5757\u591a\u7ec4\u4ef6\u7684\u7cfb\u7edf \u9996\u5148\u5bf9\u95ee\u9898\u8fdb\u884c\u89e3\u6790\uff0c\u4f7f\u7528\u624b\u5199\u7684\u8bed\u4e49\u89c4\u8303\u5316\u89c4\u5219\uff0c\u5c06\u5176\u8f6c\u5316\u4e3a\u66f4\u597d\u7684\u8bed\u4e49\u5f62\u5f0f \u5728\u901a\u8fc7\u95ee\u9898\u7c7b\u578b\u5206\u7c7b\u5668\uff0c\u627e\u51fa\u95ee\u9898\u5728\u5bfb\u627e\u7684\u8bed\u4e49\u7c7b\u578b \u4fe1\u606f\u68c0\u7d22\u7cfb\u7edf\u627e\u5230\u53ef\u80fd\u5305\u542b\u7b54\u6848\u7684\u6bb5\u843d\uff0c\u6392\u5e8f\u540e\u8fdb\u884c\u9009\u62e9 NER\u8bc6\u522b\u5019\u9009\u5b9e\u4f53\u518d\u8fdb\u884c\u5224\u65ad \u8fd9\u6837\u7684QA\u7cfb\u7edf\u5728\u7279\u5b9a\u9886\u57df\u5f88\u6709\u6548\uff1aFactoid Question Answering \u9488\u5bf9\u5b9e\u4f53\u7684\u95ee\u7b54 3. Stanford Question Answering Dataset (SQuAD) \u00b6 Passage \u662f\u6765\u81ea\u7ef4\u57fa\u767e\u79d1\u7684\u4e00\u6bb5\u6587\u672c\uff0c\u7cfb\u7edf\u9700\u8981\u56de\u7b54\u95ee\u9898\uff0c\u5728\u6587\u7ae0\u4e2d\u627e\u51fa\u7b54\u6848 \u7b54\u6848\u5fc5\u987b\u662f\u6587\u7ae0\u4e2d\u7684\u4e00\u7cfb\u5217\u5355\u8bcd\u5e8f\u5217\uff0c\u4e5f\u5c31\u662f\u63d0\u53d6\u5f0f\u95ee\u7b54 100k examples SQuAD evaluation, v1.1 \u4f5c\u8005\u6536\u96c6\u4e863\u4e2a\u9ec4\u91d1\u7b54\u6848 \u7cfb\u7edf\u5728\u4e24\u4e2a\u6307\u6807\u4e0a\u8ba1\u7b97\u5f97\u5206 \u7cbe\u786e\u5339\u914d\uff1a1/0\u7684\u51c6\u786e\u5ea6\uff0c\u60a8\u662f\u5426\u5339\u914d\u4e09\u4e2a\u7b54\u6848\u4e2d\u7684\u4e00\u4e2a F1\uff1a\u5c06\u7cfb\u7edf\u548c\u6bcf\u4e2a\u7b54\u6848\u90fd\u89c6\u4e3a\u8bcd\u888b\uff0c\u5e76\u8bc4\u4f30 \\[ \\text{Precision} =\\frac{T P}{T P+F P}, \\text { Recall }=\\frac{T P}{T P+F N}, \\text { harmonic mean } \\mathrm{F} 1=\\frac{2 P R}{P+R} \\] Precision \u548c Recall \u7684\u8c03\u548c\u5e73\u5747\u503c \u5206\u6570\u662f(\u5b8f\u89c2)\u5e73\u5747\u6bcf\u9898F1\u5206\u6570 F1\u6d4b\u91cf\u88ab\u89c6\u4e3a\u66f4\u53ef\u9760\u7684\u6307\u6807\uff0c\u4f5c\u4e3a\u4e3b\u8981\u6307\u6807\u4f7f\u7528 \u5b83\u4e0d\u662f\u57fa\u4e8e\u9009\u62e9\u662f\u5426\u548c\u4eba\u7c7b\u9009\u62e9\u7684\u8de8\u5ea6\u5b8c\u5168\u76f8\u540c\uff0c\u4eba\u7c7b\u9009\u62e9\u7684\u8de8\u5ea6\u5bb9\u6613\u53d7\u5230\u5404\u79cd\u5f71\u54cd\uff0c\u5305\u62ec\u6362\u884c \u5728\u5355\u6b21\u7ea7\u522b\u5339\u914d\u4e0d\u540c\u7684\u7b54\u6848 \u8fd9\u4e24\u4e2a\u6307\u6807\u5ffd\u89c6\u6807\u70b9\u7b26\u53f7\u548c\u51a0\u8bcd(a, an, the only) SQuAD2.0 SQuAD1.0\u7684\u4e00\u4e2a\u7f3a\u9677\u662f\uff0c\u6240\u6709\u95ee\u9898\u90fd\u6709\u7b54\u6848\u7684\u6bb5\u843d \u7cfb\u7edf(\u9690\u5f0f\u5730)\u6392\u540d\u5019\u9009\u7b54\u6848\u5e76\u9009\u62e9\u6700\u597d\u7684\u4e00\u4e2a\uff0c\u8fd9\u5c31\u53d8\u6210\u4e86\u4e00\u79cd\u6392\u540d\u4efb\u52a1 \u4f60\u4e0d\u5fc5\u5224\u65ad\u4e00\u4e2aspan\u662f\u5426\u56de\u7b54\u4e86\u8fd9\u4e2a\u95ee\u9898 SQuAD2.0\u4e2d \u2153 \u7684\u8bad\u7ec3\u95ee\u9898\u6ca1\u6709\u56de\u7b54\uff0c\u5927\u7ea6 \u00bd \u7684\u5f00\u53d1/\u6d4b\u8bd5\u95ee\u9898\u6ca1\u6709\u56de\u7b54 \u5bf9\u4e8eNo Answer examples, no answer \u83b7\u5f97\u7684\u5f97\u5206\u4e3a1\uff0c\u5bf9\u4e8e\u7cbe\u786e\u5339\u914d\u548cF1\uff0c\u4efb\u4f55\u5176\u4ed6\u54cd\u5e94\u7684\u5f97\u5206\u90fd\u4e3a0 SQuAD2.0\u6700\u7b80\u5355\u7684\u7cfb\u7edf\u65b9\u6cd5 \u5bf9\u4e8e\u4e00\u4e2a span \u662f\u5426\u56de\u7b54\u4e86\u4e00\u4e2a\u95ee\u9898\u6709\u4e00\u4e2a\u9608\u503c\u8bc4\u5206 \u6216\u8005\u60a8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u786e\u8ba4\u56de\u7b54\u7684\u7ec4\u4ef6 \u7c7b\u4f3c \u81ea\u7136\u8bed\u8a00\u63a8\u7406 \u6216\u8005 \u7b54\u6848\u9a8c\u8bc1 Example \u5f97\u5206\u9ad8\u7684\u7cfb\u7edf\u5e76\u4e0d\u80fd\u771f\u6b63\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff01 Good systems are great, but still basic NLU errors \u7cfb\u7edf\u6ca1\u6709\u771f\u6b63\u4e86\u89e3\u4e00\u5207\uff0c\u4ecd\u7136\u5728\u505a\u4e00\u79cd\u5339\u914d\u95ee\u9898 SQuAD limitations SQuAD \u4e5f\u6709\u5176\u4ed6\u4e00\u4e9b\u5173\u952e\u9650\u5236 \u53ea\u6709 span-based \u7b54\u6848(\u6ca1\u6709 yes/no\uff0c\u8ba1\u6570\uff0c\u9690\u5f0f\u7684\u4e3a\u4ec0\u4e48) \u95ee\u9898\u662f\u770b\u7740\u6bb5\u843d\u6784\u9020\u7684 \u901a\u5e38\u4e0d\u662f\u771f\u6b63\u7684\u4fe1\u606f\u9700\u6c42 \u4e00\u822c\u6765\u8bf4\uff0c\u95ee\u9898\u548c\u7b54\u6848\u4e4b\u95f4\u7684\u8bcd\u6c47\u548c\u53e5\u6cd5\u5339\u914d\u6bd4IRL\u66f4\u5927 \u95ee\u9898\u4e0e\u6587\u7ae0\u9ad8\u5ea6\u91cd\u53e0\uff0c\u65e0\u8bba\u662f\u5355\u8bcd\u8fd8\u662f\u53e5\u6cd5\u7ed3\u6784 \u9664\u4e86\u5171\u540c\u53c2\u7167\uff0c\u51e0\u4e4e\u6ca1\u6709\u4efb\u4f55\u591a\u4e8b\u5b9e/\u53e5\u5b50\u63a8\u7406 \u4e0d\u8fc7\u8fd9\u662f\u4e00\u4e2a\u76ee\u6807\u660e\u786e\uff0c\u7ed3\u6784\u826f\u597d\u7684\u5e72\u51c0\u7684\u6570\u636e\u96c6 \u5b83\u4e00\u76f4\u662fQA dataset\u4e0a\u6700\u5e38\u7528\u548c\u6700\u5177\u7ade\u4e89\u529b\u7684\u6570\u636e\u96c6 \u5b83\u4e5f\u662f\u6784\u5efa\u884c\u4e1a\u7cfb\u7edf\u7684\u4e00\u4e2a\u6709\u7528\u7684\u8d77\u70b9\uff08\u5c3d\u7ba1\u57df\u5185\u6570\u636e\u603b\u662f\u5f88\u6709\u5e2e\u52a9\uff01\uff09 \u5e76\u4e14\u6211\u4eec\u6b63\u5728\u4f7f\u7528\u5b83 4. Stanford Attentive Reader \u00b6 [Chen, Bolton, & Manning 2016] [Chen, Fisch, Weston & Bordes2017] DrQA [Chen 2018] \u5c55\u793a\u4e86\u4e00\u4e2a\u6700\u5c0f\u7684\uff0c\u975e\u5e38\u6210\u529f\u7684\u9605\u8bfb\u7406\u89e3\u548c\u95ee\u9898\u56de\u7b54\u67b6\u6784 \u540e\u6765\u88ab\u79f0\u4e3a the Stanford Attentive Reader \u9996\u5148\u5c06\u95ee\u9898\u7528\u5411\u91cf\u8868\u793a \u5bf9\u95ee\u9898\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u67e5\u627e\u5176\u8bcd\u5d4c\u5165 \u8f93\u5165\u5230\u53cc\u5411LSTM\u4e2d\u5e76\u5c06\u6700\u7ec8\u7684 hidden state \u62fc\u63a5 \u518d\u5904\u7406\u6587\u7ae0 \u67e5\u627e\u6bcf\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\u5e76\u8f93\u5165\u5230\u53cc\u5411LSTM\u4e2d \u4f7f\u7528\u53cc\u7ebf\u6027\u6ce8\u610f\u529b\uff0c\u5c06\u6bcf\u4e2aLSTM\u7684\u8868\u793a(LSTM\u7684\u4e24\u4e2a\u9690\u85cf\u72b6\u6001\u7684\u8fde\u63a5)\u4e0e\u95ee\u9898\u8868\u793a\u505a\u8fd0\u7b97\uff0c\u83b7\u5f97\u4e86\u4e0d\u540c\u4f4d\u7f6e\u7684\u6ce8\u610f\u529b\uff0c\u4ece\u800c\u83b7\u5f97\u7b54\u6848\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u518d\u4ee5\u540c\u6837\u65b9\u5f0f\u83b7\u5f97\u7b54\u6848\u7684\u7ed3\u675f\u4f4d\u7f6e \u4e3a\u4e86\u5728\u6587\u7ae0\u4e2d\u627e\u5230\u7b54\u6848\uff0c\u4f7f\u7528\u95ee\u9898\u7684\u5411\u91cf\u8868\u793a\uff0c\u6765\u89e3\u51b3\u7b54\u6848\u5728\u4ec0\u4e48\u4f4d\u7f6e\u4f7f\u7528\u6ce8\u610f\u529b Stanford Attentive Reader++ \u6574\u4e2a\u6a21\u578b\u7684\u6240\u6709\u53c2\u6570\u90fd\u662f\u7aef\u5230\u7aef\u8bad\u7ec3\u7684\uff0c\u8bad\u7ec3\u7684\u76ee\u6807\u662f\u5f00\u59cb\u4f4d\u7f6e\u4e0e\u7ed3\u675f\u4e3a\u6b62\u7684\u51c6\u786e\u5ea6\uff0c\u4f18\u5316\u6709\u4e24\u79cd\u65b9\u5f0f \u95ee\u9898\u90e8\u5206 \u4e0d\u6b62\u662f\u5229\u7528\u6700\u7ec8\u7684\u9690\u85cf\u5c42\u72b6\u6001\uff0c\u800c\u662f\u4f7f\u7528\u6240\u6709\u9690\u5c42\u72b6\u6001\u7684\u52a0\u6743\u548c \u4f7f\u7528\u4e00\u4e2a\u53ef\u5b66\u4e60\u7684\u5411\u91cf \\(\\boldsymbol{w}\\) \u4e0e \u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u5c42\u72b6\u6001\u76f8\u4e58 \u6df1\u5c42LSTM \u6587\u7ae0\u90e8\u5206 \u6587\u7ae0\u4e2d\u6bcf\u4e2atoken\u7684\u5411\u91cf\u8868\u793a\u7531\u4e00\u4e0b\u90e8\u5206\u8fde\u63a5\u800c\u6210 \u8bcd\u5d4c\u5165(GloVe300d) \u8bcd\u7684\u8bed\u8a00\u7279\u70b9:POS &NER \u6807\u7b7e\uff0cone-hot \u5411\u91cf \u8bcd\u9891\u7387(unigram\u6982\u7387) \u7cbe\u786e\u5339\u914d:\u8fd9\u4e2a\u8bcd\u662f\u5426\u51fa\u73b0\u5728\u95ee\u9898 \u4e09\u4e2a\u4e8c\u8fdb\u5236\u7684\u7279\u5f81\uff1a exact, uncased, lemma \u5bf9\u9f50\u95ee\u9898\u5d4c\u5165(\u201c\u8f66\u201d\u4e0e\u201c\u6c7d\u8f66\u201d) \\[ f_{\\text {align}}\\left(p_{i}\\right)=\\sum_{j} a_{i, j} \\mathbf{E}\\left(q_{j}\\right) \\quad q_{i, j}=\\frac{\\exp \\left(\\alpha\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) \\cdot \\alpha\\left(\\mathbf{E}\\left(q_{j}\\right)\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\alpha\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) \\cdot \\alpha\\left(\\mathbf{E}\\left(q_{j}^{\\prime}\\right)\\right)\\right)} \\] \u5355\u8bcd\u76f8\u4f3c\u5ea6\u7684\u8bed\u4e49\u5339\u505a\u5f97\u66f4\u597d 5. BiDAF: Bi-Directional Attention Flow for Machine Comprehension \u00b6 (Seo, Kembhavi, Farhadi, Hajishirzi, ICLR 2017) \u591a\u5e74\u6765\uff0cBiDAF architecture\u6709\u8bb8\u591a\u53d8\u4f53\u548c\u6539\u8fdb\uff0c\u4f46\u5176\u6838\u5fc3\u601d\u60f3\u662f the Attention Flow layer Idea \uff1aattention \u5e94\u8be5\u53cc\u5411\u6d41\u52a8\u2014\u2014\u4ece\u4e0a\u4e0b\u6587\u5230\u95ee\u9898\uff0c\u4ece\u95ee\u9898\u5230\u4e0a\u4e0b\u6587 \u4ee4\u76f8\u4f3c\u77e9\u9635( \\(\\boldsymbol{w}\\) \u7684\u7ef4\u6570\u4e3a6d) \\[ \\boldsymbol{S}_{i j}=\\boldsymbol{w}_{\\mathrm{sim}}^{T}\\left[\\boldsymbol{c}_{i} ; \\boldsymbol{q}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{q}_{j}\\right] \\in \\mathbb{R} \\] Context-to-Question (C2Q) \u6ce8\u610f\u529b (\u54ea\u4e9b\u67e5\u8be2\u8bcd\u4e0e\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u6700\u76f8\u5173) \\[ \\begin{aligned} \\alpha^{i} &=\\operatorname{softmax}\\left(\\boldsymbol{S}_{i, :}\\right) \\in \\mathbb{R}^{M} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\\\ \\boldsymbol{a}_{i} &=\\sum_{j=1}^{M} \\alpha_{j}^{i} \\boldsymbol{q}_{j} \\in \\mathbb{R}^{2 h} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\end{aligned} \\] Question-to-Context (Q2C) \u6ce8\u610f\u529b (\u4e0a\u4e0b\u6587\u4e2d\u6700\u91cd\u8981\u7684\u5355\u8bcd\u76f8\u5bf9\u4e8e\u67e5\u8be2\u7684\u52a0\u6743\u548c\u2014\u2014\u901a\u8fc7max\u7565\u6709\u4e0d\u5bf9\u79f0) \u901a\u8fc7max\u53d6\u5f97\u4e0a\u4e0b\u6587\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u4e8e\u95ee\u9898\u7684\u76f8\u5173\u5ea6 \\[ \\begin{aligned} \\boldsymbol{m}_{i} &=\\max _{j} \\boldsymbol{S}_{i j} \\in \\mathbb{R} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\\\ \\beta &=\\operatorname{softmax}(\\boldsymbol{m}) \\in \\mathbb{R}^{N} \\\\ \\boldsymbol{c}^{\\prime} &=\\sum_{i=1}^{N} \\beta_{i} \\boldsymbol{c}_{i} \\in \\mathbb{R}^{2 h} \\end{aligned} \\] \u5bf9\u4e8e\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\uff0cBiDAF layer\u7684\u8f93\u51fa\u4e3a \\[ \\boldsymbol{b}_{i}=\\left[\\boldsymbol{c}_{i} ; \\boldsymbol{a}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{a}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{c}^{\\prime}\\right] \\in \\mathbb{R}^{8 h} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\] \u7136\u540e\u6709\u201cmodelling\u201d\u5c42 \u6587\u7ae0\u901a\u8fc7\u53e6\u4e00\u4e2a\u6df1(\u53cc\u5c42)BiLSTM \u7136\u540e\u56de\u7b54\u8de8\u5ea6\u9009\u62e9\u66f4\u4e3a\u590d\u6742 Start\uff1a\u901a\u8fc7BiDAF \u548c modelling \u7684\u8f93\u51fa\u5c42\u8fde\u63a5\u5230\u4e00\u4e2a\u5bc6\u96c6\u7684\u5168\u8fde\u63a5\u5c42\u7136\u540esoftmax End\uff1a\u628a modelling \u7684\u8f93\u51fa \\(M\\) \u901a\u8fc7\u53e6\u4e00\u4e2aBiLSTM\u5f97\u5230 \\(M_2\\) \uff0c\u7136\u540e\u518d\u4e0eBiDAF layer\u8fde\u63a5\uff0c\u5e76\u901a\u8fc7\u5bc6\u96c6\u7684\u5168\u8fde\u63a5\u5c42\u548csoftmax 6. Recent, more advanced architectures \u00b6 2016\u5e74\u30012017\u5e74\u548c2018\u5e74\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u90fd\u91c7\u7528\u4e86\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u67b6\u6784\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u591a\u79cd\u6ce8\u610f\u529b\u53d8\u4f53\u2014\u2014\u901a\u5e38\u53ef\u4ee5\u83b7\u5f97\u5f88\u597d\u7684\u4efb\u52a1\u6536\u76ca \u4eba\u4eec\u4e00\u76f4\u5728\u5c1d\u8bd5\u4e0d\u540c\u7684 Attention Dynamic CoattentionNetworks for Question Answering (CaimingXiong, Victor Zhong, Richard Socher ICLR 2017) \u7f3a\u9677\uff1a\u95ee\u9898\u5177\u6709\u72ec\u7acb\u4e8e\u8f93\u5165\u7684\u8868\u793a\u5f62\u5f0f \u4e00\u4e2a\u5168\u9762\u7684QA\u6a21\u578b\u9700\u8981\u76f8\u4e92\u4f9d\u8d56 Coattention Encoder Coattention layer \u518d\u6b21\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e0a\u4e0b\u6587\u4e4b\u95f4\u7684\u53cc\u5411\u5173\u6ce8\u95ee\u9898 \u7136\u800c\uff0ccoattention\u5305\u62ec\u4e24\u7ea7\u6ce8\u610f\u529b\u8ba1\u7b97 \u5173\u6ce8\u90a3\u4e9b\u672c\u8eab\u5c31\u662f\u6ce8\u610f\u529b\u8f93\u51fa\u7684\u8868\u8c61 \u6211\u4eec\u4f7f\u7528C2Q\u6ce8\u610f\u529b\u5206\u5e03 \\(\\alpha _i\\) \uff0c\u6c42\u5f97Q2C\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{b}_j\\) \u7684\u52a0\u6743\u548c\u3002\u8fd9\u7ed9\u4e86\u6211\u4eec\u7b2c\u4e8c\u7ea7\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{s}_{i}\\) \\[ \\boldsymbol{s}_{i}=\\sum_{j=1}^{M+1} \\alpha_{j}^{i} \\boldsymbol{b}_{j} \\in \\mathbb{R}^{l} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\] FusionNet(Huang, Zhu, Shen, Chen 2017) Attention functions MLP(Additive)\u5f62\u5f0f \\[ S_{i j}=s^{T} \\tanh \\left(W_{1} c_{i}+W_{2} q_{j}\\right) \\] Space: O(mnk), W is kxd Bilinear (Product) form \\[ \\begin{array}{c}{S_{i j}=c_{i}^{T} W q_{j}} \\\\ {S_{i j}=c_{i}^{T} U^{T} V q_{j}} \\\\ {S_{i j}=c_{i}^{T} W^{T} D W q_{j}} \\\\ S_{i j}=\\operatorname{Relu}\\left(c_{i}^{T} W^{T}\\right) \\operatorname{DRelu}\\left(W q_{j}\\right) \\end{array} \\] Smaller space, Non-linearity Space: O((m+n)k) Multi-level inter-attention \u7ecf\u8fc7\u591a\u5c42\u6b21\u7684inter-attention\uff0c\u4f7f\u7528RNN\u3001self-attention \u548c\u53e6\u4e00\u4e2aRNN\u5f97\u5230\u4e0a\u4e0b\u6587\u7684\u6700\u7ec8\u8868\u793a \\(\\left\\{\\boldsymbol{u}_{i}^{C}\\right\\}\\) 7. ELMo and BERT preview \u00b6 Note 07 Question Answering \u00b6 1 Dynamic Memory Networks for Question Answering over Text and Images \u00b6 QA \u7cfb\u7edf\u7684\u6982\u5ff5\u662f\u76f4\u63a5\u4ece\u6587\u6863\u3001\u5bf9\u8bdd\u3001\u5728\u7ebf\u641c\u7d22\u7b49\u4e2d\u63d0\u53d6\u4fe1\u606f(\u6709\u65f6\u662f\u6bb5\u843d\uff0c\u6216\u662f\u5355\u8bcd\u7684\u8303\u56f4)\uff0c\u4ee5\u6ee1\u8db3\u7528\u6237\u7684\u4fe1\u606f\u9700\u6c42\u3002QA\u7cfb\u7edf\u4e0d\u9700\u8981\u7528\u6237\u901a\u8bfb\u6574\u4e2a\u6587\u6863\uff0c\u800c\u662f\u503e\u5411\u4e8e\u7ed9\u51fa\u4e00\u4e2a\u7b80\u77ed\u7684\u7b54\u6848\u3002\u73b0\u5728\uff0cQA\u7cfb\u7edf\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u4e0e\u5176\u4ed6NLP\u7cfb\u7edf(\u5982\u804a\u5929\u673a\u5668\u4eba)\u7ed3\u5408\u8d77\u6765\uff0c\u6709\u4e9bQA\u7cfb\u7edf\u751a\u81f3\u8d85\u8d8a\u4e86\u6587\u672c\u6587\u6863\u7684\u641c\u7d22\uff0c\u53ef\u4ee5\u4ece\u4e00\u7ec4\u56fe\u7247\u4e2d\u63d0\u53d6\u4fe1\u606f\u3002 \u6709\u5f88\u591a\u7c7b\u578b\u7684\u95ee\u9898\uff0c\u5176\u4e2d\u6700\u7b80\u5355\u7684\u662f Factoid Question Answering \u4e8b\u5b9e\u7c7b\u95ee\u9898\u56de\u7b54\u3002\u5b83\u5305\u542b\u7684\u95ee\u9898\u770b\u8d77\u6765\u50cf\u201c\u201cThe symbol for mercuric oxide is?\u201d \u201cWhich NFL team represented the AFC at Super Bowl 50?\u201d\u3002\u5f53\u7136\u8fd8\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u95ee\u9898\uff0c\u5982\u6570\u5b66\u95ee\u9898(\u201c2+3=?\u201d)\u3001\u903b\u8f91\u95ee\u9898\uff0c\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u5e7f\u6cdb\u7684\u63a8\u7406(\u800c\u4e14\u6ca1\u6709\u80cc\u666f\u4fe1\u606f)\u3002\u7136\u800c\uff0c\u6211\u4eec\u53ef\u4ee5\u8bf4\u5728\u4eba\u4eec\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\uff0c\u5bfb\u6c42\u4fe1\u606f\u7684\u4e8b\u5b9e\u7c7b\u95ee\u9898\u56de\u7b54\u662f\u6700\u5e38\u89c1\u7684\u95ee\u9898\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u5927\u591a\u6570NLP\u95ee\u9898\u90fd\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u95ee\u7b54\u95ee\u9898\uff0c\u5176\u8303\u5f0f\u5f88\u7b80\u5355\uff1a\u6211\u4eec\u53d1\u51fa\u4e00\u4e2a\u67e5\u8be2\uff0c\u7136\u540e\u673a\u5668\u63d0\u4f9b\u4e00\u4e2a\u54cd\u5e94\u3002\u901a\u8fc7\u9605\u8bfb\u6587\u6863\u6216\u4e00\u7ec4\u6307\u4ee4\uff0c\u667a\u80fd\u7cfb\u7edf\u5e94\u8be5\u80fd\u591f\u56de\u7b54\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\u3002\u6211\u4eec\u53ef\u4ee5\u8981\u6c42\u53e5\u5b50\u7684POS\u6807\u7b7e\uff0c\u6211\u4eec\u53ef\u4ee5\u8981\u6c42\u7cfb\u7edf\u7528\u4e0d\u540c\u7684\u8bed\u8a00\u6765\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u5f88\u81ea\u7136\u5730\uff0c\u6211\u4eec\u60f3\u8bbe\u8ba1\u4e00\u4e2a\u53ef\u4ee5\u7528\u4e8e\u4e00\u822cQA\u7684\u6a21\u578b\u3002 \u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\uff0c\u6211\u4eec\u9762\u4e34\u4e24\u5927\u969c\u788d\u3002\u8bb8\u591aNLP\u4efb\u52a1\u4f7f\u7528\u4e0d\u540c\u7684\u67b6\u6784\uff0c\u5982TreeLSTM (Tai et al., 2015)\u7528\u4e8e\u60c5\u7eea\u5206\u6790\uff0cMemory Network (Weston et al., 2015) \u7528\u4e8e\u56de\u7b54\u95ee\u9898\uff0c\u4ee5\u53ca\u53cc\u5411LSTM-CRF (Huang et al., 2015) \u7528\u4e8e\u8bcd\u6027\u6807\u6ce8\u3002\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u5168\u9762\u7684\u591a\u4efb\u52a1\u5b66\u4e60\u5f80\u5f80\u975e\u5e38\u56f0\u96be\uff0c\u8fc1\u79fb\u5b66\u4e60\u4ecd\u7136\u662f\u5f53\u524d\u4eba\u5de5\u667a\u80fd\u9886\u57df(\u8ba1\u7b97\u673a\u89c6\u89c9\u3001\u5f3a\u5316\u5b66\u4e60\u7b49)\u795e\u7ecf\u7f51\u7edc\u67b6\u6784\u7684\u4e3b\u8981\u969c\u788d\u3002 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528NLP\u7684\u5171\u4eab\u4f53\u7cfb\u7ed3\u6784\u6765\u89e3\u51b3\u7b2c\u4e00\u4e2a\u95ee\u9898\uff1a\u52a8\u6001\u5185\u5b58\u7f51\u7edc(DMN)\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3a\u4e00\u822cQA\u4efb\u52a1\u8bbe\u8ba1\u7684\u4f53\u7cfb\u7ed3\u6784\u3002QA\u5f88\u96be\uff0c\u90e8\u5206\u539f\u56e0\u662f\u9605\u8bfb\u4e00\u6bb5\u5f88\u957f\u7684\u6587\u5b57\u5f88\u96be\u3002\u5373\u4f7f\u5bf9\u4e8e\u4eba\u7c7b\uff0c\u6211\u4eec\u4e5f\u4e0d\u80fd\u5728\u4f60\u7684\u5de5\u4f5c\u8bb0\u5fc6\u4e2d\u5b58\u50a8\u4e00\u4e2a\u5f88\u957f\u7684\u6587\u6863\u3002 1.1 Input Module \u00b6 \u5c06DMN\u5206\u4e3a\u591a\u4e2a\u6a21\u5757\u3002\u9996\u5148\u6211\u4eec\u6765\u770b\u8f93\u5165\u6a21\u5757\u3002\u8f93\u5165\u6a21\u5757\u4ee5\u5355\u8bcd\u5e8f\u5217 \\(T_I\\) \u4f5c\u4e3a\u8f93\u5165\uff0c\u8f93\u51fa\u4e8b\u5b9e\u8868\u793a\u5e8f\u5217 \\(T_C\\) \u3002\u5982\u679c\u8f93\u51fa\u662f\u4e00\u4e2a\u5355\u8bcd\u5217\u8868\uff0c\u6211\u4eec\u6709 \\(T_C = T_I\\) \u3002\u5982\u679c\u8f93\u51fa\u662f\u4e00\u4e2a\u53e5\u5b50\u5217\u8868\uff0c\u6211\u4eec\u6709 \\(T_C\\) \u4f5c\u4e3a\u53e5\u5b50\u7684\u6570\u91cf\uff0c \\(T_I\\) \u4f5c\u4e3a\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u6570\u91cf\u3002\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684GRU\u6765\u8bfb\u53d6\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u5373\u9690\u85cf\u72b6\u6001 \\(h_{t}=\\operatorname{GRU}\\left(x_{t}, h_{t-1}\\right)\\) \uff0c\u5176\u4e2d \\(x_{t}=L\\left[w_{t}\\right]\\) \uff0c \\(L\\) \u4e3a\u5d4c\u5165\u77e9\u9635\uff0c \\(w_t\\) \u4e3a \\(t\\) \u65f6\u523b\u7684\u5355\u8bcd\uff0c\u6211\u4eec\u4f7f\u7528Bi-GRU\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 1.2 Question Module \u00b6 \u6211\u4eec\u4e5f\u4f7f\u7528\u6807\u51c6\u7684GRU\u6765\u8bfb\u53d6\u95ee\u9898(\u4f7f\u7528\u5d4c\u5165\u77e9\u9635 \\(L : q_{t}=\\operatorname{GRU}\\left(L\\left[w_{t}^{Q}\\right], q_{t-1}\\right)\\) )\uff0c\u4f46\u662f\u95ee\u9898\u6a21\u5757\u7684\u8f93\u51fa\u662f\u95ee\u9898\u7684\u7f16\u7801\u8868\u793a\u3002 1.3 Episodic Memory Module \u00b6 \u52a8\u6001\u8bb0\u5fc6\u7f51\u7edc\u7684\u4e00\u4e2a\u663e\u8457\u7279\u5f81\u662f\u60c5\u666f\u8bb0\u5fc6\u6a21\u5757\uff0c\u5b83\u5728\u8f93\u5165\u5e8f\u5217\u4e0a\u8fd0\u884c\u591a\u6b21\uff0c\u6bcf\u6b21\u5173\u6ce8\u8f93\u5165\u7684\u4e0d\u540c\u4e8b\u5b9e\u5b50\u96c6\u3002 \u5b83\u4f7f\u7528Bi-GRU\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0cBi-GRU\u63a5\u6536\u8f93\u5165\u6a21\u5757\u4f20\u5165\u7684\u53e5\u5b50\u7ea7\u522b\u8868\u793a\u7684\u8f93\u5165\uff0c\u5e76\u751f\u6210\u60c5\u666f\u8bb0\u5fc6\u8868\u793a\u3002 \u6211\u4eec\u5c06\u60c5\u666f\u8bb0\u5fc6\u8868\u5f81\u8868\u793a\u4e3a \\(m^i\\) \uff0c\u60c5\u666f\u8868\u5f81(\u7531\u6ce8\u610f\u673a\u5236\u8f93\u51fa)\u8868\u793a\u4e3a \\(e^i\\) \u3002\u60c5\u666f\u8bb0\u5fc6\u8868\u793a\u4f7f\u7528 \\(m^0 = q\\) \u521d\u59cb\u5316\uff0c\u7136\u540e\u7ee7\u7eed\u4f7f\u7528 \\(\\mathrm{GRU} : m^{i}=\\mathrm{GRU}\\left(e^{i}, m^{i-1}\\right)\\) \u3002\u4f7f\u7528\u6765\u81ea\u8f93\u5165\u6a21\u5757\u7684\u9690\u85cf\u72b6\u6001\u8f93\u51fa\u66f4\u65b0\u60c5\u666f\u8868\u5f81\uff0c\u5982\u4e0b\u6240\u793a\uff0c\u5176\u4e2d \\(g\\) \u662f\u6ce8\u610f\u673a\u5236 $$ \\begin{aligned} h_{t}^{i} &=g_{t}^{i} \\operatorname{GRU}\\left(c_{t}, h_{t-1} {i}\\right)+\\left(1-g_{t} \\right) h_{t-1}^{i} \\ e_{i} &=h_{T_{\\mathrm{C}}}^{i} \\end{aligned} $$ \u6ce8\u610f\u5411\u91cf \\(g\\) \u7684\u8ba1\u7b97\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u4f46\u662f\u5728\u539f\u59cb\u7684DMN\u8bba\u6587(Kumar et al. 2016)\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4ee5\u4e0b\u516c\u5f0f\u662f\u6700\u6709\u6548\u7684 $$ \\begin{array}{l} g_{t}^{i}=G\\left(c_{t}, m^{i-1}, q\\right) \\ {G(c, m, q)=\\sigma\\left(W^{(2)} \\tanh \\left(W^{(1)} z(c, m, q)+b {(1)}\\right)+b \\right)} \\ {z(c, m, q)=\\left[c, m, q, c \\circ q, c \\circ m,|c-q|,|c-m|, c^{T} W^{(b)} q_{,} c^{T} W^{(b)} m\\right]}\\end{array} $$ \u8fd9\u6837\uff0c\u5982\u679c\u53e5\u5b50\u4e0e\u95ee\u9898\u6216\u8bb0\u5fc6\u6709\u5173\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e2d\u7684\u95e8\u5c31\u4f1a\u88ab\u6fc0\u6d3b\u3002\u5728\u7b2c \\(i\\) \u904d\u4e2d\uff0c\u5982\u679c\u603b\u7ed3\u4e0d\u8db3\u4ee5\u56de\u7b54\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7b2c \\(i +1\\) \u904d\u4e2d\u91cd\u590d\u8f93\u5165\u5e8f\u5217\u3002\u4f8b\u5982\uff0c\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\u201cWhere is the football?\u201d\u4ee5\u53ca\u8f93\u5165\u5e8f\u5217\u201cJohn kicked the football\u201d\u548c\u201cJohn was in the \ufb01eld\u201d\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cJohn\u548cfootball\u53ef\u4ee5\u5728\u4e00\u4e2apass\u4e2d\u8fde\u63a5\uff0c\u7136\u540eJohn\u548cfield\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2apass\u4e2d\u8fde\u63a5\uff0c\u8fd9\u6837\u7f51\u7edc\u5c31\u53ef\u4ee5\u6839\u636e\u8fd9\u4e24\u4e2a\u4fe1\u606f\u8fdb\u884c\u4f20\u9012\u63a8\u65ad\u3002 1.4 Answer Module \u00b6 \u7b54\u6848\u6a21\u5757\u662f\u4e00\u4e2a\u7b80\u5355\u7684GRU\u89e3\u7801\u5668\uff0c\u5b83\u63a5\u6536\u95ee\u9898\u6a21\u5757\u3001\u60c5\u666f\u8bb0\u5fc6\u6a21\u5757\u7684\u8f93\u51fa\uff0c\u5e76\u8f93\u51fa\u4e00\u4e2a\u5355\u8bcd(\u6216\u8005\u901a\u5e38\u662f\u4e00\u4e2a\u8ba1\u7b97\u7ed3\u679c)\u3002\u5176\u5de5\u4f5c\u539f\u7406\u5982\u4e0b: $$ \\begin{aligned} y_{t} &=\\operatorname{softmax}\\left(W^{(a)} a_{t}\\right) \\ a_{t} &=\\operatorname{GRU}\\left(\\left[y_{t-1}, q\\right], a_{t-1}\\right) \\end{aligned} $$ 1.5 Experiments \u00b6 \u901a\u8fc7\u5b9e\u9a8c\u53ef\u4ee5\u770b\u51fa\uff0cDMN\u5728babl\u95ee\u7b54\u4efb\u52a1\u4e2d\u7684\u8868\u73b0\u4f18\u4e8eMemNN\uff0c\u5728\u60c5\u7eea\u5206\u6790\u548c\u8bcd\u6027\u6807\u6ce8\u65b9\u9762\u4e5f\u4f18\u4e8e\u5176\u4ed6\u4f53\u7cfb\u7ed3\u6784\u3002\u60c5\u666f\u8bb0\u5fc6\u9700\u8981\u591a\u5c11\u4e2a\u60c5\u666f\uff1f\u7b54\u6848\u662f\uff0c\u4efb\u52a1\u8d8a\u96be\uff0c\u901a\u8fc7\u7684\u6b21\u6570\u5c31\u8d8a\u591a\u3002\u591a\u6b21\u4f20\u9012\u8fd8\u53ef\u4ee5\u8ba9\u7f51\u7edc\u771f\u6b63\u7406\u89e3\u53e5\u5b50\uff0c\u53ea\u5173\u6ce8\u6700\u540e\u4e00\u9879\u4efb\u52a1\u7684\u76f8\u5173\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u53ea\u5bf9\u5355\u8bcd\u5d4c\u5165\u7684\u4fe1\u606f\u505a\u51fa\u53cd\u5e94\u3002 \u5173\u952e\u601d\u60f3\u662f\u6a21\u5757\u5316\u7cfb\u7edf\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u66f4\u6539\u8f93\u5165\u6a21\u5757\u6765\u5141\u8bb8\u4e0d\u540c\u7c7b\u578b\u7684\u8f93\u5165\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u7528\u4e00\u4e2a\u57fa\u4e8e\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u6a21\u5757\u66ff\u6362\u8f93\u5165\u6a21\u5757\uff0c\u90a3\u4e48\u8fd9\u4e2a\u67b6\u6784\u5c31\u53ef\u4ee5\u5904\u7406\u4e00\u4e2a\u79f0\u4e3a\u53ef\u89c6\u5316\u95ee\u9898\u56de\u7b54(VQA)\u7684\u4efb\u52a1\u3002\u5b83\u4e5f\u80fd\u591f\u5728\u8fd9\u9879\u4efb\u52a1\u4e2d\u80dc\u8fc7\u5176\u4ed6\u6a21\u578b\u3002 1.6 Summary \u00b6 \u81ea2015\u5e74\u4ee5\u6765\uff0c\u5bfb\u627e\u80fd\u591f\u89e3\u51b3\u6240\u6709\u95ee\u9898\u7684\u901a\u7528\u4f53\u7cfb\u7ed3\u6784\u7684\u70ed\u60c5\u7565\u6709\u51cf\u9000\uff0c\u4f46\u5728\u4e00\u4e2a\u9886\u57df\u8fdb\u884c\u8bad\u7ec3\u5e76\u63a8\u5e7f\u5230\u5176\u4ed6\u9886\u57df\u7684\u613f\u671b\u6709\u6240\u589e\u5f3a\u3002\u8981\u7406\u89e3\u66f4\u9ad8\u7ea7\u7684\u95ee\u7b54\u6a21\u5757\uff0c\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\u52a8\u6001\u6ce8\u610f\u529b\u7f51\u7edc(DCN)\u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"10 Question Answering and the Default Final Project"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#lecture-10-question-answering-and-the-default-final-project","text":"Lecture Plan Final final project notes, etc. Motivation/History The SQuADdataset The Stanford Attentive Reader model BiDAF Recent, more advanced architectures ELMo and BERT preview Project writeup Abstract Introduction Prior related work Model Data Experiments Results Analysis & Conclusion \u5728\u8c37\u6b4c\u4e2d\u68c0\u7d22\u8c01\u662f\u6fb3\u5927\u5229\u4e9a\u7b2c\u4e09\u4efb\u603b\u7406\uff0c\u53ef\u4ee5\u83b7\u5f97\u7b54\u6848\u3002 \u6280\u672f\u8bf4\u660e\uff1a\u8fd9\u662f\u4eceweb\u9875\u9762\u4e2d\u63d0\u53d6\u7684\u201c\u7279\u6027\u7247\u6bb5\u201d\u56de\u7b54\uff0c\u800c\u4e0d\u662f\u4f7f\u7528(\u7ed3\u6784\u5316\u7684)\u8c37\u6b4c\u77e5\u8bc6\u56fe(\u4ee5\u524d\u79f0\u4e3aFreebase)\u56de\u7b54\u7684\u95ee\u9898\u3002 \u6211\u4eec\u4eca\u5929\u8981\u8c08\u8bba\u7684\u5c31\u662f\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u7ed3\u6784\u5316\u6570\u636e\u5b58\u50a8\u7684\u95ee\u7b54\u3002","title":"Lecture 10 Question Answering and the Default Final Project"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#2-motivation-question-answering","text":"\u62e5\u6709\u5927\u91cf\u7684\u5168\u6587\u6587\u6863\u96c6\u5408\uff0c\u4f8b\u5982\u7f51\u7edc\uff0c\u7b80\u5355\u5730\u8fd4\u56de\u76f8\u5173\u6587\u6863\u7684\u4f5c\u7528\u662f\u6709\u9650\u7684 \u76f8\u53cd\uff0c\u6211\u4eec\u7ecf\u5e38\u60f3\u8981\u5f97\u5230\u95ee\u9898\u7684\u7b54\u6848 \u5c24\u5176\u662f\u5728\u79fb\u52a8\u8bbe\u5907\u4e0a \u6216\u662f\u4f7f\u7528\u50cfAlexa\u3001Google assistant\u8fd9\u6837\u7684\u6570\u5b57\u52a9\u7406\u8bbe\u5907\u3002 \u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5206\u89e3\u6210\u4e24\u90e8\u5206 \u67e5\u627e(\u53ef\u80fd)\u5305\u542b\u7b54\u6848\u7684\u6587\u6863 \u53ef\u4ee5\u901a\u8fc7\u4f20\u7edf\u7684\u4fe1\u606f\u68c0\u7d22/web\u641c\u7d22\u5904\u7406 (\u4e0b\u4e2a\u5b63\u5ea6\u6211\u5c06\u8bb2\u6388cs276\uff0c\u5b83\u5c06\u5904\u7406\u8fd9\u4e2a\u95ee\u9898 \u5728\u4e00\u6bb5\u6216\u4e00\u4efd\u6587\u4ef6\u4e2d\u627e\u5230\u7b54\u6848 \u8fd9\u4e2a\u95ee\u9898\u901a\u5e38\u88ab\u79f0\u4e3a\u9605\u8bfb\u7406\u89e3 \u8fd9\u5c31\u662f\u6211\u4eec\u4eca\u5929\u8981\u5173\u6ce8\u7684 A Brief History of Reading Comprehension \u8bb8\u591a\u65e9\u671f\u7684NLP\u5de5\u4f5c\u5c1d\u8bd5\u9605\u8bfb\u7406\u89e3 Schank, Abelson, Lehnert et al. c. 1977 \u2013\u201cYale A.I. Project\u201d \u7531Lynette Hirschman\u57281999\u5e74\u590d\u6d3b NLP\u7cfb\u7edf\u80fd\u56de\u7b54\u4e09\u81f3\u516d\u5e74\u7ea7\u5b66\u751f\u7684\u4eba\u7c7b\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u5417?\u7b80\u5355\u7684\u65b9\u6cd5\u5c1d\u8bd5 Chris Burges\u4e8e2013\u5e74\u901a\u8fc7 MCTest \u53c8\u91cd\u65b0\u590d\u6d3b RC \u518d\u6b21\u901a\u8fc7\u7b80\u5355\u7684\u6545\u4e8b\u6587\u672c\u56de\u7b54\u95ee\u9898 2015/16\u5e74\uff0c\u968f\u7740\u5927\u578b\u6570\u636e\u96c6\u7684\u4ea7\u751f\uff0c\u95f8\u95e8\u5f00\u542f\uff0c\u53ef\u4ee5\u5efa\u7acb\u76d1\u7763\u795e\u7ecf\u7cfb\u7edf Hermann et al. (NIPS 2015) DeepMind CNN/DM dataset Rajpurkaret al. (EMNLP 2016) SQuAD MS MARCO, TriviaQA, RACE, NewsQA, NarrativeQA, \u2026 Machine Comprehension (Burges 2013) \u201c\u4e00\u53f0\u673a\u5668\u80fd\u591f\u7406\u89e3\u6587\u672c\u7684\u6bb5\u843d\uff0c\u5bf9\u4e8e\u5927\u591a\u6570\u6bcd\u8bed\u4f7f\u7528\u8005\u80fd\u591f\u6b63\u786e\u56de\u7b54\u7684\u5173\u4e8e\u6587\u672c\u7684\u4efb\u4f55\u95ee\u9898\uff0c\u8be5\u673a\u5668\u90fd\u80fd\u63d0\u4f9b\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e9b\u8bf4\u8bdd\u8005\u65e2\u80fd\u56de\u7b54\u8be5\u95ee\u9898\uff0c\u53c8\u4e0d\u4f1a\u5305\u542b\u4e0e\u8be5\u95ee\u9898\u65e0\u5173\u7684\u4fe1\u606f\u3002\u201d MCTestReading Comprehension A Brief History of Open-domain Question Answering Simmons et al. (1964) \u9996\u5148\u63a2\u7d22\u4e86\u5982\u4f55\u57fa\u4e8e\u5339\u914d\u95ee\u9898\u548c\u7b54\u6848\u7684\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\uff0c\u4ece\u8bf4\u660e\u6027\u6587\u672c\u4e2d\u56de\u7b54\u95ee\u9898 Murax(Kupiec1993) \u65e8\u5728\u4f7f\u7528IR\u548c\u6d45\u5c42\u8bed\u8a00\u5904\u7406\u5728\u5728\u7ebf\u767e\u79d1\u5168\u4e66\u4e0a\u56de\u7b54\u95ee\u9898 NIST TREC QA track \u59cb\u4e8e1999\u5e74\uff0c\u9996\u6b21\u4e25\u683c\u8c03\u67e5\u4e86\u5bf9\u5927\u91cf\u6587\u6863\u7684\u4e8b\u5b9e\u95ee\u9898\u7684\u56de\u7b54 IBM\u7684\u5192\u9669\uff01System (DeepQA, 2011)\u63d0\u51fa\u4e86\u4e00\u4e2a\u7248\u672c\u7684\u95ee\u9898;\u5b83\u4f7f\u7528\u4e86\u8bb8\u591a\u65b9\u6cd5\u7684\u96c6\u5408 DrQA(Chen et al. 2016)\u91c7\u7528IR\u7ed3\u5408\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\uff0c\u5c06\u6df1\u5ea6\u5b66\u4e60\u5f15\u5165\u5f00\u653e\u9886\u57df\u7684QA Turn-of-the Millennium Full NLP QA [architecture of LCC (Harabagiu/Moldovan) QA system, circa 2003] \u590d\u6742\u7684\u7cfb\u7edf\uff0c\u4f46\u4ed6\u4eec\u5728\u201c\u4e8b\u5b9e\u201d\u95ee\u9898\u4e0a\u505a\u5f97\u76f8\u5f53\u597d \u975e\u5e38\u590d\u6742\u7684\u591a\u6a21\u5757\u591a\u7ec4\u4ef6\u7684\u7cfb\u7edf \u9996\u5148\u5bf9\u95ee\u9898\u8fdb\u884c\u89e3\u6790\uff0c\u4f7f\u7528\u624b\u5199\u7684\u8bed\u4e49\u89c4\u8303\u5316\u89c4\u5219\uff0c\u5c06\u5176\u8f6c\u5316\u4e3a\u66f4\u597d\u7684\u8bed\u4e49\u5f62\u5f0f \u5728\u901a\u8fc7\u95ee\u9898\u7c7b\u578b\u5206\u7c7b\u5668\uff0c\u627e\u51fa\u95ee\u9898\u5728\u5bfb\u627e\u7684\u8bed\u4e49\u7c7b\u578b \u4fe1\u606f\u68c0\u7d22\u7cfb\u7edf\u627e\u5230\u53ef\u80fd\u5305\u542b\u7b54\u6848\u7684\u6bb5\u843d\uff0c\u6392\u5e8f\u540e\u8fdb\u884c\u9009\u62e9 NER\u8bc6\u522b\u5019\u9009\u5b9e\u4f53\u518d\u8fdb\u884c\u5224\u65ad \u8fd9\u6837\u7684QA\u7cfb\u7edf\u5728\u7279\u5b9a\u9886\u57df\u5f88\u6709\u6548\uff1aFactoid Question Answering \u9488\u5bf9\u5b9e\u4f53\u7684\u95ee\u7b54","title":"2. Motivation: Question answering"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#3-stanford-question-answering-dataset-squad","text":"Passage \u662f\u6765\u81ea\u7ef4\u57fa\u767e\u79d1\u7684\u4e00\u6bb5\u6587\u672c\uff0c\u7cfb\u7edf\u9700\u8981\u56de\u7b54\u95ee\u9898\uff0c\u5728\u6587\u7ae0\u4e2d\u627e\u51fa\u7b54\u6848 \u7b54\u6848\u5fc5\u987b\u662f\u6587\u7ae0\u4e2d\u7684\u4e00\u7cfb\u5217\u5355\u8bcd\u5e8f\u5217\uff0c\u4e5f\u5c31\u662f\u63d0\u53d6\u5f0f\u95ee\u7b54 100k examples SQuAD evaluation, v1.1 \u4f5c\u8005\u6536\u96c6\u4e863\u4e2a\u9ec4\u91d1\u7b54\u6848 \u7cfb\u7edf\u5728\u4e24\u4e2a\u6307\u6807\u4e0a\u8ba1\u7b97\u5f97\u5206 \u7cbe\u786e\u5339\u914d\uff1a1/0\u7684\u51c6\u786e\u5ea6\uff0c\u60a8\u662f\u5426\u5339\u914d\u4e09\u4e2a\u7b54\u6848\u4e2d\u7684\u4e00\u4e2a F1\uff1a\u5c06\u7cfb\u7edf\u548c\u6bcf\u4e2a\u7b54\u6848\u90fd\u89c6\u4e3a\u8bcd\u888b\uff0c\u5e76\u8bc4\u4f30 \\[ \\text{Precision} =\\frac{T P}{T P+F P}, \\text { Recall }=\\frac{T P}{T P+F N}, \\text { harmonic mean } \\mathrm{F} 1=\\frac{2 P R}{P+R} \\] Precision \u548c Recall \u7684\u8c03\u548c\u5e73\u5747\u503c \u5206\u6570\u662f(\u5b8f\u89c2)\u5e73\u5747\u6bcf\u9898F1\u5206\u6570 F1\u6d4b\u91cf\u88ab\u89c6\u4e3a\u66f4\u53ef\u9760\u7684\u6307\u6807\uff0c\u4f5c\u4e3a\u4e3b\u8981\u6307\u6807\u4f7f\u7528 \u5b83\u4e0d\u662f\u57fa\u4e8e\u9009\u62e9\u662f\u5426\u548c\u4eba\u7c7b\u9009\u62e9\u7684\u8de8\u5ea6\u5b8c\u5168\u76f8\u540c\uff0c\u4eba\u7c7b\u9009\u62e9\u7684\u8de8\u5ea6\u5bb9\u6613\u53d7\u5230\u5404\u79cd\u5f71\u54cd\uff0c\u5305\u62ec\u6362\u884c \u5728\u5355\u6b21\u7ea7\u522b\u5339\u914d\u4e0d\u540c\u7684\u7b54\u6848 \u8fd9\u4e24\u4e2a\u6307\u6807\u5ffd\u89c6\u6807\u70b9\u7b26\u53f7\u548c\u51a0\u8bcd(a, an, the only) SQuAD2.0 SQuAD1.0\u7684\u4e00\u4e2a\u7f3a\u9677\u662f\uff0c\u6240\u6709\u95ee\u9898\u90fd\u6709\u7b54\u6848\u7684\u6bb5\u843d \u7cfb\u7edf(\u9690\u5f0f\u5730)\u6392\u540d\u5019\u9009\u7b54\u6848\u5e76\u9009\u62e9\u6700\u597d\u7684\u4e00\u4e2a\uff0c\u8fd9\u5c31\u53d8\u6210\u4e86\u4e00\u79cd\u6392\u540d\u4efb\u52a1 \u4f60\u4e0d\u5fc5\u5224\u65ad\u4e00\u4e2aspan\u662f\u5426\u56de\u7b54\u4e86\u8fd9\u4e2a\u95ee\u9898 SQuAD2.0\u4e2d \u2153 \u7684\u8bad\u7ec3\u95ee\u9898\u6ca1\u6709\u56de\u7b54\uff0c\u5927\u7ea6 \u00bd \u7684\u5f00\u53d1/\u6d4b\u8bd5\u95ee\u9898\u6ca1\u6709\u56de\u7b54 \u5bf9\u4e8eNo Answer examples, no answer \u83b7\u5f97\u7684\u5f97\u5206\u4e3a1\uff0c\u5bf9\u4e8e\u7cbe\u786e\u5339\u914d\u548cF1\uff0c\u4efb\u4f55\u5176\u4ed6\u54cd\u5e94\u7684\u5f97\u5206\u90fd\u4e3a0 SQuAD2.0\u6700\u7b80\u5355\u7684\u7cfb\u7edf\u65b9\u6cd5 \u5bf9\u4e8e\u4e00\u4e2a span \u662f\u5426\u56de\u7b54\u4e86\u4e00\u4e2a\u95ee\u9898\u6709\u4e00\u4e2a\u9608\u503c\u8bc4\u5206 \u6216\u8005\u60a8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u786e\u8ba4\u56de\u7b54\u7684\u7ec4\u4ef6 \u7c7b\u4f3c \u81ea\u7136\u8bed\u8a00\u63a8\u7406 \u6216\u8005 \u7b54\u6848\u9a8c\u8bc1 Example \u5f97\u5206\u9ad8\u7684\u7cfb\u7edf\u5e76\u4e0d\u80fd\u771f\u6b63\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff01 Good systems are great, but still basic NLU errors \u7cfb\u7edf\u6ca1\u6709\u771f\u6b63\u4e86\u89e3\u4e00\u5207\uff0c\u4ecd\u7136\u5728\u505a\u4e00\u79cd\u5339\u914d\u95ee\u9898 SQuAD limitations SQuAD \u4e5f\u6709\u5176\u4ed6\u4e00\u4e9b\u5173\u952e\u9650\u5236 \u53ea\u6709 span-based \u7b54\u6848(\u6ca1\u6709 yes/no\uff0c\u8ba1\u6570\uff0c\u9690\u5f0f\u7684\u4e3a\u4ec0\u4e48) \u95ee\u9898\u662f\u770b\u7740\u6bb5\u843d\u6784\u9020\u7684 \u901a\u5e38\u4e0d\u662f\u771f\u6b63\u7684\u4fe1\u606f\u9700\u6c42 \u4e00\u822c\u6765\u8bf4\uff0c\u95ee\u9898\u548c\u7b54\u6848\u4e4b\u95f4\u7684\u8bcd\u6c47\u548c\u53e5\u6cd5\u5339\u914d\u6bd4IRL\u66f4\u5927 \u95ee\u9898\u4e0e\u6587\u7ae0\u9ad8\u5ea6\u91cd\u53e0\uff0c\u65e0\u8bba\u662f\u5355\u8bcd\u8fd8\u662f\u53e5\u6cd5\u7ed3\u6784 \u9664\u4e86\u5171\u540c\u53c2\u7167\uff0c\u51e0\u4e4e\u6ca1\u6709\u4efb\u4f55\u591a\u4e8b\u5b9e/\u53e5\u5b50\u63a8\u7406 \u4e0d\u8fc7\u8fd9\u662f\u4e00\u4e2a\u76ee\u6807\u660e\u786e\uff0c\u7ed3\u6784\u826f\u597d\u7684\u5e72\u51c0\u7684\u6570\u636e\u96c6 \u5b83\u4e00\u76f4\u662fQA dataset\u4e0a\u6700\u5e38\u7528\u548c\u6700\u5177\u7ade\u4e89\u529b\u7684\u6570\u636e\u96c6 \u5b83\u4e5f\u662f\u6784\u5efa\u884c\u4e1a\u7cfb\u7edf\u7684\u4e00\u4e2a\u6709\u7528\u7684\u8d77\u70b9\uff08\u5c3d\u7ba1\u57df\u5185\u6570\u636e\u603b\u662f\u5f88\u6709\u5e2e\u52a9\uff01\uff09 \u5e76\u4e14\u6211\u4eec\u6b63\u5728\u4f7f\u7528\u5b83","title":"3. Stanford Question Answering Dataset (SQuAD)"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#4-stanford-attentive-reader","text":"[Chen, Bolton, & Manning 2016] [Chen, Fisch, Weston & Bordes2017] DrQA [Chen 2018] \u5c55\u793a\u4e86\u4e00\u4e2a\u6700\u5c0f\u7684\uff0c\u975e\u5e38\u6210\u529f\u7684\u9605\u8bfb\u7406\u89e3\u548c\u95ee\u9898\u56de\u7b54\u67b6\u6784 \u540e\u6765\u88ab\u79f0\u4e3a the Stanford Attentive Reader \u9996\u5148\u5c06\u95ee\u9898\u7528\u5411\u91cf\u8868\u793a \u5bf9\u95ee\u9898\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u67e5\u627e\u5176\u8bcd\u5d4c\u5165 \u8f93\u5165\u5230\u53cc\u5411LSTM\u4e2d\u5e76\u5c06\u6700\u7ec8\u7684 hidden state \u62fc\u63a5 \u518d\u5904\u7406\u6587\u7ae0 \u67e5\u627e\u6bcf\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\u5e76\u8f93\u5165\u5230\u53cc\u5411LSTM\u4e2d \u4f7f\u7528\u53cc\u7ebf\u6027\u6ce8\u610f\u529b\uff0c\u5c06\u6bcf\u4e2aLSTM\u7684\u8868\u793a(LSTM\u7684\u4e24\u4e2a\u9690\u85cf\u72b6\u6001\u7684\u8fde\u63a5)\u4e0e\u95ee\u9898\u8868\u793a\u505a\u8fd0\u7b97\uff0c\u83b7\u5f97\u4e86\u4e0d\u540c\u4f4d\u7f6e\u7684\u6ce8\u610f\u529b\uff0c\u4ece\u800c\u83b7\u5f97\u7b54\u6848\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u518d\u4ee5\u540c\u6837\u65b9\u5f0f\u83b7\u5f97\u7b54\u6848\u7684\u7ed3\u675f\u4f4d\u7f6e \u4e3a\u4e86\u5728\u6587\u7ae0\u4e2d\u627e\u5230\u7b54\u6848\uff0c\u4f7f\u7528\u95ee\u9898\u7684\u5411\u91cf\u8868\u793a\uff0c\u6765\u89e3\u51b3\u7b54\u6848\u5728\u4ec0\u4e48\u4f4d\u7f6e\u4f7f\u7528\u6ce8\u610f\u529b Stanford Attentive Reader++ \u6574\u4e2a\u6a21\u578b\u7684\u6240\u6709\u53c2\u6570\u90fd\u662f\u7aef\u5230\u7aef\u8bad\u7ec3\u7684\uff0c\u8bad\u7ec3\u7684\u76ee\u6807\u662f\u5f00\u59cb\u4f4d\u7f6e\u4e0e\u7ed3\u675f\u4e3a\u6b62\u7684\u51c6\u786e\u5ea6\uff0c\u4f18\u5316\u6709\u4e24\u79cd\u65b9\u5f0f \u95ee\u9898\u90e8\u5206 \u4e0d\u6b62\u662f\u5229\u7528\u6700\u7ec8\u7684\u9690\u85cf\u5c42\u72b6\u6001\uff0c\u800c\u662f\u4f7f\u7528\u6240\u6709\u9690\u5c42\u72b6\u6001\u7684\u52a0\u6743\u548c \u4f7f\u7528\u4e00\u4e2a\u53ef\u5b66\u4e60\u7684\u5411\u91cf \\(\\boldsymbol{w}\\) \u4e0e \u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u5c42\u72b6\u6001\u76f8\u4e58 \u6df1\u5c42LSTM \u6587\u7ae0\u90e8\u5206 \u6587\u7ae0\u4e2d\u6bcf\u4e2atoken\u7684\u5411\u91cf\u8868\u793a\u7531\u4e00\u4e0b\u90e8\u5206\u8fde\u63a5\u800c\u6210 \u8bcd\u5d4c\u5165(GloVe300d) \u8bcd\u7684\u8bed\u8a00\u7279\u70b9:POS &NER \u6807\u7b7e\uff0cone-hot \u5411\u91cf \u8bcd\u9891\u7387(unigram\u6982\u7387) \u7cbe\u786e\u5339\u914d:\u8fd9\u4e2a\u8bcd\u662f\u5426\u51fa\u73b0\u5728\u95ee\u9898 \u4e09\u4e2a\u4e8c\u8fdb\u5236\u7684\u7279\u5f81\uff1a exact, uncased, lemma \u5bf9\u9f50\u95ee\u9898\u5d4c\u5165(\u201c\u8f66\u201d\u4e0e\u201c\u6c7d\u8f66\u201d) \\[ f_{\\text {align}}\\left(p_{i}\\right)=\\sum_{j} a_{i, j} \\mathbf{E}\\left(q_{j}\\right) \\quad q_{i, j}=\\frac{\\exp \\left(\\alpha\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) \\cdot \\alpha\\left(\\mathbf{E}\\left(q_{j}\\right)\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\alpha\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) \\cdot \\alpha\\left(\\mathbf{E}\\left(q_{j}^{\\prime}\\right)\\right)\\right)} \\] \u5355\u8bcd\u76f8\u4f3c\u5ea6\u7684\u8bed\u4e49\u5339\u505a\u5f97\u66f4\u597d","title":"4. Stanford Attentive Reader"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#5-bidaf-bi-directional-attention-flow-for-machine-comprehension","text":"(Seo, Kembhavi, Farhadi, Hajishirzi, ICLR 2017) \u591a\u5e74\u6765\uff0cBiDAF architecture\u6709\u8bb8\u591a\u53d8\u4f53\u548c\u6539\u8fdb\uff0c\u4f46\u5176\u6838\u5fc3\u601d\u60f3\u662f the Attention Flow layer Idea \uff1aattention \u5e94\u8be5\u53cc\u5411\u6d41\u52a8\u2014\u2014\u4ece\u4e0a\u4e0b\u6587\u5230\u95ee\u9898\uff0c\u4ece\u95ee\u9898\u5230\u4e0a\u4e0b\u6587 \u4ee4\u76f8\u4f3c\u77e9\u9635( \\(\\boldsymbol{w}\\) \u7684\u7ef4\u6570\u4e3a6d) \\[ \\boldsymbol{S}_{i j}=\\boldsymbol{w}_{\\mathrm{sim}}^{T}\\left[\\boldsymbol{c}_{i} ; \\boldsymbol{q}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{q}_{j}\\right] \\in \\mathbb{R} \\] Context-to-Question (C2Q) \u6ce8\u610f\u529b (\u54ea\u4e9b\u67e5\u8be2\u8bcd\u4e0e\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u6700\u76f8\u5173) \\[ \\begin{aligned} \\alpha^{i} &=\\operatorname{softmax}\\left(\\boldsymbol{S}_{i, :}\\right) \\in \\mathbb{R}^{M} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\\\ \\boldsymbol{a}_{i} &=\\sum_{j=1}^{M} \\alpha_{j}^{i} \\boldsymbol{q}_{j} \\in \\mathbb{R}^{2 h} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\end{aligned} \\] Question-to-Context (Q2C) \u6ce8\u610f\u529b (\u4e0a\u4e0b\u6587\u4e2d\u6700\u91cd\u8981\u7684\u5355\u8bcd\u76f8\u5bf9\u4e8e\u67e5\u8be2\u7684\u52a0\u6743\u548c\u2014\u2014\u901a\u8fc7max\u7565\u6709\u4e0d\u5bf9\u79f0) \u901a\u8fc7max\u53d6\u5f97\u4e0a\u4e0b\u6587\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u4e8e\u95ee\u9898\u7684\u76f8\u5173\u5ea6 \\[ \\begin{aligned} \\boldsymbol{m}_{i} &=\\max _{j} \\boldsymbol{S}_{i j} \\in \\mathbb{R} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\\\ \\beta &=\\operatorname{softmax}(\\boldsymbol{m}) \\in \\mathbb{R}^{N} \\\\ \\boldsymbol{c}^{\\prime} &=\\sum_{i=1}^{N} \\beta_{i} \\boldsymbol{c}_{i} \\in \\mathbb{R}^{2 h} \\end{aligned} \\] \u5bf9\u4e8e\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\uff0cBiDAF layer\u7684\u8f93\u51fa\u4e3a \\[ \\boldsymbol{b}_{i}=\\left[\\boldsymbol{c}_{i} ; \\boldsymbol{a}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{a}_{i} ; \\boldsymbol{c}_{i} \\circ \\boldsymbol{c}^{\\prime}\\right] \\in \\mathbb{R}^{8 h} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\] \u7136\u540e\u6709\u201cmodelling\u201d\u5c42 \u6587\u7ae0\u901a\u8fc7\u53e6\u4e00\u4e2a\u6df1(\u53cc\u5c42)BiLSTM \u7136\u540e\u56de\u7b54\u8de8\u5ea6\u9009\u62e9\u66f4\u4e3a\u590d\u6742 Start\uff1a\u901a\u8fc7BiDAF \u548c modelling \u7684\u8f93\u51fa\u5c42\u8fde\u63a5\u5230\u4e00\u4e2a\u5bc6\u96c6\u7684\u5168\u8fde\u63a5\u5c42\u7136\u540esoftmax End\uff1a\u628a modelling \u7684\u8f93\u51fa \\(M\\) \u901a\u8fc7\u53e6\u4e00\u4e2aBiLSTM\u5f97\u5230 \\(M_2\\) \uff0c\u7136\u540e\u518d\u4e0eBiDAF layer\u8fde\u63a5\uff0c\u5e76\u901a\u8fc7\u5bc6\u96c6\u7684\u5168\u8fde\u63a5\u5c42\u548csoftmax","title":"5. BiDAF: Bi-Directional Attention Flow for Machine Comprehension"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#6-recent-more-advanced-architectures","text":"2016\u5e74\u30012017\u5e74\u548c2018\u5e74\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u90fd\u91c7\u7528\u4e86\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u67b6\u6784\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u591a\u79cd\u6ce8\u610f\u529b\u53d8\u4f53\u2014\u2014\u901a\u5e38\u53ef\u4ee5\u83b7\u5f97\u5f88\u597d\u7684\u4efb\u52a1\u6536\u76ca \u4eba\u4eec\u4e00\u76f4\u5728\u5c1d\u8bd5\u4e0d\u540c\u7684 Attention Dynamic CoattentionNetworks for Question Answering (CaimingXiong, Victor Zhong, Richard Socher ICLR 2017) \u7f3a\u9677\uff1a\u95ee\u9898\u5177\u6709\u72ec\u7acb\u4e8e\u8f93\u5165\u7684\u8868\u793a\u5f62\u5f0f \u4e00\u4e2a\u5168\u9762\u7684QA\u6a21\u578b\u9700\u8981\u76f8\u4e92\u4f9d\u8d56 Coattention Encoder Coattention layer \u518d\u6b21\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e0a\u4e0b\u6587\u4e4b\u95f4\u7684\u53cc\u5411\u5173\u6ce8\u95ee\u9898 \u7136\u800c\uff0ccoattention\u5305\u62ec\u4e24\u7ea7\u6ce8\u610f\u529b\u8ba1\u7b97 \u5173\u6ce8\u90a3\u4e9b\u672c\u8eab\u5c31\u662f\u6ce8\u610f\u529b\u8f93\u51fa\u7684\u8868\u8c61 \u6211\u4eec\u4f7f\u7528C2Q\u6ce8\u610f\u529b\u5206\u5e03 \\(\\alpha _i\\) \uff0c\u6c42\u5f97Q2C\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{b}_j\\) \u7684\u52a0\u6743\u548c\u3002\u8fd9\u7ed9\u4e86\u6211\u4eec\u7b2c\u4e8c\u7ea7\u6ce8\u610f\u529b\u8f93\u51fa \\(\\boldsymbol{s}_{i}\\) \\[ \\boldsymbol{s}_{i}=\\sum_{j=1}^{M+1} \\alpha_{j}^{i} \\boldsymbol{b}_{j} \\in \\mathbb{R}^{l} \\quad \\forall i \\in\\{1, \\ldots, N\\} \\] FusionNet(Huang, Zhu, Shen, Chen 2017) Attention functions MLP(Additive)\u5f62\u5f0f \\[ S_{i j}=s^{T} \\tanh \\left(W_{1} c_{i}+W_{2} q_{j}\\right) \\] Space: O(mnk), W is kxd Bilinear (Product) form \\[ \\begin{array}{c}{S_{i j}=c_{i}^{T} W q_{j}} \\\\ {S_{i j}=c_{i}^{T} U^{T} V q_{j}} \\\\ {S_{i j}=c_{i}^{T} W^{T} D W q_{j}} \\\\ S_{i j}=\\operatorname{Relu}\\left(c_{i}^{T} W^{T}\\right) \\operatorname{DRelu}\\left(W q_{j}\\right) \\end{array} \\] Smaller space, Non-linearity Space: O((m+n)k) Multi-level inter-attention \u7ecf\u8fc7\u591a\u5c42\u6b21\u7684inter-attention\uff0c\u4f7f\u7528RNN\u3001self-attention \u548c\u53e6\u4e00\u4e2aRNN\u5f97\u5230\u4e0a\u4e0b\u6587\u7684\u6700\u7ec8\u8868\u793a \\(\\left\\{\\boldsymbol{u}_{i}^{C}\\right\\}\\)","title":"6. Recent, more advanced architectures"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#7-elmo-and-bert-preview","text":"","title":"7. ELMo and BERT preview"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#note-07-question-answering","text":"","title":"Note 07 Question Answering"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#1-dynamic-memory-networks-for-question-answering-over-text-and-images","text":"QA \u7cfb\u7edf\u7684\u6982\u5ff5\u662f\u76f4\u63a5\u4ece\u6587\u6863\u3001\u5bf9\u8bdd\u3001\u5728\u7ebf\u641c\u7d22\u7b49\u4e2d\u63d0\u53d6\u4fe1\u606f(\u6709\u65f6\u662f\u6bb5\u843d\uff0c\u6216\u662f\u5355\u8bcd\u7684\u8303\u56f4)\uff0c\u4ee5\u6ee1\u8db3\u7528\u6237\u7684\u4fe1\u606f\u9700\u6c42\u3002QA\u7cfb\u7edf\u4e0d\u9700\u8981\u7528\u6237\u901a\u8bfb\u6574\u4e2a\u6587\u6863\uff0c\u800c\u662f\u503e\u5411\u4e8e\u7ed9\u51fa\u4e00\u4e2a\u7b80\u77ed\u7684\u7b54\u6848\u3002\u73b0\u5728\uff0cQA\u7cfb\u7edf\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u4e0e\u5176\u4ed6NLP\u7cfb\u7edf(\u5982\u804a\u5929\u673a\u5668\u4eba)\u7ed3\u5408\u8d77\u6765\uff0c\u6709\u4e9bQA\u7cfb\u7edf\u751a\u81f3\u8d85\u8d8a\u4e86\u6587\u672c\u6587\u6863\u7684\u641c\u7d22\uff0c\u53ef\u4ee5\u4ece\u4e00\u7ec4\u56fe\u7247\u4e2d\u63d0\u53d6\u4fe1\u606f\u3002 \u6709\u5f88\u591a\u7c7b\u578b\u7684\u95ee\u9898\uff0c\u5176\u4e2d\u6700\u7b80\u5355\u7684\u662f Factoid Question Answering \u4e8b\u5b9e\u7c7b\u95ee\u9898\u56de\u7b54\u3002\u5b83\u5305\u542b\u7684\u95ee\u9898\u770b\u8d77\u6765\u50cf\u201c\u201cThe symbol for mercuric oxide is?\u201d \u201cWhich NFL team represented the AFC at Super Bowl 50?\u201d\u3002\u5f53\u7136\u8fd8\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u95ee\u9898\uff0c\u5982\u6570\u5b66\u95ee\u9898(\u201c2+3=?\u201d)\u3001\u903b\u8f91\u95ee\u9898\uff0c\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u5e7f\u6cdb\u7684\u63a8\u7406(\u800c\u4e14\u6ca1\u6709\u80cc\u666f\u4fe1\u606f)\u3002\u7136\u800c\uff0c\u6211\u4eec\u53ef\u4ee5\u8bf4\u5728\u4eba\u4eec\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\uff0c\u5bfb\u6c42\u4fe1\u606f\u7684\u4e8b\u5b9e\u7c7b\u95ee\u9898\u56de\u7b54\u662f\u6700\u5e38\u89c1\u7684\u95ee\u9898\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u5927\u591a\u6570NLP\u95ee\u9898\u90fd\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u95ee\u7b54\u95ee\u9898\uff0c\u5176\u8303\u5f0f\u5f88\u7b80\u5355\uff1a\u6211\u4eec\u53d1\u51fa\u4e00\u4e2a\u67e5\u8be2\uff0c\u7136\u540e\u673a\u5668\u63d0\u4f9b\u4e00\u4e2a\u54cd\u5e94\u3002\u901a\u8fc7\u9605\u8bfb\u6587\u6863\u6216\u4e00\u7ec4\u6307\u4ee4\uff0c\u667a\u80fd\u7cfb\u7edf\u5e94\u8be5\u80fd\u591f\u56de\u7b54\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\u3002\u6211\u4eec\u53ef\u4ee5\u8981\u6c42\u53e5\u5b50\u7684POS\u6807\u7b7e\uff0c\u6211\u4eec\u53ef\u4ee5\u8981\u6c42\u7cfb\u7edf\u7528\u4e0d\u540c\u7684\u8bed\u8a00\u6765\u54cd\u5e94\u3002\u56e0\u6b64\uff0c\u5f88\u81ea\u7136\u5730\uff0c\u6211\u4eec\u60f3\u8bbe\u8ba1\u4e00\u4e2a\u53ef\u4ee5\u7528\u4e8e\u4e00\u822cQA\u7684\u6a21\u578b\u3002 \u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\uff0c\u6211\u4eec\u9762\u4e34\u4e24\u5927\u969c\u788d\u3002\u8bb8\u591aNLP\u4efb\u52a1\u4f7f\u7528\u4e0d\u540c\u7684\u67b6\u6784\uff0c\u5982TreeLSTM (Tai et al., 2015)\u7528\u4e8e\u60c5\u7eea\u5206\u6790\uff0cMemory Network (Weston et al., 2015) \u7528\u4e8e\u56de\u7b54\u95ee\u9898\uff0c\u4ee5\u53ca\u53cc\u5411LSTM-CRF (Huang et al., 2015) \u7528\u4e8e\u8bcd\u6027\u6807\u6ce8\u3002\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u5168\u9762\u7684\u591a\u4efb\u52a1\u5b66\u4e60\u5f80\u5f80\u975e\u5e38\u56f0\u96be\uff0c\u8fc1\u79fb\u5b66\u4e60\u4ecd\u7136\u662f\u5f53\u524d\u4eba\u5de5\u667a\u80fd\u9886\u57df(\u8ba1\u7b97\u673a\u89c6\u89c9\u3001\u5f3a\u5316\u5b66\u4e60\u7b49)\u795e\u7ecf\u7f51\u7edc\u67b6\u6784\u7684\u4e3b\u8981\u969c\u788d\u3002 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528NLP\u7684\u5171\u4eab\u4f53\u7cfb\u7ed3\u6784\u6765\u89e3\u51b3\u7b2c\u4e00\u4e2a\u95ee\u9898\uff1a\u52a8\u6001\u5185\u5b58\u7f51\u7edc(DMN)\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3a\u4e00\u822cQA\u4efb\u52a1\u8bbe\u8ba1\u7684\u4f53\u7cfb\u7ed3\u6784\u3002QA\u5f88\u96be\uff0c\u90e8\u5206\u539f\u56e0\u662f\u9605\u8bfb\u4e00\u6bb5\u5f88\u957f\u7684\u6587\u5b57\u5f88\u96be\u3002\u5373\u4f7f\u5bf9\u4e8e\u4eba\u7c7b\uff0c\u6211\u4eec\u4e5f\u4e0d\u80fd\u5728\u4f60\u7684\u5de5\u4f5c\u8bb0\u5fc6\u4e2d\u5b58\u50a8\u4e00\u4e2a\u5f88\u957f\u7684\u6587\u6863\u3002","title":"1 Dynamic Memory Networks for Question Answering over Text and Images"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#11-input-module","text":"\u5c06DMN\u5206\u4e3a\u591a\u4e2a\u6a21\u5757\u3002\u9996\u5148\u6211\u4eec\u6765\u770b\u8f93\u5165\u6a21\u5757\u3002\u8f93\u5165\u6a21\u5757\u4ee5\u5355\u8bcd\u5e8f\u5217 \\(T_I\\) \u4f5c\u4e3a\u8f93\u5165\uff0c\u8f93\u51fa\u4e8b\u5b9e\u8868\u793a\u5e8f\u5217 \\(T_C\\) \u3002\u5982\u679c\u8f93\u51fa\u662f\u4e00\u4e2a\u5355\u8bcd\u5217\u8868\uff0c\u6211\u4eec\u6709 \\(T_C = T_I\\) \u3002\u5982\u679c\u8f93\u51fa\u662f\u4e00\u4e2a\u53e5\u5b50\u5217\u8868\uff0c\u6211\u4eec\u6709 \\(T_C\\) \u4f5c\u4e3a\u53e5\u5b50\u7684\u6570\u91cf\uff0c \\(T_I\\) \u4f5c\u4e3a\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u6570\u91cf\u3002\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684GRU\u6765\u8bfb\u53d6\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u5373\u9690\u85cf\u72b6\u6001 \\(h_{t}=\\operatorname{GRU}\\left(x_{t}, h_{t-1}\\right)\\) \uff0c\u5176\u4e2d \\(x_{t}=L\\left[w_{t}\\right]\\) \uff0c \\(L\\) \u4e3a\u5d4c\u5165\u77e9\u9635\uff0c \\(w_t\\) \u4e3a \\(t\\) \u65f6\u523b\u7684\u5355\u8bcd\uff0c\u6211\u4eec\u4f7f\u7528Bi-GRU\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002","title":"1.1 Input Module"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#12-question-module","text":"\u6211\u4eec\u4e5f\u4f7f\u7528\u6807\u51c6\u7684GRU\u6765\u8bfb\u53d6\u95ee\u9898(\u4f7f\u7528\u5d4c\u5165\u77e9\u9635 \\(L : q_{t}=\\operatorname{GRU}\\left(L\\left[w_{t}^{Q}\\right], q_{t-1}\\right)\\) )\uff0c\u4f46\u662f\u95ee\u9898\u6a21\u5757\u7684\u8f93\u51fa\u662f\u95ee\u9898\u7684\u7f16\u7801\u8868\u793a\u3002","title":"1.2 Question Module"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#13-episodic-memory-module","text":"\u52a8\u6001\u8bb0\u5fc6\u7f51\u7edc\u7684\u4e00\u4e2a\u663e\u8457\u7279\u5f81\u662f\u60c5\u666f\u8bb0\u5fc6\u6a21\u5757\uff0c\u5b83\u5728\u8f93\u5165\u5e8f\u5217\u4e0a\u8fd0\u884c\u591a\u6b21\uff0c\u6bcf\u6b21\u5173\u6ce8\u8f93\u5165\u7684\u4e0d\u540c\u4e8b\u5b9e\u5b50\u96c6\u3002 \u5b83\u4f7f\u7528Bi-GRU\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0cBi-GRU\u63a5\u6536\u8f93\u5165\u6a21\u5757\u4f20\u5165\u7684\u53e5\u5b50\u7ea7\u522b\u8868\u793a\u7684\u8f93\u5165\uff0c\u5e76\u751f\u6210\u60c5\u666f\u8bb0\u5fc6\u8868\u793a\u3002 \u6211\u4eec\u5c06\u60c5\u666f\u8bb0\u5fc6\u8868\u5f81\u8868\u793a\u4e3a \\(m^i\\) \uff0c\u60c5\u666f\u8868\u5f81(\u7531\u6ce8\u610f\u673a\u5236\u8f93\u51fa)\u8868\u793a\u4e3a \\(e^i\\) \u3002\u60c5\u666f\u8bb0\u5fc6\u8868\u793a\u4f7f\u7528 \\(m^0 = q\\) \u521d\u59cb\u5316\uff0c\u7136\u540e\u7ee7\u7eed\u4f7f\u7528 \\(\\mathrm{GRU} : m^{i}=\\mathrm{GRU}\\left(e^{i}, m^{i-1}\\right)\\) \u3002\u4f7f\u7528\u6765\u81ea\u8f93\u5165\u6a21\u5757\u7684\u9690\u85cf\u72b6\u6001\u8f93\u51fa\u66f4\u65b0\u60c5\u666f\u8868\u5f81\uff0c\u5982\u4e0b\u6240\u793a\uff0c\u5176\u4e2d \\(g\\) \u662f\u6ce8\u610f\u673a\u5236 $$ \\begin{aligned} h_{t}^{i} &=g_{t}^{i} \\operatorname{GRU}\\left(c_{t}, h_{t-1} {i}\\right)+\\left(1-g_{t} \\right) h_{t-1}^{i} \\ e_{i} &=h_{T_{\\mathrm{C}}}^{i} \\end{aligned} $$ \u6ce8\u610f\u5411\u91cf \\(g\\) \u7684\u8ba1\u7b97\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u4f46\u662f\u5728\u539f\u59cb\u7684DMN\u8bba\u6587(Kumar et al. 2016)\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4ee5\u4e0b\u516c\u5f0f\u662f\u6700\u6709\u6548\u7684 $$ \\begin{array}{l} g_{t}^{i}=G\\left(c_{t}, m^{i-1}, q\\right) \\ {G(c, m, q)=\\sigma\\left(W^{(2)} \\tanh \\left(W^{(1)} z(c, m, q)+b {(1)}\\right)+b \\right)} \\ {z(c, m, q)=\\left[c, m, q, c \\circ q, c \\circ m,|c-q|,|c-m|, c^{T} W^{(b)} q_{,} c^{T} W^{(b)} m\\right]}\\end{array} $$ \u8fd9\u6837\uff0c\u5982\u679c\u53e5\u5b50\u4e0e\u95ee\u9898\u6216\u8bb0\u5fc6\u6709\u5173\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e2d\u7684\u95e8\u5c31\u4f1a\u88ab\u6fc0\u6d3b\u3002\u5728\u7b2c \\(i\\) \u904d\u4e2d\uff0c\u5982\u679c\u603b\u7ed3\u4e0d\u8db3\u4ee5\u56de\u7b54\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7b2c \\(i +1\\) \u904d\u4e2d\u91cd\u590d\u8f93\u5165\u5e8f\u5217\u3002\u4f8b\u5982\uff0c\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\u201cWhere is the football?\u201d\u4ee5\u53ca\u8f93\u5165\u5e8f\u5217\u201cJohn kicked the football\u201d\u548c\u201cJohn was in the \ufb01eld\u201d\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cJohn\u548cfootball\u53ef\u4ee5\u5728\u4e00\u4e2apass\u4e2d\u8fde\u63a5\uff0c\u7136\u540eJohn\u548cfield\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2apass\u4e2d\u8fde\u63a5\uff0c\u8fd9\u6837\u7f51\u7edc\u5c31\u53ef\u4ee5\u6839\u636e\u8fd9\u4e24\u4e2a\u4fe1\u606f\u8fdb\u884c\u4f20\u9012\u63a8\u65ad\u3002","title":"1.3 Episodic Memory Module"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#14-answer-module","text":"\u7b54\u6848\u6a21\u5757\u662f\u4e00\u4e2a\u7b80\u5355\u7684GRU\u89e3\u7801\u5668\uff0c\u5b83\u63a5\u6536\u95ee\u9898\u6a21\u5757\u3001\u60c5\u666f\u8bb0\u5fc6\u6a21\u5757\u7684\u8f93\u51fa\uff0c\u5e76\u8f93\u51fa\u4e00\u4e2a\u5355\u8bcd(\u6216\u8005\u901a\u5e38\u662f\u4e00\u4e2a\u8ba1\u7b97\u7ed3\u679c)\u3002\u5176\u5de5\u4f5c\u539f\u7406\u5982\u4e0b: $$ \\begin{aligned} y_{t} &=\\operatorname{softmax}\\left(W^{(a)} a_{t}\\right) \\ a_{t} &=\\operatorname{GRU}\\left(\\left[y_{t-1}, q\\right], a_{t-1}\\right) \\end{aligned} $$","title":"1.4 Answer Module"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#15-experiments","text":"\u901a\u8fc7\u5b9e\u9a8c\u53ef\u4ee5\u770b\u51fa\uff0cDMN\u5728babl\u95ee\u7b54\u4efb\u52a1\u4e2d\u7684\u8868\u73b0\u4f18\u4e8eMemNN\uff0c\u5728\u60c5\u7eea\u5206\u6790\u548c\u8bcd\u6027\u6807\u6ce8\u65b9\u9762\u4e5f\u4f18\u4e8e\u5176\u4ed6\u4f53\u7cfb\u7ed3\u6784\u3002\u60c5\u666f\u8bb0\u5fc6\u9700\u8981\u591a\u5c11\u4e2a\u60c5\u666f\uff1f\u7b54\u6848\u662f\uff0c\u4efb\u52a1\u8d8a\u96be\uff0c\u901a\u8fc7\u7684\u6b21\u6570\u5c31\u8d8a\u591a\u3002\u591a\u6b21\u4f20\u9012\u8fd8\u53ef\u4ee5\u8ba9\u7f51\u7edc\u771f\u6b63\u7406\u89e3\u53e5\u5b50\uff0c\u53ea\u5173\u6ce8\u6700\u540e\u4e00\u9879\u4efb\u52a1\u7684\u76f8\u5173\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u53ea\u5bf9\u5355\u8bcd\u5d4c\u5165\u7684\u4fe1\u606f\u505a\u51fa\u53cd\u5e94\u3002 \u5173\u952e\u601d\u60f3\u662f\u6a21\u5757\u5316\u7cfb\u7edf\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u66f4\u6539\u8f93\u5165\u6a21\u5757\u6765\u5141\u8bb8\u4e0d\u540c\u7c7b\u578b\u7684\u8f93\u5165\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u7528\u4e00\u4e2a\u57fa\u4e8e\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u6a21\u5757\u66ff\u6362\u8f93\u5165\u6a21\u5757\uff0c\u90a3\u4e48\u8fd9\u4e2a\u67b6\u6784\u5c31\u53ef\u4ee5\u5904\u7406\u4e00\u4e2a\u79f0\u4e3a\u53ef\u89c6\u5316\u95ee\u9898\u56de\u7b54(VQA)\u7684\u4efb\u52a1\u3002\u5b83\u4e5f\u80fd\u591f\u5728\u8fd9\u9879\u4efb\u52a1\u4e2d\u80dc\u8fc7\u5176\u4ed6\u6a21\u578b\u3002","title":"1.5 Experiments"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#16-summary","text":"\u81ea2015\u5e74\u4ee5\u6765\uff0c\u5bfb\u627e\u80fd\u591f\u89e3\u51b3\u6240\u6709\u95ee\u9898\u7684\u901a\u7528\u4f53\u7cfb\u7ed3\u6784\u7684\u70ed\u60c5\u7565\u6709\u51cf\u9000\uff0c\u4f46\u5728\u4e00\u4e2a\u9886\u57df\u8fdb\u884c\u8bad\u7ec3\u5e76\u63a8\u5e7f\u5230\u5176\u4ed6\u9886\u57df\u7684\u613f\u671b\u6709\u6240\u589e\u5f3a\u3002\u8981\u7406\u89e3\u66f4\u9ad8\u7ea7\u7684\u95ee\u7b54\u6a21\u5757\uff0c\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\u52a8\u6001\u6ce8\u610f\u529b\u7f51\u7edc(DCN)\u3002","title":"1.6 Summary"},{"location":"CS224n-2019-10-Question%20Answering%20and%20the%20Default%20Final%20Project/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/","text":"Lecture 11 ConvNets for NLP \u00b6 Lecture Plan Announcements Intro to CNNs Simple CNN for Sentence Classification: Yoon (2014) CNN potpourri Deep CNN for Sentence Classification: Conneauet al. (2017) Quasi-recurrent Neural Networks Welcome to the second half of the course! \u73b0\u5728\uff0c\u6211\u4eec\u6b63\u5728\u4e3a\u60a8\u51c6\u5907\u6210\u4e3aDL+NLP\u7814\u7a76\u4eba\u5458/\u5b9e\u8df5\u8005 \u8bb2\u5ea7\u4e0d\u4f1a\u603b\u662f\u6709\u6240\u6709\u7684\u7ec6\u8282 \u8fd9\u53d6\u51b3\u4e8e\u4f60\u5728\u7f51\u4e0a\u641c\u7d22/\u9605\u8bfb\u6765\u4e86\u89e3\u66f4\u591a \u8fd9\u662f\u4e00\u4e2a\u6d3b\u8dc3\u7684\u7814\u7a76\u9886\u57df\uff0c\u6709\u65f6\u5019\u6ca1\u6709\u660e\u786e\u7684\u7b54\u6848 Staff \u5f88\u4e50\u610f\u4e0e\u4f60\u8ba8\u8bba\uff0c\u4f46\u4f60\u9700\u8981\u81ea\u5df1\u601d\u8003 \u4f5c\u4e1a\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u5e94\u4ed8\u9879\u76ee\u7684\u771f\u6b63\u56f0\u96be \u6bcf\u4e2a\u4efb\u52a1\u90fd\u6545\u610f\u6bd4\u4e0a\u4e00\u4e2a\u4efb\u52a1\u6709\u66f4\u5c11\u7684\u5e2e\u52a9\u6750\u6599\u3002 \u5728\u9879\u76ee\u4e2d\uff0c\u6ca1\u6709\u63d0\u4f9b autograder \u6216 \u5408\u7406\u6027\u68c0\u67e5 DL\u8c03\u8bd5\u5f88\u56f0\u96be\uff0c\u4f46\u662f\u60a8\u9700\u8981\u5b66\u4e60\u5982\u4f55\u8fdb\u884c\u8c03\u8bd5\uff01 Wanna read a book? 2. From RNNs to Convolutional Neural Nets \u00b6 \u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4e0d\u80fd\u6355\u83b7\u6ca1\u6709\u524d\u7f00\u4e0a\u4e0b\u6587\u7684\u77ed\u8bed \u7ecf\u5e38\u5728\u6700\u7ec8\u5411\u91cf\u4e2d\u6355\u83b7\u592a\u591a\u7684\u6700\u540e\u5355\u8bcd \u4f8b\u5982\uff0csoftmax\u901a\u5e38\u53ea\u5728\u6700\u540e\u4e00\u6b65\u8ba1\u7b97 From RNNs to Convolutional Neural Nets \u5377\u79ef\u7f51\u7edc\u7684\u4e3b\u8981\u60f3\u6cd5\uff1a \u5982\u679c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u53ef\u80fd\u7684\u5b50\u5e8f\u5217\u8ba1\u7b97\u4e00\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\u5462\uff1f \u4f8b\u5982\uff1a\u201ctentative deal reached to keep government open\u201d \u8ba1\u7b97\u7684\u5411\u91cf\u4e3a tentative deal reached, deal reached to, reached to keep, to keep government, keep government open \u4e0d\u7ba1\u77ed\u8bed\u662f\u5426\u5408\u4e4e\u8bed\u6cd5 \u5728\u8bed\u8a00\u5b66\u4e0a\u6216\u8ba4\u77e5\u4e0a\u4e0d\u592a\u53ef\u4fe1 \u7136\u540e\u5c06\u5b83\u4eec\u5206\u7ec4(\u5f88\u5feb) What is a convolution anyway? \u4e00\u7ef4\u79bb\u6563\u5377\u79ef\u4e00\u822c\u4e3a\uff1a \\((f * g)[n]=\\sum_{m=-M}^{M} f[n-m] g[m]\\) \u5377\u79ef\u7ecf\u5178\u5730\u7528\u4e8e\u4ece\u56fe\u50cf\u4e2d\u63d0\u53d6\u7279\u5f81 \u6a21\u578b\u4f4d\u7f6e\u4e0d\u53d8\u7684\u8bc6\u522b \u8f6c\u5230cs231n\uff01 2d example \u9ec4\u8272\u548c\u7ea2\u8272\u6570\u5b57\u663e\u793a\u8fc7\u6ee4\u5668(=\u5185\u6838)\u6743\u91cd \u7eff\u8272\u663e\u793a\u8f93\u5165 \u7c89\u8272\u663e\u793a\u8f93\u51fa A 1D convolution for text 1D convolution for text with padding \u8f93\u5165\u957f\u5ea6\u4e3a \\(L\\) \u7684\u8bcd\u5e8f\u5217\uff0c\u5047\u8bbe\u5355\u8bcd\u7ef4\u5ea6\u4e3a 4\uff0c\u5373\u6709 4 channels \u5377\u79ef\u540e\u5c06\u4f1a\u5f97\u5230 1 channel 3 channel 1D convolution with padding = 1 \u591a\u4e2achannel\u5219\u6700\u7ec8\u5f97\u5230\u591a\u4e2achannel\u7684\u8f93\u51fa\uff0c\u5173\u6ce8\u7684\u6587\u672c\u6f5c\u5728\u7279\u5f81\u4e5f\u4e0d\u540c conv1d, padded with max pooling over time \u901a\u8fc7 max pooling over time\uff0c\u83b7\u5f97\u6700\u5927\u7684\u6fc0\u6d3b\u503c conv1d, padded with avepooling over time In PyTorch batch_size = 16 word_embed_size = 4 seq_len = 7 input = torch . randn ( batch_size , word_embed_size , seq_len ) conv1 = Conv1d ( in_channels = word_embed_size , out_channels = 3 , kernel_size = 3 ) # can add: padding=1 hidden1 = conv1 ( input ) hidden2 = torch . max ( hidden1 , dim = 2 ) # max pool Other less useful notions: stride = 2 stride \u6b65\u957f\uff0c\u51cf\u5c11\u8ba1\u7b97\u91cf Less useful: local max pool, stride = 2 \u6bcf\u4e24\u884c\u505a max pooling\uff0c\u88ab\u79f0\u4e3a\u6b65\u957f\u4e3a2\u7684\u5c40\u90e8\u6700\u5927\u6c60\u5316 conv1d, k-max pooling over time, k= 2 \u8bb0\u5f55\u6bcf\u4e00\u4e2achannel\u7684\u6240\u6709\u65f6\u95f4\u7684 top k\u7684\u6fc0\u6d3b\u503c\uff0c\u5e76\u4e14\u6309\u539f\u6709\u987a\u5e8f\u4fdd\u7559\uff08\u4e0a\u4f8b\u4e2d\u7684-0.2 0.3\uff09 Other somewhat useful notions: dilation = 2 \u6269\u5f20\u5377\u79ef \u4e0a\u4f8b\u4e2d\uff0c\u5bf91 3 5\u884c\u8fdb\u884c\u5377\u79ef\uff0c\u901a\u8fc7\u4e24\u4e2afilter\u5f97\u5230\u4e24\u4e2achannel\u7684\u6fc0\u6d3b\u503c \u53ef\u4ee5\u5728\u7b2c\u4e00\u6b65\u7684\u5377\u79ef\u4e2d\u5c06\u5377\u79ef\u6838\u4ece3\u6539\u4e3a5\uff0c\u5373\u53ef\u5b9e\u73b0\u8fd9\u6837\u7684\u6548\u679c\uff0c\u65e2\u4fdd\u8bc1\u4e86\u77e9\u9635\u5f88\u5c0f\uff0c\u53c8\u4fdd\u8bc1\u4e86\u4e00\u6b21\u5377\u79ef\u4e2d\u770b\u5230\u66f4\u5927\u8303\u56f4\u7684\u53e5\u5b50 Summary \u5728CNN\u4e2d\uff0c\u4e00\u6b21\u80fd\u770b\u4e00\u4e2a\u53e5\u5b50\u7684\u591a\u5c11\u5185\u5bb9\u662f\u5f88\u91cd\u8981\u7684\u6982\u5ff5 \u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684filter\u3001\u6269\u5f20\u5377\u79ef\u6216\u8005\u589e\u5927\u5377\u79ef\u6df1\u5ea6\uff08\u5c42\u6570\uff09 3. Single Layer CNN for Sentence Classification \u00b6 Yoon Kim (2014): Convolutional Neural Networks for Sentence Classification. EMNLP 2014. https://arxiv.org/pdf/1408.5882.pdf Code: https://arxiv.org/pdf/1408.5882.pdf[Theano !, etc.] A variant of convolutional NNs of Collobert, Weston et al. (2011) \u76ee\u6807\uff1a\u53e5\u5b50\u5206\u7c7b \u4e3b\u8981\u662f\u53e5\u5b50\u7684\u79ef\u6781\u6216\u6d88\u6781\u60c5\u7eea \u5176\u4ed6\u4efb\u52a1 \u5224\u65ad\u53e5\u5b50\u4e3b\u89c2\u6216\u5ba2\u89c2 \u95ee\u9898\u5206\u7c7b\uff1a\u95ee\u9898\u662f\u5173\u4e8e\u4ec0\u4e48\u5b9e\u4f53\u7684\uff1f\u5173\u4e8e\u4eba\u3001\u5730\u70b9\u3001\u6570\u5b57\u3001\u2026\u2026 \u4e00\u4e2a\u5377\u79ef\u5c42\u548c\u6c60\u5316\u5c42\u7684\u7b80\u5355\u4f7f\u7528 \u8bcd\u5411\u91cf\uff1a \\(\\mathbf{x}_{i} \\in \\mathbb{R}^{k}\\) \u53e5\u5b50\uff1a \\(\\mathbf{x}_{1 : n}=\\mathbf{x}_{1} \\oplus x_{2} \\oplus \\cdots \\oplus \\mathbf{x}_{n}\\) (\u5411\u91cf\u8fde\u63a5) \u8fde\u63a5 \\(\\mathbf{X}_{i : i+j}\\) \u8303\u56f4\u5185\u7684\u53e5\u5b50 (\u5bf9\u79f0\u66f4\u5e38\u89c1) \u5377\u79ef\u6838 \\(\\mathbf{w} \\in \\mathbb{R}^{h k}\\) (\u4f5c\u7528\u8303\u56f4\u4e3a h \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3) \u6ce8\u610f\uff0cfilter\u662f\u5411\u91cf\uff0csize \u53ef\u4ee5\u662f2,3\u62164 Single layer CNN \u8fc7\u6ee4\u5668 \\(\\boldsymbol w\\) \u5e94\u7528\u4e8e\u6240\u6709\u53ef\u80fd\u7684\u7a97\u53e3(\u8fde\u63a5\u5411\u91cf) \u4e3aCNN\u5c42\u8ba1\u7b97\u7279\u5f81(\u4e00\u4e2a\u901a\u9053) \\[ c_{i}=f\\left(\\mathbf{w}^{T} \\mathbf{x}_{i : i+h-1}+b\\right) \\] \u53e5\u5b50 \\(\\mathbf{x}_{1 : n}=\\mathbf{x}_{1} \\oplus \\mathbf{x}_{2} \\oplus \\ldots \\oplus \\mathbf{x}_{n}\\) \u6240\u6709\u53ef\u80fd\u7684\u957f\u5ea6\u4e3a h \u7684\u7a97\u53e3 \\(\\left\\{\\mathbf{x}_{1 : h}, \\mathbf{x}_{2 : h+1}, \\dots, \\mathbf{x}_{n-h+1 : n}\\right\\}\\) \u7ed3\u679c\u662f\u4e00\u4e2a feature map \\(\\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1}\\) Pooling and channels \u6c60\u5316\uff1amax-over-time pooling layer \u60f3\u6cd5\uff1a\u6355\u83b7\u6700\u91cd\u8981\u7684\u6fc0\u6d3b(maximum over time) \u4ecefeature map\u4e2d \\(\\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1}\\) \u6c60\u5316\u5f97\u5230\u5355\u4e2a\u6570\u5b57 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \u4f7f\u7528\u591a\u4e2a\u8fc7\u6ee4\u5668\u6743\u91cd \\(\\boldsymbol{w}\\) \u4e0d\u540c\u7a97\u53e3\u5927\u5c0f h \u662f\u6709\u7528\u7684 \u7531\u4e8e\u6700\u5927\u6c60\u5316 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \uff0c\u548c \\(\\mathbf{c}\\) \u7684\u957f\u5ea6\u65e0\u5173 \\[ \\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1} \\] \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e9b filters \u6765\u89c2\u5bdf unigrams, bigrams, tri-grams, 4-grams,\u7b49\u7b49 Multi-channel input idea \u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5411\u91cf\u521d\u59cb\u5316(word2vec\u6216Glove) \u4ece\u4e24\u4e2a\u526f\u672c\u5f00\u59cb \u53ea\u6709\u4e00\u4e2a\u526f\u672c\u8fdb\u884c\u4e86\u53cd\u5411\u4f20\u64ad\uff0c\u4fdd\u6301\u5176\u4ed6\u201c\u9759\u6001\u201d \u4e24\u4e2a\u901a\u9053\u96c6\u90fd\u5728\u6700\u5927\u6c60\u5316\u524d\u6dfb\u52a0\u5230 \\(c_i\\) Classification after one CNN layer \u9996\u5148\u662f\u4e00\u4e2a\u5377\u79ef\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u6700\u5927\u6c60\u5316 \u4e3a\u4e86\u83b7\u5f97\u6700\u7ec8\u7684\u7279\u5f81\u5411\u91cf \\(\\mathbf{z}=\\left[\\hat{c}_{1}, \\dots, \\hat{c}_{m}\\right]\\) \u5047\u8bbe\u6211\u4eec\u6709 m \u4e2a filter \\(\\mathbf{w}\\) \u4f7f\u7528100\u4e2a\u5927\u5c0f\u5206\u522b\u4e3a3\u30014\u30015\u7684\u7279\u5f81\u56fe \u6700\u7ec8\u662f\u7b80\u5355\u7684 softmax layer \\(y=\\operatorname{softmax}\\left(W^{(S)} z+b\\right)\\) https://arxiv.org/pdf/1510.03820.pdf \u8f93\u5165\u957f\u5ea6\u4e3a 7 \u7684\u4e00\u53e5\u8bdd\uff0c\u6bcf\u4e2a\u8bcd\u7684\u7ef4\u5ea6\u662f 5 \uff0c\u5373\u8f93\u5165\u77e9\u9635\u662f \\(7 \\times 5\\) \u4f7f\u7528\u4e0d\u540c\u7684filter_size : (2,3,4)\uff0c\u5e76\u4e14\u6bcf\u4e2asize\u90fd\u662f\u7528\u4e24\u4e2afilter\uff0c\u83b7\u5f97\u4e24\u4e2achannel\u7684feature\uff0c\u5373\u5171\u8ba16\u4e2afilter \u5bf9\u6bcf\u4e2afilter\u7684feature\u8fdb\u884c1-max pooling\u540e\uff0c\u62fc\u63a5\u5f97\u5230 6 \u7ef4\u7684\u5411\u91cf\uff0c\u5e76\u4f7f\u7528softmax\u540e\u518d\u83b7\u5f97\u4e8c\u5206\u7c7b\u7ed3\u679c Regularization \u4f7f\u7528 Dropout : \u4f7f\u7528\u6982\u7387 p (\u8d85\u53c2\u6570)\u7684\u4f2f\u52aa\u5229\u968f\u673a\u53d8\u91cf\uff08\u53ea\u67090 1\u5e76\u4e14p\u662f\u4e3a1\u7684\u6982\u7387\uff09\u521b\u5efamask\u5411\u91cf r \u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5220\u9664\u7279\u5f81 \\[ y=\\operatorname{softmax}\\left(W^{(S)}(r \\circ z)+b\\right) \\] \u89e3\u91ca\uff1a\u9632\u6b62\u4e92\u76f8\u9002\u5e94(\u5bf9\u7279\u5b9a\u7279\u5f81\u7684\u8fc7\u5ea6\u62df\u5408)(Srivastava, Hinton, et al. 2014) \u5728\u6d4b\u8bd5\u65f6\u4e0d\u9002\u7528dropout\uff0c\u4f7f\u7528\u6982\u7387p\u7f29\u653e\u6700\u7ec8\u5411\u91cf \\[ \\hat{W}^{(S)}=p W^{(S)} \\] \u6b64\u5916\uff1a\u9650\u5236\u6bcf\u4e2a\u7c7b\u7684\u6743\u91cd\u5411\u91cf\u7684L2 Norm(softmax \u6743\u91cd \\(W^{(S)}\\) \u7684\u6bcf\u4e00\u884c)\u4e0d\u8d85\u8fc7\u56fa\u5b9a\u6570 \\(s\\) (\u4e5f\u662f\u8d85\u53c2\u6570) \u5982\u679c \\(\\left\\|W_{c}^{(S)}\\right\\|>s\\) \uff0c\u5219\u91cd\u65b0\u7f29\u653e\u4e3a \\(\\left\\|W_{c}^{(S)}\\right\\|=s\\) \u4e0d\u662f\u5f88\u5e38\u89c1 All hyperparametersin Kim (2014) Problem with comparison? Dropout\u63d0\u4f9b\u4e862 - 4%\u7684\u7cbe\u5ea6\u6539\u8fdb \u4f46\u51e0\u4e2a\u6bd4\u8f83\u7cfb\u7edf\u6ca1\u6709\u4f7f\u7528Dropout\uff0c\u5e76\u53ef\u80fd\u4ece\u5b83\u83b7\u5f97\u76f8\u540c\u7684\u6536\u76ca \u4ecd\u7136\u88ab\u89c6\u4e3a\u4e00\u4e2a\u7b80\u5355\u67b6\u6784\u7684\u663e\u8457\u7ed3\u679c \u4e0e\u6211\u4eec\u5728\u524d\u51e0\u8282\u8bfe\u4e2d\u63cf\u8ff0\u7684\u7a97\u53e3\u548cRNN\u67b6\u6784\u7684\u4e0d\u540c\u4e4b\u5904\uff1a\u6c60\u5316\u3001\u8bb8\u591a\u8fc7\u6ee4\u5668\u548cdropout \u8fd9\u4e9b\u60f3\u6cd5\u4e2d\u6709\u7684\u53ef\u4ee5\u88ab\u7528\u5728RNNs\u4e2d 4. Model comparison: Our growing toolkit \u00b6 Bag of Vectors \uff1a\u5bf9\u4e8e\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u57fa\u7ebf\u3002\u7279\u522b\u662f\u5982\u679c\u540e\u9762\u6709\u51e0\u4e2aReLU\u5c42(See paper: Deep Averaging Networks) Window Model \uff1a\u5bf9\u4e8e\u4e0d\u9700\u8981\u5e7f\u6cdb\u4e0a\u4e0b\u6587\u7684\u95ee\u9898\uff08\u5373\u9002\u7528\u4e8elocal\u95ee\u9898\uff09\uff0c\u9002\u5408\u5355\u5b57\u5206\u7c7b\u3002\u4f8b\u5982POS, NER CNNs \uff1a\u9002\u5408\u5206\u7c7b\uff0c\u8f83\u77ed\u7684\u77ed\u8bed\u9700\u8981\u96f6\u586b\u5145\uff0c\u96be\u4ee5\u89e3\u91ca\uff0c\u6613\u4e8e\u5728gpu\u4e0a\u5e76\u884c\u5316 RNNs \uff1a\u4ece\u5de6\u5230\u53f3\u7684\u8ba4\u77e5\u66f4\u52a0\u5177\u6709\u53ef\u4fe1\u5ea6\uff0c\u4e0d\u9002\u5408\u5206\u7c7b(\u5982\u679c\u53ea\u4f7f\u7528\u6700\u540e\u4e00\u79cd\u72b6\u6001)\uff0c\u6bd4CNNs\u6162\u5f97\u591a\uff0c\u9002\u5408\u5e8f\u5217\u6807\u8bb0\u548c\u5206\u7c7b\u4ee5\u53ca\u8bed\u8a00\u6a21\u578b\uff0c\u7ed3\u5408\u6ce8\u610f\u529b\u673a\u5236\u65f6\u975e\u5e38\u68d2 RNN\u5bf9\u5e8f\u5217\u6807\u8bb0\u548c\u5206\u7c7b\u4e4b\u7c7b\u7684\u4e8b\u60c5\u6709\u5f88\u597d\u7684\u6548\u679c\uff0c\u4ee5\u53ca\u8bed\u8a00\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u5e76\u4e14\u7ed3\u5408\u6ce8\u610f\u529b\u673a\u5236\u4f1a\u53d6\u5f97\u5f88\u597d\u7684\u6548\u679c\uff0c\u4f46\u662f\u5bf9\u4e8e\u67d0\u4e2a\u53e5\u5b50\u7684\u6574\u4f53\u89e3\u91ca\uff0cCNN\u505a\u7684\u662f\u66f4\u597d\u7684 Gated units used vertically \u6211\u4eec\u5728LSTMs\u548cGRUs\u4e2d\u770b\u5230\u7684\u95e8/\u8df3\u8fc7\u662f\u4e00\u4e2a\u666e\u904d\u7684\u6982\u5ff5\uff0c\u73b0\u5728\u5728\u5f88\u591a\u5730\u65b9\u90fd\u4f7f\u7528\u8fd9\u4e2a\u6982\u5ff5 \u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5782\u76f4\u7684\u95e8 \u5b9e\u9645\u4e0a\uff0c\u5173\u952e\u7684\u6982\u5ff5\u2014\u2014\u7528\u5feb\u6377\u8fde\u63a5\u5bf9\u5019\u9009\u66f4\u65b0\u6c42\u548c\u2014\u2014\u662f\u975e\u5e38\u6df1\u7684\u7f51\u7edc\u5de5\u4f5c\u6240\u9700\u8981\u7684 Note: pad \\(\\mathbf{x}\\) for conv so same size when add them Batch Normalization (BatchNorm) [Ioffeand Szegedy. 2015. Batch normalization: Accelerating deep network training by reducing internal covariate shift. arXiv:1502.03167.] \u5e38\u7528\u4e8e CNNs \u901a\u8fc7\u5c06\u6fc0\u6d3b\u91cf\u7f29\u653e\u4e3a\u96f6\u5747\u503c\u548c\u5355\u4f4d\u65b9\u5dee\uff0c\u5bf9\u4e00\u4e2amini-batch\u7684\u5377\u79ef\u8f93\u51fa\u8fdb\u884c\u53d8\u6362 \u8fd9\u662f\u7edf\u8ba1\u5b66\u4e2d\u719f\u6089\u7684 Z-transform \u4f46\u5728\u6bcf\u7ec4mini-batch\u90fd\u4f1a\u66f4\u65b0\uff0c\u6240\u4ee5\u6ce2\u52a8\u7684\u5f71\u54cd\u4e0d\u5927 \u4f7f\u7528BatchNorm\u4f7f\u6a21\u578b\u5bf9\u53c2\u6570\u521d\u59cb\u5316\u7684\u654f\u611f\u7a0b\u5ea6\u4e0b\u964d\uff0c\u56e0\u4e3a\u8f93\u51fa\u662f\u81ea\u52a8\u91cd\u65b0\u6807\u5ea6\u7684 \u4e5f\u4f1a\u8ba9\u5b66\u4e60\u7387\u7684\u8c03\u4f18\u66f4\u7b80\u5355 \u6a21\u578b\u7684\u8bad\u7ec3\u4f1a\u66f4\u52a0\u7a33\u5b9a PyTorch: nn.BatchNorm1d 1 x 1 Convolutions [Lin, Chen, and Yan. 2013. Network in network. arXiv:1312.4400.] \u8fd9\u4e2a\u6982\u5ff5\u6709\u610f\u4e49\u5417?\u662f\u7684 1x1\u5377\u79ef\uff0c\u5373\u7f51\u7edc\u4e2d\u7684 Network-in-network (NiN) connections\uff0c\u662f\u5185\u6838\u5927\u5c0f\u4e3a1\u7684\u5377\u79ef\u5185\u6838 1x1\u5377\u79ef\u4e3a\u60a8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8de8\u901a\u9053\u7684\u5168\u8fde\u63a5\u7684\u7ebf\u6027\u5c42 \u5b83\u53ef\u4ee5\u7528\u4e8e\u4ece\u591a\u4e2a\u901a\u9053\u6620\u5c04\u5230\u66f4\u5c11\u7684\u901a\u9053 1x 1\u5377\u79ef\u6dfb\u52a0\u4e86\u989d\u5916\u7684\u795e\u7ecf\u7f51\u7edc\u5c42\uff0c\u9644\u52a0\u7684\u53c2\u6570\u5f88\u5c11\uff0c \u4e0e\u5168\u8fde\u63a5(FC)\u5c42\u4e0d\u540c\uff0c\u5168\u8fde\u63a5(FC)\u5c42\u6dfb\u52a0\u4e86\u5927\u91cf\u7684\u53c2\u6570 CNN application: Translation \u6700\u65e9\u6210\u529f\u7684\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e4b\u4e00 \u4f7f\u7528CNN\u8fdb\u884c\u7f16\u7801\uff0c\u4f7f\u7528RNN\u8fdb\u884c\u89e3\u7801 Kalchbrennerand Blunsom(2013) \u201cRecurrent Continuous Translation Models\u201d Learning Character-level Representations for Part-of-Speech Tagging Dos Santos and Zadrozny(2014) \u5bf9\u5b57\u7b26\u8fdb\u884c\u5377\u79ef\u4ee5\u751f\u6210\u5355\u8bcd\u5d4c\u5165 \u56fa\u5b9a\u7a97\u53e3\u7684\u8bcd\u5d4c\u5165\u88ab\u7528\u4e8ePOS\u6807\u7b7e Character-Aware Neural Language Models (Kim, Jernite, Sontag, and Rush 2015) \u57fa\u4e8e\u5b57\u7b26\u7684\u5355\u8bcd\u5d4c\u5165 \u5229\u7528\u5377\u79ef\u3001highway network\u548cLSTM 5. Very Deep Convolutional Networks for Text Classification \u00b6 Conneau, Schwenk, Lecun, Barrault. EACL 2017. \u8d77\u59cb\u70b9\uff1a\u5e8f\u5217\u6a21\u578b(LSTMs)\u5728NLP\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\uff1b\u8fd8\u6709CNNs\u3001\u6ce8\u610f\u529b\u7b49\u7b49\uff0c\u4f46\u662f\u6240\u6709\u7684\u6a21\u578b\u57fa\u672c\u4e0a\u90fd\u4e0d\u662f\u5f88\u6df1\u5165\u2014\u2014\u4e0d\u50cf\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u7684\u6df1\u5ea6\u6a21\u578b \u5f53\u6211\u4eec\u4e3aNLP\u6784\u5efa\u4e00\u4e2a\u7c7b\u4f3c\u89c6\u89c9\u7684\u7cfb\u7edf\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48 \u4ece\u5b57\u7b26\u7ea7\u5f00\u59cb\u5de5\u4f5c Convolutional block in VD-CNN \u6bcf\u4e2a\u5377\u79ef\u5757\u662f\u4e24\u4e2a\u5377\u79ef\u5c42\uff0c\u6bcf\u4e2a\u5377\u79ef\u5c42\u540e\u9762\u662fBatchNorm\u548c\u4e00\u4e2aReLU \u5377\u79ef\u5927\u5c0f\u4e3a3 pad \u4ee5\u4fdd\u6301(\u6216\u5728\u5c40\u90e8\u6c60\u5316\u65f6\u51cf\u534a)\u7ef4\u6570 Experiments \u4f7f\u7528\u5927\u6587\u672c\u5206\u7c7b\u6570\u636e\u96c6 \u6bd4NLP\u4e2d\u7ecf\u5e38\u4f7f\u7528\u7684\u5c0f\u6570\u636e\u96c6\u5927\u5f97\u591a\uff0c\u5982Yoon Kim(2014)\u7684\u8bba\u6587 \u4ee5\u4e0a\u6570\u636e\u5747\u4e3a\u9519\u8bef\u7387\uff0c\u6240\u4ee5\u8d8a\u4f4e\u8d8a\u597d \u6df1\u5ea6\u7f51\u7edc\u4f1a\u53d6\u5f97\u66f4\u597d\u7684\u7ed3\u679c\uff0c\u6b8b\u5dee\u5c42\u53d6\u5f97\u5f88\u597d\u7684\u7ed3\u679c\uff0c\u4f46\u662f\u6df1\u5ea6\u518d\u6df1\u65f6\u5e76\u672a\u53d6\u5f97\u6548\u679c\u63d0\u5347 \u5b9e\u9a8c\u8868\u660e\u4f7f\u7528 MaxPooling \u6bd4 KMaxPooling \u548c \u4f7f\u7528stride\u7684\u5377\u79ef \u7684\u4e24\u79cd\u5176\u4ed6\u6c60\u5316\u65b9\u6cd5\u8981\u66f4\u597d ConvNets\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5efa\u7acb\u5f88\u597d\u7684\u6587\u672c\u5206\u7c7b\u7cfb\u7edf 6. RNNs are Slow \u2026 RNNs\u662f\u6df1\u5ea6NLP\u7684\u4e00\u4e2a\u975e\u5e38\u6807\u51c6\u7684\u6784\u5efa\u5757 \u4f46\u5b83\u4eec\u7684\u5e76\u884c\u6027\u5f88\u5dee\uff0c\u56e0\u6b64\u901f\u5ea6\u5f88\u6162 \u60f3\u6cd5\uff1a\u53d6RNNs\u548cCNNs\u4e2d\u6700\u597d\u4e14\u53ef\u5e76\u884c\u7684\u90e8\u5206 Quasi-Recurrent Neural Networks by James Bradbury, Stephen Merity, CaimingXiong& Richard Socher. ICLR 2017 Quasi-Recurrent Neural Network \u52aa\u529b\u628a\u4e24\u4e2a\u6a21\u578b\u5bb6\u65cf\u7684\u4f18\u70b9\u7ed3\u5408\u8d77\u6765 \u65f6\u95f4\u4e0a\u5e76\u884c\u7684\u5377\u79ef\uff0c\u5377\u79ef\u8ba1\u7b97\u5019\u9009\uff0c\u9057\u5fd8\u95e8\u548c\u8f93\u51fa\u95e8 \\[ \\begin{aligned} \\mathbf{z}_{t} &=\\tanh \\left(\\mathbf{W}_{z}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{z}^{2} \\mathbf{x}_{t}\\right) \\\\ \\mathbf{f}_{t} &=\\sigma\\left(\\mathbf{W}_{f}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{f}^{2} \\mathbf{x}_{t}\\right) \\\\ \\mathbf{o}_{t} &=\\sigma\\left(\\mathbf{W}_{o}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{o}^{2} \\mathbf{x}_{t}\\right) \\end{aligned} \\] \\[ \\begin{aligned} \\mathbf{Z} &=\\tanh \\left(\\mathbf{W}_{z} * \\mathbf{X}\\right) \\\\ \\mathbf{F} &=\\sigma\\left(\\mathbf{W}_{f} * \\mathbf{X}\\right) \\\\ \\mathbf{O} &=\\sigma\\left(\\mathbf{W}_{o} * \\mathbf{X}\\right) \\end{aligned} \\] \u8de8\u901a\u9053\u5e76\u884c\u6027\u7684\u9010\u5143\u7d20\u7684\u95e8\u63a7\u4f2a\u9012\u5f52\u662f\u5728\u6c60\u5316\u5c42\u4e2d\u5b8c\u6210\u7684 \\(\\mathbf{h}_{t}=\\mathbf{f}_{t} \\odot \\mathbf{h}_{t-1}+\\left(1-\\mathbf{f}_{t}\\right) \\odot \\mathbf{z}_{t}\\) Q-RNN Experiments: Language Modeling James Bradbury,Stephen Merity,CaimingXiong,Richard Socher (ICLR 2017) Q-RNNs for Sentiment Analysis \u901a\u5e38\u6bd4LSTMs\u66f4\u597d\u66f4\u5feb \u66f4\u52a0\u7684\u53ef\u89e3\u91ca \u4f8b\u5982\uff1a QRNN limitations \u5bf9\u4e8e\u5b57\u7b26\u7ea7\u7684LMs\u5e76\u4e0d\u50cfLSTMs\u90a3\u6837\u6709\u6548 \u5efa\u6a21\u65f6\u9047\u5230\u7684\u66f4\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u95ee\u9898 \u901a\u5e38\u9700\u8981\u66f4\u6df1\u5165\u7684\u7f51\u7edc\u6765\u83b7\u5f97\u4e0eLSTM\u4e00\u6837\u597d\u7684\u6027\u80fd \u5f53\u5b83\u4eec\u66f4\u6df1\u5165\u65f6\uff0c\u901f\u5ea6\u4ecd\u7136\u66f4\u5feb \u6709\u6548\u5730\u4f7f\u7528\u6df1\u5ea6\u4f5c\u4e3a\u771f\u6b63\u9012\u5f52\u7684\u66ff\u4ee3 Notes 08 Convolutional Neural Networks \u00b6 1 CNNs (Convolutional Neural Networks) \u00b6 1.1 Why CNNs? \u00b6 \u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u63a5\u6536\u8bcd\u5411\u91cf\u7684\u5e8f\u5217\uff0c\u5e76\u9996\u5148\u4e3a\u6240\u6709\u5b50\u77ed\u8bed\u521b\u5efa\u77ed\u8bed\u5411\u91cf\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8bed\u6cd5\u6b63\u786e\u7684\u77ed\u8bed(\u4e0e\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4e00\u6837\uff0c\u5c06\u5728\u4e0b\u4e00\u7ec4\u7b14\u8bb0\u4e2d\u8ba8\u8bba)\u3002\u7136\u540e\uff0cCNNs\u5c06\u4ed6\u4eec\u5206\u7ec4\u5b8c\u6210\u624b\u5934\u7684\u4efb\u52a1\u3002 1.2 What is Convolution? \u00b6 \u6211\u4eec\u4ece\u4e00\u7ef4\u7684\u60c5\u51b5\u5f00\u59cb\u3002\u8003\u8651\u4e24\u4e2a\u4e00\u7ef4\u5411\u91cf \\(f\\) \u548c \\(g\\) \uff0c\u5176\u4e2d \\(f\\) \u662f\u4e3b\u5411\u91cf\uff0cg \u662f filter\u3002 \\(f\\) \u548c \\(g\\) \u4e4b\u95f4\u7684\u5377\u79ef\uff0c\u7b2cn\u9879\u5904\u7684\u503c\u8868\u793a\u4e3a \\((f * g)[n]\\) \uff0c\u5b83\u7b49\u4e8e \\(\\sum_{m=-M}^{M} f[n-m] g[m]\\) \u3002 \u4e0a\u56fe\u663e\u793a\u4e86\u4e8c\u7ef4\u5377\u79ef\u7684\u60c5\u51b5\u3002 \\(9\\times9\\) \u7684\u7eff\u8272\u77e9\u9635\u8868\u793a\u5173\u6ce8\u7684\u4e3b\u77e9\u9635 \\(f\\) \u3002 \\(3\\times3\\) \u7684\u7ea2\u8272\u77e9\u9635\u8868\u793a filter g\uff0c\u5f53\u524d\u6b63\u5728\u8ba1\u7b97\u7684\u5377\u79ef\u4f4d\u4e8e\u4f4d\u7f6e[2,2]\u3002\u56fe1\u663e\u793a\u4e86\u7b2c\u4e8c\u4e2a\u8868\u4e2d[2,2]= 4\u5904\u5377\u79ef\u7684\u503c\u3002\u4f60\u80fd\u5b8c\u6210\u7b2c\u4e8c\u5f20\u8868\u683c\u5417? 1.3 A Single-Layer CNN \u00b6 \u8003\u8651\u5355\u8bcd\u5411\u91cf \\(x_{i} \\in R^{k}\\) \u548c\u4e00\u4e2an\u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u7684\u5355\u8bcd\u5411\u91cf\u4e32\u8054\uff0c \\(x_{1 : n}=x_{1} \\oplus x_{2} \\ldots \\oplus x_{n}\\) \u3002\u6700\u540e\uff0c\u8003\u8651\u5377\u79ef\u6ee4\u6ce2\u5668 \\(w \\in R^{h k}\\) \uff0c\u5373\u4f5c\u7528\u4e8e h \u4e2a\u5355\u8bcd\u3002\u5bf9\u4e8e \\(k = 2, n = 5, h = 3\\) \uff0c\u56fe 2 \u4e3aNLP\u7684\u5355\u5c42\u5377\u79ef\u5c42\u3002\u5728\"the country of my birth\"\u8fd9\u4e2a\u53e5\u5b50\u4e2d\uff0c\u8fde\u7eed\u4e09\u4e2a\u5355\u8bcd\u7684\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7ec4\u5408\u90fd\u5c06\u5f97\u5230\u4e00\u4e2a\u503c\u3002\u6ce8\u610f\uff0c\u6ee4\u6ce2\u5668 w \u672c\u8eab\u662f\u4e00\u4e2a\u5411\u91cf\uff0c\u6211\u4eec\u5c06\u6709 \\(c_{i}=f\\left(w^{T} x_{i : i | h-1}+b\\right)\\) \u6765\u7ed9\u51fa \\(\\mathbf{c}=\\left[c_{1}, c_{2} \\dots c_{n-h+1}\\right] \\in R^{n-h+1}\\) \u3002\u6700\u540e\u4e24\u4e2a\u65f6\u95f4\u6b65\uff0c\u5373\u4ece\u201cmy\u201d\u6216\u201cbirth\u201d\u5f00\u59cb\uff0c\u6211\u4eec\u6ca1\u6709\u8db3\u591f\u7684\u5b57\u5411\u91cf\u6765\u4e0e\u6ee4\u6ce2\u5668\u76f8\u4e58(\u56e0\u4e3ah = 3)\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u4e0e\u540e\u4e24\u4e2a\u8bcd\u5411\u91cf\u76f8\u5173\u7684\u5377\u79ef\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u6280\u5de7\u662f\u7528h - 1\u4e2a\u96f6\u5411\u91cf\u586b\u5145\u53e5\u5b50\u7684\u53f3\u8fb9\uff0c\u5982\u4e0a\u56fe3\u6240\u793a\u3002 1.4 Pooling \u00b6 \u5047\u8bbe\u6211\u4eec\u4e0d\u4f7f\u7528\u8865\u96f6\uff0c\u6211\u4eec\u5c06\u5f97\u5230\u6700\u7ec8\u7684\u5377\u79ef\u8f93\u51fa\uff0c \\(\\mathbf{c}\\) \u6709 \\(n-h+1\\) \u4e2a\u6570\u3002\u901a\u5e38\uff0c\u6211\u4eec\u5e0c\u671b\u63a5\u6536CNN\u7684\u8f93\u51fa\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\uff0c\u8f93\u5165\u5230\u66f4\u6df1\u5c42\uff0c\u5982\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6216RecNN\u3002\u4f46\u662f\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u9700\u8981\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u8f93\u5165\uff0c\u800cCNN\u8f93\u51fa\u7684\u957f\u5ea6\u4f9d\u8d56\u4e8e\u53e5\u5b50\u7684\u957f\u5ea6 \\(n\\) \u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u6cd5\u662f\u4f7f\u7528max-pooling\u3002CNN\u7684\u8f93\u51fa \\(\\mathbf{c} \\in \\mathbb{R}^{n-h-1}\\) \u662f max-pooling \u5c42\u7684\u8f93\u5165\u3002max-pooling\u7684\u8f93\u51fa\u5c42 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \uff0c\u56e0\u6b64 \\(\\hat{c} \\in \\mathbb{R}\\) \u3002 \u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6700\u5c0f\u6c60\u5316\uff0c\u56e0\u4e3a\u901a\u5e38\u6211\u4eec\u4f7f\u7528ReLU\u4f5c\u4e3a\u975e\u7ebf\u6027\u6fc0\u6d3b\u51fd\u6570\u800cReLU\u7684\u4e0b\u754c\u662f0\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u6700\u5c0f\u6c60\u5316\u53ef\u80fd\u4f1a\u88abReLU\u8986\u76d6\uff0c\u6240\u4ee5\u6211\u4eec\u51e0\u4e4e\u603b\u662f\u4f7f\u7528\u6700\u5927\u6c60\u5316\u800c\u4e0d\u662f\u6700\u5c0f\u6c60\u5316\u3002 1.5 Multiple-Filters \u00b6 \u5728\u4e0a\u9762\u4e0e\u56fe2\u76f8\u5173\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u6709 h = 2\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ea\u4f7f\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u7ec4\u5408\u65b9\u6cd5\uff0c\u5373\u4f7f\u7528\u8fc7\u6ee4\u5668\u6765\u67e5\u770bbi-grams\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2abi-grams\u8fc7\u6ee4\u5668\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8fc7\u6ee4\u5668\u5c06\u5b66\u4e60\u8bc6\u522b\u4e0d\u540c\u7c7b\u578b\u7684bi-grams\u3002\u66f4\u4e00\u822c\u5730\u8bf4\uff0c\u6211\u4eec\u5e76\u4e0d\u4ec5\u9650\u4e8e\u4f7f\u7528bi-grams\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528tri-grams\u3001 quad-grams \u751a\u81f3\u66f4\u957f\u7684\u8fc7\u6ee4\u5668\u3002\u6bcf\u4e2a\u8fc7\u6ee4\u5668\u90fd\u6709\u4e00\u4e2a\u5173\u8054\u7684\u6700\u5927\u6c60\u5316\u5c42\u3002\u56e0\u6b64\uff0cCNN\u5c42\u7684\u6700\u7ec8\u8f93\u51fa\u5c06\u662f\u4e00\u4e2a\u957f\u5ea6\u7b49\u4e8e\u8fc7\u6ee4\u5668\u6570\u91cf\u7684\u5411\u91cf 1.6 Multiple-Channels \u00b6 \u5982\u679c\u6211\u4eec\u5141\u8bb8\u68af\u5ea6\u6d41\u5165\u8fd9\u91cc\u4f7f\u7528\u7684\u5355\u8bcd\u5411\u91cf\uff0c\u90a3\u4e48\u5355\u8bcd\u5411\u91cf\u53ef\u80fd\u4f1a\u968f\u7740\u8bad\u7ec3\u800c\u53d1\u751f\u663e\u8457\u53d8\u5316\u3002\u8fd9\u662f\u9700\u8981\u7684\uff0c\u56e0\u4e3a\u5b83\u5c06\u5355\u8bcd\u5411\u91cf\u4e13\u95e8\u7528\u4e8e\u5f53\u524d\u7279\u5b9a\u4efb\u52a1(\u8fdc\u79bbGloVe\u521d\u59cb\u5316)\u3002\u4f46\u662f\uff0c\u5982\u679c\u5355\u8bcd\u53ea\u51fa\u73b0\u5728\u6d4b\u8bd5\u96c6\u4e2d\u800c\u6ca1\u6709\u51fa\u73b0\u5728\u8bad\u7ec3\u96c6\u4e0a\u5462\uff1f\u867d\u7136\u51fa\u73b0\u5728\u8bad\u7ec3\u96c6\u4e2d\u7684\u5176\u4ed6\u8bed\u4e49\u76f8\u5173\u7684\u5355\u8bcd\u5411\u91cf\u5c06\u4ece\u5b83\u4eec\u7684\u8d77\u59cb\u70b9\u663e\u8457\u79fb\u52a8\uff0c\u4f46\u662f\u8fd9\u4e9b\u5355\u8bcd\u4ecd\u5c06\u5904\u4e8e\u5b83\u4eec\u7684\u521d\u59cb\u70b9\u3002\u795e\u7ecf\u7f51\u7edc\u5c06\u4e13\u95e8\u7528\u4e8e\u5df2\u66f4\u65b0\u7684\u8f93\u5165\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u4f7f\u7528\u8fd9\u4e9b\u5355\u8bcd\u7684\u53e5\u5b50\u4e2d\u4f1a\u8868\u73b0\u5f97\u5f88\u5dee\u3002 \u4e00\u79cd\u65b9\u6cd5\u662f\u7ef4\u62a4\u4e24\u7ec4\u5355\u8bcd\u5411\u91cf\uff0c\u4e00\u7ec4\u201c\u9759\u6001\u201d(\u6ca1\u6709\u68af\u5ea6\u6d41)\u548c\u4e00\u7ec4\u201c\u52a8\u6001\u201d(\u901a\u8fc7SGD\u66f4\u65b0)\u3002\u5b83\u4eec\u6700\u521d\u662f\u4e00\u6837\u7684\uff08GloVe \u6216\u8005\u5176\u4ed6\u521d\u59cb\u5316\uff09\u3002\u8fd9\u4e24\u4e2a\u96c6\u5408\u540c\u65f6\u4f5c\u4e3a\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165\u3002\u56e0\u6b64\uff0c\u521d\u59cb\u5316\u7684\u8bcd\u5411\u91cf\u5728\u795e\u7ecf\u7f51\u7edc\u7684\u8bad\u7ec3\u4e2d\u59cb\u7ec8\u8d77\u7740\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u6d4b\u8bd5\u4e2d\u7ed9\u51fa\u770b\u4e0d\u89c1\u7684\u5355\u8bcd\u53ef\u4ee5\u63d0\u9ad8\u6b63\u786e\u7406\u89e3\u7684\u51e0\u7387\u3002 \u6709\u51e0\u79cd\u5904\u7406\u8fd9\u4e24\u4e2achannel\u7684\u65b9\u6cd5\uff0c\u6700\u5e38\u89c1\u7684\u662f\u5728CNN\u4e2d\u4f7f\u7528\u4e4b\u524d\u5bf9\u5b83\u4eec\u8fdb\u884c\u5e73\u5747\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u5c06CNN\u8fc7\u6ee4\u5668\u7684\u957f\u5ea6\u52a0\u500d\u3002 1.7 CNN Options \u00b6 Narrow vs Wide \u00b6 \u53c2\u89c1\u56fe4\u3002\u53e6\u4e00\u79cd\u95ee\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u6211\u4eec\u5e94\u8be5\u7f29\u5c0f\u8fd8\u662f\u6269\u5927 \uff1f\u5373\u6211\u4eec\u662f\u5426\u4f7f\u7528zero-pad \uff1f \u5982\u679c\u6211\u4eec\u4f7f\u7528\u7a84\u5377\u79ef\uff0c\u6211\u4eec\u53ea\u5728\u4e00\u4e2a\u6ee4\u6ce2\u5668\u7684\u6240\u6709\u5206\u91cf\u90fd\u6709\u4e00\u4e2a\u5339\u914d\u8f93\u5165\u5206\u91cf\u7684\u4f4d\u7f6e\u8ba1\u7b97\u5377\u79ef\u3002\u5728\u8f93\u5165\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u8fb9\u754c\u5904\u663e\u7136\u4e0d\u662f\u8fd9\u6837\uff0c\u5982\u56fe4\u4e2d\u7684\u5de6\u4fa7\u7f51\u7edc\u6240\u793a\u3002 \u5982\u679c\u6211\u4eec\u4f7f\u7528\u5bbd\u5377\u79ef\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u51fa\u5206\u91cf\u5bf9\u5e94\u4e8e\u5377\u79ef\u6ee4\u6ce2\u5668\u7684\u6bcf\u4e2a\u5bf9\u9f50\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u8f93\u5165\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u5904\u586b\u5145 \\(h - 1\\) \u4e2a\u96f6\u3002 \u5728\u7a84\u5377\u79ef\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u957f\u5ea6\u4e3a \\(n - h+ 1\\) \uff0c\u800c\u5728\u5bbd\u5377\u79ef\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u957f\u5ea6\u4e3a \\(n+h - 1\\) k-max pooling \u00b6 \u8fd9\u662f\u5bf9\u6700\u5927\u6c60\u5316\u5c42\u7684\u6982\u62ec\u3002k-max \u6c60\u5316\u5c42\u4e0d\u662f\u53ea\u4ece\u5b83\u7684\u8f93\u5165\u4e2d\u9009\u62e9\u6700\u5927\u7684\u503c\uff0c\u800c\u662f\u9009\u62e9k\u4e2a\u6700\u5927\u7684\u503c\uff08\u5e76\u4e14\u4fdd\u6301\u539f\u6709\u7684\u987a\u5e8f\uff09\u3002\u8bbe\u7f6e \\(k = 1\\) \u5219\u662f\u6211\u4eec\u524d\u9762\u770b\u5230\u7684\u6700\u5927\u6c60\u5316\u5c42\u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"11 ConvNets for NLP"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#lecture-11-convnets-for-nlp","text":"Lecture Plan Announcements Intro to CNNs Simple CNN for Sentence Classification: Yoon (2014) CNN potpourri Deep CNN for Sentence Classification: Conneauet al. (2017) Quasi-recurrent Neural Networks Welcome to the second half of the course! \u73b0\u5728\uff0c\u6211\u4eec\u6b63\u5728\u4e3a\u60a8\u51c6\u5907\u6210\u4e3aDL+NLP\u7814\u7a76\u4eba\u5458/\u5b9e\u8df5\u8005 \u8bb2\u5ea7\u4e0d\u4f1a\u603b\u662f\u6709\u6240\u6709\u7684\u7ec6\u8282 \u8fd9\u53d6\u51b3\u4e8e\u4f60\u5728\u7f51\u4e0a\u641c\u7d22/\u9605\u8bfb\u6765\u4e86\u89e3\u66f4\u591a \u8fd9\u662f\u4e00\u4e2a\u6d3b\u8dc3\u7684\u7814\u7a76\u9886\u57df\uff0c\u6709\u65f6\u5019\u6ca1\u6709\u660e\u786e\u7684\u7b54\u6848 Staff \u5f88\u4e50\u610f\u4e0e\u4f60\u8ba8\u8bba\uff0c\u4f46\u4f60\u9700\u8981\u81ea\u5df1\u601d\u8003 \u4f5c\u4e1a\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u5e94\u4ed8\u9879\u76ee\u7684\u771f\u6b63\u56f0\u96be \u6bcf\u4e2a\u4efb\u52a1\u90fd\u6545\u610f\u6bd4\u4e0a\u4e00\u4e2a\u4efb\u52a1\u6709\u66f4\u5c11\u7684\u5e2e\u52a9\u6750\u6599\u3002 \u5728\u9879\u76ee\u4e2d\uff0c\u6ca1\u6709\u63d0\u4f9b autograder \u6216 \u5408\u7406\u6027\u68c0\u67e5 DL\u8c03\u8bd5\u5f88\u56f0\u96be\uff0c\u4f46\u662f\u60a8\u9700\u8981\u5b66\u4e60\u5982\u4f55\u8fdb\u884c\u8c03\u8bd5\uff01 Wanna read a book?","title":"Lecture 11 ConvNets for NLP"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#2-from-rnns-to-convolutional-neural-nets","text":"\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4e0d\u80fd\u6355\u83b7\u6ca1\u6709\u524d\u7f00\u4e0a\u4e0b\u6587\u7684\u77ed\u8bed \u7ecf\u5e38\u5728\u6700\u7ec8\u5411\u91cf\u4e2d\u6355\u83b7\u592a\u591a\u7684\u6700\u540e\u5355\u8bcd \u4f8b\u5982\uff0csoftmax\u901a\u5e38\u53ea\u5728\u6700\u540e\u4e00\u6b65\u8ba1\u7b97 From RNNs to Convolutional Neural Nets \u5377\u79ef\u7f51\u7edc\u7684\u4e3b\u8981\u60f3\u6cd5\uff1a \u5982\u679c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u53ef\u80fd\u7684\u5b50\u5e8f\u5217\u8ba1\u7b97\u4e00\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\u5462\uff1f \u4f8b\u5982\uff1a\u201ctentative deal reached to keep government open\u201d \u8ba1\u7b97\u7684\u5411\u91cf\u4e3a tentative deal reached, deal reached to, reached to keep, to keep government, keep government open \u4e0d\u7ba1\u77ed\u8bed\u662f\u5426\u5408\u4e4e\u8bed\u6cd5 \u5728\u8bed\u8a00\u5b66\u4e0a\u6216\u8ba4\u77e5\u4e0a\u4e0d\u592a\u53ef\u4fe1 \u7136\u540e\u5c06\u5b83\u4eec\u5206\u7ec4(\u5f88\u5feb) What is a convolution anyway? \u4e00\u7ef4\u79bb\u6563\u5377\u79ef\u4e00\u822c\u4e3a\uff1a \\((f * g)[n]=\\sum_{m=-M}^{M} f[n-m] g[m]\\) \u5377\u79ef\u7ecf\u5178\u5730\u7528\u4e8e\u4ece\u56fe\u50cf\u4e2d\u63d0\u53d6\u7279\u5f81 \u6a21\u578b\u4f4d\u7f6e\u4e0d\u53d8\u7684\u8bc6\u522b \u8f6c\u5230cs231n\uff01 2d example \u9ec4\u8272\u548c\u7ea2\u8272\u6570\u5b57\u663e\u793a\u8fc7\u6ee4\u5668(=\u5185\u6838)\u6743\u91cd \u7eff\u8272\u663e\u793a\u8f93\u5165 \u7c89\u8272\u663e\u793a\u8f93\u51fa A 1D convolution for text 1D convolution for text with padding \u8f93\u5165\u957f\u5ea6\u4e3a \\(L\\) \u7684\u8bcd\u5e8f\u5217\uff0c\u5047\u8bbe\u5355\u8bcd\u7ef4\u5ea6\u4e3a 4\uff0c\u5373\u6709 4 channels \u5377\u79ef\u540e\u5c06\u4f1a\u5f97\u5230 1 channel 3 channel 1D convolution with padding = 1 \u591a\u4e2achannel\u5219\u6700\u7ec8\u5f97\u5230\u591a\u4e2achannel\u7684\u8f93\u51fa\uff0c\u5173\u6ce8\u7684\u6587\u672c\u6f5c\u5728\u7279\u5f81\u4e5f\u4e0d\u540c conv1d, padded with max pooling over time \u901a\u8fc7 max pooling over time\uff0c\u83b7\u5f97\u6700\u5927\u7684\u6fc0\u6d3b\u503c conv1d, padded with avepooling over time In PyTorch batch_size = 16 word_embed_size = 4 seq_len = 7 input = torch . randn ( batch_size , word_embed_size , seq_len ) conv1 = Conv1d ( in_channels = word_embed_size , out_channels = 3 , kernel_size = 3 ) # can add: padding=1 hidden1 = conv1 ( input ) hidden2 = torch . max ( hidden1 , dim = 2 ) # max pool Other less useful notions: stride = 2 stride \u6b65\u957f\uff0c\u51cf\u5c11\u8ba1\u7b97\u91cf Less useful: local max pool, stride = 2 \u6bcf\u4e24\u884c\u505a max pooling\uff0c\u88ab\u79f0\u4e3a\u6b65\u957f\u4e3a2\u7684\u5c40\u90e8\u6700\u5927\u6c60\u5316 conv1d, k-max pooling over time, k= 2 \u8bb0\u5f55\u6bcf\u4e00\u4e2achannel\u7684\u6240\u6709\u65f6\u95f4\u7684 top k\u7684\u6fc0\u6d3b\u503c\uff0c\u5e76\u4e14\u6309\u539f\u6709\u987a\u5e8f\u4fdd\u7559\uff08\u4e0a\u4f8b\u4e2d\u7684-0.2 0.3\uff09 Other somewhat useful notions: dilation = 2 \u6269\u5f20\u5377\u79ef \u4e0a\u4f8b\u4e2d\uff0c\u5bf91 3 5\u884c\u8fdb\u884c\u5377\u79ef\uff0c\u901a\u8fc7\u4e24\u4e2afilter\u5f97\u5230\u4e24\u4e2achannel\u7684\u6fc0\u6d3b\u503c \u53ef\u4ee5\u5728\u7b2c\u4e00\u6b65\u7684\u5377\u79ef\u4e2d\u5c06\u5377\u79ef\u6838\u4ece3\u6539\u4e3a5\uff0c\u5373\u53ef\u5b9e\u73b0\u8fd9\u6837\u7684\u6548\u679c\uff0c\u65e2\u4fdd\u8bc1\u4e86\u77e9\u9635\u5f88\u5c0f\uff0c\u53c8\u4fdd\u8bc1\u4e86\u4e00\u6b21\u5377\u79ef\u4e2d\u770b\u5230\u66f4\u5927\u8303\u56f4\u7684\u53e5\u5b50 Summary \u5728CNN\u4e2d\uff0c\u4e00\u6b21\u80fd\u770b\u4e00\u4e2a\u53e5\u5b50\u7684\u591a\u5c11\u5185\u5bb9\u662f\u5f88\u91cd\u8981\u7684\u6982\u5ff5 \u53ef\u4ee5\u4f7f\u7528\u66f4\u5927\u7684filter\u3001\u6269\u5f20\u5377\u79ef\u6216\u8005\u589e\u5927\u5377\u79ef\u6df1\u5ea6\uff08\u5c42\u6570\uff09","title":"2. From RNNs to Convolutional Neural Nets"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#3-single-layer-cnn-for-sentence-classification","text":"Yoon Kim (2014): Convolutional Neural Networks for Sentence Classification. EMNLP 2014. https://arxiv.org/pdf/1408.5882.pdf Code: https://arxiv.org/pdf/1408.5882.pdf[Theano !, etc.] A variant of convolutional NNs of Collobert, Weston et al. (2011) \u76ee\u6807\uff1a\u53e5\u5b50\u5206\u7c7b \u4e3b\u8981\u662f\u53e5\u5b50\u7684\u79ef\u6781\u6216\u6d88\u6781\u60c5\u7eea \u5176\u4ed6\u4efb\u52a1 \u5224\u65ad\u53e5\u5b50\u4e3b\u89c2\u6216\u5ba2\u89c2 \u95ee\u9898\u5206\u7c7b\uff1a\u95ee\u9898\u662f\u5173\u4e8e\u4ec0\u4e48\u5b9e\u4f53\u7684\uff1f\u5173\u4e8e\u4eba\u3001\u5730\u70b9\u3001\u6570\u5b57\u3001\u2026\u2026 \u4e00\u4e2a\u5377\u79ef\u5c42\u548c\u6c60\u5316\u5c42\u7684\u7b80\u5355\u4f7f\u7528 \u8bcd\u5411\u91cf\uff1a \\(\\mathbf{x}_{i} \\in \\mathbb{R}^{k}\\) \u53e5\u5b50\uff1a \\(\\mathbf{x}_{1 : n}=\\mathbf{x}_{1} \\oplus x_{2} \\oplus \\cdots \\oplus \\mathbf{x}_{n}\\) (\u5411\u91cf\u8fde\u63a5) \u8fde\u63a5 \\(\\mathbf{X}_{i : i+j}\\) \u8303\u56f4\u5185\u7684\u53e5\u5b50 (\u5bf9\u79f0\u66f4\u5e38\u89c1) \u5377\u79ef\u6838 \\(\\mathbf{w} \\in \\mathbb{R}^{h k}\\) (\u4f5c\u7528\u8303\u56f4\u4e3a h \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3) \u6ce8\u610f\uff0cfilter\u662f\u5411\u91cf\uff0csize \u53ef\u4ee5\u662f2,3\u62164 Single layer CNN \u8fc7\u6ee4\u5668 \\(\\boldsymbol w\\) \u5e94\u7528\u4e8e\u6240\u6709\u53ef\u80fd\u7684\u7a97\u53e3(\u8fde\u63a5\u5411\u91cf) \u4e3aCNN\u5c42\u8ba1\u7b97\u7279\u5f81(\u4e00\u4e2a\u901a\u9053) \\[ c_{i}=f\\left(\\mathbf{w}^{T} \\mathbf{x}_{i : i+h-1}+b\\right) \\] \u53e5\u5b50 \\(\\mathbf{x}_{1 : n}=\\mathbf{x}_{1} \\oplus \\mathbf{x}_{2} \\oplus \\ldots \\oplus \\mathbf{x}_{n}\\) \u6240\u6709\u53ef\u80fd\u7684\u957f\u5ea6\u4e3a h \u7684\u7a97\u53e3 \\(\\left\\{\\mathbf{x}_{1 : h}, \\mathbf{x}_{2 : h+1}, \\dots, \\mathbf{x}_{n-h+1 : n}\\right\\}\\) \u7ed3\u679c\u662f\u4e00\u4e2a feature map \\(\\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1}\\) Pooling and channels \u6c60\u5316\uff1amax-over-time pooling layer \u60f3\u6cd5\uff1a\u6355\u83b7\u6700\u91cd\u8981\u7684\u6fc0\u6d3b(maximum over time) \u4ecefeature map\u4e2d \\(\\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1}\\) \u6c60\u5316\u5f97\u5230\u5355\u4e2a\u6570\u5b57 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \u4f7f\u7528\u591a\u4e2a\u8fc7\u6ee4\u5668\u6743\u91cd \\(\\boldsymbol{w}\\) \u4e0d\u540c\u7a97\u53e3\u5927\u5c0f h \u662f\u6709\u7528\u7684 \u7531\u4e8e\u6700\u5927\u6c60\u5316 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \uff0c\u548c \\(\\mathbf{c}\\) \u7684\u957f\u5ea6\u65e0\u5173 \\[ \\mathbf{c}=\\left[c_{1}, c_{2}, \\dots, c_{n-h+1}\\right] \\in \\mathbb{R}^{n-h+1} \\] \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6709\u4e00\u4e9b filters \u6765\u89c2\u5bdf unigrams, bigrams, tri-grams, 4-grams,\u7b49\u7b49 Multi-channel input idea \u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5411\u91cf\u521d\u59cb\u5316(word2vec\u6216Glove) \u4ece\u4e24\u4e2a\u526f\u672c\u5f00\u59cb \u53ea\u6709\u4e00\u4e2a\u526f\u672c\u8fdb\u884c\u4e86\u53cd\u5411\u4f20\u64ad\uff0c\u4fdd\u6301\u5176\u4ed6\u201c\u9759\u6001\u201d \u4e24\u4e2a\u901a\u9053\u96c6\u90fd\u5728\u6700\u5927\u6c60\u5316\u524d\u6dfb\u52a0\u5230 \\(c_i\\) Classification after one CNN layer \u9996\u5148\u662f\u4e00\u4e2a\u5377\u79ef\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u6700\u5927\u6c60\u5316 \u4e3a\u4e86\u83b7\u5f97\u6700\u7ec8\u7684\u7279\u5f81\u5411\u91cf \\(\\mathbf{z}=\\left[\\hat{c}_{1}, \\dots, \\hat{c}_{m}\\right]\\) \u5047\u8bbe\u6211\u4eec\u6709 m \u4e2a filter \\(\\mathbf{w}\\) \u4f7f\u7528100\u4e2a\u5927\u5c0f\u5206\u522b\u4e3a3\u30014\u30015\u7684\u7279\u5f81\u56fe \u6700\u7ec8\u662f\u7b80\u5355\u7684 softmax layer \\(y=\\operatorname{softmax}\\left(W^{(S)} z+b\\right)\\) https://arxiv.org/pdf/1510.03820.pdf \u8f93\u5165\u957f\u5ea6\u4e3a 7 \u7684\u4e00\u53e5\u8bdd\uff0c\u6bcf\u4e2a\u8bcd\u7684\u7ef4\u5ea6\u662f 5 \uff0c\u5373\u8f93\u5165\u77e9\u9635\u662f \\(7 \\times 5\\) \u4f7f\u7528\u4e0d\u540c\u7684filter_size : (2,3,4)\uff0c\u5e76\u4e14\u6bcf\u4e2asize\u90fd\u662f\u7528\u4e24\u4e2afilter\uff0c\u83b7\u5f97\u4e24\u4e2achannel\u7684feature\uff0c\u5373\u5171\u8ba16\u4e2afilter \u5bf9\u6bcf\u4e2afilter\u7684feature\u8fdb\u884c1-max pooling\u540e\uff0c\u62fc\u63a5\u5f97\u5230 6 \u7ef4\u7684\u5411\u91cf\uff0c\u5e76\u4f7f\u7528softmax\u540e\u518d\u83b7\u5f97\u4e8c\u5206\u7c7b\u7ed3\u679c Regularization \u4f7f\u7528 Dropout : \u4f7f\u7528\u6982\u7387 p (\u8d85\u53c2\u6570)\u7684\u4f2f\u52aa\u5229\u968f\u673a\u53d8\u91cf\uff08\u53ea\u67090 1\u5e76\u4e14p\u662f\u4e3a1\u7684\u6982\u7387\uff09\u521b\u5efamask\u5411\u91cf r \u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5220\u9664\u7279\u5f81 \\[ y=\\operatorname{softmax}\\left(W^{(S)}(r \\circ z)+b\\right) \\] \u89e3\u91ca\uff1a\u9632\u6b62\u4e92\u76f8\u9002\u5e94(\u5bf9\u7279\u5b9a\u7279\u5f81\u7684\u8fc7\u5ea6\u62df\u5408)(Srivastava, Hinton, et al. 2014) \u5728\u6d4b\u8bd5\u65f6\u4e0d\u9002\u7528dropout\uff0c\u4f7f\u7528\u6982\u7387p\u7f29\u653e\u6700\u7ec8\u5411\u91cf \\[ \\hat{W}^{(S)}=p W^{(S)} \\] \u6b64\u5916\uff1a\u9650\u5236\u6bcf\u4e2a\u7c7b\u7684\u6743\u91cd\u5411\u91cf\u7684L2 Norm(softmax \u6743\u91cd \\(W^{(S)}\\) \u7684\u6bcf\u4e00\u884c)\u4e0d\u8d85\u8fc7\u56fa\u5b9a\u6570 \\(s\\) (\u4e5f\u662f\u8d85\u53c2\u6570) \u5982\u679c \\(\\left\\|W_{c}^{(S)}\\right\\|>s\\) \uff0c\u5219\u91cd\u65b0\u7f29\u653e\u4e3a \\(\\left\\|W_{c}^{(S)}\\right\\|=s\\) \u4e0d\u662f\u5f88\u5e38\u89c1 All hyperparametersin Kim (2014) Problem with comparison? Dropout\u63d0\u4f9b\u4e862 - 4%\u7684\u7cbe\u5ea6\u6539\u8fdb \u4f46\u51e0\u4e2a\u6bd4\u8f83\u7cfb\u7edf\u6ca1\u6709\u4f7f\u7528Dropout\uff0c\u5e76\u53ef\u80fd\u4ece\u5b83\u83b7\u5f97\u76f8\u540c\u7684\u6536\u76ca \u4ecd\u7136\u88ab\u89c6\u4e3a\u4e00\u4e2a\u7b80\u5355\u67b6\u6784\u7684\u663e\u8457\u7ed3\u679c \u4e0e\u6211\u4eec\u5728\u524d\u51e0\u8282\u8bfe\u4e2d\u63cf\u8ff0\u7684\u7a97\u53e3\u548cRNN\u67b6\u6784\u7684\u4e0d\u540c\u4e4b\u5904\uff1a\u6c60\u5316\u3001\u8bb8\u591a\u8fc7\u6ee4\u5668\u548cdropout \u8fd9\u4e9b\u60f3\u6cd5\u4e2d\u6709\u7684\u53ef\u4ee5\u88ab\u7528\u5728RNNs\u4e2d","title":"3. Single Layer CNN for Sentence Classification"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#4-model-comparison-our-growing-toolkit","text":"Bag of Vectors \uff1a\u5bf9\u4e8e\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u57fa\u7ebf\u3002\u7279\u522b\u662f\u5982\u679c\u540e\u9762\u6709\u51e0\u4e2aReLU\u5c42(See paper: Deep Averaging Networks) Window Model \uff1a\u5bf9\u4e8e\u4e0d\u9700\u8981\u5e7f\u6cdb\u4e0a\u4e0b\u6587\u7684\u95ee\u9898\uff08\u5373\u9002\u7528\u4e8elocal\u95ee\u9898\uff09\uff0c\u9002\u5408\u5355\u5b57\u5206\u7c7b\u3002\u4f8b\u5982POS, NER CNNs \uff1a\u9002\u5408\u5206\u7c7b\uff0c\u8f83\u77ed\u7684\u77ed\u8bed\u9700\u8981\u96f6\u586b\u5145\uff0c\u96be\u4ee5\u89e3\u91ca\uff0c\u6613\u4e8e\u5728gpu\u4e0a\u5e76\u884c\u5316 RNNs \uff1a\u4ece\u5de6\u5230\u53f3\u7684\u8ba4\u77e5\u66f4\u52a0\u5177\u6709\u53ef\u4fe1\u5ea6\uff0c\u4e0d\u9002\u5408\u5206\u7c7b(\u5982\u679c\u53ea\u4f7f\u7528\u6700\u540e\u4e00\u79cd\u72b6\u6001)\uff0c\u6bd4CNNs\u6162\u5f97\u591a\uff0c\u9002\u5408\u5e8f\u5217\u6807\u8bb0\u548c\u5206\u7c7b\u4ee5\u53ca\u8bed\u8a00\u6a21\u578b\uff0c\u7ed3\u5408\u6ce8\u610f\u529b\u673a\u5236\u65f6\u975e\u5e38\u68d2 RNN\u5bf9\u5e8f\u5217\u6807\u8bb0\u548c\u5206\u7c7b\u4e4b\u7c7b\u7684\u4e8b\u60c5\u6709\u5f88\u597d\u7684\u6548\u679c\uff0c\u4ee5\u53ca\u8bed\u8a00\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u5e76\u4e14\u7ed3\u5408\u6ce8\u610f\u529b\u673a\u5236\u4f1a\u53d6\u5f97\u5f88\u597d\u7684\u6548\u679c\uff0c\u4f46\u662f\u5bf9\u4e8e\u67d0\u4e2a\u53e5\u5b50\u7684\u6574\u4f53\u89e3\u91ca\uff0cCNN\u505a\u7684\u662f\u66f4\u597d\u7684 Gated units used vertically \u6211\u4eec\u5728LSTMs\u548cGRUs\u4e2d\u770b\u5230\u7684\u95e8/\u8df3\u8fc7\u662f\u4e00\u4e2a\u666e\u904d\u7684\u6982\u5ff5\uff0c\u73b0\u5728\u5728\u5f88\u591a\u5730\u65b9\u90fd\u4f7f\u7528\u8fd9\u4e2a\u6982\u5ff5 \u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5782\u76f4\u7684\u95e8 \u5b9e\u9645\u4e0a\uff0c\u5173\u952e\u7684\u6982\u5ff5\u2014\u2014\u7528\u5feb\u6377\u8fde\u63a5\u5bf9\u5019\u9009\u66f4\u65b0\u6c42\u548c\u2014\u2014\u662f\u975e\u5e38\u6df1\u7684\u7f51\u7edc\u5de5\u4f5c\u6240\u9700\u8981\u7684 Note: pad \\(\\mathbf{x}\\) for conv so same size when add them Batch Normalization (BatchNorm) [Ioffeand Szegedy. 2015. Batch normalization: Accelerating deep network training by reducing internal covariate shift. arXiv:1502.03167.] \u5e38\u7528\u4e8e CNNs \u901a\u8fc7\u5c06\u6fc0\u6d3b\u91cf\u7f29\u653e\u4e3a\u96f6\u5747\u503c\u548c\u5355\u4f4d\u65b9\u5dee\uff0c\u5bf9\u4e00\u4e2amini-batch\u7684\u5377\u79ef\u8f93\u51fa\u8fdb\u884c\u53d8\u6362 \u8fd9\u662f\u7edf\u8ba1\u5b66\u4e2d\u719f\u6089\u7684 Z-transform \u4f46\u5728\u6bcf\u7ec4mini-batch\u90fd\u4f1a\u66f4\u65b0\uff0c\u6240\u4ee5\u6ce2\u52a8\u7684\u5f71\u54cd\u4e0d\u5927 \u4f7f\u7528BatchNorm\u4f7f\u6a21\u578b\u5bf9\u53c2\u6570\u521d\u59cb\u5316\u7684\u654f\u611f\u7a0b\u5ea6\u4e0b\u964d\uff0c\u56e0\u4e3a\u8f93\u51fa\u662f\u81ea\u52a8\u91cd\u65b0\u6807\u5ea6\u7684 \u4e5f\u4f1a\u8ba9\u5b66\u4e60\u7387\u7684\u8c03\u4f18\u66f4\u7b80\u5355 \u6a21\u578b\u7684\u8bad\u7ec3\u4f1a\u66f4\u52a0\u7a33\u5b9a PyTorch: nn.BatchNorm1d 1 x 1 Convolutions [Lin, Chen, and Yan. 2013. Network in network. arXiv:1312.4400.] \u8fd9\u4e2a\u6982\u5ff5\u6709\u610f\u4e49\u5417?\u662f\u7684 1x1\u5377\u79ef\uff0c\u5373\u7f51\u7edc\u4e2d\u7684 Network-in-network (NiN) connections\uff0c\u662f\u5185\u6838\u5927\u5c0f\u4e3a1\u7684\u5377\u79ef\u5185\u6838 1x1\u5377\u79ef\u4e3a\u60a8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8de8\u901a\u9053\u7684\u5168\u8fde\u63a5\u7684\u7ebf\u6027\u5c42 \u5b83\u53ef\u4ee5\u7528\u4e8e\u4ece\u591a\u4e2a\u901a\u9053\u6620\u5c04\u5230\u66f4\u5c11\u7684\u901a\u9053 1x 1\u5377\u79ef\u6dfb\u52a0\u4e86\u989d\u5916\u7684\u795e\u7ecf\u7f51\u7edc\u5c42\uff0c\u9644\u52a0\u7684\u53c2\u6570\u5f88\u5c11\uff0c \u4e0e\u5168\u8fde\u63a5(FC)\u5c42\u4e0d\u540c\uff0c\u5168\u8fde\u63a5(FC)\u5c42\u6dfb\u52a0\u4e86\u5927\u91cf\u7684\u53c2\u6570 CNN application: Translation \u6700\u65e9\u6210\u529f\u7684\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e4b\u4e00 \u4f7f\u7528CNN\u8fdb\u884c\u7f16\u7801\uff0c\u4f7f\u7528RNN\u8fdb\u884c\u89e3\u7801 Kalchbrennerand Blunsom(2013) \u201cRecurrent Continuous Translation Models\u201d Learning Character-level Representations for Part-of-Speech Tagging Dos Santos and Zadrozny(2014) \u5bf9\u5b57\u7b26\u8fdb\u884c\u5377\u79ef\u4ee5\u751f\u6210\u5355\u8bcd\u5d4c\u5165 \u56fa\u5b9a\u7a97\u53e3\u7684\u8bcd\u5d4c\u5165\u88ab\u7528\u4e8ePOS\u6807\u7b7e Character-Aware Neural Language Models (Kim, Jernite, Sontag, and Rush 2015) \u57fa\u4e8e\u5b57\u7b26\u7684\u5355\u8bcd\u5d4c\u5165 \u5229\u7528\u5377\u79ef\u3001highway network\u548cLSTM","title":"4. Model comparison: Our growing toolkit"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#5-very-deep-convolutional-networks-for-text-classification","text":"Conneau, Schwenk, Lecun, Barrault. EACL 2017. \u8d77\u59cb\u70b9\uff1a\u5e8f\u5217\u6a21\u578b(LSTMs)\u5728NLP\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\uff1b\u8fd8\u6709CNNs\u3001\u6ce8\u610f\u529b\u7b49\u7b49\uff0c\u4f46\u662f\u6240\u6709\u7684\u6a21\u578b\u57fa\u672c\u4e0a\u90fd\u4e0d\u662f\u5f88\u6df1\u5165\u2014\u2014\u4e0d\u50cf\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u7684\u6df1\u5ea6\u6a21\u578b \u5f53\u6211\u4eec\u4e3aNLP\u6784\u5efa\u4e00\u4e2a\u7c7b\u4f3c\u89c6\u89c9\u7684\u7cfb\u7edf\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48 \u4ece\u5b57\u7b26\u7ea7\u5f00\u59cb\u5de5\u4f5c Convolutional block in VD-CNN \u6bcf\u4e2a\u5377\u79ef\u5757\u662f\u4e24\u4e2a\u5377\u79ef\u5c42\uff0c\u6bcf\u4e2a\u5377\u79ef\u5c42\u540e\u9762\u662fBatchNorm\u548c\u4e00\u4e2aReLU \u5377\u79ef\u5927\u5c0f\u4e3a3 pad \u4ee5\u4fdd\u6301(\u6216\u5728\u5c40\u90e8\u6c60\u5316\u65f6\u51cf\u534a)\u7ef4\u6570 Experiments \u4f7f\u7528\u5927\u6587\u672c\u5206\u7c7b\u6570\u636e\u96c6 \u6bd4NLP\u4e2d\u7ecf\u5e38\u4f7f\u7528\u7684\u5c0f\u6570\u636e\u96c6\u5927\u5f97\u591a\uff0c\u5982Yoon Kim(2014)\u7684\u8bba\u6587 \u4ee5\u4e0a\u6570\u636e\u5747\u4e3a\u9519\u8bef\u7387\uff0c\u6240\u4ee5\u8d8a\u4f4e\u8d8a\u597d \u6df1\u5ea6\u7f51\u7edc\u4f1a\u53d6\u5f97\u66f4\u597d\u7684\u7ed3\u679c\uff0c\u6b8b\u5dee\u5c42\u53d6\u5f97\u5f88\u597d\u7684\u7ed3\u679c\uff0c\u4f46\u662f\u6df1\u5ea6\u518d\u6df1\u65f6\u5e76\u672a\u53d6\u5f97\u6548\u679c\u63d0\u5347 \u5b9e\u9a8c\u8868\u660e\u4f7f\u7528 MaxPooling \u6bd4 KMaxPooling \u548c \u4f7f\u7528stride\u7684\u5377\u79ef \u7684\u4e24\u79cd\u5176\u4ed6\u6c60\u5316\u65b9\u6cd5\u8981\u66f4\u597d ConvNets\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5efa\u7acb\u5f88\u597d\u7684\u6587\u672c\u5206\u7c7b\u7cfb\u7edf 6. RNNs are Slow \u2026 RNNs\u662f\u6df1\u5ea6NLP\u7684\u4e00\u4e2a\u975e\u5e38\u6807\u51c6\u7684\u6784\u5efa\u5757 \u4f46\u5b83\u4eec\u7684\u5e76\u884c\u6027\u5f88\u5dee\uff0c\u56e0\u6b64\u901f\u5ea6\u5f88\u6162 \u60f3\u6cd5\uff1a\u53d6RNNs\u548cCNNs\u4e2d\u6700\u597d\u4e14\u53ef\u5e76\u884c\u7684\u90e8\u5206 Quasi-Recurrent Neural Networks by James Bradbury, Stephen Merity, CaimingXiong& Richard Socher. ICLR 2017 Quasi-Recurrent Neural Network \u52aa\u529b\u628a\u4e24\u4e2a\u6a21\u578b\u5bb6\u65cf\u7684\u4f18\u70b9\u7ed3\u5408\u8d77\u6765 \u65f6\u95f4\u4e0a\u5e76\u884c\u7684\u5377\u79ef\uff0c\u5377\u79ef\u8ba1\u7b97\u5019\u9009\uff0c\u9057\u5fd8\u95e8\u548c\u8f93\u51fa\u95e8 \\[ \\begin{aligned} \\mathbf{z}_{t} &=\\tanh \\left(\\mathbf{W}_{z}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{z}^{2} \\mathbf{x}_{t}\\right) \\\\ \\mathbf{f}_{t} &=\\sigma\\left(\\mathbf{W}_{f}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{f}^{2} \\mathbf{x}_{t}\\right) \\\\ \\mathbf{o}_{t} &=\\sigma\\left(\\mathbf{W}_{o}^{1} \\mathbf{x}_{t-1}+\\mathbf{W}_{o}^{2} \\mathbf{x}_{t}\\right) \\end{aligned} \\] \\[ \\begin{aligned} \\mathbf{Z} &=\\tanh \\left(\\mathbf{W}_{z} * \\mathbf{X}\\right) \\\\ \\mathbf{F} &=\\sigma\\left(\\mathbf{W}_{f} * \\mathbf{X}\\right) \\\\ \\mathbf{O} &=\\sigma\\left(\\mathbf{W}_{o} * \\mathbf{X}\\right) \\end{aligned} \\] \u8de8\u901a\u9053\u5e76\u884c\u6027\u7684\u9010\u5143\u7d20\u7684\u95e8\u63a7\u4f2a\u9012\u5f52\u662f\u5728\u6c60\u5316\u5c42\u4e2d\u5b8c\u6210\u7684 \\(\\mathbf{h}_{t}=\\mathbf{f}_{t} \\odot \\mathbf{h}_{t-1}+\\left(1-\\mathbf{f}_{t}\\right) \\odot \\mathbf{z}_{t}\\) Q-RNN Experiments: Language Modeling James Bradbury,Stephen Merity,CaimingXiong,Richard Socher (ICLR 2017) Q-RNNs for Sentiment Analysis \u901a\u5e38\u6bd4LSTMs\u66f4\u597d\u66f4\u5feb \u66f4\u52a0\u7684\u53ef\u89e3\u91ca \u4f8b\u5982\uff1a QRNN limitations \u5bf9\u4e8e\u5b57\u7b26\u7ea7\u7684LMs\u5e76\u4e0d\u50cfLSTMs\u90a3\u6837\u6709\u6548 \u5efa\u6a21\u65f6\u9047\u5230\u7684\u66f4\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u95ee\u9898 \u901a\u5e38\u9700\u8981\u66f4\u6df1\u5165\u7684\u7f51\u7edc\u6765\u83b7\u5f97\u4e0eLSTM\u4e00\u6837\u597d\u7684\u6027\u80fd \u5f53\u5b83\u4eec\u66f4\u6df1\u5165\u65f6\uff0c\u901f\u5ea6\u4ecd\u7136\u66f4\u5feb \u6709\u6548\u5730\u4f7f\u7528\u6df1\u5ea6\u4f5c\u4e3a\u771f\u6b63\u9012\u5f52\u7684\u66ff\u4ee3","title":"5. Very Deep Convolutional Networks for Text Classification"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#notes-08-convolutional-neural-networks","text":"","title":"Notes 08 Convolutional Neural Networks"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#1-cnns-convolutional-neural-networks","text":"","title":"1 CNNs (Convolutional Neural Networks)"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#11-why-cnns","text":"\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u63a5\u6536\u8bcd\u5411\u91cf\u7684\u5e8f\u5217\uff0c\u5e76\u9996\u5148\u4e3a\u6240\u6709\u5b50\u77ed\u8bed\u521b\u5efa\u77ed\u8bed\u5411\u91cf\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8bed\u6cd5\u6b63\u786e\u7684\u77ed\u8bed(\u4e0e\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u4e00\u6837\uff0c\u5c06\u5728\u4e0b\u4e00\u7ec4\u7b14\u8bb0\u4e2d\u8ba8\u8bba)\u3002\u7136\u540e\uff0cCNNs\u5c06\u4ed6\u4eec\u5206\u7ec4\u5b8c\u6210\u624b\u5934\u7684\u4efb\u52a1\u3002","title":"1.1 Why CNNs?"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#12-what-is-convolution","text":"\u6211\u4eec\u4ece\u4e00\u7ef4\u7684\u60c5\u51b5\u5f00\u59cb\u3002\u8003\u8651\u4e24\u4e2a\u4e00\u7ef4\u5411\u91cf \\(f\\) \u548c \\(g\\) \uff0c\u5176\u4e2d \\(f\\) \u662f\u4e3b\u5411\u91cf\uff0cg \u662f filter\u3002 \\(f\\) \u548c \\(g\\) \u4e4b\u95f4\u7684\u5377\u79ef\uff0c\u7b2cn\u9879\u5904\u7684\u503c\u8868\u793a\u4e3a \\((f * g)[n]\\) \uff0c\u5b83\u7b49\u4e8e \\(\\sum_{m=-M}^{M} f[n-m] g[m]\\) \u3002 \u4e0a\u56fe\u663e\u793a\u4e86\u4e8c\u7ef4\u5377\u79ef\u7684\u60c5\u51b5\u3002 \\(9\\times9\\) \u7684\u7eff\u8272\u77e9\u9635\u8868\u793a\u5173\u6ce8\u7684\u4e3b\u77e9\u9635 \\(f\\) \u3002 \\(3\\times3\\) \u7684\u7ea2\u8272\u77e9\u9635\u8868\u793a filter g\uff0c\u5f53\u524d\u6b63\u5728\u8ba1\u7b97\u7684\u5377\u79ef\u4f4d\u4e8e\u4f4d\u7f6e[2,2]\u3002\u56fe1\u663e\u793a\u4e86\u7b2c\u4e8c\u4e2a\u8868\u4e2d[2,2]= 4\u5904\u5377\u79ef\u7684\u503c\u3002\u4f60\u80fd\u5b8c\u6210\u7b2c\u4e8c\u5f20\u8868\u683c\u5417?","title":"1.2 What is Convolution?"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#13-a-single-layer-cnn","text":"\u8003\u8651\u5355\u8bcd\u5411\u91cf \\(x_{i} \\in R^{k}\\) \u548c\u4e00\u4e2an\u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u7684\u5355\u8bcd\u5411\u91cf\u4e32\u8054\uff0c \\(x_{1 : n}=x_{1} \\oplus x_{2} \\ldots \\oplus x_{n}\\) \u3002\u6700\u540e\uff0c\u8003\u8651\u5377\u79ef\u6ee4\u6ce2\u5668 \\(w \\in R^{h k}\\) \uff0c\u5373\u4f5c\u7528\u4e8e h \u4e2a\u5355\u8bcd\u3002\u5bf9\u4e8e \\(k = 2, n = 5, h = 3\\) \uff0c\u56fe 2 \u4e3aNLP\u7684\u5355\u5c42\u5377\u79ef\u5c42\u3002\u5728\"the country of my birth\"\u8fd9\u4e2a\u53e5\u5b50\u4e2d\uff0c\u8fde\u7eed\u4e09\u4e2a\u5355\u8bcd\u7684\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7ec4\u5408\u90fd\u5c06\u5f97\u5230\u4e00\u4e2a\u503c\u3002\u6ce8\u610f\uff0c\u6ee4\u6ce2\u5668 w \u672c\u8eab\u662f\u4e00\u4e2a\u5411\u91cf\uff0c\u6211\u4eec\u5c06\u6709 \\(c_{i}=f\\left(w^{T} x_{i : i | h-1}+b\\right)\\) \u6765\u7ed9\u51fa \\(\\mathbf{c}=\\left[c_{1}, c_{2} \\dots c_{n-h+1}\\right] \\in R^{n-h+1}\\) \u3002\u6700\u540e\u4e24\u4e2a\u65f6\u95f4\u6b65\uff0c\u5373\u4ece\u201cmy\u201d\u6216\u201cbirth\u201d\u5f00\u59cb\uff0c\u6211\u4eec\u6ca1\u6709\u8db3\u591f\u7684\u5b57\u5411\u91cf\u6765\u4e0e\u6ee4\u6ce2\u5668\u76f8\u4e58(\u56e0\u4e3ah = 3)\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u4e0e\u540e\u4e24\u4e2a\u8bcd\u5411\u91cf\u76f8\u5173\u7684\u5377\u79ef\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u6280\u5de7\u662f\u7528h - 1\u4e2a\u96f6\u5411\u91cf\u586b\u5145\u53e5\u5b50\u7684\u53f3\u8fb9\uff0c\u5982\u4e0a\u56fe3\u6240\u793a\u3002","title":"1.3 A Single-Layer CNN"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#14-pooling","text":"\u5047\u8bbe\u6211\u4eec\u4e0d\u4f7f\u7528\u8865\u96f6\uff0c\u6211\u4eec\u5c06\u5f97\u5230\u6700\u7ec8\u7684\u5377\u79ef\u8f93\u51fa\uff0c \\(\\mathbf{c}\\) \u6709 \\(n-h+1\\) \u4e2a\u6570\u3002\u901a\u5e38\uff0c\u6211\u4eec\u5e0c\u671b\u63a5\u6536CNN\u7684\u8f93\u51fa\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\uff0c\u8f93\u5165\u5230\u66f4\u6df1\u5c42\uff0c\u5982\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6216RecNN\u3002\u4f46\u662f\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u9700\u8981\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u8f93\u5165\uff0c\u800cCNN\u8f93\u51fa\u7684\u957f\u5ea6\u4f9d\u8d56\u4e8e\u53e5\u5b50\u7684\u957f\u5ea6 \\(n\\) \u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u6cd5\u662f\u4f7f\u7528max-pooling\u3002CNN\u7684\u8f93\u51fa \\(\\mathbf{c} \\in \\mathbb{R}^{n-h-1}\\) \u662f max-pooling \u5c42\u7684\u8f93\u5165\u3002max-pooling\u7684\u8f93\u51fa\u5c42 \\(\\hat{c}=\\max \\{\\mathbf{c}\\}\\) \uff0c\u56e0\u6b64 \\(\\hat{c} \\in \\mathbb{R}\\) \u3002 \u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6700\u5c0f\u6c60\u5316\uff0c\u56e0\u4e3a\u901a\u5e38\u6211\u4eec\u4f7f\u7528ReLU\u4f5c\u4e3a\u975e\u7ebf\u6027\u6fc0\u6d3b\u51fd\u6570\u800cReLU\u7684\u4e0b\u754c\u662f0\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u6700\u5c0f\u6c60\u5316\u53ef\u80fd\u4f1a\u88abReLU\u8986\u76d6\uff0c\u6240\u4ee5\u6211\u4eec\u51e0\u4e4e\u603b\u662f\u4f7f\u7528\u6700\u5927\u6c60\u5316\u800c\u4e0d\u662f\u6700\u5c0f\u6c60\u5316\u3002","title":"1.4 Pooling"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#15-multiple-filters","text":"\u5728\u4e0a\u9762\u4e0e\u56fe2\u76f8\u5173\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u6709 h = 2\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ea\u4f7f\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u7ec4\u5408\u65b9\u6cd5\uff0c\u5373\u4f7f\u7528\u8fc7\u6ee4\u5668\u6765\u67e5\u770bbi-grams\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2abi-grams\u8fc7\u6ee4\u5668\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8fc7\u6ee4\u5668\u5c06\u5b66\u4e60\u8bc6\u522b\u4e0d\u540c\u7c7b\u578b\u7684bi-grams\u3002\u66f4\u4e00\u822c\u5730\u8bf4\uff0c\u6211\u4eec\u5e76\u4e0d\u4ec5\u9650\u4e8e\u4f7f\u7528bi-grams\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528tri-grams\u3001 quad-grams \u751a\u81f3\u66f4\u957f\u7684\u8fc7\u6ee4\u5668\u3002\u6bcf\u4e2a\u8fc7\u6ee4\u5668\u90fd\u6709\u4e00\u4e2a\u5173\u8054\u7684\u6700\u5927\u6c60\u5316\u5c42\u3002\u56e0\u6b64\uff0cCNN\u5c42\u7684\u6700\u7ec8\u8f93\u51fa\u5c06\u662f\u4e00\u4e2a\u957f\u5ea6\u7b49\u4e8e\u8fc7\u6ee4\u5668\u6570\u91cf\u7684\u5411\u91cf","title":"1.5 Multiple-Filters"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#16-multiple-channels","text":"\u5982\u679c\u6211\u4eec\u5141\u8bb8\u68af\u5ea6\u6d41\u5165\u8fd9\u91cc\u4f7f\u7528\u7684\u5355\u8bcd\u5411\u91cf\uff0c\u90a3\u4e48\u5355\u8bcd\u5411\u91cf\u53ef\u80fd\u4f1a\u968f\u7740\u8bad\u7ec3\u800c\u53d1\u751f\u663e\u8457\u53d8\u5316\u3002\u8fd9\u662f\u9700\u8981\u7684\uff0c\u56e0\u4e3a\u5b83\u5c06\u5355\u8bcd\u5411\u91cf\u4e13\u95e8\u7528\u4e8e\u5f53\u524d\u7279\u5b9a\u4efb\u52a1(\u8fdc\u79bbGloVe\u521d\u59cb\u5316)\u3002\u4f46\u662f\uff0c\u5982\u679c\u5355\u8bcd\u53ea\u51fa\u73b0\u5728\u6d4b\u8bd5\u96c6\u4e2d\u800c\u6ca1\u6709\u51fa\u73b0\u5728\u8bad\u7ec3\u96c6\u4e0a\u5462\uff1f\u867d\u7136\u51fa\u73b0\u5728\u8bad\u7ec3\u96c6\u4e2d\u7684\u5176\u4ed6\u8bed\u4e49\u76f8\u5173\u7684\u5355\u8bcd\u5411\u91cf\u5c06\u4ece\u5b83\u4eec\u7684\u8d77\u59cb\u70b9\u663e\u8457\u79fb\u52a8\uff0c\u4f46\u662f\u8fd9\u4e9b\u5355\u8bcd\u4ecd\u5c06\u5904\u4e8e\u5b83\u4eec\u7684\u521d\u59cb\u70b9\u3002\u795e\u7ecf\u7f51\u7edc\u5c06\u4e13\u95e8\u7528\u4e8e\u5df2\u66f4\u65b0\u7684\u8f93\u5165\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u4f7f\u7528\u8fd9\u4e9b\u5355\u8bcd\u7684\u53e5\u5b50\u4e2d\u4f1a\u8868\u73b0\u5f97\u5f88\u5dee\u3002 \u4e00\u79cd\u65b9\u6cd5\u662f\u7ef4\u62a4\u4e24\u7ec4\u5355\u8bcd\u5411\u91cf\uff0c\u4e00\u7ec4\u201c\u9759\u6001\u201d(\u6ca1\u6709\u68af\u5ea6\u6d41)\u548c\u4e00\u7ec4\u201c\u52a8\u6001\u201d(\u901a\u8fc7SGD\u66f4\u65b0)\u3002\u5b83\u4eec\u6700\u521d\u662f\u4e00\u6837\u7684\uff08GloVe \u6216\u8005\u5176\u4ed6\u521d\u59cb\u5316\uff09\u3002\u8fd9\u4e24\u4e2a\u96c6\u5408\u540c\u65f6\u4f5c\u4e3a\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165\u3002\u56e0\u6b64\uff0c\u521d\u59cb\u5316\u7684\u8bcd\u5411\u91cf\u5728\u795e\u7ecf\u7f51\u7edc\u7684\u8bad\u7ec3\u4e2d\u59cb\u7ec8\u8d77\u7740\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u6d4b\u8bd5\u4e2d\u7ed9\u51fa\u770b\u4e0d\u89c1\u7684\u5355\u8bcd\u53ef\u4ee5\u63d0\u9ad8\u6b63\u786e\u7406\u89e3\u7684\u51e0\u7387\u3002 \u6709\u51e0\u79cd\u5904\u7406\u8fd9\u4e24\u4e2achannel\u7684\u65b9\u6cd5\uff0c\u6700\u5e38\u89c1\u7684\u662f\u5728CNN\u4e2d\u4f7f\u7528\u4e4b\u524d\u5bf9\u5b83\u4eec\u8fdb\u884c\u5e73\u5747\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u5c06CNN\u8fc7\u6ee4\u5668\u7684\u957f\u5ea6\u52a0\u500d\u3002","title":"1.6 Multiple-Channels"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#17-cnn-options","text":"","title":"1.7 CNN Options"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#narrow-vs-wide","text":"\u53c2\u89c1\u56fe4\u3002\u53e6\u4e00\u79cd\u95ee\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u6211\u4eec\u5e94\u8be5\u7f29\u5c0f\u8fd8\u662f\u6269\u5927 \uff1f\u5373\u6211\u4eec\u662f\u5426\u4f7f\u7528zero-pad \uff1f \u5982\u679c\u6211\u4eec\u4f7f\u7528\u7a84\u5377\u79ef\uff0c\u6211\u4eec\u53ea\u5728\u4e00\u4e2a\u6ee4\u6ce2\u5668\u7684\u6240\u6709\u5206\u91cf\u90fd\u6709\u4e00\u4e2a\u5339\u914d\u8f93\u5165\u5206\u91cf\u7684\u4f4d\u7f6e\u8ba1\u7b97\u5377\u79ef\u3002\u5728\u8f93\u5165\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u8fb9\u754c\u5904\u663e\u7136\u4e0d\u662f\u8fd9\u6837\uff0c\u5982\u56fe4\u4e2d\u7684\u5de6\u4fa7\u7f51\u7edc\u6240\u793a\u3002 \u5982\u679c\u6211\u4eec\u4f7f\u7528\u5bbd\u5377\u79ef\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u51fa\u5206\u91cf\u5bf9\u5e94\u4e8e\u5377\u79ef\u6ee4\u6ce2\u5668\u7684\u6bcf\u4e2a\u5bf9\u9f50\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u8f93\u5165\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u5904\u586b\u5145 \\(h - 1\\) \u4e2a\u96f6\u3002 \u5728\u7a84\u5377\u79ef\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u957f\u5ea6\u4e3a \\(n - h+ 1\\) \uff0c\u800c\u5728\u5bbd\u5377\u79ef\u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u957f\u5ea6\u4e3a \\(n+h - 1\\)","title":"Narrow vs Wide"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#k-max-pooling","text":"\u8fd9\u662f\u5bf9\u6700\u5927\u6c60\u5316\u5c42\u7684\u6982\u62ec\u3002k-max \u6c60\u5316\u5c42\u4e0d\u662f\u53ea\u4ece\u5b83\u7684\u8f93\u5165\u4e2d\u9009\u62e9\u6700\u5927\u7684\u503c\uff0c\u800c\u662f\u9009\u62e9k\u4e2a\u6700\u5927\u7684\u503c\uff08\u5e76\u4e14\u4fdd\u6301\u539f\u6709\u7684\u987a\u5e8f\uff09\u3002\u8bbe\u7f6e \\(k = 1\\) \u5219\u662f\u6211\u4eec\u524d\u9762\u770b\u5230\u7684\u6700\u5927\u6c60\u5316\u5c42\u3002","title":"k-max pooling"},{"location":"CS224n-2019-11-ConvNets%20for%20NLP/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/","text":"Lecture 12 Information from parts of words: Subword Models \u00b6 Lecture Plan A tiny bit of linguistics Purely character-level models Subword-models: Byte Pair Encoding and friends Hybrid character and word level models fastText 1. Human language sounds: Phonetics and phonology \u00b6 Phonetics \u8bed\u97f3\u5b66\u662f\u4e00\u79cd\u97f3\u6d41\u2014\u2014\u7269\u7406\u5b66\u6216\u751f\u7269\u5b66 Phonology \u8bed\u97f3\u4f53\u7cfb\u5047\u5b9a\u4e86\u4e00\u7ec4\u6216\u591a\u7ec4\u72ec\u7279\u7684\u3001\u5206\u7c7b\u7684\u5355\u5143\uff1a phoneme \u97f3\u7d20 \u6216\u8005\u662f\u72ec\u7279\u7684\u7279\u5f81 \u8fd9\u4e5f\u8bb8\u662f\u4e00\u79cd\u666e\u904d\u7684\u7c7b\u578b\u5b66\uff0c\u4f46\u5374\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8bed\u8a00\u5b9e\u73b0 \u5206\u7c7b\u611f\u77e5\u7684\u6700\u4f73\u4f8b\u5b50\u5c31\u662f\u8bed\u97f3\u4f53\u7cfb \u97f3\u4f4d\u5dee\u5f02\u7f29\u5c0f\uff1b\u97f3\u7d20\u4e4b\u95f4\u7684\u653e\u5927 Morphology: Parts of words \u58f0\u97f3\u672c\u8eab\u5728\u8bed\u8a00\u4e2d\u6ca1\u6709\u610f\u4e49 parts of words \u662f\u97f3\u7d20\u7684\u4e0b\u4e00\u7ea7\u7684\u5f62\u6001\u5b66\uff0c\u662f\u5177\u6709\u610f\u4e49\u7684\u6700\u4f4e\u7ea7\u522b \u4f20\u7edf\u4e0a\uff0c morphemes \u8bcd\u7d20\u662f\u6700\u5c0f\u7684\u8bed\u4e49\u5355\u4f4d semantic unit \\(\\left[\\left[\\text {un}\\left[[\\text { fortun }(\\mathrm{e})]_{\\text { Root }} \\text { ate }\\right]_{\\text { STEM }}\\right]_{\\text { STEM }} \\text {ly}\\right]_{\\text { WORD }}\\) \u6df1\u5ea6\u5b66\u4e60:\u5f62\u6001\u5b66\u7814\u7a76\u8f83\u5c11\uff1b\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7684\u4e00\u79cd\u5c1d\u8bd5\u662f (Luong, Socher, & Manning 2013) \u5904\u7406\u66f4\u5927\u8bcd\u6c47\u91cf\u7684\u4e00\u79cd\u53ef\u80fd\u65b9\u6cd5\u2014\u2014\u5927\u591a\u6570\u770b\u4e0d\u89c1\u7684\u5355\u8bcd\u662f\u65b0\u7684\u5f62\u6001(\u6216\u6570\u5b57) Morphology \u4e00\u4e2a\u7b80\u5355\u7684\u66ff\u4ee3\u65b9\u6cd5\u662f\u4f7f\u7528\u5b57\u7b26 n-grams Wickelphones (Rumelhart& McClelland 1986) Microsoft\u2019s DSSM (Huang, He, Gao, Deng, Acero, & Hect2013) \u4f7f\u7528\u5377\u79ef\u5c42\u7684\u76f8\u5173\u60f3\u6cd5 \u80fd\u66f4\u5bb9\u6613\u5730\u53d1\u6325\u8bcd\u7d20\u7684\u8bb8\u591a\u4f18\u70b9\u5417\uff1f Words in writing systems \u4e66\u5199\u7cfb\u7edf\u5728\u8868\u8fbe\u5355\u8bcd\u7684\u65b9\u5f0f\u4e0a\u5404\u4e0d\u76f8\u540c\uff0c\u4e5f\u4e0d\u76f8\u540c \u6ca1\u6709\u5206\u8bcd\uff08\u6ca1\u6709\u5728\u5355\u8bcd\u95f4\u653e\u7f6e\u7a7a\u683c\uff09 \u7f8e\u56fd\u5173\u5c9b\u56fd\u9645\u673a\u573a\u53ca\u5176\u529e\u516c\u5ba4\u5747\u63a5\u83b7 \u5927\u90e8\u5206\u7684\u5355\u8bcd\u90fd\u662f\u5206\u5f00\u7684\uff1a\u7531\u5355\u8bcd\u7ec4\u6210\u4e86\u53e5\u5b50 \u9644\u7740\u8bcd clitics \u5206\u5f00\u7684 \u8fde\u7eed\u7684 - \u590d\u5408\u540d\u8bcd - \u5206\u5f00\u7684 life insurance company employee - \u8fde\u7eed\u7684 Lebensversicherungsgesellschaftsangestellter Models below the word level \u9700\u8981\u5904\u7406\u6570\u91cf\u5f88\u5927\u7684\u5f00\u653e\u8bcd\u6c47\uff1a\u5de8\u5927\u7684\u3001\u65e0\u9650\u7684\u5355\u8bcd\u7a7a\u95f4 \u4e30\u5bcc\u7684\u5f62\u6001 \u97f3\u8bd1\uff08\u7279\u522b\u662f\u540d\u5b57\uff0c\u5728\u7ffb\u8bd1\u4e2d\u57fa\u672c\u4e0a\u662f\u97f3\u8bd1\uff09 \u975e\u6b63\u5f0f\u7684\u62fc\u5199 Character-Level Models \u8bcd\u5d4c\u5165\u53ef\u4ee5\u7531\u5b57\u7b26\u5d4c\u5165\u7ec4\u6210 \u4e3a\u672a\u77e5\u5355\u8bcd\u751f\u6210\u5d4c\u5165 \u76f8\u4f3c\u7684\u62fc\u5199\u5171\u4eab\u76f8\u4f3c\u7684\u5d4c\u5165 \u89e3\u51b3OOV\u95ee\u9898 \u8fde\u7eed\u8bed\u8a00\u53ef\u4ee5\u4f5c\u4e3a\u5b57\u7b26\u5904\u7406\uff1a\u5373\u6240\u6709\u7684\u8bed\u8a00\u5904\u7406\u5747\u5efa\u7acb\u5728\u5b57\u7b26\u5e8f\u5217\u4e0a\uff0c\u4e0d\u8003\u8651 word-level \u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u88ab\u8bc1\u660e\u662f\u975e\u5e38\u6210\u529f\u7684\uff01 \u6709\u70b9\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\u2014\u2014\u4f20\u7edf\u4e0a\uff0c\u97f3\u7d20/\u5b57\u6bcd\u4e0d\u662f\u4e00\u4e2a\u8bed\u4e49\u5355\u5143\u2014\u2014\u4f46DL\u6a21\u578b\u7ec4\u6210\u4e86\u7ec4 \u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u53ef\u4ee5\u5b58\u50a8\u548c\u6784\u5efa\u6765\u81ea\u4e8e\u591a\u4e2a\u5b57\u6bcd\u7ec4\u7684\u542b\u4e49\u8868\u793a\uff0c\u4ece\u800c\u6a21\u62df\u8bed\u7d20\u548c\u66f4\u5927\u5355\u4f4d\u7684\u610f\u4e49\uff0c\u4ece\u800c\u6c47\u603b\u5f62\u6210\u8bed\u4e49 Below the word: Writing systems \u5927\u591a\u6570\u6df1\u5ea6\u5b66\u4e60NLP\u7684\u5de5\u4f5c\u90fd\u662f\u4ece\u8bed\u8a00\u7684\u4e66\u9762\u5f62\u5f0f\u5f00\u59cb\u7684\u2014\u2014\u8fd9\u662f\u4e00\u79cd\u5bb9\u6613\u5904\u7406\u7684\u3001\u73b0\u6210\u7684\u6570\u636e \u4f46\u662f\u4eba\u7c7b\u8bed\u8a00\u4e66\u5199\u7cfb\u7edf\u4e0d\u662f\u4e00\u56de\u4e8b\uff01\u5404\u79cd\u8bed\u8a00\u7684\u5b57\u7b26\u662f\u4e0d\u540c\u7684\uff01 2. Purely character-level models \u00b6 \u4e0a\u8282\u8bfe\u6211\u4eec\u770b\u5230\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u7eaf\u5b57\u7b26\u7ea7\u6a21\u578b\u7684\u4f8b\u5b50\u7528\u4e8e\u53e5\u5b50\u5206\u7c7b \u975e\u5e38\u6df1\u7684\u5377\u79ef\u7f51\u7edc\u7528\u4e8e\u6587\u672c\u5206\u7c7b Conneau, Schwenk, Lecun, Barrault.EACL 2017 \u5f3a\u5927\u7684\u7ed3\u679c\u901a\u8fc7\u6df1\u5ea6\u5377\u79ef\u5806\u53e0 Purely character-level NMT models \u4ee5\u5b57\u7b26\u4f5c\u4e3a\u8f93\u5165\u548c\u8f93\u51fa\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf \u6700\u521d\uff0c\u6548\u679c\u4e0d\u4ee4\u4eba\u6ee1\u610f (Vilaret al., 2007; Neubiget al., 2013) \u53ea\u6709decoder\uff08\u6210\u529f\u7684\uff09 (JunyoungChung, KyunghyunCho, YoshuaBengio. arXiv 2016). \u7136\u540e\u6709\u524d\u666f\u7684\u7ed3\u679c (Wang Ling, Isabel Trancoso, Chris Dyer, Alan Black, arXiv 2015) (Thang Luong, Christopher Manning, ACL 2016) (Marta R. Costa-Juss\u00e0, Jos\u00e9 A. R. Fonollosa, ACL 2016) English-Czech WMT 2015 Results Luong\u548cManning\u6d4b\u8bd5\u4e86\u4e00\u4e2a\u7eaf\u5b57\u7b26\u7ea7seq2seq (LSTM) NMT\u7cfb\u7edf\u4f5c\u4e3a\u57fa\u7ebf \u5b83\u5728\u5355\u8bcd\u7ea7\u57fa\u7ebf\u4e0a\u8fd0\u884c\u5f97\u5f88\u597d \u5bf9\u4e8e UNK\uff0c\u662f\u7528 single word translation \u6216\u8005 copy stuff from the source \u5b57\u7b26\u7ea7\u7684 model \u6548\u679c\u66f4\u597d\u4e86\uff0c\u4f46\u662f\u592a\u6162\u4e86 \u4f46\u662f\u5728\u8fd0\u884c\u65f6\u9700\u89813\u5468\u7684\u65f6\u95f4\u6765\u8bad\u7ec3\uff0c\u8fd0\u884c\u65f6\u6ca1\u90a3\u4e48\u5feb \u5982\u679c\u653e\u8fdb\u4e86 LSTM \u4e2d\uff0c\u5e8f\u5217\u957f\u5ea6\u53d8\u4e3a\u4ee5\u524d\u7684\u6570\u500d\uff08\u5927\u7ea6\u4e03\u500d\uff09 Fully Character-Level Neural Machine Translation without Explicit Segmentation Jason Lee, KyunghyunCho, Thomas Hoffmann. 2017. \u7f16\u7801\u5668\u5982\u4e0b\uff1b\u89e3\u7801\u5668\u662f\u4e00\u4e2a\u5b57\u7b26\u7ea7\u7684GRU Stronger character results with depth in LSTM seq2seq model Revisiting Character-Based Neural Machine Translation with Capacity and Compression. 2018. Cherry, Foster, Bapna, Firat, Macherey, Google AI \u5728\u6377\u514b\u8bed\u8fd9\u6837\u7684\u590d\u6742\u8bed\u8a00\u4e2d\uff0c\u5b57\u7b26\u7ea7\u6a21\u578b\u7684\u6548\u679c\u63d0\u5347\u8f83\u4e3a\u660e\u663e\uff0c\u4f46\u662f\u5728\u82f1\u8bed\u548c\u6cd5\u8bed\u7b49\u8bed\u8a00\u4e2d\u5219\u6536\u6548\u751a\u5fae\u3002 \u6a21\u578b\u8f83\u5c0f\u65f6\uff0cword-level \u66f4\u4f73\uff1b\u6a21\u578b\u8f83\u5927\u65f6\uff0ccharacter-level \u66f4\u4f73 3. Sub-word models: two trends \u00b6 \u4e0eword\u7ea7\u6a21\u578b\u76f8\u540c\u7684\u67b6\u6784 \u4f46\u662f\u4f7f\u7528\u66f4\u5c0f\u7684\u5355\u5143:\u201cword pieces\u201d [Sennrich, Haddow, Birch, ACL\u201916a], [Chung, Cho, Bengio, ACL\u201916]. \u6df7\u5408\u67b6\u6784 \u4e3b\u6a21\u578b\u4f7f\u7528\u5355\u8bcd\uff0c\u5176\u4ed6\u4f7f\u7528\u5b57\u7b26\u7ea7 [Costa-Juss\u00e0& Fonollosa, ACL\u201916], [Luong & Manning, ACL\u201916]. Byte Pair Encoding BPE \u5e76\u672a\u6df1\u5ea6\u5b66\u4e60\u7684\u6709\u5173\u7b97\u6cd5\uff0c\u4f46\u5df2\u6210\u4e3a\u6807\u51c6\u4e14\u6210\u529f\u8868\u793a pieces of words \u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u6709\u9650\u7684\u8bcd\u5178\u4e0e\u65e0\u9650\u4e14\u6709\u6548\u7684\u8bcd\u6c47\u8868\u3002 \u6700\u521d\u7684\u538b\u7f29\u7b97\u6cd5 \u6700\u9891\u7e41\u7684\u5b57\u8282 \\(\\to\\) \u4e00\u4e2a\u65b0\u7684\u5b57\u8282\u3002 \u7528\u5b57\u7b26ngram\u66ff\u6362\u5b57\u8282(\u5b9e\u9645\u4e0a\uff0c\u6709\u4e9b\u4eba\u5df2\u7ecf\u7528\u5b57\u8282\u505a\u4e86\u4e00\u4e9b\u6709\u8da3\u7684\u4e8b\u60c5) Rico Sennrich, Barry Haddow, and Alexandra Birch. Neural Machine Translation of Rare Words with SubwordUnits. ACL 2016. https://arxiv.org/abs/1508.07909 https://github.com/rsennrich/subword-nmt https://github.com/EdinburghNLP/nematus \u5206\u8bcd\u7b97\u6cd5 word segmentation \u867d\u7136\u505a\u5f97\u5f88\u7b80\u5355\uff0c\u6709\u70b9\u50cf\u662f\u81ea\u4e0b\u800c\u4e0a\u7684\u77ed\u5e8f\u5217\u805a\u7c7b \u5c06\u6570\u636e\u4e2d\u7684\u6240\u6709\u7684Unicode\u5b57\u7b26\u7ec4\u6210\u4e00\u4e2aunigram\u7684\u8bcd\u5178 \u6700\u5e38\u89c1\u7684 ngram pairs \u89c6\u4e3a \u4e00\u4e2a\u65b0\u7684 ngram \u6709\u4e00\u4e2a\u76ee\u6807\u8bcd\u6c47\u91cf\uff0c\u5f53\u4f60\u8fbe\u5230\u5b83\u7684\u65f6\u5019\u5c31\u505c\u6b62 \u505a\u786e\u5b9a\u6027\u7684\u6700\u957f\u5206\u8bcd\u5206\u5272 \u5206\u5272\u53ea\u5728\u67d0\u4e9b\u5148\u524d\u6807\u8bb0\u5668(\u901a\u5e38MT\u4f7f\u7528\u7684 Moses tokenizer )\u6807\u8bc6\u7684\u5355\u8bcd\u4e2d\u8fdb\u884c \u81ea\u52a8\u4e3a\u7cfb\u7edf\u6dfb\u52a0\u8bcd\u6c47 \u4e0d\u518d\u662f\u57fa\u4e8e\u4f20\u7edf\u65b9\u5f0f\u7684 strongly \u201cword\u201d 2016\u5e74WMT\u6392\u540d\u7b2c\u4e00\uff01\u4ecd\u7136\u5e7f\u6cdb\u5e94\u7528\u4e8e2018\u5e74WMT https://github.com/rsennrich/nematus Wordpiece/Sentencepiece model \u8c37\u6b4cNMT (GNMT) \u4f7f\u7528\u4e86\u5b83\u7684\u4e00\u4e2a\u53d8\u4f53 V1: wordpiece model V2: sentencepiece model \u4e0d\u4f7f\u7528\u5b57\u7b26\u7684 n-gram count\uff0c\u800c\u662f\u4f7f\u7528\u8d2a\u5fc3\u8fd1\u4f3c\u6765\u6700\u5927\u5316\u8bed\u8a00\u6a21\u578b\u7684\u5bf9\u6570\u4f3c\u7136\u51fd\u6570\u503c\uff0c\u9009\u62e9\u5bf9\u5e94\u7684pieces \u6dfb\u52a0\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u56f0\u60d1\u7684n-gram Wordpiece\u6a21\u578b\u6807\u8bb0\u5185\u90e8\u5355\u8bcd Sentencepiece\u6a21\u578b\u4f7f\u7528\u539f\u59cb\u6587\u672c \u7a7a\u683c\u88ab\u4fdd\u7559\u4e3a\u7279\u6b8a\u6807\u8bb0(_)\uff0c\u5e76\u6b63\u5e38\u5206\u7ec4 \u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u7247\u6bb5\u8fde\u63a5\u8d77\u6765\u5e76\u5c06\u5b83\u4eec\u91cd\u65b0\u7f16\u7801\u5230\u7a7a\u683c\u4e2d\uff0c\u4ece\u800c\u5728\u672b\u5c3e\u5c06\u5185\u5bb9\u53cd\u8f6c https://github.com/google/sentencepiece https://arxiv.org/pdf/1804.10959.pdf BERT \u4f7f\u7528\u4e86 wordpiece \u6a21\u578b\u7684\u4e00\u4e2a\u53d8\u4f53 (\u76f8\u5bf9)\u5728\u8bcd\u6c47\u8868\u4e2d\u7684\u5e38\u7528\u8bcd at, fairfax, 1910s \u5176\u4ed6\u5355\u8bcd\u7531wordpieces\u7ec4\u6210 hypatia = h ##yp ##ati ##a \u5982\u679c\u4f60\u5728\u4e00\u4e2a\u57fa\u4e8e\u5355\u8bcd\u7684\u6a21\u578b\u4e2d\u4f7f\u7528BERT\uff0c\u4f60\u5fc5\u987b\u5904\u7406\u8fd9\u4e2a 4. Character-level to build word-level \u00b6 Learning Character-level Representations for Part-ofSpeech Tagging (Dos Santos and Zadrozny2014) \u5bf9\u5b57\u7b26\u8fdb\u884c\u5377\u79ef\u4ee5\u751f\u6210\u5355\u8bcd\u5d4c\u5165 \u4e3aPoS\u6807\u7b7e\u4f7f\u7528\u56fa\u5b9a\u7a97\u53e3\u7684\u8bcd\u5d4c\u5165 Character-based LSTM to build word rep\u2019ns Bi-LSTM\u6784\u5efa\u5355\u8bcd\u8868\u793a Character-based LSTM Character-Aware Neural Language Models Yoon Kim, Yacine Jernite, David Sontag, Alexander M. Rush. 2015 \u4e00\u4e2a\u66f4\u590d\u6742/\u7cbe\u5bc6\u7684\u65b9\u6cd5 \u52a8\u673a \u6d3e\u751f\u4e00\u4e2a\u5f3a\u5927\u7684\u3001\u5065\u58ee\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5728\u591a\u79cd\u8bed\u8a00\u4e2d\u90fd\u6709\u6548 \u7f16\u7801\u5b50\u5355\u8bcd\u5173\u8054\u6027\uff1aeventful, eventfully, uneventful\u2026 \u89e3\u51b3\u73b0\u6709\u6a21\u578b\u7684\u7f55\u89c1\u5b57\u95ee\u9898 \u7528\u66f4\u5c11\u7684\u53c2\u6570\u83b7\u5f97\u53ef\u6bd4\u8f83\u7684\u8868\u8fbe\u6027 Highway Network (Srivastavaet al. 2015) \u8bed\u6cd5\u4ea4\u4e92\u6a21\u578b \u5728\u4f20\u9012\u539f\u59cb\u4fe1\u606f\u7684\u540c\u65f6\u5e94\u7528\u8f6c\u6362 \u529f\u80fd\u7c7b\u4f3c\u4e8eLSTM\u5185\u5b58\u5355\u5143 Long Short-Term Memory Network \u5206\u7ea7Softmaxto\u5904\u7406\u5927\u7684\u8f93\u51fa\u8bcd\u6c47\u8868 \u4f7f\u7528 truncated backpropthrough time \u8fdb\u884c\u8bad\u7ec3 Quantitative Results Take-aways \u672c\u6587\u5bf9\u4f7f\u7528\u8bcd\u5d4c\u5165\u4f5c\u4e3a\u795e\u7ecf\u8bed\u8a00\u5efa\u6a21\u8f93\u5165\u7684\u5fc5\u8981\u6027\u63d0\u51fa\u4e86\u8d28\u7591 \u5b57\u7b26\u7ea7\u7684 CNNs + Highway Network \u53ef\u4ee5\u63d0\u53d6\u4e30\u5bcc\u7684\u8bed\u4e49\u548c\u7ed3\u6784\u4fe1\u606f \u5173\u952e\u601d\u60f3\uff1a\u60a8\u53ef\u4ee5\u6784\u5efa\u201cbuilding blocks\u201d\u6765\u83b7\u5f97\u7ec6\u81f4\u5165\u5fae\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u6a21\u578b\uff01 Hybrid NMT Abest-of-both-worlds architecture \u7ffb\u8bd1\u5927\u90e8\u5206\u662f\u5355\u8bcd\u7ea7\u522b\u7684 \u53ea\u5728\u9700\u8981\u7684\u65f6\u5019\u8fdb\u5165\u5b57\u7b26\u7ea7\u522b \u4f7f\u7528\u4e00\u4e2a\u590d\u5236\u673a\u5236\uff0c\u8bd5\u56fe\u586b\u5145\u7f55\u89c1\u7684\u5355\u8bcd\uff0c\u4ea7\u751f\u4e86\u8d85\u8fc7 2 BLEU\u7684\u6539\u8fdb 2-stage Decoding \u5355\u8bcd\u7ea7\u522b\u7684\u675f\u641c\u7d22 \u5b57\u7b26\u7ea7\u522b\u7684\u675f\u641c\u7d22\uff08\u9047\u5230 \\(\\text{<UNK>}\\) \uff09\u65f6 \u6df7\u5408\u6a21\u578b\u4e0e\u5b57\u7b26\u7ea7\u6a21\u578b\u76f8\u6bd4 \u7eaf\u7cb9\u7684\u5b57\u7b26\u7ea7\u6a21\u578b\u80fd\u591f\u975e\u5e38\u6709\u6548\u5730\u662f\u7528\u5b57\u7b26\u5e8f\u5217\u4f5c\u4e3a\u6761\u4ef6\u4e0a\u4e0b\u6587 \u6df7\u5408\u6a21\u578b\u867d\u7136\u63d0\u4f9b\u4e86\u5b57\u7b26\u7ea7\u7684\u9690\u5c42\u8868\u793a\uff0c\u4f46\u5e76\u6ca1\u6709\u83b7\u5f97\u6bd4\u5355\u8bcd\u7ea7\u522b\u66f4\u4f4e\u7684\u8868\u793a English-Czech Results Sample English-Czech translations 5. Chars for word embeddings \u00b6 \u4e00\u79cd\u7528\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u5355\u8bcd\u5f62\u6001\u5b66\u7684\u8054\u5408\u6a21\u578b(Cao and Rei 2016) \u4e0ew2v\u76ee\u6807\u76f8\u540c\uff0c\u4f46\u4f7f\u7528\u5b57\u7b26 \u53cc\u5411LSTM\u8ba1\u7b97\u5355\u8bcd\u8868\u793a \u6a21\u578b\u8bd5\u56fe\u6355\u83b7\u5f62\u6001\u5b66 \u6a21\u578b\u53ef\u4ee5\u63a8\u65ad\u5355\u8bcd\u7684\u8bcd\u6839 FastText embeddings \u7528\u5b50\u5355\u8bcd\u4fe1\u606f\u4e30\u5bcc\u5355\u8bcd\u5411\u91cf Bojanowski, Grave, Joulinand Mikolov. FAIR. 2016. https://arxiv.org/pdf/1607.04606.pdf \u2022 https://fasttext.cc \u76ee\u6807\uff1a\u4e0b\u4e00\u4ee3\u9ad8\u6548\u7684\u7c7b\u4f3c\u4e8eword2vecd\u7684\u5355\u8bcd\u8868\u793a\u5e93\uff0c\u4f46\u66f4\u9002\u5408\u4e8e\u5177\u6709\u5927\u91cf\u5f62\u6001\u5b66\u7684\u7f55\u89c1\u5355\u8bcd\u548c\u8bed\u8a00 \u5e26\u6709\u5b57\u7b26n-grams\u7684 w2v \u7684 skip-gram\u6a21\u578b\u7684\u6269\u5c55 \u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u7528\u8fb9\u754c\u7b26\u53f7\u548c\u6574\u8bcd\u6269\u5145\u7684\u5b57\u7b26n-grams \\(where =<wh,whe,her,ere,re>,<where>\\) \u6ce8\u610f $ , <her $ \u662f\u4e0d\u540c\u4e8e \\(her\\) \u7684 \u524d\u7f00\u3001\u540e\u7f00\u548c\u6574\u4e2a\u5355\u8bcd\u90fd\u662f\u7279\u6b8a\u7684 \u5c06word\u8868\u793a\u4e3a\u8fd9\u4e9b\u8868\u793a\u7684\u548c\u3002\u4e0a\u4e0b\u6587\u5355\u8bcd\u5f97\u5206\u4e3a \\(S(w, c)=\\sum g \\in G(w) \\mathbf{Z}_{g}^{\\mathrm{T}} \\mathbf{V}_{C}\\) \u7ec6\u8282\uff1a\u4e0e\u5176\u5171\u4eab\u6240\u6709n-grams\u7684\u8868\u793a\uff0c\u4e0d\u5982\u4f7f\u7528\u201chashing trick\u201d\u6765\u62e5\u6709\u56fa\u5b9a\u6570\u91cf\u7684\u5411\u91cf \u7f55\u89c1\u5355\u8bcd\u7684\u5dee\u5f02\u6536\u76ca Suggested Readings \u00b6 Character Level NMT Byte Pair Encoding Minh-Thang Luong and Christopher Manning. Achieving Open Vocabulary Neural Machine Translation with Hybrid Word-Character Models FastText\u8bba\u6587 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"12 Information from parts of words Subword Models"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#lecture-12-information-from-parts-of-words-subword-models","text":"Lecture Plan A tiny bit of linguistics Purely character-level models Subword-models: Byte Pair Encoding and friends Hybrid character and word level models fastText","title":"Lecture 12 Information from parts of words: Subword Models"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#1-human-language-sounds-phonetics-and-phonology","text":"Phonetics \u8bed\u97f3\u5b66\u662f\u4e00\u79cd\u97f3\u6d41\u2014\u2014\u7269\u7406\u5b66\u6216\u751f\u7269\u5b66 Phonology \u8bed\u97f3\u4f53\u7cfb\u5047\u5b9a\u4e86\u4e00\u7ec4\u6216\u591a\u7ec4\u72ec\u7279\u7684\u3001\u5206\u7c7b\u7684\u5355\u5143\uff1a phoneme \u97f3\u7d20 \u6216\u8005\u662f\u72ec\u7279\u7684\u7279\u5f81 \u8fd9\u4e5f\u8bb8\u662f\u4e00\u79cd\u666e\u904d\u7684\u7c7b\u578b\u5b66\uff0c\u4f46\u5374\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8bed\u8a00\u5b9e\u73b0 \u5206\u7c7b\u611f\u77e5\u7684\u6700\u4f73\u4f8b\u5b50\u5c31\u662f\u8bed\u97f3\u4f53\u7cfb \u97f3\u4f4d\u5dee\u5f02\u7f29\u5c0f\uff1b\u97f3\u7d20\u4e4b\u95f4\u7684\u653e\u5927 Morphology: Parts of words \u58f0\u97f3\u672c\u8eab\u5728\u8bed\u8a00\u4e2d\u6ca1\u6709\u610f\u4e49 parts of words \u662f\u97f3\u7d20\u7684\u4e0b\u4e00\u7ea7\u7684\u5f62\u6001\u5b66\uff0c\u662f\u5177\u6709\u610f\u4e49\u7684\u6700\u4f4e\u7ea7\u522b \u4f20\u7edf\u4e0a\uff0c morphemes \u8bcd\u7d20\u662f\u6700\u5c0f\u7684\u8bed\u4e49\u5355\u4f4d semantic unit \\(\\left[\\left[\\text {un}\\left[[\\text { fortun }(\\mathrm{e})]_{\\text { Root }} \\text { ate }\\right]_{\\text { STEM }}\\right]_{\\text { STEM }} \\text {ly}\\right]_{\\text { WORD }}\\) \u6df1\u5ea6\u5b66\u4e60:\u5f62\u6001\u5b66\u7814\u7a76\u8f83\u5c11\uff1b\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7684\u4e00\u79cd\u5c1d\u8bd5\u662f (Luong, Socher, & Manning 2013) \u5904\u7406\u66f4\u5927\u8bcd\u6c47\u91cf\u7684\u4e00\u79cd\u53ef\u80fd\u65b9\u6cd5\u2014\u2014\u5927\u591a\u6570\u770b\u4e0d\u89c1\u7684\u5355\u8bcd\u662f\u65b0\u7684\u5f62\u6001(\u6216\u6570\u5b57) Morphology \u4e00\u4e2a\u7b80\u5355\u7684\u66ff\u4ee3\u65b9\u6cd5\u662f\u4f7f\u7528\u5b57\u7b26 n-grams Wickelphones (Rumelhart& McClelland 1986) Microsoft\u2019s DSSM (Huang, He, Gao, Deng, Acero, & Hect2013) \u4f7f\u7528\u5377\u79ef\u5c42\u7684\u76f8\u5173\u60f3\u6cd5 \u80fd\u66f4\u5bb9\u6613\u5730\u53d1\u6325\u8bcd\u7d20\u7684\u8bb8\u591a\u4f18\u70b9\u5417\uff1f Words in writing systems \u4e66\u5199\u7cfb\u7edf\u5728\u8868\u8fbe\u5355\u8bcd\u7684\u65b9\u5f0f\u4e0a\u5404\u4e0d\u76f8\u540c\uff0c\u4e5f\u4e0d\u76f8\u540c \u6ca1\u6709\u5206\u8bcd\uff08\u6ca1\u6709\u5728\u5355\u8bcd\u95f4\u653e\u7f6e\u7a7a\u683c\uff09 \u7f8e\u56fd\u5173\u5c9b\u56fd\u9645\u673a\u573a\u53ca\u5176\u529e\u516c\u5ba4\u5747\u63a5\u83b7 \u5927\u90e8\u5206\u7684\u5355\u8bcd\u90fd\u662f\u5206\u5f00\u7684\uff1a\u7531\u5355\u8bcd\u7ec4\u6210\u4e86\u53e5\u5b50 \u9644\u7740\u8bcd clitics \u5206\u5f00\u7684 \u8fde\u7eed\u7684 - \u590d\u5408\u540d\u8bcd - \u5206\u5f00\u7684 life insurance company employee - \u8fde\u7eed\u7684 Lebensversicherungsgesellschaftsangestellter Models below the word level \u9700\u8981\u5904\u7406\u6570\u91cf\u5f88\u5927\u7684\u5f00\u653e\u8bcd\u6c47\uff1a\u5de8\u5927\u7684\u3001\u65e0\u9650\u7684\u5355\u8bcd\u7a7a\u95f4 \u4e30\u5bcc\u7684\u5f62\u6001 \u97f3\u8bd1\uff08\u7279\u522b\u662f\u540d\u5b57\uff0c\u5728\u7ffb\u8bd1\u4e2d\u57fa\u672c\u4e0a\u662f\u97f3\u8bd1\uff09 \u975e\u6b63\u5f0f\u7684\u62fc\u5199 Character-Level Models \u8bcd\u5d4c\u5165\u53ef\u4ee5\u7531\u5b57\u7b26\u5d4c\u5165\u7ec4\u6210 \u4e3a\u672a\u77e5\u5355\u8bcd\u751f\u6210\u5d4c\u5165 \u76f8\u4f3c\u7684\u62fc\u5199\u5171\u4eab\u76f8\u4f3c\u7684\u5d4c\u5165 \u89e3\u51b3OOV\u95ee\u9898 \u8fde\u7eed\u8bed\u8a00\u53ef\u4ee5\u4f5c\u4e3a\u5b57\u7b26\u5904\u7406\uff1a\u5373\u6240\u6709\u7684\u8bed\u8a00\u5904\u7406\u5747\u5efa\u7acb\u5728\u5b57\u7b26\u5e8f\u5217\u4e0a\uff0c\u4e0d\u8003\u8651 word-level \u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u88ab\u8bc1\u660e\u662f\u975e\u5e38\u6210\u529f\u7684\uff01 \u6709\u70b9\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\u2014\u2014\u4f20\u7edf\u4e0a\uff0c\u97f3\u7d20/\u5b57\u6bcd\u4e0d\u662f\u4e00\u4e2a\u8bed\u4e49\u5355\u5143\u2014\u2014\u4f46DL\u6a21\u578b\u7ec4\u6210\u4e86\u7ec4 \u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u53ef\u4ee5\u5b58\u50a8\u548c\u6784\u5efa\u6765\u81ea\u4e8e\u591a\u4e2a\u5b57\u6bcd\u7ec4\u7684\u542b\u4e49\u8868\u793a\uff0c\u4ece\u800c\u6a21\u62df\u8bed\u7d20\u548c\u66f4\u5927\u5355\u4f4d\u7684\u610f\u4e49\uff0c\u4ece\u800c\u6c47\u603b\u5f62\u6210\u8bed\u4e49 Below the word: Writing systems \u5927\u591a\u6570\u6df1\u5ea6\u5b66\u4e60NLP\u7684\u5de5\u4f5c\u90fd\u662f\u4ece\u8bed\u8a00\u7684\u4e66\u9762\u5f62\u5f0f\u5f00\u59cb\u7684\u2014\u2014\u8fd9\u662f\u4e00\u79cd\u5bb9\u6613\u5904\u7406\u7684\u3001\u73b0\u6210\u7684\u6570\u636e \u4f46\u662f\u4eba\u7c7b\u8bed\u8a00\u4e66\u5199\u7cfb\u7edf\u4e0d\u662f\u4e00\u56de\u4e8b\uff01\u5404\u79cd\u8bed\u8a00\u7684\u5b57\u7b26\u662f\u4e0d\u540c\u7684\uff01","title":"1. Human language sounds: Phonetics and phonology"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#2-purely-character-level-models","text":"\u4e0a\u8282\u8bfe\u6211\u4eec\u770b\u5230\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u7eaf\u5b57\u7b26\u7ea7\u6a21\u578b\u7684\u4f8b\u5b50\u7528\u4e8e\u53e5\u5b50\u5206\u7c7b \u975e\u5e38\u6df1\u7684\u5377\u79ef\u7f51\u7edc\u7528\u4e8e\u6587\u672c\u5206\u7c7b Conneau, Schwenk, Lecun, Barrault.EACL 2017 \u5f3a\u5927\u7684\u7ed3\u679c\u901a\u8fc7\u6df1\u5ea6\u5377\u79ef\u5806\u53e0 Purely character-level NMT models \u4ee5\u5b57\u7b26\u4f5c\u4e3a\u8f93\u5165\u548c\u8f93\u51fa\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf \u6700\u521d\uff0c\u6548\u679c\u4e0d\u4ee4\u4eba\u6ee1\u610f (Vilaret al., 2007; Neubiget al., 2013) \u53ea\u6709decoder\uff08\u6210\u529f\u7684\uff09 (JunyoungChung, KyunghyunCho, YoshuaBengio. arXiv 2016). \u7136\u540e\u6709\u524d\u666f\u7684\u7ed3\u679c (Wang Ling, Isabel Trancoso, Chris Dyer, Alan Black, arXiv 2015) (Thang Luong, Christopher Manning, ACL 2016) (Marta R. Costa-Juss\u00e0, Jos\u00e9 A. R. Fonollosa, ACL 2016) English-Czech WMT 2015 Results Luong\u548cManning\u6d4b\u8bd5\u4e86\u4e00\u4e2a\u7eaf\u5b57\u7b26\u7ea7seq2seq (LSTM) NMT\u7cfb\u7edf\u4f5c\u4e3a\u57fa\u7ebf \u5b83\u5728\u5355\u8bcd\u7ea7\u57fa\u7ebf\u4e0a\u8fd0\u884c\u5f97\u5f88\u597d \u5bf9\u4e8e UNK\uff0c\u662f\u7528 single word translation \u6216\u8005 copy stuff from the source \u5b57\u7b26\u7ea7\u7684 model \u6548\u679c\u66f4\u597d\u4e86\uff0c\u4f46\u662f\u592a\u6162\u4e86 \u4f46\u662f\u5728\u8fd0\u884c\u65f6\u9700\u89813\u5468\u7684\u65f6\u95f4\u6765\u8bad\u7ec3\uff0c\u8fd0\u884c\u65f6\u6ca1\u90a3\u4e48\u5feb \u5982\u679c\u653e\u8fdb\u4e86 LSTM \u4e2d\uff0c\u5e8f\u5217\u957f\u5ea6\u53d8\u4e3a\u4ee5\u524d\u7684\u6570\u500d\uff08\u5927\u7ea6\u4e03\u500d\uff09 Fully Character-Level Neural Machine Translation without Explicit Segmentation Jason Lee, KyunghyunCho, Thomas Hoffmann. 2017. \u7f16\u7801\u5668\u5982\u4e0b\uff1b\u89e3\u7801\u5668\u662f\u4e00\u4e2a\u5b57\u7b26\u7ea7\u7684GRU Stronger character results with depth in LSTM seq2seq model Revisiting Character-Based Neural Machine Translation with Capacity and Compression. 2018. Cherry, Foster, Bapna, Firat, Macherey, Google AI \u5728\u6377\u514b\u8bed\u8fd9\u6837\u7684\u590d\u6742\u8bed\u8a00\u4e2d\uff0c\u5b57\u7b26\u7ea7\u6a21\u578b\u7684\u6548\u679c\u63d0\u5347\u8f83\u4e3a\u660e\u663e\uff0c\u4f46\u662f\u5728\u82f1\u8bed\u548c\u6cd5\u8bed\u7b49\u8bed\u8a00\u4e2d\u5219\u6536\u6548\u751a\u5fae\u3002 \u6a21\u578b\u8f83\u5c0f\u65f6\uff0cword-level \u66f4\u4f73\uff1b\u6a21\u578b\u8f83\u5927\u65f6\uff0ccharacter-level \u66f4\u4f73","title":"2. Purely character-level models"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#3-sub-word-models-two-trends","text":"\u4e0eword\u7ea7\u6a21\u578b\u76f8\u540c\u7684\u67b6\u6784 \u4f46\u662f\u4f7f\u7528\u66f4\u5c0f\u7684\u5355\u5143:\u201cword pieces\u201d [Sennrich, Haddow, Birch, ACL\u201916a], [Chung, Cho, Bengio, ACL\u201916]. \u6df7\u5408\u67b6\u6784 \u4e3b\u6a21\u578b\u4f7f\u7528\u5355\u8bcd\uff0c\u5176\u4ed6\u4f7f\u7528\u5b57\u7b26\u7ea7 [Costa-Juss\u00e0& Fonollosa, ACL\u201916], [Luong & Manning, ACL\u201916]. Byte Pair Encoding BPE \u5e76\u672a\u6df1\u5ea6\u5b66\u4e60\u7684\u6709\u5173\u7b97\u6cd5\uff0c\u4f46\u5df2\u6210\u4e3a\u6807\u51c6\u4e14\u6210\u529f\u8868\u793a pieces of words \u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u6709\u9650\u7684\u8bcd\u5178\u4e0e\u65e0\u9650\u4e14\u6709\u6548\u7684\u8bcd\u6c47\u8868\u3002 \u6700\u521d\u7684\u538b\u7f29\u7b97\u6cd5 \u6700\u9891\u7e41\u7684\u5b57\u8282 \\(\\to\\) \u4e00\u4e2a\u65b0\u7684\u5b57\u8282\u3002 \u7528\u5b57\u7b26ngram\u66ff\u6362\u5b57\u8282(\u5b9e\u9645\u4e0a\uff0c\u6709\u4e9b\u4eba\u5df2\u7ecf\u7528\u5b57\u8282\u505a\u4e86\u4e00\u4e9b\u6709\u8da3\u7684\u4e8b\u60c5) Rico Sennrich, Barry Haddow, and Alexandra Birch. Neural Machine Translation of Rare Words with SubwordUnits. ACL 2016. https://arxiv.org/abs/1508.07909 https://github.com/rsennrich/subword-nmt https://github.com/EdinburghNLP/nematus \u5206\u8bcd\u7b97\u6cd5 word segmentation \u867d\u7136\u505a\u5f97\u5f88\u7b80\u5355\uff0c\u6709\u70b9\u50cf\u662f\u81ea\u4e0b\u800c\u4e0a\u7684\u77ed\u5e8f\u5217\u805a\u7c7b \u5c06\u6570\u636e\u4e2d\u7684\u6240\u6709\u7684Unicode\u5b57\u7b26\u7ec4\u6210\u4e00\u4e2aunigram\u7684\u8bcd\u5178 \u6700\u5e38\u89c1\u7684 ngram pairs \u89c6\u4e3a \u4e00\u4e2a\u65b0\u7684 ngram \u6709\u4e00\u4e2a\u76ee\u6807\u8bcd\u6c47\u91cf\uff0c\u5f53\u4f60\u8fbe\u5230\u5b83\u7684\u65f6\u5019\u5c31\u505c\u6b62 \u505a\u786e\u5b9a\u6027\u7684\u6700\u957f\u5206\u8bcd\u5206\u5272 \u5206\u5272\u53ea\u5728\u67d0\u4e9b\u5148\u524d\u6807\u8bb0\u5668(\u901a\u5e38MT\u4f7f\u7528\u7684 Moses tokenizer )\u6807\u8bc6\u7684\u5355\u8bcd\u4e2d\u8fdb\u884c \u81ea\u52a8\u4e3a\u7cfb\u7edf\u6dfb\u52a0\u8bcd\u6c47 \u4e0d\u518d\u662f\u57fa\u4e8e\u4f20\u7edf\u65b9\u5f0f\u7684 strongly \u201cword\u201d 2016\u5e74WMT\u6392\u540d\u7b2c\u4e00\uff01\u4ecd\u7136\u5e7f\u6cdb\u5e94\u7528\u4e8e2018\u5e74WMT https://github.com/rsennrich/nematus Wordpiece/Sentencepiece model \u8c37\u6b4cNMT (GNMT) \u4f7f\u7528\u4e86\u5b83\u7684\u4e00\u4e2a\u53d8\u4f53 V1: wordpiece model V2: sentencepiece model \u4e0d\u4f7f\u7528\u5b57\u7b26\u7684 n-gram count\uff0c\u800c\u662f\u4f7f\u7528\u8d2a\u5fc3\u8fd1\u4f3c\u6765\u6700\u5927\u5316\u8bed\u8a00\u6a21\u578b\u7684\u5bf9\u6570\u4f3c\u7136\u51fd\u6570\u503c\uff0c\u9009\u62e9\u5bf9\u5e94\u7684pieces \u6dfb\u52a0\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u56f0\u60d1\u7684n-gram Wordpiece\u6a21\u578b\u6807\u8bb0\u5185\u90e8\u5355\u8bcd Sentencepiece\u6a21\u578b\u4f7f\u7528\u539f\u59cb\u6587\u672c \u7a7a\u683c\u88ab\u4fdd\u7559\u4e3a\u7279\u6b8a\u6807\u8bb0(_)\uff0c\u5e76\u6b63\u5e38\u5206\u7ec4 \u60a8\u53ef\u4ee5\u901a\u8fc7\u5c06\u7247\u6bb5\u8fde\u63a5\u8d77\u6765\u5e76\u5c06\u5b83\u4eec\u91cd\u65b0\u7f16\u7801\u5230\u7a7a\u683c\u4e2d\uff0c\u4ece\u800c\u5728\u672b\u5c3e\u5c06\u5185\u5bb9\u53cd\u8f6c https://github.com/google/sentencepiece https://arxiv.org/pdf/1804.10959.pdf BERT \u4f7f\u7528\u4e86 wordpiece \u6a21\u578b\u7684\u4e00\u4e2a\u53d8\u4f53 (\u76f8\u5bf9)\u5728\u8bcd\u6c47\u8868\u4e2d\u7684\u5e38\u7528\u8bcd at, fairfax, 1910s \u5176\u4ed6\u5355\u8bcd\u7531wordpieces\u7ec4\u6210 hypatia = h ##yp ##ati ##a \u5982\u679c\u4f60\u5728\u4e00\u4e2a\u57fa\u4e8e\u5355\u8bcd\u7684\u6a21\u578b\u4e2d\u4f7f\u7528BERT\uff0c\u4f60\u5fc5\u987b\u5904\u7406\u8fd9\u4e2a","title":"3. Sub-word models: two trends"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#4-character-level-to-build-word-level","text":"Learning Character-level Representations for Part-ofSpeech Tagging (Dos Santos and Zadrozny2014) \u5bf9\u5b57\u7b26\u8fdb\u884c\u5377\u79ef\u4ee5\u751f\u6210\u5355\u8bcd\u5d4c\u5165 \u4e3aPoS\u6807\u7b7e\u4f7f\u7528\u56fa\u5b9a\u7a97\u53e3\u7684\u8bcd\u5d4c\u5165 Character-based LSTM to build word rep\u2019ns Bi-LSTM\u6784\u5efa\u5355\u8bcd\u8868\u793a Character-based LSTM Character-Aware Neural Language Models Yoon Kim, Yacine Jernite, David Sontag, Alexander M. Rush. 2015 \u4e00\u4e2a\u66f4\u590d\u6742/\u7cbe\u5bc6\u7684\u65b9\u6cd5 \u52a8\u673a \u6d3e\u751f\u4e00\u4e2a\u5f3a\u5927\u7684\u3001\u5065\u58ee\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5728\u591a\u79cd\u8bed\u8a00\u4e2d\u90fd\u6709\u6548 \u7f16\u7801\u5b50\u5355\u8bcd\u5173\u8054\u6027\uff1aeventful, eventfully, uneventful\u2026 \u89e3\u51b3\u73b0\u6709\u6a21\u578b\u7684\u7f55\u89c1\u5b57\u95ee\u9898 \u7528\u66f4\u5c11\u7684\u53c2\u6570\u83b7\u5f97\u53ef\u6bd4\u8f83\u7684\u8868\u8fbe\u6027 Highway Network (Srivastavaet al. 2015) \u8bed\u6cd5\u4ea4\u4e92\u6a21\u578b \u5728\u4f20\u9012\u539f\u59cb\u4fe1\u606f\u7684\u540c\u65f6\u5e94\u7528\u8f6c\u6362 \u529f\u80fd\u7c7b\u4f3c\u4e8eLSTM\u5185\u5b58\u5355\u5143 Long Short-Term Memory Network \u5206\u7ea7Softmaxto\u5904\u7406\u5927\u7684\u8f93\u51fa\u8bcd\u6c47\u8868 \u4f7f\u7528 truncated backpropthrough time \u8fdb\u884c\u8bad\u7ec3 Quantitative Results Take-aways \u672c\u6587\u5bf9\u4f7f\u7528\u8bcd\u5d4c\u5165\u4f5c\u4e3a\u795e\u7ecf\u8bed\u8a00\u5efa\u6a21\u8f93\u5165\u7684\u5fc5\u8981\u6027\u63d0\u51fa\u4e86\u8d28\u7591 \u5b57\u7b26\u7ea7\u7684 CNNs + Highway Network \u53ef\u4ee5\u63d0\u53d6\u4e30\u5bcc\u7684\u8bed\u4e49\u548c\u7ed3\u6784\u4fe1\u606f \u5173\u952e\u601d\u60f3\uff1a\u60a8\u53ef\u4ee5\u6784\u5efa\u201cbuilding blocks\u201d\u6765\u83b7\u5f97\u7ec6\u81f4\u5165\u5fae\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u6a21\u578b\uff01 Hybrid NMT Abest-of-both-worlds architecture \u7ffb\u8bd1\u5927\u90e8\u5206\u662f\u5355\u8bcd\u7ea7\u522b\u7684 \u53ea\u5728\u9700\u8981\u7684\u65f6\u5019\u8fdb\u5165\u5b57\u7b26\u7ea7\u522b \u4f7f\u7528\u4e00\u4e2a\u590d\u5236\u673a\u5236\uff0c\u8bd5\u56fe\u586b\u5145\u7f55\u89c1\u7684\u5355\u8bcd\uff0c\u4ea7\u751f\u4e86\u8d85\u8fc7 2 BLEU\u7684\u6539\u8fdb 2-stage Decoding \u5355\u8bcd\u7ea7\u522b\u7684\u675f\u641c\u7d22 \u5b57\u7b26\u7ea7\u522b\u7684\u675f\u641c\u7d22\uff08\u9047\u5230 \\(\\text{<UNK>}\\) \uff09\u65f6 \u6df7\u5408\u6a21\u578b\u4e0e\u5b57\u7b26\u7ea7\u6a21\u578b\u76f8\u6bd4 \u7eaf\u7cb9\u7684\u5b57\u7b26\u7ea7\u6a21\u578b\u80fd\u591f\u975e\u5e38\u6709\u6548\u5730\u662f\u7528\u5b57\u7b26\u5e8f\u5217\u4f5c\u4e3a\u6761\u4ef6\u4e0a\u4e0b\u6587 \u6df7\u5408\u6a21\u578b\u867d\u7136\u63d0\u4f9b\u4e86\u5b57\u7b26\u7ea7\u7684\u9690\u5c42\u8868\u793a\uff0c\u4f46\u5e76\u6ca1\u6709\u83b7\u5f97\u6bd4\u5355\u8bcd\u7ea7\u522b\u66f4\u4f4e\u7684\u8868\u793a English-Czech Results Sample English-Czech translations","title":"4. Character-level to build word-level"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#5-chars-for-word-embeddings","text":"\u4e00\u79cd\u7528\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u5355\u8bcd\u5f62\u6001\u5b66\u7684\u8054\u5408\u6a21\u578b(Cao and Rei 2016) \u4e0ew2v\u76ee\u6807\u76f8\u540c\uff0c\u4f46\u4f7f\u7528\u5b57\u7b26 \u53cc\u5411LSTM\u8ba1\u7b97\u5355\u8bcd\u8868\u793a \u6a21\u578b\u8bd5\u56fe\u6355\u83b7\u5f62\u6001\u5b66 \u6a21\u578b\u53ef\u4ee5\u63a8\u65ad\u5355\u8bcd\u7684\u8bcd\u6839 FastText embeddings \u7528\u5b50\u5355\u8bcd\u4fe1\u606f\u4e30\u5bcc\u5355\u8bcd\u5411\u91cf Bojanowski, Grave, Joulinand Mikolov. FAIR. 2016. https://arxiv.org/pdf/1607.04606.pdf \u2022 https://fasttext.cc \u76ee\u6807\uff1a\u4e0b\u4e00\u4ee3\u9ad8\u6548\u7684\u7c7b\u4f3c\u4e8eword2vecd\u7684\u5355\u8bcd\u8868\u793a\u5e93\uff0c\u4f46\u66f4\u9002\u5408\u4e8e\u5177\u6709\u5927\u91cf\u5f62\u6001\u5b66\u7684\u7f55\u89c1\u5355\u8bcd\u548c\u8bed\u8a00 \u5e26\u6709\u5b57\u7b26n-grams\u7684 w2v \u7684 skip-gram\u6a21\u578b\u7684\u6269\u5c55 \u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u7528\u8fb9\u754c\u7b26\u53f7\u548c\u6574\u8bcd\u6269\u5145\u7684\u5b57\u7b26n-grams \\(where =<wh,whe,her,ere,re>,<where>\\) \u6ce8\u610f $ , <her $ \u662f\u4e0d\u540c\u4e8e \\(her\\) \u7684 \u524d\u7f00\u3001\u540e\u7f00\u548c\u6574\u4e2a\u5355\u8bcd\u90fd\u662f\u7279\u6b8a\u7684 \u5c06word\u8868\u793a\u4e3a\u8fd9\u4e9b\u8868\u793a\u7684\u548c\u3002\u4e0a\u4e0b\u6587\u5355\u8bcd\u5f97\u5206\u4e3a \\(S(w, c)=\\sum g \\in G(w) \\mathbf{Z}_{g}^{\\mathrm{T}} \\mathbf{V}_{C}\\) \u7ec6\u8282\uff1a\u4e0e\u5176\u5171\u4eab\u6240\u6709n-grams\u7684\u8868\u793a\uff0c\u4e0d\u5982\u4f7f\u7528\u201chashing trick\u201d\u6765\u62e5\u6709\u56fa\u5b9a\u6570\u91cf\u7684\u5411\u91cf \u7f55\u89c1\u5355\u8bcd\u7684\u5dee\u5f02\u6536\u76ca","title":"5. Chars for word embeddings"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#suggested-readings","text":"Character Level NMT Byte Pair Encoding Minh-Thang Luong and Christopher Manning. Achieving Open Vocabulary Neural Machine Translation with Hybrid Word-Character Models FastText\u8bba\u6587","title":"Suggested Readings"},{"location":"CS224n-2019-12-Information%20from%20parts%20of%20words%20Subword%20Models/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/","text":"Lecture 13 Contextual Word Representations and Pretraining \u00b6 Lecture Plan Reflections on word representations Pre-ELMo and ELMO ULMfit and onward Transformer architectures (20 mins) BERT The remaining lectures Transformers BERT Question answering Text generation and summarization \u201cNew research, latest updates in the field\u201d \u201cSuccessful applications of NLP in industry today\u201d \u201cMore neural architectures that are used to solve NLP problem\u201d \u201cMore linguistics stuff and NLU!\u201d 1. Representations for a word \u00b6 \u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u5355\u8bcd\u7684\u8868\u793a \u6211\u4eec\u5f00\u59cb\u65f6\u5b66\u8fc7\u7684\u5355\u8bcd\u5411\u91cf Word2vec, GloVe, fastText Tips for unknown words with word vectors \u7b80\u5355\u4e14\u5e38\u89c1\u7684\u89e3\u51b3\u65b9\u6848 \u8bad\u7ec3\u65f6\uff1a\u8bcd\u6c47\u8868 Vocab \u4e3a \\(\\{\\text { words occurring, say, } \\geq 5 \\text { times }\\} \\cup\\{<\\text{UNK}>\\}\\) \u5c06\u6240\u6709\u7f55\u89c1\u7684\u8bcd\uff08\u6570\u636e\u96c6\u4e2d\u51fa\u73b0\u6b21\u6570\u5c0f\u4e8e 5\uff09\u90fd\u6620\u5c04\u4e3a \\(<\\text{UNK}>\\) \uff0c\u4e3a\u5176\u8bad\u7ec3\u4e00\u4e2a\u8bcd\u5411\u91cf \u8fd0\u884c\u65f6\uff1a\u4f7f\u7528 \\(<\\text{UNK}>\\) \u4ee3\u66ff\u8bcd\u6c47\u8868\u4e4b\u5916\u7684\u8bcd OOV \u95ee\u9898 \u6ca1\u6709\u529e\u6cd5\u533a\u5206\u4e0d\u540cUNK\u8bdd\u8bf4,\u65e0\u8bba\u662f\u8eab\u4efd\u8fd8\u662f\u610f\u4e49 \u89e3\u51b3\u65b9\u6848 \u4f7f\u7528\u5b57\u7b26\u7ea7\u6a21\u578b\u5b66\u4e60\u671f\u8bcd\u5411\u91cf \u7279\u522b\u662f\u5728 QA \u4e2d\uff0cmatch on word identity \u662f\u5f88\u91cd\u8981\u7684,\u5373\u4f7f\u8bcd\u5411\u91cf\u8bcd\u6c47\u8868\u4ee5\u5916\u7684\u5355\u8bcd Try these tips (from Dhingra, Liu, Salakhutdinov, Cohen 2017) \u5982\u679c\u6d4b\u8bd5\u65f6\u7684 \\(<\\text{UNK}>\\) \u5355\u8bcd\u4e0d\u5728\u4f60\u7684\u8bcd\u6c47\u8868\u4e2d\uff0c\u4f46\u662f\u51fa\u73b0\u5728\u4f60\u4f7f\u7528\u7684\u65e0\u76d1\u7763\u8bcd\u5d4c\u5165\u4e2d\uff0c\u6d4b\u8bd5\u65f6\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u5411\u91cf \u6b64\u5916\uff0c\u4f60\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u65b0\u7684\u5355\u8bcd\uff0c\u5e76\u4e3a\u5176\u5206\u914d\u4e00\u4e2a\u968f\u673a\u5411\u91cf\uff0c\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u4f60\u7684\u8bcd\u6c47\u8868\u3002 \u5e2e\u52a9\u5f88\u5927 \u6216\u8005 \u4e5f\u8bb8\u80fd\u5e2e\u70b9\u5fd9 \u4f60\u53ef\u4ee5\u8bd5\u8bd5\u53e6\u4e00\u4ef6\u4e8b \u5c06\u5b83\u4eec\u5206\u89e3\u4e3a\u8bcd\u7c7b\uff08\u5982\u672a\u77e5\u53f7\u7801\uff0c\u5927\u5199\u7b49\u7b49\uff09\uff0c\u6bcf\u79cd\u90fd\u5bf9\u5e94\u4e00\u4e2a \\(<\\text{UNK-class}>\\) Representations for a word \u5b58\u5728\u4e24\u4e2a\u5927\u95ee\u9898 \u5bf9\u4e8e\u4e00\u4e2a word type \u603b\u662f\u662f\u7528\u76f8\u540c\u7684\u8868\u793a\uff0c\u4e0d\u8003\u8651\u8fd9\u4e2a word token \u51fa\u73b0\u7684\u4e0a\u4e0b\u6587 \u6bd4\u5982 star \u8fd9\u4e2a\u5355\u8bcd\uff0c\u6709\u5929\u6587\u5b66\u4e0a\u7684\u542b\u4e49\u4ee5\u53ca\u5a31\u4e50\u5708\u4e2d\u7684\u542b\u4e49 \u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u975e\u5e38\u7ec6\u7c92\u5ea6\u7684\u8bcd\u4e49\u6d88\u6b67 \u6211\u4eec\u5bf9\u4e00\u4e2a\u8bcd\u53ea\u6709\u4e00\u79cd\u8868\u793a\uff0c\u4f46\u662f\u5355\u8bcd\u6709\u4e0d\u540c\u7684\u65b9\u9762\uff0c\u5305\u62ec\u8bed\u4e49\uff0c\u53e5\u6cd5\u884c\u4e3a\uff0c\u4ee5\u53ca\u8868\u8fbe / \u542b\u4e49 \u8868\u8fbe\uff1a\u540c\u6837\u7684\u610f\u601d\u53ef\u4ee5\u662f\u7528\u591a\u4e2a\u5355\u8bcd\u8868\u793a\uff0c\u4ed6\u4eec\u7684\u8bcd\u4e49\u662f\u4e00\u6837\u7684 Did we all along have a solution to this problem? \u5728\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7LSTM\u5c42(\u4e5f\u8bb8\u53ea\u5728\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3) \u90a3\u4e9bLSTM\u5c42\u88ab\u8bad\u7ec3\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u4f46\u8fd9\u4e9b\u8bed\u8a00\u6a21\u578b\u5728\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u751f\u6210\u7279\u5b9a\u4e8e\u4e0a\u4e0b\u6587\u7684\u8bcd\u8868\u793a 2. Peters et al. (2017): TagLM \u2013 \u201cPre-ELMo\u201d \u00b6 Semi-supervised sequence tagging with bidirectional language models \u60f3\u6cd5\uff1a\u60f3\u8981\u83b7\u5f97\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u7684\u610f\u601d\uff0c\u4f46\u6807\u51c6\u7684 RNN \u5b66\u4e60\u4efb\u52a1\u53ea\u5728 task-labeled \u7684\u5c0f\u6570\u636e\u4e0a\uff08\u5982 NER \uff09 \u4e3a\u4ec0\u4e48\u4e0d\u901a\u8fc7\u534a\u76d1\u7763\u5b66\u4e60\u7684\u65b9\u5f0f\u5728\u5927\u578b\u65e0\u6807\u7b7e\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3 NLM\uff0c\u800c\u4e0d\u53ea\u662f\u8bcd\u5411\u91cf Tag LM \u4e0e\u4e0a\u6587\u65e0\u5173\u7684\u5355\u8bcd\u5d4c\u5165 + RNN model \u5f97\u5230\u7684 hidden states \u4f5c\u4e3a\u7279\u5f81\u8f93\u5165 \\[ \\mathbf{h}_{k, l}=\\left[\\overrightarrow{\\mathbf{h}}_{k, 1} ; \\overleftarrow{\\mathbf{h}}_{k, 1} ; \\mathbf{h}_{k}^{L M}\\right] \\] Char CNN / RNN + Token Embedding \u4f5c\u4e3a bi-LSTM \u7684\u8f93\u5165 \u5f97\u5230\u7684 hidden states \u4e0e Pre-trained bi-LM\uff08\u51bb\u7ed3\u7684\uff09 \u7684 hidden states \u8fde\u63a5\u8d77\u6765\u8f93\u5165\u5230\u7b2c\u4e8c\u5c42\u7684 bi-LSTM \u4e2d Named Entity Recognition (NER) \u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684NLP\u5b50\u4efb\u52a1\uff1a\u67e5\u627e\u548c\u5206\u7c7b\u6587\u672c\u4e2d\u7684\u5b9e\u4f53\uff0c\u4f8b\u5982 CoNLL 2003 Named Entity Recognition (en news testb) Peters et al. (2017): TagLM \u2013 \u201cPre-ELMo\u201d \u8bed\u8a00\u6a21\u578b\u5728\u201cBillion word benchmark\u201d\u76848\u4ebf\u4e2a\u8bad\u7ec3\u5355\u8bcd\u4e0a\u8bad\u7ec3 \u8bed\u8a00\u6a21\u578b\u89c2\u5bdf\u7ed3\u679c \u5728\u76d1\u7763\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684LM\u5e76\u4e0d\u4f1a\u53d7\u76ca \u53cc\u5411LM\u4ec5\u6709\u52a9\u4e8e forward \u8fc7\u7a0b\uff0c\u63d0\u5347\u7ea60.2 \u5177\u6709\u5de8\u5927\u7684 LM \u8bbe\u8ba1\uff08\u56f0\u60d1\u5ea6 30\uff09 \u6bd4\u8f83\u5c0f\u7684\u6a21\u578b\uff08\u56f0\u60d1\u5ea6 48\uff09\u63d0\u5347\u7ea60.3 \u56f0\u60d1\u5ea6 \u4efb\u52a1\u7279\u5b9a\u7684BiLSTM\u89c2\u5bdf\u7ed3\u679c \u4ec5\u4f7f\u7528LM\u5d4c\u5165\u6765\u9884\u6d4b\u5e76\u4e0d\u662f\u5f88\u597d\uff1a88.17 F1 \u8fdc\u4f4e\u4e8e\u4ec5\u5728\u6807\u8bb0\u6570\u636e\u4e0a\u4f7f\u7528 BiLSTM \u6807\u8bb0\u5668 Also in the air: McCann et al. 2017: CoVe Learned in Translation: Contextualized Word Vectors \u4e5f\u6709\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u5e8f\u5217\u6a21\u578b\u4e3a\u5176\u4ed6NLP\u6a21\u578b\u63d0\u4f9b\u4e0a\u4e0b\u6587\u7684\u60f3\u6cd5 \u60f3\u6cd5\uff1a\u673a\u5668\u7ffb\u8bd1\u662f\u4e3a\u4e86\u4fdd\u5b58\u610f\u601d\uff0c\u6240\u4ee5\u8fd9\u4e5f\u8bb8\u662f\u4e2a\u597d\u76ee\u6807\uff1f \u4f7f\u7528seq2seq + attention NMT system\u4e2d\u7684Encoder\uff0c\u5373 2\u5c42 bi-LSTM \uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005 \u6240\u5f97\u5230\u7684 CoVe \u5411\u91cf\u5728\u5404\u79cd\u4efb\u52a1\u4e0a\u90fd\u4f18\u4e8e GloVe \u5411\u91cf \u4f46\u662f\uff0c\u7ed3\u679c\u5e76\u4e0d\u50cf\u5176\u4ed6\u5e7b\u706f\u7247\u4e2d\u63cf\u8ff0\u7684\u66f4\u7b80\u5355\u7684NLM\u57f9\u8bad\u90a3\u4e48\u597d\uff0c\u6240\u4ee5\u4f3c\u4e4e\u88ab\u653e\u5f03\u4e86 \u4e5f\u8bb8NMT\u53ea\u662f\u6bd4\u8bed\u8a00\u5efa\u6a21\u66f4\u96be\uff1f \u6216\u8bb8\u6709\u4e00\u5929\u8fd9\u4e2a\u60f3\u6cd5\u4f1a\u56de\u6765\uff1f Peters et al. (2018): ELMo: Embeddings from Language Models Deep contextualized word representations. NAACL 2018. word token vectors or contextual word vectors \u7684\u7206\u53d1\u7248\u672c \u4f7f\u7528\u957f\u4e0a\u4e0b\u6587\u800c\u4e0d\u662f\u4e0a\u4e0b\u6587\u7a97\u53e3\u5b66\u4e60 word token \u5411\u91cf(\u8fd9\u91cc\uff0c\u6574\u4e2a\u53e5\u5b50\u53ef\u80fd\u66f4\u957f) \u5b66\u4e60\u6df1\u5ea6Bi-NLM\uff0c\u5e76\u5728\u9884\u6d4b\u4e2d\u4f7f\u7528\u5b83\u7684\u6240\u6709\u5c42 \u8bad\u7ec3\u4e00\u4e2a\u53cc\u5411LM \u76ee\u6807\u662f performant \u4f46LM\u4e0d\u8981\u592a\u5927 \u4f7f\u75282\u4e2abiLSTM\u5c42 (\u4ec5)\u4f7f\u7528\u5b57\u7b26CNN\u6784\u5efa\u521d\u59cb\u5355\u8bcd\u8868\u793a 2048 \u4e2a char n-gram filters \u548c 2 \u4e2a highway layers\uff0c512 \u7ef4\u7684 projection 4096 dim hidden/cell LSTM\u72b6\u6001\uff0c\u4f7f\u7528 512 dim\u7684\u5bf9\u4e0b\u4e00\u4e2a\u8f93\u5165\u7684\u6295\u5f71 \u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5 \u7ed1\u5b9a token \u7684\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53c2\u6570(softmax)\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53c2\u6570\u7ed1\u5b9a\u5230\u6b63\u5411\u548c\u53cd\u5411LMs\u4e4b\u95f4 ELMo\u5b66\u4e60biLM\u8868\u793a\u7684\u7279\u5b9a\u4efb\u52a1\u7ec4\u5408 \u8fd9\u662f\u4e00\u4e2a\u521b\u65b0\uff0cTagLM \u4e2d\u4ec5\u4ec5\u4f7f\u7528\u5806\u53e0LSTM\u7684\u9876\u5c42\uff0cELMo \u8ba4\u4e3aBiLSTM\u6240\u6709\u5c42\u90fd\u662f\u6709\u7528\u7684 \\[ \\begin{aligned} R_{k} &=\\left\\{\\mathbf{x}_{k}^{L M}, \\overrightarrow{\\mathbf{h}}_{k, j}^{L M}, \\overleftarrow{\\mathbf{h}}_{k, j}^{L M} | j=1, \\ldots, L\\right\\} \\\\ &=\\left\\{\\mathbf{h}_{k, j}^{L M} | j=0, \\ldots, L\\right\\} \\end{aligned} \\\\ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o}_{k}^{t a s k}=E\\left(R_{k} ; \\Theta^{t a s k}\\right)=\\gamma^{t a s k} \\sum_{j=0}^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j}^{L M} \\] \\(\\gamma^{t a s k}\\) \u8861\u91cfELMo\u5bf9\u4efb\u52a1\u7684\u603b\u4f53\u6709\u7528\u6027\uff0c\u662f\u4e3a\u7279\u5b9a\u4efb\u52a1\u5b66\u4e60\u7684\u5168\u5c40\u6bd4\u4f8b\u56e0\u5b50 \\(\\mathbf{s}^{t a s k}\\) \u662f softmax \u5f52\u4e00\u5316\u7684\u6df7\u5408\u6a21\u578b\u6743\u91cd\uff0c\u662f BiLSTM \u7684\u52a0\u6743\u5e73\u5747\u503c\u7684\u6743\u91cd\uff0c\u5bf9\u4e0d\u540c\u7684\u4efb\u52a1\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e0d\u540c\u5c42\u7684 BiLSTM \u7684 Peters et al. (2018): ELMo: Use with a task \u9996\u5148\u8fd0\u884c biLM \u83b7\u53d6\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a \u7136\u540e\u8ba9(\u65e0\u8bba\u4ec0\u4e48)\u6700\u7ec8\u4efb\u52a1\u6a21\u578b\u4f7f\u7528\u5b83\u4eec \u51bb\u7ed3ELMo\u7684\u6743\u91cd\uff0c\u7528\u4e8e\u76d1\u7763\u6a21\u578b \u5c06ELMo\u6743\u91cd\u8fde\u63a5\u5230\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6a21\u578b\u4e2d \u7ec6\u8282\u53d6\u51b3\u4e8e\u4efb\u52a1 \u50cf TagLM \u4e00\u6837\u8fde\u63a5\u5230\u4e2d\u95f4\u5c42\u662f\u5178\u578b\u7684 \u53ef\u4ee5\u5728\u751f\u4ea7\u8f93\u51fa\u65f6\u63d0\u4f9b\u66f4\u591a\u7684\u8868\u793a\uff0c\u4f8b\u5982\u5728\u95ee\u7b54\u7cfb\u7edf\u4e2d ELMo used in a sequence tagger \\[ \\mathbf{h}_{k, l}=\\left[\\overrightarrow{\\mathbf{h}}_{k, 1} ; \\overleftarrow{\\mathbf{h}}_{k, 1} ; \\mathbf{h}_{k}^{L M}\\right] \\] ELMo results: Great for all tasks ELMo: Weighting of layers \u8fd9\u4e24\u4e2abiLSTM NLM\u5c42\u6709\u4e0d\u540c\u7684\u7528\u9014/\u542b\u4e49 \u4f4e\u5c42\u66f4\u9002\u5408\u4f4e\u7ea7\u8bed\u6cd5\uff0c\u4f8b\u5982 \u8bcd\u6027\u6807\u6ce8(part-of-speech tagging)\u3001\u53e5\u6cd5\u4f9d\u8d56(syntacticdependency)\u3001NER \u9ad8\u5c42\u66f4\u9002\u5408\u66f4\u9ad8\u7ea7\u522b\u7684\u8bed\u4e49 \u60c5\u7eea\u3001Semantic role labeling \u8bed\u4e49\u89d2\u8272\u6807\u8bb0 \u3001question answering\u3001SNLI \u8fd9\u4f3c\u4e4e\u5f88\u6709\u8da3\uff0c\u4f46\u5b83\u662f\u5982\u4f55\u901a\u8fc7\u4e24\u5c42\u4ee5\u4e0a\u7684\u7f51\u7edc\u6765\u5b9e\u73b0\u7684\u770b\u8d77\u6765\u66f4\u6709\u8da3 Also around: ULMfit Howard and Ruder (2018) Universal Language Model Fine-tuning for Text Classification. \u8f6c\u79fbNLM\u77e5\u8bc6\u7684\u4e00\u822c\u601d\u8def\u662f\u4e00\u6837\u7684 \u8fd9\u91cc\u5e94\u7528\u4e8e\u6587\u672c\u5206\u7c7b 3. ULMfit \u00b6 \u5728\u5927\u578b\u901a\u7528\u9886\u57df\u7684\u65e0\u76d1\u7763\u8bed\u6599\u5e93\u4e0a\u4f7f\u7528 biLM \u8bad\u7ec3 \u5728\u76ee\u6807\u4efb\u52a1\u6570\u636e\u4e0a\u8c03\u6574 LM \u5bf9\u7279\u5b9a\u4efb\u52a1\u5c06\u5206\u7c7b\u5668\u8fdb\u884c\u5fae\u8c03 ULMfit emphases \u4f7f\u7528\u5408\u7406\u5927\u5c0f\u7684\u201c1 GPU\u201d\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e0d\u662f\u771f\u7684\u5f88\u5927 \u5728LM\u8c03\u4f18\u4e2d\u8981\u6ce8\u610f\u5f88\u591a \u4e0d\u540c\u7684\u6bcf\u5c42\u5b66\u4e60\u901f\u5ea6 \u503e\u659c\u4e09\u89d2\u5f62\u5b66\u4e60\u7387(STLR)\u8ba1\u5212 \u5b66\u4e60\u5206\u7c7b\u5668\u65f6\u9010\u6b65\u5206\u5c42\u89e3\u51bb\u548cSTLR \u4f7f\u7528 \\(\\left[h_{T}, \\operatorname{maxpool}(\\mathbf{h}), \\operatorname{meanpool}(\\mathbf{h})\\right]\\) \u8fdb\u884c\u5206\u7c7b \u4f7f\u7528\u5927\u578b\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u79cd\u63d0\u9ad8\u6027\u80fd\u7684\u975e\u5e38\u6709\u6548\u7684\u65b9\u6cd5 ULMfit performance \u6587\u672c\u5206\u7c7b\u5668\u9519\u8bef\u7387 ULMfit transfer learning \u5982\u679c\u4f7f\u7528\u76d1\u7763\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\u6587\u672c\u5206\u7c7b\u5668\uff0c\u9700\u8981\u5927\u91cf\u7684\u6570\u636e\u624d\u80fd\u5b66\u4e60\u597d GPT-2 language model (cherry-picked) output \u6587\u672c\u751f\u6210\u7684\u6837\u4f8b Transformer \u4e0d\u4ec5\u72e0\u5f3a\u5927\uff0c\u800c\u4e14\u5141\u8bb8\u6269\u5c55\u5230\u66f4\u5927\u7684\u5c3a\u5bf8 4. The Motivation for Transformers \u00b6 \u6211\u4eec\u60f3\u8981\u5e76\u884c\u5316\uff0c\u4f46\u662fRNNs\u672c\u8d28\u4e0a\u662f\u987a\u5e8f\u7684 \u5c3d\u7ba1\u6709GRUs\u548cLSTMs, RNNs\u4ecd\u7136\u9700\u8981\u6ce8\u610f\u673a\u5236\u6765\u5904\u7406\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u2014\u2014\u5426\u5219\u72b6\u6001\u4e4b\u95f4\u7684 path length \u8def\u5f84\u957f\u5ea6 \u4f1a\u968f\u7740\u5e8f\u5217\u589e\u957f \u4f46\u5982\u679c\u6ce8\u610f\u529b\u8ba9\u6211\u4eec\u8fdb\u5165\u4efb\u4f55\u4e00\u4e2a\u72b6\u6001\u2026\u2026\u4e5f\u8bb8\u6211\u4eec\u53ef\u4ee5\u53ea\u7528\u6ce8\u610f\u529b\u800c\u4e0d\u9700\u8981RNN? Transformer Overview Attention is all you need. 2017. Aswani, Shazeer, Parmar, Uszkoreit, Jones, Gomez, Kaiser, Polosukhin Non-recurrent sequence-to-sequence encoder-decoder model \u4efb\u52a1\uff1a\u5e73\u884c\u8bed\u6599\u5e93\u7684\u673a\u5668\u7ffb\u8bd1 \u9884\u6d4b\u6bcf\u4e2a\u7ffb\u8bd1\u5355\u8bcd \u6700\u7ec8\u6210\u672c/\u8bef\u5dee\u51fd\u6570\u662f softmax \u5206\u7c7b\u5668\u57fa\u7840\u4e0a\u7684\u6807\u51c6\u4ea4\u53c9\u71b5\u8bef\u5dee Transformer Basics \u81ea\u5b66 \u4e3b\u8981\u63a8\u8350\u8d44\u6e90 http://nlp.seas.harvard.edu/2018/04/03/attention.html The Annotated Transformer by Sasha Rush An Jupyter Notebook using PyTorch that explains everything! \u73b0\u5728\uff1a\u6211\u4eec\u5b9a\u4e49 Transformer \u7f51\u7edc\u7684\u57fa\u672c\u6784\u5efa\u5757\uff1a\u7b2c\u4e00\uff0c\u65b0\u7684\u6ce8\u610f\u529b\u5c42 Dot-Product Attention (Extending our previous def.) \u8f93\u5165\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u8f93\u51fa\u800c\u8a00\u7684\u67e5\u8be2 q \u548c\u4e00\u7ec4\u952e-\u503c\u5bf9 k-v Query, keys, values, and output \u90fd\u662f\u5411\u91cf \u8f93\u51fa\u503c\u7684\u52a0\u6743\u548c \u6743\u91cd\u7684\u6bcf\u4e2a\u503c\u662f\u7531\u67e5\u8be2\u548c\u76f8\u5173\u952e\u7684\u5185\u79ef\u8ba1\u7b97\u7ed3\u679c Query \u548c keys \u6709\u76f8\u540c\u7ef4\u6570 \\(d_k\\) \uff0cvalue \u7684\u7ef4\u6570\u4e3a \\(d_v\\) \\[ A(q, K, V)=\\sum_{i} \\frac{e^{q \\cdot k_{i}}}{\\sum_{j} e^{q \\cdot k_{j}}} v_{i} \\] Dot-Product Attention \u2013 Matrix notation \u5f53\u6211\u4eec\u6709\u591a\u4e2a\u67e5\u8be2 q \u65f6\uff0c\u6211\u4eec\u5c06\u5b83\u4eec\u53e0\u52a0\u5728\u4e00\u4e2a\u77e9\u9635 Q \u4e2d \\[ A(Q, K, V)=\\operatorname{softmax}\\left(Q K^{T}\\right) V \\] Scaled Dot-Product Attention \u95ee\u9898\uff1a \\(d_k\\) \u53d8\u5927\u65f6\uff0c \\(q^Tk\\) \u7684\u65b9\u5dee\u589e\u5927 \\(\\to\\) \u4e00\u4e9b softmax \u4e2d\u7684\u503c\u7684\u65b9\u5dee\u5c06\u4f1a\u53d8\u5927 \\(\\to\\) softmax \u5f97\u5230\u7684\u662f\u5cf0\u503c \\(\\to\\) \u56e0\u6b64\u68af\u5ea6\u53d8\u5c0f\u4e86 \u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7query/key\u5411\u91cf\u7684\u957f\u5ea6\u8fdb\u884c\u7f29\u653e \\[ A(Q, K, V)=\\operatorname{softmax}\\left(\\frac{Q K^{T}}{\\sqrt{d_{k}}}\\right) V \\] Self-attention in the encoder \u8f93\u5165\u5355\u8bcd\u5411\u91cf\u662fqueries, keys and values \u6362\u53e5\u8bdd\u8bf4\uff1a\u8fd9\u4e2a\u8bcd\u5411\u91cf\u81ea\u5df1\u9009\u62e9\u5f7c\u6b64 \u8bcd\u5411\u91cf\u5806\u6808= Q = K = V \u6211\u4eec\u4f1a\u901a\u8fc7\u89e3\u7801\u5668\u660e\u767d\u4e3a\u4ec0\u4e48\u6211\u4eec\u5728\u5b9a\u4e49\u4e2d\u5c06\u4ed6\u4eec\u5206\u5f00 Multi-head attention \u7b80\u5355self-attention\u7684\u95ee\u9898 \u5355\u8bcd\u53ea\u6709\u4e00\u79cd\u76f8\u4e92\u4ea4\u4e92\u7684\u65b9\u5f0f \u89e3\u51b3\u65b9\u6848\uff1a\u591a\u5934\u6ce8\u610f\u529b \u9996\u5148\u901a\u8fc7\u77e9\u9635 W \u5c06 Q, K, V \u6620\u5c04\u5230 h = 8 \u7684\u8bb8\u591a\u4f4e\u7ef4\u7a7a\u95f4 \u7136\u540e\u5e94\u7528\u6ce8\u610f\u529b\uff0c\u7136\u540e\u8fde\u63a5\u8f93\u51fa\uff0c\u901a\u8fc7\u7ebf\u6027\u5c42 \\[ \\begin{array}{c}{\\text {MultiHead}(\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\text {Concat(head}_{1}, \\ldots, \\text { head }_{h} )} \\\\ {\\text {where head}_{i}=\\text {Attention}\\left(Q W_{i}^{Q}, K W_{i}^{K}, V W_{i}^{V}\\right)}\\end{array} \\] Complete transformer block \u6bcf\u4e2a block \u90fd\u6709\u4e24\u4e2a\u201c\u5b50\u5c42\u201d \u591a\u5934 attention \u4e24\u5c42\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc\uff0c\u4f7f\u7528 ReLU \u8fd9\u4e24\u4e2a\u5b50\u5c42\u90fd\uff1a \u6b8b\u5dee\u8fde\u63a5\u4ee5\u53ca\u5c42\u5f52\u4e00\u5316 LayerNorm(x+Sublayer(x)) \u5c42\u5f52\u4e00\u5316\u5c06\u8f93\u5165\u8f6c\u5316\u4e3a\u5747\u503c\u662f 0\uff0c\u65b9\u5dee\u662f 1 \uff0c\u6bcf\u4e00\u5c42\u548c\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u70b9\uff08\u5e76\u4e14\u6dfb\u52a0\u4e86\u4e24\u4e2a\u53c2\u6570\uff09 \\[ \\mu^{l}=\\frac{1}{H} \\sum_{i=1}^{H} a_{i}^{l} \\quad \\sigma^{l}=\\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}\\left(a_{i}^{l}-\\mu^{l}\\right)^{2}} \\quad h_{i}=f\\left(\\frac{g_{i}}{\\sigma_{i}}\\left(a_{i}-\\mu_{i}\\right)+b_{i}\\right) \\] Layer Normalization by Ba, Kiros and Hinton Encoder Input \u5b9e\u9645\u7684\u8bcd\u8868\u793a\u662f byte-pair \u7f16\u7801 \u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e2a positional encoding \u4f4d\u7f6e\u7f16\u7801\uff0c\u76f8\u540c\u7684\u8bcd\u8bed\u5728\u4e0d\u540c\u7684\u4f4d\u7f6e\u6709\u4e0d\u540c\u7684\u6574\u4f53\u8868\u5f81 \\[ \\begin{equation} \\begin{cases} PE(pos, 2i)=\\sin \\left(pos / 10000^{2 i / d_{model}}\\right) \\\\ PE(\\text {pos}, 2 i+1)=\\cos \\left(pos / 10000^{2 i / d_{model}}\\right) \\end{cases} \\end{equation} \\] Complete Encoder encoder \u4e2d\uff0c\u6bcf\u4e2a block \u90fd\u662f\u6765\u81ea\u524d\u4e00\u5c42\u7684 Q, K, V Blocks \u88ab\u91cd\u590d 6 \u6b21\uff08\u5782\u76f4\u65b9\u5411\uff09 \u5728\u6bcf\u4e2a\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u591a\u5934\u6ce8\u610f\u529b\u770b\u5230\u53e5\u5b50\u4e2d\u7684\u5404\u4e2a\u5730\u65b9\uff0c\u7d2f\u79ef\u4fe1\u606f\u5e76\u5c06\u5176\u63a8\u9001\u5230\u4e0b\u4e00\u5c42\u3002\u5728\u4efb\u4e00\u65b9\u5411\u4e0a\u7684\u5e8f\u5217\u9010\u6b65\u63a8\u9001\u4fe1\u606f\u6765\u8ba1\u7b97\u611f\u5174\u8da3\u7684\u503c \u975e\u5e38\u5584\u4e8e\u5b66\u4e60\u8bed\u8a00\u7ed3\u6784 Attention visualization in layer 5 \u8bcd\u8bed\u5f00\u59cb\u4ee5\u5408\u7406\u7684\u65b9\u5f0f\u5173\u6ce8\u5176\u4ed6\u8bcd\u8bed \u4e0d\u540c\u7684\u989c\u8272\u5bf9\u5e94\u4e0d\u540c\u7684\u6ce8\u610f\u529b\u5934 Attention visualization: Implicit anaphora resolution \u5bf9\u4e8e\u4ee3\u8bcd\uff0c\u6ce8\u610f\u529b\u5934\u5b66\u4f1a\u4e86\u5982\u4f55\u627e\u5230\u5176\u6307\u4ee3\u7269 \u5728\u7b2c\u4e94\u5c42\u4e2d\uff0c\u4ece head 5 \u548c 6 \u7684\u5355\u8bcd\u201cits\u201d\u4e2d\u5206\u79bb\u51fa\u6765\u7684\u6ce8\u610f\u529b\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u8bcd\u7684\u6ce8\u610f\u529b\u662f\u975e\u5e38\u9c9c\u660e\u7684\u3002 Transformer Decoder decoder \u4e2d\u6709\u4e24\u4e2a\u7a0d\u52a0\u6539\u53d8\u7684\u5b50\u5c42 \u5bf9\u4e4b\u524d\u751f\u6210\u7684\u8f93\u51fa\u8fdb\u884c Masked decoder self-attention Encoder-Decoder Attention\uff0cqueries \u6765\u81ea\u4e8e\u524d\u4e00\u4e2a decoder \u5c42\uff0ckeys \u548c values \u6765\u81ea\u4e8e encoder \u7684\u8f93\u51fa Blocks \u540c\u6837\u91cd\u590d 6 \u6b21 Tips and tricks of the Transformer \u7ec6\u8282(\u8bba\u6587/\u8bb2\u5ea7) Byte-pair encodings Checkpoint averaging Adam \u4f18\u5316\u5668\u63a7\u5236\u5b66\u4e60\u901f\u7387\u53d8\u5316 \u8bad\u7ec3\u65f6\uff0c\u5728\u6bcf\u4e00\u5c42\u6dfb\u52a0\u6b8b\u5dee\u4e4b\u524d\u8fdb\u884c Dropout \u6807\u7b7e\u5e73\u6ed1 \u5e26\u6709\u675f\u641c\u7d22\u548c\u957f\u5ea6\u60e9\u7f5a\u7684 Auto-regressive decoding \u56e0\u4e3a transformer \u6b63\u5728\u8513\u5ef6\uff0c\u4f46\u4ed6\u4eec\u5f88\u96be\u4f18\u5316\u5e76\u4e14\u4e0d\u50cfLSTMs\u90a3\u6837\u5f00\u7bb1\u5373\u7528\uff0c\u4ed6\u4eec\u8fd8\u4e0d\u80fd\u5f88\u597d\u4e0e\u5176\u4ed6\u4efb\u52a1\u7684\u6784\u4ef6\u5171\u540c\u5de5\u4f5c Experimental Results for MT Experimental Results for Parsing 5. BERT: Devlin, Chang, Lee, Toutanova (2018) \u00b6 BERT (Bidirectional Encoder Representations from Transformers): Pre-training of Deep Bidirectional Transformers for Language Understanding \u95ee\u9898 \uff1a\u8bed\u8a00\u6a21\u578b\u53ea\u4f7f\u7528\u5de6\u4e0a\u4e0b\u6587\u6216\u53f3\u4e0a\u4e0b\u6587\uff0c\u4f46\u8bed\u8a00\u7406\u89e3\u662f\u53cc\u5411\u7684 \u4e3a\u4ec0\u4e48LMs\u662f\u5355\u5411\u7684\uff1f \u539f\u56e01\uff1a\u65b9\u5411\u6027\u5bf9\u4e8e\u751f\u6210\u683c\u5f0f\u826f\u597d\u7684\u6982\u7387\u5206\u5e03\u662f\u6709\u5fc5\u8981\u7684 \u6211\u4eec\u4e0d\u5728\u4e4e\u8fd9\u4e2a \u539f\u56e02\uff1a\u53cc\u5411\u7f16\u7801\u5668\u4e2d\u5355\u8bcd\u53ef\u4ee5\u201c\u770b\u5230\u81ea\u5df1\u201d \u89e3\u51b3\u65b9\u6848 \uff1amask out k % \u7684\u8f93\u5165\u5355\u8bcd\uff0c\u7136\u540e\u9884\u6d4b masked words \u4e0d\u518d\u662f\u4f20\u7edf\u7684\u8ba1\u7b97\u751f\u6210\u53e5\u5b50\u7684\u6982\u7387\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u76ee\u6807\u662f\u586b\u7a7a \u603b\u662f\u4f7f\u7528k = 15% Masking \u592a\u5c11\uff1a\u8bad\u7ec3\u592a\u6602\u8d35 Masking \u592a\u591a\uff1a\u6ca1\u6709\u8db3\u591f\u7684\u4e0a\u4e0b\u6587 GPT \u662f\u7ecf\u5178\u7684\u5355\u9879\u7684\u8bed\u8a00\u6a21\u578b ELMo \u662f\u53cc\u5411\u7684\uff0c\u4f46\u662f\u4e24\u4e2a\u6a21\u578b\u662f\u5b8c\u5168\u72ec\u7acb\u8bad\u7ec3\u7684\uff0c\u53ea\u662f\u5c06\u8f93\u51fa\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u6ca1\u6709\u4f7f\u7528\u53cc\u5411\u7684 context BERT \u4f7f\u7528 mask \u7684\u65b9\u5f0f\u8fdb\u884c\u6574\u4e2a\u4e0a\u4e0b\u6587\u7684\u9884\u6d4b\uff0c\u4f7f\u7528\u4e86\u53cc\u5411\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f BERT complication: Next sentence prediction \u5b66\u4e60\u53e5\u5b50\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5224\u65ad\u53e5\u5b50 B \u662f\u53e5\u5b50 A \u7684\u540e\u4e00\u4e2a\u53e5\u5b50\u8fd8\u662f\u4e00\u4e2a\u968f\u673a\u7684\u53e5\u5b50\u3002 BERT sentence pair encoding token embeddings \u662f word pieces \uff08 \\(\\text{paly}, \\text{##ing}\\) \uff09 \u4f7f\u7528\u5b66\u4e60\u597d\u7684\u5206\u6bb5\u5d4c\u5165\u8868\u793a\u6bcf\u4e2a\u53e5\u5b50 \u4f4d\u7f6e\u5d4c\u5165\u4e0e\u5176\u4ed6 Transformer \u4f53\u7cfb\u7ed3\u6784\u7c7b\u4f3c \u5c06\u4ee5\u4e0a\u4e09\u79cd embedding \u76f8\u52a0\uff0c\u4f5c\u4e3a\u6700\u7ec8\u8f93\u5165\u7684\u8868\u793a BERT model architecture and training Transformer encoder\uff08\u548c\u4e4b\u524d\u7684\u4e00\u6837\uff09 \u81ea\u6ce8\u610f\u529b \\(\\to\\) \u6ca1\u6709\u4f4d\u7f6e\u504f\u5dee \u957f\u8ddd\u79bb\u4e0a\u4e0b\u6587\u201c\u673a\u4f1a\u5747\u7b49\u201d \u6bcf\u5c42\u4e58\u6cd5 \u21d2 GPU / TPU\u4e0a\u9ad8\u6548 \u5728 Wikipedia + BookCorpus \u4e0a\u8bad\u7ec3 \u8bad\u7ec3\u4e24\u79cd\u6a21\u578b\u5c3a\u5bf8 BERT-Base: 12-layer, 768-hidden, 12-head BERT-Large: 24-layer, 1024-hidden, 16-head Trained on 4x4 or 8x8 TPU slice for 4 days BERT model fine tuning \u53ea\u5b66\u4e60\u4e00\u4e2a\u5efa\u7acb\u5728\u9876\u5c42\u7684\u5206\u7c7b\u5668\uff0c\u5fae\u8c03\u7684\u6bcf\u4e2a\u4efb\u52a1 BERT results on GLUE tasks GLUE benchmark \u662f\u7531\u81ea\u7136\u8bed\u8a00\u63a8\u7406\u4efb\u52a1,\u8fd8\u6709\u53e5\u5b50\u76f8\u4f3c\u5ea6\u548c\u60c5\u611f MultiNLI Premise: Hills and mountains are especially sanctified in Jainism. Hypothesis: Jainism hates nature. Label: Contradiction CoLa Sentence: The wagon rumbled down the road. Label: Acceptable Sentence: The car honked down the road. Label: Unacceptable BERT results on SQuAD 1.1 SQuAD 2.0 leaderboard, 2019-02-07 Effect of pre-training task Size matters \u4ece 119M \u5230 340M \u7684\u53c2\u6570\u91cf\u6539\u5584\u4e86\u5f88\u591a \u6539\u8fdb\u5c1a\u672a\u6e10\u8fdb Suggested Readings \u00b6 The Annotated Transformer \u4ee3\u7801\u89e3\u6790 https://github.com/rsennrich/subword-nmt https://github.com/opennmt/opennmt-py jalammar \u7684\u4e00\u7cfb\u5217\u53ef\u89c6\u5316\u7b80\u5355\u6559\u7a0b Visualizing A Neural Machine Translation Model (Mechanics of Seq2seq Models With Attention) The Illustrated Transformer Go Forth And Transform I hope you\u2019ve found this a useful place to start to break the ice with the major concepts of the Transformer. If you want to go deeper, I\u2019d suggest these next steps: Read the Attention Is All You Need paper, the Transformer blog post ( Transformer: A Novel Neural Network Architecture for Language Understanding ), and the Tensor2Tensor announcement . Watch \u0141ukasz Kaiser\u2019s talk walking through the model and its details Play with the Jupyter Notebook provided as part of the Tensor2Tensor repo Explore the Tensor2Tensor repo . Follow-up works Depthwise Separable Convolutions for Neural Machine Translation One Model To Learn Them All Discrete Autoencoders for Sequence Models Generating Wikipedia by Summarizing Long Sequences Image Transformer Training Tips for the Transformer Model Self-Attention with Relative Position Representations Fast Decoding in Sequence Models using Discrete Latent Variables Adafactor: Adaptive Learning Rates with Sublinear Memory Cost The Illustrated BERT, ELMo, and co. (How NLP Cracked Transfer Learning) Smith, Noah A. Contextual Word Representations: A Contextual Introduction . Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"13 Modeling contexts of use Contextual Representations and Pretraining"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#lecture-13-contextual-word-representations-and-pretraining","text":"Lecture Plan Reflections on word representations Pre-ELMo and ELMO ULMfit and onward Transformer architectures (20 mins) BERT The remaining lectures Transformers BERT Question answering Text generation and summarization \u201cNew research, latest updates in the field\u201d \u201cSuccessful applications of NLP in industry today\u201d \u201cMore neural architectures that are used to solve NLP problem\u201d \u201cMore linguistics stuff and NLU!\u201d","title":"Lecture 13 Contextual Word Representations and Pretraining"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#1-representations-for-a-word","text":"\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u5355\u8bcd\u7684\u8868\u793a \u6211\u4eec\u5f00\u59cb\u65f6\u5b66\u8fc7\u7684\u5355\u8bcd\u5411\u91cf Word2vec, GloVe, fastText Tips for unknown words with word vectors \u7b80\u5355\u4e14\u5e38\u89c1\u7684\u89e3\u51b3\u65b9\u6848 \u8bad\u7ec3\u65f6\uff1a\u8bcd\u6c47\u8868 Vocab \u4e3a \\(\\{\\text { words occurring, say, } \\geq 5 \\text { times }\\} \\cup\\{<\\text{UNK}>\\}\\) \u5c06\u6240\u6709\u7f55\u89c1\u7684\u8bcd\uff08\u6570\u636e\u96c6\u4e2d\u51fa\u73b0\u6b21\u6570\u5c0f\u4e8e 5\uff09\u90fd\u6620\u5c04\u4e3a \\(<\\text{UNK}>\\) \uff0c\u4e3a\u5176\u8bad\u7ec3\u4e00\u4e2a\u8bcd\u5411\u91cf \u8fd0\u884c\u65f6\uff1a\u4f7f\u7528 \\(<\\text{UNK}>\\) \u4ee3\u66ff\u8bcd\u6c47\u8868\u4e4b\u5916\u7684\u8bcd OOV \u95ee\u9898 \u6ca1\u6709\u529e\u6cd5\u533a\u5206\u4e0d\u540cUNK\u8bdd\u8bf4,\u65e0\u8bba\u662f\u8eab\u4efd\u8fd8\u662f\u610f\u4e49 \u89e3\u51b3\u65b9\u6848 \u4f7f\u7528\u5b57\u7b26\u7ea7\u6a21\u578b\u5b66\u4e60\u671f\u8bcd\u5411\u91cf \u7279\u522b\u662f\u5728 QA \u4e2d\uff0cmatch on word identity \u662f\u5f88\u91cd\u8981\u7684,\u5373\u4f7f\u8bcd\u5411\u91cf\u8bcd\u6c47\u8868\u4ee5\u5916\u7684\u5355\u8bcd Try these tips (from Dhingra, Liu, Salakhutdinov, Cohen 2017) \u5982\u679c\u6d4b\u8bd5\u65f6\u7684 \\(<\\text{UNK}>\\) \u5355\u8bcd\u4e0d\u5728\u4f60\u7684\u8bcd\u6c47\u8868\u4e2d\uff0c\u4f46\u662f\u51fa\u73b0\u5728\u4f60\u4f7f\u7528\u7684\u65e0\u76d1\u7763\u8bcd\u5d4c\u5165\u4e2d\uff0c\u6d4b\u8bd5\u65f6\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u5411\u91cf \u6b64\u5916\uff0c\u4f60\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u65b0\u7684\u5355\u8bcd\uff0c\u5e76\u4e3a\u5176\u5206\u914d\u4e00\u4e2a\u968f\u673a\u5411\u91cf\uff0c\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u4f60\u7684\u8bcd\u6c47\u8868\u3002 \u5e2e\u52a9\u5f88\u5927 \u6216\u8005 \u4e5f\u8bb8\u80fd\u5e2e\u70b9\u5fd9 \u4f60\u53ef\u4ee5\u8bd5\u8bd5\u53e6\u4e00\u4ef6\u4e8b \u5c06\u5b83\u4eec\u5206\u89e3\u4e3a\u8bcd\u7c7b\uff08\u5982\u672a\u77e5\u53f7\u7801\uff0c\u5927\u5199\u7b49\u7b49\uff09\uff0c\u6bcf\u79cd\u90fd\u5bf9\u5e94\u4e00\u4e2a \\(<\\text{UNK-class}>\\) Representations for a word \u5b58\u5728\u4e24\u4e2a\u5927\u95ee\u9898 \u5bf9\u4e8e\u4e00\u4e2a word type \u603b\u662f\u662f\u7528\u76f8\u540c\u7684\u8868\u793a\uff0c\u4e0d\u8003\u8651\u8fd9\u4e2a word token \u51fa\u73b0\u7684\u4e0a\u4e0b\u6587 \u6bd4\u5982 star \u8fd9\u4e2a\u5355\u8bcd\uff0c\u6709\u5929\u6587\u5b66\u4e0a\u7684\u542b\u4e49\u4ee5\u53ca\u5a31\u4e50\u5708\u4e2d\u7684\u542b\u4e49 \u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u975e\u5e38\u7ec6\u7c92\u5ea6\u7684\u8bcd\u4e49\u6d88\u6b67 \u6211\u4eec\u5bf9\u4e00\u4e2a\u8bcd\u53ea\u6709\u4e00\u79cd\u8868\u793a\uff0c\u4f46\u662f\u5355\u8bcd\u6709\u4e0d\u540c\u7684\u65b9\u9762\uff0c\u5305\u62ec\u8bed\u4e49\uff0c\u53e5\u6cd5\u884c\u4e3a\uff0c\u4ee5\u53ca\u8868\u8fbe / \u542b\u4e49 \u8868\u8fbe\uff1a\u540c\u6837\u7684\u610f\u601d\u53ef\u4ee5\u662f\u7528\u591a\u4e2a\u5355\u8bcd\u8868\u793a\uff0c\u4ed6\u4eec\u7684\u8bcd\u4e49\u662f\u4e00\u6837\u7684 Did we all along have a solution to this problem? \u5728\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7LSTM\u5c42(\u4e5f\u8bb8\u53ea\u5728\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3) \u90a3\u4e9bLSTM\u5c42\u88ab\u8bad\u7ec3\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u4f46\u8fd9\u4e9b\u8bed\u8a00\u6a21\u578b\u5728\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u751f\u6210\u7279\u5b9a\u4e8e\u4e0a\u4e0b\u6587\u7684\u8bcd\u8868\u793a","title":"1. Representations for a word"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#2-peters-et-al-2017-taglm-pre-elmo","text":"Semi-supervised sequence tagging with bidirectional language models \u60f3\u6cd5\uff1a\u60f3\u8981\u83b7\u5f97\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u7684\u610f\u601d\uff0c\u4f46\u6807\u51c6\u7684 RNN \u5b66\u4e60\u4efb\u52a1\u53ea\u5728 task-labeled \u7684\u5c0f\u6570\u636e\u4e0a\uff08\u5982 NER \uff09 \u4e3a\u4ec0\u4e48\u4e0d\u901a\u8fc7\u534a\u76d1\u7763\u5b66\u4e60\u7684\u65b9\u5f0f\u5728\u5927\u578b\u65e0\u6807\u7b7e\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3 NLM\uff0c\u800c\u4e0d\u53ea\u662f\u8bcd\u5411\u91cf Tag LM \u4e0e\u4e0a\u6587\u65e0\u5173\u7684\u5355\u8bcd\u5d4c\u5165 + RNN model \u5f97\u5230\u7684 hidden states \u4f5c\u4e3a\u7279\u5f81\u8f93\u5165 \\[ \\mathbf{h}_{k, l}=\\left[\\overrightarrow{\\mathbf{h}}_{k, 1} ; \\overleftarrow{\\mathbf{h}}_{k, 1} ; \\mathbf{h}_{k}^{L M}\\right] \\] Char CNN / RNN + Token Embedding \u4f5c\u4e3a bi-LSTM \u7684\u8f93\u5165 \u5f97\u5230\u7684 hidden states \u4e0e Pre-trained bi-LM\uff08\u51bb\u7ed3\u7684\uff09 \u7684 hidden states \u8fde\u63a5\u8d77\u6765\u8f93\u5165\u5230\u7b2c\u4e8c\u5c42\u7684 bi-LSTM \u4e2d Named Entity Recognition (NER) \u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684NLP\u5b50\u4efb\u52a1\uff1a\u67e5\u627e\u548c\u5206\u7c7b\u6587\u672c\u4e2d\u7684\u5b9e\u4f53\uff0c\u4f8b\u5982 CoNLL 2003 Named Entity Recognition (en news testb) Peters et al. (2017): TagLM \u2013 \u201cPre-ELMo\u201d \u8bed\u8a00\u6a21\u578b\u5728\u201cBillion word benchmark\u201d\u76848\u4ebf\u4e2a\u8bad\u7ec3\u5355\u8bcd\u4e0a\u8bad\u7ec3 \u8bed\u8a00\u6a21\u578b\u89c2\u5bdf\u7ed3\u679c \u5728\u76d1\u7763\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684LM\u5e76\u4e0d\u4f1a\u53d7\u76ca \u53cc\u5411LM\u4ec5\u6709\u52a9\u4e8e forward \u8fc7\u7a0b\uff0c\u63d0\u5347\u7ea60.2 \u5177\u6709\u5de8\u5927\u7684 LM \u8bbe\u8ba1\uff08\u56f0\u60d1\u5ea6 30\uff09 \u6bd4\u8f83\u5c0f\u7684\u6a21\u578b\uff08\u56f0\u60d1\u5ea6 48\uff09\u63d0\u5347\u7ea60.3 \u56f0\u60d1\u5ea6 \u4efb\u52a1\u7279\u5b9a\u7684BiLSTM\u89c2\u5bdf\u7ed3\u679c \u4ec5\u4f7f\u7528LM\u5d4c\u5165\u6765\u9884\u6d4b\u5e76\u4e0d\u662f\u5f88\u597d\uff1a88.17 F1 \u8fdc\u4f4e\u4e8e\u4ec5\u5728\u6807\u8bb0\u6570\u636e\u4e0a\u4f7f\u7528 BiLSTM \u6807\u8bb0\u5668 Also in the air: McCann et al. 2017: CoVe Learned in Translation: Contextualized Word Vectors \u4e5f\u6709\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u5e8f\u5217\u6a21\u578b\u4e3a\u5176\u4ed6NLP\u6a21\u578b\u63d0\u4f9b\u4e0a\u4e0b\u6587\u7684\u60f3\u6cd5 \u60f3\u6cd5\uff1a\u673a\u5668\u7ffb\u8bd1\u662f\u4e3a\u4e86\u4fdd\u5b58\u610f\u601d\uff0c\u6240\u4ee5\u8fd9\u4e5f\u8bb8\u662f\u4e2a\u597d\u76ee\u6807\uff1f \u4f7f\u7528seq2seq + attention NMT system\u4e2d\u7684Encoder\uff0c\u5373 2\u5c42 bi-LSTM \uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005 \u6240\u5f97\u5230\u7684 CoVe \u5411\u91cf\u5728\u5404\u79cd\u4efb\u52a1\u4e0a\u90fd\u4f18\u4e8e GloVe \u5411\u91cf \u4f46\u662f\uff0c\u7ed3\u679c\u5e76\u4e0d\u50cf\u5176\u4ed6\u5e7b\u706f\u7247\u4e2d\u63cf\u8ff0\u7684\u66f4\u7b80\u5355\u7684NLM\u57f9\u8bad\u90a3\u4e48\u597d\uff0c\u6240\u4ee5\u4f3c\u4e4e\u88ab\u653e\u5f03\u4e86 \u4e5f\u8bb8NMT\u53ea\u662f\u6bd4\u8bed\u8a00\u5efa\u6a21\u66f4\u96be\uff1f \u6216\u8bb8\u6709\u4e00\u5929\u8fd9\u4e2a\u60f3\u6cd5\u4f1a\u56de\u6765\uff1f Peters et al. (2018): ELMo: Embeddings from Language Models Deep contextualized word representations. NAACL 2018. word token vectors or contextual word vectors \u7684\u7206\u53d1\u7248\u672c \u4f7f\u7528\u957f\u4e0a\u4e0b\u6587\u800c\u4e0d\u662f\u4e0a\u4e0b\u6587\u7a97\u53e3\u5b66\u4e60 word token \u5411\u91cf(\u8fd9\u91cc\uff0c\u6574\u4e2a\u53e5\u5b50\u53ef\u80fd\u66f4\u957f) \u5b66\u4e60\u6df1\u5ea6Bi-NLM\uff0c\u5e76\u5728\u9884\u6d4b\u4e2d\u4f7f\u7528\u5b83\u7684\u6240\u6709\u5c42 \u8bad\u7ec3\u4e00\u4e2a\u53cc\u5411LM \u76ee\u6807\u662f performant \u4f46LM\u4e0d\u8981\u592a\u5927 \u4f7f\u75282\u4e2abiLSTM\u5c42 (\u4ec5)\u4f7f\u7528\u5b57\u7b26CNN\u6784\u5efa\u521d\u59cb\u5355\u8bcd\u8868\u793a 2048 \u4e2a char n-gram filters \u548c 2 \u4e2a highway layers\uff0c512 \u7ef4\u7684 projection 4096 dim hidden/cell LSTM\u72b6\u6001\uff0c\u4f7f\u7528 512 dim\u7684\u5bf9\u4e0b\u4e00\u4e2a\u8f93\u5165\u7684\u6295\u5f71 \u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5 \u7ed1\u5b9a token \u7684\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53c2\u6570(softmax)\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53c2\u6570\u7ed1\u5b9a\u5230\u6b63\u5411\u548c\u53cd\u5411LMs\u4e4b\u95f4 ELMo\u5b66\u4e60biLM\u8868\u793a\u7684\u7279\u5b9a\u4efb\u52a1\u7ec4\u5408 \u8fd9\u662f\u4e00\u4e2a\u521b\u65b0\uff0cTagLM \u4e2d\u4ec5\u4ec5\u4f7f\u7528\u5806\u53e0LSTM\u7684\u9876\u5c42\uff0cELMo \u8ba4\u4e3aBiLSTM\u6240\u6709\u5c42\u90fd\u662f\u6709\u7528\u7684 \\[ \\begin{aligned} R_{k} &=\\left\\{\\mathbf{x}_{k}^{L M}, \\overrightarrow{\\mathbf{h}}_{k, j}^{L M}, \\overleftarrow{\\mathbf{h}}_{k, j}^{L M} | j=1, \\ldots, L\\right\\} \\\\ &=\\left\\{\\mathbf{h}_{k, j}^{L M} | j=0, \\ldots, L\\right\\} \\end{aligned} \\\\ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o}_{k}^{t a s k}=E\\left(R_{k} ; \\Theta^{t a s k}\\right)=\\gamma^{t a s k} \\sum_{j=0}^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j}^{L M} \\] \\(\\gamma^{t a s k}\\) \u8861\u91cfELMo\u5bf9\u4efb\u52a1\u7684\u603b\u4f53\u6709\u7528\u6027\uff0c\u662f\u4e3a\u7279\u5b9a\u4efb\u52a1\u5b66\u4e60\u7684\u5168\u5c40\u6bd4\u4f8b\u56e0\u5b50 \\(\\mathbf{s}^{t a s k}\\) \u662f softmax \u5f52\u4e00\u5316\u7684\u6df7\u5408\u6a21\u578b\u6743\u91cd\uff0c\u662f BiLSTM \u7684\u52a0\u6743\u5e73\u5747\u503c\u7684\u6743\u91cd\uff0c\u5bf9\u4e0d\u540c\u7684\u4efb\u52a1\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e0d\u540c\u5c42\u7684 BiLSTM \u7684 Peters et al. (2018): ELMo: Use with a task \u9996\u5148\u8fd0\u884c biLM \u83b7\u53d6\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a \u7136\u540e\u8ba9(\u65e0\u8bba\u4ec0\u4e48)\u6700\u7ec8\u4efb\u52a1\u6a21\u578b\u4f7f\u7528\u5b83\u4eec \u51bb\u7ed3ELMo\u7684\u6743\u91cd\uff0c\u7528\u4e8e\u76d1\u7763\u6a21\u578b \u5c06ELMo\u6743\u91cd\u8fde\u63a5\u5230\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6a21\u578b\u4e2d \u7ec6\u8282\u53d6\u51b3\u4e8e\u4efb\u52a1 \u50cf TagLM \u4e00\u6837\u8fde\u63a5\u5230\u4e2d\u95f4\u5c42\u662f\u5178\u578b\u7684 \u53ef\u4ee5\u5728\u751f\u4ea7\u8f93\u51fa\u65f6\u63d0\u4f9b\u66f4\u591a\u7684\u8868\u793a\uff0c\u4f8b\u5982\u5728\u95ee\u7b54\u7cfb\u7edf\u4e2d ELMo used in a sequence tagger \\[ \\mathbf{h}_{k, l}=\\left[\\overrightarrow{\\mathbf{h}}_{k, 1} ; \\overleftarrow{\\mathbf{h}}_{k, 1} ; \\mathbf{h}_{k}^{L M}\\right] \\] ELMo results: Great for all tasks ELMo: Weighting of layers \u8fd9\u4e24\u4e2abiLSTM NLM\u5c42\u6709\u4e0d\u540c\u7684\u7528\u9014/\u542b\u4e49 \u4f4e\u5c42\u66f4\u9002\u5408\u4f4e\u7ea7\u8bed\u6cd5\uff0c\u4f8b\u5982 \u8bcd\u6027\u6807\u6ce8(part-of-speech tagging)\u3001\u53e5\u6cd5\u4f9d\u8d56(syntacticdependency)\u3001NER \u9ad8\u5c42\u66f4\u9002\u5408\u66f4\u9ad8\u7ea7\u522b\u7684\u8bed\u4e49 \u60c5\u7eea\u3001Semantic role labeling \u8bed\u4e49\u89d2\u8272\u6807\u8bb0 \u3001question answering\u3001SNLI \u8fd9\u4f3c\u4e4e\u5f88\u6709\u8da3\uff0c\u4f46\u5b83\u662f\u5982\u4f55\u901a\u8fc7\u4e24\u5c42\u4ee5\u4e0a\u7684\u7f51\u7edc\u6765\u5b9e\u73b0\u7684\u770b\u8d77\u6765\u66f4\u6709\u8da3 Also around: ULMfit Howard and Ruder (2018) Universal Language Model Fine-tuning for Text Classification. \u8f6c\u79fbNLM\u77e5\u8bc6\u7684\u4e00\u822c\u601d\u8def\u662f\u4e00\u6837\u7684 \u8fd9\u91cc\u5e94\u7528\u4e8e\u6587\u672c\u5206\u7c7b","title":"2. Peters et al. (2017): TagLM \u2013 \u201cPre-ELMo\u201d"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#3-ulmfit","text":"\u5728\u5927\u578b\u901a\u7528\u9886\u57df\u7684\u65e0\u76d1\u7763\u8bed\u6599\u5e93\u4e0a\u4f7f\u7528 biLM \u8bad\u7ec3 \u5728\u76ee\u6807\u4efb\u52a1\u6570\u636e\u4e0a\u8c03\u6574 LM \u5bf9\u7279\u5b9a\u4efb\u52a1\u5c06\u5206\u7c7b\u5668\u8fdb\u884c\u5fae\u8c03 ULMfit emphases \u4f7f\u7528\u5408\u7406\u5927\u5c0f\u7684\u201c1 GPU\u201d\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e0d\u662f\u771f\u7684\u5f88\u5927 \u5728LM\u8c03\u4f18\u4e2d\u8981\u6ce8\u610f\u5f88\u591a \u4e0d\u540c\u7684\u6bcf\u5c42\u5b66\u4e60\u901f\u5ea6 \u503e\u659c\u4e09\u89d2\u5f62\u5b66\u4e60\u7387(STLR)\u8ba1\u5212 \u5b66\u4e60\u5206\u7c7b\u5668\u65f6\u9010\u6b65\u5206\u5c42\u89e3\u51bb\u548cSTLR \u4f7f\u7528 \\(\\left[h_{T}, \\operatorname{maxpool}(\\mathbf{h}), \\operatorname{meanpool}(\\mathbf{h})\\right]\\) \u8fdb\u884c\u5206\u7c7b \u4f7f\u7528\u5927\u578b\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u79cd\u63d0\u9ad8\u6027\u80fd\u7684\u975e\u5e38\u6709\u6548\u7684\u65b9\u6cd5 ULMfit performance \u6587\u672c\u5206\u7c7b\u5668\u9519\u8bef\u7387 ULMfit transfer learning \u5982\u679c\u4f7f\u7528\u76d1\u7763\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\u6587\u672c\u5206\u7c7b\u5668\uff0c\u9700\u8981\u5927\u91cf\u7684\u6570\u636e\u624d\u80fd\u5b66\u4e60\u597d GPT-2 language model (cherry-picked) output \u6587\u672c\u751f\u6210\u7684\u6837\u4f8b Transformer \u4e0d\u4ec5\u72e0\u5f3a\u5927\uff0c\u800c\u4e14\u5141\u8bb8\u6269\u5c55\u5230\u66f4\u5927\u7684\u5c3a\u5bf8","title":"3. ULMfit"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#4-the-motivation-for-transformers","text":"\u6211\u4eec\u60f3\u8981\u5e76\u884c\u5316\uff0c\u4f46\u662fRNNs\u672c\u8d28\u4e0a\u662f\u987a\u5e8f\u7684 \u5c3d\u7ba1\u6709GRUs\u548cLSTMs, RNNs\u4ecd\u7136\u9700\u8981\u6ce8\u610f\u673a\u5236\u6765\u5904\u7406\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u2014\u2014\u5426\u5219\u72b6\u6001\u4e4b\u95f4\u7684 path length \u8def\u5f84\u957f\u5ea6 \u4f1a\u968f\u7740\u5e8f\u5217\u589e\u957f \u4f46\u5982\u679c\u6ce8\u610f\u529b\u8ba9\u6211\u4eec\u8fdb\u5165\u4efb\u4f55\u4e00\u4e2a\u72b6\u6001\u2026\u2026\u4e5f\u8bb8\u6211\u4eec\u53ef\u4ee5\u53ea\u7528\u6ce8\u610f\u529b\u800c\u4e0d\u9700\u8981RNN? Transformer Overview Attention is all you need. 2017. Aswani, Shazeer, Parmar, Uszkoreit, Jones, Gomez, Kaiser, Polosukhin Non-recurrent sequence-to-sequence encoder-decoder model \u4efb\u52a1\uff1a\u5e73\u884c\u8bed\u6599\u5e93\u7684\u673a\u5668\u7ffb\u8bd1 \u9884\u6d4b\u6bcf\u4e2a\u7ffb\u8bd1\u5355\u8bcd \u6700\u7ec8\u6210\u672c/\u8bef\u5dee\u51fd\u6570\u662f softmax \u5206\u7c7b\u5668\u57fa\u7840\u4e0a\u7684\u6807\u51c6\u4ea4\u53c9\u71b5\u8bef\u5dee Transformer Basics \u81ea\u5b66 \u4e3b\u8981\u63a8\u8350\u8d44\u6e90 http://nlp.seas.harvard.edu/2018/04/03/attention.html The Annotated Transformer by Sasha Rush An Jupyter Notebook using PyTorch that explains everything! \u73b0\u5728\uff1a\u6211\u4eec\u5b9a\u4e49 Transformer \u7f51\u7edc\u7684\u57fa\u672c\u6784\u5efa\u5757\uff1a\u7b2c\u4e00\uff0c\u65b0\u7684\u6ce8\u610f\u529b\u5c42 Dot-Product Attention (Extending our previous def.) \u8f93\u5165\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u8f93\u51fa\u800c\u8a00\u7684\u67e5\u8be2 q \u548c\u4e00\u7ec4\u952e-\u503c\u5bf9 k-v Query, keys, values, and output \u90fd\u662f\u5411\u91cf \u8f93\u51fa\u503c\u7684\u52a0\u6743\u548c \u6743\u91cd\u7684\u6bcf\u4e2a\u503c\u662f\u7531\u67e5\u8be2\u548c\u76f8\u5173\u952e\u7684\u5185\u79ef\u8ba1\u7b97\u7ed3\u679c Query \u548c keys \u6709\u76f8\u540c\u7ef4\u6570 \\(d_k\\) \uff0cvalue \u7684\u7ef4\u6570\u4e3a \\(d_v\\) \\[ A(q, K, V)=\\sum_{i} \\frac{e^{q \\cdot k_{i}}}{\\sum_{j} e^{q \\cdot k_{j}}} v_{i} \\] Dot-Product Attention \u2013 Matrix notation \u5f53\u6211\u4eec\u6709\u591a\u4e2a\u67e5\u8be2 q \u65f6\uff0c\u6211\u4eec\u5c06\u5b83\u4eec\u53e0\u52a0\u5728\u4e00\u4e2a\u77e9\u9635 Q \u4e2d \\[ A(Q, K, V)=\\operatorname{softmax}\\left(Q K^{T}\\right) V \\] Scaled Dot-Product Attention \u95ee\u9898\uff1a \\(d_k\\) \u53d8\u5927\u65f6\uff0c \\(q^Tk\\) \u7684\u65b9\u5dee\u589e\u5927 \\(\\to\\) \u4e00\u4e9b softmax \u4e2d\u7684\u503c\u7684\u65b9\u5dee\u5c06\u4f1a\u53d8\u5927 \\(\\to\\) softmax \u5f97\u5230\u7684\u662f\u5cf0\u503c \\(\\to\\) \u56e0\u6b64\u68af\u5ea6\u53d8\u5c0f\u4e86 \u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7query/key\u5411\u91cf\u7684\u957f\u5ea6\u8fdb\u884c\u7f29\u653e \\[ A(Q, K, V)=\\operatorname{softmax}\\left(\\frac{Q K^{T}}{\\sqrt{d_{k}}}\\right) V \\] Self-attention in the encoder \u8f93\u5165\u5355\u8bcd\u5411\u91cf\u662fqueries, keys and values \u6362\u53e5\u8bdd\u8bf4\uff1a\u8fd9\u4e2a\u8bcd\u5411\u91cf\u81ea\u5df1\u9009\u62e9\u5f7c\u6b64 \u8bcd\u5411\u91cf\u5806\u6808= Q = K = V \u6211\u4eec\u4f1a\u901a\u8fc7\u89e3\u7801\u5668\u660e\u767d\u4e3a\u4ec0\u4e48\u6211\u4eec\u5728\u5b9a\u4e49\u4e2d\u5c06\u4ed6\u4eec\u5206\u5f00 Multi-head attention \u7b80\u5355self-attention\u7684\u95ee\u9898 \u5355\u8bcd\u53ea\u6709\u4e00\u79cd\u76f8\u4e92\u4ea4\u4e92\u7684\u65b9\u5f0f \u89e3\u51b3\u65b9\u6848\uff1a\u591a\u5934\u6ce8\u610f\u529b \u9996\u5148\u901a\u8fc7\u77e9\u9635 W \u5c06 Q, K, V \u6620\u5c04\u5230 h = 8 \u7684\u8bb8\u591a\u4f4e\u7ef4\u7a7a\u95f4 \u7136\u540e\u5e94\u7528\u6ce8\u610f\u529b\uff0c\u7136\u540e\u8fde\u63a5\u8f93\u51fa\uff0c\u901a\u8fc7\u7ebf\u6027\u5c42 \\[ \\begin{array}{c}{\\text {MultiHead}(\\boldsymbol{Q}, \\boldsymbol{K}, \\boldsymbol{V})=\\text {Concat(head}_{1}, \\ldots, \\text { head }_{h} )} \\\\ {\\text {where head}_{i}=\\text {Attention}\\left(Q W_{i}^{Q}, K W_{i}^{K}, V W_{i}^{V}\\right)}\\end{array} \\] Complete transformer block \u6bcf\u4e2a block \u90fd\u6709\u4e24\u4e2a\u201c\u5b50\u5c42\u201d \u591a\u5934 attention \u4e24\u5c42\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc\uff0c\u4f7f\u7528 ReLU \u8fd9\u4e24\u4e2a\u5b50\u5c42\u90fd\uff1a \u6b8b\u5dee\u8fde\u63a5\u4ee5\u53ca\u5c42\u5f52\u4e00\u5316 LayerNorm(x+Sublayer(x)) \u5c42\u5f52\u4e00\u5316\u5c06\u8f93\u5165\u8f6c\u5316\u4e3a\u5747\u503c\u662f 0\uff0c\u65b9\u5dee\u662f 1 \uff0c\u6bcf\u4e00\u5c42\u548c\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u70b9\uff08\u5e76\u4e14\u6dfb\u52a0\u4e86\u4e24\u4e2a\u53c2\u6570\uff09 \\[ \\mu^{l}=\\frac{1}{H} \\sum_{i=1}^{H} a_{i}^{l} \\quad \\sigma^{l}=\\sqrt{\\frac{1}{H} \\sum_{i=1}^{H}\\left(a_{i}^{l}-\\mu^{l}\\right)^{2}} \\quad h_{i}=f\\left(\\frac{g_{i}}{\\sigma_{i}}\\left(a_{i}-\\mu_{i}\\right)+b_{i}\\right) \\] Layer Normalization by Ba, Kiros and Hinton Encoder Input \u5b9e\u9645\u7684\u8bcd\u8868\u793a\u662f byte-pair \u7f16\u7801 \u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e2a positional encoding \u4f4d\u7f6e\u7f16\u7801\uff0c\u76f8\u540c\u7684\u8bcd\u8bed\u5728\u4e0d\u540c\u7684\u4f4d\u7f6e\u6709\u4e0d\u540c\u7684\u6574\u4f53\u8868\u5f81 \\[ \\begin{equation} \\begin{cases} PE(pos, 2i)=\\sin \\left(pos / 10000^{2 i / d_{model}}\\right) \\\\ PE(\\text {pos}, 2 i+1)=\\cos \\left(pos / 10000^{2 i / d_{model}}\\right) \\end{cases} \\end{equation} \\] Complete Encoder encoder \u4e2d\uff0c\u6bcf\u4e2a block \u90fd\u662f\u6765\u81ea\u524d\u4e00\u5c42\u7684 Q, K, V Blocks \u88ab\u91cd\u590d 6 \u6b21\uff08\u5782\u76f4\u65b9\u5411\uff09 \u5728\u6bcf\u4e2a\u9636\u6bb5\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u591a\u5934\u6ce8\u610f\u529b\u770b\u5230\u53e5\u5b50\u4e2d\u7684\u5404\u4e2a\u5730\u65b9\uff0c\u7d2f\u79ef\u4fe1\u606f\u5e76\u5c06\u5176\u63a8\u9001\u5230\u4e0b\u4e00\u5c42\u3002\u5728\u4efb\u4e00\u65b9\u5411\u4e0a\u7684\u5e8f\u5217\u9010\u6b65\u63a8\u9001\u4fe1\u606f\u6765\u8ba1\u7b97\u611f\u5174\u8da3\u7684\u503c \u975e\u5e38\u5584\u4e8e\u5b66\u4e60\u8bed\u8a00\u7ed3\u6784 Attention visualization in layer 5 \u8bcd\u8bed\u5f00\u59cb\u4ee5\u5408\u7406\u7684\u65b9\u5f0f\u5173\u6ce8\u5176\u4ed6\u8bcd\u8bed \u4e0d\u540c\u7684\u989c\u8272\u5bf9\u5e94\u4e0d\u540c\u7684\u6ce8\u610f\u529b\u5934 Attention visualization: Implicit anaphora resolution \u5bf9\u4e8e\u4ee3\u8bcd\uff0c\u6ce8\u610f\u529b\u5934\u5b66\u4f1a\u4e86\u5982\u4f55\u627e\u5230\u5176\u6307\u4ee3\u7269 \u5728\u7b2c\u4e94\u5c42\u4e2d\uff0c\u4ece head 5 \u548c 6 \u7684\u5355\u8bcd\u201cits\u201d\u4e2d\u5206\u79bb\u51fa\u6765\u7684\u6ce8\u610f\u529b\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u8bcd\u7684\u6ce8\u610f\u529b\u662f\u975e\u5e38\u9c9c\u660e\u7684\u3002 Transformer Decoder decoder \u4e2d\u6709\u4e24\u4e2a\u7a0d\u52a0\u6539\u53d8\u7684\u5b50\u5c42 \u5bf9\u4e4b\u524d\u751f\u6210\u7684\u8f93\u51fa\u8fdb\u884c Masked decoder self-attention Encoder-Decoder Attention\uff0cqueries \u6765\u81ea\u4e8e\u524d\u4e00\u4e2a decoder \u5c42\uff0ckeys \u548c values \u6765\u81ea\u4e8e encoder \u7684\u8f93\u51fa Blocks \u540c\u6837\u91cd\u590d 6 \u6b21 Tips and tricks of the Transformer \u7ec6\u8282(\u8bba\u6587/\u8bb2\u5ea7) Byte-pair encodings Checkpoint averaging Adam \u4f18\u5316\u5668\u63a7\u5236\u5b66\u4e60\u901f\u7387\u53d8\u5316 \u8bad\u7ec3\u65f6\uff0c\u5728\u6bcf\u4e00\u5c42\u6dfb\u52a0\u6b8b\u5dee\u4e4b\u524d\u8fdb\u884c Dropout \u6807\u7b7e\u5e73\u6ed1 \u5e26\u6709\u675f\u641c\u7d22\u548c\u957f\u5ea6\u60e9\u7f5a\u7684 Auto-regressive decoding \u56e0\u4e3a transformer \u6b63\u5728\u8513\u5ef6\uff0c\u4f46\u4ed6\u4eec\u5f88\u96be\u4f18\u5316\u5e76\u4e14\u4e0d\u50cfLSTMs\u90a3\u6837\u5f00\u7bb1\u5373\u7528\uff0c\u4ed6\u4eec\u8fd8\u4e0d\u80fd\u5f88\u597d\u4e0e\u5176\u4ed6\u4efb\u52a1\u7684\u6784\u4ef6\u5171\u540c\u5de5\u4f5c Experimental Results for MT Experimental Results for Parsing","title":"4. The Motivation for Transformers"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#5-bert-devlin-chang-lee-toutanova-2018","text":"BERT (Bidirectional Encoder Representations from Transformers): Pre-training of Deep Bidirectional Transformers for Language Understanding \u95ee\u9898 \uff1a\u8bed\u8a00\u6a21\u578b\u53ea\u4f7f\u7528\u5de6\u4e0a\u4e0b\u6587\u6216\u53f3\u4e0a\u4e0b\u6587\uff0c\u4f46\u8bed\u8a00\u7406\u89e3\u662f\u53cc\u5411\u7684 \u4e3a\u4ec0\u4e48LMs\u662f\u5355\u5411\u7684\uff1f \u539f\u56e01\uff1a\u65b9\u5411\u6027\u5bf9\u4e8e\u751f\u6210\u683c\u5f0f\u826f\u597d\u7684\u6982\u7387\u5206\u5e03\u662f\u6709\u5fc5\u8981\u7684 \u6211\u4eec\u4e0d\u5728\u4e4e\u8fd9\u4e2a \u539f\u56e02\uff1a\u53cc\u5411\u7f16\u7801\u5668\u4e2d\u5355\u8bcd\u53ef\u4ee5\u201c\u770b\u5230\u81ea\u5df1\u201d \u89e3\u51b3\u65b9\u6848 \uff1amask out k % \u7684\u8f93\u5165\u5355\u8bcd\uff0c\u7136\u540e\u9884\u6d4b masked words \u4e0d\u518d\u662f\u4f20\u7edf\u7684\u8ba1\u7b97\u751f\u6210\u53e5\u5b50\u7684\u6982\u7387\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u76ee\u6807\u662f\u586b\u7a7a \u603b\u662f\u4f7f\u7528k = 15% Masking \u592a\u5c11\uff1a\u8bad\u7ec3\u592a\u6602\u8d35 Masking \u592a\u591a\uff1a\u6ca1\u6709\u8db3\u591f\u7684\u4e0a\u4e0b\u6587 GPT \u662f\u7ecf\u5178\u7684\u5355\u9879\u7684\u8bed\u8a00\u6a21\u578b ELMo \u662f\u53cc\u5411\u7684\uff0c\u4f46\u662f\u4e24\u4e2a\u6a21\u578b\u662f\u5b8c\u5168\u72ec\u7acb\u8bad\u7ec3\u7684\uff0c\u53ea\u662f\u5c06\u8f93\u51fa\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u6ca1\u6709\u4f7f\u7528\u53cc\u5411\u7684 context BERT \u4f7f\u7528 mask \u7684\u65b9\u5f0f\u8fdb\u884c\u6574\u4e2a\u4e0a\u4e0b\u6587\u7684\u9884\u6d4b\uff0c\u4f7f\u7528\u4e86\u53cc\u5411\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f BERT complication: Next sentence prediction \u5b66\u4e60\u53e5\u5b50\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5224\u65ad\u53e5\u5b50 B \u662f\u53e5\u5b50 A \u7684\u540e\u4e00\u4e2a\u53e5\u5b50\u8fd8\u662f\u4e00\u4e2a\u968f\u673a\u7684\u53e5\u5b50\u3002 BERT sentence pair encoding token embeddings \u662f word pieces \uff08 \\(\\text{paly}, \\text{##ing}\\) \uff09 \u4f7f\u7528\u5b66\u4e60\u597d\u7684\u5206\u6bb5\u5d4c\u5165\u8868\u793a\u6bcf\u4e2a\u53e5\u5b50 \u4f4d\u7f6e\u5d4c\u5165\u4e0e\u5176\u4ed6 Transformer \u4f53\u7cfb\u7ed3\u6784\u7c7b\u4f3c \u5c06\u4ee5\u4e0a\u4e09\u79cd embedding \u76f8\u52a0\uff0c\u4f5c\u4e3a\u6700\u7ec8\u8f93\u5165\u7684\u8868\u793a BERT model architecture and training Transformer encoder\uff08\u548c\u4e4b\u524d\u7684\u4e00\u6837\uff09 \u81ea\u6ce8\u610f\u529b \\(\\to\\) \u6ca1\u6709\u4f4d\u7f6e\u504f\u5dee \u957f\u8ddd\u79bb\u4e0a\u4e0b\u6587\u201c\u673a\u4f1a\u5747\u7b49\u201d \u6bcf\u5c42\u4e58\u6cd5 \u21d2 GPU / TPU\u4e0a\u9ad8\u6548 \u5728 Wikipedia + BookCorpus \u4e0a\u8bad\u7ec3 \u8bad\u7ec3\u4e24\u79cd\u6a21\u578b\u5c3a\u5bf8 BERT-Base: 12-layer, 768-hidden, 12-head BERT-Large: 24-layer, 1024-hidden, 16-head Trained on 4x4 or 8x8 TPU slice for 4 days BERT model fine tuning \u53ea\u5b66\u4e60\u4e00\u4e2a\u5efa\u7acb\u5728\u9876\u5c42\u7684\u5206\u7c7b\u5668\uff0c\u5fae\u8c03\u7684\u6bcf\u4e2a\u4efb\u52a1 BERT results on GLUE tasks GLUE benchmark \u662f\u7531\u81ea\u7136\u8bed\u8a00\u63a8\u7406\u4efb\u52a1,\u8fd8\u6709\u53e5\u5b50\u76f8\u4f3c\u5ea6\u548c\u60c5\u611f MultiNLI Premise: Hills and mountains are especially sanctified in Jainism. Hypothesis: Jainism hates nature. Label: Contradiction CoLa Sentence: The wagon rumbled down the road. Label: Acceptable Sentence: The car honked down the road. Label: Unacceptable BERT results on SQuAD 1.1 SQuAD 2.0 leaderboard, 2019-02-07 Effect of pre-training task Size matters \u4ece 119M \u5230 340M \u7684\u53c2\u6570\u91cf\u6539\u5584\u4e86\u5f88\u591a \u6539\u8fdb\u5c1a\u672a\u6e10\u8fdb","title":"5. BERT: Devlin, Chang, Lee, Toutanova (2018)"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#suggested-readings","text":"The Annotated Transformer \u4ee3\u7801\u89e3\u6790 https://github.com/rsennrich/subword-nmt https://github.com/opennmt/opennmt-py jalammar \u7684\u4e00\u7cfb\u5217\u53ef\u89c6\u5316\u7b80\u5355\u6559\u7a0b Visualizing A Neural Machine Translation Model (Mechanics of Seq2seq Models With Attention) The Illustrated Transformer Go Forth And Transform I hope you\u2019ve found this a useful place to start to break the ice with the major concepts of the Transformer. If you want to go deeper, I\u2019d suggest these next steps: Read the Attention Is All You Need paper, the Transformer blog post ( Transformer: A Novel Neural Network Architecture for Language Understanding ), and the Tensor2Tensor announcement . Watch \u0141ukasz Kaiser\u2019s talk walking through the model and its details Play with the Jupyter Notebook provided as part of the Tensor2Tensor repo Explore the Tensor2Tensor repo . Follow-up works Depthwise Separable Convolutions for Neural Machine Translation One Model To Learn Them All Discrete Autoencoders for Sequence Models Generating Wikipedia by Summarizing Long Sequences Image Transformer Training Tips for the Transformer Model Self-Attention with Relative Position Representations Fast Decoding in Sequence Models using Discrete Latent Variables Adafactor: Adaptive Learning Rates with Sublinear Memory Cost The Illustrated BERT, ELMo, and co. (How NLP Cracked Transfer Learning) Smith, Noah A. Contextual Word Representations: A Contextual Introduction .","title":"Suggested Readings"},{"location":"CS224n-2019-13-Modeling%20contexts%20of%20use%20Contextual%20Representations%20and%20Pretraining/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/","text":"Lecture 14 Transformers and Self-Attention For Generative Models \u00b6 Ashish Vaswani and Anna Huang \u5b66\u4e60\u53d8\u957f\u6570\u636e\u7684\u8868\u793a\uff0c\u8fd9\u662f\u5e8f\u5217\u5b66\u4e60\u7684\u57fa\u672c\u7ec4\u4ef6\uff08\u5e8f\u5217\u5b66\u4e60\u5305\u62ec NMT, text summarization, QA\uff09 \u901a\u5e38\u4f7f\u7528 RNN \u5b66\u4e60\u53d8\u957f\u7684\u8868\u793a\uff1aRNN \u672c\u8eab\u9002\u5408\u53e5\u5b50\u548c\u50cf\u7d20\u5e8f\u5217 LSTMs, GRUs \u548c\u5176\u53d8\u4f53\u5728\u5faa\u73af\u6a21\u578b\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002 \u4f46\u662f\u5e8f\u5217\u8ba1\u7b97\u6291\u5236\u4e86\u5e76\u884c\u5316\u3002 \u6ca1\u6709\u5bf9\u957f\u671f\u548c\u77ed\u671f\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u663e\u5f0f\u5efa\u6a21\u3002 \u6211\u4eec\u60f3\u8981\u5bf9\u5c42\u6b21\u7ed3\u6784\u5efa\u6a21\u3002 RNNs(\u987a\u5e8f\u5bf9\u9f50\u7684\u72b6\u6001)\u770b\u8d77\u6765\u5f88\u6d6a\u8d39\uff01 \u5377\u79ef\u795e\u7ecf\u7f51\u7edc \u5e76\u884c\u5316(\u6bcf\u5c42)\u5f88\u7b80\u5355 \u5229\u7528\u5c40\u90e8\u4f9d\u8d56 \u4e0d\u540c\u4f4d\u7f6e\u7684\u4ea4\u4e92\u8ddd\u79bb\u662f\u7ebf\u6027\u6216\u662f\u5bf9\u6570\u7684 \u8fdc\u7a0b\u4f9d\u8d56\u9700\u8981\u591a\u5c42 \u6ce8\u610f\u529b NMT \u4e2d\uff0c\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u4e4b\u95f4\u7684 Attention \u662f\u81f3\u5173\u91cd\u8981\u7684 \u4e3a\u4ec0\u4e48\u4e0d\u628a\u6ce8\u610f\u529b\u7528\u4e8e\u8868\u793a\u5462\uff1f Self-Attention \u4efb\u4f55\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u662f\u5e38\u6570\u7ea7\u522b\u7684 \u95e8\u63a7 / \u4e58\u6cd5 \u7684\u4ea4\u4e92 \u53ef\u4ee5\u5e76\u884c\u5316\uff08\u6bcf\u5c42\uff09 \u53ef\u4ee5\u5b8c\u5168\u66ff\u4ee3\u5e8f\u5217\u8ba1\u7b97\u5417\uff1f Text generation \u00b6 Previous work \u00b6 Classification & regression with self-attention: Parikh et al. (2016), Lin et al. (2016) Self-attention with RNNs: Long et al. (2016), Shao, Gows et al. (2017) Recurrent attention: Sukhbaatar et al. (2015) The Transformer \u00b6 Encoder Self-Attention Decoder Self-Attention \u590d\u6742\u5ea6 \u7531\u4e8e\u8ba1\u7b97\u53ea\u6d89\u53ca\u5230\u4e24\u4e2a\u77e9\u9635\u4e58\u6cd5\uff0c\u6240\u4ee5\u662f\u5e8f\u5217\u957f\u5ea6\u7684\u5e73\u65b9 \u5f53\u7ef4\u5ea6\u6bd4\u957f\u5ea6\u5927\u5f97\u591a\u7684\u65f6\u5019\uff0c\u975e\u5e38\u6709\u6548 Problem \u00b6 \u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8c01\u5bf9\u8c01\u505a\u4e86\u4ec0\u4e48\uff0c\u901a\u8fc7\u5377\u79ef\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684**\u4e0d\u540c\u7684**\u7ebf\u6027\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u83b7\u53d6\u5230 who, did what, to whom \u7684\u4fe1\u606f\u3002 \u4f46\u662f\u5bf9\u4e8e Attention \u800c\u8a00\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aAttention layer\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u53e5\u8bdd\u91cc\u7684\u6bcf\u4e2a\u8bcd\u90fd\u662f\u540c\u6837\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u4e0d\u80fd\u591f\u505a\u5230\u5728**\u4e0d\u540c\u7684\u4f4d\u7f6e\u63d0\u53d6\u4e0d\u540c\u7684\u4fe1\u606f** \u8fd9\u5c31\u662f\u591a\u5934\u6ce8\u610f\u529b\u7684\u6765\u6e90\uff0c\u7075\u611f\u6765\u6e90\u4e8e CNN \u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u8bbe\u8ba1 Solution \u00b6 Who, Did What, To Whom \u5206\u522b\u62e5\u6709\u6ce8\u610f\u529b\u5934 \u5c06\u6ce8\u610f\u529b\u5c42\u89c6\u4e3a\u7279\u5f81\u63a2\u6d4b\u5668 \u53ef\u4ee5\u5e76\u884c\u5b8c\u6210 \u4e3a\u4e86\u6548\u7387\uff0c\u51cf\u5c11\u6ce8\u610f\u529b\u5934\u7684\u7ef4\u5ea6\uff0c\u5e76\u884c\u64cd\u4f5c\u8fd9\u4e9b\u6ce8\u610f\u529b\u5c42\uff0c\u5f25\u8865\u4e86\u8ba1\u7b97 \u5dee\u8ddd Results \u00b6 \u4f46\u6211\u4eec\u5e76\u4e0d\u4e00\u5b9a\u6bd4 LSTM \u53d6\u5f97\u4e86\u66f4\u597d\u7684\u8868\u793a\uff0c\u53ea\u662f\u6211\u4eec\u66f4\u9002\u5408 SGD\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u8bad\u7ec3 \u6211\u4eec\u53ef\u4ee5\u5bf9\u4efb\u610f\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u6784\u5efa\u8fde\u63a5 Importance of residuals \u00b6 \u4f4d\u7f6e\u4fe1\u606f\u6700\u521d\u6dfb\u52a0\u5728\u4e86\u6a21\u578b\u7684\u8f93\u5165\u5904\uff0c\u901a\u8fc7\u6b8b\u5dee\u8fde\u63a5\u5c06\u4f4d\u7f6e\u4fe1\u606f\u4f20\u9012\u5230\u6bcf\u4e00\u5c42\uff0c\u53ef\u4ee5\u4e0d\u9700\u8981\u518d\u6bcf\u4e00\u5c42\u90fd\u6dfb\u52a0\u4f4d\u7f6e\u4fe1\u606f Training Details ADAM optimizer with a learning rate warmup (warmup + exponential decay) Dropout during training at every layer just before adding residual Layer-norm Attention dropout (for some experiments) Checkpoint-averaging Label smoothing Auto-regressive decoding with beam search and length biasing \u2026\u2026 Self-Similarity, Image and Music Generation \u00b6 Probabilistic Image Generation \u00b6 \u6a21\u62df\u50cf\u7d20\u7684\u8054\u5408\u5206\u5e03 \u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u5e8f\u5217\u5efa\u6a21\u95ee\u9898 \u5206\u914d\u6982\u7387\u5141\u8bb8\u5ea6\u91cf\u6cdb\u5316 RNNs\u548cCNNs\u662f\u6700\u5148\u8fdb\u7684(PixelRNN, PixelCNN) incorporating gating CNNs \u73b0\u5728\u5728\u6548\u679c\u4e0a\u4e0e RNNs \u76f8\u8fd1 \u7531\u4e8e\u5e76\u884c\u5316\uff0cCNN \u8981\u5feb\u5f97\u591a \u56fe\u50cf\u7684\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u5f88\u91cd\u8981(\u4f8b\u5982\u5bf9\u79f0\u6027) \u53ef\u80fd\u968f\u7740\u56fe\u50cf\u5927\u5c0f\u7684\u589e\u52a0\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u91cd\u8981 \u4f7f\u7528CNNs\u5efa\u6a21\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u9700\u8981\u4e24\u8005\u4e4b\u4e00 **\u591a\u5c42**\u53ef\u80fd\u4f7f\u8bad\u7ec3\u66f4\u52a0\u56f0\u96be \u5927\u5377\u79ef\u6838 \u53c2\u6570/\u8ba1\u7b97\u6210\u672c\u76f8\u5e94\u53d8\u5927 Texture Synthesis with Self-Similarity \u81ea\u76f8\u4f3c\u6027\u7684\u7814\u7a76\u6848\u4f8b A Non-local Algorithm for Image Denoising (Buades, Coll, and Morel. CVPR 2005) Non-local Neural Networks (Wang et al., 2018) Previous work \u00b6 Self-attention: Parikh et al. (2016), Lin et al. (2016), Vaswani et al. (2017) Autoregressive Image Generation: A Oord et al. (2016), Salimans et al. (2017) The Image Transformer \u00b6 Combining Locality with Self-Attention \u00b6 \u5c06\u6ce8\u610f\u529b\u7a97\u53e3\u9650\u5236\u4e3a\u672c\u5730\u8303\u56f4 \u7531\u4e8e\u7a7a\u95f4\u5c40\u90e8\u6027\uff0c\u8fd9\u5728\u56fe\u50cf\u4e2d\u662f\u5f88\u597d\u7684\u5047\u8bbe Music generation using relative self-attention \u00b6 Raw representations in music and language \u4f20\u7edf\u7684 RNN \u6a21\u578b\u9700\u8981\u5c06\u957f\u5e8f\u5217\u5d4c\u5165\u5230\u56fa\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\u4e2d Continuations to given initial motif \u00b6 \u7ed9\u5b9a\u4e00\u6bb5\u97f3\u4e50\u5e76\u751f\u6210\u540e\u7eed\u97f3\u4e50 \u4e0d\u80fd\u76f4\u63a5\u53bb\u91cd\u590d\u8fc7\u53bb\u7684\u7247\u6bb5 \u96be\u4ee5\u5904\u7406\u957f\u8ddd\u79bb \u79fb\u52a8\u7684\u56fa\u5b9a\u8fc7\u6ee4\u5668\u6355\u83b7\u76f8\u5bf9\u8ddd\u79bb Music Transformer \u4f7f\u7528\u5e73\u79fb\u4e0d\u53d8\u6027\u6765\u643a\u5e26\u8d85\u8fc7\u5176\u8bad\u7ec3\u957f\u5ea6\u7684\u5173\u7cfb\u4fe1\u606f\uff0c\u8fdb\u884c\u4f20\u9012 \u4f4d\u7f6e\u4e4b\u95f4\u7684\u76f8\u5173\u6027 \u4f46\u662f\u97f3\u4e50\u4e2d\u7684\u5e8f\u5217\u957f\u5ea6\u901a\u5e38\u975e\u5e38\u957f \u5c06\u76f8\u5bf9\u8ddd\u79bb\u8f6c\u5316\u4e3a\u7edd\u5bf9\u8ddd\u79bb Self-Attention \u00b6 \u4efb\u610f\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u662f\u5e38\u6570\u7ea7\u7684 \u6ca1\u6709\u8fb9\u754c\u7684\u5185\u5b58 \u5e76\u884c\u5316 \u5bf9\u81ea\u76f8\u4f3c\u6027\u8fdb\u884c\u5efa\u6a21 \u76f8\u5bf9\u6ce8\u610f\u529b\u63d0\u4f9b\u4e86\u8868\u8fbe\u65f6\u95f4\u3001equivariance\uff0c\u53ef\u4ee5\u81ea\u7136\u5ef6\u4f38\u81f3\u56fe\u8868 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"14 Transformers and Self-Attention For Generative Models"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#lecture-14-transformers-and-self-attention-for-generative-models","text":"Ashish Vaswani and Anna Huang \u5b66\u4e60\u53d8\u957f\u6570\u636e\u7684\u8868\u793a\uff0c\u8fd9\u662f\u5e8f\u5217\u5b66\u4e60\u7684\u57fa\u672c\u7ec4\u4ef6\uff08\u5e8f\u5217\u5b66\u4e60\u5305\u62ec NMT, text summarization, QA\uff09 \u901a\u5e38\u4f7f\u7528 RNN \u5b66\u4e60\u53d8\u957f\u7684\u8868\u793a\uff1aRNN \u672c\u8eab\u9002\u5408\u53e5\u5b50\u548c\u50cf\u7d20\u5e8f\u5217 LSTMs, GRUs \u548c\u5176\u53d8\u4f53\u5728\u5faa\u73af\u6a21\u578b\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002 \u4f46\u662f\u5e8f\u5217\u8ba1\u7b97\u6291\u5236\u4e86\u5e76\u884c\u5316\u3002 \u6ca1\u6709\u5bf9\u957f\u671f\u548c\u77ed\u671f\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u663e\u5f0f\u5efa\u6a21\u3002 \u6211\u4eec\u60f3\u8981\u5bf9\u5c42\u6b21\u7ed3\u6784\u5efa\u6a21\u3002 RNNs(\u987a\u5e8f\u5bf9\u9f50\u7684\u72b6\u6001)\u770b\u8d77\u6765\u5f88\u6d6a\u8d39\uff01 \u5377\u79ef\u795e\u7ecf\u7f51\u7edc \u5e76\u884c\u5316(\u6bcf\u5c42)\u5f88\u7b80\u5355 \u5229\u7528\u5c40\u90e8\u4f9d\u8d56 \u4e0d\u540c\u4f4d\u7f6e\u7684\u4ea4\u4e92\u8ddd\u79bb\u662f\u7ebf\u6027\u6216\u662f\u5bf9\u6570\u7684 \u8fdc\u7a0b\u4f9d\u8d56\u9700\u8981\u591a\u5c42 \u6ce8\u610f\u529b NMT \u4e2d\uff0c\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u4e4b\u95f4\u7684 Attention \u662f\u81f3\u5173\u91cd\u8981\u7684 \u4e3a\u4ec0\u4e48\u4e0d\u628a\u6ce8\u610f\u529b\u7528\u4e8e\u8868\u793a\u5462\uff1f Self-Attention \u4efb\u4f55\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u662f\u5e38\u6570\u7ea7\u522b\u7684 \u95e8\u63a7 / \u4e58\u6cd5 \u7684\u4ea4\u4e92 \u53ef\u4ee5\u5e76\u884c\u5316\uff08\u6bcf\u5c42\uff09 \u53ef\u4ee5\u5b8c\u5168\u66ff\u4ee3\u5e8f\u5217\u8ba1\u7b97\u5417\uff1f","title":"Lecture 14 Transformers and Self-Attention For Generative Models"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#text-generation","text":"","title":"Text generation"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#previous-work","text":"Classification & regression with self-attention: Parikh et al. (2016), Lin et al. (2016) Self-attention with RNNs: Long et al. (2016), Shao, Gows et al. (2017) Recurrent attention: Sukhbaatar et al. (2015)","title":"Previous work"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#the-transformer","text":"Encoder Self-Attention Decoder Self-Attention \u590d\u6742\u5ea6 \u7531\u4e8e\u8ba1\u7b97\u53ea\u6d89\u53ca\u5230\u4e24\u4e2a\u77e9\u9635\u4e58\u6cd5\uff0c\u6240\u4ee5\u662f\u5e8f\u5217\u957f\u5ea6\u7684\u5e73\u65b9 \u5f53\u7ef4\u5ea6\u6bd4\u957f\u5ea6\u5927\u5f97\u591a\u7684\u65f6\u5019\uff0c\u975e\u5e38\u6709\u6548","title":"The Transformer"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#problem","text":"\u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8c01\u5bf9\u8c01\u505a\u4e86\u4ec0\u4e48\uff0c\u901a\u8fc7\u5377\u79ef\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684**\u4e0d\u540c\u7684**\u7ebf\u6027\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u83b7\u53d6\u5230 who, did what, to whom \u7684\u4fe1\u606f\u3002 \u4f46\u662f\u5bf9\u4e8e Attention \u800c\u8a00\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aAttention layer\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u53e5\u8bdd\u91cc\u7684\u6bcf\u4e2a\u8bcd\u90fd\u662f\u540c\u6837\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u4e0d\u80fd\u591f\u505a\u5230\u5728**\u4e0d\u540c\u7684\u4f4d\u7f6e\u63d0\u53d6\u4e0d\u540c\u7684\u4fe1\u606f** \u8fd9\u5c31\u662f\u591a\u5934\u6ce8\u610f\u529b\u7684\u6765\u6e90\uff0c\u7075\u611f\u6765\u6e90\u4e8e CNN \u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u8bbe\u8ba1","title":"Problem"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#solution","text":"Who, Did What, To Whom \u5206\u522b\u62e5\u6709\u6ce8\u610f\u529b\u5934 \u5c06\u6ce8\u610f\u529b\u5c42\u89c6\u4e3a\u7279\u5f81\u63a2\u6d4b\u5668 \u53ef\u4ee5\u5e76\u884c\u5b8c\u6210 \u4e3a\u4e86\u6548\u7387\uff0c\u51cf\u5c11\u6ce8\u610f\u529b\u5934\u7684\u7ef4\u5ea6\uff0c\u5e76\u884c\u64cd\u4f5c\u8fd9\u4e9b\u6ce8\u610f\u529b\u5c42\uff0c\u5f25\u8865\u4e86\u8ba1\u7b97 \u5dee\u8ddd","title":"Solution"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#results","text":"\u4f46\u6211\u4eec\u5e76\u4e0d\u4e00\u5b9a\u6bd4 LSTM \u53d6\u5f97\u4e86\u66f4\u597d\u7684\u8868\u793a\uff0c\u53ea\u662f\u6211\u4eec\u66f4\u9002\u5408 SGD\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u8bad\u7ec3 \u6211\u4eec\u53ef\u4ee5\u5bf9\u4efb\u610f\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u6784\u5efa\u8fde\u63a5","title":"Results"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#importance-of-residuals","text":"\u4f4d\u7f6e\u4fe1\u606f\u6700\u521d\u6dfb\u52a0\u5728\u4e86\u6a21\u578b\u7684\u8f93\u5165\u5904\uff0c\u901a\u8fc7\u6b8b\u5dee\u8fde\u63a5\u5c06\u4f4d\u7f6e\u4fe1\u606f\u4f20\u9012\u5230\u6bcf\u4e00\u5c42\uff0c\u53ef\u4ee5\u4e0d\u9700\u8981\u518d\u6bcf\u4e00\u5c42\u90fd\u6dfb\u52a0\u4f4d\u7f6e\u4fe1\u606f Training Details ADAM optimizer with a learning rate warmup (warmup + exponential decay) Dropout during training at every layer just before adding residual Layer-norm Attention dropout (for some experiments) Checkpoint-averaging Label smoothing Auto-regressive decoding with beam search and length biasing \u2026\u2026","title":"Importance of residuals"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#self-similarity-image-and-music-generation","text":"","title":"Self-Similarity, Image and Music Generation"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#probabilistic-image-generation","text":"\u6a21\u62df\u50cf\u7d20\u7684\u8054\u5408\u5206\u5e03 \u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u5e8f\u5217\u5efa\u6a21\u95ee\u9898 \u5206\u914d\u6982\u7387\u5141\u8bb8\u5ea6\u91cf\u6cdb\u5316 RNNs\u548cCNNs\u662f\u6700\u5148\u8fdb\u7684(PixelRNN, PixelCNN) incorporating gating CNNs \u73b0\u5728\u5728\u6548\u679c\u4e0a\u4e0e RNNs \u76f8\u8fd1 \u7531\u4e8e\u5e76\u884c\u5316\uff0cCNN \u8981\u5feb\u5f97\u591a \u56fe\u50cf\u7684\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u5f88\u91cd\u8981(\u4f8b\u5982\u5bf9\u79f0\u6027) \u53ef\u80fd\u968f\u7740\u56fe\u50cf\u5927\u5c0f\u7684\u589e\u52a0\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u91cd\u8981 \u4f7f\u7528CNNs\u5efa\u6a21\u957f\u671f\u4f9d\u8d56\u5173\u7cfb\u9700\u8981\u4e24\u8005\u4e4b\u4e00 **\u591a\u5c42**\u53ef\u80fd\u4f7f\u8bad\u7ec3\u66f4\u52a0\u56f0\u96be \u5927\u5377\u79ef\u6838 \u53c2\u6570/\u8ba1\u7b97\u6210\u672c\u76f8\u5e94\u53d8\u5927 Texture Synthesis with Self-Similarity \u81ea\u76f8\u4f3c\u6027\u7684\u7814\u7a76\u6848\u4f8b A Non-local Algorithm for Image Denoising (Buades, Coll, and Morel. CVPR 2005) Non-local Neural Networks (Wang et al., 2018)","title":"Probabilistic Image Generation"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#previous-work_1","text":"Self-attention: Parikh et al. (2016), Lin et al. (2016), Vaswani et al. (2017) Autoregressive Image Generation: A Oord et al. (2016), Salimans et al. (2017)","title":"Previous work"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#the-image-transformer","text":"","title":"The Image Transformer"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#combining-locality-with-self-attention","text":"\u5c06\u6ce8\u610f\u529b\u7a97\u53e3\u9650\u5236\u4e3a\u672c\u5730\u8303\u56f4 \u7531\u4e8e\u7a7a\u95f4\u5c40\u90e8\u6027\uff0c\u8fd9\u5728\u56fe\u50cf\u4e2d\u662f\u5f88\u597d\u7684\u5047\u8bbe","title":"Combining Locality with Self-Attention"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#music-generation-using-relative-self-attention","text":"Raw representations in music and language \u4f20\u7edf\u7684 RNN \u6a21\u578b\u9700\u8981\u5c06\u957f\u5e8f\u5217\u5d4c\u5165\u5230\u56fa\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\u4e2d","title":"Music generation using relative self-attention"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#continuations-to-given-initial-motif","text":"\u7ed9\u5b9a\u4e00\u6bb5\u97f3\u4e50\u5e76\u751f\u6210\u540e\u7eed\u97f3\u4e50 \u4e0d\u80fd\u76f4\u63a5\u53bb\u91cd\u590d\u8fc7\u53bb\u7684\u7247\u6bb5 \u96be\u4ee5\u5904\u7406\u957f\u8ddd\u79bb \u79fb\u52a8\u7684\u56fa\u5b9a\u8fc7\u6ee4\u5668\u6355\u83b7\u76f8\u5bf9\u8ddd\u79bb Music Transformer \u4f7f\u7528\u5e73\u79fb\u4e0d\u53d8\u6027\u6765\u643a\u5e26\u8d85\u8fc7\u5176\u8bad\u7ec3\u957f\u5ea6\u7684\u5173\u7cfb\u4fe1\u606f\uff0c\u8fdb\u884c\u4f20\u9012 \u4f4d\u7f6e\u4e4b\u95f4\u7684\u76f8\u5173\u6027 \u4f46\u662f\u97f3\u4e50\u4e2d\u7684\u5e8f\u5217\u957f\u5ea6\u901a\u5e38\u975e\u5e38\u957f \u5c06\u76f8\u5bf9\u8ddd\u79bb\u8f6c\u5316\u4e3a\u7edd\u5bf9\u8ddd\u79bb","title":"Continuations to given initial motif"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#self-attention","text":"\u4efb\u610f\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u662f\u5e38\u6570\u7ea7\u7684 \u6ca1\u6709\u8fb9\u754c\u7684\u5185\u5b58 \u5e76\u884c\u5316 \u5bf9\u81ea\u76f8\u4f3c\u6027\u8fdb\u884c\u5efa\u6a21 \u76f8\u5bf9\u6ce8\u610f\u529b\u63d0\u4f9b\u4e86\u8868\u8fbe\u65f6\u95f4\u3001equivariance\uff0c\u53ef\u4ee5\u81ea\u7136\u5ef6\u4f38\u81f3\u56fe\u8868","title":"Self-Attention"},{"location":"CS224n-2019-14-Transformers%20and%20Self-Attention%20For%20Generative%20Models/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/","text":"Lecture 15 Natural Language Generation \u00b6 Lecture Plan Recap what we already know about NLG More on decoding algorithms NLG tasks and neural approaches to them NLG evaluation: a tricky situation Concluding thoughts on NLG research, current trends, and the future Today we\u2019ll be learning about what\u2019s happening in the world of neural approaches to Natural Language Generation (NLG) Section 1: Recap: LMs and decoding algorithms \u00b6 Natural Language Generation (NLG) \u81ea\u7136\u8bed\u8a00\u751f\u6210\u6307\u7684\u662f\u6211\u4eec\u751f\u6210\uff08\u5373\u5199\u5165\uff09\u65b0\u6587\u672c\u7684\u4efb\u4f55\u8bbe\u7f6e NLG \u5305\u62ec\u4ee5\u4e0b\u6210\u5458\uff1a \u673a\u5668\u7ffb\u8bd1 \u6458\u8981 \u5bf9\u8bdd\uff08\u95f2\u804a\u548c\u57fa\u4e8e\u4efb\u52a1\uff09 \u521b\u610f\u5199\u4f5c\uff1a\u8bb2\u6545\u4e8b\uff0c\u8bd7\u6b4c\u521b\u4f5c \u81ea\u7531\u5f62\u5f0f\u95ee\u7b54\uff08\u5373\u751f\u6210\u7b54\u6848\uff0c\u4ece\u6587\u672c\u6216\u77e5\u8bc6\u5e93\u4e2d\u63d0\u53d6\uff09 \u56fe\u50cf\u5b57\u5e55 Recap \u8bed\u8a00\u5efa\u6a21 \u662f\u7ed9\u5b9a\u4e4b\u524d\u7684\u5355\u8bcd\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u4efb\u52a1\uff1a \\[ P\\left(y_{t} | y_{1}, \\ldots, y_{t-1}\\right) \\] \u4e00\u4e2a\u4ea7\u751f\u8fd9\u4e00\u6982\u7387\u5206\u5e03\u7684\u7cfb\u7edf\u53eb\u505a \u8bed\u8a00\u6a21\u578b \u5982\u679c\u7cfb\u7edf\u4f7f\u7528 RNN\uff0c\u5219\u88ab\u79f0\u4e3a RNN-LM \u6761\u4ef6\u8bed\u8a00\u5efa\u6a21 \u662f\u7ed9\u5b9a\u4e4b\u524d\u7684\u5355\u8bcd\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u8f93\u5165 \\(x\\) \uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u4efb\u52a1\uff1a \\[ P\\left(y_{t} | y_{1}, \\dots, y_{t-1}, x\\right) \\] \u6761\u4ef6\u8bed\u8a00\u5efa\u6a21\u4efb\u52a1\u7684\u4f8b\u5b50\uff1a \u673a\u5668\u7ffb\u8bd1 x=source sentence, y=target sentence \u6458\u8981 x=input text, y=summarized text \u5bf9\u8bdd x=dialogue history, y=next utterance Recap: training a (conditional) RNN-LM \u8fd9\u662f\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u4f8b\u5b50 \u5728\u8bad\u7ec3\u671f\u95f4,\u6211\u4eec\u5c06\u6b63\u786e\u7684(\u53c8\u540d\u5f15\u7528)\u76ee\u6807\u53e5\u5b50\u8f93\u5165\u89e3\u7801\u5668\uff0c\u800c\u4e0d\u8003\u8651 \u89e3\u7801\u5668\u9884\u6d4b\u7684\u3002\u8fd9\u79cd\u57f9\u8bad\u65b9\u6cd5\u79f0\u4e3a Teacher Forcing Recap: decoding algorithms \u95ee\u9898\uff1a\u8bad\u7ec3\u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u540e\uff0c\u5982\u4f55\u4f7f\u7528\u5b83\u751f\u6210\u6587\u672c\uff1f \u7b54\u6848\uff1a\u89e3\u7801\u7b97\u6cd5\u662f\u4e00\u79cd\u7b97\u6cd5\uff0c\u7528\u4e8e\u4ece\u8bed\u8a00\u6a21\u578b\u751f\u6210\u6587\u672c \u6211\u4eec\u4e86\u89e3\u4e86\u4e24\u79cd\u89e3\u7801\u7b97\u6cd5 \u8d2a\u5a6a\u89e3\u7801 Beam \u641c\u7d22 Recap: greedy decoding \u4e00\u4e2a\u7b80\u5355\u7684\u7b97\u6cd5 \u5728\u6bcf\u4e00\u6b65\u4e2d\uff0c\u53d6\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff08\u5373argmax\uff09 \u5c06\u5176\u7528\u4f5c\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u5e76\u5728\u4e0b\u4e00\u6b65\u4e2d\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\u63d0\u4f9b \u7ee7\u7eed\u524d\u8fdb\uff0c\u76f4\u5230\u60a8\u4ea7\u751f \\(\\text{<END>}\\) \u6216\u8fbe\u5230\u67d0\u4e2a\u6700\u5927\u957f\u5ea6 \u7531\u4e8e\u7f3a\u4e4f\u56de\u6eaf\uff0c\u8f93\u51fa\u53ef\u80fd\u5f88\u5dee\uff08\u4f8b\u5982\uff0c\u4e0d\u5408\u8bed\u6cd5\uff0c\u4e0d\u81ea\u7136\uff0c\u8352\u8c2c\uff09 Recap: beam search decoding \u4e00\u79cd\u65e8\u5728\u901a\u8fc7\u4e00\u6b21\u8ddf\u8e2a\u591a\u4e2a\u53ef\u80fd\u7684\u5e8f\u5217\uff0c\u627e\u5230\u9ad8\u6982\u7387\u5e8f\u5217\uff08\u4e0d\u4e00\u5b9a\u662f\u6700\u4f73\u5e8f\u5217\uff09\u7684\u641c\u7d22\u7b97\u6cd5 \u6838\u5fc3\u601d\u60f3\uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u8ddf\u8e2a k \u4e2a\u6700\u53ef\u80fd\u7684\u90e8\u5206\u5e8f\u5217\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a\u5047\u8bbe\uff09 k\u662f\u5149\u675f\u5927\u5c0f \u8fbe\u5230\u67d0\u4e2a\u505c\u6b62\u6807\u51c6\u540e\uff0c\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217\uff08\u8003\u8651\u4e00\u4e9b\u957f\u5ea6\u8c03\u6574\uff09 What\u2019s the effect of changing beam size k? \u5c0f\u7684 k \u4e0e\u8d2a\u5fc3\u89e3\u7801\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\uff08k = 1\u65f6\u5c31\u662f\u8d2a\u5fc3\u89e3\u7801\uff09 \u4e0d\u7b26\u5408\u8bed\u6cd5\uff0c\u4e0d\u81ea\u7136\uff0c\u8352\u8c2c\uff0c\u4e0d\u6b63\u786e \u66f4\u5927\u7684 k \u610f\u5473\u7740\u60a8\u8003\u8651\u66f4\u591a\u5047\u8bbe \u589e\u52a0 k \u53ef\u4ee5\u51cf\u5c11\u4e0a\u8ff0\u4e00\u4e9b\u95ee\u9898 \u66f4\u5927\u7684 k \u5728\u8ba1\u7b97\u4e0a\u66f4\u6602\u8d35 \u4f46\u589e\u52a0 k \u53ef\u80fd\u4f1a\u5f15\u5165\u5176\u4ed6\u95ee\u9898\uff1a \u5bf9\u4e8eNMT\uff0c\u589e\u52a0 k \u592a\u591a\u4f1a\u964d\u4f4eBLEU\u8bc4\u5206(Tu et al, Koehnet al) beam size \u548c BLEU \u4e4b\u95f4\u5b58\u5728\u6700\u4f18\u6027\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u9ad8\u6982\u7387\u5e8f\u5217\u548c\u9ad8\u7684 BLEU \u5f97\u5206\u662f\u4e24\u4ef6\u72ec\u7acb\u7684\u4e8b\u60c5 \u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5927 k \u5149\u675f\u641c\u7d22\u4ea7\u751f\u592a\u77ed\u7684\u7ffb\u8bd1\uff08\u5373\u4f7f\u5f97\u5206\u5f52\u4e00\u5316\uff09 \u5728\u95f2\u804a\u8bdd\u7b49\u5f00\u653e\u5f0f\u4efb\u52a1\u4e2d\uff0c\u5927\u7684 k \u4f1a\u8f93\u51fa\u975e\u5e38\u901a\u7528\u7684\u53e5\u5b50\uff08\u89c1\u4e0b\u4e00\u5f20\u5e7b\u706f\u7247\uff09 Effect of beam size in chitchat dialogue \u4f4e beam size \u66f4\u5173\u4e8e\u8bdd\u9898\u4f46\u662f\u6ca1\u6709\u610f\u4e49\u7684 \u8bed\u6cd5\u5dee\uff0c\u91cd\u590d\u7684 \u9ad8 beam size \u5b89\u5168\u7684\u53cd\u5e94 \u201c\u6b63\u786e\u201d\u7684\u53cd\u5e94 \u4f46\u5b83\u662f\u901a\u7528\u7684\uff0c\u4e0d\u592a\u76f8\u5173 Sampling-based decoding \u7eaf\u91c7\u6837 \u5728\u6bcf\u4e2a\u6b65\u9aa4t\uff0c\u4ece\u6982\u7387\u5206\u5e03 \\(P_t\\) \u4e2d\u968f\u673a\u62bd\u6837\u4ee5\u83b7\u53d6\u4f60\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002 \u50cf\u8d2a\u5a6a\u7684\u89e3\u7801\uff0c\u4f46\u662f\u662f\u91c7\u6837\u800c\u4e0d\u662fargmax\u3002 Top-n \u91c7\u6837 \u5728\u6bcf\u4e2a\u6b65\u9aa4 t \uff0c\u4ece \\(P_t\\) \u7684\u524d n \u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\u4e2d\uff0c\u8fdb\u884c\u968f\u673a\u91c7\u6837\uff08\u5373\u82e5V = 10, n = 2\uff0c\u5c31\u76f8\u5f53\u4e8e\u628a\u9009\u62e9\u8303\u56f4\u9650\u5b9a\u5728\u4e86\u6982\u7387\u6392\u540d\u524d\u4e24\u4e2a\u7684\u5355\u8bcd\uff0c\u518d\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u505a\u91c7\u6837\u5f97\u5230\u4e00\u4e2a\u5355\u8bcd\uff09 \u4e0e\u7eaf\u91c7\u6837\u7c7b\u4f3c\uff0c\u4f46\u622a\u65ad\u6982\u7387\u5206\u5e03 \u6b64\u65f6\uff0cn = 1 \u662f\u8d2a\u5a6a\u641c\u7d22\uff0cn = V \u662f\u7eaf\u91c7\u6837 \u589e\u52a0n\u4ee5\u83b7\u5f97\u66f4\u591a\u6837\u5316/\u98ce\u9669\u7684\u8f93\u51fa \u51cf\u5c11n\u4ee5\u83b7\u5f97\u66f4\u901a\u7528/\u5b89\u5168\u7684\u8f93\u51fa \u8fd9\u4e24\u8005\u90fd\u66f4\u591a\u6bd4\u5149\u675f\u641c\u7d22\u66f4\u6709\u6548\u7387\uff0c\u4e0d\u7528\u8ddf\u8e2a\u591a\u4e2a\u5047\u8bbe Softmax temperature \u56de\u987e\uff1a\u5728\u65f6\u95f4\u6b65 t \uff0c\u8bed\u8a00\u6a21\u578b\u901a\u8fc7\u5bf9\u5206\u6570\u5411\u91cf \\(s \\in \\mathbb{R}^{|V|}\\) \u4f7f\u7528 softmax \u51fd\u6570\u8ba1\u7b97\u51fa\u6982\u7387\u5206\u5e03 \\(P_t\\) \\[ P_{t}(w)=\\frac{\\exp \\left(s_{w}\\right)}{\\sum_{w^{\\prime} \\in V} \\exp \\left(s_{w^{\\prime}}\\right)} \\] \u4f60\u53ef\u4ee5\u5bf9 softmax \u51fd\u6570\u65f6\u5019\u7528\u6e29\u5ea6\u8d85\u53c2\u6570 \\[ P_{t}(w)=\\frac{\\exp \\left(s_{w} / \\tau\\right)}{\\sum_{w^{\\prime} \\in V} \\exp \\left(s_{w^{\\prime}} / \\tau\\right)} \\] \u63d0\u9ad8\u6e29\u5ea6 \\(\\tau\\) : \\(P_t\\) \u53d8\u5f97\u66f4\u5747\u5300 \u56e0\u6b64\u8f93\u51fa\u66f4\u591a\u6837\u5316\uff08\u6982\u7387\u5206\u5e03\u5728\u8bcd\u6c47\u4e2d\uff09 \u964d\u4f4e\u6e29\u5ea6 \\(\\tau\\) : \\(P_t\\) \u53d8\u5f97\u66f4\u5c16\u9510 \u56e0\u6b64\u8f93\u51fa\u7684\u591a\u6837\u6027\u8f83\u5c11\uff08\u6982\u7387\u96c6\u4e2d\u5728\u9876\u5c42\u8bcd\u6c47\u4e0a\uff09 Decoding algorithms: in summary \u8d2a\u5fc3\u89e3\u7801 \u662f\u4e00\u79cd\u7b80\u5355\u7684\u8bd1\u7801\u65b9\u6cd5\uff1b\u7ed9\u4f4e\u8d28\u91cf\u8f93\u51fa Beam\u641c\u7d22 (\u7279\u522b\u662f\u9ad8beam\u5927\u5c0f)\u641c\u7d22\u9ad8\u6982\u7387\u8f93\u51fa \u6bd4\u8d2a\u5a6a\u63d0\u4f9b\u66f4\u597d\u7684\u8d28\u91cf\uff0c\u4f46\u662f\u5982\u679c Beam \u5c3a\u5bf8\u592a\u5927\uff0c\u53ef\u80fd\u4f1a\u8fd4\u56de\u9ad8\u6982\u7387\u4f46\u4e0d\u5408\u9002\u7684\u8f93\u51fa(\u5982\u901a\u7528\u7684\u6216\u662f\u77ed\u7684) \u62bd\u6837\u65b9\u6cd5 \u6765\u83b7\u5f97\u66f4\u591a\u7684\u591a\u6837\u6027\u548c\u968f\u673a\u6027 \u9002\u5408\u5f00\u653e\u5f0f/\u521b\u610f\u4ee3(\u8bd7\u6b4c,\u6545\u4e8b) Top-n\u4e2a\u62bd\u6837\u5141\u8bb8\u60a8\u63a7\u5236\u591a\u6837\u6027 Softmax \u6e29\u5ea6\u63a7\u5236 \u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u591a\u6837\u6027 \u5b83\u4e0d\u662f\u4e00\u4e2a\u89e3\u7801\u7b97\u6cd5\uff01\u8fd9\u79cd\u6280\u672f\u53ef\u4ee5\u5e94\u7528\u5728\u4efb\u4f55\u89e3\u7801\u7b97\u6cd5\u3002 Section 2: NLG tasks and neural approaches to them \u00b6 List of summarization datasets, papers, and codebases: https://github.com/mathsyouth/awesome-text-summarization Summarization: task definition \u4efb\u52a1\uff1a\u7ed9\u5b9a\u8f93\u5165\u6587\u672cx\uff0c\u5199\u51fa\u66f4\u77ed\u7684\u6458\u8981 y \u5e76\u5305\u542b x \u7684\u4e3b\u8981\u4fe1\u606f \u6458\u8981\u53ef\u4ee5\u662f\u5355\u6587\u6863\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u6587\u6863 \u5355\u6587\u6863\u610f\u5473\u7740\u6211\u4eec\u5199\u4e00\u4e2a\u6587\u6863 x \u7684\u6458\u8981 y \u591a\u6587\u6863\u610f\u5473\u7740\u6211\u4eec\u5199\u4e00\u4e2a\u591a\u4e2a\u6587\u6863 \\(x_{1}, \\ldots, x_{n}\\) \u7684\u6458\u8981y \u901a\u5e38 \\(x_{1}, \\ldots, x_{n}\\) \u6709\u91cd\u53e0\u7684\u5185\u5bb9\uff1a\u5982\u5bf9\u540c\u4e00\u4e8b\u4ef6\u7684\u65b0\u95fb\u6587\u7ae0 \u5728\u5355\u6587\u6863\u6458\u8981\uff0c\u6570\u636e\u96c6\u4e2d\u7684\u6e90\u6587\u6863\u5177\u6709**\u4e0d\u540c\u957f\u5ea6\u548c\u98ce\u683c** Gigaword : \u65b0\u95fb\u6587\u7ae0\u7684\u524d\u4e00\u4e24\u53e5 \\(\\to\\) \u6807\u9898(\u5373\u53e5\u5b50\u538b\u7f29) LCSTS (\u4e2d\u6587\u5fae\u535a)\uff1a\u6bb5\u843d \\(\\to\\) \u53e5\u5b50\u6458\u8981 NYT, CNN/DailyMail : \u65b0\u95fb\u6587\u7ae0 \\(\\to\\) (\u591a\u4e2a)\u53e5\u5b50\u6458\u8981 Wikihow (new!) : \u5b8c\u6574\u7684 how-to \u6587\u7ae0 \\(\\to\\) \u6458\u8981\u53e5\u5b50 \u53e5\u5b50\u7b80\u5316 \u662f\u4e00\u4e2a\u4e0d\u540c\u4f46\u76f8\u5173\u7684\u4efb\u52a1\uff1a\u5c06\u6e90\u6587\u672c\u6539\u5199\u4e3a\u66f4\u7b80\u5355\uff08\u6709\u65f6\u662f\u66f4\u77ed\uff09\u7684\u7248\u672c Simple Wikipedia\uff1a\u6807\u51c6\u7ef4\u57fa\u767e\u79d1\u53e5\u5b50 \\(\\to\\) \u7b80\u5355\u7248\u672c Newsela\uff1a\u65b0\u95fb\u6587\u7ae0 \\(\\to\\) \u4e3a\u513f\u7ae5\u5199\u7684\u7248\u672c Summarization: two main strategies \u62bd\u53d6\u5f0f\u6458\u8981 Extractive summarization \u9009\u62e9\u90e8\u5206 (\u901a\u5e38\u662f\u53e5\u5b50)\u7684\u539f\u59cb\u6587\u672c\u6765\u5f62\u6210\u6458\u8981 \u66f4\u7b80\u5355 \u9650\u5b9a\u6027\u7684\uff08\u65e0\u9700\u89e3\u91ca\uff09 \u62bd\u8c61\u5f0f\u6458\u8981 Abstractive summarization \u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u751f\u6210\u6280\u672f \u751f\u6210\u65b0\u7684\u6587\u672c \u66f4\u56f0\u96be \u66f4\u591a\u53d8\uff08\u66f4\u4eba\u6027\u5316\uff09 Pre-neural summarization Diagram credit: Speech and Language Processing, Jurafsky and Martin Pre-neural\u6458\u8981\u7cfb\u7edf\u5927\u591a\u662f\u62bd\u53d6\u5f0f\u7684 \u7c7b\u4f3cPre-neural MT\uff0c\u4ed6\u4eec\u901a\u5e38\u6709\u4e00\u4e2a\u6d41\u6c34\u7ebf \u5185\u5bb9\u9009\u62e9 Content selection \uff1a\u9009\u62e9\u4e00\u4e9b\u53e5\u5b50 \u4fe1\u606f\u6392\u5e8f Information ordering \uff1a\u4e3a\u9009\u62e9\u7684\u53e5\u5b50\u6392\u5e8f \u53e5\u5b50\u5b9e\u73b0 Sentence realization \uff1a\u7f16\u8f91\u5e76\u8f93\u51fa\u53e5\u5b50\u5e8f\u5217\u4f8b\u5982\uff0c\u7b80\u5316\u3001\u5220\u9664\u90e8\u5206\u3001\u4fee\u590d\u8fde\u7eed\u6027\u95ee\u9898) Pre-neural \u5185\u5bb9\u9009\u62e9 \u7b97\u6cd5 \u53e5\u5b50\u5f97\u5206\u51fd\u6570 \u53ef\u4ee5\u6839\u636e \u4e3b\u9898\u5173\u952e\u8bcd\uff0c\u901a\u8fc7\u8ba1\u7b97\u5982tf-idf\u7b49 \u7279\u6027\uff0c\u4f8b\u5982\u8fd9\u53e5\u8bdd\u51fa\u73b0\u5728\u6587\u6863\u7684\u54ea\u91cc \u56fe\u7b97\u6cd5 \u5c06\u6587\u6863\u4e3a\u4e00\u7ec4\u53e5\u5b50(\u8282\u70b9)\uff0c\u6bcf\u5bf9\u53e5\u5b50\u4e4b\u95f4\u5b58\u5728\u8fb9 \u8fb9\u7684\u6743\u91cd\u4e0e\u53e5\u5b50\u76f8\u4f3c\u5ea6\u6210\u6b63\u6bd4 \u4f7f\u7528\u56fe\u7b97\u6cd5\u6765\u8bc6\u522b\u56fe\u4e2d\u6700\u91cd\u8981\u7684\u53e5\u5b50 Summarization evaluation: ROUGE ROUGE (Recall-Oriented Understudy for Gisting Evaluation) ROUGE: A Package for Automatic Evaluation of Summaries, Lin, 2004 http://www.aclweb.org/anthology/W04-1013 \u7c7b\u4f3c\u4e8e BLEU\uff0c\u662f\u57fa\u4e8e n-gram \u8986\u76d6\u7684\u7b97\u6cd5\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a \u6ca1\u6709\u7b80\u6d01\u60e9\u7f5a \u57fa\u4e8e\u53ec\u56de\u7387 recall\uff0cBLEU \u662f\u57fa\u4e8e\u51c6\u786e\u7387\u7684 \u53ef\u4ee5\u8bf4\uff0c\u51c6\u786e\u7387\u5bf9\u4e8eMT \u6765\u8bf4\u662f\u66f4\u91cd\u8981\u7684(\u901a\u8fc7\u6dfb\u52a0\u7b80\u6d01\u60e9\u7f5a\u6765\u4fee\u6b63\u7ffb\u8bd1\u8fc7\u77ed)\uff0c\u53ec\u56de\u7387\u5bf9\u4e8e\u6458\u8981\u6765\u8bf4\u662f\u66f4\u91cd\u8981\u7684(\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u6700\u5927\u957f\u5ea6\u9650\u5236)\uff0c\u56e0\u4e3a\u9700\u8981\u6293\u4f4f\u91cd\u8981\u7684\u4fe1\u606f \u4f46\u662f\uff0c\u901a\u5e38\u4f7f\u7528 F1(\u7ed3\u5408\u4e86\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387) Neural summarization (2015 - present) 2015: Rush et al. publish the first seq2seq summarization paper \u5355\u6587\u6863\u6458\u8981\u6458\u8981\u662f\u4e00\u9879\u7ffb\u8bd1\u4efb\u52a1\uff01 \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684 seq2seq + attention NMT \u65b9\u6cd5 A Neural Attention Model for Abstractive Sentence Summarization, Rush et al, 2015 https://arxiv.org/pdf/1509.00685.pdf \u81ea2015\u5e74\u4ee5\u6765\uff0c\u6709\u4e86\u66f4\u591a\u7684\u53d1\u5c55 \u4f7f\u5176\u66f4\u5bb9\u6613\u590d\u5236 \u4e5f\u9632\u6b62\u592a\u591a\u7684\u590d\u5236 \u5206\u5c42/\u591a\u5c42\u6b21\u7684\u6ce8\u610f\u529b\u673a\u5236 \u66f4\u591a\u7684 \u5168\u5c40/\u9ad8\u7ea7 \u7684\u5185\u5bb9\u9009\u62e9 \u4f7f\u7528 RL \u76f4\u63a5\u6700\u5927\u5316 ROUGE \u6216\u8005\u5176\u4ed6\u79bb\u6563\u76ee\u6807\uff08\u4f8b\u5982\u957f\u5ea6\uff09 \u590d\u5174 pre-neural \u60f3\u6cd5(\u4f8b\u5982\u56fe\u7b97\u6cd5\u7684\u5185\u5bb9\u9009\u62e9)\uff0c\u628a\u5b83\u4eec\u53d8\u6210\u795e\u7ecf\u7cfb\u7edf Neural summarization: copy mechanisms Seq2seq+attention systems \u5584\u4e8e\u751f\u6210\u6d41\u7545\u7684\u8f93\u51fa\uff0c\u4f46\u662f\u4e0d\u64c5\u957f\u6b63\u786e\u7684\u590d\u5236\u7ec6\u8282(\u5982\u7f55\u89c1\u5b57) \u590d\u5236\u673a\u5236\u4f7f\u7528\u6ce8\u610f\u529b\u673a\u5236\uff0c\u4f7fseq2seq\u7cfb\u7edf\u5f88\u5bb9\u6613\u4ece\u8f93\u5165\u590d\u5236\u5355\u8bcd\u548c\u77ed\u8bed\u5230\u8f93\u51fa \u663e\u7136\u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\u6458\u8981 \u5141\u8bb8\u590d\u5236\u548c\u521b\u9020\u7ed9\u4e86\u6211\u4eec\u4e00\u4e2a\u6df7\u5408\u4e86\u62bd\u53d6/\u62bd\u8c61\u5f0f\u7684\u65b9\u6cd5 There are several papers proposing copy mechanism variants: Language as a Latent Variable: Discrete Generative Models for Sentence Compression, Miao et al, 2016 https://arxiv.org/pdf/1609.07317.pdf Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond, Nallapati et al, 2016 https://arxiv.org/pdf/1602.06023.pdf Incorporating Copying Mechanism in Sequence-to-Sequence Learning, Gu et al, 2016 https://arxiv.org/pdf/1603.06393.pdf etc Get To The Point: Summarization with Pointer-Generator Networks, See et al, 2017 https://arxiv.org/pdf/1704.04368.pdf \u590d\u5236\u673a\u5236\u7684\u5927\u95ee\u9898 \u4ed6\u4eec\u590d\u5236\u592a\u591a \u4e3b\u8981\u662f\u957f\u77ed\u8bed\uff0c\u6709\u65f6\u751a\u81f3\u6574\u4e2a\u53e5\u5b50 \u4e00\u4e2a\u539f\u672c\u5e94\u8be5\u662f\u62bd\u8c61\u7684\u6458\u8981\u7cfb\u7edf\uff0c\u4f1a\u5d29\u6e83\u4e3a\u4e00\u4e2a\u4e3b\u8981\u662f\u62bd\u53d6\u7684\u7cfb\u7edf \u53e6\u4e00\u4e2a\u95ee\u9898 \u4ed6\u4eec\u4e0d\u5584\u4e8e\u6574\u4f53\u5185\u5bb9\u7684\u9009\u62e9\uff0c\u7279\u522b\u662f\u5982\u679c\u8f93\u5165\u6587\u6863\u5f88\u957f\u7684\u60c5\u51b5\u4e0b \u6ca1\u6709\u9009\u62e9\u5185\u5bb9\u7684\u603b\u4f53\u6218\u7565 Neural summarization: better content selection \u56de\u5fc6\uff1apre-neural\u6458\u8981\u662f\u4e0d\u540c\u9636\u6bb5\u7684\u5185\u5bb9\u9009\u62e9\u548c\u8868\u9762\u5b9e\u73b0(\u5373\u6587\u672c\u751f\u6210) \u6807\u51c6seq2seq + attention \u7684\u6458\u8981\u7cfb\u7edf\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u662f\u6df7\u5408\u5728\u4e00\u8d77\u7684 \u6bcf\u4e00\u6b65\u7684\u8bd1\u7801\u5668(\u5373\u8868\u9762\u5b9e\u73b0)\uff0c\u6211\u4eec\u4e5f\u80fd\u8fdb\u884c\u8bcd\u7ea7\u522b\u7684\u5185\u5bb9\u9009\u62e9(\u6ce8\u610f\u529b) \u8fd9\u662f\u4e0d\u597d\u7684\uff1a\u6ca1\u6709\u5168\u5c40\u5185\u5bb9\u9009\u62e9\u7b56\u7565 \u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\uff1a\u81ea\u4e0b\u800c\u4e0a\u7684\u6c47\u603b Bottom-up summarization \u5185\u5bb9\u9009\u62e9\u9636\u6bb5\uff1a\u4f7f\u7528\u4e00\u4e2a\u795e\u7ecf\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\u6765\u5c06\u5355\u8bcd\u6807\u6ce8\u4e3a include / don\u2019t-include \u81ea\u4e0b\u800c\u4e0a\u7684\u6ce8\u610f\u529b\u9636\u6bb5\uff1aseq2seq + attention \u7cfb\u7edf\u4e0d\u80fd\u5904\u7406 don\u2019t-include \u7684\u5355\u8bcd\uff08\u4f7f\u7528 mask \uff09 \u7b80\u5355\u4f46\u662f\u975e\u5e38\u6709\u6548\uff01 \u66f4\u597d\u7684\u6574\u4f53\u5185\u5bb9\u9009\u62e9\u7b56\u7565 \u51cf\u5c11\u957f\u5e8f\u5217\u7684\u590d\u5236(\u5373\u66f4\u6458\u8981\u7684\u8f93\u51fa) \u56e0\u4e3a\u957f\u5e8f\u5217\u4e2d\u5305\u542b\u4e86\u5f88\u591a don\u2019t-include \u7684\u5355\u8bcd\uff0c\u6240\u4ee5\u6a21\u578b\u5fc5\u987b\u5b66\u4f1a\u8df3\u8fc7\u8fd9\u4e9b\u5355\u8bcd\u5e76\u5c06\u90a3\u4e9b include \u7684\u5355\u8bcd\u8fdb\u884c\u6458\u8981\u4e0e\u7ec4\u5408 Neural summarization via Reinforcement Learning \u4f7f\u7528 RL \u76f4\u63a5\u4f18\u5316 ROUGE-L \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u6807\u51c6\u7684\u6700\u5927\u4f3c\u7136(ML)\u8bad\u7ec3\u4e0d\u80fd\u76f4\u63a5\u4f18\u5316ROUGE-L\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u4e0d\u53ef\u5fae\u51fd\u6570 \u6709\u8da3\u7684\u53d1\u73b0 \u4f7f\u7528RL\u4ee3\u66ffML\u53d6\u5f97\u66f4\u9ad8\u7684ROUGE\u5206\u6570\uff0c\u4f46\u662f\u4eba\u7c7b\u5224\u65ad\u7684\u5f97\u5206\u8d8a\u4f4e \u6df7\u5408\u6a21\u578b\u6700\u597d A Deep Reinforced Model for Abstractive Summarization, Paulus et al, 2017 https://arxiv.org/pdf/1705.04304.pdf Blog post: https://www.salesforce.com/products/einstein/ai-research/tl-dr-reinforced-model-abstractive-summarization/ Dialogue \u201c\u5bf9\u8bdd\u201d\u5305\u62ec\u5404\u79cd\u5404\u6837\u7684\u8bbe\u7f6e \u9762\u5411\u4efb\u52a1\u7684\u5bf9\u8bdd \u8f85\u52a9 (\u5982\u5ba2\u6237\u670d\u52a1\u3001\u7ed9\u4e88\u5efa\u8bae\uff0c\u56de\u7b54\u95ee\u9898\uff0c\u5e2e\u52a9\u7528\u6237\u5b8c\u6210\u4efb\u52a1\uff0c\u5982\u8d2d\u4e70\u6216\u9884\u8ba2) \u5408\u4f5c (\u4e24\u4e2a\u4ee3\u7406\u901a\u8fc7\u5bf9\u8bdd\u5728\u4e00\u8d77\u89e3\u51b3\u4e00\u4e2a\u4efb\u52a1) \u5bf9\u6297 (\u4e24\u4e2a\u4ee3\u7406\u901a\u8fc7\u5bf9\u8bdd\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1) \u793e\u4f1a\u5bf9\u8bdd \u95f2\u804a (\u4e3a\u4e86\u597d\u73a9\u6216\u516c\u53f8) \u6cbb\u7597/\u7cbe\u795e\u5065\u5eb7 Pre- and post-neural dialogue \u7531\u4e8e\u5f00\u653e\u5f0f\u81ea\u7531NLG\u7684\u96be\u5ea6\uff0cpre-neural\u5bf9\u8bdd\u7cfb\u7edf\u7ecf\u5e38\u4f7f\u7528\u9884\u5b9a\u4e49\u7684\u6a21\u677f\uff0c\u6216\u4ece\u8bed\u6599\u5e93\u4e2d\u68c0\u7d22\u4e00\u4e2a\u9002\u5f53\u7684\u53cd\u5e94\u7684\u53cd\u5e94 \u6458\u8981\u8fc7\u53bb\u7684\u7814\u7a76\uff0c\u81ea2015\u5e74\u4ee5\u6765\u6709\u5f88\u591a\u8bba\u6587\u5c06seq2seq\u65b9\u6cd5\u5e94\u7528\u5230\u5bf9\u8bdd\uff0c\u4ece\u800c\u5bfc\u81f4\u81ea\u7531\u5bf9\u8bdd\u7cfb\u7edf\u5174\u8da3\u91cd\u71c3 \u4e00\u4e9b\u65e9\u671fseq2seq\u5bf9\u8bdd\u6587\u7ae0\u5305\u62ec A Neural Conversational Model, Vinyals et al, 2015 https://arxiv.org/pdf/1506.05869.pdf Neural Responding Machine for Short-Text Conversation, Shang et al, 2015 https://www.aclweb.org/anthology/P15-1152 Seq2seq-based dialogue \u7136\u800c\uff0c\u5f88\u5feb\u4ed6\u4eec\u5c31\u660e\u767d\u7b80\u5355\u7684\u5e94\u7528\u6807\u51c6seq2seq +attention \u7684\u65b9\u6cd5\u5728\u5bf9\u8bdd(\u95f2\u804a)\u4efb\u52a1\u4e2d\u6709\u4e25\u91cd\u7684\u666e\u904d\u7f3a\u9677 \u4e00\u822c\u6027/\u65e0\u804a\u7684\u53cd\u5e94 \u65e0\u5173\u7684\u53cd\u5e94(\u4e0e\u4e0a\u4e0b\u6587\u4e0d\u591f\u76f8\u5173) \u91cd\u590d \u7f3a\u4e4f\u4e0a\u4e0b\u6587(\u4e0d\u8bb0\u5f97\u8c08\u8bdd\u5386\u53f2) \u7f3a\u4e4f\u4e00\u81f4\u7684\u89d2\u8272\u4eba\u683c Irrelevant response problem \u95ee\u9898\uff1aseq2seq\u7ecf\u5e38\u4ea7\u751f\u4e0e\u7528\u6237\u65e0\u5173\u7684\u8bdd\u8bed \u8981\u4e48\u56e0\u4e3a\u5b83\u662f\u901a\u7528\u7684(\u4f8b\u5982,\u201c\u6211\u4e0d\u77e5\u9053\u201d) \u6216\u56e0\u4e3a\u6539\u53d8\u8bdd\u9898\u4e3a\u65e0\u5173\u7684\u4e00\u4e9b\u4e8b\u60c5 \u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff1a\u4e0d\u662f\u53bb\u4f18\u5316\u8f93\u5165 S \u5230\u56de\u7b54 T \u7684\u6620\u5c04\u6765\u6700\u5927\u5316\u7ed9\u5b9a S \u7684 T \u7684\u6761\u4ef6\u6982\u7387\uff0c\u800c\u662f\u53bb\u4f18\u5316\u8f93\u5165S \u548c\u56de\u590d T \u4e4b\u95f4\u7684\u6700\u5927\u4e92\u4fe1\u606fMaximum Mutual Information (MMI)\uff0c\u4ece\u800c\u6291\u5236\u6a21\u578b\u53bb\u9009\u62e9\u90a3\u4e9b\u672c\u6765\u5c31\u5f88\u5927\u6982\u7387\u7684\u901a\u7528\u53e5\u5b50 \\[ \\log \\frac{p(S, T)}{p(S) p(T)} \\] \\[ \\hat{T}=\\underset{T}{\\arg \\max }\\{\\log p(T | S)-\\log p(T)\\} \\] Genericness / boring response problem \u7b80\u5355\u7684\u6d4b\u8bd5\u65f6\u4fee\u590d \u76f4\u63a5\u5728Beam\u641c\u7d22\u4e2d\u589e\u5927\u7f55\u89c1\u5b57\u7684\u6982\u7387 \u4f7f\u7528\u62bd\u6837\u89e3\u7801\u7b97\u6cd5\u800c\u4e0d\u662fBeam\u641c\u7d22 \u6761\u4ef6\u4fee\u590d \u7528\u4e00\u4e9b\u989d\u5916\u7684\u5185\u5bb9\u8bad\u7ec3\u89e3\u7801\u5668(\u5982\u62bd\u6837\u4e00\u4e9b\u5185\u5bb9\u8bcd\u5e76\u5904\u7406) \u8bad\u7ec3 retrieve-and-refine \u6a21\u578b\u800c\u4e0d\u662f generate-from-scratch \u6a21\u578b \u5373\u4ece\u8bed\u6599\u5e93\u91c7\u6837\u4eba\u7c7b\u8bdd\u8bed\u5e76\u7f16\u8f91\u4ee5\u9002\u5e94\u5f53\u524d\u7684\u573a\u666f \u8fd9\u901a\u5e38\u4ea7\u751f\u66f4\u52a0\u591a\u6837\u5316/\u4eba\u7c7b/\u6709\u8da3\u7684\u8bdd\u8bed\uff01 Repetition problem \u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848 \u76f4\u63a5\u5728 Beam \u641c\u7d22\u4e2d\u7981\u6b62\u91cd\u590dn-grams \u901a\u5e38\u975e\u5e38\u6709\u6548 \u66f4\u590d\u6742\u7684\u89e3\u51b3\u65b9\u6848 \u5728seq2seq\u4e2d\u8bad\u7ec3\u4e00\u4e2a\u8986\u76d6\u673a\u5236\uff0c\u8fd9\u662f\u5ba2\u89c2\u7684\uff0c\u53ef\u4ee5\u9632\u6b62\u6ce8\u610f\u529b\u673a\u5236\u591a\u6b21\u6ce8\u610f\u76f8\u540c\u7684\u5355\u8bcd \u5b9a\u4e49\u8bad\u7ec3\u76ee\u6807\u4ee5\u963b\u6b62\u91cd\u590d \u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u4e0d\u53ef\u5fae\u51fd\u6570\u751f\u6210\u7684\u8f93\u51fa\uff0c\u7136\u540e\u5c06\u9700\u8981\u4e00\u4e9b\u6280\u672f\u4f8b\u5982RL\u6765\u8bad\u7ec3 Lack of consistent persona problem 2016\u5e74\uff0c\u674e\u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2aseq2seq\u5bf9\u8bdd\u6a21\u5f0f\uff0c\u5b66\u4f1a\u5c06\u4e24\u4e2a\u5bf9\u8bdd\u4f19\u4f34\u7684\u89d2\u8272\u7f16\u7801\u4e3a\u5d4c \u751f\u6210\u7684\u8bdd\u8bed\u662f\u4ee5\u5d4c\u5165\u4e3a\u6761\u4ef6\u7684 \u6700\u8fd1\u6709\u4e00\u4e2a\u95f2\u804a\u7684\u6570\u636e\u96c6\u79f0\u4e3aPersonaChat\uff0c\u5305\u62ec\u6bcf\u4e00\u6b21\u4f1a\u8bdd\u7684\u89d2\u8272(\u63cf\u8ff0\u4e2a\u4eba\u7279\u8d28\u76845\u4e2a\u53e5\u5b50\u7684\u96c6\u5408) \u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u8ba9\u7814\u7a76\u4eba\u5458\u6784\u5efa persona-conditional \u5bf9\u8bdd\u4ee3\u7406 A Persona-Based Neural Conversation Model, Li et al 2016, https://arxiv.org/pdf/1603.06155.pdf Personalizing Dialogue Agents: I have a dog, do you have pets too?, Zhang et al, 2018 https://arxiv.org/pdf/1801.07243.pdf Negotiation dialogue 2017\u5e74\uff0cLewis et al\u6536\u96c6\u8c08\u5224\u5bf9\u8bdd\u6570\u636e\u96c6 \u4e24\u4e2a\u4ee3\u7406\u534f\u5546\u8c08\u5224\u5bf9\u8bdd(\u901a\u8fc7\u81ea\u7136\u8bed\u8a00)\u5982\u4f55\u5206\u914d\u4e00\u7ec4\u9879\u76ee \u4ee3\u7406\u5bf9\u9879\u76ee\u6709\u4e0d\u540c\u7684\u4f30\u503c\u51fd\u6570 \u4ee3\u7406\u4eba\u4f1a\u4e00\u76f4\u4ea4\u8c08\u76f4\u5230\u8fbe\u6210\u534f\u8bae Deal or No Deal? End-to-End Learning for Negotiation Dialogues, Lewis et al, 2017 https://arxiv.org/pdf/1706.05125.pdf \u4ed6\u4eec\u53d1\u73b0\u7528\u6807\u51c6\u7684\u6700\u5927\u4f3c\u7136(ML)\u6765\u8bad\u7ec3seq2seq\u7cfb\u7edf\u7684\u4ea7\u751f\u4e86\u6d41\u5229\u4f46\u662f\u7f3a\u4e4f\u7b56\u7565\u7684\u5bf9\u8bdd\u4ee3\u7406 \u548cPaulus\u7b49\u7684\u6458\u8981\u8bba\u6587\u4e00\u6837\uff0c\u4ed6\u4eec\u4f7f\u7528\u5f3a\u5316\u5b66\u4e60\u6765\u4f18\u5316\u79bb\u6563\u5956\u52b1(\u4ee3\u7406\u81ea\u5df1\u5728\u8bad\u7ec3\u81ea\u5df1) RL \u7684\u57fa\u4e8e\u76ee\u7684\u7684\u76ee\u6807\u51fd\u6570\u4e0e ML \u76ee\u6807\u51fd\u6570\u76f8\u7ed3\u5408 \u6f5c\u5728\u7684\u9677\u9631\uff1a\u5982\u679c\u4e24\u4e24\u5bf9\u8bdd\u65f6\uff0c\u4ee3\u7406\u4f18\u5316\u7684\u53ea\u662fRL\u76ee\u6807\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u504f\u79bb\u82f1\u8bed \u5728\u6d4b\u8bd5\u65f6\uff0c\u6a21\u578b\u901a\u8fc7\u8ba1\u7b97 rollouts\uff0c\u9009\u62e9\u53ef\u80fd\u7684\u53cd\u5e94\uff1a\u6a21\u62df\u5269\u4f59\u7684\u8c08\u8bdd\u548c\u9884\u671f\u7684\u56de\u62a5 2018\u5e74\uff0cYarats \u7b49\u63d0\u51fa\u4e86\u53e6\u4e00\u4e2a\u8c08\u5224\u4efb\u52a1\u7684\u5bf9\u8bdd\u6a21\u578b\uff0c\u5c06\u7b56\u7565\u548cNLG\u65b9\u9762\u5206\u5f00 \u6bcf\u4e2a\u8bdd\u8bed \\(x_t\\) \u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u79bb\u6563\u6f5c\u5728\u53d8\u91cf \\(z_t\\) \\(z_t\\) \u5b66\u4e60\u6210\u4e3a\u4e00\u4e2a\u5f88\u597d\u7684\u9884\u6d4b\u5bf9\u8bdd\u4e2d\u7684\u672a\u6765\u4e8b\u4ef6\u7684\u9884\u6d4b\u5668(\u672a\u6765\u7684\u6d88\u606f\uff0c\u7b56\u7565\u7684\u6700\u7ec8\u6536\u83b7)\uff0c\u4f46\u4e0d\u662f \\(x_t\\) \u672c\u8eab\u7684\u9884\u6d4b\u5668 \u8fd9\u610f\u5473\u7740 \\(z_t\\) \u5b66\u4f1a\u4ee3\u8868 \\(x_t\\) \u5bf9\u5bf9\u8bdd\u7684\u5f71\u54cd\uff0c\u800c\u4e0d\u662f \\(x_t\\) \u7684\u8bdd \u56e0\u6b64 \\(z_t\\) \u5c06\u4efb\u52a1\u7684\u7b56\u7565\u65b9\u9762\u4ece NLG\u65b9\u9762\u5206\u79bb\u51fa\u6765 \u8fd9\u5bf9\u53ef\u63a7\u5236\u6027\u3001\u53ef\u89e3\u91ca\u6027\u548c\u66f4\u5bb9\u6613\u5b66\u4e60\u7b56\u7565\u7b49\u662f\u6709\u7528\u7684 Hierarchical Text Generation and Planning for Strategic Dialogue, Yarats et al, 2018 https://arxiv.org/pdf/1712.05846.pdf Conversational question answering: CoQA \u4e00\u4e2a\u6765\u81ea\u65af\u5766\u798fNLP\u7684\u65b0\u6570\u636e\u96c6 \u4efb\u52a1\uff1a\u56de\u7b54\u5173\u4e8e\u4ee5\u4e00\u6bb5\u5bf9\u8bdd\u4e3a\u4e0a\u4e0b\u6587\u7684\u6587\u672c\u7684\u95ee\u9898 \u7b54\u6848\u5fc5\u987b\u5199\u6458\u8981\u5730(\u4e0d\u662f\u590d\u5236) QA / \u9605\u8bfb\u7406\u89e3\u4efb\u52a1\uff0c\u548c\u5bf9\u8bdd\u4efb\u52a1 CoQA: a Conversational Question Answering Challenge, Reddy et al, 2018 https://arxiv.org/pdf/1808.07042.pdf Storytelling \u795e\u7ecf\u8bb2\u6545\u4e8b\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u4f7f\u7528\u67d0\u79cd\u63d0\u793a \u7ed9\u5b9a\u56fe\u50cf\u751f\u6210\u7684\u6545\u4e8b\u60c5\u8282\u6bb5\u843d \u7ed9\u5b9a\u4e00\u4e2a\u7b80\u77ed\u7684\u5199\u4f5c\u63d0\u793a\u751f\u6210\u4e00\u4e2a\u6545\u4e8b \u7ed9\u5b9a\u8fc4\u4eca\u4e3a\u6b62\u7684\u6545\u4e8b\uff0c\u751f\u6210\u6545\u4e8b\u7684\u4e0b\u4e00\u4e2a\u53e5\u5b50\uff08\u6545\u4e8b\u7eed\u5199\uff09 \u8fd9\u548c\u524d\u4e24\u4e2a\u4e0d\u540c\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u5173\u5fc3\u7cfb\u7edf\u5728\u51e0\u4e2a\u751f\u6210\u7684\u53e5\u5b50\u4e0a\u7684\u6027\u80fd \u795e\u7ecf\u6545\u4e8b\u98de\u901f\u53d1\u5c55 \u7b2c\u4e00\u4e2a\u6545\u4e8b\u7814\u8ba8\u4f1a\u4e8e2018\u5e74\u4e3e\u884c \u5b83\u4e3e\u884c\u6bd4\u8d5b(\u4f7f\u7528\u4e94\u5f20\u56fe\u7247\u7684\u5e8f\u5217\u751f\u6210\u4e00\u4e2a\u6545\u4e8b) Generating a story from an image \u6709\u8da3\u7684\u662f\uff0c\u8fd9\u5e76\u4e0d\u662f\u76f4\u63a5\u7684\u76d1\u7763\u56fe\u50cf\u6807\u9898\u3002\u6ca1\u6709\u914d\u5bf9\u7684\u6570\u636e\u53ef\u4ee5\u5b66\u4e60\u3002 Generating Stories about Images, https://medium.com/@samim/generating-stories-about-images-d163ba41e4ed \u95ee\u9898\uff1a\u5982\u4f55\u89e3\u51b3\u7f3a\u4e4f\u5e76\u884c\u6570\u636e\u7684\u95ee\u9898 \u56de\u7b54\uff1a\u4f7f\u7528\u4e00\u4e2a\u901a\u7528\u7684 sentence-encoding space Skip-thought \u5411\u91cf\u662f\u4e00\u79cd\u901a\u7528\u7684\u53e5\u5b50\u5d4c\u5165\u65b9\u6cd5 \u60f3\u6cd5\u7c7b\u4f3c\u4e8e\u6211\u4eec\u5982\u4f55\u5b66\u901a\u8fc7\u9884\u6d4b\u5468\u56f4\u7684\u6587\u5b57\u6765\u5b66\u4e60\u5355\u8bcd\u7684\u5d4c\u5165 \u4f7f\u7528 COCO (\u56fe\u7247\u6807\u9898\u6570\u636e\u96c6)\uff0c\u5b66\u4e60\u4ece\u56fe\u50cf\u5230\u5176\u6807\u9898\u7684 Skip-thought \u7f16\u7801\u7684\u6620\u5c04 \u4f7f\u7528\u76ee\u6807\u6837\u5f0f\u8bed\u6599\u5e93(Taylor Swift lyrics)\uff0c\u8bad\u7ec3RNN-LM\uff0c \u5c06Skip-thought\u5411\u91cf\u89e3\u7801\u4e3a\u539f\u6587 \u628a\u4e24\u4e2a\u623f\u5728\u4e00\u8d77 Skip-Thought Vectors, Kiros 2015, https://arxiv.org/pdf/1506.06726v1.pdf Generating a story from a writing prompt 2018\u5e74\uff0cFan \u7b49\u53d1\u5e03\u4e86\u4e00\u4e2a\u65b0\u6545\u4e8b\u751f\u6210\u6570\u636e\u96c6 collected from Reddit\u2019s WritingPrompts subreddit. \u6bcf\u4e2a\u6545\u4e8b\u90fd\u6709\u4e00\u4e2a\u76f8\u5173\u7684\u7b80\u77ed\u5199\u4f5c\u63d0\u793a Fan \u7b49\u4e5f\u63d0\u51fa\u4e86\u4e00\u4e2a\u590d\u6742\u7684 seq2seq prompt-to-story \u6a21\u578b Hierarchical Neural Story Generation, Fan et al, 2018 https://arxiv.org/pdf/1805.04833.pdf convolutional-based \u8fd9\u4f7f\u5b83\u7684\u901f\u5ea6\u6bd4RNN-based seq2seq \u5c01\u95ed\u7684\u591a\u5934\u591a\u5c3a\u5ea6\u7684self-attention self-attention \u5bf9\u4e8e\u6355\u83b7\u8fdc\u7a0b\u4e0a\u4e0b\u6587\u800c\u8a00\u5341\u5206\u91cd\u8981 \u95e8\u63a7\u5141\u8bb8\u66f4\u6709\u9009\u62e9\u6027\u7684\u6ce8\u610f\u673a\u5236 \u4e0d\u540c\u7684\u6ce8\u610f\u529b\u5934\u5728\u4e0d\u540c\u7684\u5c3a\u5ea6\u4e0a\u6ce8\u610f\u4e0d\u540c\u7684\u4e1c\u897f\u2014\u2014\u8fd9\u610f\u5473\u7740\u6709\u4e0d\u540c\u7684\u6ce8\u610f\u673a\u5236\u7528\u4e8e\u68c0\u7d22\u7ec6\u7c92\u5ea6\u548c\u7c97\u7c92\u5ea6\u7684\u4fe1\u606f \u6a21\u578b\u878d\u5408 \u9884\u8bad\u7ec3\u4e00\u4e2aseq2seq\u6a21\u578b\uff0c\u7136\u540e\u8bad\u7ec3\u7b2c\u4e8c\u4e2a seq2seq \u6a21\u578b\u8bbf\u95ee\u7684\u7b2c\u4e00\u4e2a model \u7684\u9690\u72b6\u6001 \u60f3\u6cd5\u662f\uff0c\u7b2c\u4e00seq2seq\u6a21\u578b\u5b66\u4e60\u901a\u7528LM\uff0c\u7b2c\u4e8c\u4e2amodel\u5b66\u4e60\u57fa\u4e8e\u63d0\u793a\u7684\u6761\u4ef6 \u7ed3\u679c\u4ee4\u4eba\u5370\u8c61\u6df1\u523b \u4e0e\u63d0\u793a\u76f8\u5173 \u591a\u6837\u5316\uff0c\u5e76\u4e0d\u666e\u901a \u5728\u6587\u4f53\u4e0a\u620f\u5267\u6027 \u4f46\u662f \u4e3b\u8981\u662f\u6c1b\u56f4/\u63cf\u8ff0\u6027/\u573a\u666f\u8bbe\u5b9a\uff0c\u5f88\u5c11\u662f\u4e8b\u4ef6/\u60c5\u8282 \u751f\u6210\u66f4\u957f\u65f6\uff0c\u5927\u591a\u6570\u505c\u7559\u5728\u540c\u6837\u7684\u60f3\u6cd5\u5e76\u6ca1\u6709\u4ea7\u751f\u65b0\u7684\u60f3\u6cd5\u2014\u2014\u4e00\u81f4\u6027\u95ee\u9898 Challenges in storytelling \u7531\u795e\u7ecfLM\u751f\u6210\u7684\u6545\u4e8b\u542c\u8d77\u6765\u6d41\u7545\u2026\u4f46\u662f\u662f\u66f2\u6298\u7684\uff0c\u8352\u8c2c\u7684\uff0c\u60c5\u8282\u4e0d\u8fde\u8d2f\u7684 \u7f3a\u5931\u7684\u662f\u4ec0\u4e48\uff1f LMs\u5bf9\u5355\u8bcd\u5e8f\u5217\u8fdb\u884c\u5efa\u6a21\u3002\u6545\u4e8b\u662f\u4e8b\u4ef6\u5e8f\u5217 \u4e3a\u4e86\u8bb2\u4e00\u4e2a\u6545\u4e8b\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u548c\u6a21\u62df \u4e8b\u4ef6\u548c\u5b83\u4eec\u4e4b\u95f4\u7684\u56e0\u679c\u5173\u7cfb\u7ed3\u6784 \u4eba\u7269\uff0c\u4ed6\u4eec\u7684\u4e2a\u6027\u3001\u52a8\u673a\u3001\u5386\u53f2\u3001\u548c\u5176\u4ed6\u4eba\u7269\u4e4b\u95f4\u7684\u5173\u7cfb \u4e16\u754c(\u8c01\u3001\u662f\u4ec0\u4e48\u548c\u4e3a\u4ec0\u4e48) \u53d9\u4e8b\u7ed3\u6784(\u5982\u8bf4\u660e \\(\\to\\) \u51b2\u7a81 \\(\\to\\) \u89e3\u51b3) \u826f\u597d\u7684\u53d9\u4e8b\u539f\u5219(\u4e0d\u8981\u5f15\u5165\u4e00\u4e2a\u6545\u4e8b\u5143\u7d20\u7136\u540e\u4ece\u672a\u4f7f\u7528\u5b83) Event2event Story Generation Event Representations for Automated Story Generation with Deep Neural Nets, Martin et al, 2018 https://www.aaai.org/ocs/index.php/AAAI/AAAI18/paper/view/17046/15769 Structured Story Generation Strategies for Structuring Story Generation, Fan et al, 2019 https://arxiv.org/pdf/1902.01109.pdf Tracking events, entities, state, etc. \u65c1\u6ce8\uff1a\u5728\u795e\u7ecfNLU(\u81ea\u7136\u8bed\u8a00\u7406\u89e3)\u9886\u57df\uff0c\u5df2\u7ecf\u6709\u5927\u91cf\u5173\u4e8e\u8ddf\u8e2a\u4e8b\u4ef6/\u5b9e\u4f53/\u72b6\u6001\u7684\u5de5\u4f5c \u4f8b\u5982\uff0cYejin Choi\u2019s group* \u5f88\u591a\u5de5\u4f5c\u5728\u8fd9\u4e00\u9886\u57df \u5c06\u8fd9\u4e9b\u65b9\u6cd5\u5e94\u7528\u5230 NLG\u662f\u66f4\u52a0\u56f0\u96be\u7684 \u5982\u679c\u4f60\u7f29\u5c0f\u8303\u56f4\uff0c\u5219\u66f4\u53ef\u63a7\u7684 \u4e0d\u91c7\u7528\u81ea\u7136\u8bed\u8a00\u751f\u6210\u5f00\u653e\u57df\u7684\u6545\u4e8b\uff0c\u800c\u662f\u8ddf\u8e2a\u72b6\u6001 \u751f\u6210\u4e00\u4e2a\u914d\u65b9(\u8003\u8651\u5230\u56e0\u7d20)\uff0c\u8ddf\u8e2a\u56e0\u7d20\u7684\u72b6\u6001 Tracking world state while generating a recipe \u8fc7\u7a0b\u795e\u7ecf\u7f51\u7edc\uff1a\u7ed9\u5b9a\u56e0\u7d20\uff0c\u751f\u6210\u914d\u65b9\u6307\u793a \u663e\u5f0f\u8ddf\u8e2a\u6240\u6709\u56e0\u7d20\u7684\u72b6\u6001\uff0c\u5e76\u5229\u7528\u8fd9\u4e9b\u77e5\u8bc6\u6765\u51b3\u5b9a\u4e0b\u4e00\u6b65\u8981\u91c7\u53d6\u4ec0\u4e48\u884c\u52a8 Simulating Action Dynamics with Neural Process Networks, Bosselut et al, 2018 https://arxiv.org/pdf/1711.05313.pdf Poetry generation: Hafez Hafez\uff1aGhazvininejad et al \u7684\u8bd7\u6b4c\u7cfb\u7edf \u4e3b\u8981\u601d\u60f3\uff1a\u4f7f\u7528\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u53d7\u4f53(FSA)\u6765\u5b9a\u4e49\u6240\u6709\u53ef\u80fd\u7684\u5e8f\u5217\uff0c\u670d\u4ece\u5e0c\u671b\u6ee1\u8db3\u7684\u8282\u594f\u7ea6\u675f \u7136\u540e\u4f7f\u7528FSA\u7ea6\u675fRNN-LM\u7684\u8f93\u51fa \u4f8b\u5982 \u838e\u58eb\u6bd4\u4e9a\u7684\u5341\u56db\u884c\u8bd7\u662f14\u884c\u7684iambic pentameter \u6240\u4ee5\u838e\u58eb\u6bd4\u4e9a\u7684\u5341\u56db\u884c\u8bd7\u7684FSA\u662f \\(((01)^5)^{14}\\) \u5728Beam\u641c\u7d22\u89e3\u7801\u4e2d\uff0c\u53ea\u6709\u63a2\u7d22\u5c5e\u4e8eFSA\u7684\u5047\u8bbe Generating Topical Poetry, Ghazvininejad et al, 2016 http://www.aclweb.org/anthology/D16-1126 Hafez: an Interactive Poetry Generation System, Ghazvininejad et al, 2017 http://www.aclweb.org/anthology/P17-4008 \u5168\u7cfb\u7edf \u7528\u6237\u63d0\u4f9b\u4e3b\u9898\u5b57 \u5f97\u5230\u4e00\u4e2a\u4e0e\u4e3b\u9898\u76f8\u5173\u7684\u8bcd\u7684\u96c6\u5408 \u8bc6\u522b\u5c40\u90e8\u8bcd\u8bed\u62bc\u97f5\u3002\u8fd9\u5c06\u662f\u6bcf\u4e00\u884c\u7684\u7ed3\u675f \u4f7f\u7528\u53d7\u5236\u4e8eFSA\u7684RNN-LM\u751f\u6210\u8fd9\u9996\u8bd7 RNN-LM\u5411\u540e(\u81ea\u53f3\u5411\u5de6)\u3002\u8fd9\u662f\u5fc5\u8981\u7684,\u56e0\u4e3a\u6bcf\u4e00\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8bcd\u662f\u56fa\u5b9a\u7684\u3002 \u5728\u540e\u7eed\u7684\u4e00\u7bc7\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u5236\u4f5c\u4e86\u7cfb\u7edf\u4ea4\u4e92\u548c\u7528\u6237\u53ef\u63a7 \u63a7\u5236\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a\u5728Beam\u641c\u7d22\u4e2d\uff0c\u589e\u5927\u5177\u6709\u671f\u671b\u7279\u5f81\u7684\u5355\u8bcd\u7684\u5206\u6570 Poetry generation: Deep-speare \u66f4\u591a\u7684\u8bd7\u6b4c\u751f\u6210\u7684\u7aef\u5230\u7aef\u65b9\u6cd5(lau\u7b49) \u4e09\u4e2a\u7ec4\u4ef6 \u8bed\u8a00\u6a21\u578b pentameter model rhyme model \u97f5\u5f8b\u6a21\u578b\u2026\u2026 \u4f5c\u4e3a\u4e00\u4e2a\u591a\u4efb\u52a1\u5b66\u4e60\u95ee\u9898\u5171\u540c\u5b66\u4e60 \u4f5c\u8005\u53d1\u73b0 meter \u548c\u62bc\u97f5\u662f\u76f8\u5bf9\u5bb9\u6613\u7684\uff0c\u4f46\u751f\u6210\u7684\u8bd7\u6b4c\u4e0a\u6709\u4e9b\u7f3a\u4e4f\u201c\u60c5\u611f\u548c\u53ef\u8bfb\u6027\u201d Deep-speare: A joint neural model of poetic language, meter and rhyme, Lau et al, 2018 http://aclweb.org/anthology/P18-1181 Non-autoregressive generation for NMT Non-Autoregressive Neural Machine Translation, Gu et al, 2018 https://arxiv.org/pdf/1711.02281.pdf 2018\u5e74,\u987e\u7b49\u53d1\u8868\u4e86\u201cNon-autoregressive \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u201d\u6a21\u578b \u610f\u4e49\uff1a\u5b83\u4e0d\u662f\u6839\u636e\u4e4b\u524d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u4ece\u5de6\u5230\u53f3\u4ea7\u751f\u7ffb\u8bd1 \u5b83\u5e76\u884c\u751f\u6210\u7ffb\u8bd1 \u8fd9\u5177\u6709\u660e\u663e\u7684\u6548\u7387\u4f18\u52bf\uff0c\u4f46\u4ece\u6587\u672c\u751f\u6210\u7684\u89d2\u5ea6\u6765\u770b\u4e5f\u5f88\u6709\u8da3 \u67b6\u6784\u662f\u57fa\u4e8eTransformer \u7684\uff1b\u6700\u5927\u7684\u533a\u522b\u662f\uff0c\u89e3\u7801\u5668\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4b\u8bd5\u65f6\u5e76\u884c Section 3: NLG evaluation \u00b6 Automatic evaluation metrics for NLG \u57fa\u4e8e\u8bcd\u91cd\u53e0\u7684\u6307\u6807(BLEU\uff0cROUGE\uff0cMETROR\uff0cF1\uff0c\u7b49\u7b49) \u6211\u4eec\u77e5\u9053\u4ed6\u4eec\u4e0d\u9002\u5408\u673a\u5668\u7ffb\u8bd1 \u5bf9\u4e8e\u6458\u8981\u800c\u8a00\u662f\u66f4\u5dee\u7684\u8bc4\u4ef7\u6807\u51c6\uff0c\u56e0\u4e3a\u6458\u8981\u6bd4\u673a\u5668\u7ffb\u8bd1\u66f4\u5f00\u653e \u4e0d\u5e78\u7684\u662f\uff0c\u4e0e\u62bd\u8c61\u6458\u8981\u7cfb\u7edf\u76f8\u6bd4\uff0c\u63d0\u53d6\u6458\u8981\u7cfb\u7edf\u66f4\u53d7ROUGE\u9752\u7750 \u5bf9\u4e8e\u5bf9\u8bdd\u751a\u81f3\u66f4\u7cdf\uff0c\u8fd9\u6bd4\u6458\u8981\u66f4\u5f00\u653e \u7c7b\u4f3c\u7684\u4f8b\u5b50\u8fd8\u6709\u6545\u4e8b\u751f\u6210 Word overlap metrics are not good for dialogue How NOT To Evaluate Your Dialogue System: An Empirical Study of Unsupervised Evaluation Metrics for Dialogue Response Generation, Liu et al, 2017 https://arxiv.org/pdf/1603.08023.pdf \u4e0a\u56fe\u5c55\u793a\u4e86 BLEU-2\u3001Embedding average \u548c\u4eba\u7c7b\u8bc4\u4ef7\u7684\u76f8\u5173\u6027\u90fd\u4e0d\u9ad8 Why We Need New Evaluation Metrics for NLG, Novikova et al, 2017 https://arxiv.org/pdf/1707.06875.pdf Automatic evaluation metrics for NLG \u56f0\u60d1\u5ea6\uff1f \u6355\u6349\u4f60\u7684LM\u6709\u591a\u5f3a\u5927\uff0c\u4f46\u662f\u4e0d\u4f1a\u544a\u8bc9\u4f60\u5173\u4e8e\u751f\u6210\u7684\u4efb\u4f55\u4e8b\u60c5(\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u7684\u56f0\u60d1\u5ea6\u662f\u672a\u6539\u53d8\u7684\uff0c\u89e3\u7801\u7b97\u6cd5\u662f\u4e0d\u597d\u7684) \u8bcd\u5d4c\u5165\u57fa\u7840\u6307\u6807\uff1f \u4e3b\u8981\u601d\u60f3\uff1a\u6bd4\u8f83\u8bcd\u5d4c\u5165\u7684\u76f8\u4f3c\u5ea6(\u6216\u8bcd\u5d4c\u5165\u7684\u5747\u503c)\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u91cd\u53e0\u7684\u5355\u8bcd\u3002\u4ee5\u66f4\u7075\u6d3b\u7684\u65b9\u5f0f\u6355\u83b7\u8bed\u4e49\u3002 \u4e0d\u5e78\u7684\u662f,\u4ecd\u7136\u6ca1\u6709\u4e0e\u7c7b\u4f3c\u5bf9\u8bdd\u7684\u5f00\u653e\u5f0f\u4efb\u52a1\u7684\u4eba\u7c7b\u5224\u65ad\uff0c\u4ea7\u751f\u5f88\u597d\u7684\u8054\u7cfb \u6211\u4eec\u6ca1\u6709\u81ea\u52a8\u6307\u6807\u5145\u5206\u6355\u6349\u6574\u4f53\u8d28\u91cf(\u5373\u4ee3\u8868\u4eba\u7c7b\u7684\u8d28\u91cf\u5224\u65ad) \u4f46\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u66f4\u591a\u7684\u96c6\u4e2d\u81ea\u52a8\u5ea6\u91cf\u6765\u6355\u6349\u751f\u6210\u6587\u672c\u7684\u7279\u5b9a\u65b9\u9762 \u6d41\u5229\u6027(\u4f7f\u7528\u8bad\u7ec3\u597d\u7684LM\u8ba1\u7b97\u6982\u7387) \u6b63\u786e\u7684\u98ce\u683c(\u4f7f\u7528\u76ee\u6807\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u597d\u7684LM\u7684\u6982\u7387) \u591a\u6837\u6027(\u7f55\u89c1\u7684\u7528\u8bcd\uff0cn-grams \u7684\u72ec\u7279\u6027) \u76f8\u5173\u8f93\u5165(\u8bed\u4e49\u76f8\u4f3c\u6027\u5ea6\u91cf) \u7b80\u5355\u7684\u957f\u5ea6\u548c\u91cd\u590d \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6307\u6807\uff0c\u5982\u6458\u8981\u7684\u538b\u7f29\u7387 \u867d\u7136\u8fd9\u4e9b\u4e0d\u8861\u91cf\u6574\u4f53\u8d28\u91cf\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8ddf\u8e2a\u4e00\u4e9b\u6211\u4eec\u5173\u5fc3\u7684\u91cd\u8981\u54c1\u8d28 Human evaluation \u4eba\u7c7b\u7684\u5224\u65ad\u88ab\u8ba4\u4e3a\u662f\u9ec4\u91d1\u6807\u51c6 \u5f53\u7136\uff0c\u6211\u4eec\u77e5\u9053\u4eba\u7c7b\u8bc4\u4ef7\u662f\u7f13\u6162\u800c\u6602\u8d35\u7684 \u4f46\u8fd9\u4e9b\u95ee\u9898\uff1f \u5047\u5982\u4f60\u83b7\u5f97\u4eba\u7c7b\u7684\u8bc4\u4f30\uff1a\u4eba\u7c7b\u8bc4\u4f30\u89e3\u51b3\u4f60\u6240\u6709\u7684\u95ee\u9898\u5417\uff1f \u4e0d\uff01 \u8fdb\u884c\u4eba\u7c7b\u6709\u6548\u8bc4\u4f30\u975e\u5e38\u56f0\u96be \u4eba\u7c7b \u662f\u4e0d\u4e00\u81f4\u7684 \u53ef\u80fd\u662f\u4e0d\u5408\u903b\u8f91\u7684 \u5931\u53bb\u6ce8\u610f\u529b \u8bef\u89e3\u4e86\u4f60\u7684\u95ee\u9898 \u4e0d\u80fd\u603b\u662f\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4ed6\u4eec\u4f1a\u8fd9\u6837\u505a Detailed human eval of controllable chatbots \u5728\u804a\u5929\u673a\u5668\u4eba\u9879\u76ee\u4e0a\u5de5\u4f5c\u7684\u4e2a\u4eba\u7ecf\u9a8c\uff08PersonaChat\uff09 \u6211\u4eec\u7814\u7a76\u4e86\u53ef\u63a7\u6027\uff08\u7279\u522b\u662f\u63a7\u5236\u6240\u4ea7\u751f\u7684\u8bdd\u8bed\uff0c\u5982\u91cd\u590d\uff0c\u7279\u5f02\u6027\uff0c\u56de\u5e94\u76f8\u5173\u6027\u548c\u95ee\u9898\u8be2\u95ee\uff09 What makes a good conversation? How controllable attributes affect human judgments, See et al, 2019 https://arxiv.org/pdf/1902.08654.pdf \u5982\u4f55\u8981\u6c42\u4eba\u7684\u8d28\u91cf\u5224\u65ad\uff1f \u6211\u4eec\u5c1d\u8bd5\u4e86\u7b80\u5355\u7684\u6574\u4f53\u8d28\u91cf\uff08\u591a\u9879\u9009\u62e9\uff09\u95ee\u9898\uff0c\u4f8b\u5982\uff1a \u8fd9\u6b21\u5bf9\u8bdd\u6709\u591a\u597d\uff1f \u8fd9\u4e2a\u7528\u6237\u6709\u591a\u5438\u5f15\u4eba\uff1f \u8fd9\u4e9b\u7528\u6237\u4e2d\u54ea\u4e00\u4e2a\u7ed9\u51fa\u4e86\u66f4\u597d\u7684\u54cd\u5e94\uff1f \u25cf\u60a8\u60f3\u518d\u6b21\u4e0e\u8be5\u7528\u6237\u4ea4\u8c08\u5417\uff1f \u25cf\u60a8\u8ba4\u4e3a\u8be5\u7528\u6237\u662f\u4eba\u8fd8\u662f\u673a\u5668\u4eba\uff1f \u4e3b\u8981\u95ee\u9898\uff1a \u5fc5\u7136\u975e\u5e38\u4e3b\u89c2 \u56de\u7b54\u8005\u6709\u4e0d\u540c\u7684\u671f\u671b\uff1b\u8fd9\u4f1a\u5f71\u54cd\u4ed6\u4eec\u7684\u5224\u65ad \u5bf9\u95ee\u9898\u7684\u707e\u96be\u6027\u8bef\u89e3\uff08\u4f8b\u5982\u201c\u804a\u5929\u673a\u5668\u4eba\u975e\u5e38\u5438\u5f15\u4eba\uff0c\u56e0\u4e3a\u5b83\u603b\u662f\u56de\u5199\u201d\uff09 \u603b\u4f53\u8d28\u91cf\u53d6\u51b3\u4e8e\u8bb8\u591a\u6f5c\u5728\u56e0\u7d20\uff1b\u4ed6\u4eec\u5e94\u8be5\u5982\u4f55\u88ab\u79f0\u91cd\u548c/\u6216\u6bd4\u8f83\uff1f \u6700\u7ec8\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u8be6\u7ec6\u7684\u4eba\u7c7b\u8bc4\u4ef7\u4f53\u7cfb\u5206\u79bb\u7684\u91cd\u8981\u56e0\u7d20\uff0c\u6709\u52a9\u4e8e\u6574\u4f53chatbot\u8d28\u91cf \u53d1\u73b0\uff1a \u63a7\u5236\u91cd\u590d\u5bf9\u4e8e\u6240\u6709\u4eba\u7c7b\u5224\u65ad\u90fd\u975e\u5e38\u91cd\u8981 \u63d0\u51fa\u66f4\u591a\u95ee\u9898\u53ef\u4ee5\u63d0\u9ad8\u53c2\u4e0e\u5ea6 \u63a7\u5236\u7279\u5f02\u6027\uff08\u8f83\u5c11\u7684\u901a\u7528\u8bdd\u8bed\uff09\u63d0\u9ad8\u4e86\u804a\u5929\u673a\u5668\u4eba\u7684\u5438\u5f15\u529b\uff0c\u8da3\u5473\u6027\u548c\u611f\u77e5\u7684\u542c\u529b\u80fd\u529b\u3002 \u4f46\u662f\uff0c\u4eba\u7c7b\u8bc4\u4f30\u4eba\u5458\u5bf9\u98ce\u9669\u7684\u5bb9\u5fcd\u5ea6\u8f83\u4f4e\uff08\u4f8b\u5982\u65e0\u610f\u4e49\u6216\u975e\u6d41\u5229\u7684\u8f93\u51fa\uff09\u4e0e\u8f83\u4e0d\u901a\u7528\u7684\u673a\u5668\u4eba\u76f8\u5173\u8054 \u603b\u4f53\u5ea6\u91cf\u201c\u5438\u5f15\u529b\u201d\uff08\u5373\u4eab\u53d7\uff09\u5f88\u5bb9\u6613\u6700\u5927\u5316 - \u6211\u4eec\u7684\u673a\u5668\u4eba\u8fbe\u5230\u4e86\u8fd1\u4e4e\u4eba\u6027\u5316\u7684\u8868\u73b0 \u6574\u4f53\u5ea6\u91cf\u201c\u4eba\u6027\u5316\u201d\uff08\u5373\u56fe\u7075\u6d4b\u8bd5\uff09\u6839\u672c\u4e0d\u5bb9\u6613\u6700\u5927\u5316 - \u6240\u6709\u673a\u5668\u4eba\u8fdc\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u8868\u73b0 \u4eba\u6027\u5316\u4e0e\u4f1a\u8bdd\u8d28\u91cf\u4e0d\u4e00\u6837\uff01 \u4eba\u7c7b\u662f\u6b21\u4f18\u7684\u4f1a\u8bdd\u4e3b\u4e49\u8005\uff1a\u4ed6\u4eec\u5728\u6709\u8da3\uff0c\u6d41\u5229\uff0c\u503e\u542c\u4e0a\u5f97\u5206\u5f88\u4f4e\uff0c\u5e76\u4e14\u95ee\u7684\u95ee\u9898\u592a\u5c11 Possible new avenues for NLG eval? \u8bed\u6599\u5e93\u7ea7\u522b\u7684\u8bc4\u4ef7\u6307\u6807 \u5ea6\u91cf\u5e94\u72ec\u7acb\u5e94\u7528\u4e8e\u6d4b\u8bd5\u96c6\u7684\u6bcf\u4e2a\u793a\u4f8b\uff0c\u6216\u6574\u4e2a\u8bed\u6599\u5e93\u7684\u51fd\u6570 \u4f8b\u5982\uff0c\u5982\u679c\u5bf9\u8bdd\u6a21\u578b\u5bf9\u6d4b\u8bd5\u96c6\u4e2d\u7684\u6bcf\u4e00\u4e2a\u4f8b\u5b50\u56de\u7b54\u76f8\u540c\u7684\u901a\u7528\u7b54\u6848\uff0c\u5b83\u5e94\u8be5\u88ab\u60e9\u7f5a \u8bc4\u4f30\u8861\u91cf\u591a\u6837\u6027\u5b89\u5168\u6743\u8861\u7684\u8bc4\u4f30\u6307\u6807 \u514d\u8d39\u7684\u4eba\u7c7b\u8bc4\u4f30 \u6e38\u620f\u5316\uff1a\u4f7f\u4efb\u52a1\uff08\u4f8b\u5982\u4e0e\u804a\u5929\u673a\u5668\u4eba\u4ea4\u8c08\uff09\u53d8\u5f97\u6709\u8da3\uff0c\u8fd9\u6837\u4eba\u7c7b\u5c31\u53ef\u4ee5\u4e3a\u514d\u8d39\u63d0\u4f9b\u76d1\u7763\u548c\u9690\u5f0f\u8bc4\u4f30\uff0c\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807 \u5bf9\u6297\u6027\u9274\u522b\u5668\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807 \u6d4b\u8bd5NLG\u7cfb\u7edf\u662f\u5426\u80fd\u611a\u5f04\u7ecf\u8fc7\u8bad\u7ec3\u80fd\u591f\u533a\u5206\u4eba\u7c7b\u6587\u672c\u548cAI\u751f\u6210\u7684\u6587\u672c\u7684\u8bc6\u522b\u5668 Section 4: Thoughts on NLG research, current trends, and the future \u00b6 Exciting current trends in NLG \u5c06\u79bb\u6563\u6f5c\u5728\u53d8\u91cf\u7eb3\u5165NLG \u53ef\u4ee5\u5e2e\u52a9\u5728\u771f\u6b63\u9700\u8981\u5b83\u7684\u4efb\u52a1\u4e2d\u5efa\u6a21\u7ed3\u6784\uff0c\u4f8b\u5982\u8bb2\u6545\u4e8b\uff0c\u4efb\u52a1\u5bfc\u5411\u5bf9\u8bdd\u7b49 \u4e25\u683c\u7684\u4ece\u5de6\u5230\u53f3\u751f\u6210\u7684\u66ff\u4ee3\u65b9\u6848 \u5e76\u884c\u751f\u6210\uff0c\u8fed\u4ee3\u7ec6\u5316\uff0c\u81ea\u4e0a\u800c\u4e0b\u751f\u6210\u8f83\u957f\u7684\u6587\u672c \u66ff\u4ee3teacher forcing\u7684\u6700\u5927\u53ef\u80fd\u6027\u57f9\u8bad \u66f4\u5168\u9762\u7684\u53e5\u5b50\u7ea7\u522b\u7684\u76ee\u6807\u51fd\u6570\uff08\u800c\u4e0d\u662f\u5355\u8bcd\u7ea7\u522b\uff09 Neural NLG community is rapidly maturing \u5728NLP+\u6df1\u5ea6\u5b66\u4e60\u7684\u65e9\u671f\uff0c\u793e\u533a\u4e3b\u8981\u5c06\u6210\u529f\u7684\u975e\u673a\u52a8\u8f66\u4ea4\u901a\u65b9\u6cd5\u8f6c\u79fb\u5230NLG\u4efb\u52a1\u4e2d\u3002 \u73b0\u5728\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u521b\u65b0NLG\u6280\u672f\u51fa\u73b0\uff0c\u9488\u5bf9\u975eNMT\u751f\u6210\u73af\u5883\u3002 \u8d8a\u6765\u8d8a\u591a\uff08\u795e\u7ecf\uff09NLG\u7814\u8ba8\u4f1a\u548c\u7ade\u8d5b\uff0c\u7279\u522b\u5173\u6ce8\u5f00\u653e\u5f0fNLG NeuralGen workshop Storytelling workshop Alexa challenge ConvAI2 NeurIPS challenge \u8fd9\u4e9b\u5bf9\u4e8e\u7ec4\u7ec7\u793e\u533a\u63d0\u9ad8\u518d\u73b0\u6027\u3001\u6807\u51c6\u5316\u8bc4\u4f30\u7279\u522b\u6709\u7528 \u6700\u5927\u969c\u788d\u662f\u8bc4\u4f30 8 things I\u2019ve learnt from working in NLG \u4efb\u52a1\u8d8a\u5f00\u653e\uff0c\u4e00\u5207\u5c31\u8d8a\u56f0\u96be \u7ea6\u675f\u6709\u65f6\u662f\u53d7\u6b22\u8fce\u7684 \u9488\u5bf9\u7279\u5b9a\u6539\u8fdb\u7684\u76ee\u6807\u6bd4\u65e8\u5728\u63d0\u9ad8\u6574\u4f53\u751f\u6210\u8d28\u91cf\u66f4\u6613\u4e8e\u7ba1\u7406 \u5982\u679c\u4f60\u4f7f\u7528\u4e00\u4e2aLM\u4f5c\u4e3aNLG\uff1a\u6539\u8fdbLM\uff08\u5373\u56f0\u60d1\uff09\u6700\u6709\u53ef\u80fd\u63d0\u9ad8\u751f\u6210\u8d28\u91cf \u4f46\u8fd9\u5e76\u4e0d\u662f\u63d0\u9ad8\u751f\u6210\u8d28\u91cf\u7684\u552f\u4e00\u9014\u5f84 \u591a\u770b\u770b\u4f60\u7684\u8f93\u51fa \u4f60\u9700\u8981\u4e00\u4e2a\u81ea\u52a8\u5ea6\u91cf\uff0c\u5373\u4f7f\u5b83\u662f\u4e0d\u53d7\u5f71\u54cd\u7684 \u60a8\u53ef\u80fd\u9700\u8981\u51e0\u4e2a\u81ea\u52a8\u5ea6\u91cf \u5982\u679c\u4f60\u505a\u4e86\u4eba\u5de5\u8bc4\u4f30\uff0c\u8ba9\u95ee\u9898\u5c3d\u53ef\u80fd\u7684\u96c6\u4e2d \u5728\u4eca\u5929\u7684NLP + \u6df1\u5ea6\u5b66\u4e60\u548c NLG\u4e2d\uff0c\u518d\u73b0\u6027\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u95ee\u9898\u3002 \u8bf7\u516c\u5f00\u53d1\u5e03\u6240\u6709\u751f\u6210\u7684\u8f93\u51fa\u4ee5\u53ca\u60a8\u7684\u8bba\u6587 \u5728NLG\u5de5\u4f5c\u53ef\u80fd\u5f88\u4ee4\u4eba\u6cae\u4e27\uff0c\u4f46\u4e5f\u5f88\u6709\u8da3 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"15 Natural Language Generation"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#lecture-15-natural-language-generation","text":"Lecture Plan Recap what we already know about NLG More on decoding algorithms NLG tasks and neural approaches to them NLG evaluation: a tricky situation Concluding thoughts on NLG research, current trends, and the future Today we\u2019ll be learning about what\u2019s happening in the world of neural approaches to Natural Language Generation (NLG)","title":"Lecture 15 Natural Language Generation"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#section-1-recap-lms-and-decoding-algorithms","text":"Natural Language Generation (NLG) \u81ea\u7136\u8bed\u8a00\u751f\u6210\u6307\u7684\u662f\u6211\u4eec\u751f\u6210\uff08\u5373\u5199\u5165\uff09\u65b0\u6587\u672c\u7684\u4efb\u4f55\u8bbe\u7f6e NLG \u5305\u62ec\u4ee5\u4e0b\u6210\u5458\uff1a \u673a\u5668\u7ffb\u8bd1 \u6458\u8981 \u5bf9\u8bdd\uff08\u95f2\u804a\u548c\u57fa\u4e8e\u4efb\u52a1\uff09 \u521b\u610f\u5199\u4f5c\uff1a\u8bb2\u6545\u4e8b\uff0c\u8bd7\u6b4c\u521b\u4f5c \u81ea\u7531\u5f62\u5f0f\u95ee\u7b54\uff08\u5373\u751f\u6210\u7b54\u6848\uff0c\u4ece\u6587\u672c\u6216\u77e5\u8bc6\u5e93\u4e2d\u63d0\u53d6\uff09 \u56fe\u50cf\u5b57\u5e55 Recap \u8bed\u8a00\u5efa\u6a21 \u662f\u7ed9\u5b9a\u4e4b\u524d\u7684\u5355\u8bcd\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u4efb\u52a1\uff1a \\[ P\\left(y_{t} | y_{1}, \\ldots, y_{t-1}\\right) \\] \u4e00\u4e2a\u4ea7\u751f\u8fd9\u4e00\u6982\u7387\u5206\u5e03\u7684\u7cfb\u7edf\u53eb\u505a \u8bed\u8a00\u6a21\u578b \u5982\u679c\u7cfb\u7edf\u4f7f\u7528 RNN\uff0c\u5219\u88ab\u79f0\u4e3a RNN-LM \u6761\u4ef6\u8bed\u8a00\u5efa\u6a21 \u662f\u7ed9\u5b9a\u4e4b\u524d\u7684\u5355\u8bcd\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u8f93\u5165 \\(x\\) \uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u4efb\u52a1\uff1a \\[ P\\left(y_{t} | y_{1}, \\dots, y_{t-1}, x\\right) \\] \u6761\u4ef6\u8bed\u8a00\u5efa\u6a21\u4efb\u52a1\u7684\u4f8b\u5b50\uff1a \u673a\u5668\u7ffb\u8bd1 x=source sentence, y=target sentence \u6458\u8981 x=input text, y=summarized text \u5bf9\u8bdd x=dialogue history, y=next utterance Recap: training a (conditional) RNN-LM \u8fd9\u662f\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u4e2d\u7684\u4f8b\u5b50 \u5728\u8bad\u7ec3\u671f\u95f4,\u6211\u4eec\u5c06\u6b63\u786e\u7684(\u53c8\u540d\u5f15\u7528)\u76ee\u6807\u53e5\u5b50\u8f93\u5165\u89e3\u7801\u5668\uff0c\u800c\u4e0d\u8003\u8651 \u89e3\u7801\u5668\u9884\u6d4b\u7684\u3002\u8fd9\u79cd\u57f9\u8bad\u65b9\u6cd5\u79f0\u4e3a Teacher Forcing Recap: decoding algorithms \u95ee\u9898\uff1a\u8bad\u7ec3\u6761\u4ef6\u8bed\u8a00\u6a21\u578b\u540e\uff0c\u5982\u4f55\u4f7f\u7528\u5b83\u751f\u6210\u6587\u672c\uff1f \u7b54\u6848\uff1a\u89e3\u7801\u7b97\u6cd5\u662f\u4e00\u79cd\u7b97\u6cd5\uff0c\u7528\u4e8e\u4ece\u8bed\u8a00\u6a21\u578b\u751f\u6210\u6587\u672c \u6211\u4eec\u4e86\u89e3\u4e86\u4e24\u79cd\u89e3\u7801\u7b97\u6cd5 \u8d2a\u5a6a\u89e3\u7801 Beam \u641c\u7d22 Recap: greedy decoding \u4e00\u4e2a\u7b80\u5355\u7684\u7b97\u6cd5 \u5728\u6bcf\u4e00\u6b65\u4e2d\uff0c\u53d6\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff08\u5373argmax\uff09 \u5c06\u5176\u7528\u4f5c\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff0c\u5e76\u5728\u4e0b\u4e00\u6b65\u4e2d\u5c06\u5176\u4f5c\u4e3a\u8f93\u5165\u63d0\u4f9b \u7ee7\u7eed\u524d\u8fdb\uff0c\u76f4\u5230\u60a8\u4ea7\u751f \\(\\text{<END>}\\) \u6216\u8fbe\u5230\u67d0\u4e2a\u6700\u5927\u957f\u5ea6 \u7531\u4e8e\u7f3a\u4e4f\u56de\u6eaf\uff0c\u8f93\u51fa\u53ef\u80fd\u5f88\u5dee\uff08\u4f8b\u5982\uff0c\u4e0d\u5408\u8bed\u6cd5\uff0c\u4e0d\u81ea\u7136\uff0c\u8352\u8c2c\uff09 Recap: beam search decoding \u4e00\u79cd\u65e8\u5728\u901a\u8fc7\u4e00\u6b21\u8ddf\u8e2a\u591a\u4e2a\u53ef\u80fd\u7684\u5e8f\u5217\uff0c\u627e\u5230\u9ad8\u6982\u7387\u5e8f\u5217\uff08\u4e0d\u4e00\u5b9a\u662f\u6700\u4f73\u5e8f\u5217\uff09\u7684\u641c\u7d22\u7b97\u6cd5 \u6838\u5fc3\u601d\u60f3\uff1a\u5728\u89e3\u7801\u5668\u7684\u6bcf\u4e00\u6b65\uff0c\u8ddf\u8e2a k \u4e2a\u6700\u53ef\u80fd\u7684\u90e8\u5206\u5e8f\u5217\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a\u5047\u8bbe\uff09 k\u662f\u5149\u675f\u5927\u5c0f \u8fbe\u5230\u67d0\u4e2a\u505c\u6b62\u6807\u51c6\u540e\uff0c\u9009\u62e9\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217\uff08\u8003\u8651\u4e00\u4e9b\u957f\u5ea6\u8c03\u6574\uff09 What\u2019s the effect of changing beam size k? \u5c0f\u7684 k \u4e0e\u8d2a\u5fc3\u89e3\u7801\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\uff08k = 1\u65f6\u5c31\u662f\u8d2a\u5fc3\u89e3\u7801\uff09 \u4e0d\u7b26\u5408\u8bed\u6cd5\uff0c\u4e0d\u81ea\u7136\uff0c\u8352\u8c2c\uff0c\u4e0d\u6b63\u786e \u66f4\u5927\u7684 k \u610f\u5473\u7740\u60a8\u8003\u8651\u66f4\u591a\u5047\u8bbe \u589e\u52a0 k \u53ef\u4ee5\u51cf\u5c11\u4e0a\u8ff0\u4e00\u4e9b\u95ee\u9898 \u66f4\u5927\u7684 k \u5728\u8ba1\u7b97\u4e0a\u66f4\u6602\u8d35 \u4f46\u589e\u52a0 k \u53ef\u80fd\u4f1a\u5f15\u5165\u5176\u4ed6\u95ee\u9898\uff1a \u5bf9\u4e8eNMT\uff0c\u589e\u52a0 k \u592a\u591a\u4f1a\u964d\u4f4eBLEU\u8bc4\u5206(Tu et al, Koehnet al) beam size \u548c BLEU \u4e4b\u95f4\u5b58\u5728\u6700\u4f18\u6027\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u9ad8\u6982\u7387\u5e8f\u5217\u548c\u9ad8\u7684 BLEU \u5f97\u5206\u662f\u4e24\u4ef6\u72ec\u7acb\u7684\u4e8b\u60c5 \u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5927 k \u5149\u675f\u641c\u7d22\u4ea7\u751f\u592a\u77ed\u7684\u7ffb\u8bd1\uff08\u5373\u4f7f\u5f97\u5206\u5f52\u4e00\u5316\uff09 \u5728\u95f2\u804a\u8bdd\u7b49\u5f00\u653e\u5f0f\u4efb\u52a1\u4e2d\uff0c\u5927\u7684 k \u4f1a\u8f93\u51fa\u975e\u5e38\u901a\u7528\u7684\u53e5\u5b50\uff08\u89c1\u4e0b\u4e00\u5f20\u5e7b\u706f\u7247\uff09 Effect of beam size in chitchat dialogue \u4f4e beam size \u66f4\u5173\u4e8e\u8bdd\u9898\u4f46\u662f\u6ca1\u6709\u610f\u4e49\u7684 \u8bed\u6cd5\u5dee\uff0c\u91cd\u590d\u7684 \u9ad8 beam size \u5b89\u5168\u7684\u53cd\u5e94 \u201c\u6b63\u786e\u201d\u7684\u53cd\u5e94 \u4f46\u5b83\u662f\u901a\u7528\u7684\uff0c\u4e0d\u592a\u76f8\u5173 Sampling-based decoding \u7eaf\u91c7\u6837 \u5728\u6bcf\u4e2a\u6b65\u9aa4t\uff0c\u4ece\u6982\u7387\u5206\u5e03 \\(P_t\\) \u4e2d\u968f\u673a\u62bd\u6837\u4ee5\u83b7\u53d6\u4f60\u7684\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002 \u50cf\u8d2a\u5a6a\u7684\u89e3\u7801\uff0c\u4f46\u662f\u662f\u91c7\u6837\u800c\u4e0d\u662fargmax\u3002 Top-n \u91c7\u6837 \u5728\u6bcf\u4e2a\u6b65\u9aa4 t \uff0c\u4ece \\(P_t\\) \u7684\u524d n \u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\u4e2d\uff0c\u8fdb\u884c\u968f\u673a\u91c7\u6837\uff08\u5373\u82e5V = 10, n = 2\uff0c\u5c31\u76f8\u5f53\u4e8e\u628a\u9009\u62e9\u8303\u56f4\u9650\u5b9a\u5728\u4e86\u6982\u7387\u6392\u540d\u524d\u4e24\u4e2a\u7684\u5355\u8bcd\uff0c\u518d\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u505a\u91c7\u6837\u5f97\u5230\u4e00\u4e2a\u5355\u8bcd\uff09 \u4e0e\u7eaf\u91c7\u6837\u7c7b\u4f3c\uff0c\u4f46\u622a\u65ad\u6982\u7387\u5206\u5e03 \u6b64\u65f6\uff0cn = 1 \u662f\u8d2a\u5a6a\u641c\u7d22\uff0cn = V \u662f\u7eaf\u91c7\u6837 \u589e\u52a0n\u4ee5\u83b7\u5f97\u66f4\u591a\u6837\u5316/\u98ce\u9669\u7684\u8f93\u51fa \u51cf\u5c11n\u4ee5\u83b7\u5f97\u66f4\u901a\u7528/\u5b89\u5168\u7684\u8f93\u51fa \u8fd9\u4e24\u8005\u90fd\u66f4\u591a\u6bd4\u5149\u675f\u641c\u7d22\u66f4\u6709\u6548\u7387\uff0c\u4e0d\u7528\u8ddf\u8e2a\u591a\u4e2a\u5047\u8bbe Softmax temperature \u56de\u987e\uff1a\u5728\u65f6\u95f4\u6b65 t \uff0c\u8bed\u8a00\u6a21\u578b\u901a\u8fc7\u5bf9\u5206\u6570\u5411\u91cf \\(s \\in \\mathbb{R}^{|V|}\\) \u4f7f\u7528 softmax \u51fd\u6570\u8ba1\u7b97\u51fa\u6982\u7387\u5206\u5e03 \\(P_t\\) \\[ P_{t}(w)=\\frac{\\exp \\left(s_{w}\\right)}{\\sum_{w^{\\prime} \\in V} \\exp \\left(s_{w^{\\prime}}\\right)} \\] \u4f60\u53ef\u4ee5\u5bf9 softmax \u51fd\u6570\u65f6\u5019\u7528\u6e29\u5ea6\u8d85\u53c2\u6570 \\[ P_{t}(w)=\\frac{\\exp \\left(s_{w} / \\tau\\right)}{\\sum_{w^{\\prime} \\in V} \\exp \\left(s_{w^{\\prime}} / \\tau\\right)} \\] \u63d0\u9ad8\u6e29\u5ea6 \\(\\tau\\) : \\(P_t\\) \u53d8\u5f97\u66f4\u5747\u5300 \u56e0\u6b64\u8f93\u51fa\u66f4\u591a\u6837\u5316\uff08\u6982\u7387\u5206\u5e03\u5728\u8bcd\u6c47\u4e2d\uff09 \u964d\u4f4e\u6e29\u5ea6 \\(\\tau\\) : \\(P_t\\) \u53d8\u5f97\u66f4\u5c16\u9510 \u56e0\u6b64\u8f93\u51fa\u7684\u591a\u6837\u6027\u8f83\u5c11\uff08\u6982\u7387\u96c6\u4e2d\u5728\u9876\u5c42\u8bcd\u6c47\u4e0a\uff09 Decoding algorithms: in summary \u8d2a\u5fc3\u89e3\u7801 \u662f\u4e00\u79cd\u7b80\u5355\u7684\u8bd1\u7801\u65b9\u6cd5\uff1b\u7ed9\u4f4e\u8d28\u91cf\u8f93\u51fa Beam\u641c\u7d22 (\u7279\u522b\u662f\u9ad8beam\u5927\u5c0f)\u641c\u7d22\u9ad8\u6982\u7387\u8f93\u51fa \u6bd4\u8d2a\u5a6a\u63d0\u4f9b\u66f4\u597d\u7684\u8d28\u91cf\uff0c\u4f46\u662f\u5982\u679c Beam \u5c3a\u5bf8\u592a\u5927\uff0c\u53ef\u80fd\u4f1a\u8fd4\u56de\u9ad8\u6982\u7387\u4f46\u4e0d\u5408\u9002\u7684\u8f93\u51fa(\u5982\u901a\u7528\u7684\u6216\u662f\u77ed\u7684) \u62bd\u6837\u65b9\u6cd5 \u6765\u83b7\u5f97\u66f4\u591a\u7684\u591a\u6837\u6027\u548c\u968f\u673a\u6027 \u9002\u5408\u5f00\u653e\u5f0f/\u521b\u610f\u4ee3(\u8bd7\u6b4c,\u6545\u4e8b) Top-n\u4e2a\u62bd\u6837\u5141\u8bb8\u60a8\u63a7\u5236\u591a\u6837\u6027 Softmax \u6e29\u5ea6\u63a7\u5236 \u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u591a\u6837\u6027 \u5b83\u4e0d\u662f\u4e00\u4e2a\u89e3\u7801\u7b97\u6cd5\uff01\u8fd9\u79cd\u6280\u672f\u53ef\u4ee5\u5e94\u7528\u5728\u4efb\u4f55\u89e3\u7801\u7b97\u6cd5\u3002","title":"Section 1: Recap: LMs and decoding algorithms"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#section-2-nlg-tasks-and-neural-approaches-to-them","text":"List of summarization datasets, papers, and codebases: https://github.com/mathsyouth/awesome-text-summarization Summarization: task definition \u4efb\u52a1\uff1a\u7ed9\u5b9a\u8f93\u5165\u6587\u672cx\uff0c\u5199\u51fa\u66f4\u77ed\u7684\u6458\u8981 y \u5e76\u5305\u542b x \u7684\u4e3b\u8981\u4fe1\u606f \u6458\u8981\u53ef\u4ee5\u662f\u5355\u6587\u6863\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u6587\u6863 \u5355\u6587\u6863\u610f\u5473\u7740\u6211\u4eec\u5199\u4e00\u4e2a\u6587\u6863 x \u7684\u6458\u8981 y \u591a\u6587\u6863\u610f\u5473\u7740\u6211\u4eec\u5199\u4e00\u4e2a\u591a\u4e2a\u6587\u6863 \\(x_{1}, \\ldots, x_{n}\\) \u7684\u6458\u8981y \u901a\u5e38 \\(x_{1}, \\ldots, x_{n}\\) \u6709\u91cd\u53e0\u7684\u5185\u5bb9\uff1a\u5982\u5bf9\u540c\u4e00\u4e8b\u4ef6\u7684\u65b0\u95fb\u6587\u7ae0 \u5728\u5355\u6587\u6863\u6458\u8981\uff0c\u6570\u636e\u96c6\u4e2d\u7684\u6e90\u6587\u6863\u5177\u6709**\u4e0d\u540c\u957f\u5ea6\u548c\u98ce\u683c** Gigaword : \u65b0\u95fb\u6587\u7ae0\u7684\u524d\u4e00\u4e24\u53e5 \\(\\to\\) \u6807\u9898(\u5373\u53e5\u5b50\u538b\u7f29) LCSTS (\u4e2d\u6587\u5fae\u535a)\uff1a\u6bb5\u843d \\(\\to\\) \u53e5\u5b50\u6458\u8981 NYT, CNN/DailyMail : \u65b0\u95fb\u6587\u7ae0 \\(\\to\\) (\u591a\u4e2a)\u53e5\u5b50\u6458\u8981 Wikihow (new!) : \u5b8c\u6574\u7684 how-to \u6587\u7ae0 \\(\\to\\) \u6458\u8981\u53e5\u5b50 \u53e5\u5b50\u7b80\u5316 \u662f\u4e00\u4e2a\u4e0d\u540c\u4f46\u76f8\u5173\u7684\u4efb\u52a1\uff1a\u5c06\u6e90\u6587\u672c\u6539\u5199\u4e3a\u66f4\u7b80\u5355\uff08\u6709\u65f6\u662f\u66f4\u77ed\uff09\u7684\u7248\u672c Simple Wikipedia\uff1a\u6807\u51c6\u7ef4\u57fa\u767e\u79d1\u53e5\u5b50 \\(\\to\\) \u7b80\u5355\u7248\u672c Newsela\uff1a\u65b0\u95fb\u6587\u7ae0 \\(\\to\\) \u4e3a\u513f\u7ae5\u5199\u7684\u7248\u672c Summarization: two main strategies \u62bd\u53d6\u5f0f\u6458\u8981 Extractive summarization \u9009\u62e9\u90e8\u5206 (\u901a\u5e38\u662f\u53e5\u5b50)\u7684\u539f\u59cb\u6587\u672c\u6765\u5f62\u6210\u6458\u8981 \u66f4\u7b80\u5355 \u9650\u5b9a\u6027\u7684\uff08\u65e0\u9700\u89e3\u91ca\uff09 \u62bd\u8c61\u5f0f\u6458\u8981 Abstractive summarization \u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u751f\u6210\u6280\u672f \u751f\u6210\u65b0\u7684\u6587\u672c \u66f4\u56f0\u96be \u66f4\u591a\u53d8\uff08\u66f4\u4eba\u6027\u5316\uff09 Pre-neural summarization Diagram credit: Speech and Language Processing, Jurafsky and Martin Pre-neural\u6458\u8981\u7cfb\u7edf\u5927\u591a\u662f\u62bd\u53d6\u5f0f\u7684 \u7c7b\u4f3cPre-neural MT\uff0c\u4ed6\u4eec\u901a\u5e38\u6709\u4e00\u4e2a\u6d41\u6c34\u7ebf \u5185\u5bb9\u9009\u62e9 Content selection \uff1a\u9009\u62e9\u4e00\u4e9b\u53e5\u5b50 \u4fe1\u606f\u6392\u5e8f Information ordering \uff1a\u4e3a\u9009\u62e9\u7684\u53e5\u5b50\u6392\u5e8f \u53e5\u5b50\u5b9e\u73b0 Sentence realization \uff1a\u7f16\u8f91\u5e76\u8f93\u51fa\u53e5\u5b50\u5e8f\u5217\u4f8b\u5982\uff0c\u7b80\u5316\u3001\u5220\u9664\u90e8\u5206\u3001\u4fee\u590d\u8fde\u7eed\u6027\u95ee\u9898) Pre-neural \u5185\u5bb9\u9009\u62e9 \u7b97\u6cd5 \u53e5\u5b50\u5f97\u5206\u51fd\u6570 \u53ef\u4ee5\u6839\u636e \u4e3b\u9898\u5173\u952e\u8bcd\uff0c\u901a\u8fc7\u8ba1\u7b97\u5982tf-idf\u7b49 \u7279\u6027\uff0c\u4f8b\u5982\u8fd9\u53e5\u8bdd\u51fa\u73b0\u5728\u6587\u6863\u7684\u54ea\u91cc \u56fe\u7b97\u6cd5 \u5c06\u6587\u6863\u4e3a\u4e00\u7ec4\u53e5\u5b50(\u8282\u70b9)\uff0c\u6bcf\u5bf9\u53e5\u5b50\u4e4b\u95f4\u5b58\u5728\u8fb9 \u8fb9\u7684\u6743\u91cd\u4e0e\u53e5\u5b50\u76f8\u4f3c\u5ea6\u6210\u6b63\u6bd4 \u4f7f\u7528\u56fe\u7b97\u6cd5\u6765\u8bc6\u522b\u56fe\u4e2d\u6700\u91cd\u8981\u7684\u53e5\u5b50 Summarization evaluation: ROUGE ROUGE (Recall-Oriented Understudy for Gisting Evaluation) ROUGE: A Package for Automatic Evaluation of Summaries, Lin, 2004 http://www.aclweb.org/anthology/W04-1013 \u7c7b\u4f3c\u4e8e BLEU\uff0c\u662f\u57fa\u4e8e n-gram \u8986\u76d6\u7684\u7b97\u6cd5\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a \u6ca1\u6709\u7b80\u6d01\u60e9\u7f5a \u57fa\u4e8e\u53ec\u56de\u7387 recall\uff0cBLEU \u662f\u57fa\u4e8e\u51c6\u786e\u7387\u7684 \u53ef\u4ee5\u8bf4\uff0c\u51c6\u786e\u7387\u5bf9\u4e8eMT \u6765\u8bf4\u662f\u66f4\u91cd\u8981\u7684(\u901a\u8fc7\u6dfb\u52a0\u7b80\u6d01\u60e9\u7f5a\u6765\u4fee\u6b63\u7ffb\u8bd1\u8fc7\u77ed)\uff0c\u53ec\u56de\u7387\u5bf9\u4e8e\u6458\u8981\u6765\u8bf4\u662f\u66f4\u91cd\u8981\u7684(\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u6700\u5927\u957f\u5ea6\u9650\u5236)\uff0c\u56e0\u4e3a\u9700\u8981\u6293\u4f4f\u91cd\u8981\u7684\u4fe1\u606f \u4f46\u662f\uff0c\u901a\u5e38\u4f7f\u7528 F1(\u7ed3\u5408\u4e86\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387) Neural summarization (2015 - present) 2015: Rush et al. publish the first seq2seq summarization paper \u5355\u6587\u6863\u6458\u8981\u6458\u8981\u662f\u4e00\u9879\u7ffb\u8bd1\u4efb\u52a1\uff01 \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684 seq2seq + attention NMT \u65b9\u6cd5 A Neural Attention Model for Abstractive Sentence Summarization, Rush et al, 2015 https://arxiv.org/pdf/1509.00685.pdf \u81ea2015\u5e74\u4ee5\u6765\uff0c\u6709\u4e86\u66f4\u591a\u7684\u53d1\u5c55 \u4f7f\u5176\u66f4\u5bb9\u6613\u590d\u5236 \u4e5f\u9632\u6b62\u592a\u591a\u7684\u590d\u5236 \u5206\u5c42/\u591a\u5c42\u6b21\u7684\u6ce8\u610f\u529b\u673a\u5236 \u66f4\u591a\u7684 \u5168\u5c40/\u9ad8\u7ea7 \u7684\u5185\u5bb9\u9009\u62e9 \u4f7f\u7528 RL \u76f4\u63a5\u6700\u5927\u5316 ROUGE \u6216\u8005\u5176\u4ed6\u79bb\u6563\u76ee\u6807\uff08\u4f8b\u5982\u957f\u5ea6\uff09 \u590d\u5174 pre-neural \u60f3\u6cd5(\u4f8b\u5982\u56fe\u7b97\u6cd5\u7684\u5185\u5bb9\u9009\u62e9)\uff0c\u628a\u5b83\u4eec\u53d8\u6210\u795e\u7ecf\u7cfb\u7edf Neural summarization: copy mechanisms Seq2seq+attention systems \u5584\u4e8e\u751f\u6210\u6d41\u7545\u7684\u8f93\u51fa\uff0c\u4f46\u662f\u4e0d\u64c5\u957f\u6b63\u786e\u7684\u590d\u5236\u7ec6\u8282(\u5982\u7f55\u89c1\u5b57) \u590d\u5236\u673a\u5236\u4f7f\u7528\u6ce8\u610f\u529b\u673a\u5236\uff0c\u4f7fseq2seq\u7cfb\u7edf\u5f88\u5bb9\u6613\u4ece\u8f93\u5165\u590d\u5236\u5355\u8bcd\u548c\u77ed\u8bed\u5230\u8f93\u51fa \u663e\u7136\u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\u6458\u8981 \u5141\u8bb8\u590d\u5236\u548c\u521b\u9020\u7ed9\u4e86\u6211\u4eec\u4e00\u4e2a\u6df7\u5408\u4e86\u62bd\u53d6/\u62bd\u8c61\u5f0f\u7684\u65b9\u6cd5 There are several papers proposing copy mechanism variants: Language as a Latent Variable: Discrete Generative Models for Sentence Compression, Miao et al, 2016 https://arxiv.org/pdf/1609.07317.pdf Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond, Nallapati et al, 2016 https://arxiv.org/pdf/1602.06023.pdf Incorporating Copying Mechanism in Sequence-to-Sequence Learning, Gu et al, 2016 https://arxiv.org/pdf/1603.06393.pdf etc Get To The Point: Summarization with Pointer-Generator Networks, See et al, 2017 https://arxiv.org/pdf/1704.04368.pdf \u590d\u5236\u673a\u5236\u7684\u5927\u95ee\u9898 \u4ed6\u4eec\u590d\u5236\u592a\u591a \u4e3b\u8981\u662f\u957f\u77ed\u8bed\uff0c\u6709\u65f6\u751a\u81f3\u6574\u4e2a\u53e5\u5b50 \u4e00\u4e2a\u539f\u672c\u5e94\u8be5\u662f\u62bd\u8c61\u7684\u6458\u8981\u7cfb\u7edf\uff0c\u4f1a\u5d29\u6e83\u4e3a\u4e00\u4e2a\u4e3b\u8981\u662f\u62bd\u53d6\u7684\u7cfb\u7edf \u53e6\u4e00\u4e2a\u95ee\u9898 \u4ed6\u4eec\u4e0d\u5584\u4e8e\u6574\u4f53\u5185\u5bb9\u7684\u9009\u62e9\uff0c\u7279\u522b\u662f\u5982\u679c\u8f93\u5165\u6587\u6863\u5f88\u957f\u7684\u60c5\u51b5\u4e0b \u6ca1\u6709\u9009\u62e9\u5185\u5bb9\u7684\u603b\u4f53\u6218\u7565 Neural summarization: better content selection \u56de\u5fc6\uff1apre-neural\u6458\u8981\u662f\u4e0d\u540c\u9636\u6bb5\u7684\u5185\u5bb9\u9009\u62e9\u548c\u8868\u9762\u5b9e\u73b0(\u5373\u6587\u672c\u751f\u6210) \u6807\u51c6seq2seq + attention \u7684\u6458\u8981\u7cfb\u7edf\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u662f\u6df7\u5408\u5728\u4e00\u8d77\u7684 \u6bcf\u4e00\u6b65\u7684\u8bd1\u7801\u5668(\u5373\u8868\u9762\u5b9e\u73b0)\uff0c\u6211\u4eec\u4e5f\u80fd\u8fdb\u884c\u8bcd\u7ea7\u522b\u7684\u5185\u5bb9\u9009\u62e9(\u6ce8\u610f\u529b) \u8fd9\u662f\u4e0d\u597d\u7684\uff1a\u6ca1\u6709\u5168\u5c40\u5185\u5bb9\u9009\u62e9\u7b56\u7565 \u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\uff1a\u81ea\u4e0b\u800c\u4e0a\u7684\u6c47\u603b Bottom-up summarization \u5185\u5bb9\u9009\u62e9\u9636\u6bb5\uff1a\u4f7f\u7528\u4e00\u4e2a\u795e\u7ecf\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\u6765\u5c06\u5355\u8bcd\u6807\u6ce8\u4e3a include / don\u2019t-include \u81ea\u4e0b\u800c\u4e0a\u7684\u6ce8\u610f\u529b\u9636\u6bb5\uff1aseq2seq + attention \u7cfb\u7edf\u4e0d\u80fd\u5904\u7406 don\u2019t-include \u7684\u5355\u8bcd\uff08\u4f7f\u7528 mask \uff09 \u7b80\u5355\u4f46\u662f\u975e\u5e38\u6709\u6548\uff01 \u66f4\u597d\u7684\u6574\u4f53\u5185\u5bb9\u9009\u62e9\u7b56\u7565 \u51cf\u5c11\u957f\u5e8f\u5217\u7684\u590d\u5236(\u5373\u66f4\u6458\u8981\u7684\u8f93\u51fa) \u56e0\u4e3a\u957f\u5e8f\u5217\u4e2d\u5305\u542b\u4e86\u5f88\u591a don\u2019t-include \u7684\u5355\u8bcd\uff0c\u6240\u4ee5\u6a21\u578b\u5fc5\u987b\u5b66\u4f1a\u8df3\u8fc7\u8fd9\u4e9b\u5355\u8bcd\u5e76\u5c06\u90a3\u4e9b include \u7684\u5355\u8bcd\u8fdb\u884c\u6458\u8981\u4e0e\u7ec4\u5408 Neural summarization via Reinforcement Learning \u4f7f\u7528 RL \u76f4\u63a5\u4f18\u5316 ROUGE-L \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u6807\u51c6\u7684\u6700\u5927\u4f3c\u7136(ML)\u8bad\u7ec3\u4e0d\u80fd\u76f4\u63a5\u4f18\u5316ROUGE-L\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u4e0d\u53ef\u5fae\u51fd\u6570 \u6709\u8da3\u7684\u53d1\u73b0 \u4f7f\u7528RL\u4ee3\u66ffML\u53d6\u5f97\u66f4\u9ad8\u7684ROUGE\u5206\u6570\uff0c\u4f46\u662f\u4eba\u7c7b\u5224\u65ad\u7684\u5f97\u5206\u8d8a\u4f4e \u6df7\u5408\u6a21\u578b\u6700\u597d A Deep Reinforced Model for Abstractive Summarization, Paulus et al, 2017 https://arxiv.org/pdf/1705.04304.pdf Blog post: https://www.salesforce.com/products/einstein/ai-research/tl-dr-reinforced-model-abstractive-summarization/ Dialogue \u201c\u5bf9\u8bdd\u201d\u5305\u62ec\u5404\u79cd\u5404\u6837\u7684\u8bbe\u7f6e \u9762\u5411\u4efb\u52a1\u7684\u5bf9\u8bdd \u8f85\u52a9 (\u5982\u5ba2\u6237\u670d\u52a1\u3001\u7ed9\u4e88\u5efa\u8bae\uff0c\u56de\u7b54\u95ee\u9898\uff0c\u5e2e\u52a9\u7528\u6237\u5b8c\u6210\u4efb\u52a1\uff0c\u5982\u8d2d\u4e70\u6216\u9884\u8ba2) \u5408\u4f5c (\u4e24\u4e2a\u4ee3\u7406\u901a\u8fc7\u5bf9\u8bdd\u5728\u4e00\u8d77\u89e3\u51b3\u4e00\u4e2a\u4efb\u52a1) \u5bf9\u6297 (\u4e24\u4e2a\u4ee3\u7406\u901a\u8fc7\u5bf9\u8bdd\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1) \u793e\u4f1a\u5bf9\u8bdd \u95f2\u804a (\u4e3a\u4e86\u597d\u73a9\u6216\u516c\u53f8) \u6cbb\u7597/\u7cbe\u795e\u5065\u5eb7 Pre- and post-neural dialogue \u7531\u4e8e\u5f00\u653e\u5f0f\u81ea\u7531NLG\u7684\u96be\u5ea6\uff0cpre-neural\u5bf9\u8bdd\u7cfb\u7edf\u7ecf\u5e38\u4f7f\u7528\u9884\u5b9a\u4e49\u7684\u6a21\u677f\uff0c\u6216\u4ece\u8bed\u6599\u5e93\u4e2d\u68c0\u7d22\u4e00\u4e2a\u9002\u5f53\u7684\u53cd\u5e94\u7684\u53cd\u5e94 \u6458\u8981\u8fc7\u53bb\u7684\u7814\u7a76\uff0c\u81ea2015\u5e74\u4ee5\u6765\u6709\u5f88\u591a\u8bba\u6587\u5c06seq2seq\u65b9\u6cd5\u5e94\u7528\u5230\u5bf9\u8bdd\uff0c\u4ece\u800c\u5bfc\u81f4\u81ea\u7531\u5bf9\u8bdd\u7cfb\u7edf\u5174\u8da3\u91cd\u71c3 \u4e00\u4e9b\u65e9\u671fseq2seq\u5bf9\u8bdd\u6587\u7ae0\u5305\u62ec A Neural Conversational Model, Vinyals et al, 2015 https://arxiv.org/pdf/1506.05869.pdf Neural Responding Machine for Short-Text Conversation, Shang et al, 2015 https://www.aclweb.org/anthology/P15-1152 Seq2seq-based dialogue \u7136\u800c\uff0c\u5f88\u5feb\u4ed6\u4eec\u5c31\u660e\u767d\u7b80\u5355\u7684\u5e94\u7528\u6807\u51c6seq2seq +attention \u7684\u65b9\u6cd5\u5728\u5bf9\u8bdd(\u95f2\u804a)\u4efb\u52a1\u4e2d\u6709\u4e25\u91cd\u7684\u666e\u904d\u7f3a\u9677 \u4e00\u822c\u6027/\u65e0\u804a\u7684\u53cd\u5e94 \u65e0\u5173\u7684\u53cd\u5e94(\u4e0e\u4e0a\u4e0b\u6587\u4e0d\u591f\u76f8\u5173) \u91cd\u590d \u7f3a\u4e4f\u4e0a\u4e0b\u6587(\u4e0d\u8bb0\u5f97\u8c08\u8bdd\u5386\u53f2) \u7f3a\u4e4f\u4e00\u81f4\u7684\u89d2\u8272\u4eba\u683c Irrelevant response problem \u95ee\u9898\uff1aseq2seq\u7ecf\u5e38\u4ea7\u751f\u4e0e\u7528\u6237\u65e0\u5173\u7684\u8bdd\u8bed \u8981\u4e48\u56e0\u4e3a\u5b83\u662f\u901a\u7528\u7684(\u4f8b\u5982,\u201c\u6211\u4e0d\u77e5\u9053\u201d) \u6216\u56e0\u4e3a\u6539\u53d8\u8bdd\u9898\u4e3a\u65e0\u5173\u7684\u4e00\u4e9b\u4e8b\u60c5 \u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff1a\u4e0d\u662f\u53bb\u4f18\u5316\u8f93\u5165 S \u5230\u56de\u7b54 T \u7684\u6620\u5c04\u6765\u6700\u5927\u5316\u7ed9\u5b9a S \u7684 T \u7684\u6761\u4ef6\u6982\u7387\uff0c\u800c\u662f\u53bb\u4f18\u5316\u8f93\u5165S \u548c\u56de\u590d T \u4e4b\u95f4\u7684\u6700\u5927\u4e92\u4fe1\u606fMaximum Mutual Information (MMI)\uff0c\u4ece\u800c\u6291\u5236\u6a21\u578b\u53bb\u9009\u62e9\u90a3\u4e9b\u672c\u6765\u5c31\u5f88\u5927\u6982\u7387\u7684\u901a\u7528\u53e5\u5b50 \\[ \\log \\frac{p(S, T)}{p(S) p(T)} \\] \\[ \\hat{T}=\\underset{T}{\\arg \\max }\\{\\log p(T | S)-\\log p(T)\\} \\] Genericness / boring response problem \u7b80\u5355\u7684\u6d4b\u8bd5\u65f6\u4fee\u590d \u76f4\u63a5\u5728Beam\u641c\u7d22\u4e2d\u589e\u5927\u7f55\u89c1\u5b57\u7684\u6982\u7387 \u4f7f\u7528\u62bd\u6837\u89e3\u7801\u7b97\u6cd5\u800c\u4e0d\u662fBeam\u641c\u7d22 \u6761\u4ef6\u4fee\u590d \u7528\u4e00\u4e9b\u989d\u5916\u7684\u5185\u5bb9\u8bad\u7ec3\u89e3\u7801\u5668(\u5982\u62bd\u6837\u4e00\u4e9b\u5185\u5bb9\u8bcd\u5e76\u5904\u7406) \u8bad\u7ec3 retrieve-and-refine \u6a21\u578b\u800c\u4e0d\u662f generate-from-scratch \u6a21\u578b \u5373\u4ece\u8bed\u6599\u5e93\u91c7\u6837\u4eba\u7c7b\u8bdd\u8bed\u5e76\u7f16\u8f91\u4ee5\u9002\u5e94\u5f53\u524d\u7684\u573a\u666f \u8fd9\u901a\u5e38\u4ea7\u751f\u66f4\u52a0\u591a\u6837\u5316/\u4eba\u7c7b/\u6709\u8da3\u7684\u8bdd\u8bed\uff01 Repetition problem \u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848 \u76f4\u63a5\u5728 Beam \u641c\u7d22\u4e2d\u7981\u6b62\u91cd\u590dn-grams \u901a\u5e38\u975e\u5e38\u6709\u6548 \u66f4\u590d\u6742\u7684\u89e3\u51b3\u65b9\u6848 \u5728seq2seq\u4e2d\u8bad\u7ec3\u4e00\u4e2a\u8986\u76d6\u673a\u5236\uff0c\u8fd9\u662f\u5ba2\u89c2\u7684\uff0c\u53ef\u4ee5\u9632\u6b62\u6ce8\u610f\u529b\u673a\u5236\u591a\u6b21\u6ce8\u610f\u76f8\u540c\u7684\u5355\u8bcd \u5b9a\u4e49\u8bad\u7ec3\u76ee\u6807\u4ee5\u963b\u6b62\u91cd\u590d \u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u4e0d\u53ef\u5fae\u51fd\u6570\u751f\u6210\u7684\u8f93\u51fa\uff0c\u7136\u540e\u5c06\u9700\u8981\u4e00\u4e9b\u6280\u672f\u4f8b\u5982RL\u6765\u8bad\u7ec3 Lack of consistent persona problem 2016\u5e74\uff0c\u674e\u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2aseq2seq\u5bf9\u8bdd\u6a21\u5f0f\uff0c\u5b66\u4f1a\u5c06\u4e24\u4e2a\u5bf9\u8bdd\u4f19\u4f34\u7684\u89d2\u8272\u7f16\u7801\u4e3a\u5d4c \u751f\u6210\u7684\u8bdd\u8bed\u662f\u4ee5\u5d4c\u5165\u4e3a\u6761\u4ef6\u7684 \u6700\u8fd1\u6709\u4e00\u4e2a\u95f2\u804a\u7684\u6570\u636e\u96c6\u79f0\u4e3aPersonaChat\uff0c\u5305\u62ec\u6bcf\u4e00\u6b21\u4f1a\u8bdd\u7684\u89d2\u8272(\u63cf\u8ff0\u4e2a\u4eba\u7279\u8d28\u76845\u4e2a\u53e5\u5b50\u7684\u96c6\u5408) \u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u8ba9\u7814\u7a76\u4eba\u5458\u6784\u5efa persona-conditional \u5bf9\u8bdd\u4ee3\u7406 A Persona-Based Neural Conversation Model, Li et al 2016, https://arxiv.org/pdf/1603.06155.pdf Personalizing Dialogue Agents: I have a dog, do you have pets too?, Zhang et al, 2018 https://arxiv.org/pdf/1801.07243.pdf Negotiation dialogue 2017\u5e74\uff0cLewis et al\u6536\u96c6\u8c08\u5224\u5bf9\u8bdd\u6570\u636e\u96c6 \u4e24\u4e2a\u4ee3\u7406\u534f\u5546\u8c08\u5224\u5bf9\u8bdd(\u901a\u8fc7\u81ea\u7136\u8bed\u8a00)\u5982\u4f55\u5206\u914d\u4e00\u7ec4\u9879\u76ee \u4ee3\u7406\u5bf9\u9879\u76ee\u6709\u4e0d\u540c\u7684\u4f30\u503c\u51fd\u6570 \u4ee3\u7406\u4eba\u4f1a\u4e00\u76f4\u4ea4\u8c08\u76f4\u5230\u8fbe\u6210\u534f\u8bae Deal or No Deal? End-to-End Learning for Negotiation Dialogues, Lewis et al, 2017 https://arxiv.org/pdf/1706.05125.pdf \u4ed6\u4eec\u53d1\u73b0\u7528\u6807\u51c6\u7684\u6700\u5927\u4f3c\u7136(ML)\u6765\u8bad\u7ec3seq2seq\u7cfb\u7edf\u7684\u4ea7\u751f\u4e86\u6d41\u5229\u4f46\u662f\u7f3a\u4e4f\u7b56\u7565\u7684\u5bf9\u8bdd\u4ee3\u7406 \u548cPaulus\u7b49\u7684\u6458\u8981\u8bba\u6587\u4e00\u6837\uff0c\u4ed6\u4eec\u4f7f\u7528\u5f3a\u5316\u5b66\u4e60\u6765\u4f18\u5316\u79bb\u6563\u5956\u52b1(\u4ee3\u7406\u81ea\u5df1\u5728\u8bad\u7ec3\u81ea\u5df1) RL \u7684\u57fa\u4e8e\u76ee\u7684\u7684\u76ee\u6807\u51fd\u6570\u4e0e ML \u76ee\u6807\u51fd\u6570\u76f8\u7ed3\u5408 \u6f5c\u5728\u7684\u9677\u9631\uff1a\u5982\u679c\u4e24\u4e24\u5bf9\u8bdd\u65f6\uff0c\u4ee3\u7406\u4f18\u5316\u7684\u53ea\u662fRL\u76ee\u6807\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u504f\u79bb\u82f1\u8bed \u5728\u6d4b\u8bd5\u65f6\uff0c\u6a21\u578b\u901a\u8fc7\u8ba1\u7b97 rollouts\uff0c\u9009\u62e9\u53ef\u80fd\u7684\u53cd\u5e94\uff1a\u6a21\u62df\u5269\u4f59\u7684\u8c08\u8bdd\u548c\u9884\u671f\u7684\u56de\u62a5 2018\u5e74\uff0cYarats \u7b49\u63d0\u51fa\u4e86\u53e6\u4e00\u4e2a\u8c08\u5224\u4efb\u52a1\u7684\u5bf9\u8bdd\u6a21\u578b\uff0c\u5c06\u7b56\u7565\u548cNLG\u65b9\u9762\u5206\u5f00 \u6bcf\u4e2a\u8bdd\u8bed \\(x_t\\) \u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u79bb\u6563\u6f5c\u5728\u53d8\u91cf \\(z_t\\) \\(z_t\\) \u5b66\u4e60\u6210\u4e3a\u4e00\u4e2a\u5f88\u597d\u7684\u9884\u6d4b\u5bf9\u8bdd\u4e2d\u7684\u672a\u6765\u4e8b\u4ef6\u7684\u9884\u6d4b\u5668(\u672a\u6765\u7684\u6d88\u606f\uff0c\u7b56\u7565\u7684\u6700\u7ec8\u6536\u83b7)\uff0c\u4f46\u4e0d\u662f \\(x_t\\) \u672c\u8eab\u7684\u9884\u6d4b\u5668 \u8fd9\u610f\u5473\u7740 \\(z_t\\) \u5b66\u4f1a\u4ee3\u8868 \\(x_t\\) \u5bf9\u5bf9\u8bdd\u7684\u5f71\u54cd\uff0c\u800c\u4e0d\u662f \\(x_t\\) \u7684\u8bdd \u56e0\u6b64 \\(z_t\\) \u5c06\u4efb\u52a1\u7684\u7b56\u7565\u65b9\u9762\u4ece NLG\u65b9\u9762\u5206\u79bb\u51fa\u6765 \u8fd9\u5bf9\u53ef\u63a7\u5236\u6027\u3001\u53ef\u89e3\u91ca\u6027\u548c\u66f4\u5bb9\u6613\u5b66\u4e60\u7b56\u7565\u7b49\u662f\u6709\u7528\u7684 Hierarchical Text Generation and Planning for Strategic Dialogue, Yarats et al, 2018 https://arxiv.org/pdf/1712.05846.pdf Conversational question answering: CoQA \u4e00\u4e2a\u6765\u81ea\u65af\u5766\u798fNLP\u7684\u65b0\u6570\u636e\u96c6 \u4efb\u52a1\uff1a\u56de\u7b54\u5173\u4e8e\u4ee5\u4e00\u6bb5\u5bf9\u8bdd\u4e3a\u4e0a\u4e0b\u6587\u7684\u6587\u672c\u7684\u95ee\u9898 \u7b54\u6848\u5fc5\u987b\u5199\u6458\u8981\u5730(\u4e0d\u662f\u590d\u5236) QA / \u9605\u8bfb\u7406\u89e3\u4efb\u52a1\uff0c\u548c\u5bf9\u8bdd\u4efb\u52a1 CoQA: a Conversational Question Answering Challenge, Reddy et al, 2018 https://arxiv.org/pdf/1808.07042.pdf Storytelling \u795e\u7ecf\u8bb2\u6545\u4e8b\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u4f7f\u7528\u67d0\u79cd\u63d0\u793a \u7ed9\u5b9a\u56fe\u50cf\u751f\u6210\u7684\u6545\u4e8b\u60c5\u8282\u6bb5\u843d \u7ed9\u5b9a\u4e00\u4e2a\u7b80\u77ed\u7684\u5199\u4f5c\u63d0\u793a\u751f\u6210\u4e00\u4e2a\u6545\u4e8b \u7ed9\u5b9a\u8fc4\u4eca\u4e3a\u6b62\u7684\u6545\u4e8b\uff0c\u751f\u6210\u6545\u4e8b\u7684\u4e0b\u4e00\u4e2a\u53e5\u5b50\uff08\u6545\u4e8b\u7eed\u5199\uff09 \u8fd9\u548c\u524d\u4e24\u4e2a\u4e0d\u540c\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u5173\u5fc3\u7cfb\u7edf\u5728\u51e0\u4e2a\u751f\u6210\u7684\u53e5\u5b50\u4e0a\u7684\u6027\u80fd \u795e\u7ecf\u6545\u4e8b\u98de\u901f\u53d1\u5c55 \u7b2c\u4e00\u4e2a\u6545\u4e8b\u7814\u8ba8\u4f1a\u4e8e2018\u5e74\u4e3e\u884c \u5b83\u4e3e\u884c\u6bd4\u8d5b(\u4f7f\u7528\u4e94\u5f20\u56fe\u7247\u7684\u5e8f\u5217\u751f\u6210\u4e00\u4e2a\u6545\u4e8b) Generating a story from an image \u6709\u8da3\u7684\u662f\uff0c\u8fd9\u5e76\u4e0d\u662f\u76f4\u63a5\u7684\u76d1\u7763\u56fe\u50cf\u6807\u9898\u3002\u6ca1\u6709\u914d\u5bf9\u7684\u6570\u636e\u53ef\u4ee5\u5b66\u4e60\u3002 Generating Stories about Images, https://medium.com/@samim/generating-stories-about-images-d163ba41e4ed \u95ee\u9898\uff1a\u5982\u4f55\u89e3\u51b3\u7f3a\u4e4f\u5e76\u884c\u6570\u636e\u7684\u95ee\u9898 \u56de\u7b54\uff1a\u4f7f\u7528\u4e00\u4e2a\u901a\u7528\u7684 sentence-encoding space Skip-thought \u5411\u91cf\u662f\u4e00\u79cd\u901a\u7528\u7684\u53e5\u5b50\u5d4c\u5165\u65b9\u6cd5 \u60f3\u6cd5\u7c7b\u4f3c\u4e8e\u6211\u4eec\u5982\u4f55\u5b66\u901a\u8fc7\u9884\u6d4b\u5468\u56f4\u7684\u6587\u5b57\u6765\u5b66\u4e60\u5355\u8bcd\u7684\u5d4c\u5165 \u4f7f\u7528 COCO (\u56fe\u7247\u6807\u9898\u6570\u636e\u96c6)\uff0c\u5b66\u4e60\u4ece\u56fe\u50cf\u5230\u5176\u6807\u9898\u7684 Skip-thought \u7f16\u7801\u7684\u6620\u5c04 \u4f7f\u7528\u76ee\u6807\u6837\u5f0f\u8bed\u6599\u5e93(Taylor Swift lyrics)\uff0c\u8bad\u7ec3RNN-LM\uff0c \u5c06Skip-thought\u5411\u91cf\u89e3\u7801\u4e3a\u539f\u6587 \u628a\u4e24\u4e2a\u623f\u5728\u4e00\u8d77 Skip-Thought Vectors, Kiros 2015, https://arxiv.org/pdf/1506.06726v1.pdf Generating a story from a writing prompt 2018\u5e74\uff0cFan \u7b49\u53d1\u5e03\u4e86\u4e00\u4e2a\u65b0\u6545\u4e8b\u751f\u6210\u6570\u636e\u96c6 collected from Reddit\u2019s WritingPrompts subreddit. \u6bcf\u4e2a\u6545\u4e8b\u90fd\u6709\u4e00\u4e2a\u76f8\u5173\u7684\u7b80\u77ed\u5199\u4f5c\u63d0\u793a Fan \u7b49\u4e5f\u63d0\u51fa\u4e86\u4e00\u4e2a\u590d\u6742\u7684 seq2seq prompt-to-story \u6a21\u578b Hierarchical Neural Story Generation, Fan et al, 2018 https://arxiv.org/pdf/1805.04833.pdf convolutional-based \u8fd9\u4f7f\u5b83\u7684\u901f\u5ea6\u6bd4RNN-based seq2seq \u5c01\u95ed\u7684\u591a\u5934\u591a\u5c3a\u5ea6\u7684self-attention self-attention \u5bf9\u4e8e\u6355\u83b7\u8fdc\u7a0b\u4e0a\u4e0b\u6587\u800c\u8a00\u5341\u5206\u91cd\u8981 \u95e8\u63a7\u5141\u8bb8\u66f4\u6709\u9009\u62e9\u6027\u7684\u6ce8\u610f\u673a\u5236 \u4e0d\u540c\u7684\u6ce8\u610f\u529b\u5934\u5728\u4e0d\u540c\u7684\u5c3a\u5ea6\u4e0a\u6ce8\u610f\u4e0d\u540c\u7684\u4e1c\u897f\u2014\u2014\u8fd9\u610f\u5473\u7740\u6709\u4e0d\u540c\u7684\u6ce8\u610f\u673a\u5236\u7528\u4e8e\u68c0\u7d22\u7ec6\u7c92\u5ea6\u548c\u7c97\u7c92\u5ea6\u7684\u4fe1\u606f \u6a21\u578b\u878d\u5408 \u9884\u8bad\u7ec3\u4e00\u4e2aseq2seq\u6a21\u578b\uff0c\u7136\u540e\u8bad\u7ec3\u7b2c\u4e8c\u4e2a seq2seq \u6a21\u578b\u8bbf\u95ee\u7684\u7b2c\u4e00\u4e2a model \u7684\u9690\u72b6\u6001 \u60f3\u6cd5\u662f\uff0c\u7b2c\u4e00seq2seq\u6a21\u578b\u5b66\u4e60\u901a\u7528LM\uff0c\u7b2c\u4e8c\u4e2amodel\u5b66\u4e60\u57fa\u4e8e\u63d0\u793a\u7684\u6761\u4ef6 \u7ed3\u679c\u4ee4\u4eba\u5370\u8c61\u6df1\u523b \u4e0e\u63d0\u793a\u76f8\u5173 \u591a\u6837\u5316\uff0c\u5e76\u4e0d\u666e\u901a \u5728\u6587\u4f53\u4e0a\u620f\u5267\u6027 \u4f46\u662f \u4e3b\u8981\u662f\u6c1b\u56f4/\u63cf\u8ff0\u6027/\u573a\u666f\u8bbe\u5b9a\uff0c\u5f88\u5c11\u662f\u4e8b\u4ef6/\u60c5\u8282 \u751f\u6210\u66f4\u957f\u65f6\uff0c\u5927\u591a\u6570\u505c\u7559\u5728\u540c\u6837\u7684\u60f3\u6cd5\u5e76\u6ca1\u6709\u4ea7\u751f\u65b0\u7684\u60f3\u6cd5\u2014\u2014\u4e00\u81f4\u6027\u95ee\u9898 Challenges in storytelling \u7531\u795e\u7ecfLM\u751f\u6210\u7684\u6545\u4e8b\u542c\u8d77\u6765\u6d41\u7545\u2026\u4f46\u662f\u662f\u66f2\u6298\u7684\uff0c\u8352\u8c2c\u7684\uff0c\u60c5\u8282\u4e0d\u8fde\u8d2f\u7684 \u7f3a\u5931\u7684\u662f\u4ec0\u4e48\uff1f LMs\u5bf9\u5355\u8bcd\u5e8f\u5217\u8fdb\u884c\u5efa\u6a21\u3002\u6545\u4e8b\u662f\u4e8b\u4ef6\u5e8f\u5217 \u4e3a\u4e86\u8bb2\u4e00\u4e2a\u6545\u4e8b\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u548c\u6a21\u62df \u4e8b\u4ef6\u548c\u5b83\u4eec\u4e4b\u95f4\u7684\u56e0\u679c\u5173\u7cfb\u7ed3\u6784 \u4eba\u7269\uff0c\u4ed6\u4eec\u7684\u4e2a\u6027\u3001\u52a8\u673a\u3001\u5386\u53f2\u3001\u548c\u5176\u4ed6\u4eba\u7269\u4e4b\u95f4\u7684\u5173\u7cfb \u4e16\u754c(\u8c01\u3001\u662f\u4ec0\u4e48\u548c\u4e3a\u4ec0\u4e48) \u53d9\u4e8b\u7ed3\u6784(\u5982\u8bf4\u660e \\(\\to\\) \u51b2\u7a81 \\(\\to\\) \u89e3\u51b3) \u826f\u597d\u7684\u53d9\u4e8b\u539f\u5219(\u4e0d\u8981\u5f15\u5165\u4e00\u4e2a\u6545\u4e8b\u5143\u7d20\u7136\u540e\u4ece\u672a\u4f7f\u7528\u5b83) Event2event Story Generation Event Representations for Automated Story Generation with Deep Neural Nets, Martin et al, 2018 https://www.aaai.org/ocs/index.php/AAAI/AAAI18/paper/view/17046/15769 Structured Story Generation Strategies for Structuring Story Generation, Fan et al, 2019 https://arxiv.org/pdf/1902.01109.pdf Tracking events, entities, state, etc. \u65c1\u6ce8\uff1a\u5728\u795e\u7ecfNLU(\u81ea\u7136\u8bed\u8a00\u7406\u89e3)\u9886\u57df\uff0c\u5df2\u7ecf\u6709\u5927\u91cf\u5173\u4e8e\u8ddf\u8e2a\u4e8b\u4ef6/\u5b9e\u4f53/\u72b6\u6001\u7684\u5de5\u4f5c \u4f8b\u5982\uff0cYejin Choi\u2019s group* \u5f88\u591a\u5de5\u4f5c\u5728\u8fd9\u4e00\u9886\u57df \u5c06\u8fd9\u4e9b\u65b9\u6cd5\u5e94\u7528\u5230 NLG\u662f\u66f4\u52a0\u56f0\u96be\u7684 \u5982\u679c\u4f60\u7f29\u5c0f\u8303\u56f4\uff0c\u5219\u66f4\u53ef\u63a7\u7684 \u4e0d\u91c7\u7528\u81ea\u7136\u8bed\u8a00\u751f\u6210\u5f00\u653e\u57df\u7684\u6545\u4e8b\uff0c\u800c\u662f\u8ddf\u8e2a\u72b6\u6001 \u751f\u6210\u4e00\u4e2a\u914d\u65b9(\u8003\u8651\u5230\u56e0\u7d20)\uff0c\u8ddf\u8e2a\u56e0\u7d20\u7684\u72b6\u6001 Tracking world state while generating a recipe \u8fc7\u7a0b\u795e\u7ecf\u7f51\u7edc\uff1a\u7ed9\u5b9a\u56e0\u7d20\uff0c\u751f\u6210\u914d\u65b9\u6307\u793a \u663e\u5f0f\u8ddf\u8e2a\u6240\u6709\u56e0\u7d20\u7684\u72b6\u6001\uff0c\u5e76\u5229\u7528\u8fd9\u4e9b\u77e5\u8bc6\u6765\u51b3\u5b9a\u4e0b\u4e00\u6b65\u8981\u91c7\u53d6\u4ec0\u4e48\u884c\u52a8 Simulating Action Dynamics with Neural Process Networks, Bosselut et al, 2018 https://arxiv.org/pdf/1711.05313.pdf Poetry generation: Hafez Hafez\uff1aGhazvininejad et al \u7684\u8bd7\u6b4c\u7cfb\u7edf \u4e3b\u8981\u601d\u60f3\uff1a\u4f7f\u7528\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u53d7\u4f53(FSA)\u6765\u5b9a\u4e49\u6240\u6709\u53ef\u80fd\u7684\u5e8f\u5217\uff0c\u670d\u4ece\u5e0c\u671b\u6ee1\u8db3\u7684\u8282\u594f\u7ea6\u675f \u7136\u540e\u4f7f\u7528FSA\u7ea6\u675fRNN-LM\u7684\u8f93\u51fa \u4f8b\u5982 \u838e\u58eb\u6bd4\u4e9a\u7684\u5341\u56db\u884c\u8bd7\u662f14\u884c\u7684iambic pentameter \u6240\u4ee5\u838e\u58eb\u6bd4\u4e9a\u7684\u5341\u56db\u884c\u8bd7\u7684FSA\u662f \\(((01)^5)^{14}\\) \u5728Beam\u641c\u7d22\u89e3\u7801\u4e2d\uff0c\u53ea\u6709\u63a2\u7d22\u5c5e\u4e8eFSA\u7684\u5047\u8bbe Generating Topical Poetry, Ghazvininejad et al, 2016 http://www.aclweb.org/anthology/D16-1126 Hafez: an Interactive Poetry Generation System, Ghazvininejad et al, 2017 http://www.aclweb.org/anthology/P17-4008 \u5168\u7cfb\u7edf \u7528\u6237\u63d0\u4f9b\u4e3b\u9898\u5b57 \u5f97\u5230\u4e00\u4e2a\u4e0e\u4e3b\u9898\u76f8\u5173\u7684\u8bcd\u7684\u96c6\u5408 \u8bc6\u522b\u5c40\u90e8\u8bcd\u8bed\u62bc\u97f5\u3002\u8fd9\u5c06\u662f\u6bcf\u4e00\u884c\u7684\u7ed3\u675f \u4f7f\u7528\u53d7\u5236\u4e8eFSA\u7684RNN-LM\u751f\u6210\u8fd9\u9996\u8bd7 RNN-LM\u5411\u540e(\u81ea\u53f3\u5411\u5de6)\u3002\u8fd9\u662f\u5fc5\u8981\u7684,\u56e0\u4e3a\u6bcf\u4e00\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8bcd\u662f\u56fa\u5b9a\u7684\u3002 \u5728\u540e\u7eed\u7684\u4e00\u7bc7\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u5236\u4f5c\u4e86\u7cfb\u7edf\u4ea4\u4e92\u548c\u7528\u6237\u53ef\u63a7 \u63a7\u5236\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a\u5728Beam\u641c\u7d22\u4e2d\uff0c\u589e\u5927\u5177\u6709\u671f\u671b\u7279\u5f81\u7684\u5355\u8bcd\u7684\u5206\u6570 Poetry generation: Deep-speare \u66f4\u591a\u7684\u8bd7\u6b4c\u751f\u6210\u7684\u7aef\u5230\u7aef\u65b9\u6cd5(lau\u7b49) \u4e09\u4e2a\u7ec4\u4ef6 \u8bed\u8a00\u6a21\u578b pentameter model rhyme model \u97f5\u5f8b\u6a21\u578b\u2026\u2026 \u4f5c\u4e3a\u4e00\u4e2a\u591a\u4efb\u52a1\u5b66\u4e60\u95ee\u9898\u5171\u540c\u5b66\u4e60 \u4f5c\u8005\u53d1\u73b0 meter \u548c\u62bc\u97f5\u662f\u76f8\u5bf9\u5bb9\u6613\u7684\uff0c\u4f46\u751f\u6210\u7684\u8bd7\u6b4c\u4e0a\u6709\u4e9b\u7f3a\u4e4f\u201c\u60c5\u611f\u548c\u53ef\u8bfb\u6027\u201d Deep-speare: A joint neural model of poetic language, meter and rhyme, Lau et al, 2018 http://aclweb.org/anthology/P18-1181 Non-autoregressive generation for NMT Non-Autoregressive Neural Machine Translation, Gu et al, 2018 https://arxiv.org/pdf/1711.02281.pdf 2018\u5e74,\u987e\u7b49\u53d1\u8868\u4e86\u201cNon-autoregressive \u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u201d\u6a21\u578b \u610f\u4e49\uff1a\u5b83\u4e0d\u662f\u6839\u636e\u4e4b\u524d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u4ece\u5de6\u5230\u53f3\u4ea7\u751f\u7ffb\u8bd1 \u5b83\u5e76\u884c\u751f\u6210\u7ffb\u8bd1 \u8fd9\u5177\u6709\u660e\u663e\u7684\u6548\u7387\u4f18\u52bf\uff0c\u4f46\u4ece\u6587\u672c\u751f\u6210\u7684\u89d2\u5ea6\u6765\u770b\u4e5f\u5f88\u6709\u8da3 \u67b6\u6784\u662f\u57fa\u4e8eTransformer \u7684\uff1b\u6700\u5927\u7684\u533a\u522b\u662f\uff0c\u89e3\u7801\u5668\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4b\u8bd5\u65f6\u5e76\u884c","title":"Section 2: NLG tasks and neural approaches to them"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#section-3-nlg-evaluation","text":"Automatic evaluation metrics for NLG \u57fa\u4e8e\u8bcd\u91cd\u53e0\u7684\u6307\u6807(BLEU\uff0cROUGE\uff0cMETROR\uff0cF1\uff0c\u7b49\u7b49) \u6211\u4eec\u77e5\u9053\u4ed6\u4eec\u4e0d\u9002\u5408\u673a\u5668\u7ffb\u8bd1 \u5bf9\u4e8e\u6458\u8981\u800c\u8a00\u662f\u66f4\u5dee\u7684\u8bc4\u4ef7\u6807\u51c6\uff0c\u56e0\u4e3a\u6458\u8981\u6bd4\u673a\u5668\u7ffb\u8bd1\u66f4\u5f00\u653e \u4e0d\u5e78\u7684\u662f\uff0c\u4e0e\u62bd\u8c61\u6458\u8981\u7cfb\u7edf\u76f8\u6bd4\uff0c\u63d0\u53d6\u6458\u8981\u7cfb\u7edf\u66f4\u53d7ROUGE\u9752\u7750 \u5bf9\u4e8e\u5bf9\u8bdd\u751a\u81f3\u66f4\u7cdf\uff0c\u8fd9\u6bd4\u6458\u8981\u66f4\u5f00\u653e \u7c7b\u4f3c\u7684\u4f8b\u5b50\u8fd8\u6709\u6545\u4e8b\u751f\u6210 Word overlap metrics are not good for dialogue How NOT To Evaluate Your Dialogue System: An Empirical Study of Unsupervised Evaluation Metrics for Dialogue Response Generation, Liu et al, 2017 https://arxiv.org/pdf/1603.08023.pdf \u4e0a\u56fe\u5c55\u793a\u4e86 BLEU-2\u3001Embedding average \u548c\u4eba\u7c7b\u8bc4\u4ef7\u7684\u76f8\u5173\u6027\u90fd\u4e0d\u9ad8 Why We Need New Evaluation Metrics for NLG, Novikova et al, 2017 https://arxiv.org/pdf/1707.06875.pdf Automatic evaluation metrics for NLG \u56f0\u60d1\u5ea6\uff1f \u6355\u6349\u4f60\u7684LM\u6709\u591a\u5f3a\u5927\uff0c\u4f46\u662f\u4e0d\u4f1a\u544a\u8bc9\u4f60\u5173\u4e8e\u751f\u6210\u7684\u4efb\u4f55\u4e8b\u60c5(\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u7684\u56f0\u60d1\u5ea6\u662f\u672a\u6539\u53d8\u7684\uff0c\u89e3\u7801\u7b97\u6cd5\u662f\u4e0d\u597d\u7684) \u8bcd\u5d4c\u5165\u57fa\u7840\u6307\u6807\uff1f \u4e3b\u8981\u601d\u60f3\uff1a\u6bd4\u8f83\u8bcd\u5d4c\u5165\u7684\u76f8\u4f3c\u5ea6(\u6216\u8bcd\u5d4c\u5165\u7684\u5747\u503c)\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u91cd\u53e0\u7684\u5355\u8bcd\u3002\u4ee5\u66f4\u7075\u6d3b\u7684\u65b9\u5f0f\u6355\u83b7\u8bed\u4e49\u3002 \u4e0d\u5e78\u7684\u662f,\u4ecd\u7136\u6ca1\u6709\u4e0e\u7c7b\u4f3c\u5bf9\u8bdd\u7684\u5f00\u653e\u5f0f\u4efb\u52a1\u7684\u4eba\u7c7b\u5224\u65ad\uff0c\u4ea7\u751f\u5f88\u597d\u7684\u8054\u7cfb \u6211\u4eec\u6ca1\u6709\u81ea\u52a8\u6307\u6807\u5145\u5206\u6355\u6349\u6574\u4f53\u8d28\u91cf(\u5373\u4ee3\u8868\u4eba\u7c7b\u7684\u8d28\u91cf\u5224\u65ad) \u4f46\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u66f4\u591a\u7684\u96c6\u4e2d\u81ea\u52a8\u5ea6\u91cf\u6765\u6355\u6349\u751f\u6210\u6587\u672c\u7684\u7279\u5b9a\u65b9\u9762 \u6d41\u5229\u6027(\u4f7f\u7528\u8bad\u7ec3\u597d\u7684LM\u8ba1\u7b97\u6982\u7387) \u6b63\u786e\u7684\u98ce\u683c(\u4f7f\u7528\u76ee\u6807\u8bed\u6599\u5e93\u4e0a\u8bad\u7ec3\u597d\u7684LM\u7684\u6982\u7387) \u591a\u6837\u6027(\u7f55\u89c1\u7684\u7528\u8bcd\uff0cn-grams \u7684\u72ec\u7279\u6027) \u76f8\u5173\u8f93\u5165(\u8bed\u4e49\u76f8\u4f3c\u6027\u5ea6\u91cf) \u7b80\u5355\u7684\u957f\u5ea6\u548c\u91cd\u590d \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6307\u6807\uff0c\u5982\u6458\u8981\u7684\u538b\u7f29\u7387 \u867d\u7136\u8fd9\u4e9b\u4e0d\u8861\u91cf\u6574\u4f53\u8d28\u91cf\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8ddf\u8e2a\u4e00\u4e9b\u6211\u4eec\u5173\u5fc3\u7684\u91cd\u8981\u54c1\u8d28 Human evaluation \u4eba\u7c7b\u7684\u5224\u65ad\u88ab\u8ba4\u4e3a\u662f\u9ec4\u91d1\u6807\u51c6 \u5f53\u7136\uff0c\u6211\u4eec\u77e5\u9053\u4eba\u7c7b\u8bc4\u4ef7\u662f\u7f13\u6162\u800c\u6602\u8d35\u7684 \u4f46\u8fd9\u4e9b\u95ee\u9898\uff1f \u5047\u5982\u4f60\u83b7\u5f97\u4eba\u7c7b\u7684\u8bc4\u4f30\uff1a\u4eba\u7c7b\u8bc4\u4f30\u89e3\u51b3\u4f60\u6240\u6709\u7684\u95ee\u9898\u5417\uff1f \u4e0d\uff01 \u8fdb\u884c\u4eba\u7c7b\u6709\u6548\u8bc4\u4f30\u975e\u5e38\u56f0\u96be \u4eba\u7c7b \u662f\u4e0d\u4e00\u81f4\u7684 \u53ef\u80fd\u662f\u4e0d\u5408\u903b\u8f91\u7684 \u5931\u53bb\u6ce8\u610f\u529b \u8bef\u89e3\u4e86\u4f60\u7684\u95ee\u9898 \u4e0d\u80fd\u603b\u662f\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4ed6\u4eec\u4f1a\u8fd9\u6837\u505a Detailed human eval of controllable chatbots \u5728\u804a\u5929\u673a\u5668\u4eba\u9879\u76ee\u4e0a\u5de5\u4f5c\u7684\u4e2a\u4eba\u7ecf\u9a8c\uff08PersonaChat\uff09 \u6211\u4eec\u7814\u7a76\u4e86\u53ef\u63a7\u6027\uff08\u7279\u522b\u662f\u63a7\u5236\u6240\u4ea7\u751f\u7684\u8bdd\u8bed\uff0c\u5982\u91cd\u590d\uff0c\u7279\u5f02\u6027\uff0c\u56de\u5e94\u76f8\u5173\u6027\u548c\u95ee\u9898\u8be2\u95ee\uff09 What makes a good conversation? How controllable attributes affect human judgments, See et al, 2019 https://arxiv.org/pdf/1902.08654.pdf \u5982\u4f55\u8981\u6c42\u4eba\u7684\u8d28\u91cf\u5224\u65ad\uff1f \u6211\u4eec\u5c1d\u8bd5\u4e86\u7b80\u5355\u7684\u6574\u4f53\u8d28\u91cf\uff08\u591a\u9879\u9009\u62e9\uff09\u95ee\u9898\uff0c\u4f8b\u5982\uff1a \u8fd9\u6b21\u5bf9\u8bdd\u6709\u591a\u597d\uff1f \u8fd9\u4e2a\u7528\u6237\u6709\u591a\u5438\u5f15\u4eba\uff1f \u8fd9\u4e9b\u7528\u6237\u4e2d\u54ea\u4e00\u4e2a\u7ed9\u51fa\u4e86\u66f4\u597d\u7684\u54cd\u5e94\uff1f \u25cf\u60a8\u60f3\u518d\u6b21\u4e0e\u8be5\u7528\u6237\u4ea4\u8c08\u5417\uff1f \u25cf\u60a8\u8ba4\u4e3a\u8be5\u7528\u6237\u662f\u4eba\u8fd8\u662f\u673a\u5668\u4eba\uff1f \u4e3b\u8981\u95ee\u9898\uff1a \u5fc5\u7136\u975e\u5e38\u4e3b\u89c2 \u56de\u7b54\u8005\u6709\u4e0d\u540c\u7684\u671f\u671b\uff1b\u8fd9\u4f1a\u5f71\u54cd\u4ed6\u4eec\u7684\u5224\u65ad \u5bf9\u95ee\u9898\u7684\u707e\u96be\u6027\u8bef\u89e3\uff08\u4f8b\u5982\u201c\u804a\u5929\u673a\u5668\u4eba\u975e\u5e38\u5438\u5f15\u4eba\uff0c\u56e0\u4e3a\u5b83\u603b\u662f\u56de\u5199\u201d\uff09 \u603b\u4f53\u8d28\u91cf\u53d6\u51b3\u4e8e\u8bb8\u591a\u6f5c\u5728\u56e0\u7d20\uff1b\u4ed6\u4eec\u5e94\u8be5\u5982\u4f55\u88ab\u79f0\u91cd\u548c/\u6216\u6bd4\u8f83\uff1f \u6700\u7ec8\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u4e2a\u8be6\u7ec6\u7684\u4eba\u7c7b\u8bc4\u4ef7\u4f53\u7cfb\u5206\u79bb\u7684\u91cd\u8981\u56e0\u7d20\uff0c\u6709\u52a9\u4e8e\u6574\u4f53chatbot\u8d28\u91cf \u53d1\u73b0\uff1a \u63a7\u5236\u91cd\u590d\u5bf9\u4e8e\u6240\u6709\u4eba\u7c7b\u5224\u65ad\u90fd\u975e\u5e38\u91cd\u8981 \u63d0\u51fa\u66f4\u591a\u95ee\u9898\u53ef\u4ee5\u63d0\u9ad8\u53c2\u4e0e\u5ea6 \u63a7\u5236\u7279\u5f02\u6027\uff08\u8f83\u5c11\u7684\u901a\u7528\u8bdd\u8bed\uff09\u63d0\u9ad8\u4e86\u804a\u5929\u673a\u5668\u4eba\u7684\u5438\u5f15\u529b\uff0c\u8da3\u5473\u6027\u548c\u611f\u77e5\u7684\u542c\u529b\u80fd\u529b\u3002 \u4f46\u662f\uff0c\u4eba\u7c7b\u8bc4\u4f30\u4eba\u5458\u5bf9\u98ce\u9669\u7684\u5bb9\u5fcd\u5ea6\u8f83\u4f4e\uff08\u4f8b\u5982\u65e0\u610f\u4e49\u6216\u975e\u6d41\u5229\u7684\u8f93\u51fa\uff09\u4e0e\u8f83\u4e0d\u901a\u7528\u7684\u673a\u5668\u4eba\u76f8\u5173\u8054 \u603b\u4f53\u5ea6\u91cf\u201c\u5438\u5f15\u529b\u201d\uff08\u5373\u4eab\u53d7\uff09\u5f88\u5bb9\u6613\u6700\u5927\u5316 - \u6211\u4eec\u7684\u673a\u5668\u4eba\u8fbe\u5230\u4e86\u8fd1\u4e4e\u4eba\u6027\u5316\u7684\u8868\u73b0 \u6574\u4f53\u5ea6\u91cf\u201c\u4eba\u6027\u5316\u201d\uff08\u5373\u56fe\u7075\u6d4b\u8bd5\uff09\u6839\u672c\u4e0d\u5bb9\u6613\u6700\u5927\u5316 - \u6240\u6709\u673a\u5668\u4eba\u8fdc\u8fdc\u4f4e\u4e8e\u4eba\u7c7b\u8868\u73b0 \u4eba\u6027\u5316\u4e0e\u4f1a\u8bdd\u8d28\u91cf\u4e0d\u4e00\u6837\uff01 \u4eba\u7c7b\u662f\u6b21\u4f18\u7684\u4f1a\u8bdd\u4e3b\u4e49\u8005\uff1a\u4ed6\u4eec\u5728\u6709\u8da3\uff0c\u6d41\u5229\uff0c\u503e\u542c\u4e0a\u5f97\u5206\u5f88\u4f4e\uff0c\u5e76\u4e14\u95ee\u7684\u95ee\u9898\u592a\u5c11 Possible new avenues for NLG eval? \u8bed\u6599\u5e93\u7ea7\u522b\u7684\u8bc4\u4ef7\u6307\u6807 \u5ea6\u91cf\u5e94\u72ec\u7acb\u5e94\u7528\u4e8e\u6d4b\u8bd5\u96c6\u7684\u6bcf\u4e2a\u793a\u4f8b\uff0c\u6216\u6574\u4e2a\u8bed\u6599\u5e93\u7684\u51fd\u6570 \u4f8b\u5982\uff0c\u5982\u679c\u5bf9\u8bdd\u6a21\u578b\u5bf9\u6d4b\u8bd5\u96c6\u4e2d\u7684\u6bcf\u4e00\u4e2a\u4f8b\u5b50\u56de\u7b54\u76f8\u540c\u7684\u901a\u7528\u7b54\u6848\uff0c\u5b83\u5e94\u8be5\u88ab\u60e9\u7f5a \u8bc4\u4f30\u8861\u91cf\u591a\u6837\u6027\u5b89\u5168\u6743\u8861\u7684\u8bc4\u4f30\u6307\u6807 \u514d\u8d39\u7684\u4eba\u7c7b\u8bc4\u4f30 \u6e38\u620f\u5316\uff1a\u4f7f\u4efb\u52a1\uff08\u4f8b\u5982\u4e0e\u804a\u5929\u673a\u5668\u4eba\u4ea4\u8c08\uff09\u53d8\u5f97\u6709\u8da3\uff0c\u8fd9\u6837\u4eba\u7c7b\u5c31\u53ef\u4ee5\u4e3a\u514d\u8d39\u63d0\u4f9b\u76d1\u7763\u548c\u9690\u5f0f\u8bc4\u4f30\uff0c\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807 \u5bf9\u6297\u6027\u9274\u522b\u5668\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807 \u6d4b\u8bd5NLG\u7cfb\u7edf\u662f\u5426\u80fd\u611a\u5f04\u7ecf\u8fc7\u8bad\u7ec3\u80fd\u591f\u533a\u5206\u4eba\u7c7b\u6587\u672c\u548cAI\u751f\u6210\u7684\u6587\u672c\u7684\u8bc6\u522b\u5668","title":"Section 3: NLG evaluation"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#section-4-thoughts-on-nlg-research-current-trends-and-the-future","text":"Exciting current trends in NLG \u5c06\u79bb\u6563\u6f5c\u5728\u53d8\u91cf\u7eb3\u5165NLG \u53ef\u4ee5\u5e2e\u52a9\u5728\u771f\u6b63\u9700\u8981\u5b83\u7684\u4efb\u52a1\u4e2d\u5efa\u6a21\u7ed3\u6784\uff0c\u4f8b\u5982\u8bb2\u6545\u4e8b\uff0c\u4efb\u52a1\u5bfc\u5411\u5bf9\u8bdd\u7b49 \u4e25\u683c\u7684\u4ece\u5de6\u5230\u53f3\u751f\u6210\u7684\u66ff\u4ee3\u65b9\u6848 \u5e76\u884c\u751f\u6210\uff0c\u8fed\u4ee3\u7ec6\u5316\uff0c\u81ea\u4e0a\u800c\u4e0b\u751f\u6210\u8f83\u957f\u7684\u6587\u672c \u66ff\u4ee3teacher forcing\u7684\u6700\u5927\u53ef\u80fd\u6027\u57f9\u8bad \u66f4\u5168\u9762\u7684\u53e5\u5b50\u7ea7\u522b\u7684\u76ee\u6807\u51fd\u6570\uff08\u800c\u4e0d\u662f\u5355\u8bcd\u7ea7\u522b\uff09 Neural NLG community is rapidly maturing \u5728NLP+\u6df1\u5ea6\u5b66\u4e60\u7684\u65e9\u671f\uff0c\u793e\u533a\u4e3b\u8981\u5c06\u6210\u529f\u7684\u975e\u673a\u52a8\u8f66\u4ea4\u901a\u65b9\u6cd5\u8f6c\u79fb\u5230NLG\u4efb\u52a1\u4e2d\u3002 \u73b0\u5728\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u521b\u65b0NLG\u6280\u672f\u51fa\u73b0\uff0c\u9488\u5bf9\u975eNMT\u751f\u6210\u73af\u5883\u3002 \u8d8a\u6765\u8d8a\u591a\uff08\u795e\u7ecf\uff09NLG\u7814\u8ba8\u4f1a\u548c\u7ade\u8d5b\uff0c\u7279\u522b\u5173\u6ce8\u5f00\u653e\u5f0fNLG NeuralGen workshop Storytelling workshop Alexa challenge ConvAI2 NeurIPS challenge \u8fd9\u4e9b\u5bf9\u4e8e\u7ec4\u7ec7\u793e\u533a\u63d0\u9ad8\u518d\u73b0\u6027\u3001\u6807\u51c6\u5316\u8bc4\u4f30\u7279\u522b\u6709\u7528 \u6700\u5927\u969c\u788d\u662f\u8bc4\u4f30 8 things I\u2019ve learnt from working in NLG \u4efb\u52a1\u8d8a\u5f00\u653e\uff0c\u4e00\u5207\u5c31\u8d8a\u56f0\u96be \u7ea6\u675f\u6709\u65f6\u662f\u53d7\u6b22\u8fce\u7684 \u9488\u5bf9\u7279\u5b9a\u6539\u8fdb\u7684\u76ee\u6807\u6bd4\u65e8\u5728\u63d0\u9ad8\u6574\u4f53\u751f\u6210\u8d28\u91cf\u66f4\u6613\u4e8e\u7ba1\u7406 \u5982\u679c\u4f60\u4f7f\u7528\u4e00\u4e2aLM\u4f5c\u4e3aNLG\uff1a\u6539\u8fdbLM\uff08\u5373\u56f0\u60d1\uff09\u6700\u6709\u53ef\u80fd\u63d0\u9ad8\u751f\u6210\u8d28\u91cf \u4f46\u8fd9\u5e76\u4e0d\u662f\u63d0\u9ad8\u751f\u6210\u8d28\u91cf\u7684\u552f\u4e00\u9014\u5f84 \u591a\u770b\u770b\u4f60\u7684\u8f93\u51fa \u4f60\u9700\u8981\u4e00\u4e2a\u81ea\u52a8\u5ea6\u91cf\uff0c\u5373\u4f7f\u5b83\u662f\u4e0d\u53d7\u5f71\u54cd\u7684 \u60a8\u53ef\u80fd\u9700\u8981\u51e0\u4e2a\u81ea\u52a8\u5ea6\u91cf \u5982\u679c\u4f60\u505a\u4e86\u4eba\u5de5\u8bc4\u4f30\uff0c\u8ba9\u95ee\u9898\u5c3d\u53ef\u80fd\u7684\u96c6\u4e2d \u5728\u4eca\u5929\u7684NLP + \u6df1\u5ea6\u5b66\u4e60\u548c NLG\u4e2d\uff0c\u518d\u73b0\u6027\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u95ee\u9898\u3002 \u8bf7\u516c\u5f00\u53d1\u5e03\u6240\u6709\u751f\u6210\u7684\u8f93\u51fa\u4ee5\u53ca\u60a8\u7684\u8bba\u6587 \u5728NLG\u5de5\u4f5c\u53ef\u80fd\u5f88\u4ee4\u4eba\u6cae\u4e27\uff0c\u4f46\u4e5f\u5f88\u6709\u8da3","title":"Section 4: Thoughts on NLG research, current trends, and the future"},{"location":"CS224n-2019-15-Natural%20Language%20Generation/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-16-Coreference%20Resolution/","text":"Lecture 16 Coreference Resolution \u00b6 Lecture Plan What is Coreference Resolution? (15 mins) Applications of coreference resolution (5 mins) Mention Detection (5 mins) Some Linguistics: Types of Reference (5 mins) Four Kinds of Coreference Resolution Models Rule-based (Hobbs Algorithm) (10 mins) Mention-pair models (10 mins) Mention ranking models (15 mins) Including the current state-of-the-art coreference system! Mention clustering model (5 mins \u2013 only partial coverage) Evaluation and current results (10 mins) 1. What is Coreference Resolution? \u00b6 \u8bc6\u522b\u6240\u6709\u6d89\u53ca\u5230\u76f8\u540c\u73b0\u5b9e\u4e16\u754c\u5b9e\u4f53\u7684 \u63d0\u53ca He, her \u90fd\u662f\u5b9e\u4f53\u7684\u63d0\u53ca mentions of entities Applications \u5168\u6587\u7406\u89e3 \u4fe1\u606f\u63d0\u53d6, \u56de\u7b54\u95ee\u9898, \u603b\u7ed3, \u2026 \u201c\u4ed6\u751f\u4e8e1961\u5e74\u201d(\u8c01?) \u673a\u5668\u7ffb\u8bd1 \u8bed\u8a00\u5bf9\u6027\u522b\uff0c\u6570\u91cf\u7b49\u6709\u4e0d\u540c\u7684\u7279\u5f81 \u5bf9\u8bdd\u7cfb\u7edf Coreference Resolution in Two Steps 3. Mention Detection \u00b6 Mention : \u6307\u5411\u67d0\u4e2a\u5b9e\u4f53\u7684\u4e00\u6bb5\u6587\u672c \u4e09\u79cd mention Pronouns \u4ee3\u8bcd I, your, it, she, him, etc. \u56e0\u4e3a\u4ee3\u8bcd\u662f POS \u68c0\u6d4b\u7ed3\u679c\u7684\u4e00\u79cd\uff0c\u6240\u4ee5\u53ea\u8981\u4f7f\u7528 POS \u68c0\u6d4b\u5668\u5373\u53ef Named entities \u547d\u540d\u5b9e\u4f53 People, places, etc. Use a NER system (like hw3) Noun phrases \u540d\u8bcd\u77ed\u8bed \u201ca dog,\u201d \u201cthe big fluffy cat stuck in the tree\u201d Use a parser (especially a \u4f9d\u5b58\u89e3\u6790\u5668 constituency parser \u2013 next week!) Marking all pronouns, named entities, and NPs as mentions over-generates mentions Are these mentions? It is sunny Every student No student The best donut in the world 100 miles How to deal with these bad mentions? \u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u5206\u7c7b\u5668\u8fc7\u6ee4\u6389 spurious mentions \u66f4\u4e3a\u5e38\u89c1\u7684\uff1a\u4fdd\u6301\u6240\u6709 mentions \u4f5c\u4e3a \u201ccandidate mentions\u201d \u5728\u4f60\u7684\u5171\u6307\u7cfb\u7edf\u8fd0\u884c\u5b8c\u6210\u540e\uff0c\u4e22\u5f03\u6240\u6709\u7684\u5355\u4e2a\u5f15\u7528(\u5373\u6ca1\u6709\u88ab\u6807\u8bb0\u4e3a\u4e0e\u5176\u4ed6\u4efb\u4f55\u4e1c\u897f\u5171\u540c\u5f15\u7528\u7684) Can we avoid a pipelined system? \u6211\u4eec\u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e mention \u68c0\u6d4b\u7684\u5206\u7c7b\u5668\uff0c\u800c\u4e0d\u662f\u4f7f\u7528POS\u6807\u8bb0\u5668\u3001NER\u7cfb\u7edf\u548c\u89e3\u6790\u5668\u3002 \u751a\u81f3\u7aef\u5230\u7aef\u5171\u540c\u5b8c\u6210 mention \u68c0\u6d4b\u548c\u5171\u6307\u89e3\u6790\uff0c\u800c\u4e0d\u662f\u4e24\u6b65 4. On to Coreference! First, some linguistics \u00b6 Coreference is when two mentions refer to the same entity in the world \u5f53\u4e24\u4e2a mention \u6307\u5411\u4e16\u754c\u4e0a\u7684\u540c\u4e00\u4e2a\u5b9e\u4f53\u65f6\uff0c\u88ab\u79f0\u4e3a\u5171\u6307 Barack Obama \u548c Obama \u76f8\u5173\u7684\u8bed\u8a00\u6982\u5ff5\u662f anaphora \u56de\u6307\uff1awhen a term (anaphor) refers to another term (antecedent) \u4e0b\u6587\u7684\u8bcd\u8fd4\u6307\u6216\u4ee3\u66ff\u4e0a\u6587\u7684\u8bcd anaphor \u7684\u89e3\u91ca\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53d6\u51b3\u4e8e antecedent \u5148\u884c\u8bcd\u7684\u89e3\u91ca Anaphora vs Coreference Not all anaphoric relations are coreferential Not all noun phrases have reference \u4e0d\u662f\u6240\u6709\u7684\u540d\u8bcd\u77ed\u8bed\u90fd\u6709\u6307\u4ee3 Every dancer twisted her knee No dancer twisted her knee \u6bcf\u4e00\u4e2a\u53e5\u5b50\u6709\u4e09\u4e2aNPs\uff1b\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u662f\u975e\u6307\u793a\u6027\u7684\uff0c\u53e6\u5916\u4e24\u4e2a\u4e5f\u4e0d\u662f Not all anaphoric relations are coreferential We went to see a concert last night. The tickets were really expensive. \u8fd9\u88ab\u79f0\u4e3a\u6865\u63a5\u56de\u6307 bridging anaphora \u901a\u5e38\u5148\u884c\u8bcd\u5728\u56de\u6307\uff08\u4f8b\u5982\u4ee3\u8bcd\uff09\u4e4b\u524d\uff0c\u4f46\u5e76\u4e0d\u603b\u662f Cataphora Four Kinds of Coreference Models Rule-based (pronominal anaphora resolution) Mention Pair Mention Ranking Clustering 5. Traditional pronominal anaphora resolution:Hobbs\u2019 naive algorithm \u00b6 \u8be5\u7b97\u6cd5\u4ec5\u7528\u4e8e\u5bfb\u627e\u4ee3\u8bcd\u7684\u53c2\u8003\uff0c\u4e5f\u53ef\u4ee5\u5ef6\u4f38\u5230\u5176\u4ed6\u6848\u4f8b Begin at the NP immediately dominating the pronoun Go up tree to first NP or S. Call this X, and the path p. Traverse all branches below X to the left of p, left-to-right,breadth-first. Propose as antecedent any NP that has a NP or Sbetween it and X If X is the highest S in the sentence, traverse the parse trees ofthe previous sentences in the order of recency. Traverse eachtree left-to-right, breadth first. When an NP is encountered,propose as antecedent. If X not the highest node, go to step 5. From node X, go up the tree to the first NP or S. Call it X, andthe path p. If X is an NP and the path p to X came from a non-head phraseof X (a specifier or adjunct, such as a possessive, PP, apposition, orrelative clause), propose X as antecedent(The original said \u201cdid not pass through the N\u2019 that X immediatelydominates\u201d, but the Penn Treebank grammar lacks N\u2019 nodes\u2026.) Traverse all branches below X to the left of the path, in a leftto-right, breadth first manner. Propose any NP encountered asthe antecedent If X is an S node, traverse all branches of X to the right of thepath but do not go below any NP or S encountered. Proposeany NP as the antecedent.9. Go to step 4 Hobbs Algorithm Example \u8fd9\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u3001\u4f46\u6548\u679c\u5f88\u597d\u7684\u5171\u6307\u6d88\u89e3\u7684 baseline Knowledge-based Pronominal Coreference \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4e24\u4e2a\u53e5\u5b50\u5177\u6709\u76f8\u540c\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u4f46\u662f\u51fa\u4e8e\u5916\u90e8\u4e16\u754c\u77e5\u8bc6\uff0c\u6211\u4eec\u80fd\u591f\u77e5\u9053\u5012\u6c34\u4e4b\u540e\uff0c\u6ee1\u7684\u662f\u676f\u5b50\uff08\u7b2c\u4e00\u4e2a it \u6307\u5411\u7684\u662f the cup\uff09\uff0c\u7a7a\u7684\u662f\u58f6\uff08\u7b2c\u4e8c\u4e2a it \u6307\u5411\u7684\u662f the pitcher\uff09 \u53ef\u4ee5\u5c06\u4e16\u754c\u77e5\u8bc6\u7f16\u7801\u6210\u5171\u6307\u95ee\u9898 Hobbs\u2019 algorithm: commentary 6. Coreference Models: Mention Pair \u00b6 \u8bad\u7ec3\u4e00\u4e2a\u4e8c\u5143\u5206\u7c7b\u5668\uff0c\u4e3a\u6bcf\u4e00\u5bf9 mention \u7684\u5206\u914d\u5171\u53c2\u7684\u6982\u7387 \\(p(m_i,m_j)\\) \u4f8b\u5982\uff0c\u4e3a\u4e86\u5bfb\u627e \u201cshe\u201d \u7684\u5171\u6307\uff0c\u67e5\u770b\u6240\u6709\u5019\u9009\u5148\u884c\u8bcd(\u4ee5\u524d\u51fa\u73b0\u7684 mention )\uff0c\u5e76\u786e\u5b9a\u54ea\u4e9b\u4e0e\u4e4b\u76f8\u5173 \u6587\u7ae0\u7684 N \u4e2a mention \u5982\u679c \\(m_i\\) \u548c \\(m_j\\) \u662f\u5171\u6307\u7684\uff0c\u5219 \\(y_{ij} = 1\\) \uff0c\u5426\u5219 \\(y_{ij} = -1\\) \u53ea\u662f\u8bad\u7ec3\u6b63\u5e38\u7684\u4ea4\u53c9\u71b5\u635f\u5931(\u770b\u8d77\u6765\u6709\u70b9\u4e0d\u540c\uff0c\u56e0\u4e3a\u5b83\u662f\u4e8c\u5143\u5206\u7c7b) \u904d\u5386 mentions \u904d\u5386\u5019\u9009\u5148\u884c\u8bcd(\u524d\u9762\u51fa\u73b0\u7684 mention) \u5171\u6307 mention \u5bf9\u5e94\u8be5\u5f97\u5230\u9ad8\u6982\u7387\uff0c\u5176\u4ed6\u5e94\u8be5\u5f97\u5230\u4f4e\u6982\u7387 Mention Pair Test Time \u5171\u6307\u89e3\u6790\u662f\u4e00\u9879\u805a\u7c7b\u4efb\u52a1\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u662f\u5bf9 mentions \u5bf9\u8fdb\u884c\u4e86\u8bc4\u5206\u2026\u2026\u8be5\u600e\u4e48\u529e\uff1f \u9009\u62e9\u4e00\u4e9b\u9608\u503c(\u4f8b\u59820.5)\uff0c\u5e76\u5c06 \\(p(m_i,m_j)\\) \u5728\u9608\u503c\u4ee5\u4e0a\u7684 mentions \u5bf9\u4e4b\u95f4\u6dfb\u52a0\u5171\u6307\u94fe\u63a5 \u5229\u7528\u4f20\u9012\u95ed\u5305\u5f97\u5230\u805a\u7c7b \u5171\u6307\u8fde\u63a5\u5177\u6709\u4f20\u9012\u6027\uff0c\u5373\u4f7f\u6ca1\u6709\u4e0d\u5b58\u5728 link \u7684\u4e24\u8005\u4e5f\u4f1a\u7531\u4e8e\u4f20\u9012\u6027\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u805a\u7c7b\u4e2d \u8fd9\u662f\u5341\u5206\u5371\u9669\u7684 \u5982\u679c\u6709\u4e00\u4e2a\u5171\u6307 link \u5224\u65ad\u9519\u8bef\uff0c\u5c31\u4f1a\u5bfc\u81f4\u4e24\u4e2a cluster \u88ab\u9519\u8bef\u5730\u5408\u5e76\u4e86 Mention Pair Models: Disadvantage \u5047\u8bbe\u6211\u4eec\u7684\u957f\u6587\u6863\u91cc\u6709\u5982\u4e0b\u7684 mentions \u8bb8\u591a mentions \u53ea\u6709\u4e00\u4e2a\u6e05\u6670\u7684\u5148\u884c\u8bcd \u4f46\u6211\u4eec\u8981\u6c42\u6a21\u578b\u6765\u9884\u6d4b\u5b83\u4eec \u89e3\u51b3\u65b9\u6848\uff1a\u76f8\u53cd\uff0c\u8bad\u7ec3\u6a21\u578b\u4e3a\u6bcf\u4e2a mention \u53ea\u9884\u6d4b\u4e00\u4e2a\u5148\u884c\u8bcd \u5728\u8bed\u8a00\u4e0a\u66f4\u5408\u7406 7. Coreference Models: Mention Ranking \u00b6 \u6839\u636e\u6a21\u578b\u628a\u5176\u5f97\u5206\u6700\u9ad8\u7684\u5148\u884c\u8bcd\u5206\u914d\u7ed9\u6bcf\u4e2a mention \u865a\u62df\u7684 NA mention \u5141\u8bb8\u6a21\u578b\u62d2\u7edd\u5c06\u5f53\u524d mention \u4e0e\u4efb\u4f55\u5185\u5bb9\u8054\u7cfb\u8d77\u6765(\u201csingleton\u201d or \u201cfirst\u201d mention) first mention\uff1a I \u53ea\u80fd\u9009\u62e9 NA \u4f5c\u4e3a\u81ea\u5df1\u7684\u5148\u884c\u8bcd Coreference Models: Training \u6211\u4eec\u5e0c\u671b\u5f53\u524d mention \\(m_j\\) \u4e0e\u5b83\u6240\u5173\u8054\u7684\u4efb\u4f55\u4e00\u4e2a\u5019\u9009\u5148\u884c\u8bcd\u76f8\u5173\u8054\u3002 \u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u80fd\u60f3\u8981\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u516c\u5f0f\u89e3\u6790 \u904d\u5386\u5019\u9009\u5148\u884c\u8bcd\u96c6\u5408 \u5bf9\u4e8e \\(y_{ij} = 1\\) \u7684\u60c5\u51b5\uff0c\u5373 \\(m_i\\) \u4e0e \\(m_j\\) \u662f\u5171\u6307\u5173\u7cfb\u7684\u60c5\u51b5 \u6211\u4eec\u5e0c\u671b\u6a21\u578b\u80fd\u591f\u7ed9\u4e88\u5176\u9ad8\u53ef\u80fd\u6027 \u8be5\u6a21\u578b\u53ef\u4ee5\u4e3a\u4e00\u4e2a\u6b63\u786e\u7684\u5148\u884c\u8bcd\u4ea7\u751f\u6982\u7387 0.9 \uff0c\u800c\u5bf9\u5176\u4ed6\u6240\u6709\u4ea7\u751f\u8f83\u4f4e\u7684\u6982\u7387\uff0c\u5e76\u4e14\u603b\u548c\u4ecd\u7136\u5f88\u5927 Turning this into a loss function Mention Ranking Models: Test Time \u548c mention-pair \u6a21\u578b\u51e0\u4e4e\u4e00\u6837\uff0c\u9664\u4e86\u6bcf\u4e2a mention \u53ea\u5206\u914d\u4e00\u4e2a\u5148\u884c\u8bcd How do we compute the probabilities? A. Non-neural statistical classifier B. Simple neural network C. More advanced model using LSTMs, attention A. Non-Neural Coref Model: Features \u4f7f\u7528\u5982\u4e0b\u7279\u5f81\u8fdb\u884c\u5206\u7c7b \u4eba\u3001\u6570\u5b57\u3001\u6027\u522b \u8bed\u4e49\u76f8\u5bb9\u6027 \u53e5\u6cd5\u7ea6\u675f \u66f4\u8fd1\u7684\u63d0\u5230\u7684\u5b9e\u4f53\u662f\u4e2a\u53ef\u80fd\u7684\u53c2\u8003\u5bf9\u8c61 \u8bed\u6cd5\u89d2\u8272\uff1a\u504f\u597d\u4e3b\u8bed\u4f4d\u7f6e\u7684\u5b9e\u4f53 \u6392\u6bd4 B. Neural Coref Model \u6807\u51c6\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc \u8f93\u5165\u5c42\uff1a\u8bcd\u5d4c\u5165\u548c\u4e00\u4e9b\u7c7b\u522b\u7279\u5f81 Neural Coref Model: Inputs \u5d4c\u5165 \u6bcf\u4e2a mention \u7684\u524d\u4e24\u4e2a\u5355\u8bcd\uff0c\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0c\u6700\u540e\u4e00\u4e2a\u5355\u8bcd\uff0chead word\uff0c\u2026 head word\u662f mention \u4e2d\u201c\u6700\u91cd\u8981\u201d\u7684\u5355\u8bcd\u2014\u53ef\u4ee5\u4f7f\u7528\u89e3\u6790\u5668\u627e\u5230\u5b83 \u4f8b\u5982\uff1a The fluffy cat stuck in the tree \u4ecd\u7136\u9700\u8981\u4e00\u4e9b\u5176\u4ed6\u7279\u5f81 \u8ddd\u79bb \u6587\u6863\u4f53\u88c1 \u8bf4\u8bdd\u8005\u7684\u4fe1\u606f C. End-to-end Model \u00b6 \u5f53\u524d\u6700\u5148\u8fdb\u7684\u6a21\u578b\u7b97\u6cd5(Kenton Lee et al. from UW, EMNLP 2017) Mention \u6392\u540d\u6a21\u578b \u6539\u8fdb\u4e86\u7b80\u5355\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc \u4f7f\u7528LSTM \u4f7f\u7528\u6ce8\u610f\u529b \u7aef\u5230\u7aef\u7684\u5b8c\u6210 mention \u68c0\u6d4b\u548c\u5171\u6307 \u6ca1\u6709 mention \u68c0\u6d4b\u6b65\u9aa4\uff01 \u800c\u662f\u8003\u8651\u6bcf\u6bb5\u6587\u672c(\u4e00\u5b9a\u957f\u5ea6)\u4f5c\u4e3a\u5019\u9009 mention a span \u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u5e8f\u5217 End-to-end Model \u9996\u5148\u5c06\u6587\u6863\u91cc\u7684\u5355\u8bcd\u4f7f\u7528\u8bcd\u5d4c\u5165\u77e9\u9635\u548c charCNN embed \u4e3a\u8bcd\u5d4c\u5165 \u63a5\u7740\u5728\u6587\u6863\u4e0a\u8fd0\u884c\u53cc\u5411 LSTM \u63a5\u7740\u5c06\u6bcf\u6bb5\u6587\u672c \\(i\\) \u4ece \\(\\text{START}(i)\\) \u5230 \\(\\text{END}(i)\\) \u8868\u793a\u4e3a\u4e00\u4e2a\u5411\u91cf span \u662f\u53e5\u5b50\u4e2d\u4efb\u4f55\u5355\u8bcd\u7684\u8fde\u7eed\u5b50\u53e5 General, General Electric, General Electric said, \u2026 Electric, Electric said, \u2026\u90fd\u4f1a\u5f97\u5230\u5b83\u81ea\u5df1\u7684\u5411\u91cf\u8868\u793a span representation \\[ \\boldsymbol{g}_{i}=\\left[\\boldsymbol{x}_{\\operatorname{START}(i)}^{*}, \\boldsymbol{x}_{\\mathrm{END}(i)}^{*}, \\hat{\\boldsymbol{x}}_{i}, \\phi(i)\\right] \\] \u4f8b\u5982 \u201cthe postal service\u201d \\(\\hat{\\boldsymbol{x}}_{i}\\) \u662f span \u7684\u6ce8\u610f\u529b\u52a0\u6743\u5e73\u5747\u7684\u8bcd\u5411\u91cf \u4e3a\u4ec0\u4e48\u8981\u5728 span \u4e2d\u5f15\u5165\u6240\u6709\u7684\u8fd9\u4e9b\u4e0d\u540c\u7684\u9879 \u6700\u540e\uff0c\u4e3a\u6bcf\u4e2a span \u5bf9\u6253\u5206\u6765\u51b3\u5b9a\u4ed6\u4eec\u662f\u4e0d\u662f\u5171\u6307 mentions \u6253\u5206\u51fd\u6570\u4ee5 span representations \u4f5c\u4e3a\u8f93\u5165 \u4e3a\u6bcf\u5bf9 span \u6253\u5206\u662f\u68d8\u624b\u7684 \u4e00\u4e2a\u6587\u6863\u4e2d\u6709 \\(O(T^2)\\) spans\uff0cT \u662f\u8bcd\u7684\u4e2a\u6570 \\(O(T^4)\\) \u7684\u8fd0\u884c\u65f6\u95f4 \u6240\u4ee5\u5fc5\u987b\u505a\u5927\u91cf\u7684\u4fee\u526a\u5de5\u4f5c(\u53ea\u8003\u8651\u4e00\u4e9b\u53ef\u80fd\u662f mention \u7684span) \u5173\u6ce8\u5b66\u4e60\u54ea\u4e9b\u5355\u8bcd\u662f\u91cd\u8981\u7684\u5728\u63d0\u5230(\u6709\u70b9\u50cfhead word) 8. Last Coreference Approach: Clustering-Bas \u00b6 \u5171\u6307\u662f\u4e2a\u805a\u7c7b\u4efb\u52a1\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u805a\u7c7b\u7b97\u6cd5\u5427 \u7279\u522b\u662f\u6211\u4eec\u5c06\u4f7f\u7528 agglomerative \u51dd\u805a\u805a\u7c7b \u81ea\u4e0b\u800c\u4e0a\u7684 \u5f00\u59cb\u65f6\uff0c\u6bcf\u4e2a mention \u5728\u5b83\u81ea\u5df1\u7684\u5355\u72ec\u96c6\u7fa4\u4e2d \u6bcf\u4e00\u6b65\u5408\u5e76\u4e24\u4e2a\u96c6\u7fa4 \u4f7f\u7528\u6a21\u578b\u6765\u6253\u5206\u90a3\u4e9b\u805a\u7c7b\u5408\u5e76\u662f\u597d\u7684 Clustering Model Architecture From Clark & Manning, 2016 \u9996\u5148\u4e3a\u6bcf\u4e2a mention \u5bf9\u751f\u6210\u4e00\u4e2a\u5411\u91cf \u4f8b\u5982\uff0c\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u4e2d\u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa \u63a5\u7740\u5c06\u6c60\u5316\u64cd\u4f5c\u5e94\u7528\u4e8e mentino-pair \u8868\u793a\u7684\u77e9\u9635\u4e0a\uff0c\u5f97\u5230\u4e00\u4e2a cluster-pair \u805a\u7c7b\u5bf9\u7684\u8868\u793a \u901a\u8fc7\u7528\u6743\u91cd\u5411\u91cf\u4e0e\u8868\u793a\u5411\u91cf\u7684\u70b9\u79ef\uff0c\u5bf9 candidate cluster merge \u8fdb\u884c\u8bc4\u5206 \\(s\\left(\\operatorname{MERGE}\\left[c_{1}, c_{2}\\right]\\right)=u^{T} r_{c}\\left(c_{1}, c_{2}\\right)\\) \u5f53\u524d\u5019\u9009\u7c07\u7684\u5408\u5e76\uff0c\u53d6\u51b3\u4e8e\u4e4b\u524d\u7684\u5408\u5e76 \u6240\u4ee5\u4e0d\u80fd\u7528\u5e38\u89c4\u7684\u76d1\u7763\u5b66\u4e60 \u4f7f\u7528\u7c7b\u4f3c\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u6a21\u578b \u4e3a\u6bcf\u4e2a\u5408\u5e76\u5206\u914d\u5956\u52b1\uff1a\u5171\u6307\u8bc4\u4ef7\u6307\u6807\u7684\u53d8\u5316 9. Coreference Evaluation \u00b6 \u8bb8\u591a\u4e0d\u540c\u7684\u8bc4\u4ef7\u6307\u6807\uff1aMUC, CEAF, LEA, B-CUBED, BLANC \u7ecf\u5e38\u4f7f\u7528\u4e00\u4e9b\u4e0d\u540c\u8bc4\u4ef7\u6307\u6807\u7684\u5747\u503c \u4f8b\u5982 B-cubed \u5bf9\u4e8e\u6bcf\u4e2a mention \uff0c\u8ba1\u7b97\u5176\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387 \u7136\u540e\u5e73\u5747\u6bcf\u4e2a\u4e2a\u4f53\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387 System Performance OntoNotes\u6570\u636e\u96c6:~ 3000\u4eba\u7c7b\u6807\u6ce8\u7684\u6587\u6863 \u82f1\u8bed\u548c\u4e2d\u6587 Report an F1 score averaged over 3 coreference metrics Where do neural scoring models help? \u7279\u522b\u662f\u5bf9\u4e8e\u6ca1\u6709\u5b57\u7b26\u4e32\u5339\u914d\u7684NPs\u548c\u547d\u540d\u5b9e\u4f53\u3002\u795e\u7ecf\u4e0e\u975e\u795e\u7ecf\u8bc4\u5206: Conclusion \u5171\u6307\u662f\u4e00\u4e2a\u6709\u7528\u7684\u3001\u5177\u6709\u6311\u6218\u6027\u548c\u6709\u8da3\u7684\u8bed\u8a00\u4efb\u52a1 \u8bb8\u591a\u4e0d\u540c\u79cd\u7c7b\u7684\u7b97\u6cd5\u7cfb\u7edf \u7cfb\u7edf\u8fc5\u901f\u597d\u8f6c\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u7531\u4e8e\u66f4\u597d\u7684\u795e\u7ecf\u6a21\u578b \u4f46\u603b\u7684\u6765\u8bf4,\u8fd8\u6ca1\u6709\u60ca\u4eba\u7684\u7ed3\u679c Try out a coreference system yourself http://corenlp.run/ (ask for coref in Annotations) https://huggingface.co/coref/ Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"16 Coreference Resolution"},{"location":"CS224n-2019-16-Coreference%20Resolution/#lecture-16-coreference-resolution","text":"Lecture Plan What is Coreference Resolution? (15 mins) Applications of coreference resolution (5 mins) Mention Detection (5 mins) Some Linguistics: Types of Reference (5 mins) Four Kinds of Coreference Resolution Models Rule-based (Hobbs Algorithm) (10 mins) Mention-pair models (10 mins) Mention ranking models (15 mins) Including the current state-of-the-art coreference system! Mention clustering model (5 mins \u2013 only partial coverage) Evaluation and current results (10 mins)","title":"Lecture 16 Coreference Resolution"},{"location":"CS224n-2019-16-Coreference%20Resolution/#1-what-is-coreference-resolution","text":"\u8bc6\u522b\u6240\u6709\u6d89\u53ca\u5230\u76f8\u540c\u73b0\u5b9e\u4e16\u754c\u5b9e\u4f53\u7684 \u63d0\u53ca He, her \u90fd\u662f\u5b9e\u4f53\u7684\u63d0\u53ca mentions of entities Applications \u5168\u6587\u7406\u89e3 \u4fe1\u606f\u63d0\u53d6, \u56de\u7b54\u95ee\u9898, \u603b\u7ed3, \u2026 \u201c\u4ed6\u751f\u4e8e1961\u5e74\u201d(\u8c01?) \u673a\u5668\u7ffb\u8bd1 \u8bed\u8a00\u5bf9\u6027\u522b\uff0c\u6570\u91cf\u7b49\u6709\u4e0d\u540c\u7684\u7279\u5f81 \u5bf9\u8bdd\u7cfb\u7edf Coreference Resolution in Two Steps","title":"1. What is Coreference Resolution?"},{"location":"CS224n-2019-16-Coreference%20Resolution/#3-mention-detection","text":"Mention : \u6307\u5411\u67d0\u4e2a\u5b9e\u4f53\u7684\u4e00\u6bb5\u6587\u672c \u4e09\u79cd mention Pronouns \u4ee3\u8bcd I, your, it, she, him, etc. \u56e0\u4e3a\u4ee3\u8bcd\u662f POS \u68c0\u6d4b\u7ed3\u679c\u7684\u4e00\u79cd\uff0c\u6240\u4ee5\u53ea\u8981\u4f7f\u7528 POS \u68c0\u6d4b\u5668\u5373\u53ef Named entities \u547d\u540d\u5b9e\u4f53 People, places, etc. Use a NER system (like hw3) Noun phrases \u540d\u8bcd\u77ed\u8bed \u201ca dog,\u201d \u201cthe big fluffy cat stuck in the tree\u201d Use a parser (especially a \u4f9d\u5b58\u89e3\u6790\u5668 constituency parser \u2013 next week!) Marking all pronouns, named entities, and NPs as mentions over-generates mentions Are these mentions? It is sunny Every student No student The best donut in the world 100 miles How to deal with these bad mentions? \u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u5206\u7c7b\u5668\u8fc7\u6ee4\u6389 spurious mentions \u66f4\u4e3a\u5e38\u89c1\u7684\uff1a\u4fdd\u6301\u6240\u6709 mentions \u4f5c\u4e3a \u201ccandidate mentions\u201d \u5728\u4f60\u7684\u5171\u6307\u7cfb\u7edf\u8fd0\u884c\u5b8c\u6210\u540e\uff0c\u4e22\u5f03\u6240\u6709\u7684\u5355\u4e2a\u5f15\u7528(\u5373\u6ca1\u6709\u88ab\u6807\u8bb0\u4e3a\u4e0e\u5176\u4ed6\u4efb\u4f55\u4e1c\u897f\u5171\u540c\u5f15\u7528\u7684) Can we avoid a pipelined system? \u6211\u4eec\u53ef\u4ee5\u8bad\u7ec3\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e mention \u68c0\u6d4b\u7684\u5206\u7c7b\u5668\uff0c\u800c\u4e0d\u662f\u4f7f\u7528POS\u6807\u8bb0\u5668\u3001NER\u7cfb\u7edf\u548c\u89e3\u6790\u5668\u3002 \u751a\u81f3\u7aef\u5230\u7aef\u5171\u540c\u5b8c\u6210 mention \u68c0\u6d4b\u548c\u5171\u6307\u89e3\u6790\uff0c\u800c\u4e0d\u662f\u4e24\u6b65","title":"3. Mention Detection"},{"location":"CS224n-2019-16-Coreference%20Resolution/#4-on-to-coreference-first-some-linguistics","text":"Coreference is when two mentions refer to the same entity in the world \u5f53\u4e24\u4e2a mention \u6307\u5411\u4e16\u754c\u4e0a\u7684\u540c\u4e00\u4e2a\u5b9e\u4f53\u65f6\uff0c\u88ab\u79f0\u4e3a\u5171\u6307 Barack Obama \u548c Obama \u76f8\u5173\u7684\u8bed\u8a00\u6982\u5ff5\u662f anaphora \u56de\u6307\uff1awhen a term (anaphor) refers to another term (antecedent) \u4e0b\u6587\u7684\u8bcd\u8fd4\u6307\u6216\u4ee3\u66ff\u4e0a\u6587\u7684\u8bcd anaphor \u7684\u89e3\u91ca\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53d6\u51b3\u4e8e antecedent \u5148\u884c\u8bcd\u7684\u89e3\u91ca Anaphora vs Coreference Not all anaphoric relations are coreferential Not all noun phrases have reference \u4e0d\u662f\u6240\u6709\u7684\u540d\u8bcd\u77ed\u8bed\u90fd\u6709\u6307\u4ee3 Every dancer twisted her knee No dancer twisted her knee \u6bcf\u4e00\u4e2a\u53e5\u5b50\u6709\u4e09\u4e2aNPs\uff1b\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u662f\u975e\u6307\u793a\u6027\u7684\uff0c\u53e6\u5916\u4e24\u4e2a\u4e5f\u4e0d\u662f Not all anaphoric relations are coreferential We went to see a concert last night. The tickets were really expensive. \u8fd9\u88ab\u79f0\u4e3a\u6865\u63a5\u56de\u6307 bridging anaphora \u901a\u5e38\u5148\u884c\u8bcd\u5728\u56de\u6307\uff08\u4f8b\u5982\u4ee3\u8bcd\uff09\u4e4b\u524d\uff0c\u4f46\u5e76\u4e0d\u603b\u662f Cataphora Four Kinds of Coreference Models Rule-based (pronominal anaphora resolution) Mention Pair Mention Ranking Clustering","title":"4. On to Coreference! First, some linguistics"},{"location":"CS224n-2019-16-Coreference%20Resolution/#5-traditional-pronominal-anaphora-resolutionhobbs-naive-algorithm","text":"\u8be5\u7b97\u6cd5\u4ec5\u7528\u4e8e\u5bfb\u627e\u4ee3\u8bcd\u7684\u53c2\u8003\uff0c\u4e5f\u53ef\u4ee5\u5ef6\u4f38\u5230\u5176\u4ed6\u6848\u4f8b Begin at the NP immediately dominating the pronoun Go up tree to first NP or S. Call this X, and the path p. Traverse all branches below X to the left of p, left-to-right,breadth-first. Propose as antecedent any NP that has a NP or Sbetween it and X If X is the highest S in the sentence, traverse the parse trees ofthe previous sentences in the order of recency. Traverse eachtree left-to-right, breadth first. When an NP is encountered,propose as antecedent. If X not the highest node, go to step 5. From node X, go up the tree to the first NP or S. Call it X, andthe path p. If X is an NP and the path p to X came from a non-head phraseof X (a specifier or adjunct, such as a possessive, PP, apposition, orrelative clause), propose X as antecedent(The original said \u201cdid not pass through the N\u2019 that X immediatelydominates\u201d, but the Penn Treebank grammar lacks N\u2019 nodes\u2026.) Traverse all branches below X to the left of the path, in a leftto-right, breadth first manner. Propose any NP encountered asthe antecedent If X is an S node, traverse all branches of X to the right of thepath but do not go below any NP or S encountered. Proposeany NP as the antecedent.9. Go to step 4 Hobbs Algorithm Example \u8fd9\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u3001\u4f46\u6548\u679c\u5f88\u597d\u7684\u5171\u6307\u6d88\u89e3\u7684 baseline Knowledge-based Pronominal Coreference \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4e24\u4e2a\u53e5\u5b50\u5177\u6709\u76f8\u540c\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u4f46\u662f\u51fa\u4e8e\u5916\u90e8\u4e16\u754c\u77e5\u8bc6\uff0c\u6211\u4eec\u80fd\u591f\u77e5\u9053\u5012\u6c34\u4e4b\u540e\uff0c\u6ee1\u7684\u662f\u676f\u5b50\uff08\u7b2c\u4e00\u4e2a it \u6307\u5411\u7684\u662f the cup\uff09\uff0c\u7a7a\u7684\u662f\u58f6\uff08\u7b2c\u4e8c\u4e2a it \u6307\u5411\u7684\u662f the pitcher\uff09 \u53ef\u4ee5\u5c06\u4e16\u754c\u77e5\u8bc6\u7f16\u7801\u6210\u5171\u6307\u95ee\u9898 Hobbs\u2019 algorithm: commentary","title":"5. Traditional pronominal anaphora resolution:Hobbs\u2019 naive algorithm"},{"location":"CS224n-2019-16-Coreference%20Resolution/#6-coreference-models-mention-pair","text":"\u8bad\u7ec3\u4e00\u4e2a\u4e8c\u5143\u5206\u7c7b\u5668\uff0c\u4e3a\u6bcf\u4e00\u5bf9 mention \u7684\u5206\u914d\u5171\u53c2\u7684\u6982\u7387 \\(p(m_i,m_j)\\) \u4f8b\u5982\uff0c\u4e3a\u4e86\u5bfb\u627e \u201cshe\u201d \u7684\u5171\u6307\uff0c\u67e5\u770b\u6240\u6709\u5019\u9009\u5148\u884c\u8bcd(\u4ee5\u524d\u51fa\u73b0\u7684 mention )\uff0c\u5e76\u786e\u5b9a\u54ea\u4e9b\u4e0e\u4e4b\u76f8\u5173 \u6587\u7ae0\u7684 N \u4e2a mention \u5982\u679c \\(m_i\\) \u548c \\(m_j\\) \u662f\u5171\u6307\u7684\uff0c\u5219 \\(y_{ij} = 1\\) \uff0c\u5426\u5219 \\(y_{ij} = -1\\) \u53ea\u662f\u8bad\u7ec3\u6b63\u5e38\u7684\u4ea4\u53c9\u71b5\u635f\u5931(\u770b\u8d77\u6765\u6709\u70b9\u4e0d\u540c\uff0c\u56e0\u4e3a\u5b83\u662f\u4e8c\u5143\u5206\u7c7b) \u904d\u5386 mentions \u904d\u5386\u5019\u9009\u5148\u884c\u8bcd(\u524d\u9762\u51fa\u73b0\u7684 mention) \u5171\u6307 mention \u5bf9\u5e94\u8be5\u5f97\u5230\u9ad8\u6982\u7387\uff0c\u5176\u4ed6\u5e94\u8be5\u5f97\u5230\u4f4e\u6982\u7387 Mention Pair Test Time \u5171\u6307\u89e3\u6790\u662f\u4e00\u9879\u805a\u7c7b\u4efb\u52a1\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u662f\u5bf9 mentions \u5bf9\u8fdb\u884c\u4e86\u8bc4\u5206\u2026\u2026\u8be5\u600e\u4e48\u529e\uff1f \u9009\u62e9\u4e00\u4e9b\u9608\u503c(\u4f8b\u59820.5)\uff0c\u5e76\u5c06 \\(p(m_i,m_j)\\) \u5728\u9608\u503c\u4ee5\u4e0a\u7684 mentions \u5bf9\u4e4b\u95f4\u6dfb\u52a0\u5171\u6307\u94fe\u63a5 \u5229\u7528\u4f20\u9012\u95ed\u5305\u5f97\u5230\u805a\u7c7b \u5171\u6307\u8fde\u63a5\u5177\u6709\u4f20\u9012\u6027\uff0c\u5373\u4f7f\u6ca1\u6709\u4e0d\u5b58\u5728 link \u7684\u4e24\u8005\u4e5f\u4f1a\u7531\u4e8e\u4f20\u9012\u6027\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u805a\u7c7b\u4e2d \u8fd9\u662f\u5341\u5206\u5371\u9669\u7684 \u5982\u679c\u6709\u4e00\u4e2a\u5171\u6307 link \u5224\u65ad\u9519\u8bef\uff0c\u5c31\u4f1a\u5bfc\u81f4\u4e24\u4e2a cluster \u88ab\u9519\u8bef\u5730\u5408\u5e76\u4e86 Mention Pair Models: Disadvantage \u5047\u8bbe\u6211\u4eec\u7684\u957f\u6587\u6863\u91cc\u6709\u5982\u4e0b\u7684 mentions \u8bb8\u591a mentions \u53ea\u6709\u4e00\u4e2a\u6e05\u6670\u7684\u5148\u884c\u8bcd \u4f46\u6211\u4eec\u8981\u6c42\u6a21\u578b\u6765\u9884\u6d4b\u5b83\u4eec \u89e3\u51b3\u65b9\u6848\uff1a\u76f8\u53cd\uff0c\u8bad\u7ec3\u6a21\u578b\u4e3a\u6bcf\u4e2a mention \u53ea\u9884\u6d4b\u4e00\u4e2a\u5148\u884c\u8bcd \u5728\u8bed\u8a00\u4e0a\u66f4\u5408\u7406","title":"6. Coreference Models: Mention Pair"},{"location":"CS224n-2019-16-Coreference%20Resolution/#7-coreference-models-mention-ranking","text":"\u6839\u636e\u6a21\u578b\u628a\u5176\u5f97\u5206\u6700\u9ad8\u7684\u5148\u884c\u8bcd\u5206\u914d\u7ed9\u6bcf\u4e2a mention \u865a\u62df\u7684 NA mention \u5141\u8bb8\u6a21\u578b\u62d2\u7edd\u5c06\u5f53\u524d mention \u4e0e\u4efb\u4f55\u5185\u5bb9\u8054\u7cfb\u8d77\u6765(\u201csingleton\u201d or \u201cfirst\u201d mention) first mention\uff1a I \u53ea\u80fd\u9009\u62e9 NA \u4f5c\u4e3a\u81ea\u5df1\u7684\u5148\u884c\u8bcd Coreference Models: Training \u6211\u4eec\u5e0c\u671b\u5f53\u524d mention \\(m_j\\) \u4e0e\u5b83\u6240\u5173\u8054\u7684\u4efb\u4f55\u4e00\u4e2a\u5019\u9009\u5148\u884c\u8bcd\u76f8\u5173\u8054\u3002 \u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u80fd\u60f3\u8981\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u516c\u5f0f\u89e3\u6790 \u904d\u5386\u5019\u9009\u5148\u884c\u8bcd\u96c6\u5408 \u5bf9\u4e8e \\(y_{ij} = 1\\) \u7684\u60c5\u51b5\uff0c\u5373 \\(m_i\\) \u4e0e \\(m_j\\) \u662f\u5171\u6307\u5173\u7cfb\u7684\u60c5\u51b5 \u6211\u4eec\u5e0c\u671b\u6a21\u578b\u80fd\u591f\u7ed9\u4e88\u5176\u9ad8\u53ef\u80fd\u6027 \u8be5\u6a21\u578b\u53ef\u4ee5\u4e3a\u4e00\u4e2a\u6b63\u786e\u7684\u5148\u884c\u8bcd\u4ea7\u751f\u6982\u7387 0.9 \uff0c\u800c\u5bf9\u5176\u4ed6\u6240\u6709\u4ea7\u751f\u8f83\u4f4e\u7684\u6982\u7387\uff0c\u5e76\u4e14\u603b\u548c\u4ecd\u7136\u5f88\u5927 Turning this into a loss function Mention Ranking Models: Test Time \u548c mention-pair \u6a21\u578b\u51e0\u4e4e\u4e00\u6837\uff0c\u9664\u4e86\u6bcf\u4e2a mention \u53ea\u5206\u914d\u4e00\u4e2a\u5148\u884c\u8bcd How do we compute the probabilities? A. Non-neural statistical classifier B. Simple neural network C. More advanced model using LSTMs, attention A. Non-Neural Coref Model: Features \u4f7f\u7528\u5982\u4e0b\u7279\u5f81\u8fdb\u884c\u5206\u7c7b \u4eba\u3001\u6570\u5b57\u3001\u6027\u522b \u8bed\u4e49\u76f8\u5bb9\u6027 \u53e5\u6cd5\u7ea6\u675f \u66f4\u8fd1\u7684\u63d0\u5230\u7684\u5b9e\u4f53\u662f\u4e2a\u53ef\u80fd\u7684\u53c2\u8003\u5bf9\u8c61 \u8bed\u6cd5\u89d2\u8272\uff1a\u504f\u597d\u4e3b\u8bed\u4f4d\u7f6e\u7684\u5b9e\u4f53 \u6392\u6bd4 B. Neural Coref Model \u6807\u51c6\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc \u8f93\u5165\u5c42\uff1a\u8bcd\u5d4c\u5165\u548c\u4e00\u4e9b\u7c7b\u522b\u7279\u5f81 Neural Coref Model: Inputs \u5d4c\u5165 \u6bcf\u4e2a mention \u7684\u524d\u4e24\u4e2a\u5355\u8bcd\uff0c\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0c\u6700\u540e\u4e00\u4e2a\u5355\u8bcd\uff0chead word\uff0c\u2026 head word\u662f mention \u4e2d\u201c\u6700\u91cd\u8981\u201d\u7684\u5355\u8bcd\u2014\u53ef\u4ee5\u4f7f\u7528\u89e3\u6790\u5668\u627e\u5230\u5b83 \u4f8b\u5982\uff1a The fluffy cat stuck in the tree \u4ecd\u7136\u9700\u8981\u4e00\u4e9b\u5176\u4ed6\u7279\u5f81 \u8ddd\u79bb \u6587\u6863\u4f53\u88c1 \u8bf4\u8bdd\u8005\u7684\u4fe1\u606f","title":"7. Coreference Models: Mention Ranking"},{"location":"CS224n-2019-16-Coreference%20Resolution/#c-end-to-end-model","text":"\u5f53\u524d\u6700\u5148\u8fdb\u7684\u6a21\u578b\u7b97\u6cd5(Kenton Lee et al. from UW, EMNLP 2017) Mention \u6392\u540d\u6a21\u578b \u6539\u8fdb\u4e86\u7b80\u5355\u7684\u524d\u9988\u795e\u7ecf\u7f51\u7edc \u4f7f\u7528LSTM \u4f7f\u7528\u6ce8\u610f\u529b \u7aef\u5230\u7aef\u7684\u5b8c\u6210 mention \u68c0\u6d4b\u548c\u5171\u6307 \u6ca1\u6709 mention \u68c0\u6d4b\u6b65\u9aa4\uff01 \u800c\u662f\u8003\u8651\u6bcf\u6bb5\u6587\u672c(\u4e00\u5b9a\u957f\u5ea6)\u4f5c\u4e3a\u5019\u9009 mention a span \u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u5e8f\u5217 End-to-end Model \u9996\u5148\u5c06\u6587\u6863\u91cc\u7684\u5355\u8bcd\u4f7f\u7528\u8bcd\u5d4c\u5165\u77e9\u9635\u548c charCNN embed \u4e3a\u8bcd\u5d4c\u5165 \u63a5\u7740\u5728\u6587\u6863\u4e0a\u8fd0\u884c\u53cc\u5411 LSTM \u63a5\u7740\u5c06\u6bcf\u6bb5\u6587\u672c \\(i\\) \u4ece \\(\\text{START}(i)\\) \u5230 \\(\\text{END}(i)\\) \u8868\u793a\u4e3a\u4e00\u4e2a\u5411\u91cf span \u662f\u53e5\u5b50\u4e2d\u4efb\u4f55\u5355\u8bcd\u7684\u8fde\u7eed\u5b50\u53e5 General, General Electric, General Electric said, \u2026 Electric, Electric said, \u2026\u90fd\u4f1a\u5f97\u5230\u5b83\u81ea\u5df1\u7684\u5411\u91cf\u8868\u793a span representation \\[ \\boldsymbol{g}_{i}=\\left[\\boldsymbol{x}_{\\operatorname{START}(i)}^{*}, \\boldsymbol{x}_{\\mathrm{END}(i)}^{*}, \\hat{\\boldsymbol{x}}_{i}, \\phi(i)\\right] \\] \u4f8b\u5982 \u201cthe postal service\u201d \\(\\hat{\\boldsymbol{x}}_{i}\\) \u662f span \u7684\u6ce8\u610f\u529b\u52a0\u6743\u5e73\u5747\u7684\u8bcd\u5411\u91cf \u4e3a\u4ec0\u4e48\u8981\u5728 span \u4e2d\u5f15\u5165\u6240\u6709\u7684\u8fd9\u4e9b\u4e0d\u540c\u7684\u9879 \u6700\u540e\uff0c\u4e3a\u6bcf\u4e2a span \u5bf9\u6253\u5206\u6765\u51b3\u5b9a\u4ed6\u4eec\u662f\u4e0d\u662f\u5171\u6307 mentions \u6253\u5206\u51fd\u6570\u4ee5 span representations \u4f5c\u4e3a\u8f93\u5165 \u4e3a\u6bcf\u5bf9 span \u6253\u5206\u662f\u68d8\u624b\u7684 \u4e00\u4e2a\u6587\u6863\u4e2d\u6709 \\(O(T^2)\\) spans\uff0cT \u662f\u8bcd\u7684\u4e2a\u6570 \\(O(T^4)\\) \u7684\u8fd0\u884c\u65f6\u95f4 \u6240\u4ee5\u5fc5\u987b\u505a\u5927\u91cf\u7684\u4fee\u526a\u5de5\u4f5c(\u53ea\u8003\u8651\u4e00\u4e9b\u53ef\u80fd\u662f mention \u7684span) \u5173\u6ce8\u5b66\u4e60\u54ea\u4e9b\u5355\u8bcd\u662f\u91cd\u8981\u7684\u5728\u63d0\u5230(\u6709\u70b9\u50cfhead word)","title":"C. End-to-end Model"},{"location":"CS224n-2019-16-Coreference%20Resolution/#8-last-coreference-approach-clustering-bas","text":"\u5171\u6307\u662f\u4e2a\u805a\u7c7b\u4efb\u52a1\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u805a\u7c7b\u7b97\u6cd5\u5427 \u7279\u522b\u662f\u6211\u4eec\u5c06\u4f7f\u7528 agglomerative \u51dd\u805a\u805a\u7c7b \u81ea\u4e0b\u800c\u4e0a\u7684 \u5f00\u59cb\u65f6\uff0c\u6bcf\u4e2a mention \u5728\u5b83\u81ea\u5df1\u7684\u5355\u72ec\u96c6\u7fa4\u4e2d \u6bcf\u4e00\u6b65\u5408\u5e76\u4e24\u4e2a\u96c6\u7fa4 \u4f7f\u7528\u6a21\u578b\u6765\u6253\u5206\u90a3\u4e9b\u805a\u7c7b\u5408\u5e76\u662f\u597d\u7684 Clustering Model Architecture From Clark & Manning, 2016 \u9996\u5148\u4e3a\u6bcf\u4e2a mention \u5bf9\u751f\u6210\u4e00\u4e2a\u5411\u91cf \u4f8b\u5982\uff0c\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u4e2d\u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa \u63a5\u7740\u5c06\u6c60\u5316\u64cd\u4f5c\u5e94\u7528\u4e8e mentino-pair \u8868\u793a\u7684\u77e9\u9635\u4e0a\uff0c\u5f97\u5230\u4e00\u4e2a cluster-pair \u805a\u7c7b\u5bf9\u7684\u8868\u793a \u901a\u8fc7\u7528\u6743\u91cd\u5411\u91cf\u4e0e\u8868\u793a\u5411\u91cf\u7684\u70b9\u79ef\uff0c\u5bf9 candidate cluster merge \u8fdb\u884c\u8bc4\u5206 \\(s\\left(\\operatorname{MERGE}\\left[c_{1}, c_{2}\\right]\\right)=u^{T} r_{c}\\left(c_{1}, c_{2}\\right)\\) \u5f53\u524d\u5019\u9009\u7c07\u7684\u5408\u5e76\uff0c\u53d6\u51b3\u4e8e\u4e4b\u524d\u7684\u5408\u5e76 \u6240\u4ee5\u4e0d\u80fd\u7528\u5e38\u89c4\u7684\u76d1\u7763\u5b66\u4e60 \u4f7f\u7528\u7c7b\u4f3c\u5f3a\u5316\u5b66\u4e60\u8bad\u7ec3\u6a21\u578b \u4e3a\u6bcf\u4e2a\u5408\u5e76\u5206\u914d\u5956\u52b1\uff1a\u5171\u6307\u8bc4\u4ef7\u6307\u6807\u7684\u53d8\u5316","title":"8. Last Coreference Approach: Clustering-Bas"},{"location":"CS224n-2019-16-Coreference%20Resolution/#9-coreference-evaluation","text":"\u8bb8\u591a\u4e0d\u540c\u7684\u8bc4\u4ef7\u6307\u6807\uff1aMUC, CEAF, LEA, B-CUBED, BLANC \u7ecf\u5e38\u4f7f\u7528\u4e00\u4e9b\u4e0d\u540c\u8bc4\u4ef7\u6307\u6807\u7684\u5747\u503c \u4f8b\u5982 B-cubed \u5bf9\u4e8e\u6bcf\u4e2a mention \uff0c\u8ba1\u7b97\u5176\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387 \u7136\u540e\u5e73\u5747\u6bcf\u4e2a\u4e2a\u4f53\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387 System Performance OntoNotes\u6570\u636e\u96c6:~ 3000\u4eba\u7c7b\u6807\u6ce8\u7684\u6587\u6863 \u82f1\u8bed\u548c\u4e2d\u6587 Report an F1 score averaged over 3 coreference metrics Where do neural scoring models help? \u7279\u522b\u662f\u5bf9\u4e8e\u6ca1\u6709\u5b57\u7b26\u4e32\u5339\u914d\u7684NPs\u548c\u547d\u540d\u5b9e\u4f53\u3002\u795e\u7ecf\u4e0e\u975e\u795e\u7ecf\u8bc4\u5206: Conclusion \u5171\u6307\u662f\u4e00\u4e2a\u6709\u7528\u7684\u3001\u5177\u6709\u6311\u6218\u6027\u548c\u6709\u8da3\u7684\u8bed\u8a00\u4efb\u52a1 \u8bb8\u591a\u4e0d\u540c\u79cd\u7c7b\u7684\u7b97\u6cd5\u7cfb\u7edf \u7cfb\u7edf\u8fc5\u901f\u597d\u8f6c\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u7531\u4e8e\u66f4\u597d\u7684\u795e\u7ecf\u6a21\u578b \u4f46\u603b\u7684\u6765\u8bf4,\u8fd8\u6ca1\u6709\u60ca\u4eba\u7684\u7ed3\u679c Try out a coreference system yourself http://corenlp.run/ (ask for coref in Annotations) https://huggingface.co/coref/","title":"9. Coreference Evaluation"},{"location":"CS224n-2019-16-Coreference%20Resolution/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-17-Multitask%20Learning/","text":"Lecture 17 Multitask Learning \u00b6 The Natural Language Decathlon: Multitask Learning as Question Answering The Limits of Single-task Learning \u9274\u4e8e{dataset\uff0ctask\uff0cmodel\uff0cmetric}\uff0c\u8fd1\u5e74\u6765\u6027\u80fd\u5f97\u5230\u4e86\u5f88\u5927\u6539\u5584 \u53ea\u8981 \\(|\\text{dataset}| > 1000 \\times C\\) \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u5f53\u524d\u7684\u6700\u4f18\u7ed3\u679c (C\u662f\u8f93\u51fa\u7c7b\u522b\u7684\u4e2a\u6570) \u5bf9\u4e8e\u66f4\u4e00\u822c\u7684 Al\uff0c\u6211\u4eec\u9700\u8981\u5728\u5355\u4e2a\u6a21\u578b\u4e2d\u7ee7\u7eed\u5b66\u4e60 \u6a21\u578b\u901a\u5e38\u4ece\u968f\u673a\u5f00\u59cb\uff0c\u4ec5\u90e8\u5206\u9884\u8bad\u7ec3 Pre-training and sharing knowledge is great! Why has weight & model sharing not happened as much in NLP? NLP\u9700\u8981\u591a\u79cd\u63a8\u7406\uff1a\u903b\u8f91\uff0c\u8bed\u8a00\uff0c\u60c5\u611f\uff0c\u89c6\u89c9\uff0c++ \u9700\u8981\u77ed\u671f\u548c\u957f\u671f\u8bb0\u5fc6 NLP\u88ab\u5206\u4e3a\u4e2d\u95f4\u4efb\u52a1\u548c\u5355\u72ec\u4efb\u52a1\u4ee5\u53d6\u5f97\u8fdb\u5c55 \u5728\u6bcf\u4e2a\u793e\u533a\u4e2d\u8ffd\u9010\u57fa\u51c6 \u4e00\u4e2a\u65e0\u4eba\u76d1\u7763\u7684\u4efb\u52a1\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u95ee\u9898\u5417\uff1f\u4e0d\u53ef\u4ee5 \u8bed\u8a00\u663e\u7136\u9700\u8981\u76d1\u7763 Why a unified multi-task model for NLP? \u591a\u4efb\u52a1\u5b66\u4e60\u662f\u4e00\u822cNLP\u7cfb\u7edf\u7684 \u963b\u788d \u7edf\u4e00\u6a21\u578b\u53ef\u4ee5\u51b3\u5b9a\u5982\u4f55\u8f6c\u79fb\u77e5\u8bc6\uff08\u9886\u57df\u9002\u5e94\uff0c\u6743\u91cd\u5206\u4eab\uff0c\u8f6c\u79fb\u548c\u96f6\u5c04\u51fb\u5b66\u4e60\uff09 \u7edf\u4e00\u7684\u591a\u4efb\u52a1\u6a21\u578b\u53ef\u4ee5 \u66f4\u5bb9\u6613\u9002\u5e94\u65b0\u4efb\u52a1 \u7b80\u5316\u90e8\u7f72\u5230\u751f\u4ea7\u7684\u65f6\u95f4 \u964d\u4f4e\u6807\u51c6\uff0c\u8ba9\u66f4\u591a\u4eba\u89e3\u51b3\u65b0\u4efb\u52a1 \u6f5c\u5728\u5730\u8f6c\u5411\u6301\u7eed\u5b66\u4e60 How to express many NLP tasks in the same framework? \u5e8f\u5217\u6807\u8bb0 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0caspect specific sentiment \u6587\u5b57\u5206\u7c7b \u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\uff0c\u60c5\u7eea\u5206\u7c7b Seq2seq \u673a\u5668\u7ffb\u8bd1\uff0c\u603b\u7ed3\uff0c\u95ee\u7b54 The Natural Language Decathlon (decaNLP) \u628a 10 \u9879\u4e0d\u540c\u7684\u4efb\u52a1\u90fd\u5199\u6210\u4e86 QA \u7684\u5f62\u5f0f\uff0c\u8fdb\u884c\u8bad\u7ec3\u4e0e\u6d4b\u8bd5 Multitask Learning as Question Answering Meta-Supervised learning \u5143\u76d1\u7763\u5b66\u4e60 \uff1a \\(\\text { From }\\{x, y\\} \\text { to }\\{x, t, y\\}(t \\text { is the task })\\) \u4f7f\u7528\u95ee\u9898 q \u4f5c\u4e3a\u4efb\u52a1 t \u7684\u81ea\u7136\u63cf\u8ff0\uff0c\u4ee5\u4f7f\u6a21\u578b\u4f7f\u7528\u8bed\u8a00\u4fe1\u606f\u6765\u8fde\u63a5\u4efb\u52a1 y \u662f q \u7684\u7b54\u6848\uff0cx \u662f\u56de\u7b54 q \u6240\u5fc5\u9700\u7684\u4e0a\u4e0b\u6587 Designing a model for decaNLP \u9700\u6c42\uff1a \u6ca1\u6709\u4efb\u52a1\u7279\u5b9a\u7684\u6a21\u5757\u6216\u53c2\u6570\uff0c\u56e0\u4e3a\u6211\u4eec\u5047\u8bbe\u4efb\u52a1ID\u662f\u672a\u63d0\u4f9b\u7684 \u5fc5\u987b\u80fd\u591f\u5728\u5185\u90e8\u8fdb\u884c\u8c03\u6574\u4ee5\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1 \u5e94\u8be5\u4e3a\u770b\u4e0d\u89c1\u7684\u4efb\u52a1\u7559\u4e0b\u96f6\u5c04\u51fb\u63a8\u65ad\u7684\u53ef\u80fd\u6027 A Multitask Question Answering Network for decaNLP \u4ee5\u4e00\u6bb5\u4e0a\u4e0b\u6587\u5f00\u59cb \u95ee\u4e00\u4e2a\u95ee\u9898 \u4e00\u6b21\u751f\u6210\u7b54\u6848\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u901a\u8fc7 \u6307\u5411\u4e0a\u4e0b\u6587 \u6307\u5411\u95ee\u9898 \u6216\u8005\u4ece\u989d\u5916\u7684\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5355\u8bcd \u6bcf\u4e2a\u8f93\u51fa\u5355\u8bcd\u7684\u6307\u9488\u5207\u6362\u90fd\u5728\u8fd9\u4e09\u4e2a\u9009\u9879\u4e2d\u5207\u6362 Multitask Question Answering Network (MQAN) For code and leaderboard see www.decaNLP.com \u56fa\u5b9a\u7684 GloVe \u8bcd\u5d4c\u5165 + \u5b57\u7b26\u7ea7\u7684 n-gram \u5d4c\u5165 \\(\\to\\) Linear \\(\\to\\) Shared BiLSTM with skip connection \u4ece\u4e00\u4e2a\u5e8f\u5217\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\u7684\u6ce8\u610f\u529b\u603b\u7ed3\uff0c\u5e76\u901a\u8fc7\u8df3\u8fc7\u8fde\u63a5\u518d\u6b21\u8fd4\u56de \u5206\u79bbBiLSTM\u4ee5\u51cf\u5c11\u7ef4\u6570\uff0c\u4e24\u4e2a\u53d8\u538b\u5668\u5c42\uff0c\u53e6\u4e00\u4e2aBiLSTM \u81ea\u56de\u5f52\u89e3\u7801\u5668\u4f7f\u7528\u56fa\u5b9a\u7684 GloVe \u548c\u5b57\u7b26 n-gram \u5d4c\u5165\uff0c\u4e24\u4e2a\u53d8\u538b\u5668\u5c42\u548c\u4e00\u4e2aLSTM\u5c42\u6765\u53c2\u52a0\u7f16\u7801\u5668\u6700\u540e\u4e09\u5c42\u7684\u8f93\u51fa LSTM\u89e3\u7801\u5668\u72b6\u6001\u7528\u4e8e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e0e\u95ee\u9898\u4e2d\u7684\u88ab\u7528\u4f5c\u6307\u9488\u6ce8\u610f\u529b\u5206\u5e03\u95ee\u9898 \u5bf9\u4e0a\u4e0b\u6587\u548c\u95ee\u9898\u7684\u5173\u6ce8\u4f1a\u5f71\u54cd\u4e24\u4e2a**\u5f00\u5173**\uff1a gamma\u51b3\u5b9a\u662f\u590d\u5236\u8fd8\u662f\u4ece\u5916\u90e8\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9 lambda\u51b3\u5b9a\u662f\u4ece\u4e0a\u4e0b\u6587\u8fd8\u662f\u5728\u95ee\u9898\u4e2d\u590d\u5236 S2S \u662f seq2seq +SelfAtt = plus self attention +CoAtt = plus coattention +QPtr = plus question pointer == MQAN Transformer \u5c42\u5728\u5355\u4efb\u52a1\u548c\u591a\u4efb\u52a1\u8bbe\u7f6e\u4e2d\u6709 \u6536\u76ca \u591a\u4efb\u52a1\u8bad\u7ec3\u4e00\u5f00\u59cb\u4f1a\u83b7\u5f97\u5f88\u5dee\u7684\u6548\u679c\uff08\u5e72\u6270\u548c\u9057\u5fd8\uff09\uff0c\u4f46\u662f\u5982\u679c\u987a\u5e8f\u8bad\u7ec3\u8fd9\u4e9b\u4efb\u52a1\uff0c\u5c06\u5f88\u5feb\u5c31\u4f1a\u597d\u8d77\u6765 QA\u548cSRL\u6709\u5f88\u5f3a\u7684\u5173\u8054\u6027 \u6307\u5411\u95ee\u9898\u81f3\u5173\u91cd\u8981 \u591a\u4efb\u52a1\u5904\u7406\u6709\u52a9\u4e8e\u5b9e\u73b0\u96f6\u5c04\u51fb \u7ec4\u5408\u7684\u5355\u4efb\u52a1\u6a21\u578b\u548c\u5355\u4e2a\u591a\u4efb\u52a1\u6a21\u578b\u4e4b\u95f4\u5b58\u5728\u5dee\u8ddd Training Strategies: Fully Joint \u7b80\u5355\u7684\u5168\u8054\u5408\u8bad\u7ec3\u7b56\u7565 Training Strategies: Anti-Curriculum Pre-training \u56f0\u96be\uff1a\u5728\u5355\u4efb\u52a1\u8bbe\u7f6e\u4e2d\u6536\u655b\u591a\u5c11\u6b21\u8fed\u4ee3 \u5e26\u7ea2\u8272\u7684\u4efb\u52a1\uff1a\u9884\u8bad\u7ec3\u9636\u6bb5\u5305\u542b\u7684\u4efb\u52a1 QA \u7684 Anti-curriculum \u53cd\u8bfe\u7a0b\u9884\u8bad\u7ec3\u6539\u8fdb\u4e86\u5b8c\u5168\u8054\u5408\u57f9\u8bad \u4f46MT\u4ecd\u7136\u5f88\u7cdf\u7cd5 Closing the Gap: Some Recent Experiments Where MQAN Points \u7b54\u6848\u4ece\u4e0a\u4e0b\u6587\u6216\u95ee\u9898\u4e2d\u6b63\u786e\u7684\u590d\u5236 \u6ca1\u6709\u6df7\u6dc6\u6a21\u578b\u5e94\u8be5\u6267\u884c\u54ea\u4e2a\u4efb\u52a1\u6216\u4f7f\u7528\u54ea\u4e2a\u8f93\u51fa\u7a7a\u95f4 Pretraining on decaNLP improves final performance \u4f8b\u5982\u989d\u5916\u7684 IWSLT language pairs \u6216\u8005\u662f\u65b0\u7684\u7c7b\u4f3c NER \u7684\u4efb\u52a1 Zero-Shot Domain Adaptation of pretrained MQAN: \u5728 Amazon and Yelp reviews \u4e0a\u83b7\u5f97\u4e86 80% \u7684 \u7cbe\u786e\u7387 \u5728 SNLI \u4e0a\u83b7\u5f97\u4e86 62% \uff08\u53c2\u6570\u5fae\u8c03\u7684\u7248\u672c\u83b7\u5f97\u4e86 87% \u7684\u7cbe\u786e\u7387\uff0c\u6bd4\u4f7f\u7528\u968f\u673a\u521d\u59cb\u5316\u7684\u9ad8 2%\uff09 Zero-Shot Classification \u95ee\u9898\u6307\u9488\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5904\u7406\u95ee\u9898\u7684\u6539\u53d8\uff08\u4f8b\u5982\uff0c\u5c06\u6807\u7b7e\u8f6c\u6362\u4e3a\u6ee1\u610f/\u652f\u6301\u548c\u6d88\u6781/\u60b2\u4f24/\u4e0d\u652f\u6301\uff09\u800c\u65e0\u9700\u4efb\u4f55\u989d\u5916\u7684\u5fae\u8c03 \u4f7f\u6a21\u578b\u65e0\u9700\u8bad\u7ec3\u5373\u53ef\u54cd\u5e94\u65b0\u4efb\u52a1 decaNLP: A Benchmark for Generalized NLP \u4e3a\u591a\u4e2aNLP\u4efb\u52a1\u8bad\u7ec3\u5355\u95ee\u9898\u56de\u7b54\u6a21\u578b \u89e3\u51b3\u65b9\u6848 \u66f4\u4e00\u822c\u7684\u8bed\u8a00\u7406\u89e3 \u591a\u4efb\u52a1\u5b66\u4e60 \u9886\u57df\u9002\u5e94 \u8fc1\u79fb\u5b66\u4e60 \u6743\u91cd\u5206\u4eab\uff0c\u9884\u8bad\u7ec3\uff0c\u5fae\u8c03\uff08\u5bf9\u4e8eNLP\u7684ImageNet-CNN\uff1f\uff09 \u96f6\u5c04\u51fb\u5b66\u4e60 https://einstein.ai Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"17 Multitask Learning"},{"location":"CS224n-2019-17-Multitask%20Learning/#lecture-17-multitask-learning","text":"The Natural Language Decathlon: Multitask Learning as Question Answering The Limits of Single-task Learning \u9274\u4e8e{dataset\uff0ctask\uff0cmodel\uff0cmetric}\uff0c\u8fd1\u5e74\u6765\u6027\u80fd\u5f97\u5230\u4e86\u5f88\u5927\u6539\u5584 \u53ea\u8981 \\(|\\text{dataset}| > 1000 \\times C\\) \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u5f53\u524d\u7684\u6700\u4f18\u7ed3\u679c (C\u662f\u8f93\u51fa\u7c7b\u522b\u7684\u4e2a\u6570) \u5bf9\u4e8e\u66f4\u4e00\u822c\u7684 Al\uff0c\u6211\u4eec\u9700\u8981\u5728\u5355\u4e2a\u6a21\u578b\u4e2d\u7ee7\u7eed\u5b66\u4e60 \u6a21\u578b\u901a\u5e38\u4ece\u968f\u673a\u5f00\u59cb\uff0c\u4ec5\u90e8\u5206\u9884\u8bad\u7ec3 Pre-training and sharing knowledge is great! Why has weight & model sharing not happened as much in NLP? NLP\u9700\u8981\u591a\u79cd\u63a8\u7406\uff1a\u903b\u8f91\uff0c\u8bed\u8a00\uff0c\u60c5\u611f\uff0c\u89c6\u89c9\uff0c++ \u9700\u8981\u77ed\u671f\u548c\u957f\u671f\u8bb0\u5fc6 NLP\u88ab\u5206\u4e3a\u4e2d\u95f4\u4efb\u52a1\u548c\u5355\u72ec\u4efb\u52a1\u4ee5\u53d6\u5f97\u8fdb\u5c55 \u5728\u6bcf\u4e2a\u793e\u533a\u4e2d\u8ffd\u9010\u57fa\u51c6 \u4e00\u4e2a\u65e0\u4eba\u76d1\u7763\u7684\u4efb\u52a1\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u95ee\u9898\u5417\uff1f\u4e0d\u53ef\u4ee5 \u8bed\u8a00\u663e\u7136\u9700\u8981\u76d1\u7763 Why a unified multi-task model for NLP? \u591a\u4efb\u52a1\u5b66\u4e60\u662f\u4e00\u822cNLP\u7cfb\u7edf\u7684 \u963b\u788d \u7edf\u4e00\u6a21\u578b\u53ef\u4ee5\u51b3\u5b9a\u5982\u4f55\u8f6c\u79fb\u77e5\u8bc6\uff08\u9886\u57df\u9002\u5e94\uff0c\u6743\u91cd\u5206\u4eab\uff0c\u8f6c\u79fb\u548c\u96f6\u5c04\u51fb\u5b66\u4e60\uff09 \u7edf\u4e00\u7684\u591a\u4efb\u52a1\u6a21\u578b\u53ef\u4ee5 \u66f4\u5bb9\u6613\u9002\u5e94\u65b0\u4efb\u52a1 \u7b80\u5316\u90e8\u7f72\u5230\u751f\u4ea7\u7684\u65f6\u95f4 \u964d\u4f4e\u6807\u51c6\uff0c\u8ba9\u66f4\u591a\u4eba\u89e3\u51b3\u65b0\u4efb\u52a1 \u6f5c\u5728\u5730\u8f6c\u5411\u6301\u7eed\u5b66\u4e60 How to express many NLP tasks in the same framework? \u5e8f\u5217\u6807\u8bb0 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0caspect specific sentiment \u6587\u5b57\u5206\u7c7b \u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\uff0c\u60c5\u7eea\u5206\u7c7b Seq2seq \u673a\u5668\u7ffb\u8bd1\uff0c\u603b\u7ed3\uff0c\u95ee\u7b54 The Natural Language Decathlon (decaNLP) \u628a 10 \u9879\u4e0d\u540c\u7684\u4efb\u52a1\u90fd\u5199\u6210\u4e86 QA \u7684\u5f62\u5f0f\uff0c\u8fdb\u884c\u8bad\u7ec3\u4e0e\u6d4b\u8bd5 Multitask Learning as Question Answering Meta-Supervised learning \u5143\u76d1\u7763\u5b66\u4e60 \uff1a \\(\\text { From }\\{x, y\\} \\text { to }\\{x, t, y\\}(t \\text { is the task })\\) \u4f7f\u7528\u95ee\u9898 q \u4f5c\u4e3a\u4efb\u52a1 t \u7684\u81ea\u7136\u63cf\u8ff0\uff0c\u4ee5\u4f7f\u6a21\u578b\u4f7f\u7528\u8bed\u8a00\u4fe1\u606f\u6765\u8fde\u63a5\u4efb\u52a1 y \u662f q \u7684\u7b54\u6848\uff0cx \u662f\u56de\u7b54 q \u6240\u5fc5\u9700\u7684\u4e0a\u4e0b\u6587 Designing a model for decaNLP \u9700\u6c42\uff1a \u6ca1\u6709\u4efb\u52a1\u7279\u5b9a\u7684\u6a21\u5757\u6216\u53c2\u6570\uff0c\u56e0\u4e3a\u6211\u4eec\u5047\u8bbe\u4efb\u52a1ID\u662f\u672a\u63d0\u4f9b\u7684 \u5fc5\u987b\u80fd\u591f\u5728\u5185\u90e8\u8fdb\u884c\u8c03\u6574\u4ee5\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1 \u5e94\u8be5\u4e3a\u770b\u4e0d\u89c1\u7684\u4efb\u52a1\u7559\u4e0b\u96f6\u5c04\u51fb\u63a8\u65ad\u7684\u53ef\u80fd\u6027 A Multitask Question Answering Network for decaNLP \u4ee5\u4e00\u6bb5\u4e0a\u4e0b\u6587\u5f00\u59cb \u95ee\u4e00\u4e2a\u95ee\u9898 \u4e00\u6b21\u751f\u6210\u7b54\u6848\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u901a\u8fc7 \u6307\u5411\u4e0a\u4e0b\u6587 \u6307\u5411\u95ee\u9898 \u6216\u8005\u4ece\u989d\u5916\u7684\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u5355\u8bcd \u6bcf\u4e2a\u8f93\u51fa\u5355\u8bcd\u7684\u6307\u9488\u5207\u6362\u90fd\u5728\u8fd9\u4e09\u4e2a\u9009\u9879\u4e2d\u5207\u6362 Multitask Question Answering Network (MQAN) For code and leaderboard see www.decaNLP.com \u56fa\u5b9a\u7684 GloVe \u8bcd\u5d4c\u5165 + \u5b57\u7b26\u7ea7\u7684 n-gram \u5d4c\u5165 \\(\\to\\) Linear \\(\\to\\) Shared BiLSTM with skip connection \u4ece\u4e00\u4e2a\u5e8f\u5217\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\u7684\u6ce8\u610f\u529b\u603b\u7ed3\uff0c\u5e76\u901a\u8fc7\u8df3\u8fc7\u8fde\u63a5\u518d\u6b21\u8fd4\u56de \u5206\u79bbBiLSTM\u4ee5\u51cf\u5c11\u7ef4\u6570\uff0c\u4e24\u4e2a\u53d8\u538b\u5668\u5c42\uff0c\u53e6\u4e00\u4e2aBiLSTM \u81ea\u56de\u5f52\u89e3\u7801\u5668\u4f7f\u7528\u56fa\u5b9a\u7684 GloVe \u548c\u5b57\u7b26 n-gram \u5d4c\u5165\uff0c\u4e24\u4e2a\u53d8\u538b\u5668\u5c42\u548c\u4e00\u4e2aLSTM\u5c42\u6765\u53c2\u52a0\u7f16\u7801\u5668\u6700\u540e\u4e09\u5c42\u7684\u8f93\u51fa LSTM\u89e3\u7801\u5668\u72b6\u6001\u7528\u4e8e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e0e\u95ee\u9898\u4e2d\u7684\u88ab\u7528\u4f5c\u6307\u9488\u6ce8\u610f\u529b\u5206\u5e03\u95ee\u9898 \u5bf9\u4e0a\u4e0b\u6587\u548c\u95ee\u9898\u7684\u5173\u6ce8\u4f1a\u5f71\u54cd\u4e24\u4e2a**\u5f00\u5173**\uff1a gamma\u51b3\u5b9a\u662f\u590d\u5236\u8fd8\u662f\u4ece\u5916\u90e8\u8bcd\u6c47\u8868\u4e2d\u9009\u62e9 lambda\u51b3\u5b9a\u662f\u4ece\u4e0a\u4e0b\u6587\u8fd8\u662f\u5728\u95ee\u9898\u4e2d\u590d\u5236 S2S \u662f seq2seq +SelfAtt = plus self attention +CoAtt = plus coattention +QPtr = plus question pointer == MQAN Transformer \u5c42\u5728\u5355\u4efb\u52a1\u548c\u591a\u4efb\u52a1\u8bbe\u7f6e\u4e2d\u6709 \u6536\u76ca \u591a\u4efb\u52a1\u8bad\u7ec3\u4e00\u5f00\u59cb\u4f1a\u83b7\u5f97\u5f88\u5dee\u7684\u6548\u679c\uff08\u5e72\u6270\u548c\u9057\u5fd8\uff09\uff0c\u4f46\u662f\u5982\u679c\u987a\u5e8f\u8bad\u7ec3\u8fd9\u4e9b\u4efb\u52a1\uff0c\u5c06\u5f88\u5feb\u5c31\u4f1a\u597d\u8d77\u6765 QA\u548cSRL\u6709\u5f88\u5f3a\u7684\u5173\u8054\u6027 \u6307\u5411\u95ee\u9898\u81f3\u5173\u91cd\u8981 \u591a\u4efb\u52a1\u5904\u7406\u6709\u52a9\u4e8e\u5b9e\u73b0\u96f6\u5c04\u51fb \u7ec4\u5408\u7684\u5355\u4efb\u52a1\u6a21\u578b\u548c\u5355\u4e2a\u591a\u4efb\u52a1\u6a21\u578b\u4e4b\u95f4\u5b58\u5728\u5dee\u8ddd Training Strategies: Fully Joint \u7b80\u5355\u7684\u5168\u8054\u5408\u8bad\u7ec3\u7b56\u7565 Training Strategies: Anti-Curriculum Pre-training \u56f0\u96be\uff1a\u5728\u5355\u4efb\u52a1\u8bbe\u7f6e\u4e2d\u6536\u655b\u591a\u5c11\u6b21\u8fed\u4ee3 \u5e26\u7ea2\u8272\u7684\u4efb\u52a1\uff1a\u9884\u8bad\u7ec3\u9636\u6bb5\u5305\u542b\u7684\u4efb\u52a1 QA \u7684 Anti-curriculum \u53cd\u8bfe\u7a0b\u9884\u8bad\u7ec3\u6539\u8fdb\u4e86\u5b8c\u5168\u8054\u5408\u57f9\u8bad \u4f46MT\u4ecd\u7136\u5f88\u7cdf\u7cd5 Closing the Gap: Some Recent Experiments Where MQAN Points \u7b54\u6848\u4ece\u4e0a\u4e0b\u6587\u6216\u95ee\u9898\u4e2d\u6b63\u786e\u7684\u590d\u5236 \u6ca1\u6709\u6df7\u6dc6\u6a21\u578b\u5e94\u8be5\u6267\u884c\u54ea\u4e2a\u4efb\u52a1\u6216\u4f7f\u7528\u54ea\u4e2a\u8f93\u51fa\u7a7a\u95f4 Pretraining on decaNLP improves final performance \u4f8b\u5982\u989d\u5916\u7684 IWSLT language pairs \u6216\u8005\u662f\u65b0\u7684\u7c7b\u4f3c NER \u7684\u4efb\u52a1 Zero-Shot Domain Adaptation of pretrained MQAN: \u5728 Amazon and Yelp reviews \u4e0a\u83b7\u5f97\u4e86 80% \u7684 \u7cbe\u786e\u7387 \u5728 SNLI \u4e0a\u83b7\u5f97\u4e86 62% \uff08\u53c2\u6570\u5fae\u8c03\u7684\u7248\u672c\u83b7\u5f97\u4e86 87% \u7684\u7cbe\u786e\u7387\uff0c\u6bd4\u4f7f\u7528\u968f\u673a\u521d\u59cb\u5316\u7684\u9ad8 2%\uff09 Zero-Shot Classification \u95ee\u9898\u6307\u9488\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5904\u7406\u95ee\u9898\u7684\u6539\u53d8\uff08\u4f8b\u5982\uff0c\u5c06\u6807\u7b7e\u8f6c\u6362\u4e3a\u6ee1\u610f/\u652f\u6301\u548c\u6d88\u6781/\u60b2\u4f24/\u4e0d\u652f\u6301\uff09\u800c\u65e0\u9700\u4efb\u4f55\u989d\u5916\u7684\u5fae\u8c03 \u4f7f\u6a21\u578b\u65e0\u9700\u8bad\u7ec3\u5373\u53ef\u54cd\u5e94\u65b0\u4efb\u52a1 decaNLP: A Benchmark for Generalized NLP \u4e3a\u591a\u4e2aNLP\u4efb\u52a1\u8bad\u7ec3\u5355\u95ee\u9898\u56de\u7b54\u6a21\u578b \u89e3\u51b3\u65b9\u6848 \u66f4\u4e00\u822c\u7684\u8bed\u8a00\u7406\u89e3 \u591a\u4efb\u52a1\u5b66\u4e60 \u9886\u57df\u9002\u5e94 \u8fc1\u79fb\u5b66\u4e60 \u6743\u91cd\u5206\u4eab\uff0c\u9884\u8bad\u7ec3\uff0c\u5fae\u8c03\uff08\u5bf9\u4e8eNLP\u7684ImageNet-CNN\uff1f\uff09 \u96f6\u5c04\u51fb\u5b66\u4e60 https://einstein.ai","title":"Lecture 17 Multitask Learning"},{"location":"CS224n-2019-17-Multitask%20Learning/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/","text":"Lecture 18 Tree Recursive Neural Networks, Constituency Parsing, and Sentiment \u00b6 Lecture Plan Motivation: Compositionality and Recursion Structure prediction with simple Tree RNN: Parsing Backpropagation through Structure More complex TreeRNN units (35 mins) Other uses of tree-recursive neural nets (5 mins) Institute for Human-Centered Artificial Intelligence 1. The spectrum of language in CS \u00b6 \u8bcd\u888b\u6a21\u578b \u548c \u590d\u6742\u5f62\u5f0f\u7684\u8bed\u8a00\u8868\u8fbe\u7ed3\u6784 Semantic interpretation of language \u2013 Not just word vectors \u6211\u4eec\u600e\u6837\u624d\u80fd\u5f04\u6e05\u695a\u66f4\u5927\u7684\u77ed\u8bed\u7684\u542b\u4e49\uff1f The snowboarder is leaping over a mogul A person on a snowboard jumps into the air The snowboarder \u5728\u8bed\u4e49\u4e0a\u76f8\u5f53\u4e8e A person on a snowboard \uff0c\u4f46\u5b83\u4eec\u7684\u5b57\u957f\u4e0d\u4e00\u6837 \u4eba\u4eec\u4e4b\u6240\u4ee5\u53ef\u4ee5\u7406\u89e3 A person on a snowboard \uff0c\u662f\u56e0\u4e3a the principle of compositionality \u7ec4\u5408\u539f\u5219 \u4eba\u4eec\u77e5\u9053\u6bcf\u4e2a\u5355\u8bcd\u7684\u610f\u601d\uff0c\u4ece\u800c\u77e5\u9053\u4e86 on a snowboard \u7684\u610f\u601d \u77e5\u9053\u7ec4\u4ef6\u7684\u542b\u4e49\u5e76\u5c06\u4ed6\u4eec\u7ec4\u5408\u6210\u4e3a\u66f4\u5927\u7684\u7ec4\u4ef6 \u4eba\u4eec\u901a\u8fc7\u8f83\u5c0f\u5143\u7d20\u7684**\u8bed\u4e49\u6210\u5206**\u6765\u89e3\u91ca\u8f83\u5927\u6587\u672c\u5355\u5143\u7684\u610f\u4e49 - \u5b9e\u4f53\uff0c\u63cf\u8ff0\u6027\u672f\u8bed\uff0c\u4e8b\u5b9e\uff0c\u8bba\u70b9\uff0c\u6545\u4e8b \u8bed\u8a00\u7406\u89e3 - \u548c\u4eba\u5de5\u667a\u80fd - \u9700\u8981\u80fd\u591f\u901a\u8fc7\u4e86\u89e3\u8f83\u5c0f\u7684\u90e8\u5206\u6765\u7406\u89e3\u66f4\u5927\u7684\u4e8b\u7269 \u6211\u4eec\u62e5\u6709\u5c06\u8f83\u5c0f\u7684\u90e8\u5206\u7ec4\u5408\u8d77\u6765\u5236\u4f5c\u51fa\u66f4\u5927\u4e1c\u897f\u7684\u80fd\u529b Are languages recursive? \u8ba4\u77e5\u4e0a\u6709\u70b9\u4e89\u8bae\uff08\u9700\u8981\u524d\u5f80\u65e0\u9650\uff09 \u4f46\u662f\uff1a\u9012\u5f52\u5bf9\u4e8e\u63cf\u8ff0\u8bed\u8a00\u662f\u5f88\u81ea\u7136\u7684 [The person standing next to [the man from [the company that purchased [the firm that you used to work at]]]] \u5305\u542b\u540d\u8bcd\u77ed\u8bed\u7684\u540d\u8bcd\u77ed\u8bed\uff0c\u5305\u542b\u540d\u8bcd\u77ed\u8bed \u5b83\u662f\u8bed\u8a00\u7ed3\u6784\u7684\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5148\u9a8c 2. Building on Word Vector Space Models the country of my birth the place where I was born \u6211\u4eec\u600e\u6837\u8868\u793a\u66f4\u957f\u77ed\u8bed\u7684\u610f\u601d\u5462\uff1f \u901a\u8fc7\u5c06\u4ed6\u4eec\u6620\u5c04\u5230\u76f8\u540c\u7684\u5411\u91cf\u7a7a\u95f4\uff01 How should we map phrases into a vector space? \u57fa\u4e8e\u7ec4\u5408\u539f\u5219\uff0c\u4f7f\u7528\u5355\u8bcd\u7684\u542b\u4e49\u548c\u7ec4\u5408\u4ed6\u4eec\u7684\u89c4\u5219\uff0c\u5f97\u5230\u4e00\u4e2a\u53e5\u5b50\u7684\u542b\u4e49\u5411\u91cf \u540c\u65f6\u5b66\u4e60\u89e3\u6790\u6811\u4ee5\u53ca\u7ec4\u5408\u5411\u91cf\u8868\u793a Constituency Sentence Parsing: What we want Learn Structure and Representation \u6211\u4eec\u9700\u8981\u80fd\u591f\u5b66\u4e60\u5982\u4f55\u89e3\u6790\u51fa\u6b63\u786e\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u5e76\u5b66\u4e60\u5982\u4f55\u57fa\u4e8e\u8bed\u6cd5\u7ed3\u6784\uff0c\u6765\u6784\u5efa\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a Recursive vs. recurrent neural networks \u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u9700\u8981\u4e00\u4e2a\u6811\u7ed3\u6784 \u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0d\u80fd\u5728\u6ca1\u6709\u524d\u7f00\u4e0a\u4e0b\u6587\u7684\u60c5\u51b5\u4e0b\u6355\u6349\u77ed\u8bed\uff0c\u5e76\u4e14\u7ecf\u5e38\u5728\u6700\u7ec8\u7684\u5411\u91cf\u4e2d\u8fc7\u5ea6\u6355\u6349\u6700\u540e\u4e00\u4e2a\u5355\u8bcd Recursive Neural Networks for Structure Prediction \u5982\u679c\u6211\u4eec\u81ea\u4e0a\u800c\u4e0b\u7684\u5de5\u4f5c\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u5e95\u5c42\u6709\u5355\u8bcd\u5411\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u8981\u9012\u5f52\u5730\u8ba1\u7b97\u66f4\u5927\u6210\u5206\u7684\u542b\u4e49 \u8f93\u5165\uff1a\u4e24\u4e2a\u5019\u9009\u7684\u5b50\u8282\u70b9\u7684\u8868\u793a \u8f93\u51fa\uff1a \u4e24\u4e2a\u8282\u70b9\u88ab\u5408\u5e76\u540e\u7684\u8bed\u4e49\u8868\u793a \u65b0\u8282\u70b9\u7684\u5408\u7406\u7a0b\u5ea6 Recursive Neural Network Definition Parsing a sentence with an RNN (greedily) Parsing a sentence \u81ea\u5de6\u5411\u53f3\u91cd\u590d\u904d\u5386\uff0c\u6bcf\u6b21\u5c06\u5f97\u5206\u6700\u9ad8\u7684\u4e24\u8005\u7ec4\u5408\u5728\u4e00\u8d77 Max-Margin Framework - Details \u6811\u7684\u5f97\u5206\u662f\u901a\u8fc7\u6bcf\u4e2a\u8282\u70b9\u7684\u89e3\u6790\u51b3\u7b56\u5f97\u5206\u7684\u603b\u548c\u6765\u8ba1\u7b97\u7684\uff1a \\[ s(x, y)=\\sum_{n \\in n o d e (y)} s_{n} \\] x \u662f\u53e5\u5b50\uff0cy \u662f\u89e3\u6790\u6811 \u7c7b\u4f3c\u4e8e\u6700\u5927\u8fb9\u8ddd\u89e3\u6790\uff08Taskar et al.2004\uff09\uff0c\u4e00\u4e2a\u53d7\u76d1\u7763\u7684\u6700\u5927\u8fb9\u9645\u76ee\u6807 \\[ J=\\sum_{i} s\\left(x_{i}, y_{i}\\right)-\\max _{y \\in A\\left(x_{i}\\right)}\\left(s\\left(x_{i}, y\\right)+\\Delta\\left(y, y_{i}\\right)\\right) \\] \u635f\u5931 \\(\\Delta\\left(y, y_{i}\\right)\\) \u60e9\u7f5a\u6240\u6709\u4e0d\u6b63\u786e\u7684\u51b3\u7b56 \u7ed3\u6784\u641c\u7d22 \\(A(x)\\) \u662f\u8d2a\u5a6a\u7684\uff08\u6bcf\u6b21\u52a0\u5165\u6700\u4f73\u8282\u70b9\uff09 \u76f8\u53cd\uff1a\u4f7f\u7528 Beam search \u641c\u7d22\u56fe Scene Parsing \u548c\u7ec4\u5408\u7c7b\u4f3c\u7684\u51c6\u5219 \u573a\u666f\u56fe\u50cf\u7684\u542b\u4e49\u4e5f\u662f\u8f83\u5c0f\u533a\u57df\u7684\u51fd\u6570 \u5b83\u4eec\u5982\u4f55\u7ec4\u5408\u6210\u90e8\u5206\u4ee5\u5f62\u6210\u66f4\u5927\u7684\u5bf9\u8c61 \u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u76f8\u4e92\u4f5c\u7528 Algorithm for Parsing Images Same Recursive Neural Network as for natural language parsing! (Socher et al. ICML 2011) Multi-class segmentation 3. Backpropagation Through Structure \u00b6 Introduced by Goller & Ku\u0308chler (1996) \u548c\u901a\u7528\u7684\u53cd\u5411\u4f20\u64ad\u7684\u89c4\u5219\u76f8\u540c $$ \\delta {(l)}=\\left(\\left(W \\right)^{T} \\delta^{(l+1)}\\right) \\circ f {\\prime}\\left(z \\right), \\quad \\quad \\quad \\frac{\\partial}{\\partial W^{(l)}} E_{R}=\\delta {(l+1)}\\left(a \\right)^{T}+\\lambda W^{(l)} $$ \u9012\u5f52\u548c\u6811\u7ed3\u6784\u5bfc\u81f4\u7684\u8ba1\u7b97\uff1a \u4ece\u6240\u6709\u8282\u70b9\uff08\u5982RNN\uff09\u6c42\u548cW\u7684\u5bfc\u6570 \u5728\u6bcf\u4e2a\u8282\u70b9\u5904\u62c6\u5206\u5bfc\u6570\uff08\u5bf9\u4e8e\u6811\uff09 \u4ece\u7236\u8282\u70b9\u548c\u8282\u70b9\u672c\u8eab\u6dfb\u52a0\u9519\u8bef\u6d88\u606f Discussion: Simple TreeRNN \u4f7f\u7528\u5355\u77e9\u9635TreeRNN\u7684\u7ed3\u679c \u5355\u4e2a\u6743\u91cd\u77e9\u9635TreeRNN\u53ef\u4ee5\u6355\u83b7\u4e00\u4e9b\u73b0\u8c61\u4f46\u4e0d\u9002\u5408\u66f4\u590d\u6742\u7684\u73b0\u8c61\u4ee5\u53ca\u66f4\u9ad8\u9636\u7684\u6784\u6210\u548c\u89e3\u6790\u957f\u53e5 \u8f93\u5165\u8bcd\u4e4b\u95f4\u6ca1\u6709\u771f\u6b63\u7684\u4ea4\u4e92 \u7ec4\u5408\u51fd\u6570\u5bf9\u4e8e\u6240\u6709\u53e5\u6cd5\u7c7b\u522b\uff0c\u6807\u70b9\u7b26\u53f7\u7b49\u90fd\u662f\u76f8\u540c\u7684 4. Version 2: Syntactically-Untied RNN \u00b6 [Socher, Bauer, Manning, Ng 2013] \u7b26\u53f7\u7684\u4e0a\u4e0b\u6587\u65e0\u5173\u7684\u8bed\u6cd5\uff08Context Free Grammar CFG\uff09\u4e3b\u5e72\u662f\u8db3\u4ee5\u6ee1\u8db3\u57fa\u672c\u7684\u53e5\u6cd5\u7ed3\u6784 \u6211\u4eec\u4f7f\u7528\u5b50\u5143\u7d20\u7684\u79bb\u6563\u53e5\u6cd5\u7c7b\u522b\u6765\u9009\u62e9\u7ec4\u5408\u77e9\u9635 \u5bf9\u4e8e\u4e0d\u540c\u7684\u8bed\u6cd5\u73af\u5883\uff0cTreeRNN\u53ef\u4ee5\u9488\u5bf9\u4e0d\u540c\u7684\u7ec4\u5408\u77e9\u9635\u505a\u5f97\u66f4\u597d \u7ed3\u679c\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u8bed\u4e49 \u5de6\u8fb9 RNN \u662f\u4f7f\u7528\u6982\u7387\u7684\u4e0a\u4e0b\u6587\u65e0\u5173\u7684\u8bed\u6cd5\u89e3\u6790\uff0c\u4e3a\u53e5\u5b50\u751f\u6210\u53ef\u80fd\u7684\u6811\u7ed3\u6784 \u53f3\u8fb9 SU-RNN \u662f\u8bed\u6cd5\u89e3\u5f00\u7684\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u6b64\u65f6\u6bcf\u4e2a\u8282\u70b9\u548c\u5e8f\u5217\u90fd\u6709\u4e00\u4e2a\u7c7b\u522b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5bf9\u5e94\u4e0d\u540c\u7c7b\u522b\u7684\u77e9\u9635\u7ec4\u5408\u8d77\u6765\uff0c\u4f8b\u5982\u5c06\u7c7b\u522b B \u548c\u7c7b\u522b C \u7684\u77e9\u9635\u7ec4\u5408\u8d77\u6765\u4f5c\u4e3a\u672c\u6b21\u8ba1\u7b97\u7684\u6743\u91cd\u77e9\u9635\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6743\u91cd\u77e9\u9635\u662f\u66f4\u7b26\u5408\u53e5\u5b50\u7ed3\u6784\u7684 Compositional Vector Grammars \u95ee\u9898\uff1a\u901f\u5ea6\u3002Beam search \u4e2d\u7684\u6bcf\u4e2a\u5019\u9009\u5206\u6570\u90fd\u9700\u8981\u4e00\u6b21\u77e9\u9635\u5411\u91cf\u4e58\u6cd5 \u89e3\u51b3\u65b9\u6848\uff1a\u4ec5\u9488\u5bf9\u6765\u81ea\u66f4\u7b80\u5355\uff0c\u66f4\u5feb\u901f\u6a21\u578b(Probabilistic Context Free Grammar (PCFG))\u7684\u6811\u7684\u5b50\u96c6\u8ba1\u7b97\u5f97\u5206 \u4fee\u526a\u975e\u5e38\u4e0d\u53ef\u80fd\u7684\u901f\u5ea6\u5019\u9009\u4eba \u4e3a\u6bcf\u4e2a beam \u5019\u9009\u8005\u63d0\u4f9b\u5b50\u53e5\u7684\u7c97\u7565\u8bed\u6cd5\u7c7b\u522b \u7ec4\u5408\u77e2\u91cf\u8bed\u6cd5= PCFG + TreeRNN Related Work for parsing \u4ea7\u751f\u7684 CVG Parser \u4e0e\u4ee5\u524d\u6269\u5c55PCFG\u89e3\u6790\u5668\u7684\u5de5\u4f5c\u6709\u5173 Klein and Manning (2003a)\uff1a\u624b\u5de5\u7279\u5f81\u5de5\u7a0b Petrov et al. (2006)\uff1a\u5206\u89e3\u548c\u5408\u5e76\u53e5\u6cd5\u7c7b\u522b\u7684\u5b66\u4e60\u7b97\u6cd5 \u8bcd\u6c47\u5316\u89e3\u6790\u5668(Collins, 2003; Charniak, 2000)\uff1a\u7528\u8bcd\u6c47\u9879\u63cf\u8ff0\u6bcf\u4e2a\u7c7b\u522b Hall and Klein (2012) \u5728\u4e00\u4e2a\u56e0\u5f0f\u89e3\u6790\u5668\u4e2d\u7ed3\u5408\u4e86\u51e0\u4e2a\u8fd9\u6837\u7684\u6ce8\u91ca\u65b9\u6848 CVGs \u5c06\u8fd9\u4e9b\u60f3\u6cd5\u4ece\u79bb\u6563\u8868\u793a\u6269\u5c55\u5230\u66f4\u4e30\u5bcc\u7684\u8fde\u7eed\u8868\u8fbe SU-RNN / CVG [Socher, Bauer, Manning, Ng 2013] Learns soft notion of head words \u521d\u59cb\u5316\uff1a \\(W^{(\\cdot)}=0.5\\left[I_{n \\times n} I_{n \\times n} 0_{n \\times 1}\\right]+\\epsilon\\) \u521d\u59cb\u5316\u4e3a\u4e00\u5bf9\u5bf9\u89d2\u77e9\u9635 \u5b66\u4e60\u7684\u662f\u4e00\u4e2a\u77ed\u8bed\u4e2d\u54ea\u4e2a\u5b50\u8282\u70b9\u662f\u91cd\u8981\u7684 Analysis of resulting vector representations \u6240\u6709\u6570\u636e\u5747\u6839\u636e\u5b63\u8282\u53d8\u5316\u8fdb\u884c\u8c03\u6574 \u6240\u6709\u6570\u5b57\u90fd\u6839\u636e\u5b63\u8282\u6027\u6ce2\u52a8\u8fdb\u884c\u8c03\u6574 \u8c03\u6574\u6240\u6709\u6570\u5b57\u4ee5\u6d88\u9664\u901a\u5e38\u7684\u5b63\u8282\u6027\u6a21\u5f0f Knight-Ridder\u4e0d\u4f1a\u8bc4\u8bba\u8fd9\u4e2a\u63d0\u8bae Harsco declined to say what country placed the order Coastal wouldn\u2019t disclose the terms Sales grew almost 7% to \\(\\text{\\$UNK m.}\\) from \\(\\text{\\$UNK m.}\\) Sales rose more than 7% to $94.9 m. from $88.3 m. Sales surged 40% to UNK b. yen from UNK b. Version 3: Compositionality Through Recursive Matrix-Vector Spaces [Socher, Huval, Bhat, Manning, & Ng, 2012] \u4e4b\u524d\uff1a \\(p=\\tanh \\left(W\\left[\\begin{array}{l}{c_{1}} \\\\ {c_{2}}\\end{array}\\right]+b\\right)\\) \uff0c \\(c_1\\) \u548c \\(c_2\\) \u4e4b\u95f4\u5e76\u6ca1\u6709\u76f8\u4e92\u5f71\u54cd \u4f7f\u7ec4\u5408\u51fd\u6570\u66f4\u5f3a\u5927\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u89e3\u5f00\u6743\u91cd W \u4f46\u662f\uff0c\u5982\u679c\u5355\u8bcd\u4e3b\u8981\u4f5c\u4e3a\u8fd0\u7b97\u7b26\uff0c\u4f8b\u5982 \u201cvery\u201d in \u201cvery good\u201d\uff0c\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u662f\u7528\u4e8e\u589e\u52a0 good \u7684\u89c4\u6a21\u7684\u8fd0\u7b97\u7b26 \u63d0\u6848\uff1a\u65b0\u7684\u7ec4\u5408\u51fd\u6570 \u95ee\u9898\u662f\u5982\u4f55\u5b9a\u4e49\u5462\uff0c\u56e0\u4e3a\u4e0d\u77e5\u9053 \\(c_1\\) \u548c \\(c_2\\) \u54ea\u4e2a\u662f operator\uff0c\u6bd4\u5982 very good \uff0c\u5c31\u5e94\u8be5\u8bb2 very \u89c6\u4e3a\u4f5c\u7528\u5728 good \u7684\u77e9\u9635\u4e0a\u7684\u5411\u91cf Compositionality Through Recursive Matrix-Vector Recursive Neural Networks \u6bcf\u4e2a\u5355\u8bcd\u90fd\u62e5\u6709\u4e00\u4e2a\u5411\u91cf\u610f\u4e49\u548c\u4e00\u4e2a\u77e9\u9635\u610f\u4e49 Matrix-vector RNNs [Socher, Huval, Bhat, Manning, & Ng, 2012] \u5de6\u4fa7\u8ba1\u7b97\u5f97\u5230\u5408\u5e76\u540e\u7684\u5411\u91cf\u610f\u4e49 \u53f3\u4fa7\u8ba1\u7b97\u5f97\u5230\u5408\u5e76\u540e\u7684\u77e9\u9635\u610f\u4e49 \u53ef\u4ee5\u6355\u83b7\u8fd0\u7b97\u7b26\u8bed\u4e49\uff0c\u5373\u4e2d\u4e00\u4e2a\u5355\u8bcd\u4fee\u9970\u4e86\u53e6\u4e00\u4e2a\u5355\u8bcd\u7684\u542b\u4e49 Predicting Sentiment Distributions \u8bed\u8a00\u4e2d\u975e\u7ebf\u6027\u7684\u597d\u4f8b\u5b50 Classification of Semantic Relationships MV-RNN \u53ef\u4ee5\u5b66\u4e60\u5230\u5927\u7684\u53e5\u6cd5\u4e0a\u4e0b\u6587\u4f20\u8fbe\u8bed\u4e49\u5173\u7cfb\u5417\uff1f \u4e3a\u5305\u62ec\u4e24\u9879\u7684\u6700\u5c0f\u6210\u5206\u6784\u5efa\u5355\u4e2a\u7ec4\u5408\u8bed\u4e49 \u95ee\u9898\uff1a\u53c2\u6570\u91cf\u8fc7\u5927\uff0c\u5e76\u4e14\u83b7\u5f97\u77ed\u8bed\u7684\u77e9\u9635\u610f\u4e49\u7684\u65b9\u5f0f\u4e0d\u591f\u597d Version 4: Recursive Neural Tensor Network Socher, Perelygin, Wu, Chuang, Manning, Ng, and Potts 2013 \u6bd4 MV-RNN \u66f4\u5c11\u7684\u53c2\u6570\u91cf \u5141\u8bb8\u4e24\u4e2a\u5355\u8bcd\u6216\u77ed\u8bed\u5411\u91cf\u4e58\u6cd5\u4ea4\u4e92 Beyond the bag of words: Sentiment detection \u4e00\u6bb5\u6587\u5b57\u7684\u8bed\u8c03\u662f\u79ef\u6781\u7684\uff0c\u6d88\u6781\u7684\u8fd8\u662f\u4e2d\u6027\u7684\uff1f \u67d0\u79cd\u7a0b\u5ea6\u4e0a\u60c5\u7eea\u5206\u6790\u662f\u5bb9\u6613\u7684 \u8f83\u957f\u6587\u6863\u7684\u68c0\u6d4b\u7cbe\u5ea6~90\uff05\uff0c\u4f46\u662f Stanford Sentiment Treebank 215,154 phrases labeled in 11,855 sentences \u53ef\u4ee5\u771f\u7684\u8bad\u7ec3\u548c\u6d4b\u8bd5\u7ec4\u5408 http://nlp.stanford.edu:8080/sentiment/ Better Dataset Helped All Models \u4e25\u91cd\u7684\u5426\u5b9a\u7684\u6848\u4f8b\u4ecd\u7136\u5927\u591a\u5224\u65ad\u9519\u8bef\u7684 \u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u66f4\u5f3a\u5927\u7684\u6a21\u578b\uff01 \u60f3\u6cd5\uff1a\u5141\u8bb8\u8f7d\u4f53\u7684\u52a0\u6027\u548c\u4ecb\u5bfc\u7684\u4e58\u6cd5\u76f8\u4e92\u4f5c\u7528 \u5728\u6811\u4e2d\u4f7f\u7528\u7ed3\u679c\u5411\u91cf\u4f5c\u4e3a\u903b\u8f91\u56de\u5f52\u7684\u5206\u7c7b\u5668\u7684\u8f93\u5165 \u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u8054\u5408\u8bad\u7ec3\u6240\u6709\u6743\u91cd \u56de\u5230\u6700\u521d\u7684\u4f7f\u7528\u5411\u91cf\u8868\u793a\u5355\u8bcd\u7684\u610f\u4e49\uff0c\u4f46\u4e0d\u662f\u4ec5\u4ec5\u5c06\u4e24\u4e2a\u8868\u793a\u5355\u8bcd\u542b\u4e49\u7684\u5411\u91cf\u76f8\u4e92\u4f5c\u7528\uff0c\u5de6\u4e0a\u56fe\u662f\u5728\u4e2d\u95f4\u63d2\u5165\u4e00\u4e2a\u77e9\u9635\uff0c\u4ee5\u53cc\u7ebf\u6027\u7684\u65b9\u5f0f\u505a\u6ce8\u610f\u529b\u5e76\u5f97\u5230\u4e86\u6ce8\u610f\u529b\u5f97\u5206\u3002\u5373\u4ee4\u4e24\u4e2a\u5355\u8bcd\u7684\u5411\u91cf\u76f8\u4e92\u4f5c\u7528\u5e76\u4e14\u53ea\u4ea7\u751f\u4e00\u4e2a\u6570\u5b57\u4f5c\u4e3a\u8f93\u51fa \u5982\u4e0a\u4e2d\u56fe\u6240\u793a\uff0c\u6211\u4eec\u53ef\u4ee5\u62e5\u6709\u4e09\u7ef4\u77e9\u9635\uff0c\u5373\u591a\u5c42\u7684\u77e9\u9635\uff08\u4e8c\u7ef4\uff09\uff0c\u4ece\u800c\u5f97\u5230\u4e86\u4e24\u4e2a\u5f97\u5206 \u4f7f\u7528 softmax \u505a\u5206\u7c7b Positive/Negative Results on Treebank Classifying Sentences: Accuracy improves to 85.4 Experimental Results on Treebank RNTN \u53ef\u4ee5\u6355\u6349\u7c7b\u4f3c X but Y \u7684\u7ed3\u6784 RNTN accuracy of 72%, compared to MV-RNN (65%), biword NB (58%) and RNN (54%) Negation Results \u53cc\u91cd\u5426\u5b9a\u65f6\uff0c\u79ef\u6781\u53cd\u5e94\u5e94\u8be5\u4e0a\u5347 Demo: http://nlp.stanford.edu:8080/sentiment/ Version 5: Improving Deep Learning Semantic Representations using a TreeLSTM [Tai et al., ACL 2015; also Zhu et al. ICML 2015] \u76ee\u6807\uff1a \u4ecd\u8bd5\u56fe\u5c06\u53e5\u5b50\u7684\u542b\u4e49\u8868\u793a\u4e3a\uff08\u9ad8\u7ef4\uff0c\u8fde\u7eed\uff09\u5411\u91cf\u7a7a\u95f4\u4e2d\u7684\u4f4d\u7f6e \u4e00\u79cd\u51c6\u786e\u5904\u7406\u8bed\u4e49\u6784\u6210\u548c\u53e5\u5b50\u542b\u4e49\u7684\u65b9\u5f0f \u5c06\u5e7f\u6cdb\u4f7f\u7528\u7684\u94fe\u5f0f\u7ed3\u6784LSTM\u63a8\u5e7f\u5230\u6811\u7ed3\u6784 Long Short-Term Memory (LSTM) Units for Sequential Composition \u95e8\u662f \\([0,1]^{d}\\) \u7684\u5411\u91cf\uff0c\u7528\u4e8e\u9010\u5143\u7d20\u4e58\u79ef\u7684\u8f6f\u63a9\u853d\u5143\u7d20 Tree-Structured Long Short-Term Memory Networks [Tai et al., ACL 2015] Tree-structured LSTM \u5c06\u8fde\u7eedLSTM\u63a8\u5e7f\u5230\u5177\u6709\u4efb\u4f55\u5206\u652f\u56e0\u5b50\u7684\u6811 Results: Sentiment Analysis: Stanford Sentiment Treebank Results: Semantic Relatedness SICK 2014 (Sentences Involving Compositional Knowledge) Forget Gates: Selective State Preservation Stripes = forget gate activations; more white \u21d2 more preserved 5. QCD-Aware Recursive Neural Networks for Jet Physics \u00b6 Gilles Louppe, Kyunghun Cho, Cyril Becot, Kyle Cranmer (2017) Tree-to-tree Neural Networks for Program Translation [Chen, Liu, and Song NeurIPS 2018] \u63a2\u7d22\u5728\u7f16\u7a0b\u8bed\u8a00\u4e4b\u95f4\u4f7f\u7528\u6811\u5f62\u7ed3\u6784\u7f16\u7801\u548c\u751f\u6210\u8fdb\u884c\u7ffb\u8bd1 \u5728\u751f\u6210\u4e2d\uff0c\u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u5728\u6e90\u6811\u4e0a Human-Centered Artificial Intelligence \u4eba\u5de5\u667a\u80fd\u6709\u671b\u6539\u53d8\u7ecf\u6d4e\u548c\u793e\u4f1a\uff0c\u6539\u53d8\u6211\u4eec\u6c9f\u901a\u548c\u5de5\u4f5c\u7684\u65b9\u5f0f\uff0c\u91cd\u5851\u6cbb\u7406\u548c\u653f\u6cbb\uff0c\u5e76\u6311\u6218\u56fd\u9645\u79e9\u5e8f HAI\u7684\u4f7f\u547d\u662f\u63a8\u8fdb\u4eba\u5de5\u667a\u80fd\u7814\u7a76\uff0c\u6559\u80b2\uff0c\u653f\u7b56\u548c\u5b9e\u8df5\uff0c\u4ee5\u6539\u5584\u4eba\u7c7b\u72b6\u51b5 Notes 09 Recursive Neural Networks and Constituency Parsing \u00b6 Note : \"RNN\" in this set of notes refers to Recursive Neural Networks, not Recurrent Neural Networks. The former is a superset of the latter. 1 Recursive Neural Networks \u00b6 \u5728\u8fd9\u4e9b\u7b14\u8bb0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u5e76\u8ba8\u8bba\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\uff0c\u5b83\u662f\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7684\u8d85\u96c6\u3002\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs \u5982\u4e0a\u56fe\u6240\u793a)\u975e\u5e38\u9002\u5408\u5177\u6709\u5d4c\u5957\u5c42\u6b21\u7ed3\u6784\u548c\u5185\u5728\u9012\u5f52\u7ed3\u6784\u7684\u8bbe\u7f6e\u3002\u5982\u679c\u6211\u4eec\u601d\u8003\u4e00\u4e2a\u53e5\u5b50\uff0c\u5b83\u4e0d\u662f\u6b63\u662f\u6709\u8fd9\u6837\u7684\u7ed3\u6784\u5417\uff1f\u4ee5\u201cA small crowd quietly enters the historical church\u201d\u4e3a\u4f8b\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u53e5\u5b50\u5206\u6210\u540d\u8bcd\u77ed\u8bed\u3001\u52a8\u8bcd\u77ed\u8bed\u3001\u201cA small crowd\u201d\u548c\u201cquietly enters the historical church\u201d\u3002\u4f46\u662f\u6709\u4e00\u4e2a\u540d\u8bcd\u77ed\u8bed\u5728\u52a8\u8bcd\u77ed\u8bed\u4e2d:\u201cquietly enters\u201d\u548c\u201chistorical church\u201d\uff0c\u7b49\u7b49\u3002\u8fd9\u770b\u8d77\u6765\u786e\u5b9e\u5f88\u9012\u5f52\u3002 \u201c\u8bed\u8a00\u7684\u8bed\u6cd5\u89c4\u5219\u662f\u9ad8\u5ea6\u9012\u5f52\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u5229\u7528\u4e86\u9012\u5f52\u7ed3\u6784\u7684\u6a21\u578b\u3002\u4f7f\u7528 RNN\u5efa\u6a21\u53e5\u5b50\u7684\u53e6\u4e00\u4e2a\u597d\u5904\u662f\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8f93\u5165\u4efb\u610f\u957f\u5ea6\u7684\u53e5\u5b50\uff0c\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u5934\u8111\u5728NLP\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u548c\u975e\u5e38\u806a\u660e\u7684\u6280\u5de7\u4f7f\u53e5\u5b50\u7684\u8f93\u5165\u5411\u91cf\u76f8\u7b49\u5c3a\u5bf8\u76f8\u540c\uff0c\u5c3d\u7ba1\u53e5\u5b50\u7684\u957f\u5ea6\u4e0d\u76f8\u7b49\u3002(see Bengio et al., 2003; Henderson, 2003; Collobert & Weston, 2008) \u5047\u8bbe\u6211\u4eec\u7684\u4efb\u52a1\u662f\u53d6\u4e00\u4e2a\u53e5\u5b50\uff0c\u5e76\u5c06\u5176\u8868\u793a\u4e3a\u4e0e\u5355\u8bcd\u672c\u8eab\u8bed\u4e49\u7a7a\u95f4\u76f8\u540c\u7684\u5411\u91cf\u3002\u6240\u4ee5\u50cf\u201cI went to the mall yesterday\u201d\u3001\u201cWe went shopping last week\u201d\u548c\u201cThey went to the store\u201d\u8fd9\u6837\u7684\u77ed\u8bed\uff0c\u5f7c\u6b64\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u975e\u5e38\u8fd1\u3002\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u4e86\u8bad\u7ec3\u5355\u5b57\u5411\u91cf\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u662f\u5426\u5e94\u8be5\u5bf9\u4e8c\u5143\u7ec4\u3001\u4e09\u5143\u7ec4\u7b49\u4e5f\u505a\u540c\u6837\u7684\u4e8b\u60c5\u3002\u8fd9\u53ef\u80fd\u975e\u5e38\u6709\u6548\uff0c\u4f46\u8fd9\u79cd\u60f3\u6cd5\u5b58\u5728\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\u30021) \u5355\u8bcd\u7684\u7ec4\u5408\u6709\u65e0\u6570\u79cd\u53ef\u80fd\u3002\u5b58\u50a8\u548c\u8bad\u7ec3\u65e0\u9650\u6570\u91cf\u7684\u5411\u91cf\u5c06\u662f\u8352\u8c2c\u7684\u30022) \u6709\u4e9b\u5355\u8bcd\u7684\u7ec4\u5408\u867d\u7136\u5728\u8bed\u8a00\u4e2d\u5b8c\u5168\u53ef\u4ee5\u542c\u5230\uff0c\u4f46\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u5728\u6211\u4eec\u7684 \u8bad\u7ec3 / \u5f00\u53d1 \u8bed\u6599\u5e93\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u6c38\u8fdc\u5b66\u4e0d\u4f1a\u3002 \u6211\u4eec\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\u6765\u53d6\u4e00\u4e2a\u53e5\u5b50\u53ca\u5176\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\uff0c\u5e76\u63a8\u5bfc\u51fa\u5d4c\u5165\u5411\u91cf\u5e94\u8be5\u662f\u4ec0\u4e48\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5148\u95ee\u4e00\u4e2a\u975e\u5e38\u6709\u4e89\u8bae\u7684\u95ee\u9898\u3002\u6211\u4eec\u7528\u6765\u8868\u793a\u6240\u6709\u5355\u8bcd\u7684\u5411\u91cf\u7a7a\u95f4\uff0c\u5177\u6709\u8db3\u591f\u7684\u8868\u8fbe\u80fd\u529b\u4ee5\u81f3\u4e8e\u80fd\u591f\u8868\u793a\u4efb\u610f\u957f\u5ea6\u7684\u6240\u6709\u53e5\u5b50\uff0c\u8fd9\u662f\u5929\u771f\u7684\u60f3\u6cd5\u5417\uff1f\u867d\u7136\u8fd9\u53ef\u80fd\u662f\u4e0d\u76f4\u89c2\u7684\uff0c\u4f46\u8fd9\u4e9b\u6a21\u578b\u7684\u6027\u80fd\u8868\u660e\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u4ef6\u5408\u7406\u7684\u4e8b\u60c5\u3002 \u6211\u4eec\u5148\u6765\u8ba8\u8bba\u4e00\u4e0b\u53e5\u5b50\u7684\u8bed\u4e49\u7406\u89e3\u548c\u8bed\u6cd5\u7406\u89e3\u7684\u533a\u522b\u3002\u8bed\u4e49\u5206\u6790\u662f\u5bf9\u53e5\u5b50\u610f\u4e49\u7684\u7406\u89e3\uff0c\u80fd\u591f\u5728\u7ed3\u6784\u8bed\u4e49\u7a7a\u95f4\u4e2d\u628a\u77ed\u8bed\u8868\u793a\u4e3a\u4e00\u4e2a\u5411\u91cf\uff0c\u76f8\u4f3c\u7684\u53e5\u5b50\u975e\u5e38\u8fd1\uff0c\u4e0d\u76f8\u5173\u7684\u53e5\u5b50\u975e\u5e38\u8fdc\u3002\u8bed\u6cd5\u7406\u89e3\u662f\u6307\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u53e5\u5b50\u7684\u57fa\u672c\u8bed\u6cd5\u7ed3\u6784\uff0c\u53e5\u5b50\u7684\u54ea\u4e00\u90e8\u5206\u53d6\u51b3\u4e8e\u54ea\u4e00\u90e8\u5206\uff0c\u54ea\u4e9b\u8bcd\u5728\u4fee\u9970\u54ea\u4e9b\u8bcd\uff0c\u7b49\u7b49\u3002\u8fd9\u79cd\u7406\u89e3\u7684\u8f93\u51fa\u901a\u5e38\u7528\u89e3\u6790\u6811\u8868\u793a\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u6700\u91cd\u8981\u7684\u95ee\u9898\u3002\u5982\u679c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8bed\u4e49\u7684\u8868\u8fbe\u65b9\u5f0f\uff0c\u662f\u5426\u9700\u8981\u6709\u8bed\u6cd5\u4e0a\u7684\u7406\u89e3\uff1f\u6709\u4e9b\u4eba\u53ef\u80fd\u4e0d\u540c\u610f\uff0c\u4f46\u73b0\u5728\u6211\u4eec\u5c06\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u4e2a\u8bed\u4e49\u7ec4\u5408\u4efb\u52a1\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u5355\u8bcd\u3002\u7136\u540e\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u5355\u8bcd\u662f\u5982\u4f55\u7ec4\u5408\u5728\u4e00\u8d77\u7684\uff0c\u7136\u540e\uff0c\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5229\u7528\u524d\u9762\u7684\u4e24\u4e2a\u6982\u5ff5\u5f97\u5230\u4e00\u4e2a\u77ed\u8bed\u6216\u53e5\u5b50\u7684\u610f\u601d\u3002 \u8ba9\u6211\u4eec\u4ece\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u57fa\u4e8e\u8fd9\u4e2a\u539f\u5219\u7684\u6a21\u578b\u5f00\u59cb\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u53e5\u5b50\u7684\u89e3\u6790\u6811\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u80fd\u627e\u51fa\u8fd9\u4e2a\u53e5\u5b50\u7684\u7f16\u7801\u5417\uff1f\u4e5f\u8bb8\u8fd8\u80fd\u4ece\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u4e2d\u5f97\u5230\u4e00\u4e2a\u60c5\u611f\u5f97\u5206\uff1f\u6211\u4eec\u89c2\u5bdf\u4e00\u4e2a\u7b80\u5355\u7684RNN\u662f\u5982\u4f55\u5b8c\u6210\u8fd9\u9879\u4efb\u52a1\u7684\u3002\u201d 1.1 A simple single layer RNN \u00b6 \u8ba9\u6211\u4eec\u6d4f\u89c8\u4e00\u4e0b\u4e0a\u56fe\u4e2d\u663e\u793a\u7684\u6a21\u578b\u3002\u6211\u4eec\u9996\u5148\u83b7\u53d6\u4e00\u4e2a\u53e5\u5b50\u89e3\u6790\u6811\u548c\u53e5\u5b50\u5355\u8bcd\u5411\u91cf\uff0c\u7136\u540e\u5f00\u59cb\u904d\u5386\u8be5\u6811\u3002\u56fe\u4e2d\u6700\u4f4e\u7684\u8282\u70b9\u662f \\(\\text{Node}_3\\) \uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \\(L_{29}\\) \u548c \\(L_{430}\\) \u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u4e2a\u5411\u91cf \\(\\in \\mathbb{R}^{2 d}\\) \uff0c\u5e76\u5c06\u5176\u8f93\u5165\u5230\u6211\u4eec\u7684\u7f51\u7edc\u4e2d\u8fdb\u884c\u8ba1\u7b97\uff1a $$ h^{(1)}=\\tanh \\left(W^{(1)}\\left[\\begin{array}{c}{L_{29}} \\ {L_{430}}\\end{array}\\right]+b^{(1)}\\right) $$ \u8003\u8651\u5230 \\(W^{(1)} \\in \\mathbb{R}^{d \\times 2 d} \\text { and } b^{(1)} \\in \\mathbb{R}^{d}, h^{(1)} \\in \\mathbb{R}^{d}\\) \uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06 \\(h^{(1)}\\) \u770b\u505a\u662f bigram \u201cthis assignment\u201d \u7684\u76f8\u540c\u5355\u8bcd\u5411\u91cf\u7a7a\u95f4\u7684\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5206\u522b\u5b66\u4e60\u8868\u793a\uff0c\u800c\u662f\u4ece\u5176\u6784\u6210\u7684\u5355\u8bcd\u5411\u91cf\u4e2d\u6d3e\u751f\u3002 \u6211\u4eec\u73b0\u5728\u5c06 \\(h^{(1)}\\) \u6295\u8fdb\u4e00\u4e2a softmax \u5c42\u4e2d\u6765\u83b7\u5f97\u4e00\u4e2a\u60c5\u611f\u7c7b\u522b\u7684\u5206\u6570\uff0c\u60c5\u611f\u7c7b\u522b\u662f\u4e00\u4e2a\u5df2\u77e5\u7684\u4ee3\u8868\u4e00\u4e9b\u542b\u4e49\u7684\u79bb\u6563\u96c6\u5408\u3002\u5728\u79ef\u6781/\u6d88\u6781\u60c5\u7eea\u5206\u6790\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u67095\u4e2a\u7c7b\uff0c\u7c7b0\u8868\u793a\u5f3a\u70c8\u7684\u6d88\u6781\uff0c\u7c7b1\u8868\u793a\u6d88\u6781\uff0c\u7c7b2\u8868\u793a\u4e2d\u6027\uff0c\u7c7b3\u8868\u793a\u79ef\u6781\uff0c\u6700\u540e\u7c7b4\u8868\u793a\u5f3a\u70c8\u7684\u79ef\u6781\u3002 \u73b0\u5728\u6211\u4eec\u5bf9\u201cI\u201d\u548c\u201clove\u201d\u505a\u540c\u6837\u7684\u5904\u7406\uff0c\u751f\u6210\u77ed\u8bed\u201cI love\u201d\u7684\u5411\u91cf \\(h^{(1)}\\) \u3002\u540c\u6837\uff0c\u6211\u4eec\u8ba1\u7b97\u8be5\u77ed\u8bed\u5728\u60c5\u611f\u7c7b\u4e0a\u7684\u5f97\u5206\u3002\u6700\u540e\uff0c\u6700\u6709\u8da3\u7684\u4e00\u6b65\uff0c\u6211\u4eec\u9700\u8981\u5408\u5e76\u4e24\u4e2a\u77ed\u8bed\u201cI love\u201d\u548c\u201cthis assignment\u201d\u3002\u8fd9\u91cc\u6211\u4eec\u8fde\u63a5\u7684\u662f\u5355\u8bcd\u77ed\u8bed\uff0c\u800c\u4e0d\u662f\u5355\u8bcd\u5411\u91cf\uff01\u6211\u4eec\u7528\u540c\u6837\u7684\u65b9\u6cd5\uff0c\u628a\u4e24\u4e2a \\(h^{(1)}\\) \u8fde\u63a5\u8d77\u6765\u5e76\u4e14\u8ba1\u7b97 $$ h^{(1)}=\\tanh \\left(W^{(1)}\\left[\\begin{array}{c}{h_{L e f t}^{(1)}} \\ {h_{R i g h t} {(1)}}\\end{array}\\right]+b \\right) $$ \u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2a\u5411\u91cf\u5728\u5411\u91cf\u7a7a\u95f4\u4e2d\u8868\u793a\u5b8c\u6574\u7684\u53e5\u5b50\u201dI love this assignment\u201d\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a \\(h^{(1)}\\) \u901a\u8fc7\u4e0e\u524d\u9762\u76f8\u540c\u7684 softmax \u5c42\uff0c\u5e76\u8ba1\u7b97\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\u6982\u7387\u3002\u5f53\u7136\uff0c\u6a21\u578b\u53ea\u6709\u5728\u7ecf\u8fc7\u8bad\u7ec3\u540e\u624d\u80fd\u53ef\u9760\u5730\u505a\u5230\u8fd9\u4e00\u70b9\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u540e\u9000\u4e00\u6b65\u3002\u9996\u5148\uff0c\u8ba4\u4e3a\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u77e9\u9635 \\(W\\) \u5c06\u6240\u6709\u5355\u8bcd\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5f97\u5230\u4e00\u4e2a\u975e\u5e38\u6709\u8868\u73b0\u529b\u7684 \\(h^{(1)}\\) \uff0c\u7136\u540e\u518d\u6b21\u4f7f\u7528\u76f8\u540c\u7684\u77e9\u9635 \\(W\\) \u5c06\u6240\u6709\u77ed\u8bed\u5411\u91cf\u8fde\u63a5\u8d77\u6765\uff0c\u5f97\u5230\u66f4\u6df1\u5c42\u7684\u77ed\u8bed\uff0c\u8fd9\u6837\u7684\u60f3\u6cd5\u662f\u4e0d\u662f\u592a\u5929\u771f\u4e86\uff1f\u8fd9\u4e9b\u6279\u8bc4\u662f\u5408\u7406\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u5bf9\u7b80\u5355RNN\u7684\u5904\u7406\u6765\u89e3\u51b3\u5b83\u4eec\u3002 1.2 Syntactically Untied SU-RNN \u00b6 \u6b63\u5982\u6211\u4eec\u5728\u524d\u4e00\u8282\u7684\u6279\u8bc4\u4e2d\u6240\u8ba8\u8bba\u7684\uff0c\u4f7f\u7528\u76f8\u540c\u7684 $W $ \u5c06\u540d\u8bcd\u77ed\u8bed\u548c\u52a8\u8bcd\u77ed\u8bed\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5c06\u4ecb\u8bcd\u77ed\u8bed\u548c\u53e6\u4e00\u4e2a\u8bcd\u5411\u91cf\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u4ece\u76f4\u89c9\u4e0a\u770b\u4f3c\u4e4e\u662f\u9519\u8bef\u7684\u3002\u4e5f\u8bb8\u6211\u4eec\u662f\u76f4\u63a5\u5c06\u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u5408\u5e76\u5230\u4e00\u4e2a\u592a\u5f31\u7684\u6a21\u578b\u4e2d\u3002 \u6211\u4eec\u80fd\u505a\u7684\u5c31\u662f\u201c\u4ece\u8bed\u6cd5\u4e0a\u89e3\u5f00\u201d\u8fd9\u4e9b\u4e0d\u540c\u4efb\u52a1\u7684\u6743\u91cd\u3002\u6211\u4eec\u7684\u610f\u601d\u662f\uff0c\u6ca1\u6709\u7406\u7531\u671f\u671b\u67d0\u4e00\u7c7b\u8f93\u5165\u7684\u6700\u4f18 \\(W\\) \u4e0e\u53e6\u4e00\u7c7b\u8f93\u5165\u7684\u6700\u4f18 \\(W\\) \u5b8c\u5168\u76f8\u5173\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u8fd9\u4e9b \\(W\\) \u4e0d\u4e00\u6837\uff0c\u653e\u677e\u8fd9\u4e2a\u7ea6\u675f\u3002\u867d\u7136\u8fd9\u786e\u5b9e\u589e\u52a0\u4e86\u6211\u4eec\u8981\u5b66\u4e60\u7684\u6743\u91cd\u77e9\u9635\uff0c\u4f46\u662f\u6211\u4eec\u83b7\u5f97\u7684\u6027\u80fd\u63d0\u5347\u5374\u4e0d\u662f\u5fae\u4e0d\u8db3\u9053\u7684\u3002 \u5bf9\u4e0d\u540c\u7c7b\u522b\u7684\u8f93\u5165\u4f7f\u7528\u4e0d\u540c\u7684 \\(W\\) \u6bd4\u5bf9\u6240\u6709\u7c7b\u522b\u53ea\u4f7f\u7528\u4e00\u4e2a \\(W\\) \u66f4\u81ea\u7136 \u6b63\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u6211\u4eec\u7684\u6a21\u578b\u73b0\u5728\u53d6\u51b3\u4e8e\u8f93\u5165\u7684\u8bed\u6cd5\u7c7b\u522b\u3002\u6ce8\u610f\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u6982\u7387\u4e0a\u4e0b\u6587\u81ea\u7531\u8bed\u6cd5(PCFG)\u6765\u786e\u5b9a\u7c7b\u522b\uff0c\u8fd9\u4e2a\u8bed\u6cd5\u6216\u591a\u6216\u5c11\u662f\u901a\u8fc7\u8ba1\u7b97Penn Tree Bank\u4e0a\u7684\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f\u6765\u5b66\u4e60\u7684\uff0c\u4ee5\u5b66\u4e60\u89c4\u5219\uff0c\u6bd4\u5982\u201cthe\u201d\u603b\u662f\u4e00\u4e2aDT\u7b49\u7b49\u3002\u4e0d\u9700\u8981\u5bf9\u8fd9\u90e8\u5206\u6709\u66f4\u6df1\u7684\u7406\u89e3\uff0c\u53ea\u9700\u8981\u77e5\u9053\u5b83\u975e\u5e38\u7b80\u5355\u3002 \u8fd9\u4e2a\u6a21\u578b\u4e2d\u552f\u4e00\u7684\u5176\u4ed6\u4e3b\u8981\u533a\u522b\u662f\uff0c\u6211\u4eec\u6839\u636e\u8bed\u8a00\u7c7b\u522b\u5206\u522b\u521d\u59cb\u5316\u4e86 \\(W\\) \u3002\u8fd9\u6837\u505a\u7684\u9ed8\u8ba4\u505a\u6cd5\u662f\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u5355\u8bcd\u5411\u91cf\u6c42\u5e73\u5747\u503c\u3002\u7f13\u6162\u4f46\u80af\u5b9a\u7684\u662f\uff0c\u6a21\u578b\u4f1a\u5b66\u4f1a\u54ea\u4e2a\u5411\u91cf\u66f4\u91cd\u8981\uff0c\u4ee5\u53ca\u5411\u91cf\u7684\u4efb\u4f55\u65cb\u8f6c\u6216\u7f29\u653e\u90fd\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\u6211\u4eec\u5728\u4e0b\u56fe\u4e2d\u89c2\u5bdf\u5230\uff0c\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6743\u91cd\u77e9\u9635\u5b66\u4e60\u4e86\u5b9e\u9645\u610f\u4e49\uff01\u4f8b\u5982\uff0cDT-NP \u89c4\u5219\uff0c\u6216\u8005\u8bf4\u662f\u9650\u5b9a\u8bcd\u540e\u8ddf\u540d\u8bcd\u77ed\u8bed (\u5982\u201cThe car\u201d\u6216\u201cA man\u201d) \u7684\u4f8b\u5b50\u4e2d\uff0c\u66f4\u5f3a\u8c03\u540d\u8bcd\u8bcd\u7ec4\u3002(\u8fd9\u662f\u663e\u800c\u6613\u89c1\u7684\uff0c\u56e0\u4e3a\u53f3\u8fb9\u7684\u5bf9\u89d2\u7ebf\u662f\u7ea2\u8272\u7684\uff0c\u8868\u793a\u66f4\u9ad8\u7684\u6743\u91cd)\u3002\u8fd9\u88ab\u79f0\u4e3asoft head words \u7684\u6982\u5ff5\uff0c\u8bed\u8a00\u5b66\u5bb6\u4eec\u957f\u671f\u4ee5\u6765\u4e00\u76f4\u8ba4\u4e3a\u8fd9\u662f\u6b63\u786e\u7684\uff0c\u7136\u800c\u8fd9\u4e2a\u6a21\u578b\u4ec5\u4ec5\u901a\u8fc7\u89c2\u5bdf\u6570\u636e\u5c31\u5b66\u4f1a\u4e86\u8fd9\u4e00\u70b9\u3002\u5f88\u9177\uff01 \u5b66\u4e60\u5230\u7684 DT-NP \u7ec4\u5408\u7684\u6743\u91cd \\(W\\) \u7b26\u5408\u8bed\u8a00\u5b66\u7406\u8bba SU-RNN\u786e\u5b9e\u6bd4\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u6a21\u578b\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u4f46\u4e5f\u8bb8\u5b83\u7684\u8868\u73b0\u529b\u8fd8\u4e0d\u591f\u3002\u5982\u679c\u6211\u4eec\u8003\u8651\u4fee\u9970\u8bcd\uff0c\u6bd4\u5982\u526f\u8bcd\u201cvery\u201d\uff0c\u4efb\u4f55\u4e0e\u8fd9\u4e2a\u5355\u8bcd\u5411\u91cf\u548c\u4e0b\u9762\u8fd9\u4e2a\u5355\u8bcd\u5411\u91cf\u7684\u63d2\u503c\uff0c\u80af\u5b9a\u4e0d\u662f\u6211\u4eec\u6240\u7406\u89e3\u7684\u201cvery\u201d\u7684\u672c\u8d28\u3002\u3002 \u4f5c\u4e3a\u526f\u8bcd\uff0c\u5b83\u7684\u5b57\u9762\u610f\u601d\u662f\u201c\u7528\u4e8e\u5f3a\u8c03\u201d\u3002\u5f53\u6211\u4eec\u53ea\u505a\u7ebf\u6027\u63d2\u503c\u65f6\uff0c\u6211\u4eec\u600e\u4e48\u80fd\u5f97\u5230\u4e00\u4e2a\u5f3a\u8c03\u5176\u4ed6\u5411\u91cf\u7684\u5411\u91cf\u5462\uff1f\u6211\u4eec\u5982\u4f55\u6784\u9020\u4e00\u4e2a\u5411\u91cf\uff0c\u5b83\u5c06\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u201c\u7f29\u653e\u201d\u4efb\u4f55\u5176\u4ed6\u5411\u91cf\uff1f\u4e8b\u5b9e\u662f\u6211\u4eec\u4e0d\u80fd\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8bcd\u5bf9\u53e6\u4e00\u4e2a\u8bcd\u7684\u4e58\u6cd5\u3002\u6211\u4eec\u5728\u4e0b\u9762\u53d1\u73b0\u4e86\u4e24\u4e2a\u8fd9\u6837\u7684\u7ec4\u5408\uff0c\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002\u7b2c\u4e00\u4e2a\u5229\u7528\u5355\u8bcd\u77e9\u9635\uff0c\u53e6\u4e00\u4e2a\u5229\u7528\u4e8c\u6b21\u65b9\u7a0b\u7684\u5178\u578b\u4eff\u5c04\u3002 1.3 MV-RNN\u2019s (Matrix-Vector Recursive Neural Networks) \u00b6 \u6211\u4eec\u73b0\u5728\u6269\u5927\u6211\u4eec\u7684\u5355\u8bcd\u8868\u793a\uff0c\u4e0d\u4ec5\u5305\u62ec\u4e00\u4e2a\u5355\u8bcd\u5411\u91cf\uff0c\u800c\u4e14\u8fd8\u5305\u62ec\u4e00\u4e2a\u5355\u8bcd\u77e9\u9635\uff01\u6240\u4ee5\u5355\u8bcd\u201cvery\u201d\u5c06\u6709\u4e00\u4e2a\u5355\u8bcd\u5411\u91cf \\(v_{v e r y} \\in \\mathbb{R}^{d}\\) \uff0c\u548c\u5355\u8bcd\u77e9\u9635 \\(V_{v e r y} \\in \\mathbb{R}^{d \\times d}\\) \u3002\u8fd9\u8ba9\u6211\u4eec\u4e0d\u4ec5\u80fd\u591f\u8868\u8fbe\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\uff0c\u8fd8\u80fd\u5b66\u4e60\u5355\u8bcd\u201cmodify \u4fee\u9970\u201d\u5176\u4ed6\u5355\u8bcd\u7684\u65b9\u5f0f\u3002\u5355\u8bcd\u77e9\u9635\u6307\u7684\u5c31\u662f\u540e\u8005\u3002\u4e3a\u4e86\u5c06\u4e24\u4e2a\u5355\u8bcd \\(a\\) \u548c \\(b\\) \u8f93\u5165RNN\uff0c\u6211\u4eec\u53d6\u5b83\u4eec\u7684\u5355\u8bcd\u77e9\u9635 \\(A\\) \u548c \\(B\\) \uff0c\u5f62\u6210\u8f93\u5165\u5411\u91cf \\(x\\) \uff0c\u4f5c\u4e3a\u5411\u91cf \\(Ab\\) \u548c \\(Ba\\) \u7684\u7ec4\u5408\u3002\u5728\u6211\u4eec\u7684\u201cvery\u201d\u4f8b\u5b50\u4e2d\uff0c \\(V_{very}\\) \u53ef\u4ee5\u662f\u5355\u4f4d\u77e9\u9635\u4e58\u4ee5\u4efb\u610f\u5927\u4e8e1\u7684\u6807\u91cf\u3002\u5b83\u53ef\u4ee5\u5c06\u4efb\u4f55\u76f8\u90bb\u7684\u8bcd\u5411\u91cf\u4e58\u4ee5\u8fd9\u4e2a\u6570\uff01\u8fd9\u6b63\u662f\u6211\u4eec\u6240\u9700\u8981\u7684\u90a3\u79cd\u8868\u793a\u80fd\u529b\u3002\u5f53\u65b0\u7684\u5355\u8bcd\u8868\u793a\u5f00\u62d3\u4e86\u6211\u4eec\u7684\u7279\u5f81\u7a7a\u95f4\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u597d\u5730\u8868\u8fbe\u5355\u8bcd\u5f7c\u6b64\u4fee\u9970\u7684\u65b9\u5f0f\u3002 \u901a\u8fc7\u5bf9\u6a21\u578b\u8bef\u5dee\u7684\u89c2\u5bdf\uff0c\u6211\u4eec\u53d1\u73b0\u5373\u4f7f\u662fMV- RNN\u4e5f\u4e0d\u80fd\u8868\u8fbe\u4e00\u5b9a\u7684\u5173\u7cfb\u3002\u6211\u4eec\u89c2\u5bdf\u5230\u4e09\u5927\u7c7b\u9519\u8bef\u3002 \u7b2c\u4e00\uff0cNegated Positives \u5426\u5b9a\u79ef\u6781\u3002\u5f53\u6211\u4eec\u8bf4\u4e00\u4e9b\u79ef\u6781\u7684\u4e1c\u897f\uff0c\u4f46\u4e00\u4e2a\u8bcd\u53d8\u6210\u4e86\u6d88\u6781\u7684\uff0c\u6a21\u578b\u4e0d\u80fd\u8861\u91cf\u4e00\u4e2a\u8bcd\u5f3a\u5927\u5230\u8db3\u4ee5\u7ffb\u8f6c\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\u3002\u4e0a\u56fe\u663e\u793a\u4e86\u8fd9\u6837\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5c06\u5355\u8bcd\u201cmost\u201d\u8f6c\u6362\u4e3a\u201cleast\u201d\u5e94\u8be5\u4f1a\u7ffb\u8f6c\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\uff0c\u4f46\u662fMV-RNN\u6ca1\u6709\u6210\u529f\u5730\u6355\u6349\u5230\u8fd9\u4e00\u70b9\u3002 \u7b2c\u4e8c\u7c7b\u9519\u8bef\u662f Negated Negative \u5426\u5b9a\u7684\u5426\u5b9a\u5f62\u5f0f\u3002\u6211\u4eec\u8bf4\u67d0\u4e8b\u4e0d\u574f\uff0c\u6216\u8005\u4e0d\u67af\u71e5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002MV-RNN\u4e0d\u80fd\u8bc6\u522b\u51fa\u201cnot\u201d\u8fd9\u4e2a\u8bcd\u4f1a\u4f7f\u60c5\u7eea\u4ece\u6d88\u6781\u53d8\u4e3a\u4e2d\u6027\u3002 \u6211\u4eec\u89c2\u5bdf\u5230\u7684\u6700\u540e\u4e00\u7c7b\u9519\u8bef\u662f\u4e0a\u56fe\u4e2d\u663e\u793a\u7684\u201cX but Y\u8fde\u63a5\u8bcd\u201d\u3002\u8fd9\u91cc\u7684 X \u53ef\u80fd\u662f\u8d1f\u7684\uff0c\u4f46\u5982\u679cY\u662f\u6b63\u7684\uff0c\u90a3\u4e48\u6a21\u578b\u5bf9\u53e5\u5b50\u7684\u60c5\u611f\u8f93\u51fa\u5e94\u8be5\u662f\u6b63\u7684\uff01MV-RNNs\u6b63\u5728\u4e0e\u4e4b\u6597\u4e89\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5bfb\u627e\u4e00\u79cd\u66f4\u5bcc\u8868\u73b0\u529b\u7684\u7ec4\u5408\u7b97\u6cd5\uff0c\u80fd\u591f\u5b8c\u5168\u6355\u6349\u8fd9\u4e9b\u7c7b\u578b\u7684\u9ad8\u7ea7\u6784\u6210\u3002 1.4 RNTNs (Recursive Neural Tensor Network) \u00b6 \u6211\u4eec\u5c06\u5728\u8fd9\u91cc\u8ba8\u8bba\u7684\u6700\u540e\u4e00\u4e2aRNN\u662f\u8fc4\u4eca\u4e3a\u6b62\u5728\u6211\u4eec\u6240\u603b\u7ed3\u7684\u4e09\u79cd\u9519\u8bef\u7c7b\u578b\u4e2d\u6548\u679c\u6700\u6210\u529f\u7684\u3002\u9012\u5f52\u795e\u7ecf\u5f20\u91cf\u7f51\u7edc Recursive Neural Tensor Network \u6d88\u9664\u4e86\u5355\u8bcd\u77e9\u9635\u7684\u6982\u5ff5\uff0c\u8fdb\u4e00\u6b65\u6d88\u9664\u4e86\u4f20\u7edf\u4eff\u5c04\u53d8\u6362\u7684 pre-tanh/sigmoid \u7684\u6982\u5ff5\u3002\u4e3a\u4e86\u7ec4\u5408\u4e24\u4e2a\u5355\u8bcd\u5411\u91cf\u6216\u77ed\u8bed\u5411\u91cf\uff0c\u6211\u4eec\u518d\u6b21\u5c06\u5b83\u4eec\u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u5411\u91cf \\(\\in \\mathbb{R}^{2 d}\\) \uff0c\u4f46\u662f\u6211\u4eec\u6ca1\u6709\u5148\u5c06\u5176\u653e\u5165\u4eff\u5c04\u51fd\u6570\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u975e\u7ebf\u6027\u7684\uff0c\u800c\u662f\u5148\u5c06\u5176\u653e\u5165\u4e00\u4e2a\u4e8c\u6b21\u65b9\u7a0b\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u975e\u7ebf\u6027\u7684\uff0c\u6bd4\u5982\uff1a $$ h^{(1)}=\\tanh \\left(x^{T} V x+W x\\right) $$ \u8fd9\u91cc\uff0c \\(V\\) \u662f\u4e00\u4e2a\u4e09\u9636\u5f20\u91cf \\(\\mathbb{R}^{2 d \\times 2 d \\times d}\\) \uff0c\u6211\u4eec\u8ba1\u7b97 \\(x^{T} V[i] x, \\forall i \\in[1,2, \\ldots d]\\) \u5f20\u91cf\u7684\u5207\u7247\u8f93\u51fa\u5411\u91cf \\(\\mathbb{R}^{d}\\) \u3002\u7136\u540e\u6211\u4eec\u52a0\u4e0a \\(Wx\\) \uff0c\u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u975e\u7ebf\u6027\u51fd\u6570\u3002\u4e8c\u6b21\u65b9\u663e\u793a\u4e86\u4e58\u6cd5\uff0c\u6211\u4eec\u786e\u5b9e\u53ef\u4ee5\u4f7f\u5f97\u8bcd\u5411\u91cf\u4e4b\u95f4\u8fdb\u884c\u4e58\u6cd5\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u7ef4\u62a4\u548c\u5b66\u4e60\u5355\u8bcd\u77e9\u9635\uff01 \u5982\u4e0a\u56fe\u6240\u793a\uff0cRNTN\u662f\u552f\u4e00\u80fd\u591f\u5728\u8fd9\u4e9b\u975e\u5e38\u96be\u7684\u6570\u636e\u96c6\u4e0a\u6210\u529f\u7684\u6a21\u578b\u3002 \u4e4b\u524d\u7684\u7b14\u8bb0\u4e2d\u8ba8\u8bba\u8fc7\u7684\u5377\u79ef\u795e\u7ecf\u7f51\u7edc(CNN) \u5728\u67d0\u4e9b\u65b9\u9762\u4f18\u4e8eRNTN\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u8f93\u5165\u89e3\u6790\u6811!\u201d 2 Constituency Parsing \u00b6 \u81ea\u7136\u8bed\u8a00\u7406\u89e3\u8981\u6c42\u80fd\u591f\u4ece\u8f83\u5927\u7684\u6587\u672c\u5355\u5143\u4e2d\u8f83\u5c0f\u7684\u90e8\u5206\u7684\u7406\u89e3\u4e2d\u63d0\u53d6\u610f\u4e49\u3002\u8fd9\u79cd\u63d0\u53d6\u8981\u6c42\u80fd\u591f\u7406\u89e3\u8f83\u5c0f\u7684\u90e8\u4ef6\u662f\u5982\u4f55\u7ec4\u5408\u5728\u4e00\u8d77\u7684\u3002\u5206\u6790\u53e5\u5b50\u53e5\u6cd5\u7ed3\u6784\u7684\u65b9\u6cd5\u4e3b\u8981\u6709\u4e24\u79cd\uff1a constituency parsing and dependency parsing \u6210\u5206\u53e5\u6cd5\u5206\u6790\u548c\u4f9d\u5b58\u5206\u6790\u3002\u4f9d\u5b58\u5206\u6790\u5728\u524d\u51e0\u8282\u8bfe\u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7(\u53c2\u89c1Note04)\u3002\u901a\u8fc7\u5728\u5355\u8bcd\u53ca\u5176\u4f9d\u8d56\u9879\u4e4b\u95f4\u5efa\u7acb\u4e8c\u8fdb\u5236\u975e\u5bf9\u79f0\u5173\u7cfb\uff0c\u7ed3\u6784\u663e\u793a\u4e86\u54ea\u4e2a\u5355\u8bcd\u4f9d\u8d56\u4e8e\u54ea\u4e2a\u5355\u8bcd\u3002\u73b0\u5728\u6211\u4eec\u5173\u6ce8\u6210\u5206\u53e5\u6cd5\u5206\u6790\uff0c\u5b83\u5c06\u5355\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u7684\u6210\u5206\u3002 \u6210\u5206\u53e5\u6cd5\u5206\u6790\u662f\u5c06\u4e00\u6bb5\u6587\u672c(\u4f8b\u5982\u4e00\u4e2a\u53e5\u5b50)\u5206\u6210\u5b50\u77ed\u8bed\u7684\u4e00\u79cd\u65b9\u6cd5\u3002\u6210\u5206\u53e5\u6cd5\u5206\u6790(\u4e5f\u79f0\u4e3a\u201c\u77ed\u8bed\u7ed3\u6784\u5206\u6790\u201d)\u7684\u76ee\u6807\u4e4b\u4e00\u662f\u8bc6\u522b\u6587\u672c\u4e2d\u7684\u6210\u5206\uff0c\u8fd9\u4e9b\u6210\u5206\u5728\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u4fe1\u606f\u65f6\u975e\u5e38\u6709\u7528\u3002\u901a\u8fc7\u5206\u6790\u53e5\u5b50\u540e\u4e86\u89e3\u6210\u5206\uff0c\u5c31\u6709\u53ef\u80fd\u751f\u6210\u8bed\u6cd5\u4e0a\u6b63\u786e\u7684\u7c7b\u4f3c\u53e5\u5b50\u3002 2.1 Constituent \u00b6 \u5728\u53e5\u6cd5\u5206\u6790\u4e2d\uff0c\u4e00\u4e2a\u6210\u5206\u53ef\u4ee5\u662f\u4e00\u4e2a\u5355\u8bcd\u6216\u77ed\u8bed\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5c42\u6b21\u7ed3\u6784\u4e2d\u7684\u4e00\u4e2a\u5355\u5143\u3002\u77ed\u8bed\u662f\u7531\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5355\u8bcd\u7ec4\u6210\u7684\u8bcd\u7ec4\uff0c\u56f4\u7ed5 a head lexical item \u4e00\u4e2a\u8bcd\u9996\u8bcd\u9879\uff0c\u5728\u4e00\u4e2a\u53e5\u5b50\u4e2d\u4f5c\u4e3a\u4e00\u4e2a\u5355\u4f4d\u4f7f\u7528\u3002\u4f5c\u4e3a\u4e00\u4e2a\u77ed\u8bed\uff0c\u4e00\u7ec4\u8bcd\u5e94\u8be5\u5728\u53e5\u5b50\u4e2d\u53d1\u6325\u7279\u5b9a\u7684\u4f5c\u7528\u3002\u6b64\u5916\uff0c\u4e00\u7ec4\u8bcd\u53ef\u4ee5\u4e00\u8d77\u79fb\u52a8\u6216\u66ff\u6362\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u53e5\u5b50\u5e94\u8be5\u4fdd\u6301\u6d41\u5229\u548c\u8bed\u6cd5\u3002 \u6211\u4eec\u7528\u8f83\u5c0f\u5143\u7d20\u7684\u7b26\u53f7\u7ec4\u5408\u6765\u89e3\u91ca\u5927\u7684\u6587\u672c\u5355\u5143\u3002\u8fd9\u4e9b\u8f83\u5c0f\u7684\u5143\u7d20\u53ef\u4ee5\u5728\u4fdd\u6301\u76f8\u540c\u542b\u4e49\u7684\u540c\u65f6\u8fdb\u884c\u66f4\u6539\uff0c\u5982\u4e0b\u9762\u7684\u793a\u4f8b\u6240\u793a\u3002 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u53e5\u5b50\u5305\u542b\u540d\u8bcd\u77ed\u8bed\uff1awonderful CS224N\u201d I want to be enrolled in the wonderful CS224N! \u6211\u4eec\u901a\u8fc7\u79fb\u52a8\u6574\u4e2a\u77ed\u8bed\u5230\u6700\u524d\u9762\u6765\u91cd\u5199\u8fd9\u4e2a\u53e5\u5b50 The wonderful CS224N I want to be enrolled in \u6216\u8005\u8fd9\u4e2a\u77ed\u8bed\u53ef\u4ee5\u88ab\u4e00\u4e2a\u7c7b\u4f3c\u529f\u80fd\u548c\u610f\u4e49\u7684\u6210\u5206\u6240\u66ff\u4ee3\uff0c\u4f8b\u5982\"great CS course in Stanford about NLP and Deep Learning\u201d I want to be enrolled in the great CS course in Stanford about NLP and Deep Learning! \u5bf9\u4e8e\u6210\u5206\u53e5\u6cd5\u5206\u6790\uff0c\u57fa\u672c\u5b50\u53e5\u7ed3\u6784\u88ab\u7406\u89e3\u4e3a\uff0c\u5b50\u53e5\u5206\u4e3a\u4e3b\u8bed(\u540d\u8bcd\u77ed\u8bedNP)\u548c\u8c13\u8bed(\u52a8\u8bcd\u77ed\u8bedVP)\u7684\u4e8c\u5143\u5212\u5206\uff0c\u8868\u8fbe\u5982\u4e0b\u89c4\u5219\u3002\u5b50\u53e5\u7684\u4e8c\u5143\u5212\u5206\u5bfc\u81f4\u4e00\u5bf9\u4e00\u6216\u4e00\u5bf9\u591a\u901a\u4fe1\u3002\u5bf9\u4e8e\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u6811\u7ed3\u6784\u4e2d\u90fd\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\u3002 \\(\\mathrm{S} \\rightarrow \\mathrm{NP} \\quad \\mathrm{VP}\\) \u4e8b\u5b9e\u4e0a\uff0c\u89e3\u6790\u7684\u8fc7\u7a0b\u8bf4\u660e\u4e86\u67d0\u4e9b\u7c7b\u4f3c\u7684\u89c4\u5219\u3002\u6211\u4eec\u4ece\u53e5\u5b50\u7b26\u53f7 S \u5f00\u59cb\u63a8\u5bfc\u89c4\u5219\uff0c\u4f9d\u6b21\u5bf9\u77ed\u8bed\u7ed3\u6784\u89c4\u5219\u8fdb\u884c\u53e0\u52a0\uff0c\u6700\u540e\u5e94\u7528\u66ff\u4ee3\u89c4\u5219\u6765\u4f7f\u7528\u62bd\u8c61\u7b26\u53f7\u4ee3\u66ff\u5b9e\u9645\u5355\u8bcd\u3002\u6839\u636e\u63d0\u53d6\u89c4\u5219\uff0c\u53ef\u4ee5\u751f\u6210\u76f8\u4f3c\u7684\u53e5\u5b50\u3002\u5982\u679c\u89c4\u5219\u6b63\u786e\uff0c\u90a3\u4e48\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4ea7\u751f\u7684\u4efb\u4f55\u53e5\u5b50\u90fd\u5e94\u8be5\u5728\u8bed\u6cd5\u4e0a\u6b63\u786e\u3002\u7136\u800c\uff0c\u751f\u6210\u7684\u53e5\u5b50\u5728\u8bed\u6cd5\u4e0a\u53ef\u80fd\u662f\u6b63\u786e\u7684\uff0c\u4f46\u5728\u8bed\u4e49\u4e0a\u5374\u662f\u8352\u8c2c\u7684\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u4f8b\u5b50: Colorless green ideas sleep furiously 2.2 Constituency Parse Tree \u00b6 \u6709\u8da3\u7684\u662f\uff0c\u5728\u81ea\u7136\u8bed\u8a00\u4e2d\uff0c\u8fd9\u4e9b\u6210\u5206\u5f88\u53ef\u80fd\u5f7c\u6b64\u5d4c\u5957\u5728\u4e00\u8d77\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u77ed\u8bed\u7684\u81ea\u7136\u8868\u793a\u5f62\u5f0f\u662f\u6811\u3002\u901a\u5e38\u6211\u4eec\u4f7f\u7528\u6210\u5206\u89e3\u6790\u6811\u6765\u6f14\u793a\u89e3\u6790\u8fc7\u7a0b\u3002\u57fa\u4e8e\u7ed3\u6784\u8bed\u6cd5\u7684\u6210\u5206\u89e3\u6790\u6811\u53ef\u4ee5\u533a\u5206\u7ec8\u7aef\u8282\u70b9\u548c\u975e\u7ec8\u7aef\u8282\u70b9\u3002\u6811\u4e2d\u7684\u975e\u7ec8\u7ed3\u7b26\u88ab\u6807\u8bb0\u4e3a\u77ed\u8bed\u7684\u7c7b\u578b(\u4f8b\u5982\u540d\u8bcd\u77ed\u8bed)\uff0c\u7ec8\u7ed3\u7b26\u662f\u53e5\u5b50\u4e2d\u7684\u51c6\u786e\u5355\u8bcd\u3002\u4ee5 \u201cJohn hit the ball\u201d \u4e3a\u4f8b\uff0c\u82f1\u8bed\u53e5\u5b50\u7684\u53e5\u6cd5\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6211\u4eec\u6709\u4e00\u4e2a\u89e3\u6790\u6811\uff0c\u4ece\u8868\u793a\u6574\u4e2a\u53e5\u5b50\u7684\u6839S\u5f00\u59cb\uff0c\u5230\u8868\u793a\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u7684\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u7ed3\u675f\u3002\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u7f29\u5199\uff1a S \u4ee3\u8868\u53e5\u5b50\uff0c\u6700\u9ad8\u7ea7\u7684\u7ed3\u6784 NP \u4ee3\u8868\u540d\u8bcd\u77ed\u8bed\uff0c\u5305\u62ec\u53e5\u5b50\u7684\u4e3b\u8bed\u548c\u5bbe\u8bed VP \u4ee3\u8868\u52a8\u8bcd\u77ed\u8bed\uff0c\u5145\u5f53\u8c13\u8bed V \u4ee3\u8868\u52a8\u8bcd D \u4ee3\u8868\u9650\u5b9a\u8bcd\uff0c\u4f8b\u5982 \u201cthe\u201d N \u4ee3\u8868\u540d\u8bcd \u6ce8\u610f\uff1a\u56de\u5230\u53e5\u5b50\u8868\u793a\uff0c\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u89e3\u6790\u6811\u5462\uff1f\u6211\u4eec\u5728\u8fd9\u4e00\u7cfb\u5217\u8bfe\u5802\u7b14\u8bb0\u4e2d\u89c2\u5bdf\u5230\u7684RNNs\u4f9d\u8d56\u4e8e\u8fd9\u6837\u7684\u521d\u59cb\u89e3\u6790\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u7684\u662f\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u800c\u8fd9\u4e2a\u77ed\u8bed\u7684\u4e0a\u4e0b\u6587\u5728\u5b83\u7684\u53f3\u8fb9\u4f1a\u600e\u6837\uff1f\u5982\u679c\u6211\u4eec\u53ea\u5728\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u4e0a\u5e94\u7528Softmax\uff0c\u90a3\u4e48\u6700\u540e\u51e0\u4e2a\u5b57\u5c06\u5bf9\u8f93\u51fa\u4ea7\u751f\u4e0d\u6210\u6bd4\u4f8b\u7684\u5927\u5f71\u54cd\uff0c\u4f8b\u5982\uff0c\u5206\u7c7b\u3002\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u6b63\u5982\u4e4b\u524d\u7684\u8bb2\u4e49\u6240\u8ff0\u3002 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"18 Tree Recursive Neural Networks, Constituency Parsing, and Sentiment"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#lecture-18-tree-recursive-neural-networks-constituency-parsing-and-sentiment","text":"Lecture Plan Motivation: Compositionality and Recursion Structure prediction with simple Tree RNN: Parsing Backpropagation through Structure More complex TreeRNN units (35 mins) Other uses of tree-recursive neural nets (5 mins) Institute for Human-Centered Artificial Intelligence","title":"Lecture 18 Tree Recursive Neural Networks, Constituency Parsing, and Sentiment"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#1-the-spectrum-of-language-in-cs","text":"\u8bcd\u888b\u6a21\u578b \u548c \u590d\u6742\u5f62\u5f0f\u7684\u8bed\u8a00\u8868\u8fbe\u7ed3\u6784 Semantic interpretation of language \u2013 Not just word vectors \u6211\u4eec\u600e\u6837\u624d\u80fd\u5f04\u6e05\u695a\u66f4\u5927\u7684\u77ed\u8bed\u7684\u542b\u4e49\uff1f The snowboarder is leaping over a mogul A person on a snowboard jumps into the air The snowboarder \u5728\u8bed\u4e49\u4e0a\u76f8\u5f53\u4e8e A person on a snowboard \uff0c\u4f46\u5b83\u4eec\u7684\u5b57\u957f\u4e0d\u4e00\u6837 \u4eba\u4eec\u4e4b\u6240\u4ee5\u53ef\u4ee5\u7406\u89e3 A person on a snowboard \uff0c\u662f\u56e0\u4e3a the principle of compositionality \u7ec4\u5408\u539f\u5219 \u4eba\u4eec\u77e5\u9053\u6bcf\u4e2a\u5355\u8bcd\u7684\u610f\u601d\uff0c\u4ece\u800c\u77e5\u9053\u4e86 on a snowboard \u7684\u610f\u601d \u77e5\u9053\u7ec4\u4ef6\u7684\u542b\u4e49\u5e76\u5c06\u4ed6\u4eec\u7ec4\u5408\u6210\u4e3a\u66f4\u5927\u7684\u7ec4\u4ef6 \u4eba\u4eec\u901a\u8fc7\u8f83\u5c0f\u5143\u7d20\u7684**\u8bed\u4e49\u6210\u5206**\u6765\u89e3\u91ca\u8f83\u5927\u6587\u672c\u5355\u5143\u7684\u610f\u4e49 - \u5b9e\u4f53\uff0c\u63cf\u8ff0\u6027\u672f\u8bed\uff0c\u4e8b\u5b9e\uff0c\u8bba\u70b9\uff0c\u6545\u4e8b \u8bed\u8a00\u7406\u89e3 - \u548c\u4eba\u5de5\u667a\u80fd - \u9700\u8981\u80fd\u591f\u901a\u8fc7\u4e86\u89e3\u8f83\u5c0f\u7684\u90e8\u5206\u6765\u7406\u89e3\u66f4\u5927\u7684\u4e8b\u7269 \u6211\u4eec\u62e5\u6709\u5c06\u8f83\u5c0f\u7684\u90e8\u5206\u7ec4\u5408\u8d77\u6765\u5236\u4f5c\u51fa\u66f4\u5927\u4e1c\u897f\u7684\u80fd\u529b Are languages recursive? \u8ba4\u77e5\u4e0a\u6709\u70b9\u4e89\u8bae\uff08\u9700\u8981\u524d\u5f80\u65e0\u9650\uff09 \u4f46\u662f\uff1a\u9012\u5f52\u5bf9\u4e8e\u63cf\u8ff0\u8bed\u8a00\u662f\u5f88\u81ea\u7136\u7684 [The person standing next to [the man from [the company that purchased [the firm that you used to work at]]]] \u5305\u542b\u540d\u8bcd\u77ed\u8bed\u7684\u540d\u8bcd\u77ed\u8bed\uff0c\u5305\u542b\u540d\u8bcd\u77ed\u8bed \u5b83\u662f\u8bed\u8a00\u7ed3\u6784\u7684\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5148\u9a8c 2. Building on Word Vector Space Models the country of my birth the place where I was born \u6211\u4eec\u600e\u6837\u8868\u793a\u66f4\u957f\u77ed\u8bed\u7684\u610f\u601d\u5462\uff1f \u901a\u8fc7\u5c06\u4ed6\u4eec\u6620\u5c04\u5230\u76f8\u540c\u7684\u5411\u91cf\u7a7a\u95f4\uff01 How should we map phrases into a vector space? \u57fa\u4e8e\u7ec4\u5408\u539f\u5219\uff0c\u4f7f\u7528\u5355\u8bcd\u7684\u542b\u4e49\u548c\u7ec4\u5408\u4ed6\u4eec\u7684\u89c4\u5219\uff0c\u5f97\u5230\u4e00\u4e2a\u53e5\u5b50\u7684\u542b\u4e49\u5411\u91cf \u540c\u65f6\u5b66\u4e60\u89e3\u6790\u6811\u4ee5\u53ca\u7ec4\u5408\u5411\u91cf\u8868\u793a Constituency Sentence Parsing: What we want Learn Structure and Representation \u6211\u4eec\u9700\u8981\u80fd\u591f\u5b66\u4e60\u5982\u4f55\u89e3\u6790\u51fa\u6b63\u786e\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u5e76\u5b66\u4e60\u5982\u4f55\u57fa\u4e8e\u8bed\u6cd5\u7ed3\u6784\uff0c\u6765\u6784\u5efa\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a Recursive vs. recurrent neural networks \u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u9700\u8981\u4e00\u4e2a\u6811\u7ed3\u6784 \u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0d\u80fd\u5728\u6ca1\u6709\u524d\u7f00\u4e0a\u4e0b\u6587\u7684\u60c5\u51b5\u4e0b\u6355\u6349\u77ed\u8bed\uff0c\u5e76\u4e14\u7ecf\u5e38\u5728\u6700\u7ec8\u7684\u5411\u91cf\u4e2d\u8fc7\u5ea6\u6355\u6349\u6700\u540e\u4e00\u4e2a\u5355\u8bcd Recursive Neural Networks for Structure Prediction \u5982\u679c\u6211\u4eec\u81ea\u4e0a\u800c\u4e0b\u7684\u5de5\u4f5c\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u5e95\u5c42\u6709\u5355\u8bcd\u5411\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u8981\u9012\u5f52\u5730\u8ba1\u7b97\u66f4\u5927\u6210\u5206\u7684\u542b\u4e49 \u8f93\u5165\uff1a\u4e24\u4e2a\u5019\u9009\u7684\u5b50\u8282\u70b9\u7684\u8868\u793a \u8f93\u51fa\uff1a \u4e24\u4e2a\u8282\u70b9\u88ab\u5408\u5e76\u540e\u7684\u8bed\u4e49\u8868\u793a \u65b0\u8282\u70b9\u7684\u5408\u7406\u7a0b\u5ea6 Recursive Neural Network Definition Parsing a sentence with an RNN (greedily) Parsing a sentence \u81ea\u5de6\u5411\u53f3\u91cd\u590d\u904d\u5386\uff0c\u6bcf\u6b21\u5c06\u5f97\u5206\u6700\u9ad8\u7684\u4e24\u8005\u7ec4\u5408\u5728\u4e00\u8d77 Max-Margin Framework - Details \u6811\u7684\u5f97\u5206\u662f\u901a\u8fc7\u6bcf\u4e2a\u8282\u70b9\u7684\u89e3\u6790\u51b3\u7b56\u5f97\u5206\u7684\u603b\u548c\u6765\u8ba1\u7b97\u7684\uff1a \\[ s(x, y)=\\sum_{n \\in n o d e (y)} s_{n} \\] x \u662f\u53e5\u5b50\uff0cy \u662f\u89e3\u6790\u6811 \u7c7b\u4f3c\u4e8e\u6700\u5927\u8fb9\u8ddd\u89e3\u6790\uff08Taskar et al.2004\uff09\uff0c\u4e00\u4e2a\u53d7\u76d1\u7763\u7684\u6700\u5927\u8fb9\u9645\u76ee\u6807 \\[ J=\\sum_{i} s\\left(x_{i}, y_{i}\\right)-\\max _{y \\in A\\left(x_{i}\\right)}\\left(s\\left(x_{i}, y\\right)+\\Delta\\left(y, y_{i}\\right)\\right) \\] \u635f\u5931 \\(\\Delta\\left(y, y_{i}\\right)\\) \u60e9\u7f5a\u6240\u6709\u4e0d\u6b63\u786e\u7684\u51b3\u7b56 \u7ed3\u6784\u641c\u7d22 \\(A(x)\\) \u662f\u8d2a\u5a6a\u7684\uff08\u6bcf\u6b21\u52a0\u5165\u6700\u4f73\u8282\u70b9\uff09 \u76f8\u53cd\uff1a\u4f7f\u7528 Beam search \u641c\u7d22\u56fe Scene Parsing \u548c\u7ec4\u5408\u7c7b\u4f3c\u7684\u51c6\u5219 \u573a\u666f\u56fe\u50cf\u7684\u542b\u4e49\u4e5f\u662f\u8f83\u5c0f\u533a\u57df\u7684\u51fd\u6570 \u5b83\u4eec\u5982\u4f55\u7ec4\u5408\u6210\u90e8\u5206\u4ee5\u5f62\u6210\u66f4\u5927\u7684\u5bf9\u8c61 \u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u76f8\u4e92\u4f5c\u7528 Algorithm for Parsing Images Same Recursive Neural Network as for natural language parsing! (Socher et al. ICML 2011) Multi-class segmentation","title":"1. The spectrum of language in CS"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#3-backpropagation-through-structure","text":"Introduced by Goller & Ku\u0308chler (1996) \u548c\u901a\u7528\u7684\u53cd\u5411\u4f20\u64ad\u7684\u89c4\u5219\u76f8\u540c $$ \\delta {(l)}=\\left(\\left(W \\right)^{T} \\delta^{(l+1)}\\right) \\circ f {\\prime}\\left(z \\right), \\quad \\quad \\quad \\frac{\\partial}{\\partial W^{(l)}} E_{R}=\\delta {(l+1)}\\left(a \\right)^{T}+\\lambda W^{(l)} $$ \u9012\u5f52\u548c\u6811\u7ed3\u6784\u5bfc\u81f4\u7684\u8ba1\u7b97\uff1a \u4ece\u6240\u6709\u8282\u70b9\uff08\u5982RNN\uff09\u6c42\u548cW\u7684\u5bfc\u6570 \u5728\u6bcf\u4e2a\u8282\u70b9\u5904\u62c6\u5206\u5bfc\u6570\uff08\u5bf9\u4e8e\u6811\uff09 \u4ece\u7236\u8282\u70b9\u548c\u8282\u70b9\u672c\u8eab\u6dfb\u52a0\u9519\u8bef\u6d88\u606f Discussion: Simple TreeRNN \u4f7f\u7528\u5355\u77e9\u9635TreeRNN\u7684\u7ed3\u679c \u5355\u4e2a\u6743\u91cd\u77e9\u9635TreeRNN\u53ef\u4ee5\u6355\u83b7\u4e00\u4e9b\u73b0\u8c61\u4f46\u4e0d\u9002\u5408\u66f4\u590d\u6742\u7684\u73b0\u8c61\u4ee5\u53ca\u66f4\u9ad8\u9636\u7684\u6784\u6210\u548c\u89e3\u6790\u957f\u53e5 \u8f93\u5165\u8bcd\u4e4b\u95f4\u6ca1\u6709\u771f\u6b63\u7684\u4ea4\u4e92 \u7ec4\u5408\u51fd\u6570\u5bf9\u4e8e\u6240\u6709\u53e5\u6cd5\u7c7b\u522b\uff0c\u6807\u70b9\u7b26\u53f7\u7b49\u90fd\u662f\u76f8\u540c\u7684","title":"3. Backpropagation Through Structure"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#4-version-2-syntactically-untied-rnn","text":"[Socher, Bauer, Manning, Ng 2013] \u7b26\u53f7\u7684\u4e0a\u4e0b\u6587\u65e0\u5173\u7684\u8bed\u6cd5\uff08Context Free Grammar CFG\uff09\u4e3b\u5e72\u662f\u8db3\u4ee5\u6ee1\u8db3\u57fa\u672c\u7684\u53e5\u6cd5\u7ed3\u6784 \u6211\u4eec\u4f7f\u7528\u5b50\u5143\u7d20\u7684\u79bb\u6563\u53e5\u6cd5\u7c7b\u522b\u6765\u9009\u62e9\u7ec4\u5408\u77e9\u9635 \u5bf9\u4e8e\u4e0d\u540c\u7684\u8bed\u6cd5\u73af\u5883\uff0cTreeRNN\u53ef\u4ee5\u9488\u5bf9\u4e0d\u540c\u7684\u7ec4\u5408\u77e9\u9635\u505a\u5f97\u66f4\u597d \u7ed3\u679c\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u8bed\u4e49 \u5de6\u8fb9 RNN \u662f\u4f7f\u7528\u6982\u7387\u7684\u4e0a\u4e0b\u6587\u65e0\u5173\u7684\u8bed\u6cd5\u89e3\u6790\uff0c\u4e3a\u53e5\u5b50\u751f\u6210\u53ef\u80fd\u7684\u6811\u7ed3\u6784 \u53f3\u8fb9 SU-RNN \u662f\u8bed\u6cd5\u89e3\u5f00\u7684\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u6b64\u65f6\u6bcf\u4e2a\u8282\u70b9\u548c\u5e8f\u5217\u90fd\u6709\u4e00\u4e2a\u7c7b\u522b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5bf9\u5e94\u4e0d\u540c\u7c7b\u522b\u7684\u77e9\u9635\u7ec4\u5408\u8d77\u6765\uff0c\u4f8b\u5982\u5c06\u7c7b\u522b B \u548c\u7c7b\u522b C \u7684\u77e9\u9635\u7ec4\u5408\u8d77\u6765\u4f5c\u4e3a\u672c\u6b21\u8ba1\u7b97\u7684\u6743\u91cd\u77e9\u9635\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6743\u91cd\u77e9\u9635\u662f\u66f4\u7b26\u5408\u53e5\u5b50\u7ed3\u6784\u7684 Compositional Vector Grammars \u95ee\u9898\uff1a\u901f\u5ea6\u3002Beam search \u4e2d\u7684\u6bcf\u4e2a\u5019\u9009\u5206\u6570\u90fd\u9700\u8981\u4e00\u6b21\u77e9\u9635\u5411\u91cf\u4e58\u6cd5 \u89e3\u51b3\u65b9\u6848\uff1a\u4ec5\u9488\u5bf9\u6765\u81ea\u66f4\u7b80\u5355\uff0c\u66f4\u5feb\u901f\u6a21\u578b(Probabilistic Context Free Grammar (PCFG))\u7684\u6811\u7684\u5b50\u96c6\u8ba1\u7b97\u5f97\u5206 \u4fee\u526a\u975e\u5e38\u4e0d\u53ef\u80fd\u7684\u901f\u5ea6\u5019\u9009\u4eba \u4e3a\u6bcf\u4e2a beam \u5019\u9009\u8005\u63d0\u4f9b\u5b50\u53e5\u7684\u7c97\u7565\u8bed\u6cd5\u7c7b\u522b \u7ec4\u5408\u77e2\u91cf\u8bed\u6cd5= PCFG + TreeRNN Related Work for parsing \u4ea7\u751f\u7684 CVG Parser \u4e0e\u4ee5\u524d\u6269\u5c55PCFG\u89e3\u6790\u5668\u7684\u5de5\u4f5c\u6709\u5173 Klein and Manning (2003a)\uff1a\u624b\u5de5\u7279\u5f81\u5de5\u7a0b Petrov et al. (2006)\uff1a\u5206\u89e3\u548c\u5408\u5e76\u53e5\u6cd5\u7c7b\u522b\u7684\u5b66\u4e60\u7b97\u6cd5 \u8bcd\u6c47\u5316\u89e3\u6790\u5668(Collins, 2003; Charniak, 2000)\uff1a\u7528\u8bcd\u6c47\u9879\u63cf\u8ff0\u6bcf\u4e2a\u7c7b\u522b Hall and Klein (2012) \u5728\u4e00\u4e2a\u56e0\u5f0f\u89e3\u6790\u5668\u4e2d\u7ed3\u5408\u4e86\u51e0\u4e2a\u8fd9\u6837\u7684\u6ce8\u91ca\u65b9\u6848 CVGs \u5c06\u8fd9\u4e9b\u60f3\u6cd5\u4ece\u79bb\u6563\u8868\u793a\u6269\u5c55\u5230\u66f4\u4e30\u5bcc\u7684\u8fde\u7eed\u8868\u8fbe SU-RNN / CVG [Socher, Bauer, Manning, Ng 2013] Learns soft notion of head words \u521d\u59cb\u5316\uff1a \\(W^{(\\cdot)}=0.5\\left[I_{n \\times n} I_{n \\times n} 0_{n \\times 1}\\right]+\\epsilon\\) \u521d\u59cb\u5316\u4e3a\u4e00\u5bf9\u5bf9\u89d2\u77e9\u9635 \u5b66\u4e60\u7684\u662f\u4e00\u4e2a\u77ed\u8bed\u4e2d\u54ea\u4e2a\u5b50\u8282\u70b9\u662f\u91cd\u8981\u7684 Analysis of resulting vector representations \u6240\u6709\u6570\u636e\u5747\u6839\u636e\u5b63\u8282\u53d8\u5316\u8fdb\u884c\u8c03\u6574 \u6240\u6709\u6570\u5b57\u90fd\u6839\u636e\u5b63\u8282\u6027\u6ce2\u52a8\u8fdb\u884c\u8c03\u6574 \u8c03\u6574\u6240\u6709\u6570\u5b57\u4ee5\u6d88\u9664\u901a\u5e38\u7684\u5b63\u8282\u6027\u6a21\u5f0f Knight-Ridder\u4e0d\u4f1a\u8bc4\u8bba\u8fd9\u4e2a\u63d0\u8bae Harsco declined to say what country placed the order Coastal wouldn\u2019t disclose the terms Sales grew almost 7% to \\(\\text{\\$UNK m.}\\) from \\(\\text{\\$UNK m.}\\) Sales rose more than 7% to $94.9 m. from $88.3 m. Sales surged 40% to UNK b. yen from UNK b. Version 3: Compositionality Through Recursive Matrix-Vector Spaces [Socher, Huval, Bhat, Manning, & Ng, 2012] \u4e4b\u524d\uff1a \\(p=\\tanh \\left(W\\left[\\begin{array}{l}{c_{1}} \\\\ {c_{2}}\\end{array}\\right]+b\\right)\\) \uff0c \\(c_1\\) \u548c \\(c_2\\) \u4e4b\u95f4\u5e76\u6ca1\u6709\u76f8\u4e92\u5f71\u54cd \u4f7f\u7ec4\u5408\u51fd\u6570\u66f4\u5f3a\u5927\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u89e3\u5f00\u6743\u91cd W \u4f46\u662f\uff0c\u5982\u679c\u5355\u8bcd\u4e3b\u8981\u4f5c\u4e3a\u8fd0\u7b97\u7b26\uff0c\u4f8b\u5982 \u201cvery\u201d in \u201cvery good\u201d\uff0c\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u662f\u7528\u4e8e\u589e\u52a0 good \u7684\u89c4\u6a21\u7684\u8fd0\u7b97\u7b26 \u63d0\u6848\uff1a\u65b0\u7684\u7ec4\u5408\u51fd\u6570 \u95ee\u9898\u662f\u5982\u4f55\u5b9a\u4e49\u5462\uff0c\u56e0\u4e3a\u4e0d\u77e5\u9053 \\(c_1\\) \u548c \\(c_2\\) \u54ea\u4e2a\u662f operator\uff0c\u6bd4\u5982 very good \uff0c\u5c31\u5e94\u8be5\u8bb2 very \u89c6\u4e3a\u4f5c\u7528\u5728 good \u7684\u77e9\u9635\u4e0a\u7684\u5411\u91cf Compositionality Through Recursive Matrix-Vector Recursive Neural Networks \u6bcf\u4e2a\u5355\u8bcd\u90fd\u62e5\u6709\u4e00\u4e2a\u5411\u91cf\u610f\u4e49\u548c\u4e00\u4e2a\u77e9\u9635\u610f\u4e49 Matrix-vector RNNs [Socher, Huval, Bhat, Manning, & Ng, 2012] \u5de6\u4fa7\u8ba1\u7b97\u5f97\u5230\u5408\u5e76\u540e\u7684\u5411\u91cf\u610f\u4e49 \u53f3\u4fa7\u8ba1\u7b97\u5f97\u5230\u5408\u5e76\u540e\u7684\u77e9\u9635\u610f\u4e49 \u53ef\u4ee5\u6355\u83b7\u8fd0\u7b97\u7b26\u8bed\u4e49\uff0c\u5373\u4e2d\u4e00\u4e2a\u5355\u8bcd\u4fee\u9970\u4e86\u53e6\u4e00\u4e2a\u5355\u8bcd\u7684\u542b\u4e49 Predicting Sentiment Distributions \u8bed\u8a00\u4e2d\u975e\u7ebf\u6027\u7684\u597d\u4f8b\u5b50 Classification of Semantic Relationships MV-RNN \u53ef\u4ee5\u5b66\u4e60\u5230\u5927\u7684\u53e5\u6cd5\u4e0a\u4e0b\u6587\u4f20\u8fbe\u8bed\u4e49\u5173\u7cfb\u5417\uff1f \u4e3a\u5305\u62ec\u4e24\u9879\u7684\u6700\u5c0f\u6210\u5206\u6784\u5efa\u5355\u4e2a\u7ec4\u5408\u8bed\u4e49 \u95ee\u9898\uff1a\u53c2\u6570\u91cf\u8fc7\u5927\uff0c\u5e76\u4e14\u83b7\u5f97\u77ed\u8bed\u7684\u77e9\u9635\u610f\u4e49\u7684\u65b9\u5f0f\u4e0d\u591f\u597d Version 4: Recursive Neural Tensor Network Socher, Perelygin, Wu, Chuang, Manning, Ng, and Potts 2013 \u6bd4 MV-RNN \u66f4\u5c11\u7684\u53c2\u6570\u91cf \u5141\u8bb8\u4e24\u4e2a\u5355\u8bcd\u6216\u77ed\u8bed\u5411\u91cf\u4e58\u6cd5\u4ea4\u4e92 Beyond the bag of words: Sentiment detection \u4e00\u6bb5\u6587\u5b57\u7684\u8bed\u8c03\u662f\u79ef\u6781\u7684\uff0c\u6d88\u6781\u7684\u8fd8\u662f\u4e2d\u6027\u7684\uff1f \u67d0\u79cd\u7a0b\u5ea6\u4e0a\u60c5\u7eea\u5206\u6790\u662f\u5bb9\u6613\u7684 \u8f83\u957f\u6587\u6863\u7684\u68c0\u6d4b\u7cbe\u5ea6~90\uff05\uff0c\u4f46\u662f Stanford Sentiment Treebank 215,154 phrases labeled in 11,855 sentences \u53ef\u4ee5\u771f\u7684\u8bad\u7ec3\u548c\u6d4b\u8bd5\u7ec4\u5408 http://nlp.stanford.edu:8080/sentiment/ Better Dataset Helped All Models \u4e25\u91cd\u7684\u5426\u5b9a\u7684\u6848\u4f8b\u4ecd\u7136\u5927\u591a\u5224\u65ad\u9519\u8bef\u7684 \u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u66f4\u5f3a\u5927\u7684\u6a21\u578b\uff01 \u60f3\u6cd5\uff1a\u5141\u8bb8\u8f7d\u4f53\u7684\u52a0\u6027\u548c\u4ecb\u5bfc\u7684\u4e58\u6cd5\u76f8\u4e92\u4f5c\u7528 \u5728\u6811\u4e2d\u4f7f\u7528\u7ed3\u679c\u5411\u91cf\u4f5c\u4e3a\u903b\u8f91\u56de\u5f52\u7684\u5206\u7c7b\u5668\u7684\u8f93\u5165 \u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u8054\u5408\u8bad\u7ec3\u6240\u6709\u6743\u91cd \u56de\u5230\u6700\u521d\u7684\u4f7f\u7528\u5411\u91cf\u8868\u793a\u5355\u8bcd\u7684\u610f\u4e49\uff0c\u4f46\u4e0d\u662f\u4ec5\u4ec5\u5c06\u4e24\u4e2a\u8868\u793a\u5355\u8bcd\u542b\u4e49\u7684\u5411\u91cf\u76f8\u4e92\u4f5c\u7528\uff0c\u5de6\u4e0a\u56fe\u662f\u5728\u4e2d\u95f4\u63d2\u5165\u4e00\u4e2a\u77e9\u9635\uff0c\u4ee5\u53cc\u7ebf\u6027\u7684\u65b9\u5f0f\u505a\u6ce8\u610f\u529b\u5e76\u5f97\u5230\u4e86\u6ce8\u610f\u529b\u5f97\u5206\u3002\u5373\u4ee4\u4e24\u4e2a\u5355\u8bcd\u7684\u5411\u91cf\u76f8\u4e92\u4f5c\u7528\u5e76\u4e14\u53ea\u4ea7\u751f\u4e00\u4e2a\u6570\u5b57\u4f5c\u4e3a\u8f93\u51fa \u5982\u4e0a\u4e2d\u56fe\u6240\u793a\uff0c\u6211\u4eec\u53ef\u4ee5\u62e5\u6709\u4e09\u7ef4\u77e9\u9635\uff0c\u5373\u591a\u5c42\u7684\u77e9\u9635\uff08\u4e8c\u7ef4\uff09\uff0c\u4ece\u800c\u5f97\u5230\u4e86\u4e24\u4e2a\u5f97\u5206 \u4f7f\u7528 softmax \u505a\u5206\u7c7b Positive/Negative Results on Treebank Classifying Sentences: Accuracy improves to 85.4 Experimental Results on Treebank RNTN \u53ef\u4ee5\u6355\u6349\u7c7b\u4f3c X but Y \u7684\u7ed3\u6784 RNTN accuracy of 72%, compared to MV-RNN (65%), biword NB (58%) and RNN (54%) Negation Results \u53cc\u91cd\u5426\u5b9a\u65f6\uff0c\u79ef\u6781\u53cd\u5e94\u5e94\u8be5\u4e0a\u5347 Demo: http://nlp.stanford.edu:8080/sentiment/ Version 5: Improving Deep Learning Semantic Representations using a TreeLSTM [Tai et al., ACL 2015; also Zhu et al. ICML 2015] \u76ee\u6807\uff1a \u4ecd\u8bd5\u56fe\u5c06\u53e5\u5b50\u7684\u542b\u4e49\u8868\u793a\u4e3a\uff08\u9ad8\u7ef4\uff0c\u8fde\u7eed\uff09\u5411\u91cf\u7a7a\u95f4\u4e2d\u7684\u4f4d\u7f6e \u4e00\u79cd\u51c6\u786e\u5904\u7406\u8bed\u4e49\u6784\u6210\u548c\u53e5\u5b50\u542b\u4e49\u7684\u65b9\u5f0f \u5c06\u5e7f\u6cdb\u4f7f\u7528\u7684\u94fe\u5f0f\u7ed3\u6784LSTM\u63a8\u5e7f\u5230\u6811\u7ed3\u6784 Long Short-Term Memory (LSTM) Units for Sequential Composition \u95e8\u662f \\([0,1]^{d}\\) \u7684\u5411\u91cf\uff0c\u7528\u4e8e\u9010\u5143\u7d20\u4e58\u79ef\u7684\u8f6f\u63a9\u853d\u5143\u7d20 Tree-Structured Long Short-Term Memory Networks [Tai et al., ACL 2015] Tree-structured LSTM \u5c06\u8fde\u7eedLSTM\u63a8\u5e7f\u5230\u5177\u6709\u4efb\u4f55\u5206\u652f\u56e0\u5b50\u7684\u6811 Results: Sentiment Analysis: Stanford Sentiment Treebank Results: Semantic Relatedness SICK 2014 (Sentences Involving Compositional Knowledge) Forget Gates: Selective State Preservation Stripes = forget gate activations; more white \u21d2 more preserved","title":"4. Version 2: Syntactically-Untied RNN"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#5-qcd-aware-recursive-neural-networks-for-jet-physics","text":"Gilles Louppe, Kyunghun Cho, Cyril Becot, Kyle Cranmer (2017) Tree-to-tree Neural Networks for Program Translation [Chen, Liu, and Song NeurIPS 2018] \u63a2\u7d22\u5728\u7f16\u7a0b\u8bed\u8a00\u4e4b\u95f4\u4f7f\u7528\u6811\u5f62\u7ed3\u6784\u7f16\u7801\u548c\u751f\u6210\u8fdb\u884c\u7ffb\u8bd1 \u5728\u751f\u6210\u4e2d\uff0c\u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u5728\u6e90\u6811\u4e0a Human-Centered Artificial Intelligence \u4eba\u5de5\u667a\u80fd\u6709\u671b\u6539\u53d8\u7ecf\u6d4e\u548c\u793e\u4f1a\uff0c\u6539\u53d8\u6211\u4eec\u6c9f\u901a\u548c\u5de5\u4f5c\u7684\u65b9\u5f0f\uff0c\u91cd\u5851\u6cbb\u7406\u548c\u653f\u6cbb\uff0c\u5e76\u6311\u6218\u56fd\u9645\u79e9\u5e8f HAI\u7684\u4f7f\u547d\u662f\u63a8\u8fdb\u4eba\u5de5\u667a\u80fd\u7814\u7a76\uff0c\u6559\u80b2\uff0c\u653f\u7b56\u548c\u5b9e\u8df5\uff0c\u4ee5\u6539\u5584\u4eba\u7c7b\u72b6\u51b5","title":"5. QCD-Aware Recursive Neural Networks for Jet Physics"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#notes-09-recursive-neural-networks-and-constituency-parsing","text":"Note : \"RNN\" in this set of notes refers to Recursive Neural Networks, not Recurrent Neural Networks. The former is a superset of the latter.","title":"Notes 09 Recursive Neural Networks and Constituency Parsing"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#1-recursive-neural-networks","text":"\u5728\u8fd9\u4e9b\u7b14\u8bb0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u5e76\u8ba8\u8bba\u4e86\u4e00\u79cd\u65b0\u7684\u6a21\u578b\uff0c\u5b83\u662f\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7684\u8d85\u96c6\u3002\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs \u5982\u4e0a\u56fe\u6240\u793a)\u975e\u5e38\u9002\u5408\u5177\u6709\u5d4c\u5957\u5c42\u6b21\u7ed3\u6784\u548c\u5185\u5728\u9012\u5f52\u7ed3\u6784\u7684\u8bbe\u7f6e\u3002\u5982\u679c\u6211\u4eec\u601d\u8003\u4e00\u4e2a\u53e5\u5b50\uff0c\u5b83\u4e0d\u662f\u6b63\u662f\u6709\u8fd9\u6837\u7684\u7ed3\u6784\u5417\uff1f\u4ee5\u201cA small crowd quietly enters the historical church\u201d\u4e3a\u4f8b\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u53e5\u5b50\u5206\u6210\u540d\u8bcd\u77ed\u8bed\u3001\u52a8\u8bcd\u77ed\u8bed\u3001\u201cA small crowd\u201d\u548c\u201cquietly enters the historical church\u201d\u3002\u4f46\u662f\u6709\u4e00\u4e2a\u540d\u8bcd\u77ed\u8bed\u5728\u52a8\u8bcd\u77ed\u8bed\u4e2d:\u201cquietly enters\u201d\u548c\u201chistorical church\u201d\uff0c\u7b49\u7b49\u3002\u8fd9\u770b\u8d77\u6765\u786e\u5b9e\u5f88\u9012\u5f52\u3002 \u201c\u8bed\u8a00\u7684\u8bed\u6cd5\u89c4\u5219\u662f\u9ad8\u5ea6\u9012\u5f52\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u5229\u7528\u4e86\u9012\u5f52\u7ed3\u6784\u7684\u6a21\u578b\u3002\u4f7f\u7528 RNN\u5efa\u6a21\u53e5\u5b50\u7684\u53e6\u4e00\u4e2a\u597d\u5904\u662f\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8f93\u5165\u4efb\u610f\u957f\u5ea6\u7684\u53e5\u5b50\uff0c\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u5934\u8111\u5728NLP\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u548c\u975e\u5e38\u806a\u660e\u7684\u6280\u5de7\u4f7f\u53e5\u5b50\u7684\u8f93\u5165\u5411\u91cf\u76f8\u7b49\u5c3a\u5bf8\u76f8\u540c\uff0c\u5c3d\u7ba1\u53e5\u5b50\u7684\u957f\u5ea6\u4e0d\u76f8\u7b49\u3002(see Bengio et al., 2003; Henderson, 2003; Collobert & Weston, 2008) \u5047\u8bbe\u6211\u4eec\u7684\u4efb\u52a1\u662f\u53d6\u4e00\u4e2a\u53e5\u5b50\uff0c\u5e76\u5c06\u5176\u8868\u793a\u4e3a\u4e0e\u5355\u8bcd\u672c\u8eab\u8bed\u4e49\u7a7a\u95f4\u76f8\u540c\u7684\u5411\u91cf\u3002\u6240\u4ee5\u50cf\u201cI went to the mall yesterday\u201d\u3001\u201cWe went shopping last week\u201d\u548c\u201cThey went to the store\u201d\u8fd9\u6837\u7684\u77ed\u8bed\uff0c\u5f7c\u6b64\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u975e\u5e38\u8fd1\u3002\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u4e86\u8bad\u7ec3\u5355\u5b57\u5411\u91cf\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u662f\u5426\u5e94\u8be5\u5bf9\u4e8c\u5143\u7ec4\u3001\u4e09\u5143\u7ec4\u7b49\u4e5f\u505a\u540c\u6837\u7684\u4e8b\u60c5\u3002\u8fd9\u53ef\u80fd\u975e\u5e38\u6709\u6548\uff0c\u4f46\u8fd9\u79cd\u60f3\u6cd5\u5b58\u5728\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\u30021) \u5355\u8bcd\u7684\u7ec4\u5408\u6709\u65e0\u6570\u79cd\u53ef\u80fd\u3002\u5b58\u50a8\u548c\u8bad\u7ec3\u65e0\u9650\u6570\u91cf\u7684\u5411\u91cf\u5c06\u662f\u8352\u8c2c\u7684\u30022) \u6709\u4e9b\u5355\u8bcd\u7684\u7ec4\u5408\u867d\u7136\u5728\u8bed\u8a00\u4e2d\u5b8c\u5168\u53ef\u4ee5\u542c\u5230\uff0c\u4f46\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u5728\u6211\u4eec\u7684 \u8bad\u7ec3 / \u5f00\u53d1 \u8bed\u6599\u5e93\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u6c38\u8fdc\u5b66\u4e0d\u4f1a\u3002 \u6211\u4eec\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\u6765\u53d6\u4e00\u4e2a\u53e5\u5b50\u53ca\u5176\u76f8\u5e94\u7684\u8bcd\u5411\u91cf\uff0c\u5e76\u63a8\u5bfc\u51fa\u5d4c\u5165\u5411\u91cf\u5e94\u8be5\u662f\u4ec0\u4e48\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5148\u95ee\u4e00\u4e2a\u975e\u5e38\u6709\u4e89\u8bae\u7684\u95ee\u9898\u3002\u6211\u4eec\u7528\u6765\u8868\u793a\u6240\u6709\u5355\u8bcd\u7684\u5411\u91cf\u7a7a\u95f4\uff0c\u5177\u6709\u8db3\u591f\u7684\u8868\u8fbe\u80fd\u529b\u4ee5\u81f3\u4e8e\u80fd\u591f\u8868\u793a\u4efb\u610f\u957f\u5ea6\u7684\u6240\u6709\u53e5\u5b50\uff0c\u8fd9\u662f\u5929\u771f\u7684\u60f3\u6cd5\u5417\uff1f\u867d\u7136\u8fd9\u53ef\u80fd\u662f\u4e0d\u76f4\u89c2\u7684\uff0c\u4f46\u8fd9\u4e9b\u6a21\u578b\u7684\u6027\u80fd\u8868\u660e\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u4ef6\u5408\u7406\u7684\u4e8b\u60c5\u3002 \u6211\u4eec\u5148\u6765\u8ba8\u8bba\u4e00\u4e0b\u53e5\u5b50\u7684\u8bed\u4e49\u7406\u89e3\u548c\u8bed\u6cd5\u7406\u89e3\u7684\u533a\u522b\u3002\u8bed\u4e49\u5206\u6790\u662f\u5bf9\u53e5\u5b50\u610f\u4e49\u7684\u7406\u89e3\uff0c\u80fd\u591f\u5728\u7ed3\u6784\u8bed\u4e49\u7a7a\u95f4\u4e2d\u628a\u77ed\u8bed\u8868\u793a\u4e3a\u4e00\u4e2a\u5411\u91cf\uff0c\u76f8\u4f3c\u7684\u53e5\u5b50\u975e\u5e38\u8fd1\uff0c\u4e0d\u76f8\u5173\u7684\u53e5\u5b50\u975e\u5e38\u8fdc\u3002\u8bed\u6cd5\u7406\u89e3\u662f\u6307\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u53e5\u5b50\u7684\u57fa\u672c\u8bed\u6cd5\u7ed3\u6784\uff0c\u53e5\u5b50\u7684\u54ea\u4e00\u90e8\u5206\u53d6\u51b3\u4e8e\u54ea\u4e00\u90e8\u5206\uff0c\u54ea\u4e9b\u8bcd\u5728\u4fee\u9970\u54ea\u4e9b\u8bcd\uff0c\u7b49\u7b49\u3002\u8fd9\u79cd\u7406\u89e3\u7684\u8f93\u51fa\u901a\u5e38\u7528\u89e3\u6790\u6811\u8868\u793a\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u6700\u91cd\u8981\u7684\u95ee\u9898\u3002\u5982\u679c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8bed\u4e49\u7684\u8868\u8fbe\u65b9\u5f0f\uff0c\u662f\u5426\u9700\u8981\u6709\u8bed\u6cd5\u4e0a\u7684\u7406\u89e3\uff1f\u6709\u4e9b\u4eba\u53ef\u80fd\u4e0d\u540c\u610f\uff0c\u4f46\u73b0\u5728\u6211\u4eec\u5c06\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u4e2a\u8bed\u4e49\u7ec4\u5408\u4efb\u52a1\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u5355\u8bcd\u3002\u7136\u540e\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u5355\u8bcd\u662f\u5982\u4f55\u7ec4\u5408\u5728\u4e00\u8d77\u7684\uff0c\u7136\u540e\uff0c\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5229\u7528\u524d\u9762\u7684\u4e24\u4e2a\u6982\u5ff5\u5f97\u5230\u4e00\u4e2a\u77ed\u8bed\u6216\u53e5\u5b50\u7684\u610f\u601d\u3002 \u8ba9\u6211\u4eec\u4ece\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u57fa\u4e8e\u8fd9\u4e2a\u539f\u5219\u7684\u6a21\u578b\u5f00\u59cb\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u53e5\u5b50\u7684\u89e3\u6790\u6811\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u80fd\u627e\u51fa\u8fd9\u4e2a\u53e5\u5b50\u7684\u7f16\u7801\u5417\uff1f\u4e5f\u8bb8\u8fd8\u80fd\u4ece\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u4e2d\u5f97\u5230\u4e00\u4e2a\u60c5\u611f\u5f97\u5206\uff1f\u6211\u4eec\u89c2\u5bdf\u4e00\u4e2a\u7b80\u5355\u7684RNN\u662f\u5982\u4f55\u5b8c\u6210\u8fd9\u9879\u4efb\u52a1\u7684\u3002\u201d","title":"1 Recursive Neural Networks"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#11-a-simple-single-layer-rnn","text":"\u8ba9\u6211\u4eec\u6d4f\u89c8\u4e00\u4e0b\u4e0a\u56fe\u4e2d\u663e\u793a\u7684\u6a21\u578b\u3002\u6211\u4eec\u9996\u5148\u83b7\u53d6\u4e00\u4e2a\u53e5\u5b50\u89e3\u6790\u6811\u548c\u53e5\u5b50\u5355\u8bcd\u5411\u91cf\uff0c\u7136\u540e\u5f00\u59cb\u904d\u5386\u8be5\u6811\u3002\u56fe\u4e2d\u6700\u4f4e\u7684\u8282\u70b9\u662f \\(\\text{Node}_3\\) \uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \\(L_{29}\\) \u548c \\(L_{430}\\) \u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u4e2a\u5411\u91cf \\(\\in \\mathbb{R}^{2 d}\\) \uff0c\u5e76\u5c06\u5176\u8f93\u5165\u5230\u6211\u4eec\u7684\u7f51\u7edc\u4e2d\u8fdb\u884c\u8ba1\u7b97\uff1a $$ h^{(1)}=\\tanh \\left(W^{(1)}\\left[\\begin{array}{c}{L_{29}} \\ {L_{430}}\\end{array}\\right]+b^{(1)}\\right) $$ \u8003\u8651\u5230 \\(W^{(1)} \\in \\mathbb{R}^{d \\times 2 d} \\text { and } b^{(1)} \\in \\mathbb{R}^{d}, h^{(1)} \\in \\mathbb{R}^{d}\\) \uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06 \\(h^{(1)}\\) \u770b\u505a\u662f bigram \u201cthis assignment\u201d \u7684\u76f8\u540c\u5355\u8bcd\u5411\u91cf\u7a7a\u95f4\u7684\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5206\u522b\u5b66\u4e60\u8868\u793a\uff0c\u800c\u662f\u4ece\u5176\u6784\u6210\u7684\u5355\u8bcd\u5411\u91cf\u4e2d\u6d3e\u751f\u3002 \u6211\u4eec\u73b0\u5728\u5c06 \\(h^{(1)}\\) \u6295\u8fdb\u4e00\u4e2a softmax \u5c42\u4e2d\u6765\u83b7\u5f97\u4e00\u4e2a\u60c5\u611f\u7c7b\u522b\u7684\u5206\u6570\uff0c\u60c5\u611f\u7c7b\u522b\u662f\u4e00\u4e2a\u5df2\u77e5\u7684\u4ee3\u8868\u4e00\u4e9b\u542b\u4e49\u7684\u79bb\u6563\u96c6\u5408\u3002\u5728\u79ef\u6781/\u6d88\u6781\u60c5\u7eea\u5206\u6790\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u67095\u4e2a\u7c7b\uff0c\u7c7b0\u8868\u793a\u5f3a\u70c8\u7684\u6d88\u6781\uff0c\u7c7b1\u8868\u793a\u6d88\u6781\uff0c\u7c7b2\u8868\u793a\u4e2d\u6027\uff0c\u7c7b3\u8868\u793a\u79ef\u6781\uff0c\u6700\u540e\u7c7b4\u8868\u793a\u5f3a\u70c8\u7684\u79ef\u6781\u3002 \u73b0\u5728\u6211\u4eec\u5bf9\u201cI\u201d\u548c\u201clove\u201d\u505a\u540c\u6837\u7684\u5904\u7406\uff0c\u751f\u6210\u77ed\u8bed\u201cI love\u201d\u7684\u5411\u91cf \\(h^{(1)}\\) \u3002\u540c\u6837\uff0c\u6211\u4eec\u8ba1\u7b97\u8be5\u77ed\u8bed\u5728\u60c5\u611f\u7c7b\u4e0a\u7684\u5f97\u5206\u3002\u6700\u540e\uff0c\u6700\u6709\u8da3\u7684\u4e00\u6b65\uff0c\u6211\u4eec\u9700\u8981\u5408\u5e76\u4e24\u4e2a\u77ed\u8bed\u201cI love\u201d\u548c\u201cthis assignment\u201d\u3002\u8fd9\u91cc\u6211\u4eec\u8fde\u63a5\u7684\u662f\u5355\u8bcd\u77ed\u8bed\uff0c\u800c\u4e0d\u662f\u5355\u8bcd\u5411\u91cf\uff01\u6211\u4eec\u7528\u540c\u6837\u7684\u65b9\u6cd5\uff0c\u628a\u4e24\u4e2a \\(h^{(1)}\\) \u8fde\u63a5\u8d77\u6765\u5e76\u4e14\u8ba1\u7b97 $$ h^{(1)}=\\tanh \\left(W^{(1)}\\left[\\begin{array}{c}{h_{L e f t}^{(1)}} \\ {h_{R i g h t} {(1)}}\\end{array}\\right]+b \\right) $$ \u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2a\u5411\u91cf\u5728\u5411\u91cf\u7a7a\u95f4\u4e2d\u8868\u793a\u5b8c\u6574\u7684\u53e5\u5b50\u201dI love this assignment\u201d\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a \\(h^{(1)}\\) \u901a\u8fc7\u4e0e\u524d\u9762\u76f8\u540c\u7684 softmax \u5c42\uff0c\u5e76\u8ba1\u7b97\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\u6982\u7387\u3002\u5f53\u7136\uff0c\u6a21\u578b\u53ea\u6709\u5728\u7ecf\u8fc7\u8bad\u7ec3\u540e\u624d\u80fd\u53ef\u9760\u5730\u505a\u5230\u8fd9\u4e00\u70b9\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u540e\u9000\u4e00\u6b65\u3002\u9996\u5148\uff0c\u8ba4\u4e3a\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u77e9\u9635 \\(W\\) \u5c06\u6240\u6709\u5355\u8bcd\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5f97\u5230\u4e00\u4e2a\u975e\u5e38\u6709\u8868\u73b0\u529b\u7684 \\(h^{(1)}\\) \uff0c\u7136\u540e\u518d\u6b21\u4f7f\u7528\u76f8\u540c\u7684\u77e9\u9635 \\(W\\) \u5c06\u6240\u6709\u77ed\u8bed\u5411\u91cf\u8fde\u63a5\u8d77\u6765\uff0c\u5f97\u5230\u66f4\u6df1\u5c42\u7684\u77ed\u8bed\uff0c\u8fd9\u6837\u7684\u60f3\u6cd5\u662f\u4e0d\u662f\u592a\u5929\u771f\u4e86\uff1f\u8fd9\u4e9b\u6279\u8bc4\u662f\u5408\u7406\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u5bf9\u7b80\u5355RNN\u7684\u5904\u7406\u6765\u89e3\u51b3\u5b83\u4eec\u3002","title":"1.1 A simple single layer RNN"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#12-syntactically-untied-su-rnn","text":"\u6b63\u5982\u6211\u4eec\u5728\u524d\u4e00\u8282\u7684\u6279\u8bc4\u4e2d\u6240\u8ba8\u8bba\u7684\uff0c\u4f7f\u7528\u76f8\u540c\u7684 $W $ \u5c06\u540d\u8bcd\u77ed\u8bed\u548c\u52a8\u8bcd\u77ed\u8bed\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5c06\u4ecb\u8bcd\u77ed\u8bed\u548c\u53e6\u4e00\u4e2a\u8bcd\u5411\u91cf\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u4ece\u76f4\u89c9\u4e0a\u770b\u4f3c\u4e4e\u662f\u9519\u8bef\u7684\u3002\u4e5f\u8bb8\u6211\u4eec\u662f\u76f4\u63a5\u5c06\u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u5408\u5e76\u5230\u4e00\u4e2a\u592a\u5f31\u7684\u6a21\u578b\u4e2d\u3002 \u6211\u4eec\u80fd\u505a\u7684\u5c31\u662f\u201c\u4ece\u8bed\u6cd5\u4e0a\u89e3\u5f00\u201d\u8fd9\u4e9b\u4e0d\u540c\u4efb\u52a1\u7684\u6743\u91cd\u3002\u6211\u4eec\u7684\u610f\u601d\u662f\uff0c\u6ca1\u6709\u7406\u7531\u671f\u671b\u67d0\u4e00\u7c7b\u8f93\u5165\u7684\u6700\u4f18 \\(W\\) \u4e0e\u53e6\u4e00\u7c7b\u8f93\u5165\u7684\u6700\u4f18 \\(W\\) \u5b8c\u5168\u76f8\u5173\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u8fd9\u4e9b \\(W\\) \u4e0d\u4e00\u6837\uff0c\u653e\u677e\u8fd9\u4e2a\u7ea6\u675f\u3002\u867d\u7136\u8fd9\u786e\u5b9e\u589e\u52a0\u4e86\u6211\u4eec\u8981\u5b66\u4e60\u7684\u6743\u91cd\u77e9\u9635\uff0c\u4f46\u662f\u6211\u4eec\u83b7\u5f97\u7684\u6027\u80fd\u63d0\u5347\u5374\u4e0d\u662f\u5fae\u4e0d\u8db3\u9053\u7684\u3002 \u5bf9\u4e0d\u540c\u7c7b\u522b\u7684\u8f93\u5165\u4f7f\u7528\u4e0d\u540c\u7684 \\(W\\) \u6bd4\u5bf9\u6240\u6709\u7c7b\u522b\u53ea\u4f7f\u7528\u4e00\u4e2a \\(W\\) \u66f4\u81ea\u7136 \u6b63\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u6211\u4eec\u7684\u6a21\u578b\u73b0\u5728\u53d6\u51b3\u4e8e\u8f93\u5165\u7684\u8bed\u6cd5\u7c7b\u522b\u3002\u6ce8\u610f\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u6982\u7387\u4e0a\u4e0b\u6587\u81ea\u7531\u8bed\u6cd5(PCFG)\u6765\u786e\u5b9a\u7c7b\u522b\uff0c\u8fd9\u4e2a\u8bed\u6cd5\u6216\u591a\u6216\u5c11\u662f\u901a\u8fc7\u8ba1\u7b97Penn Tree Bank\u4e0a\u7684\u6c47\u603b\u7edf\u8ba1\u4fe1\u606f\u6765\u5b66\u4e60\u7684\uff0c\u4ee5\u5b66\u4e60\u89c4\u5219\uff0c\u6bd4\u5982\u201cthe\u201d\u603b\u662f\u4e00\u4e2aDT\u7b49\u7b49\u3002\u4e0d\u9700\u8981\u5bf9\u8fd9\u90e8\u5206\u6709\u66f4\u6df1\u7684\u7406\u89e3\uff0c\u53ea\u9700\u8981\u77e5\u9053\u5b83\u975e\u5e38\u7b80\u5355\u3002 \u8fd9\u4e2a\u6a21\u578b\u4e2d\u552f\u4e00\u7684\u5176\u4ed6\u4e3b\u8981\u533a\u522b\u662f\uff0c\u6211\u4eec\u6839\u636e\u8bed\u8a00\u7c7b\u522b\u5206\u522b\u521d\u59cb\u5316\u4e86 \\(W\\) \u3002\u8fd9\u6837\u505a\u7684\u9ed8\u8ba4\u505a\u6cd5\u662f\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u5355\u8bcd\u5411\u91cf\u6c42\u5e73\u5747\u503c\u3002\u7f13\u6162\u4f46\u80af\u5b9a\u7684\u662f\uff0c\u6a21\u578b\u4f1a\u5b66\u4f1a\u54ea\u4e2a\u5411\u91cf\u66f4\u91cd\u8981\uff0c\u4ee5\u53ca\u5411\u91cf\u7684\u4efb\u4f55\u65cb\u8f6c\u6216\u7f29\u653e\u90fd\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\u6211\u4eec\u5728\u4e0b\u56fe\u4e2d\u89c2\u5bdf\u5230\uff0c\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6743\u91cd\u77e9\u9635\u5b66\u4e60\u4e86\u5b9e\u9645\u610f\u4e49\uff01\u4f8b\u5982\uff0cDT-NP \u89c4\u5219\uff0c\u6216\u8005\u8bf4\u662f\u9650\u5b9a\u8bcd\u540e\u8ddf\u540d\u8bcd\u77ed\u8bed (\u5982\u201cThe car\u201d\u6216\u201cA man\u201d) \u7684\u4f8b\u5b50\u4e2d\uff0c\u66f4\u5f3a\u8c03\u540d\u8bcd\u8bcd\u7ec4\u3002(\u8fd9\u662f\u663e\u800c\u6613\u89c1\u7684\uff0c\u56e0\u4e3a\u53f3\u8fb9\u7684\u5bf9\u89d2\u7ebf\u662f\u7ea2\u8272\u7684\uff0c\u8868\u793a\u66f4\u9ad8\u7684\u6743\u91cd)\u3002\u8fd9\u88ab\u79f0\u4e3asoft head words \u7684\u6982\u5ff5\uff0c\u8bed\u8a00\u5b66\u5bb6\u4eec\u957f\u671f\u4ee5\u6765\u4e00\u76f4\u8ba4\u4e3a\u8fd9\u662f\u6b63\u786e\u7684\uff0c\u7136\u800c\u8fd9\u4e2a\u6a21\u578b\u4ec5\u4ec5\u901a\u8fc7\u89c2\u5bdf\u6570\u636e\u5c31\u5b66\u4f1a\u4e86\u8fd9\u4e00\u70b9\u3002\u5f88\u9177\uff01 \u5b66\u4e60\u5230\u7684 DT-NP \u7ec4\u5408\u7684\u6743\u91cd \\(W\\) \u7b26\u5408\u8bed\u8a00\u5b66\u7406\u8bba SU-RNN\u786e\u5b9e\u6bd4\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u6a21\u578b\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u4f46\u4e5f\u8bb8\u5b83\u7684\u8868\u73b0\u529b\u8fd8\u4e0d\u591f\u3002\u5982\u679c\u6211\u4eec\u8003\u8651\u4fee\u9970\u8bcd\uff0c\u6bd4\u5982\u526f\u8bcd\u201cvery\u201d\uff0c\u4efb\u4f55\u4e0e\u8fd9\u4e2a\u5355\u8bcd\u5411\u91cf\u548c\u4e0b\u9762\u8fd9\u4e2a\u5355\u8bcd\u5411\u91cf\u7684\u63d2\u503c\uff0c\u80af\u5b9a\u4e0d\u662f\u6211\u4eec\u6240\u7406\u89e3\u7684\u201cvery\u201d\u7684\u672c\u8d28\u3002\u3002 \u4f5c\u4e3a\u526f\u8bcd\uff0c\u5b83\u7684\u5b57\u9762\u610f\u601d\u662f\u201c\u7528\u4e8e\u5f3a\u8c03\u201d\u3002\u5f53\u6211\u4eec\u53ea\u505a\u7ebf\u6027\u63d2\u503c\u65f6\uff0c\u6211\u4eec\u600e\u4e48\u80fd\u5f97\u5230\u4e00\u4e2a\u5f3a\u8c03\u5176\u4ed6\u5411\u91cf\u7684\u5411\u91cf\u5462\uff1f\u6211\u4eec\u5982\u4f55\u6784\u9020\u4e00\u4e2a\u5411\u91cf\uff0c\u5b83\u5c06\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u201c\u7f29\u653e\u201d\u4efb\u4f55\u5176\u4ed6\u5411\u91cf\uff1f\u4e8b\u5b9e\u662f\u6211\u4eec\u4e0d\u80fd\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8bcd\u5bf9\u53e6\u4e00\u4e2a\u8bcd\u7684\u4e58\u6cd5\u3002\u6211\u4eec\u5728\u4e0b\u9762\u53d1\u73b0\u4e86\u4e24\u4e2a\u8fd9\u6837\u7684\u7ec4\u5408\uff0c\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002\u7b2c\u4e00\u4e2a\u5229\u7528\u5355\u8bcd\u77e9\u9635\uff0c\u53e6\u4e00\u4e2a\u5229\u7528\u4e8c\u6b21\u65b9\u7a0b\u7684\u5178\u578b\u4eff\u5c04\u3002","title":"1.2 Syntactically Untied SU-RNN"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#13-mv-rnns-matrix-vector-recursive-neural-networks","text":"\u6211\u4eec\u73b0\u5728\u6269\u5927\u6211\u4eec\u7684\u5355\u8bcd\u8868\u793a\uff0c\u4e0d\u4ec5\u5305\u62ec\u4e00\u4e2a\u5355\u8bcd\u5411\u91cf\uff0c\u800c\u4e14\u8fd8\u5305\u62ec\u4e00\u4e2a\u5355\u8bcd\u77e9\u9635\uff01\u6240\u4ee5\u5355\u8bcd\u201cvery\u201d\u5c06\u6709\u4e00\u4e2a\u5355\u8bcd\u5411\u91cf \\(v_{v e r y} \\in \\mathbb{R}^{d}\\) \uff0c\u548c\u5355\u8bcd\u77e9\u9635 \\(V_{v e r y} \\in \\mathbb{R}^{d \\times d}\\) \u3002\u8fd9\u8ba9\u6211\u4eec\u4e0d\u4ec5\u80fd\u591f\u8868\u8fbe\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\uff0c\u8fd8\u80fd\u5b66\u4e60\u5355\u8bcd\u201cmodify \u4fee\u9970\u201d\u5176\u4ed6\u5355\u8bcd\u7684\u65b9\u5f0f\u3002\u5355\u8bcd\u77e9\u9635\u6307\u7684\u5c31\u662f\u540e\u8005\u3002\u4e3a\u4e86\u5c06\u4e24\u4e2a\u5355\u8bcd \\(a\\) \u548c \\(b\\) \u8f93\u5165RNN\uff0c\u6211\u4eec\u53d6\u5b83\u4eec\u7684\u5355\u8bcd\u77e9\u9635 \\(A\\) \u548c \\(B\\) \uff0c\u5f62\u6210\u8f93\u5165\u5411\u91cf \\(x\\) \uff0c\u4f5c\u4e3a\u5411\u91cf \\(Ab\\) \u548c \\(Ba\\) \u7684\u7ec4\u5408\u3002\u5728\u6211\u4eec\u7684\u201cvery\u201d\u4f8b\u5b50\u4e2d\uff0c \\(V_{very}\\) \u53ef\u4ee5\u662f\u5355\u4f4d\u77e9\u9635\u4e58\u4ee5\u4efb\u610f\u5927\u4e8e1\u7684\u6807\u91cf\u3002\u5b83\u53ef\u4ee5\u5c06\u4efb\u4f55\u76f8\u90bb\u7684\u8bcd\u5411\u91cf\u4e58\u4ee5\u8fd9\u4e2a\u6570\uff01\u8fd9\u6b63\u662f\u6211\u4eec\u6240\u9700\u8981\u7684\u90a3\u79cd\u8868\u793a\u80fd\u529b\u3002\u5f53\u65b0\u7684\u5355\u8bcd\u8868\u793a\u5f00\u62d3\u4e86\u6211\u4eec\u7684\u7279\u5f81\u7a7a\u95f4\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u597d\u5730\u8868\u8fbe\u5355\u8bcd\u5f7c\u6b64\u4fee\u9970\u7684\u65b9\u5f0f\u3002 \u901a\u8fc7\u5bf9\u6a21\u578b\u8bef\u5dee\u7684\u89c2\u5bdf\uff0c\u6211\u4eec\u53d1\u73b0\u5373\u4f7f\u662fMV- RNN\u4e5f\u4e0d\u80fd\u8868\u8fbe\u4e00\u5b9a\u7684\u5173\u7cfb\u3002\u6211\u4eec\u89c2\u5bdf\u5230\u4e09\u5927\u7c7b\u9519\u8bef\u3002 \u7b2c\u4e00\uff0cNegated Positives \u5426\u5b9a\u79ef\u6781\u3002\u5f53\u6211\u4eec\u8bf4\u4e00\u4e9b\u79ef\u6781\u7684\u4e1c\u897f\uff0c\u4f46\u4e00\u4e2a\u8bcd\u53d8\u6210\u4e86\u6d88\u6781\u7684\uff0c\u6a21\u578b\u4e0d\u80fd\u8861\u91cf\u4e00\u4e2a\u8bcd\u5f3a\u5927\u5230\u8db3\u4ee5\u7ffb\u8f6c\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\u3002\u4e0a\u56fe\u663e\u793a\u4e86\u8fd9\u6837\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5c06\u5355\u8bcd\u201cmost\u201d\u8f6c\u6362\u4e3a\u201cleast\u201d\u5e94\u8be5\u4f1a\u7ffb\u8f6c\u6574\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\uff0c\u4f46\u662fMV-RNN\u6ca1\u6709\u6210\u529f\u5730\u6355\u6349\u5230\u8fd9\u4e00\u70b9\u3002 \u7b2c\u4e8c\u7c7b\u9519\u8bef\u662f Negated Negative \u5426\u5b9a\u7684\u5426\u5b9a\u5f62\u5f0f\u3002\u6211\u4eec\u8bf4\u67d0\u4e8b\u4e0d\u574f\uff0c\u6216\u8005\u4e0d\u67af\u71e5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002MV-RNN\u4e0d\u80fd\u8bc6\u522b\u51fa\u201cnot\u201d\u8fd9\u4e2a\u8bcd\u4f1a\u4f7f\u60c5\u7eea\u4ece\u6d88\u6781\u53d8\u4e3a\u4e2d\u6027\u3002 \u6211\u4eec\u89c2\u5bdf\u5230\u7684\u6700\u540e\u4e00\u7c7b\u9519\u8bef\u662f\u4e0a\u56fe\u4e2d\u663e\u793a\u7684\u201cX but Y\u8fde\u63a5\u8bcd\u201d\u3002\u8fd9\u91cc\u7684 X \u53ef\u80fd\u662f\u8d1f\u7684\uff0c\u4f46\u5982\u679cY\u662f\u6b63\u7684\uff0c\u90a3\u4e48\u6a21\u578b\u5bf9\u53e5\u5b50\u7684\u60c5\u611f\u8f93\u51fa\u5e94\u8be5\u662f\u6b63\u7684\uff01MV-RNNs\u6b63\u5728\u4e0e\u4e4b\u6597\u4e89\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5bfb\u627e\u4e00\u79cd\u66f4\u5bcc\u8868\u73b0\u529b\u7684\u7ec4\u5408\u7b97\u6cd5\uff0c\u80fd\u591f\u5b8c\u5168\u6355\u6349\u8fd9\u4e9b\u7c7b\u578b\u7684\u9ad8\u7ea7\u6784\u6210\u3002","title":"1.3 MV-RNN\u2019s (Matrix-Vector Recursive Neural Networks)"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#14-rntns-recursive-neural-tensor-network","text":"\u6211\u4eec\u5c06\u5728\u8fd9\u91cc\u8ba8\u8bba\u7684\u6700\u540e\u4e00\u4e2aRNN\u662f\u8fc4\u4eca\u4e3a\u6b62\u5728\u6211\u4eec\u6240\u603b\u7ed3\u7684\u4e09\u79cd\u9519\u8bef\u7c7b\u578b\u4e2d\u6548\u679c\u6700\u6210\u529f\u7684\u3002\u9012\u5f52\u795e\u7ecf\u5f20\u91cf\u7f51\u7edc Recursive Neural Tensor Network \u6d88\u9664\u4e86\u5355\u8bcd\u77e9\u9635\u7684\u6982\u5ff5\uff0c\u8fdb\u4e00\u6b65\u6d88\u9664\u4e86\u4f20\u7edf\u4eff\u5c04\u53d8\u6362\u7684 pre-tanh/sigmoid \u7684\u6982\u5ff5\u3002\u4e3a\u4e86\u7ec4\u5408\u4e24\u4e2a\u5355\u8bcd\u5411\u91cf\u6216\u77ed\u8bed\u5411\u91cf\uff0c\u6211\u4eec\u518d\u6b21\u5c06\u5b83\u4eec\u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u5411\u91cf \\(\\in \\mathbb{R}^{2 d}\\) \uff0c\u4f46\u662f\u6211\u4eec\u6ca1\u6709\u5148\u5c06\u5176\u653e\u5165\u4eff\u5c04\u51fd\u6570\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u975e\u7ebf\u6027\u7684\uff0c\u800c\u662f\u5148\u5c06\u5176\u653e\u5165\u4e00\u4e2a\u4e8c\u6b21\u65b9\u7a0b\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u975e\u7ebf\u6027\u7684\uff0c\u6bd4\u5982\uff1a $$ h^{(1)}=\\tanh \\left(x^{T} V x+W x\\right) $$ \u8fd9\u91cc\uff0c \\(V\\) \u662f\u4e00\u4e2a\u4e09\u9636\u5f20\u91cf \\(\\mathbb{R}^{2 d \\times 2 d \\times d}\\) \uff0c\u6211\u4eec\u8ba1\u7b97 \\(x^{T} V[i] x, \\forall i \\in[1,2, \\ldots d]\\) \u5f20\u91cf\u7684\u5207\u7247\u8f93\u51fa\u5411\u91cf \\(\\mathbb{R}^{d}\\) \u3002\u7136\u540e\u6211\u4eec\u52a0\u4e0a \\(Wx\\) \uff0c\u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u975e\u7ebf\u6027\u51fd\u6570\u3002\u4e8c\u6b21\u65b9\u663e\u793a\u4e86\u4e58\u6cd5\uff0c\u6211\u4eec\u786e\u5b9e\u53ef\u4ee5\u4f7f\u5f97\u8bcd\u5411\u91cf\u4e4b\u95f4\u8fdb\u884c\u4e58\u6cd5\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u7ef4\u62a4\u548c\u5b66\u4e60\u5355\u8bcd\u77e9\u9635\uff01 \u5982\u4e0a\u56fe\u6240\u793a\uff0cRNTN\u662f\u552f\u4e00\u80fd\u591f\u5728\u8fd9\u4e9b\u975e\u5e38\u96be\u7684\u6570\u636e\u96c6\u4e0a\u6210\u529f\u7684\u6a21\u578b\u3002 \u4e4b\u524d\u7684\u7b14\u8bb0\u4e2d\u8ba8\u8bba\u8fc7\u7684\u5377\u79ef\u795e\u7ecf\u7f51\u7edc(CNN) \u5728\u67d0\u4e9b\u65b9\u9762\u4f18\u4e8eRNTN\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u8f93\u5165\u89e3\u6790\u6811!\u201d","title":"1.4 RNTNs (Recursive Neural Tensor Network)"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#2-constituency-parsing","text":"\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u8981\u6c42\u80fd\u591f\u4ece\u8f83\u5927\u7684\u6587\u672c\u5355\u5143\u4e2d\u8f83\u5c0f\u7684\u90e8\u5206\u7684\u7406\u89e3\u4e2d\u63d0\u53d6\u610f\u4e49\u3002\u8fd9\u79cd\u63d0\u53d6\u8981\u6c42\u80fd\u591f\u7406\u89e3\u8f83\u5c0f\u7684\u90e8\u4ef6\u662f\u5982\u4f55\u7ec4\u5408\u5728\u4e00\u8d77\u7684\u3002\u5206\u6790\u53e5\u5b50\u53e5\u6cd5\u7ed3\u6784\u7684\u65b9\u6cd5\u4e3b\u8981\u6709\u4e24\u79cd\uff1a constituency parsing and dependency parsing \u6210\u5206\u53e5\u6cd5\u5206\u6790\u548c\u4f9d\u5b58\u5206\u6790\u3002\u4f9d\u5b58\u5206\u6790\u5728\u524d\u51e0\u8282\u8bfe\u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7(\u53c2\u89c1Note04)\u3002\u901a\u8fc7\u5728\u5355\u8bcd\u53ca\u5176\u4f9d\u8d56\u9879\u4e4b\u95f4\u5efa\u7acb\u4e8c\u8fdb\u5236\u975e\u5bf9\u79f0\u5173\u7cfb\uff0c\u7ed3\u6784\u663e\u793a\u4e86\u54ea\u4e2a\u5355\u8bcd\u4f9d\u8d56\u4e8e\u54ea\u4e2a\u5355\u8bcd\u3002\u73b0\u5728\u6211\u4eec\u5173\u6ce8\u6210\u5206\u53e5\u6cd5\u5206\u6790\uff0c\u5b83\u5c06\u5355\u8bcd\u7ec4\u7ec7\u6210\u5d4c\u5957\u7684\u6210\u5206\u3002 \u6210\u5206\u53e5\u6cd5\u5206\u6790\u662f\u5c06\u4e00\u6bb5\u6587\u672c(\u4f8b\u5982\u4e00\u4e2a\u53e5\u5b50)\u5206\u6210\u5b50\u77ed\u8bed\u7684\u4e00\u79cd\u65b9\u6cd5\u3002\u6210\u5206\u53e5\u6cd5\u5206\u6790(\u4e5f\u79f0\u4e3a\u201c\u77ed\u8bed\u7ed3\u6784\u5206\u6790\u201d)\u7684\u76ee\u6807\u4e4b\u4e00\u662f\u8bc6\u522b\u6587\u672c\u4e2d\u7684\u6210\u5206\uff0c\u8fd9\u4e9b\u6210\u5206\u5728\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u4fe1\u606f\u65f6\u975e\u5e38\u6709\u7528\u3002\u901a\u8fc7\u5206\u6790\u53e5\u5b50\u540e\u4e86\u89e3\u6210\u5206\uff0c\u5c31\u6709\u53ef\u80fd\u751f\u6210\u8bed\u6cd5\u4e0a\u6b63\u786e\u7684\u7c7b\u4f3c\u53e5\u5b50\u3002","title":"2 Constituency Parsing"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#21-constituent","text":"\u5728\u53e5\u6cd5\u5206\u6790\u4e2d\uff0c\u4e00\u4e2a\u6210\u5206\u53ef\u4ee5\u662f\u4e00\u4e2a\u5355\u8bcd\u6216\u77ed\u8bed\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5c42\u6b21\u7ed3\u6784\u4e2d\u7684\u4e00\u4e2a\u5355\u5143\u3002\u77ed\u8bed\u662f\u7531\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5355\u8bcd\u7ec4\u6210\u7684\u8bcd\u7ec4\uff0c\u56f4\u7ed5 a head lexical item \u4e00\u4e2a\u8bcd\u9996\u8bcd\u9879\uff0c\u5728\u4e00\u4e2a\u53e5\u5b50\u4e2d\u4f5c\u4e3a\u4e00\u4e2a\u5355\u4f4d\u4f7f\u7528\u3002\u4f5c\u4e3a\u4e00\u4e2a\u77ed\u8bed\uff0c\u4e00\u7ec4\u8bcd\u5e94\u8be5\u5728\u53e5\u5b50\u4e2d\u53d1\u6325\u7279\u5b9a\u7684\u4f5c\u7528\u3002\u6b64\u5916\uff0c\u4e00\u7ec4\u8bcd\u53ef\u4ee5\u4e00\u8d77\u79fb\u52a8\u6216\u66ff\u6362\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u53e5\u5b50\u5e94\u8be5\u4fdd\u6301\u6d41\u5229\u548c\u8bed\u6cd5\u3002 \u6211\u4eec\u7528\u8f83\u5c0f\u5143\u7d20\u7684\u7b26\u53f7\u7ec4\u5408\u6765\u89e3\u91ca\u5927\u7684\u6587\u672c\u5355\u5143\u3002\u8fd9\u4e9b\u8f83\u5c0f\u7684\u5143\u7d20\u53ef\u4ee5\u5728\u4fdd\u6301\u76f8\u540c\u542b\u4e49\u7684\u540c\u65f6\u8fdb\u884c\u66f4\u6539\uff0c\u5982\u4e0b\u9762\u7684\u793a\u4f8b\u6240\u793a\u3002 \u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u53e5\u5b50\u5305\u542b\u540d\u8bcd\u77ed\u8bed\uff1awonderful CS224N\u201d I want to be enrolled in the wonderful CS224N! \u6211\u4eec\u901a\u8fc7\u79fb\u52a8\u6574\u4e2a\u77ed\u8bed\u5230\u6700\u524d\u9762\u6765\u91cd\u5199\u8fd9\u4e2a\u53e5\u5b50 The wonderful CS224N I want to be enrolled in \u6216\u8005\u8fd9\u4e2a\u77ed\u8bed\u53ef\u4ee5\u88ab\u4e00\u4e2a\u7c7b\u4f3c\u529f\u80fd\u548c\u610f\u4e49\u7684\u6210\u5206\u6240\u66ff\u4ee3\uff0c\u4f8b\u5982\"great CS course in Stanford about NLP and Deep Learning\u201d I want to be enrolled in the great CS course in Stanford about NLP and Deep Learning! \u5bf9\u4e8e\u6210\u5206\u53e5\u6cd5\u5206\u6790\uff0c\u57fa\u672c\u5b50\u53e5\u7ed3\u6784\u88ab\u7406\u89e3\u4e3a\uff0c\u5b50\u53e5\u5206\u4e3a\u4e3b\u8bed(\u540d\u8bcd\u77ed\u8bedNP)\u548c\u8c13\u8bed(\u52a8\u8bcd\u77ed\u8bedVP)\u7684\u4e8c\u5143\u5212\u5206\uff0c\u8868\u8fbe\u5982\u4e0b\u89c4\u5219\u3002\u5b50\u53e5\u7684\u4e8c\u5143\u5212\u5206\u5bfc\u81f4\u4e00\u5bf9\u4e00\u6216\u4e00\u5bf9\u591a\u901a\u4fe1\u3002\u5bf9\u4e8e\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u6811\u7ed3\u6784\u4e2d\u90fd\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\u3002 \\(\\mathrm{S} \\rightarrow \\mathrm{NP} \\quad \\mathrm{VP}\\) \u4e8b\u5b9e\u4e0a\uff0c\u89e3\u6790\u7684\u8fc7\u7a0b\u8bf4\u660e\u4e86\u67d0\u4e9b\u7c7b\u4f3c\u7684\u89c4\u5219\u3002\u6211\u4eec\u4ece\u53e5\u5b50\u7b26\u53f7 S \u5f00\u59cb\u63a8\u5bfc\u89c4\u5219\uff0c\u4f9d\u6b21\u5bf9\u77ed\u8bed\u7ed3\u6784\u89c4\u5219\u8fdb\u884c\u53e0\u52a0\uff0c\u6700\u540e\u5e94\u7528\u66ff\u4ee3\u89c4\u5219\u6765\u4f7f\u7528\u62bd\u8c61\u7b26\u53f7\u4ee3\u66ff\u5b9e\u9645\u5355\u8bcd\u3002\u6839\u636e\u63d0\u53d6\u89c4\u5219\uff0c\u53ef\u4ee5\u751f\u6210\u76f8\u4f3c\u7684\u53e5\u5b50\u3002\u5982\u679c\u89c4\u5219\u6b63\u786e\uff0c\u90a3\u4e48\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4ea7\u751f\u7684\u4efb\u4f55\u53e5\u5b50\u90fd\u5e94\u8be5\u5728\u8bed\u6cd5\u4e0a\u6b63\u786e\u3002\u7136\u800c\uff0c\u751f\u6210\u7684\u53e5\u5b50\u5728\u8bed\u6cd5\u4e0a\u53ef\u80fd\u662f\u6b63\u786e\u7684\uff0c\u4f46\u5728\u8bed\u4e49\u4e0a\u5374\u662f\u8352\u8c2c\u7684\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u4f8b\u5b50: Colorless green ideas sleep furiously","title":"2.1 Constituent"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#22-constituency-parse-tree","text":"\u6709\u8da3\u7684\u662f\uff0c\u5728\u81ea\u7136\u8bed\u8a00\u4e2d\uff0c\u8fd9\u4e9b\u6210\u5206\u5f88\u53ef\u80fd\u5f7c\u6b64\u5d4c\u5957\u5728\u4e00\u8d77\u3002\u56e0\u6b64\uff0c\u8fd9\u4e9b\u77ed\u8bed\u7684\u81ea\u7136\u8868\u793a\u5f62\u5f0f\u662f\u6811\u3002\u901a\u5e38\u6211\u4eec\u4f7f\u7528\u6210\u5206\u89e3\u6790\u6811\u6765\u6f14\u793a\u89e3\u6790\u8fc7\u7a0b\u3002\u57fa\u4e8e\u7ed3\u6784\u8bed\u6cd5\u7684\u6210\u5206\u89e3\u6790\u6811\u53ef\u4ee5\u533a\u5206\u7ec8\u7aef\u8282\u70b9\u548c\u975e\u7ec8\u7aef\u8282\u70b9\u3002\u6811\u4e2d\u7684\u975e\u7ec8\u7ed3\u7b26\u88ab\u6807\u8bb0\u4e3a\u77ed\u8bed\u7684\u7c7b\u578b(\u4f8b\u5982\u540d\u8bcd\u77ed\u8bed)\uff0c\u7ec8\u7ed3\u7b26\u662f\u53e5\u5b50\u4e2d\u7684\u51c6\u786e\u5355\u8bcd\u3002\u4ee5 \u201cJohn hit the ball\u201d \u4e3a\u4f8b\uff0c\u82f1\u8bed\u53e5\u5b50\u7684\u53e5\u6cd5\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u6211\u4eec\u6709\u4e00\u4e2a\u89e3\u6790\u6811\uff0c\u4ece\u8868\u793a\u6574\u4e2a\u53e5\u5b50\u7684\u6839S\u5f00\u59cb\uff0c\u5230\u8868\u793a\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u7684\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u7ed3\u675f\u3002\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u7f29\u5199\uff1a S \u4ee3\u8868\u53e5\u5b50\uff0c\u6700\u9ad8\u7ea7\u7684\u7ed3\u6784 NP \u4ee3\u8868\u540d\u8bcd\u77ed\u8bed\uff0c\u5305\u62ec\u53e5\u5b50\u7684\u4e3b\u8bed\u548c\u5bbe\u8bed VP \u4ee3\u8868\u52a8\u8bcd\u77ed\u8bed\uff0c\u5145\u5f53\u8c13\u8bed V \u4ee3\u8868\u52a8\u8bcd D \u4ee3\u8868\u9650\u5b9a\u8bcd\uff0c\u4f8b\u5982 \u201cthe\u201d N \u4ee3\u8868\u540d\u8bcd \u6ce8\u610f\uff1a\u56de\u5230\u53e5\u5b50\u8868\u793a\uff0c\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u89e3\u6790\u6811\u5462\uff1f\u6211\u4eec\u5728\u8fd9\u4e00\u7cfb\u5217\u8bfe\u5802\u7b14\u8bb0\u4e2d\u89c2\u5bdf\u5230\u7684RNNs\u4f9d\u8d56\u4e8e\u8fd9\u6837\u7684\u521d\u59cb\u89e3\u6790\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u7684\u662f\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u800c\u8fd9\u4e2a\u77ed\u8bed\u7684\u4e0a\u4e0b\u6587\u5728\u5b83\u7684\u53f3\u8fb9\u4f1a\u600e\u6837\uff1f\u5982\u679c\u6211\u4eec\u53ea\u5728\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u4e0a\u5e94\u7528Softmax\uff0c\u90a3\u4e48\u6700\u540e\u51e0\u4e2a\u5b57\u5c06\u5bf9\u8f93\u51fa\u4ea7\u751f\u4e0d\u6210\u6bd4\u4f8b\u7684\u5927\u5f71\u54cd\uff0c\u4f8b\u5982\uff0c\u5206\u7c7b\u3002\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u6b63\u5982\u4e4b\u524d\u7684\u8bb2\u4e49\u6240\u8ff0\u3002","title":"2.2 Constituency Parse Tree"},{"location":"CS224n-2019-18-Tree%20Recursive%20Neural%20Networks%2C%20Constituency%20Parsing%2C%20and%20Sentiment/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-19-Safety%2C%20Bias%2C%20and%20Fairness/","text":"Lecture 19 Safety, Bias, and Fairness \u00b6 Prototype Theory \u5206\u7c7b\u7684\u76ee\u7684\u4e4b\u4e00\u662f\u51cf\u5c11\u523a\u6fc0\u884c\u4e3a\u548c\u8ba4\u77e5\u4e0a\u53ef\u7528\u7684\u6bd4\u4f8b\u7684\u65e0\u9650\u5dee\u5f02 \u7269\u54c1\u7684\u4e00\u4e9b\u6838\u5fc3\u3001\u539f\u578b\u6982\u5ff5\u53ef\u80fd\u6765\u81ea\u4e8e\u5b58\u50a8\u7684\u5bf9\u8c61\u7c7b\u522b\u7684\u5178\u578b\u5c5e\u6027(Rosch, 1975) \u4e5f\u53ef\u4ee5\u5b58\u50a8\u8303\u4f8b(Wu & Barsalou, 2009) Doctor \u2014\u2014 Female Doctor \u5927\u591a\u6570\u53d7\u8bd5\u8005\u5ffd\u89c6\u4e86\u533b\u751f\u662f\u5973\u6027\u7684\u53ef\u80fd\u6027\uff0c\u5305\u62ec\u7537\u6027\u3001\u5973\u6027\u548c\u81ea\u79f0\u5973\u6743\u4e3b\u4e49\u8005\u7684\u4eba\u4eec\u3002 murdered \u662f blinked \u51fa\u73b0\u6b21\u6570\u7684\u5341\u500d \u6211\u4eec\u4e0d\u503e\u5411\u4e8e\u63d0\u53ca\u7728\u773c\u548c\u547c\u5438\u7b49\u4e8b\u60c5 Human Reporting Bias\uff1a\u4eba\u4eec\u5199\u4f5c\u4e2d\u7684\u884c\u4e3a\u3001\u7ed3\u679c\u6216\u5c5e\u6027\u7684\u9891\u7387\u5e76\u4e0d\u53cd\u6620\u771f\u5b9e\u4e16\u754c\u7684\u9891\u7387\uff0c\u4e5f\u4e0d\u53cd\u6620\u67d0\u4e00\u5c5e\u6027\u5728\u591a\u5927\u7a0b\u5ea6\u4e0a\u662f\u67d0\u4e00\u7c7b\u4e2a\u4f53\u7684\u7279\u5f81\u3002 \u66f4\u591a\u5173\u4e8e\u6211\u4eec\u5904\u7406\u4e16\u754c\u548c\u6211\u4eec\u8ba4\u4e3a\u975e\u51e1\u7684\u4e1c\u897f\u7684\u5b9e\u9645\u60c5\u51b5\u3002\u8fd9\u5f71\u54cd\u5230\u6211\u4eec\u5b66\u4e60\u7684\u4e00\u5207\u3002 \u6570\u636e Reporting bias \u62a5\u544a\u504f\u89c1:\u4eba\u4eec\u5206\u4eab\u7684\u5e76\u4e0d\u662f\u771f\u5b9e\u4e16\u754c\u9891\u7387\u7684\u53cd\u6620 Selection Bias \u9009\u62e9\u504f\u5dee:\u9009\u62e9\u4e0d\u53cd\u6620\u968f\u673a\u6837\u672c Out-group homogeneity bias \u5916\u7fa4\u4f53\u540c\u8d28\u6027\u504f\u89c1:People tend to see outgroup members as more alike than ingroup members when comparing attitudes, values, personality traits, and other characteristics \u89e3\u91ca Confirmation bias \u786e\u8ba4\u504f\u89c1:\u503e\u5411\u4e8e\u5bfb\u627e\u3001\u89e3\u91ca\u3001\u652f\u6301\u548c\u56de\u5fc6\u4fe1\u606f\uff0c\u4ee5\u786e\u8ba4\u4e00\u4e2a\u4eba\u5148\u524d\u5b58\u5728\u7684\u4fe1\u5ff5\u6216\u5047\u8bbe Overgeneralization \u6cdb\u5316\u8fc7\u5ea6:\u6839\u636e\u8fc7\u4e8e\u7b3c\u7edf\u548c/\u6216\u4e0d\u591f\u5177\u4f53\u7684\u4fe1\u606f\u5f97\u51fa\u7ed3\u8bba Correlation fallacy \u76f8\u5173\u6027\u8c2c\u8bef:\u6df7\u6dc6\u76f8\u5173\u6027\u548c\u56e0\u679c\u5173\u7cfb Automation bias \u81ea\u52a8\u5316\u504f\u5dee:\u4eba\u7c7b\u503e\u5411\u4e8e\u559c\u6b22\u6765\u81ea\u81ea\u52a8\u5316\u51b3\u7b56\u7cfb\u7edf\u7684\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u81ea\u52a8\u5316\u7684\u76f8\u4e92\u77db\u76fe\u7684\u4fe1\u606f Biases in Data Selection Bias \u9009\u62e9\u504f\u5dee:\u9009\u62e9\u4e0d\u53cd\u6620\u968f\u673a\u6837\u672c Out-group homogeneity bias \u5916\u7fa4\u4f53\u540c\u8d28\u6027\u504f\u89c1\uff1a\u5728\u6bd4\u8f83\u6001\u5ea6\u3001\u4ef7\u503c\u89c2\u3001\u4e2a\u6027\u7279\u5f81\u548c\u5176\u4ed6\u7279\u5f81\u65f6\uff0c\u5f80\u5f80\u7fa4\u4f53\u5916\u7684\u6210\u5458\u8ba4\u4e3a\u6bd4\u7fa4\u4f53\u5185\u7684\u6210\u5458\u66f4\u76f8\u4f3c \u8fd9\u6709\u4e9b\u96be\u4ee5\u7406\u89e3\uff1a\u610f\u601d\u5c31\u662f\u5de6\u8fb9\u7684\u56db\u53ea\u732b\u4e4b\u95f4\u662f\u975e\u5e38\u4e0d\u540c\u7684\uff0c\u4f46\u662f\u5728\u72d7\u7684\u773c\u91cc\u4ed6\u4eec\u662f\u76f8\u540c\u7684 Biases in Data \u2192 Biased Data Representation \u4f60\u53ef\u80fd\u5bf9\u4f60\u80fd\u60f3\u5230\u7684\u6bcf\u4e00\u4e2a\u7fa4\u4f53\u90fd\u6709\u9002\u5f53\u6570\u91cf\u7684\u6570\u636e\uff0c\u4f46\u6709\u4e9b\u7fa4\u4f53\u7684\u8868\u73b0\u4e0d\u5982\u5176\u4ed6\u7fa4\u4f53\u79ef\u6781\u3002 Biases in Data \u2192 Biased Labels \u6570\u636e\u96c6\u4e2d\u7684\u6ce8\u91ca\u5c06\u53cd\u6620\u6ce8\u91ca\u8005\u7684\u4e16\u754c\u89c2 Biases in Interpretation Confirmation bias \u786e\u8ba4\u504f\u89c1:\u503e\u5411\u4e8e\u5bfb\u627e\u3001\u89e3\u91ca\u3001\u652f\u6301\u548c\u56de\u5fc6\u4fe1\u606f\uff0c\u4ee5\u786e\u8ba4\u4e00\u4e2a\u4eba\u5148\u524d\u5b58\u5728\u7684\u4fe1\u5ff5\u6216\u5047\u8bbe Overgeneralization \u6cdb\u5316\u8fc7\u5ea6:\u6839\u636e\u8fc7\u4e8e\u7b3c\u7edf\u548c/\u6216\u4e0d\u591f\u5177\u4f53\u7684\u4fe1\u606f\u5f97\u51fa\u7ed3\u8bba\uff08\u76f8\u5173\uff1a\u8fc7\u62df\u5408\uff09 Correlation fallacy \u76f8\u5173\u6027\u8c2c\u8bef:\u6df7\u6dc6\u76f8\u5173\u6027\u548c\u56e0\u679c\u5173\u7cfb Automation bias \u81ea\u52a8\u5316\u504f\u5dee:\u4eba\u7c7b\u503e\u5411\u4e8e\u559c\u6b22\u6765\u81ea\u81ea\u52a8\u5316\u51b3\u7b56\u7cfb\u7edf\u7684\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u81ea\u52a8\u5316\u7684\u76f8\u4e92\u77db\u76fe\u7684\u4fe1\u606f \u4f1a\u5f62\u6210\u53cd\u9988\u5faa\u73af \u8fd9\u88ab\u79f0\u4e3a Bias Network Effect \u4ee5\u53ca Bias \u201cLaundering\u201d \u4eba\u7c7b\u6570\u636e\u5ef6\u7eed\u4e86\u4eba\u7c7b\u7684\u504f\u89c1\u3002\u5f53ML\u4ece\u4eba\u7c7b\u6570\u636e\u4e2d\u5b66\u4e60\u65f6\uff0c\u7ed3\u679c\u662f\u4e00\u4e2a\u504f\u7f6e\u7f51\u7edc\u6548\u5e94\u3002 BIAS = BAD ?? \u201cBias\u201d can be Good, Bad, Neutral \u7edf\u8ba1\u4ee5\u53ca ML\u4e2d\u7684\u504f\u5dee \u4f30\u8ba1\u503c\u7684\u504f\u5dee\uff1a\u9884\u6d4b\u503c\u4e0e\u6211\u4eec\u8bd5\u56fe\u9884\u6d4b\u7684\u6b63\u786e\u503c\u4e4b\u95f4\u7684\u5dee\u5f02 \u201c\u504f\u5dee\u201d\u4e00\u8bcdb(\u5982y = mx + b) \u8ba4\u77e5\u504f\u89c1 \u786e\u8ba4\u6027\u504f\u5dee\u3001\u8fd1\u56e0\u6027\u504f\u5dee\u3001\u4e50\u89c2\u6027\u504f\u5dee \u7b97\u6cd5\u504f\u5dee \u5bf9\u4e0e\u79cd\u65cf\u3001\u6536\u5165\u3001\u6027\u53d6\u5411\u3001\u5b97\u6559\u3001\u6027\u522b\u548c\u5176\u4ed6\u5386\u53f2\u4e0a\u4e0e\u6b67\u89c6\u548c\u8fb9\u7f18\u5316\u76f8\u5173\u7684\u7279\u5f81\u76f8\u5173\u7684\u4eba\u7684\u4e0d\u516c\u5e73\u3001\u4e0d\u516c\u5e73\u6216\u504f\u89c1\u5f85\u9047\uff0c\u4f55\u65f6\u4f55\u5730\u5728\u7b97\u6cd5\u7cfb\u7edf\u6216\u7b97\u6cd5\u8f85\u52a9\u51b3\u7b56\u4e2d\u4f53\u73b0\u51fa\u6765\u201d \u5982\u4f55\u907f\u514d\u7b97\u6cd5\u504f\u5dee\uff0c\u5f00\u53d1\u51fa\u4e0d\u4f1a\u653e\u5927\u5dee\u5f02\u7684\u7b97\u6cd5 Predicting Future Criminal Behavior \u7b97\u6cd5\u8bc6\u522b\u6f5c\u5728\u7684\u72af\u7f6a\u70ed\u70b9 \u57fa\u4e8e\u4e4b\u524d\u62a5\u9053\u7684\u72af\u7f6a\u7684\u5730\u65b9\uff0c\u800c\u4e0d\u662f\u5df2\u77e5\u53d1\u751f\u5728\u54ea\u91cc \u4ece\u8fc7\u53bb\u9884\u6d4b\u672a\u6765\u4e8b\u4ef6 \u9884\u6d4b\u7684\u662f\u902e\u6355\u7684\u5730\u65b9\u800c\u4e0d\u662f\u72af\u7f6a\u7684\u5730\u65b9 Predicting Sentencing Prater (\u767d\u4eba)\u989d\u5b9a\u4f4e\u98ce\u9669\u5165\u5e97\u884c\u7a83\u540e,\u5c3d\u7ba1\u4e24\u4e2a\u6b66\u88c5\u62a2\u52ab;\u4e00\u6b21\u6301\u68b0\u62a2\u52ab\u672a\u9042\u3002 Borden (\u9ed1\u8272)\u989d\u5b9a\u9ad8\u5371\u540e\u5979\u548c\u4e00\u4e2a\u670b\u53cb(\u4f46\u5728\u8b66\u5bdf\u5230\u6765\u4e4b\u524d\u8fd4\u56de)\u4e00\u8f86\u81ea\u884c\u8f66\u548c\u6469\u6258\u8f66\u5750\u5728\u5916\u9762\u3002 \u4e24\u5e74\u540e\uff0cBorden\u6ca1\u6709\u88ab\u6307\u63a7\u4efb\u4f55\u65b0\u7684\u7f6a\u884c\u3002Prater\u56e0\u91cd\u5927\u76d7\u7a83\u7f6a\u88ab\u52248\u5e74\u6709\u671f\u5f92\u5211\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u8ba4\u4e3a\u9ed1\u4eba\u7684\u72af\u7f6a\u98ce\u9669\u9ad8\u4e8e\u62dc\u4ec1 Predicting Criminality \u4ee5\u8272\u5217\u542f\u52a8 Faception Faception\u662f\u7b2c\u4e00\u4e2a\u79d1\u6280\u9886\u57df\u7684\u7387\u5148\u9762\u5e02\u7684\uff0c\u4e13\u6709\u7684\u8ba1\u7b97\u673a\u89c6\u89c9\u548c\u673a\u5668\u5b66\u4e60\u6280\u672f\u5206\u6790\u4eba\u5458\u548c\u63ed\u793a\u4ed6\u4eec\u7684\u4e2a\u6027\u53ea\u57fa\u4e8e\u4ed6\u4eec\u7684\u9762\u90e8\u56fe\u50cf\u3002 \u63d0\u4f9b\u4e13\u4e1a\u7684\u5f15\u64ce\u4ece\u8138\u7684\u5f62\u8c61\u8bc6\u522b\u201c\u9ad8\u667a\u5546\u201d\u3001\u201c\u767d\u9886\u72af\u7f6a\u201d\u3001\u201c\u604b\u7ae5\u7656\u201d,\u548c\u201c\u6050\u6016\u5206\u5b50\u201d\u3002 \u4e3b\u8981\u5ba2\u6237\u4e3a\u56fd\u571f\u5b89\u5168\u548c\u516c\u5171\u5b89\u5168\u3002 \u201c Automated Inference on Criminality using Face Images \u201d Wu and Zhang, 2016. arXiv 1856\u4e2a\u7d27\u5bc6\u88c1\u526a\u7684\u9762\u5b54\u7684\u56fe\u50cf,\u5305\u62ec\u201c\u901a\u7f09\u72af\u201dID\u7279\u5b9a\u533a\u57df\u7684\u7167\u7247 \u5b58\u5728\u786e\u8ba4\u504f\u5dee\u548c\u76f8\u5173\u6027\u504f\u5dee See our longer piece on Medium, \u201cPhysiognomy\u2019s New Clothes\u201d Selection Bias + Experimenter\u2019s Bias + Confirmation Bias + Correlation Fallacy + Feedback Loops Predicting Criminality - The Media Blitz (Claiming to) Predict Internal Qualities Subject To Discrimination Predicting Homosexuality Wang and Kosinski, Deep neural networks are more accurate than humans at detecting sexual orientation from facial images , 2017. \u201cSexual orientation detector\u201d using 35,326 images from public profiles on a US dating website. \u201c\u4e0e\u6027\u53d6\u5411\u7684\u4ea7\u524d\u6fc0\u7d20\u7406\u8bba(PHT)\u76f8\u4e00\u81f4\uff0c\u7537\u540c\u6027\u604b\u8005\u548c\u5973\u540c\u6027\u604b\u8005\u5f80\u5f80\u5177\u6709\u975e\u5178\u578b\u7684\u6027\u522b\u9762\u90e8\u5f62\u6001\u3002\u201d \u5728\u81ea\u62cd\u4e2d\uff0c\u540c\u6027\u604b\u548c\u5f02\u6027\u604b\u4e4b\u95f4\u7684\u5dee\u5f02\u4e0e\u6253\u626e\u3001\u8868\u73b0\u548c\u751f\u6d3b\u65b9\u5f0f\u6709\u5173\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6587\u5316\u5dee\u5f02\uff0c\u800c\u4e0d\u662f\u9762\u90e8\u7ed3\u6784\u7684\u5dee\u5f02 See our longer response on Medium, \u201c Do Algorithms Reveal Sexual Orientation or Just Expose our Stereotypes? \u201d Selection Bias + Experimenter\u2019s Bias + Correlation Fallacy Measuring Algorithmic Bias \u8bc4\u4f30\u516c\u5e73\u6027\u548c\u5305\u5bb9\u6027 \u5206\u7c7b\u8bc4\u4f30 \u4e3a\u6bcf\u4e2a\u521b\u5efa\uff08\u5b50\u7ec4\uff0c\u9884\u6d4b\uff09\u5bf9\u3002\u8de8\u5b50\u7ec4\u6bd4\u8f83 \u4f8b\u5982 \u5973\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u7537\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u4ea4\u53c9\u8bc4\u4f30 \u4e3a\u6bcf\u4e2a\u521b\u5efa\uff08\u5b50\u7ec41\uff0c\u5b50\u7ec42\uff0c\u9884\u6d4b\uff09\u5bf9\u3002\u8de8\u5b50\u7ec4\u6bd4\u8f83 \u4f8b\u5982 \u9ed1\u4eba\u5973\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u767d\u4eba\uff0c\u9762\u90e8\u68c0\u6d4b Evaluate for Fairness & Inclusion: Confusion Matrix Evaluate for Fairness & Inclusion \u201c\u673a\u4f1a\u5e73\u7b49\u201d\u516c\u5e73\u51c6\u5219\uff1a\u5b50\u7ec4\u7684 recall \u662f\u76f8\u7b49\u7684 \u201c\u9884\u6d4b\u5e73\u4ef7\u201d\u516c\u5e73\u51c6\u5219\uff1a\u5b50\u7ec4\u7684 precision \u662f\u76f8\u7b49 \u9009\u62e9\u8bc4\u4ef7\u6307\u6807\u7684\u53ef\u63a5\u53d7\u7684\u5047\u9633\u6027\u548c\u5047\u9634\u6027\u4e4b\u95f4\u7684\u6743\u8861 False Positives Might be Better than False Negatives Privacy in Images Spam Filtering AI Can Unintentionally Lead to Unjust Outcomes \u7f3a\u4e4f\u5bf9\u6570\u636e\u548c\u6a21\u578b\u4e2d\u7684\u504f\u89c1\u6765\u6e90\u7684\u6d1e\u5bdf\u529b \u7f3a\u4e4f\u5bf9\u53cd\u9988\u5faa\u73af\u7684\u6d1e\u5bdf\u529b \u7f3a\u4e4f\u7ec6\u5fc3\uff0c\u5206\u7c7b\u7684\u8bc4\u4ef7 \u4eba\u7c7b\u504f\u89c1\u5728\u89e3\u91ca\u548c\u63a5\u53d7\u7ed3\u679c It\u2019s up to us to influence how AI evolves. Here are some things we can do. Data Data Really, Really Matters \u4e86\u89e3\u60a8\u7684\u6570\u636e\uff1a\u504f\u5dee\uff0c\u76f8\u5173\u6027 \u4ece\u7c7b\u4f3c\u7684\u5206\u5e03\u653e\u5f03\u5355\u4e00\u8bad\u7ec3\u96c6/\u6d4b\u8bd5\u96c6 \u7ed3\u5408\u6765\u81ea\u591a\u4e2a\u6765\u6e90\u7684\u8f93\u5165 \u5bf9\u4e8e\u56f0\u96be\u7684\u7528\u4f8b\u4f7f\u7528held-out\u6d4b\u8bd5\u96c6 \u4e0e\u4e13\u5bb6\u8ba8\u8bba\u5176\u4ed6\u4fe1\u53f7 Understand Your Data Skews Facets: pair-code.github.io \u6ca1\u6709\u4e00\u4e2a\u6570\u636e\u96c6\u662f\u6ca1\u6709\u504f\u5dee\u7684\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u6709\u504f\u5dee\u7684\u4e16\u754c\u3002\u91cd\u70b9\u662f\u77e5\u9053\u662f\u4ec0\u4e48\u504f\u5dee\u3002 Machine Learning Use ML Techniques for Bias Mitigation and Inclusion Bias Mitigation \u504f\u5dee\u7f13\u89e3 \u5220\u9664\u6709\u95ee\u9898\u7684\u8f93\u51fa\u7684\u4fe1\u53f7 \u523b\u677f\u5370\u8c61 \u6027\u522b\u6b67\u89c6,\u79cd\u65cf\u6b67\u89c6,*-ism \u53c8\u79f0\u4e3a\u201cdebiasing\u201d Inclusion \u6dfb\u52a0\u4fe1\u53f7\u6240\u9700\u7684\u53d8\u91cf \u589e\u52a0\u6a21\u578b\u6027\u80fd \u6ce8\u610f\u6027\u80fd\u5f88\u5dee\u7684\u5b50\u7ec4\u6216\u6570\u636e\u7247 Multi-task Learning to Increase Inclusion Multiple Tasks + Deep Learning for Inclusion: Multi-task Learning Example Benton, Mitchell, Hovy. Multi-task learning for Mental Health Conditions with Limited Social Media Data . EACL, 2017. \u4e0e\u5bbe\u5915\u6cd5\u5c3c\u4e9a\u5927\u5b66WWP\u5408\u4f5c \u76f4\u63a5\u4e0e\u4e34\u5e8a\u533b\u751f\u5408\u4f5c \u76ee\u6807 \u7cfb\u7edf\u8b66\u544a\u4e34\u5e8a\u533b\u751f\u5982\u679c\u4f01\u56fe\u81ea\u6740\u8feb\u5728\u7709\u776b \u51e0\u4e2a\u8bad\u7ec3\u5b9e\u4f8b\u53ef\u7528\u65f6\u8bca\u65ad\u7684\u53ef\u884c\u6027 \u5185\u90e8\u6570\u636e \u7535\u5b50\u5065\u5eb7\u8bb0\u5f55 \u75c5\u4eba\u6216\u75c5\u4eba\u5bb6\u5c5e\u63d0\u4f9b \u5305\u62ec\u5fc3\u7406\u5065\u5eb7\u8bca\u65ad,\u81ea\u6740\u4f01\u56fe,\u7ade\u8d5b \u793e\u4ea4\u5a92\u4f53\u6570\u636e \u4ee3\u7406\u6570\u636e Twitter \u5a92\u4f53\u6570\u636e \u4ee3\u7406\u5fc3\u7406\u5065\u5eb7\u8bca\u65ad\u4e2d\u4f7f\u7528\u81ea\u79f0\u8bca\u65ad \u6211\u88ab\u8bca\u65ad\u51fa\u60a3\u6709 X \u6211\u8bd5\u56fe\u81ea\u6740 Single-Task: Logistic Regression Single-Task: Deep Learning Multiple Tasks with Basic Logistic Regression Multi-task Learning Multitask, given cormorbidity Benton, Mitchell, Hovy. Multi-task learning for Mental Health Conditions with Limited Social Media Data. EACL, 2017. Improved Performance across Subgroups Reading for the masses\u2026. Adversarial Multi-task Learning to Mitigate Bias Multitask Adversarial Learning Beutel, Chen, Zhao, Chi. Data Decisions and Theoretical Implications when Adversarially Learning Fair Representations . FAT/ML, 2017. Zhang, Lemoine, Mitchell. Mitigating Unwanted Biases with Adversarial Learning . AIES, 2018. Equality of Opportunity in Supervised Learning \u8003\u8651\u5230\u771f\u6b63\u6b63\u786e\u7684\u51b3\u7b56\uff0c\u5206\u7c7b\u5668\u7684\u8f93\u51fa\u51b3\u7b56\u5e94\u8be5\u5728\u654f\u611f\u7279\u5f81\u4e4b\u95f4\u662f\u76f8\u540c\u7684\u3002 Case Study: Conversation AI Toxicity Conversation-AI ML \u63d0\u9ad8\u5728\u7ebf\u5bf9\u8bdd\u7684\u89c4\u6a21 Research Collaboration Jigsaw, CAT, several Google-internal teams, and external partners (NYTimes, Wikimedia, etc) http://perspectiveapi.com/ Unintended Bias \u6a21\u578b\u9519\u8bef\u5730\u5c06\u7ecf\u5e38\u53d7\u5230\u653b\u51fb\u7684\u8eab\u4efd\u4e0e\u6bd2\u6027\u8054\u7cfb\u8d77\u6765\uff1aFalse Positive Bias Bias Source and Mitigation \u504f\u89c1\u9020\u6210\u7684\u6570\u636e\u4e0d\u5e73\u8861 \u7ecf\u5e38\u88ad\u51fb\u4e86\u6709\u6bd2\u7684\u8eab\u4efd\u6240\u5360\u6bd4\u4f8b\u8bc4\u8bba\u957f\u5ea6\u95ee\u9898 \u6dfb\u52a0\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e2d\u5047\u5b9a\u7684\u65e0\u6bd2\u6570\u636e\u6765\u4fee\u590d\u8fd9\u79cd\u4e0d\u5e73\u8861 \u539f\u59cb\u6570\u636e\u96c6\u6709127820\u4e2a\u4f8b\u5b50 4620\u4e2a\u8865\u5145\u7684\u65e0\u6bd2\u4f8b\u5b50 Measuring Unintended Bias - Synthetic Datasets \u6311\u6218\u4e0e\u771f\u5b9e\u6570\u636e \u73b0\u6709\u6570\u636e\u96c6\u662f\u5c0f and/or \u6709\u9519\u8bef\u7684\u76f8\u5173\u6027 \u6bcf\u4e2a\u4f8b\u5b50\u662f\u5b8c\u5168\u72ec\u7279\u7684 Approach: \"bias madlibs\u201d: \u4e00\u4e2a\u7efc\u5408\u751f\u6210\u7684\u6a21\u677f\u5316\u6570\u636e\u96c6\u8fdb\u884c\u8bc4\u4f30 Assumptions \u6570\u636e\u96c6\u662f\u53ef\u9760\u7684 \u548c\u4ea7\u54c1\u76f8\u4f3c\u7684\u5206\u5e03 \u5ffd\u7565\u6ce8\u91ca\u5668\u504f\u89c1 \u6ca1\u6709\u56e0\u679c\u5206\u6790 Deep Learning Model CNN \u67b6\u6784 \u9884\u8bad\u7ec3\u7684 GloVe \u5d4c\u5165 Keras \u5b9e\u73b0 Measuring Model Performance How good is the model at distinguishing good from bad examples? (ROC-AUC) AUC (for a given test set) = Given two randomly chosen examples, one in-class (e.g. one is toxic and the other is not), AUC is the probability that the model will give the in-class example the higher score. Types of Bias Low Subgroup Performance \u6a21\u578b\u5728\u5b50\u7ec4\u6ce8\u91ca\u4e0a\u7684\u6027\u80fd\u6bd4\u5728\u603b\u4f53\u6ce8\u91ca\u4e0a\u5dee Metric : Subgroup AUC Subgroup Shift (Right) \u8be5\u6a21\u578b\u7cfb\u7edf\u5730\u5bf9\u6765\u81ea\u5b50\u7ec4\u7684\u8bc4\u4ef7\u6253\u5206\u66f4\u9ad8 Metric: BPSN AUC (Background Positive Subgroup Negative) Subgroup Shift (Left) \u8be5\u6a21\u578b\u7cfb\u7edf\u5730\u5bf9\u6765\u81ea\u5b50\u7ec4\u7684\u8bc4\u4ef7\u6253\u5206\u8f83\u4f4e\u3002 Metric: BNSP AUC (Background Negative Subgroup Positive) Release Responsibly Model Cards for Model Reporting \u76ee\u524d\u8fd8\u6ca1\u6709\u6a21\u578b\u53d1\u5e03\u65f6\u62a5\u544a\u6a21\u578b\u6548\u679c\u7684common practice What It Does \u4e00\u4efd\u5173\u6ce8\u6a21\u578b\u6027\u80fd\u900f\u660e\u5ea6\u7684\u62a5\u544a\uff0c\u4ee5\u9f13\u52b1\u8d1f\u8d23\u4efb\u7684\u4eba\u5de5\u667a\u80fd\u7684\u91c7\u7528\u548c\u5e94\u7528\u3002 How It Works \u8fd9\u662f\u4e00\u4e2a\u5bb9\u6613\u53d1\u73b0\u7684\u548c\u53ef\u7528\u7684\u5de5\u4ef6\u5728\u7528\u6237\u65c5\u7a0b\u4e2d\u91cd\u8981\u7684\u6b65\u9aa4\u4e3a\u4e00\u7ec4\u4e0d\u540c\u7684\u7528\u6237\u548c\u516c\u5171\u5229\u76ca\u76f8\u5173\u8005\u3002 Why It Matter \u5b83\u4f7f\u6a21\u578b\u5f00\u53d1\u4eba\u5458\u6709\u8d23\u4efb\u53d1\u5e03\u9ad8\u8d28\u91cf\u548c\u516c\u5e73\u7684\u6a21\u578b\u3002 Intended Use, Factors and Subgroups Metrics and Data Considerations, Recommendations Disaggregated Intersectional Evaluation Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"19 Safety, Bias, and Fairness"},{"location":"CS224n-2019-19-Safety%2C%20Bias%2C%20and%20Fairness/#lecture-19-safety-bias-and-fairness","text":"Prototype Theory \u5206\u7c7b\u7684\u76ee\u7684\u4e4b\u4e00\u662f\u51cf\u5c11\u523a\u6fc0\u884c\u4e3a\u548c\u8ba4\u77e5\u4e0a\u53ef\u7528\u7684\u6bd4\u4f8b\u7684\u65e0\u9650\u5dee\u5f02 \u7269\u54c1\u7684\u4e00\u4e9b\u6838\u5fc3\u3001\u539f\u578b\u6982\u5ff5\u53ef\u80fd\u6765\u81ea\u4e8e\u5b58\u50a8\u7684\u5bf9\u8c61\u7c7b\u522b\u7684\u5178\u578b\u5c5e\u6027(Rosch, 1975) \u4e5f\u53ef\u4ee5\u5b58\u50a8\u8303\u4f8b(Wu & Barsalou, 2009) Doctor \u2014\u2014 Female Doctor \u5927\u591a\u6570\u53d7\u8bd5\u8005\u5ffd\u89c6\u4e86\u533b\u751f\u662f\u5973\u6027\u7684\u53ef\u80fd\u6027\uff0c\u5305\u62ec\u7537\u6027\u3001\u5973\u6027\u548c\u81ea\u79f0\u5973\u6743\u4e3b\u4e49\u8005\u7684\u4eba\u4eec\u3002 murdered \u662f blinked \u51fa\u73b0\u6b21\u6570\u7684\u5341\u500d \u6211\u4eec\u4e0d\u503e\u5411\u4e8e\u63d0\u53ca\u7728\u773c\u548c\u547c\u5438\u7b49\u4e8b\u60c5 Human Reporting Bias\uff1a\u4eba\u4eec\u5199\u4f5c\u4e2d\u7684\u884c\u4e3a\u3001\u7ed3\u679c\u6216\u5c5e\u6027\u7684\u9891\u7387\u5e76\u4e0d\u53cd\u6620\u771f\u5b9e\u4e16\u754c\u7684\u9891\u7387\uff0c\u4e5f\u4e0d\u53cd\u6620\u67d0\u4e00\u5c5e\u6027\u5728\u591a\u5927\u7a0b\u5ea6\u4e0a\u662f\u67d0\u4e00\u7c7b\u4e2a\u4f53\u7684\u7279\u5f81\u3002 \u66f4\u591a\u5173\u4e8e\u6211\u4eec\u5904\u7406\u4e16\u754c\u548c\u6211\u4eec\u8ba4\u4e3a\u975e\u51e1\u7684\u4e1c\u897f\u7684\u5b9e\u9645\u60c5\u51b5\u3002\u8fd9\u5f71\u54cd\u5230\u6211\u4eec\u5b66\u4e60\u7684\u4e00\u5207\u3002 \u6570\u636e Reporting bias \u62a5\u544a\u504f\u89c1:\u4eba\u4eec\u5206\u4eab\u7684\u5e76\u4e0d\u662f\u771f\u5b9e\u4e16\u754c\u9891\u7387\u7684\u53cd\u6620 Selection Bias \u9009\u62e9\u504f\u5dee:\u9009\u62e9\u4e0d\u53cd\u6620\u968f\u673a\u6837\u672c Out-group homogeneity bias \u5916\u7fa4\u4f53\u540c\u8d28\u6027\u504f\u89c1:People tend to see outgroup members as more alike than ingroup members when comparing attitudes, values, personality traits, and other characteristics \u89e3\u91ca Confirmation bias \u786e\u8ba4\u504f\u89c1:\u503e\u5411\u4e8e\u5bfb\u627e\u3001\u89e3\u91ca\u3001\u652f\u6301\u548c\u56de\u5fc6\u4fe1\u606f\uff0c\u4ee5\u786e\u8ba4\u4e00\u4e2a\u4eba\u5148\u524d\u5b58\u5728\u7684\u4fe1\u5ff5\u6216\u5047\u8bbe Overgeneralization \u6cdb\u5316\u8fc7\u5ea6:\u6839\u636e\u8fc7\u4e8e\u7b3c\u7edf\u548c/\u6216\u4e0d\u591f\u5177\u4f53\u7684\u4fe1\u606f\u5f97\u51fa\u7ed3\u8bba Correlation fallacy \u76f8\u5173\u6027\u8c2c\u8bef:\u6df7\u6dc6\u76f8\u5173\u6027\u548c\u56e0\u679c\u5173\u7cfb Automation bias \u81ea\u52a8\u5316\u504f\u5dee:\u4eba\u7c7b\u503e\u5411\u4e8e\u559c\u6b22\u6765\u81ea\u81ea\u52a8\u5316\u51b3\u7b56\u7cfb\u7edf\u7684\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u81ea\u52a8\u5316\u7684\u76f8\u4e92\u77db\u76fe\u7684\u4fe1\u606f Biases in Data Selection Bias \u9009\u62e9\u504f\u5dee:\u9009\u62e9\u4e0d\u53cd\u6620\u968f\u673a\u6837\u672c Out-group homogeneity bias \u5916\u7fa4\u4f53\u540c\u8d28\u6027\u504f\u89c1\uff1a\u5728\u6bd4\u8f83\u6001\u5ea6\u3001\u4ef7\u503c\u89c2\u3001\u4e2a\u6027\u7279\u5f81\u548c\u5176\u4ed6\u7279\u5f81\u65f6\uff0c\u5f80\u5f80\u7fa4\u4f53\u5916\u7684\u6210\u5458\u8ba4\u4e3a\u6bd4\u7fa4\u4f53\u5185\u7684\u6210\u5458\u66f4\u76f8\u4f3c \u8fd9\u6709\u4e9b\u96be\u4ee5\u7406\u89e3\uff1a\u610f\u601d\u5c31\u662f\u5de6\u8fb9\u7684\u56db\u53ea\u732b\u4e4b\u95f4\u662f\u975e\u5e38\u4e0d\u540c\u7684\uff0c\u4f46\u662f\u5728\u72d7\u7684\u773c\u91cc\u4ed6\u4eec\u662f\u76f8\u540c\u7684 Biases in Data \u2192 Biased Data Representation \u4f60\u53ef\u80fd\u5bf9\u4f60\u80fd\u60f3\u5230\u7684\u6bcf\u4e00\u4e2a\u7fa4\u4f53\u90fd\u6709\u9002\u5f53\u6570\u91cf\u7684\u6570\u636e\uff0c\u4f46\u6709\u4e9b\u7fa4\u4f53\u7684\u8868\u73b0\u4e0d\u5982\u5176\u4ed6\u7fa4\u4f53\u79ef\u6781\u3002 Biases in Data \u2192 Biased Labels \u6570\u636e\u96c6\u4e2d\u7684\u6ce8\u91ca\u5c06\u53cd\u6620\u6ce8\u91ca\u8005\u7684\u4e16\u754c\u89c2 Biases in Interpretation Confirmation bias \u786e\u8ba4\u504f\u89c1:\u503e\u5411\u4e8e\u5bfb\u627e\u3001\u89e3\u91ca\u3001\u652f\u6301\u548c\u56de\u5fc6\u4fe1\u606f\uff0c\u4ee5\u786e\u8ba4\u4e00\u4e2a\u4eba\u5148\u524d\u5b58\u5728\u7684\u4fe1\u5ff5\u6216\u5047\u8bbe Overgeneralization \u6cdb\u5316\u8fc7\u5ea6:\u6839\u636e\u8fc7\u4e8e\u7b3c\u7edf\u548c/\u6216\u4e0d\u591f\u5177\u4f53\u7684\u4fe1\u606f\u5f97\u51fa\u7ed3\u8bba\uff08\u76f8\u5173\uff1a\u8fc7\u62df\u5408\uff09 Correlation fallacy \u76f8\u5173\u6027\u8c2c\u8bef:\u6df7\u6dc6\u76f8\u5173\u6027\u548c\u56e0\u679c\u5173\u7cfb Automation bias \u81ea\u52a8\u5316\u504f\u5dee:\u4eba\u7c7b\u503e\u5411\u4e8e\u559c\u6b22\u6765\u81ea\u81ea\u52a8\u5316\u51b3\u7b56\u7cfb\u7edf\u7684\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u81ea\u52a8\u5316\u7684\u76f8\u4e92\u77db\u76fe\u7684\u4fe1\u606f \u4f1a\u5f62\u6210\u53cd\u9988\u5faa\u73af \u8fd9\u88ab\u79f0\u4e3a Bias Network Effect \u4ee5\u53ca Bias \u201cLaundering\u201d \u4eba\u7c7b\u6570\u636e\u5ef6\u7eed\u4e86\u4eba\u7c7b\u7684\u504f\u89c1\u3002\u5f53ML\u4ece\u4eba\u7c7b\u6570\u636e\u4e2d\u5b66\u4e60\u65f6\uff0c\u7ed3\u679c\u662f\u4e00\u4e2a\u504f\u7f6e\u7f51\u7edc\u6548\u5e94\u3002 BIAS = BAD ?? \u201cBias\u201d can be Good, Bad, Neutral \u7edf\u8ba1\u4ee5\u53ca ML\u4e2d\u7684\u504f\u5dee \u4f30\u8ba1\u503c\u7684\u504f\u5dee\uff1a\u9884\u6d4b\u503c\u4e0e\u6211\u4eec\u8bd5\u56fe\u9884\u6d4b\u7684\u6b63\u786e\u503c\u4e4b\u95f4\u7684\u5dee\u5f02 \u201c\u504f\u5dee\u201d\u4e00\u8bcdb(\u5982y = mx + b) \u8ba4\u77e5\u504f\u89c1 \u786e\u8ba4\u6027\u504f\u5dee\u3001\u8fd1\u56e0\u6027\u504f\u5dee\u3001\u4e50\u89c2\u6027\u504f\u5dee \u7b97\u6cd5\u504f\u5dee \u5bf9\u4e0e\u79cd\u65cf\u3001\u6536\u5165\u3001\u6027\u53d6\u5411\u3001\u5b97\u6559\u3001\u6027\u522b\u548c\u5176\u4ed6\u5386\u53f2\u4e0a\u4e0e\u6b67\u89c6\u548c\u8fb9\u7f18\u5316\u76f8\u5173\u7684\u7279\u5f81\u76f8\u5173\u7684\u4eba\u7684\u4e0d\u516c\u5e73\u3001\u4e0d\u516c\u5e73\u6216\u504f\u89c1\u5f85\u9047\uff0c\u4f55\u65f6\u4f55\u5730\u5728\u7b97\u6cd5\u7cfb\u7edf\u6216\u7b97\u6cd5\u8f85\u52a9\u51b3\u7b56\u4e2d\u4f53\u73b0\u51fa\u6765\u201d \u5982\u4f55\u907f\u514d\u7b97\u6cd5\u504f\u5dee\uff0c\u5f00\u53d1\u51fa\u4e0d\u4f1a\u653e\u5927\u5dee\u5f02\u7684\u7b97\u6cd5 Predicting Future Criminal Behavior \u7b97\u6cd5\u8bc6\u522b\u6f5c\u5728\u7684\u72af\u7f6a\u70ed\u70b9 \u57fa\u4e8e\u4e4b\u524d\u62a5\u9053\u7684\u72af\u7f6a\u7684\u5730\u65b9\uff0c\u800c\u4e0d\u662f\u5df2\u77e5\u53d1\u751f\u5728\u54ea\u91cc \u4ece\u8fc7\u53bb\u9884\u6d4b\u672a\u6765\u4e8b\u4ef6 \u9884\u6d4b\u7684\u662f\u902e\u6355\u7684\u5730\u65b9\u800c\u4e0d\u662f\u72af\u7f6a\u7684\u5730\u65b9 Predicting Sentencing Prater (\u767d\u4eba)\u989d\u5b9a\u4f4e\u98ce\u9669\u5165\u5e97\u884c\u7a83\u540e,\u5c3d\u7ba1\u4e24\u4e2a\u6b66\u88c5\u62a2\u52ab;\u4e00\u6b21\u6301\u68b0\u62a2\u52ab\u672a\u9042\u3002 Borden (\u9ed1\u8272)\u989d\u5b9a\u9ad8\u5371\u540e\u5979\u548c\u4e00\u4e2a\u670b\u53cb(\u4f46\u5728\u8b66\u5bdf\u5230\u6765\u4e4b\u524d\u8fd4\u56de)\u4e00\u8f86\u81ea\u884c\u8f66\u548c\u6469\u6258\u8f66\u5750\u5728\u5916\u9762\u3002 \u4e24\u5e74\u540e\uff0cBorden\u6ca1\u6709\u88ab\u6307\u63a7\u4efb\u4f55\u65b0\u7684\u7f6a\u884c\u3002Prater\u56e0\u91cd\u5927\u76d7\u7a83\u7f6a\u88ab\u52248\u5e74\u6709\u671f\u5f92\u5211\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u8ba4\u4e3a\u9ed1\u4eba\u7684\u72af\u7f6a\u98ce\u9669\u9ad8\u4e8e\u62dc\u4ec1 Predicting Criminality \u4ee5\u8272\u5217\u542f\u52a8 Faception Faception\u662f\u7b2c\u4e00\u4e2a\u79d1\u6280\u9886\u57df\u7684\u7387\u5148\u9762\u5e02\u7684\uff0c\u4e13\u6709\u7684\u8ba1\u7b97\u673a\u89c6\u89c9\u548c\u673a\u5668\u5b66\u4e60\u6280\u672f\u5206\u6790\u4eba\u5458\u548c\u63ed\u793a\u4ed6\u4eec\u7684\u4e2a\u6027\u53ea\u57fa\u4e8e\u4ed6\u4eec\u7684\u9762\u90e8\u56fe\u50cf\u3002 \u63d0\u4f9b\u4e13\u4e1a\u7684\u5f15\u64ce\u4ece\u8138\u7684\u5f62\u8c61\u8bc6\u522b\u201c\u9ad8\u667a\u5546\u201d\u3001\u201c\u767d\u9886\u72af\u7f6a\u201d\u3001\u201c\u604b\u7ae5\u7656\u201d,\u548c\u201c\u6050\u6016\u5206\u5b50\u201d\u3002 \u4e3b\u8981\u5ba2\u6237\u4e3a\u56fd\u571f\u5b89\u5168\u548c\u516c\u5171\u5b89\u5168\u3002 \u201c Automated Inference on Criminality using Face Images \u201d Wu and Zhang, 2016. arXiv 1856\u4e2a\u7d27\u5bc6\u88c1\u526a\u7684\u9762\u5b54\u7684\u56fe\u50cf,\u5305\u62ec\u201c\u901a\u7f09\u72af\u201dID\u7279\u5b9a\u533a\u57df\u7684\u7167\u7247 \u5b58\u5728\u786e\u8ba4\u504f\u5dee\u548c\u76f8\u5173\u6027\u504f\u5dee See our longer piece on Medium, \u201cPhysiognomy\u2019s New Clothes\u201d Selection Bias + Experimenter\u2019s Bias + Confirmation Bias + Correlation Fallacy + Feedback Loops Predicting Criminality - The Media Blitz (Claiming to) Predict Internal Qualities Subject To Discrimination Predicting Homosexuality Wang and Kosinski, Deep neural networks are more accurate than humans at detecting sexual orientation from facial images , 2017. \u201cSexual orientation detector\u201d using 35,326 images from public profiles on a US dating website. \u201c\u4e0e\u6027\u53d6\u5411\u7684\u4ea7\u524d\u6fc0\u7d20\u7406\u8bba(PHT)\u76f8\u4e00\u81f4\uff0c\u7537\u540c\u6027\u604b\u8005\u548c\u5973\u540c\u6027\u604b\u8005\u5f80\u5f80\u5177\u6709\u975e\u5178\u578b\u7684\u6027\u522b\u9762\u90e8\u5f62\u6001\u3002\u201d \u5728\u81ea\u62cd\u4e2d\uff0c\u540c\u6027\u604b\u548c\u5f02\u6027\u604b\u4e4b\u95f4\u7684\u5dee\u5f02\u4e0e\u6253\u626e\u3001\u8868\u73b0\u548c\u751f\u6d3b\u65b9\u5f0f\u6709\u5173\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6587\u5316\u5dee\u5f02\uff0c\u800c\u4e0d\u662f\u9762\u90e8\u7ed3\u6784\u7684\u5dee\u5f02 See our longer response on Medium, \u201c Do Algorithms Reveal Sexual Orientation or Just Expose our Stereotypes? \u201d Selection Bias + Experimenter\u2019s Bias + Correlation Fallacy Measuring Algorithmic Bias \u8bc4\u4f30\u516c\u5e73\u6027\u548c\u5305\u5bb9\u6027 \u5206\u7c7b\u8bc4\u4f30 \u4e3a\u6bcf\u4e2a\u521b\u5efa\uff08\u5b50\u7ec4\uff0c\u9884\u6d4b\uff09\u5bf9\u3002\u8de8\u5b50\u7ec4\u6bd4\u8f83 \u4f8b\u5982 \u5973\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u7537\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u4ea4\u53c9\u8bc4\u4f30 \u4e3a\u6bcf\u4e2a\u521b\u5efa\uff08\u5b50\u7ec41\uff0c\u5b50\u7ec42\uff0c\u9884\u6d4b\uff09\u5bf9\u3002\u8de8\u5b50\u7ec4\u6bd4\u8f83 \u4f8b\u5982 \u9ed1\u4eba\u5973\u6027\uff0c\u9762\u90e8\u68c0\u6d4b \u767d\u4eba\uff0c\u9762\u90e8\u68c0\u6d4b Evaluate for Fairness & Inclusion: Confusion Matrix Evaluate for Fairness & Inclusion \u201c\u673a\u4f1a\u5e73\u7b49\u201d\u516c\u5e73\u51c6\u5219\uff1a\u5b50\u7ec4\u7684 recall \u662f\u76f8\u7b49\u7684 \u201c\u9884\u6d4b\u5e73\u4ef7\u201d\u516c\u5e73\u51c6\u5219\uff1a\u5b50\u7ec4\u7684 precision \u662f\u76f8\u7b49 \u9009\u62e9\u8bc4\u4ef7\u6307\u6807\u7684\u53ef\u63a5\u53d7\u7684\u5047\u9633\u6027\u548c\u5047\u9634\u6027\u4e4b\u95f4\u7684\u6743\u8861 False Positives Might be Better than False Negatives Privacy in Images Spam Filtering AI Can Unintentionally Lead to Unjust Outcomes \u7f3a\u4e4f\u5bf9\u6570\u636e\u548c\u6a21\u578b\u4e2d\u7684\u504f\u89c1\u6765\u6e90\u7684\u6d1e\u5bdf\u529b \u7f3a\u4e4f\u5bf9\u53cd\u9988\u5faa\u73af\u7684\u6d1e\u5bdf\u529b \u7f3a\u4e4f\u7ec6\u5fc3\uff0c\u5206\u7c7b\u7684\u8bc4\u4ef7 \u4eba\u7c7b\u504f\u89c1\u5728\u89e3\u91ca\u548c\u63a5\u53d7\u7ed3\u679c It\u2019s up to us to influence how AI evolves. Here are some things we can do. Data Data Really, Really Matters \u4e86\u89e3\u60a8\u7684\u6570\u636e\uff1a\u504f\u5dee\uff0c\u76f8\u5173\u6027 \u4ece\u7c7b\u4f3c\u7684\u5206\u5e03\u653e\u5f03\u5355\u4e00\u8bad\u7ec3\u96c6/\u6d4b\u8bd5\u96c6 \u7ed3\u5408\u6765\u81ea\u591a\u4e2a\u6765\u6e90\u7684\u8f93\u5165 \u5bf9\u4e8e\u56f0\u96be\u7684\u7528\u4f8b\u4f7f\u7528held-out\u6d4b\u8bd5\u96c6 \u4e0e\u4e13\u5bb6\u8ba8\u8bba\u5176\u4ed6\u4fe1\u53f7 Understand Your Data Skews Facets: pair-code.github.io \u6ca1\u6709\u4e00\u4e2a\u6570\u636e\u96c6\u662f\u6ca1\u6709\u504f\u5dee\u7684\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u6709\u504f\u5dee\u7684\u4e16\u754c\u3002\u91cd\u70b9\u662f\u77e5\u9053\u662f\u4ec0\u4e48\u504f\u5dee\u3002 Machine Learning Use ML Techniques for Bias Mitigation and Inclusion Bias Mitigation \u504f\u5dee\u7f13\u89e3 \u5220\u9664\u6709\u95ee\u9898\u7684\u8f93\u51fa\u7684\u4fe1\u53f7 \u523b\u677f\u5370\u8c61 \u6027\u522b\u6b67\u89c6,\u79cd\u65cf\u6b67\u89c6,*-ism \u53c8\u79f0\u4e3a\u201cdebiasing\u201d Inclusion \u6dfb\u52a0\u4fe1\u53f7\u6240\u9700\u7684\u53d8\u91cf \u589e\u52a0\u6a21\u578b\u6027\u80fd \u6ce8\u610f\u6027\u80fd\u5f88\u5dee\u7684\u5b50\u7ec4\u6216\u6570\u636e\u7247 Multi-task Learning to Increase Inclusion Multiple Tasks + Deep Learning for Inclusion: Multi-task Learning Example Benton, Mitchell, Hovy. Multi-task learning for Mental Health Conditions with Limited Social Media Data . EACL, 2017. \u4e0e\u5bbe\u5915\u6cd5\u5c3c\u4e9a\u5927\u5b66WWP\u5408\u4f5c \u76f4\u63a5\u4e0e\u4e34\u5e8a\u533b\u751f\u5408\u4f5c \u76ee\u6807 \u7cfb\u7edf\u8b66\u544a\u4e34\u5e8a\u533b\u751f\u5982\u679c\u4f01\u56fe\u81ea\u6740\u8feb\u5728\u7709\u776b \u51e0\u4e2a\u8bad\u7ec3\u5b9e\u4f8b\u53ef\u7528\u65f6\u8bca\u65ad\u7684\u53ef\u884c\u6027 \u5185\u90e8\u6570\u636e \u7535\u5b50\u5065\u5eb7\u8bb0\u5f55 \u75c5\u4eba\u6216\u75c5\u4eba\u5bb6\u5c5e\u63d0\u4f9b \u5305\u62ec\u5fc3\u7406\u5065\u5eb7\u8bca\u65ad,\u81ea\u6740\u4f01\u56fe,\u7ade\u8d5b \u793e\u4ea4\u5a92\u4f53\u6570\u636e \u4ee3\u7406\u6570\u636e Twitter \u5a92\u4f53\u6570\u636e \u4ee3\u7406\u5fc3\u7406\u5065\u5eb7\u8bca\u65ad\u4e2d\u4f7f\u7528\u81ea\u79f0\u8bca\u65ad \u6211\u88ab\u8bca\u65ad\u51fa\u60a3\u6709 X \u6211\u8bd5\u56fe\u81ea\u6740 Single-Task: Logistic Regression Single-Task: Deep Learning Multiple Tasks with Basic Logistic Regression Multi-task Learning Multitask, given cormorbidity Benton, Mitchell, Hovy. Multi-task learning for Mental Health Conditions with Limited Social Media Data. EACL, 2017. Improved Performance across Subgroups Reading for the masses\u2026. Adversarial Multi-task Learning to Mitigate Bias Multitask Adversarial Learning Beutel, Chen, Zhao, Chi. Data Decisions and Theoretical Implications when Adversarially Learning Fair Representations . FAT/ML, 2017. Zhang, Lemoine, Mitchell. Mitigating Unwanted Biases with Adversarial Learning . AIES, 2018. Equality of Opportunity in Supervised Learning \u8003\u8651\u5230\u771f\u6b63\u6b63\u786e\u7684\u51b3\u7b56\uff0c\u5206\u7c7b\u5668\u7684\u8f93\u51fa\u51b3\u7b56\u5e94\u8be5\u5728\u654f\u611f\u7279\u5f81\u4e4b\u95f4\u662f\u76f8\u540c\u7684\u3002 Case Study: Conversation AI Toxicity Conversation-AI ML \u63d0\u9ad8\u5728\u7ebf\u5bf9\u8bdd\u7684\u89c4\u6a21 Research Collaboration Jigsaw, CAT, several Google-internal teams, and external partners (NYTimes, Wikimedia, etc) http://perspectiveapi.com/ Unintended Bias \u6a21\u578b\u9519\u8bef\u5730\u5c06\u7ecf\u5e38\u53d7\u5230\u653b\u51fb\u7684\u8eab\u4efd\u4e0e\u6bd2\u6027\u8054\u7cfb\u8d77\u6765\uff1aFalse Positive Bias Bias Source and Mitigation \u504f\u89c1\u9020\u6210\u7684\u6570\u636e\u4e0d\u5e73\u8861 \u7ecf\u5e38\u88ad\u51fb\u4e86\u6709\u6bd2\u7684\u8eab\u4efd\u6240\u5360\u6bd4\u4f8b\u8bc4\u8bba\u957f\u5ea6\u95ee\u9898 \u6dfb\u52a0\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e2d\u5047\u5b9a\u7684\u65e0\u6bd2\u6570\u636e\u6765\u4fee\u590d\u8fd9\u79cd\u4e0d\u5e73\u8861 \u539f\u59cb\u6570\u636e\u96c6\u6709127820\u4e2a\u4f8b\u5b50 4620\u4e2a\u8865\u5145\u7684\u65e0\u6bd2\u4f8b\u5b50 Measuring Unintended Bias - Synthetic Datasets \u6311\u6218\u4e0e\u771f\u5b9e\u6570\u636e \u73b0\u6709\u6570\u636e\u96c6\u662f\u5c0f and/or \u6709\u9519\u8bef\u7684\u76f8\u5173\u6027 \u6bcf\u4e2a\u4f8b\u5b50\u662f\u5b8c\u5168\u72ec\u7279\u7684 Approach: \"bias madlibs\u201d: \u4e00\u4e2a\u7efc\u5408\u751f\u6210\u7684\u6a21\u677f\u5316\u6570\u636e\u96c6\u8fdb\u884c\u8bc4\u4f30 Assumptions \u6570\u636e\u96c6\u662f\u53ef\u9760\u7684 \u548c\u4ea7\u54c1\u76f8\u4f3c\u7684\u5206\u5e03 \u5ffd\u7565\u6ce8\u91ca\u5668\u504f\u89c1 \u6ca1\u6709\u56e0\u679c\u5206\u6790 Deep Learning Model CNN \u67b6\u6784 \u9884\u8bad\u7ec3\u7684 GloVe \u5d4c\u5165 Keras \u5b9e\u73b0 Measuring Model Performance How good is the model at distinguishing good from bad examples? (ROC-AUC) AUC (for a given test set) = Given two randomly chosen examples, one in-class (e.g. one is toxic and the other is not), AUC is the probability that the model will give the in-class example the higher score. Types of Bias Low Subgroup Performance \u6a21\u578b\u5728\u5b50\u7ec4\u6ce8\u91ca\u4e0a\u7684\u6027\u80fd\u6bd4\u5728\u603b\u4f53\u6ce8\u91ca\u4e0a\u5dee Metric : Subgroup AUC Subgroup Shift (Right) \u8be5\u6a21\u578b\u7cfb\u7edf\u5730\u5bf9\u6765\u81ea\u5b50\u7ec4\u7684\u8bc4\u4ef7\u6253\u5206\u66f4\u9ad8 Metric: BPSN AUC (Background Positive Subgroup Negative) Subgroup Shift (Left) \u8be5\u6a21\u578b\u7cfb\u7edf\u5730\u5bf9\u6765\u81ea\u5b50\u7ec4\u7684\u8bc4\u4ef7\u6253\u5206\u8f83\u4f4e\u3002 Metric: BNSP AUC (Background Negative Subgroup Positive) Release Responsibly Model Cards for Model Reporting \u76ee\u524d\u8fd8\u6ca1\u6709\u6a21\u578b\u53d1\u5e03\u65f6\u62a5\u544a\u6a21\u578b\u6548\u679c\u7684common practice What It Does \u4e00\u4efd\u5173\u6ce8\u6a21\u578b\u6027\u80fd\u900f\u660e\u5ea6\u7684\u62a5\u544a\uff0c\u4ee5\u9f13\u52b1\u8d1f\u8d23\u4efb\u7684\u4eba\u5de5\u667a\u80fd\u7684\u91c7\u7528\u548c\u5e94\u7528\u3002 How It Works \u8fd9\u662f\u4e00\u4e2a\u5bb9\u6613\u53d1\u73b0\u7684\u548c\u53ef\u7528\u7684\u5de5\u4ef6\u5728\u7528\u6237\u65c5\u7a0b\u4e2d\u91cd\u8981\u7684\u6b65\u9aa4\u4e3a\u4e00\u7ec4\u4e0d\u540c\u7684\u7528\u6237\u548c\u516c\u5171\u5229\u76ca\u76f8\u5173\u8005\u3002 Why It Matter \u5b83\u4f7f\u6a21\u578b\u5f00\u53d1\u4eba\u5458\u6709\u8d23\u4efb\u53d1\u5e03\u9ad8\u8d28\u91cf\u548c\u516c\u5e73\u7684\u6a21\u578b\u3002 Intended Use, Factors and Subgroups Metrics and Data Considerations, Recommendations Disaggregated Intersectional Evaluation","title":"Lecture 19 Safety, Bias, and Fairness"},{"location":"CS224n-2019-19-Safety%2C%20Bias%2C%20and%20Fairness/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/","text":"Lecture 20 The Future of NLP + Deep Learning \u00b6 Deep Learning for NLP 5 years ago No Seq2Seq No Attention No large-scale QA/reading comprehension datasets No TensorFlow or Pytorch Future of Deep Learning + NLP \u5229\u7528\u65e0\u6807\u7b7e\u6570\u636e Back-translation \u548c \u65e0\u76d1\u7763\u673a\u5668\u7ffb\u8bd1 \u63d0\u9ad8\u9884\u8bad\u7ec3\u548cGPT-2 \u63a5\u4e0b\u6765\u5462\uff1f NLP\u6280\u672f\u7684\u98ce\u9669\u548c\u793e\u4f1a\u5f71\u54cd \u672a\u6765\u7684\u7814\u7a76\u65b9\u5411 Why has deep learning been so successful recently? \u6269\u5c55\u80fd\u529b\uff08\u6a21\u578b\u548c\u6570\u636e\u5927\u5c0f\uff09\u662f\u6df1\u5ea6\u5b66\u4e60\u8fd1\u4e9b\u5e74\u6765\u6210\u529f\u7684\u539f\u56e0 \u8fc7\u53bb\u53d7\u5230\u8ba1\u7b97\u8d44\u6e90\u548c\u6570\u636e\u8d44\u6e90\u7684\u89c4\u6a21\u9650\u5236 Big deep learning successes \u4e09\u4e2a\u4f7f\u7528\u5927\u91cf\u6570\u636e\u83b7\u5f97\u6210\u529f\u7684\u8303\u4f8b \u56fe\u50cf\u8bc6\u522b\uff1a\u88ab Google, Facebook \u7b49\u5e7f\u6cdb\u4f7f\u7528 ImageNet: 14 million examples \u673a\u5668\u7ffb\u8bd1\uff1a\u8c37\u6b4c\u7ffb\u8bd1\u7b49 WMT: Millions of sentence pairs \u6253\u6e38\u620f\uff1aAtari Games, AlphaGo, and more 10s of millions of frames for Atari AI 10s of millions of self-play games for AlphaZero NLP Datasets \u5373\u4f7f\u662f\u82f1\u8bed\uff0c\u5927\u90e8\u5206\u4efb\u52a1\u4e5f\u53ea\u6709 100k \u6216\u66f4\u5c11\u7684\u6709\u6807\u7b7e\u6837\u672c \u5176\u4ed6\u8bed\u8a00\u7684\u53ef\u7528\u6570\u636e\u5c31\u66f4\u5c11\u4e86 \u6709\u6210\u5343\u4e0a\u4e07\u7684\u8bed\u8a00\uff0c\u5176\u4e2d\u6709\u6210\u767e\u4e0a\u5343\u7684\u8bed\u8a00\u7684\u6bcd\u8bed\u4f7f\u7528\u8005\u662f\u5927\u4e8e\u4e00\u767e\u4e07\u7684 \u53ea\u6709 10% \u7684\u4eba\u5c06\u82f1\u8bed\u4f5c\u4e3a\u4ed6\u4eec\u7684\u7b2c\u4e00\u8bed\u8a00 \u8d8a\u6765\u8d8a\u591a\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528 \u65e0\u6807\u7b7e \u6570\u636e Using Unlabeled Data for Translation \u00b6 Machine Translation Data \u83b7\u5f97\u7ffb\u8bd1\u9700\u8981\u4eba\u7c7b\u7684\u4e13\u4e1a\u77e5\u8bc6 \u9650\u5236\u6570\u636e\u7684\u5927\u5c0f\u548c\u9886\u57df \u8bed\u8a00\u6587\u672c\u66f4\u5bb9\u6613\u83b7\u5f97 Pre-Training \u5206\u522b\u5c06\u4e24\u4e2a\u9884\u8bad\u7ec3\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a Encoder \u548c Decoder \u7136\u540e\u4f7f\u7528\u53cc\u8bed\u6570\u636e\u5171\u540c\u8bad\u7ec3 English -> German Results: 2+ BLEU point improvement Ramachandran et al., 2017 Self-Training \u9884\u8bad\u7ec3\u7684\u95ee\u9898\uff1a\u9884\u8bad\u7ec3\u4e2d\u4e24\u4e2a\u8bed\u8a00\u4e4b\u95f4\u6ca1\u6709\u4ea4\u4e92 \u81ea\u8bad\u7ec3\uff1a\u6807\u8bb0\u672a\u6807\u8bb0\u7684\u6570\u636e\u4ee5\u83b7\u5f97\u6709\u566a\u58f0\u7684\u8bad\u7ec3\u6837\u672c \u81ea\u8bad\u7ec3\u6280\u672f\u6ca1\u6709\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u56e0\u4e3a\u5176\u8bad\u7ec3\u7684\u6765\u6e90\u662f\u5176\u4e4b\u524d\u7684\u4ea7\u51fa Back-Translation \u6709\u4e24\u79cd\u65b9\u5411\u76f8\u53cd\u7684\u673a\u5668\u7ffb\u8bd1\u6a21\u578b \\(\\text{en} \\to \\text{fr}\\) \u548c \\(\\text{fr} \\to \\text{en}\\) \u4e0d\u518d\u5faa\u73af \u6a21\u578b\u518d\u4e5f\u770b\u4e0d\u5230\u201c\u574f\u201d\u7ffb\u8bd1,\u53ea\u6709\u574f\u8f93\u5165 \u6a21\u578b\u8bad\u7ec3\u65f6\u4f1a\u52a0\u5165\u4e00\u4e9b\u6807\u8bb0\u6570\u636e\uff0c\u786e\u4fdd \\(\\text{en} \\to \\text{fr}\\) \u6a21\u578b\u7684\u8f93\u51fa\uff0c\u5373 \\(\\text{fr} \\to \\text{en}\\) \u6a21\u578b\u7684\u8f93\u5165\uff0c\u4ece\u800c\u4fdd\u8bc1\u6a21\u578b\u7684\u6b63\u5e38 \u5982\u4f55\u534f\u8c03\u5bf9\u6807\u8bb0\u6570\u636e\u4e0e\u672a\u6807\u8bb0\u6570\u636e\u7684\u8bad\u7ec3\u5462\uff1f \u5148\u5728\u6807\u8bb0\u6570\u636e\u4e0a\u8bad\u7ec3\u4e24\u4e2a\u6a21\u578b \u7136\u540e\u5728\u672a\u6807\u8bb0\u6570\u636e\u4e0a\u6807\u8bb0\u4e00\u4e9b\u6570\u636e \u518d\u5728\u672a\u6807\u8bb0\u6570\u636e\u4e0a\u8fdb\u884c\u53cd\u5411\u7ffb\u8bd1\u7684\u8bad\u7ec3 \u91cd\u590d\u5982\u4e0a\u7684\u8fc7\u7a0b Large-Scale Back-Translation 4.5M English-German sentence pairs and 226M monolingual sentences What if there is no Bilingual Data? \u5f53\u6211\u4eec\u53ea\u6709\u672a\u6807\u8bb0\u7684\u53e5\u5b50\u65f6\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u79cd\u6bd4\u5b8c\u5168\u7684\u7ffb\u8bd1\u66f4\u7b80\u5355\u7684\u4efb\u52a1 \u4e0d\u662f\u505a\u53e5\u5b50\u7ffb\u8bd1 \u800c\u662f\u505a\u5355\u8bcd\u7ffb\u8bd1 \u6211\u4eec\u60f3\u8981\u627e\u5230\u67d0\u79cd\u8bed\u8a00\u7684\u7ffb\u8bd1\u4f46\u4e0d\u4f7f\u7528\u4efb\u4f55\u6807\u8bb0\u6570\u636e Unsupervised Word Translation \u8de8\u8bed\u8a00\u6587\u5b57\u5d4c\u5165 cross-lingual word embeddings \u4e24\u79cd\u8bed\u8a00\u5171\u4eab\u5d4c\u5165\u7a7a\u95f4 \u4fdd\u6301\u8bcd\u5d4c\u5165\u7684\u6b63\u5e38\u7684\u597d\u5c5e\u6027 \u4f46\u4e5f\u8981\u63a5\u8fd1\u4ed6\u4eec\u7684\u7ffb\u8bd1 \u60f3\u4ece\u5355\u8bed\u8bed\u6599\u5e93\u4e2d\u5b66\u4e60 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5728\u5171\u4eab\u7684\u5d4c\u5165\u7a7a\u95f4\u4e2d\uff0c\u6bcf\u4e2a\u82f1\u6587\u5355\u8bcd\u90fd\u6709\u5176\u5bf9\u5e94\u7684\u5fb7\u8bed\u5355\u8bcd\uff0c\u5e76\u4e14\u8ddd\u79bb\u5f88\u8fd1 \u6211\u4eec\u5728\u4f7f\u7528\u65f6\uff0c\u53ea\u9700\u9009\u53d6\u82f1\u6587\u5355\u8bcd\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u8ddd\u79bb\u6700\u8fd1\u7684\u5fb7\u8bed\u5355\u8bcd\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u5bf9\u5e94\u7684\u7ffb\u8bd1 \u8bcd\u5d4c\u5165\u6709\u5f88\u591a\u7ed3\u6784 \u5047\u8bbe:\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u7684\u7ed3\u6784\u5e94\u8be5\u76f8\u4f3c \u5373\u4f7f\u662f\u8fd0\u884c\u4e24\u6b21 word2vec \u4f1a\u83b7\u5f97\u4e0d\u540c\u7684\u8bcd\u5d4c\u5165\uff0c\u5d4c\u5165\u7a7a\u95f4\u7684\u7ed3\u6784\u6709\u5f88\u591a\u89c4\u5f8b\u6027 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u662f\u82f1\u8bed\u4e0e\u610f\u5927\u5229\u8bed\u7684\u8bcd\u5d4c\u5165\uff0c\u77e2\u91cf\u7a7a\u95f4\u770b\u4e0a\u53bb\u5f7c\u6b64\u5341\u5206\u4e0d\u540c\uff0c\u4f46\u662f\u7ed3\u6784\u662f\u5341\u5206\u76f8\u4f3c\u7684 \u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u82f1\u8bed\u8bcd\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684 cat \u4e0e feline \u7684\u8ddd\u79bb\u4e0e\u610f\u5927\u5229\u8bed\u8bcd\u5178\u5982\u7a7a\u95f4\u4e2d\u7684 gatto \u548c felino \u4e4b\u95f4\u7684\u8ddd\u79bb\u662f\u76f8\u4f3c\u7684 \u6211\u4eec\u5728\u8de8\u8bed\u8a00\u7684\u8bcd\u5d4c\u5165\u4e2d\u60f3\u8981\u5b66\u4e60\u4e0d\u540c\u79cd\u8bed\u8a00\u7684\u8bcd\u5d4c\u5165\u4e4b\u95f4\u7684\u5bf9\u9f50\u65b9\u5f0f \u9996\u5148\u5728\u5355\u8bed\u8bed\u6599\u5e93\u4e0a\u8fd0\u884c word2vec \u4ee5\u5f97\u5230\u5355\u8bcd\u5d4c\u5165 X \u548c Y \u5b66\u4e60\u4e00\u4e2a\uff08\u6b63\u4ea4\uff09\u77e9\u9635 W \u4f7f\u5f97 WX~Y \u4f7f\u7528\u5bf9\u6297\u8bad\u7ec3\u6765\u5b66\u4e60 W \u9274\u522b\u5668\uff1a\u9884\u6d4b\u4e00\u4e2a\u5d4c\u5165\u662f\u6765\u81ea\u4e8e Y \u7684\u8fd8\u662f\u6765\u81ea\u4e8e X \u5e76\u4f7f\u7528 W \u8f6c\u6362\u540e\u7684\u5d4c\u5165 \u8bad\u7ec3 W \u4f7f\u5f97\u9274\u522b\u5668\u96be\u4ee5\u533a\u5206\u8fd9\u4e24\u8005 \u5176\u4ed6\u53ef\u4ee5\u88ab\u7528\u6765\u8fdb\u4e00\u6b65\u63d0\u5347\u6548\u679c\u7684\u65b9\u6cd5\u53c2\u89c1 Word Translation without Parallel Data \u6b63\u4ea4\u6027\u6765\u7ea6\u675f\u8bcd\u5d4c\u5165\u7684\u539f\u56e0\u662f\u4e3a\u4e86\u9632\u6b62\u8fc7\u62df\u5408 \u6211\u4eec\u5047\u8bbe\u6211\u4eec\u7684\u5d4c\u5165\u7a7a\u95f4\u662f\u7c7b\u4f3c\u7684\uff0c\u53ea\u662f\u9700\u8981\u5bf9\u82f1\u8bed\u7684\u8bcd\u5411\u91cf\u548c\u610f\u5927\u5229\u8bed\u7684\u8bcd\u5411\u91cf\u8fdb\u884c\u65cb\u8f6c Unsupervised Machine Translation \u6a21\u578b\uff1a\u4e0d\u8003\u8651\u4e0d\u540c\u8f93\u5165\u548c\u8f93\u51fa\u8bed\u8a00\uff0c\u4f7f\u7528\u76f8\u540c\u7684(\u5171\u4eab\u7684) encoder-decoder (\u6ca1\u6709\u4f7f\u7528\u6ce8\u610f\u529b) \u4f7f\u7528 cross-lingual \u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\uff0c\u5373\u5176\u4e2d\u7684\u82f1\u8bed\u548c\u6cd5\u8bed\u5355\u8bcd\u5e94\u8be5\u770b\u8d77\u6765\u5b8c\u5168\u76f8\u540c \u6211\u4eec\u53ef\u4ee5\u5582\u7ed9 encoder \u4e00\u4e2a\u82f1\u6587\u53e5\u5b50\uff0c\u4e5f\u53ef\u4ee5\u5582\u4e00\u4e2a\u6cd5\u8bed\u53e5\u5b50\uff0c\u4ece\u800c\u83b7\u5f97 cross-lingual embeddings \uff0c\u5373\u82f1\u6587\u53e5\u5b50\u548c\u6cd5\u8bed\u53e5\u5b50\u4e2d\u5404\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\uff0c\u8fd9\u610f\u5473\u7740 encoder \u53ef\u4ee5\u5904\u7406\u4efb\u4f55\u8f93\u5165 \u5bf9\u4e8e decoder\uff0c\u6211\u4eec\u9700\u8981\u5582\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0 \\(\\text{<Fr>}\\) \u6765\u544a\u8bc9\u6a21\u578b\u5e94\u8be5\u751f\u6210\u4ec0\u4e48\u8bed\u8a00\u7684\u8f93\u51fa \u53ef\u4ee5\u7528\u505a\u4e00\u4e2a auto-encoder\uff0c\u5b8c\u6210 \\(en \\to en\\) \uff0c\u5373\u518d\u73b0\u8f93\u5165\u5e8f\u5217 \u63a5\u4e0b\u91cc\u662f\u6a21\u578b\u7684\u8bad\u7ec3\u8fc7\u7a0b Training objective 1: de-noising autoencoder \u53bb\u566a\u81ea\u7f16\u7801\u5668 \u8f93\u5165\u4e00\u4e2a\u6253\u4e71\u540e\u7684\u82f1\u8bed / \u6cd5\u8bed\u53e5\u5b50 \u8f93\u51fa\u5176\u539f\u6765\u7684\u53e5\u5b50 \u7531\u4e8e\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u6ce8\u610f\u529b\u673a\u5236\u7684\u6a21\u578b\uff0c\u7f16\u7801\u5668\u5c06\u6574\u4e2a\u6e90\u53e5\u5b50\u8f6c\u6362\u4e3a\u5355\u4e2a\u5411\u91cf\uff0c\u81ea\u7f16\u7801\u5668\u7684\u4f5c\u7528\u662f\u4fdd\u8bc1\u6765\u81ea\u4e8e encoder \u7684\u5411\u91cf\u5305\u542b\u548c\u8fd9\u4e2a\u53e5\u5b50\u6709\u5173\u7684\uff0c\u80fd\u4f7f\u5f97\u6211\u4eec\u6062\u590d\u539f\u6765\u7684\u53e5\u5b50\u7684\u6240\u6709\u4fe1\u606f Training objective 2: back translation (\u53ea\u6709\u65e0\u6807\u7b7e\u7684\u6570\u636e) \u9996\u5148\u7ffb\u8bd1 \\(fr \\to en\\) \u7136\u540e\u4f7f\u7528\u4e00\u4e2a\u76d1\u7763\u6837\u672c\u6765\u8bad\u7ec3 \\(en \\to fr\\) \u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 \\(fr \\to en\\) \u8f93\u51fa\u7684\u53e5\u5b50\uff0c\u662f \\(en \\to fr\\) \u8f93\u5165\u7684\u53e5\u5b50\uff0c\u8fd9\u4e2a\u53e5\u5b50\u662f\u6709\u4e9b\u6df7\u4e71\u7684\uff0c\u4e0d\u5b8c\u7f8e\u7684\uff0c\u4f8b\u5982\u8fd9\u91cc\u7684 \u201cI am student\u201d\uff0c\u4e22\u5931\u4e86 \u201ca\u201d \u6211\u4eec\u9700\u8981\u8bad\u7ec3\u6a21\u578b\uff0c\u5373\u4f7f\u662f\u6709\u8fd9\u6837\u7cdf\u7cd5\u7684\u8f93\u5165\uff0c\u4e5f\u80fd\u591f\u8fd8\u539f\u51fa\u539f\u59cb\u7684\u6cd5\u8bed\u53e5\u5b50 Why Does This Work? \u8de8\u8bed\u8a00\u5d4c\u5165\u548c\u5171\u4eab\u7f16\u7801\u5668\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8d77\u70b9 \u4f7f\u7528 cross-lingual \u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\uff0c\u5373\u5176\u4e2d\u7684\u82f1\u8bed\u548c\u6cd5\u8bed\u5355\u8bcd\u5e94\u8be5\u770b\u8d77\u6765\u5b8c\u5168\u76f8\u540c \u5171\u4eab\u7f16\u7801\u5668 \u4f8b\u5982\u6211\u4eec\u4ee5\u4e00\u4e2a\u6cd5\u8bed\u53e5\u5b50\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165 \u7531\u4e8e\u5d4c\u5165\u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\uff0c\u5e76\u4e14\u6211\u4eec\u4f7f\u7528\u7684\u662f\u76f8\u540c\u7684 encoder \u56e0\u6b64 encoder \u5f97\u5230\u7684\u6cd5\u8bed\u53e5\u5b50\u7684 representation \u5e94\u8be5\u548c\u82f1\u8bed\u53e5\u5b50\u7684 representation \u975e\u5e38\u76f8\u4f3c \u6240\u4ee5\u5e0c\u671b\u80fd\u591f\u83b7\u5f97\u548c\u539f\u59cb\u7684\u82f1\u8bed\u53e5\u5b50\u76f8\u540c\u7684\u8f93\u51fa \u76ee\u6807\u9f13\u52b1 language-agnostic \u8bed\u8a00\u65e0\u5173\u7684\u8868\u793a \u83b7\u5f97\u4e00\u4e2a\u4e0e\u8bed\u8a00\u7c7b\u578b\u65e0\u5173\u7684 encoder vector Unsupervised Machine Translation Lample et al., 2018 \u6c34\u5e73\u7ebf\u662f\u65e0\u76d1\u7763\u6a21\u578b\uff0c\u5176\u4f59\u7684\u90fd\u662f\u6709\u76d1\u7763\u7684 \u5728\u4e00\u5b9a\u7684\u76d1\u7763\u6570\u636e\u89c4\u6a21\u4e0b\uff0c\u65e0\u76d1\u7763\u6a21\u578b\u80fd\u591f\u53d6\u5f97\u548c\u76d1\u7763\u6a21\u578b\u7c7b\u4f3c\u7684\u6548\u679c \u5f53\u7136\uff0c\u968f\u7740\u6570\u636e\u89c4\u6a21\u7684\u589e\u5927\uff0c\u76d1\u7763\u6a21\u578b\u7684\u6548\u679c\u4f1a\u63d0\u5347\uff0c\u8d85\u8fc7\u65e0\u76d1\u7763\u6a21\u578b Attribute Transfer \u8fd8\u53ef\u4ee5\u4f7f\u7528\u65e0\u76d1\u7763\u7684\u673a\u5668\u7ffb\u8bd1\u6a21\u578b\u5b8c\u6210\u5c5e\u6027\u8f6c\u79fb Lample et al., 2019 Collector corpora of \u201crelaxed\u201d and \u201cannoyed\u201d tweets using hashtags Learn un unsupervised MT model Not so Fast \u82f1\u8bed\uff0c\u6cd5\u8bed\u548c\u5fb7\u8bed\u662f\u76f8\u5f53\u7c7b\u4f3c\u7684\u8bed\u8a00 \u5728\u975e\u5e38\u4e0d\u540c\u7684\u8bed\u8a00\u4e0a\uff08\u4f8b\u5982\u82f1\u8bed\u548c\u571f\u8033\u5176\u8bed\uff09 \u5b8c\u5168\u7684\u65e0\u76d1\u7763\u7684\u8bcd\u7ffb\u8bd1\u5e76\u4e0d\u5341\u5206\u6709\u6548\u3002\u9700\u8981\u79cd\u5b50\u5b57\u5178\u53ef\u80fd\u7684\u7ffb\u8bd1 \u7b80\u5355\u7684\u6280\u5de7\uff1a\u4f7f\u7528\u76f8\u540c\u7684\u5b57\u7b26\u4e32\u4ece\u8bcd\u6c47 UNMT\u51e0\u4e4e\u4e0d\u5de5\u4f5c Cross-Lingual BERT Lample and Conneau., 2019 \u4e0a\u56fe 1 \u662f\u5e38\u89c4\u7684 BERT \uff0c\u6709\u4e00\u7cfb\u5217\u7684\u82f1\u8bed\u53e5\u5b50\uff0c\u5e76\u4e14\u4f1a mask \u4e00\u90e8\u5206\u5355\u8bcd \u8c37\u6b4c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u5b8c\u6210\u7684\u662f\u8bad\u7ec3\u597d\u7684\u591a\u8bed\u8a00\u7684 BERT \u57fa\u672c\u4e0a\u662f\u8fde\u63a5\u4e00\u5927\u5806\u4e0d\u540c\u8bed\u8a00\u7684\u8bed\u6599\u5e93\uff0c\u7136\u540e\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b masked LM training objective \u4e0a\u56fe 2 \u662f Facebook \u63d0\u51fa\u7684 \u8054\u5408\u4e86 masked LM training objective \u548c \u7ffb\u8bd1 \u7ed9\u5b9a\u4e00\u4e2a\u82f1\u8bed\u53e5\u5b50\u548c\u6cd5\u8bed\u53e5\u5b50\uff0c\u5e76\u5206\u522b mask \u4e00\u90e8\u5206\u5355\u8bcd\uff0c\u5e76\u671f\u671b\u6a21\u578b\u586b\u8865 Unsupervised MT Results Huge Models and GPT-2 \u00b6 Training Huge Models This is a General Trend in ML peta : \u7528\u4e8e\u8ba1\u91cf\u5355\u4f4d\uff0c\u8868\u793a10\u768415\u6b21\u65b9\uff0c\u8868\u793a\u5343\u4e07\u4ebf\u6b21 FLOPS = FLoating-point Operations Per Second\uff0c\u6bcf\u79d2\u6d6e\u70b9\u8fd0\u7b97\u6b21\u6570 Huge Models in Computer Vision Training Huge Models \u66f4\u597d\u7684\u786c\u4ef6 \u6570\u636e\u548c\u6a21\u578b\u7684\u5e76\u884c\u5316 GPT-2 \u53ea\u662f\u4e00\u4e2a\u975e\u5e38\u5927\u7684 Transformer LM 40 GB\u7684\u8bad\u7ec3\u6587\u672c \u6295\u5165\u76f8\u5f53\u591a\u7684\u52aa\u529b\u53bb\u786e\u4fdd\u6570\u636e\u8d28\u91cf \u4f7f\u7528 reddit \u4e2d\u83b7\u5f97\u9ad8\u6295\u7968\u7684\u7f51\u9875 link So What Can GPT-2 Do? \u663e\u7136\uff0c\u8bed\u8a00\u5efa\u6a21(\u4f46\u662f\u975e\u5e38\u597d) \u6570\u636e\u96c6\u4e0a\u5f97\u5230\u6700\u5148\u8fdb\u7684\u56f0\u60d1\uff0c\u751a\u81f3\u6ca1\u6709\u8bad\u7ec3 Radford et al., 2019 Zero-Shot Learning : no supervised training data! \u5728\u6ca1\u6709\u63a5\u53d7\u8fc7\u8bad\u7ec3\u7684\u60c5\u51b5\u4e0b\u5e38\u8bc6\u5b8c\u6210\u4efb\u52a1 Ask LM to generate from a prompt Reading Comprehension: \\<context> \\<question> A: Summarization: \\<article> TL;DR: Translation: \\<English sentence1> = \\<French sentence1> \\<English sentence 2> = \\<French sentence 2> \u2026.. \\<Source sentenc> = Question Answering: \\<question> A: GPT-2 Results How can GPT-2 be doing translation? \u5b83\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u8bed\u6599\u5e93\uff0c\u91cc\u9762\u51e0\u4e4e\u5168\u662f\u82f1\u8bed \u7531\u4e8e\u6570\u636e\u96c6\u4e2d\u5b58\u5728\u4e00\u4e9b\u7ffb\u8bd1\u7684\u4f8b\u5b50 \u6cd5\u8bed\u4e60\u8bed\u53ca\u5176\u7ffb\u8bd1 \u6cd5\u8bed\u5f15\u7528\u53ca\u5176\u7ffb\u8bd1 GPT-2 Question Answering Simple baseline: 1% accuracy GPT-2: ~4% accuracy Cherry-picked most confident results \u7cbe\u9009\u51fa\u6700\u81ea\u4fe1\u7684\u7ed3\u679c What happens as models get even bigger? \u5bf9\u4e8e\u4e00\u4e9b\u4efb\u52a1\uff0c\u6027\u80fd\u4f3c\u4e4e\u968f\u7740 log(\u6a21\u578b\u5927\u5c0f) \u7684\u589e\u52a0\u800c\u589e\u52a0 \u4f46\u5982\u4e0b\u56fe\u6240\u793a\u8d8b\u52bf\u5e76\u4e0d\u660e\u6717 GPT-2 Reaction NLP\u4e13\u5bb6\u5e94\u8be5\u505a\u8fd9\u4e9b\u51b3\u5b9a\u5417\uff1f \u8ba1\u7b97\u673a\u5b89\u5168\u4e13\u5bb6\uff1f \u6280\u672f\u548c\u793e\u4f1a\u4e13\u5bb6\uff1f \u9053\u5fb7\u4e13\u5bb6\uff1f \u9700\u8981\u66f4\u591a\u7684\u8de8\u5b66\u79d1\u79d1\u5b66 \u8bb8\u591aNLP\u5177\u6709\u8f83\u5927\u793e\u4f1a\u5f71\u54cd\u7684\u4f8b\u5b50\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u504f\u89c1/\u516c\u5e73 High-Impact Decisions \u8d8a\u6765\u8d8a\u611f\u5174\u8da3\u7528NLP\u5e2e\u52a9\u9ad8\u5f71\u54cd\u529b\u7684\u51b3\u7b56 \u53f8\u6cd5\u5224\u51b3 \u62db\u8058 \u7b49\u7ea7\u6d4b\u8bd5 \u4e00\u65b9\u9762\uff0c\u53ef\u4ee5\u5feb\u901f\u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\u67d0\u4e9b\u504f\u89c1 \u7136\u800c\uff0c\u673a\u5668\u5b66\u4e60\u53cd\u6620\u4e86\u8bad\u7ec3\u6570\u636e \u751a\u81f3\u653e\u5927\u504f\u89c1\u2026\u8fd9\u53ef\u80fd\u5bfc\u81f4\u66f4\u504f\u5411\u6570\u636e\u7684\u521b\u5efa Chatbots What did BERT \u201csolve\u201d and what do we work on next? \u00b6 GLUE Benchmark Results The Death of Architecture Engineering? \u82b1\u8d39\u516d\u4e2a\u6708\u6765\u7814\u7a76 \u4f53\u7cfb\u7ed3\u6784\u7684\u8bbe\u8ba1\uff0c\u5f97\u5230\u4e86 1 F1 \u7684\u63d0\u5347 \u6216\u77e5\u8bc6\u8ba9 BERT \u53d8\u5f97 3 \u500d\u5927\u5c0f\uff0c\u5f97\u5230\u4e86 5 F1 \u7684\u63d0\u5347 SQuAD \u7684 TOP20 \u53c2\u8d5b\u8005\u90fd\u662f\u7528\u4e86 BERT Harder Natural Language Understanding \u9605\u8bfb\u7406\u89e3 \u5728\u957f\u6587\u6863\u6216\u591a\u4e2a\u6587\u6863 \u9700\u8981\u591a\u8df3\u63a8\u7406 \u5728\u5bf9\u8bdd\u4e2d\u5b9a\u4f4d\u95ee\u7b54 \u8bb8\u591a\u73b0\u6709\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u5173\u952e\u95ee\u9898\uff1a\u4eba\u4eec\u5199\u95ee\u9898\u65f6\u770b\u7740\u4e0a\u4e0b\u6587 \u4e0d\u73b0\u5b9e\u7684 \u9f13\u52b1\u7b80\u5355\u7684\u95ee\u9898 QuAC: Question Answering in Context Choi et al., 2018 \u5b66\u751f\u95ee\u95ee\u9898\uff0c\u8001\u5e08\u56de\u7b54\u7684\u5bf9\u8bdd \u6559\u5e08\u770b\u5230\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e3b\u9898\uff0c\u5b66\u751f\u4e0d\u559c\u6b22 \u4ecd\u7136\u548c\u4eba\u7c7b\u6c34\u5e73\u6709\u5f88\u5927\u5dee\u8ddd HotPotQA Zang et al., 2018 \u8bbe\u8ba1\u8981\u6c42\u591a\u8df3\u63a8\u7406 \u95ee\u9898\u5728\u591a\u4e2a\u6587\u6863 Human performance is above 90 F1 Multi-Task Learning NLP\u7684\u53e6\u4e00\u4e2a\u524d\u6cbf\u662f\u8ba9\u4e00\u4e2a\u6a21\u578b\u6267\u884c\u8bb8\u591a\u4efb\u52a1\u3002GLUE \u548c DecaNLP\u662f\u6700\u8fd1\u7684\u4f8b\u5b50 \u5728BERT\u7684\u57fa\u7840\u4e0a\uff0c\u591a\u4efb\u52a1\u5b66\u4e60\u4ea7\u751f\u4e86\u6539\u8fdb Low-Resource Settings \u4e0d\u9700\u8981\u5f88\u591a\u8ba1\u7b97\u80fd\u529b\u7684\u6a21\u578b(\u4e0d\u80fd\u4f7f\u7528BERT) \u4e3a\u79fb\u52a8\u8bbe\u5907\u5c24\u5176\u91cd\u8981 \u4f4e\u8d44\u6e90\u8bed\u8a00 \u4f4e\u6570\u636e\u73af\u5883(few shot learning \u5c0f\u6837\u672c\u5b66\u4e60) ML \u4e2d\u7684\u5143\u5b66\u4e60\u8d8a\u6765\u8d8a\u53d7\u6b22\u8fce Interpreting/Understanding Models \u6211\u4eec\u80fd\u5f97\u5230\u6a21\u578b\u9884\u6d4b\u7684\u89e3\u91ca\u5417\uff1f \u6211\u4eec\u80fd\u7406\u89e3\u6a21\u578b\uff0c\u4f8b\u5982BERT\u77e5\u9053\u4ec0\u4e48\u548c\u4ed6\u4eec\u4e3a\u4ec0\u4e48\u5de5\u4f5c\u8fd9\u4e48\u597d\uff1f NLP\u4e2d\u5feb\u901f\u589e\u957f\u7684\u5730\u533a \u5bf9\u4e8e\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u91cd\u8981(\u5982\u533b\u7597\u4fdd\u5065) Diagnostic/Probing Classifiers \u770b\u770b\u6a21\u578b\u77e5\u9053\u4ec0\u4e48\u8bed\u8a00\u7684\u4fe1\u606f \u8bca\u65ad\u5206\u7c7b\u5668\u9700\u8981\u8868\u793a\u4e00\u4e2a\u6a21\u578b(\u4f8b\u5982BERT)\u4f5c\u4e3a\u8f93\u5165\uff0c\u5e76\u505a\u4e00\u4e9b\u4efb\u52a1 \u53ea\u6709\u8bca\u65ad\u5206\u7c7b\u5668\u88ab\u8bad\u7ec3 \u8bca\u65ad\u5206\u7c7b\u5668\u901a\u5e38\u975e\u5e38\u7b80\u5355(\u4f8b\u5982\uff0c\u5355\u4e2asoftmax)\u3002\u5426\u5219\u4ed6\u4eec\u4e0d\u901a\u8fc7\u6a21\u578b\u8868\u793a\u6765\u81ea\u7701\u4f1a\u5b66\u4f1a\u5b8c\u6210\u4efb\u52a1 \u4e00\u4e9b\u8bca\u65ad\u4efb\u52a1 Diagnostic/ Probing Classifiers: Results \u4f4e\u5c42\u7684 BERT \u5728\u4f4e\u5c42\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u66f4\u597d NLP in Industry NLP\u662f\u5feb\u901f\u589e\u957f\u7684\u884c\u4e1a\u3002\u5c24\u5176\u662f\u4e24\u5927\u9886\u57df\uff1a \u5bf9\u8bdd \u804a\u5929\u673a\u5668\u4eba \u5ba2\u6237\u670d\u52a1 \u5065\u5eb7 \u7406\u89e3\u5065\u5eb7\u8bb0\u5f55 \u7406\u89e3\u751f\u7269\u533b\u5b66\u6587\u732e Conclusion \u5728\u8fc7\u53bb\u76845\u5e74\u91cc\uff0c\u7531\u4e8e\u6df1\u5ea6\u5b66\u4e60\uff0c\u8fdb\u6b65\u5f88\u5feb \u7531\u4e8e\u8f83\u5927\u7684\u6a21\u578b\u548c\u66f4\u597d\u5730\u4f7f\u7528\u65e0\u6807\u8bb0\u6570\u636e\uff0c\u5728\u53bb\u5e74\u6709\u4e86\u66f4\u5927\u7684\u8fdb\u5c55 \u662f\u5728NLP\u9886\u57df\u7684\u6fc0\u52a8\u4eba\u5fc3\u7684\u65f6\u523b NLP\u662f\u6b63\u9010\u6e10\u5bf9\u793e\u4f1a\u4ea7\u751f\u5de8\u5927\u5f71\u54cd\u529b\uff0c\u4f7f\u504f\u5dee\u548c\u5b89\u5168\u7b49\u95ee\u9898\u8d8a\u6765\u8d8a\u91cd\u8981 Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"20 The Future of NLP + Deep Learning"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/#lecture-20-the-future-of-nlp-deep-learning","text":"Deep Learning for NLP 5 years ago No Seq2Seq No Attention No large-scale QA/reading comprehension datasets No TensorFlow or Pytorch Future of Deep Learning + NLP \u5229\u7528\u65e0\u6807\u7b7e\u6570\u636e Back-translation \u548c \u65e0\u76d1\u7763\u673a\u5668\u7ffb\u8bd1 \u63d0\u9ad8\u9884\u8bad\u7ec3\u548cGPT-2 \u63a5\u4e0b\u6765\u5462\uff1f NLP\u6280\u672f\u7684\u98ce\u9669\u548c\u793e\u4f1a\u5f71\u54cd \u672a\u6765\u7684\u7814\u7a76\u65b9\u5411 Why has deep learning been so successful recently? \u6269\u5c55\u80fd\u529b\uff08\u6a21\u578b\u548c\u6570\u636e\u5927\u5c0f\uff09\u662f\u6df1\u5ea6\u5b66\u4e60\u8fd1\u4e9b\u5e74\u6765\u6210\u529f\u7684\u539f\u56e0 \u8fc7\u53bb\u53d7\u5230\u8ba1\u7b97\u8d44\u6e90\u548c\u6570\u636e\u8d44\u6e90\u7684\u89c4\u6a21\u9650\u5236 Big deep learning successes \u4e09\u4e2a\u4f7f\u7528\u5927\u91cf\u6570\u636e\u83b7\u5f97\u6210\u529f\u7684\u8303\u4f8b \u56fe\u50cf\u8bc6\u522b\uff1a\u88ab Google, Facebook \u7b49\u5e7f\u6cdb\u4f7f\u7528 ImageNet: 14 million examples \u673a\u5668\u7ffb\u8bd1\uff1a\u8c37\u6b4c\u7ffb\u8bd1\u7b49 WMT: Millions of sentence pairs \u6253\u6e38\u620f\uff1aAtari Games, AlphaGo, and more 10s of millions of frames for Atari AI 10s of millions of self-play games for AlphaZero NLP Datasets \u5373\u4f7f\u662f\u82f1\u8bed\uff0c\u5927\u90e8\u5206\u4efb\u52a1\u4e5f\u53ea\u6709 100k \u6216\u66f4\u5c11\u7684\u6709\u6807\u7b7e\u6837\u672c \u5176\u4ed6\u8bed\u8a00\u7684\u53ef\u7528\u6570\u636e\u5c31\u66f4\u5c11\u4e86 \u6709\u6210\u5343\u4e0a\u4e07\u7684\u8bed\u8a00\uff0c\u5176\u4e2d\u6709\u6210\u767e\u4e0a\u5343\u7684\u8bed\u8a00\u7684\u6bcd\u8bed\u4f7f\u7528\u8005\u662f\u5927\u4e8e\u4e00\u767e\u4e07\u7684 \u53ea\u6709 10% \u7684\u4eba\u5c06\u82f1\u8bed\u4f5c\u4e3a\u4ed6\u4eec\u7684\u7b2c\u4e00\u8bed\u8a00 \u8d8a\u6765\u8d8a\u591a\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4f7f\u7528 \u65e0\u6807\u7b7e \u6570\u636e","title":"Lecture 20 The Future of NLP + Deep Learning"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/#using-unlabeled-data-for-translation","text":"Machine Translation Data \u83b7\u5f97\u7ffb\u8bd1\u9700\u8981\u4eba\u7c7b\u7684\u4e13\u4e1a\u77e5\u8bc6 \u9650\u5236\u6570\u636e\u7684\u5927\u5c0f\u548c\u9886\u57df \u8bed\u8a00\u6587\u672c\u66f4\u5bb9\u6613\u83b7\u5f97 Pre-Training \u5206\u522b\u5c06\u4e24\u4e2a\u9884\u8bad\u7ec3\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a Encoder \u548c Decoder \u7136\u540e\u4f7f\u7528\u53cc\u8bed\u6570\u636e\u5171\u540c\u8bad\u7ec3 English -> German Results: 2+ BLEU point improvement Ramachandran et al., 2017 Self-Training \u9884\u8bad\u7ec3\u7684\u95ee\u9898\uff1a\u9884\u8bad\u7ec3\u4e2d\u4e24\u4e2a\u8bed\u8a00\u4e4b\u95f4\u6ca1\u6709\u4ea4\u4e92 \u81ea\u8bad\u7ec3\uff1a\u6807\u8bb0\u672a\u6807\u8bb0\u7684\u6570\u636e\u4ee5\u83b7\u5f97\u6709\u566a\u58f0\u7684\u8bad\u7ec3\u6837\u672c \u81ea\u8bad\u7ec3\u6280\u672f\u6ca1\u6709\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u56e0\u4e3a\u5176\u8bad\u7ec3\u7684\u6765\u6e90\u662f\u5176\u4e4b\u524d\u7684\u4ea7\u51fa Back-Translation \u6709\u4e24\u79cd\u65b9\u5411\u76f8\u53cd\u7684\u673a\u5668\u7ffb\u8bd1\u6a21\u578b \\(\\text{en} \\to \\text{fr}\\) \u548c \\(\\text{fr} \\to \\text{en}\\) \u4e0d\u518d\u5faa\u73af \u6a21\u578b\u518d\u4e5f\u770b\u4e0d\u5230\u201c\u574f\u201d\u7ffb\u8bd1,\u53ea\u6709\u574f\u8f93\u5165 \u6a21\u578b\u8bad\u7ec3\u65f6\u4f1a\u52a0\u5165\u4e00\u4e9b\u6807\u8bb0\u6570\u636e\uff0c\u786e\u4fdd \\(\\text{en} \\to \\text{fr}\\) \u6a21\u578b\u7684\u8f93\u51fa\uff0c\u5373 \\(\\text{fr} \\to \\text{en}\\) \u6a21\u578b\u7684\u8f93\u5165\uff0c\u4ece\u800c\u4fdd\u8bc1\u6a21\u578b\u7684\u6b63\u5e38 \u5982\u4f55\u534f\u8c03\u5bf9\u6807\u8bb0\u6570\u636e\u4e0e\u672a\u6807\u8bb0\u6570\u636e\u7684\u8bad\u7ec3\u5462\uff1f \u5148\u5728\u6807\u8bb0\u6570\u636e\u4e0a\u8bad\u7ec3\u4e24\u4e2a\u6a21\u578b \u7136\u540e\u5728\u672a\u6807\u8bb0\u6570\u636e\u4e0a\u6807\u8bb0\u4e00\u4e9b\u6570\u636e \u518d\u5728\u672a\u6807\u8bb0\u6570\u636e\u4e0a\u8fdb\u884c\u53cd\u5411\u7ffb\u8bd1\u7684\u8bad\u7ec3 \u91cd\u590d\u5982\u4e0a\u7684\u8fc7\u7a0b Large-Scale Back-Translation 4.5M English-German sentence pairs and 226M monolingual sentences What if there is no Bilingual Data? \u5f53\u6211\u4eec\u53ea\u6709\u672a\u6807\u8bb0\u7684\u53e5\u5b50\u65f6\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u79cd\u6bd4\u5b8c\u5168\u7684\u7ffb\u8bd1\u66f4\u7b80\u5355\u7684\u4efb\u52a1 \u4e0d\u662f\u505a\u53e5\u5b50\u7ffb\u8bd1 \u800c\u662f\u505a\u5355\u8bcd\u7ffb\u8bd1 \u6211\u4eec\u60f3\u8981\u627e\u5230\u67d0\u79cd\u8bed\u8a00\u7684\u7ffb\u8bd1\u4f46\u4e0d\u4f7f\u7528\u4efb\u4f55\u6807\u8bb0\u6570\u636e Unsupervised Word Translation \u8de8\u8bed\u8a00\u6587\u5b57\u5d4c\u5165 cross-lingual word embeddings \u4e24\u79cd\u8bed\u8a00\u5171\u4eab\u5d4c\u5165\u7a7a\u95f4 \u4fdd\u6301\u8bcd\u5d4c\u5165\u7684\u6b63\u5e38\u7684\u597d\u5c5e\u6027 \u4f46\u4e5f\u8981\u63a5\u8fd1\u4ed6\u4eec\u7684\u7ffb\u8bd1 \u60f3\u4ece\u5355\u8bed\u8bed\u6599\u5e93\u4e2d\u5b66\u4e60 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5728\u5171\u4eab\u7684\u5d4c\u5165\u7a7a\u95f4\u4e2d\uff0c\u6bcf\u4e2a\u82f1\u6587\u5355\u8bcd\u90fd\u6709\u5176\u5bf9\u5e94\u7684\u5fb7\u8bed\u5355\u8bcd\uff0c\u5e76\u4e14\u8ddd\u79bb\u5f88\u8fd1 \u6211\u4eec\u5728\u4f7f\u7528\u65f6\uff0c\u53ea\u9700\u9009\u53d6\u82f1\u6587\u5355\u8bcd\u5728\u5d4c\u5165\u7a7a\u95f4\u4e2d\u8ddd\u79bb\u6700\u8fd1\u7684\u5fb7\u8bed\u5355\u8bcd\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u5bf9\u5e94\u7684\u7ffb\u8bd1 \u8bcd\u5d4c\u5165\u6709\u5f88\u591a\u7ed3\u6784 \u5047\u8bbe:\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u7684\u7ed3\u6784\u5e94\u8be5\u76f8\u4f3c \u5373\u4f7f\u662f\u8fd0\u884c\u4e24\u6b21 word2vec \u4f1a\u83b7\u5f97\u4e0d\u540c\u7684\u8bcd\u5d4c\u5165\uff0c\u5d4c\u5165\u7a7a\u95f4\u7684\u7ed3\u6784\u6709\u5f88\u591a\u89c4\u5f8b\u6027 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u662f\u82f1\u8bed\u4e0e\u610f\u5927\u5229\u8bed\u7684\u8bcd\u5d4c\u5165\uff0c\u77e2\u91cf\u7a7a\u95f4\u770b\u4e0a\u53bb\u5f7c\u6b64\u5341\u5206\u4e0d\u540c\uff0c\u4f46\u662f\u7ed3\u6784\u662f\u5341\u5206\u76f8\u4f3c\u7684 \u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u82f1\u8bed\u8bcd\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684 cat \u4e0e feline \u7684\u8ddd\u79bb\u4e0e\u610f\u5927\u5229\u8bed\u8bcd\u5178\u5982\u7a7a\u95f4\u4e2d\u7684 gatto \u548c felino \u4e4b\u95f4\u7684\u8ddd\u79bb\u662f\u76f8\u4f3c\u7684 \u6211\u4eec\u5728\u8de8\u8bed\u8a00\u7684\u8bcd\u5d4c\u5165\u4e2d\u60f3\u8981\u5b66\u4e60\u4e0d\u540c\u79cd\u8bed\u8a00\u7684\u8bcd\u5d4c\u5165\u4e4b\u95f4\u7684\u5bf9\u9f50\u65b9\u5f0f \u9996\u5148\u5728\u5355\u8bed\u8bed\u6599\u5e93\u4e0a\u8fd0\u884c word2vec \u4ee5\u5f97\u5230\u5355\u8bcd\u5d4c\u5165 X \u548c Y \u5b66\u4e60\u4e00\u4e2a\uff08\u6b63\u4ea4\uff09\u77e9\u9635 W \u4f7f\u5f97 WX~Y \u4f7f\u7528\u5bf9\u6297\u8bad\u7ec3\u6765\u5b66\u4e60 W \u9274\u522b\u5668\uff1a\u9884\u6d4b\u4e00\u4e2a\u5d4c\u5165\u662f\u6765\u81ea\u4e8e Y \u7684\u8fd8\u662f\u6765\u81ea\u4e8e X \u5e76\u4f7f\u7528 W \u8f6c\u6362\u540e\u7684\u5d4c\u5165 \u8bad\u7ec3 W \u4f7f\u5f97\u9274\u522b\u5668\u96be\u4ee5\u533a\u5206\u8fd9\u4e24\u8005 \u5176\u4ed6\u53ef\u4ee5\u88ab\u7528\u6765\u8fdb\u4e00\u6b65\u63d0\u5347\u6548\u679c\u7684\u65b9\u6cd5\u53c2\u89c1 Word Translation without Parallel Data \u6b63\u4ea4\u6027\u6765\u7ea6\u675f\u8bcd\u5d4c\u5165\u7684\u539f\u56e0\u662f\u4e3a\u4e86\u9632\u6b62\u8fc7\u62df\u5408 \u6211\u4eec\u5047\u8bbe\u6211\u4eec\u7684\u5d4c\u5165\u7a7a\u95f4\u662f\u7c7b\u4f3c\u7684\uff0c\u53ea\u662f\u9700\u8981\u5bf9\u82f1\u8bed\u7684\u8bcd\u5411\u91cf\u548c\u610f\u5927\u5229\u8bed\u7684\u8bcd\u5411\u91cf\u8fdb\u884c\u65cb\u8f6c Unsupervised Machine Translation \u6a21\u578b\uff1a\u4e0d\u8003\u8651\u4e0d\u540c\u8f93\u5165\u548c\u8f93\u51fa\u8bed\u8a00\uff0c\u4f7f\u7528\u76f8\u540c\u7684(\u5171\u4eab\u7684) encoder-decoder (\u6ca1\u6709\u4f7f\u7528\u6ce8\u610f\u529b) \u4f7f\u7528 cross-lingual \u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\uff0c\u5373\u5176\u4e2d\u7684\u82f1\u8bed\u548c\u6cd5\u8bed\u5355\u8bcd\u5e94\u8be5\u770b\u8d77\u6765\u5b8c\u5168\u76f8\u540c \u6211\u4eec\u53ef\u4ee5\u5582\u7ed9 encoder \u4e00\u4e2a\u82f1\u6587\u53e5\u5b50\uff0c\u4e5f\u53ef\u4ee5\u5582\u4e00\u4e2a\u6cd5\u8bed\u53e5\u5b50\uff0c\u4ece\u800c\u83b7\u5f97 cross-lingual embeddings \uff0c\u5373\u82f1\u6587\u53e5\u5b50\u548c\u6cd5\u8bed\u53e5\u5b50\u4e2d\u5404\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\uff0c\u8fd9\u610f\u5473\u7740 encoder \u53ef\u4ee5\u5904\u7406\u4efb\u4f55\u8f93\u5165 \u5bf9\u4e8e decoder\uff0c\u6211\u4eec\u9700\u8981\u5582\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0 \\(\\text{<Fr>}\\) \u6765\u544a\u8bc9\u6a21\u578b\u5e94\u8be5\u751f\u6210\u4ec0\u4e48\u8bed\u8a00\u7684\u8f93\u51fa \u53ef\u4ee5\u7528\u505a\u4e00\u4e2a auto-encoder\uff0c\u5b8c\u6210 \\(en \\to en\\) \uff0c\u5373\u518d\u73b0\u8f93\u5165\u5e8f\u5217 \u63a5\u4e0b\u91cc\u662f\u6a21\u578b\u7684\u8bad\u7ec3\u8fc7\u7a0b Training objective 1: de-noising autoencoder \u53bb\u566a\u81ea\u7f16\u7801\u5668 \u8f93\u5165\u4e00\u4e2a\u6253\u4e71\u540e\u7684\u82f1\u8bed / \u6cd5\u8bed\u53e5\u5b50 \u8f93\u51fa\u5176\u539f\u6765\u7684\u53e5\u5b50 \u7531\u4e8e\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u6ce8\u610f\u529b\u673a\u5236\u7684\u6a21\u578b\uff0c\u7f16\u7801\u5668\u5c06\u6574\u4e2a\u6e90\u53e5\u5b50\u8f6c\u6362\u4e3a\u5355\u4e2a\u5411\u91cf\uff0c\u81ea\u7f16\u7801\u5668\u7684\u4f5c\u7528\u662f\u4fdd\u8bc1\u6765\u81ea\u4e8e encoder \u7684\u5411\u91cf\u5305\u542b\u548c\u8fd9\u4e2a\u53e5\u5b50\u6709\u5173\u7684\uff0c\u80fd\u4f7f\u5f97\u6211\u4eec\u6062\u590d\u539f\u6765\u7684\u53e5\u5b50\u7684\u6240\u6709\u4fe1\u606f Training objective 2: back translation (\u53ea\u6709\u65e0\u6807\u7b7e\u7684\u6570\u636e) \u9996\u5148\u7ffb\u8bd1 \\(fr \\to en\\) \u7136\u540e\u4f7f\u7528\u4e00\u4e2a\u76d1\u7763\u6837\u672c\u6765\u8bad\u7ec3 \\(en \\to fr\\) \u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 \\(fr \\to en\\) \u8f93\u51fa\u7684\u53e5\u5b50\uff0c\u662f \\(en \\to fr\\) \u8f93\u5165\u7684\u53e5\u5b50\uff0c\u8fd9\u4e2a\u53e5\u5b50\u662f\u6709\u4e9b\u6df7\u4e71\u7684\uff0c\u4e0d\u5b8c\u7f8e\u7684\uff0c\u4f8b\u5982\u8fd9\u91cc\u7684 \u201cI am student\u201d\uff0c\u4e22\u5931\u4e86 \u201ca\u201d \u6211\u4eec\u9700\u8981\u8bad\u7ec3\u6a21\u578b\uff0c\u5373\u4f7f\u662f\u6709\u8fd9\u6837\u7cdf\u7cd5\u7684\u8f93\u5165\uff0c\u4e5f\u80fd\u591f\u8fd8\u539f\u51fa\u539f\u59cb\u7684\u6cd5\u8bed\u53e5\u5b50 Why Does This Work? \u8de8\u8bed\u8a00\u5d4c\u5165\u548c\u5171\u4eab\u7f16\u7801\u5668\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8d77\u70b9 \u4f7f\u7528 cross-lingual \u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\uff0c\u5373\u5176\u4e2d\u7684\u82f1\u8bed\u548c\u6cd5\u8bed\u5355\u8bcd\u5e94\u8be5\u770b\u8d77\u6765\u5b8c\u5168\u76f8\u540c \u5171\u4eab\u7f16\u7801\u5668 \u4f8b\u5982\u6211\u4eec\u4ee5\u4e00\u4e2a\u6cd5\u8bed\u53e5\u5b50\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165 \u7531\u4e8e\u5d4c\u5165\u770b\u8d77\u6765\u975e\u5e38\u76f8\u4f3c\uff0c\u5e76\u4e14\u6211\u4eec\u4f7f\u7528\u7684\u662f\u76f8\u540c\u7684 encoder \u56e0\u6b64 encoder \u5f97\u5230\u7684\u6cd5\u8bed\u53e5\u5b50\u7684 representation \u5e94\u8be5\u548c\u82f1\u8bed\u53e5\u5b50\u7684 representation \u975e\u5e38\u76f8\u4f3c \u6240\u4ee5\u5e0c\u671b\u80fd\u591f\u83b7\u5f97\u548c\u539f\u59cb\u7684\u82f1\u8bed\u53e5\u5b50\u76f8\u540c\u7684\u8f93\u51fa \u76ee\u6807\u9f13\u52b1 language-agnostic \u8bed\u8a00\u65e0\u5173\u7684\u8868\u793a \u83b7\u5f97\u4e00\u4e2a\u4e0e\u8bed\u8a00\u7c7b\u578b\u65e0\u5173\u7684 encoder vector Unsupervised Machine Translation Lample et al., 2018 \u6c34\u5e73\u7ebf\u662f\u65e0\u76d1\u7763\u6a21\u578b\uff0c\u5176\u4f59\u7684\u90fd\u662f\u6709\u76d1\u7763\u7684 \u5728\u4e00\u5b9a\u7684\u76d1\u7763\u6570\u636e\u89c4\u6a21\u4e0b\uff0c\u65e0\u76d1\u7763\u6a21\u578b\u80fd\u591f\u53d6\u5f97\u548c\u76d1\u7763\u6a21\u578b\u7c7b\u4f3c\u7684\u6548\u679c \u5f53\u7136\uff0c\u968f\u7740\u6570\u636e\u89c4\u6a21\u7684\u589e\u5927\uff0c\u76d1\u7763\u6a21\u578b\u7684\u6548\u679c\u4f1a\u63d0\u5347\uff0c\u8d85\u8fc7\u65e0\u76d1\u7763\u6a21\u578b Attribute Transfer \u8fd8\u53ef\u4ee5\u4f7f\u7528\u65e0\u76d1\u7763\u7684\u673a\u5668\u7ffb\u8bd1\u6a21\u578b\u5b8c\u6210\u5c5e\u6027\u8f6c\u79fb Lample et al., 2019 Collector corpora of \u201crelaxed\u201d and \u201cannoyed\u201d tweets using hashtags Learn un unsupervised MT model Not so Fast \u82f1\u8bed\uff0c\u6cd5\u8bed\u548c\u5fb7\u8bed\u662f\u76f8\u5f53\u7c7b\u4f3c\u7684\u8bed\u8a00 \u5728\u975e\u5e38\u4e0d\u540c\u7684\u8bed\u8a00\u4e0a\uff08\u4f8b\u5982\u82f1\u8bed\u548c\u571f\u8033\u5176\u8bed\uff09 \u5b8c\u5168\u7684\u65e0\u76d1\u7763\u7684\u8bcd\u7ffb\u8bd1\u5e76\u4e0d\u5341\u5206\u6709\u6548\u3002\u9700\u8981\u79cd\u5b50\u5b57\u5178\u53ef\u80fd\u7684\u7ffb\u8bd1 \u7b80\u5355\u7684\u6280\u5de7\uff1a\u4f7f\u7528\u76f8\u540c\u7684\u5b57\u7b26\u4e32\u4ece\u8bcd\u6c47 UNMT\u51e0\u4e4e\u4e0d\u5de5\u4f5c Cross-Lingual BERT Lample and Conneau., 2019 \u4e0a\u56fe 1 \u662f\u5e38\u89c4\u7684 BERT \uff0c\u6709\u4e00\u7cfb\u5217\u7684\u82f1\u8bed\u53e5\u5b50\uff0c\u5e76\u4e14\u4f1a mask \u4e00\u90e8\u5206\u5355\u8bcd \u8c37\u6b4c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u5b8c\u6210\u7684\u662f\u8bad\u7ec3\u597d\u7684\u591a\u8bed\u8a00\u7684 BERT \u57fa\u672c\u4e0a\u662f\u8fde\u63a5\u4e00\u5927\u5806\u4e0d\u540c\u8bed\u8a00\u7684\u8bed\u6599\u5e93\uff0c\u7136\u540e\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b masked LM training objective \u4e0a\u56fe 2 \u662f Facebook \u63d0\u51fa\u7684 \u8054\u5408\u4e86 masked LM training objective \u548c \u7ffb\u8bd1 \u7ed9\u5b9a\u4e00\u4e2a\u82f1\u8bed\u53e5\u5b50\u548c\u6cd5\u8bed\u53e5\u5b50\uff0c\u5e76\u5206\u522b mask \u4e00\u90e8\u5206\u5355\u8bcd\uff0c\u5e76\u671f\u671b\u6a21\u578b\u586b\u8865 Unsupervised MT Results","title":"Using Unlabeled Data for Translation"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/#huge-models-and-gpt-2","text":"Training Huge Models This is a General Trend in ML peta : \u7528\u4e8e\u8ba1\u91cf\u5355\u4f4d\uff0c\u8868\u793a10\u768415\u6b21\u65b9\uff0c\u8868\u793a\u5343\u4e07\u4ebf\u6b21 FLOPS = FLoating-point Operations Per Second\uff0c\u6bcf\u79d2\u6d6e\u70b9\u8fd0\u7b97\u6b21\u6570 Huge Models in Computer Vision Training Huge Models \u66f4\u597d\u7684\u786c\u4ef6 \u6570\u636e\u548c\u6a21\u578b\u7684\u5e76\u884c\u5316 GPT-2 \u53ea\u662f\u4e00\u4e2a\u975e\u5e38\u5927\u7684 Transformer LM 40 GB\u7684\u8bad\u7ec3\u6587\u672c \u6295\u5165\u76f8\u5f53\u591a\u7684\u52aa\u529b\u53bb\u786e\u4fdd\u6570\u636e\u8d28\u91cf \u4f7f\u7528 reddit \u4e2d\u83b7\u5f97\u9ad8\u6295\u7968\u7684\u7f51\u9875 link So What Can GPT-2 Do? \u663e\u7136\uff0c\u8bed\u8a00\u5efa\u6a21(\u4f46\u662f\u975e\u5e38\u597d) \u6570\u636e\u96c6\u4e0a\u5f97\u5230\u6700\u5148\u8fdb\u7684\u56f0\u60d1\uff0c\u751a\u81f3\u6ca1\u6709\u8bad\u7ec3 Radford et al., 2019 Zero-Shot Learning : no supervised training data! \u5728\u6ca1\u6709\u63a5\u53d7\u8fc7\u8bad\u7ec3\u7684\u60c5\u51b5\u4e0b\u5e38\u8bc6\u5b8c\u6210\u4efb\u52a1 Ask LM to generate from a prompt Reading Comprehension: \\<context> \\<question> A: Summarization: \\<article> TL;DR: Translation: \\<English sentence1> = \\<French sentence1> \\<English sentence 2> = \\<French sentence 2> \u2026.. \\<Source sentenc> = Question Answering: \\<question> A: GPT-2 Results How can GPT-2 be doing translation? \u5b83\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u8bed\u6599\u5e93\uff0c\u91cc\u9762\u51e0\u4e4e\u5168\u662f\u82f1\u8bed \u7531\u4e8e\u6570\u636e\u96c6\u4e2d\u5b58\u5728\u4e00\u4e9b\u7ffb\u8bd1\u7684\u4f8b\u5b50 \u6cd5\u8bed\u4e60\u8bed\u53ca\u5176\u7ffb\u8bd1 \u6cd5\u8bed\u5f15\u7528\u53ca\u5176\u7ffb\u8bd1 GPT-2 Question Answering Simple baseline: 1% accuracy GPT-2: ~4% accuracy Cherry-picked most confident results \u7cbe\u9009\u51fa\u6700\u81ea\u4fe1\u7684\u7ed3\u679c What happens as models get even bigger? \u5bf9\u4e8e\u4e00\u4e9b\u4efb\u52a1\uff0c\u6027\u80fd\u4f3c\u4e4e\u968f\u7740 log(\u6a21\u578b\u5927\u5c0f) \u7684\u589e\u52a0\u800c\u589e\u52a0 \u4f46\u5982\u4e0b\u56fe\u6240\u793a\u8d8b\u52bf\u5e76\u4e0d\u660e\u6717 GPT-2 Reaction NLP\u4e13\u5bb6\u5e94\u8be5\u505a\u8fd9\u4e9b\u51b3\u5b9a\u5417\uff1f \u8ba1\u7b97\u673a\u5b89\u5168\u4e13\u5bb6\uff1f \u6280\u672f\u548c\u793e\u4f1a\u4e13\u5bb6\uff1f \u9053\u5fb7\u4e13\u5bb6\uff1f \u9700\u8981\u66f4\u591a\u7684\u8de8\u5b66\u79d1\u79d1\u5b66 \u8bb8\u591aNLP\u5177\u6709\u8f83\u5927\u793e\u4f1a\u5f71\u54cd\u7684\u4f8b\u5b50\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u504f\u89c1/\u516c\u5e73 High-Impact Decisions \u8d8a\u6765\u8d8a\u611f\u5174\u8da3\u7528NLP\u5e2e\u52a9\u9ad8\u5f71\u54cd\u529b\u7684\u51b3\u7b56 \u53f8\u6cd5\u5224\u51b3 \u62db\u8058 \u7b49\u7ea7\u6d4b\u8bd5 \u4e00\u65b9\u9762\uff0c\u53ef\u4ee5\u5feb\u901f\u8bc4\u4f30\u673a\u5668\u5b66\u4e60\u7cfb\u7edf\u67d0\u4e9b\u504f\u89c1 \u7136\u800c\uff0c\u673a\u5668\u5b66\u4e60\u53cd\u6620\u4e86\u8bad\u7ec3\u6570\u636e \u751a\u81f3\u653e\u5927\u504f\u89c1\u2026\u8fd9\u53ef\u80fd\u5bfc\u81f4\u66f4\u504f\u5411\u6570\u636e\u7684\u521b\u5efa Chatbots","title":"Huge Models and GPT-2"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/#what-did-bert-solve-and-what-do-we-work-on-next","text":"GLUE Benchmark Results The Death of Architecture Engineering? \u82b1\u8d39\u516d\u4e2a\u6708\u6765\u7814\u7a76 \u4f53\u7cfb\u7ed3\u6784\u7684\u8bbe\u8ba1\uff0c\u5f97\u5230\u4e86 1 F1 \u7684\u63d0\u5347 \u6216\u77e5\u8bc6\u8ba9 BERT \u53d8\u5f97 3 \u500d\u5927\u5c0f\uff0c\u5f97\u5230\u4e86 5 F1 \u7684\u63d0\u5347 SQuAD \u7684 TOP20 \u53c2\u8d5b\u8005\u90fd\u662f\u7528\u4e86 BERT Harder Natural Language Understanding \u9605\u8bfb\u7406\u89e3 \u5728\u957f\u6587\u6863\u6216\u591a\u4e2a\u6587\u6863 \u9700\u8981\u591a\u8df3\u63a8\u7406 \u5728\u5bf9\u8bdd\u4e2d\u5b9a\u4f4d\u95ee\u7b54 \u8bb8\u591a\u73b0\u6709\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u5173\u952e\u95ee\u9898\uff1a\u4eba\u4eec\u5199\u95ee\u9898\u65f6\u770b\u7740\u4e0a\u4e0b\u6587 \u4e0d\u73b0\u5b9e\u7684 \u9f13\u52b1\u7b80\u5355\u7684\u95ee\u9898 QuAC: Question Answering in Context Choi et al., 2018 \u5b66\u751f\u95ee\u95ee\u9898\uff0c\u8001\u5e08\u56de\u7b54\u7684\u5bf9\u8bdd \u6559\u5e08\u770b\u5230\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e3b\u9898\uff0c\u5b66\u751f\u4e0d\u559c\u6b22 \u4ecd\u7136\u548c\u4eba\u7c7b\u6c34\u5e73\u6709\u5f88\u5927\u5dee\u8ddd HotPotQA Zang et al., 2018 \u8bbe\u8ba1\u8981\u6c42\u591a\u8df3\u63a8\u7406 \u95ee\u9898\u5728\u591a\u4e2a\u6587\u6863 Human performance is above 90 F1 Multi-Task Learning NLP\u7684\u53e6\u4e00\u4e2a\u524d\u6cbf\u662f\u8ba9\u4e00\u4e2a\u6a21\u578b\u6267\u884c\u8bb8\u591a\u4efb\u52a1\u3002GLUE \u548c DecaNLP\u662f\u6700\u8fd1\u7684\u4f8b\u5b50 \u5728BERT\u7684\u57fa\u7840\u4e0a\uff0c\u591a\u4efb\u52a1\u5b66\u4e60\u4ea7\u751f\u4e86\u6539\u8fdb Low-Resource Settings \u4e0d\u9700\u8981\u5f88\u591a\u8ba1\u7b97\u80fd\u529b\u7684\u6a21\u578b(\u4e0d\u80fd\u4f7f\u7528BERT) \u4e3a\u79fb\u52a8\u8bbe\u5907\u5c24\u5176\u91cd\u8981 \u4f4e\u8d44\u6e90\u8bed\u8a00 \u4f4e\u6570\u636e\u73af\u5883(few shot learning \u5c0f\u6837\u672c\u5b66\u4e60) ML \u4e2d\u7684\u5143\u5b66\u4e60\u8d8a\u6765\u8d8a\u53d7\u6b22\u8fce Interpreting/Understanding Models \u6211\u4eec\u80fd\u5f97\u5230\u6a21\u578b\u9884\u6d4b\u7684\u89e3\u91ca\u5417\uff1f \u6211\u4eec\u80fd\u7406\u89e3\u6a21\u578b\uff0c\u4f8b\u5982BERT\u77e5\u9053\u4ec0\u4e48\u548c\u4ed6\u4eec\u4e3a\u4ec0\u4e48\u5de5\u4f5c\u8fd9\u4e48\u597d\uff1f NLP\u4e2d\u5feb\u901f\u589e\u957f\u7684\u5730\u533a \u5bf9\u4e8e\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u91cd\u8981(\u5982\u533b\u7597\u4fdd\u5065) Diagnostic/Probing Classifiers \u770b\u770b\u6a21\u578b\u77e5\u9053\u4ec0\u4e48\u8bed\u8a00\u7684\u4fe1\u606f \u8bca\u65ad\u5206\u7c7b\u5668\u9700\u8981\u8868\u793a\u4e00\u4e2a\u6a21\u578b(\u4f8b\u5982BERT)\u4f5c\u4e3a\u8f93\u5165\uff0c\u5e76\u505a\u4e00\u4e9b\u4efb\u52a1 \u53ea\u6709\u8bca\u65ad\u5206\u7c7b\u5668\u88ab\u8bad\u7ec3 \u8bca\u65ad\u5206\u7c7b\u5668\u901a\u5e38\u975e\u5e38\u7b80\u5355(\u4f8b\u5982\uff0c\u5355\u4e2asoftmax)\u3002\u5426\u5219\u4ed6\u4eec\u4e0d\u901a\u8fc7\u6a21\u578b\u8868\u793a\u6765\u81ea\u7701\u4f1a\u5b66\u4f1a\u5b8c\u6210\u4efb\u52a1 \u4e00\u4e9b\u8bca\u65ad\u4efb\u52a1 Diagnostic/ Probing Classifiers: Results \u4f4e\u5c42\u7684 BERT \u5728\u4f4e\u5c42\u7684\u4efb\u52a1\u4e2d\u8868\u73b0\u66f4\u597d NLP in Industry NLP\u662f\u5feb\u901f\u589e\u957f\u7684\u884c\u4e1a\u3002\u5c24\u5176\u662f\u4e24\u5927\u9886\u57df\uff1a \u5bf9\u8bdd \u804a\u5929\u673a\u5668\u4eba \u5ba2\u6237\u670d\u52a1 \u5065\u5eb7 \u7406\u89e3\u5065\u5eb7\u8bb0\u5f55 \u7406\u89e3\u751f\u7269\u533b\u5b66\u6587\u732e Conclusion \u5728\u8fc7\u53bb\u76845\u5e74\u91cc\uff0c\u7531\u4e8e\u6df1\u5ea6\u5b66\u4e60\uff0c\u8fdb\u6b65\u5f88\u5feb \u7531\u4e8e\u8f83\u5927\u7684\u6a21\u578b\u548c\u66f4\u597d\u5730\u4f7f\u7528\u65e0\u6807\u8bb0\u6570\u636e\uff0c\u5728\u53bb\u5e74\u6709\u4e86\u66f4\u5927\u7684\u8fdb\u5c55 \u662f\u5728NLP\u9886\u57df\u7684\u6fc0\u52a8\u4eba\u5fc3\u7684\u65f6\u523b NLP\u662f\u6b63\u9010\u6e10\u5bf9\u793e\u4f1a\u4ea7\u751f\u5de8\u5927\u5f71\u54cd\u529b\uff0c\u4f7f\u504f\u5dee\u548c\u5b89\u5168\u7b49\u95ee\u9898\u8d8a\u6765\u8d8a\u91cd\u8981","title":"What did BERT \u201csolve\u201d and what do we work on next?"},{"location":"CS224n-2019-20-The%20Future%20of%20NLP%20%2B%20Deep%20Learning/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \uff08\u8f66\u4e07\u7fd4\u8001\u5e08\u7b49\u7ffb\u8bd1\uff09 \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"CS224n-2019-Assignment/","text":"CS224n-2019 Assignment \u00b6 \u672c\u6587\u6863\u5c06\u8bb0\u5f55\u4f5c\u4e1a\u4e2d\u7684\u8981\u70b9\u4ee5\u53ca\u95ee\u9898\u7684\u7b54\u6848 \u8bfe\u7a0b\u7b14\u8bb0\u53c2\u89c1\u6211\u7684 \u535a\u5ba2 \uff0c\u5e76\u5728\u535a\u5ba2\u7684 Repo \u4e2d\u63d0\u4f9b\u7b14\u8bb0\u6e90\u6587\u4ef6\u7684\u4e0b\u8f7d Assignment 01 \u00b6 \u9010\u6b65\u5b8c\u6210\u5171\u73b0\u77e9\u9635\u7684\u642d\u5efa\uff0c\u5e76\u8c03\u7528 sklearn.decomposition \u4e2d\u7684 TruncatedSVD \u5b8c\u6210\u4f20\u7edf\u7684\u57fa\u4e8eSVD\u7684\u964d\u7ef4\u7b97\u6cd5 \u53ef\u89c6\u5316\u5c55\u793a\uff0c\u89c2\u5bdf\u5e76\u5206\u6790\u5176\u5728\u4e8c\u7ef4\u7a7a\u95f4\u4e0b\u7684\u805a\u96c6\u60c5\u51b5\u3002 \u8f7d\u5165Word2Vec\uff0c\u5c06\u5176\u4e0eSVD\u5f97\u5230\u7684\u5355\u8bcd\u5206\u5e03\u60c5\u51b5\u8fdb\u884c\u5bf9\u6bd4\uff0c\u5206\u6790\u4e24\u8005\u8bcd\u5411\u91cf\u7684\u4e0d\u540c\u4e4b\u5904\u3002 \u5b66\u4e60\u4f7f\u7528 gensim \uff0c\u4f7f\u7528 Cosine Similarity \u5206\u6790\u5355\u8bcd\u7684\u76f8\u4f3c\u5ea6\uff0c\u5bf9\u6bd4\u5355\u8bcd\u548c\u5176\u540c\u4e49\u8bcd\u4e0e\u53cd\u4e49\u8bcd\u7684 Cosine Distance \uff0c\u5e76\u5c1d\u8bd5\u627e\u5230\u6b63\u786e\u7684\u4e0e\u9519\u8bef\u7684\u7c7b\u6bd4\u6837\u4f8b \u63a2\u5bfbWord2Vec\u5411\u91cf\u4e2d\u5b58\u5728\u7684 Independent Bias \u95ee\u9898 Assignment 02 \u00b6 1 Written: Understanding word2vec \u00b6 \\[ P(O=o | C=c)=\\frac{\\exp \\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)}{\\sum_{w \\in \\mathrm{Vocab}} \\exp \\left(\\boldsymbol{u}_{w}^{\\top} \\boldsymbol{v}_{c}\\right)} \\] \\[ J_{\\text { naive-softmax }}\\left(v_{c}, o, U\\right)=-\\log P(O=o | C=c) \\] \u771f\u5b9e(\u79bb\u6563)\u6982\u7387\u5206\u5e03 \\(p\\) \u4e0e\u53e6\u4e00\u4e2a\u5206\u5e03 \\(q\\) \u7684\u4ea4\u53c9\u71b5\u635f\u5931\u4e3a \\(-\\sum_i p_{i} \\log \\left(q_{i}\\right)\\) Question a Show that the naive-softmax loss given in Equation (2) is the same as the cross-entropy loss between \\(y\\) and \\(\\hat y\\) ; i.e., show that \\[ -\\sum_{w \\in Vocab} y_{w} \\log \\left(\\hat{y}_{w}\\right)=-\\log \\left(\\hat{y}_{o}\\right) \\] Your answer should be one line. Answer a : \u56e0\u4e3a \\(\\textbf{y}\\) \u662f\u72ec\u70ed\u5411\u91cf\uff0c\u6240\u4ee5 \\(-\\sum_{w \\in Vocab} y_{w} \\log (\\hat{y}_{w})=-y_o\\log (\\hat{y}_{o}) -\\sum_{w \\in Vocab,w \\neq o} y_{w} \\log (\\hat{y}_{w}) = -\\log (\\hat{y}_{o})\\) Question b Compute the partial derivative of \\(J_{\\text{naive-softmax}}(v_c, o, \\textbf{U})\\) with respect to \\(v_c\\) . Please write your answer in terms of \\(\\textbf{y}, \\hat {\\textbf{y}}, \\textbf{U}\\) . Answer b : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial v_{c}}} &={-\\frac{\\partial\\left(u_{o}^{T} v_{c}\\right)}{\\partial v_{c}}+\\frac{\\partial \\left(\\log \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)\\right)}{\\partial v_{c}}} \\\\ &={-u_{o}+\\frac{1}{\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)}} \\frac{\\partial \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)}{\\partial v_{c}} \\\\ &={-u_{o}+\\sum_{w} \\frac{\\exp \\left(u_{w}^{T} v_{c}\\right)u_w}{\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)}} \\\\ &={-u_{o}+\\sum_{w} p(O=w | C=c)u_{w}} \\\\ &={-u_{o}+\\sum_{w} \\hat{y_w} u_{w}} \\\\ &={U(\\hat{y}-y)} \\end{array} \\] Question c Compute the partial derivatives of \\(J_{\\text{naive-softmax}}(v_c, o, \\textbf{U})\\) with respect to each of the \u2018outside' word vectors, \\(u_w\\) 's. There will be two cases: when \\(w = o\\) , the true \u2018outside' word vector, and \\(w \\neq o\\) , for all other words. Please write you answer in terms of \\(\\textbf{y}, \\hat {\\textbf{y}}, \\textbf{U}\\) . Answer c : $$ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &={-\\frac{\\partial\\left(u_{o}^{T} v_{c}\\right)}{\\partial u_{w}}+\\frac{\\partial \\left(\\log \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)\\right)}{\\partial u_{w}}} \\end{array} $$ When \\(w \\neq o\\) : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &= 0 + p(O=w | C=c) v_{c} \\\\ &=\\hat{y}_{w} v_{c} \\end{array} \\] When \\(w = o\\) : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &= -v_c + p(O=o | C=c) v_{c} \\\\ &=\\hat{y}_{w} v_{c} - v_c \\\\ &=(\\hat{y}_{w} - 1)v_c \\end{array} \\] Then : \\[ {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial U}} = v_c(\\hat y - y)^T \\] Question d The sigmoid function is given by the follow Equation : \\[ \\sigma(x)=\\frac{1}{1+e^{-x}}=\\frac{e^{x}}{e^{x}+1} \\] Please compute the derivative of \\(\\sigma (x)\\) with respect to \\(x\\) , where \\(x\\) is a vector. Answer d : \\[ \\begin{array}{l} \\frac{\\partial \\sigma(x_i)}{\\partial x_i} &=\\frac{1}{(1+\\exp (-x_i))^{2}} \\exp (-x_i)=\\sigma(x_i)(1-\\sigma(x_i)) \\\\ \\frac{\\partial \\sigma(x)}{\\partial x} &= \\left[\\frac{\\partial \\sigma\\left(x_{j}\\right)}{\\partial x_{i}}\\right]_{d \\times d} \\\\ &=\\left[\\begin{array}{cccc}{\\sigma^{\\prime}\\left(x_{1}\\right)} & {0} & {\\cdots} & {0} \\\\ {0} & {\\sigma^{\\prime}\\left(x_{2}\\right)} & {\\cdots} & {0} \\\\ {\\vdots} & {\\vdots} & {\\vdots} & {\\vdots} \\\\ {0} & {0} & {\\cdots} & {\\sigma^{\\prime}\\left(x_{d}\\right)}\\end{array}\\right] \\\\ &=\\text{diag}(\\sigma^\\prime(x)) \\end{array} \\] Question e Now we shall consider the Negative Sampling loss, which is an alternative to the Naive Softmax loss. Assume that \\(K\\) negative samples (words) are drawn from the vocabulary. For simplicity of notation we shall refer to them as \\(w_{1}, w_{2}, \\dots, w_{K}\\) and their outside vectors as \\(u_{1}, \\dots, u_{K}\\) . Note that \\(o \\notin\\left\\{w_{1}, \\dots, w_{K}\\right\\}\\) . For a center word \\(c\\) and an outside word \\(o\\) , the negative sampling loss function is given by: \\[ J_{\\text { neg-sample }}\\left(v_{c}, o, U\\right)=-\\log \\left(\\sigma\\left(u_{o}^{\\top} v_{c}\\right)\\right)-\\sum_{k=1}^{K} \\log \\left(\\sigma\\left(-u_{k}^{\\top} v_{c}\\right)\\right) \\] for a sample \\(w_{1}, w_{2}, \\dots, w_{K}\\) , where \\(\\sigma(\\cdot)\\) is the sigmoid function. Please repeat parts b and c, computing the partial derivatives of \\(J_{\\text { neg-sample }}\\) respect to \\(v_c\\) , with respect to \\(u_o\\) , and with respect to a negative sample \\(u_k\\) . Please write your answers in terms of the vectors \\(u_o, v_c,\\) and \\(u_k\\) , where \\(k \\in[1, K]\\) . After you've done this, describe with one sentence why this loss function is much more efficient to compute than the naive-softmax loss. Note, you should be able to use your solution to part (d) to help compute the necessary gradients here. Answer e : For \\(v_c\\) : \\[ \\begin{array}{l} \\frac{\\partial J_{\\text {neg-sample}}}{\\partial v_c} &=(\\sigma(u_o^T v_c) - 1) u_o + \\sum_{k=1}^{K}\\left(1-\\sigma\\left(-u_{k}^{T} v_{c}\\right)\\right) u_{k} \\\\ &= (\\sigma(u_o^T v_c) - 1) u_o+ \\sum_{k=1}^{K}\\sigma\\left(u_{k}^{T} v_{c}\\right) u_{k} \\end{array} \\] For \\(u_o\\) , Remeber : \\(o \\notin\\left\\{w_{1}, \\dots, w_{K}\\right\\}\\) : \\[ \\frac{\\partial J_{\\text {neg-sample}}}{\\partial u_o}=(\\sigma(u_o^T v_c) - 1)v_c \\] For \\(u_k\\) : \\[ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{k}}=-\\left(\\sigma\\left(-\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)-1\\right) \\boldsymbol{v}_{c} = \\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)\\boldsymbol{v}_{c}, \\quad for\\ k=1,2, \\ldots, K \\] Why this loss function is much more efficient to compute than the naive-softmax loss? For naive softmax loss function: \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial v_{c}}} &={U(\\hat{y}-y)} \\\\ {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial U}} &= v_c(\\hat y - y)^T \\end{array} \\] For negative sampling loss function: \\[ \\begin{aligned} \\frac{\\partial J}{\\partial \\boldsymbol{v}_{c}} &=\\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} v_{c}\\right)-1\\right) \\boldsymbol{u}_{o} + \\sum_{k=1}^{K}\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{u}_{k} =\\sigma\\left(-\\boldsymbol{u}_{o}^{\\top} v_{c}\\right) \\boldsymbol{u}_{o} + \\sum_{k=1}^{K}\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{u}_{k} \\\\ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{o}} &=\\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)-1\\right) \\boldsymbol{v}_{c} = \\sigma\\left(-\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)\\boldsymbol{v}_{c} \\\\ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{k}} &=\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{v}_{c}, \\quad \\text { for all } k=1,2, \\ldots, K \\end{aligned} \\] \u4ece\u6c42\u5f97\u7684\u504f\u5bfc\u6570\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u539f\u59cb\u7684softmax\u51fd\u6570\u6bcf\u6b21\u5bf9 \\(v_c\\) \u8fdb\u884c\u53cd\u5411\u4f20\u64ad\u65f6\uff0c\u9700\u8981\u4e0e output vector matrix \u8fdb\u884c\u5927\u91cf\u4e14\u590d\u6742\u7684\u77e9\u9635\u8fd0\u7b97\uff0c\u800c\u8d1f\u91c7\u6837\u4e2d\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5219\u4e0d\u518d\u4e0e\u8bcd\u8868\u5927\u5c0f \\(V\\) \u6709\u5173\uff0c\u800c\u662f\u4e0e\u91c7\u6837\u6570\u91cf \\(K\\) \u6709\u5173\u3002 Question f Suppose the center word is \\(c = w_t\\) and the context window is \\(\\left[w_{t-m}, \\ldots, w_{t-1}, w_{t}, w_{t+1}, \\dots,w_{t+m} \\right]\\) , where \\(m\\) is the context window size. Recall that for the skip-gram version of word2vec , the total loss for the context window is \\[ J_{\\text { skip-gram }}\\left(v_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right)=\\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) \\] Here, \\(J\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) represents an arbitrary loss term for the center word \\(c = w_t\\) and outside word \\(w_t+j\\) . \\(J\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) could be \\(J_{\\text {naive-softmax}}\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) or \\(J_{\\text {neg-sample}}\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) , depending on your implementation. Write down three partial derivatives: \\[ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{U} \\\\ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial v_{c} \\\\ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial v_{w} \\text { when } w \\neq c \\] Write your answers in terms of \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{U}\\) and \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{v_c}\\) . This is very simple - each solution should be one line. Once you're done : Given that you computed the derivatives of \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) with respect to all the model parameters \\(U\\) and \\(V\\) in parts a to c, you have now computed the derivatives of the full loss function \\(J_{skip-gram}\\) with respect to all parameters. You're ready to implement word2vec ! Answer f : $$ \\begin{array}{l} \\frac{\\partial J_{s g}}{\\partial U} &= \\sum_{-m \\leq j \\leq m, j \\neq 0} \\frac{\\partial J\\left(v_{c}, w_{t+j}, U\\right)}{\\partial U} \\ \\frac{\\partial J_{s g}}{\\partial v_{c}}&= \\sum_{-m \\leq j \\leq m, j \\neq 0} \\frac{\\partial J\\left(v_{c}, w_{t+j}, U\\right)}{\\partial v_{c}} \\ \\frac{\\partial J_{s g}}{\\partial v_{w}}&=0(\\text { when } w \\neq c) \\end{array} $$ 2 Coding: Implementing word2vec \u00b6 word2vec.py \u00b6 \u672c\u90e8\u5206\u8981\u6c42\u5b9e\u73b0 \\(sigmoid, naiveSoftmaxLossAndGradient, negSamplingLossAndGradient, skipgram\\) \u56db\u4e2a\u51fd\u6570\uff0c\u4e3b\u8981\u8003\u5bdf\u5bf9\u7b2c\u4e00\u90e8\u5206\u4e2d\u53cd\u5411\u4f20\u64ad\u8ba1\u7b97\u7ed3\u679c\u7684\u5b9e\u73b0\u3002\u4ee3\u7801\u5b9e\u73b0\u4e2d\uff0c\u901a\u8fc7\u4f18\u5316\u504f\u5bfc\u6570\u7ed3\u5408\u504f\u5bfc\u6570\u8ba1\u7b97\u7ed3\u679c\u4e0e \\(\\sigma(x) + \\sigma(-x) = 1\\) \u5bf9\u516c\u5f0f\u8fdb\u884c\u8f6c\u5316\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5168\u77e2\u91cf\u5316\u3002\u8fd9\u90e8\u5206\u9700\u8981\u5927\u5bb6\u81ea\u884c\u7ed3\u5408\u4ee3\u7801\u4e0e\u516c\u5f0f\u8fdb\u884c\u63a8\u5bfc\u3002 sgd.py \u00b6 \u5b9e\u73b0 SGD $$ \\theta^{n e w}=\\theta^{o l d} - \\alpha \\nabla_{\\theta} J(\\theta) $$ run.py \u00b6 \u9996\u5148\u8981\u8bf4\u660e\u7684\u662f\uff0c\u8fd9\u4e2a\u771f\u7684\u8981\u8dd1\u597d\u4e45 Question Briefly explain in at most three sentences what you see in the plot. \u4e0a\u56fe\u662f\u7ecf\u8fc7\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u7684\u53ef\u89c6\u5316\u3002\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\u4e00\u4e9b\u6a21\u5f0f\uff1a \u8fd1\u4e49\u8bcd\u88ab\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u6bd4\u5982 amazing \u548c wonderful\uff0cwoman \u548c female\u3002 \u4f46\u662f man \u548c male \u5374\u8ddd\u79bb\u8f83\u8fdc \u53cd\u4e49\u8bcd\u53ef\u80fd\u56e0\u4e3a\u7ecf\u5e38\u5c5e\u4e8e\u540c\u4e00\u4e0a\u4e0b\u6587\uff0c\u5b83\u4eec\u4e5f\u4f1a\u4e0e\u540c\u4e49\u8bcd\u4e00\u8d77\u51fa\u73b0\uff0c\u6bd4\u5982 enjoyable \u548c annoying\u3002 man:king::woman:queen \u4ee5\u53ca queen:king::female:male \u5f62\u6210\u7684\u4e24\u6761\u76f4\u7ebf\u57fa\u672c\u5e73\u884c Assignment 03 \u00b6 1. Machine Learning & Neural Networks \u00b6 (a) Adam Optimizer \u00b6 \u56de\u5fc6\u4e00\u4e0b\u6807\u51c6\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u7684\u66f4\u65b0\u89c4\u5219 $$ \\boldsymbol{\\theta} \\leftarrow \\boldsymbol{\\theta}-\\alpha \\nabla_{\\boldsymbol{\\theta}}{J_{\\mathrm{minibatch}}(\\boldsymbol{\\theta})} $$ \u5176\u4e2d\uff0c \\(\\boldsymbol{\\theta}\\) \u662f\u5305\u542b\u6a21\u578b\u6240\u6709\u53c2\u6570\u7684\u5411\u91cf\uff0c \\(J\\) \u662f\u635f\u5931\u51fd\u6570\uff0c \\(\\nabla_{\\boldsymbol{\\theta}} J_{\\mathrm{minibatch}}(\\boldsymbol{\\theta})\\) \u662f\u5173\u4e8eminibatch\u6570\u636e\u4e0a\u53c2\u6570\u7684\u635f\u5931\u51fd\u6570\u7684\u68af\u5ea6\uff0c \\(\\alpha\\) \u662f\u5b66\u4e60\u7387\u3002 Adam Optimization \u4f7f\u7528\u4e86\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u66f4\u65b0\u89c4\u5219\uff0c\u5e76\u9644\u52a0\u4e86\u4e24\u4e2a\u6b65\u9aa4\u3002 Question 1.a.i \u9996\u5148\uff0cAdam\u4f7f\u7528\u4e86\u4e00\u4e2a\u53eb\u505a \\(momentum\\) **\u52a8\u91cf**\u7684\u6280\u5de7\u6765\u8ddf\u8e2a\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5747\u503c \\(m\\) \\[ \\begin{aligned} \\mathbf{m} & \\leftarrow \\beta_{1} \\mathbf{m}+\\left(1-\\beta_{1}\\right) \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\\\ \\boldsymbol{\\theta} & \\leftarrow \\boldsymbol{\\theta}-\\alpha \\mathbf{m} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\beta_1\\) \u662f\u4e00\u4e2a 0 \u548c 1 \u4e4b\u95f4\u7684\u8d85\u53c2\u6570(\u901a\u5e38\u88ab\u8bbe\u4e3a0.9)\u3002\u7b80\u8981\u8bf4\u660e(\u4e0d\u9700\u8981\u7528\u6570\u5b66\u65b9\u6cd5\u8bc1\u660e\uff0c\u53ea\u9700\u8981\u76f4\u89c2\u5730\u8bf4\u660e)\u5982\u4f55\u4f7f\u7528m\u6765\u963b\u6b62\u66f4\u65b0\u53d1\u751f\u5927\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u603b\u4f53\u4e0a\u4e3a\u4ec0\u4e48\u8fd9\u79cd\u5c0f\u53d8\u5316\u53ef\u80fd\u6709\u52a9\u4e8e\u5b66\u4e60\u3002 Answer 1.a.i : \u7531\u4e8e\u8d85\u53c2\u6570 \\(\\beta _1\\) \u4e00\u822c\u88ab\u8bbe\u4e3a0.9\uff0c\u6b64\u65f6\u5bf9\u4e8e\u79fb\u52a8\u5e73\u5747\u7684\u68af\u5ea6\u503c \\(m\\) \u800c\u8a00\uff0c\u4e3b\u8981\u53d7\u5230\u7684\u662f\u4e4b\u524d\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5747\u503c\u7684\u5f71\u54cd\uff0c\u800c\u672c\u6b21\u8ba1\u7b97\u5f97\u5230\u7684\u68af\u5ea6\u5c06\u4f1a\u88ab\u7f29\u653e\u4e3a\u539f\u6765\u7684 \\({1 - \\beta_1}\\) \u500d\uff0c\u5373\u65f6\u672c\u6b21\u8ba1\u7b97\u5f97\u5230\u7684\u68af\u5ea6\u5f88\u5927\uff08\u68af\u5ea6\u7206\u70b8\uff09\uff0c\u8fd9\u4e00\u5f71\u54cd\u4e5f\u4f1a\u88ab\u51cf\u8f7b\uff0c\u4ece\u800c\u963b\u6b62\u66f4\u65b0\u53d1\u751f\u5927\u7684\u53d8\u5316\u3002 \u901a\u8fc7\u51cf\u5c0f\u68af\u5ea6\u7684\u53d8\u5316\u7a0b\u5ea6\uff0c\u4f7f\u5f97\u6bcf\u6b21\u7684\u68af\u5ea6\u66f4\u65b0\u66f4\u52a0\u7a33\u5b9a\uff0c\u4ece\u800c\u4f7f\u6a21\u578b\u5b66\u4e60\u66f4\u52a0\u7a33\u5b9a\uff0c\u6536\u655b\u901f\u5ea6\u66f4\u5feb\uff0c\u5e76\u4e14\u8fd9\u4e5f\u51cf\u6162\u4e86\u5bf9\u4e8e\u8f83\u5927\u68af\u5ea6\u503c\u7684\u53c2\u6570\u7684\u66f4\u65b0\u901f\u5ea6\uff0c\u4fdd\u8bc1\u5176\u66f4\u65b0\u7684\u7a33\u5b9a\u6027\u3002 Question 1.a.ii Adam\u8fd8\u901a\u8fc7\u8ddf\u8e2a\u68af\u5ea6\u5e73\u65b9\u7684\u79fb\u52a8\u5e73\u5747\u503c \\(v\\) \u6765\u4f7f\u7528\u81ea\u9002\u5e94\u5b66\u4e60\u7387 \\[ \\begin{aligned} \\mathbf{m} & \\leftarrow \\beta_{1} \\mathbf{m}+\\left(1-\\beta_{1}\\right) \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\\\ \\mathbf{v} & \\leftarrow \\beta_{2} \\mathbf{v}+\\left(1-\\beta_{2}\\right)\\left(\\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\odot \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta})\\right) \\\\ \\boldsymbol{\\theta} & \\leftarrow \\boldsymbol{\\theta}-\\alpha \\odot \\mathbf{m} / \\sqrt{\\mathbf{v}} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\odot, /\\) \u5206\u522b\u8868\u793a\u9010\u5143\u7d20\u7684\u4e58\u6cd5\u548c\u9664\u6cd5\uff08\u6240\u4ee5 \\(z \\odot z\\) \u662f\u9010\u5143\u7d20\u7684\u5e73\u65b9\uff09\uff0c \\(\\beta_2\\) \u662f\u4e00\u4e2a 0 \u548c 1 \u4e4b\u95f4\u7684\u8d85\u53c2\u6570(\u901a\u5e38\u88ab\u8bbe\u4e3a0.99)\u3002\u56e0\u4e3aAdam\u5c06\u66f4\u65b0\u9664\u4ee5 \\(\\sqrt v\\) \uff0c\u90a3\u4e48\u54ea\u4e2a\u6a21\u578b\u53c2\u6570\u4f1a\u5f97\u5230\u66f4\u5927\u7684\u66f4\u65b0\uff1f\u4e3a\u4ec0\u4e48\u8fd9\u5bf9\u5b66\u4e60\u6709\u5e2e\u52a9\uff1f Answer 1.a.ii : \u79fb\u52a8\u5e73\u5747\u68af\u5ea6\u6700\u5c0f\u7684\u6a21\u578b\u53c2\u6570\u5c06\u5f97\u5230\u8f83\u5927\u7684\u66f4\u65b0\u3002 \u4e00\u65b9\u9762\uff0c\u5c06\u68af\u5ea6\u8f83\u5c0f\u7684\u53c2\u6570\u7684\u66f4\u65b0\u53d8\u5927\uff0c\u5e2e\u52a9\u5176\u8d70\u51fa\u5c40\u90e8\u6700\u4f18\u70b9\uff08\u978d\u70b9\uff09\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u5c06\u68af\u5ea6\u8f83\u5927\u7684\u53c2\u6570\u7684\u66f4\u65b0\u53d8\u5c0f\uff0c\u4f7f\u5176\u66f4\u65b0\u66f4\u52a0\u7a33\u5b9a\u3002\u7ed3\u5408\u4ee5\u4e0a\u4e24\u4e2a\u65b9\u9762\uff0c\u4f7f\u5b66\u4e60\u66f4\u52a0\u5feb\u901f\u7684\u540c\u65f6\u4e5f\u66f4\u52a0\u7a33\u5b9a\u3002 (b) Dropout \u00b6 Dropout \u662f\u4e00\u79cd\u6b63\u5219\u5316\u6280\u672f\u3002\u5728\u8bad\u7ec3\u671f\u95f4\uff0cDropout \u4ee5 \\(p_{drop}\\) \u7684\u6982\u7387\u968f\u673a\u8bbe\u7f6e\u9690\u85cf\u5c42 \\(h\\) \u4e2d\u7684\u795e\u7ecf\u5143\u4e3a\u96f6(\u6bcf\u4e2aminibatch\u4e2d dropout \u4e0d\u540c\u7684\u795e\u7ecf\u5143),\u7136\u540e\u5c06 \\(h\\) \u4e58\u4ee5\u4e00\u4e2a\u5e38\u6570 \\(\\gamma\\) \u3002\u6211\u4eec\u53ef\u4ee5\u5199\u4e3a \\[ \\mathbf{h}_{\\mathrm{drop}}=\\gamma \\mathbf{d} \\circ \\mathbf{h} \\] \u5176\u4e2d\uff0c \\(d \\in \\{0,1\\}^{D_h}\\) ( \\(D_h\\) \u662f \\(h\\) \u7684\u5927\u5c0f)\u662f\u4e00\u4e2a\u63a9\u7801\u5411\u91cf\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6761\u76ee\u90fd\u662f\u4ee5 \\(p_{drop}\\) \u7684\u6982\u7387\u4e3a 0 \uff0c\u4ee5 \\(1 - p_{drop}\\) \u7684\u6982\u7387\u4e3a 1\u3002 \\(\\gamma\\) \u662f\u4f7f\u5f97 \\(h_{drop}\\) \u7684\u671f\u671b\u503c\u4e3a \\(h\\) \u7684\u503c \\[ \\mathbb{E}_{p_{\\text{drop}}}\\left[\\mathbf{h}_{\\text{drop}}\\right]_{i}=h_{i}, \\text{for all } i \\in \\{1,\\dots,D_h\\} \\] Question 1.b.i \\(\\gamma\\) \u5fc5\u987b\u7b49\u4e8e\u4ec0\u4e48(\u7528 \\(p_{drop}\\) \u8868\u793a) \uff1f\u7b80\u5355\u8bc1\u660e\u4f60\u7684\u7b54\u6848\u3002 Answer 1.b.i : \\[ \\gamma = \\frac{1}{1 - p_{drop}} \\\\ \\] \u8bc1\u660e\u5982\u4e0b\uff1a \\[ \\sum_i (1 - p_{drop}) h_i = (1 - p_{drop}) E[h] \\\\ \\sum_i[h_{drop}]_i = \\gamma\\sum_i (1 - p_{drop}) h_i = \\gamma (1 - p_{drop}) E[h] = E[h] \\] Question 1.b.ii \u4e3a\u4ec0\u4e48\u6211\u4eec\u5e94\u8be5\u53ea\u5728\u8bad\u7ec3\u65f6\u4f7f\u7528 dropout \u800c\u5728\u8bc4\u4f30\u65f6\u4e0d\u4f7f\u7528\uff1f Answer 1.b.ii : \u5982\u679c\u6211\u4eec\u5728\u8bc4\u4f30\u671f\u95f4\u5e94\u7528 dropout \uff0c\u90a3\u4e48\u8bc4\u4f30\u7ed3\u679c\u5c06\u4f1a\u5177\u6709\u968f\u673a\u6027\uff0c\u5e76\u4e0d\u80fd\u4f53\u73b0\u6a21\u578b\u7684\u771f\u5b9e\u6027\u80fd\uff0c\u8fdd\u80cc\u4e86\u6b63\u5219\u5316\u7684\u521d\u8877\u3002\u901a\u8fc7\u5728\u8bc4\u4f30\u671f\u95f4\u7981\u7528 dropout\uff0c\u4ece\u800c\u89c2\u5bdf\u6a21\u578b\u7684\u6027\u80fd\u4e0e\u6b63\u5219\u5316\u7684\u6548\u679c\uff0c\u4fdd\u8bc1\u6a21\u578b\u7684\u53c2\u6570\u5f97\u5230\u6b63\u786e\u7684\u66f4\u65b0\u3002 2. Neural Transition-Based Dependency Parsing \u00b6 \u5728\u672c\u8282\u4e2d\uff0c\u60a8\u5c06\u5b9e\u73b0\u4e00\u4e2a\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u4f9d\u8d56\u89e3\u6790\u5668\uff0c\u5176\u76ee\u6807\u662f\u5728UAS(\u672a\u6807\u8bb0\u4f9d\u5b58\u8bc4\u5206)\u6307\u6807\u4e0a\u6700\u5927\u5316\u6027\u80fd\u3002 \u4f9d\u5b58\u89e3\u6790\u5668\u5206\u6790\u53e5\u5b50\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u5728 head words \u548c \u4fee\u9970 head words \u7684\u5355\u8bcd\u4e4b\u95f4\u5efa\u7acb\u5173\u7cfb\u3002\u4f60\u7684\u5b9e\u73b0\u5c06\u662f\u4e00\u4e2a\u57fa\u4e8e\u8f6c\u6362\u7684\u89e3\u6790\u5668\uff0c\u5b83\u9010\u6b65\u6784\u5efa\u4e00\u4e2a\u89e3\u6790\u3002\u6bcf\u4e00\u6b65\u90fd\u7ef4\u62a4\u4e00\u4e2a\u5c40\u90e8\u89e3\u6790\uff0c\u8868\u793a\u5982\u4e0b \u4e00\u4e2a\u5b58\u50a8\u6b63\u5728\u88ab\u5904\u7406\u7684\u5355\u8bcd\u7684 \u6808 \u4e00\u4e2a\u5b58\u50a8\u5c1a\u672a\u5904\u7406\u7684\u5355\u8bcd\u7684 \u7f13\u5b58 \u4e00\u4e2a\u89e3\u6790\u5668\u9884\u6d4b\u7684 \u4f9d\u8d56 \u7684\u5217\u8868 \u6700\u521d,\u6808\u53ea\u5305\u542b ROOT \uff0c\u4f9d\u8d56\u9879\u5217\u8868\u662f\u7a7a\u7684\uff0c\u800c\u7f13\u5b58\u5219\u5305\u542b\u4e86\u8fd9\u4e2a\u53e5\u5b50\u7684\u6240\u6709\u5355\u8bcd\u3002\u5728\u6bcf\u4e00\u4e2a\u6b65\u9aa4\u4e2d,\u89e3\u6790\u5668\u5c06\u5bf9\u90e8\u5206\u89e3\u6790\u4f7f\u7528\u4e00\u4e2a\u8f6c\u6362,\u76f4\u5230\u5b83\u7684\u9b42\u6751\u662f\u7a7a\u7684\uff0c\u5e76\u4e14\u6808\u5927\u5c0f\u4e3a1\u3002\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8f6c\u6362\uff1a SHIFT\uff1a\u5c06buffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\u79fb\u51fa\u5e76\u653e\u5230stack\u4e0a\u3002 LEFT-ARC\uff1a\u5c06\u7b2c\u4e8c\u4e2a(\u6700\u8fd1\u6dfb\u52a0\u7684\u7b2c\u4e8c)\u9879\u6807\u8bb0\u4e3a\u6808\u9876\u5143\u7d20\u7684\u4f9d\u8d56\uff0c\u5e76\u4ece\u5806\u6808\u4e2d\u5220\u9664\u7b2c\u4e8c\u9879 RIGHT-ARC\uff1a\u5c06\u7b2c\u4e00\u4e2a(\u6700\u8fd1\u6dfb\u52a0\u7684\u7b2c\u4e00)\u9879\u6807\u8bb0\u4e3a\u6808\u4e2d\u7b2c\u4e8c\u9879\u7684\u4f9d\u8d56\uff0c\u5e76\u4ece\u5806\u6808\u4e2d\u5220\u9664\u7b2c\u4e00\u9879 \u5728\u6bcf\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u89e3\u6790\u5668\u5c06\u4f7f\u7528\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u5206\u7c7b\u5668\u5728\u4e09\u4e2a\u8f6c\u6362\u4e2d\u51b3\u5b9a\u3002 Question 2.a \u6c42\u89e3\u89e3\u6790\u53e5\u5b50 \u201cI parsed this sentence correctly\u201d \u6240\u9700\u7684\u8f6c\u6362\u987a\u5e8f\u3002\u8fd9\u53e5\u8bdd\u7684\u4f9d\u8d56\u6811\u5982\u4e0b\u6240\u793a\u3002\u5728\u6bcf\u4e00\u6b65\u4e2d\uff0c\u7ed9\u51fa stack \u548c buffer \u7684\u7ed3\u6784\uff0c\u4ee5\u53ca\u672c\u6b65\u9aa4\u5e94\u7528\u4e86\u4ec0\u4e48\u8f6c\u6362\uff0c\u5e76\u6dfb\u52a0\u65b0\u7684\u4f9d\u8d56(\u5982\u679c\u6709\u7684\u8bdd)\u3002\u4e0b\u9762\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\u3002 Answer 2.a : Stack Buffer New dependency Transition [ROOT] [I, parsed, this, sentence, correctly] Initial Con\ufb01guration [ROOT, I] [parsed, this, sentence, correctly] SHIFT [ROOT, I, parsed] [this, sentence, correctly] SHIFT [ROOT, parsed] [this, sentence, correctly] parsed \\(\\to\\) I LEFT-ARC [ROOT, parsed, this] [sentence, correctly] SHIFT [ROOT, parsed, this, sentence] [correctly] SHIFT [ROOT, parsed, sentence] [correctly] sentence \\(\\to\\) this LEFT-ARC [ROOT, parsed] [correctly] parsed \\(\\to\\) sentence RIGHT-ARC [ROOT, parsed, correctly] [] SHIFT [ROOT, parsed] [] parsed \\(\\to\\) correctly RIGHT-ARC [ROOT] [] ROOT \\(\\to\\) parsed RIGHT-ARC Question 2.b \u4e00\u4e2a\u5305\u542b \\(n\\) \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u9700\u8981\u591a\u5c11\u6b65(\u7528 \\(n\\) \u8868\u793a)\u624d\u80fd\u88ab\u89e3\u6790\uff1f\u7b80\u8981\u89e3\u91ca\u4e3a\u4ec0\u4e48\u3002 Answer 2.b : \u5305\u542b \\(n\\) \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u9700\u8981 \\(2 \\times n\\) \u6b65\u624d\u80fd\u5b8c\u6210\u89e3\u6790\u3002\u56e0\u4e3a\u9700\u8981\u8fdb\u884c \\(n\\) \u6b65\u7684 \\(SHIFT\\) \u64cd\u4f5c\u548c \u5171\u8ba1$n \u6b65\u7684 LEFT-ARC \u6216 RIGHT-ARC \u64cd\u4f5c\uff0c\u624d\u80fd\u5b8c\u6210\u89e3\u6790\u3002\uff08\u6bcf\u4e2a\u5355\u8bcd\u90fd\u9700\u8981\u4e00\u6b21SHIFT\u548cARC\u7684\u64cd\u4f5c\uff0c\u521d\u59cb\u5316\u6b65\u9aa4\u4e0d\u8ba1\u7b97\u5728\u5185\uff09 Question 2.c \u5b9e\u73b0\u89e3\u6790\u5668\u5c06\u4f7f\u7528\u7684\u8f6c\u6362\u673a\u5236 Question 2.d \u6211\u4eec\u7684\u7f51\u7edc\u5c06\u9884\u6d4b\u54ea\u4e9b\u8f6c\u6362\u5e94\u8be5\u5e94\u7528\u4e8e\u90e8\u5206\u89e3\u6790\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u89e3\u6790\u4e00\u4e2a\u53e5\u5b50\uff0c\u901a\u8fc7\u5e94\u7528\u9884\u6d4b\u51fa\u7684\u8f6c\u6362\u64cd\u4f5c\uff0c\u76f4\u5230\u89e3\u6790\u5b8c\u6210\u3002\u7136\u800c\uff0c\u5728\u5bf9\u5927\u91cf\u6570\u636e\u8fdb\u884c\u9884\u6d4b\u65f6\uff0c\u795e\u7ecf\u7f51\u7edc\u7684\u8fd0\u884c\u901f\u5ea6\u8981\u9ad8\u5f97\u591a(\u5373\u540c\u65f6\u9884\u6d4b\u4e86\u5bf9\u4efb\u4f55\u4e0d\u540c\u90e8\u5206\u89e3\u6790\u7684\u4e0b\u4e00\u4e2a\u8f6c\u6362)\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u7b97\u6cd5\u6765\u89e3\u6790\u5c0f\u6279\u6b21\u7684\u53e5\u5b50 \u5b9e\u73b0minibatch\u7684\u89e3\u6790\u5668 \u6211\u4eec\u73b0\u5728\u5c06\u8bad\u7ec3\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u6765\u9884\u6d4b\uff0c\u8003\u8651\u5230\u6808\u3001\u7f13\u5b58\u548c\u4f9d\u8d56\u9879\u96c6\u5408\u7684\u72b6\u6001\uff0c\u4e0b\u4e00\u6b65\u5e94\u8be5\u5e94\u7528\u54ea\u4e2a\u8f6c\u6362\u3002\u9996\u5148\uff0c\u6a21\u578b\u63d0\u53d6\u4e86\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u72b6\u6001\u7684\u7279\u5f81\u5411\u91cf\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u539f\u795e\u7ecf\u4f9d\u8d56\u89e3\u6790\u8bba\u6587\u4e2d\u7684\u7279\u5f81\u96c6\u5408\uff1a A Fast and Accurate Dependency Parser using Neural Networks \u3002\u8fd9\u4e2a\u7279\u5f81\u5411\u91cf\u7531\u6807\u8bb0\u5217\u8868(\u4f8b\u5982\u5728\u6808\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u8bcd\uff0c\u7f13\u5b58\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\uff0c\u6808\u4e2d\u7b2c\u4e8c\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u7684\u4f9d\u8d56(\u5982\u679c\u6709))\u7ec4\u6210\u3002\u5b83\u4eec\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a\u6574\u6570\u7684\u5217\u8868 \\([w_1,w_2,\\dots,w_m]\\) \uff0cm\u662f\u7279\u5f81\u7684\u6570\u91cf\uff0c\u6bcf\u4e2a \\(0 \\leq w_i \\lt |V|\\) \u662f\u8bcd\u6c47\u8868\u4e2d\u7684\u4e00\u4e2atoken\u7684\u7d22\u5f15( \\(| V |\\) \u662f\u8bcd\u6c47\u91cf)\u3002\u9996\u5148\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u67e5\u627e\u6bcf\u4e2a\u5355\u8bcd\u7684\u5d4c\u5165\uff0c\u5e76\u5c06\u5b83\u4eec\u8fde\u63a5\u6210\u4e00\u4e2a\u8f93\u5165\u5411\u91cf\uff1a \\[ \\mathbf{x}=\\left[\\mathbf{E}_{w_{1}}, \\dots, \\mathbf{E}_{w_{m}}\\right] \\in \\mathbb{R}^{d m} \\] \u5176\u4e2d \\(\\mathbf{E} \\in \\mathbb{R}^{|V| \\times d}\\) \u662f\u5d4c\u5165\u77e9\u9635\uff0c\u6bcf\u4e00\u884c \\(\\mathbf{E}_w\\) \u662f\u4e00\u4e2a\u7279\u5b9a\u7684\u5355\u8bcd \\(w\\) \u7684\u5411\u91cf\u3002\u63a5\u7740\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6211\u4eec\u7684\u9884\u6d4b\uff1a \\[ \\mathbf h = \\text{ReLU}(\\mathbf{xW+b_1}) \\\\ \\mathbf l = \\text{ReLU}(\\mathbf{hU+b_2}) \\\\ \\mathbf {\\hat y} = \\text{softmax}(l) \\] \u5176\u4e2d\uff0c \\(\\mathbf{h}\\) \u6307\u7684\u662f\u9690\u85cf\u5c42\uff0c \\(\\mathbf{l}\\) \u662f\u5176\u5206\u6570\uff0c \\(\\mathbf{\\hat y}\\) \u6307\u7684\u662f\u9884\u6d4b\u7ed3\u679c\uff0c \\(\\text{ReLU(z)}=max(z,0)\\) \u3002\u6211\u4eec\u4f7f\u7528\u6700\u5c0f\u5316\u4ea4\u53c9\u71b5\u635f\u5931\u6765\u8bad\u7ec3\u6a21\u578b \\[ J(\\theta) = CE(\\mathbf y,\\mathbf{\\hat y}) = -\\sum^3_{i=1}y_i\\log\\hat y_i \\] \u8bad\u7ec3\u96c6\u7684\u635f\u5931\u4e3a\u6240\u6709\u8bad\u7ec3\u6837\u672c\u7684 \\(J(\\theta)\\) \u7684\u5e73\u5747\u503c\u3002 Question 2.f \u6211\u4eec\u60f3\u770b\u770b\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\u7684\u4f8b\u5b50\uff0c\u5e76\u4e86\u89e3\u50cf\u6211\u4eec\u8fd9\u6837\u7684\u89e3\u6790\u5668\u5728\u4ec0\u4e48\u5730\u65b9\u53ef\u80fd\u662f\u9519\u8bef\u7684\u3002\u4f8b\u5982\uff0c\u5728\u8fd9\u4e2a\u53e5\u5b50\u4e2d: \u4f9d\u8d56 \\(\\text{into Afghanistan}\\) \u662f\u9519\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u77ed\u8bed\u5e94\u8be5\u4fee\u9970 \\(\\text{sent}\\) (\u4f8b\u5982 \\(\\text{sent into Afghanistan}\\) ) \u800c\u4e0d\u662f \\(\\text{troops}\\) (\u56e0\u4e3a \\(\\text{ troops into Afghanistan}\\) \u6ca1\u6709\u610f\u4e49)\u3002\u4e0b\u9762\u662f\u6b63\u786e\u7684\u89e3\u6790\uff1a \u4e00\u822c\u6765\u8bf4\uff0c\u4ee5\u4e0b\u662f\u56db\u79cd\u89e3\u6790\u9519\u8bef\uff1a Prepositional Phrase Attachment Error \u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u8bcd\u7ec4 \\(\\text{into Afghanistan}\\) \u662f\u4e00\u4e2a\u4ecb\u8bcd\u77ed\u8bed\u3002\u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\u662f\u6307\u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u5230\u9519\u8bef\u7684 head word \u4e0a(\u5728\u672c\u4f8b\u4e2d\uff0ctroops \u662f\u9519\u8bef\u7684 head word \uff0csent \u662f\u6b63\u786e\u7684 head word )\u3002\u4ecb\u8bcd\u77ed\u8bed\u7684\u66f4\u591a\u4f8b\u5b50\u5305\u62ecwith a rock, before midnight\u548cunder the carpet\u3002 Verb Phrase Attachment Error \u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{leave the store alone, I went out to watch the parade}\\) \u4e2d\uff0c\u77ed\u8bed \\(\\text{leave the store alone}\\) \u662f\u52a8\u8bcd\u77ed\u8bed\u3002\u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\u662f\u6307\u4e00\u4e2a\u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u5230\u9519\u8bef\u7684 head word \u4e0a(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662f \\(\\text{went}\\) )\u3002 Modi\ufb01er Attachment Error \u4fee\u9970\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{I am extremely short}\\) \u4e2d\uff0c\u526f\u8bcdextremely \u662f\u5f62\u5bb9\u8bcd short \u7684\u4fee\u9970\u8bed\u3002\u4fee\u9970\u8bed\u9644\u52a0\u9519\u8bef\u662f\u4fee\u9970\u8bed\u9644\u52a0\u5230\u9519\u8bef\u7684 head word \u4e0a\u65f6\u53d1\u751f\u7684\u9519\u8bef(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662f short)\u3002 Coordination Attachment Error \u534f\u8c03\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{Would you like brown rice or garlic naan?}\\) \u4e2d\uff0c brown rice \u548cgarlic naan\u90fd\u662f\u8fde\u8bcd\uff0cor\u662f\u5e76\u5217\u8fde\u8bcd\u3002\u7b2c\u4e8c\u4e2a\u8fde\u63a5\u8bcd(\u8fd9\u91cc\u662fgarlic naan)\u5e94\u8be5\u8fde\u63a5\u5230\u7b2c\u4e00\u4e2a\u8fde\u63a5\u8bcd(\u8fd9\u91cc\u662fbrown rice)\u3002\u534f\u8c03\u8fde\u63a5\u9519\u8bef\u662f\u5f53\u7b2c\u4e8c\u4e2a\u8fde\u63a5\u8bcd\u9644\u52a0\u5230\u9519\u8bef\u7684 head word \u4e0a\u65f6(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662frice)\u3002\u5176\u4ed6\u5e76\u5217\u8fde\u8bcd\u5305\u62ecand, but\u548cso\u3002 \u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\u6709\u56db\u4e2a\u53e5\u5b50\uff0c\u5176\u4e2d\u5305\u542b\u4ece\u89e3\u6790\u5668\u83b7\u5f97\u7684\u4f9d\u8d56\u9879\u89e3\u6790\u3002\u6bcf\u4e2a\u53e5\u5b50\u90fd\u6709\u4e00\u4e2a\u9519\u8bef\uff0c\u4e0a\u9762\u56db\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u4f8b\u5b50\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u53e5\u5b50\uff0c\u8bf7\u8bf4\u660e\u9519\u8bef\u7684\u7c7b\u578b\u3001\u4e0d\u6b63\u786e\u7684\u4f9d\u8d56\u9879\u548c\u6b63\u786e\u7684\u4f9d\u8d56\u9879\u3002\u4e3a\u4e86\u6f14\u793a:\u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u60a8\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a Error type: Prepositional Phrase Attachment Error Incorrect dependency: troops \\(\\to\\) Afghanistan Correct dependency: sent \\(\\to\\) Afghanistan \u6ce8\u610f\uff1a\u4f9d\u8d56\u9879\u6ce8\u91ca\u6709\u5f88\u591a\u7ec6\u8282\u548c\u7ea6\u5b9a\u3002\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u4ed6\u4eec\u7684\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5\u6d4f\u89c8UD\u7f51\u7ad9: http://universaldependencies.org \u3002\u7136\u800c\uff0c\u4f60\u4e0d\u9700\u8981\u77e5\u9053\u6240\u6709\u8fd9\u4e9b\u7ec6\u8282\u5c31\u80fd\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u3002\u5728\u6bcf\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u5728\u8be2\u95ee\u77ed\u8bed\u7684\u8fde\u63a5\uff0c\u5e94\u8be5\u8db3\u4ee5\u770b\u51fa\u5b83\u4eec\u662f\u5426\u4fee\u9970\u4e86\u6b63\u786e\u7684head\u3002\u7279\u522b\u662f\uff0c\u4f60\u4e0d\u9700\u8981\u67e5\u770b\u4f9d\u8d56\u9879\u8fb9\u7f18\u4e0a\u7684\u6807\u7b7e\u2014\u2014\u53ea\u9700\u67e5\u770b\u8fb9\u7f18\u672c\u8eab\u5c31\u8db3\u591f\u4e86\u3002 Answer 2.f Error type: Verb Phrase Attachment Error Incorrect dependency: wedding \\(\\to\\) fearing Correct dependency: heading \\(\\to\\) fearing Error type: Coordination Attachment Error Incorrect dependency: makes \\(\\to\\) rescue Correct dependency: rush \\(\\to\\) rescue Error type: Prepositional Phrase Attachment Error Incorrect dependency: named \\(\\to\\) Midland Correct dependency: guy \\(\\to\\) Midland Error type: Modi\ufb01er Attachment Error Incorrect dependency: elements \\(\\to\\) most Correct dependency: crucial \\(\\to\\) most Assignment 04 \u00b6 1. Neural Machine Translation with RNNs \u00b6 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u5c06\u4e00\u4e2a\u53e5\u5b50\u4ece\u6e90\u8bed\u8a00(\u5982\u897f\u73ed\u7259\u8bed)\u8f6c\u6362\u6210\u76ee\u6807\u8bed\u8a00(\u5982\u82f1\u8bed)\u3002\u5728\u672c\u4f5c\u4e1a\u4e2d\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u5b9e\u73b0\u4e00\u4e2a\u5e8f\u5217\u5230\u5e8f\u5217(Seq2Seq)\u7f51\u7edc\uff0c\u4ee5\u5efa\u7acb\u4e00\u4e2a\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1(NMT)\u7cfb\u7edf\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u4f7f\u7528\u53cc\u5411LSTM\u7f16\u7801\u5668\u548c\u5355\u5411LSTM\u89e3\u7801\u5668\u7684NMT\u7cfb\u7edf\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002 \u4e0a\u56fe\u662f\u4f7f\u7528\u4e58\u6cd5\u6ce8\u610f\u529b\u7684Seq2Seq\u6a21\u578b\uff0c\u663e\u793a\u4e86\u89e3\u7801\u5668\u7684\u7b2c\u4e09\u6b65\u3002\u6ce8\u610f\uff0c\u4e3a\u4e86\u53ef\u8bfb\u6027\uff0c\u6211\u4eec\u4e0d\u63cf\u7ed8\u524d\u4e00\u4e2a\u7ec4\u5408\u8f93\u51fa\u4e0e\u89e3\u7801\u5668\u8f93\u5165\u7684\u8fde\u63a5\u3002 \u7ed9\u5b9a\u6e90\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u4ece\u8bcd\u5d4c\u5165\u77e9\u9635\u4e2d\u67e5\u627e\u5355\u8bcd\u5d4c\u5165\uff0c\u5f97\u5230 \\(\\mathbf{x}_{1}, \\dots, \\mathbf{x}_{m} | \\mathbf{x}_{i} \\in \\mathbb{R}^{e \\times 1}\\) \uff0c\u5176\u4e2d \\(m\\) \u4e3a\u6e90\u8bed\u53e5\u7684\u957f\u5ea6\uff0c \\(e\\) \u4e3a\u5d4c\u5165\u5927\u5c0f\u3002\u6211\u4eec\u5c06\u8fd9\u4e9b\u5d4c\u5165\u63d0\u4f9b\u7ed9\u53cc\u5411\u7f16\u7801\u5668\uff0c\u4e3a\u6b63\u5411( \\(\\rightarrow\\) )\u548c\u53cd\u5411( \\(\\leftarrow\\) )LSTMs\u751f\u6210\u9690\u85cf\u72b6\u6001\u548c\u5355\u5143\u683c\u72b6\u6001\u3002\u524d\u5411\u548c\u540e\u5411\u7684\u7248\u672c\u8fde\u63a5\u8d77\u6765\uff0c\u4ee5\u5f97\u5230\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{i}^{\\mathrm{enc}}\\) \u548c\u5355\u5143\u683c\u72b6\u6001 \\(\\mathbf{c}_{i}^{\\mathrm{enc}}\\) \\[ \\begin{array} \\mathbf{h}_{i}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{h}_{i}^{\\mathrm{enc}} \\in \\mathbb{R}^{2h \\times 1} , \\overleftarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}} \\in \\mathbb{R}^{h \\times 1} & 1 \\leq i \\leq m \\\\ \\mathbf{c}_{i}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{c}_{i}^{\\mathrm{enc}} \\in \\mathbb{R}^{2h \\times 1} , \\overleftarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}} \\in \\mathbb{R}^{h \\times 1} & 1 \\leq i \\leq m \\end{array} \\] \u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u7f16\u7801\u5668\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u548c\u6700\u7ec8\u5355\u5143\u72b6\u6001\u7684\u7ebf\u6027\u6295\u5f71\uff0c\u521d\u59cb\u5316\u89e3\u7801\u5668\u7684\u7b2c\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{0}^{\\mathrm{dec}}\\) \u548c\u5355\u5143\u72b6\u6001 \\(\\mathbf{c}_{0}^{\\mathrm{dec}}\\) \\[ \\begin{array} \\mathbf{h}_{0}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{h}_{1}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{m}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{h}_{0}^{\\mathrm{enc}} \\in \\mathbb{R}^{h \\times 1} , \\mathbf{W}_{h} \\in \\mathbb{R}^{h \\times 2 h} \\\\ \\mathbf{c}_{0}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{c}_{1}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{m}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{c}_{0}^{\\mathrm{enc}} \\in \\mathbb{R}^{h \\times 1} , \\mathbf{W}_{c} \\in \\mathbb{R}^{h \\times 2 h} \\end{array} \\] \u521d\u59cb\u5316\u89e3\u7801\u5668\u4e4b\u540e\uff0c\u73b0\u5728\u5fc5\u987b\u7528\u76ee\u6807\u8bed\u8a00\u4e3a\u5b83\u63d0\u4f9b\u5339\u914d\u7684\u53e5\u5b50\u3002\u5728\u7b2c \\(t\\) \u6b65\uff0c\u6211\u4eec\u67e5\u627e\u7b2c \\(t\\) \u4e2a\u5355\u8bcd\u7684\u5d4c\u5165\uff0c \\(\\mathbf{y}_{t} \\in \\mathbb{R}^{e \\times 1}\\) \u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06 \\(y_t\\) \u4e0e\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684 combined-output \u7ec4\u5408\u8f93\u51fa\u5411\u91cf \\(\\mathbf{o}_{t-1} \\in \\mathbb{R}^{h \\times 1}\\) \u8fde\u63a5\u8d77\u6765(\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u9875\u89e3\u91ca\u8fd9\u662f\u4ec0\u4e48\uff01)\uff0c\u5f97\u5230 \\(\\overline{\\mathbf{y}_{t}} \\in \\mathbb{R}^{(e+h) \\times 1}\\) \u3002\u6ce8\u610f\uff0c\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u76ee\u6807\u5355\u8bcd(\u5373 start \u6807\u8bb0)\uff0c \\(o_0\\) \u662f\u4e00\u4e2a\u96f6\u5411\u91cf\u3002\u7136\u540e\u5c06 \\(\\overline{\\mathbf{y}_{t}}\\) \u4f5c\u4e3a\u8f93\u5165\u8f93\u5165\u5230\u89e3\u7801\u5668LSTM\u4e2d\u3002 \\[ \\mathbf{h}_{t}^{\\mathrm{dec}}, \\mathbf{c}_{t}^{\\mathrm{dec}}=\\text { Decoder }\\left(\\overline{\\mathbf{y}_{t}}, \\mathbf{h}_{t-1}^{\\mathrm{dec}}\\right) \\text { where } \\mathbf{h}_{t}^{\\mathrm{dec}} \\in \\mathbb{R}^{h \\times 1}, \\mathbf{c}_{t}^{\\mathrm{dec}} \\in \\mathbb{R}^{h \\times 1} \\] \u7136\u540e\u6211\u4eec\u7528 \\(\\mathbf{h}_{t}^{\\mathrm{dec}}\\) \u6765\u8ba1\u7b97\u5728 \\(\\mathbf{h}_{0}^{\\mathrm{enc}}, \\ldots, \\mathbf{h}_{m}^{\\mathrm{enc}}\\) \u4e0a\u7684\u4e58\u6cd5\u6ce8\u610f \\[ \\mathbf{e}_{t, i}=\\left(\\mathbf{h}_{t}^{\\mathrm{dec}}\\right)^{T} \\mathbf{W}_{\\mathrm{attProj}} \\mathbf{h}_{i}^{\\mathrm{enc}} \\text { where } \\mathbf{e}_{t} \\in \\mathbb{R}^{m \\times 1}, \\mathbf{W}_{\\mathrm{attProj}} \\in \\mathbb{R}^{h \\times 2 h} \\quad \\quad 1 \\leq i \\leq m \\\\ \\alpha_{t}=\\operatorname{Softmax}\\left(\\mathbf{e}_{t}\\right) \\text { where } \\alpha_{t} \\in \\mathbb{R}^{m \\times 1} \\\\ \\mathbf{a}_{t}=\\sum_{i}^{m} \\alpha_{t, i} \\mathbf{h}_{i}^{\\mathrm{enc}} \\text { where } \\mathbf{a}_{t} \\in \\mathbb{R}^{2 h \\times 1} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u529b\u8f93\u51fa \\(\\alpha_t\\) \u4e0e\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{t}^{\\mathrm{dec}}\\) \u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u5c06\u5176\u901a\u8fc7\u7ebf\u6027\u5c42 Tanh \u548c Dropout \u6765\u83b7\u5f97\u7ec4\u5408\u8f93\u51fa\u5411\u91cf \\(o_t\\) \u3002 \\[ \\begin{aligned} \\mathbf{u}_{t} &=\\left[\\mathbf{a}_{t}; \\mathbf{h}_{t}^{\\mathrm{dec}}\\right] \\text { where } \\mathbf{u}_{t} \\in \\mathbb{R}^{3 h \\times 1} \\\\ \\mathbf{v}_{t} &=\\mathbf{W}_{u} \\mathbf{u}_{t} \\text { where } \\mathbf{v}_{t} \\in \\mathbb{R}^{h \\times 1}, \\mathbf{W}_{u} \\in \\mathbb{R}^{h \\times 3 h} \\\\ \\mathbf{o}_{t} &=\\operatorname{Dropout}\\left(\\operatorname{Tanh}\\left(\\mathbf{v}_{t}\\right)\\right) \\text { where } \\mathbf{o}_{t} \\in \\mathbb{R}^{h \\times 1} \\end{aligned} \\] \u7136\u540e\uff0c\u5728\u7b2c \\(t\\) \u4e2a\u65f6\u95f4\u6b65\u957f\u65f6\uff0c\u5f97\u5230\u76ee\u6807\u8bcd\u7684\u6982\u7387\u5206\u5e03 \\(\\mathbf{P}_{t}\\) \\[ \\mathbf{P}_{t}=\\operatorname{Softmax}\\left(\\mathbf{W}_{\\mathrm{vocab}} \\mathbf{o}_{t}\\right) \\text { where } \\mathbf{P}_{t} \\in \\mathbb{R}^{V_{t} \\times 1}, \\mathbf{W}_{\\mathrm{vocab}} \\in \\mathbb{R}^{V_{t} \\times h} \\] \u8fd9\u91cc\uff0c \\(V_t\\) \u662f\u76ee\u6807\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u6700\u540e\uff0c\u4e3a\u4e86\u8bad\u7ec3\u7f51\u7edc\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86 \\(\\mathbf{P}_{t} ,\\mathbf{g}_{t}\\) \u4e4b\u95f4\u7684 softmax \u4ea4\u53c9\u71b5\u635f\u5931\uff0c \\(\\mathbf{g}_{t}\\) \u662f\u65f6\u95f4\u6b65 \\(t\\) \u7684\u76ee\u6807\u8bcd\u7684 one-hot \u5411\u91cf \\[ J_{t}(\\theta)=C E\\left(\\mathbf{P}_{t}, \\mathbf{g}_{t}\\right) \\] \u5728\u8fd9\u91cc\uff0c \\(\\theta\\) \u4ee3\u8868\u6240\u6709\u7684\u6a21\u578b\u53c2\u6570\uff0c \\(J_t(\\theta)\\) \u662f\u89e3\u7801\u5668\u7b2c \\(t\\) \u6b65\u7684\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u63cf\u8ff0\u4e86\u8be5\u6a21\u578b\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u5c06\u5176\u5b9e\u73b0\u4e3a\u897f\u73ed\u7259\u8bed\u5230\u82f1\u8bed\u7684\u7ffb\u8bd1\uff01 Pytorch Bidirectional RNNs Note Pytorch \u4e2d\u7684 RNNs\uff0c\u8fd4\u56de\u7684 out \u7684 shape \u4e3a \\(\\text{(seq_len, batch, num_directions * hidden_size)}\\) \u8f6c\u6362\u4e3a \\(\\text{(seq_len, batch, num_directions, hidden_size)}\\) \u540e\uff0cnum_directions \u4e2d\u7684\u987a\u5e8f\u662f\u5148 forward \u518d backward\uff0c\u5e76\u4e14 forward \u548c backward \u7684 hidden state \u7684\u987a\u5e8f\u662f\u76f8\u53cd\u7684\uff0c\u5373 \\(out[0][0][0]\\) \u662f forward \u7684\u7b2c\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\uff0c\u800c \\(out[0][0][1]\\) \u662f backward \u7684\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\u3002\u6b64\u5916\uff0c out \u53ea\u5305\u542b\u6700\u540e\u4e00\u5c42\u7684\u7ed3\u679c \u4f46\u5bf9\u4e8e h_n ( c_n \u540c\u7406) \u800c\u8a00\uff0cshape \u4e3a \\(\\text{(num_layers * num_directions, batch, hidden_size)}\\) \uff0c\u4fdd\u5b58\u7684\u662f forward \u548c backward \u7684\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\u3002 \u8f6c\u6362\u4e3a \\(\\text{(num_layers, num_directions, batch, hidden_size)}\\) \u540e\uff0c\u7b2c\u4e00\u7ef4\u7684 num_layers \u548c \u771f\u5b9e\u7684 layer \u5c42\u6570\u4e00\u4e00\u5bf9\u5e94\uff0c\u5373 \\(h_n[1][0][0]\\) \u4e0e \\(out[-1][0][0]\\) \u76f8\u7b49\uff0c \\(h_n[1][1][0]\\) \u4e0e \\(out[0][0][1]\\) \u3002 Question 1.g \u9996\u5148\u89e3\u91ca(\u5927\u7ea6\u4e09\u53e5\u8bdd) masks \u5bf9\u6574\u4e2a\u6ce8\u610f\u529b\u8ba1\u7b97\u6709\u4ec0\u4e48\u5f71\u54cd\u3002\u7136\u540e(\u7528\u4e00\u4e24\u53e5\u8bdd)\u89e3\u91ca\u4e3a\u4ec0\u4e48\u6709\u5fc5\u8981\u8fd9\u6837\u4f7f\u7528 masks \u3002 Answer 1.g \u4f7f\u7528 masks \u5c06\u53e5\u5b50\u4e2d\u7684 pad token \u7684\u5206\u6570\u8d4b\u503c\u4e3a \\(-inf\\) \uff0c\u4ece\u800c\u4f7f\u5f97 softmax \u4f5c\u7528\u540e\u83b7\u5f97\u7684 attention \u5206\u5e03\u4e2d\uff0cpad token \u7684 attention \u6982\u7387\u503c\u8fd1\u4f3c\u4e3a 0 attention score / distributions \u8ba1\u7b97\u7684\u662f decoder \u4e2d\u67d0\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684 target word \u5bf9 encoder \u4e2d\u7684\u6240\u6709 source word \u7684\u6ce8\u610f\u529b\u6982\u7387\uff0c\u800c pad token \u53ea\u662f\u7528\u4e8e mini-batch \uff0c\u5e76\u6ca1\u6709\u4efb\u4f55\u8bed\u8a00\u610f\u4e49\uff0ctarget word \u65e0\u987b\u4e3a\u5176\u5206\u6563\u6ce8\u610f\u529b\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528 masks \u8fc7\u6ee4\u6389 pad token Question 1.j \u5728\u8bfe\u5802\u4e0a\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u70b9\u79ef\u6ce8\u610f\u3001\u4e58\u6cd5\u6ce8\u610f\u548c\u52a0\u6cd5\u6ce8\u610f\u3002\u8bf7\u5c31\u5176\u4ed6\u4e24\u79cd\u6ce8\u610f\u673a\u5236\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u63d0\u4f9b\u6bcf\u79cd\u6ce8\u610f\u673a\u5236\u53ef\u80fd\u7684\u4f18\u70b9\u548c\u7f3a\u70b9 \u70b9\u79ef\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{s}_{t}^{T} \\mathbf{h}_{i}\\) \u4e58\u6cd5\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{s}_{t}^{T} \\mathbf{W h}_{i}\\) \u52a0\u6cd5\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{v}^{T}(\\mathbf{W}_{1} \\mathbf{h}_{i}+\\mathbf{W}_{2} \\mathrm{s}_{t} )\\) Answer 1.j \u4f18\u70b9 \u7f3a\u70b9 \u70b9\u79ef\u6ce8\u610f\u529b \u4e0d\u9700\u8981\u989d\u5916\u7684\u7ebf\u6027\u6620\u5c04\u5c42 \\(s_t, h_t\\) \u5fc5\u987b\u6709\u540c\u6837\u7684\u7eac\u5ea6 \u4e58\u6cd5\u6ce8\u610f\u529b \\(s_t, h_t\\) \u4e0d\u9700\u8981\u6709\u540c\u6837\u7684\u7eac\u5ea6\u5e76\u4e14\u56e0\u4e3a\u53ef\u4ee5\u4f7f\u7528\u9ad8\u6548\u7387\u7684\u77e9\u9635\u4e58\u6cd5\uff0c\u6bd4\u52a0\u6cd5\u6ce8\u610f\u529b\u8981\u66f4\u5feb\u66f4\u7701\u5185\u5b58 \u589e\u52a0\u4e86\u8bad\u7ec3\u53c2\u6570 \u52a0\u6cd5\u6ce8\u610f\u529b \u9ad8\u7ef4\u65f6\u7684\u8868\u73b0\u66f4\u597d \u8bad\u7ec3\u53c2\u6570\u66f4\u591a\uff08\u4e24\u4e2a\u53c2\u6570\u77e9\u9635\u4ee5\u53ca\u6ce8\u610f\u529b\u7684\u7eac\u5ea6\uff09 2. Analyzing NMT Systems \u00b6 Question 2.a \u8fd9\u91cc\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u5728NMT\u6a21\u578b\u7684\u8f93\u51fa\u4e2d\u53d1\u73b0\u7684\u4e00\u7cfb\u5217\u9519\u8bef(\u4e0e\u60a8\u521a\u521a\u8bad\u7ec3\u7684\u6a21\u578b\u76f8\u540c)\u3002\u5bf9\u4e8e\u897f\u73ed\u7259\u8bed\u6e90\u53e5\u7684\u6bcf\u4e2a\u793a\u4f8b\uff0c\u6807\u51c6\u82f1\u6587\u7ffb\u8bd1\uff0c\u4ee5\u53caNMT(\u5373\uff0c\u201c\u6a21\u578b\u201d)\uff0c\u8bf7\u4f60\uff1a \u8bc6\u522bNMT\u7ffb\u8bd1\u4e2d\u7684\u9519\u8bef \u63d0\u4f9b\u6a21\u578b\u53ef\u80fd\u51fa\u9519\u7684\u539f\u56e0(\u7531\u4e8e\u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\u6216\u7279\u5b9a\u7684\u6a21\u578b\u9650\u5236) \u63cf\u8ff0\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u53d8NMT\u7cfb\u7edf\uff0c\u4ee5\u4fee\u590d\u89c2\u5bdf\u5230\u7684\u9519\u8bef \u4e0b\u9762\u662f\u60a8\u5e94\u8be5\u6309\u7167\u4e0a\u9762\u63cf\u8ff0\u7684\u90a3\u6837\u5206\u6790\u7684\u7ffb\u8bd1\u3002\u8bf7\u6ce8\u610f\uff0c\u6807\u8bb0\u4e86\u4e0b\u5212\u7ebf\u7684\u5355\u8bcd\u662f\u8bcd\u6c47\u8868\u5916\u7684\u5355\u8bcd Answer 2.a Error: \u201c favorite of my favorites\u201d Reason: \u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\uff0c\u4f4e\u8d44\u6e90\u8bed\u8a00\u5bf9 Possible fix: \u5c1d\u8bd5\u5728\u8fd9\u7c7b\u8bed\u8a00\u5bf9\u4e0a\u6dfb\u52a0\u66f4\u591a\u7684\u8bad\u7ec3\u6570\u636e Error: \u201c more reading in the U.S.\u201c \u8bed\u4e49\u9519\u8bef Reason: \u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\uff0c\u6a21\u578b\u5bf9\u8bed\u4e49\u7684\u7406\u89e3\u4e0d\u8db3\uff0c\u9700\u8981\u589e\u5927\u6a21\u578b\u7684\u5bb9\u91cf\u4ee5\u589e\u5f3a\u7406\u89e3\u80fd\u529b Possible fix: \u589e\u5927Hidden_size Error: \u201dRichard \\<unk>\u201c Reason: \u6a21\u578b\u9650\u5236\uff0cBolingbroke \u662f\u8bcd\u8868\u5916\u7684\u5355\u8bcd Possible fix: \u5bf9\u6b64\u7c7b\u59d3\u540d\u4e2d\u51fa\u73b0\u7684\u8bcd\u52a0\u4ee5\u5904\u7406\uff0c\u6bd4\u5982\u76f4\u63a5\u6dfb\u52a0\u5230\u8bcd\u8868\u4e2d Error: \u201dgo back to the apple \u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u201dmanzana\u201c \u6709\u4e30\u5bcc\u7684\u542b\u4e49\uff0c\u5305\u62ec apple \u82f9\u679c\u548c block \u8857\u533a\u3002\u201cblock\u201d\u5728\u897f\u73ed\u7259\u8bed\u4e2d\u7684\u8868\u8fbe\u65b9\u5f0f\u6bd4 \u201capple\u201d \u5728\u897f\u73ed\u7259\u8bed\u4e2d\u7684\u8868\u8fbe\u65b9\u5f0f\u66f4\u591a\u3002\u7136\u800c\uff0c\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0c\u201cmanzana\u201d\u66f4\u591a\u5730\u8868\u793a\u201capple\u201d\uff0c\u800c\u4e0d\u662f\u201cblock\u201d\u3002 Possible fix: \u5728\u8bad\u7ec3\u96c6\u4e2d\u6dfb\u52a0\u66f4\u591a\u7684\u5173\u4e8e \u201dmanzana\u201c \u8868\u793a \u201cblock\u201d \u7684\u6570\u636e\uff0c\u4fdd\u6301\u591a\u91cd\u542b\u4e49\u7684\u8bad\u7ec3\u4e0d\u5931\u8861 Error: \u201cgo to the bathroom in the women\u2019s room\u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u7531\u4e8e\u5728\u6570\u636e\u96c6\u4e2d\uff0c\u5973\u6027\u6bd4\u4e13\u4e1a\u4eba\u5458(\u6559\u5e08)\u7684\u51fa\u73b0\u9891\u7387\u8981\u66f4\u9ad8\uff0c\u6240\u4ee5\u5bfc\u81f4\u7ffb\u8bd1\u5177\u6709\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u7684\u504f\u89c1 bias Possible fix: \u6dfb\u52a0\u66f4\u591a profesore \u7684\u8bad\u7ec3\u6837\u672c Error: \u201d100,000 acres.\u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u5e38\u8bc6\u9519\u8bef\uff0chect\u00e1reas \u8868\u793a\u516c\u9877\uff0cacres \u8868\u793a\u82f1\u4ea9\uff08acre\u7684\u590d\u6570\uff09\u3002\u6a21\u578b\u5e76\u672a\u7406\u89e3\u4e24\u4e2a\u5355\u4f4d\u5236\u4e4b\u95f4\u7684\u8f6c\u6362\u5173\u7cfb\uff0c\u7531\u4e8e acres \u5728\u8bad\u7ec3\u96c6\u4e2d\u7684\u51fa\u73b0\u9891\u7387\u66f4\u9ad8\uff0c\u76f4\u63a5\u91c7\u7528 acres \u5e76\u4e14\u4f7f\u7528 hect\u00e1reas \u9644\u8fd1\u7684\u6570\u5b57\u76f4\u63a5\u4fee\u9970 acres Possible fix: \u6dfb\u52a0\u5173\u4e8e hect\u00e1reas \u7684\u8bad\u7ec3\u6570\u636e Question 2.b \u73b0\u5728\u662f\u65f6\u5019\u63a2\u7d22\u60a8\u6240\u8bad\u7ec3\u7684\u6a21\u578b\u7684\u8f93\u51fa\u4e86\uff01\u95ee\u9898 1-i \u4e2d\u751f\u6210\u7684\u6a21\u578b\u7684\u6d4b\u8bd5\u96c6\u7ffb\u8bd1\u5e94\u8be5\u4f4d\u4e8eoutput /test_output.txt\u4e2d\u3002\u8bf7\u627e\u51fa\u4f60\u7684\u6a21\u578b\u4ea7\u751f\u7684\u4e24\u4e2a\u9519\u8bef\u793a\u4f8b\u3002\u4f60\u53d1\u73b0\u7684\u4e24\u4e2a\u4f8b\u5b50\u5e94\u8be5\u662f\u4e0d\u540c\u7684\u9519\u8bef\u7c7b\u578b\uff0c\u5e76\u4e14\u4e0e\u524d\u4e00\u4e2a\u95ee\u9898\u4e2d\u63d0\u4f9b\u7684\u4f8b\u5b50\u4e0d\u540c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u4f8b\u5b50\uff0c\u4f60\u5e94\u8be5\uff1a \u5199\u4e0b\u897f\u73ed\u7259\u8bed\u539f\u6587\u53e5\u5b50\u3002\u6e90\u8bed\u53e5\u5728 en_es_data/test.es \u4e2d \u5199\u4e0b\u53c2\u8003\u8bd1\u6587\uff0c\u53c2\u8003\u8bd1\u6587\u5728en_es_data/test.en\u4e2d \u5199\u4e0bNMT\u6a21\u578b\u7684\u82f1\u6587\u7ffb\u8bd1\uff0c\u6a21\u578b\u7ffb\u8bd1\u7684\u53e5\u5b50\u4f4d\u4e8eoutput /test_output .txt\u4e2d \u8bc6\u522bNMT\u7ffb\u8bd1\u4e2d\u7684\u9519\u8bef \u63d0\u4f9b\u6a21\u578b\u53ef\u80fd\u51fa\u9519\u7684\u539f\u56e0(\u7531\u4e8e\u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\u6216\u7279\u5b9a\u7684\u6a21\u578b\u9650\u5236) \u63cf\u8ff0\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u53d8NMT\u7cfb\u7edf\uff0c\u4ee5\u4fee\u590d\u89c2\u5bdf\u5230\u7684\u9519\u8bef Answer 2.b Source Sentence: El 5 de noviembre de 1990 Reference Translation: On November 5 th , 1990 NMT Translation: On five of November 1990 Error: five Reason: \u6a21\u578b\u9650\u5236\uff0c\u6a21\u578b\u6ca1\u6709\u6570\u636e\u96c6\u4e2d\u5145\u5206\u5b66\u4e60\u5230\u65e5\u671f\u683c\u5f0f\u7684\u8f6c\u6362 Possible Fix: \u589e\u52a0\u66f4\u591a\u5173\u4e8e\u897f\u73ed\u7259\u8bed\u4e0e\u82f1\u8bed\u4e4b\u95f4\u7684\u65e5\u671f\u683c\u5f0f\u8f6c\u6362\u7684\u6570\u636e\u6837\u672c Source Sentence: Y mis amigos hondureos me pidieron que dijera: \"Gracias TED\". Reference Translation: And my friends from Honduras asked me to say thank you, TED. NMT Translation: My friends were asked to say, \"Thank you.\" Error : \u8bf4\u8bdd\u7684\u5bf9\u8c61\u9519\u8bef\uff0c\u8bf4\u8bdd\u7684\u4eba\u662f\u6211\u800c\u4e0d\u662f\u6211\u7684\u670b\u53cb Reason: \u53e5\u6cd5\u7ed3\u6784\u6709\u8bef\u5e76\u4e14\u6709\u7f3a\u8bd1\u73b0\u8c61 Possible Fix: \u5c1d\u8bd5\u4e3a\u6a21\u578b\u7684\u6dfb\u52a0\u66f4\u6709\u6548\u7684\u5bf9\u9f50\u65b9\u5f0f\uff0c\u5982\u4f18\u5316\u6ce8\u610f\u529b\u6a21\u578b Question 2.c BLEU\u8bc4\u5206\u662fNMT\u7cfb\u7edf\u4e2d\u6700\u5e38\u7528\u7684\u81ea\u52a8\u8bc4\u4ef7\u6307\u6807\u3002\u5b83\u901a\u5e38\u5728\u6574\u4e2a\u6d4b\u8bd5\u96c6\u4e2d\u8ba1\u7b97\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u5c06\u8003\u8651\u4e3a\u5355\u4e2a\u793a\u4f8b\u5b9a\u4e49\u7684BLEU\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u6e90\u53e5 \\(s\\) \uff0c\u4e00\u7ec4 \\(k\\) \u4e2a\u53c2\u8003\u8bd1\u6587 \\(\\mathbf{r}_{1}, \\dots, \\mathbf{r}_{k}\\) \u548c\u4e00\u4e2a\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u3002 \u4e3a\u4e86\u8ba1\u7b97 \\(\\boldsymbol{c}\\) \u7684BLEU\u5206\u6570\uff0c\u6211\u4eec\u9996\u5148\u4e3a \\(\\boldsymbol{c}\\) \u8ba1\u7b97\u4fee\u6539\u540e\u7684 n-gram \u7cbe\u5ea6 \\(p_{n}\\) \uff0c\u5bf9\u4e8e \\(n = 1,2,3,4\\) : \\[ p_{n}=\\frac{\\sum_{\\text{ngram} \\in c} \\min \\left(\\max _{i=1, \\ldots, k} \\operatorname{Count}_{r_{i}}(\\text { ngram }), \\text {Count}_c \\text{(ngram)}\\right)}{\\sum_{\\text{ngram} \\in c} \\text {Count}_c \\text{(ngram)}} \\] \u8fd9\u91cc\uff0c\u5bf9\u4e8e\u51fa\u73b0\u5728\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u4e2d\u7684\u6bcf\u4e2a n-gram \uff0c\u6211\u4eec\u8ba1\u7b97\u5b83\u5728\u4efb\u4f55\u4e00\u4e2a\u53c2\u8003\u8bd1\u6587\u4e2d\u51fa\u73b0\u7684\u6700\u5927\u6b21\u6570\uff0c\u5e76\u4ee5\u5b83\u51fa\u73b0\u5728 \\(\\boldsymbol{c}\\) \u4e2d\u7684\u6b21\u6570\u4e3a\u4e0a\u9650(\u8fd9\u662f\u5206\u5b50)\uff0c\u518d\u9664\u4ee5 \\(\\boldsymbol{c}\\) \u7684 n-gram (\u5206\u6bcd) \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8ba1\u7b97\u7b80\u6d01\u4ee3\u4ef7 \\(\\text{brevity penalty BP}\\) \u3002\u4ee4 \\(c\\) \u4f5c\u4e3a \\(\\boldsymbol{c}\\) \u7684\u957f\u5ea6\uff0c\u8ba9 \\(r^*\\) \u4f5c\u4e3a\u6700\u63a5\u8fd1 \\(\\boldsymbol{c}\\) \u7684\u53c2\u8003\u7ffb\u8bd1\u7684\u957f\u5ea6(\u5728\u4e24\u4e2a\u76f8\u7b49\u63a5\u8fd1\u7684\u53c2\u8003\u7ffb\u8bd1\u957f\u5ea6\u7684\u60c5\u51b5\u4e0b\uff0c\u9009\u62e9\u8f83\u77ed\u7684\u53c2\u8003\u7ffb\u8bd1\u7684\u957f\u5ea6\u4f5c\u4e3a \\(r^*\\) ) \\[ B P=\\left\\{\\begin{array}{ll}{1} & {\\text { if } c \\geq r^{*}} \\\\ {\\exp \\left(1-\\frac{r^{*}}{c}\\right)} & {\\text { otherwise }}\\end{array}\\right. \\] \u6700\u540e\uff0c\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u5173\u4e8e \\(\\mathbf{r}_{1}, \\dots, \\mathbf{r}_{k}\\) \u7684BLEU\u5206\u6570\u4e3a\uff1a \\[ B L E U=B P \\times \\exp \\left(\\sum_{n=1}^{4} \\lambda_{n} \\log p_{n}\\right) \\] \u5176\u4e2d\uff0c \\(\\lambda_{1}, \\lambda_{2}, \\lambda_{3}, \\lambda_{4}\\) \u662f\u603b\u548c\u4e3a1\u7684\u6743\u91cd Question 2.c.i \u8bf7\u8003\u8651\u8fd9\u4e2a\u4f8b\u5b50\uff1a \u5206\u522b\u8ba1\u7b97 \\(c_1, c_2\\) \u7684BLEU\u5206\u6570\u3002\u4ee4 \\(\\lambda_{i}=0.5 \\text { for } i \\in\\{1,2\\}, \\lambda_{i}=0 \\text { for } i \\in\\{3,4\\}\\) \u3002\u5f53\u8ba1\u7b97BLEU\u5206\u6570\u65f6\uff0c\u663e\u793a\u4f60\u7684\u8ba1\u7b97\u8fc7\u7a0b(\u5c55\u793a \\(p_1, p_2, c, r^{*}, BP\\) \u7684\u8ba1\u7b97\u503c)\u3002 \u6839\u636eBLEU\u8bc4\u5206\uff0c\u8fd9\u4e24\u79cdNMT\u7ffb\u8bd1\u4e2d\u54ea\u4e00\u79cd\u88ab\u8ba4\u4e3a\u662f\u66f4\u597d\u7684\u7ffb\u8bd1?\u4f60\u540c\u610f\u8fd9\u662f\u66f4\u597d\u7684\u7ffb\u8bd1\u5417\uff1f Answer 2.c.i \\(c_1\\) \\[ \\begin{array}{l} {p_1} &= \\frac{0+1+1+1+0}{5} = 0.6 \\\\ {p_2} &= \\frac{0+1+1+0}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 4 \\\\ BP &= 1 \\\\ BLEU_{{c_1}} &= 1 * \\exp(0.5 * \\log(0.6) + 0.5 * \\log(0.5)) = 0.5477 \\end{array} \\] \\(c_2\\) \\[ \\begin{array}{l} {p_1} &= \\frac{1+1+0+1+1}{5} = 0.8 \\\\ {p_2} &= \\frac{1+0+0+1}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 4 \\\\ BP &= 1 \\\\ BLEU_{{c_1}} &= 1 * \\exp(0.5 * \\log(0.8) + 0.5 * \\log(0.5)) = 0.632 \\end{array} \\] \u6839\u636e BLEU \u5206\u6570\uff0c \\(c_2\\) \u662f\u5f97\u5206\u66f4\u9ad8\u7684\u7ffb\u8bd1\uff0c\u4f46\u6211\u8ba4\u4e3a \\(c_1\\) \u7684\u7ffb\u8bd1\u66f4\u52a0\u597d Question 2.c.ii \u6211\u4eec\u7684\u786c\u76d8\u574f\u4e86\uff0c\u6211\u4eec\u5931\u53bb\u4e86\u53c2\u8003\u7ffb\u8bd1 \\(r_2\\) \u3002\u8bf7\u91cd\u65b0\u8ba1\u7b97 \\(c_1\\) \u548c \\(c_2\\) \u7684BLEU\u5206\u6570\uff0c\u8fd9\u6b21\u53ea\u9488\u5bf9 \\(r_1\\) \u3002\u4e24\u4e2aNMT\u5206\u4e00\u4e2d\uff0c\u54ea\u4e00\u4e2a\u73b0\u5728\u83b7\u5f97\u4e86\u66f4\u9ad8\u7684BLEU\u5206\u6570\uff1f\u4f60\u540c\u610f\u8fd9\u662f\u66f4\u597d\u7684\u7ffb\u8bd1\u5417\uff1f Answer 2.c.ii \\(c_1\\) \\[ \\begin{array}{l} {p_1} &= \\frac{0+1+1+1+0}{5} = 0.6 \\\\ {p_2} &= \\frac{0+1+1+0}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 6 \\\\ BP &= \\exp(1 - \\frac{6}{5}) = 0.8187 \\\\ BLEU_{{c_1}} &= 0.8187 * \\exp(0.5 * \\log(0.6) + 0.5 * \\log(0.5)) = 0.4484 \\end{array} \\] \\(c_2\\) \\[ \\begin{array}{l} {p_1} &= \\frac{1+1+0+0+0}{5} = 0.4 \\\\ {p_2} &= \\frac{1+0+0+0}{4} = 0.25 \\\\ c &= 5 \\\\ r^* &= 6 \\\\ BP &= \\exp(1 - \\frac{6}{5}) = 0.8187 \\\\ BLEU_{{c_1}} &= 0.8187 * \\exp(0.5 * \\log(0.4) + 0.5 * \\log(0.25)) = 0.2589 \\end{array} \\] \u6839\u636e BLEU \u5206\u6570\uff0c \\(c_1\\) \u662f\u5f97\u5206\u66f4\u9ad8\u7684\u7ffb\u8bd1\uff0c\u5e76\u4e14\u6211\u8ba4\u4e3a\u8fd9\u662f\u5bf9\u7684 Question 2.c.iii \u7531\u4e8e\u6570\u636e\u53ef\u7528\u6027\uff0cNMT\u7cfb\u7edf\u901a\u5e38\u53ea\u6839\u636e\u4e00\u4e2a\u53c2\u8003\u7ffb\u8bd1\u8fdb\u884c\u8bc4\u4f30\u3002\u8bf7\u89e3\u91ca(\u7528\u51e0\u53e5\u8bdd)\u4e3a\u4ec0\u4e48\u8fd9\u53ef\u80fd\u6709\u95ee\u9898\uff1f Answer 2.c.iii \u5982\u679c\u6211\u4eec\u4f7f\u7528\u5355\u4e00\u53c2\u8003\u7ffb\u8bd1\uff0c\u5b83\u589e\u52a0\u4e86\u597d\u7ffb\u8bd1\u7531\u4e8e\u4e0e\u5355\u4e00\u53c2\u8003\u7ffb\u8bd1\u6709\u8f83\u4f4e\u7684 n-gram overlap \uff0c\u800c\u83b7\u5f97\u8f83\u5dee\u7684BUEU\u5206\u6570\u7684\u53ef\u80fd\u6027\u3002\u4f8b\u5982\u4e0a\u4f8b\u4e2d\uff0c\u5982\u679c\u5220\u53bb\u7684\u53c2\u8003\u7ffb\u8bd1\u662f \\(r_1\\) \uff0c\u90a3\u4e48\u5c06\u4f7f\u5f97 \\(c_1\\) \u7684BLEU\u5206\u6570\u53d8\u4f4e\u3002 \u5982\u679c\u6211\u4eec\u589e\u52a0\u66f4\u591a\u7684\u53c2\u8003\u7ffb\u8bd1\uff0c\u5c31\u4f1a\u589e\u52a0\u4e00\u4e2a\u597d\u7ffb\u8bd1\u4e2d n-gram overlap \u7684\u51e0\u7387\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u4f7f\u597d\u7ffb\u8bd1\u83b7\u5f97\u76f8\u5bf9\u8f83\u9ad8\u7684BLEU\u5206\u6570\u3002 Question 2.c.iv \u5217\u4e3e\u4e86BLEU\u4f5c\u4e3a\u673a\u5668\u7ffb\u8bd1\u7684\u8bc4\u4ef7\u6307\u6807\uff0c\u76f8\u5bf9\u4e8e\u4eba\u5de5\u8bc4\u4ef7\u7684\u4e24\u4e2a\u4f18\u70b9\u548c\u4e24\u4e2a\u7f3a\u70b9\u3002 Answer 2.c.iv \u4f18\u70b9 \u81ea\u52a8\u8bc4\u4ef7\uff0c\u6bd4\u4eba\u5de5\u8bc4\u4ef7\u66f4\u5feb\uff0c\u65b9\u4fbf\uff0c\u5feb\u901f BLEU\u7684\u4f7f\u7528\u666e\u53ca\u7387\u8f83\u9ad8\uff0c\u65b9\u4fbf\u6a21\u578b\u4e4b\u95f4\u7684\u6548\u679c\u5bf9\u6bd4 \u7f3a\u70b9 \u7ed3\u679c\u5e76\u4e0d\u7a33\u5b9a\uff0c\u7531\u4e8e\u6838\u5fc3\u601d\u60f3\u662f n-gram overlap\uff0c\u6240\u4ee5\u5982\u679c\u53c2\u8003\u7ffb\u8bd1\u4e0d\u591f\u4e30\u5bcc\uff0c\u4f1a\u5bfc\u81f4\u51fa\u73b0\u8f83\u597d\u7ffb\u8bd1\u83b7\u5f97\u8f83\u5deeBLEU\u5206\u6570\u7684\u60c5\u51b5 \u4e0d\u8003\u8651\u8bed\u4e49\u4e0e\u53e5\u6cd5 \u4e0d\u8003\u8651\u8bcd\u6cd5\uff0c\u4f8b\u5982\u4e0a\u4f8b\u4e2d\u7684make\u548cmakes \u672a\u5bf9\u540c\u4e49\u8bcd\u6216\u76f8\u4f3c\u8868\u8fbe\u8fdb\u884c\u4f18\u5316 Reference \u00b6 \u4eceSVD\u5230PCA\u2014\u2014\u5947\u5999\u7684\u6570\u5b66\u6e38\u620f alongstar518 NLP \u4e2d\u8bc4\u4ef7\u6587\u672c\u8f93\u51fa\u90fd\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\u4e3a\u4ec0\u4e48\u8981\u5c0f\u5fc3\u4f7f\u7528 BLEU\uff1f","title":"CS224n-2019 Assignment"},{"location":"CS224n-2019-Assignment/#cs224n-2019-assignment","text":"\u672c\u6587\u6863\u5c06\u8bb0\u5f55\u4f5c\u4e1a\u4e2d\u7684\u8981\u70b9\u4ee5\u53ca\u95ee\u9898\u7684\u7b54\u6848 \u8bfe\u7a0b\u7b14\u8bb0\u53c2\u89c1\u6211\u7684 \u535a\u5ba2 \uff0c\u5e76\u5728\u535a\u5ba2\u7684 Repo \u4e2d\u63d0\u4f9b\u7b14\u8bb0\u6e90\u6587\u4ef6\u7684\u4e0b\u8f7d","title":"CS224n-2019 Assignment"},{"location":"CS224n-2019-Assignment/#assignment-01","text":"\u9010\u6b65\u5b8c\u6210\u5171\u73b0\u77e9\u9635\u7684\u642d\u5efa\uff0c\u5e76\u8c03\u7528 sklearn.decomposition \u4e2d\u7684 TruncatedSVD \u5b8c\u6210\u4f20\u7edf\u7684\u57fa\u4e8eSVD\u7684\u964d\u7ef4\u7b97\u6cd5 \u53ef\u89c6\u5316\u5c55\u793a\uff0c\u89c2\u5bdf\u5e76\u5206\u6790\u5176\u5728\u4e8c\u7ef4\u7a7a\u95f4\u4e0b\u7684\u805a\u96c6\u60c5\u51b5\u3002 \u8f7d\u5165Word2Vec\uff0c\u5c06\u5176\u4e0eSVD\u5f97\u5230\u7684\u5355\u8bcd\u5206\u5e03\u60c5\u51b5\u8fdb\u884c\u5bf9\u6bd4\uff0c\u5206\u6790\u4e24\u8005\u8bcd\u5411\u91cf\u7684\u4e0d\u540c\u4e4b\u5904\u3002 \u5b66\u4e60\u4f7f\u7528 gensim \uff0c\u4f7f\u7528 Cosine Similarity \u5206\u6790\u5355\u8bcd\u7684\u76f8\u4f3c\u5ea6\uff0c\u5bf9\u6bd4\u5355\u8bcd\u548c\u5176\u540c\u4e49\u8bcd\u4e0e\u53cd\u4e49\u8bcd\u7684 Cosine Distance \uff0c\u5e76\u5c1d\u8bd5\u627e\u5230\u6b63\u786e\u7684\u4e0e\u9519\u8bef\u7684\u7c7b\u6bd4\u6837\u4f8b \u63a2\u5bfbWord2Vec\u5411\u91cf\u4e2d\u5b58\u5728\u7684 Independent Bias \u95ee\u9898","title":"Assignment 01"},{"location":"CS224n-2019-Assignment/#assignment-02","text":"","title":"Assignment 02"},{"location":"CS224n-2019-Assignment/#1-written-understanding-word2vec","text":"\\[ P(O=o | C=c)=\\frac{\\exp \\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)}{\\sum_{w \\in \\mathrm{Vocab}} \\exp \\left(\\boldsymbol{u}_{w}^{\\top} \\boldsymbol{v}_{c}\\right)} \\] \\[ J_{\\text { naive-softmax }}\\left(v_{c}, o, U\\right)=-\\log P(O=o | C=c) \\] \u771f\u5b9e(\u79bb\u6563)\u6982\u7387\u5206\u5e03 \\(p\\) \u4e0e\u53e6\u4e00\u4e2a\u5206\u5e03 \\(q\\) \u7684\u4ea4\u53c9\u71b5\u635f\u5931\u4e3a \\(-\\sum_i p_{i} \\log \\left(q_{i}\\right)\\) Question a Show that the naive-softmax loss given in Equation (2) is the same as the cross-entropy loss between \\(y\\) and \\(\\hat y\\) ; i.e., show that \\[ -\\sum_{w \\in Vocab} y_{w} \\log \\left(\\hat{y}_{w}\\right)=-\\log \\left(\\hat{y}_{o}\\right) \\] Your answer should be one line. Answer a : \u56e0\u4e3a \\(\\textbf{y}\\) \u662f\u72ec\u70ed\u5411\u91cf\uff0c\u6240\u4ee5 \\(-\\sum_{w \\in Vocab} y_{w} \\log (\\hat{y}_{w})=-y_o\\log (\\hat{y}_{o}) -\\sum_{w \\in Vocab,w \\neq o} y_{w} \\log (\\hat{y}_{w}) = -\\log (\\hat{y}_{o})\\) Question b Compute the partial derivative of \\(J_{\\text{naive-softmax}}(v_c, o, \\textbf{U})\\) with respect to \\(v_c\\) . Please write your answer in terms of \\(\\textbf{y}, \\hat {\\textbf{y}}, \\textbf{U}\\) . Answer b : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial v_{c}}} &={-\\frac{\\partial\\left(u_{o}^{T} v_{c}\\right)}{\\partial v_{c}}+\\frac{\\partial \\left(\\log \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)\\right)}{\\partial v_{c}}} \\\\ &={-u_{o}+\\frac{1}{\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)}} \\frac{\\partial \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)}{\\partial v_{c}} \\\\ &={-u_{o}+\\sum_{w} \\frac{\\exp \\left(u_{w}^{T} v_{c}\\right)u_w}{\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)}} \\\\ &={-u_{o}+\\sum_{w} p(O=w | C=c)u_{w}} \\\\ &={-u_{o}+\\sum_{w} \\hat{y_w} u_{w}} \\\\ &={U(\\hat{y}-y)} \\end{array} \\] Question c Compute the partial derivatives of \\(J_{\\text{naive-softmax}}(v_c, o, \\textbf{U})\\) with respect to each of the \u2018outside' word vectors, \\(u_w\\) 's. There will be two cases: when \\(w = o\\) , the true \u2018outside' word vector, and \\(w \\neq o\\) , for all other words. Please write you answer in terms of \\(\\textbf{y}, \\hat {\\textbf{y}}, \\textbf{U}\\) . Answer c : $$ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &={-\\frac{\\partial\\left(u_{o}^{T} v_{c}\\right)}{\\partial u_{w}}+\\frac{\\partial \\left(\\log \\left(\\sum_{w} \\exp \\left(u_{w}^{T} v_{c}\\right)\\right)\\right)}{\\partial u_{w}}} \\end{array} $$ When \\(w \\neq o\\) : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &= 0 + p(O=w | C=c) v_{c} \\\\ &=\\hat{y}_{w} v_{c} \\end{array} \\] When \\(w = o\\) : \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial u_{w}}} &= -v_c + p(O=o | C=c) v_{c} \\\\ &=\\hat{y}_{w} v_{c} - v_c \\\\ &=(\\hat{y}_{w} - 1)v_c \\end{array} \\] Then : \\[ {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial U}} = v_c(\\hat y - y)^T \\] Question d The sigmoid function is given by the follow Equation : \\[ \\sigma(x)=\\frac{1}{1+e^{-x}}=\\frac{e^{x}}{e^{x}+1} \\] Please compute the derivative of \\(\\sigma (x)\\) with respect to \\(x\\) , where \\(x\\) is a vector. Answer d : \\[ \\begin{array}{l} \\frac{\\partial \\sigma(x_i)}{\\partial x_i} &=\\frac{1}{(1+\\exp (-x_i))^{2}} \\exp (-x_i)=\\sigma(x_i)(1-\\sigma(x_i)) \\\\ \\frac{\\partial \\sigma(x)}{\\partial x} &= \\left[\\frac{\\partial \\sigma\\left(x_{j}\\right)}{\\partial x_{i}}\\right]_{d \\times d} \\\\ &=\\left[\\begin{array}{cccc}{\\sigma^{\\prime}\\left(x_{1}\\right)} & {0} & {\\cdots} & {0} \\\\ {0} & {\\sigma^{\\prime}\\left(x_{2}\\right)} & {\\cdots} & {0} \\\\ {\\vdots} & {\\vdots} & {\\vdots} & {\\vdots} \\\\ {0} & {0} & {\\cdots} & {\\sigma^{\\prime}\\left(x_{d}\\right)}\\end{array}\\right] \\\\ &=\\text{diag}(\\sigma^\\prime(x)) \\end{array} \\] Question e Now we shall consider the Negative Sampling loss, which is an alternative to the Naive Softmax loss. Assume that \\(K\\) negative samples (words) are drawn from the vocabulary. For simplicity of notation we shall refer to them as \\(w_{1}, w_{2}, \\dots, w_{K}\\) and their outside vectors as \\(u_{1}, \\dots, u_{K}\\) . Note that \\(o \\notin\\left\\{w_{1}, \\dots, w_{K}\\right\\}\\) . For a center word \\(c\\) and an outside word \\(o\\) , the negative sampling loss function is given by: \\[ J_{\\text { neg-sample }}\\left(v_{c}, o, U\\right)=-\\log \\left(\\sigma\\left(u_{o}^{\\top} v_{c}\\right)\\right)-\\sum_{k=1}^{K} \\log \\left(\\sigma\\left(-u_{k}^{\\top} v_{c}\\right)\\right) \\] for a sample \\(w_{1}, w_{2}, \\dots, w_{K}\\) , where \\(\\sigma(\\cdot)\\) is the sigmoid function. Please repeat parts b and c, computing the partial derivatives of \\(J_{\\text { neg-sample }}\\) respect to \\(v_c\\) , with respect to \\(u_o\\) , and with respect to a negative sample \\(u_k\\) . Please write your answers in terms of the vectors \\(u_o, v_c,\\) and \\(u_k\\) , where \\(k \\in[1, K]\\) . After you've done this, describe with one sentence why this loss function is much more efficient to compute than the naive-softmax loss. Note, you should be able to use your solution to part (d) to help compute the necessary gradients here. Answer e : For \\(v_c\\) : \\[ \\begin{array}{l} \\frac{\\partial J_{\\text {neg-sample}}}{\\partial v_c} &=(\\sigma(u_o^T v_c) - 1) u_o + \\sum_{k=1}^{K}\\left(1-\\sigma\\left(-u_{k}^{T} v_{c}\\right)\\right) u_{k} \\\\ &= (\\sigma(u_o^T v_c) - 1) u_o+ \\sum_{k=1}^{K}\\sigma\\left(u_{k}^{T} v_{c}\\right) u_{k} \\end{array} \\] For \\(u_o\\) , Remeber : \\(o \\notin\\left\\{w_{1}, \\dots, w_{K}\\right\\}\\) : \\[ \\frac{\\partial J_{\\text {neg-sample}}}{\\partial u_o}=(\\sigma(u_o^T v_c) - 1)v_c \\] For \\(u_k\\) : \\[ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{k}}=-\\left(\\sigma\\left(-\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)-1\\right) \\boldsymbol{v}_{c} = \\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right)\\boldsymbol{v}_{c}, \\quad for\\ k=1,2, \\ldots, K \\] Why this loss function is much more efficient to compute than the naive-softmax loss? For naive softmax loss function: \\[ \\begin{array}{l} {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial v_{c}}} &={U(\\hat{y}-y)} \\\\ {\\frac{\\partial J\\left(v_{c}, o, U\\right)}{\\partial U}} &= v_c(\\hat y - y)^T \\end{array} \\] For negative sampling loss function: \\[ \\begin{aligned} \\frac{\\partial J}{\\partial \\boldsymbol{v}_{c}} &=\\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} v_{c}\\right)-1\\right) \\boldsymbol{u}_{o} + \\sum_{k=1}^{K}\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{u}_{k} =\\sigma\\left(-\\boldsymbol{u}_{o}^{\\top} v_{c}\\right) \\boldsymbol{u}_{o} + \\sum_{k=1}^{K}\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{u}_{k} \\\\ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{o}} &=\\left(\\sigma\\left(\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)-1\\right) \\boldsymbol{v}_{c} = \\sigma\\left(-\\boldsymbol{u}_{o}^{\\top} \\boldsymbol{v}_{c}\\right)\\boldsymbol{v}_{c} \\\\ \\frac{\\partial J}{\\partial \\boldsymbol{u}_{k}} &=\\sigma\\left(\\boldsymbol{u}_{k}^{\\top} \\boldsymbol{v}_{c}\\right) \\boldsymbol{v}_{c}, \\quad \\text { for all } k=1,2, \\ldots, K \\end{aligned} \\] \u4ece\u6c42\u5f97\u7684\u504f\u5bfc\u6570\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u539f\u59cb\u7684softmax\u51fd\u6570\u6bcf\u6b21\u5bf9 \\(v_c\\) \u8fdb\u884c\u53cd\u5411\u4f20\u64ad\u65f6\uff0c\u9700\u8981\u4e0e output vector matrix \u8fdb\u884c\u5927\u91cf\u4e14\u590d\u6742\u7684\u77e9\u9635\u8fd0\u7b97\uff0c\u800c\u8d1f\u91c7\u6837\u4e2d\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u5219\u4e0d\u518d\u4e0e\u8bcd\u8868\u5927\u5c0f \\(V\\) \u6709\u5173\uff0c\u800c\u662f\u4e0e\u91c7\u6837\u6570\u91cf \\(K\\) \u6709\u5173\u3002 Question f Suppose the center word is \\(c = w_t\\) and the context window is \\(\\left[w_{t-m}, \\ldots, w_{t-1}, w_{t}, w_{t+1}, \\dots,w_{t+m} \\right]\\) , where \\(m\\) is the context window size. Recall that for the skip-gram version of word2vec , the total loss for the context window is \\[ J_{\\text { skip-gram }}\\left(v_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right)=\\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) \\] Here, \\(J\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) represents an arbitrary loss term for the center word \\(c = w_t\\) and outside word \\(w_t+j\\) . \\(J\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) could be \\(J_{\\text {naive-softmax}}\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) or \\(J_{\\text {neg-sample}}\\left(v_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) , depending on your implementation. Write down three partial derivatives: \\[ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{U} \\\\ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial v_{c} \\\\ \\partial \\boldsymbol{J}_{\\text { skip-gram }}\\left(\\boldsymbol{v}_{c}, w_{t-m}, \\ldots w_{t+m}, \\boldsymbol{U}\\right) / \\partial v_{w} \\text { when } w \\neq c \\] Write your answers in terms of \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{U}\\) and \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right) / \\partial \\boldsymbol{v_c}\\) . This is very simple - each solution should be one line. Once you're done : Given that you computed the derivatives of \\(\\partial \\boldsymbol{J}\\left(\\boldsymbol{v}_{c}, w_{t+j}, \\boldsymbol{U}\\right)\\) with respect to all the model parameters \\(U\\) and \\(V\\) in parts a to c, you have now computed the derivatives of the full loss function \\(J_{skip-gram}\\) with respect to all parameters. You're ready to implement word2vec ! Answer f : $$ \\begin{array}{l} \\frac{\\partial J_{s g}}{\\partial U} &= \\sum_{-m \\leq j \\leq m, j \\neq 0} \\frac{\\partial J\\left(v_{c}, w_{t+j}, U\\right)}{\\partial U} \\ \\frac{\\partial J_{s g}}{\\partial v_{c}}&= \\sum_{-m \\leq j \\leq m, j \\neq 0} \\frac{\\partial J\\left(v_{c}, w_{t+j}, U\\right)}{\\partial v_{c}} \\ \\frac{\\partial J_{s g}}{\\partial v_{w}}&=0(\\text { when } w \\neq c) \\end{array} $$","title":"1  Written: Understanding word2vec"},{"location":"CS224n-2019-Assignment/#2-coding-implementing-word2vec","text":"","title":"2 Coding: Implementing word2vec"},{"location":"CS224n-2019-Assignment/#word2vecpy","text":"\u672c\u90e8\u5206\u8981\u6c42\u5b9e\u73b0 \\(sigmoid, naiveSoftmaxLossAndGradient, negSamplingLossAndGradient, skipgram\\) \u56db\u4e2a\u51fd\u6570\uff0c\u4e3b\u8981\u8003\u5bdf\u5bf9\u7b2c\u4e00\u90e8\u5206\u4e2d\u53cd\u5411\u4f20\u64ad\u8ba1\u7b97\u7ed3\u679c\u7684\u5b9e\u73b0\u3002\u4ee3\u7801\u5b9e\u73b0\u4e2d\uff0c\u901a\u8fc7\u4f18\u5316\u504f\u5bfc\u6570\u7ed3\u5408\u504f\u5bfc\u6570\u8ba1\u7b97\u7ed3\u679c\u4e0e \\(\\sigma(x) + \\sigma(-x) = 1\\) \u5bf9\u516c\u5f0f\u8fdb\u884c\u8f6c\u5316\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5168\u77e2\u91cf\u5316\u3002\u8fd9\u90e8\u5206\u9700\u8981\u5927\u5bb6\u81ea\u884c\u7ed3\u5408\u4ee3\u7801\u4e0e\u516c\u5f0f\u8fdb\u884c\u63a8\u5bfc\u3002","title":"word2vec.py"},{"location":"CS224n-2019-Assignment/#sgdpy","text":"\u5b9e\u73b0 SGD $$ \\theta^{n e w}=\\theta^{o l d} - \\alpha \\nabla_{\\theta} J(\\theta) $$","title":"sgd.py"},{"location":"CS224n-2019-Assignment/#runpy","text":"\u9996\u5148\u8981\u8bf4\u660e\u7684\u662f\uff0c\u8fd9\u4e2a\u771f\u7684\u8981\u8dd1\u597d\u4e45 Question Briefly explain in at most three sentences what you see in the plot. \u4e0a\u56fe\u662f\u7ecf\u8fc7\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u7684\u53ef\u89c6\u5316\u3002\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\u4e00\u4e9b\u6a21\u5f0f\uff1a \u8fd1\u4e49\u8bcd\u88ab\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u6bd4\u5982 amazing \u548c wonderful\uff0cwoman \u548c female\u3002 \u4f46\u662f man \u548c male \u5374\u8ddd\u79bb\u8f83\u8fdc \u53cd\u4e49\u8bcd\u53ef\u80fd\u56e0\u4e3a\u7ecf\u5e38\u5c5e\u4e8e\u540c\u4e00\u4e0a\u4e0b\u6587\uff0c\u5b83\u4eec\u4e5f\u4f1a\u4e0e\u540c\u4e49\u8bcd\u4e00\u8d77\u51fa\u73b0\uff0c\u6bd4\u5982 enjoyable \u548c annoying\u3002 man:king::woman:queen \u4ee5\u53ca queen:king::female:male \u5f62\u6210\u7684\u4e24\u6761\u76f4\u7ebf\u57fa\u672c\u5e73\u884c","title":"run.py"},{"location":"CS224n-2019-Assignment/#assignment-03","text":"","title":"Assignment 03"},{"location":"CS224n-2019-Assignment/#1-machine-learning-neural-networks","text":"","title":"1. Machine Learning &amp; Neural Networks"},{"location":"CS224n-2019-Assignment/#a-adam-optimizer","text":"\u56de\u5fc6\u4e00\u4e0b\u6807\u51c6\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u7684\u66f4\u65b0\u89c4\u5219 $$ \\boldsymbol{\\theta} \\leftarrow \\boldsymbol{\\theta}-\\alpha \\nabla_{\\boldsymbol{\\theta}}{J_{\\mathrm{minibatch}}(\\boldsymbol{\\theta})} $$ \u5176\u4e2d\uff0c \\(\\boldsymbol{\\theta}\\) \u662f\u5305\u542b\u6a21\u578b\u6240\u6709\u53c2\u6570\u7684\u5411\u91cf\uff0c \\(J\\) \u662f\u635f\u5931\u51fd\u6570\uff0c \\(\\nabla_{\\boldsymbol{\\theta}} J_{\\mathrm{minibatch}}(\\boldsymbol{\\theta})\\) \u662f\u5173\u4e8eminibatch\u6570\u636e\u4e0a\u53c2\u6570\u7684\u635f\u5931\u51fd\u6570\u7684\u68af\u5ea6\uff0c \\(\\alpha\\) \u662f\u5b66\u4e60\u7387\u3002 Adam Optimization \u4f7f\u7528\u4e86\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u66f4\u65b0\u89c4\u5219\uff0c\u5e76\u9644\u52a0\u4e86\u4e24\u4e2a\u6b65\u9aa4\u3002 Question 1.a.i \u9996\u5148\uff0cAdam\u4f7f\u7528\u4e86\u4e00\u4e2a\u53eb\u505a \\(momentum\\) **\u52a8\u91cf**\u7684\u6280\u5de7\u6765\u8ddf\u8e2a\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5747\u503c \\(m\\) \\[ \\begin{aligned} \\mathbf{m} & \\leftarrow \\beta_{1} \\mathbf{m}+\\left(1-\\beta_{1}\\right) \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\\\ \\boldsymbol{\\theta} & \\leftarrow \\boldsymbol{\\theta}-\\alpha \\mathbf{m} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\beta_1\\) \u662f\u4e00\u4e2a 0 \u548c 1 \u4e4b\u95f4\u7684\u8d85\u53c2\u6570(\u901a\u5e38\u88ab\u8bbe\u4e3a0.9)\u3002\u7b80\u8981\u8bf4\u660e(\u4e0d\u9700\u8981\u7528\u6570\u5b66\u65b9\u6cd5\u8bc1\u660e\uff0c\u53ea\u9700\u8981\u76f4\u89c2\u5730\u8bf4\u660e)\u5982\u4f55\u4f7f\u7528m\u6765\u963b\u6b62\u66f4\u65b0\u53d1\u751f\u5927\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u603b\u4f53\u4e0a\u4e3a\u4ec0\u4e48\u8fd9\u79cd\u5c0f\u53d8\u5316\u53ef\u80fd\u6709\u52a9\u4e8e\u5b66\u4e60\u3002 Answer 1.a.i : \u7531\u4e8e\u8d85\u53c2\u6570 \\(\\beta _1\\) \u4e00\u822c\u88ab\u8bbe\u4e3a0.9\uff0c\u6b64\u65f6\u5bf9\u4e8e\u79fb\u52a8\u5e73\u5747\u7684\u68af\u5ea6\u503c \\(m\\) \u800c\u8a00\uff0c\u4e3b\u8981\u53d7\u5230\u7684\u662f\u4e4b\u524d\u68af\u5ea6\u7684\u79fb\u52a8\u5e73\u5747\u503c\u7684\u5f71\u54cd\uff0c\u800c\u672c\u6b21\u8ba1\u7b97\u5f97\u5230\u7684\u68af\u5ea6\u5c06\u4f1a\u88ab\u7f29\u653e\u4e3a\u539f\u6765\u7684 \\({1 - \\beta_1}\\) \u500d\uff0c\u5373\u65f6\u672c\u6b21\u8ba1\u7b97\u5f97\u5230\u7684\u68af\u5ea6\u5f88\u5927\uff08\u68af\u5ea6\u7206\u70b8\uff09\uff0c\u8fd9\u4e00\u5f71\u54cd\u4e5f\u4f1a\u88ab\u51cf\u8f7b\uff0c\u4ece\u800c\u963b\u6b62\u66f4\u65b0\u53d1\u751f\u5927\u7684\u53d8\u5316\u3002 \u901a\u8fc7\u51cf\u5c0f\u68af\u5ea6\u7684\u53d8\u5316\u7a0b\u5ea6\uff0c\u4f7f\u5f97\u6bcf\u6b21\u7684\u68af\u5ea6\u66f4\u65b0\u66f4\u52a0\u7a33\u5b9a\uff0c\u4ece\u800c\u4f7f\u6a21\u578b\u5b66\u4e60\u66f4\u52a0\u7a33\u5b9a\uff0c\u6536\u655b\u901f\u5ea6\u66f4\u5feb\uff0c\u5e76\u4e14\u8fd9\u4e5f\u51cf\u6162\u4e86\u5bf9\u4e8e\u8f83\u5927\u68af\u5ea6\u503c\u7684\u53c2\u6570\u7684\u66f4\u65b0\u901f\u5ea6\uff0c\u4fdd\u8bc1\u5176\u66f4\u65b0\u7684\u7a33\u5b9a\u6027\u3002 Question 1.a.ii Adam\u8fd8\u901a\u8fc7\u8ddf\u8e2a\u68af\u5ea6\u5e73\u65b9\u7684\u79fb\u52a8\u5e73\u5747\u503c \\(v\\) \u6765\u4f7f\u7528\u81ea\u9002\u5e94\u5b66\u4e60\u7387 \\[ \\begin{aligned} \\mathbf{m} & \\leftarrow \\beta_{1} \\mathbf{m}+\\left(1-\\beta_{1}\\right) \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\\\ \\mathbf{v} & \\leftarrow \\beta_{2} \\mathbf{v}+\\left(1-\\beta_{2}\\right)\\left(\\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta}) \\odot \\nabla_{\\boldsymbol{\\theta}} J_{\\text { minibatch }}(\\boldsymbol{\\theta})\\right) \\\\ \\boldsymbol{\\theta} & \\leftarrow \\boldsymbol{\\theta}-\\alpha \\odot \\mathbf{m} / \\sqrt{\\mathbf{v}} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\odot, /\\) \u5206\u522b\u8868\u793a\u9010\u5143\u7d20\u7684\u4e58\u6cd5\u548c\u9664\u6cd5\uff08\u6240\u4ee5 \\(z \\odot z\\) \u662f\u9010\u5143\u7d20\u7684\u5e73\u65b9\uff09\uff0c \\(\\beta_2\\) \u662f\u4e00\u4e2a 0 \u548c 1 \u4e4b\u95f4\u7684\u8d85\u53c2\u6570(\u901a\u5e38\u88ab\u8bbe\u4e3a0.99)\u3002\u56e0\u4e3aAdam\u5c06\u66f4\u65b0\u9664\u4ee5 \\(\\sqrt v\\) \uff0c\u90a3\u4e48\u54ea\u4e2a\u6a21\u578b\u53c2\u6570\u4f1a\u5f97\u5230\u66f4\u5927\u7684\u66f4\u65b0\uff1f\u4e3a\u4ec0\u4e48\u8fd9\u5bf9\u5b66\u4e60\u6709\u5e2e\u52a9\uff1f Answer 1.a.ii : \u79fb\u52a8\u5e73\u5747\u68af\u5ea6\u6700\u5c0f\u7684\u6a21\u578b\u53c2\u6570\u5c06\u5f97\u5230\u8f83\u5927\u7684\u66f4\u65b0\u3002 \u4e00\u65b9\u9762\uff0c\u5c06\u68af\u5ea6\u8f83\u5c0f\u7684\u53c2\u6570\u7684\u66f4\u65b0\u53d8\u5927\uff0c\u5e2e\u52a9\u5176\u8d70\u51fa\u5c40\u90e8\u6700\u4f18\u70b9\uff08\u978d\u70b9\uff09\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u5c06\u68af\u5ea6\u8f83\u5927\u7684\u53c2\u6570\u7684\u66f4\u65b0\u53d8\u5c0f\uff0c\u4f7f\u5176\u66f4\u65b0\u66f4\u52a0\u7a33\u5b9a\u3002\u7ed3\u5408\u4ee5\u4e0a\u4e24\u4e2a\u65b9\u9762\uff0c\u4f7f\u5b66\u4e60\u66f4\u52a0\u5feb\u901f\u7684\u540c\u65f6\u4e5f\u66f4\u52a0\u7a33\u5b9a\u3002","title":"(a) Adam Optimizer"},{"location":"CS224n-2019-Assignment/#b-dropout","text":"Dropout \u662f\u4e00\u79cd\u6b63\u5219\u5316\u6280\u672f\u3002\u5728\u8bad\u7ec3\u671f\u95f4\uff0cDropout \u4ee5 \\(p_{drop}\\) \u7684\u6982\u7387\u968f\u673a\u8bbe\u7f6e\u9690\u85cf\u5c42 \\(h\\) \u4e2d\u7684\u795e\u7ecf\u5143\u4e3a\u96f6(\u6bcf\u4e2aminibatch\u4e2d dropout \u4e0d\u540c\u7684\u795e\u7ecf\u5143),\u7136\u540e\u5c06 \\(h\\) \u4e58\u4ee5\u4e00\u4e2a\u5e38\u6570 \\(\\gamma\\) \u3002\u6211\u4eec\u53ef\u4ee5\u5199\u4e3a \\[ \\mathbf{h}_{\\mathrm{drop}}=\\gamma \\mathbf{d} \\circ \\mathbf{h} \\] \u5176\u4e2d\uff0c \\(d \\in \\{0,1\\}^{D_h}\\) ( \\(D_h\\) \u662f \\(h\\) \u7684\u5927\u5c0f)\u662f\u4e00\u4e2a\u63a9\u7801\u5411\u91cf\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6761\u76ee\u90fd\u662f\u4ee5 \\(p_{drop}\\) \u7684\u6982\u7387\u4e3a 0 \uff0c\u4ee5 \\(1 - p_{drop}\\) \u7684\u6982\u7387\u4e3a 1\u3002 \\(\\gamma\\) \u662f\u4f7f\u5f97 \\(h_{drop}\\) \u7684\u671f\u671b\u503c\u4e3a \\(h\\) \u7684\u503c \\[ \\mathbb{E}_{p_{\\text{drop}}}\\left[\\mathbf{h}_{\\text{drop}}\\right]_{i}=h_{i}, \\text{for all } i \\in \\{1,\\dots,D_h\\} \\] Question 1.b.i \\(\\gamma\\) \u5fc5\u987b\u7b49\u4e8e\u4ec0\u4e48(\u7528 \\(p_{drop}\\) \u8868\u793a) \uff1f\u7b80\u5355\u8bc1\u660e\u4f60\u7684\u7b54\u6848\u3002 Answer 1.b.i : \\[ \\gamma = \\frac{1}{1 - p_{drop}} \\\\ \\] \u8bc1\u660e\u5982\u4e0b\uff1a \\[ \\sum_i (1 - p_{drop}) h_i = (1 - p_{drop}) E[h] \\\\ \\sum_i[h_{drop}]_i = \\gamma\\sum_i (1 - p_{drop}) h_i = \\gamma (1 - p_{drop}) E[h] = E[h] \\] Question 1.b.ii \u4e3a\u4ec0\u4e48\u6211\u4eec\u5e94\u8be5\u53ea\u5728\u8bad\u7ec3\u65f6\u4f7f\u7528 dropout \u800c\u5728\u8bc4\u4f30\u65f6\u4e0d\u4f7f\u7528\uff1f Answer 1.b.ii : \u5982\u679c\u6211\u4eec\u5728\u8bc4\u4f30\u671f\u95f4\u5e94\u7528 dropout \uff0c\u90a3\u4e48\u8bc4\u4f30\u7ed3\u679c\u5c06\u4f1a\u5177\u6709\u968f\u673a\u6027\uff0c\u5e76\u4e0d\u80fd\u4f53\u73b0\u6a21\u578b\u7684\u771f\u5b9e\u6027\u80fd\uff0c\u8fdd\u80cc\u4e86\u6b63\u5219\u5316\u7684\u521d\u8877\u3002\u901a\u8fc7\u5728\u8bc4\u4f30\u671f\u95f4\u7981\u7528 dropout\uff0c\u4ece\u800c\u89c2\u5bdf\u6a21\u578b\u7684\u6027\u80fd\u4e0e\u6b63\u5219\u5316\u7684\u6548\u679c\uff0c\u4fdd\u8bc1\u6a21\u578b\u7684\u53c2\u6570\u5f97\u5230\u6b63\u786e\u7684\u66f4\u65b0\u3002","title":"(b) Dropout"},{"location":"CS224n-2019-Assignment/#2-neural-transition-based-dependency-parsing","text":"\u5728\u672c\u8282\u4e2d\uff0c\u60a8\u5c06\u5b9e\u73b0\u4e00\u4e2a\u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u4f9d\u8d56\u89e3\u6790\u5668\uff0c\u5176\u76ee\u6807\u662f\u5728UAS(\u672a\u6807\u8bb0\u4f9d\u5b58\u8bc4\u5206)\u6307\u6807\u4e0a\u6700\u5927\u5316\u6027\u80fd\u3002 \u4f9d\u5b58\u89e3\u6790\u5668\u5206\u6790\u53e5\u5b50\u7684\u8bed\u6cd5\u7ed3\u6784\uff0c\u5728 head words \u548c \u4fee\u9970 head words \u7684\u5355\u8bcd\u4e4b\u95f4\u5efa\u7acb\u5173\u7cfb\u3002\u4f60\u7684\u5b9e\u73b0\u5c06\u662f\u4e00\u4e2a\u57fa\u4e8e\u8f6c\u6362\u7684\u89e3\u6790\u5668\uff0c\u5b83\u9010\u6b65\u6784\u5efa\u4e00\u4e2a\u89e3\u6790\u3002\u6bcf\u4e00\u6b65\u90fd\u7ef4\u62a4\u4e00\u4e2a\u5c40\u90e8\u89e3\u6790\uff0c\u8868\u793a\u5982\u4e0b \u4e00\u4e2a\u5b58\u50a8\u6b63\u5728\u88ab\u5904\u7406\u7684\u5355\u8bcd\u7684 \u6808 \u4e00\u4e2a\u5b58\u50a8\u5c1a\u672a\u5904\u7406\u7684\u5355\u8bcd\u7684 \u7f13\u5b58 \u4e00\u4e2a\u89e3\u6790\u5668\u9884\u6d4b\u7684 \u4f9d\u8d56 \u7684\u5217\u8868 \u6700\u521d,\u6808\u53ea\u5305\u542b ROOT \uff0c\u4f9d\u8d56\u9879\u5217\u8868\u662f\u7a7a\u7684\uff0c\u800c\u7f13\u5b58\u5219\u5305\u542b\u4e86\u8fd9\u4e2a\u53e5\u5b50\u7684\u6240\u6709\u5355\u8bcd\u3002\u5728\u6bcf\u4e00\u4e2a\u6b65\u9aa4\u4e2d,\u89e3\u6790\u5668\u5c06\u5bf9\u90e8\u5206\u89e3\u6790\u4f7f\u7528\u4e00\u4e2a\u8f6c\u6362,\u76f4\u5230\u5b83\u7684\u9b42\u6751\u662f\u7a7a\u7684\uff0c\u5e76\u4e14\u6808\u5927\u5c0f\u4e3a1\u3002\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8f6c\u6362\uff1a SHIFT\uff1a\u5c06buffer\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\u79fb\u51fa\u5e76\u653e\u5230stack\u4e0a\u3002 LEFT-ARC\uff1a\u5c06\u7b2c\u4e8c\u4e2a(\u6700\u8fd1\u6dfb\u52a0\u7684\u7b2c\u4e8c)\u9879\u6807\u8bb0\u4e3a\u6808\u9876\u5143\u7d20\u7684\u4f9d\u8d56\uff0c\u5e76\u4ece\u5806\u6808\u4e2d\u5220\u9664\u7b2c\u4e8c\u9879 RIGHT-ARC\uff1a\u5c06\u7b2c\u4e00\u4e2a(\u6700\u8fd1\u6dfb\u52a0\u7684\u7b2c\u4e00)\u9879\u6807\u8bb0\u4e3a\u6808\u4e2d\u7b2c\u4e8c\u9879\u7684\u4f9d\u8d56\uff0c\u5e76\u4ece\u5806\u6808\u4e2d\u5220\u9664\u7b2c\u4e00\u9879 \u5728\u6bcf\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u89e3\u6790\u5668\u5c06\u4f7f\u7528\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u5206\u7c7b\u5668\u5728\u4e09\u4e2a\u8f6c\u6362\u4e2d\u51b3\u5b9a\u3002 Question 2.a \u6c42\u89e3\u89e3\u6790\u53e5\u5b50 \u201cI parsed this sentence correctly\u201d \u6240\u9700\u7684\u8f6c\u6362\u987a\u5e8f\u3002\u8fd9\u53e5\u8bdd\u7684\u4f9d\u8d56\u6811\u5982\u4e0b\u6240\u793a\u3002\u5728\u6bcf\u4e00\u6b65\u4e2d\uff0c\u7ed9\u51fa stack \u548c buffer \u7684\u7ed3\u6784\uff0c\u4ee5\u53ca\u672c\u6b65\u9aa4\u5e94\u7528\u4e86\u4ec0\u4e48\u8f6c\u6362\uff0c\u5e76\u6dfb\u52a0\u65b0\u7684\u4f9d\u8d56(\u5982\u679c\u6709\u7684\u8bdd)\u3002\u4e0b\u9762\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\u3002 Answer 2.a : Stack Buffer New dependency Transition [ROOT] [I, parsed, this, sentence, correctly] Initial Con\ufb01guration [ROOT, I] [parsed, this, sentence, correctly] SHIFT [ROOT, I, parsed] [this, sentence, correctly] SHIFT [ROOT, parsed] [this, sentence, correctly] parsed \\(\\to\\) I LEFT-ARC [ROOT, parsed, this] [sentence, correctly] SHIFT [ROOT, parsed, this, sentence] [correctly] SHIFT [ROOT, parsed, sentence] [correctly] sentence \\(\\to\\) this LEFT-ARC [ROOT, parsed] [correctly] parsed \\(\\to\\) sentence RIGHT-ARC [ROOT, parsed, correctly] [] SHIFT [ROOT, parsed] [] parsed \\(\\to\\) correctly RIGHT-ARC [ROOT] [] ROOT \\(\\to\\) parsed RIGHT-ARC Question 2.b \u4e00\u4e2a\u5305\u542b \\(n\\) \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u9700\u8981\u591a\u5c11\u6b65(\u7528 \\(n\\) \u8868\u793a)\u624d\u80fd\u88ab\u89e3\u6790\uff1f\u7b80\u8981\u89e3\u91ca\u4e3a\u4ec0\u4e48\u3002 Answer 2.b : \u5305\u542b \\(n\\) \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u9700\u8981 \\(2 \\times n\\) \u6b65\u624d\u80fd\u5b8c\u6210\u89e3\u6790\u3002\u56e0\u4e3a\u9700\u8981\u8fdb\u884c \\(n\\) \u6b65\u7684 \\(SHIFT\\) \u64cd\u4f5c\u548c \u5171\u8ba1$n \u6b65\u7684 LEFT-ARC \u6216 RIGHT-ARC \u64cd\u4f5c\uff0c\u624d\u80fd\u5b8c\u6210\u89e3\u6790\u3002\uff08\u6bcf\u4e2a\u5355\u8bcd\u90fd\u9700\u8981\u4e00\u6b21SHIFT\u548cARC\u7684\u64cd\u4f5c\uff0c\u521d\u59cb\u5316\u6b65\u9aa4\u4e0d\u8ba1\u7b97\u5728\u5185\uff09 Question 2.c \u5b9e\u73b0\u89e3\u6790\u5668\u5c06\u4f7f\u7528\u7684\u8f6c\u6362\u673a\u5236 Question 2.d \u6211\u4eec\u7684\u7f51\u7edc\u5c06\u9884\u6d4b\u54ea\u4e9b\u8f6c\u6362\u5e94\u8be5\u5e94\u7528\u4e8e\u90e8\u5206\u89e3\u6790\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u89e3\u6790\u4e00\u4e2a\u53e5\u5b50\uff0c\u901a\u8fc7\u5e94\u7528\u9884\u6d4b\u51fa\u7684\u8f6c\u6362\u64cd\u4f5c\uff0c\u76f4\u5230\u89e3\u6790\u5b8c\u6210\u3002\u7136\u800c\uff0c\u5728\u5bf9\u5927\u91cf\u6570\u636e\u8fdb\u884c\u9884\u6d4b\u65f6\uff0c\u795e\u7ecf\u7f51\u7edc\u7684\u8fd0\u884c\u901f\u5ea6\u8981\u9ad8\u5f97\u591a(\u5373\u540c\u65f6\u9884\u6d4b\u4e86\u5bf9\u4efb\u4f55\u4e0d\u540c\u90e8\u5206\u89e3\u6790\u7684\u4e0b\u4e00\u4e2a\u8f6c\u6362)\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u7b97\u6cd5\u6765\u89e3\u6790\u5c0f\u6279\u6b21\u7684\u53e5\u5b50 \u5b9e\u73b0minibatch\u7684\u89e3\u6790\u5668 \u6211\u4eec\u73b0\u5728\u5c06\u8bad\u7ec3\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u6765\u9884\u6d4b\uff0c\u8003\u8651\u5230\u6808\u3001\u7f13\u5b58\u548c\u4f9d\u8d56\u9879\u96c6\u5408\u7684\u72b6\u6001\uff0c\u4e0b\u4e00\u6b65\u5e94\u8be5\u5e94\u7528\u54ea\u4e2a\u8f6c\u6362\u3002\u9996\u5148\uff0c\u6a21\u578b\u63d0\u53d6\u4e86\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u72b6\u6001\u7684\u7279\u5f81\u5411\u91cf\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u539f\u795e\u7ecf\u4f9d\u8d56\u89e3\u6790\u8bba\u6587\u4e2d\u7684\u7279\u5f81\u96c6\u5408\uff1a A Fast and Accurate Dependency Parser using Neural Networks \u3002\u8fd9\u4e2a\u7279\u5f81\u5411\u91cf\u7531\u6807\u8bb0\u5217\u8868(\u4f8b\u5982\u5728\u6808\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u8bcd\uff0c\u7f13\u5b58\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8bcd\uff0c\u6808\u4e2d\u7b2c\u4e8c\u5230\u6700\u540e\u4e00\u4e2a\u5b57\u7684\u4f9d\u8d56(\u5982\u679c\u6709))\u7ec4\u6210\u3002\u5b83\u4eec\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a\u6574\u6570\u7684\u5217\u8868 \\([w_1,w_2,\\dots,w_m]\\) \uff0cm\u662f\u7279\u5f81\u7684\u6570\u91cf\uff0c\u6bcf\u4e2a \\(0 \\leq w_i \\lt |V|\\) \u662f\u8bcd\u6c47\u8868\u4e2d\u7684\u4e00\u4e2atoken\u7684\u7d22\u5f15( \\(| V |\\) \u662f\u8bcd\u6c47\u91cf)\u3002\u9996\u5148\uff0c\u6211\u4eec\u7684\u7f51\u7edc\u67e5\u627e\u6bcf\u4e2a\u5355\u8bcd\u7684\u5d4c\u5165\uff0c\u5e76\u5c06\u5b83\u4eec\u8fde\u63a5\u6210\u4e00\u4e2a\u8f93\u5165\u5411\u91cf\uff1a \\[ \\mathbf{x}=\\left[\\mathbf{E}_{w_{1}}, \\dots, \\mathbf{E}_{w_{m}}\\right] \\in \\mathbb{R}^{d m} \\] \u5176\u4e2d \\(\\mathbf{E} \\in \\mathbb{R}^{|V| \\times d}\\) \u662f\u5d4c\u5165\u77e9\u9635\uff0c\u6bcf\u4e00\u884c \\(\\mathbf{E}_w\\) \u662f\u4e00\u4e2a\u7279\u5b9a\u7684\u5355\u8bcd \\(w\\) \u7684\u5411\u91cf\u3002\u63a5\u7740\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6211\u4eec\u7684\u9884\u6d4b\uff1a \\[ \\mathbf h = \\text{ReLU}(\\mathbf{xW+b_1}) \\\\ \\mathbf l = \\text{ReLU}(\\mathbf{hU+b_2}) \\\\ \\mathbf {\\hat y} = \\text{softmax}(l) \\] \u5176\u4e2d\uff0c \\(\\mathbf{h}\\) \u6307\u7684\u662f\u9690\u85cf\u5c42\uff0c \\(\\mathbf{l}\\) \u662f\u5176\u5206\u6570\uff0c \\(\\mathbf{\\hat y}\\) \u6307\u7684\u662f\u9884\u6d4b\u7ed3\u679c\uff0c \\(\\text{ReLU(z)}=max(z,0)\\) \u3002\u6211\u4eec\u4f7f\u7528\u6700\u5c0f\u5316\u4ea4\u53c9\u71b5\u635f\u5931\u6765\u8bad\u7ec3\u6a21\u578b \\[ J(\\theta) = CE(\\mathbf y,\\mathbf{\\hat y}) = -\\sum^3_{i=1}y_i\\log\\hat y_i \\] \u8bad\u7ec3\u96c6\u7684\u635f\u5931\u4e3a\u6240\u6709\u8bad\u7ec3\u6837\u672c\u7684 \\(J(\\theta)\\) \u7684\u5e73\u5747\u503c\u3002 Question 2.f \u6211\u4eec\u60f3\u770b\u770b\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\u7684\u4f8b\u5b50\uff0c\u5e76\u4e86\u89e3\u50cf\u6211\u4eec\u8fd9\u6837\u7684\u89e3\u6790\u5668\u5728\u4ec0\u4e48\u5730\u65b9\u53ef\u80fd\u662f\u9519\u8bef\u7684\u3002\u4f8b\u5982\uff0c\u5728\u8fd9\u4e2a\u53e5\u5b50\u4e2d: \u4f9d\u8d56 \\(\\text{into Afghanistan}\\) \u662f\u9519\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u77ed\u8bed\u5e94\u8be5\u4fee\u9970 \\(\\text{sent}\\) (\u4f8b\u5982 \\(\\text{sent into Afghanistan}\\) ) \u800c\u4e0d\u662f \\(\\text{troops}\\) (\u56e0\u4e3a \\(\\text{ troops into Afghanistan}\\) \u6ca1\u6709\u610f\u4e49)\u3002\u4e0b\u9762\u662f\u6b63\u786e\u7684\u89e3\u6790\uff1a \u4e00\u822c\u6765\u8bf4\uff0c\u4ee5\u4e0b\u662f\u56db\u79cd\u89e3\u6790\u9519\u8bef\uff1a Prepositional Phrase Attachment Error \u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u8bcd\u7ec4 \\(\\text{into Afghanistan}\\) \u662f\u4e00\u4e2a\u4ecb\u8bcd\u77ed\u8bed\u3002\u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\u662f\u6307\u4ecb\u8bcd\u77ed\u8bed\u8fde\u63a5\u5230\u9519\u8bef\u7684 head word \u4e0a(\u5728\u672c\u4f8b\u4e2d\uff0ctroops \u662f\u9519\u8bef\u7684 head word \uff0csent \u662f\u6b63\u786e\u7684 head word )\u3002\u4ecb\u8bcd\u77ed\u8bed\u7684\u66f4\u591a\u4f8b\u5b50\u5305\u62ecwith a rock, before midnight\u548cunder the carpet\u3002 Verb Phrase Attachment Error \u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{leave the store alone, I went out to watch the parade}\\) \u4e2d\uff0c\u77ed\u8bed \\(\\text{leave the store alone}\\) \u662f\u52a8\u8bcd\u77ed\u8bed\u3002\u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u9519\u8bef\u662f\u6307\u4e00\u4e2a\u52a8\u8bcd\u77ed\u8bed\u8fde\u63a5\u5230\u9519\u8bef\u7684 head word \u4e0a(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662f \\(\\text{went}\\) )\u3002 Modi\ufb01er Attachment Error \u4fee\u9970\u8bed\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{I am extremely short}\\) \u4e2d\uff0c\u526f\u8bcdextremely \u662f\u5f62\u5bb9\u8bcd short \u7684\u4fee\u9970\u8bed\u3002\u4fee\u9970\u8bed\u9644\u52a0\u9519\u8bef\u662f\u4fee\u9970\u8bed\u9644\u52a0\u5230\u9519\u8bef\u7684 head word \u4e0a\u65f6\u53d1\u751f\u7684\u9519\u8bef(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662f short)\u3002 Coordination Attachment Error \u534f\u8c03\u8fde\u63a5\u9519\u8bef\uff1a\u5728\u53e5\u5b50 \\(\\text{Would you like brown rice or garlic naan?}\\) \u4e2d\uff0c brown rice \u548cgarlic naan\u90fd\u662f\u8fde\u8bcd\uff0cor\u662f\u5e76\u5217\u8fde\u8bcd\u3002\u7b2c\u4e8c\u4e2a\u8fde\u63a5\u8bcd(\u8fd9\u91cc\u662fgarlic naan)\u5e94\u8be5\u8fde\u63a5\u5230\u7b2c\u4e00\u4e2a\u8fde\u63a5\u8bcd(\u8fd9\u91cc\u662fbrown rice)\u3002\u534f\u8c03\u8fde\u63a5\u9519\u8bef\u662f\u5f53\u7b2c\u4e8c\u4e2a\u8fde\u63a5\u8bcd\u9644\u52a0\u5230\u9519\u8bef\u7684 head word \u4e0a\u65f6(\u5728\u672c\u4f8b\u4e2d\uff0c\u6b63\u786e\u7684\u5934\u8bcd\u662frice)\u3002\u5176\u4ed6\u5e76\u5217\u8fde\u8bcd\u5305\u62ecand, but\u548cso\u3002 \u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\u6709\u56db\u4e2a\u53e5\u5b50\uff0c\u5176\u4e2d\u5305\u542b\u4ece\u89e3\u6790\u5668\u83b7\u5f97\u7684\u4f9d\u8d56\u9879\u89e3\u6790\u3002\u6bcf\u4e2a\u53e5\u5b50\u90fd\u6709\u4e00\u4e2a\u9519\u8bef\uff0c\u4e0a\u9762\u56db\u79cd\u7c7b\u578b\u90fd\u6709\u4e00\u4e2a\u4f8b\u5b50\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u53e5\u5b50\uff0c\u8bf7\u8bf4\u660e\u9519\u8bef\u7684\u7c7b\u578b\u3001\u4e0d\u6b63\u786e\u7684\u4f9d\u8d56\u9879\u548c\u6b63\u786e\u7684\u4f9d\u8d56\u9879\u3002\u4e3a\u4e86\u6f14\u793a:\u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u60a8\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a Error type: Prepositional Phrase Attachment Error Incorrect dependency: troops \\(\\to\\) Afghanistan Correct dependency: sent \\(\\to\\) Afghanistan \u6ce8\u610f\uff1a\u4f9d\u8d56\u9879\u6ce8\u91ca\u6709\u5f88\u591a\u7ec6\u8282\u548c\u7ea6\u5b9a\u3002\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u4ed6\u4eec\u7684\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5\u6d4f\u89c8UD\u7f51\u7ad9: http://universaldependencies.org \u3002\u7136\u800c\uff0c\u4f60\u4e0d\u9700\u8981\u77e5\u9053\u6240\u6709\u8fd9\u4e9b\u7ec6\u8282\u5c31\u80fd\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u3002\u5728\u6bcf\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u5728\u8be2\u95ee\u77ed\u8bed\u7684\u8fde\u63a5\uff0c\u5e94\u8be5\u8db3\u4ee5\u770b\u51fa\u5b83\u4eec\u662f\u5426\u4fee\u9970\u4e86\u6b63\u786e\u7684head\u3002\u7279\u522b\u662f\uff0c\u4f60\u4e0d\u9700\u8981\u67e5\u770b\u4f9d\u8d56\u9879\u8fb9\u7f18\u4e0a\u7684\u6807\u7b7e\u2014\u2014\u53ea\u9700\u67e5\u770b\u8fb9\u7f18\u672c\u8eab\u5c31\u8db3\u591f\u4e86\u3002 Answer 2.f Error type: Verb Phrase Attachment Error Incorrect dependency: wedding \\(\\to\\) fearing Correct dependency: heading \\(\\to\\) fearing Error type: Coordination Attachment Error Incorrect dependency: makes \\(\\to\\) rescue Correct dependency: rush \\(\\to\\) rescue Error type: Prepositional Phrase Attachment Error Incorrect dependency: named \\(\\to\\) Midland Correct dependency: guy \\(\\to\\) Midland Error type: Modi\ufb01er Attachment Error Incorrect dependency: elements \\(\\to\\) most Correct dependency: crucial \\(\\to\\) most","title":"2. Neural Transition-Based Dependency Parsing"},{"location":"CS224n-2019-Assignment/#assignment-04","text":"","title":"Assignment 04"},{"location":"CS224n-2019-Assignment/#1-neural-machine-translation-with-rnns","text":"\u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u5c06\u4e00\u4e2a\u53e5\u5b50\u4ece\u6e90\u8bed\u8a00(\u5982\u897f\u73ed\u7259\u8bed)\u8f6c\u6362\u6210\u76ee\u6807\u8bed\u8a00(\u5982\u82f1\u8bed)\u3002\u5728\u672c\u4f5c\u4e1a\u4e2d\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u5b9e\u73b0\u4e00\u4e2a\u5e8f\u5217\u5230\u5e8f\u5217(Seq2Seq)\u7f51\u7edc\uff0c\u4ee5\u5efa\u7acb\u4e00\u4e2a\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1(NMT)\u7cfb\u7edf\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u4f7f\u7528\u53cc\u5411LSTM\u7f16\u7801\u5668\u548c\u5355\u5411LSTM\u89e3\u7801\u5668\u7684NMT\u7cfb\u7edf\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002 \u4e0a\u56fe\u662f\u4f7f\u7528\u4e58\u6cd5\u6ce8\u610f\u529b\u7684Seq2Seq\u6a21\u578b\uff0c\u663e\u793a\u4e86\u89e3\u7801\u5668\u7684\u7b2c\u4e09\u6b65\u3002\u6ce8\u610f\uff0c\u4e3a\u4e86\u53ef\u8bfb\u6027\uff0c\u6211\u4eec\u4e0d\u63cf\u7ed8\u524d\u4e00\u4e2a\u7ec4\u5408\u8f93\u51fa\u4e0e\u89e3\u7801\u5668\u8f93\u5165\u7684\u8fde\u63a5\u3002 \u7ed9\u5b9a\u6e90\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u53e5\u5b50\uff0c\u6211\u4eec\u4ece\u8bcd\u5d4c\u5165\u77e9\u9635\u4e2d\u67e5\u627e\u5355\u8bcd\u5d4c\u5165\uff0c\u5f97\u5230 \\(\\mathbf{x}_{1}, \\dots, \\mathbf{x}_{m} | \\mathbf{x}_{i} \\in \\mathbb{R}^{e \\times 1}\\) \uff0c\u5176\u4e2d \\(m\\) \u4e3a\u6e90\u8bed\u53e5\u7684\u957f\u5ea6\uff0c \\(e\\) \u4e3a\u5d4c\u5165\u5927\u5c0f\u3002\u6211\u4eec\u5c06\u8fd9\u4e9b\u5d4c\u5165\u63d0\u4f9b\u7ed9\u53cc\u5411\u7f16\u7801\u5668\uff0c\u4e3a\u6b63\u5411( \\(\\rightarrow\\) )\u548c\u53cd\u5411( \\(\\leftarrow\\) )LSTMs\u751f\u6210\u9690\u85cf\u72b6\u6001\u548c\u5355\u5143\u683c\u72b6\u6001\u3002\u524d\u5411\u548c\u540e\u5411\u7684\u7248\u672c\u8fde\u63a5\u8d77\u6765\uff0c\u4ee5\u5f97\u5230\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{i}^{\\mathrm{enc}}\\) \u548c\u5355\u5143\u683c\u72b6\u6001 \\(\\mathbf{c}_{i}^{\\mathrm{enc}}\\) \\[ \\begin{array} \\mathbf{h}_{i}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{h}_{i}^{\\mathrm{enc}} \\in \\mathbb{R}^{2h \\times 1} , \\overleftarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{i}^{\\mathrm{enc}}} \\in \\mathbb{R}^{h \\times 1} & 1 \\leq i \\leq m \\\\ \\mathbf{c}_{i}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{c}_{i}^{\\mathrm{enc}} \\in \\mathbb{R}^{2h \\times 1} , \\overleftarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{i}^{\\mathrm{enc}}} \\in \\mathbb{R}^{h \\times 1} & 1 \\leq i \\leq m \\end{array} \\] \u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u7f16\u7801\u5668\u7684\u6700\u7ec8\u9690\u85cf\u72b6\u6001\u548c\u6700\u7ec8\u5355\u5143\u72b6\u6001\u7684\u7ebf\u6027\u6295\u5f71\uff0c\u521d\u59cb\u5316\u89e3\u7801\u5668\u7684\u7b2c\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{0}^{\\mathrm{dec}}\\) \u548c\u5355\u5143\u72b6\u6001 \\(\\mathbf{c}_{0}^{\\mathrm{dec}}\\) \\[ \\begin{array} \\mathbf{h}_{0}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{h}_{1}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{h}_{m}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{h}_{0}^{\\mathrm{enc}} \\in \\mathbb{R}^{h \\times 1} , \\mathbf{W}_{h} \\in \\mathbb{R}^{h \\times 2 h} \\\\ \\mathbf{c}_{0}^{\\mathrm{enc}} = [\\overleftarrow {\\mathbf{c}_{1}^{\\mathrm{enc}}};\\overrightarrow {\\mathbf{c}_{m}^{\\mathrm{enc}}}] \\text{ where }\\mathbf{c}_{0}^{\\mathrm{enc}} \\in \\mathbb{R}^{h \\times 1} , \\mathbf{W}_{c} \\in \\mathbb{R}^{h \\times 2 h} \\end{array} \\] \u521d\u59cb\u5316\u89e3\u7801\u5668\u4e4b\u540e\uff0c\u73b0\u5728\u5fc5\u987b\u7528\u76ee\u6807\u8bed\u8a00\u4e3a\u5b83\u63d0\u4f9b\u5339\u914d\u7684\u53e5\u5b50\u3002\u5728\u7b2c \\(t\\) \u6b65\uff0c\u6211\u4eec\u67e5\u627e\u7b2c \\(t\\) \u4e2a\u5355\u8bcd\u7684\u5d4c\u5165\uff0c \\(\\mathbf{y}_{t} \\in \\mathbb{R}^{e \\times 1}\\) \u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06 \\(y_t\\) \u4e0e\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684 combined-output \u7ec4\u5408\u8f93\u51fa\u5411\u91cf \\(\\mathbf{o}_{t-1} \\in \\mathbb{R}^{h \\times 1}\\) \u8fde\u63a5\u8d77\u6765(\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u9875\u89e3\u91ca\u8fd9\u662f\u4ec0\u4e48\uff01)\uff0c\u5f97\u5230 \\(\\overline{\\mathbf{y}_{t}} \\in \\mathbb{R}^{(e+h) \\times 1}\\) \u3002\u6ce8\u610f\uff0c\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u76ee\u6807\u5355\u8bcd(\u5373 start \u6807\u8bb0)\uff0c \\(o_0\\) \u662f\u4e00\u4e2a\u96f6\u5411\u91cf\u3002\u7136\u540e\u5c06 \\(\\overline{\\mathbf{y}_{t}}\\) \u4f5c\u4e3a\u8f93\u5165\u8f93\u5165\u5230\u89e3\u7801\u5668LSTM\u4e2d\u3002 \\[ \\mathbf{h}_{t}^{\\mathrm{dec}}, \\mathbf{c}_{t}^{\\mathrm{dec}}=\\text { Decoder }\\left(\\overline{\\mathbf{y}_{t}}, \\mathbf{h}_{t-1}^{\\mathrm{dec}}\\right) \\text { where } \\mathbf{h}_{t}^{\\mathrm{dec}} \\in \\mathbb{R}^{h \\times 1}, \\mathbf{c}_{t}^{\\mathrm{dec}} \\in \\mathbb{R}^{h \\times 1} \\] \u7136\u540e\u6211\u4eec\u7528 \\(\\mathbf{h}_{t}^{\\mathrm{dec}}\\) \u6765\u8ba1\u7b97\u5728 \\(\\mathbf{h}_{0}^{\\mathrm{enc}}, \\ldots, \\mathbf{h}_{m}^{\\mathrm{enc}}\\) \u4e0a\u7684\u4e58\u6cd5\u6ce8\u610f \\[ \\mathbf{e}_{t, i}=\\left(\\mathbf{h}_{t}^{\\mathrm{dec}}\\right)^{T} \\mathbf{W}_{\\mathrm{attProj}} \\mathbf{h}_{i}^{\\mathrm{enc}} \\text { where } \\mathbf{e}_{t} \\in \\mathbb{R}^{m \\times 1}, \\mathbf{W}_{\\mathrm{attProj}} \\in \\mathbb{R}^{h \\times 2 h} \\quad \\quad 1 \\leq i \\leq m \\\\ \\alpha_{t}=\\operatorname{Softmax}\\left(\\mathbf{e}_{t}\\right) \\text { where } \\alpha_{t} \\in \\mathbb{R}^{m \\times 1} \\\\ \\mathbf{a}_{t}=\\sum_{i}^{m} \\alpha_{t, i} \\mathbf{h}_{i}^{\\mathrm{enc}} \\text { where } \\mathbf{a}_{t} \\in \\mathbb{R}^{2 h \\times 1} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5c06\u6ce8\u610f\u529b\u8f93\u51fa \\(\\alpha_t\\) \u4e0e\u89e3\u7801\u5668\u9690\u85cf\u72b6\u6001 \\(\\mathbf{h}_{t}^{\\mathrm{dec}}\\) \u8fde\u63a5\u8d77\u6765\uff0c\u5e76\u5c06\u5176\u901a\u8fc7\u7ebf\u6027\u5c42 Tanh \u548c Dropout \u6765\u83b7\u5f97\u7ec4\u5408\u8f93\u51fa\u5411\u91cf \\(o_t\\) \u3002 \\[ \\begin{aligned} \\mathbf{u}_{t} &=\\left[\\mathbf{a}_{t}; \\mathbf{h}_{t}^{\\mathrm{dec}}\\right] \\text { where } \\mathbf{u}_{t} \\in \\mathbb{R}^{3 h \\times 1} \\\\ \\mathbf{v}_{t} &=\\mathbf{W}_{u} \\mathbf{u}_{t} \\text { where } \\mathbf{v}_{t} \\in \\mathbb{R}^{h \\times 1}, \\mathbf{W}_{u} \\in \\mathbb{R}^{h \\times 3 h} \\\\ \\mathbf{o}_{t} &=\\operatorname{Dropout}\\left(\\operatorname{Tanh}\\left(\\mathbf{v}_{t}\\right)\\right) \\text { where } \\mathbf{o}_{t} \\in \\mathbb{R}^{h \\times 1} \\end{aligned} \\] \u7136\u540e\uff0c\u5728\u7b2c \\(t\\) \u4e2a\u65f6\u95f4\u6b65\u957f\u65f6\uff0c\u5f97\u5230\u76ee\u6807\u8bcd\u7684\u6982\u7387\u5206\u5e03 \\(\\mathbf{P}_{t}\\) \\[ \\mathbf{P}_{t}=\\operatorname{Softmax}\\left(\\mathbf{W}_{\\mathrm{vocab}} \\mathbf{o}_{t}\\right) \\text { where } \\mathbf{P}_{t} \\in \\mathbb{R}^{V_{t} \\times 1}, \\mathbf{W}_{\\mathrm{vocab}} \\in \\mathbb{R}^{V_{t} \\times h} \\] \u8fd9\u91cc\uff0c \\(V_t\\) \u662f\u76ee\u6807\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002\u6700\u540e\uff0c\u4e3a\u4e86\u8bad\u7ec3\u7f51\u7edc\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86 \\(\\mathbf{P}_{t} ,\\mathbf{g}_{t}\\) \u4e4b\u95f4\u7684 softmax \u4ea4\u53c9\u71b5\u635f\u5931\uff0c \\(\\mathbf{g}_{t}\\) \u662f\u65f6\u95f4\u6b65 \\(t\\) \u7684\u76ee\u6807\u8bcd\u7684 one-hot \u5411\u91cf \\[ J_{t}(\\theta)=C E\\left(\\mathbf{P}_{t}, \\mathbf{g}_{t}\\right) \\] \u5728\u8fd9\u91cc\uff0c \\(\\theta\\) \u4ee3\u8868\u6240\u6709\u7684\u6a21\u578b\u53c2\u6570\uff0c \\(J_t(\\theta)\\) \u662f\u89e3\u7801\u5668\u7b2c \\(t\\) \u6b65\u7684\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u63cf\u8ff0\u4e86\u8be5\u6a21\u578b\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u5c06\u5176\u5b9e\u73b0\u4e3a\u897f\u73ed\u7259\u8bed\u5230\u82f1\u8bed\u7684\u7ffb\u8bd1\uff01 Pytorch Bidirectional RNNs Note Pytorch \u4e2d\u7684 RNNs\uff0c\u8fd4\u56de\u7684 out \u7684 shape \u4e3a \\(\\text{(seq_len, batch, num_directions * hidden_size)}\\) \u8f6c\u6362\u4e3a \\(\\text{(seq_len, batch, num_directions, hidden_size)}\\) \u540e\uff0cnum_directions \u4e2d\u7684\u987a\u5e8f\u662f\u5148 forward \u518d backward\uff0c\u5e76\u4e14 forward \u548c backward \u7684 hidden state \u7684\u987a\u5e8f\u662f\u76f8\u53cd\u7684\uff0c\u5373 \\(out[0][0][0]\\) \u662f forward \u7684\u7b2c\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\uff0c\u800c \\(out[0][0][1]\\) \u662f backward \u7684\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\u3002\u6b64\u5916\uff0c out \u53ea\u5305\u542b\u6700\u540e\u4e00\u5c42\u7684\u7ed3\u679c \u4f46\u5bf9\u4e8e h_n ( c_n \u540c\u7406) \u800c\u8a00\uff0cshape \u4e3a \\(\\text{(num_layers * num_directions, batch, hidden_size)}\\) \uff0c\u4fdd\u5b58\u7684\u662f forward \u548c backward \u7684\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u7ed3\u679c\u3002 \u8f6c\u6362\u4e3a \\(\\text{(num_layers, num_directions, batch, hidden_size)}\\) \u540e\uff0c\u7b2c\u4e00\u7ef4\u7684 num_layers \u548c \u771f\u5b9e\u7684 layer \u5c42\u6570\u4e00\u4e00\u5bf9\u5e94\uff0c\u5373 \\(h_n[1][0][0]\\) \u4e0e \\(out[-1][0][0]\\) \u76f8\u7b49\uff0c \\(h_n[1][1][0]\\) \u4e0e \\(out[0][0][1]\\) \u3002 Question 1.g \u9996\u5148\u89e3\u91ca(\u5927\u7ea6\u4e09\u53e5\u8bdd) masks \u5bf9\u6574\u4e2a\u6ce8\u610f\u529b\u8ba1\u7b97\u6709\u4ec0\u4e48\u5f71\u54cd\u3002\u7136\u540e(\u7528\u4e00\u4e24\u53e5\u8bdd)\u89e3\u91ca\u4e3a\u4ec0\u4e48\u6709\u5fc5\u8981\u8fd9\u6837\u4f7f\u7528 masks \u3002 Answer 1.g \u4f7f\u7528 masks \u5c06\u53e5\u5b50\u4e2d\u7684 pad token \u7684\u5206\u6570\u8d4b\u503c\u4e3a \\(-inf\\) \uff0c\u4ece\u800c\u4f7f\u5f97 softmax \u4f5c\u7528\u540e\u83b7\u5f97\u7684 attention \u5206\u5e03\u4e2d\uff0cpad token \u7684 attention \u6982\u7387\u503c\u8fd1\u4f3c\u4e3a 0 attention score / distributions \u8ba1\u7b97\u7684\u662f decoder \u4e2d\u67d0\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684 target word \u5bf9 encoder \u4e2d\u7684\u6240\u6709 source word \u7684\u6ce8\u610f\u529b\u6982\u7387\uff0c\u800c pad token \u53ea\u662f\u7528\u4e8e mini-batch \uff0c\u5e76\u6ca1\u6709\u4efb\u4f55\u8bed\u8a00\u610f\u4e49\uff0ctarget word \u65e0\u987b\u4e3a\u5176\u5206\u6563\u6ce8\u610f\u529b\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528 masks \u8fc7\u6ee4\u6389 pad token Question 1.j \u5728\u8bfe\u5802\u4e0a\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u70b9\u79ef\u6ce8\u610f\u3001\u4e58\u6cd5\u6ce8\u610f\u548c\u52a0\u6cd5\u6ce8\u610f\u3002\u8bf7\u5c31\u5176\u4ed6\u4e24\u79cd\u6ce8\u610f\u673a\u5236\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u63d0\u4f9b\u6bcf\u79cd\u6ce8\u610f\u673a\u5236\u53ef\u80fd\u7684\u4f18\u70b9\u548c\u7f3a\u70b9 \u70b9\u79ef\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{s}_{t}^{T} \\mathbf{h}_{i}\\) \u4e58\u6cd5\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{s}_{t}^{T} \\mathbf{W h}_{i}\\) \u52a0\u6cd5\u6ce8\u610f \\(\\mathbf{e}_{t, i}=\\mathbf{v}^{T}(\\mathbf{W}_{1} \\mathbf{h}_{i}+\\mathbf{W}_{2} \\mathrm{s}_{t} )\\) Answer 1.j \u4f18\u70b9 \u7f3a\u70b9 \u70b9\u79ef\u6ce8\u610f\u529b \u4e0d\u9700\u8981\u989d\u5916\u7684\u7ebf\u6027\u6620\u5c04\u5c42 \\(s_t, h_t\\) \u5fc5\u987b\u6709\u540c\u6837\u7684\u7eac\u5ea6 \u4e58\u6cd5\u6ce8\u610f\u529b \\(s_t, h_t\\) \u4e0d\u9700\u8981\u6709\u540c\u6837\u7684\u7eac\u5ea6\u5e76\u4e14\u56e0\u4e3a\u53ef\u4ee5\u4f7f\u7528\u9ad8\u6548\u7387\u7684\u77e9\u9635\u4e58\u6cd5\uff0c\u6bd4\u52a0\u6cd5\u6ce8\u610f\u529b\u8981\u66f4\u5feb\u66f4\u7701\u5185\u5b58 \u589e\u52a0\u4e86\u8bad\u7ec3\u53c2\u6570 \u52a0\u6cd5\u6ce8\u610f\u529b \u9ad8\u7ef4\u65f6\u7684\u8868\u73b0\u66f4\u597d \u8bad\u7ec3\u53c2\u6570\u66f4\u591a\uff08\u4e24\u4e2a\u53c2\u6570\u77e9\u9635\u4ee5\u53ca\u6ce8\u610f\u529b\u7684\u7eac\u5ea6\uff09","title":"1. Neural Machine Translation with RNNs"},{"location":"CS224n-2019-Assignment/#2-analyzing-nmt-systems","text":"Question 2.a \u8fd9\u91cc\uff0c\u6211\u4eec\u5c55\u793a\u4e86\u5728NMT\u6a21\u578b\u7684\u8f93\u51fa\u4e2d\u53d1\u73b0\u7684\u4e00\u7cfb\u5217\u9519\u8bef(\u4e0e\u60a8\u521a\u521a\u8bad\u7ec3\u7684\u6a21\u578b\u76f8\u540c)\u3002\u5bf9\u4e8e\u897f\u73ed\u7259\u8bed\u6e90\u53e5\u7684\u6bcf\u4e2a\u793a\u4f8b\uff0c\u6807\u51c6\u82f1\u6587\u7ffb\u8bd1\uff0c\u4ee5\u53caNMT(\u5373\uff0c\u201c\u6a21\u578b\u201d)\uff0c\u8bf7\u4f60\uff1a \u8bc6\u522bNMT\u7ffb\u8bd1\u4e2d\u7684\u9519\u8bef \u63d0\u4f9b\u6a21\u578b\u53ef\u80fd\u51fa\u9519\u7684\u539f\u56e0(\u7531\u4e8e\u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\u6216\u7279\u5b9a\u7684\u6a21\u578b\u9650\u5236) \u63cf\u8ff0\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u53d8NMT\u7cfb\u7edf\uff0c\u4ee5\u4fee\u590d\u89c2\u5bdf\u5230\u7684\u9519\u8bef \u4e0b\u9762\u662f\u60a8\u5e94\u8be5\u6309\u7167\u4e0a\u9762\u63cf\u8ff0\u7684\u90a3\u6837\u5206\u6790\u7684\u7ffb\u8bd1\u3002\u8bf7\u6ce8\u610f\uff0c\u6807\u8bb0\u4e86\u4e0b\u5212\u7ebf\u7684\u5355\u8bcd\u662f\u8bcd\u6c47\u8868\u5916\u7684\u5355\u8bcd Answer 2.a Error: \u201c favorite of my favorites\u201d Reason: \u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\uff0c\u4f4e\u8d44\u6e90\u8bed\u8a00\u5bf9 Possible fix: \u5c1d\u8bd5\u5728\u8fd9\u7c7b\u8bed\u8a00\u5bf9\u4e0a\u6dfb\u52a0\u66f4\u591a\u7684\u8bad\u7ec3\u6570\u636e Error: \u201c more reading in the U.S.\u201c \u8bed\u4e49\u9519\u8bef Reason: \u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\uff0c\u6a21\u578b\u5bf9\u8bed\u4e49\u7684\u7406\u89e3\u4e0d\u8db3\uff0c\u9700\u8981\u589e\u5927\u6a21\u578b\u7684\u5bb9\u91cf\u4ee5\u589e\u5f3a\u7406\u89e3\u80fd\u529b Possible fix: \u589e\u5927Hidden_size Error: \u201dRichard \\<unk>\u201c Reason: \u6a21\u578b\u9650\u5236\uff0cBolingbroke \u662f\u8bcd\u8868\u5916\u7684\u5355\u8bcd Possible fix: \u5bf9\u6b64\u7c7b\u59d3\u540d\u4e2d\u51fa\u73b0\u7684\u8bcd\u52a0\u4ee5\u5904\u7406\uff0c\u6bd4\u5982\u76f4\u63a5\u6dfb\u52a0\u5230\u8bcd\u8868\u4e2d Error: \u201dgo back to the apple \u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u201dmanzana\u201c \u6709\u4e30\u5bcc\u7684\u542b\u4e49\uff0c\u5305\u62ec apple \u82f9\u679c\u548c block \u8857\u533a\u3002\u201cblock\u201d\u5728\u897f\u73ed\u7259\u8bed\u4e2d\u7684\u8868\u8fbe\u65b9\u5f0f\u6bd4 \u201capple\u201d \u5728\u897f\u73ed\u7259\u8bed\u4e2d\u7684\u8868\u8fbe\u65b9\u5f0f\u66f4\u591a\u3002\u7136\u800c\uff0c\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0c\u201cmanzana\u201d\u66f4\u591a\u5730\u8868\u793a\u201capple\u201d\uff0c\u800c\u4e0d\u662f\u201cblock\u201d\u3002 Possible fix: \u5728\u8bad\u7ec3\u96c6\u4e2d\u6dfb\u52a0\u66f4\u591a\u7684\u5173\u4e8e \u201dmanzana\u201c \u8868\u793a \u201cblock\u201d \u7684\u6570\u636e\uff0c\u4fdd\u6301\u591a\u91cd\u542b\u4e49\u7684\u8bad\u7ec3\u4e0d\u5931\u8861 Error: \u201cgo to the bathroom in the women\u2019s room\u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u7531\u4e8e\u5728\u6570\u636e\u96c6\u4e2d\uff0c\u5973\u6027\u6bd4\u4e13\u4e1a\u4eba\u5458(\u6559\u5e08)\u7684\u51fa\u73b0\u9891\u7387\u8981\u66f4\u9ad8\uff0c\u6240\u4ee5\u5bfc\u81f4\u7ffb\u8bd1\u5177\u6709\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u7684\u504f\u89c1 bias Possible fix: \u6dfb\u52a0\u66f4\u591a profesore \u7684\u8bad\u7ec3\u6837\u672c Error: \u201d100,000 acres.\u201c Reason: \u6a21\u578b\u9650\u5236\uff0c\u5e38\u8bc6\u9519\u8bef\uff0chect\u00e1reas \u8868\u793a\u516c\u9877\uff0cacres \u8868\u793a\u82f1\u4ea9\uff08acre\u7684\u590d\u6570\uff09\u3002\u6a21\u578b\u5e76\u672a\u7406\u89e3\u4e24\u4e2a\u5355\u4f4d\u5236\u4e4b\u95f4\u7684\u8f6c\u6362\u5173\u7cfb\uff0c\u7531\u4e8e acres \u5728\u8bad\u7ec3\u96c6\u4e2d\u7684\u51fa\u73b0\u9891\u7387\u66f4\u9ad8\uff0c\u76f4\u63a5\u91c7\u7528 acres \u5e76\u4e14\u4f7f\u7528 hect\u00e1reas \u9644\u8fd1\u7684\u6570\u5b57\u76f4\u63a5\u4fee\u9970 acres Possible fix: \u6dfb\u52a0\u5173\u4e8e hect\u00e1reas \u7684\u8bad\u7ec3\u6570\u636e Question 2.b \u73b0\u5728\u662f\u65f6\u5019\u63a2\u7d22\u60a8\u6240\u8bad\u7ec3\u7684\u6a21\u578b\u7684\u8f93\u51fa\u4e86\uff01\u95ee\u9898 1-i \u4e2d\u751f\u6210\u7684\u6a21\u578b\u7684\u6d4b\u8bd5\u96c6\u7ffb\u8bd1\u5e94\u8be5\u4f4d\u4e8eoutput /test_output.txt\u4e2d\u3002\u8bf7\u627e\u51fa\u4f60\u7684\u6a21\u578b\u4ea7\u751f\u7684\u4e24\u4e2a\u9519\u8bef\u793a\u4f8b\u3002\u4f60\u53d1\u73b0\u7684\u4e24\u4e2a\u4f8b\u5b50\u5e94\u8be5\u662f\u4e0d\u540c\u7684\u9519\u8bef\u7c7b\u578b\uff0c\u5e76\u4e14\u4e0e\u524d\u4e00\u4e2a\u95ee\u9898\u4e2d\u63d0\u4f9b\u7684\u4f8b\u5b50\u4e0d\u540c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u4f8b\u5b50\uff0c\u4f60\u5e94\u8be5\uff1a \u5199\u4e0b\u897f\u73ed\u7259\u8bed\u539f\u6587\u53e5\u5b50\u3002\u6e90\u8bed\u53e5\u5728 en_es_data/test.es \u4e2d \u5199\u4e0b\u53c2\u8003\u8bd1\u6587\uff0c\u53c2\u8003\u8bd1\u6587\u5728en_es_data/test.en\u4e2d \u5199\u4e0bNMT\u6a21\u578b\u7684\u82f1\u6587\u7ffb\u8bd1\uff0c\u6a21\u578b\u7ffb\u8bd1\u7684\u53e5\u5b50\u4f4d\u4e8eoutput /test_output .txt\u4e2d \u8bc6\u522bNMT\u7ffb\u8bd1\u4e2d\u7684\u9519\u8bef \u63d0\u4f9b\u6a21\u578b\u53ef\u80fd\u51fa\u9519\u7684\u539f\u56e0(\u7531\u4e8e\u7279\u5b9a\u7684\u8bed\u8a00\u6784\u9020\u6216\u7279\u5b9a\u7684\u6a21\u578b\u9650\u5236) \u63cf\u8ff0\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u53d8NMT\u7cfb\u7edf\uff0c\u4ee5\u4fee\u590d\u89c2\u5bdf\u5230\u7684\u9519\u8bef Answer 2.b Source Sentence: El 5 de noviembre de 1990 Reference Translation: On November 5 th , 1990 NMT Translation: On five of November 1990 Error: five Reason: \u6a21\u578b\u9650\u5236\uff0c\u6a21\u578b\u6ca1\u6709\u6570\u636e\u96c6\u4e2d\u5145\u5206\u5b66\u4e60\u5230\u65e5\u671f\u683c\u5f0f\u7684\u8f6c\u6362 Possible Fix: \u589e\u52a0\u66f4\u591a\u5173\u4e8e\u897f\u73ed\u7259\u8bed\u4e0e\u82f1\u8bed\u4e4b\u95f4\u7684\u65e5\u671f\u683c\u5f0f\u8f6c\u6362\u7684\u6570\u636e\u6837\u672c Source Sentence: Y mis amigos hondureos me pidieron que dijera: \"Gracias TED\". Reference Translation: And my friends from Honduras asked me to say thank you, TED. NMT Translation: My friends were asked to say, \"Thank you.\" Error : \u8bf4\u8bdd\u7684\u5bf9\u8c61\u9519\u8bef\uff0c\u8bf4\u8bdd\u7684\u4eba\u662f\u6211\u800c\u4e0d\u662f\u6211\u7684\u670b\u53cb Reason: \u53e5\u6cd5\u7ed3\u6784\u6709\u8bef\u5e76\u4e14\u6709\u7f3a\u8bd1\u73b0\u8c61 Possible Fix: \u5c1d\u8bd5\u4e3a\u6a21\u578b\u7684\u6dfb\u52a0\u66f4\u6709\u6548\u7684\u5bf9\u9f50\u65b9\u5f0f\uff0c\u5982\u4f18\u5316\u6ce8\u610f\u529b\u6a21\u578b Question 2.c BLEU\u8bc4\u5206\u662fNMT\u7cfb\u7edf\u4e2d\u6700\u5e38\u7528\u7684\u81ea\u52a8\u8bc4\u4ef7\u6307\u6807\u3002\u5b83\u901a\u5e38\u5728\u6574\u4e2a\u6d4b\u8bd5\u96c6\u4e2d\u8ba1\u7b97\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u5c06\u8003\u8651\u4e3a\u5355\u4e2a\u793a\u4f8b\u5b9a\u4e49\u7684BLEU\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u6e90\u53e5 \\(s\\) \uff0c\u4e00\u7ec4 \\(k\\) \u4e2a\u53c2\u8003\u8bd1\u6587 \\(\\mathbf{r}_{1}, \\dots, \\mathbf{r}_{k}\\) \u548c\u4e00\u4e2a\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u3002 \u4e3a\u4e86\u8ba1\u7b97 \\(\\boldsymbol{c}\\) \u7684BLEU\u5206\u6570\uff0c\u6211\u4eec\u9996\u5148\u4e3a \\(\\boldsymbol{c}\\) \u8ba1\u7b97\u4fee\u6539\u540e\u7684 n-gram \u7cbe\u5ea6 \\(p_{n}\\) \uff0c\u5bf9\u4e8e \\(n = 1,2,3,4\\) : \\[ p_{n}=\\frac{\\sum_{\\text{ngram} \\in c} \\min \\left(\\max _{i=1, \\ldots, k} \\operatorname{Count}_{r_{i}}(\\text { ngram }), \\text {Count}_c \\text{(ngram)}\\right)}{\\sum_{\\text{ngram} \\in c} \\text {Count}_c \\text{(ngram)}} \\] \u8fd9\u91cc\uff0c\u5bf9\u4e8e\u51fa\u73b0\u5728\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u4e2d\u7684\u6bcf\u4e2a n-gram \uff0c\u6211\u4eec\u8ba1\u7b97\u5b83\u5728\u4efb\u4f55\u4e00\u4e2a\u53c2\u8003\u8bd1\u6587\u4e2d\u51fa\u73b0\u7684\u6700\u5927\u6b21\u6570\uff0c\u5e76\u4ee5\u5b83\u51fa\u73b0\u5728 \\(\\boldsymbol{c}\\) \u4e2d\u7684\u6b21\u6570\u4e3a\u4e0a\u9650(\u8fd9\u662f\u5206\u5b50)\uff0c\u518d\u9664\u4ee5 \\(\\boldsymbol{c}\\) \u7684 n-gram (\u5206\u6bcd) \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8ba1\u7b97\u7b80\u6d01\u4ee3\u4ef7 \\(\\text{brevity penalty BP}\\) \u3002\u4ee4 \\(c\\) \u4f5c\u4e3a \\(\\boldsymbol{c}\\) \u7684\u957f\u5ea6\uff0c\u8ba9 \\(r^*\\) \u4f5c\u4e3a\u6700\u63a5\u8fd1 \\(\\boldsymbol{c}\\) \u7684\u53c2\u8003\u7ffb\u8bd1\u7684\u957f\u5ea6(\u5728\u4e24\u4e2a\u76f8\u7b49\u63a5\u8fd1\u7684\u53c2\u8003\u7ffb\u8bd1\u957f\u5ea6\u7684\u60c5\u51b5\u4e0b\uff0c\u9009\u62e9\u8f83\u77ed\u7684\u53c2\u8003\u7ffb\u8bd1\u7684\u957f\u5ea6\u4f5c\u4e3a \\(r^*\\) ) \\[ B P=\\left\\{\\begin{array}{ll}{1} & {\\text { if } c \\geq r^{*}} \\\\ {\\exp \\left(1-\\frac{r^{*}}{c}\\right)} & {\\text { otherwise }}\\end{array}\\right. \\] \u6700\u540e\uff0c\u5019\u9009\u7ffb\u8bd1 \\(\\boldsymbol{c}\\) \u5173\u4e8e \\(\\mathbf{r}_{1}, \\dots, \\mathbf{r}_{k}\\) \u7684BLEU\u5206\u6570\u4e3a\uff1a \\[ B L E U=B P \\times \\exp \\left(\\sum_{n=1}^{4} \\lambda_{n} \\log p_{n}\\right) \\] \u5176\u4e2d\uff0c \\(\\lambda_{1}, \\lambda_{2}, \\lambda_{3}, \\lambda_{4}\\) \u662f\u603b\u548c\u4e3a1\u7684\u6743\u91cd Question 2.c.i \u8bf7\u8003\u8651\u8fd9\u4e2a\u4f8b\u5b50\uff1a \u5206\u522b\u8ba1\u7b97 \\(c_1, c_2\\) \u7684BLEU\u5206\u6570\u3002\u4ee4 \\(\\lambda_{i}=0.5 \\text { for } i \\in\\{1,2\\}, \\lambda_{i}=0 \\text { for } i \\in\\{3,4\\}\\) \u3002\u5f53\u8ba1\u7b97BLEU\u5206\u6570\u65f6\uff0c\u663e\u793a\u4f60\u7684\u8ba1\u7b97\u8fc7\u7a0b(\u5c55\u793a \\(p_1, p_2, c, r^{*}, BP\\) \u7684\u8ba1\u7b97\u503c)\u3002 \u6839\u636eBLEU\u8bc4\u5206\uff0c\u8fd9\u4e24\u79cdNMT\u7ffb\u8bd1\u4e2d\u54ea\u4e00\u79cd\u88ab\u8ba4\u4e3a\u662f\u66f4\u597d\u7684\u7ffb\u8bd1?\u4f60\u540c\u610f\u8fd9\u662f\u66f4\u597d\u7684\u7ffb\u8bd1\u5417\uff1f Answer 2.c.i \\(c_1\\) \\[ \\begin{array}{l} {p_1} &= \\frac{0+1+1+1+0}{5} = 0.6 \\\\ {p_2} &= \\frac{0+1+1+0}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 4 \\\\ BP &= 1 \\\\ BLEU_{{c_1}} &= 1 * \\exp(0.5 * \\log(0.6) + 0.5 * \\log(0.5)) = 0.5477 \\end{array} \\] \\(c_2\\) \\[ \\begin{array}{l} {p_1} &= \\frac{1+1+0+1+1}{5} = 0.8 \\\\ {p_2} &= \\frac{1+0+0+1}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 4 \\\\ BP &= 1 \\\\ BLEU_{{c_1}} &= 1 * \\exp(0.5 * \\log(0.8) + 0.5 * \\log(0.5)) = 0.632 \\end{array} \\] \u6839\u636e BLEU \u5206\u6570\uff0c \\(c_2\\) \u662f\u5f97\u5206\u66f4\u9ad8\u7684\u7ffb\u8bd1\uff0c\u4f46\u6211\u8ba4\u4e3a \\(c_1\\) \u7684\u7ffb\u8bd1\u66f4\u52a0\u597d Question 2.c.ii \u6211\u4eec\u7684\u786c\u76d8\u574f\u4e86\uff0c\u6211\u4eec\u5931\u53bb\u4e86\u53c2\u8003\u7ffb\u8bd1 \\(r_2\\) \u3002\u8bf7\u91cd\u65b0\u8ba1\u7b97 \\(c_1\\) \u548c \\(c_2\\) \u7684BLEU\u5206\u6570\uff0c\u8fd9\u6b21\u53ea\u9488\u5bf9 \\(r_1\\) \u3002\u4e24\u4e2aNMT\u5206\u4e00\u4e2d\uff0c\u54ea\u4e00\u4e2a\u73b0\u5728\u83b7\u5f97\u4e86\u66f4\u9ad8\u7684BLEU\u5206\u6570\uff1f\u4f60\u540c\u610f\u8fd9\u662f\u66f4\u597d\u7684\u7ffb\u8bd1\u5417\uff1f Answer 2.c.ii \\(c_1\\) \\[ \\begin{array}{l} {p_1} &= \\frac{0+1+1+1+0}{5} = 0.6 \\\\ {p_2} &= \\frac{0+1+1+0}{4} = 0.5 \\\\ c &= 5 \\\\ r^* &= 6 \\\\ BP &= \\exp(1 - \\frac{6}{5}) = 0.8187 \\\\ BLEU_{{c_1}} &= 0.8187 * \\exp(0.5 * \\log(0.6) + 0.5 * \\log(0.5)) = 0.4484 \\end{array} \\] \\(c_2\\) \\[ \\begin{array}{l} {p_1} &= \\frac{1+1+0+0+0}{5} = 0.4 \\\\ {p_2} &= \\frac{1+0+0+0}{4} = 0.25 \\\\ c &= 5 \\\\ r^* &= 6 \\\\ BP &= \\exp(1 - \\frac{6}{5}) = 0.8187 \\\\ BLEU_{{c_1}} &= 0.8187 * \\exp(0.5 * \\log(0.4) + 0.5 * \\log(0.25)) = 0.2589 \\end{array} \\] \u6839\u636e BLEU \u5206\u6570\uff0c \\(c_1\\) \u662f\u5f97\u5206\u66f4\u9ad8\u7684\u7ffb\u8bd1\uff0c\u5e76\u4e14\u6211\u8ba4\u4e3a\u8fd9\u662f\u5bf9\u7684 Question 2.c.iii \u7531\u4e8e\u6570\u636e\u53ef\u7528\u6027\uff0cNMT\u7cfb\u7edf\u901a\u5e38\u53ea\u6839\u636e\u4e00\u4e2a\u53c2\u8003\u7ffb\u8bd1\u8fdb\u884c\u8bc4\u4f30\u3002\u8bf7\u89e3\u91ca(\u7528\u51e0\u53e5\u8bdd)\u4e3a\u4ec0\u4e48\u8fd9\u53ef\u80fd\u6709\u95ee\u9898\uff1f Answer 2.c.iii \u5982\u679c\u6211\u4eec\u4f7f\u7528\u5355\u4e00\u53c2\u8003\u7ffb\u8bd1\uff0c\u5b83\u589e\u52a0\u4e86\u597d\u7ffb\u8bd1\u7531\u4e8e\u4e0e\u5355\u4e00\u53c2\u8003\u7ffb\u8bd1\u6709\u8f83\u4f4e\u7684 n-gram overlap \uff0c\u800c\u83b7\u5f97\u8f83\u5dee\u7684BUEU\u5206\u6570\u7684\u53ef\u80fd\u6027\u3002\u4f8b\u5982\u4e0a\u4f8b\u4e2d\uff0c\u5982\u679c\u5220\u53bb\u7684\u53c2\u8003\u7ffb\u8bd1\u662f \\(r_1\\) \uff0c\u90a3\u4e48\u5c06\u4f7f\u5f97 \\(c_1\\) \u7684BLEU\u5206\u6570\u53d8\u4f4e\u3002 \u5982\u679c\u6211\u4eec\u589e\u52a0\u66f4\u591a\u7684\u53c2\u8003\u7ffb\u8bd1\uff0c\u5c31\u4f1a\u589e\u52a0\u4e00\u4e2a\u597d\u7ffb\u8bd1\u4e2d n-gram overlap \u7684\u51e0\u7387\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u4f7f\u597d\u7ffb\u8bd1\u83b7\u5f97\u76f8\u5bf9\u8f83\u9ad8\u7684BLEU\u5206\u6570\u3002 Question 2.c.iv \u5217\u4e3e\u4e86BLEU\u4f5c\u4e3a\u673a\u5668\u7ffb\u8bd1\u7684\u8bc4\u4ef7\u6307\u6807\uff0c\u76f8\u5bf9\u4e8e\u4eba\u5de5\u8bc4\u4ef7\u7684\u4e24\u4e2a\u4f18\u70b9\u548c\u4e24\u4e2a\u7f3a\u70b9\u3002 Answer 2.c.iv \u4f18\u70b9 \u81ea\u52a8\u8bc4\u4ef7\uff0c\u6bd4\u4eba\u5de5\u8bc4\u4ef7\u66f4\u5feb\uff0c\u65b9\u4fbf\uff0c\u5feb\u901f BLEU\u7684\u4f7f\u7528\u666e\u53ca\u7387\u8f83\u9ad8\uff0c\u65b9\u4fbf\u6a21\u578b\u4e4b\u95f4\u7684\u6548\u679c\u5bf9\u6bd4 \u7f3a\u70b9 \u7ed3\u679c\u5e76\u4e0d\u7a33\u5b9a\uff0c\u7531\u4e8e\u6838\u5fc3\u601d\u60f3\u662f n-gram overlap\uff0c\u6240\u4ee5\u5982\u679c\u53c2\u8003\u7ffb\u8bd1\u4e0d\u591f\u4e30\u5bcc\uff0c\u4f1a\u5bfc\u81f4\u51fa\u73b0\u8f83\u597d\u7ffb\u8bd1\u83b7\u5f97\u8f83\u5deeBLEU\u5206\u6570\u7684\u60c5\u51b5 \u4e0d\u8003\u8651\u8bed\u4e49\u4e0e\u53e5\u6cd5 \u4e0d\u8003\u8651\u8bcd\u6cd5\uff0c\u4f8b\u5982\u4e0a\u4f8b\u4e2d\u7684make\u548cmakes \u672a\u5bf9\u540c\u4e49\u8bcd\u6216\u76f8\u4f3c\u8868\u8fbe\u8fdb\u884c\u4f18\u5316","title":"2. Analyzing NMT Systems"},{"location":"CS224n-2019-Assignment/#reference","text":"\u4eceSVD\u5230PCA\u2014\u2014\u5947\u5999\u7684\u6570\u5b66\u6e38\u620f alongstar518 NLP \u4e2d\u8bc4\u4ef7\u6587\u672c\u8f93\u51fa\u90fd\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\u4e3a\u4ec0\u4e48\u8981\u5c0f\u5fc3\u4f7f\u7528 BLEU\uff1f","title":"Reference"},{"location":"CS224n-2019-Summary/","text":"CS224n-2019-Summary \u00b6 \u672c\u6587\u5c06\u7ed3\u5408\u8bfe\u7a0b\u63d0\u4f9b\u7684\u6750\u6599\u3001\u4f5c\u8005\u81ea\u5df1\u8bb0\u5f55\u7684\u4e2d\u6587\u7b14\u8bb0\u4ee5\u53ca Reference \u4e2d\u4ed6\u4eba\u7b14\u8bb0\uff0c\u5bf9\u8bfe\u7a0b\u7684\u91cd\u70b9\u77e5\u8bc6\u8fdb\u884c\u68b3\u7406\u4e0e\u603b\u7ed3 Summary \u00b6 Lecture 01 Introduction and Word Vectors \u00b6 \u672c\u8282\u8bfe\u4ecb\u7ecd\u4e86NLP\u7814\u7a76\u7684 \u4eba\u7c7b\u8bed\u8a00\u5177\u6709\u4fe1\u606f\u529f\u80fd\u4e0e\u793e\u4f1a\u529f\u80fd \u4f20\u7edf\u7684 WordNet \u4ee5\u53ca one-hot \u65b9\u6cd5\u5728\u8bcd\u4e49\u8868\u8fbe\u4efb\u52a1\u4e2d\u5b58\u5728\u7684\u95ee\u9898 Word2vec \u6846\u67b6\u7684\u601d\u60f3\u4e0e\u5177\u4f53\u601d\u8def Reference \u00b6 \u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"CS224n-2019-Summary"},{"location":"CS224n-2019-Summary/#cs224n-2019-summary","text":"\u672c\u6587\u5c06\u7ed3\u5408\u8bfe\u7a0b\u63d0\u4f9b\u7684\u6750\u6599\u3001\u4f5c\u8005\u81ea\u5df1\u8bb0\u5f55\u7684\u4e2d\u6587\u7b14\u8bb0\u4ee5\u53ca Reference \u4e2d\u4ed6\u4eba\u7b14\u8bb0\uff0c\u5bf9\u8bfe\u7a0b\u7684\u91cd\u70b9\u77e5\u8bc6\u8fdb\u884c\u68b3\u7406\u4e0e\u603b\u7ed3","title":"CS224n-2019-Summary"},{"location":"CS224n-2019-Summary/#summary","text":"","title":"Summary"},{"location":"CS224n-2019-Summary/#lecture-01-introduction-and-word-vectors","text":"\u672c\u8282\u8bfe\u4ecb\u7ecd\u4e86NLP\u7814\u7a76\u7684 \u4eba\u7c7b\u8bed\u8a00\u5177\u6709\u4fe1\u606f\u529f\u80fd\u4e0e\u793e\u4f1a\u529f\u80fd \u4f20\u7edf\u7684 WordNet \u4ee5\u53ca one-hot \u65b9\u6cd5\u5728\u8bcd\u4e49\u8868\u8fbe\u4efb\u52a1\u4e2d\u5b58\u5728\u7684\u95ee\u9898 Word2vec \u6846\u67b6\u7684\u601d\u60f3\u4e0e\u5177\u4f53\u601d\u8def","title":"Lecture 01 Introduction and Word Vectors"},{"location":"CS224n-2019-Summary/#reference","text":"\u4ee5\u4e0b\u662f\u5b66\u4e60\u672c\u8bfe\u7a0b\u65f6\u7684\u53ef\u7528\u53c2\u8003\u4e66\u7c4d\uff1a \u300a\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b \u300a\u795e\u7ecf\u7f51\u7edc\u4e0e\u6df1\u5ea6\u5b66\u4e60\u300b \u4ee5\u4e0b\u662f\u6574\u7406\u7b14\u8bb0\u7684\u8fc7\u7a0b\u4e2d\u53c2\u8003\u7684\u535a\u5ba2\uff1a \u65af\u5766\u798fCS224N\u6df1\u5ea6\u5b66\u4e60\u81ea\u7136\u8bed\u8a00\u5904\u74062019\u51ac\u5b66\u4e60\u7b14\u8bb0\u76ee\u5f55 (\u8bfe\u4ef6\u6838\u5fc3\u5185\u5bb9\u7684\u63d0\u70bc\uff0c\u5e76\u5305\u542b\u4f5c\u8005\u7684\u89c1\u89e3\u4e0e\u5efa\u8bae) \u65af\u5766\u798f\u5927\u5b66 CS224n\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e0e\u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0\u6c47\u603b \u8fd9\u662f\u9488\u5bf9note\u90e8\u5206\u7684\u7ffb\u8bd1","title":"Reference"},{"location":"Coding%20Knowledge/","text":"\u91cd\u70b9\u5185\u5bb9 \u00b6 \u57fa\u7840\u7b97\u6cd5 \u00b6 \u9012\u5f52 \u00b6 \u6c49\u8bfa\u5854 \u00b6 # include <iostream> using namespace std ; /** - \u6253\u5370 Hanoi\u5854\u79fb\u52a8\u8fc7\u7a0b - @param n \u5854\u7684\u5c42\u6570 - @param from \u5854\u7684\u5f00\u59cb\u4f4d\u7f6e - @param to \u5854\u7684\u7ed3\u675f\u4f4d\u7f6e - @param help \u4e2d\u4ecb */ void printHanoiTower ( const int n , const string & from , const string & to , const string & help ) { if ( n == 1 ) // \u9012\u5f52\u7ec8\u6b62 cout << \"move \" << n << \" from \" << from << \" to \" << to << endl ; else { printHanoiTower ( n - 1 , from , help , to ); // \u79fb\u52a8\u4e0a\u9762\u7684 n - 1 \u5c42 cout << \"move \" << n << \" from \" << from << \" to \" << to << endl ; // \u79fb\u52a8\u6700\u4e0b\u9762\u4e00\u5c42 printHanoiTower ( n - 1 , help , to , from ); // \u5c06\u4e0a\u9762\u7684 n - 1 \u5c42\u79fb\u56de } } int main () { int n ; cin >> n ; string from = \"A\" ; string to = \"B\" ; string help = \"C\" ; printHanoiTower ( n , from , to , help ); return 0 ; } \u6392\u5e8f \u00b6 \u5feb\u6392 \u00b6 // \u5feb\u901f\u6392\u5e8f\u5404\u7c7b\u5b9e\u73b0 // \u5feb\u901f\u6392\u5e8f.\u4e09\u6307\u9488\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f \u4e09\u6307\u9488\u5206\u533a\u6cd5 // \u7c7b\u6bd4\u5355\u5411\u626b\u63cf\u6cd5\uff0c\u589e\u52a0\u7684\u662f\u5bf9\u5c0f\u4e8e\u3001\u7b49\u4e8e\u4e24\u79cd\u60c5\u51b5\u7684\u533a\u5206 #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int pivot = nums [ low ]; int lt = low ; // less than \u6307\u5411\u9996\u4e2a\u4e0d\u5c0f\u4e8e pivot \u7684\u5143\u7d20 int i = low + 1 ; // pointer int gt = high ; // greater than \u6307\u5411\u6700\u540e\u4e00\u4e2a\u4e0d\u5927\u4e8e pivot \u7684\u5143\u7d20 while ( i <= gt ) { if ( nums [ i ] < pivot ) swap ( nums [ i ++ ], nums [ lt ++ ]); else if ( nums [ i ] > pivot ) swap ( nums [ i ], nums [ gt -- ]); else i ++ ; } // lt \u5230 gt \u4e4b\u95f4\u7684\u6570\u90fd\u7b49\u4e8e pivot\uff0c\u4e0d\u5fc5\u518d\u6392\u5e8f quickSort ( nums , low , lt - 1 ); quickSort ( nums , gt + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; } // \u5feb\u901f\u6392\u5e8f.\u5355\u5411\u626b\u63cf\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f \u4e00\u904d\u5355\u5411\u626b\u63cf\u6cd5 #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5c06\u6570\u7ec4\u6309 pivot \u5207\u5206 * @param nums \u88ab\u5207\u5206\u6570\u7ec4\uff0cnums[high]\u4e3apivot * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 * @return pivot \u7d22\u5f15 */ int partition ( vector < int > & nums , int low , int high ) { int pivot = nums [ high ]; // \u4ee5\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e3a pivot int i = low - 1 ; // i \u53ca\u5176\u524d\u9762\u7684\u5143\u7d20\u5c0f\u4e8e\u7b49\u4e8e pivot for ( int j = low ; j < high ; j ++ ) { // \u6ce8\u610f\u5728\u5faa\u73af\u8fc7\u7a0b\u4e2d\uff0cpivot \u4e0d\u5e94\u88ab\u4ea4\u6362 if ( nums [ j ] <= pivot ) swap ( nums [ ++ i ], nums [ j ]); } swap ( nums [ high ], nums [ i + 1 ]); // \u4ea4\u6362 pivot \u5230\u5408\u9002\u4f4d\u7f6e return i + 1 ; } /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int par = partition ( nums , low , high ); quickSort ( nums , low , par - 1 ); quickSort ( nums , par + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; } // \u5feb\u901f\u6392\u5e8f.\u53cc\u5411\u626b\u63cf\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5c06\u6570\u7ec4\u6309 pivot \u5207\u5206 * @param nums \u88ab\u5207\u5206\u6570\u7ec4\uff0cnums[high]\u4e3apivot * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 * @return pivot \u7d22\u5f15 */ int partition ( vector < int > & nums , int low , int high ) { int pivot = nums [ low ]; int left = low + 1 ; int right = high ; while ( left <= right ) { // \u5fc5\u987b\u53d6\u7b49 while ( left <= right && nums [ left ] <= pivot ) left ++ ; // left \u6307\u5411\u9996\u4e2a\u5927\u4e8e pivot \u7684\u5143\u7d20 while ( left <= right && nums [ right ] > pivot ) right -- ; // right \u6307\u5411\u6700\u540e\u4e00\u4e2a\u5c0f\u4e8e\u7b49\u4e8e pivot \u7684\u5143\u7d20 if ( left < right ) // \u5426\u5219\u5143\u7d20\u4e0e\u81ea\u8eab\u4ea4\u6362\u6ca1\u6709\u610f\u4e49 swap ( nums [ left ], nums [ right ]); } swap ( nums [ right ], nums [ low ]); // right \u6307\u5411\u6700\u540e\u4e00\u4e2a \u5c0f\u4e8e\u7b49\u4e8e pivot \u7684\u5143\u7d20 return right ; } /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int par = partition ( nums , low , high ); quickSort ( nums , low , par - 1 ); quickSort ( nums , par + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; } \u5806\u6392 \u00b6 const int maxn = 100 ; // heap \u4e3a\u5806\uff0cheap[1] \u4e3a\u6839\u7ed3\u70b9\uff0cn \u4e3a\u5143\u7d20\u4e2a\u6570 int heap [ maxn ], n = 10 ; // \u5bf9 heap \u6570\u7ec4\u5728 [low, high] \u8303\u56f4\u8fdb\u884c\u5411\u4e0b\u8c03\u6574 // \u5176\u4e2d low \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\u7684\u6570\u7ec4\u4e0b\u6807\uff0chigh \u4e00\u822c\u4e3a\u5806\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u6570\u7ec4\u4e0b\u6807 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) void downAdjust ( int low , int high ) { int i = low , j = i * 2 ; // i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a\u5176\u5de6\u5b69\u5b50 while ( j <= high ) { // \u5b58\u5728\u5b69\u5b50\u7ed3\u70b9 // \u5982\u679c\u53f3\u5b69\u5b50\u5b58\u5728\uff0c\u4e14\u53f3\u5b69\u5b50\u7684\u503c\u5927\u4e8e\u5de6\u5b69\u5b50 if ( j + 1 <= high && heap [ j + 1 ] > heap [ j ]) j ++ ; // \u8ba9 j \u5b58\u50a8\u53f3\u5b69\u5b50\u4e0b\u6807 // \u5982\u679c\u5b69\u5b50\u4e2d\u7684\u6700\u5927\u6743\u503c\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u5927 if ( heap [ j ] > heap [ i ]) { swap ( heap [ j ], heap [ i ]); // \u4ea4\u6362\u6700\u5927\u6743\u503c\u7684\u5b69\u5b50\u4e0e\u6b32\u8c03\u6574\u7ed3\u70b9i i = j ; // \u4fdd\u6301 i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a i \u7684\u5de6\u5b69\u5b50 j = i * 2 ; } else break ; // \u5b69\u5b50\u7684\u6743\u503c\u5747\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u5c0f\uff0c\u8c03\u6574\u7ed3\u675f } } // \u5efa\u5806\uff1a\u65f6\u95f4\u590d\u6742\u5ea6O(n)\uff0c\u8bc1\u660e\u53ef\u53c2\u8003\u300a\u7b97\u6cd5\u5bfc\u8bba\u300b void createHeap () { for ( int i = n / 2 ; i >= 1 ; i -- ) { downAdjust ( i , n ); } } // \u5220\u9664\u5806\u9876\u5143\u7d20\uff1a\u6bcf\u6b21\u5220\u9664\u5806\u4e2d\u5143\u7d20\u53ea\u80fd\u5220\u9664\u5f53\u524d\u5806\u9876 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) void deleteTop () { heap [ 1 ] = heap [ n -- ]; // \u7528\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u8986\u76d6\u5806\u9876\u5143\u7d20\uff0c\u5e76\u8ba9\u5143\u7d20\u4e2a\u6570\u51cf1 downAdjust ( 1 , n ); // \u5411\u4e0b\u8c03\u6574\u5806\u9876\u5143\u7d20 } // \u5411\u4e0a\u8c03\u6574\uff1a\u7528\u4e8e\u6dfb\u52a0\u5143\u7d20\u5230\u5806\u65f6\uff0c\u5143\u7d20\u6dfb\u52a0\u5230\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u540e\u8fdb\u884c\u8c03\u6574 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) // \u5bf9 heap \u6570\u7ec4\u5728 [low, high] \u8303\u56f4\u8fdb\u884c\u5411\u4e0a\u8c03\u6574 // \u5176\u4e2d low \u4e00\u822c\u8bbe\u7f6e\u4e3a1\uff0chigh \u8868\u793a\u6b32\u8c03\u6574\u7ed3\u70b9\u7684\u6570\u7ec4\u4e0b\u6807 void upAdjust ( int low , int high ) { int i = high , j = i / 2 ; // i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a\u5176\u7236\u4eb2 while ( j >= low ) { // \u7236\u4eb2\u5728 [low, high] \u8303\u56f4\u5185 if ( heap [ j ] < heap [ i ]) { swap ( heap [ j ], heap [ i ]); // \u4ea4\u6362\u7236\u4eb2\u548c\u6b32\u8c03\u6574\u7ed3\u70b9 i = j ; // \u4fdd\u6301 i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a i \u7684\u7236\u4eb2 j = i / 2 ; } else break ; // \u7236\u4eb2\u6743\u503c\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u7684\u6743\u503c\u5927\uff0c\u8c03\u6574\u7ed3\u675f } } // \u6dfb\u52a0\u5143\u7d20x void insert ( int x ) { heap [ ++ n ] = x ; // \u8ba9\u5143\u7d20\u4e2a\u6570\u52a01\uff0c\u7136\u540e\u5c06\u6570\u7ec4\u672b\u4f4d\u8d4b\u503c\u4e3ax upAdjust ( 1 , n ); // \u5411\u4e0a\u8c03\u6574\u65b0\u52a0\u5165\u7684\u7ed3\u70b9 } // \u5806\u6392\u5e8f void heapSort () { createHeap (); // \u5efa\u5806 for ( int i = n ; i > 1 ; i -- ) { // \u5012\u7740\u679a\u4e3e\uff0c\u76f4\u81f3\u5806\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20 swap ( heap [ i ], heap [ 1 ]); // \u4ea4\u6362 heap[i] \u4e0e\u5806\u9876 downAdjust ( 1 , i - 1 ); // \u8c03\u6574\u5806\u9876 } } \u62d3\u6251\u6392\u5e8f \u00b6 // LeetCode_210 https://leetcode.com/problems/course-schedule-ii/ class Solution { public : vector < int > findOrder ( int numCourses , vector < pair < int , int >>& prerequisites ) { vector < vector < int >> graph ( numCourses , vector < int > ()); vector < int > inDegree ( numCourses ); // \u5165\u5ea6\u4e3a 0 \u65f6\u9876\u70b9\u53ef\u4ee5\u5220\u9664 vector < int > res ; queue < int > q ; // \u5b58\u50a8\u5165\u5ea6\u4e3a 0 \u7684\u9876\u70b9 int cnt = 0 ; // \u653e\u5165 res \u7684\u5143\u7d20\u4e2a\u6570 for ( auto & p : prerequisites ) { graph [ p . second ]. push_back ( p . first ); inDegree [ p . first ] ++ ; } for ( int i = 0 ; i < numCourses ; i ++ ) if ( inDegree [ i ] == 0 ) q . push ( i ); while ( ! q . empty ()){ int cur = q . front (); q . pop (); res . push_back ( cur ); cnt ++ ; for ( auto j : graph [ cur ]){ inDegree [ j ] -- ; if ( inDegree [ j ] == 0 ) q . push ( j ); } } if ( cnt < numCourses ) { return vector < int > (); } return res ; } }; \u67e5\u627e \u00b6 \u4e8c\u5206\u67e5\u627e \u00b6 // \u4e8c\u5206\u641c\u7d22\u3001lower_bound\u3001upper_bound \u7684\u5b9e\u73b0 // lower_bound.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217\uff0cx\u4e3a\u6b32\u67e5\u8be2\u7684\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8ex\u7684\u5143\u7d20\u7684\u4f4d\u7f6e // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right] = [0, n] int lower_bound ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left < right ) { // left==right \u610f\u5473\u7740\u627e\u5230\u552f\u4e00\u4f4d\u7f6e mid = left + ( right - left ) / 2 ; if ( a [ mid ] >= x ) right = mid ; else left = mid + 1 ; } return left ; } // upper_bound.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217\uff0cx\u4e3a\u6b32\u67e5\u8be2\u7684\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8ex\u7684\u5143\u7d20\u7684\u4f4d\u7f6e // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right] = [0, n] int upper_bound ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left < right ) { // left==right \u610f\u5473\u7740\u627e\u5230\u552f\u4e00\u4f4d\u7f6e mid = left + ( right - left ) / 2 ; if ( a [ mid ] > x ) right = mid ; else left = mid + 1 ; } return left ; } // \u4e8c\u5206\u641c\u7d22.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217 // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right]\uff0c\u4f20\u5165\u521d\u503c\u662f[0, n - 1] int binarySearch ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left <= right ) { // \u5982\u679c\u5927\u4e8e\uff0c\u65e0\u6cd5\u5f62\u6210\u95ed\u533a\u95f4 mid = left + ( right - left ) / 2 ; // \u76f8\u5bf9\u5730\u907f\u514d\u6ea2\u51fa if ( a [ mid ] == x ) return mid ; // \u627e\u5230x\uff0c\u8fd4\u56de\u4e0b\u6807 else if ( a [ mid ] > x ) right = mid - 1 ; // \u5f80\u5de6\u5b50\u533a\u95f4\u67e5\u627e else left = mid + 1 ; // \u5f80\u53f3\u5b50\u533a\u95f4\u67e5\u627e } return -1 ; // \u67e5\u627e\u5931\u8d25 } \u5e76\u67e5\u96c6 \u00b6 // \u5e76\u67e5\u96c6\u6a21\u677f\uff1a\u521d\u59cb\u5316\u3001\u67e5\u627e\u3001\u5408\u5e76\u3001\u8def\u5f84\u538b\u7f29 void init () { for ( int i = 0 ; i < n ; i ++ ) { father [ i ] = i ; // \u4ee4father[i]\u4e3a-1\u4e5f\u53ef } } // \u9012\u63a8\u67e5\u627e int findFather ( int x ) { while ( x != father [ x ]) { x = father [ x ]; } return x ; } // \u9012\u5f52\u67e5\u627e int findFather ( int x ) { if ( x == father [ x ]) return x ; // \u5982\u679c\u627e\u5230\u6839\u7ed3\u70b9\uff0c\u5219\u8fd4\u56de\u6839\u7ed3\u70b9\u7f16\u53f7x else return findFather ( father [ x ]); // \u5426\u5219\uff0c\u9012\u5f52\u5224\u65adx\u7684\u7236\u4eb2\u7ed3\u70b9\u662f\u5426\u662f\u6839\u7ed3\u70b9 } // \u5408\u5e76 void Union ( int a , int b ) { int fa = findFather ( a ); int fb = findFather ( b ); if ( fa != fb ) { father [ fa ] = fb ; } } // \u8def\u5f84\u538b\u7f29 \u8fed\u4ee3\u5b9e\u73b0 int findFather ( int x ) { // \u7531\u4e8ex\u5728\u4e0b\u9762\u7684while\u4e2d\u4f1a\u53d8\u6210\u6839\u7ed3\u70b9\uff0c\u56e0\u6b64\u5148\u628a\u539fx\u4fdd\u5b58 int cur = x ; while ( x != father [ x ]) x = father [ x ]; // x\u6b64\u65f6\u4e3a\u6839\u7ed3\u70b9\uff0c\u4e0b\u9762\u5c06\u8def\u5f84\u4e0a\u7684\u6240\u6709\u7ed3\u70b9\u7684father\u90fd\u6539\u6210\u6839\u7ed3\u70b9 while ( cur != father [ cur ]) { int z = cur ; // \u56e0\u4e3acur\u8981\u88abfather[cur]\u8986\u76d6\uff0c\u6240\u4ee5\u5148\u4fdd\u5b58 cur = father [ cur ]; // \u56de\u6eaf\u7236\u7ed3\u70b9 father [ z ] = x ; // \u5c06\u539f\u5148\u7684\u7ed3\u70b9\u7684\u7236\u4eb2\u6539\u4e3a\u6839\u7ed3\u70b9 } return x ; // \u8fd4\u56de\u6839\u7ed3\u70b9 } // \u8def\u5f84\u538b\u7f29 \u9012\u5f52\u5b9e\u73b0 int findFather ( int v ) { if ( v == father [ v ]) return v ; // \u627e\u5230\u6839\u7ed3\u70b9 father [ v ] = findFather ( father [ v ]); return father [ v ]; } \u4f4d\u8fd0\u7b97 \u00b6 \u5224\u65ad\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u662f\u4e0d\u662f\u7b49\u4e8e1 if(((1<<(i\u22121))&x)>0) \u5c061\u5de6\u79fbi-1\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5236\u9020\u4e86\u4e00\u4e2a\u53ea\u6709\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u5176\u4ed6\u4f4d\u4e0a\u90fd\u662f0\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u7136\u540e\u4e0ex\u505a\u4e0e\u8fd0\u7b97\uff0c\u5982\u679c\u7ed3\u679c>0\uff0c\u8bf4\u660ex\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u53cd\u4e4b\u5219\u662f0\u3002 \u5c06\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u66f4\u6539\u62101\u3002 x=x|(1<<(i\u22121)) \u628a\u4e00\u4e2a\u6570\u5b57\u4e8c\u8fdb\u5236\u4e0b\u6700\u9760\u53f3\u7684\u7b2c\u4e00\u4e2a1\u53bb\u6389 x=x&(x\u22121) \u5224\u65adn\u662f\u4e0d\u662f2\u7684\u6b21\u5e42 (n > 0 && ((n & (n - 1)) == 0) \u56e0\u4e3a2\u7684\u6b21\u5e42 \u4e8c\u8fdb\u5236\u4e0b\u53ea\u6709\u4e00\u4e2a1 \u6240\u4ee5 \u51cf\u4e00\u4ee5\u540e \u6700\u9ad8\u4f4d\u53d8\u4e3a0 \u540e\u9762\u7684\u90fd\u53d8\u4e3a1\uff0c &\u4e4b\u540e \u5c31\u53d8\u4e3a0\u4e86 \u6240\u4ee5\u672c\u9898\u4e2d i\u76841\u7684\u4e2a\u6570 \u7b49\u4e8e\u4ed6\u53bb\u6389\u6700\u4f4e\u4f4d\u76841\u4e4b\u540e\u7684i&(i-1)\u76841\u7684\u4e2a\u6570\u518d+1 \u5206\u6570\u8868\u793a \u00b6 // \u5206\u6570\u7684\u8868\u793a // \u5e38\u7528\u5047\u5206\u6570\u7684\u5f62\u5f0f\u8868\u793a // \u8bbe\u5206\u6bcd\u4e3a\u975e\u8d1f\u6570\uff1b\u5982\u679c\u5206\u6570\u4e3a\u8d1f\uff0c\u4ee4\u5206\u5b50\u4e3a\u8d1f\u5373\u53ef // \u5206\u5b50\u548c\u5206\u6bcd\u6ca1\u6709\u9664\u4e861\u4ee5\u5916\u7684\u516c\u7ea6\u6570\uff0c\u5373\u603b\u662f\u7ea6\u5206 struct Fraction { // \u5206\u6570 int up , down ; // \u5206\u5b50\uff0c\u5206\u6bcd } // \u5206\u6570\u5316\u7b80 // \u5982\u679c\u5206\u6bcd\u4e3a\u8d1f\u6570\uff0c\u5206\u5b50\u3001\u5206\u6bcd\u90fd\u53d6\u76f8\u53cd\u6570 // \u5982\u679c\u5206\u5b50\u4e3a0\uff0c\u4ee4\u5206\u6bcd\u4e3a1 // \u7ea6\u5206\uff1a\u6c42\u51fa\u5206\u5b50\u7edd\u5bf9\u503c\u4e0e\u5206\u6bcd\u7edd\u5bf9\u503c\u7684\u6700\u5927\u516c\u7ea6\u6570d\uff0c\u4ee4\u5206\u5b50\u5206\u6bcd\u540c\u65f6\u9664\u4ee5d Fraction reduction ( Fraction result ){ if ( result . down < 0 ){ result . down = - result . down ; result . up = - result . up ; } if ( result . up == 0 ) result . down = 1 ; else { int d = GCD ( abs ( result . up ), abs ( result . down )); result . up /= d ; result . down /= d ; } return result ; } // \u5206\u6570\u7684\u52a0\u6cd5 Fraction add ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . down + f2 . up * f1 . down ; result . down = f1 . down * f2 . down ; return reduction ( result ); } // \u5206\u6570\u7684\u51cf\u6cd5 Fraction minu ( Fraction f ){ f . up = - f . up ; return reduction ( f ); } Fraction minu ( Fraction f1 , Fraction f2 ){ return add ( f1 , minu ( f2 )); } // \u5206\u6570\u7684\u4e58\u6cd5 Fraction multi ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . up ; result . down = f1 . down * f2 . down ; return reduction ( result ); } // \u5206\u6570\u7684\u9664\u6cd5 Fraction divide ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . down ; result . down = f1 . down * f2 . up ; return reduction ( result ); } // \u8f93\u51fa\u5206\u6570\u524d\uff0c\u8fdb\u884c\u5316\u7b80\u3002 // \u5982\u679c\u5206\u6bcd\u4e3a1\uff0c\u5219\u8be5\u5206\u6570\u4e3a\u6574\u6570\uff0c\u76f4\u63a5\u8f93\u51fa\u5206\u5b50\u3002 // \u5982\u679c\u5206\u5b50\u7edd\u5bf9\u503c\u5927\u4e8e\u5206\u6bcd\uff0c\u5219\u8be5\u5206\u6570\u4e3a\u5047\u5206\u6570\uff0c\u5e94\u4ee5\u5e26\u5206\u6570\u7684\u5f62\u5f0f\u8f93\u51fa\u3002 // \u82e5\u4ee5\u4e0a\u5747\u4e0d\u6ee1\u8db3\uff0c\u5219\u5206\u6570\u662f\u771f\u5206\u6570\uff0c\u6309\u539f\u6837\u8f93\u51fa\u5373\u53ef\u3002 void showResult ( Fraction r ) { r = reduction ( r ); if ( r . down == 1 ) printf ( \"%lld\" , r . up ); // \u6574\u6570 else if ( abs ( r . up ) > r . down ) { // \u5047\u5206\u6570 printf ( \"%d %d/%d\" , r . up / r . down , abs ( r . up ) % r . down , r . down ); } else { printf ( \"%d/%d\" , r . up , r . down ); } } \u5b57\u7b26\u4e32 \u00b6 \u56de\u6587\u4e32 \u00b6 // \u56de\u6587\u4e32\u5224\u65ad.cpp #include <iostream> #include <cstring> const int maxn = 256 ; using namespace std ; bool judge ( char str []){ int len = strlen ( str ); // \u5b57\u7b26\u4e32\u957f\u5ea6 for ( int i = 0 ; i < len / 2 ; i ++ ) { // \u679a\u4e3e\u5b57\u7b26\u4e32\u524d\u4e00\u534a if ( str [ i ] != str [ len - i - 1 ]) return false ; } return true ; } int main (){ char str [ maxn ]; while ( cin >> str ) { // \u8f93\u5165\u5b57\u7b26\u4e32 bool flag = judge ( str ); // \u5224\u65ad\u5b57\u7b26\u4e32str\u662f\u5426\u662f\u56de\u6587\u4e32 if ( flag ) cout << \"YES\" << endl ; else cout << \"NO\" << endl ; } return 0 ; } \u6811\u7b97\u6cd5 \u00b6 \u54c8\u592b\u66fc\u6811 \u00b6 \u7ed9\u5b9an\u4e2a\u6743\u503c\u4f5c\u4e3an\u4e2a\u53f6\u5b50\u7ed3\u70b9\uff0c\u6784\u9020\u4e00\u68f5\u4e8c\u53c9\u6811\uff0c\u82e5\u8be5\u6811\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u8fbe\u5230\u6700\u5c0f\uff0c\u79f0\u8fd9\u6837\u7684\u4e8c\u53c9\u6811\u4e3a\u6700\u4f18\u4e8c\u53c9\u6811\uff0c\u4e5f\u79f0\u4e3a\u54c8\u592b\u66fc\u6811(Huffman Tree)\u3002\u54c8\u592b\u66fc\u6811\u662f\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u6700\u77ed\u7684\u6811\uff0c\u6743\u503c\u8f83\u5927\u7684\u7ed3\u70b9\u79bb\u6839\u8f83\u8fd1\u3002 \u8def\u5f84\u957f\u5ea6\uff1a\u4e24\u70b9\u8def\u5f84\u4e0a\u7684\u5206\u679d\u6570\u76ee\u79f0\u4f5c\u8def\u5f84\u957f\u5ea6\u3002 \u6811\u7684\u8def\u5f84\u957f\u5ea6\uff1a\u4ece\u6811\u6839\u5230\u6bcf\u4e2a\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e4b\u548c\u3002 \u7ed3\u70b9\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6\uff1a\u5728\u4e00\u68f5\u6811\u4e2d\uff0c\u5047\u8bbe\u5176\u7ed3\u70b9\u4e0a\u9644\u5e26\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u901a\u5e38\u628a\u8be5\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e0e\u8be5\u7ed3\u70b9\u4e0a\u7684\u6743\u503c /* \u9898\u76ee\u5927\u610f\uff1aFJ\u9700\u8981\u4fee\u8865\u7267\u573a\u7684\u56f4\u680f\uff0c\u4ed6\u9700\u8981 N \u5757\u957f\u5ea6\u4e3a Li \u7684\u6728\u5934\uff08N planks of woods\uff09\u3002\u5f00\u59cb\u65f6\uff0cFJ\u53ea\u6709\u4e00\u5757\u65e0\u9650\u957f\u7684\u6728\u677f\uff0c\u56e0\u6b64\u4ed6\u9700\u8981\u628a\u65e0\u9650\u957f\u7684\u6728\u677f\u952f\u6210 N \u5757\u957f\u5ea6 \u4e3a Li \u7684\u6728\u677f\uff0cFarmer Don\u63d0\u4f9bFJ\u952f\u5b50\uff0c\u4f46\u5fc5\u987b\u8981\u6536\u8d39\u7684\uff0c\u6536\u8d39\u7684\u6807\u51c6\u662f\u5bf9\u5e94\u6bcf\u6b21\u636e\u51fa\u6728\u5757\u7684\u957f\u5ea6\uff0c\u6bd4\u5982\u8bf4\u6d4b\u8bd5\u6570\u636e\u4e2d 5 8 8 \u4ed6\u5e0c\u671b\u5c06\u957f\u5ea6\u4e3a21\u7684\u6728\u677f\u5207\u6210\u957f\u5ea6\u4e3a8,5\u548c8\u7684\u6728\u677f 8 + 5 + 8 = 21\u3002\u7b2c\u4e00\u6b21\u5207\u5272\u5c06\u82b1\u8d3921\u7f8e\u5143\uff0c\u5e76\u4e14\u5e94\u8be5\u7528\u4e8e\u5c06\u677f\u5207\u5272\u621013\u548c8\u7247\u3002\u7b2c\u4e8c\u6b21\u5207\u5272\u5c06\u82b1\u8d3913\uff0c\u5e76\u4e14\u5e94\u8be5\u7528\u4e8e\u5c0613\u5207\u5272\u62108\u548c5.\u8fd9\u5c06\u82b1\u8d3921 + 13 = 34 \u3002\u5982\u679c21\u88ab\u5207\u5272\u621016\u548c5\uff0c\u5219\u7b2c\u4e8c\u6b21\u5207\u5272\u5c06\u82b1\u8d3916\u6b21\uff0c\u603b\u517137\uff08\u5927\u4e8e34\uff09\u3002 \u9898\u76ee\u53ef\u4ee5\u8f6c\u5316\u4e3aHuffman\u6811\u6784\u9020\u95ee\u9898 / \u4f18\u5148\u961f\u5217\uff1a \u901a\u8fc7\u6bcf\u6b21\u9009\u53d6\u4e24\u5757\u957f\u5ea6\u6700\u77ed\u7684\u6728\u677f\uff0c\u5408\u5e76\uff0c\u6700\u7ec8\u5fc5\u5b9a\u53ef\u4ee5\u5408\u5e76\u51fa\u957f\u5ea6\u4e3a Sum\uff08Li\uff09\u7684\u6728\u677f\uff0c\u5e76\u4e14\u53ef\u4ee5\u4fdd\u8bc1\u603b\u7684\u8017\u8d39\u6700\u5c11 * */ #include <cstdio> #include <queue> using namespace std ; priority_queue < long long , vector < long long > , greater < long long > > pq ; // \u5c0f\u9876\u5806 int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; long long temp , x , y , ans = 0 ; // \u8f93\u5165\u5230\u4f18\u5148\u7ea7\u961f\u5217 cin >> n ; for ( int i = 0 ; i < n ; i ++ ) { cin >> temp ; pq . push ( temp ); } while ( pq . size () > 1 ) { // \u53ea\u8981\u5806\u4e2d\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20\uff0c\u5c31\u7ee7\u7eed\u6267\u884c\u5408\u5e76 x = pq . top (); pq . pop (); y = pq . top (); pq . pop (); pq . push ( x + y ); // \u53d6\u51fa\u6808\u9876 ans += ( x + y ); } cout << ans << '\\n' ; return 0 ; } \u56fe\u7b97\u6cd5 \u00b6 \u6700\u77ed\u8def\u5f84 \u00b6 // Dijkstra.\u90bb\u63a5\u77e9\u9635.cpp #include <iostream> #include <algorithm> using namespace std ; #define MAXV 1010 #define INF 0x3f3f3f3f int n , m , s ; // \u9876\u70b9\u4e2a\u6570\uff0c\u8fb9\u6570\uff0c\u8d77\u70b9\u7f16\u53f7 int G [ MAXV ][ MAXV ]; // MAXV\u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ MAXV ]; // \u8d77\u70b9\u5230\u8fbe\u5404\u70b9\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6 bool vis [ MAXV ] = { false }; // \u8868\u793a\u662f\u5426\u8bbf\u95ee\u7684\u6570\u7ec4 void Dijkstra ( int s ) { // s\u4e3a\u8d77\u70b9 fill ( d , d + MAXV , INF ); // \u76f8\u5f53\u4e8eC\u8bed\u8a00\u7684memset d [ s ] = 0 ; // \u8d77\u70b9\u5230\u8fbe\u81ea\u8eab\u7684\u8ddd\u79bb\u4e3a0\uff0c\u4e0d\u8981\u628a\u8d77\u70b9\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee for ( int i = 0 ; i < n ; i ++ ) { // \u5faa\u73af\u6b21\u6570\u4e3a\u9876\u70b9\u7684\u6570\u91cf int u = -1 , MIN = INF ; // \u627e\u5230u\u4f7f\u5f97d[u]\u6700\u5c0f\uff0cMIN\u5b58\u653e\u8be5\u6700\u5c0f\u7684d[u] for ( int j = 0 ; j < n ; j ++ ) { if ( vis [ j ] == false && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } // \u627e\u4e0d\u5230\u5c0f\u4e8eINF\u7684d[i]\uff0c\u8bf4\u660e\u5269\u4e0b\u7684\u9876\u70b9\u548c\u8d77\u70b9s\u4e0d\u8fde\u901a if ( u == -1 ) return ; vis [ u ] = true ; // \u6807\u8bb0u\u4e3a\u5df2\u8bbf\u95ee for ( int v = 0 ; v < n ; v ++ ) { // \u5982\u679cv\u672a\u8bbf\u95ee \u4e14 u\u80fd\u5230\u8fbev \u4e14 \u4ee5u\u4e3a\u4e2d\u4ecb\u70b9\u53ef\u4ee5\u4f7fd[v]\u66f4\u4f18 if ( vis [ v ] == false && G [ u ][ v ] != INF && d [ u ] + G [ u ][ v ] < d [ v ]) { d [ v ] = d [ u ] + G [ u ][ v ]; } } } } int main () { int u , v , w ; cin >> n >> m >> s ; // \u9876\u70b9\u4e2a\u6570\uff0c\u8fb9\u6570\uff0c\u8d77\u70b9\u7f16\u53f7 fill ( G [ 0 ], G [ 0 ] + MAXV * MAXV , INF ); // \u521d\u59cb\u5316\u56feG for ( int i = 0 ; i < m ; i ++ ) { cin >> u >> v >> w ; G [ u ][ v ] = w ; } Dijkstra ( s ); // Dijkstra \u7b97\u6cd5\u5165\u53e3 for ( int i = 0 ; i < n ; i ++ ) { cout << d [ i ] << \" \" ; // \u8f93\u51fa\u8d77\u70b9\u5230\u6240\u6709\u9876\u70b9\u7684\u6700\u77ed\u8ddd\u79bb } return 0 ; } // Floyd.cpp int dis [ MAXV ][ MAXV ]; // dis[i][j] \u8868\u793a\u9876\u70b9i\u5230\u9876\u70b9j\u7684\u8ddd\u79bb void Floyd () { for ( int k = 0 ; k < n ; k ++ ) { for ( int i = 0 ; i < n ; i ++ ) { for ( int j = 0 ; j < n ; j ++ ) { if ( dis [ k ][ i ] != INF && dis [ k ][ j ] != INF && dis [ i ][ k ] + dis [ k ][ j ] < dis [ i ][ j ]) { dis [ i ][ j ] = dis [ i ][ k ] + dis [ k ][ j ]; } } } } } // Bellman-Ford.cpp struct Node { int v , dis ; // v\u4e3a\u90bb\u63a5\u8fb9\u7684\u76ee\u6807\u9876\u70b9\uff0cdis \u4e3a\u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 } vector < Node > Adj [ MAXV ]; // \u56feG\u7684\u90bb\u63a5\u8868 int n ; // n\u4e3a\u9876\u70b9\u6570\uff0cMAXV \u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ MAXV ]; // \u8d77\u70b9\u5230\u8fbe\u5404\u70b9\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6 bool Bellman ( int s ) { // s\u4e3a\u6e90\u70b9 fill ( d , d + MAXV , INF ); // fill\u51fd\u6570\u5c06\u6574\u4e2ad\u6570\u7ec4\u8d4b\u4e3aINF\uff0c\u6ce8\u610f\u614e\u7528INF d [ s ] = 0 ; // \u8d77\u70b9s\u5230\u8fbe\u81ea\u8eab\u7684\u8ddd\u79bb\u4e3a0 for ( int i = 0 ; i < n - 1 ; i ++ ) { // \u6267\u884c n-1 \u8f6e\u64cd\u4f5c\uff0cn \u4e3a\u9876\u70b9\u6570 for ( int u = 0 ; u < n ; u ++ ) { // \u6bcf\u8f6e\u64cd\u4f5c\u90fd\u904d\u5386\u6240\u6709\u8fb9 for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; // \u90bb\u63a5\u8fb9\u7684\u9876\u70b9 int dis = Adj [ u ][ j ]. dis ; // \u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 if ( d [ u ] + dis < d [ v ]) { d [ v ] = d [ u ] + dis ; } } } } // \u4ee5\u4e0b\u4e3a\u5224\u65ad\u8d1f\u73af\u7684\u4ee3\u7801 for ( int u = 0 ; u < n ; u ++ ) { // \u5bf9\u6bcf\u6761\u8fb9\u8fdb\u884c\u5224\u65ad for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; // \u90bb\u63a5\u8fb9\u7684\u9876\u70b9 int dis = Adj [ u ][ j ]. dis ; // \u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 if ( d [ u ] + dis < d [ v ]) // \u5982\u679c\u4ecd\u53ef\u4ee5\u88ab\u677e\u5f1b return false ; // \u8bf4\u660e\u56fe\u4e2d\u6709\u4ece\u6e90\u70b9\u53ef\u8fbe\u7684\u8d1f\u73af } } return true ; // \u6570\u7ec4d\u7684\u6240\u6709\u503c\u90fd\u5df2\u7ecf\u8fbe\u5230\u6700\u4f18 } // SPFA.cpp vector < Node > Adj [ MAXV ]; // \u56feG\u7684\u90bb\u63a5\u8868 int n , d [ MAXV ], num [ MAXV ]; // num\u6570\u7ec4\u8bb0\u5f55\u9876\u70b9\u7684\u5165\u961f\u6b21\u6570 bool inq [ MAXV ]; // \u9876\u70b9\u662f\u5426\u5728\u961f\u5217\u4e2d bool SPFA ( int s ) { // s\u4e3a\u6e90\u70b9 // \u521d\u59cb\u5316 metset ( inq , false , sizeof ( inq )); memset ( num , 0 , sizeof ( num )); fill ( d , d + MAXV , INF ); // \u6e90\u70b9\u5165\u961f\u90e8\u5206 queue < int > Q ; Q . push ( s ); // \u6e90\u70b9\u5165\u961f inq [ s ] = true ; // \u6e90\u70b9\u5df2\u5165\u961f num [ s ] ++ ; // \u6e90\u70b9\u5165\u961f\u6b21\u6570\u52a01 d [ s ] = 0 ; // \u6e90\u70b9\u7684\u8ddd\u79bb\u4e3a 0 while ( ! Q . empty ()) { int u = Q . front (); // \u961f\u9996\u9876\u70b9\u7f16\u53f7\u4e3a u Q . pop (); // \u51fa\u961f inq [ u ] = false ; // \u8bbe\u7f6e u \u4e3a\u4e0d\u5728\u961f\u5217\u4e2d // \u904d\u5386 u \u7684\u6240\u6709\u90bb\u63a5\u8fb9 v for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; int dis = Adj [ u ][ j ]. dis ; // \u677e\u5f1b\u64cd\u4f5c if ( d [ u ] + dis < d [ v ]) { d [ v ] = d [ u ] + dis ; if ( ! inq [ v ]) { // \u5982\u679c v \u4e0d\u5728\u961f\u5217\u4e2d Q . push ( v ); // v \u5165\u961f inq [ v ] = true ; // \u8bbe\u7f6e v \u4e3a\u5728\u961f\u5217\u4e2d num [ v ] ++ ; if ( num [ v ] >= n ) return false ; // \u6709\u53ef\u8fbe\u8d1f\u73af } } } } return true ; // \u65e0\u53ef\u8fbe\u8d1f\u73af } \u6700\u5c0f\u751f\u6210\u6811 \u00b6 Prim \u7b97\u6cd5\u548c Kruskal \u7b97\u6cd5\u4e24\u8005\u90fd\u662f\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u4f46\u4e24\u8005\u90fd\u80fd\u83b7\u5f97\u6700\u5c0f\u751f\u6210\u6811\u7684\u7cbe\u786e\u6700\u4f18\u89e3\u3002\u524d\u8005\u662f\u5bfb\u627e\u9876\u70b9\u7684\u8fc7\u7a0b\uff0c\u66f4\u9002\u5408\u7a20\u5bc6\u56fe\uff1b\u540e\u8005\u662f\u5bfb\u627e\u8fb9\u7684\u8fc7\u7a0b\uff0c\u66f4\u9002\u5408\u7a00\u758f\u56fe\u3002 PRIM \u7b97\u6cd5 \u00b6 \u00b6 Prim \u7b97\u6cd5\u7684\u5173\u952e\u4e24\u6b65\u662f\u5bfb\u627e\u9876\u70b9\u4e0e\u66f4\u65b0\u6700\u77ed\u8ddd\u79bb\u3002 \u8be5\u7b97\u6cd5\u8bbe\u5b9a\u96c6\u5408S\uff0c\u5c1d\u8bd5\u4e0d\u65ad\u5411S\u4e2d\u6dfb\u52a0\u9876\u70b9\u6765\u751f\u6210\u6700\u5c0f\u751f\u6210\u6811\u3002\u5f53\u627e\u5230S\u4e4b\u5916\u8ddd\u79bbS\u96c6\u5408\u6700\u8fd1\u7684\u9876\u70b9u\u540e\uff0c\u66f4\u65b0u\u7684\u6240\u6709\u90bb\u63a5\u9876\u70b9\u5230\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u5e76\u4e0d\u65ad\u5faa\u73af\u6dfb\u52a0\u9876\u70b9\u3002\u76f4\u5230\u627e\u4e0d\u5230\u8fd9\u6837\u7684\u9876\u70b9u\uff0c\u5373\u5269\u4f59\u9876\u70b9\u4e0d\u4e0eS\u8fde\u901a\uff0c\u6216\u6240\u6709\u9876\u70b9\u90fd\u5df2\u88ab\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u3002 \u90bb\u63a5\u77e9\u9635\u7684\u5b9e\u73b0\uff1a int n , G [ maxv ][ maxv ]; // n\u4e3a\u9876\u70b9\u6570\u91cf\uff0cmaxv \u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ maxv ]; // \u9876\u70b9\u4e0e\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb bool vis [ maxv ]; // \u6807\u8bb0\u6570\u7ec4 int prim () { // \u9ed8\u8ba4 0 \u53f7\u4e3a\u521d\u59cb\u70b9\uff0c\u51fd\u6570\u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c fill ( d , d + maxv , INF ); d [ 0 ] = 0 ; int ans = 0 ; // \u5b58\u653e\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c for ( int i = 0 ; i < n ; i ++ ) { int u = -1 , MIN = INF ; for ( int j = 0 ; j < n ; j ++ ) { // \u627e\u5230\u672a\u8bbf\u95ee\u7684\u9876\u70b9\u4e2d\u8ddd\u79bb\u5f53\u524d\u751f\u6210\u7684\u96c6\u5408\u6700\u8fd1\u7684\u9876\u70b9 if ( ! vis [ j ] && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } if ( u == -1 ) return -1 ; // \u627e\u4e0d\u5230\u9876\u70b9\uff0c\u5373\u5269\u4e0b\u7684\u9876\u70b9\u4e0e\u96c6\u5408S\u4e0d\u8fde\u901a vis [ u ] = true ; ans += d [ u ]; // \u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u7d2f\u52a0 // \u66f4\u65b0\u5269\u4f59\u9876\u70b9\u5230\u96c6\u5408S\u7684\u8ddd\u79bb for ( int v = 0 ; v < n ; v ++ ) { if ( ! vis [ v ] && G [ u ][ v ] != INF && G [ u ][ v ] < d [ v ]) { d [ v ] = G [ u ][ v ]; } } } return ans ; } \u90bb\u63a5\u8868\u7684\u5b9e\u73b0\uff1a class Edge { int to , dis ; // \u76ee\u6807\u9876\u70b9\u548c\u8fb9\u6743 } vector < Edge > nei [ maxv ]; // \u90bb\u63a5\u8868\uff0cnei[u]\u5b58\u653e\u9876\u70b9u\u51fa\u53d1\u7684\u8fb9 int n ; // \u9876\u70b9\u6570 int d [ maxv ]; // \u9876\u70b9\u5230\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb bool vis [ maxv ]; // \u6807\u8bb0\u6570\u7ec4 int prim () { // \u9ed8\u8ba40\u53f7\u4e3a\u521d\u59cb\u70b9\uff0c\u51fd\u6570\u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c fill ( d , d + maxv , INF ); d [ 0 ] = 0 ; int ans = 0 ; for ( int i = 0 ; i < n ; i ++ ) { int u = -1 , MIN = INF ; for ( int j = 0 ; j < n ; j ++ ) { if ( ! vis [ j ] && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } } if ( u == -1 ) return -1 ; vis [ u ] = true ; ans += d [ u ]; // \u53ea\u6709\u4e0b\u9762\u8fd9\u4e2a\u5faa\u73af\u4e0e\u90bb\u63a5\u77e9\u9635\u7684\u5b9e\u73b0\u4e0d\u540c for ( int j = 0 ; j < nei [ u ]. size (); j ++ ) { int v = nei [ u ][ j ]. to ; int dis = nei [ u ][ j ]. dis ; if ( ! vis [ v ] && dis + d [ u ] < d [ v ]) { d [ v ] = dis + d [ u ]; } } return ans ; } KRUSKAL \u7b97\u6cd5 \u00b6 Kruskal \u7b97\u6cd5\u4f7f\u7528\u5e76\u67e5\u96c6\u3002\u5148\u5c06\u56fe\u4e2d\u6240\u6709\u8fb9\u6309\u7167\u8fb9\u6743\u4ece\u5c0f\u5230\u5927\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5f00\u59cb\u904d\u5386\u6bcf\u6761\u8fb9\uff0c\u901a\u8fc7\u5e76\u67e5\u96c6\u5c06\u5224\u65ad\u5e76\u5c06\u8fb9\u6dfb\u52a0\u5230\u6700\u5c0f\u751f\u6210\u6811\u7684\u96c6\u5408\u3002 struct Edge { int u , v ; // \u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u7f16\u53f7 int cost ; // \u8fb9\u6743 } edges [ maxe ]; // \u6700\u591a\u6709 maxe \u6761\u8fb9 bool cmp ( Edge a , Edge b ) { return a . cost < b . cost ; } // \u5e76\u67e5\u96c6\u90e8\u5206 int F [ maxv ]; // \u5e76\u67e5\u96c6\u6570\u7ec4 int find ( int x ) { // \u5e76\u67e5\u96c6\u67e5\u8be2\u51fd\u6570 int a = x ; while ( x != F [ x ]) { x = F [ x ]; } // \u8def\u5f84\u538b\u7f29 while ( a != F [ a ]) { int z = a ; a = F [ a ]; F [ z ] = x ; } return x ; } /** * Kruskal \u7b97\u6cd5 * @param n \u9876\u70b9\u4e2a\u6570 * @param m \u56fe\u7684\u8fb9\u6570 * @return \u6240\u6c42\u8fb9\u6743\u53ea\u548c\uff1b\u82e5\u65e0\u6cd5\u8fde\u901a\u8fd4\u56de-1 */ int Kruskal ( int n , int m ) { // ans \u4e3a\u6240\u6c42\u8fb9\u6743\u4e4b\u548c\uff0cnumEdge \u4e3a\u5f53\u524d\u751f\u6210\u6811\u7684\u8fb9\u6570 int ans = 0 , numEdge = 0 ; for ( int i = 0 ; i < n ; i ++ ) { // \u9876\u70b9\u8303\u56f4\u662f[0...n-1] F [ i ] = i ; // \u5e76\u67e5\u96c6\u521d\u59cb\u5316 } sort ( edges , edges + m , cmp ); // \u6240\u6709\u8fb9\u6309\u7167\u8fb9\u6743\u6392\u5e8f for ( int i = 0 ; i < m ; i ++ ) { // \u679a\u4e3e\u6240\u6709\u8fb9 int faU = find ( edge [ i ]. u ); // \u67e5\u8be2\u6d4b\u8bd5\u8fb9\u4e24\u4e2a\u7aef\u70b9\u6240\u5728\u96c6\u5408\u7684\u6839\u7ed3\u70b9 int faV = find ( edge [ i ]. v ); if ( faU != faV ) { // \u5982\u679c\u4e0d\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u8be5\u8fb9\u5c1a\u672a\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u4e2d F [ faU ] = faV ; // \u5408\u5e76\u96c6\u5408\uff0c\u5c06\u6d4b\u8bd5\u8fb9\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u4e2d ans += edges [ i ]. cost ; numEdge ++ ; // \u5f53\u524d\u751f\u6210\u6811\u7684\u8fb9\u6570\u52a01 if ( numEdge == n - 1 ) // \u6240\u6709\u8fb9\u90fd\u5df2\u6dfb\u52a0 break ; } } if ( numEdge != n - 1 ) return -1 ; // \u65e0\u6cd5\u8fde\u901a\u65f6\u8fd4\u56de -1 else return ans ; // \u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c } int main () { int n , m ; // \u9876\u70b9\u6570\u91cf\uff0c\u8fb9\u6570\u91cf cin >> n >> m ; for ( int i = 0 ; i < m ; i ++ ) cin >> edges [ i ]. u >> edges [ i ]. v >> edges [ i ]. cost ; // \u4e24\u4e2a\u7aef\u70b9\u7f16\u53f7\uff0c\u8fb9\u6743 int ans = Kruskal ( n , m ); cout << ans << endl ; return 0 ; } \u5176\u4ed6 \u00b6 \u6590\u6ce2\u90a3\u5951\u4e0e\u5361\u5854\u5170\u6570 \u00b6 \u6b27\u51e0\u91cc\u5f97\u5b9a\u7406 \u00b6 https://www.cnblogs.com/fisherss/p/9985135.html \u77e9\u9635\u8fde\u4e58 \u00b6 #include <iostream> #define maxn 100 #define inf 0x3f3f3f3f int p [ maxn ]; int dp [ maxn ][ maxn ]; // \u521d\u59cb\u5bf9\u89d2\u7ebf\u4e3a0 int s [ maxn ][ maxn ]; // \u5207\u5272\u77e9\u9635\u94fe\uff0c\u5b58\u50a8\u524d\u534a\u6bb5\u77e9\u9635\u94fe\u7684\u6700\u540e\u4e00\u4e2a\u77e9\u9635\u7684\u7d22\u5f15 int main () { int n = 6 ; // \u8fde\u4e58\u7684\u77e9\u9635\u6570\u91cf p [ 0 ] = 30 ; p [ 1 ] = 35 ; p [ 2 ] = 15 ; p [ 3 ] = 5 ; p [ 4 ] = 10 ; p [ 5 ] = 20 ; p [ 6 ] = 25 ; for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { if ( j > i ) dp [ i ][ j ] = inf ; // \u4e0a\u5bf9\u89d2\u7ebf\u521d\u59cb\u5316\u4e3a inf } } for ( int r = 2 ; r <= n ; r ++ ) { // \u6bcf\u6b21\u5faa\u73af\u7684\u77e9\u9635\u94fe\u7684\u957f\u5ea6 for ( int i = 1 ; i <= n - r + 1 ; i ++ ) { // i \u662f\u77e9\u9635\u94fe\u5f00\u59cb int j = i + r - 1 ; // \u5f53\u524d\u77e9\u9635\u94fe\u662f\u77e9\u9635i\u5230\u77e9\u9635j for ( int k = i ; k < j ; k ++ ) { // k \u662f\u77e9\u9635\u94fe\u5207\u5272\u4f4d\u7f6e int t = dp [ i ][ k ] + dp [ k + 1 ][ j ] + p [ i - 1 ] * p [ k ] * p [ j ]; if ( t < dp [ i ][ j ]) { dp [ i ][ j ] = t ; s [ i ][ j ] = k ; } } } } for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { cout << dp [ i ][ j ] << \" \\t \" ; } cout << '\\n' ; } cout << '\\n' ; for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { cout << s [ i ][ j ] << \" \\t \" ; } cout << '\\n' ; } } \u5feb\u901f\u4e58\u6cd5 \u00b6 typedef long long LL ; LL mul ( LL a , LL b , LL m ) { LL ans = 0 ; while ( b ) { if ( b & 1 ) ans = ( ans + a ) % m ; a = ( a + a ) % m ; b >>= 1 ; } return ans ; } // \u6807\u91cf\u5feb\u901f\u5e42 \u8fed\u4ee3 typedef long long LL ; LL binaryPow ( LL a , LL b , LL m ) { LL ans = 1 ; while ( b ) { if ( b & 1 ) ans = ans * a % m ; a = a * a % m ; b >>= 1 ; } return ans ; } // \u6807\u91cf\u5feb\u901f\u5e42.\u9012\u5f52 // \u6c42 a^b % m\uff0c\u9012\u5f52\u5199\u6cd5 LL binaryPow ( LL a , LL b , LL m ) { if ( ! b ) return 1 ; // \u5982\u679cb\u4e3a0\uff0c\u5219a\u4e3a1 if ( b & 1 ) return a * binaryPow ( a , b - 1 , m ) % m ; LL mul = binaryPow ( a , b / 2 , m ); return mul * mul % m ; } // \u77e9\u9635\u5feb\u901f\u5e42.cpp typedef long long LL ; vector < LL > vec ; // \u957f\u6574\u6570\u5411\u91cf vector < vec > mat ; // \u957f\u6574\u6570\u77e9\u9635 mat mul ( const mat & A , const mat & B ) { // \u77e9\u9635\u4e58\u6cd5 A multiply B mat C ( A . size (), vec ( B [ 0 ]. size ())); // \u5927\u5c0f\u4e3a A \u7684\u884c\u6570\u4e0e B \u7684\u5217\u6570 for ( int i = 0 ; i < A . size (); i ++ ) { for ( int k = 0 ; k < B . size (); k ++ ) { for ( int j = 0 ; j < B [ 0 ]. size (); j ++ ) { Ci = ( Ci + ( Ai * Bk ) % MOD ) % MOD ; // \u5982\u679c\u5fc5\u8981\uff0c\u6b64\u5904\u7684\u4e58\u6cd5\u4ee5\u5feb\u901f\u4e58\u6cd5\u4ee3\u66ff } } } return C ; } mat pow ( mat A , LL n ) { // \u8ba1\u7b97\u77e9\u9635 A^n // \u77e9\u9635\u4e58\u6cd5\u7684\u96f6\u5143\u662f\u5355\u4f4d\u77e9\u9635 mat An ( A . size (), vec ( A . size ())); for ( int i = 0 ; i < A . size (); i ++ ) Ani = 1 ; while ( n > 0 ) { if ( n & 1 ) An = mul ( A , An ); A = mul ( A , A ); n >>= 1 ; } return An ; } \u7d20\u6570 \u00b6 // \u7d20\u6570\u7b5b\u5224\u65ad x\u5230y\u7684\u7d20\u6570\u4e2a\u6570 \uff08\u5305\u62ecx\u548cy\uff09 #include <cmath> #include <iostream> using namespace std ; const int MAXY = 1e5 + 10 ; bool comp [ MAXY ]; // \u5408\u6570\u4e3a true int main () { int x , y ; int ans = 0 ; cin >> x >> y ; // \u6ce8\u610f\uff0c\u6b64\u9898\u6ca1\u6709\u8bf4\u660e x \u548c y \u7684\u5927\u5c0f\u5173\u7cfb if ( x > y ) { swap ( x , y ); } // \u57c3\u5f0f\u7b5b\u6cd5 int m = sqrt ( y + 0.5 ); for ( int i = 2 ; i <= m ; i ++ ) { if ( ! comp [ i ]) { // \u8d28\u6570 for ( int j = i * i ; j <= y ; j += i ) comp [ j ] = true ; } } // \u7edf\u8ba1\u7d20\u6570\u4e2a\u6570 for ( int i = x ; i <= y ; i ++ ) { if ( i != 1 && ! comp [ i ]) // \u6ce8\u610f 1 \u4e0d\u662f\u8d28\u6570 ans ++ ; } cout << ans << endl ; return 0 ; } // \u6c42\u89e3\u8d28\u56e0\u6570\u4e2a\u6570 \u4e0d\u91cd\u590d int getPrimeNum ( int val ){ int old = val ; int res = 0 ; for ( int i = 2 ; i <= sqrt ( val + 0.5 ); i ++ ){ if ( val % i == 0 ){ res ++ ; while ( val % i == 0 ) val /= i ; } } if ( val > 1 && val != old ) res ++ ; // \u4e0d\u5305\u62ec\u81ea\u8eab\u65f6 \u9700\u8981\u52a0\u4e0a val != old return res ; } \u9006\u5e8f\u5bf9 \u00b6 \u9006\u5e8f\u5bf9\uff1a\u8bbe A \u4e3a\u4e00\u4e2a\u6709 n \u4e2a\u6570\u5b57\u7684\u6709\u5e8f\u96c6 (n>1)\uff0c\u5176\u4e2d\u6240\u6709\u6570\u5b57\u5404\u4e0d\u76f8\u540c\u3002\u5982\u679c\u5b58\u5728\u6b63\u6574\u6570 i, j \u4f7f\u5f97 1 \u2264 i < j \u2264 n \u800c\u4e14 A[i] > A[j]\uff0c\u5219 A[i], A[j]> \u8fd9\u4e2a\u6709\u5e8f\u5bf9\u79f0\u4e3a A \u7684\u4e00\u4e2a\u9006\u5e8f\u5bf9\uff0c\u4e5f\u79f0\u4f5c\u9006\u5e8f\u6570\u3002 \u5f52\u5e76\u6392\u5e8f \u00b6 \u5f52\u5e76\u6392\u5e8f\uff1a\uff08\u5373\u4f7f\u5e8f\u5217\u5b58\u5728\u76f8\u540c\u5143\u7d20\uff0c\u8be5\u7b97\u6cd5\u4e5f\u9002\u7528\uff0c\u4e14\u4ee3\u7801\u4e0d\u7528\u4fee\u6539\uff09 \u5f52\u5e76\u6392\u5e8f\u662f\u5c06\u6570\u5217a[l,h]\u5206\u6210\u4e24\u534aa[l,mid]\u548ca[mid+1,h]\u5206\u522b\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\uff0c\u7136\u540e\u518d\u5c06\u8fd9\u4e24\u534a\u5408\u5e76\u8d77\u6765\u3002 \u5728\u5408\u5e76\u7684\u8fc7\u7a0b\u4e2d\uff08\u8bbel<=i<=mid ,mid+1<=j<=h), \u5f53a[i]<=a[j]\u65f6\uff0c\u5e76\u4e0d\u4ea7\u751f\u9006\u5e8f\u6570\uff1b \u5f53a[i]>a[j]\u65f6\uff0c\u5728\u524d\u534a\u90e8\u5206\u4e2d\u6bd4a[i]\u5927\u7684\u6570\u90fd\u6bd4a[j]\u5927\uff0c\u5c06a[j]\u653e\u5728a[i]\u524d\u9762\u7684\u8bdd\uff0c\u9006\u5e8f\u6570\u8981\u52a0\u4e0amid+1-i\u3002 \u56e0\u6b64\uff0c\u53ef\u4ee5\u5728\u5f52\u5e76\u6392\u5e8f\u4e2d\u7684\u5408\u5e76\u8fc7\u7a0b\u4e2d\u8ba1\u7b97\u9006\u5e8f\u6570. #include <bits/stdc++.h> #define LL long long using namespace std ; const int MAXN = 50000 + 5 ; const int MAXM = 1e5 ; int a [ MAXN ], temp [ MAXN ]; LL ans = 0 ; int n ; void merge ( int le , int mid , int ri ){ //\u4f7f\u6bcf\u4e24\u90e8\u5206\u3010\u90fd\u5df2\u7ecf\u5206\u522b\u6709\u5e8f\u3011\uff0c\u5408\u5e76\u4e3a\u4e00\u4e2a\u6709\u5e8f\u96c6\u5408 int i , j , k ; // le\u5230mid \u662f\u4e00\u4e2a\u6709\u5e8f\u90e8\u5206\uff0cmid+1\u5230ri\u662f\u4e00\u4e2a\u6709\u5e8f\u90e8\u5206 \uff0c\u5408\u5e76\u5c31\u884c\u4e86 i = le ; j = mid + 1 ; k = le ; for (; i <= mid && j <= ri ;){ if ( a [ i ] > a [ j ]){ temp [ k ++ ] = a [ j ++ ]; ans += mid - i + 1 ; } else temp [ k ++ ] = a [ i ++ ]; } while ( i <= mid ) temp [ k ++ ] = a [ i ++ ]; while ( j <= ri ) temp [ k ++ ] = a [ j ++ ]; for ( i = le ; i <= ri ; i ++ ) a [ i ] = temp [ i ]; } void merge_sort ( int le , int ri ){ //\u4e0d\u65ad\u7684\u5206\u4e3a\u4e00\u534a\uff0c\u6765\u4f7f\u5404\u4e2a\u90e8\u5206\u975e\u9012\u51cf\u6709\u5e8f if ( le < ri ){ int mid = ( le + ri ) >> 1 ; merge_sort ( le , mid ); merge_sort ( mid + 1 , ri ); merge ( le , mid , ri ); } } int main (){ while ( ~ scanf ( \"%d\" , & n )){ for ( int i = 0 ; i < n ; i ++ ) scanf ( \"%d\" , & a [ i ]); ans = 0 ; merge_sort ( 0 , n -1 ); printf ( \"%lld \\n \" , ans ); } return 0 ; } \u7ebf\u6bb5\u6811 \u00b6 \u6811\u72b6\u6570\u7ec4 \u00b6 https://blog.csdn.net/qq_37383726/article/details/76459527 \u52a8\u6001\u89c4\u5212 \u00b6 \u80cc\u5305\u95ee\u9898 \u00b6 \u80cc\u5305\u677f\u5b50 \u00b6 #include <iostream> #include <cstring> #include <cmath> #include <cstdio> #define maxn 1000; using namespace std ; int cash , n ; int dp [ maxn ]; int c [ maxn ], w [ maxn ], num [ maxn ]; void ZeroOne_Pack ( int cost , int weight ) { for ( int i = cash ; i >= cost ; i -- ) dp [ i ] = max ( dp [ i ], dp [ i - cost ] + weight ); } void Complete_Pack ( int cost , int weight ) { for ( int i = cost ; i <= cash ; i ++ ) dp [ i ] = max ( dp [ i ], dp [ i - cost ] + weight ); } int Multi_Pack () { memset ( dp , 0 , sizeof ( dp )); for ( int i = 1 ; i <= n ; i ++ ) { if ( num [ i ] * c [ i ] > cash ) { //\u7269\u54c1\u5168\u88c5\u8fdb\u53bb\u8d85\u91cd\uff0c\u8bf4\u660e\u7269\u54c1\u65e0\u9650\uff0c\u76f4\u63a5\u5957\u5b8c\u5168\u80cc\u5305 Complete_Pack ( c [ i ], w [ i ]); } else { int k = 1 ; while ( k < num [ i ]) { //\u5229\u7528\u4e8c\u8fdb\u5236\u601d\u60f3\uff0c\u628a\u7269\u54c1\u5206\u62101\uff0c2\uff0c4\uff0c8\u4e2a\uff0c\u4f9d\u6b2101\u80cc\u5305\uff0c\u80fd\u51d1\u51fa\u4efb\u4f55\u6570\u503c\uff0c\u964d\u590d\u6742\u5ea6 ZeroOne_Pack ( k * c [ i ], k * w [ i ]); num [ i ] -= k ; k <<= 1 ; } ZeroOne_Pack ( num [ i ] * c [ i ], num [ i ] * w [ i ]); } } return dp [ cash ]; } Poj1276[\u591a\u91cd\u80cc\u5305] \u00b6 \u5173\u4e8e01\u80cc\u5305\u4e00\u7ef4\u65f6\u7684\u9006\u5e8f\u95ee\u9898 \u4e8c\u8fdb\u5236\u8f6c\u5316 \u8f6c\u6362\u621001\u80cc\u5305\uff0c\u4f8b\u5982\u4e00\u4ef6\u7269\u54c1\u53ef\u4ee5\u62ff26\u4ef6\uff0c\u6bcf\u4e00\u4ef6\u7684\u6743\u503c\u662fw\uff0c26\u53ef\u4ee5\u5199\u6210\uff081+2+4+8\uff09+11\uff0c\u6240\u4ee5\u5c31\u628a\u8fd9\u79cd\u7269\u54c1\u5206\u89e3\u6210\u6743\u91cd\u4e3aw\uff0c2w\uff0c4w\uff0c8w\uff0c11w\u7684\u4e94\u79cd\u7269\u54c1\uff0c\u8fd9\u4e94\u79cd\u7269\u54c1\u7ec4\u5408\uff0c\u4e00\u5b9a\u80fd\u7ec4\u6210\u5c0f\u4e8e\u7b49\u4e8e26\u7684\u4efb\u610f\u4e00\u4e2a\u6570\uff0c\u8fd9\u6837\u5c31\u628a\u670926\u4ef6\u7684\u4e00\u79cd\u7269\u54c1\u6362\u6210\u4e86\u4e94\u79cd\u5404\u6709\u4e00\u4ef6\u7684\u7269\u54c1\uff0c\u752801\u80cc\u5305\u5c31\u80fd\u89e3\u51b3\u4e86 \u6162 \u5185\u5b58\u5360\u7528\u5c0f \u591a\u5f00\u7a7a\u95f4 #include <iostream> #include <cstring> using namespace std ; int cash , N ; // N\u662f\u949e\u7968\u79cd\u6570 int n [ 13 ], D [ 13 ]; // n\u662f\u949e\u7968\u6570\uff0cD\u662f\u949e\u7968\u9762\u989d\uff1b int dp [ 100010 ]; int main () { while ( scanf ( \"%d%d\" , & cash , & N ) != EOF ) { // cash \u662f\u91d1\u989d\u4e0a\u9650\uff0c\u672c\u9898\u7684\u91cd\u91cf\u548c\u4ef7\u503c\u5408\u4e00\uff0c\u91d1\u989d\u4e0a\u9650\u53ef\u7406\u89e3\u4e3a\u80cc\u5305\u91cd\u91cf\u4e0a\u9650 // \u8f93\u5165\u4e0e\u521d\u59cb\u5316 for ( int i = 0 ; i < N ; i ++ ) scanf ( \"%d%d\" , & n [ i ], & D [ i ]); memset ( dp , 0 , sizeof ( dp )); // \u591a\u91cd\u80cc\u5305 for ( int i = 0 ; i < N ; i ++ ) { // \u7b2ci\u79cd\u949e\u7968 if ( n [ i ] * D [ i ] > cash ) { // \u949e\u7968\u5145\u8db3\uff0c\u5957\u7528\u5b8c\u5168\u80cc\u5305 for ( int j = D [ i ]; j <= cash ; j ++ ) { // j\u662f\u91cd\u91cf dp [ j ] = max ( dp [ j ], dp [ j - D [ i ]] + D [ i ]); } } else { // if n[i] * D[i] <= cash int num = n [ i ]; // \u5269\u4f59\u949e\u7968\u6570 for ( int k = 1 ; num > 0 ; k <<= 1 ) { // \u949e\u7968\u6570\uff1b\u4f7f\u7528\u4e8c\u8fdb\u5236\u4f18\u5316\uff0ck\u4e3a2\u7684\u5e42\uff0c\u4f9d\u6b210-1\u80cc\u5305\uff0c\u53ef\u51d1\u51fa\u4efb\u610f\u6570\u503c int mul = min ( k , num ); for ( int j = cash ; j >= mul * D [ i ]; j -- ) { // j\u662f\u91cd\u91cf dp [ j ] = max ( dp [ j ], dp [ j - mul * D [ i ]] + mul * D [ i ]); } num -= mul ; } } } // \u8f93\u51fa printf ( \"%d \\n \" , dp [ cash ]); } return 0 ; } \u7ef4\u62a4\u4e00\u4e2a\u6570\u7ec4num\uff0c \\(num[i][j]num[i][j]\\) \u8868\u793a\u5728\u5f80\u80cc\u5305\u91cc\u8bd5\u7740\u88c5\u7b2ci\u4ef6\u7269\u54c1\u65f6\uff0c\u80cc\u5305\u5bb9\u91cf\u4f7f\u7528\u4e86j\u65f6\u88c5\u4e86\u591a\u5c11\u4ef6i\u7269\u54c1\u3002cost[i]\u4e3a\u7269\u54c1i\u7684\u4f53\u79ef\uff0c \\(num[i][j]=num[j\u2212cost[i]]+1num[i][j]=num[j\u2212cost[i]]+1\\) ;\u53ef\u4ee5\u770b\u5230 \\(num[i][j]num[i][j]\\) \u548c \\(num[t|t!=i][j|j=1,2,....v]num[t|t!=i][j|j=1,2,....v]\\) \u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u6240\u4ee5\u53ef\u4ee5\u7701\u6389\u7b2c\u4e00\u7ef4\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u7269\u54c1\uff0c\u6e05\u7a7anum\uff0c\u53ea\u8ba1\u7b97num[j]\u5c31\u884c\u4e86 \u5feb \u5185\u5b58\u5360\u7528\u5927 #include <iostream> #include <cstdio> #include <cstring> #include <string> #include <algorithm> #include <map> #include <queue> #include <climits> #include <list> #include <stack> #define mem(a) memset(a,0,sizeof(a)) using namespace std ; int wi [ 20 ]; int mi [ 20 ]; int dp [ 100050 ]; int num [ 100050 ]; int main () { int ans_v ; while ( scanf ( \"%d\" , & ans_v ) != EOF ) { int n ; mem ( dp ); mem ( num ); scanf ( \"%d\" , & n ); int i ; for ( i = 0 ; i < n ; ++ i ) { scanf ( \"%d%d\" , & mi [ i ], & wi [ i ]); } for ( i = 0 ; i < n ; ++ i ) { int j ; mem ( num ); for ( j = wi [ i ]; j <= ans_v ; ++ j ) { if ( dp [ j - wi [ i ]] + wi [ i ] > dp [ j ] && num [ j - wi [ i ]] < mi [ i ]) { dp [ j ] = dp [ j - wi [ i ]] + wi [ i ]; num [ j ] = num [ j - wi [ i ]] + 1 ; } } } printf ( \"%d \\n \" , dp [ ans_v ]); } } Poj2184[01\u80cc\u5305\u53d8\u5f62] \u00b6 \u4f7f\u5f97TS\u548cTF\u7684\u503c\u7684\u548c\u6700\u5927\uff0c\u540c\u65f6TS\u548cTF\u90fd\u4e0d\u80fd\u4e3a0 #include <iostream> #include <climits> #define MAXN 105 using namespace std ; int N ; const int M = 100005 ; // TS\u6216TF\u6700\u5927\u4e3a100000 int S [ MAXN ], F [ MAXN ]; int dp [ 2 * M ]; // dp[i]\u8868\u793aS\u503c\u4e3ai\u65f6F\u7684\u6700\u5927\u503c\uff1b\u5750\u6807\u5e73\u79fb\uff1a\u8d1f\u6570\u5728\u524d\uff0c\u6b63\u6570\u5728\u540e // \u5c06S\u770b\u505a\u4ee3\u4ef7\uff0cF\u770b\u505a\u4ef7\u503c\uff0c0-1\u80cc\u5305\u6c42\u89e3 int main () { while ( scanf ( \"%d\" , & N ) != EOF ) { for ( int i = 0 ; i < N ; i ++ ) scanf ( \"%d%d\" , & S [ i ], & F [ i ]); for ( int i = 0 ; i < 2 * M ; i ++ ) dp [ i ] = INT_MIN ; dp [ 100000 ] = 0 ; // 0\u524d\u6709\u5341\u4e07\u4e2a\u8d1f\u6570\uff0c0\u540e\u6709\u5341\u4e07\u4e2a\u6b63\u6570 for ( int i = 0 ; i < N ; i ++ ) { if ( S [ i ] >= 0 ) { for ( int j = 2 * M - 1 ; j >= S [ i ]; j -- ) { if ( dp [ j - S [ i ]] > INT_MIN ) // \u80cc\u5305\u91cd\u91cf\u4e3a j - S[i] \u7684\u60c5\u51b5\u5b58\u5728 dp [ j ] = max ( dp [ j ], dp [ j - S [ i ]] + F [ i ]); } } else { // if S[i] < 0\uff0c\u5982\u679c\u653e\u5165\u80cc\u5305\uff0c\u80cc\u5305\u53d8\u8f7b\uff0c\u9006\u5e8f\u904d\u5386 for ( int j = S [ i ]; j - S [ i ] < 2 * M ; j ++ ) { if ( dp [ j - S [ i ]] > INT_MIN ) dp [ j ] = max ( dp [ j ], dp [ j - S [ i ]] + F [ i ]); } } } int ans = INT_MIN ; for ( int i = 100000 ; i < 2 * M ; i ++ ) { if ( dp [ i ] >= 0 ) //TF\u503c\u5927\u4e8e0 \u663e\u7136\u8fd9\u91cc\u7684TS=i-100000>0 ans = max ( ans , dp [ i ] + i - 100000 ); // dp[i] + i \u5373 TS + TF\uff0c\u7136\u540e\u6062\u590d\u5750\u6807\u5e73\u79fb } printf ( \"%d \\n \" , ans ); } return 0 ; } \u72b6\u538bDP \u00b6 https://www.cnblogs.com/Tony-Double-Sky/p/9283254.html \u72b6\u538b\u5c31\u662f\u5c06\u95ee\u9898\u53ef\u80fd\u9047\u5230\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\u7528\u4e00\u4e2a\u552f\u4e00\u7684\u4e8c\u8fdb\u5236\u6570\u8868\u793a \u72b6\u538b\u4f4d\u8fd0\u7b97 \u5224\u65ad\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u662f\u4e0d\u662f\u7b49\u4e8e1\u3002 \u65b9\u6cd5\uff1aif(((1<<(i\u22121))&x)>0) \u5c061\u5de6\u79fbi-1\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5236\u9020\u4e86\u4e00\u4e2a\u53ea\u6709\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u5176\u4ed6\u4f4d\u4e0a\u90fd\u662f0\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u7136\u540e\u4e0ex\u505a\u4e0e\u8fd0\u7b97\uff0c\u5982\u679c\u7ed3\u679c>0\uff0c\u8bf4\u660ex\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u53cd\u4e4b\u5219\u662f0\u3002 \u5c06\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u66f4\u6539\u62101\u3002 \u65b9\u6cd5\uff1ax=x|(1<<(i\u22121)) \u8bc1\u660e\u65b9\u6cd5\u4e0e1\u7c7b\u4f3c\uff0c\u6b64\u5904\u4e0d\u518d\u91cd\u590d\u8bc1\u660e\u3002 \u628a\u4e00\u4e2a\u6570\u5b57\u4e8c\u8fdb\u5236\u4e0b\u6700\u9760\u53f3\u7684\u7b2c\u4e00\u4e2a1\u53bb\u6389\u3002 \u65b9\u6cd5\uff1ax=x&(x\u22121) \u7ebf\u6bb5\u6811 \u00b6 // https://leetcode.com/problems/range-sum-query-mutable/ \u7ebf\u6bb5\u6811\u4fdd\u5b58\u53ef\u53d8\u533a\u95f4\u548c // \u6570\u7ec4\u6cd5 class NumArray { public : NumArray ( vector < int > nums ) { n = nums . size (); tree . resize ( n * 2 ); buildTree ( nums ); } void buildTree ( vector < int >& nums ) { for ( int i = n ; i < n * 2 ; ++ i ) { tree [ i ] = nums [ i - n ]; } for ( int i = n - 1 ; i > 0 ; -- i ) { tree [ i ] = tree [ i * 2 ] + tree [ i * 2 + 1 ]; } } void update ( int i , int val ) { tree [ i += n ] = val ; while ( i > 0 ) { tree [ i / 2 ] = tree [ i ] + tree [ i ^ 1 ]; i /= 2 ; } } int sumRange ( int i , int j ) { int sum = 0 ; for ( i += n , j += n ; i <= j ; i /= 2 , j /= 2 ) { if (( i & 1 ) == 1 ) sum += tree [ i ++ ]; if (( j & 1 ) == 0 ) sum += tree [ j -- ]; } return sum ; } private : int n ; vector < int > tree ; }; // \u6784\u9020SegmentTreeNode\u7c7b /* * \u672c\u9898\u5b9e\u73b0\u7684\u51fd\u6570\uff1aNumArray \u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0csumRange\uff0cupdate * \u672c\u4ee3\u7801\u4f7f\u7528\u7ebf\u6bb5\u6811\u5b9e\u73b0\u8be5\u7c7b\uff0cNumArray \u5305\u542b\u4e00\u4e2a\u5b50\u7c7b SegmentTreeNode */ class NumArray { public : // \u6210\u5458\u53d8\u91cf\u4e0e\u5b50\u7c7b class SegmentTreeNode { public : int s , e ; SegmentTreeNode * left , * right ; int sum ; // \u7ebf\u6bb5\u6811\u6784\u9020\u51fd\u6570 SegmentTreeNode ( int s , int e ) : s ( s ), e ( e ), left ( nullptr ), right ( nullptr ), sum ( 0 ) { } // \u7ebf\u6bb5\u6811\u6790\u6784\u51fd\u6570 ~ SegmentTreeNode () { if ( this -> left != nullptr ) delete ( this -> left ); if ( this -> right != nullptr ) delete ( this -> right ); delete this ; } }; SegmentTreeNode * root = nullptr ; // \u6210\u5458\u65b9\u6cd5 /* * \u7c7b\u7684\u6784\u9020\u51fd\u6570 * @param nums \u6570\u7ec4 */ NumArray ( vector < int > nums ) { root = buildTree ( nums , 0 , nums . size () - 1 ); } /* * \u7ebf\u6bb5\u6811\u7684\u6784\u9020 * @param nums \u6570\u7ec4 * @param s \u8d77\u59cb\u7d22\u5f15 * @param e \u7ec8\u6b62\u7d22\u5f15 */ SegmentTreeNode * buildTree ( vector < int > nums , int s , int e ) { if ( s > e ) return nullptr ; SegmentTreeNode * ret = new SegmentTreeNode ( s , e ); if ( s == e ) { ret -> sum = nums [ s ]; } else { int mid = s + ( e - s ) / 2 ; // \u4e2d\u4f4d ret -> left = buildTree ( nums , s , mid ); ret -> right = buildTree ( nums , mid + 1 , e ); ret -> sum = ret -> left -> sum + ret -> right -> sum ; } return ret ; } void update ( int i , int val ) { update ( root , i , val ); } void update ( SegmentTreeNode * root , int pos , int val ) { if ( root -> s == root -> e ) // \u5982\u679c\u7ebf\u6bb5\u6811\u53ea\u6709\u4e00\u4e2a\u6570 root -> sum = val ; else { int mid = root -> s + ( root -> e - root -> s ) / 2 ; // \u7ebf\u6bb5\u6811\u4e2d\u4f4d if ( pos <= mid ) update ( root -> left , pos , val ); // \u5de6\u5b50\u6811\u4e2d\u66f4\u65b0\uff0c\u6ce8\u610f\u53d6\u7b49 else update ( root -> right , pos , val ); // \u53f3\u5b50\u6811\u4e2d\u66f4\u65b0 root -> sum = root -> left -> sum + root -> right -> sum ; // \u66f4\u65b0\u5404\u5c42\u7ed3\u70b9sum } } int sumRange ( int i , int j ) { return sumRange ( root , i , j ); } int sumRange ( SegmentTreeNode * root , int i , int j ) { if ( i > j ) swap ( i , j ); if ( root -> e == j && root -> s == i ) return root -> sum ; else { int mid = root -> s + ( root -> e - root -> s ) / 2 ; // \u7ebf\u6bb5\u6811\u4e2d\u4f4d if ( mid >= j ) return sumRange ( root -> left , i , j ); // \u5de6\u5b50\u6811\u4e2d\u6c42\u548c else if ( mid < i ) return sumRange ( root -> right , i , j ); // \u53f3\u5b50\u6811\u4e2d\u6c42\u548c else return sumRange ( root -> left , i , mid ) + sumRange ( root -> right , mid + 1 , j ); } } }; // \u6811\u72b6\u6570\u7ec4 class BinaryxexTree { public : BinaryxexTree ( vector < int >& s ) { buildTree ( s ); } BinaryxexTree () {}; void buildTree ( vector < int >& s ) { size = s . size (); nums = vector < int > ( size , 0 ); bit = vector < int > ( size + 1 , 0 ); for ( int i = 0 ; i < s . size (); ++ i ) update ( i , s [ i ]); nums = s ; } void update ( int x , int n ) { int val = n - nums [ x ]; nums [ x ] = n ; for ( int i = x + 1 ; i <= size ; i += lowbit ( i )) { bit [ i ] += val ; } } int sumRange ( int i , int j ) { if ( j < i || i < 0 ) return 0 ; if ( i == j ) return nums [ i ]; return getSum ( j ) - getSum ( i - 1 ); // i - 1 \u4e0d\u4f1a\u8d8a\u51fa\u4e0b\u754c } private : int lowbit ( int x ) { return x & ( - x ); } int getSum ( int x ) { int sum = 0 ; for ( int i = x + 1 ; i ; i -= lowbit ( i )) { sum += bit [ i ]; } return sum ; } vector < int > bit ; vector < int > nums ; int size ; }; class NumArray { public : NumArray ( vector < int > nums ) { tree . buildTree ( nums ); } void update ( int i , int val ) { tree . update ( i , val ); } int sumRange ( int i , int j ) { return tree . sumRange ( i , j ); } private : BinaryxexTree tree ; }; \u626b\u63cf\u7ebf \u00b6 \u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf \u00b6 // \u84dd\u6865\u676f 2017_10 \u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf \u7ecf\u5178\u9898 // https://blog.csdn.net/konghhhhh/article/details/78236036 #include <stdio.h> #include <algorithm> using namespace std ; struct Line { int x1 , x2 , h , f ; //\u5de6\u53f3\u5750\u6807\uff0c\u7eb5\u5750\u6807\uff08\u9ad8\u5ea6\uff09\uff0cf=1\u4e3a\u5165\u8fb9\uff0cf=-1\u4e3a\u51fa\u8fb9 Line () {} Line ( int _x1 , int _x2 , int _h , int _f ) : x1 ( _x1 ), x2 ( _x2 ), h ( _h ), f ( _f ) {} bool operator < ( const Line & l1 ) { return h < l1 . h ; } }; struct SegTree { int pl , pr , cnt , len ; // \u5de6\u7aef\u70b9\u7f16\u53f7\uff0c\u53f3\u7aef\u70b9\u7f16\u53f7\uff0c\u88ab\u8986\u76d6\u6b21\u6570\uff0c\u4e24\u4e2a\u7aef\u70b9\u4e4b\u95f4\u88ab\u8986\u76d6\u7684\u957f\u5ea6 SegTree * lson , * rson ; SegTree () : cnt ( 0 ), len ( 0 ) {} }; const int N = 10000 ; int n , ans ; int X [ N << 1 ]; //\u8bb0\u5f55\u6240\u6709\u7684\u6a2a\u5750\u6807 Line lines [ N ]; SegTree * buildTree ( int pl , int pr ) { SegTree * p = new SegTree (); p -> pl = pl ; p -> pr = pr ; if ( pl == pr ) return p ; int mid = (( pl + pr ) >> 1 ); p -> lson = buildTree ( pl , mid ); p -> rson = buildTree ( mid + 1 , pr ); return p ; } void updateLength ( SegTree * pTree , int tl , int tr ) { if ( pTree -> cnt ) { pTree -> len = X [ tr ] - X [ tl - 1 ]; //\u5c06\u533a\u95f4\u6811\u4e0a\u7684\u7aef\u70b9\uff08\u5e8f\u53f7\uff09\u53cd\u5165\u5230X\u4e2d\u6c42\u5f97\u4e8c\u7ef4\u5750\u6807\u4e0a\u7684\u5b9e\u9645\u6a2a\u5750\u6807 } else if ( tl == tr ) { pTree -> len = 0 ; } else { //\u8d1f\u6570 pTree -> len = pTree -> lson -> len + pTree -> rson -> len ; } } void update ( SegTree * tree , int pl , int pr , int value ) // \u81ea\u5e95\u5411\u4e0a\u7684\u66f4\u65b0cnt\u548clen { int tl = tree -> pl ; int tr = tree -> pr ; if ( pl <= tl && pr >= tr ) { tree -> cnt += value ; updateLength ( tree , tl , tr ); return ; } int m = ( tl + tr ) >> 1 ; if ( pl <= m ) update ( tree -> lson , pl , pr , value ); if ( pr > m ) update ( tree -> rson , pl , pr , value ); updateLength ( tree , tl , tr ); } int main () { scanf ( \"%d\" , & n ); int x1 , x2 , y1 , y2 ; int index = 0 ; for ( int i = 0 ; i < n ; i ++ ) { scanf ( \"%d %d %d %d\" , & x1 , & y1 , & x2 , & y2 ); X [ index ] = x1 ; lines [ index ++ ] = Line ( x1 , x2 , y1 , 1 ); X [ index ] = x2 ; lines [ index ++ ] = Line ( x1 , x2 , y2 , -1 ); } sort ( X , X + index ); sort ( lines , lines + index ); // \u521d\u59cb\u5316\u7ebf\u6bb5\u6811 \u5148\u5bf9index\u53bb\u91cd \u7136\u540e\u5f97\u5230X_end\u4e2a\u4e0d\u91cd\u590d\u7684\u6a2a\u5750\u6807\u503c \u6240\u4ee5\u5171\u6709X_end - 1 \u4e2a\u79bb\u6563\u7684\u533a\u95f4 int X_end = unique ( X , X + index ) - X ; SegTree * root = buildTree ( 1 , X_end ); for ( int i = 0 ; i < index ; i ++ ) { int pl = lower_bound ( X , X + X_end , lines [ i ]. x1 ) - X ; int pr = lower_bound ( X , X + X_end , lines [ i ]. x2 ) - X ; update ( root , pl + 1 , pr , lines [ i ]. f ); ans += root -> len * ( lines [ i + 1 ]. h - lines [ i ]. h ); } printf ( \"%d \\n \" , ans ); return 0 ; } \u6811\u72b6\u6570\u7ec4 \u00b6 https://blog.csdn.net/bestsort/article/details/80796531 \u9ad8\u7cbe\u5ea6 \u00b6 \u9ad8\u7cbe\u5ea6\u8fdb\u5236\u8f6c\u6362 \u00b6 // \u4e86\u89e3\u51e0\u4e2a\u91cd\u8981\u7684 ASCII \u7801 // '0': 48 // 'A': 65 // 'a': 97 #include <iostream> #include <cstring> using namespace std ; const int maxn = 1000 ; int t [ maxn ]; int d [ maxn ]; // \u8f6c\u6362\u8fc7\u7a0b\u4e2d\u7684\u5341\u8fdb\u5236\u6570 char str1 [ maxn ], str2 [ maxn ]; // \u6e90\u8fdb\u5236\u6570\u4e0e\u76ee\u6807\u8fdb\u5236\u6570 int n , m ; // \u6e90\u8fdb\u5236\u4e0e\u76ee\u6807\u8fdb\u5236 void solve () { int i , len , k ; len = strlen ( str1 ); for ( i = len - 1 ; i >= 0 ; -- i ) { // t[0] \u662f t \u6700\u4f4e\u4f4d\uff0cstr1[0] \u662f str1 \u7684\u6700\u9ad8\u4f4d int cur ; if ( str1 [ i ] <= '9' ) // str1[i] \u662f\u6570\u5b57 cur = str1 [ i ] - '0' ; else if ( str1 [ i ] < 'a' ) // str1[i] \u662f\u5927\u5199\u5b57\u6bcd cur = str1 [ i ] - ( 'A' - 10 ); else // str1[i] \u662f\u5c0f\u5199\u5b57\u6bcd cur = str1 [ i ] - ( 'a' - 36 ); t [ len - 1 - i ] = cur ; } for ( k = 0 ; len ;) { for ( i = len - 1 ; i >= 0 ; -- i ) { // \u4ece t \u9ad8\u4f4d\u5f00\u59cb t [ i ] += t [ i + 1 ] % m * n ; t [ i + 1 ] /= m ; } d [ k ++ ] = t [ 0 ] % m ; t [ 0 ] /= m ; while ( len > 0 && ! t [ len - 1 ]) len -- ; // \u53bb\u6389\u9ad8\u4f4d\u7684 0 } str2 [ k ] = '\\0' ; for ( i = 0 ; i < k ; i ++ ) { // str2[0] \u662f str2 \u7684\u6700\u9ad8\u4f4d\uff0c\u5faa\u73af\u4ece\u4f4e\u4f4d\u5f00\u59cb char cur ; if ( d [ i ] < 10 ) // \u5c06\u4ee5\u6570\u5b57\u8868\u793a cur = ( char )( d [ i ] + '0' ); else if ( d [ i ] < 36 ) // \u5c06\u4ee5\u5927\u5199\u5b57\u6bcd\u8868\u793a cur = ( char )( d [ i ] - 10 + 'A' ); else // \u5c06\u4ee5\u5c0f\u5199\u5b57\u6bcd\u8868\u793a cur = ( char )( d [ i ] - 36 + 'a' ); str2 [ k - 1 - i ] = cur ; } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int T ; cin >> T ; while ( T -- ) { cin >> n >> m >> str1 ; // \u6e90\u8fdb\u5236\uff0c\u76ee\u6807\u8fdb\u5236\uff0c\u6e90\u8fdb\u5236\u6570\u5b57 solve (); cout << n << \" \" << str1 << '\\n' << m << \" \" << str2 << '\\n' << '\\n' ; } return 0 ; } \u5927\u6574\u6570 \u00b6 struct bign { // big number int d [ 1000 ]; // \u5b58\u50a8\u5927\u6570\uff0cd[0]\u662f\u6700\u4f4e\u4f4d int len ; // \u8bb0\u5f55\u957f\u5ea6 bign () { // \u6784\u9020\u65b9\u6cd5 fill_n ( d , sizeof ( d ), 0 ); // \u8fd9\u4e00\u6b65\u4e0d\u53ef\u5ffd\u7565\uff01 // fill_n \u6765\u81ea #include<algorithm> len = 0 ; } }; bign change ( char str []) { // \u6574\u6570\u8f6c\u6362\u4e3a bign bign a ; a . len = strlen ( str ); // bign \u7684\u957f\u5ea6\u5373\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 for ( int i = 0 ; i < a . len ; i ++ ) { a . d [ i ] = str [ a . len - i - 1 ] - '0' ; // \u6ce8\u610f\uff0c\u9006\u7740\u8d4b\u503c\uff0cstr[0]\u662f\u6700\u9ad8\u4f4d return a ; } int compare ( bign a , bign b ) { if ( a . len > b . len ) return 1 ; else if ( a . len < b . len ) return -1 ; else { for ( int i = a . len - 1 ; i >= 0 ; i -- ) { // \u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u6bd4\u8f83 if ( a . d [ i ] > b . d [ i ]) return 1 ; else if ( a . d [ i ] < b . d [ i ]) return -1 ; } return 0 ; // \u4e24\u6570\u76f8\u7b49 } } void print ( bign a ) { for ( int i = a . len - 1 ; i >= 0 ; i -- ) cout << a . d [ i ]; } bign add ( bign a , bign b ) { // \u9ad8\u7cbe\u5ea6 a + b bign c ; // c = a + b int carry = 0 ; // \u8fdb\u4f4d for ( int i = 0 ; i < a . len || i < b . len ; i ++ ) { int t = a . d [ i ] + b . d [ i ] + carry ; c . d [ c . len ++ ] = t % 10 ; carry = t / 10 ; } if ( carry ) c . d [ c . len ++ ] = carry ; return c ; } bign sub ( bign a , bign b ) { bign c ; for ( int i = 0 ; i < a . len || i < b . len ; i ++ ) { if ( a . d [ i ] < b . d [ i ]) { a . d [ i + 1 ] -- ; a . d [ i ] += 10 ; } c . d [ c . len ++ ] = a . d [ i ] - b . d [ i ]; } while ( c . len - 1 >= 1 && c . d [ c . len - 1 ] == 0 ) { c . len -- ; // \u53bb\u9664\u6700\u9ad8\u4f4d\u76840\uff0c\u540c\u65f6\u81f3\u5c11\u4fdd\u7559\u4e00\u4f4d\u6700\u4f4e\u4f4d } return c ; } bign multi ( bign a , int b ) { bign c ; int carry = 0 ; // \u8fdb\u4f4d for ( int i = 0 ; i < a . len ; i ++ ) { int t = a . d [ i ] * b + carry ; c . d [ c . len ++ ] = t % 10 ; carry = t / 10 ; } while ( carry ) { c . d [ c . len ++ ] = carry % 10 ; carry /= 10 ; } return c ; } bign divide ( bign a , int b int & r ) { // \u8fd4\u56de\u5546\uff0cr\u4e3a\u4f59\u6570 bign c ; c . len = a . len ; for ( int i = a . len - 1 ; i >= 0 ; i -- ) { // \u4ece\u9ad8\u4f4d\u5f00\u59cb r = r * 10 + a . d [ i ]; // \u52a0\u4e0a\u4e0a\u4e00\u4f4d\u9057\u7559\u7684\u4f59\u6570 if ( r < b ) c . d [ i ] = 0 ; // \u8be5\u4f4d\u4e0d\u591f\u9664\uff0c\u4e3a0 else { // \u591f\u9664 c . d [ i ] = r / b ; // \u5546 r = r % b ; } } while ( c . len - 1 >= 1 && c . d [ c . len - 1 ] == 0 ) { c . len -- ; // \u53bb\u9664\u6700\u9ad8\u4f4d\u76840\uff0c\u540c\u65f6\u81f3\u5c11\u4fdd\u7559\u4e00\u4f4d\u6700\u4f4e\u4f4d } return c ; }","title":"\u91cd\u70b9\u5185\u5bb9"},{"location":"Coding%20Knowledge/#_1","text":"","title":"\u91cd\u70b9\u5185\u5bb9"},{"location":"Coding%20Knowledge/#_2","text":"","title":"\u57fa\u7840\u7b97\u6cd5"},{"location":"Coding%20Knowledge/#_3","text":"","title":"\u9012\u5f52"},{"location":"Coding%20Knowledge/#_4","text":"# include <iostream> using namespace std ; /** - \u6253\u5370 Hanoi\u5854\u79fb\u52a8\u8fc7\u7a0b - @param n \u5854\u7684\u5c42\u6570 - @param from \u5854\u7684\u5f00\u59cb\u4f4d\u7f6e - @param to \u5854\u7684\u7ed3\u675f\u4f4d\u7f6e - @param help \u4e2d\u4ecb */ void printHanoiTower ( const int n , const string & from , const string & to , const string & help ) { if ( n == 1 ) // \u9012\u5f52\u7ec8\u6b62 cout << \"move \" << n << \" from \" << from << \" to \" << to << endl ; else { printHanoiTower ( n - 1 , from , help , to ); // \u79fb\u52a8\u4e0a\u9762\u7684 n - 1 \u5c42 cout << \"move \" << n << \" from \" << from << \" to \" << to << endl ; // \u79fb\u52a8\u6700\u4e0b\u9762\u4e00\u5c42 printHanoiTower ( n - 1 , help , to , from ); // \u5c06\u4e0a\u9762\u7684 n - 1 \u5c42\u79fb\u56de } } int main () { int n ; cin >> n ; string from = \"A\" ; string to = \"B\" ; string help = \"C\" ; printHanoiTower ( n , from , to , help ); return 0 ; }","title":"\u6c49\u8bfa\u5854"},{"location":"Coding%20Knowledge/#_5","text":"","title":"\u6392\u5e8f"},{"location":"Coding%20Knowledge/#_6","text":"// \u5feb\u901f\u6392\u5e8f\u5404\u7c7b\u5b9e\u73b0 // \u5feb\u901f\u6392\u5e8f.\u4e09\u6307\u9488\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f \u4e09\u6307\u9488\u5206\u533a\u6cd5 // \u7c7b\u6bd4\u5355\u5411\u626b\u63cf\u6cd5\uff0c\u589e\u52a0\u7684\u662f\u5bf9\u5c0f\u4e8e\u3001\u7b49\u4e8e\u4e24\u79cd\u60c5\u51b5\u7684\u533a\u5206 #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int pivot = nums [ low ]; int lt = low ; // less than \u6307\u5411\u9996\u4e2a\u4e0d\u5c0f\u4e8e pivot \u7684\u5143\u7d20 int i = low + 1 ; // pointer int gt = high ; // greater than \u6307\u5411\u6700\u540e\u4e00\u4e2a\u4e0d\u5927\u4e8e pivot \u7684\u5143\u7d20 while ( i <= gt ) { if ( nums [ i ] < pivot ) swap ( nums [ i ++ ], nums [ lt ++ ]); else if ( nums [ i ] > pivot ) swap ( nums [ i ], nums [ gt -- ]); else i ++ ; } // lt \u5230 gt \u4e4b\u95f4\u7684\u6570\u90fd\u7b49\u4e8e pivot\uff0c\u4e0d\u5fc5\u518d\u6392\u5e8f quickSort ( nums , low , lt - 1 ); quickSort ( nums , gt + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; } // \u5feb\u901f\u6392\u5e8f.\u5355\u5411\u626b\u63cf\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f \u4e00\u904d\u5355\u5411\u626b\u63cf\u6cd5 #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5c06\u6570\u7ec4\u6309 pivot \u5207\u5206 * @param nums \u88ab\u5207\u5206\u6570\u7ec4\uff0cnums[high]\u4e3apivot * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 * @return pivot \u7d22\u5f15 */ int partition ( vector < int > & nums , int low , int high ) { int pivot = nums [ high ]; // \u4ee5\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e3a pivot int i = low - 1 ; // i \u53ca\u5176\u524d\u9762\u7684\u5143\u7d20\u5c0f\u4e8e\u7b49\u4e8e pivot for ( int j = low ; j < high ; j ++ ) { // \u6ce8\u610f\u5728\u5faa\u73af\u8fc7\u7a0b\u4e2d\uff0cpivot \u4e0d\u5e94\u88ab\u4ea4\u6362 if ( nums [ j ] <= pivot ) swap ( nums [ ++ i ], nums [ j ]); } swap ( nums [ high ], nums [ i + 1 ]); // \u4ea4\u6362 pivot \u5230\u5408\u9002\u4f4d\u7f6e return i + 1 ; } /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int par = partition ( nums , low , high ); quickSort ( nums , low , par - 1 ); quickSort ( nums , par + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; } // \u5feb\u901f\u6392\u5e8f.\u53cc\u5411\u626b\u63cf\u5206\u533a\u6cd5.cpp // \u5feb\u901f\u6392\u5e8f #include <iostream> #include <vector> #include <algorithm> using namespace std ; /** * \u5c06\u6570\u7ec4\u6309 pivot \u5207\u5206 * @param nums \u88ab\u5207\u5206\u6570\u7ec4\uff0cnums[high]\u4e3apivot * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 * @return pivot \u7d22\u5f15 */ int partition ( vector < int > & nums , int low , int high ) { int pivot = nums [ low ]; int left = low + 1 ; int right = high ; while ( left <= right ) { // \u5fc5\u987b\u53d6\u7b49 while ( left <= right && nums [ left ] <= pivot ) left ++ ; // left \u6307\u5411\u9996\u4e2a\u5927\u4e8e pivot \u7684\u5143\u7d20 while ( left <= right && nums [ right ] > pivot ) right -- ; // right \u6307\u5411\u6700\u540e\u4e00\u4e2a\u5c0f\u4e8e\u7b49\u4e8e pivot \u7684\u5143\u7d20 if ( left < right ) // \u5426\u5219\u5143\u7d20\u4e0e\u81ea\u8eab\u4ea4\u6362\u6ca1\u6709\u610f\u4e49 swap ( nums [ left ], nums [ right ]); } swap ( nums [ right ], nums [ low ]); // right \u6307\u5411\u6700\u540e\u4e00\u4e2a \u5c0f\u4e8e\u7b49\u4e8e pivot \u7684\u5143\u7d20 return right ; } /** * \u5feb\u901f\u6392\u5e8f * @param nums \u88ab\u6392\u5e8f\u6570\u7ec4 * @param low \u9996\u4e2a\u5143\u7d20\u7d22\u5f15 * @param high \u672b\u5c3e\u5143\u7d20\u7d22\u5f15 */ void quickSort ( vector < int > & nums , int low , int high ) { if ( low < high ) { // \u4e0d\u8981\u5ffd\u7565\u8be5\u5224\u65ad\uff0c\u5f52\u5e76\u6392\u5e8f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u5224\u65ad int par = partition ( nums , low , high ); quickSort ( nums , low , par - 1 ); quickSort ( nums , par + 1 , high ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; cin >> n ; vector < int > nums ( n ); for ( int i = 0 ; i < n ; i ++ ) { cin >> nums [ i ]; } quickSort ( nums , 0 , n - 1 ); // \u540e\u4e24\u4e2a\u53c2\u6570\u662f\uff1a\u9996\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u548c\u672b\u5c3e\u5143\u7d20\u7684\u7d22\u5f15 for ( int i = 0 ; i < n ; i ++ ) { cout << nums [ i ] << \" \" ; } return 0 ; }","title":"\u5feb\u6392"},{"location":"Coding%20Knowledge/#_7","text":"const int maxn = 100 ; // heap \u4e3a\u5806\uff0cheap[1] \u4e3a\u6839\u7ed3\u70b9\uff0cn \u4e3a\u5143\u7d20\u4e2a\u6570 int heap [ maxn ], n = 10 ; // \u5bf9 heap \u6570\u7ec4\u5728 [low, high] \u8303\u56f4\u8fdb\u884c\u5411\u4e0b\u8c03\u6574 // \u5176\u4e2d low \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\u7684\u6570\u7ec4\u4e0b\u6807\uff0chigh \u4e00\u822c\u4e3a\u5806\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u6570\u7ec4\u4e0b\u6807 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) void downAdjust ( int low , int high ) { int i = low , j = i * 2 ; // i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a\u5176\u5de6\u5b69\u5b50 while ( j <= high ) { // \u5b58\u5728\u5b69\u5b50\u7ed3\u70b9 // \u5982\u679c\u53f3\u5b69\u5b50\u5b58\u5728\uff0c\u4e14\u53f3\u5b69\u5b50\u7684\u503c\u5927\u4e8e\u5de6\u5b69\u5b50 if ( j + 1 <= high && heap [ j + 1 ] > heap [ j ]) j ++ ; // \u8ba9 j \u5b58\u50a8\u53f3\u5b69\u5b50\u4e0b\u6807 // \u5982\u679c\u5b69\u5b50\u4e2d\u7684\u6700\u5927\u6743\u503c\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u5927 if ( heap [ j ] > heap [ i ]) { swap ( heap [ j ], heap [ i ]); // \u4ea4\u6362\u6700\u5927\u6743\u503c\u7684\u5b69\u5b50\u4e0e\u6b32\u8c03\u6574\u7ed3\u70b9i i = j ; // \u4fdd\u6301 i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a i \u7684\u5de6\u5b69\u5b50 j = i * 2 ; } else break ; // \u5b69\u5b50\u7684\u6743\u503c\u5747\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u5c0f\uff0c\u8c03\u6574\u7ed3\u675f } } // \u5efa\u5806\uff1a\u65f6\u95f4\u590d\u6742\u5ea6O(n)\uff0c\u8bc1\u660e\u53ef\u53c2\u8003\u300a\u7b97\u6cd5\u5bfc\u8bba\u300b void createHeap () { for ( int i = n / 2 ; i >= 1 ; i -- ) { downAdjust ( i , n ); } } // \u5220\u9664\u5806\u9876\u5143\u7d20\uff1a\u6bcf\u6b21\u5220\u9664\u5806\u4e2d\u5143\u7d20\u53ea\u80fd\u5220\u9664\u5f53\u524d\u5806\u9876 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) void deleteTop () { heap [ 1 ] = heap [ n -- ]; // \u7528\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u8986\u76d6\u5806\u9876\u5143\u7d20\uff0c\u5e76\u8ba9\u5143\u7d20\u4e2a\u6570\u51cf1 downAdjust ( 1 , n ); // \u5411\u4e0b\u8c03\u6574\u5806\u9876\u5143\u7d20 } // \u5411\u4e0a\u8c03\u6574\uff1a\u7528\u4e8e\u6dfb\u52a0\u5143\u7d20\u5230\u5806\u65f6\uff0c\u5143\u7d20\u6dfb\u52a0\u5230\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u540e\u8fdb\u884c\u8c03\u6574 // \u65f6\u95f4\u590d\u6742\u5ea6O(log n) // \u5bf9 heap \u6570\u7ec4\u5728 [low, high] \u8303\u56f4\u8fdb\u884c\u5411\u4e0a\u8c03\u6574 // \u5176\u4e2d low \u4e00\u822c\u8bbe\u7f6e\u4e3a1\uff0chigh \u8868\u793a\u6b32\u8c03\u6574\u7ed3\u70b9\u7684\u6570\u7ec4\u4e0b\u6807 void upAdjust ( int low , int high ) { int i = high , j = i / 2 ; // i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a\u5176\u7236\u4eb2 while ( j >= low ) { // \u7236\u4eb2\u5728 [low, high] \u8303\u56f4\u5185 if ( heap [ j ] < heap [ i ]) { swap ( heap [ j ], heap [ i ]); // \u4ea4\u6362\u7236\u4eb2\u548c\u6b32\u8c03\u6574\u7ed3\u70b9 i = j ; // \u4fdd\u6301 i \u4e3a\u6b32\u8c03\u6574\u7ed3\u70b9\uff0cj \u4e3a i \u7684\u7236\u4eb2 j = i / 2 ; } else break ; // \u7236\u4eb2\u6743\u503c\u6bd4\u6b32\u8c03\u6574\u7ed3\u70b9i\u7684\u6743\u503c\u5927\uff0c\u8c03\u6574\u7ed3\u675f } } // \u6dfb\u52a0\u5143\u7d20x void insert ( int x ) { heap [ ++ n ] = x ; // \u8ba9\u5143\u7d20\u4e2a\u6570\u52a01\uff0c\u7136\u540e\u5c06\u6570\u7ec4\u672b\u4f4d\u8d4b\u503c\u4e3ax upAdjust ( 1 , n ); // \u5411\u4e0a\u8c03\u6574\u65b0\u52a0\u5165\u7684\u7ed3\u70b9 } // \u5806\u6392\u5e8f void heapSort () { createHeap (); // \u5efa\u5806 for ( int i = n ; i > 1 ; i -- ) { // \u5012\u7740\u679a\u4e3e\uff0c\u76f4\u81f3\u5806\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20 swap ( heap [ i ], heap [ 1 ]); // \u4ea4\u6362 heap[i] \u4e0e\u5806\u9876 downAdjust ( 1 , i - 1 ); // \u8c03\u6574\u5806\u9876 } }","title":"\u5806\u6392"},{"location":"Coding%20Knowledge/#_8","text":"// LeetCode_210 https://leetcode.com/problems/course-schedule-ii/ class Solution { public : vector < int > findOrder ( int numCourses , vector < pair < int , int >>& prerequisites ) { vector < vector < int >> graph ( numCourses , vector < int > ()); vector < int > inDegree ( numCourses ); // \u5165\u5ea6\u4e3a 0 \u65f6\u9876\u70b9\u53ef\u4ee5\u5220\u9664 vector < int > res ; queue < int > q ; // \u5b58\u50a8\u5165\u5ea6\u4e3a 0 \u7684\u9876\u70b9 int cnt = 0 ; // \u653e\u5165 res \u7684\u5143\u7d20\u4e2a\u6570 for ( auto & p : prerequisites ) { graph [ p . second ]. push_back ( p . first ); inDegree [ p . first ] ++ ; } for ( int i = 0 ; i < numCourses ; i ++ ) if ( inDegree [ i ] == 0 ) q . push ( i ); while ( ! q . empty ()){ int cur = q . front (); q . pop (); res . push_back ( cur ); cnt ++ ; for ( auto j : graph [ cur ]){ inDegree [ j ] -- ; if ( inDegree [ j ] == 0 ) q . push ( j ); } } if ( cnt < numCourses ) { return vector < int > (); } return res ; } };","title":"\u62d3\u6251\u6392\u5e8f"},{"location":"Coding%20Knowledge/#_9","text":"","title":"\u67e5\u627e"},{"location":"Coding%20Knowledge/#_10","text":"// \u4e8c\u5206\u641c\u7d22\u3001lower_bound\u3001upper_bound \u7684\u5b9e\u73b0 // lower_bound.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217\uff0cx\u4e3a\u6b32\u67e5\u8be2\u7684\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8ex\u7684\u5143\u7d20\u7684\u4f4d\u7f6e // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right] = [0, n] int lower_bound ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left < right ) { // left==right \u610f\u5473\u7740\u627e\u5230\u552f\u4e00\u4f4d\u7f6e mid = left + ( right - left ) / 2 ; if ( a [ mid ] >= x ) right = mid ; else left = mid + 1 ; } return left ; } // upper_bound.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217\uff0cx\u4e3a\u6b32\u67e5\u8be2\u7684\u6570\uff0c\u51fd\u6570\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8ex\u7684\u5143\u7d20\u7684\u4f4d\u7f6e // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right] = [0, n] int upper_bound ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left < right ) { // left==right \u610f\u5473\u7740\u627e\u5230\u552f\u4e00\u4f4d\u7f6e mid = left + ( right - left ) / 2 ; if ( a [ mid ] > x ) right = mid ; else left = mid + 1 ; } return left ; } // \u4e8c\u5206\u641c\u7d22.cpp // a\u4e3a\u9012\u589e\u5e8f\u5217 // n\u662fa\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u67e5\u8be2\u533a\u95f4\u662f[left, right]\uff0c\u4f20\u5165\u521d\u503c\u662f[0, n - 1] int binarySearch ( int a [], int left , int right , int x ) { int mid ; // mid\u4e3aleft\u548cright\u7684\u4e2d\u70b9 while ( left <= right ) { // \u5982\u679c\u5927\u4e8e\uff0c\u65e0\u6cd5\u5f62\u6210\u95ed\u533a\u95f4 mid = left + ( right - left ) / 2 ; // \u76f8\u5bf9\u5730\u907f\u514d\u6ea2\u51fa if ( a [ mid ] == x ) return mid ; // \u627e\u5230x\uff0c\u8fd4\u56de\u4e0b\u6807 else if ( a [ mid ] > x ) right = mid - 1 ; // \u5f80\u5de6\u5b50\u533a\u95f4\u67e5\u627e else left = mid + 1 ; // \u5f80\u53f3\u5b50\u533a\u95f4\u67e5\u627e } return -1 ; // \u67e5\u627e\u5931\u8d25 }","title":"\u4e8c\u5206\u67e5\u627e"},{"location":"Coding%20Knowledge/#_11","text":"// \u5e76\u67e5\u96c6\u6a21\u677f\uff1a\u521d\u59cb\u5316\u3001\u67e5\u627e\u3001\u5408\u5e76\u3001\u8def\u5f84\u538b\u7f29 void init () { for ( int i = 0 ; i < n ; i ++ ) { father [ i ] = i ; // \u4ee4father[i]\u4e3a-1\u4e5f\u53ef } } // \u9012\u63a8\u67e5\u627e int findFather ( int x ) { while ( x != father [ x ]) { x = father [ x ]; } return x ; } // \u9012\u5f52\u67e5\u627e int findFather ( int x ) { if ( x == father [ x ]) return x ; // \u5982\u679c\u627e\u5230\u6839\u7ed3\u70b9\uff0c\u5219\u8fd4\u56de\u6839\u7ed3\u70b9\u7f16\u53f7x else return findFather ( father [ x ]); // \u5426\u5219\uff0c\u9012\u5f52\u5224\u65adx\u7684\u7236\u4eb2\u7ed3\u70b9\u662f\u5426\u662f\u6839\u7ed3\u70b9 } // \u5408\u5e76 void Union ( int a , int b ) { int fa = findFather ( a ); int fb = findFather ( b ); if ( fa != fb ) { father [ fa ] = fb ; } } // \u8def\u5f84\u538b\u7f29 \u8fed\u4ee3\u5b9e\u73b0 int findFather ( int x ) { // \u7531\u4e8ex\u5728\u4e0b\u9762\u7684while\u4e2d\u4f1a\u53d8\u6210\u6839\u7ed3\u70b9\uff0c\u56e0\u6b64\u5148\u628a\u539fx\u4fdd\u5b58 int cur = x ; while ( x != father [ x ]) x = father [ x ]; // x\u6b64\u65f6\u4e3a\u6839\u7ed3\u70b9\uff0c\u4e0b\u9762\u5c06\u8def\u5f84\u4e0a\u7684\u6240\u6709\u7ed3\u70b9\u7684father\u90fd\u6539\u6210\u6839\u7ed3\u70b9 while ( cur != father [ cur ]) { int z = cur ; // \u56e0\u4e3acur\u8981\u88abfather[cur]\u8986\u76d6\uff0c\u6240\u4ee5\u5148\u4fdd\u5b58 cur = father [ cur ]; // \u56de\u6eaf\u7236\u7ed3\u70b9 father [ z ] = x ; // \u5c06\u539f\u5148\u7684\u7ed3\u70b9\u7684\u7236\u4eb2\u6539\u4e3a\u6839\u7ed3\u70b9 } return x ; // \u8fd4\u56de\u6839\u7ed3\u70b9 } // \u8def\u5f84\u538b\u7f29 \u9012\u5f52\u5b9e\u73b0 int findFather ( int v ) { if ( v == father [ v ]) return v ; // \u627e\u5230\u6839\u7ed3\u70b9 father [ v ] = findFather ( father [ v ]); return father [ v ]; }","title":"\u5e76\u67e5\u96c6"},{"location":"Coding%20Knowledge/#_12","text":"\u5224\u65ad\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u662f\u4e0d\u662f\u7b49\u4e8e1 if(((1<<(i\u22121))&x)>0) \u5c061\u5de6\u79fbi-1\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5236\u9020\u4e86\u4e00\u4e2a\u53ea\u6709\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u5176\u4ed6\u4f4d\u4e0a\u90fd\u662f0\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u7136\u540e\u4e0ex\u505a\u4e0e\u8fd0\u7b97\uff0c\u5982\u679c\u7ed3\u679c>0\uff0c\u8bf4\u660ex\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u53cd\u4e4b\u5219\u662f0\u3002 \u5c06\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u66f4\u6539\u62101\u3002 x=x|(1<<(i\u22121)) \u628a\u4e00\u4e2a\u6570\u5b57\u4e8c\u8fdb\u5236\u4e0b\u6700\u9760\u53f3\u7684\u7b2c\u4e00\u4e2a1\u53bb\u6389 x=x&(x\u22121) \u5224\u65adn\u662f\u4e0d\u662f2\u7684\u6b21\u5e42 (n > 0 && ((n & (n - 1)) == 0) \u56e0\u4e3a2\u7684\u6b21\u5e42 \u4e8c\u8fdb\u5236\u4e0b\u53ea\u6709\u4e00\u4e2a1 \u6240\u4ee5 \u51cf\u4e00\u4ee5\u540e \u6700\u9ad8\u4f4d\u53d8\u4e3a0 \u540e\u9762\u7684\u90fd\u53d8\u4e3a1\uff0c &\u4e4b\u540e \u5c31\u53d8\u4e3a0\u4e86 \u6240\u4ee5\u672c\u9898\u4e2d i\u76841\u7684\u4e2a\u6570 \u7b49\u4e8e\u4ed6\u53bb\u6389\u6700\u4f4e\u4f4d\u76841\u4e4b\u540e\u7684i&(i-1)\u76841\u7684\u4e2a\u6570\u518d+1","title":"\u4f4d\u8fd0\u7b97"},{"location":"Coding%20Knowledge/#_13","text":"// \u5206\u6570\u7684\u8868\u793a // \u5e38\u7528\u5047\u5206\u6570\u7684\u5f62\u5f0f\u8868\u793a // \u8bbe\u5206\u6bcd\u4e3a\u975e\u8d1f\u6570\uff1b\u5982\u679c\u5206\u6570\u4e3a\u8d1f\uff0c\u4ee4\u5206\u5b50\u4e3a\u8d1f\u5373\u53ef // \u5206\u5b50\u548c\u5206\u6bcd\u6ca1\u6709\u9664\u4e861\u4ee5\u5916\u7684\u516c\u7ea6\u6570\uff0c\u5373\u603b\u662f\u7ea6\u5206 struct Fraction { // \u5206\u6570 int up , down ; // \u5206\u5b50\uff0c\u5206\u6bcd } // \u5206\u6570\u5316\u7b80 // \u5982\u679c\u5206\u6bcd\u4e3a\u8d1f\u6570\uff0c\u5206\u5b50\u3001\u5206\u6bcd\u90fd\u53d6\u76f8\u53cd\u6570 // \u5982\u679c\u5206\u5b50\u4e3a0\uff0c\u4ee4\u5206\u6bcd\u4e3a1 // \u7ea6\u5206\uff1a\u6c42\u51fa\u5206\u5b50\u7edd\u5bf9\u503c\u4e0e\u5206\u6bcd\u7edd\u5bf9\u503c\u7684\u6700\u5927\u516c\u7ea6\u6570d\uff0c\u4ee4\u5206\u5b50\u5206\u6bcd\u540c\u65f6\u9664\u4ee5d Fraction reduction ( Fraction result ){ if ( result . down < 0 ){ result . down = - result . down ; result . up = - result . up ; } if ( result . up == 0 ) result . down = 1 ; else { int d = GCD ( abs ( result . up ), abs ( result . down )); result . up /= d ; result . down /= d ; } return result ; } // \u5206\u6570\u7684\u52a0\u6cd5 Fraction add ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . down + f2 . up * f1 . down ; result . down = f1 . down * f2 . down ; return reduction ( result ); } // \u5206\u6570\u7684\u51cf\u6cd5 Fraction minu ( Fraction f ){ f . up = - f . up ; return reduction ( f ); } Fraction minu ( Fraction f1 , Fraction f2 ){ return add ( f1 , minu ( f2 )); } // \u5206\u6570\u7684\u4e58\u6cd5 Fraction multi ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . up ; result . down = f1 . down * f2 . down ; return reduction ( result ); } // \u5206\u6570\u7684\u9664\u6cd5 Fraction divide ( Fraction f1 , Fraction f2 ){ Fraction result ; result . up = f1 . up * f2 . down ; result . down = f1 . down * f2 . up ; return reduction ( result ); } // \u8f93\u51fa\u5206\u6570\u524d\uff0c\u8fdb\u884c\u5316\u7b80\u3002 // \u5982\u679c\u5206\u6bcd\u4e3a1\uff0c\u5219\u8be5\u5206\u6570\u4e3a\u6574\u6570\uff0c\u76f4\u63a5\u8f93\u51fa\u5206\u5b50\u3002 // \u5982\u679c\u5206\u5b50\u7edd\u5bf9\u503c\u5927\u4e8e\u5206\u6bcd\uff0c\u5219\u8be5\u5206\u6570\u4e3a\u5047\u5206\u6570\uff0c\u5e94\u4ee5\u5e26\u5206\u6570\u7684\u5f62\u5f0f\u8f93\u51fa\u3002 // \u82e5\u4ee5\u4e0a\u5747\u4e0d\u6ee1\u8db3\uff0c\u5219\u5206\u6570\u662f\u771f\u5206\u6570\uff0c\u6309\u539f\u6837\u8f93\u51fa\u5373\u53ef\u3002 void showResult ( Fraction r ) { r = reduction ( r ); if ( r . down == 1 ) printf ( \"%lld\" , r . up ); // \u6574\u6570 else if ( abs ( r . up ) > r . down ) { // \u5047\u5206\u6570 printf ( \"%d %d/%d\" , r . up / r . down , abs ( r . up ) % r . down , r . down ); } else { printf ( \"%d/%d\" , r . up , r . down ); } }","title":"\u5206\u6570\u8868\u793a"},{"location":"Coding%20Knowledge/#_14","text":"","title":"\u5b57\u7b26\u4e32"},{"location":"Coding%20Knowledge/#_15","text":"// \u56de\u6587\u4e32\u5224\u65ad.cpp #include <iostream> #include <cstring> const int maxn = 256 ; using namespace std ; bool judge ( char str []){ int len = strlen ( str ); // \u5b57\u7b26\u4e32\u957f\u5ea6 for ( int i = 0 ; i < len / 2 ; i ++ ) { // \u679a\u4e3e\u5b57\u7b26\u4e32\u524d\u4e00\u534a if ( str [ i ] != str [ len - i - 1 ]) return false ; } return true ; } int main (){ char str [ maxn ]; while ( cin >> str ) { // \u8f93\u5165\u5b57\u7b26\u4e32 bool flag = judge ( str ); // \u5224\u65ad\u5b57\u7b26\u4e32str\u662f\u5426\u662f\u56de\u6587\u4e32 if ( flag ) cout << \"YES\" << endl ; else cout << \"NO\" << endl ; } return 0 ; }","title":"\u56de\u6587\u4e32"},{"location":"Coding%20Knowledge/#_16","text":"","title":"\u6811\u7b97\u6cd5"},{"location":"Coding%20Knowledge/#_17","text":"\u7ed9\u5b9an\u4e2a\u6743\u503c\u4f5c\u4e3an\u4e2a\u53f6\u5b50\u7ed3\u70b9\uff0c\u6784\u9020\u4e00\u68f5\u4e8c\u53c9\u6811\uff0c\u82e5\u8be5\u6811\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u8fbe\u5230\u6700\u5c0f\uff0c\u79f0\u8fd9\u6837\u7684\u4e8c\u53c9\u6811\u4e3a\u6700\u4f18\u4e8c\u53c9\u6811\uff0c\u4e5f\u79f0\u4e3a\u54c8\u592b\u66fc\u6811(Huffman Tree)\u3002\u54c8\u592b\u66fc\u6811\u662f\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u6700\u77ed\u7684\u6811\uff0c\u6743\u503c\u8f83\u5927\u7684\u7ed3\u70b9\u79bb\u6839\u8f83\u8fd1\u3002 \u8def\u5f84\u957f\u5ea6\uff1a\u4e24\u70b9\u8def\u5f84\u4e0a\u7684\u5206\u679d\u6570\u76ee\u79f0\u4f5c\u8def\u5f84\u957f\u5ea6\u3002 \u6811\u7684\u8def\u5f84\u957f\u5ea6\uff1a\u4ece\u6811\u6839\u5230\u6bcf\u4e2a\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e4b\u548c\u3002 \u7ed3\u70b9\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6\uff1a\u5728\u4e00\u68f5\u6811\u4e2d\uff0c\u5047\u8bbe\u5176\u7ed3\u70b9\u4e0a\u9644\u5e26\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u901a\u5e38\u628a\u8be5\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e0e\u8be5\u7ed3\u70b9\u4e0a\u7684\u6743\u503c /* \u9898\u76ee\u5927\u610f\uff1aFJ\u9700\u8981\u4fee\u8865\u7267\u573a\u7684\u56f4\u680f\uff0c\u4ed6\u9700\u8981 N \u5757\u957f\u5ea6\u4e3a Li \u7684\u6728\u5934\uff08N planks of woods\uff09\u3002\u5f00\u59cb\u65f6\uff0cFJ\u53ea\u6709\u4e00\u5757\u65e0\u9650\u957f\u7684\u6728\u677f\uff0c\u56e0\u6b64\u4ed6\u9700\u8981\u628a\u65e0\u9650\u957f\u7684\u6728\u677f\u952f\u6210 N \u5757\u957f\u5ea6 \u4e3a Li \u7684\u6728\u677f\uff0cFarmer Don\u63d0\u4f9bFJ\u952f\u5b50\uff0c\u4f46\u5fc5\u987b\u8981\u6536\u8d39\u7684\uff0c\u6536\u8d39\u7684\u6807\u51c6\u662f\u5bf9\u5e94\u6bcf\u6b21\u636e\u51fa\u6728\u5757\u7684\u957f\u5ea6\uff0c\u6bd4\u5982\u8bf4\u6d4b\u8bd5\u6570\u636e\u4e2d 5 8 8 \u4ed6\u5e0c\u671b\u5c06\u957f\u5ea6\u4e3a21\u7684\u6728\u677f\u5207\u6210\u957f\u5ea6\u4e3a8,5\u548c8\u7684\u6728\u677f 8 + 5 + 8 = 21\u3002\u7b2c\u4e00\u6b21\u5207\u5272\u5c06\u82b1\u8d3921\u7f8e\u5143\uff0c\u5e76\u4e14\u5e94\u8be5\u7528\u4e8e\u5c06\u677f\u5207\u5272\u621013\u548c8\u7247\u3002\u7b2c\u4e8c\u6b21\u5207\u5272\u5c06\u82b1\u8d3913\uff0c\u5e76\u4e14\u5e94\u8be5\u7528\u4e8e\u5c0613\u5207\u5272\u62108\u548c5.\u8fd9\u5c06\u82b1\u8d3921 + 13 = 34 \u3002\u5982\u679c21\u88ab\u5207\u5272\u621016\u548c5\uff0c\u5219\u7b2c\u4e8c\u6b21\u5207\u5272\u5c06\u82b1\u8d3916\u6b21\uff0c\u603b\u517137\uff08\u5927\u4e8e34\uff09\u3002 \u9898\u76ee\u53ef\u4ee5\u8f6c\u5316\u4e3aHuffman\u6811\u6784\u9020\u95ee\u9898 / \u4f18\u5148\u961f\u5217\uff1a \u901a\u8fc7\u6bcf\u6b21\u9009\u53d6\u4e24\u5757\u957f\u5ea6\u6700\u77ed\u7684\u6728\u677f\uff0c\u5408\u5e76\uff0c\u6700\u7ec8\u5fc5\u5b9a\u53ef\u4ee5\u5408\u5e76\u51fa\u957f\u5ea6\u4e3a Sum\uff08Li\uff09\u7684\u6728\u677f\uff0c\u5e76\u4e14\u53ef\u4ee5\u4fdd\u8bc1\u603b\u7684\u8017\u8d39\u6700\u5c11 * */ #include <cstdio> #include <queue> using namespace std ; priority_queue < long long , vector < long long > , greater < long long > > pq ; // \u5c0f\u9876\u5806 int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; long long temp , x , y , ans = 0 ; // \u8f93\u5165\u5230\u4f18\u5148\u7ea7\u961f\u5217 cin >> n ; for ( int i = 0 ; i < n ; i ++ ) { cin >> temp ; pq . push ( temp ); } while ( pq . size () > 1 ) { // \u53ea\u8981\u5806\u4e2d\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20\uff0c\u5c31\u7ee7\u7eed\u6267\u884c\u5408\u5e76 x = pq . top (); pq . pop (); y = pq . top (); pq . pop (); pq . push ( x + y ); // \u53d6\u51fa\u6808\u9876 ans += ( x + y ); } cout << ans << '\\n' ; return 0 ; }","title":"\u54c8\u592b\u66fc\u6811"},{"location":"Coding%20Knowledge/#_18","text":"","title":"\u56fe\u7b97\u6cd5"},{"location":"Coding%20Knowledge/#_19","text":"// Dijkstra.\u90bb\u63a5\u77e9\u9635.cpp #include <iostream> #include <algorithm> using namespace std ; #define MAXV 1010 #define INF 0x3f3f3f3f int n , m , s ; // \u9876\u70b9\u4e2a\u6570\uff0c\u8fb9\u6570\uff0c\u8d77\u70b9\u7f16\u53f7 int G [ MAXV ][ MAXV ]; // MAXV\u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ MAXV ]; // \u8d77\u70b9\u5230\u8fbe\u5404\u70b9\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6 bool vis [ MAXV ] = { false }; // \u8868\u793a\u662f\u5426\u8bbf\u95ee\u7684\u6570\u7ec4 void Dijkstra ( int s ) { // s\u4e3a\u8d77\u70b9 fill ( d , d + MAXV , INF ); // \u76f8\u5f53\u4e8eC\u8bed\u8a00\u7684memset d [ s ] = 0 ; // \u8d77\u70b9\u5230\u8fbe\u81ea\u8eab\u7684\u8ddd\u79bb\u4e3a0\uff0c\u4e0d\u8981\u628a\u8d77\u70b9\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee for ( int i = 0 ; i < n ; i ++ ) { // \u5faa\u73af\u6b21\u6570\u4e3a\u9876\u70b9\u7684\u6570\u91cf int u = -1 , MIN = INF ; // \u627e\u5230u\u4f7f\u5f97d[u]\u6700\u5c0f\uff0cMIN\u5b58\u653e\u8be5\u6700\u5c0f\u7684d[u] for ( int j = 0 ; j < n ; j ++ ) { if ( vis [ j ] == false && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } // \u627e\u4e0d\u5230\u5c0f\u4e8eINF\u7684d[i]\uff0c\u8bf4\u660e\u5269\u4e0b\u7684\u9876\u70b9\u548c\u8d77\u70b9s\u4e0d\u8fde\u901a if ( u == -1 ) return ; vis [ u ] = true ; // \u6807\u8bb0u\u4e3a\u5df2\u8bbf\u95ee for ( int v = 0 ; v < n ; v ++ ) { // \u5982\u679cv\u672a\u8bbf\u95ee \u4e14 u\u80fd\u5230\u8fbev \u4e14 \u4ee5u\u4e3a\u4e2d\u4ecb\u70b9\u53ef\u4ee5\u4f7fd[v]\u66f4\u4f18 if ( vis [ v ] == false && G [ u ][ v ] != INF && d [ u ] + G [ u ][ v ] < d [ v ]) { d [ v ] = d [ u ] + G [ u ][ v ]; } } } } int main () { int u , v , w ; cin >> n >> m >> s ; // \u9876\u70b9\u4e2a\u6570\uff0c\u8fb9\u6570\uff0c\u8d77\u70b9\u7f16\u53f7 fill ( G [ 0 ], G [ 0 ] + MAXV * MAXV , INF ); // \u521d\u59cb\u5316\u56feG for ( int i = 0 ; i < m ; i ++ ) { cin >> u >> v >> w ; G [ u ][ v ] = w ; } Dijkstra ( s ); // Dijkstra \u7b97\u6cd5\u5165\u53e3 for ( int i = 0 ; i < n ; i ++ ) { cout << d [ i ] << \" \" ; // \u8f93\u51fa\u8d77\u70b9\u5230\u6240\u6709\u9876\u70b9\u7684\u6700\u77ed\u8ddd\u79bb } return 0 ; } // Floyd.cpp int dis [ MAXV ][ MAXV ]; // dis[i][j] \u8868\u793a\u9876\u70b9i\u5230\u9876\u70b9j\u7684\u8ddd\u79bb void Floyd () { for ( int k = 0 ; k < n ; k ++ ) { for ( int i = 0 ; i < n ; i ++ ) { for ( int j = 0 ; j < n ; j ++ ) { if ( dis [ k ][ i ] != INF && dis [ k ][ j ] != INF && dis [ i ][ k ] + dis [ k ][ j ] < dis [ i ][ j ]) { dis [ i ][ j ] = dis [ i ][ k ] + dis [ k ][ j ]; } } } } } // Bellman-Ford.cpp struct Node { int v , dis ; // v\u4e3a\u90bb\u63a5\u8fb9\u7684\u76ee\u6807\u9876\u70b9\uff0cdis \u4e3a\u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 } vector < Node > Adj [ MAXV ]; // \u56feG\u7684\u90bb\u63a5\u8868 int n ; // n\u4e3a\u9876\u70b9\u6570\uff0cMAXV \u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ MAXV ]; // \u8d77\u70b9\u5230\u8fbe\u5404\u70b9\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6 bool Bellman ( int s ) { // s\u4e3a\u6e90\u70b9 fill ( d , d + MAXV , INF ); // fill\u51fd\u6570\u5c06\u6574\u4e2ad\u6570\u7ec4\u8d4b\u4e3aINF\uff0c\u6ce8\u610f\u614e\u7528INF d [ s ] = 0 ; // \u8d77\u70b9s\u5230\u8fbe\u81ea\u8eab\u7684\u8ddd\u79bb\u4e3a0 for ( int i = 0 ; i < n - 1 ; i ++ ) { // \u6267\u884c n-1 \u8f6e\u64cd\u4f5c\uff0cn \u4e3a\u9876\u70b9\u6570 for ( int u = 0 ; u < n ; u ++ ) { // \u6bcf\u8f6e\u64cd\u4f5c\u90fd\u904d\u5386\u6240\u6709\u8fb9 for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; // \u90bb\u63a5\u8fb9\u7684\u9876\u70b9 int dis = Adj [ u ][ j ]. dis ; // \u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 if ( d [ u ] + dis < d [ v ]) { d [ v ] = d [ u ] + dis ; } } } } // \u4ee5\u4e0b\u4e3a\u5224\u65ad\u8d1f\u73af\u7684\u4ee3\u7801 for ( int u = 0 ; u < n ; u ++ ) { // \u5bf9\u6bcf\u6761\u8fb9\u8fdb\u884c\u5224\u65ad for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; // \u90bb\u63a5\u8fb9\u7684\u9876\u70b9 int dis = Adj [ u ][ j ]. dis ; // \u90bb\u63a5\u8fb9\u7684\u8fb9\u6743 if ( d [ u ] + dis < d [ v ]) // \u5982\u679c\u4ecd\u53ef\u4ee5\u88ab\u677e\u5f1b return false ; // \u8bf4\u660e\u56fe\u4e2d\u6709\u4ece\u6e90\u70b9\u53ef\u8fbe\u7684\u8d1f\u73af } } return true ; // \u6570\u7ec4d\u7684\u6240\u6709\u503c\u90fd\u5df2\u7ecf\u8fbe\u5230\u6700\u4f18 } // SPFA.cpp vector < Node > Adj [ MAXV ]; // \u56feG\u7684\u90bb\u63a5\u8868 int n , d [ MAXV ], num [ MAXV ]; // num\u6570\u7ec4\u8bb0\u5f55\u9876\u70b9\u7684\u5165\u961f\u6b21\u6570 bool inq [ MAXV ]; // \u9876\u70b9\u662f\u5426\u5728\u961f\u5217\u4e2d bool SPFA ( int s ) { // s\u4e3a\u6e90\u70b9 // \u521d\u59cb\u5316 metset ( inq , false , sizeof ( inq )); memset ( num , 0 , sizeof ( num )); fill ( d , d + MAXV , INF ); // \u6e90\u70b9\u5165\u961f\u90e8\u5206 queue < int > Q ; Q . push ( s ); // \u6e90\u70b9\u5165\u961f inq [ s ] = true ; // \u6e90\u70b9\u5df2\u5165\u961f num [ s ] ++ ; // \u6e90\u70b9\u5165\u961f\u6b21\u6570\u52a01 d [ s ] = 0 ; // \u6e90\u70b9\u7684\u8ddd\u79bb\u4e3a 0 while ( ! Q . empty ()) { int u = Q . front (); // \u961f\u9996\u9876\u70b9\u7f16\u53f7\u4e3a u Q . pop (); // \u51fa\u961f inq [ u ] = false ; // \u8bbe\u7f6e u \u4e3a\u4e0d\u5728\u961f\u5217\u4e2d // \u904d\u5386 u \u7684\u6240\u6709\u90bb\u63a5\u8fb9 v for ( int j = 0 ; j < Adj [ u ]. size (); j ++ ) { int v = Adj [ u ][ j ]. v ; int dis = Adj [ u ][ j ]. dis ; // \u677e\u5f1b\u64cd\u4f5c if ( d [ u ] + dis < d [ v ]) { d [ v ] = d [ u ] + dis ; if ( ! inq [ v ]) { // \u5982\u679c v \u4e0d\u5728\u961f\u5217\u4e2d Q . push ( v ); // v \u5165\u961f inq [ v ] = true ; // \u8bbe\u7f6e v \u4e3a\u5728\u961f\u5217\u4e2d num [ v ] ++ ; if ( num [ v ] >= n ) return false ; // \u6709\u53ef\u8fbe\u8d1f\u73af } } } } return true ; // \u65e0\u53ef\u8fbe\u8d1f\u73af }","title":"\u6700\u77ed\u8def\u5f84"},{"location":"Coding%20Knowledge/#_20","text":"Prim \u7b97\u6cd5\u548c Kruskal \u7b97\u6cd5\u4e24\u8005\u90fd\u662f\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u4f46\u4e24\u8005\u90fd\u80fd\u83b7\u5f97\u6700\u5c0f\u751f\u6210\u6811\u7684\u7cbe\u786e\u6700\u4f18\u89e3\u3002\u524d\u8005\u662f\u5bfb\u627e\u9876\u70b9\u7684\u8fc7\u7a0b\uff0c\u66f4\u9002\u5408\u7a20\u5bc6\u56fe\uff1b\u540e\u8005\u662f\u5bfb\u627e\u8fb9\u7684\u8fc7\u7a0b\uff0c\u66f4\u9002\u5408\u7a00\u758f\u56fe\u3002","title":"\u6700\u5c0f\u751f\u6210\u6811"},{"location":"Coding%20Knowledge/#prim","text":"Prim \u7b97\u6cd5\u7684\u5173\u952e\u4e24\u6b65\u662f\u5bfb\u627e\u9876\u70b9\u4e0e\u66f4\u65b0\u6700\u77ed\u8ddd\u79bb\u3002 \u8be5\u7b97\u6cd5\u8bbe\u5b9a\u96c6\u5408S\uff0c\u5c1d\u8bd5\u4e0d\u65ad\u5411S\u4e2d\u6dfb\u52a0\u9876\u70b9\u6765\u751f\u6210\u6700\u5c0f\u751f\u6210\u6811\u3002\u5f53\u627e\u5230S\u4e4b\u5916\u8ddd\u79bbS\u96c6\u5408\u6700\u8fd1\u7684\u9876\u70b9u\u540e\uff0c\u66f4\u65b0u\u7684\u6240\u6709\u90bb\u63a5\u9876\u70b9\u5230\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u5e76\u4e0d\u65ad\u5faa\u73af\u6dfb\u52a0\u9876\u70b9\u3002\u76f4\u5230\u627e\u4e0d\u5230\u8fd9\u6837\u7684\u9876\u70b9u\uff0c\u5373\u5269\u4f59\u9876\u70b9\u4e0d\u4e0eS\u8fde\u901a\uff0c\u6216\u6240\u6709\u9876\u70b9\u90fd\u5df2\u88ab\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u3002 \u90bb\u63a5\u77e9\u9635\u7684\u5b9e\u73b0\uff1a int n , G [ maxv ][ maxv ]; // n\u4e3a\u9876\u70b9\u6570\u91cf\uff0cmaxv \u4e3a\u6700\u5927\u9876\u70b9\u6570 int d [ maxv ]; // \u9876\u70b9\u4e0e\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb bool vis [ maxv ]; // \u6807\u8bb0\u6570\u7ec4 int prim () { // \u9ed8\u8ba4 0 \u53f7\u4e3a\u521d\u59cb\u70b9\uff0c\u51fd\u6570\u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c fill ( d , d + maxv , INF ); d [ 0 ] = 0 ; int ans = 0 ; // \u5b58\u653e\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c for ( int i = 0 ; i < n ; i ++ ) { int u = -1 , MIN = INF ; for ( int j = 0 ; j < n ; j ++ ) { // \u627e\u5230\u672a\u8bbf\u95ee\u7684\u9876\u70b9\u4e2d\u8ddd\u79bb\u5f53\u524d\u751f\u6210\u7684\u96c6\u5408\u6700\u8fd1\u7684\u9876\u70b9 if ( ! vis [ j ] && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } if ( u == -1 ) return -1 ; // \u627e\u4e0d\u5230\u9876\u70b9\uff0c\u5373\u5269\u4e0b\u7684\u9876\u70b9\u4e0e\u96c6\u5408S\u4e0d\u8fde\u901a vis [ u ] = true ; ans += d [ u ]; // \u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u7d2f\u52a0 // \u66f4\u65b0\u5269\u4f59\u9876\u70b9\u5230\u96c6\u5408S\u7684\u8ddd\u79bb for ( int v = 0 ; v < n ; v ++ ) { if ( ! vis [ v ] && G [ u ][ v ] != INF && G [ u ][ v ] < d [ v ]) { d [ v ] = G [ u ][ v ]; } } } return ans ; } \u90bb\u63a5\u8868\u7684\u5b9e\u73b0\uff1a class Edge { int to , dis ; // \u76ee\u6807\u9876\u70b9\u548c\u8fb9\u6743 } vector < Edge > nei [ maxv ]; // \u90bb\u63a5\u8868\uff0cnei[u]\u5b58\u653e\u9876\u70b9u\u51fa\u53d1\u7684\u8fb9 int n ; // \u9876\u70b9\u6570 int d [ maxv ]; // \u9876\u70b9\u5230\u96c6\u5408S\u7684\u6700\u77ed\u8ddd\u79bb bool vis [ maxv ]; // \u6807\u8bb0\u6570\u7ec4 int prim () { // \u9ed8\u8ba40\u53f7\u4e3a\u521d\u59cb\u70b9\uff0c\u51fd\u6570\u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c fill ( d , d + maxv , INF ); d [ 0 ] = 0 ; int ans = 0 ; for ( int i = 0 ; i < n ; i ++ ) { int u = -1 , MIN = INF ; for ( int j = 0 ; j < n ; j ++ ) { if ( ! vis [ j ] && d [ j ] < MIN ) { u = j ; MIN = d [ j ]; } } } if ( u == -1 ) return -1 ; vis [ u ] = true ; ans += d [ u ]; // \u53ea\u6709\u4e0b\u9762\u8fd9\u4e2a\u5faa\u73af\u4e0e\u90bb\u63a5\u77e9\u9635\u7684\u5b9e\u73b0\u4e0d\u540c for ( int j = 0 ; j < nei [ u ]. size (); j ++ ) { int v = nei [ u ][ j ]. to ; int dis = nei [ u ][ j ]. dis ; if ( ! vis [ v ] && dis + d [ u ] < d [ v ]) { d [ v ] = dis + d [ u ]; } } return ans ; }","title":"PRIM \u7b97\u6cd5\u00b6"},{"location":"Coding%20Knowledge/#kruskal","text":"Kruskal \u7b97\u6cd5\u4f7f\u7528\u5e76\u67e5\u96c6\u3002\u5148\u5c06\u56fe\u4e2d\u6240\u6709\u8fb9\u6309\u7167\u8fb9\u6743\u4ece\u5c0f\u5230\u5927\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5f00\u59cb\u904d\u5386\u6bcf\u6761\u8fb9\uff0c\u901a\u8fc7\u5e76\u67e5\u96c6\u5c06\u5224\u65ad\u5e76\u5c06\u8fb9\u6dfb\u52a0\u5230\u6700\u5c0f\u751f\u6210\u6811\u7684\u96c6\u5408\u3002 struct Edge { int u , v ; // \u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u7f16\u53f7 int cost ; // \u8fb9\u6743 } edges [ maxe ]; // \u6700\u591a\u6709 maxe \u6761\u8fb9 bool cmp ( Edge a , Edge b ) { return a . cost < b . cost ; } // \u5e76\u67e5\u96c6\u90e8\u5206 int F [ maxv ]; // \u5e76\u67e5\u96c6\u6570\u7ec4 int find ( int x ) { // \u5e76\u67e5\u96c6\u67e5\u8be2\u51fd\u6570 int a = x ; while ( x != F [ x ]) { x = F [ x ]; } // \u8def\u5f84\u538b\u7f29 while ( a != F [ a ]) { int z = a ; a = F [ a ]; F [ z ] = x ; } return x ; } /** * Kruskal \u7b97\u6cd5 * @param n \u9876\u70b9\u4e2a\u6570 * @param m \u56fe\u7684\u8fb9\u6570 * @return \u6240\u6c42\u8fb9\u6743\u53ea\u548c\uff1b\u82e5\u65e0\u6cd5\u8fde\u901a\u8fd4\u56de-1 */ int Kruskal ( int n , int m ) { // ans \u4e3a\u6240\u6c42\u8fb9\u6743\u4e4b\u548c\uff0cnumEdge \u4e3a\u5f53\u524d\u751f\u6210\u6811\u7684\u8fb9\u6570 int ans = 0 , numEdge = 0 ; for ( int i = 0 ; i < n ; i ++ ) { // \u9876\u70b9\u8303\u56f4\u662f[0...n-1] F [ i ] = i ; // \u5e76\u67e5\u96c6\u521d\u59cb\u5316 } sort ( edges , edges + m , cmp ); // \u6240\u6709\u8fb9\u6309\u7167\u8fb9\u6743\u6392\u5e8f for ( int i = 0 ; i < m ; i ++ ) { // \u679a\u4e3e\u6240\u6709\u8fb9 int faU = find ( edge [ i ]. u ); // \u67e5\u8be2\u6d4b\u8bd5\u8fb9\u4e24\u4e2a\u7aef\u70b9\u6240\u5728\u96c6\u5408\u7684\u6839\u7ed3\u70b9 int faV = find ( edge [ i ]. v ); if ( faU != faV ) { // \u5982\u679c\u4e0d\u5728\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u8be5\u8fb9\u5c1a\u672a\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u4e2d F [ faU ] = faV ; // \u5408\u5e76\u96c6\u5408\uff0c\u5c06\u6d4b\u8bd5\u8fb9\u52a0\u5165\u5230\u6700\u5c0f\u751f\u6210\u6811\u4e2d ans += edges [ i ]. cost ; numEdge ++ ; // \u5f53\u524d\u751f\u6210\u6811\u7684\u8fb9\u6570\u52a01 if ( numEdge == n - 1 ) // \u6240\u6709\u8fb9\u90fd\u5df2\u6dfb\u52a0 break ; } } if ( numEdge != n - 1 ) return -1 ; // \u65e0\u6cd5\u8fde\u901a\u65f6\u8fd4\u56de -1 else return ans ; // \u8fd4\u56de\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u4e4b\u548c } int main () { int n , m ; // \u9876\u70b9\u6570\u91cf\uff0c\u8fb9\u6570\u91cf cin >> n >> m ; for ( int i = 0 ; i < m ; i ++ ) cin >> edges [ i ]. u >> edges [ i ]. v >> edges [ i ]. cost ; // \u4e24\u4e2a\u7aef\u70b9\u7f16\u53f7\uff0c\u8fb9\u6743 int ans = Kruskal ( n , m ); cout << ans << endl ; return 0 ; }","title":"KRUSKAL \u7b97\u6cd5"},{"location":"Coding%20Knowledge/#_21","text":"","title":"\u5176\u4ed6"},{"location":"Coding%20Knowledge/#_22","text":"","title":"\u6590\u6ce2\u90a3\u5951\u4e0e\u5361\u5854\u5170\u6570"},{"location":"Coding%20Knowledge/#_23","text":"https://www.cnblogs.com/fisherss/p/9985135.html","title":"\u6b27\u51e0\u91cc\u5f97\u5b9a\u7406"},{"location":"Coding%20Knowledge/#_24","text":"#include <iostream> #define maxn 100 #define inf 0x3f3f3f3f int p [ maxn ]; int dp [ maxn ][ maxn ]; // \u521d\u59cb\u5bf9\u89d2\u7ebf\u4e3a0 int s [ maxn ][ maxn ]; // \u5207\u5272\u77e9\u9635\u94fe\uff0c\u5b58\u50a8\u524d\u534a\u6bb5\u77e9\u9635\u94fe\u7684\u6700\u540e\u4e00\u4e2a\u77e9\u9635\u7684\u7d22\u5f15 int main () { int n = 6 ; // \u8fde\u4e58\u7684\u77e9\u9635\u6570\u91cf p [ 0 ] = 30 ; p [ 1 ] = 35 ; p [ 2 ] = 15 ; p [ 3 ] = 5 ; p [ 4 ] = 10 ; p [ 5 ] = 20 ; p [ 6 ] = 25 ; for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { if ( j > i ) dp [ i ][ j ] = inf ; // \u4e0a\u5bf9\u89d2\u7ebf\u521d\u59cb\u5316\u4e3a inf } } for ( int r = 2 ; r <= n ; r ++ ) { // \u6bcf\u6b21\u5faa\u73af\u7684\u77e9\u9635\u94fe\u7684\u957f\u5ea6 for ( int i = 1 ; i <= n - r + 1 ; i ++ ) { // i \u662f\u77e9\u9635\u94fe\u5f00\u59cb int j = i + r - 1 ; // \u5f53\u524d\u77e9\u9635\u94fe\u662f\u77e9\u9635i\u5230\u77e9\u9635j for ( int k = i ; k < j ; k ++ ) { // k \u662f\u77e9\u9635\u94fe\u5207\u5272\u4f4d\u7f6e int t = dp [ i ][ k ] + dp [ k + 1 ][ j ] + p [ i - 1 ] * p [ k ] * p [ j ]; if ( t < dp [ i ][ j ]) { dp [ i ][ j ] = t ; s [ i ][ j ] = k ; } } } } for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { cout << dp [ i ][ j ] << \" \\t \" ; } cout << '\\n' ; } cout << '\\n' ; for ( int i = 1 ; i <= n ; i ++ ) { for ( int j = 1 ; j <= n ; j ++ ) { cout << s [ i ][ j ] << \" \\t \" ; } cout << '\\n' ; } }","title":"\u77e9\u9635\u8fde\u4e58"},{"location":"Coding%20Knowledge/#_25","text":"typedef long long LL ; LL mul ( LL a , LL b , LL m ) { LL ans = 0 ; while ( b ) { if ( b & 1 ) ans = ( ans + a ) % m ; a = ( a + a ) % m ; b >>= 1 ; } return ans ; } // \u6807\u91cf\u5feb\u901f\u5e42 \u8fed\u4ee3 typedef long long LL ; LL binaryPow ( LL a , LL b , LL m ) { LL ans = 1 ; while ( b ) { if ( b & 1 ) ans = ans * a % m ; a = a * a % m ; b >>= 1 ; } return ans ; } // \u6807\u91cf\u5feb\u901f\u5e42.\u9012\u5f52 // \u6c42 a^b % m\uff0c\u9012\u5f52\u5199\u6cd5 LL binaryPow ( LL a , LL b , LL m ) { if ( ! b ) return 1 ; // \u5982\u679cb\u4e3a0\uff0c\u5219a\u4e3a1 if ( b & 1 ) return a * binaryPow ( a , b - 1 , m ) % m ; LL mul = binaryPow ( a , b / 2 , m ); return mul * mul % m ; } // \u77e9\u9635\u5feb\u901f\u5e42.cpp typedef long long LL ; vector < LL > vec ; // \u957f\u6574\u6570\u5411\u91cf vector < vec > mat ; // \u957f\u6574\u6570\u77e9\u9635 mat mul ( const mat & A , const mat & B ) { // \u77e9\u9635\u4e58\u6cd5 A multiply B mat C ( A . size (), vec ( B [ 0 ]. size ())); // \u5927\u5c0f\u4e3a A \u7684\u884c\u6570\u4e0e B \u7684\u5217\u6570 for ( int i = 0 ; i < A . size (); i ++ ) { for ( int k = 0 ; k < B . size (); k ++ ) { for ( int j = 0 ; j < B [ 0 ]. size (); j ++ ) { Ci = ( Ci + ( Ai * Bk ) % MOD ) % MOD ; // \u5982\u679c\u5fc5\u8981\uff0c\u6b64\u5904\u7684\u4e58\u6cd5\u4ee5\u5feb\u901f\u4e58\u6cd5\u4ee3\u66ff } } } return C ; } mat pow ( mat A , LL n ) { // \u8ba1\u7b97\u77e9\u9635 A^n // \u77e9\u9635\u4e58\u6cd5\u7684\u96f6\u5143\u662f\u5355\u4f4d\u77e9\u9635 mat An ( A . size (), vec ( A . size ())); for ( int i = 0 ; i < A . size (); i ++ ) Ani = 1 ; while ( n > 0 ) { if ( n & 1 ) An = mul ( A , An ); A = mul ( A , A ); n >>= 1 ; } return An ; }","title":"\u5feb\u901f\u4e58\u6cd5"},{"location":"Coding%20Knowledge/#_26","text":"// \u7d20\u6570\u7b5b\u5224\u65ad x\u5230y\u7684\u7d20\u6570\u4e2a\u6570 \uff08\u5305\u62ecx\u548cy\uff09 #include <cmath> #include <iostream> using namespace std ; const int MAXY = 1e5 + 10 ; bool comp [ MAXY ]; // \u5408\u6570\u4e3a true int main () { int x , y ; int ans = 0 ; cin >> x >> y ; // \u6ce8\u610f\uff0c\u6b64\u9898\u6ca1\u6709\u8bf4\u660e x \u548c y \u7684\u5927\u5c0f\u5173\u7cfb if ( x > y ) { swap ( x , y ); } // \u57c3\u5f0f\u7b5b\u6cd5 int m = sqrt ( y + 0.5 ); for ( int i = 2 ; i <= m ; i ++ ) { if ( ! comp [ i ]) { // \u8d28\u6570 for ( int j = i * i ; j <= y ; j += i ) comp [ j ] = true ; } } // \u7edf\u8ba1\u7d20\u6570\u4e2a\u6570 for ( int i = x ; i <= y ; i ++ ) { if ( i != 1 && ! comp [ i ]) // \u6ce8\u610f 1 \u4e0d\u662f\u8d28\u6570 ans ++ ; } cout << ans << endl ; return 0 ; } // \u6c42\u89e3\u8d28\u56e0\u6570\u4e2a\u6570 \u4e0d\u91cd\u590d int getPrimeNum ( int val ){ int old = val ; int res = 0 ; for ( int i = 2 ; i <= sqrt ( val + 0.5 ); i ++ ){ if ( val % i == 0 ){ res ++ ; while ( val % i == 0 ) val /= i ; } } if ( val > 1 && val != old ) res ++ ; // \u4e0d\u5305\u62ec\u81ea\u8eab\u65f6 \u9700\u8981\u52a0\u4e0a val != old return res ; }","title":"\u7d20\u6570"},{"location":"Coding%20Knowledge/#_27","text":"\u9006\u5e8f\u5bf9\uff1a\u8bbe A \u4e3a\u4e00\u4e2a\u6709 n \u4e2a\u6570\u5b57\u7684\u6709\u5e8f\u96c6 (n>1)\uff0c\u5176\u4e2d\u6240\u6709\u6570\u5b57\u5404\u4e0d\u76f8\u540c\u3002\u5982\u679c\u5b58\u5728\u6b63\u6574\u6570 i, j \u4f7f\u5f97 1 \u2264 i < j \u2264 n \u800c\u4e14 A[i] > A[j]\uff0c\u5219 A[i], A[j]> \u8fd9\u4e2a\u6709\u5e8f\u5bf9\u79f0\u4e3a A \u7684\u4e00\u4e2a\u9006\u5e8f\u5bf9\uff0c\u4e5f\u79f0\u4f5c\u9006\u5e8f\u6570\u3002","title":"\u9006\u5e8f\u5bf9"},{"location":"Coding%20Knowledge/#_28","text":"\u5f52\u5e76\u6392\u5e8f\uff1a\uff08\u5373\u4f7f\u5e8f\u5217\u5b58\u5728\u76f8\u540c\u5143\u7d20\uff0c\u8be5\u7b97\u6cd5\u4e5f\u9002\u7528\uff0c\u4e14\u4ee3\u7801\u4e0d\u7528\u4fee\u6539\uff09 \u5f52\u5e76\u6392\u5e8f\u662f\u5c06\u6570\u5217a[l,h]\u5206\u6210\u4e24\u534aa[l,mid]\u548ca[mid+1,h]\u5206\u522b\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f\uff0c\u7136\u540e\u518d\u5c06\u8fd9\u4e24\u534a\u5408\u5e76\u8d77\u6765\u3002 \u5728\u5408\u5e76\u7684\u8fc7\u7a0b\u4e2d\uff08\u8bbel<=i<=mid ,mid+1<=j<=h), \u5f53a[i]<=a[j]\u65f6\uff0c\u5e76\u4e0d\u4ea7\u751f\u9006\u5e8f\u6570\uff1b \u5f53a[i]>a[j]\u65f6\uff0c\u5728\u524d\u534a\u90e8\u5206\u4e2d\u6bd4a[i]\u5927\u7684\u6570\u90fd\u6bd4a[j]\u5927\uff0c\u5c06a[j]\u653e\u5728a[i]\u524d\u9762\u7684\u8bdd\uff0c\u9006\u5e8f\u6570\u8981\u52a0\u4e0amid+1-i\u3002 \u56e0\u6b64\uff0c\u53ef\u4ee5\u5728\u5f52\u5e76\u6392\u5e8f\u4e2d\u7684\u5408\u5e76\u8fc7\u7a0b\u4e2d\u8ba1\u7b97\u9006\u5e8f\u6570. #include <bits/stdc++.h> #define LL long long using namespace std ; const int MAXN = 50000 + 5 ; const int MAXM = 1e5 ; int a [ MAXN ], temp [ MAXN ]; LL ans = 0 ; int n ; void merge ( int le , int mid , int ri ){ //\u4f7f\u6bcf\u4e24\u90e8\u5206\u3010\u90fd\u5df2\u7ecf\u5206\u522b\u6709\u5e8f\u3011\uff0c\u5408\u5e76\u4e3a\u4e00\u4e2a\u6709\u5e8f\u96c6\u5408 int i , j , k ; // le\u5230mid \u662f\u4e00\u4e2a\u6709\u5e8f\u90e8\u5206\uff0cmid+1\u5230ri\u662f\u4e00\u4e2a\u6709\u5e8f\u90e8\u5206 \uff0c\u5408\u5e76\u5c31\u884c\u4e86 i = le ; j = mid + 1 ; k = le ; for (; i <= mid && j <= ri ;){ if ( a [ i ] > a [ j ]){ temp [ k ++ ] = a [ j ++ ]; ans += mid - i + 1 ; } else temp [ k ++ ] = a [ i ++ ]; } while ( i <= mid ) temp [ k ++ ] = a [ i ++ ]; while ( j <= ri ) temp [ k ++ ] = a [ j ++ ]; for ( i = le ; i <= ri ; i ++ ) a [ i ] = temp [ i ]; } void merge_sort ( int le , int ri ){ //\u4e0d\u65ad\u7684\u5206\u4e3a\u4e00\u534a\uff0c\u6765\u4f7f\u5404\u4e2a\u90e8\u5206\u975e\u9012\u51cf\u6709\u5e8f if ( le < ri ){ int mid = ( le + ri ) >> 1 ; merge_sort ( le , mid ); merge_sort ( mid + 1 , ri ); merge ( le , mid , ri ); } } int main (){ while ( ~ scanf ( \"%d\" , & n )){ for ( int i = 0 ; i < n ; i ++ ) scanf ( \"%d\" , & a [ i ]); ans = 0 ; merge_sort ( 0 , n -1 ); printf ( \"%lld \\n \" , ans ); } return 0 ; }","title":"\u5f52\u5e76\u6392\u5e8f"},{"location":"Coding%20Knowledge/#_29","text":"","title":"\u7ebf\u6bb5\u6811"},{"location":"Coding%20Knowledge/#_30","text":"https://blog.csdn.net/qq_37383726/article/details/76459527","title":"\u6811\u72b6\u6570\u7ec4"},{"location":"Coding%20Knowledge/#_31","text":"","title":"\u52a8\u6001\u89c4\u5212"},{"location":"Coding%20Knowledge/#_32","text":"","title":"\u80cc\u5305\u95ee\u9898"},{"location":"Coding%20Knowledge/#_33","text":"#include <iostream> #include <cstring> #include <cmath> #include <cstdio> #define maxn 1000; using namespace std ; int cash , n ; int dp [ maxn ]; int c [ maxn ], w [ maxn ], num [ maxn ]; void ZeroOne_Pack ( int cost , int weight ) { for ( int i = cash ; i >= cost ; i -- ) dp [ i ] = max ( dp [ i ], dp [ i - cost ] + weight ); } void Complete_Pack ( int cost , int weight ) { for ( int i = cost ; i <= cash ; i ++ ) dp [ i ] = max ( dp [ i ], dp [ i - cost ] + weight ); } int Multi_Pack () { memset ( dp , 0 , sizeof ( dp )); for ( int i = 1 ; i <= n ; i ++ ) { if ( num [ i ] * c [ i ] > cash ) { //\u7269\u54c1\u5168\u88c5\u8fdb\u53bb\u8d85\u91cd\uff0c\u8bf4\u660e\u7269\u54c1\u65e0\u9650\uff0c\u76f4\u63a5\u5957\u5b8c\u5168\u80cc\u5305 Complete_Pack ( c [ i ], w [ i ]); } else { int k = 1 ; while ( k < num [ i ]) { //\u5229\u7528\u4e8c\u8fdb\u5236\u601d\u60f3\uff0c\u628a\u7269\u54c1\u5206\u62101\uff0c2\uff0c4\uff0c8\u4e2a\uff0c\u4f9d\u6b2101\u80cc\u5305\uff0c\u80fd\u51d1\u51fa\u4efb\u4f55\u6570\u503c\uff0c\u964d\u590d\u6742\u5ea6 ZeroOne_Pack ( k * c [ i ], k * w [ i ]); num [ i ] -= k ; k <<= 1 ; } ZeroOne_Pack ( num [ i ] * c [ i ], num [ i ] * w [ i ]); } } return dp [ cash ]; }","title":"\u80cc\u5305\u677f\u5b50"},{"location":"Coding%20Knowledge/#poj1276","text":"\u5173\u4e8e01\u80cc\u5305\u4e00\u7ef4\u65f6\u7684\u9006\u5e8f\u95ee\u9898 \u4e8c\u8fdb\u5236\u8f6c\u5316 \u8f6c\u6362\u621001\u80cc\u5305\uff0c\u4f8b\u5982\u4e00\u4ef6\u7269\u54c1\u53ef\u4ee5\u62ff26\u4ef6\uff0c\u6bcf\u4e00\u4ef6\u7684\u6743\u503c\u662fw\uff0c26\u53ef\u4ee5\u5199\u6210\uff081+2+4+8\uff09+11\uff0c\u6240\u4ee5\u5c31\u628a\u8fd9\u79cd\u7269\u54c1\u5206\u89e3\u6210\u6743\u91cd\u4e3aw\uff0c2w\uff0c4w\uff0c8w\uff0c11w\u7684\u4e94\u79cd\u7269\u54c1\uff0c\u8fd9\u4e94\u79cd\u7269\u54c1\u7ec4\u5408\uff0c\u4e00\u5b9a\u80fd\u7ec4\u6210\u5c0f\u4e8e\u7b49\u4e8e26\u7684\u4efb\u610f\u4e00\u4e2a\u6570\uff0c\u8fd9\u6837\u5c31\u628a\u670926\u4ef6\u7684\u4e00\u79cd\u7269\u54c1\u6362\u6210\u4e86\u4e94\u79cd\u5404\u6709\u4e00\u4ef6\u7684\u7269\u54c1\uff0c\u752801\u80cc\u5305\u5c31\u80fd\u89e3\u51b3\u4e86 \u6162 \u5185\u5b58\u5360\u7528\u5c0f \u591a\u5f00\u7a7a\u95f4 #include <iostream> #include <cstring> using namespace std ; int cash , N ; // N\u662f\u949e\u7968\u79cd\u6570 int n [ 13 ], D [ 13 ]; // n\u662f\u949e\u7968\u6570\uff0cD\u662f\u949e\u7968\u9762\u989d\uff1b int dp [ 100010 ]; int main () { while ( scanf ( \"%d%d\" , & cash , & N ) != EOF ) { // cash \u662f\u91d1\u989d\u4e0a\u9650\uff0c\u672c\u9898\u7684\u91cd\u91cf\u548c\u4ef7\u503c\u5408\u4e00\uff0c\u91d1\u989d\u4e0a\u9650\u53ef\u7406\u89e3\u4e3a\u80cc\u5305\u91cd\u91cf\u4e0a\u9650 // \u8f93\u5165\u4e0e\u521d\u59cb\u5316 for ( int i = 0 ; i < N ; i ++ ) scanf ( \"%d%d\" , & n [ i ], & D [ i ]); memset ( dp , 0 , sizeof ( dp )); // \u591a\u91cd\u80cc\u5305 for ( int i = 0 ; i < N ; i ++ ) { // \u7b2ci\u79cd\u949e\u7968 if ( n [ i ] * D [ i ] > cash ) { // \u949e\u7968\u5145\u8db3\uff0c\u5957\u7528\u5b8c\u5168\u80cc\u5305 for ( int j = D [ i ]; j <= cash ; j ++ ) { // j\u662f\u91cd\u91cf dp [ j ] = max ( dp [ j ], dp [ j - D [ i ]] + D [ i ]); } } else { // if n[i] * D[i] <= cash int num = n [ i ]; // \u5269\u4f59\u949e\u7968\u6570 for ( int k = 1 ; num > 0 ; k <<= 1 ) { // \u949e\u7968\u6570\uff1b\u4f7f\u7528\u4e8c\u8fdb\u5236\u4f18\u5316\uff0ck\u4e3a2\u7684\u5e42\uff0c\u4f9d\u6b210-1\u80cc\u5305\uff0c\u53ef\u51d1\u51fa\u4efb\u610f\u6570\u503c int mul = min ( k , num ); for ( int j = cash ; j >= mul * D [ i ]; j -- ) { // j\u662f\u91cd\u91cf dp [ j ] = max ( dp [ j ], dp [ j - mul * D [ i ]] + mul * D [ i ]); } num -= mul ; } } } // \u8f93\u51fa printf ( \"%d \\n \" , dp [ cash ]); } return 0 ; } \u7ef4\u62a4\u4e00\u4e2a\u6570\u7ec4num\uff0c \\(num[i][j]num[i][j]\\) \u8868\u793a\u5728\u5f80\u80cc\u5305\u91cc\u8bd5\u7740\u88c5\u7b2ci\u4ef6\u7269\u54c1\u65f6\uff0c\u80cc\u5305\u5bb9\u91cf\u4f7f\u7528\u4e86j\u65f6\u88c5\u4e86\u591a\u5c11\u4ef6i\u7269\u54c1\u3002cost[i]\u4e3a\u7269\u54c1i\u7684\u4f53\u79ef\uff0c \\(num[i][j]=num[j\u2212cost[i]]+1num[i][j]=num[j\u2212cost[i]]+1\\) ;\u53ef\u4ee5\u770b\u5230 \\(num[i][j]num[i][j]\\) \u548c \\(num[t|t!=i][j|j=1,2,....v]num[t|t!=i][j|j=1,2,....v]\\) \u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u6240\u4ee5\u53ef\u4ee5\u7701\u6389\u7b2c\u4e00\u7ef4\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u7269\u54c1\uff0c\u6e05\u7a7anum\uff0c\u53ea\u8ba1\u7b97num[j]\u5c31\u884c\u4e86 \u5feb \u5185\u5b58\u5360\u7528\u5927 #include <iostream> #include <cstdio> #include <cstring> #include <string> #include <algorithm> #include <map> #include <queue> #include <climits> #include <list> #include <stack> #define mem(a) memset(a,0,sizeof(a)) using namespace std ; int wi [ 20 ]; int mi [ 20 ]; int dp [ 100050 ]; int num [ 100050 ]; int main () { int ans_v ; while ( scanf ( \"%d\" , & ans_v ) != EOF ) { int n ; mem ( dp ); mem ( num ); scanf ( \"%d\" , & n ); int i ; for ( i = 0 ; i < n ; ++ i ) { scanf ( \"%d%d\" , & mi [ i ], & wi [ i ]); } for ( i = 0 ; i < n ; ++ i ) { int j ; mem ( num ); for ( j = wi [ i ]; j <= ans_v ; ++ j ) { if ( dp [ j - wi [ i ]] + wi [ i ] > dp [ j ] && num [ j - wi [ i ]] < mi [ i ]) { dp [ j ] = dp [ j - wi [ i ]] + wi [ i ]; num [ j ] = num [ j - wi [ i ]] + 1 ; } } } printf ( \"%d \\n \" , dp [ ans_v ]); } }","title":"Poj1276[\u591a\u91cd\u80cc\u5305]"},{"location":"Coding%20Knowledge/#poj218401","text":"\u4f7f\u5f97TS\u548cTF\u7684\u503c\u7684\u548c\u6700\u5927\uff0c\u540c\u65f6TS\u548cTF\u90fd\u4e0d\u80fd\u4e3a0 #include <iostream> #include <climits> #define MAXN 105 using namespace std ; int N ; const int M = 100005 ; // TS\u6216TF\u6700\u5927\u4e3a100000 int S [ MAXN ], F [ MAXN ]; int dp [ 2 * M ]; // dp[i]\u8868\u793aS\u503c\u4e3ai\u65f6F\u7684\u6700\u5927\u503c\uff1b\u5750\u6807\u5e73\u79fb\uff1a\u8d1f\u6570\u5728\u524d\uff0c\u6b63\u6570\u5728\u540e // \u5c06S\u770b\u505a\u4ee3\u4ef7\uff0cF\u770b\u505a\u4ef7\u503c\uff0c0-1\u80cc\u5305\u6c42\u89e3 int main () { while ( scanf ( \"%d\" , & N ) != EOF ) { for ( int i = 0 ; i < N ; i ++ ) scanf ( \"%d%d\" , & S [ i ], & F [ i ]); for ( int i = 0 ; i < 2 * M ; i ++ ) dp [ i ] = INT_MIN ; dp [ 100000 ] = 0 ; // 0\u524d\u6709\u5341\u4e07\u4e2a\u8d1f\u6570\uff0c0\u540e\u6709\u5341\u4e07\u4e2a\u6b63\u6570 for ( int i = 0 ; i < N ; i ++ ) { if ( S [ i ] >= 0 ) { for ( int j = 2 * M - 1 ; j >= S [ i ]; j -- ) { if ( dp [ j - S [ i ]] > INT_MIN ) // \u80cc\u5305\u91cd\u91cf\u4e3a j - S[i] \u7684\u60c5\u51b5\u5b58\u5728 dp [ j ] = max ( dp [ j ], dp [ j - S [ i ]] + F [ i ]); } } else { // if S[i] < 0\uff0c\u5982\u679c\u653e\u5165\u80cc\u5305\uff0c\u80cc\u5305\u53d8\u8f7b\uff0c\u9006\u5e8f\u904d\u5386 for ( int j = S [ i ]; j - S [ i ] < 2 * M ; j ++ ) { if ( dp [ j - S [ i ]] > INT_MIN ) dp [ j ] = max ( dp [ j ], dp [ j - S [ i ]] + F [ i ]); } } } int ans = INT_MIN ; for ( int i = 100000 ; i < 2 * M ; i ++ ) { if ( dp [ i ] >= 0 ) //TF\u503c\u5927\u4e8e0 \u663e\u7136\u8fd9\u91cc\u7684TS=i-100000>0 ans = max ( ans , dp [ i ] + i - 100000 ); // dp[i] + i \u5373 TS + TF\uff0c\u7136\u540e\u6062\u590d\u5750\u6807\u5e73\u79fb } printf ( \"%d \\n \" , ans ); } return 0 ; }","title":"Poj2184[01\u80cc\u5305\u53d8\u5f62]"},{"location":"Coding%20Knowledge/#dp","text":"https://www.cnblogs.com/Tony-Double-Sky/p/9283254.html \u72b6\u538b\u5c31\u662f\u5c06\u95ee\u9898\u53ef\u80fd\u9047\u5230\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\u7528\u4e00\u4e2a\u552f\u4e00\u7684\u4e8c\u8fdb\u5236\u6570\u8868\u793a \u72b6\u538b\u4f4d\u8fd0\u7b97 \u5224\u65ad\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u662f\u4e0d\u662f\u7b49\u4e8e1\u3002 \u65b9\u6cd5\uff1aif(((1<<(i\u22121))&x)>0) \u5c061\u5de6\u79fbi-1\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5236\u9020\u4e86\u4e00\u4e2a\u53ea\u6709\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u5176\u4ed6\u4f4d\u4e0a\u90fd\u662f0\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u7136\u540e\u4e0ex\u505a\u4e0e\u8fd0\u7b97\uff0c\u5982\u679c\u7ed3\u679c>0\uff0c\u8bf4\u660ex\u7b2ci\u4f4d\u4e0a\u662f1\uff0c\u53cd\u4e4b\u5219\u662f0\u3002 \u5c06\u4e00\u4e2a\u6570\u5b57x\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u66f4\u6539\u62101\u3002 \u65b9\u6cd5\uff1ax=x|(1<<(i\u22121)) \u8bc1\u660e\u65b9\u6cd5\u4e0e1\u7c7b\u4f3c\uff0c\u6b64\u5904\u4e0d\u518d\u91cd\u590d\u8bc1\u660e\u3002 \u628a\u4e00\u4e2a\u6570\u5b57\u4e8c\u8fdb\u5236\u4e0b\u6700\u9760\u53f3\u7684\u7b2c\u4e00\u4e2a1\u53bb\u6389\u3002 \u65b9\u6cd5\uff1ax=x&(x\u22121)","title":"\u72b6\u538bDP"},{"location":"Coding%20Knowledge/#_34","text":"// https://leetcode.com/problems/range-sum-query-mutable/ \u7ebf\u6bb5\u6811\u4fdd\u5b58\u53ef\u53d8\u533a\u95f4\u548c // \u6570\u7ec4\u6cd5 class NumArray { public : NumArray ( vector < int > nums ) { n = nums . size (); tree . resize ( n * 2 ); buildTree ( nums ); } void buildTree ( vector < int >& nums ) { for ( int i = n ; i < n * 2 ; ++ i ) { tree [ i ] = nums [ i - n ]; } for ( int i = n - 1 ; i > 0 ; -- i ) { tree [ i ] = tree [ i * 2 ] + tree [ i * 2 + 1 ]; } } void update ( int i , int val ) { tree [ i += n ] = val ; while ( i > 0 ) { tree [ i / 2 ] = tree [ i ] + tree [ i ^ 1 ]; i /= 2 ; } } int sumRange ( int i , int j ) { int sum = 0 ; for ( i += n , j += n ; i <= j ; i /= 2 , j /= 2 ) { if (( i & 1 ) == 1 ) sum += tree [ i ++ ]; if (( j & 1 ) == 0 ) sum += tree [ j -- ]; } return sum ; } private : int n ; vector < int > tree ; }; // \u6784\u9020SegmentTreeNode\u7c7b /* * \u672c\u9898\u5b9e\u73b0\u7684\u51fd\u6570\uff1aNumArray \u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0csumRange\uff0cupdate * \u672c\u4ee3\u7801\u4f7f\u7528\u7ebf\u6bb5\u6811\u5b9e\u73b0\u8be5\u7c7b\uff0cNumArray \u5305\u542b\u4e00\u4e2a\u5b50\u7c7b SegmentTreeNode */ class NumArray { public : // \u6210\u5458\u53d8\u91cf\u4e0e\u5b50\u7c7b class SegmentTreeNode { public : int s , e ; SegmentTreeNode * left , * right ; int sum ; // \u7ebf\u6bb5\u6811\u6784\u9020\u51fd\u6570 SegmentTreeNode ( int s , int e ) : s ( s ), e ( e ), left ( nullptr ), right ( nullptr ), sum ( 0 ) { } // \u7ebf\u6bb5\u6811\u6790\u6784\u51fd\u6570 ~ SegmentTreeNode () { if ( this -> left != nullptr ) delete ( this -> left ); if ( this -> right != nullptr ) delete ( this -> right ); delete this ; } }; SegmentTreeNode * root = nullptr ; // \u6210\u5458\u65b9\u6cd5 /* * \u7c7b\u7684\u6784\u9020\u51fd\u6570 * @param nums \u6570\u7ec4 */ NumArray ( vector < int > nums ) { root = buildTree ( nums , 0 , nums . size () - 1 ); } /* * \u7ebf\u6bb5\u6811\u7684\u6784\u9020 * @param nums \u6570\u7ec4 * @param s \u8d77\u59cb\u7d22\u5f15 * @param e \u7ec8\u6b62\u7d22\u5f15 */ SegmentTreeNode * buildTree ( vector < int > nums , int s , int e ) { if ( s > e ) return nullptr ; SegmentTreeNode * ret = new SegmentTreeNode ( s , e ); if ( s == e ) { ret -> sum = nums [ s ]; } else { int mid = s + ( e - s ) / 2 ; // \u4e2d\u4f4d ret -> left = buildTree ( nums , s , mid ); ret -> right = buildTree ( nums , mid + 1 , e ); ret -> sum = ret -> left -> sum + ret -> right -> sum ; } return ret ; } void update ( int i , int val ) { update ( root , i , val ); } void update ( SegmentTreeNode * root , int pos , int val ) { if ( root -> s == root -> e ) // \u5982\u679c\u7ebf\u6bb5\u6811\u53ea\u6709\u4e00\u4e2a\u6570 root -> sum = val ; else { int mid = root -> s + ( root -> e - root -> s ) / 2 ; // \u7ebf\u6bb5\u6811\u4e2d\u4f4d if ( pos <= mid ) update ( root -> left , pos , val ); // \u5de6\u5b50\u6811\u4e2d\u66f4\u65b0\uff0c\u6ce8\u610f\u53d6\u7b49 else update ( root -> right , pos , val ); // \u53f3\u5b50\u6811\u4e2d\u66f4\u65b0 root -> sum = root -> left -> sum + root -> right -> sum ; // \u66f4\u65b0\u5404\u5c42\u7ed3\u70b9sum } } int sumRange ( int i , int j ) { return sumRange ( root , i , j ); } int sumRange ( SegmentTreeNode * root , int i , int j ) { if ( i > j ) swap ( i , j ); if ( root -> e == j && root -> s == i ) return root -> sum ; else { int mid = root -> s + ( root -> e - root -> s ) / 2 ; // \u7ebf\u6bb5\u6811\u4e2d\u4f4d if ( mid >= j ) return sumRange ( root -> left , i , j ); // \u5de6\u5b50\u6811\u4e2d\u6c42\u548c else if ( mid < i ) return sumRange ( root -> right , i , j ); // \u53f3\u5b50\u6811\u4e2d\u6c42\u548c else return sumRange ( root -> left , i , mid ) + sumRange ( root -> right , mid + 1 , j ); } } }; // \u6811\u72b6\u6570\u7ec4 class BinaryxexTree { public : BinaryxexTree ( vector < int >& s ) { buildTree ( s ); } BinaryxexTree () {}; void buildTree ( vector < int >& s ) { size = s . size (); nums = vector < int > ( size , 0 ); bit = vector < int > ( size + 1 , 0 ); for ( int i = 0 ; i < s . size (); ++ i ) update ( i , s [ i ]); nums = s ; } void update ( int x , int n ) { int val = n - nums [ x ]; nums [ x ] = n ; for ( int i = x + 1 ; i <= size ; i += lowbit ( i )) { bit [ i ] += val ; } } int sumRange ( int i , int j ) { if ( j < i || i < 0 ) return 0 ; if ( i == j ) return nums [ i ]; return getSum ( j ) - getSum ( i - 1 ); // i - 1 \u4e0d\u4f1a\u8d8a\u51fa\u4e0b\u754c } private : int lowbit ( int x ) { return x & ( - x ); } int getSum ( int x ) { int sum = 0 ; for ( int i = x + 1 ; i ; i -= lowbit ( i )) { sum += bit [ i ]; } return sum ; } vector < int > bit ; vector < int > nums ; int size ; }; class NumArray { public : NumArray ( vector < int > nums ) { tree . buildTree ( nums ); } void update ( int i , int val ) { tree . update ( i , val ); } int sumRange ( int i , int j ) { return tree . sumRange ( i , j ); } private : BinaryxexTree tree ; };","title":"\u7ebf\u6bb5\u6811"},{"location":"Coding%20Knowledge/#_35","text":"","title":"\u626b\u63cf\u7ebf"},{"location":"Coding%20Knowledge/#_36","text":"// \u84dd\u6865\u676f 2017_10 \u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf \u7ecf\u5178\u9898 // https://blog.csdn.net/konghhhhh/article/details/78236036 #include <stdio.h> #include <algorithm> using namespace std ; struct Line { int x1 , x2 , h , f ; //\u5de6\u53f3\u5750\u6807\uff0c\u7eb5\u5750\u6807\uff08\u9ad8\u5ea6\uff09\uff0cf=1\u4e3a\u5165\u8fb9\uff0cf=-1\u4e3a\u51fa\u8fb9 Line () {} Line ( int _x1 , int _x2 , int _h , int _f ) : x1 ( _x1 ), x2 ( _x2 ), h ( _h ), f ( _f ) {} bool operator < ( const Line & l1 ) { return h < l1 . h ; } }; struct SegTree { int pl , pr , cnt , len ; // \u5de6\u7aef\u70b9\u7f16\u53f7\uff0c\u53f3\u7aef\u70b9\u7f16\u53f7\uff0c\u88ab\u8986\u76d6\u6b21\u6570\uff0c\u4e24\u4e2a\u7aef\u70b9\u4e4b\u95f4\u88ab\u8986\u76d6\u7684\u957f\u5ea6 SegTree * lson , * rson ; SegTree () : cnt ( 0 ), len ( 0 ) {} }; const int N = 10000 ; int n , ans ; int X [ N << 1 ]; //\u8bb0\u5f55\u6240\u6709\u7684\u6a2a\u5750\u6807 Line lines [ N ]; SegTree * buildTree ( int pl , int pr ) { SegTree * p = new SegTree (); p -> pl = pl ; p -> pr = pr ; if ( pl == pr ) return p ; int mid = (( pl + pr ) >> 1 ); p -> lson = buildTree ( pl , mid ); p -> rson = buildTree ( mid + 1 , pr ); return p ; } void updateLength ( SegTree * pTree , int tl , int tr ) { if ( pTree -> cnt ) { pTree -> len = X [ tr ] - X [ tl - 1 ]; //\u5c06\u533a\u95f4\u6811\u4e0a\u7684\u7aef\u70b9\uff08\u5e8f\u53f7\uff09\u53cd\u5165\u5230X\u4e2d\u6c42\u5f97\u4e8c\u7ef4\u5750\u6807\u4e0a\u7684\u5b9e\u9645\u6a2a\u5750\u6807 } else if ( tl == tr ) { pTree -> len = 0 ; } else { //\u8d1f\u6570 pTree -> len = pTree -> lson -> len + pTree -> rson -> len ; } } void update ( SegTree * tree , int pl , int pr , int value ) // \u81ea\u5e95\u5411\u4e0a\u7684\u66f4\u65b0cnt\u548clen { int tl = tree -> pl ; int tr = tree -> pr ; if ( pl <= tl && pr >= tr ) { tree -> cnt += value ; updateLength ( tree , tl , tr ); return ; } int m = ( tl + tr ) >> 1 ; if ( pl <= m ) update ( tree -> lson , pl , pr , value ); if ( pr > m ) update ( tree -> rson , pl , pr , value ); updateLength ( tree , tl , tr ); } int main () { scanf ( \"%d\" , & n ); int x1 , x2 , y1 , y2 ; int index = 0 ; for ( int i = 0 ; i < n ; i ++ ) { scanf ( \"%d %d %d %d\" , & x1 , & y1 , & x2 , & y2 ); X [ index ] = x1 ; lines [ index ++ ] = Line ( x1 , x2 , y1 , 1 ); X [ index ] = x2 ; lines [ index ++ ] = Line ( x1 , x2 , y2 , -1 ); } sort ( X , X + index ); sort ( lines , lines + index ); // \u521d\u59cb\u5316\u7ebf\u6bb5\u6811 \u5148\u5bf9index\u53bb\u91cd \u7136\u540e\u5f97\u5230X_end\u4e2a\u4e0d\u91cd\u590d\u7684\u6a2a\u5750\u6807\u503c \u6240\u4ee5\u5171\u6709X_end - 1 \u4e2a\u79bb\u6563\u7684\u533a\u95f4 int X_end = unique ( X , X + index ) - X ; SegTree * root = buildTree ( 1 , X_end ); for ( int i = 0 ; i < index ; i ++ ) { int pl = lower_bound ( X , X + X_end , lines [ i ]. x1 ) - X ; int pr = lower_bound ( X , X + X_end , lines [ i ]. x2 ) - X ; update ( root , pl + 1 , pr , lines [ i ]. f ); ans += root -> len * ( lines [ i + 1 ]. h - lines [ i ]. h ); } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"\u7ebf\u6bb5\u6811+\u626b\u63cf\u7ebf"},{"location":"Coding%20Knowledge/#_37","text":"https://blog.csdn.net/bestsort/article/details/80796531","title":"\u6811\u72b6\u6570\u7ec4"},{"location":"Coding%20Knowledge/#_38","text":"","title":"\u9ad8\u7cbe\u5ea6"},{"location":"Coding%20Knowledge/#_39","text":"// \u4e86\u89e3\u51e0\u4e2a\u91cd\u8981\u7684 ASCII \u7801 // '0': 48 // 'A': 65 // 'a': 97 #include <iostream> #include <cstring> using namespace std ; const int maxn = 1000 ; int t [ maxn ]; int d [ maxn ]; // \u8f6c\u6362\u8fc7\u7a0b\u4e2d\u7684\u5341\u8fdb\u5236\u6570 char str1 [ maxn ], str2 [ maxn ]; // \u6e90\u8fdb\u5236\u6570\u4e0e\u76ee\u6807\u8fdb\u5236\u6570 int n , m ; // \u6e90\u8fdb\u5236\u4e0e\u76ee\u6807\u8fdb\u5236 void solve () { int i , len , k ; len = strlen ( str1 ); for ( i = len - 1 ; i >= 0 ; -- i ) { // t[0] \u662f t \u6700\u4f4e\u4f4d\uff0cstr1[0] \u662f str1 \u7684\u6700\u9ad8\u4f4d int cur ; if ( str1 [ i ] <= '9' ) // str1[i] \u662f\u6570\u5b57 cur = str1 [ i ] - '0' ; else if ( str1 [ i ] < 'a' ) // str1[i] \u662f\u5927\u5199\u5b57\u6bcd cur = str1 [ i ] - ( 'A' - 10 ); else // str1[i] \u662f\u5c0f\u5199\u5b57\u6bcd cur = str1 [ i ] - ( 'a' - 36 ); t [ len - 1 - i ] = cur ; } for ( k = 0 ; len ;) { for ( i = len - 1 ; i >= 0 ; -- i ) { // \u4ece t \u9ad8\u4f4d\u5f00\u59cb t [ i ] += t [ i + 1 ] % m * n ; t [ i + 1 ] /= m ; } d [ k ++ ] = t [ 0 ] % m ; t [ 0 ] /= m ; while ( len > 0 && ! t [ len - 1 ]) len -- ; // \u53bb\u6389\u9ad8\u4f4d\u7684 0 } str2 [ k ] = '\\0' ; for ( i = 0 ; i < k ; i ++ ) { // str2[0] \u662f str2 \u7684\u6700\u9ad8\u4f4d\uff0c\u5faa\u73af\u4ece\u4f4e\u4f4d\u5f00\u59cb char cur ; if ( d [ i ] < 10 ) // \u5c06\u4ee5\u6570\u5b57\u8868\u793a cur = ( char )( d [ i ] + '0' ); else if ( d [ i ] < 36 ) // \u5c06\u4ee5\u5927\u5199\u5b57\u6bcd\u8868\u793a cur = ( char )( d [ i ] - 10 + 'A' ); else // \u5c06\u4ee5\u5c0f\u5199\u5b57\u6bcd\u8868\u793a cur = ( char )( d [ i ] - 36 + 'a' ); str2 [ k - 1 - i ] = cur ; } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int T ; cin >> T ; while ( T -- ) { cin >> n >> m >> str1 ; // \u6e90\u8fdb\u5236\uff0c\u76ee\u6807\u8fdb\u5236\uff0c\u6e90\u8fdb\u5236\u6570\u5b57 solve (); cout << n << \" \" << str1 << '\\n' << m << \" \" << str2 << '\\n' << '\\n' ; } return 0 ; }","title":"\u9ad8\u7cbe\u5ea6\u8fdb\u5236\u8f6c\u6362"},{"location":"Coding%20Knowledge/#_40","text":"struct bign { // big number int d [ 1000 ]; // \u5b58\u50a8\u5927\u6570\uff0cd[0]\u662f\u6700\u4f4e\u4f4d int len ; // \u8bb0\u5f55\u957f\u5ea6 bign () { // \u6784\u9020\u65b9\u6cd5 fill_n ( d , sizeof ( d ), 0 ); // \u8fd9\u4e00\u6b65\u4e0d\u53ef\u5ffd\u7565\uff01 // fill_n \u6765\u81ea #include<algorithm> len = 0 ; } }; bign change ( char str []) { // \u6574\u6570\u8f6c\u6362\u4e3a bign bign a ; a . len = strlen ( str ); // bign \u7684\u957f\u5ea6\u5373\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 for ( int i = 0 ; i < a . len ; i ++ ) { a . d [ i ] = str [ a . len - i - 1 ] - '0' ; // \u6ce8\u610f\uff0c\u9006\u7740\u8d4b\u503c\uff0cstr[0]\u662f\u6700\u9ad8\u4f4d return a ; } int compare ( bign a , bign b ) { if ( a . len > b . len ) return 1 ; else if ( a . len < b . len ) return -1 ; else { for ( int i = a . len - 1 ; i >= 0 ; i -- ) { // \u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u6bd4\u8f83 if ( a . d [ i ] > b . d [ i ]) return 1 ; else if ( a . d [ i ] < b . d [ i ]) return -1 ; } return 0 ; // \u4e24\u6570\u76f8\u7b49 } } void print ( bign a ) { for ( int i = a . len - 1 ; i >= 0 ; i -- ) cout << a . d [ i ]; } bign add ( bign a , bign b ) { // \u9ad8\u7cbe\u5ea6 a + b bign c ; // c = a + b int carry = 0 ; // \u8fdb\u4f4d for ( int i = 0 ; i < a . len || i < b . len ; i ++ ) { int t = a . d [ i ] + b . d [ i ] + carry ; c . d [ c . len ++ ] = t % 10 ; carry = t / 10 ; } if ( carry ) c . d [ c . len ++ ] = carry ; return c ; } bign sub ( bign a , bign b ) { bign c ; for ( int i = 0 ; i < a . len || i < b . len ; i ++ ) { if ( a . d [ i ] < b . d [ i ]) { a . d [ i + 1 ] -- ; a . d [ i ] += 10 ; } c . d [ c . len ++ ] = a . d [ i ] - b . d [ i ]; } while ( c . len - 1 >= 1 && c . d [ c . len - 1 ] == 0 ) { c . len -- ; // \u53bb\u9664\u6700\u9ad8\u4f4d\u76840\uff0c\u540c\u65f6\u81f3\u5c11\u4fdd\u7559\u4e00\u4f4d\u6700\u4f4e\u4f4d } return c ; } bign multi ( bign a , int b ) { bign c ; int carry = 0 ; // \u8fdb\u4f4d for ( int i = 0 ; i < a . len ; i ++ ) { int t = a . d [ i ] * b + carry ; c . d [ c . len ++ ] = t % 10 ; carry = t / 10 ; } while ( carry ) { c . d [ c . len ++ ] = carry % 10 ; carry /= 10 ; } return c ; } bign divide ( bign a , int b int & r ) { // \u8fd4\u56de\u5546\uff0cr\u4e3a\u4f59\u6570 bign c ; c . len = a . len ; for ( int i = a . len - 1 ; i >= 0 ; i -- ) { // \u4ece\u9ad8\u4f4d\u5f00\u59cb r = r * 10 + a . d [ i ]; // \u52a0\u4e0a\u4e0a\u4e00\u4f4d\u9057\u7559\u7684\u4f59\u6570 if ( r < b ) c . d [ i ] = 0 ; // \u8be5\u4f4d\u4e0d\u591f\u9664\uff0c\u4e3a0 else { // \u591f\u9664 c . d [ i ] = r / b ; // \u5546 r = r % b ; } } while ( c . len - 1 >= 1 && c . d [ c . len - 1 ] == 0 ) { c . len -- ; // \u53bb\u9664\u6700\u9ad8\u4f4d\u76840\uff0c\u540c\u65f6\u81f3\u5c11\u4fdd\u7559\u4e00\u4f4d\u6700\u4f4e\u4f4d } return c ; }","title":"\u5927\u6574\u6570"},{"location":"Concepts/","text":"Concepts \u00b6 ML \u00b6 AdaBoost \u771f\u6ef4\u662f\u975e\u5e38\u975e\u5e38\u5f62\u8c61\u5f97\u8bb2\u89e3 :thumbsup: \u200b AutoEncoder & Variational autoencoder \u00b6 AutoEncoder\u8be6\u89e3 VAE\u8be6\u89e3 VAE \u662f\u4e3a\u6bcf\u4e2a\u6837\u672c\u6784\u9020\u4e13\u5c5e\u7684\u6b63\u6001\u5206\u5e03\uff0c\u7136\u540e\u91c7\u6837\u6765\u91cd\u6784 \u672c\u8d28\u4e0a\u5c31\u662f\u5728\u6211\u4eec\u5e38\u89c4\u7684\u81ea\u7f16\u7801\u5668\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9 encoder \u7684\u7ed3\u679c\uff08\u5728VAE\u4e2d\u5bf9\u5e94\u7740\u8ba1\u7b97\u5747\u503c\u7684\u7f51\u7edc\uff09\u52a0\u4e0a\u4e86\u201c\u9ad8\u65af\u566a\u58f0\u201d\uff0c\u4f7f\u5f97\u7ed3\u679c decoder \u80fd\u591f\u5bf9\u566a\u58f0\u6709\u9c81\u68d2\u6027\uff1b\u800c\u90a3\u4e2a\u989d\u5916\u7684 KL loss\uff08\u76ee\u7684\u662f\u8ba9\u5747\u503c\u4e3a 0\uff0c\u65b9\u5dee\u4e3a 1\uff09\uff0c\u4e8b\u5b9e\u4e0a\u5c31\u662f\u76f8\u5f53\u4e8e\u5bf9 encoder \u7684\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u5e0c\u671b encoder \u51fa\u6765\u7684\u4e1c\u897f\u5747\u6709\u96f6\u5747\u503c\u3002\u53e6\u5916\u4e00\u4e2a encoder\uff08\u5bf9\u5e94\u7740\u8ba1\u7b97\u65b9\u5dee\u7684\u7f51\u7edc\uff09\u662f\u7528\u6765**\u52a8\u6001\u8c03\u8282\u566a\u58f0\u7684\u5f3a\u5ea6**\u7684\u3002 https://zhuanlan.zhihu.com/p/32486725 https://zhuanlan.zhihu.com/p/55557709 https://www.cnblogs.com/fxjwind/p/9099931.html DL \u00b6 L1\u4e0eL2\u6b63\u5219\u5316 L1 \u529b\u6c42\u7a00\u758f L2 \u9632\u6b62\u8fc7\u62df\u5408","title":"Concepts"},{"location":"Concepts/#concepts","text":"","title":"Concepts"},{"location":"Concepts/#ml","text":"AdaBoost \u771f\u6ef4\u662f\u975e\u5e38\u975e\u5e38\u5f62\u8c61\u5f97\u8bb2\u89e3 :thumbsup: \u200b","title":"ML"},{"location":"Concepts/#autoencoder-variational-autoencoder","text":"AutoEncoder\u8be6\u89e3 VAE\u8be6\u89e3 VAE \u662f\u4e3a\u6bcf\u4e2a\u6837\u672c\u6784\u9020\u4e13\u5c5e\u7684\u6b63\u6001\u5206\u5e03\uff0c\u7136\u540e\u91c7\u6837\u6765\u91cd\u6784 \u672c\u8d28\u4e0a\u5c31\u662f\u5728\u6211\u4eec\u5e38\u89c4\u7684\u81ea\u7f16\u7801\u5668\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9 encoder \u7684\u7ed3\u679c\uff08\u5728VAE\u4e2d\u5bf9\u5e94\u7740\u8ba1\u7b97\u5747\u503c\u7684\u7f51\u7edc\uff09\u52a0\u4e0a\u4e86\u201c\u9ad8\u65af\u566a\u58f0\u201d\uff0c\u4f7f\u5f97\u7ed3\u679c decoder \u80fd\u591f\u5bf9\u566a\u58f0\u6709\u9c81\u68d2\u6027\uff1b\u800c\u90a3\u4e2a\u989d\u5916\u7684 KL loss\uff08\u76ee\u7684\u662f\u8ba9\u5747\u503c\u4e3a 0\uff0c\u65b9\u5dee\u4e3a 1\uff09\uff0c\u4e8b\u5b9e\u4e0a\u5c31\u662f\u76f8\u5f53\u4e8e\u5bf9 encoder \u7684\u4e00\u4e2a\u6b63\u5219\u9879\uff0c\u5e0c\u671b encoder \u51fa\u6765\u7684\u4e1c\u897f\u5747\u6709\u96f6\u5747\u503c\u3002\u53e6\u5916\u4e00\u4e2a encoder\uff08\u5bf9\u5e94\u7740\u8ba1\u7b97\u65b9\u5dee\u7684\u7f51\u7edc\uff09\u662f\u7528\u6765**\u52a8\u6001\u8c03\u8282\u566a\u58f0\u7684\u5f3a\u5ea6**\u7684\u3002 https://zhuanlan.zhihu.com/p/32486725 https://zhuanlan.zhihu.com/p/55557709 https://www.cnblogs.com/fxjwind/p/9099931.html","title":"AutoEncoder &amp; Variational autoencoder"},{"location":"Concepts/#dl","text":"L1\u4e0eL2\u6b63\u5219\u5316 L1 \u529b\u6c42\u7a00\u758f L2 \u9632\u6b62\u8fc7\u62df\u5408","title":"DL"},{"location":"Cross%20compiler/","text":"Cross Compiler \u00b6 \u76ee\u7684\uff1a \u4e86\u89e3\u4ea4\u53c9\u7f16\u8bd1\u7684\u6982\u5ff5\uff0c\u5b66\u4f1a\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177 toolchain \u7b80\u4ecb \u00b6 \u4ec0\u4e48\u662f\u4ea4\u53c9\u7f16\u8bd1 \u00b6 \u672c\u5730\u7f16\u8bd1 \u00b6 \u672c\u5730\u7f16\u8bd1\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u53ea\u80fd\u653e\u5230\u5f53\u524d\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u5e73\u65f6\u6211\u4eec\u5e38\u89c1\u7684\u8f6f\u4ef6\u5f00\u53d1\uff0c\u90fd\u662f\u5c5e\u4e8e\u672c\u5730\u7f16\u8bd1\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528 x86 \u5e73\u53f0\u4e0a\u7684\u5de5\u5177\uff0c\u5f00\u53d1\u9488\u5bf9 x86 \u5e73\u53f0\u672c\u8eab\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u8fd9\u4e2a\u7f16\u8bd1\u8fc7\u7a0b\u79f0\u4e3a\u672c\u5730\u7f16\u8bd1\u3002 \u4ea4\u53c9\u7f16\u8bd1 \u00b6 \u4ea4\u53c9\u7f16\u8bd1\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u80fd\u8fd0\u884c\u5728\u4f53\u7cfb\u7ed3\u6784\u4e0d\u540c\u7684\u53e6\u4e00\u79cd\u76ee\u6807\u5e73\u53f0\u4e0a\uff0c\u4f46\u662f\u7f16\u8bd1\u5e73\u53f0\u672c\u8eab\u5374\u4e0d\u80fd\u8fd0\u884c\u8be5\u7a0b\u5e8f\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u80fd\u8fd0\u884c\u5728 ARM \u5e73\u53f0\u7684\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u5f97\u5230\u7684\u7a0b\u5e8f\u5728 x86 \u5e73\u53f0\u4e0a\u662f\u4e0d\u80fd\u8fd0\u884c\u7684\uff0c\u5fc5\u987b\u653e\u5230 ARM \u5e73\u53f0\u4e0a\u624d\u80fd\u8fd0\u884c\u3002 \u4e3a\u4ec0\u4e48\u8981\u4ea4\u53c9\u7f16\u8bd1 \u00b6 Speed\uff1a \u76ee\u6807\u5e73\u53f0\u7684\u8fd0\u884c\u901f\u5ea6\u5f80\u5f80\u6bd4\u4e3b\u673a\u6162\u5f97\u591a\uff0c\u8bb8\u591a\u4e13\u7528\u7684\u5d4c\u5165\u5f0f\u786c\u4ef6\u88ab\u8bbe\u8ba1\u4e3a\u4f4e\u6210\u672c\u548c\u4f4e\u529f\u8017\uff0c\u6ca1\u6709\u592a\u9ad8\u7684\u6027\u80fd Capability\uff1a \u6574\u4e2a\u7f16\u8bd1\u8fc7\u7a0b\u662f\u975e\u5e38\u6d88\u8017\u8d44\u6e90\u7684\uff0c\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5f80\u5f80\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\u6216\u78c1\u76d8\u7a7a\u95f4 Availability\uff1a \u5373\u4f7f\u76ee\u6807\u5e73\u53f0\u8d44\u6e90\u5f88\u5145\u8db3\uff0c\u53ef\u4ee5\u672c\u5730\u7f16\u8bd1\uff0c\u4f46\u662f\u7b2c\u4e00\u4e2a\u5728\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\u7684\u672c\u5730\u7f16\u8bd1\u5668\u603b\u9700\u8981\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u83b7\u5f97\u3002 Flexibility\uff1a \u4e00\u4e2a\u5b8c\u6574\u7684Linux\u7f16\u8bd1\u73af\u5883\u9700\u8981\u5f88\u591a\u652f\u6301\u5305\uff0c\u4ea4\u53c9\u7f16\u8bd1\u4f7f\u6211\u4eec\u4e0d\u9700\u8981\u82b1\u65f6\u95f4\u5c06\u5404\u79cd\u652f\u6301\u5305\u79fb\u690d\u5230\u76ee\u6807\u677f\u4e0a\u3002\u4ea4\u53c9\u7f16\u8bd1\u7684\u91cd\u70b9\u662f\u6784\u5efa\u8981\u90e8\u7f72\u7684\u76ee\u6807\u5305\uff0c\u800c\u4e0d\u662f\u82b1\u65f6\u95f4\u83b7\u5f97\u53ea\u6784\u5efa\u76ee\u6807\u7cfb\u7edf\u7684\u5148\u51b3\u6761\u4ef6\u3002 \u4e3a\u4ec0\u4e48\u4ea4\u53c9\u7f16\u8bd1\u6bd4\u8f83\u56f0\u96be \u00b6 \u4e0d\u540c\u7684\u4f53\u7cfb\u67b6\u6784\u62e5\u6709\u4e0d\u540c\u7684\u673a\u5668\u7279\u6027 Word size\uff1a \u662f64\u4f4d\u8fd8\u662f32\u4f4d\u7cfb\u7edf Endianness\uff1a \u662f\u5927\u7aef\u8fd8\u662f\u5c0f\u7aef\u7cfb\u7edf Alignment\uff1a \u662f\u5426\u5fc5\u4fee\u6309\u71674\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u8fdb\u884c\u8bbf\u95ee Default signedness\uff1a \u9ed8\u8ba4\u6570\u636e\u7c7b\u578b\u662f\u6709\u7b26\u53f7\u8fd8\u662f\u65e0\u7b26\u53f7 NOMMU\uff1a \u662f\u5426\u652f\u6301MMU \u4ea4\u53c9\u7f16\u8bd1\u65f6\u7684\u4e3b\u673a\u73af\u5883\u4e0e\u76ee\u6807\u73af\u5883\u4e0d\u540c **Configuration issues\uff1a**\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u8fd0\u884c\u914d\u7f6e\u6d4b\u8bd5\u4f1a\u7ed9\u51fa\u9519\u8bef\u7684\u7b54\u6848\u3002\u914d\u7f6e\u8fd8\u53ef\u4ee5\u68c0\u6d4b\u4e3b\u673a\u4e0a\u662f\u5426\u5b58\u5728\u5305\uff0c\u5e76\u5728\u76ee\u6807\u6ca1\u6709\u5305\u6216\u7248\u672c\u4e0d\u517c\u5bb9\u65f6\u63d0\u4f9b\u5bf9\u5305\u7684\u652f\u6301\u3002 **HOSTCC vs TARGETCC\uff1a**\u8bb8\u591a\u6784\u5efa\u8fc7\u7a0b\u9700\u8981\u7f16\u8bd1\u8981\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u914d\u7f6e\u6d4b\u8bd5\uff0c\u6216\u8005\u751f\u6210\u4ee3\u7801\u7684\u7a0b\u5e8f(\u6bd4\u5982\u4e00\u4e2aC\u7a0b\u5e8f\uff0c\u5b83\u521b\u5efa\u4e00\u4e2a.h\u6587\u4ef6\uff0c\u7136\u540e\u5728\u4e3b\u6784\u5efa\u8fc7\u7a0b\u4e2dinclude)\u3002\u53ea\u8981\u7528\u76ee\u6807\u7f16\u8bd1\u5668\u66ff\u6362\u5bbf\u4e3b\u7f16\u8bd1\u5668\uff0c\u5c31\u4f1a\u7834\u574f\u9700\u8981\u6784\u5efa\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u8fd0\u884c\u7684\u4e1c\u897f\u7684\u5305\u3002\u8fd9\u6837\u7684\u5305\u9700\u8981\u540c\u65f6\u8bbf\u95ee\u4e3b\u673a\u548c\u76ee\u6807\u7f16\u8bd1\u5668\uff0c\u5e76\u4e14\u9700\u8981\u5b66\u4e60\u4f55\u65f6\u4f7f\u7528\u5b83\u4eec\u3002 **Toolchain Leaks\uff1a**\u914d\u7f6e\u4e0d\u5f53\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u80fd\u4f1a\u5c06\u4e3b\u673a\u7cfb\u7edf\u7684\u4e00\u4e9b\u4fe1\u606f\u6cc4\u6f0f\u5230\u7f16\u8bd1\u540e\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5bfc\u81f4\u901a\u5e38\u5f88\u5bb9\u6613\u68c0\u6d4b\u5230\u7684\u6545\u969c\uff0c\u4f46\u662f\u5f88\u96be\u8bca\u65ad\u548c\u7ea0\u6b63\u3002\u5de5\u5177\u94fe\u53ef\u80fd\u5305\u542b\u9519\u8bef\u7684\u5934\u6587\u4ef6\uff0c\u6216\u8005\u5728\u94fe\u63a5\u65f6\u641c\u7d22\u9519\u8bef\u7684\u5e93\u8def\u5f84\u3002\u5171\u4eab\u5e93\u901a\u5e38\u4f9d\u8d56\u4e8e\u5176\u4ed6\u5171\u4eab\u5e93\uff0c\u800c\u8fd9\u4e9b\u5171\u4eab\u5e93\u4e5f\u53ef\u80fd\u5728\u5f15\u5165\u5bf9\u4e3b\u673a\u7cfb\u7edf\u7684\u610f\u5916\u94fe\u63a5\u3002 **Libraries\uff1a**\u52a8\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u8bbf\u95ee\u9002\u5f53\u7684\u5171\u4eab\u5e93\u3002\u76ee\u6807\u7cfb\u7edf\u7684\u5171\u4eab\u5e93\u9700\u8981\u6dfb\u52a0\u5230\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e2d\uff0c\u4ee5\u4fbf\u7a0b\u5e8f\u53ef\u4ee5\u94fe\u63a5\u5230\u5b83\u4eec\u3002 **Testing\uff1a**\u5728\u672c\u5730\u6784\u5efa\u4e0a\uff0c\u5f00\u53d1\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b9\u4fbf\u7684\u6d4b\u8bd5\u73af\u5883\u3002\u5728\u4ea4\u53c9\u7f16\u8bd1\u65f6\uff0c\u786e\u8ba4\u6210\u529f\u6784\u5efa\u7684\u201chello world\u201d\u53ef\u80fd\u9700\u8981\u914d\u7f6e(\u81f3\u5c11)\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3001\u5185\u6838\u3001\u6839\u6587\u4ef6\u7cfb\u7edf\u548c\u5171\u4eab\u5e93 \u4ea4\u53c9\u5de5\u5177\u94fe \u00b6 **\u4ea4\u53c9\u5de5\u5177\u94fe**\u5c31\u662f\u4e3a\u4e86\u7f16\u8bd1\u8de8\u5e73\u53f0\u4f53\u7cfb\u7ed3\u6784\u7684\u7a0b\u5e8f\u4ee3\u7801\u800c\u5f62\u6210\u7684\u7531\u591a\u4e2a\u5b50\u5de5\u5177\u6784\u6210\u7684\u4e00\u5957\u5b8c\u6574\u7684\u5de5\u5177\u96c6\u3002\u540c\u65f6\uff0c\u5b83\u9690\u85cf\u4e86\u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5\u7b49\u7ec6\u8282\uff0c\u5f53\u6211\u4eec\u6307\u5b9a\u4e86\u6e90\u6587\u4ef6(.c)\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u6309\u7167\u7f16\u8bd1\u6d41\u7a0b\u8c03\u7528\u4e0d\u540c\u7684\u5b50\u5de5\u5177\uff0c\u81ea\u52a8\u751f\u6210\u6700\u7ec8\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6620\u50cf(.bin)\u3002 \u4ea4\u53c9\u5de5\u5177\u94fe\u662f\u4e00\u4e2a\u7531**\u7f16\u8bd1\u5668\u3001\u8fde\u63a5\u5668\u548c\u89e3\u91ca\u5668**\u7ec4\u6210\u7684\u7efc\u5408\u5f00\u53d1\u73af\u5883\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e3b\u8981\u7531**binutils\u3001gcc\u548cglibc**\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\u3002\u6709\u65f6\u51fa\u4e8e\u51cf\u5c0f libc \u5e93\u5927\u5c0f\u7684\u8003\u8651\uff0c\u4e5f\u53ef\u4ee5\u7528\u522b\u7684 c \u5e93\u6765\u4ee3\u66ff glibc\uff0c\u4f8b\u5982 uClibc\u3001dietlibc \u548c newlib\u3002 \u76ee\u6807\u662f\u4e3a\u4e86\uff1a \u751f\u6210\uff08\u53ef\u4ee5\u8fd0\u884c\u7684\uff09\u7a0b\u5e8f\u6216\u5e93\u6587\u4ef6 \uff0c\u5185\u90e8\u7684\u6267\u884c\u8fc7\u7a0b\u548c\u903b\u8f91\u4e3b\u8981\u5305\u542b\u4e86\uff1a \u7f16\u8bd1 \u7f16\u8bd1\u7684\u8f93\u5165\uff08\u5bf9\u8c61\uff09\u662f\uff1a\u7a0b\u5e8f\u4ee3\u7801 \u7f16\u8bd1\u8f93\u51fa\uff08\u76ee\u6807\uff09\u662f\uff1a\u76ee\u6807\u6587\u4ef6 \u7f16\u8bd1\u6240\u9700\u8981\u7684\u5de5\u5177\u662f\uff1a\u7f16\u8bd1\u5668 \u7f16\u8bd1\u5668\uff1a\u5e38\u89c1\u7684\u7f16\u8bd1\u5668\uff0c\u5373\u4e3agcc \u94fe\u63a5 \u94fe\u63a5\u7684\u8f93\u5165\uff08\u5bf9\u8c61\uff09\u662f\uff1a\uff08\u7a0b\u5e8f\u8fd0\u884c\u65f6\u6240\u4f9d\u8d56\u7684\uff0c\u6216\u8005\u67d0\u4e2a\u5e93\u6240\u4f9d\u8d56\u7684\u53e6\u5916\u4e00\u4e2a\uff09\u5e93\uff08\u6587\u4ef6\uff09 \u94fe\u63a5\u7684\u8f93\u51fa\uff08\u76ee\u6807\uff09\u662f\uff1a\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6216\u8005\u662f\u53ef\u4ee5\u88ab\u522b\u4eba\u8c03\u7528\u7684\u5b8c\u6574\u7684\u5e93\u6587\u4ef6 \u94fe\u63a5\u6240\u9700\u8981\u7684\u5de5\u5177\u662f\uff1a\u94fe\u63a5\u5668 \u94fe\u63a5\u5668\uff0c\u5373ld \u4e3a\u4e86\u5c06\u7a0b\u5e8f\u4ee3\u7801\uff0c\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6d89\u53ca\u5230\u7f16\u8bd1\uff0c\u94fe\u63a5\uff08\u7b49\u5176\u4ed6\u6b65\u9aa4\uff09\uff0c\u8981\u4f9d\u8d56\u5230\u5f88\u591a\u76f8\u5173\u7684\u5de5\u5177\uff0c\u6700\u6838\u5fc3\u7684\u662f\u7f16\u8bd1\u5668gcc\uff0c\u94fe\u63a5\u5668ld\u3002\u800c\u6240\u8c13\u7684\u5de5\u5177\uff0c\u4e3b\u8981\u6307\u7684\u5c31\u662f\uff1a\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cld\u7b49\u5de5\u5177 \u5b9e\u9645\u4e0a\uff0c\u4e0a\u9762\u6240\u8bf4\u7684ld\uff0c\u53ea\u662f\u5904\u7406\u64cd\u4f5c\u76ee\u6807\u6587\u4ef6\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u6700\u4e3b\u8981\u7684\u4e00\u4e2a\u5de5\u5177 \u800c\u548c\u64cd\u4f5c\u76ee\u6807\u7b49\u6587\u4ef6\u76f8\u5173\u7684\uff0c\u8fd8\u6709\u5176\u4ed6\u5f88\u591a\u5de5\u5177\u7684\uff1aas\uff0cobjcopy\uff0cstrip\uff0car\u7b49\u7b49\u5de5\u5177\u7684 \u6240\u4ee5\uff0c\u5bf9\u6b64\uff0cGNU\u5b98\u7f51\uff0c\u5f04\u51fa\u4e00\u4e2abinutils\uff0c\u5373binary utils\uff0c\u4e8c\u8fdb\u5236\u5de5\u5177\uff08\u5305\uff09\uff0c\u96c6\u6210\u4e86\u8fd9\u4e9b\uff0c\u548c\u64cd\u4f5c\u4e8c\u8fdb\u5236\u76f8\u5173\u7684\u5de5\u5177\u96c6\u5408\uff0c\u53eb\u505abinutils\u3002 \u6240\u4ee5\uff0c\u4e4b\u540e\u4f60\u6240\u89c1\u5230\u7684\uff0c\u5e38\u89c1\u7684\u5de5\u5177\uff0c\u5c31\u662f\u90a3\u4e2a\u8457\u540d\u7684GNU Binutils\u4e86\u3002 \u94fe\uff1a\u4e0d\u6b62\u4e00\u4e2a\u4e1c\u897f\uff0c\u7136\u540e\uff0c\u6309\u7167\u5bf9\u5e94\u7684\u903b\u8f91\u94fe\u5728\u4e00\u8d77\u3002 \u4e0d\u6b62\u4e00\u4e2a\u4e1c\u897f\uff1a\u6307\u7684\u662f\u5c31\u662f\u524d\u9762\u6240\u8bf4\u7684\u90a3\u4e2a\u5de5\u5177\uff0c\u5373\uff1a\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cbinutils\u7b49\u5de5\u5177 \u6309\u7167\u5bf9\u5e94\u7684\u903b\u8f91\uff1a\u6307\u7684\u5c31\u662f\uff0c\u6309\u7167\u7a0b\u5e8f\u672c\u8eab\u7f16\u8bd1\u94fe\u63a5\u7684\u5148\u540e\u987a\u5e8f\uff0c\u5373\uff1a\u5148\u7f16\u8bd1\uff0c\u540e\u94fe\u63a5\uff0c\u518d\u8fdb\u884c\u540e\u671f\u5176\u4ed6\u7684\u5904\u7406\u7b49\u7b49\uff0c\u6bd4\u5982\u7528objcopy\u53bb\u64cd\u4f5c\u76f8\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u7b49\u7b49\u3002 \u5982\u6b64\u7684\uff0c\u5c06\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cbinutils\u7b49\u5de5\u5177\u6309\u7167\u5148\u7f16\u8bd1\u540e\u94fe\u63a5\u7b49\u76f8\u5173\u7684\u7f16\u8bd1\u7a0b\u5e8f\u7684\u5185\u5728\u903b\u8f91\u4e32\u8d77\u6765\uff0c\u5c31\u6210\u4e86\u6211\u4eec\u6240\u8bf4\u5de5\u5177\u94fe \u666e\u901a\u6240\u8bf4\u7684\uff0c\u5de5\u5177\u94fe\u6307\u7684\u662f\u5f53\u524d\u81ea\u5df1\u7684\u672c\u5730\u5e73\u53f0\u7684\u5de5\u5177\u94fe\u3002\u7528\u4e8e\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff0c\u5c31\u53eb\u505a\u4ea4\u53c9\u5de5\u5177\u94fe\u3002\u5373\u90a3\u4e9b\u5de5\u5177\uff0c\u5373\u7f16\u8bd1\u7684gcc\uff0c\u94fe\u63a5\u7684ld\uff0c\u4ee5\u53ca\u76f8\u5173\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff0c\u53eb\u505a\u4ea4\u53c9\u5de5\u5177\u94fe\u3002 \u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u662f\u7528\u6765\u4ea4\u53c9\u7f16\u8bd1\uff0c\u8de8\u5e73\u53f0\u7684\u7a0b\u5e8f\u6240\u7528\u7684\u3002\u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u548c\uff08\u672c\u5730\uff09\u5de5\u5177\u94fe\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5305\u542b\u4e86\u5f88\u591a\u5bf9\u5e94\u7684\u5de5\u5177\uff0c\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\uff0cld\uff0cas\u7b49\u7b49\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u662f\u7528\u4e8e\u7f16\u8bd1\u7684gcc\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u4e5f\u5e38\u628a\u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u7b80\u79f0\u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5668 \u5373\u4e25\u683c\u610f\u4e49\u4e0a\u6765\u8bf4\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u53ea\u662f\u6307\u7684\u662f\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\u4e3a\u4e86\u53eb\u6cd5\u4e0a\u7684\u65b9\u4fbf\uff0c\u6211\u4eec\u5e38\u8bf4\u7684\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u90fd\u662f\u6307\u7684\u662f\u4ea4\u53c9\u5de5\u5177\u94fe\u3002\u5e38\u8bf4\u7684\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\uff0c\u6bd4\u5982arm-linux-gcc\uff0c\u5b9e\u9645\u4e0a\u6307\u4ee3\u4e86\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684\u4ea4\u53c9\u5de5\u5177\u94fe\uff08arm-linux-gcc\uff0carm-linux-ld\uff0carm-linux-as\u7b49\u7b49\uff09 \u5305\u542b\u5de5\u5177 \u00b6 Binutils \u00b6 Binutils\u662fGNU\u5de5\u5177\u4e4b\u4e00\uff0c\u5b83\u5305\u62ec\u94fe\u63a5\u5668\u3001\u6c47\u7f16\u5668\u548c\u5176\u4ed6\u7528\u4e8e\u76ee\u6807\u6587\u4ef6\u548c\u6863\u6848\u7684\u5de5\u5177\uff0c\u5b83\u662f\u4e8c\u8fdb\u5236\u4ee3\u7801\u7684\u5904\u7406\u7ef4\u62a4\u5de5\u5177\u3002 Binutils\u5de5\u5177\u5305\u542b\u7684\u5b50\u7a0b\u5e8f\u4e3b\u8981\u6709:\uff1a ld GNU\u8fde\u63a5\u5668the GNU linker. as GNU\u6c47\u7f16\u5668the GNU assembler. gold a new, faster, ELF only linker. \u8fd8\u6709\uff1a addr2line \u628a\u5730\u5740\u8f6c\u6362\u6210\u6587\u4ef6\u540d\u548c\u6240\u5728\u7684\u884c\u6570 ar A utility for creating, modifying and extracting from archives. c++filt Filter to demangle encoded C++ symbols. dlltool Creates files for building and using DLLs. gprof Displays profiling information. nlmconv Converts object code into an NLM. nm Lists symbols from object files. objcopy Copys and translates object files. objdump Displays information from object files. ranlib Generates an index to the contents of an archive. readelf Displays information from any ELF format object file. size Lists the section sizes of an object or archive file. strings Lists printable strings from files. strip Discards symbols binutils\u4ecb\u7ecd GCC \u00b6 GNU\u7f16\u8bd1\u5668\u5957\u4ef6\uff0c\u652f\u6301C, C++, Java, Ada, Fortran, Objective-C\u7b49\u4f17\u591a\u8bed\u8a00\u3002 GLibc \u00b6 Linux\u4e0a\u901a\u5e38\u4f7f\u7528\u7684C\u51fd\u6570\u5e93\u4e3aglibc\u3002glibc\u662flinux\u7cfb\u7edf\u4e2d\u6700\u5e95\u5c42\u7684api\uff0c\u51e0\u4e4e\u5176\u5b83\u4efb\u4f55\u8fd0\u884c\u5e93\u90fd\u4f1a\u4f9d\u8d56\u4e8eglibc\u3002glibc\u9664\u4e86\u5c01\u88c5linux\u64cd\u4f5c\u7cfb\u7edf\u6240\u63d0\u4f9b\u7684\u7cfb\u7edf\u670d\u52a1\u5916\uff0c\u5b83\u672c\u8eab\u4e5f\u63d0\u4f9b\u4e86\u8bb8\u591a\u5176\u5b83\u4e00\u4e9b\u5fc5\u8981\u529f\u80fd\u670d\u52a1\u7684\u5b9e\u73b0\u3002 glibc \u5404\u4e2a\u5e93\u4f5c\u7528\u4ecb\u7ecd \u56e0\u4e3a\u5d4c\u5165\u5f0f\u73af\u5883\u7684\u8d44\u6e90\u53ca\u5176\u7d27\u5f20\uff0c\u6240\u4ee5\u73b0\u5728\u9664\u4e86glibc\u5916\uff0c\u8fd8\u6709uClibc\u548ceglibc\u53ef\u4ee5\u9009\u62e9\uff0c\u4e09\u8005\u7684\u5173\u7cfb\u53ef\u4ee5\u53c2\u89c1\u8fd9\u4e24\u7bc7\u6587\u7ae0\uff1a uclibc eglibc glibc\u4e4b\u95f4\u7684\u533a\u522b\u548c\u8054\u7cfb Glibc vs uClibc Differences GDB \u00b6 GDB\u7528\u4e8e\u8c03\u8bd5\u7a0b\u5e8f \u547d\u540d\u89c4\u5219 \u00b6 arch-core-kernel-system arch\uff1a \u7528\u4e8e\u54ea\u4e2a\u76ee\u6807\u5e73\u53f0 core\uff1a \u4f7f\u7528\u7684\u662f\u54ea\u4e2aCPU Core\uff0c\u5982Cortex A8\uff0c\u4f46\u662f\u8fd9\u4e00\u7ec4\u547d\u540d\u597d\u50cf\u6bd4\u8f83\u7075\u6d3b\uff0c\u5728\u5176\u5b83\u5382\u5bb6\u63d0\u4f9b\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u4e2d\uff0c\u6709\u4ee5\u5382\u5bb6\u540d\u79f0\u547d\u540d\u7684\uff0c\u4e5f\u6709\u4ee5\u5f00\u53d1\u677f\u547d\u540d\u7684\uff0c\u6216\u8005\u76f4\u63a5\u662fnone\u6216cross\u7684 kernel\uff1a \u6240\u8fd0\u884c\u7684OS\uff0cLinux\uff0cuclinux\uff0cbare\uff08\u65e0OS\uff09 **system\uff1a**\u4ea4\u53c9\u7f16\u8bd1\u94fe\u6240\u9009\u62e9\u7684\u5e93\u51fd\u6570\u548c\u76ee\u6807\u6620\u50cf\u7684\u89c4\u8303\uff0c\u5982gnu\uff0cgnueabi\u7b49\u3002\u5176\u4e2dgnu\u7b49\u4ef7\u4e8eglibc+oabi\uff1bgnueabi\u7b49\u4ef7\u4e8eglibc+eabi \u5982\u4f55\u4f7f\u7528\u5df2\u6709\u4ea4\u53c9\u5de5\u5177\u94fe \u00b6 \u4f7f\u7528\u5176\u4ed6\u4eba\u9488\u5bf9\u67d0\u4e9bCPU\u5e73\u53f0\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u3002\u6211\u4eec\u53ea\u9700\u8981\u627e\u5230\u5408\u9002\u7684\uff0c\u4e0b\u8f7d\u4e0b\u6765\u4f7f\u7528\u5373\u53ef\u3002 \u5e38\u89c1\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u4e0b\u8f7d\u5730\u5740\uff1a \u5728 http://ftp.arm.linux.org.uk/pub/armlinux/toolchain/ \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5728 http://www.denx.de/en/Software/WebHome \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5728 https://launchpad.net/gcc-arm-embedded \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u4e00\u4e9b\u5236\u4f5c\u4ea4\u53c9\u7f16\u8bd1\u94fe\u7684\u5de5\u5177\u4e2d\uff0c\u5305\u542b\u4e86\u5df2\u7ecf\u5236\u4f5c\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\uff0c\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u4f7f\u7528\u3002\u5982crosstool-NG \u5982\u679c\u8d2d\u4e70\u4e86\u67d0\u4e2a\u82af\u7247\u6216\u5f00\u53d1\u677f\uff0c\u4e00\u822c\u5382\u5546\u4f1a\u63d0\u4f9b\u5bf9\u5e94\u7684\u6574\u5957\u5f00\u53d1\u8f6f\u4ef6\uff0c\u5176\u4e2d\u5c31\u5305\u542b\u4e86\u4ea4\u53c9\u7f16\u8bd1\u94fe\u3002 \u5382\u5bb6\u63d0\u4f9b\u7684\u5de5\u5177\u4e00\u822c\u662f\u7ecf\u8fc7\u4e86\u4e25\u683c\u7684\u6d4b\u8bd5\uff0c\u5e76\u6253\u5165\u4e86\u4e00\u4e9b\u5fc5\u8981\u7684\u8865\u4e01\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5f80\u5f80\u662f\u6700\u53ef\u9760\u7684\u5de5\u5177\u6765\u6e90\u3002 \u65b9\u5f0f \u4f7f\u7528\u5df2\u6709\u4ea4\u53c9\u7f16\u8bd1\u94fe \u81ea\u5df1\u5236\u4f5c\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5b89\u88c5 \u4e00\u822c\u63d0\u4f9b\u538b\u7f29\u5305 \u9700\u8981\u81ea\u5df1\u6253\u5305 \u6e90\u7801\u7248\u672c \u4e00\u822c\u4f7f\u7528\u8f83\u8001\u7684\u7a33\u5b9a\u7248\u672c\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u65b0\u7684GCC\u7279\u6027\u4e0d\u652f\u6301 \u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u9700\u8981\u7684GCC\u7279\u6027\u7684\u7248\u672c \u8865\u4e01 \u4e00\u822c\u90fd\u4f1a\u6253\u4e0a\u4fee\u590d\u8865\u4e01 \u666e\u901a\u5f00\u53d1\u8005\u5f88\u96be\u8fa8\u522b\u9700\u8981\u6253\u4e0a\u54ea\u4e9b\u8865\u4e01\uff0c\u8d44\u6df1\u5f00\u53d1\u8005\u53ef\u4ee5\u9488\u5bf9\u81ea\u5df1\u7684\u9700\u6c42\u5408\u5165\u8865\u4e01 \u6e90\u7801\u6eaf\u6e90 \u53ef\u80fd\u4e0d\u6e05\u695a\u6e90\u7801\u7248\u672c\u548c\u8865\u4e01\u60c5\u51b5 \u4e00\u5207\u90fd\u53ef\u4ee5\u5b9a\u5236 \u5347\u7ea7 \u4e00\u822c\u4e0d\u4f1a\u5347\u7ea7 \u53ef\u4ee5\u968f\u65f6\u5347\u7ea7 \u4f18\u5316 \u4e00\u822c\u5df2\u7ecf\u9488\u5bf9\u7279\u5b9aCPU\u7279\u6027\u548c\u6027\u80fd\u8fdb\u884c\u4f18\u5316 \u4e00\u822c\u65e0\u6cd5\u505a\u5230\u6bd4\u5382\u5bb6\u4f18\u5316\u7684\u66f4\u597d\uff0c\u9664\u975e\u81ea\u5df1\u8bbe\u8ba1\u7684CPU \u6280\u672f\u652f\u6301 \u53ef\u4ee5\u901a\u8fc7FAE\u8fdb\u884c\u652f\u6301\uff0c\u53ef\u80fd\u9700\u8981\u6536\u8d39 \u53ea\u80fd\u901a\u8fc7\u793e\u533a\u652f\u6301\uff0c\u514d\u8d39 \u53ef\u9760\u6027\u9a8c\u8bc1 \u5df2\u7ecf\u901a\u8fc7\u4e86\u5b8c\u5584\u7684\u9a8c\u8bc1 \u81ea\u5df1\u9a8c\u8bc1\uff0c\u80af\u5b9a\u6ca1\u6709\u4e13\u4e1a\u4eba\u58eb\u9a8c\u8bc1\u7684\u9f50\u5168 \u5f15\u7528 \u00b6 Introduction to cross-compiling for Linux \u4ea4\u53c9\u7f16\u8bd1\u8be6\u89e3 \u4ea4\u53c9\u7f16\u8bd1\u8be6\u89e3 \u4e00 \u6982\u5ff5\u7bc7","title":"Cross Compiler"},{"location":"Cross%20compiler/#cross-compiler","text":"\u76ee\u7684\uff1a \u4e86\u89e3\u4ea4\u53c9\u7f16\u8bd1\u7684\u6982\u5ff5\uff0c\u5b66\u4f1a\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177 toolchain","title":"Cross Compiler"},{"location":"Cross%20compiler/#_1","text":"","title":"\u7b80\u4ecb"},{"location":"Cross%20compiler/#_2","text":"","title":"\u4ec0\u4e48\u662f\u4ea4\u53c9\u7f16\u8bd1"},{"location":"Cross%20compiler/#_3","text":"\u672c\u5730\u7f16\u8bd1\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u53ea\u80fd\u653e\u5230\u5f53\u524d\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u5e73\u65f6\u6211\u4eec\u5e38\u89c1\u7684\u8f6f\u4ef6\u5f00\u53d1\uff0c\u90fd\u662f\u5c5e\u4e8e\u672c\u5730\u7f16\u8bd1\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\u8fd9\u79cd\u65b9\u5f0f\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528 x86 \u5e73\u53f0\u4e0a\u7684\u5de5\u5177\uff0c\u5f00\u53d1\u9488\u5bf9 x86 \u5e73\u53f0\u672c\u8eab\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u8fd9\u4e2a\u7f16\u8bd1\u8fc7\u7a0b\u79f0\u4e3a\u672c\u5730\u7f16\u8bd1\u3002","title":"\u672c\u5730\u7f16\u8bd1"},{"location":"Cross%20compiler/#_4","text":"\u4ea4\u53c9\u7f16\u8bd1\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5728\u5f53\u524d\u7f16\u8bd1\u5e73\u53f0\u4e0b\uff0c\u7f16\u8bd1\u51fa\u6765\u7684\u7a0b\u5e8f\u80fd\u8fd0\u884c\u5728\u4f53\u7cfb\u7ed3\u6784\u4e0d\u540c\u7684\u53e6\u4e00\u79cd\u76ee\u6807\u5e73\u53f0\u4e0a\uff0c\u4f46\u662f\u7f16\u8bd1\u5e73\u53f0\u672c\u8eab\u5374\u4e0d\u80fd\u8fd0\u884c\u8be5\u7a0b\u5e8f\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5728 x86 \u5e73\u53f0\u4e0a\uff0c\u7f16\u5199\u7a0b\u5e8f\u5e76\u7f16\u8bd1\u6210\u80fd\u8fd0\u884c\u5728 ARM \u5e73\u53f0\u7684\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u5f97\u5230\u7684\u7a0b\u5e8f\u5728 x86 \u5e73\u53f0\u4e0a\u662f\u4e0d\u80fd\u8fd0\u884c\u7684\uff0c\u5fc5\u987b\u653e\u5230 ARM \u5e73\u53f0\u4e0a\u624d\u80fd\u8fd0\u884c\u3002","title":"\u4ea4\u53c9\u7f16\u8bd1"},{"location":"Cross%20compiler/#_5","text":"Speed\uff1a \u76ee\u6807\u5e73\u53f0\u7684\u8fd0\u884c\u901f\u5ea6\u5f80\u5f80\u6bd4\u4e3b\u673a\u6162\u5f97\u591a\uff0c\u8bb8\u591a\u4e13\u7528\u7684\u5d4c\u5165\u5f0f\u786c\u4ef6\u88ab\u8bbe\u8ba1\u4e3a\u4f4e\u6210\u672c\u548c\u4f4e\u529f\u8017\uff0c\u6ca1\u6709\u592a\u9ad8\u7684\u6027\u80fd Capability\uff1a \u6574\u4e2a\u7f16\u8bd1\u8fc7\u7a0b\u662f\u975e\u5e38\u6d88\u8017\u8d44\u6e90\u7684\uff0c\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5f80\u5f80\u6ca1\u6709\u8db3\u591f\u7684\u5185\u5b58\u6216\u78c1\u76d8\u7a7a\u95f4 Availability\uff1a \u5373\u4f7f\u76ee\u6807\u5e73\u53f0\u8d44\u6e90\u5f88\u5145\u8db3\uff0c\u53ef\u4ee5\u672c\u5730\u7f16\u8bd1\uff0c\u4f46\u662f\u7b2c\u4e00\u4e2a\u5728\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\u7684\u672c\u5730\u7f16\u8bd1\u5668\u603b\u9700\u8981\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u83b7\u5f97\u3002 Flexibility\uff1a \u4e00\u4e2a\u5b8c\u6574\u7684Linux\u7f16\u8bd1\u73af\u5883\u9700\u8981\u5f88\u591a\u652f\u6301\u5305\uff0c\u4ea4\u53c9\u7f16\u8bd1\u4f7f\u6211\u4eec\u4e0d\u9700\u8981\u82b1\u65f6\u95f4\u5c06\u5404\u79cd\u652f\u6301\u5305\u79fb\u690d\u5230\u76ee\u6807\u677f\u4e0a\u3002\u4ea4\u53c9\u7f16\u8bd1\u7684\u91cd\u70b9\u662f\u6784\u5efa\u8981\u90e8\u7f72\u7684\u76ee\u6807\u5305\uff0c\u800c\u4e0d\u662f\u82b1\u65f6\u95f4\u83b7\u5f97\u53ea\u6784\u5efa\u76ee\u6807\u7cfb\u7edf\u7684\u5148\u51b3\u6761\u4ef6\u3002","title":"\u4e3a\u4ec0\u4e48\u8981\u4ea4\u53c9\u7f16\u8bd1"},{"location":"Cross%20compiler/#_6","text":"\u4e0d\u540c\u7684\u4f53\u7cfb\u67b6\u6784\u62e5\u6709\u4e0d\u540c\u7684\u673a\u5668\u7279\u6027 Word size\uff1a \u662f64\u4f4d\u8fd8\u662f32\u4f4d\u7cfb\u7edf Endianness\uff1a \u662f\u5927\u7aef\u8fd8\u662f\u5c0f\u7aef\u7cfb\u7edf Alignment\uff1a \u662f\u5426\u5fc5\u4fee\u6309\u71674\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u8fdb\u884c\u8bbf\u95ee Default signedness\uff1a \u9ed8\u8ba4\u6570\u636e\u7c7b\u578b\u662f\u6709\u7b26\u53f7\u8fd8\u662f\u65e0\u7b26\u53f7 NOMMU\uff1a \u662f\u5426\u652f\u6301MMU \u4ea4\u53c9\u7f16\u8bd1\u65f6\u7684\u4e3b\u673a\u73af\u5883\u4e0e\u76ee\u6807\u73af\u5883\u4e0d\u540c **Configuration issues\uff1a**\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u8fd0\u884c\u914d\u7f6e\u6d4b\u8bd5\u4f1a\u7ed9\u51fa\u9519\u8bef\u7684\u7b54\u6848\u3002\u914d\u7f6e\u8fd8\u53ef\u4ee5\u68c0\u6d4b\u4e3b\u673a\u4e0a\u662f\u5426\u5b58\u5728\u5305\uff0c\u5e76\u5728\u76ee\u6807\u6ca1\u6709\u5305\u6216\u7248\u672c\u4e0d\u517c\u5bb9\u65f6\u63d0\u4f9b\u5bf9\u5305\u7684\u652f\u6301\u3002 **HOSTCC vs TARGETCC\uff1a**\u8bb8\u591a\u6784\u5efa\u8fc7\u7a0b\u9700\u8981\u7f16\u8bd1\u8981\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u914d\u7f6e\u6d4b\u8bd5\uff0c\u6216\u8005\u751f\u6210\u4ee3\u7801\u7684\u7a0b\u5e8f(\u6bd4\u5982\u4e00\u4e2aC\u7a0b\u5e8f\uff0c\u5b83\u521b\u5efa\u4e00\u4e2a.h\u6587\u4ef6\uff0c\u7136\u540e\u5728\u4e3b\u6784\u5efa\u8fc7\u7a0b\u4e2dinclude)\u3002\u53ea\u8981\u7528\u76ee\u6807\u7f16\u8bd1\u5668\u66ff\u6362\u5bbf\u4e3b\u7f16\u8bd1\u5668\uff0c\u5c31\u4f1a\u7834\u574f\u9700\u8981\u6784\u5efa\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u8fd0\u884c\u7684\u4e1c\u897f\u7684\u5305\u3002\u8fd9\u6837\u7684\u5305\u9700\u8981\u540c\u65f6\u8bbf\u95ee\u4e3b\u673a\u548c\u76ee\u6807\u7f16\u8bd1\u5668\uff0c\u5e76\u4e14\u9700\u8981\u5b66\u4e60\u4f55\u65f6\u4f7f\u7528\u5b83\u4eec\u3002 **Toolchain Leaks\uff1a**\u914d\u7f6e\u4e0d\u5f53\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u80fd\u4f1a\u5c06\u4e3b\u673a\u7cfb\u7edf\u7684\u4e00\u4e9b\u4fe1\u606f\u6cc4\u6f0f\u5230\u7f16\u8bd1\u540e\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5bfc\u81f4\u901a\u5e38\u5f88\u5bb9\u6613\u68c0\u6d4b\u5230\u7684\u6545\u969c\uff0c\u4f46\u662f\u5f88\u96be\u8bca\u65ad\u548c\u7ea0\u6b63\u3002\u5de5\u5177\u94fe\u53ef\u80fd\u5305\u542b\u9519\u8bef\u7684\u5934\u6587\u4ef6\uff0c\u6216\u8005\u5728\u94fe\u63a5\u65f6\u641c\u7d22\u9519\u8bef\u7684\u5e93\u8def\u5f84\u3002\u5171\u4eab\u5e93\u901a\u5e38\u4f9d\u8d56\u4e8e\u5176\u4ed6\u5171\u4eab\u5e93\uff0c\u800c\u8fd9\u4e9b\u5171\u4eab\u5e93\u4e5f\u53ef\u80fd\u5728\u5f15\u5165\u5bf9\u4e3b\u673a\u7cfb\u7edf\u7684\u610f\u5916\u94fe\u63a5\u3002 **Libraries\uff1a**\u52a8\u6001\u94fe\u63a5\u7684\u7a0b\u5e8f\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u8bbf\u95ee\u9002\u5f53\u7684\u5171\u4eab\u5e93\u3002\u76ee\u6807\u7cfb\u7edf\u7684\u5171\u4eab\u5e93\u9700\u8981\u6dfb\u52a0\u5230\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e2d\uff0c\u4ee5\u4fbf\u7a0b\u5e8f\u53ef\u4ee5\u94fe\u63a5\u5230\u5b83\u4eec\u3002 **Testing\uff1a**\u5728\u672c\u5730\u6784\u5efa\u4e0a\uff0c\u5f00\u53d1\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b9\u4fbf\u7684\u6d4b\u8bd5\u73af\u5883\u3002\u5728\u4ea4\u53c9\u7f16\u8bd1\u65f6\uff0c\u786e\u8ba4\u6210\u529f\u6784\u5efa\u7684\u201chello world\u201d\u53ef\u80fd\u9700\u8981\u914d\u7f6e(\u81f3\u5c11)\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3001\u5185\u6838\u3001\u6839\u6587\u4ef6\u7cfb\u7edf\u548c\u5171\u4eab\u5e93","title":"\u4e3a\u4ec0\u4e48\u4ea4\u53c9\u7f16\u8bd1\u6bd4\u8f83\u56f0\u96be"},{"location":"Cross%20compiler/#_7","text":"**\u4ea4\u53c9\u5de5\u5177\u94fe**\u5c31\u662f\u4e3a\u4e86\u7f16\u8bd1\u8de8\u5e73\u53f0\u4f53\u7cfb\u7ed3\u6784\u7684\u7a0b\u5e8f\u4ee3\u7801\u800c\u5f62\u6210\u7684\u7531\u591a\u4e2a\u5b50\u5de5\u5177\u6784\u6210\u7684\u4e00\u5957\u5b8c\u6574\u7684\u5de5\u5177\u96c6\u3002\u540c\u65f6\uff0c\u5b83\u9690\u85cf\u4e86\u9884\u5904\u7406\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5\u7b49\u7ec6\u8282\uff0c\u5f53\u6211\u4eec\u6307\u5b9a\u4e86\u6e90\u6587\u4ef6(.c)\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u6309\u7167\u7f16\u8bd1\u6d41\u7a0b\u8c03\u7528\u4e0d\u540c\u7684\u5b50\u5de5\u5177\uff0c\u81ea\u52a8\u751f\u6210\u6700\u7ec8\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6620\u50cf(.bin)\u3002 \u4ea4\u53c9\u5de5\u5177\u94fe\u662f\u4e00\u4e2a\u7531**\u7f16\u8bd1\u5668\u3001\u8fde\u63a5\u5668\u548c\u89e3\u91ca\u5668**\u7ec4\u6210\u7684\u7efc\u5408\u5f00\u53d1\u73af\u5883\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e3b\u8981\u7531**binutils\u3001gcc\u548cglibc**\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\u3002\u6709\u65f6\u51fa\u4e8e\u51cf\u5c0f libc \u5e93\u5927\u5c0f\u7684\u8003\u8651\uff0c\u4e5f\u53ef\u4ee5\u7528\u522b\u7684 c \u5e93\u6765\u4ee3\u66ff glibc\uff0c\u4f8b\u5982 uClibc\u3001dietlibc \u548c newlib\u3002 \u76ee\u6807\u662f\u4e3a\u4e86\uff1a \u751f\u6210\uff08\u53ef\u4ee5\u8fd0\u884c\u7684\uff09\u7a0b\u5e8f\u6216\u5e93\u6587\u4ef6 \uff0c\u5185\u90e8\u7684\u6267\u884c\u8fc7\u7a0b\u548c\u903b\u8f91\u4e3b\u8981\u5305\u542b\u4e86\uff1a \u7f16\u8bd1 \u7f16\u8bd1\u7684\u8f93\u5165\uff08\u5bf9\u8c61\uff09\u662f\uff1a\u7a0b\u5e8f\u4ee3\u7801 \u7f16\u8bd1\u8f93\u51fa\uff08\u76ee\u6807\uff09\u662f\uff1a\u76ee\u6807\u6587\u4ef6 \u7f16\u8bd1\u6240\u9700\u8981\u7684\u5de5\u5177\u662f\uff1a\u7f16\u8bd1\u5668 \u7f16\u8bd1\u5668\uff1a\u5e38\u89c1\u7684\u7f16\u8bd1\u5668\uff0c\u5373\u4e3agcc \u94fe\u63a5 \u94fe\u63a5\u7684\u8f93\u5165\uff08\u5bf9\u8c61\uff09\u662f\uff1a\uff08\u7a0b\u5e8f\u8fd0\u884c\u65f6\u6240\u4f9d\u8d56\u7684\uff0c\u6216\u8005\u67d0\u4e2a\u5e93\u6240\u4f9d\u8d56\u7684\u53e6\u5916\u4e00\u4e2a\uff09\u5e93\uff08\u6587\u4ef6\uff09 \u94fe\u63a5\u7684\u8f93\u51fa\uff08\u76ee\u6807\uff09\u662f\uff1a\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6216\u8005\u662f\u53ef\u4ee5\u88ab\u522b\u4eba\u8c03\u7528\u7684\u5b8c\u6574\u7684\u5e93\u6587\u4ef6 \u94fe\u63a5\u6240\u9700\u8981\u7684\u5de5\u5177\u662f\uff1a\u94fe\u63a5\u5668 \u94fe\u63a5\u5668\uff0c\u5373ld \u4e3a\u4e86\u5c06\u7a0b\u5e8f\u4ee3\u7801\uff0c\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6d89\u53ca\u5230\u7f16\u8bd1\uff0c\u94fe\u63a5\uff08\u7b49\u5176\u4ed6\u6b65\u9aa4\uff09\uff0c\u8981\u4f9d\u8d56\u5230\u5f88\u591a\u76f8\u5173\u7684\u5de5\u5177\uff0c\u6700\u6838\u5fc3\u7684\u662f\u7f16\u8bd1\u5668gcc\uff0c\u94fe\u63a5\u5668ld\u3002\u800c\u6240\u8c13\u7684\u5de5\u5177\uff0c\u4e3b\u8981\u6307\u7684\u5c31\u662f\uff1a\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cld\u7b49\u5de5\u5177 \u5b9e\u9645\u4e0a\uff0c\u4e0a\u9762\u6240\u8bf4\u7684ld\uff0c\u53ea\u662f\u5904\u7406\u64cd\u4f5c\u76ee\u6807\u6587\u4ef6\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u6700\u4e3b\u8981\u7684\u4e00\u4e2a\u5de5\u5177 \u800c\u548c\u64cd\u4f5c\u76ee\u6807\u7b49\u6587\u4ef6\u76f8\u5173\u7684\uff0c\u8fd8\u6709\u5176\u4ed6\u5f88\u591a\u5de5\u5177\u7684\uff1aas\uff0cobjcopy\uff0cstrip\uff0car\u7b49\u7b49\u5de5\u5177\u7684 \u6240\u4ee5\uff0c\u5bf9\u6b64\uff0cGNU\u5b98\u7f51\uff0c\u5f04\u51fa\u4e00\u4e2abinutils\uff0c\u5373binary utils\uff0c\u4e8c\u8fdb\u5236\u5de5\u5177\uff08\u5305\uff09\uff0c\u96c6\u6210\u4e86\u8fd9\u4e9b\uff0c\u548c\u64cd\u4f5c\u4e8c\u8fdb\u5236\u76f8\u5173\u7684\u5de5\u5177\u96c6\u5408\uff0c\u53eb\u505abinutils\u3002 \u6240\u4ee5\uff0c\u4e4b\u540e\u4f60\u6240\u89c1\u5230\u7684\uff0c\u5e38\u89c1\u7684\u5de5\u5177\uff0c\u5c31\u662f\u90a3\u4e2a\u8457\u540d\u7684GNU Binutils\u4e86\u3002 \u94fe\uff1a\u4e0d\u6b62\u4e00\u4e2a\u4e1c\u897f\uff0c\u7136\u540e\uff0c\u6309\u7167\u5bf9\u5e94\u7684\u903b\u8f91\u94fe\u5728\u4e00\u8d77\u3002 \u4e0d\u6b62\u4e00\u4e2a\u4e1c\u897f\uff1a\u6307\u7684\u662f\u5c31\u662f\u524d\u9762\u6240\u8bf4\u7684\u90a3\u4e2a\u5de5\u5177\uff0c\u5373\uff1a\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cbinutils\u7b49\u5de5\u5177 \u6309\u7167\u5bf9\u5e94\u7684\u903b\u8f91\uff1a\u6307\u7684\u5c31\u662f\uff0c\u6309\u7167\u7a0b\u5e8f\u672c\u8eab\u7f16\u8bd1\u94fe\u63a5\u7684\u5148\u540e\u987a\u5e8f\uff0c\u5373\uff1a\u5148\u7f16\u8bd1\uff0c\u540e\u94fe\u63a5\uff0c\u518d\u8fdb\u884c\u540e\u671f\u5176\u4ed6\u7684\u5904\u7406\u7b49\u7b49\uff0c\u6bd4\u5982\u7528objcopy\u53bb\u64cd\u4f5c\u76f8\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u7b49\u7b49\u3002 \u5982\u6b64\u7684\uff0c\u5c06\u548c\u7a0b\u5e8f\u7f16\u8bd1\u94fe\u63a5\u7b49\u76f8\u5173\u7684gcc\uff0cbinutils\u7b49\u5de5\u5177\u6309\u7167\u5148\u7f16\u8bd1\u540e\u94fe\u63a5\u7b49\u76f8\u5173\u7684\u7f16\u8bd1\u7a0b\u5e8f\u7684\u5185\u5728\u903b\u8f91\u4e32\u8d77\u6765\uff0c\u5c31\u6210\u4e86\u6211\u4eec\u6240\u8bf4\u5de5\u5177\u94fe \u666e\u901a\u6240\u8bf4\u7684\uff0c\u5de5\u5177\u94fe\u6307\u7684\u662f\u5f53\u524d\u81ea\u5df1\u7684\u672c\u5730\u5e73\u53f0\u7684\u5de5\u5177\u94fe\u3002\u7528\u4e8e\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff0c\u5c31\u53eb\u505a\u4ea4\u53c9\u5de5\u5177\u94fe\u3002\u5373\u90a3\u4e9b\u5de5\u5177\uff0c\u5373\u7f16\u8bd1\u7684gcc\uff0c\u94fe\u63a5\u7684ld\uff0c\u4ee5\u53ca\u76f8\u5173\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff0c\u53eb\u505a\u4ea4\u53c9\u5de5\u5177\u94fe\u3002 \u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u662f\u7528\u6765\u4ea4\u53c9\u7f16\u8bd1\uff0c\u8de8\u5e73\u53f0\u7684\u7a0b\u5e8f\u6240\u7528\u7684\u3002\u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u548c\uff08\u672c\u5730\uff09\u5de5\u5177\u94fe\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5305\u542b\u4e86\u5f88\u591a\u5bf9\u5e94\u7684\u5de5\u5177\uff0c\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\uff0cld\uff0cas\u7b49\u7b49\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u662f\u7528\u4e8e\u7f16\u8bd1\u7684gcc\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u4e5f\u5e38\u628a\u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u7b80\u79f0\u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5668 \u5373\u4e25\u683c\u610f\u4e49\u4e0a\u6765\u8bf4\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u53ea\u662f\u6307\u7684\u662f\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\u4e3a\u4e86\u53eb\u6cd5\u4e0a\u7684\u65b9\u4fbf\uff0c\u6211\u4eec\u5e38\u8bf4\u7684\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u90fd\u662f\u6307\u7684\u662f\u4ea4\u53c9\u5de5\u5177\u94fe\u3002\u5e38\u8bf4\u7684\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684gcc\uff0c\u6bd4\u5982arm-linux-gcc\uff0c\u5b9e\u9645\u4e0a\u6307\u4ee3\u4e86\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u4ea4\u53c9\u7f16\u8bd1\u7248\u672c\u7684\u4ea4\u53c9\u5de5\u5177\u94fe\uff08arm-linux-gcc\uff0carm-linux-ld\uff0carm-linux-as\u7b49\u7b49\uff09","title":"\u4ea4\u53c9\u5de5\u5177\u94fe"},{"location":"Cross%20compiler/#_8","text":"","title":"\u5305\u542b\u5de5\u5177"},{"location":"Cross%20compiler/#binutils","text":"Binutils\u662fGNU\u5de5\u5177\u4e4b\u4e00\uff0c\u5b83\u5305\u62ec\u94fe\u63a5\u5668\u3001\u6c47\u7f16\u5668\u548c\u5176\u4ed6\u7528\u4e8e\u76ee\u6807\u6587\u4ef6\u548c\u6863\u6848\u7684\u5de5\u5177\uff0c\u5b83\u662f\u4e8c\u8fdb\u5236\u4ee3\u7801\u7684\u5904\u7406\u7ef4\u62a4\u5de5\u5177\u3002 Binutils\u5de5\u5177\u5305\u542b\u7684\u5b50\u7a0b\u5e8f\u4e3b\u8981\u6709:\uff1a ld GNU\u8fde\u63a5\u5668the GNU linker. as GNU\u6c47\u7f16\u5668the GNU assembler. gold a new, faster, ELF only linker. \u8fd8\u6709\uff1a addr2line \u628a\u5730\u5740\u8f6c\u6362\u6210\u6587\u4ef6\u540d\u548c\u6240\u5728\u7684\u884c\u6570 ar A utility for creating, modifying and extracting from archives. c++filt Filter to demangle encoded C++ symbols. dlltool Creates files for building and using DLLs. gprof Displays profiling information. nlmconv Converts object code into an NLM. nm Lists symbols from object files. objcopy Copys and translates object files. objdump Displays information from object files. ranlib Generates an index to the contents of an archive. readelf Displays information from any ELF format object file. size Lists the section sizes of an object or archive file. strings Lists printable strings from files. strip Discards symbols binutils\u4ecb\u7ecd","title":"Binutils"},{"location":"Cross%20compiler/#gcc","text":"GNU\u7f16\u8bd1\u5668\u5957\u4ef6\uff0c\u652f\u6301C, C++, Java, Ada, Fortran, Objective-C\u7b49\u4f17\u591a\u8bed\u8a00\u3002","title":"GCC"},{"location":"Cross%20compiler/#glibc","text":"Linux\u4e0a\u901a\u5e38\u4f7f\u7528\u7684C\u51fd\u6570\u5e93\u4e3aglibc\u3002glibc\u662flinux\u7cfb\u7edf\u4e2d\u6700\u5e95\u5c42\u7684api\uff0c\u51e0\u4e4e\u5176\u5b83\u4efb\u4f55\u8fd0\u884c\u5e93\u90fd\u4f1a\u4f9d\u8d56\u4e8eglibc\u3002glibc\u9664\u4e86\u5c01\u88c5linux\u64cd\u4f5c\u7cfb\u7edf\u6240\u63d0\u4f9b\u7684\u7cfb\u7edf\u670d\u52a1\u5916\uff0c\u5b83\u672c\u8eab\u4e5f\u63d0\u4f9b\u4e86\u8bb8\u591a\u5176\u5b83\u4e00\u4e9b\u5fc5\u8981\u529f\u80fd\u670d\u52a1\u7684\u5b9e\u73b0\u3002 glibc \u5404\u4e2a\u5e93\u4f5c\u7528\u4ecb\u7ecd \u56e0\u4e3a\u5d4c\u5165\u5f0f\u73af\u5883\u7684\u8d44\u6e90\u53ca\u5176\u7d27\u5f20\uff0c\u6240\u4ee5\u73b0\u5728\u9664\u4e86glibc\u5916\uff0c\u8fd8\u6709uClibc\u548ceglibc\u53ef\u4ee5\u9009\u62e9\uff0c\u4e09\u8005\u7684\u5173\u7cfb\u53ef\u4ee5\u53c2\u89c1\u8fd9\u4e24\u7bc7\u6587\u7ae0\uff1a uclibc eglibc glibc\u4e4b\u95f4\u7684\u533a\u522b\u548c\u8054\u7cfb Glibc vs uClibc Differences","title":"GLibc"},{"location":"Cross%20compiler/#gdb","text":"GDB\u7528\u4e8e\u8c03\u8bd5\u7a0b\u5e8f","title":"GDB"},{"location":"Cross%20compiler/#_9","text":"arch-core-kernel-system arch\uff1a \u7528\u4e8e\u54ea\u4e2a\u76ee\u6807\u5e73\u53f0 core\uff1a \u4f7f\u7528\u7684\u662f\u54ea\u4e2aCPU Core\uff0c\u5982Cortex A8\uff0c\u4f46\u662f\u8fd9\u4e00\u7ec4\u547d\u540d\u597d\u50cf\u6bd4\u8f83\u7075\u6d3b\uff0c\u5728\u5176\u5b83\u5382\u5bb6\u63d0\u4f9b\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u4e2d\uff0c\u6709\u4ee5\u5382\u5bb6\u540d\u79f0\u547d\u540d\u7684\uff0c\u4e5f\u6709\u4ee5\u5f00\u53d1\u677f\u547d\u540d\u7684\uff0c\u6216\u8005\u76f4\u63a5\u662fnone\u6216cross\u7684 kernel\uff1a \u6240\u8fd0\u884c\u7684OS\uff0cLinux\uff0cuclinux\uff0cbare\uff08\u65e0OS\uff09 **system\uff1a**\u4ea4\u53c9\u7f16\u8bd1\u94fe\u6240\u9009\u62e9\u7684\u5e93\u51fd\u6570\u548c\u76ee\u6807\u6620\u50cf\u7684\u89c4\u8303\uff0c\u5982gnu\uff0cgnueabi\u7b49\u3002\u5176\u4e2dgnu\u7b49\u4ef7\u4e8eglibc+oabi\uff1bgnueabi\u7b49\u4ef7\u4e8eglibc+eabi","title":"\u547d\u540d\u89c4\u5219"},{"location":"Cross%20compiler/#_10","text":"\u4f7f\u7528\u5176\u4ed6\u4eba\u9488\u5bf9\u67d0\u4e9bCPU\u5e73\u53f0\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u3002\u6211\u4eec\u53ea\u9700\u8981\u627e\u5230\u5408\u9002\u7684\uff0c\u4e0b\u8f7d\u4e0b\u6765\u4f7f\u7528\u5373\u53ef\u3002 \u5e38\u89c1\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\u4e0b\u8f7d\u5730\u5740\uff1a \u5728 http://ftp.arm.linux.org.uk/pub/armlinux/toolchain/ \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5728 http://www.denx.de/en/Software/WebHome \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5728 https://launchpad.net/gcc-arm-embedded \u4e0b\u8f7d\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe \u4e00\u4e9b\u5236\u4f5c\u4ea4\u53c9\u7f16\u8bd1\u94fe\u7684\u5de5\u5177\u4e2d\uff0c\u5305\u542b\u4e86\u5df2\u7ecf\u5236\u4f5c\u597d\u7684\u4ea4\u53c9\u7f16\u8bd1\u94fe\uff0c\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u4f7f\u7528\u3002\u5982crosstool-NG \u5982\u679c\u8d2d\u4e70\u4e86\u67d0\u4e2a\u82af\u7247\u6216\u5f00\u53d1\u677f\uff0c\u4e00\u822c\u5382\u5546\u4f1a\u63d0\u4f9b\u5bf9\u5e94\u7684\u6574\u5957\u5f00\u53d1\u8f6f\u4ef6\uff0c\u5176\u4e2d\u5c31\u5305\u542b\u4e86\u4ea4\u53c9\u7f16\u8bd1\u94fe\u3002 \u5382\u5bb6\u63d0\u4f9b\u7684\u5de5\u5177\u4e00\u822c\u662f\u7ecf\u8fc7\u4e86\u4e25\u683c\u7684\u6d4b\u8bd5\uff0c\u5e76\u6253\u5165\u4e86\u4e00\u4e9b\u5fc5\u8981\u7684\u8865\u4e01\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5f80\u5f80\u662f\u6700\u53ef\u9760\u7684\u5de5\u5177\u6765\u6e90\u3002 \u65b9\u5f0f \u4f7f\u7528\u5df2\u6709\u4ea4\u53c9\u7f16\u8bd1\u94fe \u81ea\u5df1\u5236\u4f5c\u4ea4\u53c9\u7f16\u8bd1\u94fe \u5b89\u88c5 \u4e00\u822c\u63d0\u4f9b\u538b\u7f29\u5305 \u9700\u8981\u81ea\u5df1\u6253\u5305 \u6e90\u7801\u7248\u672c \u4e00\u822c\u4f7f\u7528\u8f83\u8001\u7684\u7a33\u5b9a\u7248\u672c\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u65b0\u7684GCC\u7279\u6027\u4e0d\u652f\u6301 \u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u9700\u8981\u7684GCC\u7279\u6027\u7684\u7248\u672c \u8865\u4e01 \u4e00\u822c\u90fd\u4f1a\u6253\u4e0a\u4fee\u590d\u8865\u4e01 \u666e\u901a\u5f00\u53d1\u8005\u5f88\u96be\u8fa8\u522b\u9700\u8981\u6253\u4e0a\u54ea\u4e9b\u8865\u4e01\uff0c\u8d44\u6df1\u5f00\u53d1\u8005\u53ef\u4ee5\u9488\u5bf9\u81ea\u5df1\u7684\u9700\u6c42\u5408\u5165\u8865\u4e01 \u6e90\u7801\u6eaf\u6e90 \u53ef\u80fd\u4e0d\u6e05\u695a\u6e90\u7801\u7248\u672c\u548c\u8865\u4e01\u60c5\u51b5 \u4e00\u5207\u90fd\u53ef\u4ee5\u5b9a\u5236 \u5347\u7ea7 \u4e00\u822c\u4e0d\u4f1a\u5347\u7ea7 \u53ef\u4ee5\u968f\u65f6\u5347\u7ea7 \u4f18\u5316 \u4e00\u822c\u5df2\u7ecf\u9488\u5bf9\u7279\u5b9aCPU\u7279\u6027\u548c\u6027\u80fd\u8fdb\u884c\u4f18\u5316 \u4e00\u822c\u65e0\u6cd5\u505a\u5230\u6bd4\u5382\u5bb6\u4f18\u5316\u7684\u66f4\u597d\uff0c\u9664\u975e\u81ea\u5df1\u8bbe\u8ba1\u7684CPU \u6280\u672f\u652f\u6301 \u53ef\u4ee5\u901a\u8fc7FAE\u8fdb\u884c\u652f\u6301\uff0c\u53ef\u80fd\u9700\u8981\u6536\u8d39 \u53ea\u80fd\u901a\u8fc7\u793e\u533a\u652f\u6301\uff0c\u514d\u8d39 \u53ef\u9760\u6027\u9a8c\u8bc1 \u5df2\u7ecf\u901a\u8fc7\u4e86\u5b8c\u5584\u7684\u9a8c\u8bc1 \u81ea\u5df1\u9a8c\u8bc1\uff0c\u80af\u5b9a\u6ca1\u6709\u4e13\u4e1a\u4eba\u58eb\u9a8c\u8bc1\u7684\u9f50\u5168","title":"\u5982\u4f55\u4f7f\u7528\u5df2\u6709\u4ea4\u53c9\u5de5\u5177\u94fe"},{"location":"Cross%20compiler/#_11","text":"Introduction to cross-compiling for Linux \u4ea4\u53c9\u7f16\u8bd1\u8be6\u89e3 \u4ea4\u53c9\u7f16\u8bd1\u8be6\u89e3 \u4e00 \u6982\u5ff5\u7bc7","title":"\u5f15\u7528"},{"location":"FDBus%20API/","text":"FDBus API \u00b6 Client, Server\u6d88\u606f\u6536\u53d1\u76f8\u5173\u65b9\u6cd5\u8c03\u7528 \u00b6 \u65b9\u6cd5 (CFdbBaseObject, CBaseServer\u6216CBaseClient) void invoke ( FdbSessionId_t receiver , FdbMsgCode_t code , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 (\u540c\u6b65\uff1a\u8c03\u7528\u540e\u963b\u585e\uff0c\u76f4\u81f3\u6536\u5230\u5bf9\u65b9\u56de\u590d\uff1b\u5f02\u6b65\uff1a\u8c03\u7528\u540e\u7acb\u523b\u8fd4\u56de\u3002\u5bf9\u65b9\u7684\u56de\u590d\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u83b7\u5f97) \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8c03\u7528\u3002\u53c2\u6570receiver\u53ef\u4ee5\u4eceCBaseServer\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570msg_ref\u83b7\u5f97\u3002 \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e(\u6240\u8c13\u6d88\u606f\u79c1\u6709\u6570\u636e\u662f\u6307\u5728\u53d1\u9001\u8bf7\u6c42\u65f6\u53ef\u4ee5\u643a\u5e26\u989d\u5916\u6570\u636e\uff1b\u8fd9\u4e9b\u6570\u636e\u5728\u8bf7\u6c42\u8fd4(onReply)\u65f6\u53ef\u4ee5\u83b7\u53d6\u5230\u3002) void invoke ( FdbSessionId_t receiver , CFdbMessage * msg , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , CFdbMessage * msg , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8c03\u7528\u3002\u53c2\u6570receiver\u53ef\u4ee5\u4eceCBaseServer\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570msg_ref\u83b7\u5f97\u3002 \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( FdbMsgCode_t code , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCbaseClient \u54cd\u5e94\u8005\uff1aCbaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( CFdbMessage * msg , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( CFdbMessage * msg , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( FdbSessionId_t receiver , CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u5982\u679c\u65e0\u79c1\u6709\u6570\u636e\u5219msg_ref\u76f4\u63a5\u6307\u5411CBaseMessage void invoke ( CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u5982\u679c\u65e0\u79c1\u6709\u6570\u636e\u5219msg_ref\u76f4\u63a5\u6307\u5411CBaseMessage void send ( FdbSessionId_t receiver , FdbMsgCode_t code , const CFdbBasePayload & data ); void send ( FdbSessionId_t receiver , FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void send ( FdbMsgCode_t code , const CFdbBasePayload & data ); void send ( FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void broadcast ( FdbMsgCode_t code , const CFdbBasePayload & data , const char * filter = 0 ); void broadcast ( FdbMsgCode_t code , const char * filter = 0 , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1aN/A \u8c03\u7528\u8005\uff1aCBaseServer \u54cd\u5e94\u8005\uff1aCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( NFdbBase :: FdbMsgSubscribe & msg_list , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( NFdbBase :: FdbMsgSubscribe & msg_list , CFdbMessage * msg , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( CBaseJob :: Ptr & msg_ref , NFdbBase :: FdbMsgSubscribe & msg_list , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u6b64\u5904msg_ref\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5411\u4efb\u4f55\u5bf9\u8c61\uff0c\u5373\u4e0d\u643a\u5e26\u79c1\u6709\u6570\u636e\u3002 void unsubscribe ( NFdbBase :: FdbMsgSubscribe & msg_list ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e Client, Server\u5176\u5b83\u65b9\u6cd5\u8c03\u7528 \u00b6 \u7c7bCBaseClient \u00b6 CBaseClient ( const char * name , CBaseWorker * worker = 0 ) \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efaClient \u53c2\u6570 name : client\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c FdbSessionId_t connect ( const char * url = 0 ) \u63cf\u8ff0\uff1a\u8fde\u63a5\u5230Server\u4e0a \u53c2\u6570\uff1a url\uff1aServer\u7684\u5730\u5740\uff0c\u652f\u6301tcp\uff0cfile\u548csvc\u683c\u5f0f\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u662fsvc://name\uff0cname\u662f\u6784\u9020\u51fd\u6570\u7684name\u53c2\u6570\u3002 void disconnect ( FdbSessionId_t sid = FDB_INVALID_ID ); \u63cf\u8ff0\uff1a\u65ad\u5f00\u8fde\u63a5 \u53c2\u6570 sid\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a \u7c7bCBaseServer \u00b6 CBaseServer ( const char * name , CBaseWorker * worker = 0 ); \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efaServer \u53c2\u6570 name : server\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c FdbSocketId_t bind ( const char * url = 0 ); \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5730\u5740 \u53c2\u6570 url\uff1aServer\u7684\u5730\u5740\uff0c\u652f\u6301tcp\uff0cfile\u548csvc\u683c\u5f0f\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u662fsvc://name\uff0cname\u662f\u6784\u9020\u51fd\u6570\u7684name\u53c2\u6570\u3002 void unbind ( FdbSocketId_t skid = FDB_INVALID_ID ); \u63cf\u8ff0\uff1a\u89e3\u9664\u5730\u5740\u7ed1\u5b9a \u53c2\u6570 sid\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a \u7c7bCFdbBaseObject \u00b6 CFdbBaseObject ( const char * name = 0 , CBaseWorker * worker = 0 , EFdbEndpointRole role = FDB_OBJECT_ROLE_UNKNOWN ) \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efa\u5bf9\u8c61 \u53c2\u6570 name : object\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c role\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a FdbObjectId_t bind ( CBaseEndpoint * endpoint , FdbObjectId_t oid = FDB_INVALID_ID ) \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5bf9\u8c61ID\uff0c\u5c06\u5bf9\u8c61\u89d2\u8272\u8bbe\u7f6e\u4e3aServer\u3002 \u53c2\u6570 endpoint\uff1a\u8be5\u5bf9\u8c61\u8981\u8981\u6302\u9760\u5230\u54ea\u4e2aendpoint\u4e0a\uff0c\u53ef\u4ee5\u662fCBaseServer\uff0c\u4e5f\u53ef\u4ee5\u662fCBaseClient oid\uff1a\u9700\u8981\u7ed1\u5b9a\u7684\u5bf9\u8c61id\uff0c\u8303\u56f4\u662f1~65535\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u5219\u7cfb\u7edf\u81ea\u52a8\u5206\u914d FdbObjectId_t connect ( CBaseEndpoint * endpoint , FdbObjectId_t oid = FDB_INVALID_ID ) \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5bf9\u8c61ID\uff0c\u5c06\u5bf9\u8c61\u89d2\u8272\u8bbe\u7f6e\u4e3aClient\u3002 \u53c2\u6570 endpoint\uff1a\u8be5\u5bf9\u8c61\u8981\u8981\u6302\u9760\u5230\u54ea\u4e2aendpoint\u4e0a\uff0c\u53ef\u4ee5\u662fCBaseServer\uff0c\u4e5f\u53ef\u4ee5\u662fCBaseClient oid\uff1a\u9700\u8981\u7ed1\u5b9a\u7684\u5bf9\u8c61id\uff0c\u8303\u56f4\u662f1~65535\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u5219\u7cfb\u7edf\u81ea\u52a8\u5206\u914d void unbind () \u63cf\u8ff0\uff1a\u89e3\u9664Server\u5bf9\u8c61\u7684\u7ed1\u5b9a void disconnect () \u63cf\u8ff0\uff1a\u89e3\u9664Client\u5bf9\u8c61\u7684\u7ed1\u5b9a \u7c7bFDB_CONTEXT \u00b6 bool start ( uint32_t flag = FDB_WORKER_ENABLE_FD_LOOP ) \u63cf\u8ff0\uff1a\u542f\u52a8fdbus\u6536\u53d1\u7ebf\u7a0b\uff1b\u5176\u672c\u8d28\u5c31\u662f\u4e00\u4e2aworker\u7ebf\u7a0b \u53c2\u6570 flag\uff1a\u542f\u52a8\u6807\u5fd7\uff1b\u7531\u4ee5\u4e0b\u6807\u5fd7\u4f4d\u7ec4\u5408\u800c\u6210 FDB_WORKER_EXE_IN_PLACE\uff1a\u7f6e\u4f4d\u8868\u793a\u4e0d\u542f\u52a8\u7ebf\u7a0b\uff0c\u5728\u8c03\u7528\u7684\u5730\u65b9\u8fd0\u884cworker\u7684\u4e3b\u5faa\u73af\uff1b\u5426\u5219\u542f\u52a8\u65b0\u7ebf\u7a0b\u6267\u884cworker\u7684\u4e3b\u5faa\u73af Client, Server\u7684\u56de\u8c03\u51fd\u6570 \u00b6 \u56de\u8c03\u51fd\u6570 (CFdbBaseObject, CBaseServer\u6216CBaseClient) virtual void onOnline ( FdbSessionId_t sid , bool is_first ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709Client\u8fde\u4e0a\u65f6\u88ab\u8c03\u7528\u5230\uff1bis_first\u8868\u793a\u662f\u7b2c\u4e00\u4e2aClient\u6765\u8fde\u63a5 CBaseClient\uff1a\u5f53\u548cServer\u8fde\u4e0a\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u7531\u4e8eclient\u4e0d\u4f1a\u8fde\u63a5\u591a\u4e2aserver\uff0cis_first\u603b\u662ftrue CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4\uff1b\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onOffline ( FdbSessionId_t sid , bool is_last ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709Client\u65ad\u5f00\u8fde\u63a5\u65f6\u88ab\u8c03\u7528\u5230\uff1bis_last\u8868\u793a\u6700\u540e\u4e00\u4e2aclient\u65ad\u5f00\u8fde\u63a5 CBaseClient\uff1a\u5f53\u548cServer\u65ad\u5f00\u8fde\u63a5\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u7531\u4e8eclient\u4e0d\u4f1a\u8fde\u63a5\u591a\u4e2aserver\uff0cis_last\u603b\u662ftrue CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4\uff1b\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onInvoke ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u76f8\u8fde\u7684Client\u8c03\u7528CBaseClient::invoke()\u65f6\u88ab\u8c03\u7528\u5230\uff1b CBaseClient\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5 CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4 virtual void onReply ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\uff1b CBaseClient\uff1a\u5f53\u76f8\u8fde\u7684Server\u8c03\u7528CBaseMessage::reply()\u65f6\u88ab\u8c03\u5230 CBaseObject\uff1a\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onBroadcast ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\uff1b CBaseClient\uff1a\u5f53\u76f8\u8fde\u7684Server\u8c03\u7528CBaseServer::broadcast()\u65f6\u88ab\u8c03\u5230 CBaseObject\uff1a\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onSubscribe ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709client\u8c03\u7528CBaseClient::subscribe()\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u8be5\u51fd\u6570\u5fc5\u987b\u8c03\u7528 CBaseMessage::broadcast()\u5c06\u88ab\u6ce8\u518c\u4e8b\u4ef6\u7684\u521d\u59cb\u503c\u8fd4\u56de\u7ed9\u53d1\u8d77\u6ce8\u518c\u8bf7\u6c42\u7684Client\uff1b CBaseClient\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\u3002 CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4 void onCreateObject ( CBaseEndpoint * endpoint , CFdbMessage * msg ) \u89e6\u53d1\u6761\u4ef6 CBaseServer/CBaseClient\uff1a\u5f53\u5bf9\u65b9\u548cobject\u901a\u4fe1\uff0c\u4f46object\u5c1a\u672a\u521b\u5efa\u65f6\uff0c\u8be5\u65b9\u6cd5\u88ab\u8c03\u7528\u5230\u3002\u8be5\u65b9\u6cd5\u5fc5\u987b\u6839\u636emsg\u91cc\u7684\u5185\u5bb9\u521b\u5efa\u6307\u5b9a\u7684CBaseObject\u5e76bind/connect\u3002 CBaseObject\uff1a\u65e0\u6b64\u56de\u8c03 bool connectionEnabled ( const NFdbBase :: FdbMsgAddressList & addr_list ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u65e0\u6b64\u56de\u8c03 CBaseClient\uff1a\u5f53server\u4e0a\u7ebf\u65f6\uff0cname Server\u4f1a\u628aServer\u76f8\u5173\u7684\u4fe1\u606f\u5e7f\u64ad\u7ed9\u76d1\u542c\u8be5server\u7684client\u3002addr_list\u5305\u542b\u4e86Server\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4f8b\u5982Server\u6240\u5728\u7684host\uff0cServer\u5730\u5740\u7b49\u7b49\u3002\u5728\u8fde\u63a5Server\u4e4b\u524d\u5148\u8c03\u7528\u8be5\u56de\u8c03\uff0c\u5982\u679c\u8fd4\u56detrue\u5219\u4f1a\u8fde\u63a5server\uff0c\u5426\u5219\u5c06\u4e0d\u4f1a\u8fde\u63a5\u5230Server\u4e0a\u3002\u6ce8\u610f\uff0c\u65e0\u8bba\u662f\u5426\u6307\u5b9a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u8be5\u65b9\u6cd5\u53ea\u5728FDBus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u6267\u884c\u3002 Message\u65b9\u6cd5\u8c03\u6362 \u00b6 \u65b9\u6cd5 (CBaseMessage\u6216CFdbMessage) static void reply ( CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data ); \u63cf\u8ff0\uff1aServer\u7aef\u6536\u5230Client\u53d1\u9001\u8fc7\u6765\u7684Message\u540e\uff0c\u901a\u8fc7\u8be5\u51fd\u6570\u5c06Protobuf\u683c\u5f0f\u7684\u6570\u636e\u5305\u8fd4\u56de\u7ed9\u8be5Client static void reply ( CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 ); \u63cf\u8ff0\uff1a\u540c\u4e0a\uff0c\u53ea\u662f\u8fd4\u56de\u7684\u662fraw data bool deserialize ( CFdbBasePayload & payload ) \u63cf\u8ff0\uff1a\u5c06\u6536\u5230\u7684protobuf\u683c\u5f0f\u7684\u6d41\u53cd\u5e8f\u5217\u5316\u6210C++\u6570\u636e\u7ed3\u6784 void * getPayloadBuffer () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606f\u4e2dpayload\u6570\u636e\u7684\u8d77\u59cb\u5730\u5740\u3002\u5bf9\u4e8eprotobuf\u683c\u5f0f\u7684payload\uff0c\u901a\u8fc7\u8c03\u7528deserialize()\u53ef\u4ee5\u83b7\u5f97\u6d88\u606f\u6570\u636e\uff0c\u65e0\u9700\u8c03\u7528\u8be5\u51fd\u6570\u3002\u8be5\u51fd\u6570\u7528\u4e8eraw data\u7684\u6d88\u606f bool isRawData () \u63cf\u8ff0\uff1a\u5982\u679c\u6d88\u606f\u6570\u636e\u662fprotobuf\u5219\u8fd4\u56defalse\uff1b\u5426\u5219\u8fd4\u56detrue FdbMsgCode_t code () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606fID virtual const char * getFilter () \u63cf\u8ff0\uff1a\u7528\u4e8eonBroadcast()\uff0c\u83b7\u5f97\u5e7f\u64ad\u8fc7\u6765\u7684\u6d88\u606f\u7684filter FdbSessionId_t session () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606f\u7684session bool isError () \u63cf\u8ff0\uff1a\u7528\u5728onReply()\u91cc\uff0c\u68c0\u67e5\u5bf9\u65b9\u8fd4\u56de\u7684\u6d88\u606f\u91cc\u662f\u5426\u7f6e\u4e0a\u4e86\u9519\u8bef\u6807\u8bb0\uff1b\u5982\u679c\u7f6e\u4e0a\u9519\u8bef\u6807\u8bb0\u8bf4\u660e\u8fd9\u6b21\u8bf7\u6c42\u53d1\u751f\u4e86\u9519\u8bef\u3002\u6b64\u65f6\u9700\u8981\u8c03\u7528decodeStatus()\u83b7\u5f97\u9519\u8bef\u4ee3\u7801\u548c\u9519\u8bef\u63cf\u8ff0\u4ece\u800c\u505a\u8fdb\u4e00\u6b65\u68c0\u67e5 bool isStatus () \u63cf\u8ff0\uff1a\u4e3atrue\u8bf4\u660e\u8fd4\u56de\u7684\u6d88\u606f\u4e0d\u5305\u542b\u5b9e\u9645\u6570\u636e\uff0c\u800c\u662f\u4e2a\u72b6\u6001\uff0c\u8868\u660e\u8bf7\u6c42\u662f\u6210\u529f\u5904\u7406\u4e86\u8fd8\u662f\u53d1\u751f\u5176\u5b83\u60c5\u51b5\uff0c\u4f8b\u5982\u8bf7\u6c42\u8d85\u65f6\u3002isError()\u662fisStatus()\u7684\u4e00\u4e2a\u7279\u4f8b\u3002 bool decodeStatus ( int32_t & error_code , std :: string & description ) \u63cf\u8ff0\uff1a\u5f53isStatus()\u6216isError()\u4e3atrue\u65f6\uff0c\u83b7\u5f97\u72b6\u6001\u7684ID\u548c\u63cf\u8ff0\u3002 void status ( CBaseJob :: Ptr & msg_ref , int32_t error_code , const char * description = 0 ); \u63cf\u8ff0\uff1a\u548creply()\u7c7b\u4f3c\uff0c\u53ea\u662f\u8fd4\u56de\u7684\u4e0d\u662f\u6570\u636e\uff0c\u800c\u662f\u72b6\u6001\u3002\u901a\u5e38\u7528\u4e8e\u6ca1\u6709\u6570\u636e\u8fd4\u56de\u7684\u8bf7\u6c42\u3002 void broadcast ( FdbMsgCode_t code , const CFdbBasePayload & data , const char * filter = 0 ); void broadcast ( FdbMsgCode_t code , const char * filter = 0 , const void * buffer = 0 , int32_t size = 0 ); \u63cf\u8ff0\uff1a\u5728CBaseServer\u7684onBroadcast\u8c03\u7528\uff0c\u5c06\u6240\u6ce8\u518c\u6d88\u606f\u7684\u521d\u59cb\u503c\u8fd4\u56de\u7ed9\u524d\u6765\u6ce8\u518c\u7684client\u7aef\u3002 Protobuf \u00b6 package NFdbBase ; message FdbMsgHostAddress { required string ip_address = 1 ; required string ns_url = 2 ; optional string host_name = 3 ; } Generated C++ Class\uff1a ::NFdbBase::FdbMsgHostAddress Retrieve Memebers ```c++ ::NFdbBase::FdbMsgHostAddress::ip_address() ::NFdbBase::FdbMsgHostAddress::ns_url() ::NFdbBase::FdbMsgHostAddress::host_name() \u5bf9\u4e8e\u53ef\u9009\u9879host_name\uff0c\u8fd8\u6709\u6210\u5458\u51fd\u6570::NFdbBase::FdbMsgHostAddress::has_host_name()\u7528\u4e8e\u68c0\u67e5\u8be5\u6210\u5458\u662f\u5426\u8bbe\u7f6e\u3002 ``` Change Members c++ ::NFdbBase::FdbMsgHostAddress::set_ip_address() ::NFdbBase::FdbMsgHostAddress::set_ns_url() ::NFdbBase::FdbMsgHostAddress::set_host_name() ```protobuf package NFdbBase; message FdbMsgHostAddressList { repeated FdbMsgHostAddress address_list = 1; } ``` Generated C++ Class\uff1a ::NFdbBase::FdbMsgHostAddressList Retrieve Memebers ```c++ NFdbBase::FdbMsgHostAddressList host_list; const ::google::protobuf::RepeatedPtrField< ::NFdbBase::FdbMsgHostAddress> &addr_list = host_list.address_list(); for (::google::protobuf::RepeatedPtrField< ::NFdbBase::FdbMsgHostAddress>::const_iterator it = addr_list.begin(); it != addr_list.end(); ++it) { const ::NFdbBase::FdbMsgHostAddress &addr = *it; std::cout << \"\"ip: \"\" << addr.ip_address() << \"\", url: \"\" << addr.ns_url() << \"\", name: \"\" << addr.host_name(); } ``` Change Members c++ ::NFdbBase::FdbMsgHostAddressList &host_tbl; ::NFdbBase::FdbMsgHostAddress *addr = host_tbl.add_address_list(); addr.set_ip_address(\"\"192.168.0.1\"\"); addr.set_ns_url(\"\"http://server\"\"); addr.set_host_name(\"\"file server\"\");","title":"FDBus  API"},{"location":"FDBus%20API/#fdbus-api","text":"","title":"FDBus  API"},{"location":"FDBus%20API/#client-server","text":"\u65b9\u6cd5 (CFdbBaseObject, CBaseServer\u6216CBaseClient) void invoke ( FdbSessionId_t receiver , FdbMsgCode_t code , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 (\u540c\u6b65\uff1a\u8c03\u7528\u540e\u963b\u585e\uff0c\u76f4\u81f3\u6536\u5230\u5bf9\u65b9\u56de\u590d\uff1b\u5f02\u6b65\uff1a\u8c03\u7528\u540e\u7acb\u523b\u8fd4\u56de\u3002\u5bf9\u65b9\u7684\u56de\u590d\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u83b7\u5f97) \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8c03\u7528\u3002\u53c2\u6570receiver\u53ef\u4ee5\u4eceCBaseServer\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570msg_ref\u83b7\u5f97\u3002 \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e(\u6240\u8c13\u6d88\u606f\u79c1\u6709\u6570\u636e\u662f\u6307\u5728\u53d1\u9001\u8bf7\u6c42\u65f6\u53ef\u4ee5\u643a\u5e26\u989d\u5916\u6570\u636e\uff1b\u8fd9\u4e9b\u6570\u636e\u5728\u8bf7\u6c42\u8fd4(onReply)\u65f6\u53ef\u4ee5\u83b7\u53d6\u5230\u3002) void invoke ( FdbSessionId_t receiver , CFdbMessage * msg , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , CFdbMessage * msg , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8c03\u7528\u3002\u53c2\u6570receiver\u53ef\u4ee5\u4eceCBaseServer\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570msg_ref\u83b7\u5f97\u3002 \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( FdbMsgCode_t code , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCbaseClient \u54cd\u5e94\u8005\uff1aCbaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( CFdbMessage * msg , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( CFdbMessage * msg , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void invoke ( FdbSessionId_t receiver , CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( FdbSessionId_t receiver , CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u5982\u679c\u65e0\u79c1\u6709\u6570\u636e\u5219msg_ref\u76f4\u63a5\u6307\u5411CBaseMessage void invoke ( CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data , int32_t timeout = 0 ); void invoke ( CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u5982\u679c\u65e0\u79c1\u6709\u6570\u636e\u5219msg_ref\u76f4\u63a5\u6307\u5411CBaseMessage void send ( FdbSessionId_t receiver , FdbMsgCode_t code , const CFdbBasePayload & data ); void send ( FdbSessionId_t receiver , FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseServer \u54cd\u5e94\u8005\uff1aCBaseServer/CBaseClient\uff1b\u4f46\u901a\u5e38\u662fCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void send ( FdbMsgCode_t code , const CFdbBasePayload & data ); void send ( FdbMsgCode_t code , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void broadcast ( FdbMsgCode_t code , const CFdbBasePayload & data , const char * filter = 0 ); void broadcast ( FdbMsgCode_t code , const char * filter = 0 , const void * buffer = 0 , int32_t size = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1aN/A \u8c03\u7528\u8005\uff1aCBaseServer \u54cd\u5e94\u8005\uff1aCBaseClient \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( NFdbBase :: FdbMsgSubscribe & msg_list , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u9ed8\u8ba4\u4f7f\u7528CBaseMessage\uff1b\u4e0d\u80fd\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( NFdbBase :: FdbMsgSubscribe & msg_list , CFdbMessage * msg , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u53c2\u6570msg\u6269\u5c55CBaseMessage\u540e\uff0c\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e void subscribe ( CBaseJob :: Ptr & msg_ref , NFdbBase :: FdbMsgSubscribe & msg_list , int32_t timeout = 0 ); \u540c\u6b65/\u5f02\u6b65\uff1a\u540c\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u6709\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1amsg_ref\u6307\u5411CBaseMessage\u5b50\u7c7b\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u643a\u5e26\u79c1\u6709\u6570\u636e\uff1b\u6b64\u5904msg_ref\u4e5f\u53ef\u4ee5\u4e0d\u6307\u5411\u4efb\u4f55\u5bf9\u8c61\uff0c\u5373\u4e0d\u643a\u5e26\u79c1\u6709\u6570\u636e\u3002 void unsubscribe ( NFdbBase :: FdbMsgSubscribe & msg_list ); \u540c\u6b65/\u5f02\u6b65\uff1a\u5f02\u6b65 \u8c03\u7528\u8005\uff1aCBaseClient \u54cd\u5e94\u8005\uff1aCBaseServer \u63a5\u6536\u65b9\u8fd4\u56de\uff1a\u65e0\u8fd4\u56de \u6d88\u606f\u79c1\u6709\u6570\u636e\uff1a\u65e0\u9700\u643a\u5e26\u79c1\u6709\u6570\u636e","title":"Client, Server\u6d88\u606f\u6536\u53d1\u76f8\u5173\u65b9\u6cd5\u8c03\u7528"},{"location":"FDBus%20API/#client-server_1","text":"","title":"Client, Server\u5176\u5b83\u65b9\u6cd5\u8c03\u7528"},{"location":"FDBus%20API/#cbaseclient","text":"CBaseClient ( const char * name , CBaseWorker * worker = 0 ) \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efaClient \u53c2\u6570 name : client\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c FdbSessionId_t connect ( const char * url = 0 ) \u63cf\u8ff0\uff1a\u8fde\u63a5\u5230Server\u4e0a \u53c2\u6570\uff1a url\uff1aServer\u7684\u5730\u5740\uff0c\u652f\u6301tcp\uff0cfile\u548csvc\u683c\u5f0f\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u662fsvc://name\uff0cname\u662f\u6784\u9020\u51fd\u6570\u7684name\u53c2\u6570\u3002 void disconnect ( FdbSessionId_t sid = FDB_INVALID_ID ); \u63cf\u8ff0\uff1a\u65ad\u5f00\u8fde\u63a5 \u53c2\u6570 sid\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a","title":"\u7c7bCBaseClient"},{"location":"FDBus%20API/#cbaseserver","text":"CBaseServer ( const char * name , CBaseWorker * worker = 0 ); \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efaServer \u53c2\u6570 name : server\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c FdbSocketId_t bind ( const char * url = 0 ); \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5730\u5740 \u53c2\u6570 url\uff1aServer\u7684\u5730\u5740\uff0c\u652f\u6301tcp\uff0cfile\u548csvc\u683c\u5f0f\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u662fsvc://name\uff0cname\u662f\u6784\u9020\u51fd\u6570\u7684name\u53c2\u6570\u3002 void unbind ( FdbSocketId_t skid = FDB_INVALID_ID ); \u63cf\u8ff0\uff1a\u89e3\u9664\u5730\u5740\u7ed1\u5b9a \u53c2\u6570 sid\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a","title":"\u7c7bCBaseServer"},{"location":"FDBus%20API/#cfdbbaseobject","text":"CFdbBaseObject ( const char * name = 0 , CBaseWorker * worker = 0 , EFdbEndpointRole role = FDB_OBJECT_ROLE_UNKNOWN ) \u63cf\u8ff0\uff1a\u6784\u9020\u51fd\u6570\uff1b\u521b\u5efa\u5bf9\u8c61 \u53c2\u6570 name : object\u540d\u5b57\uff0c\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32 worker\uff1a\u5982\u679c\u6307\u5b9a\u5219\u6240\u6709\u56de\u8c03\u51fd\u6570\u5728\u8be5worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u5728fdbus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u8fd0\u884c role\uff1a\u901a\u5e38\u4e0d\u6307\u5b9a FdbObjectId_t bind ( CBaseEndpoint * endpoint , FdbObjectId_t oid = FDB_INVALID_ID ) \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5bf9\u8c61ID\uff0c\u5c06\u5bf9\u8c61\u89d2\u8272\u8bbe\u7f6e\u4e3aServer\u3002 \u53c2\u6570 endpoint\uff1a\u8be5\u5bf9\u8c61\u8981\u8981\u6302\u9760\u5230\u54ea\u4e2aendpoint\u4e0a\uff0c\u53ef\u4ee5\u662fCBaseServer\uff0c\u4e5f\u53ef\u4ee5\u662fCBaseClient oid\uff1a\u9700\u8981\u7ed1\u5b9a\u7684\u5bf9\u8c61id\uff0c\u8303\u56f4\u662f1~65535\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u5219\u7cfb\u7edf\u81ea\u52a8\u5206\u914d FdbObjectId_t connect ( CBaseEndpoint * endpoint , FdbObjectId_t oid = FDB_INVALID_ID ) \u63cf\u8ff0\uff1a\u7ed1\u5b9a\u5bf9\u8c61ID\uff0c\u5c06\u5bf9\u8c61\u89d2\u8272\u8bbe\u7f6e\u4e3aClient\u3002 \u53c2\u6570 endpoint\uff1a\u8be5\u5bf9\u8c61\u8981\u8981\u6302\u9760\u5230\u54ea\u4e2aendpoint\u4e0a\uff0c\u53ef\u4ee5\u662fCBaseServer\uff0c\u4e5f\u53ef\u4ee5\u662fCBaseClient oid\uff1a\u9700\u8981\u7ed1\u5b9a\u7684\u5bf9\u8c61id\uff0c\u8303\u56f4\u662f1~65535\u3002\u5982\u679c\u4e0d\u6307\u5b9a\u5219\u7cfb\u7edf\u81ea\u52a8\u5206\u914d void unbind () \u63cf\u8ff0\uff1a\u89e3\u9664Server\u5bf9\u8c61\u7684\u7ed1\u5b9a void disconnect () \u63cf\u8ff0\uff1a\u89e3\u9664Client\u5bf9\u8c61\u7684\u7ed1\u5b9a","title":"\u7c7bCFdbBaseObject"},{"location":"FDBus%20API/#fdb_context","text":"bool start ( uint32_t flag = FDB_WORKER_ENABLE_FD_LOOP ) \u63cf\u8ff0\uff1a\u542f\u52a8fdbus\u6536\u53d1\u7ebf\u7a0b\uff1b\u5176\u672c\u8d28\u5c31\u662f\u4e00\u4e2aworker\u7ebf\u7a0b \u53c2\u6570 flag\uff1a\u542f\u52a8\u6807\u5fd7\uff1b\u7531\u4ee5\u4e0b\u6807\u5fd7\u4f4d\u7ec4\u5408\u800c\u6210 FDB_WORKER_EXE_IN_PLACE\uff1a\u7f6e\u4f4d\u8868\u793a\u4e0d\u542f\u52a8\u7ebf\u7a0b\uff0c\u5728\u8c03\u7528\u7684\u5730\u65b9\u8fd0\u884cworker\u7684\u4e3b\u5faa\u73af\uff1b\u5426\u5219\u542f\u52a8\u65b0\u7ebf\u7a0b\u6267\u884cworker\u7684\u4e3b\u5faa\u73af","title":"\u7c7bFDB_CONTEXT"},{"location":"FDBus%20API/#client-server_2","text":"\u56de\u8c03\u51fd\u6570 (CFdbBaseObject, CBaseServer\u6216CBaseClient) virtual void onOnline ( FdbSessionId_t sid , bool is_first ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709Client\u8fde\u4e0a\u65f6\u88ab\u8c03\u7528\u5230\uff1bis_first\u8868\u793a\u662f\u7b2c\u4e00\u4e2aClient\u6765\u8fde\u63a5 CBaseClient\uff1a\u5f53\u548cServer\u8fde\u4e0a\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u7531\u4e8eclient\u4e0d\u4f1a\u8fde\u63a5\u591a\u4e2aserver\uff0cis_first\u603b\u662ftrue CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4\uff1b\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onOffline ( FdbSessionId_t sid , bool is_last ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709Client\u65ad\u5f00\u8fde\u63a5\u65f6\u88ab\u8c03\u7528\u5230\uff1bis_last\u8868\u793a\u6700\u540e\u4e00\u4e2aclient\u65ad\u5f00\u8fde\u63a5 CBaseClient\uff1a\u5f53\u548cServer\u65ad\u5f00\u8fde\u63a5\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u7531\u4e8eclient\u4e0d\u4f1a\u8fde\u63a5\u591a\u4e2aserver\uff0cis_last\u603b\u662ftrue CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4\uff1b\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onInvoke ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u76f8\u8fde\u7684Client\u8c03\u7528CBaseClient::invoke()\u65f6\u88ab\u8c03\u7528\u5230\uff1b CBaseClient\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5 CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4 virtual void onReply ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\uff1b CBaseClient\uff1a\u5f53\u76f8\u8fde\u7684Server\u8c03\u7528CBaseMessage::reply()\u65f6\u88ab\u8c03\u5230 CBaseObject\uff1a\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onBroadcast ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\uff1b CBaseClient\uff1a\u5f53\u76f8\u8fde\u7684Server\u8c03\u7528CBaseServer::broadcast()\u65f6\u88ab\u8c03\u5230 CBaseObject\uff1a\u4f5c\u4e3aClient\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseClient\u4e00\u81f4 virtual void onSubscribe ( CBaseJob :: Ptr & msg_ref ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u5f53\u6709client\u8c03\u7528CBaseClient::subscribe()\u65f6\u88ab\u8c03\u7528\u5230\uff1b\u8be5\u51fd\u6570\u5fc5\u987b\u8c03\u7528 CBaseMessage::broadcast()\u5c06\u88ab\u6ce8\u518c\u4e8b\u4ef6\u7684\u521d\u59cb\u503c\u8fd4\u56de\u7ed9\u53d1\u8d77\u6ce8\u518c\u8bf7\u6c42\u7684Client\uff1b CBaseClient\u901a\u5e38\u4e0d\u9700\u8981\u5b9e\u73b0\u8fd9\u4e2a\u65b9\u6cd5\u3002 CBaseObject\uff1a\u4f5c\u4e3aServer\u65f6\uff0c\u8c03\u7528\u65f6\u673a\u548cCBaseServer\u4e00\u81f4 void onCreateObject ( CBaseEndpoint * endpoint , CFdbMessage * msg ) \u89e6\u53d1\u6761\u4ef6 CBaseServer/CBaseClient\uff1a\u5f53\u5bf9\u65b9\u548cobject\u901a\u4fe1\uff0c\u4f46object\u5c1a\u672a\u521b\u5efa\u65f6\uff0c\u8be5\u65b9\u6cd5\u88ab\u8c03\u7528\u5230\u3002\u8be5\u65b9\u6cd5\u5fc5\u987b\u6839\u636emsg\u91cc\u7684\u5185\u5bb9\u521b\u5efa\u6307\u5b9a\u7684CBaseObject\u5e76bind/connect\u3002 CBaseObject\uff1a\u65e0\u6b64\u56de\u8c03 bool connectionEnabled ( const NFdbBase :: FdbMsgAddressList & addr_list ) \u89e6\u53d1\u6761\u4ef6 CBaseServer\uff1a\u65e0\u6b64\u56de\u8c03 CBaseClient\uff1a\u5f53server\u4e0a\u7ebf\u65f6\uff0cname Server\u4f1a\u628aServer\u76f8\u5173\u7684\u4fe1\u606f\u5e7f\u64ad\u7ed9\u76d1\u542c\u8be5server\u7684client\u3002addr_list\u5305\u542b\u4e86Server\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4f8b\u5982Server\u6240\u5728\u7684host\uff0cServer\u5730\u5740\u7b49\u7b49\u3002\u5728\u8fde\u63a5Server\u4e4b\u524d\u5148\u8c03\u7528\u8be5\u56de\u8c03\uff0c\u5982\u679c\u8fd4\u56detrue\u5219\u4f1a\u8fde\u63a5server\uff0c\u5426\u5219\u5c06\u4e0d\u4f1a\u8fde\u63a5\u5230Server\u4e0a\u3002\u6ce8\u610f\uff0c\u65e0\u8bba\u662f\u5426\u6307\u5b9a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u8be5\u65b9\u6cd5\u53ea\u5728FDBus\u5de5\u4f5c\u7ebf\u7a0bFDB_CONTEXT\u4e0a\u6267\u884c\u3002","title":"Client, Server\u7684\u56de\u8c03\u51fd\u6570"},{"location":"FDBus%20API/#message","text":"\u65b9\u6cd5 (CBaseMessage\u6216CFdbMessage) static void reply ( CBaseJob :: Ptr & msg_ref , const CFdbBasePayload & data ); \u63cf\u8ff0\uff1aServer\u7aef\u6536\u5230Client\u53d1\u9001\u8fc7\u6765\u7684Message\u540e\uff0c\u901a\u8fc7\u8be5\u51fd\u6570\u5c06Protobuf\u683c\u5f0f\u7684\u6570\u636e\u5305\u8fd4\u56de\u7ed9\u8be5Client static void reply ( CBaseJob :: Ptr & msg_ref , const void * buffer = 0 , int32_t size = 0 ); \u63cf\u8ff0\uff1a\u540c\u4e0a\uff0c\u53ea\u662f\u8fd4\u56de\u7684\u662fraw data bool deserialize ( CFdbBasePayload & payload ) \u63cf\u8ff0\uff1a\u5c06\u6536\u5230\u7684protobuf\u683c\u5f0f\u7684\u6d41\u53cd\u5e8f\u5217\u5316\u6210C++\u6570\u636e\u7ed3\u6784 void * getPayloadBuffer () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606f\u4e2dpayload\u6570\u636e\u7684\u8d77\u59cb\u5730\u5740\u3002\u5bf9\u4e8eprotobuf\u683c\u5f0f\u7684payload\uff0c\u901a\u8fc7\u8c03\u7528deserialize()\u53ef\u4ee5\u83b7\u5f97\u6d88\u606f\u6570\u636e\uff0c\u65e0\u9700\u8c03\u7528\u8be5\u51fd\u6570\u3002\u8be5\u51fd\u6570\u7528\u4e8eraw data\u7684\u6d88\u606f bool isRawData () \u63cf\u8ff0\uff1a\u5982\u679c\u6d88\u606f\u6570\u636e\u662fprotobuf\u5219\u8fd4\u56defalse\uff1b\u5426\u5219\u8fd4\u56detrue FdbMsgCode_t code () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606fID virtual const char * getFilter () \u63cf\u8ff0\uff1a\u7528\u4e8eonBroadcast()\uff0c\u83b7\u5f97\u5e7f\u64ad\u8fc7\u6765\u7684\u6d88\u606f\u7684filter FdbSessionId_t session () \u63cf\u8ff0\uff1a\u83b7\u5f97\u6d88\u606f\u7684session bool isError () \u63cf\u8ff0\uff1a\u7528\u5728onReply()\u91cc\uff0c\u68c0\u67e5\u5bf9\u65b9\u8fd4\u56de\u7684\u6d88\u606f\u91cc\u662f\u5426\u7f6e\u4e0a\u4e86\u9519\u8bef\u6807\u8bb0\uff1b\u5982\u679c\u7f6e\u4e0a\u9519\u8bef\u6807\u8bb0\u8bf4\u660e\u8fd9\u6b21\u8bf7\u6c42\u53d1\u751f\u4e86\u9519\u8bef\u3002\u6b64\u65f6\u9700\u8981\u8c03\u7528decodeStatus()\u83b7\u5f97\u9519\u8bef\u4ee3\u7801\u548c\u9519\u8bef\u63cf\u8ff0\u4ece\u800c\u505a\u8fdb\u4e00\u6b65\u68c0\u67e5 bool isStatus () \u63cf\u8ff0\uff1a\u4e3atrue\u8bf4\u660e\u8fd4\u56de\u7684\u6d88\u606f\u4e0d\u5305\u542b\u5b9e\u9645\u6570\u636e\uff0c\u800c\u662f\u4e2a\u72b6\u6001\uff0c\u8868\u660e\u8bf7\u6c42\u662f\u6210\u529f\u5904\u7406\u4e86\u8fd8\u662f\u53d1\u751f\u5176\u5b83\u60c5\u51b5\uff0c\u4f8b\u5982\u8bf7\u6c42\u8d85\u65f6\u3002isError()\u662fisStatus()\u7684\u4e00\u4e2a\u7279\u4f8b\u3002 bool decodeStatus ( int32_t & error_code , std :: string & description ) \u63cf\u8ff0\uff1a\u5f53isStatus()\u6216isError()\u4e3atrue\u65f6\uff0c\u83b7\u5f97\u72b6\u6001\u7684ID\u548c\u63cf\u8ff0\u3002 void status ( CBaseJob :: Ptr & msg_ref , int32_t error_code , const char * description = 0 ); \u63cf\u8ff0\uff1a\u548creply()\u7c7b\u4f3c\uff0c\u53ea\u662f\u8fd4\u56de\u7684\u4e0d\u662f\u6570\u636e\uff0c\u800c\u662f\u72b6\u6001\u3002\u901a\u5e38\u7528\u4e8e\u6ca1\u6709\u6570\u636e\u8fd4\u56de\u7684\u8bf7\u6c42\u3002 void broadcast ( FdbMsgCode_t code , const CFdbBasePayload & data , const char * filter = 0 ); void broadcast ( FdbMsgCode_t code , const char * filter = 0 , const void * buffer = 0 , int32_t size = 0 ); \u63cf\u8ff0\uff1a\u5728CBaseServer\u7684onBroadcast\u8c03\u7528\uff0c\u5c06\u6240\u6ce8\u518c\u6d88\u606f\u7684\u521d\u59cb\u503c\u8fd4\u56de\u7ed9\u524d\u6765\u6ce8\u518c\u7684client\u7aef\u3002","title":"Message\u65b9\u6cd5\u8c03\u6362"},{"location":"FDBus%20API/#protobuf","text":"package NFdbBase ; message FdbMsgHostAddress { required string ip_address = 1 ; required string ns_url = 2 ; optional string host_name = 3 ; } Generated C++ Class\uff1a ::NFdbBase::FdbMsgHostAddress Retrieve Memebers ```c++ ::NFdbBase::FdbMsgHostAddress::ip_address() ::NFdbBase::FdbMsgHostAddress::ns_url() ::NFdbBase::FdbMsgHostAddress::host_name() \u5bf9\u4e8e\u53ef\u9009\u9879host_name\uff0c\u8fd8\u6709\u6210\u5458\u51fd\u6570::NFdbBase::FdbMsgHostAddress::has_host_name()\u7528\u4e8e\u68c0\u67e5\u8be5\u6210\u5458\u662f\u5426\u8bbe\u7f6e\u3002 ``` Change Members c++ ::NFdbBase::FdbMsgHostAddress::set_ip_address() ::NFdbBase::FdbMsgHostAddress::set_ns_url() ::NFdbBase::FdbMsgHostAddress::set_host_name() ```protobuf package NFdbBase; message FdbMsgHostAddressList { repeated FdbMsgHostAddress address_list = 1; } ``` Generated C++ Class\uff1a ::NFdbBase::FdbMsgHostAddressList Retrieve Memebers ```c++ NFdbBase::FdbMsgHostAddressList host_list; const ::google::protobuf::RepeatedPtrField< ::NFdbBase::FdbMsgHostAddress> &addr_list = host_list.address_list(); for (::google::protobuf::RepeatedPtrField< ::NFdbBase::FdbMsgHostAddress>::const_iterator it = addr_list.begin(); it != addr_list.end(); ++it) { const ::NFdbBase::FdbMsgHostAddress &addr = *it; std::cout << \"\"ip: \"\" << addr.ip_address() << \"\", url: \"\" << addr.ns_url() << \"\", name: \"\" << addr.host_name(); } ``` Change Members c++ ::NFdbBase::FdbMsgHostAddressList &host_tbl; ::NFdbBase::FdbMsgHostAddress *addr = host_tbl.add_address_list(); addr.set_ip_address(\"\"192.168.0.1\"\"); addr.set_ns_url(\"\"http://server\"\"); addr.set_host_name(\"\"file server\"\");","title":"Protobuf"},{"location":"FDBus/","text":"Fast Distributed Bus \u00b6 FDBus \uff1a \u9ad8\u901f\u5206\u5e03\u5f0f\u603b\u7ebf\u4ee5\u53ca\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6 \u7b80\u4ecb || Repo \u6458\u8981 \u00b6 \u672c\u6587\u63cf\u8ff0\u4e86\u4e00\u79cd\u65b0\u578bIPC\u673a\u5236\uff1a Fast Distributed Bus(FDBus) \u3002\u4ece IPC(Inter-Process Communication) \u89d2\u5ea6\uff0c FDBus \u548c\u5e7f\u6cdb\u4f7f\u7528\u7684 D-Bus(Desktop Bus) \u6709\u7c7b\u4f3c\u4e4b\u5904\uff0c\u4f46\u662f FDBus \u5177\u6709\u81ea\u8eab\u4f18\u52bf\uff0c\u529f\u80fd\u66f4\u9f50\u5168\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u4f7f\u7528\u66f4\u4fbf\u5229\uff0c\u9664\u4e86\u652f\u6301\u4e3b\u673a\u5185\u7684IPC\uff0c\u8fd8\u80fd\u5728\u591a\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7ec4\u7f51\uff0c\u540c\u65f6\u53ef\u4ee5\u5b9a\u5236\u5b89\u5168\u7b56\u7565\uff0c\u652f\u6301\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\u3002FDBus\u6784\u7b51\u4e8e socket(Unix domain\u548cTCP) \u4e4b\u4e0a\uff0c\u91c7\u7528 Google protobuf \u505a\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002 FDBus \u652f\u6301\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u540d\u5b57\u4f5c\u4e3a server \u5730\u5740\uff0c\u901a\u8fc7 name server \u81ea\u52a8\u4e3a server \u5206\u914d Unix domain \u5730\u5740\u548c TCP \u7aef\u53e3\u53f7\uff0c\u5b9e\u73b0 client \u548c server \u4e4b\u95f4\u7528\u670d\u52a1\u540d\u5b57\u5bfb\u5740\u3002 FDBus \u65e8\u5728\u4e3a client-server \u4e4b\u95f4\u63d0\u4f9b\u9762\u5411\u8fde\u63a5\uff0c\u4f38\u7f29\u6027\u5f3a\uff0c\u7a33\u5b9a\u53ef\u9760\u7684IPC\u673a\u5236\uff0c\u8fdb\u800c\u53d1\u5c55\u6210\u4e00\u5957\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u7528\u4e8e\u5f00\u53d1\u8de8\u5e73\u53f0(Windows\uff0cQNX\uff0cLinux)\uff0c\u591a\u7ebf\u7a0b/\u591a\u8fdb\u7a0b\u534f\u540c\u5de5\u4f5c\u7684\u4e2d\u95f4\u4ef6\u5c42\u3002FDBus\u5f00\u53d1\u6846\u67b6\u9002\u7528\u4e8e\u5728\u5b9a\u5236\u7cfb\u7edf\u4e0a\u5f00\u53d1\u4ea4\u4e92\u590d\u6742\u7684\u5206\u5e03\u5f0f\u9879\u76ee\uff0c\u5305\u62ec\uff1a \u57fa\u4e8eLinux\u7684\u8f66\u8f7dECU\uff0c\u5305\u62ec\u4eea\u8868\uff0c\u5a31\u4e50\u4e3b\u673a\uff0cTBox\uff0c\u81ea\u52a8\u9a7e\u9a76\u57df\u63a7\u5236\u5668 Hypervisors\u4e0a\u591a\u4e2aGuest OS\u4e4b\u95f4\u7684\u901a\u4fe1 \u4e3aAndroid\u7cfb\u7edf\u63d0\u4f9b\u8de8\u4e3b\u673a\u7684IPC\u673a\u5236 \uff08\u76ee\u524d\u4e0d\u652f\u6301Java API\uff09 \u57fa\u4e8eLinux\u7684\u5c0f\u578b\u901a\u4fe1\u8bbe\u5907\uff0c\u4f8b\u5982\u5bb6\u7528\u8def\u7531\u5668 \u5176\u5b83\u57fa\u4e8eLinux\u7684\u5de5\u63a7\u8bbe\u5907\uff0c\u667a\u80fd\u8bbe\u5907 \u57fa\u4e8eWindows\u5f00\u53d1\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u8bbe\u5907 \u80cc\u666f\u4ecb\u7ecd \u00b6 \u4e0d\u50cf\u5176\u5b83\u5185\u6838\uff0cLinux\u4e00\u76f4\u6ca1\u6709\u81ea\u5df1\u72ec\u7279\u4e14\u597d\u7528\u7684IPC\u673a\u5236\u3002Windows\uff0cMac OS\uff0cQNX\u90fd\u6709\u8fd9\u6837\u7684\u673a\u5236\uff0c\u5373\u4fbf\u662f\u57fa\u4e8eLinux\u7684Android\u4e5f\u6709\u7528\u4f5cIPC\u7684binder\u7cfb\u7edf\u3002Linux\u5185\u6838\u63d0\u4f9b\u7684\u53ea\u662f\u4e00\u4e9b\u6700\u57fa\u7840\u7684\u7ec4\u4ef6-socket\uff0cpipe\uff0cmessage queue\uff0cshared memory\u3002\u8fd9\u4e5f\u7b26\u5408Linux\u7684\u7406\u5ff5\uff1a\u6bcf\u4e2a\u5de5\u5177\u53ea\u505a\u4e00\u4ef6\u4e8b\uff0c\u628a\u5b83\u505a\u597d\u3002\u4f46\u662f\u73b0\u5b9e\u7684\u7cfb\u7edf\u975e\u5e38\u590d\u6742\uff0c\u53ea\u505a\u4e00\u4ef6\u4e8b\u8fdc\u4e0d\u80fd\u89e3\u51b3\u73b0\u5b9e\u4e2d\u9047\u5230\u7684\u95ee\u9898\uff0c\u66f4\u4e0d\u8981\u8bf4\u4ea7\u54c1\u5f00\u53d1\u548c\u5927\u578b\u5546\u7528\u9879\u76ee\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba2\u9605-\u5e7f\u64ad\u662f\u4e00\u4e2a\u6700\u57fa\u672c\u7684\u901a\u4fe1\u9700\u6c42\uff0c\u4f46\u6ca1\u6709\u4e00\u4e2a\u57fa\u7840\u7ec4\u4ef6\u80fd\u591f\u6ee1\u8db3\u3002 Linux\u5b9e\u9645\u4e0a\u4e5f\u6709\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684IPC\u2014\u2014D-Bus\u3002\u5b83\u6709\u5b8c\u5584\u7684\u65b9\u6cd5\u8c03\u7528\u8bf7\u6c42-\u56de\u590d\u673a\u5236\u548c\u4e8b\u4ef6\u5e7f\u64ad\u673a\u5236\uff1b\u5b83\u8fd8\u5305\u542b\u4e00\u4e9b\u8bf8\u5982\u5b89\u5168\u7b56\u7565\u548c\u670d\u52a1\u6309\u9700\u542f\u52a8\u4e4b\u7c7b\u7684\u9ad8\u7ea7\u529f\u80fd\u3002\u4f46\u5bf9\u5b83\u6700\u5927\u7684\u4e89\u8bae\u662f\u6027\u80fd\uff1a\u5b83\u7684\u6027\u80fd\u975e\u5e38\u4f4e\uff0c\u7531\u4e8e\u8981\u7ecfdaemon\u4e2d\u8f6c\uff0c\u4e00\u4e2a\u8bf7\u6c42-\u56de\u590d\u9700\u8981\u6765\u56de\u590d\u5236\u5341\u6b21\u6d88\u606f\uff0c\u56db\u6b21\u6d88\u606f\u9a8c\u8bc1\uff0c\u4ee5\u53ca\u56db\u6b21\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u56e0\u6b64\u5b83\u53ea\u80fd\u7528\u4e8e\u5904\u7406\u5b9e\u65f6\u8981\u6c42\u8f83\u4f4e\uff0c\u6570\u636e\u91cf\u8f83\u5c0f\u7684\u63a7\u5236\u547d\u4ee4\u548c\u6d88\u606f\u4f20\u9012\uff0c\u5426\u5219\u8fd8\u662f\u5f97\u6c42\u52a9\u4e8e\u57fa\u7840IPC\u6846\u67b6\u3002\u4e3a\u6b64\u6709\u4eba\u5c06D-Bus\u5199\u8fdb\u5185\u6838\uff0c\u4ea7\u751f\u4e86KDBus\uff0c\u867d\u7136\u6027\u80fd\u4e0a\u5f97\u5230\u63d0\u5347\uff0c\u4f46\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff0c\u53ea\u80fd\u5728\u5355\u673a\u4e0a\u8fd0\u884c\uff0c\u4e0d\u652f\u6301\u8de8\u4e3b\u673a\u3002\u8fd9\u6837\u7684\u8bddAndroid\u7684Binder\u5c31\u591f\u4e86\uff0c\u51b5\u4e14Binder\u5df2\u7ecf\u88ab\u5185\u6838\u63a5\u53d7\u4e86\uff0cKDBus\u81f3\u4eca\u8fd8\u6ca1\u201c\u8f6c\u6b63\u201d\u3002\u53e6\u5916\uff0c\u65e0\u8bba\u662fDBus\u8fd8\u662fKDBus\uff0c\u63d0\u4f9b\u8fd8\u662f\u57fa\u7840API\uff0c\u79bb\u201c\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u201d\u8fd8\u6709\u8f83\u5927\u5dee\u8ddd\u3002\u4f46\u5404\u884c\u4e1a\u5305\u62ec\u8f66\u8f7d\u9886\u57df\u5bf9\u6b64\u90fd\u6709\u8d8a\u6765\u8d8a\u5f3a\u70c8\u9700\u6c42\uff0c\u4ece\u800c\u5404\u79cd\u5404\u6837\u7684DBus\u5c01\u88c5\u968f\u4e4b\u4ea7\u751f\uff1aQt DBus\uff0cgDBus\uff0ccommonAPI\uff0cDBus-C++... \u8fd9\u4e9b\u5c01\u88c5\u6216\u8005\u4ece\u5c5e\u4e8e\u5927\u6846\u67b6\uff0c\u6216\u8005\u7f3a\u5c11\u7ef4\u62a4\uff0c\u603b\u4e4b\u4f7f\u7528\u8d77\u6765\u5e76\u4e0d\u53cb\u597d\u3002 \u5728Linux\u4ee5\u53ca\u4ee5\u592a\u7f51\u4f7f\u7528\u8d8a\u6765\u8d8a\u5e7f\u6cdb\u7684\u8f66\u8f7d\u9886\u57df\uff0c\u7f3a\u4e4f\u5408\u9002\u7684IPC\u9010\u6e10\u6210\u4e3a\u7a81\u51fa\u95ee\u9898\uff1a\u516c\u53f8\u539f\u6765\u81ea\u521b\u7684IPC\u673a\u5236\u7531\u4e8e\u6280\u672f\u843d\u540e\uff0c\u5b9a\u5236\u75d5\u8ff9\u660e\u663e\uff0c\u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u5206\u5e03\u5f0f\uff0c\u9ad8\u6027\u80fd\uff0c\u4f38\u7f29\u6027\u8981\u6c42\uff0c\u5374\u53c8\u65e0\u6cd5\u4e3a\u65b0\u5e73\u53f0\u627e\u5230\u5408\u9002\u7684IPC\u673a\u5236\uff0c\u66f4\u522b\u8bf4\u57fa\u4e8eIPC\u673a\u5236\u884d\u751f\u51fa\u7684\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u3002\u4ee5\u592a\u7f51\u5728\u8f66\u8f7d\u7684\u5e94\u7528\u50ac\u751f\u4e86SOME/IP\uff08Scalable service-Oriented MiddlewarE over IP\uff09\u3002SOME/IP\u540c\u6837\u662f\u4e00\u5957\u6bd4\u8f83\u5b8c\u5584\u7684IPC\u89c4\u8303\uff0c\u751a\u81f3\u662f\u4e13\u95e8\u4e3a\u8f66\u8f7d\u9886\u57df\u5f00\u53d1\u7684\u3002\u4f46\u662f\u5c31\u5982\u540d\u5b57\u91cc\u6697\u793a\u7684\uff0c\u5b83\u662f\u57fa\u4e8eIP\u5c42\u7684\uff0c\u5728\u5355\u673a\u4e0a\u6027\u80fd\u5e76\u4e0d\u597d\u3002\u4e14SOME/IP\u5f00\u6e90\u7684\u5b9e\u73b0\u4e5f\u5f88\u5c11\uff0cGENIVI\u7ec4\u7ec7\u8d21\u732e\u4e86vsomeip\uff0c\u4f46\u6d3b\u8dc3\u5ea6\u975e\u5e38\u4f4e\uff0cGENIVI\u672c\u8eab\u5c31\u662f\u4e2a\u677e\u6563\u7684\u7ec4\u7ec7\uff0c\u53c2\u4e0e\u8005\u591a\uff0c\u5f00\u53d1\u8005\u5c11\u3002\u4e0d\u50cfDBus\uff0cSOME/IP\u662f\u4e3a\u8f66\u8f7d\u6253\u9020\uff0c\u5e94\u7528\u8303\u56f4\u5f88\u7a84\uff0c\u4e0d\u53ef\u80fd\u6307\u671b\u6709\u4e00\u4e2a\u6d3b\u8dc3\u7684\u793e\u533a\u805a\u96c6\u4e00\u7fa4\u4e13\u4e1a\u7684\u7a0b\u5e8f\u5458\u6765\u7ef4\u62a4\u5f00\u653e\u7684\u6e90\u7801\u3002\u6700\u540e\u5f88\u53ef\u80fd\u7684\u60c5\u51b5\u662f\uff0c\u4e0d\u5f97\u4e0d\u82b1\u94b1\u8d2d\u4e70\u95ed\u6e90\u8f6f\u4ef6\u3002 FDBus\u5c31\u662f\u4e3a\u89e3\u51b3\u4ee5\u4e0a\u5404\u79cd\u95ee\u9898\u800c\u5f00\u53d1\u7684\uff0c\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5206\u5e03\u5f0f\uff1a\u57fa\u4e8eTCP socket\u548cUnix Domain socket\uff08UDS\uff09\uff0c\u65e2\u53ef\u7528\u4e8e\u672c\u5730IPC\uff0c\u4e5f\u652f\u6301\u7f51\u7edc\u4e3b\u673a\u4e4b\u95f4\u7684IPC \u8de8\u5e73\u53f0\uff1a\u76ee\u524d\u5df2\u5728Windows\uff0cLinux\u548cQNX\u4e0a\u9a8c\u8bc1 \u9ad8\u6027\u80fd\uff1a\u70b9\u5bf9\u70b9\u76f4\u63a5\u901a\u4fe1\uff0c\u4e0d\u901a\u8fc7\u4e2d\u592eHub\u6216Broker\u8f6c\u53d1 \u670d\u52a1\u540d\u89e3\u6790\uff1aserver\u5730\u5740\u7528\u540d\u5b57\u6807\u8bc6\uff0c\u901a\u8fc7name server\u6ce8\u518c\u670d\u52a1\u548c\u89e3\u6790\u540d\u5b57\uff0c\u4ece\u800cserver\u53ef\u4ee5\u5728\u5168\u7f51\u7edc\u4efb\u610f\u90e8\u7f72 \u652f\u6301\u8de8\u5e73\u53f0\u7684\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u5305\u62ec\u5982\u4e0b\u7ec4\u4ef6\uff1a Thread\u6a21\u578b Event Loop \u57fa\u4e8eJob-Worker\u7684\u7ebf\u7a0b\u95f4\u901a\u4fe1 \u57fa\u4e8eEvent Loop\u7684Timer \u57fa\u4e8eEvent Loop\u7684watch Mutex Semaphore Socket Notification IPC\u91c7\u7528Client-Server\u6a21\u5f0f\uff0c\u652f\u6301\u5982\u4e0b\u901a\u4fe1\u6a21\u5f0f\uff1a \u5e26\u8d85\u65f6\u7684\u540c\u6b65\u8bf7\u6c42-\u7b54\u590d \u5e26\u8d85\u65f6\u7684\u5f02\u6b65\u8bf7\u6c42-\u7b54\u590d \u65e0\u7b54\u590d\u7684\u547d\u4ee4\u8bf7\u6c42 \u6ce8\u518c-\u53d1\u5e03\u6a21\u5f0f\uff0c\u5b9e\u73b0\u591a\u70b9\u5e7f\u64ad IPC\u6d88\u606f\u91c7\u7528Protocol buffer\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u652f\u6301IDL\u4ee3\u7801\u751f\u6210\uff0c\u9ad8\u6548\u7b80\u4fbf\uff1b\u4e5f\u652f\u6301raw data\u683c\u5f0f\uff0c\u4fbf\u4e8e\u5927\u91cf\u6570\u636e\u4f20\u8f93 \u53ef\u9760\u7684\u5fc3\u8df3\u548c\u91cd\u8fde\u673a\u5236\uff0c\u786e\u4fdd\u65e0\u8bba\u7f51\u7edc\u72b6\u51b5\u5982\u4f55\uff0c\u65e0\u8bba\u54ea\u4e2a\u670d\u52a1\u91cd\u65b0\u4e0a\u7ebf\u6216\u91cd\u542f\uff0c\u901a\u4fe1\u5404\u65b9\u90fd\u80fd\u4fdd\u6301\u8fde\u63a5 C++\u5b9e\u73b0\uff0c\u6613\u4e8e\u5f00\u53d1\u548c\u7ef4\u62a4 \u4e3b\u6d41\u6846\u67b6\u5bf9\u6bd4 \u00b6 \u5e95\u5c42 \u6027\u80fd \u540c\u6b65\u8bf7\u6c42 \u5f02\u6b65\u8bf7\u6c42 \u8bf7\u6c42\u8d85\u65f6 FDBus Socket \u70b9\u5bf9\u70b9\uff0c\u6027\u80fd\u9ad8\uff0c\u4ec5\u6b21\u4e8eBinder \u652f\u6301 \u652f\u6301 \u652f\u6301 GDBus Socket \u901a\u8fc7daemon\u8f6c\uff0c\u6027\u80fd\u8f83\u4f4e \u652f\u6301 \u652f\u6301 \u652f\u6301 Binder Binder driver \u76f4\u63a5\u62f7\u8d1d\uff0c\u6027\u80fd\u6700\u9ad8 \u652f\u6301 \u80fd\u652f\u6301\uff0c\u4f46\u9700\u8981\u5c01\u88c5 \u80fd\u652f\u6301\uff0c\u4f46\u9700\u8981\u5c01\u88c5 \u57fa\u4e8eFDBus\u7684\u4e2d\u95f4\u4ef6\u6a21\u578b \u00b6 \u4e2d\u95f4\u4ef6\u5c42\u5305\u542b\u591a\u4e2a\u8fdb\u7a0b\uff0c\u65e0\u8bba\u8fd9\u4e9b\u8fdb\u7a0b\u4f4d\u4e8e\u540c\u4e00\u4e3b\u673a\u7cfb\u7edf\u8fd8\u662f\u4e0d\u540c\u4e3b\u673a\u7cfb\u7edf\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff0c FDBus\u7684\u7ebf\u7a0b\u8fd0\u884c\u7279\u5b9a\u7684\u4e8b\u4ef6\u5faa\u73af(event loop)\uff0c\u5c06\u901a\u7528\u7684\u7ebf\u7a0b\u589e\u5f3a\u4e3a\u80fd\u591f\u6267\u884cjob\uff0ctimer\u548cwatch\u7684worker\u7ebf\u7a0b \u3002FDBus\u7684\u901a\u4fe1\u53cc\u65b9\uff1aclient\u548cserver\u7edf\u79f0\u4e3aendpoint\u3002endpoint\u53ef\u4ee5\u90e8\u7f72\u5728\u4e0d\u540c\u7684worker\u4e0a\uff1b\u591a\u4e2aendpoint\u4e5f\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2aworker\u3002 endpoint\u90e8\u7f72\u5728worker\u662f\u6307endpoint\u7684\u4e8b\u4ef6\u5904\u7406\u5728\u8be5worker\u4e0a\u6267\u884c\uff0c\u4f8b\u5982server\u5728\u6307\u5b9a\u7684worker\u4e0a\u5904\u7406client\u8bf7\u6c42\uff1bclient\u5728\u6307\u5b9a\u7684worker\u4e0a\u5904\u7406server\u7684\u4e8b\u4ef6\u5e7f\u64ad\u3002\u4e2d\u95f4\u4ef6\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u7528\u4e00\u4e2aworker\u6765\u5904\u7406\u591a\u4e2aendpoint\u7684\u4e8b\u4ef6\uff0c\u907f\u514d\u6d88\u8017\u8fc7\u591a\u7ebf\u7a0b\uff0c\u66f4\u53ef\u4ee5\u907f\u514d\u591a\u7ebf\u7a0b\u5e26\u6765\u7684\u201c\u5e76\u53d1\u707e\u96be\u201d\u3002\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u7528\u591a\u4e2aworker\u4e3a\u4e00\u4e2aendpoint\u670d\u52a1\uff0c\u4f8b\u5982endpoint\u53ef\u4ee5\u521b\u5efa\u5de5\u4f5c\u7ebf\u7a0b\u5b8c\u6210\u8017\u65f6\u7684\u6587\u4ef6\u4e0b\u8f7d\uff0c\u89c6\u9891\u7f16\u89e3\u7801\uff0c\u5916\u8bbeIO\u7b49\u64cd\u4f5c\u3002 \u591a\u7ebf\u7a0b\u534f\u540c\u5de5\u4f5c\u8981\u6c42\u7ebf\u7a0b\u4e4b\u95f4\u80fd\u591f\u4f20\u9012\u6d88\u606f\u548c\u6570\u636e\uff0c\u4f8b\u5982\u6587\u4ef6\u4e0b\u8f7d\u5b8c\u6bd5\u8981\u901a\u77e5endpoint\u505a\u540e\u7eed\u5904\u7406\u3002\u5728\u8fdb\u7a0b\u5185\u7531\u4e8e\u53ef\u4ee5\u8bbf\u95ee\u540c\u4e00\u5730\u5740\u7a7a\u95f4\uff0c\u6700\u597d\u7684\u901a\u4fe1\u8f7d\u4f53\u662f\u5bf9\u8c61\uff0c\u65e2\u80fd\u627f\u8f7d\u6570\u636e\uff0c\u8fd8\u80fd\u6307\u5b9a\u6570\u636e\u7684\u5904\u7406\u65b9\u5f0f\u3002job\u5c31\u662fFDBus\u5728\u7ebf\u7a0b\u4e4b\u95f4\u4f20\u9012\u7684\u5bf9\u8c61\uff0c\u901a\u8fc7job\u5728\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4f20\u9012\u548c\u6267\u884c\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002 FDBus\u66f4\u91cd\u8981\u7684\u529f\u80fd\u662f\u8fdb\u7a0b\u95f4\u901a\u4fe1(IPC)\u3002\u8fdb\u7a0b\u4e4b\u95f4\u65e0\u6cd5\u76f4\u63a5\u4f20\u9012\u5bf9\u8c61\uff0c\u53ea\u80fd\u4ee5\u6d88\u606f\u5f62\u5f0f\u4ea4\u4e92\uff0c\u5e76\u4e14\u6d88\u606f\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u9700\u8981\u505a\u5e8f\u5217\u5316\uff0c\u63a5\u6536\u5230\u6d88\u606f\u540e\u9700\u8981\u505a\u53cd\u5e8f\u5217\u5316\u3002\u6bcf\u79cdIPC\u673a\u5236\uff0c\u5305\u62ecBinder\uff0cSOME/IP\uff0cDBus\uff0c\u90fd\u6709\u81ea\u5df1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\u3002\u5e8f\u5217\u5316\u65b9\u5f0f\u7684\u597d\u574f\u76f4\u63a5\u5f71\u54cd\u5230\u901a\u4fe1\u6548\u7387\uff0c\u8d1f\u8f7d\uff0c\u5bf9\u6570\u636e\u7ed3\u6784\u7684\u652f\u6301\u7a0b\u5ea6\u4ee5\u53ca\u4f7f\u7528\u7684\u4fbf\u5229\u6027\u3002FDBus\u6ca1\u6709\u81ea\u5df1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\uff0c\u76f4\u63a5\u91c7\u7528 google protocol buffer \uff0c\u4f7f\u7528\u65b9\u4fbf\uff0c\u529f\u80fd\u9f50\u5168\uff0c\u5e76\u652f\u6301idl\u81ea\u52a8\u4ee3\u7801\u751f\u6210\u3002\u6570\u636e\u5728\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u91c7\u7528socket\uff0c\u5305\u62ecUnix Domain Socket\uff08UDS\uff09\u548cTCP socket\u3002\u5177\u4f53\u91c7\u7528\u54ea\u79cd\u7c7b\u578b\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eClient\u548cServer\u7684\u90e8\u7f72\u800c\u81ea\u52a8\u9009\u62e9\uff1a\u5982\u679c\u5728\u540c\u4e00\u4e3b\u673a\u5185\u90e8\u4f7f\u7528UDS\uff0c\u5426\u5219\u4f7f\u7528TCP socket\u3002\u5bf9\u4e8eWindows\uff0c\u7531\u4e8e\u4e0d\u652f\u6301UDS\uff0c\u5168\u90e8\u91c7\u7528TCP socket\u3002 FDBus\u5bfb\u5740\u548c\u7ec4\u7f51 \u00b6 Server\u5730\u5740 \u00b6 server\u5730\u5740\u662fserver\u5728\u7f51\u7edc\u4e2d\u7684\u6807\u8bc6\uff0c\u901a\u8fc7\u8be5\u6807\u8bc6client\u53ef\u4ee5\u627e\u5230\u6307\u5b9a\u7684server\u5e76\u4e0e\u4e4b\u5efa\u7acb\u901a\u4fe1\u3002\u524d\u9762\u63d0\u5230\uff0cFDBus\u652f\u6301UDS\u548cTCP socket\uff0c\u6bcf\u79cdsocket\u6709\u81ea\u5df1\u7684\u547d\u540d\u65b9\u5f0f\u548c\u547d\u540d\u7a7a\u95f4\u3002\u4e3a\u4e86\u7edf\u4e00FDBus\u4f7f\u7528\u5982\u4e0b\u89c4\u5219\u5b9a\u4e49Server\u5730\u5740\uff1a UDS \uff1a file://socket\u6587\u4ef6\u540d TCP socket \uff1a tcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 \u4e0d\u540c\u4e8e\u4e00\u822c\u610f\u4e49\u4e0a\u7684socket server\uff0cFDBus server\u53ef\u4ee5\u540c\u65f6\u7ed1\u5b9a\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u53ef\u63a5\u53d7client\u7684\u8fde\u63a5\u3002\u4e00\u65e6\u8fde\u63a5\u4e0a\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u63d0\u4f9b\u540c\u6837\u7684\u670d\u52a1\uff0c\u6240\u4ee5client\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u5730\u5740\u5efa\u7acb\u8fde\u63a5\u3002\u4e0b\u9762\u662f\u4e00\u4e2aFDBus server\u5730\u5740\u7ed1\u5b9a\u793a\u610f\u56fe\uff1a \u4e0a\u56fe\u4e2d\uff0cserver\u7ed1\u5b9a\u4e86\u4e00\u4e2aUDS\u5730\u5740\uff1a file:///tmp/fdb-ipc1 \u3002\u540c\u4e00\u4e3b\u673a\u4e0a\u7684client\u53ef\u4ee5\u7528\u8be5\u5730\u5740\u53d1\u8d77\u8fde\u63a5\uff0c\u5f53\u7136\u4e5f\u53ef\u8fde\u63a5\u5230\u5176\u5b83\u4efb\u610f\u5730\u5740\uff0c\u4f46\u65e0\u7591\u4f7f\u7528UDS\u662f\u6700\u9ad8\u6548\u7684\u3002\u7531\u4e8e\u4e3b\u673a\u6709\u591a\u4e2a\u7f51\u53e3\uff0cserver\u8fd8\u53ef\u4ee5\u5728\u6bcf\u4e2a\u7f51\u53e3\u4e0a\u5404\u7ed1\u5b9a\u4e00\u4e2a\u5730\u5740\uff08\u7aef\u53e3\u53f7\uff09\uff1a tcp://192.168.1.2:60004 \u548c tcp://192.168.0.1:60004 \uff0c\u6bcf\u4e2a\u5730\u5740\u7528\u4e8e\u8fde\u63a5\u5bf9\u5e94\u7f51\u6bb5\u7684client\u3002 Server\u547d\u540d\u548c\u5730\u5740\u5206\u914d \u00b6 \u7528\u4e0a\u8ff0\u65b9\u5f0f\u5b9a\u4f4dserver\u4f7f\u7528\u4e0d\u65b9\u4fbf\uff0c\u4e0d\u76f4\u89c2\uff0c\u5730\u5740\u4f1a\u968f\u7ec4\u7f51\u65b9\u5f0f\u53d8\u5316\u800c\u6539\u53d8\uff0c\u65e0\u6cd5\u7075\u6d3b\u90e8\u7f72\u3002\u4e3a\u6b64FDBus\u589e\u52a0\u4e86\u4e00\u79cd\u5bfb\u5740\u65b9\u5f0f\uff1aserver\u540d\u5b57\u5bfb\u5740\uff0c\u6bcf\u4e2aserver\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff1b\u8fd0\u884c\u4e00\u4e2a\u53ebname server\u7684\u670d\u52a1\uff0c\u8d1f\u8d23\u4e3aserver\u5206\u914d\u5730\u5740\uff0c\u7ba1\u7406server\u540d\u5b57-\u5730\u5740\u6620\u5c04\uff0c\u89e3\u6790server\u540d\u5b57\uff0c\u53d1\u5e03server\u5730\u5740\u3002name server\u6709\u70b9\u7c7b\u4f3cinternet\u4e0a\u7684DNS\u3002\u4e3a\u652f\u6301server\u540d\u5b57\u5bfb\u5740\uff0c\u5728\u4e24\u79cdURL\u4e4b\u5916\u589e\u52a0\u4e00\u79cd\u683c\u5f0f\uff0c\u4f5c\u4e3a\u540d\u5b57\u5730\u5740\uff0c\u5982\u4e0b\u6240\u793a\uff1a svc://server\u540d\u5b57 \u540d\u5b57\u5730\u5740\u662f\u865a\u62df\u5730\u5740\u3002\u65e0\u8bbaserver\u4f4d\u4e8e\u4f55\u5904\uff0c\u53ea\u8981\u5b83\u7684\u540d\u5b57\u5730\u5740\u4e0d\u53d8\uff0cclient\u90fd\u53ef\u4ee5\u901a\u8fc7\u8be5\u5730\u5740\u4e0e\u4e4b\u5efa\u7acb\u8054\u7cfb\u3002\u5982\u679cserver\u7ed1\u5b9a\u540d\u5b57\u5730\u5740\uff0cname server\u4f1a\u4e3a\u5176\u5206\u914d\u5b9e\u9645\u5730\u5740( tcp:// \u6216 file:// \u5f00\u5934\u7684\u5730\u5740)\uff0c\u5e76\u5c06\u540d\u5b57\u548c\u5730\u5740\u6ce8\u518c\u5230\u6620\u5c04\u8868\u91cc\u3002\u5982\u679cclient\u8fde\u63a5\u540d\u5b57\u5730\u5740\uff0cname server\u4f1a\u6839\u636e\u540d\u5b57\u67e5\u627eserver\u7684\u5b9e\u9645\u5730\u5740\uff0c\u9009\u62e9\u4e00\u4e2a\u6700\u5408\u9002\u7684\u5b9e\u9645\u5730\u5740\u53d1\u5e03\u7ed9client\u3002client\u901a\u8fc7\u8be5\u5730\u5740\u4e0eserver\u5efa\u7acb\u70b9\u5bf9\u70b9\u7684\u76f4\u8fde\u3002\u4e0b\u56fe\u662f\u5728name server\u534f\u52a9\u4e0b\uff0cclient\u548cServer\u5229\u7528\u540d\u5b57\u5730\u5740\u5efa\u7acb\u8fde\u63a5\u7684\u6d41\u7a0b\uff1a \u9996\u5148client\u8c03\u7528 connect(\"svc://medisServer\") \u8981\u6c42\u548c\u540d\u53ebmediaServer\u7684server\u5efa\u7acb\u8fde\u63a5\u3002\u7531\u4e8e\u4f7f\u7528\u7684\u662f\u540d\u5b57\u5730\u5740\uff0cFDBus\u4f1a\u5411name server\u7d22\u8981mediaServer\u7684\u5b9e\u9645\u5730\u5740\u3002\u4f46\u73b0\u5728mediaServer\u8fd8\u6ca1\u6709\u4e0a\u7ebf\uff0c\u6240\u4ee5\u65e0\u6cd5\u89e3\u6790\u8be5\u540d\u5b57\uff0c\u53ea\u662f\u8ba2\u9605\u4e86\u5bf9\u8be5\u670d\u52a1\u7684\u4e0a\u7ebf\u901a\u77e5\u3002\u4e0d\u4e45\u540eserver\u8c03\u7528 bind(\"svc://mediaServer\") \u4e0a\u7ebf\uff0c\u7531\u4e8e\u4f7f\u7528\u540d\u5b57\u5730\u5740\uff0c\u540c\u6837\u4f1a\u5411name server\u53d1\u51fa\u8bf7\u6c42\u3002name server\u4e3a\u5176\u6ce8\u518c\u540d\u5b57\uff0c\u5206\u914dUDS\u548cTCP\u5730\u5740\u5e76\u8fd4\u7ed9server\u3002server\u5206\u522b\u7ed1\u5b9a\u6bcf\u4e2a\u5b9e\u9645\u5730\u5740\uff0c\u6210\u529f\u540e\u901a\u77e5name server\u3002name server\u5411\u6574\u4e2a\u7cfb\u7edf\u53d1\u5e03\u8be5server\u4e0a\u7ebf\u7684\u6d88\u606f\u4ee5\u53caserver\u5730\u5740\uff1a\u5e7f\u64ad\u7ed9\u672c\u5730client\u7684\u662fUDS\u5730\u5740\uff0c\u5e7f\u64ad\u7ed9\u5176\u5b83\u8282\u70b9\u4e0aclient\u7684\u662fTCP\u5730\u5740\u3002client\u5229\u7528\u6536\u5230\u7684\u5730\u5740\u4e0eserver\u5efa\u7acb\u8fde\u63a5\uff0c\u540c\u65f6client\u548cserver\u90fd\u80fd\u6536\u5230onOnline()\u7684\u4e8b\u4ef6\u901a\u77e5\u3002 name server \u4f7f\u7528\u5982\u4e0b\u89c4\u5219\u5206\u914dserver\u5730\u5740\uff1a Server TCP Address UDS Address host server port No. 61000 /tmp/fdb-hs name server port No. 61001 /tmp/fdb-ns user servers Port 61002 \u2013 Port 65535 \u6216 \u7cfb\u7edf\u81ea\u52a8\u5206\u914d /tmp/fdb-ipc0, /tmp/fdb-ipc1 \u2026 \u591a\u4e3b\u673a\u7ec4\u7f51 \u00b6 \u7531\u4e8ename server\u7684\u5730\u5740\u662f\u56fa\u5b9a\u7684\uff0cendpoint\u542f\u52a8\u540e\uff0c\u4f1a\u81ea\u52a8\u8fde\u63a5name server\u6ce8\u518c(server)\u6216\u89e3\u6790\u540d\u5b57(client)\u3002\u5982\u679c\u6709\u591a\u53f0\u4e3b\u673a\uff0c\u6bcf\u53f0\u4e3b\u673a\u4e0a\u8fd0\u884c\u81ea\u5df1\u7684name server\uff0c\u8d1f\u8d23\u5404\u81ea\u7684\u540d\u5b57\u670d\u52a1\uff0c\u90a3\u4e48\u8fd9\u4e9b\u4e3b\u673a\u5c31\u6210\u4e86\u5b64\u5c9b\uff0c\u65e0\u6cd5\u901a\u8fc7 svc://server_name \u7684\u65b9\u5f0f\u4e92\u76f8\u8fde\u63a5\u3002\u5f53\u7136client\u53ef\u4ee5\u7ed5\u5f00name server\uff0c\u7528\u5b9e\u9645\u5730\u5740\u76f4\u63a5\u8fde\u63a5\u4e0aserver\uff0c\u4f46\u8fd9\u6837\u65e0\u6cd5\u7075\u6d3b\u90e8\u7f72\u548c\u7ec4\u7f51\u3002\u4e3a\u4e86\u652f\u6301\u8de8\u7f51\u7edc\u7684\u540d\u5b57\u670d\u52a1\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u670d\u52a1\u7ba1\u7406\u7cfb\u7edf\u91cc\u6240\u6709\u4e3b\u673a\uff0c\u628a\u4e3b\u673a\u4fe1\u606f\u540c\u6b65\u7ed9\u6240\u6709name server\uff0c\u8fdb\u800c\u8fd9\u4e9bname server\u4e4b\u95f4\u53ef\u4ee5\u5efa\u7acb\u8fde\u63a5\uff0c\u534f\u540c\u5de5\u4f5c\uff0c\u5171\u540c\u5b8c\u6210\u5168\u7f51\u7edc\u7684\u540d\u5b57\u670d\u52a1\u3002\u8fd9\u4e2a\u670d\u52a1\u5c31\u662fhost server\u3002 host server\u7684\u5de5\u4f5c\u539f\u7406\u662f\uff1a\u6574\u4e2a\u7f51\u7edc\u8fd0\u884c\u4e00\u4e2ahost server\uff0c\u53ef\u4ee5\u4f4d\u4e8e\u4efb\u610f\u4e00\u53f0\u5927\u5bb6\u90fd\u80fd\u8bbf\u95ee\u7684\u4e3b\u673a\u4e0a\u3002\u6240\u6709\u4e3b\u673a\u7684name server\u90fd\u8fde\u63a5\u5230host server\uff0c\u6ce8\u518c\u81ea\u5df1\u6240\u5728\u7684\u4e3b\u673a\u3002host server\u7ef4\u62a4\u4e00\u5f20\u5305\u542b\u5404\u4e3b\u673aip\u5730\u5740\u7684\u4e3b\u673a\u5217\u8868\uff0c\u5e76\u628a\u8be5\u8868\u540c\u6b65\u7ed9\u7f51\u7edc\u91cc\u6240\u6709\u7684name server\u3002name server\u6839\u636e\u8be5\u8868\u4e0e\u6240\u6709\u4e3b\u673a\u4e0a\u7684name server\u5efa\u7acb\u8fde\u63a5\u3002 \u4e00\u65e6\u6240\u6709\u4e3b\u673a\u4e0a\u7684name server\u90fd\u4e24\u4e24\u5efa\u7acb\u8fde\u63a5\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e00\u5957\u5185\u90e8\u534f\u8bae\u5b8c\u6210\u8de8\u4e3b\u673a\u7684\u670d\u52a1\u540d\u89e3\u6790\u548c\u670d\u52a1\u4e0a\u7ebf\u901a\u77e5\u3002\u4f8b\u5982\u5f53\u4e00\u53f0\u4e3b\u673a\u4e0a\u7684client\u5411\u672c\u5730name server\u8bf7\u6c42\u89e3\u6790\u670d\u52a1\u540d\u5bf9\u5e94\u7684\u5730\u5740\uff0c\u672c\u5730name server\u53ef\u4ee5\u628a\u8be5\u8bf7\u6c42\u5e7f\u64ad\u7ed9\u6240\u6709\u76f8\u8fde\u7684name server\uff0c\u5728\u6574\u4e2a\u7f51\u7edc\u8303\u56f4\u5185\u67e5\u627e\u670d\u52a1\u3002\u4e0b\u9762\u662f\u6574\u4e2a\u7cfb\u7edf\u7ec4\u7f51\u793a\u4f8b\u56fe\uff1a \u4e0a\u56fe\u4e2d\uff0cname server\u548chost server\u4e4b\u95f4\u5efa\u7acb\u661f\u5f62\u8fde\u63a5\uff0cname server\u548cname server\u4e4b\u95f4\u4e24\u4e24\u76f8\u8fde\uff0c\u7ec4\u6210\u4e00\u5f20\u7f51\u3002\u5728\u8fd9\u4e2a\u7cfb\u7edf\u91cc\uff0cname server\u548chost server\u7684\u4e3b\u8981\u4efb\u52a1\u662f\uff1a name server\u8fde\u63a5\u5230host server\uff0c\u628a\u6240\u5728\u7684\u4e3b\u673a\u6ce8\u518c\u8fdbhost server host server\u6536\u96c6\u6240\u6709\u4e3b\u673a\u4fe1\u606f\uff0c\u5f62\u6210\u4e3b\u673a\u5730\u5740\u8868 host server\u628a\u4e3b\u673a\u5730\u5740\u8868\u5e7f\u64ad\u7ed9\u6240\u6709name server name server\u4ece\u8868\u4e2d\u83b7\u5f97\u5176\u5b83\u4e3b\u673a\u4e0aname server\u7684\u5730\u5740\uff0c\u5e76\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5 \u6240\u6709server\u4e0e\u672c\u5730name server\u76f8\u8fde\uff0c\u5411\u5176\u6ce8\u518c\u670d\u52a1\u540d\u5b57\u3002\u672c\u5730name server\u5c06\u65b0\u6ce8\u518c\u7684\u670d\u52a1\u5e7f\u64ad\u7ed9\u672c\u5730\u7684client\u4ee5\u53ca\u7f51\u7edc\u91cc\u6240\u6709\u5176\u5b83\u7684name server \u5176\u5b83name server\u6536\u5230\u8be5\u5e7f\u64ad\u540e\uff0c\u540c\u6837\u5728\u672c\u5730\u505a\u4e00\u4e2a\u5e7f\u64ad\uff0c\u901a\u77e5\u7ed9\u6240\u6709client\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u628a\u670d\u52a1\u4e0a\u7ebf\u7684\u6d88\u606f\u6269\u6563\u5230\u6574\u4e2a\u7f51\u7edc \u6240\u6709client\u4e0e\u672c\u5730name server\u76f8\u8fde\uff0c\u7533\u8bf7\u670d\u52a1\u540d\u5b57\u89e3\u6790\u3002\u672c\u5730name server\u641c\u7d22\u81ea\u8eab\u7684server\u5730\u5740\u6620\u5c04\u8868\uff0c\u540c\u65f6\u628a\u7533\u8bf7\u53d1\u9001\u7ed9\u5176\u5b83\u6240\u6709name server \u5176\u5b83name server\u6536\u5230\u7533\u8bf7\u540e\uff0c\u641c\u7d22\u5404\u81ea\u7684server\u5730\u5740\u6620\u5c04\u8868\uff0c\u5e76\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d1\u8d77\u7533\u8bf7\u7684name server name server\u628a\u6536\u5230\u7684\u8fd4\u56de\u7ed3\u679c\u8f6c\u53d1\u7ed9\u53d1\u8d77\u7533\u8bf7\u7684client\uff0cclient\u5229\u7528\u7ed3\u679c\u91cc\u7684\u5b9e\u9645\u5730\u5740\u4e0e\u670d\u52a1\u5efa\u7acb\u76f4\u8fde\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u627e\u5230\u6240\u6709\u4e3b\u673a\u4e0a\u7684\u670d\u52a1 \u4ece\u4e0a\u56fe\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u4e00\u65e6client\u548cserver\u4e4b\u95f4\u5efa\u7acb\u8fde\u63a5\uff0c\u6240\u6709\u7684\u901a\u4fe1\u90fd\u901a\u8fc7\u8fd9\u4e2a\u8fde\u63a5\u5b8c\u6210\uff0c\u65e0\u9700\u7ecf\u8fc7\u4e2d\u95f4\u73af\u8282\u8f6c\u53d1\u3002 \u670d\u52a1\u540d\u5b57\u7684\u552f\u4e00\u6027 \u00b6 \u7531\u4e8e\u6bcf\u53f0\u4e3b\u673a\u90fd\u6709\u81ea\u5df1\u7684name server\uff0c\u6240\u4ee5\u5728\u4e3b\u673a\u5185\u90e8\uff0c\u670d\u52a1\u4e0d\u80fd\u91cd\u540d\uff0c\u4f46\u662f\u5728\u4e0d\u540c\u4e3b\u673a\u4e0a\u53ef\u4ee5\u91cd\u540d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53client\u7533\u8bf7\u540d\u5b57\u89e3\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u6536\u5230\u6765\u81ea\u4e0d\u540c\u4e3b\u673a\u53cd\u9988server\u4fe1\u606f\u3002client\u53ef\u4ee5\u5b9a\u5236\u8fde\u63a5\u7b56\u7565\uff1a\u603b\u662f\u8fde\u63a5\u8fde\u63a5\u65b0\u7684server\uff0c\u53ea\u8fde\u63a5\u7b2c\u4e00\u4e2aserver\uff0c\u6216\u662f\u53ea\u8fde\u63a5\u6307\u5b9a\u7684server\u3002 \u5fc3\u8df3\u68c0\u6d4b\uff0c\u91cd\u8fde\u548c\u4e0a\u7ebf\u3001\u79bb\u7ebf\u68c0\u6d4b \u00b6 \u4e3a\u4e86\u4f7f\u6574\u4e2a\u7cfb\u7edf\u53ef\u9760\u8fd0\u884c\uff0c\u4fdd\u8bc1\u4efb\u4f55\u670d\u52a1\u90fd\u53ef\u4ee5\u4f18\u96c5\u91cd\u542f\uff08\u91cd\u542f\u540e\u6574\u4e2a\u7cfb\u7edf\u5de5\u4f5c\u6b63\u5e38\uff09\uff0cFDBus\u6709\u5b8c\u5584\u7684\u5fc3\u8df3\u68c0\u6d4b\u548c\u4e0a\u7ebf\u3001\u79bb\u7ebf\u68c0\u6d4b\u673a\u5236\uff1a endpoints \u548c name server \u4e4b\u95f4\u6709\u91cd\u8fde\u673a\u5236\uff0c\u786e\u4fddname server\u91cd\u542f\u540eendpoint\u603b\u662f\u80fd\u591f\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5 name server \u548c host server \u4e4b\u95f4\u6709\u5fc3\u8df3\u68c0\u6d4b\uff1b\u4e00\u65e6\u5fc3\u8df3\u6d88\u5931\uff0cname server\u4f1a\u5c1d\u8bd5\u4e0ehost server\u91cd\u8fde\uff0c\u786e\u4fddname server\u4e0ehost server\u4e4b\u95f4\u8fde\u63a5\u7684\u53ef\u9760\u6027 name server \u548c name server \u4e4b\u95f4\u7684\u8fde\u63a5\u5efa\u7acb\u7531 host server \u6765\u4fdd\u8bc1\uff1a\u5f53name server\u4e0a\u7ebf\u65f6\uff0chost server\u4f1a\u901a\u77e5\u6240\u6709\u5176\u5b83name server\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5\uff0c\u4e5f\u4f1a\u901a\u77e5\u8be5name server\u4e0e\u6240\u6709\u5176\u5b83name server\u5efa\u7acb\u8fde\u63a5 client \u548c server \u4e4b\u95f4\u7684\u8fde\u63a5\u5efa\u7acb\u7531 name server \u6765\u4fdd\u8bc1\uff1aserver\u4e0a\u7ebf\u65f6\uff0cname server\u4f1a\u901a\u77e5client\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5 \u5b89\u5168\u6027 (Security) \u00b6 \u968f\u7740\u7cfb\u7edf\u8d8a\u6765\u8d8a\u590d\u6742\u548c\u5f00\u653e\uff0c\u5b89\u5168\u6027\u5df2\u7ecf\u6210\u4e3a\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u65f6\u5173\u6ce8\u7684\u7126\u70b9\u3002\u4e00\u4e2a\u5f00\u653e\u7684\u7cfb\u7edf\u610f\u5473\u7740\u53ef\u80fd\u5b58\u5728\u5165\u4fb5\u8005\uff0c\u4e00\u65e6\u5165\u4fb5\u8005\u8bbf\u95ee\u4e86\u4e0d\u5e94\u8be5\u8bbf\u95ee\u7684\u8d44\u6e90\u5c31\u53ef\u80fd\u9020\u6210\u4fe1\u606f\u6cc4\u9732\u6216\u7834\u574f\u3002\u4e00\u4e2a\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u662f\u5efa\u7acb\u5728\u4fe1\u4efb\u94fe\u7684\u57fa\u7840\u4e4b\u4e0a\u7684\uff0c\u53ea\u6709\u6ee1\u8db3\u5fc5\u8981\u7684\u5b89\u5168\u57fa\u7840\u624d\u80fd\u6784\u7b51\u81ea\u8eab\u7684\u5b89\u5168\u80fd\u529b\u3002\u5bf9\u4e8eFDBus\u6765\u8bf4\uff0c\u6709\u4ee5\u4e0b\u4e24\u4e2a\u524d\u63d0\u6761\u4ef6\uff1a \u6700\u57fa\u672c\u7684\u524d\u63d0\u662fFDBus\u81ea\u8eab\u7684\u5b8c\u6574\u6027\uff1a\u7cfb\u7edf\u4e2d\u8fd0\u884c\u7684FDBus\u5e93\uff0cname server\uff0chost server\u90fd\u662f\u5408\u6cd5\u7684\uff0c\u6ca1\u6709\u88ab\u7be1\u6539\u6216\u66ff\u6362\u3002\u8fd9\u4e00\u70b9\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u901a\u8fc7\u6743\u9650\u7ba1\u7406\uff0csecure boot\uff0cDM-verity\uff0cFS-verity\uff0c\u5b89\u5168\u5347\u7ea7\u7b49\u673a\u5236\u6765\u786e\u4fdd\u3002 \u5176\u6b21\u5728\u7f51\u7edc\u4e0a\uff0cFDBus\u6d88\u606f\u662f\u4ee5\u660e\u6587\u4f20\u9012\u7684\uff0c\u4e00\u65e6\u6709\u4eba\u975e\u6cd5\u76d1\u542c\u7f51\u7edc\u62a5\u6587\u5c31\u6709\u53ef\u80fd\u9020\u6210\u4fe1\u606f\u6cc4\u9732\u4ee5\u53ca\u5b89\u5168\u6f0f\u6d1e\u3002\u6240\u4ee5\u8ba8\u8bbaFDBus\u5b89\u5168\u6027\u7684\u53e6\u4e00\u524d\u63d0\u662f\u5165\u4fb5\u8005\u65e0\u6cd5\u622a\u53d6\u7f51\u7edc\u62a5\u6587\uff0c\u83b7\u5f97FDBus\u4e0a\u4f20\u9012\u7684\u6570\u636e\u3002\u5f53\u7136\u5982\u679c\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u53ef\u4ee5\u9632\u6b62\u7a83\u542c\uff0c\u4f46\u8003\u8651\u5230\u6548\u7387\u548c\u6027\u80fd\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u8fd9\u4e48\u505a\u3002 \u57fa\u4e8e\u8fd9\u4e9b\u5047\u8bbe\uff0cFDBus\u9762\u4e34\u7684\u653b\u51fb\u4e3b\u8981\u6765\u81ea\u4e09\u65b9\u9762\uff1a \u975e\u6cd5\u4e3b\u673a\u8fde\u63a5\u5230FDBus\u603b\u7ebf\u4e0a\u5e76\u8fd0\u884c\u975e\u6cd5\u7a0b\u5e8f\u4e0e\u5176\u5b83\u4e3b\u673a\u901a\u4fe1\uff1b \u5728\u4e00\u53f0\u5408\u6cd5\u4e3b\u673a\u4e0a\u8fd0\u884c\u975e\u6cd5\u7a0b\u5e8f\uff0c\u5e76\u8fde\u63a5\u5230FDBus\u4e0a\uff0c\u6267\u884c\u975e\u6cd5\u64cd\u4f5c\u3002 \u5408\u6cd5\u7684\u4e3b\u673a\u4e0a\u8fd0\u884c\u5408\u6cd5\u7a0b\u5e8f\uff0c\u4f46\u8bd5\u56fe\u8bbf\u95ee\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u7684\u6570\u636e\u6216\u6267\u884c\u6ca1\u6709\u6743\u9650\u7684\u64cd\u4f5c\u3002 \u57fa\u4e8e\u4ee5\u4e0a\u653b\u51fb\uff0cFDBus\u4ece\u5982\u4e0b\u65b9\u9762\u786e\u4fdd\u7cfb\u7edf\u5b89\u5168\u8fd0\u884c\uff1a \u4e3b\u673a\u8282\u70b9\u7684\u5408\u6cd5\u6027\uff1a\u53ea\u6709\u5408\u6cd5\u7684\u4e3b\u673a\u624d\u80fd\u52a0\u5165FDBus\uff0c\u6210\u4e3a\u603b\u7ebf\u4e0a\u7684\u4e00\u4e2a\u6210\u5458 \u670d\u52a1\u8bbf\u95ee\u7684\u5408\u6cd5\u6027\uff1a\u53ea\u6709\u5408\u6cd5\u7684client\u624d\u80fd\u8bbf\u95eeserver\uff1bserver\u80fd\u591f\u8bc6\u522b\u51fa\u975e\u6cd5\u7684client\u5e76\u62d2\u7edd\u8bbf\u95ee \u8bbf\u95ee\u8005\u5b89\u5168\u7ea7\u522b\u9274\u5b9a\uff1a\u6bcf\u4e2a\u8bbf\u95ee\u8005\u6709\u5404\u81ea\u7684\u5b89\u5168\u7ea7\u522b\uff0c\u53ea\u6709\u5408\u9002\u7684\u5b89\u5168\u7ea7\u522b\u624d\u80fd\u8bbf\u95ee\u5bf9\u5e94\u7684\u8d44\u6e90 \u4e3b\u673a\u8282\u70b9\u9274\u6743 \u00b6 \u4e00\u53f0\u4e3b\u673a\u82e5\u8981\u52a0\u5165FDBus\u5fc5\u987b\u4e0ehost server\u5efa\u7acb\u8fde\u63a5\u3002host server\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4e3b\u673a\u7684IP\u5730\u5740\u6216MAC\u5730\u5740\u5bf9\u4e3b\u673a\u505a\u9274\u6743\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u516c\u79c1\u94a5\u5bf9\u5224\u65ad\u4e3b\u673a\u7684\u5408\u6cd5\u6027\u3002\u5bf9\u4e8e\u5408\u6cd5\u7684\u4e3b\u673a\uff0chost server\u4f1a\u4e3a\u5176\u9881\u53d1\u8bbf\u95ee\u5176\u5b83\u4e3b\u673a\u7684\u201c\u901a\u884c\u8bc1\u201d\uff0c\u6301\u6709\u901a\u884c\u8bc1\u540e\uff0c\u4e3b\u673a\u4e0a\u7684name server\u624d\u80fd\u4e0e\u5176\u5b83\u4e3b\u673a\u4e0a\u7684name server\u5efa\u7acb\u8fde\u63a5\uff0c\u4e5f\u5c31\u610f\u5473\u8fd9\u52a0\u5165\u4e86FDBus\u3002 \u201c\u901a\u884c\u8bc1\u201d\u91c7\u7528token\u6765\u5b9e\u73b0\u3002\u5f53\u4e3b\u673a\u4e0a\u7684name server\u53d1\u8d77\u8fde\u63a5\u65f6\uff0chost server\u4f1a\u4e3a\u5176\u5206\u914d\u591a\u4e2atoken\uff0c\u6bcf\u4e2atoken\u5bf9\u5e94\u4e00\u4e2a\u5b89\u5168\u7b49\u7ea7\u3002\u4e0b\u8868\u8868\u793a\u4e00\u4e2a\u7cfb\u7edf\u91cc\u5404\u4e3b\u673a\u7684token\u5206\u914d\uff1a \u5b89\u5168\u7b49\u7ea71 \u5b89\u5168\u7b49\u7ea72 \u5b89\u5168\u7b49\u7ea73 \u5b89\u5168\u7b49\u7ea74 \u4e3b\u673a1 token11 token12 token13 token14 \u4e3b\u673a2 token21 token22 token23 token24 \u4e3b\u673a3 token31 token32 token33 token34 \u8868\u4e2d\u4e00\u5171\u67094\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5bf9\u4e8e\u4e3b\u673a1\uff0c\u5404\u4e2a\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684token\u5206\u522b\u662ftoken11\uff0ctoken12\uff0ctoken13\uff0ctoken14\u3002\u5bf9\u4e8e\u5176\u5b83\u4e3b\u673a\u4f9d\u6b21\u7c7b\u63a8\u3002\u5f53\u4e3b\u673a2\u7684name server\u8fde\u63a5\u4e3b\u673a1\u7684name server\u65f6\uff0c\u9700\u8981\u6301\u6709\u4e3b\u673a1\u56db\u4e2atoken\u4e2d\u7684\u4e00\u4e2a\u3002\u4f8b\u5982\u4e3b\u673a2\u7528token11\u53bb\u8fde\u63a5\u4e3b\u673a1\uff0c\u90a3\u4e48\u5728\u4e3b\u673a1\u773c\u91cc\uff0c\u4e3b\u673a2\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\uff1b\u5982\u679c\u7528token13\uff0c\u90a3\u4e48\u4e3b\u673a2\u7684\u5b89\u5168\u7b49\u7ea7\u662f3\uff0c\u7b49\u7b49\u3002\u5b89\u5168\u7b49\u7ea7\u6570\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u914d\u7f6e\u3002 \u4e3b\u673a\u7684\u5b89\u5168\u7b49\u7ea7\u662fhost server\u5bf9\u4e3b\u673a\u505a\u8eab\u4efd\u9274\u522b\u548c\u9274\u6743\u540e\u6307\u5b9a\u7684\u3002\u4e0a\u9762\u63d0\u5230\uff0chost server\u53ef\u4ee5\u6839\u636e\u4e3b\u673a\u7684MAC\u5730\u5740\u6216\u5176\u5b83\u65b9\u5f0f\u8bc6\u522b\u4e3b\u673a\u8eab\u4efd\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u914d\u7f6e\u8868\u4e3a\u5176\u53d1\u5e03\u8bbf\u95ee\u5176\u5b83\u4e3b\u673a\u65f6\u4f7f\u7528\u7684token\uff1a \u4e3b\u673a1 \u4e3b\u673a2 \u4e3b\u673a3 \u4e3b\u673a1 (MAC address1) NA token22 token31 \u4e3b\u673a2 (MAC address2) token14 NA token34 \u4e3b\u673a3 (MAC address3) token12 token23 NA \u4e0a\u8868\u8868\u793a\uff0c\u4e3b\u673a1\u8fde\u4e3b\u673a2\u4f7f\u7528token22\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e3b\u673a2\uff0c\u4e3b\u673a1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\uff1b\u5f53\u4e3b\u673a1\u8fde\u4e3b\u673a3\u65f6\u4f7f\u7528token31\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e3b\u673a3\uff0c\u4e3b\u673a1\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\u7ea7\u3002\u5176\u5b83\u4f9d\u6b21\u7c7b\u63a8\u3002\u5bf9\u4e8e\u4e0d\u5728\u8868\u91cc\u7684\u4e3b\u673a\uff0c\u51fa\u4e8e\u5f00\u653e\u6027\u8003\u8651\uff0chost server\u4e0d\u4f1a\u62d2\u63a5\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u5176\u53d1\u5e03token\u3002\u5bf9\u4e8e\u6ca1\u6709token\u7684\u4e3b\u673a\uff0c\u5176\u5b89\u5168\u7b49\u7ea7\u89c6\u4e3a0\uff0c\u6700\u4f4e\u7ea7\u3002 \u670d\u52a1\u8bbf\u95ee\u9274\u6743 \u00b6 \u548chost server\u8d1f\u8d23\u4e3b\u673a\u9274\u6743\u4e00\u6837\uff0cname server\u8d1f\u8d23\u670d\u52a1\u8bbf\u95ee\u7684\u9274\u6743\uff0c\u539f\u7406\u4e5f\u91c7\u7528\u8ba4\u8bc1\u9274\u6743+token\u3002\u5f53server\u5411name server\u6ce8\u518c\u670d\u52a1\u540d\u65f6\uff0cname server\u5728\u5206\u914d\u5730\u5740\u7684\u540c\u65f6\uff0c\u4e5f\u5206\u914d\u591a\u4e2atoken\uff0c\u6bcf\u4e2atoken\u5bf9\u5e94\u4e00\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5b89\u5168\u7b49\u7ea71 \u5b89\u5168\u7b49\u7ea72 \u5b89\u5168\u7b49\u7ea73 \u5b89\u5168\u7b49\u7ea74 server1 token11 token12 token13 token14 server2 token21 token22 token23 token24 server3 token31 token32 token33 token34 \u8868\u4e2d\u4e00\u5171\u67094\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5bf9\u4e8eserver1\uff0c\u5404\u4e2a\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684token\u5206\u522b\u662ftoken11\uff0ctoken12\uff0ctoken13\uff0ctoken14\u3002\u5bf9\u4e8e\u5176\u5b83server\u4f9d\u6b21\u7c7b\u63a8\u3002\u5f53client\u8fde\u63a5server1\u65f6\uff0c\u9700\u8981\u6301\u6709server1\u56db\u4e2atoken\u4e2d\u7684\u4e00\u4e2a\u3002\u4f8b\u5982client\u7528token11\u53bb\u8fde\u63a5server1\uff0c\u90a3\u4e48\u5728server1\u773c\u91cc\uff0cclient\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\uff1b\u5982\u679c\u7528token13\uff0c\u90a3\u4e48client\u7684\u5b89\u5168\u7b49\u7ea7\u662f3\uff0c\u7b49\u7b49\u3002\u5b89\u5168\u7b49\u7ea7\u6570\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u914d\u7f6e\u3002 client\u7684\u5b89\u5168\u7b49\u7ea7\u662fname server\u5bf9client\u505a\u8eab\u4efd\u9274\u522b\u548c\u9274\u6743\u540e\u6307\u5b9a\u7684\u3002\u5f53client\u901a\u8fc7UDS\u8fde\u63a5\u5230name server\u65f6\uff0cUDS\u540c\u65f6\u4f1a\u628aclient\u7684credentials\u53d1\u751f\u7ed9name server\uff0c\u5176\u4e2d\u5305\u62ecclient\u7684uid\u548cguid\u3002\u7531\u4e8eWindows\u4e0d\u652f\u6301UDS\uff0c\u6240\u4ee5\u4e0d\u652f\u6301\u670d\u52a1\u8bbf\u95ee\u9274\u6743\u3002\u5bf9\u4e8eQNX\uff0c\u867d\u7136\u652f\u6301UDS\uff0c\u4f46\u7531\u4e8e\u4e0d\u652f\u6301SO_PEERCRED\u9009\u9879\uff0c\u4e5f\u4e0d\u652f\u6301\u670d\u52a1\u8bbf\u95ee\u9274\u6743\u3002\u56e0\u6b64\u76ee\u524d\u53ea\u6709Linux\u80fd\u591f\u652f\u6301\u3002\u6839\u636euid\u548cguid\uff0cname server\u53ef\u4ee5\u8bc6\u522bclient\u7684\u8eab\u4efd\uff0c\u901a\u8fc7\u5982\u4e0b\u914d\u7f6e\u8868\u4e3a\u5176\u53d1\u5e03\u8bbf\u95ee\u5176\u5b83server\u65f6\u4f7f\u7528\u7684token\uff1a server1 server2 server3 server4 client1 (uid1:guid1) token12 token22 token31 token43 client2 (uid2:guid2) token14 token21 token34 token43 client3 (uid3:guid3) token12 token23 token33 token41 \u4e0a\u8868\u8868\u793a\uff0cclient1\u8fdeserver1\u4f7f\u7528token12\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8eserver1\uff0cclient1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\uff1b\u5f53client1\u8fdeserver2\u65f6\u4f7f\u7528token22\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8eserver2\uff0cclient1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\u3002\u5176\u5b83\u4f9d\u6b21\u7c7b\u63a8\u3002\u5bf9\u4e8e\u4e0d\u5728\u8868\u91cc\u7684client\uff0c\u51fa\u4e8e\u5f00\u653e\u6027\u8003\u8651\uff0cname server\u4e0d\u4f1a\u62d2\u63a5\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u5176\u53d1\u5e03token\u3002\u5bf9\u4e8e\u6ca1\u6709token\u7684client\uff0c\u5176\u5b89\u5168\u7b49\u7ea7\u89c6\u4e3a0\uff0c\u6700\u4f4e\u7ea7\u3002 \u5b89\u5168\u7b49\u7ea7\u4e0e\u8bbf\u95ee\u6743\u9650 \u00b6 server\u5728\u5224\u65adclient\u7684\u5b89\u5168\u7b49\u7ea7\u65f6\uff0c\u9700\u8981\u7efc\u5408client\u672c\u8eab\u7684\u5b89\u5168\u7b49\u7ea7\u548cclient\u6240\u5728\u4e3b\u673a(\u5373name server)\u7684\u5b89\u5168\u7b49\u7ea7\uff1aclient\u7684\u6700\u9ad8\u5b89\u5168\u7b49\u7ea7\u4e0d\u8d85\u8fc7\u5176\u6240\u5728\u4e3b\u673a\u7684\u5b89\u5168\u7b49\u7ea7\u3002\u6709\u4e86\u5b89\u5168\u7b49\u7ea7\uff0cserver\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7b49\u7ea7\u5b9a\u4e49\u8bbf\u95ee\u6743\u9650\uff1a\u5728\u54ea\u4e9b\u7ea7\u522b\u53ef\u4ee5\u8c03\u7528\u54ea\u4e9b\u65b9\u6cd5\uff0c\u76d1\u542c\u54ea\u4e9b\u6d88\u606f\u5e7f\u64ad\u3002\u4e0b\u56fe\u8868\u793a\u4e00\u4e2aserver\u7684\u8bbf\u95ee\u6743\u9650\u5212\u5206\uff1a \u6bcf\u4e2aserver\u90fd\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u4e0d\u540c\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684\u8bbf\u95ee\u6743\u9650\u3002\u901a\u5e38\u662f\u5c06**\u65b9\u6cd5\u548c\u901a\u77e5ID\u5206\u6bb5**\uff0c\u843d\u5728\u4e0d\u540c\u6bb5\u7684ID\u5bf9\u5e94\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\u3002\u5bf9\u4e8e\u65b9\u6cd5\u8c03\u7528\uff0c\u5982\u679cclient\u7684\u5b89\u5168\u7b49\u7ea7\u6ca1\u6709\u8fbe\u5230\u8981\u6c42\u7684\u7b49\u7ea7\uff0cserver\u5c06\u4f1a\u62d2\u7edd\u6267\u884c\uff1b\u5bf9\u4e8e\u6d88\u606f\u901a\u77e5\uff0c\u5982\u679cclient\u6ca1\u6709\u6743\u9650\u5c06\u65e0\u6cd5\u6ce8\u518c\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u6d88\u606f\uff0c\u4ece\u800c\u4e5f\u5c31\u6536\u4e0d\u5230\u8be5\u6d88\u606f\u7684\u53d8\u5316\u901a\u77e5\u3002 \u8c03\u8bd5\u548c\u65e5\u5fd7 \u00b6 DBus\u63d0\u4f9b\u7684DBus monitor\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\uff1a\u5b83\u53ef\u4ee5\u6293\u53d6DBus\u603b\u7ebf\u4e0a\u6240\u6709\u6d88\u606f\uff0c\u8fd8\u80fd\u8bbe\u7f6e\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6293\u53d6\u7279\u5b9a\u6d88\u606f\u3002\u6293\u53d6\u7684\u6d88\u606f\u5177\u6709\u5f88\u597d\u5730\u53ef\u8bfb\u6027\uff0c\u5404\u79cd\u6570\u636e\u7ed3\u6784\u548c\u5b57\u6bb5\u540d\u90fd\u80fd\u663e\u793a\u51fa\u6765\u3002\u7c7b\u4f3c\u7684\uff0cFDBus\u4e5f\u63d0\u4f9b\u6293\u53d6\u6d88\u606f\u7684\u5de5\u5177 log server \uff0c\u5e76\u4e14\u5176\u529f\u80fd\u66f4\u5f3a\uff0c\u9664\u4e86FDBus\u6d88\u606f\uff0c\u8fd8\u652f\u6301\u8c03\u8bd5log\u8f93\u51fa\uff0c\u5e76\u628aFDBus\u6d88\u606f\u548c\u8c03\u8bd5log\u5408\u5e76\u5728\u4e00\u8d77\u663e\u793a\uff0c\u4fbf\u4e8e\u65f6\u5e8f\u5206\u6790\u3002 log server \u662f\u6302\u5728FDBus\u4e0a\u7684\u4e00\u4e2a\u666e\u901aserver\uff0c\u6bcf\u4e2aendpoint\u90fd\u5305\u542b\u5b83\u7684client\u7aef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u548c\u666e\u901aserver\u4e00\u6837\uff0clog server\u8fd0\u884c\u8d77\u6765\u540e\u5411name server\u6ce8\u518c\uff0c\u540e\u8005\u901a\u8fc7\u5e7f\u64ad\u544a\u77e5\u6bcf\u4e2aendpoint\u91cc\u7684LogClient\u3002\u4ee5\u540e\u5f53endpoint\u5411\u5916\u53d1\u9001FDBus\u6d88\u606f\u65f6\uff0c\u4e5f\u4f1a\u62f7\u8d1d\u4e00\u4efd\u901a\u8fc7LogClient\u53d1\u7ed9log server\u3002\u53d1\u9001\u7684\u6570\u636e\u9664\u4e86FDBus\u6d88\u606f\u5185\u5bb9\uff0c\u8fd8\u5305\u542b\uff1a \u65f6\u95f4\u6233 \u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u540d\u5b57 \u6d88\u606f\u7c7b\u578b\uff08\u8bf7\u6c42\uff0c\u7b54\u590d\uff0c\u5e7f\u64ad\uff0c\u8ba2\u9605\u7b49\uff09 protocol buffer\u5728\u7ebf\u8def\u4e0a\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\uff0c\u4e0d\u80fd\u76f4\u63a5\u6253\u5370\u51fa\u6765\u3002\u4e3a\u8c03\u8bd5\u65b9\u4fbfprotocol buffer\u53ef\u4ee5\u628a\u6d88\u606f\u8f6c\u53d8\u6210\u4fbf\u4e8e\u9605\u8bfb\u7684\u6587\u672c\u683c\u5f0f\uff0c\u76f4\u89c2\u663e\u793a\u6d88\u606f\u91cc\u6bcf\u4e2a\u6210\u5458\u7684\u540d\u5b57\u548c\u53d6\u503c\uff0c\u5e76\u628a\u6570\u7ec4\u7c7b\u578b\uff08repeated\u7c7b\u578b\uff09\u548c\u5d4c\u5957\u7c7b\u578b\u5c55\u5f00\u663e\u793a\u3002 \u5bf9\u4e8e\u8c03\u8bd5log\u8f93\u51fa\uff0cFDBus\u6709\u81ea\u5df1\u7684API\uff0c\u5e76\u652f\u6301\u4ee5\u4e0b\u8f93\u51fa\u7ea7\u522b\uff08\u4f18\u5148\u7ea7\u4f9d\u6b21\u9012\u589e\uff09\uff1a Debug Information Warning Error Fatal \u53ea\u8981log server\u542f\u52a8\u8d77\u6765\uff0c\u5f53endpoint\u901a\u8fc7API\u6253\u5370\u8c03\u8bd5log\u65f6\uff0c\u8fd9\u4e9blog\u4f1a\u901a\u8fc7LogClient\u53d1\u9001\u7ed9log server\u3002log server\u53ef\u4ee5\u628a\u8c03\u8bd5log\u548cFDBus\u6d88\u606f\u5408\u5e76\u8d77\u6765\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5355\u72ec\u8f93\u51fa\u7279\u5b9a\u5185\u5bb9\u3002 \u65e0\u8bbaendpoint\u90e8\u7f72\u4e8e\u54ea\u53f0\u4e3b\u673a\u4e0a\uff0clog server\u90fd\u80fd\u6536\u96c6\u5230\u5b83\u7684FDBus\u6d88\u606f\u548c\u8c03\u8bd5log\u3002\u6574\u4e2a\u7cfb\u7edf\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2alog server\uff0c\u4e0d\u65b9\u4fbf\u5206\u5e03\u5f0f\u8c03\u8bd5\u3002\u4e3a\u6b64FDBus\u6709\u53e6\u4e00\u4e2a\u5de5\u5177 - log viewer\uff0c\u591a\u4e2alog viewer\u53ef\u4ee5\u540c\u65f6\u542f\u52a8\uff0c\u5168\u90e8\u8fde\u63a5\u5230log server\u4e0a\uff0c\u83b7\u53d6\u5f53\u524d\u7684log\u4fe1\u606f\uff0c\u6253\u5370\u5728\u6807\u51c6\u8f93\u51fa\u3002 FDBus\u5185\u90e8\u7ed3\u6784 \u00b6 \u4e0b\u56fe\u662fFDBus\u5185\u90e8\u7ec4\u6210\u6846\u56fe\uff1a \u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42 - \u5305\u542b\u7cfb\u7edf\u65e0\u5173\u7684\u62bd\u8c61\uff0c\u7528\u4e8e\u9002\u914d\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42 - \u4e2d\u95f4\u4ef6\u8fdb\u7a0b\u6a21\u578b\uff0c\u5305\u542b\u6784\u6210\u8fdb\u7a0b\u7684\u57fa\u672c\u7ec4\u4ef6 IPC\u5c42 - \u8fdb\u7a0b\u95f4\u901a\u4fe1\u6a21\u578b\uff0c\u5305\u542b\u5b9e\u73b0IPC\u901a\u4fe1\u7684\u57fa\u672c\u7ec4\u4ef6 Server\u5c42 - \u63d0\u4f9b\u670d\u52a1\u540d\u89e3\u6790\uff0c\u7ec4\u7f51\uff0c\u65e5\u5fd7\u548c\u8c03\u8bd5\u670d\u52a1 \u603b\u7ed3 \u00b6 FDBus\u63d0\u4f9b\u5206\u5e03\u5f0fIPC\u901a\u4fe1\u673a\u5236\uff0c\u652f\u6301\u8de8\u4e3b\u673a\u7684client-server\u901a\u4fe1\uff0c\u4f7f\u7528\u670d\u52a1\u540d\u800c\u975e\u7269\u7406\u5730\u5740\u4f5c\u4e3a\u5bfb\u5740\u65b9\u5f0f\uff0c\u901a\u8fc7\u5404\u79cd\u670d\u52a1\u548c\u5fc3\u8df3\u91cd\u8fde\u673a\u5236\u786e\u4fdd\u8fde\u63a5\u7684\u52a8\u6001\u6027\u548c\u53ef\u9760\u6027\uff0c\u8fdb\u800c\u4fdd\u8bc1\u7cfb\u7edf\u5185\u7684\u8282\u70b9\u53ef\u4ee5\u52a8\u6001\u589e\u5220\uff0c\u52a8\u6001\u90e8\u7f72\uff0c\u4efb\u610f\u91cd\u542f\uff0c\u65e0\u9700\u7ba1\u7406\u542f\u52a8\u987a\u5e8f\u548c\u4f9d\u8d56\uff0c\u4ece\u800c\u628a\u5404\u4e2a\u5206\u7acb\u7684\u6a21\u5757\u7ed1\u5b9a\u5728\u4e00\u8d77\uff0c\u7ec4\u6210\u4e00\u4e2a\u7262\u56fa\u7684\u6574\u4f53\u3002\u4f5c\u4e3aIPC\u4e00\u4e2a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0cprotocol buffer\u652f\u6301\u5404\u79cd\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\uff0c\u80fd\u591f\u7528idl\u5b9a\u4e49\u63a5\u53e3\u5e76\u652f\u6301\u81ea\u52a8\u4ee3\u7801\u751f\u6210\uff0c\u5927\u5927\u964d\u4f4e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5de5\u4f5c\u3002FDBus\u652f\u6301\u5b89\u5168\u7b56\u7565\uff0c\u5bf9\u8bbf\u95ee\u533a\u5206\u5b89\u5168\u7b49\u7ea7\uff0c\u786e\u4fdd\u6574\u4e2a\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u3002 FDBus\u4e0d\u4ec5\u4ec5\u662fIPC\u673a\u5236\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u5305\u542b\u5f00\u53d1\u4e2d\u95f4\u4ef6\u8fc7\u7a0b\u4e2d\u7ecf\u5e38\u7528\u5230\u7684\u516c\u5171\u7ec4\u4ef6\u548c\u57fa\u7840\u6a21\u578b\uff0c\u4e3a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u63d0\u4f9b\u4e86\u8de8\u5e73\u53f0\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u652f\u6301\u3002 \u6e90\u7801\u5f00\u653e\u540e\uff0cFDBus\u671f\u5f85\u66f4\u591a\u5f00\u53d1\u8005\u7684\u4f7f\u7528\uff0c\u6d4b\u8bd5\u548c\u6539\u8fdb\uff0c\u6210\u4e3a\u4f17\u591a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u7684\u9009\u9879\u4e4b\u4e00\u3002","title":"Fast Distributed Bus"},{"location":"FDBus/#fast-distributed-bus","text":"FDBus \uff1a \u9ad8\u901f\u5206\u5e03\u5f0f\u603b\u7ebf\u4ee5\u53ca\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6 \u7b80\u4ecb || Repo","title":"Fast Distributed Bus"},{"location":"FDBus/#_1","text":"\u672c\u6587\u63cf\u8ff0\u4e86\u4e00\u79cd\u65b0\u578bIPC\u673a\u5236\uff1a Fast Distributed Bus(FDBus) \u3002\u4ece IPC(Inter-Process Communication) \u89d2\u5ea6\uff0c FDBus \u548c\u5e7f\u6cdb\u4f7f\u7528\u7684 D-Bus(Desktop Bus) \u6709\u7c7b\u4f3c\u4e4b\u5904\uff0c\u4f46\u662f FDBus \u5177\u6709\u81ea\u8eab\u4f18\u52bf\uff0c\u529f\u80fd\u66f4\u9f50\u5168\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u4f7f\u7528\u66f4\u4fbf\u5229\uff0c\u9664\u4e86\u652f\u6301\u4e3b\u673a\u5185\u7684IPC\uff0c\u8fd8\u80fd\u5728\u591a\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7ec4\u7f51\uff0c\u540c\u65f6\u53ef\u4ee5\u5b9a\u5236\u5b89\u5168\u7b56\u7565\uff0c\u652f\u6301\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\u3002FDBus\u6784\u7b51\u4e8e socket(Unix domain\u548cTCP) \u4e4b\u4e0a\uff0c\u91c7\u7528 Google protobuf \u505a\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002 FDBus \u652f\u6301\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u540d\u5b57\u4f5c\u4e3a server \u5730\u5740\uff0c\u901a\u8fc7 name server \u81ea\u52a8\u4e3a server \u5206\u914d Unix domain \u5730\u5740\u548c TCP \u7aef\u53e3\u53f7\uff0c\u5b9e\u73b0 client \u548c server \u4e4b\u95f4\u7528\u670d\u52a1\u540d\u5b57\u5bfb\u5740\u3002 FDBus \u65e8\u5728\u4e3a client-server \u4e4b\u95f4\u63d0\u4f9b\u9762\u5411\u8fde\u63a5\uff0c\u4f38\u7f29\u6027\u5f3a\uff0c\u7a33\u5b9a\u53ef\u9760\u7684IPC\u673a\u5236\uff0c\u8fdb\u800c\u53d1\u5c55\u6210\u4e00\u5957\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u7528\u4e8e\u5f00\u53d1\u8de8\u5e73\u53f0(Windows\uff0cQNX\uff0cLinux)\uff0c\u591a\u7ebf\u7a0b/\u591a\u8fdb\u7a0b\u534f\u540c\u5de5\u4f5c\u7684\u4e2d\u95f4\u4ef6\u5c42\u3002FDBus\u5f00\u53d1\u6846\u67b6\u9002\u7528\u4e8e\u5728\u5b9a\u5236\u7cfb\u7edf\u4e0a\u5f00\u53d1\u4ea4\u4e92\u590d\u6742\u7684\u5206\u5e03\u5f0f\u9879\u76ee\uff0c\u5305\u62ec\uff1a \u57fa\u4e8eLinux\u7684\u8f66\u8f7dECU\uff0c\u5305\u62ec\u4eea\u8868\uff0c\u5a31\u4e50\u4e3b\u673a\uff0cTBox\uff0c\u81ea\u52a8\u9a7e\u9a76\u57df\u63a7\u5236\u5668 Hypervisors\u4e0a\u591a\u4e2aGuest OS\u4e4b\u95f4\u7684\u901a\u4fe1 \u4e3aAndroid\u7cfb\u7edf\u63d0\u4f9b\u8de8\u4e3b\u673a\u7684IPC\u673a\u5236 \uff08\u76ee\u524d\u4e0d\u652f\u6301Java API\uff09 \u57fa\u4e8eLinux\u7684\u5c0f\u578b\u901a\u4fe1\u8bbe\u5907\uff0c\u4f8b\u5982\u5bb6\u7528\u8def\u7531\u5668 \u5176\u5b83\u57fa\u4e8eLinux\u7684\u5de5\u63a7\u8bbe\u5907\uff0c\u667a\u80fd\u8bbe\u5907 \u57fa\u4e8eWindows\u5f00\u53d1\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u8bbe\u5907","title":"\u6458\u8981"},{"location":"FDBus/#_2","text":"\u4e0d\u50cf\u5176\u5b83\u5185\u6838\uff0cLinux\u4e00\u76f4\u6ca1\u6709\u81ea\u5df1\u72ec\u7279\u4e14\u597d\u7528\u7684IPC\u673a\u5236\u3002Windows\uff0cMac OS\uff0cQNX\u90fd\u6709\u8fd9\u6837\u7684\u673a\u5236\uff0c\u5373\u4fbf\u662f\u57fa\u4e8eLinux\u7684Android\u4e5f\u6709\u7528\u4f5cIPC\u7684binder\u7cfb\u7edf\u3002Linux\u5185\u6838\u63d0\u4f9b\u7684\u53ea\u662f\u4e00\u4e9b\u6700\u57fa\u7840\u7684\u7ec4\u4ef6-socket\uff0cpipe\uff0cmessage queue\uff0cshared memory\u3002\u8fd9\u4e5f\u7b26\u5408Linux\u7684\u7406\u5ff5\uff1a\u6bcf\u4e2a\u5de5\u5177\u53ea\u505a\u4e00\u4ef6\u4e8b\uff0c\u628a\u5b83\u505a\u597d\u3002\u4f46\u662f\u73b0\u5b9e\u7684\u7cfb\u7edf\u975e\u5e38\u590d\u6742\uff0c\u53ea\u505a\u4e00\u4ef6\u4e8b\u8fdc\u4e0d\u80fd\u89e3\u51b3\u73b0\u5b9e\u4e2d\u9047\u5230\u7684\u95ee\u9898\uff0c\u66f4\u4e0d\u8981\u8bf4\u4ea7\u54c1\u5f00\u53d1\u548c\u5927\u578b\u5546\u7528\u9879\u76ee\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8ba2\u9605-\u5e7f\u64ad\u662f\u4e00\u4e2a\u6700\u57fa\u672c\u7684\u901a\u4fe1\u9700\u6c42\uff0c\u4f46\u6ca1\u6709\u4e00\u4e2a\u57fa\u7840\u7ec4\u4ef6\u80fd\u591f\u6ee1\u8db3\u3002 Linux\u5b9e\u9645\u4e0a\u4e5f\u6709\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684IPC\u2014\u2014D-Bus\u3002\u5b83\u6709\u5b8c\u5584\u7684\u65b9\u6cd5\u8c03\u7528\u8bf7\u6c42-\u56de\u590d\u673a\u5236\u548c\u4e8b\u4ef6\u5e7f\u64ad\u673a\u5236\uff1b\u5b83\u8fd8\u5305\u542b\u4e00\u4e9b\u8bf8\u5982\u5b89\u5168\u7b56\u7565\u548c\u670d\u52a1\u6309\u9700\u542f\u52a8\u4e4b\u7c7b\u7684\u9ad8\u7ea7\u529f\u80fd\u3002\u4f46\u5bf9\u5b83\u6700\u5927\u7684\u4e89\u8bae\u662f\u6027\u80fd\uff1a\u5b83\u7684\u6027\u80fd\u975e\u5e38\u4f4e\uff0c\u7531\u4e8e\u8981\u7ecfdaemon\u4e2d\u8f6c\uff0c\u4e00\u4e2a\u8bf7\u6c42-\u56de\u590d\u9700\u8981\u6765\u56de\u590d\u5236\u5341\u6b21\u6d88\u606f\uff0c\u56db\u6b21\u6d88\u606f\u9a8c\u8bc1\uff0c\u4ee5\u53ca\u56db\u6b21\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u56e0\u6b64\u5b83\u53ea\u80fd\u7528\u4e8e\u5904\u7406\u5b9e\u65f6\u8981\u6c42\u8f83\u4f4e\uff0c\u6570\u636e\u91cf\u8f83\u5c0f\u7684\u63a7\u5236\u547d\u4ee4\u548c\u6d88\u606f\u4f20\u9012\uff0c\u5426\u5219\u8fd8\u662f\u5f97\u6c42\u52a9\u4e8e\u57fa\u7840IPC\u6846\u67b6\u3002\u4e3a\u6b64\u6709\u4eba\u5c06D-Bus\u5199\u8fdb\u5185\u6838\uff0c\u4ea7\u751f\u4e86KDBus\uff0c\u867d\u7136\u6027\u80fd\u4e0a\u5f97\u5230\u63d0\u5347\uff0c\u4f46\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff0c\u53ea\u80fd\u5728\u5355\u673a\u4e0a\u8fd0\u884c\uff0c\u4e0d\u652f\u6301\u8de8\u4e3b\u673a\u3002\u8fd9\u6837\u7684\u8bddAndroid\u7684Binder\u5c31\u591f\u4e86\uff0c\u51b5\u4e14Binder\u5df2\u7ecf\u88ab\u5185\u6838\u63a5\u53d7\u4e86\uff0cKDBus\u81f3\u4eca\u8fd8\u6ca1\u201c\u8f6c\u6b63\u201d\u3002\u53e6\u5916\uff0c\u65e0\u8bba\u662fDBus\u8fd8\u662fKDBus\uff0c\u63d0\u4f9b\u8fd8\u662f\u57fa\u7840API\uff0c\u79bb\u201c\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u201d\u8fd8\u6709\u8f83\u5927\u5dee\u8ddd\u3002\u4f46\u5404\u884c\u4e1a\u5305\u62ec\u8f66\u8f7d\u9886\u57df\u5bf9\u6b64\u90fd\u6709\u8d8a\u6765\u8d8a\u5f3a\u70c8\u9700\u6c42\uff0c\u4ece\u800c\u5404\u79cd\u5404\u6837\u7684DBus\u5c01\u88c5\u968f\u4e4b\u4ea7\u751f\uff1aQt DBus\uff0cgDBus\uff0ccommonAPI\uff0cDBus-C++... \u8fd9\u4e9b\u5c01\u88c5\u6216\u8005\u4ece\u5c5e\u4e8e\u5927\u6846\u67b6\uff0c\u6216\u8005\u7f3a\u5c11\u7ef4\u62a4\uff0c\u603b\u4e4b\u4f7f\u7528\u8d77\u6765\u5e76\u4e0d\u53cb\u597d\u3002 \u5728Linux\u4ee5\u53ca\u4ee5\u592a\u7f51\u4f7f\u7528\u8d8a\u6765\u8d8a\u5e7f\u6cdb\u7684\u8f66\u8f7d\u9886\u57df\uff0c\u7f3a\u4e4f\u5408\u9002\u7684IPC\u9010\u6e10\u6210\u4e3a\u7a81\u51fa\u95ee\u9898\uff1a\u516c\u53f8\u539f\u6765\u81ea\u521b\u7684IPC\u673a\u5236\u7531\u4e8e\u6280\u672f\u843d\u540e\uff0c\u5b9a\u5236\u75d5\u8ff9\u660e\u663e\uff0c\u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u5206\u5e03\u5f0f\uff0c\u9ad8\u6027\u80fd\uff0c\u4f38\u7f29\u6027\u8981\u6c42\uff0c\u5374\u53c8\u65e0\u6cd5\u4e3a\u65b0\u5e73\u53f0\u627e\u5230\u5408\u9002\u7684IPC\u673a\u5236\uff0c\u66f4\u522b\u8bf4\u57fa\u4e8eIPC\u673a\u5236\u884d\u751f\u51fa\u7684\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u3002\u4ee5\u592a\u7f51\u5728\u8f66\u8f7d\u7684\u5e94\u7528\u50ac\u751f\u4e86SOME/IP\uff08Scalable service-Oriented MiddlewarE over IP\uff09\u3002SOME/IP\u540c\u6837\u662f\u4e00\u5957\u6bd4\u8f83\u5b8c\u5584\u7684IPC\u89c4\u8303\uff0c\u751a\u81f3\u662f\u4e13\u95e8\u4e3a\u8f66\u8f7d\u9886\u57df\u5f00\u53d1\u7684\u3002\u4f46\u662f\u5c31\u5982\u540d\u5b57\u91cc\u6697\u793a\u7684\uff0c\u5b83\u662f\u57fa\u4e8eIP\u5c42\u7684\uff0c\u5728\u5355\u673a\u4e0a\u6027\u80fd\u5e76\u4e0d\u597d\u3002\u4e14SOME/IP\u5f00\u6e90\u7684\u5b9e\u73b0\u4e5f\u5f88\u5c11\uff0cGENIVI\u7ec4\u7ec7\u8d21\u732e\u4e86vsomeip\uff0c\u4f46\u6d3b\u8dc3\u5ea6\u975e\u5e38\u4f4e\uff0cGENIVI\u672c\u8eab\u5c31\u662f\u4e2a\u677e\u6563\u7684\u7ec4\u7ec7\uff0c\u53c2\u4e0e\u8005\u591a\uff0c\u5f00\u53d1\u8005\u5c11\u3002\u4e0d\u50cfDBus\uff0cSOME/IP\u662f\u4e3a\u8f66\u8f7d\u6253\u9020\uff0c\u5e94\u7528\u8303\u56f4\u5f88\u7a84\uff0c\u4e0d\u53ef\u80fd\u6307\u671b\u6709\u4e00\u4e2a\u6d3b\u8dc3\u7684\u793e\u533a\u805a\u96c6\u4e00\u7fa4\u4e13\u4e1a\u7684\u7a0b\u5e8f\u5458\u6765\u7ef4\u62a4\u5f00\u653e\u7684\u6e90\u7801\u3002\u6700\u540e\u5f88\u53ef\u80fd\u7684\u60c5\u51b5\u662f\uff0c\u4e0d\u5f97\u4e0d\u82b1\u94b1\u8d2d\u4e70\u95ed\u6e90\u8f6f\u4ef6\u3002 FDBus\u5c31\u662f\u4e3a\u89e3\u51b3\u4ee5\u4e0a\u5404\u79cd\u95ee\u9898\u800c\u5f00\u53d1\u7684\uff0c\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5206\u5e03\u5f0f\uff1a\u57fa\u4e8eTCP socket\u548cUnix Domain socket\uff08UDS\uff09\uff0c\u65e2\u53ef\u7528\u4e8e\u672c\u5730IPC\uff0c\u4e5f\u652f\u6301\u7f51\u7edc\u4e3b\u673a\u4e4b\u95f4\u7684IPC \u8de8\u5e73\u53f0\uff1a\u76ee\u524d\u5df2\u5728Windows\uff0cLinux\u548cQNX\u4e0a\u9a8c\u8bc1 \u9ad8\u6027\u80fd\uff1a\u70b9\u5bf9\u70b9\u76f4\u63a5\u901a\u4fe1\uff0c\u4e0d\u901a\u8fc7\u4e2d\u592eHub\u6216Broker\u8f6c\u53d1 \u670d\u52a1\u540d\u89e3\u6790\uff1aserver\u5730\u5740\u7528\u540d\u5b57\u6807\u8bc6\uff0c\u901a\u8fc7name server\u6ce8\u518c\u670d\u52a1\u548c\u89e3\u6790\u540d\u5b57\uff0c\u4ece\u800cserver\u53ef\u4ee5\u5728\u5168\u7f51\u7edc\u4efb\u610f\u90e8\u7f72 \u652f\u6301\u8de8\u5e73\u53f0\u7684\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u5305\u62ec\u5982\u4e0b\u7ec4\u4ef6\uff1a Thread\u6a21\u578b Event Loop \u57fa\u4e8eJob-Worker\u7684\u7ebf\u7a0b\u95f4\u901a\u4fe1 \u57fa\u4e8eEvent Loop\u7684Timer \u57fa\u4e8eEvent Loop\u7684watch Mutex Semaphore Socket Notification IPC\u91c7\u7528Client-Server\u6a21\u5f0f\uff0c\u652f\u6301\u5982\u4e0b\u901a\u4fe1\u6a21\u5f0f\uff1a \u5e26\u8d85\u65f6\u7684\u540c\u6b65\u8bf7\u6c42-\u7b54\u590d \u5e26\u8d85\u65f6\u7684\u5f02\u6b65\u8bf7\u6c42-\u7b54\u590d \u65e0\u7b54\u590d\u7684\u547d\u4ee4\u8bf7\u6c42 \u6ce8\u518c-\u53d1\u5e03\u6a21\u5f0f\uff0c\u5b9e\u73b0\u591a\u70b9\u5e7f\u64ad IPC\u6d88\u606f\u91c7\u7528Protocol buffer\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u652f\u6301IDL\u4ee3\u7801\u751f\u6210\uff0c\u9ad8\u6548\u7b80\u4fbf\uff1b\u4e5f\u652f\u6301raw data\u683c\u5f0f\uff0c\u4fbf\u4e8e\u5927\u91cf\u6570\u636e\u4f20\u8f93 \u53ef\u9760\u7684\u5fc3\u8df3\u548c\u91cd\u8fde\u673a\u5236\uff0c\u786e\u4fdd\u65e0\u8bba\u7f51\u7edc\u72b6\u51b5\u5982\u4f55\uff0c\u65e0\u8bba\u54ea\u4e2a\u670d\u52a1\u91cd\u65b0\u4e0a\u7ebf\u6216\u91cd\u542f\uff0c\u901a\u4fe1\u5404\u65b9\u90fd\u80fd\u4fdd\u6301\u8fde\u63a5 C++\u5b9e\u73b0\uff0c\u6613\u4e8e\u5f00\u53d1\u548c\u7ef4\u62a4","title":"\u80cc\u666f\u4ecb\u7ecd"},{"location":"FDBus/#_3","text":"\u5e95\u5c42 \u6027\u80fd \u540c\u6b65\u8bf7\u6c42 \u5f02\u6b65\u8bf7\u6c42 \u8bf7\u6c42\u8d85\u65f6 FDBus Socket \u70b9\u5bf9\u70b9\uff0c\u6027\u80fd\u9ad8\uff0c\u4ec5\u6b21\u4e8eBinder \u652f\u6301 \u652f\u6301 \u652f\u6301 GDBus Socket \u901a\u8fc7daemon\u8f6c\uff0c\u6027\u80fd\u8f83\u4f4e \u652f\u6301 \u652f\u6301 \u652f\u6301 Binder Binder driver \u76f4\u63a5\u62f7\u8d1d\uff0c\u6027\u80fd\u6700\u9ad8 \u652f\u6301 \u80fd\u652f\u6301\uff0c\u4f46\u9700\u8981\u5c01\u88c5 \u80fd\u652f\u6301\uff0c\u4f46\u9700\u8981\u5c01\u88c5","title":"\u4e3b\u6d41\u6846\u67b6\u5bf9\u6bd4"},{"location":"FDBus/#fdbus","text":"\u4e2d\u95f4\u4ef6\u5c42\u5305\u542b\u591a\u4e2a\u8fdb\u7a0b\uff0c\u65e0\u8bba\u8fd9\u4e9b\u8fdb\u7a0b\u4f4d\u4e8e\u540c\u4e00\u4e3b\u673a\u7cfb\u7edf\u8fd8\u662f\u4e0d\u540c\u4e3b\u673a\u7cfb\u7edf\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff0c FDBus\u7684\u7ebf\u7a0b\u8fd0\u884c\u7279\u5b9a\u7684\u4e8b\u4ef6\u5faa\u73af(event loop)\uff0c\u5c06\u901a\u7528\u7684\u7ebf\u7a0b\u589e\u5f3a\u4e3a\u80fd\u591f\u6267\u884cjob\uff0ctimer\u548cwatch\u7684worker\u7ebf\u7a0b \u3002FDBus\u7684\u901a\u4fe1\u53cc\u65b9\uff1aclient\u548cserver\u7edf\u79f0\u4e3aendpoint\u3002endpoint\u53ef\u4ee5\u90e8\u7f72\u5728\u4e0d\u540c\u7684worker\u4e0a\uff1b\u591a\u4e2aendpoint\u4e5f\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2aworker\u3002 endpoint\u90e8\u7f72\u5728worker\u662f\u6307endpoint\u7684\u4e8b\u4ef6\u5904\u7406\u5728\u8be5worker\u4e0a\u6267\u884c\uff0c\u4f8b\u5982server\u5728\u6307\u5b9a\u7684worker\u4e0a\u5904\u7406client\u8bf7\u6c42\uff1bclient\u5728\u6307\u5b9a\u7684worker\u4e0a\u5904\u7406server\u7684\u4e8b\u4ef6\u5e7f\u64ad\u3002\u4e2d\u95f4\u4ef6\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u7528\u4e00\u4e2aworker\u6765\u5904\u7406\u591a\u4e2aendpoint\u7684\u4e8b\u4ef6\uff0c\u907f\u514d\u6d88\u8017\u8fc7\u591a\u7ebf\u7a0b\uff0c\u66f4\u53ef\u4ee5\u907f\u514d\u591a\u7ebf\u7a0b\u5e26\u6765\u7684\u201c\u5e76\u53d1\u707e\u96be\u201d\u3002\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u7528\u591a\u4e2aworker\u4e3a\u4e00\u4e2aendpoint\u670d\u52a1\uff0c\u4f8b\u5982endpoint\u53ef\u4ee5\u521b\u5efa\u5de5\u4f5c\u7ebf\u7a0b\u5b8c\u6210\u8017\u65f6\u7684\u6587\u4ef6\u4e0b\u8f7d\uff0c\u89c6\u9891\u7f16\u89e3\u7801\uff0c\u5916\u8bbeIO\u7b49\u64cd\u4f5c\u3002 \u591a\u7ebf\u7a0b\u534f\u540c\u5de5\u4f5c\u8981\u6c42\u7ebf\u7a0b\u4e4b\u95f4\u80fd\u591f\u4f20\u9012\u6d88\u606f\u548c\u6570\u636e\uff0c\u4f8b\u5982\u6587\u4ef6\u4e0b\u8f7d\u5b8c\u6bd5\u8981\u901a\u77e5endpoint\u505a\u540e\u7eed\u5904\u7406\u3002\u5728\u8fdb\u7a0b\u5185\u7531\u4e8e\u53ef\u4ee5\u8bbf\u95ee\u540c\u4e00\u5730\u5740\u7a7a\u95f4\uff0c\u6700\u597d\u7684\u901a\u4fe1\u8f7d\u4f53\u662f\u5bf9\u8c61\uff0c\u65e2\u80fd\u627f\u8f7d\u6570\u636e\uff0c\u8fd8\u80fd\u6307\u5b9a\u6570\u636e\u7684\u5904\u7406\u65b9\u5f0f\u3002job\u5c31\u662fFDBus\u5728\u7ebf\u7a0b\u4e4b\u95f4\u4f20\u9012\u7684\u5bf9\u8c61\uff0c\u901a\u8fc7job\u5728\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4f20\u9012\u548c\u6267\u884c\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002 FDBus\u66f4\u91cd\u8981\u7684\u529f\u80fd\u662f\u8fdb\u7a0b\u95f4\u901a\u4fe1(IPC)\u3002\u8fdb\u7a0b\u4e4b\u95f4\u65e0\u6cd5\u76f4\u63a5\u4f20\u9012\u5bf9\u8c61\uff0c\u53ea\u80fd\u4ee5\u6d88\u606f\u5f62\u5f0f\u4ea4\u4e92\uff0c\u5e76\u4e14\u6d88\u606f\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u9700\u8981\u505a\u5e8f\u5217\u5316\uff0c\u63a5\u6536\u5230\u6d88\u606f\u540e\u9700\u8981\u505a\u53cd\u5e8f\u5217\u5316\u3002\u6bcf\u79cdIPC\u673a\u5236\uff0c\u5305\u62ecBinder\uff0cSOME/IP\uff0cDBus\uff0c\u90fd\u6709\u81ea\u5df1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\u3002\u5e8f\u5217\u5316\u65b9\u5f0f\u7684\u597d\u574f\u76f4\u63a5\u5f71\u54cd\u5230\u901a\u4fe1\u6548\u7387\uff0c\u8d1f\u8f7d\uff0c\u5bf9\u6570\u636e\u7ed3\u6784\u7684\u652f\u6301\u7a0b\u5ea6\u4ee5\u53ca\u4f7f\u7528\u7684\u4fbf\u5229\u6027\u3002FDBus\u6ca1\u6709\u81ea\u5df1\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\uff0c\u76f4\u63a5\u91c7\u7528 google protocol buffer \uff0c\u4f7f\u7528\u65b9\u4fbf\uff0c\u529f\u80fd\u9f50\u5168\uff0c\u5e76\u652f\u6301idl\u81ea\u52a8\u4ee3\u7801\u751f\u6210\u3002\u6570\u636e\u5728\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u91c7\u7528socket\uff0c\u5305\u62ecUnix Domain Socket\uff08UDS\uff09\u548cTCP socket\u3002\u5177\u4f53\u91c7\u7528\u54ea\u79cd\u7c7b\u578b\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eClient\u548cServer\u7684\u90e8\u7f72\u800c\u81ea\u52a8\u9009\u62e9\uff1a\u5982\u679c\u5728\u540c\u4e00\u4e3b\u673a\u5185\u90e8\u4f7f\u7528UDS\uff0c\u5426\u5219\u4f7f\u7528TCP socket\u3002\u5bf9\u4e8eWindows\uff0c\u7531\u4e8e\u4e0d\u652f\u6301UDS\uff0c\u5168\u90e8\u91c7\u7528TCP socket\u3002","title":"\u57fa\u4e8eFDBus\u7684\u4e2d\u95f4\u4ef6\u6a21\u578b"},{"location":"FDBus/#fdbus_1","text":"","title":"FDBus\u5bfb\u5740\u548c\u7ec4\u7f51"},{"location":"FDBus/#server","text":"server\u5730\u5740\u662fserver\u5728\u7f51\u7edc\u4e2d\u7684\u6807\u8bc6\uff0c\u901a\u8fc7\u8be5\u6807\u8bc6client\u53ef\u4ee5\u627e\u5230\u6307\u5b9a\u7684server\u5e76\u4e0e\u4e4b\u5efa\u7acb\u901a\u4fe1\u3002\u524d\u9762\u63d0\u5230\uff0cFDBus\u652f\u6301UDS\u548cTCP socket\uff0c\u6bcf\u79cdsocket\u6709\u81ea\u5df1\u7684\u547d\u540d\u65b9\u5f0f\u548c\u547d\u540d\u7a7a\u95f4\u3002\u4e3a\u4e86\u7edf\u4e00FDBus\u4f7f\u7528\u5982\u4e0b\u89c4\u5219\u5b9a\u4e49Server\u5730\u5740\uff1a UDS \uff1a file://socket\u6587\u4ef6\u540d TCP socket \uff1a tcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 \u4e0d\u540c\u4e8e\u4e00\u822c\u610f\u4e49\u4e0a\u7684socket server\uff0cFDBus server\u53ef\u4ee5\u540c\u65f6\u7ed1\u5b9a\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u53ef\u63a5\u53d7client\u7684\u8fde\u63a5\u3002\u4e00\u65e6\u8fde\u63a5\u4e0a\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u63d0\u4f9b\u540c\u6837\u7684\u670d\u52a1\uff0c\u6240\u4ee5client\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u5730\u5740\u5efa\u7acb\u8fde\u63a5\u3002\u4e0b\u9762\u662f\u4e00\u4e2aFDBus server\u5730\u5740\u7ed1\u5b9a\u793a\u610f\u56fe\uff1a \u4e0a\u56fe\u4e2d\uff0cserver\u7ed1\u5b9a\u4e86\u4e00\u4e2aUDS\u5730\u5740\uff1a file:///tmp/fdb-ipc1 \u3002\u540c\u4e00\u4e3b\u673a\u4e0a\u7684client\u53ef\u4ee5\u7528\u8be5\u5730\u5740\u53d1\u8d77\u8fde\u63a5\uff0c\u5f53\u7136\u4e5f\u53ef\u8fde\u63a5\u5230\u5176\u5b83\u4efb\u610f\u5730\u5740\uff0c\u4f46\u65e0\u7591\u4f7f\u7528UDS\u662f\u6700\u9ad8\u6548\u7684\u3002\u7531\u4e8e\u4e3b\u673a\u6709\u591a\u4e2a\u7f51\u53e3\uff0cserver\u8fd8\u53ef\u4ee5\u5728\u6bcf\u4e2a\u7f51\u53e3\u4e0a\u5404\u7ed1\u5b9a\u4e00\u4e2a\u5730\u5740\uff08\u7aef\u53e3\u53f7\uff09\uff1a tcp://192.168.1.2:60004 \u548c tcp://192.168.0.1:60004 \uff0c\u6bcf\u4e2a\u5730\u5740\u7528\u4e8e\u8fde\u63a5\u5bf9\u5e94\u7f51\u6bb5\u7684client\u3002","title":"Server\u5730\u5740"},{"location":"FDBus/#server_1","text":"\u7528\u4e0a\u8ff0\u65b9\u5f0f\u5b9a\u4f4dserver\u4f7f\u7528\u4e0d\u65b9\u4fbf\uff0c\u4e0d\u76f4\u89c2\uff0c\u5730\u5740\u4f1a\u968f\u7ec4\u7f51\u65b9\u5f0f\u53d8\u5316\u800c\u6539\u53d8\uff0c\u65e0\u6cd5\u7075\u6d3b\u90e8\u7f72\u3002\u4e3a\u6b64FDBus\u589e\u52a0\u4e86\u4e00\u79cd\u5bfb\u5740\u65b9\u5f0f\uff1aserver\u540d\u5b57\u5bfb\u5740\uff0c\u6bcf\u4e2aserver\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff1b\u8fd0\u884c\u4e00\u4e2a\u53ebname server\u7684\u670d\u52a1\uff0c\u8d1f\u8d23\u4e3aserver\u5206\u914d\u5730\u5740\uff0c\u7ba1\u7406server\u540d\u5b57-\u5730\u5740\u6620\u5c04\uff0c\u89e3\u6790server\u540d\u5b57\uff0c\u53d1\u5e03server\u5730\u5740\u3002name server\u6709\u70b9\u7c7b\u4f3cinternet\u4e0a\u7684DNS\u3002\u4e3a\u652f\u6301server\u540d\u5b57\u5bfb\u5740\uff0c\u5728\u4e24\u79cdURL\u4e4b\u5916\u589e\u52a0\u4e00\u79cd\u683c\u5f0f\uff0c\u4f5c\u4e3a\u540d\u5b57\u5730\u5740\uff0c\u5982\u4e0b\u6240\u793a\uff1a svc://server\u540d\u5b57 \u540d\u5b57\u5730\u5740\u662f\u865a\u62df\u5730\u5740\u3002\u65e0\u8bbaserver\u4f4d\u4e8e\u4f55\u5904\uff0c\u53ea\u8981\u5b83\u7684\u540d\u5b57\u5730\u5740\u4e0d\u53d8\uff0cclient\u90fd\u53ef\u4ee5\u901a\u8fc7\u8be5\u5730\u5740\u4e0e\u4e4b\u5efa\u7acb\u8054\u7cfb\u3002\u5982\u679cserver\u7ed1\u5b9a\u540d\u5b57\u5730\u5740\uff0cname server\u4f1a\u4e3a\u5176\u5206\u914d\u5b9e\u9645\u5730\u5740( tcp:// \u6216 file:// \u5f00\u5934\u7684\u5730\u5740)\uff0c\u5e76\u5c06\u540d\u5b57\u548c\u5730\u5740\u6ce8\u518c\u5230\u6620\u5c04\u8868\u91cc\u3002\u5982\u679cclient\u8fde\u63a5\u540d\u5b57\u5730\u5740\uff0cname server\u4f1a\u6839\u636e\u540d\u5b57\u67e5\u627eserver\u7684\u5b9e\u9645\u5730\u5740\uff0c\u9009\u62e9\u4e00\u4e2a\u6700\u5408\u9002\u7684\u5b9e\u9645\u5730\u5740\u53d1\u5e03\u7ed9client\u3002client\u901a\u8fc7\u8be5\u5730\u5740\u4e0eserver\u5efa\u7acb\u70b9\u5bf9\u70b9\u7684\u76f4\u8fde\u3002\u4e0b\u56fe\u662f\u5728name server\u534f\u52a9\u4e0b\uff0cclient\u548cServer\u5229\u7528\u540d\u5b57\u5730\u5740\u5efa\u7acb\u8fde\u63a5\u7684\u6d41\u7a0b\uff1a \u9996\u5148client\u8c03\u7528 connect(\"svc://medisServer\") \u8981\u6c42\u548c\u540d\u53ebmediaServer\u7684server\u5efa\u7acb\u8fde\u63a5\u3002\u7531\u4e8e\u4f7f\u7528\u7684\u662f\u540d\u5b57\u5730\u5740\uff0cFDBus\u4f1a\u5411name server\u7d22\u8981mediaServer\u7684\u5b9e\u9645\u5730\u5740\u3002\u4f46\u73b0\u5728mediaServer\u8fd8\u6ca1\u6709\u4e0a\u7ebf\uff0c\u6240\u4ee5\u65e0\u6cd5\u89e3\u6790\u8be5\u540d\u5b57\uff0c\u53ea\u662f\u8ba2\u9605\u4e86\u5bf9\u8be5\u670d\u52a1\u7684\u4e0a\u7ebf\u901a\u77e5\u3002\u4e0d\u4e45\u540eserver\u8c03\u7528 bind(\"svc://mediaServer\") \u4e0a\u7ebf\uff0c\u7531\u4e8e\u4f7f\u7528\u540d\u5b57\u5730\u5740\uff0c\u540c\u6837\u4f1a\u5411name server\u53d1\u51fa\u8bf7\u6c42\u3002name server\u4e3a\u5176\u6ce8\u518c\u540d\u5b57\uff0c\u5206\u914dUDS\u548cTCP\u5730\u5740\u5e76\u8fd4\u7ed9server\u3002server\u5206\u522b\u7ed1\u5b9a\u6bcf\u4e2a\u5b9e\u9645\u5730\u5740\uff0c\u6210\u529f\u540e\u901a\u77e5name server\u3002name server\u5411\u6574\u4e2a\u7cfb\u7edf\u53d1\u5e03\u8be5server\u4e0a\u7ebf\u7684\u6d88\u606f\u4ee5\u53caserver\u5730\u5740\uff1a\u5e7f\u64ad\u7ed9\u672c\u5730client\u7684\u662fUDS\u5730\u5740\uff0c\u5e7f\u64ad\u7ed9\u5176\u5b83\u8282\u70b9\u4e0aclient\u7684\u662fTCP\u5730\u5740\u3002client\u5229\u7528\u6536\u5230\u7684\u5730\u5740\u4e0eserver\u5efa\u7acb\u8fde\u63a5\uff0c\u540c\u65f6client\u548cserver\u90fd\u80fd\u6536\u5230onOnline()\u7684\u4e8b\u4ef6\u901a\u77e5\u3002 name server \u4f7f\u7528\u5982\u4e0b\u89c4\u5219\u5206\u914dserver\u5730\u5740\uff1a Server TCP Address UDS Address host server port No. 61000 /tmp/fdb-hs name server port No. 61001 /tmp/fdb-ns user servers Port 61002 \u2013 Port 65535 \u6216 \u7cfb\u7edf\u81ea\u52a8\u5206\u914d /tmp/fdb-ipc0, /tmp/fdb-ipc1 \u2026","title":"Server\u547d\u540d\u548c\u5730\u5740\u5206\u914d"},{"location":"FDBus/#_4","text":"\u7531\u4e8ename server\u7684\u5730\u5740\u662f\u56fa\u5b9a\u7684\uff0cendpoint\u542f\u52a8\u540e\uff0c\u4f1a\u81ea\u52a8\u8fde\u63a5name server\u6ce8\u518c(server)\u6216\u89e3\u6790\u540d\u5b57(client)\u3002\u5982\u679c\u6709\u591a\u53f0\u4e3b\u673a\uff0c\u6bcf\u53f0\u4e3b\u673a\u4e0a\u8fd0\u884c\u81ea\u5df1\u7684name server\uff0c\u8d1f\u8d23\u5404\u81ea\u7684\u540d\u5b57\u670d\u52a1\uff0c\u90a3\u4e48\u8fd9\u4e9b\u4e3b\u673a\u5c31\u6210\u4e86\u5b64\u5c9b\uff0c\u65e0\u6cd5\u901a\u8fc7 svc://server_name \u7684\u65b9\u5f0f\u4e92\u76f8\u8fde\u63a5\u3002\u5f53\u7136client\u53ef\u4ee5\u7ed5\u5f00name server\uff0c\u7528\u5b9e\u9645\u5730\u5740\u76f4\u63a5\u8fde\u63a5\u4e0aserver\uff0c\u4f46\u8fd9\u6837\u65e0\u6cd5\u7075\u6d3b\u90e8\u7f72\u548c\u7ec4\u7f51\u3002\u4e3a\u4e86\u652f\u6301\u8de8\u7f51\u7edc\u7684\u540d\u5b57\u670d\u52a1\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u670d\u52a1\u7ba1\u7406\u7cfb\u7edf\u91cc\u6240\u6709\u4e3b\u673a\uff0c\u628a\u4e3b\u673a\u4fe1\u606f\u540c\u6b65\u7ed9\u6240\u6709name server\uff0c\u8fdb\u800c\u8fd9\u4e9bname server\u4e4b\u95f4\u53ef\u4ee5\u5efa\u7acb\u8fde\u63a5\uff0c\u534f\u540c\u5de5\u4f5c\uff0c\u5171\u540c\u5b8c\u6210\u5168\u7f51\u7edc\u7684\u540d\u5b57\u670d\u52a1\u3002\u8fd9\u4e2a\u670d\u52a1\u5c31\u662fhost server\u3002 host server\u7684\u5de5\u4f5c\u539f\u7406\u662f\uff1a\u6574\u4e2a\u7f51\u7edc\u8fd0\u884c\u4e00\u4e2ahost server\uff0c\u53ef\u4ee5\u4f4d\u4e8e\u4efb\u610f\u4e00\u53f0\u5927\u5bb6\u90fd\u80fd\u8bbf\u95ee\u7684\u4e3b\u673a\u4e0a\u3002\u6240\u6709\u4e3b\u673a\u7684name server\u90fd\u8fde\u63a5\u5230host server\uff0c\u6ce8\u518c\u81ea\u5df1\u6240\u5728\u7684\u4e3b\u673a\u3002host server\u7ef4\u62a4\u4e00\u5f20\u5305\u542b\u5404\u4e3b\u673aip\u5730\u5740\u7684\u4e3b\u673a\u5217\u8868\uff0c\u5e76\u628a\u8be5\u8868\u540c\u6b65\u7ed9\u7f51\u7edc\u91cc\u6240\u6709\u7684name server\u3002name server\u6839\u636e\u8be5\u8868\u4e0e\u6240\u6709\u4e3b\u673a\u4e0a\u7684name server\u5efa\u7acb\u8fde\u63a5\u3002 \u4e00\u65e6\u6240\u6709\u4e3b\u673a\u4e0a\u7684name server\u90fd\u4e24\u4e24\u5efa\u7acb\u8fde\u63a5\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e00\u5957\u5185\u90e8\u534f\u8bae\u5b8c\u6210\u8de8\u4e3b\u673a\u7684\u670d\u52a1\u540d\u89e3\u6790\u548c\u670d\u52a1\u4e0a\u7ebf\u901a\u77e5\u3002\u4f8b\u5982\u5f53\u4e00\u53f0\u4e3b\u673a\u4e0a\u7684client\u5411\u672c\u5730name server\u8bf7\u6c42\u89e3\u6790\u670d\u52a1\u540d\u5bf9\u5e94\u7684\u5730\u5740\uff0c\u672c\u5730name server\u53ef\u4ee5\u628a\u8be5\u8bf7\u6c42\u5e7f\u64ad\u7ed9\u6240\u6709\u76f8\u8fde\u7684name server\uff0c\u5728\u6574\u4e2a\u7f51\u7edc\u8303\u56f4\u5185\u67e5\u627e\u670d\u52a1\u3002\u4e0b\u9762\u662f\u6574\u4e2a\u7cfb\u7edf\u7ec4\u7f51\u793a\u4f8b\u56fe\uff1a \u4e0a\u56fe\u4e2d\uff0cname server\u548chost server\u4e4b\u95f4\u5efa\u7acb\u661f\u5f62\u8fde\u63a5\uff0cname server\u548cname server\u4e4b\u95f4\u4e24\u4e24\u76f8\u8fde\uff0c\u7ec4\u6210\u4e00\u5f20\u7f51\u3002\u5728\u8fd9\u4e2a\u7cfb\u7edf\u91cc\uff0cname server\u548chost server\u7684\u4e3b\u8981\u4efb\u52a1\u662f\uff1a name server\u8fde\u63a5\u5230host server\uff0c\u628a\u6240\u5728\u7684\u4e3b\u673a\u6ce8\u518c\u8fdbhost server host server\u6536\u96c6\u6240\u6709\u4e3b\u673a\u4fe1\u606f\uff0c\u5f62\u6210\u4e3b\u673a\u5730\u5740\u8868 host server\u628a\u4e3b\u673a\u5730\u5740\u8868\u5e7f\u64ad\u7ed9\u6240\u6709name server name server\u4ece\u8868\u4e2d\u83b7\u5f97\u5176\u5b83\u4e3b\u673a\u4e0aname server\u7684\u5730\u5740\uff0c\u5e76\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5 \u6240\u6709server\u4e0e\u672c\u5730name server\u76f8\u8fde\uff0c\u5411\u5176\u6ce8\u518c\u670d\u52a1\u540d\u5b57\u3002\u672c\u5730name server\u5c06\u65b0\u6ce8\u518c\u7684\u670d\u52a1\u5e7f\u64ad\u7ed9\u672c\u5730\u7684client\u4ee5\u53ca\u7f51\u7edc\u91cc\u6240\u6709\u5176\u5b83\u7684name server \u5176\u5b83name server\u6536\u5230\u8be5\u5e7f\u64ad\u540e\uff0c\u540c\u6837\u5728\u672c\u5730\u505a\u4e00\u4e2a\u5e7f\u64ad\uff0c\u901a\u77e5\u7ed9\u6240\u6709client\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u628a\u670d\u52a1\u4e0a\u7ebf\u7684\u6d88\u606f\u6269\u6563\u5230\u6574\u4e2a\u7f51\u7edc \u6240\u6709client\u4e0e\u672c\u5730name server\u76f8\u8fde\uff0c\u7533\u8bf7\u670d\u52a1\u540d\u5b57\u89e3\u6790\u3002\u672c\u5730name server\u641c\u7d22\u81ea\u8eab\u7684server\u5730\u5740\u6620\u5c04\u8868\uff0c\u540c\u65f6\u628a\u7533\u8bf7\u53d1\u9001\u7ed9\u5176\u5b83\u6240\u6709name server \u5176\u5b83name server\u6536\u5230\u7533\u8bf7\u540e\uff0c\u641c\u7d22\u5404\u81ea\u7684server\u5730\u5740\u6620\u5c04\u8868\uff0c\u5e76\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u53d1\u8d77\u7533\u8bf7\u7684name server name server\u628a\u6536\u5230\u7684\u8fd4\u56de\u7ed3\u679c\u8f6c\u53d1\u7ed9\u53d1\u8d77\u7533\u8bf7\u7684client\uff0cclient\u5229\u7528\u7ed3\u679c\u91cc\u7684\u5b9e\u9645\u5730\u5740\u4e0e\u670d\u52a1\u5efa\u7acb\u76f4\u8fde\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u627e\u5230\u6240\u6709\u4e3b\u673a\u4e0a\u7684\u670d\u52a1 \u4ece\u4e0a\u56fe\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u4e00\u65e6client\u548cserver\u4e4b\u95f4\u5efa\u7acb\u8fde\u63a5\uff0c\u6240\u6709\u7684\u901a\u4fe1\u90fd\u901a\u8fc7\u8fd9\u4e2a\u8fde\u63a5\u5b8c\u6210\uff0c\u65e0\u9700\u7ecf\u8fc7\u4e2d\u95f4\u73af\u8282\u8f6c\u53d1\u3002","title":"\u591a\u4e3b\u673a\u7ec4\u7f51"},{"location":"FDBus/#_5","text":"\u7531\u4e8e\u6bcf\u53f0\u4e3b\u673a\u90fd\u6709\u81ea\u5df1\u7684name server\uff0c\u6240\u4ee5\u5728\u4e3b\u673a\u5185\u90e8\uff0c\u670d\u52a1\u4e0d\u80fd\u91cd\u540d\uff0c\u4f46\u662f\u5728\u4e0d\u540c\u4e3b\u673a\u4e0a\u53ef\u4ee5\u91cd\u540d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53client\u7533\u8bf7\u540d\u5b57\u89e3\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u6536\u5230\u6765\u81ea\u4e0d\u540c\u4e3b\u673a\u53cd\u9988server\u4fe1\u606f\u3002client\u53ef\u4ee5\u5b9a\u5236\u8fde\u63a5\u7b56\u7565\uff1a\u603b\u662f\u8fde\u63a5\u8fde\u63a5\u65b0\u7684server\uff0c\u53ea\u8fde\u63a5\u7b2c\u4e00\u4e2aserver\uff0c\u6216\u662f\u53ea\u8fde\u63a5\u6307\u5b9a\u7684server\u3002","title":"\u670d\u52a1\u540d\u5b57\u7684\u552f\u4e00\u6027"},{"location":"FDBus/#_6","text":"\u4e3a\u4e86\u4f7f\u6574\u4e2a\u7cfb\u7edf\u53ef\u9760\u8fd0\u884c\uff0c\u4fdd\u8bc1\u4efb\u4f55\u670d\u52a1\u90fd\u53ef\u4ee5\u4f18\u96c5\u91cd\u542f\uff08\u91cd\u542f\u540e\u6574\u4e2a\u7cfb\u7edf\u5de5\u4f5c\u6b63\u5e38\uff09\uff0cFDBus\u6709\u5b8c\u5584\u7684\u5fc3\u8df3\u68c0\u6d4b\u548c\u4e0a\u7ebf\u3001\u79bb\u7ebf\u68c0\u6d4b\u673a\u5236\uff1a endpoints \u548c name server \u4e4b\u95f4\u6709\u91cd\u8fde\u673a\u5236\uff0c\u786e\u4fddname server\u91cd\u542f\u540eendpoint\u603b\u662f\u80fd\u591f\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5 name server \u548c host server \u4e4b\u95f4\u6709\u5fc3\u8df3\u68c0\u6d4b\uff1b\u4e00\u65e6\u5fc3\u8df3\u6d88\u5931\uff0cname server\u4f1a\u5c1d\u8bd5\u4e0ehost server\u91cd\u8fde\uff0c\u786e\u4fddname server\u4e0ehost server\u4e4b\u95f4\u8fde\u63a5\u7684\u53ef\u9760\u6027 name server \u548c name server \u4e4b\u95f4\u7684\u8fde\u63a5\u5efa\u7acb\u7531 host server \u6765\u4fdd\u8bc1\uff1a\u5f53name server\u4e0a\u7ebf\u65f6\uff0chost server\u4f1a\u901a\u77e5\u6240\u6709\u5176\u5b83name server\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5\uff0c\u4e5f\u4f1a\u901a\u77e5\u8be5name server\u4e0e\u6240\u6709\u5176\u5b83name server\u5efa\u7acb\u8fde\u63a5 client \u548c server \u4e4b\u95f4\u7684\u8fde\u63a5\u5efa\u7acb\u7531 name server \u6765\u4fdd\u8bc1\uff1aserver\u4e0a\u7ebf\u65f6\uff0cname server\u4f1a\u901a\u77e5client\u4e0e\u4e4b\u5efa\u7acb\u8fde\u63a5","title":"\u5fc3\u8df3\u68c0\u6d4b\uff0c\u91cd\u8fde\u548c\u4e0a\u7ebf\u3001\u79bb\u7ebf\u68c0\u6d4b"},{"location":"FDBus/#security","text":"\u968f\u7740\u7cfb\u7edf\u8d8a\u6765\u8d8a\u590d\u6742\u548c\u5f00\u653e\uff0c\u5b89\u5168\u6027\u5df2\u7ecf\u6210\u4e3a\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u65f6\u5173\u6ce8\u7684\u7126\u70b9\u3002\u4e00\u4e2a\u5f00\u653e\u7684\u7cfb\u7edf\u610f\u5473\u7740\u53ef\u80fd\u5b58\u5728\u5165\u4fb5\u8005\uff0c\u4e00\u65e6\u5165\u4fb5\u8005\u8bbf\u95ee\u4e86\u4e0d\u5e94\u8be5\u8bbf\u95ee\u7684\u8d44\u6e90\u5c31\u53ef\u80fd\u9020\u6210\u4fe1\u606f\u6cc4\u9732\u6216\u7834\u574f\u3002\u4e00\u4e2a\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u662f\u5efa\u7acb\u5728\u4fe1\u4efb\u94fe\u7684\u57fa\u7840\u4e4b\u4e0a\u7684\uff0c\u53ea\u6709\u6ee1\u8db3\u5fc5\u8981\u7684\u5b89\u5168\u57fa\u7840\u624d\u80fd\u6784\u7b51\u81ea\u8eab\u7684\u5b89\u5168\u80fd\u529b\u3002\u5bf9\u4e8eFDBus\u6765\u8bf4\uff0c\u6709\u4ee5\u4e0b\u4e24\u4e2a\u524d\u63d0\u6761\u4ef6\uff1a \u6700\u57fa\u672c\u7684\u524d\u63d0\u662fFDBus\u81ea\u8eab\u7684\u5b8c\u6574\u6027\uff1a\u7cfb\u7edf\u4e2d\u8fd0\u884c\u7684FDBus\u5e93\uff0cname server\uff0chost server\u90fd\u662f\u5408\u6cd5\u7684\uff0c\u6ca1\u6709\u88ab\u7be1\u6539\u6216\u66ff\u6362\u3002\u8fd9\u4e00\u70b9\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u901a\u8fc7\u6743\u9650\u7ba1\u7406\uff0csecure boot\uff0cDM-verity\uff0cFS-verity\uff0c\u5b89\u5168\u5347\u7ea7\u7b49\u673a\u5236\u6765\u786e\u4fdd\u3002 \u5176\u6b21\u5728\u7f51\u7edc\u4e0a\uff0cFDBus\u6d88\u606f\u662f\u4ee5\u660e\u6587\u4f20\u9012\u7684\uff0c\u4e00\u65e6\u6709\u4eba\u975e\u6cd5\u76d1\u542c\u7f51\u7edc\u62a5\u6587\u5c31\u6709\u53ef\u80fd\u9020\u6210\u4fe1\u606f\u6cc4\u9732\u4ee5\u53ca\u5b89\u5168\u6f0f\u6d1e\u3002\u6240\u4ee5\u8ba8\u8bbaFDBus\u5b89\u5168\u6027\u7684\u53e6\u4e00\u524d\u63d0\u662f\u5165\u4fb5\u8005\u65e0\u6cd5\u622a\u53d6\u7f51\u7edc\u62a5\u6587\uff0c\u83b7\u5f97FDBus\u4e0a\u4f20\u9012\u7684\u6570\u636e\u3002\u5f53\u7136\u5982\u679c\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u53ef\u4ee5\u9632\u6b62\u7a83\u542c\uff0c\u4f46\u8003\u8651\u5230\u6548\u7387\u548c\u6027\u80fd\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u8fd9\u4e48\u505a\u3002 \u57fa\u4e8e\u8fd9\u4e9b\u5047\u8bbe\uff0cFDBus\u9762\u4e34\u7684\u653b\u51fb\u4e3b\u8981\u6765\u81ea\u4e09\u65b9\u9762\uff1a \u975e\u6cd5\u4e3b\u673a\u8fde\u63a5\u5230FDBus\u603b\u7ebf\u4e0a\u5e76\u8fd0\u884c\u975e\u6cd5\u7a0b\u5e8f\u4e0e\u5176\u5b83\u4e3b\u673a\u901a\u4fe1\uff1b \u5728\u4e00\u53f0\u5408\u6cd5\u4e3b\u673a\u4e0a\u8fd0\u884c\u975e\u6cd5\u7a0b\u5e8f\uff0c\u5e76\u8fde\u63a5\u5230FDBus\u4e0a\uff0c\u6267\u884c\u975e\u6cd5\u64cd\u4f5c\u3002 \u5408\u6cd5\u7684\u4e3b\u673a\u4e0a\u8fd0\u884c\u5408\u6cd5\u7a0b\u5e8f\uff0c\u4f46\u8bd5\u56fe\u8bbf\u95ee\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u7684\u6570\u636e\u6216\u6267\u884c\u6ca1\u6709\u6743\u9650\u7684\u64cd\u4f5c\u3002 \u57fa\u4e8e\u4ee5\u4e0a\u653b\u51fb\uff0cFDBus\u4ece\u5982\u4e0b\u65b9\u9762\u786e\u4fdd\u7cfb\u7edf\u5b89\u5168\u8fd0\u884c\uff1a \u4e3b\u673a\u8282\u70b9\u7684\u5408\u6cd5\u6027\uff1a\u53ea\u6709\u5408\u6cd5\u7684\u4e3b\u673a\u624d\u80fd\u52a0\u5165FDBus\uff0c\u6210\u4e3a\u603b\u7ebf\u4e0a\u7684\u4e00\u4e2a\u6210\u5458 \u670d\u52a1\u8bbf\u95ee\u7684\u5408\u6cd5\u6027\uff1a\u53ea\u6709\u5408\u6cd5\u7684client\u624d\u80fd\u8bbf\u95eeserver\uff1bserver\u80fd\u591f\u8bc6\u522b\u51fa\u975e\u6cd5\u7684client\u5e76\u62d2\u7edd\u8bbf\u95ee \u8bbf\u95ee\u8005\u5b89\u5168\u7ea7\u522b\u9274\u5b9a\uff1a\u6bcf\u4e2a\u8bbf\u95ee\u8005\u6709\u5404\u81ea\u7684\u5b89\u5168\u7ea7\u522b\uff0c\u53ea\u6709\u5408\u9002\u7684\u5b89\u5168\u7ea7\u522b\u624d\u80fd\u8bbf\u95ee\u5bf9\u5e94\u7684\u8d44\u6e90","title":"\u5b89\u5168\u6027 (Security)"},{"location":"FDBus/#_7","text":"\u4e00\u53f0\u4e3b\u673a\u82e5\u8981\u52a0\u5165FDBus\u5fc5\u987b\u4e0ehost server\u5efa\u7acb\u8fde\u63a5\u3002host server\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u4e3b\u673a\u7684IP\u5730\u5740\u6216MAC\u5730\u5740\u5bf9\u4e3b\u673a\u505a\u9274\u6743\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u516c\u79c1\u94a5\u5bf9\u5224\u65ad\u4e3b\u673a\u7684\u5408\u6cd5\u6027\u3002\u5bf9\u4e8e\u5408\u6cd5\u7684\u4e3b\u673a\uff0chost server\u4f1a\u4e3a\u5176\u9881\u53d1\u8bbf\u95ee\u5176\u5b83\u4e3b\u673a\u7684\u201c\u901a\u884c\u8bc1\u201d\uff0c\u6301\u6709\u901a\u884c\u8bc1\u540e\uff0c\u4e3b\u673a\u4e0a\u7684name server\u624d\u80fd\u4e0e\u5176\u5b83\u4e3b\u673a\u4e0a\u7684name server\u5efa\u7acb\u8fde\u63a5\uff0c\u4e5f\u5c31\u610f\u5473\u8fd9\u52a0\u5165\u4e86FDBus\u3002 \u201c\u901a\u884c\u8bc1\u201d\u91c7\u7528token\u6765\u5b9e\u73b0\u3002\u5f53\u4e3b\u673a\u4e0a\u7684name server\u53d1\u8d77\u8fde\u63a5\u65f6\uff0chost server\u4f1a\u4e3a\u5176\u5206\u914d\u591a\u4e2atoken\uff0c\u6bcf\u4e2atoken\u5bf9\u5e94\u4e00\u4e2a\u5b89\u5168\u7b49\u7ea7\u3002\u4e0b\u8868\u8868\u793a\u4e00\u4e2a\u7cfb\u7edf\u91cc\u5404\u4e3b\u673a\u7684token\u5206\u914d\uff1a \u5b89\u5168\u7b49\u7ea71 \u5b89\u5168\u7b49\u7ea72 \u5b89\u5168\u7b49\u7ea73 \u5b89\u5168\u7b49\u7ea74 \u4e3b\u673a1 token11 token12 token13 token14 \u4e3b\u673a2 token21 token22 token23 token24 \u4e3b\u673a3 token31 token32 token33 token34 \u8868\u4e2d\u4e00\u5171\u67094\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5bf9\u4e8e\u4e3b\u673a1\uff0c\u5404\u4e2a\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684token\u5206\u522b\u662ftoken11\uff0ctoken12\uff0ctoken13\uff0ctoken14\u3002\u5bf9\u4e8e\u5176\u5b83\u4e3b\u673a\u4f9d\u6b21\u7c7b\u63a8\u3002\u5f53\u4e3b\u673a2\u7684name server\u8fde\u63a5\u4e3b\u673a1\u7684name server\u65f6\uff0c\u9700\u8981\u6301\u6709\u4e3b\u673a1\u56db\u4e2atoken\u4e2d\u7684\u4e00\u4e2a\u3002\u4f8b\u5982\u4e3b\u673a2\u7528token11\u53bb\u8fde\u63a5\u4e3b\u673a1\uff0c\u90a3\u4e48\u5728\u4e3b\u673a1\u773c\u91cc\uff0c\u4e3b\u673a2\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\uff1b\u5982\u679c\u7528token13\uff0c\u90a3\u4e48\u4e3b\u673a2\u7684\u5b89\u5168\u7b49\u7ea7\u662f3\uff0c\u7b49\u7b49\u3002\u5b89\u5168\u7b49\u7ea7\u6570\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u914d\u7f6e\u3002 \u4e3b\u673a\u7684\u5b89\u5168\u7b49\u7ea7\u662fhost server\u5bf9\u4e3b\u673a\u505a\u8eab\u4efd\u9274\u522b\u548c\u9274\u6743\u540e\u6307\u5b9a\u7684\u3002\u4e0a\u9762\u63d0\u5230\uff0chost server\u53ef\u4ee5\u6839\u636e\u4e3b\u673a\u7684MAC\u5730\u5740\u6216\u5176\u5b83\u65b9\u5f0f\u8bc6\u522b\u4e3b\u673a\u8eab\u4efd\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u914d\u7f6e\u8868\u4e3a\u5176\u53d1\u5e03\u8bbf\u95ee\u5176\u5b83\u4e3b\u673a\u65f6\u4f7f\u7528\u7684token\uff1a \u4e3b\u673a1 \u4e3b\u673a2 \u4e3b\u673a3 \u4e3b\u673a1 (MAC address1) NA token22 token31 \u4e3b\u673a2 (MAC address2) token14 NA token34 \u4e3b\u673a3 (MAC address3) token12 token23 NA \u4e0a\u8868\u8868\u793a\uff0c\u4e3b\u673a1\u8fde\u4e3b\u673a2\u4f7f\u7528token22\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e3b\u673a2\uff0c\u4e3b\u673a1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\uff1b\u5f53\u4e3b\u673a1\u8fde\u4e3b\u673a3\u65f6\u4f7f\u7528token31\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e3b\u673a3\uff0c\u4e3b\u673a1\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\u7ea7\u3002\u5176\u5b83\u4f9d\u6b21\u7c7b\u63a8\u3002\u5bf9\u4e8e\u4e0d\u5728\u8868\u91cc\u7684\u4e3b\u673a\uff0c\u51fa\u4e8e\u5f00\u653e\u6027\u8003\u8651\uff0chost server\u4e0d\u4f1a\u62d2\u63a5\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u5176\u53d1\u5e03token\u3002\u5bf9\u4e8e\u6ca1\u6709token\u7684\u4e3b\u673a\uff0c\u5176\u5b89\u5168\u7b49\u7ea7\u89c6\u4e3a0\uff0c\u6700\u4f4e\u7ea7\u3002","title":"\u4e3b\u673a\u8282\u70b9\u9274\u6743"},{"location":"FDBus/#_8","text":"\u548chost server\u8d1f\u8d23\u4e3b\u673a\u9274\u6743\u4e00\u6837\uff0cname server\u8d1f\u8d23\u670d\u52a1\u8bbf\u95ee\u7684\u9274\u6743\uff0c\u539f\u7406\u4e5f\u91c7\u7528\u8ba4\u8bc1\u9274\u6743+token\u3002\u5f53server\u5411name server\u6ce8\u518c\u670d\u52a1\u540d\u65f6\uff0cname server\u5728\u5206\u914d\u5730\u5740\u7684\u540c\u65f6\uff0c\u4e5f\u5206\u914d\u591a\u4e2atoken\uff0c\u6bcf\u4e2atoken\u5bf9\u5e94\u4e00\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5b89\u5168\u7b49\u7ea71 \u5b89\u5168\u7b49\u7ea72 \u5b89\u5168\u7b49\u7ea73 \u5b89\u5168\u7b49\u7ea74 server1 token11 token12 token13 token14 server2 token21 token22 token23 token24 server3 token31 token32 token33 token34 \u8868\u4e2d\u4e00\u5171\u67094\u4e2a\u5b89\u5168\u7b49\u7ea7\uff0c\u5bf9\u4e8eserver1\uff0c\u5404\u4e2a\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684token\u5206\u522b\u662ftoken11\uff0ctoken12\uff0ctoken13\uff0ctoken14\u3002\u5bf9\u4e8e\u5176\u5b83server\u4f9d\u6b21\u7c7b\u63a8\u3002\u5f53client\u8fde\u63a5server1\u65f6\uff0c\u9700\u8981\u6301\u6709server1\u56db\u4e2atoken\u4e2d\u7684\u4e00\u4e2a\u3002\u4f8b\u5982client\u7528token11\u53bb\u8fde\u63a5server1\uff0c\u90a3\u4e48\u5728server1\u773c\u91cc\uff0cclient\u7684\u5b89\u5168\u7b49\u7ea7\u662f1\uff1b\u5982\u679c\u7528token13\uff0c\u90a3\u4e48client\u7684\u5b89\u5168\u7b49\u7ea7\u662f3\uff0c\u7b49\u7b49\u3002\u5b89\u5168\u7b49\u7ea7\u6570\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u914d\u7f6e\u3002 client\u7684\u5b89\u5168\u7b49\u7ea7\u662fname server\u5bf9client\u505a\u8eab\u4efd\u9274\u522b\u548c\u9274\u6743\u540e\u6307\u5b9a\u7684\u3002\u5f53client\u901a\u8fc7UDS\u8fde\u63a5\u5230name server\u65f6\uff0cUDS\u540c\u65f6\u4f1a\u628aclient\u7684credentials\u53d1\u751f\u7ed9name server\uff0c\u5176\u4e2d\u5305\u62ecclient\u7684uid\u548cguid\u3002\u7531\u4e8eWindows\u4e0d\u652f\u6301UDS\uff0c\u6240\u4ee5\u4e0d\u652f\u6301\u670d\u52a1\u8bbf\u95ee\u9274\u6743\u3002\u5bf9\u4e8eQNX\uff0c\u867d\u7136\u652f\u6301UDS\uff0c\u4f46\u7531\u4e8e\u4e0d\u652f\u6301SO_PEERCRED\u9009\u9879\uff0c\u4e5f\u4e0d\u652f\u6301\u670d\u52a1\u8bbf\u95ee\u9274\u6743\u3002\u56e0\u6b64\u76ee\u524d\u53ea\u6709Linux\u80fd\u591f\u652f\u6301\u3002\u6839\u636euid\u548cguid\uff0cname server\u53ef\u4ee5\u8bc6\u522bclient\u7684\u8eab\u4efd\uff0c\u901a\u8fc7\u5982\u4e0b\u914d\u7f6e\u8868\u4e3a\u5176\u53d1\u5e03\u8bbf\u95ee\u5176\u5b83server\u65f6\u4f7f\u7528\u7684token\uff1a server1 server2 server3 server4 client1 (uid1:guid1) token12 token22 token31 token43 client2 (uid2:guid2) token14 token21 token34 token43 client3 (uid3:guid3) token12 token23 token33 token41 \u4e0a\u8868\u8868\u793a\uff0cclient1\u8fdeserver1\u4f7f\u7528token12\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8eserver1\uff0cclient1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\uff1b\u5f53client1\u8fdeserver2\u65f6\u4f7f\u7528token22\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8eserver2\uff0cclient1\u7684\u5b89\u5168\u7b49\u7ea7\u662f2\u7ea7\u3002\u5176\u5b83\u4f9d\u6b21\u7c7b\u63a8\u3002\u5bf9\u4e8e\u4e0d\u5728\u8868\u91cc\u7684client\uff0c\u51fa\u4e8e\u5f00\u653e\u6027\u8003\u8651\uff0cname server\u4e0d\u4f1a\u62d2\u63a5\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u5176\u53d1\u5e03token\u3002\u5bf9\u4e8e\u6ca1\u6709token\u7684client\uff0c\u5176\u5b89\u5168\u7b49\u7ea7\u89c6\u4e3a0\uff0c\u6700\u4f4e\u7ea7\u3002","title":"\u670d\u52a1\u8bbf\u95ee\u9274\u6743"},{"location":"FDBus/#_9","text":"server\u5728\u5224\u65adclient\u7684\u5b89\u5168\u7b49\u7ea7\u65f6\uff0c\u9700\u8981\u7efc\u5408client\u672c\u8eab\u7684\u5b89\u5168\u7b49\u7ea7\u548cclient\u6240\u5728\u4e3b\u673a(\u5373name server)\u7684\u5b89\u5168\u7b49\u7ea7\uff1aclient\u7684\u6700\u9ad8\u5b89\u5168\u7b49\u7ea7\u4e0d\u8d85\u8fc7\u5176\u6240\u5728\u4e3b\u673a\u7684\u5b89\u5168\u7b49\u7ea7\u3002\u6709\u4e86\u5b89\u5168\u7b49\u7ea7\uff0cserver\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7b49\u7ea7\u5b9a\u4e49\u8bbf\u95ee\u6743\u9650\uff1a\u5728\u54ea\u4e9b\u7ea7\u522b\u53ef\u4ee5\u8c03\u7528\u54ea\u4e9b\u65b9\u6cd5\uff0c\u76d1\u542c\u54ea\u4e9b\u6d88\u606f\u5e7f\u64ad\u3002\u4e0b\u56fe\u8868\u793a\u4e00\u4e2aserver\u7684\u8bbf\u95ee\u6743\u9650\u5212\u5206\uff1a \u6bcf\u4e2aserver\u90fd\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u4e0d\u540c\u5b89\u5168\u7b49\u7ea7\u5bf9\u5e94\u7684\u8bbf\u95ee\u6743\u9650\u3002\u901a\u5e38\u662f\u5c06**\u65b9\u6cd5\u548c\u901a\u77e5ID\u5206\u6bb5**\uff0c\u843d\u5728\u4e0d\u540c\u6bb5\u7684ID\u5bf9\u5e94\u4e0d\u540c\u7684\u5b89\u5168\u7b49\u7ea7\u3002\u5bf9\u4e8e\u65b9\u6cd5\u8c03\u7528\uff0c\u5982\u679cclient\u7684\u5b89\u5168\u7b49\u7ea7\u6ca1\u6709\u8fbe\u5230\u8981\u6c42\u7684\u7b49\u7ea7\uff0cserver\u5c06\u4f1a\u62d2\u7edd\u6267\u884c\uff1b\u5bf9\u4e8e\u6d88\u606f\u901a\u77e5\uff0c\u5982\u679cclient\u6ca1\u6709\u6743\u9650\u5c06\u65e0\u6cd5\u6ce8\u518c\u9ad8\u5b89\u5168\u7b49\u7ea7\u7684\u6d88\u606f\uff0c\u4ece\u800c\u4e5f\u5c31\u6536\u4e0d\u5230\u8be5\u6d88\u606f\u7684\u53d8\u5316\u901a\u77e5\u3002","title":"\u5b89\u5168\u7b49\u7ea7\u4e0e\u8bbf\u95ee\u6743\u9650"},{"location":"FDBus/#_10","text":"DBus\u63d0\u4f9b\u7684DBus monitor\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\uff1a\u5b83\u53ef\u4ee5\u6293\u53d6DBus\u603b\u7ebf\u4e0a\u6240\u6709\u6d88\u606f\uff0c\u8fd8\u80fd\u8bbe\u7f6e\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6293\u53d6\u7279\u5b9a\u6d88\u606f\u3002\u6293\u53d6\u7684\u6d88\u606f\u5177\u6709\u5f88\u597d\u5730\u53ef\u8bfb\u6027\uff0c\u5404\u79cd\u6570\u636e\u7ed3\u6784\u548c\u5b57\u6bb5\u540d\u90fd\u80fd\u663e\u793a\u51fa\u6765\u3002\u7c7b\u4f3c\u7684\uff0cFDBus\u4e5f\u63d0\u4f9b\u6293\u53d6\u6d88\u606f\u7684\u5de5\u5177 log server \uff0c\u5e76\u4e14\u5176\u529f\u80fd\u66f4\u5f3a\uff0c\u9664\u4e86FDBus\u6d88\u606f\uff0c\u8fd8\u652f\u6301\u8c03\u8bd5log\u8f93\u51fa\uff0c\u5e76\u628aFDBus\u6d88\u606f\u548c\u8c03\u8bd5log\u5408\u5e76\u5728\u4e00\u8d77\u663e\u793a\uff0c\u4fbf\u4e8e\u65f6\u5e8f\u5206\u6790\u3002 log server \u662f\u6302\u5728FDBus\u4e0a\u7684\u4e00\u4e2a\u666e\u901aserver\uff0c\u6bcf\u4e2aendpoint\u90fd\u5305\u542b\u5b83\u7684client\u7aef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u548c\u666e\u901aserver\u4e00\u6837\uff0clog server\u8fd0\u884c\u8d77\u6765\u540e\u5411name server\u6ce8\u518c\uff0c\u540e\u8005\u901a\u8fc7\u5e7f\u64ad\u544a\u77e5\u6bcf\u4e2aendpoint\u91cc\u7684LogClient\u3002\u4ee5\u540e\u5f53endpoint\u5411\u5916\u53d1\u9001FDBus\u6d88\u606f\u65f6\uff0c\u4e5f\u4f1a\u62f7\u8d1d\u4e00\u4efd\u901a\u8fc7LogClient\u53d1\u7ed9log server\u3002\u53d1\u9001\u7684\u6570\u636e\u9664\u4e86FDBus\u6d88\u606f\u5185\u5bb9\uff0c\u8fd8\u5305\u542b\uff1a \u65f6\u95f4\u6233 \u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u540d\u5b57 \u6d88\u606f\u7c7b\u578b\uff08\u8bf7\u6c42\uff0c\u7b54\u590d\uff0c\u5e7f\u64ad\uff0c\u8ba2\u9605\u7b49\uff09 protocol buffer\u5728\u7ebf\u8def\u4e0a\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\uff0c\u4e0d\u80fd\u76f4\u63a5\u6253\u5370\u51fa\u6765\u3002\u4e3a\u8c03\u8bd5\u65b9\u4fbfprotocol buffer\u53ef\u4ee5\u628a\u6d88\u606f\u8f6c\u53d8\u6210\u4fbf\u4e8e\u9605\u8bfb\u7684\u6587\u672c\u683c\u5f0f\uff0c\u76f4\u89c2\u663e\u793a\u6d88\u606f\u91cc\u6bcf\u4e2a\u6210\u5458\u7684\u540d\u5b57\u548c\u53d6\u503c\uff0c\u5e76\u628a\u6570\u7ec4\u7c7b\u578b\uff08repeated\u7c7b\u578b\uff09\u548c\u5d4c\u5957\u7c7b\u578b\u5c55\u5f00\u663e\u793a\u3002 \u5bf9\u4e8e\u8c03\u8bd5log\u8f93\u51fa\uff0cFDBus\u6709\u81ea\u5df1\u7684API\uff0c\u5e76\u652f\u6301\u4ee5\u4e0b\u8f93\u51fa\u7ea7\u522b\uff08\u4f18\u5148\u7ea7\u4f9d\u6b21\u9012\u589e\uff09\uff1a Debug Information Warning Error Fatal \u53ea\u8981log server\u542f\u52a8\u8d77\u6765\uff0c\u5f53endpoint\u901a\u8fc7API\u6253\u5370\u8c03\u8bd5log\u65f6\uff0c\u8fd9\u4e9blog\u4f1a\u901a\u8fc7LogClient\u53d1\u9001\u7ed9log server\u3002log server\u53ef\u4ee5\u628a\u8c03\u8bd5log\u548cFDBus\u6d88\u606f\u5408\u5e76\u8d77\u6765\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5355\u72ec\u8f93\u51fa\u7279\u5b9a\u5185\u5bb9\u3002 \u65e0\u8bbaendpoint\u90e8\u7f72\u4e8e\u54ea\u53f0\u4e3b\u673a\u4e0a\uff0clog server\u90fd\u80fd\u6536\u96c6\u5230\u5b83\u7684FDBus\u6d88\u606f\u548c\u8c03\u8bd5log\u3002\u6574\u4e2a\u7cfb\u7edf\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2alog server\uff0c\u4e0d\u65b9\u4fbf\u5206\u5e03\u5f0f\u8c03\u8bd5\u3002\u4e3a\u6b64FDBus\u6709\u53e6\u4e00\u4e2a\u5de5\u5177 - log viewer\uff0c\u591a\u4e2alog viewer\u53ef\u4ee5\u540c\u65f6\u542f\u52a8\uff0c\u5168\u90e8\u8fde\u63a5\u5230log server\u4e0a\uff0c\u83b7\u53d6\u5f53\u524d\u7684log\u4fe1\u606f\uff0c\u6253\u5370\u5728\u6807\u51c6\u8f93\u51fa\u3002","title":"\u8c03\u8bd5\u548c\u65e5\u5fd7"},{"location":"FDBus/#fdbus_2","text":"\u4e0b\u56fe\u662fFDBus\u5185\u90e8\u7ec4\u6210\u6846\u56fe\uff1a \u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42 - \u5305\u542b\u7cfb\u7edf\u65e0\u5173\u7684\u62bd\u8c61\uff0c\u7528\u4e8e\u9002\u914d\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42 - \u4e2d\u95f4\u4ef6\u8fdb\u7a0b\u6a21\u578b\uff0c\u5305\u542b\u6784\u6210\u8fdb\u7a0b\u7684\u57fa\u672c\u7ec4\u4ef6 IPC\u5c42 - \u8fdb\u7a0b\u95f4\u901a\u4fe1\u6a21\u578b\uff0c\u5305\u542b\u5b9e\u73b0IPC\u901a\u4fe1\u7684\u57fa\u672c\u7ec4\u4ef6 Server\u5c42 - \u63d0\u4f9b\u670d\u52a1\u540d\u89e3\u6790\uff0c\u7ec4\u7f51\uff0c\u65e5\u5fd7\u548c\u8c03\u8bd5\u670d\u52a1","title":"FDBus\u5185\u90e8\u7ed3\u6784"},{"location":"FDBus/#_11","text":"FDBus\u63d0\u4f9b\u5206\u5e03\u5f0fIPC\u901a\u4fe1\u673a\u5236\uff0c\u652f\u6301\u8de8\u4e3b\u673a\u7684client-server\u901a\u4fe1\uff0c\u4f7f\u7528\u670d\u52a1\u540d\u800c\u975e\u7269\u7406\u5730\u5740\u4f5c\u4e3a\u5bfb\u5740\u65b9\u5f0f\uff0c\u901a\u8fc7\u5404\u79cd\u670d\u52a1\u548c\u5fc3\u8df3\u91cd\u8fde\u673a\u5236\u786e\u4fdd\u8fde\u63a5\u7684\u52a8\u6001\u6027\u548c\u53ef\u9760\u6027\uff0c\u8fdb\u800c\u4fdd\u8bc1\u7cfb\u7edf\u5185\u7684\u8282\u70b9\u53ef\u4ee5\u52a8\u6001\u589e\u5220\uff0c\u52a8\u6001\u90e8\u7f72\uff0c\u4efb\u610f\u91cd\u542f\uff0c\u65e0\u9700\u7ba1\u7406\u542f\u52a8\u987a\u5e8f\u548c\u4f9d\u8d56\uff0c\u4ece\u800c\u628a\u5404\u4e2a\u5206\u7acb\u7684\u6a21\u5757\u7ed1\u5b9a\u5728\u4e00\u8d77\uff0c\u7ec4\u6210\u4e00\u4e2a\u7262\u56fa\u7684\u6574\u4f53\u3002\u4f5c\u4e3aIPC\u4e00\u4e2a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0cprotocol buffer\u652f\u6301\u5404\u79cd\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\uff0c\u80fd\u591f\u7528idl\u5b9a\u4e49\u63a5\u53e3\u5e76\u652f\u6301\u81ea\u52a8\u4ee3\u7801\u751f\u6210\uff0c\u5927\u5927\u964d\u4f4e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5de5\u4f5c\u3002FDBus\u652f\u6301\u5b89\u5168\u7b56\u7565\uff0c\u5bf9\u8bbf\u95ee\u533a\u5206\u5b89\u5168\u7b49\u7ea7\uff0c\u786e\u4fdd\u6574\u4e2a\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u3002 FDBus\u4e0d\u4ec5\u4ec5\u662fIPC\u673a\u5236\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\uff0c\u5305\u542b\u5f00\u53d1\u4e2d\u95f4\u4ef6\u8fc7\u7a0b\u4e2d\u7ecf\u5e38\u7528\u5230\u7684\u516c\u5171\u7ec4\u4ef6\u548c\u57fa\u7840\u6a21\u578b\uff0c\u4e3a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u63d0\u4f9b\u4e86\u8de8\u5e73\u53f0\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u652f\u6301\u3002 \u6e90\u7801\u5f00\u653e\u540e\uff0cFDBus\u671f\u5f85\u66f4\u591a\u5f00\u53d1\u8005\u7684\u4f7f\u7528\uff0c\u6d4b\u8bd5\u548c\u6539\u8fdb\uff0c\u6210\u4e3a\u4f17\u591a\u4e2d\u95f4\u4ef6\u5f00\u53d1\u6846\u67b6\u7684\u9009\u9879\u4e4b\u4e00\u3002","title":"\u603b\u7ed3"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/","text":"FDBus API \u00b6 \u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42 \u00b6 \u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42\u5305\u542b\u4e86\u5b9e\u73b0FDBus\u6240\u9700\u8981\u7684\u8ddf\u5e73\u53f0\u76f8\u5173\u7684API\u3002\u8fd9\u4e9bAPI\u65e2\u53ef\u4ee5\u88abFDBus\u672c\u8eab\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5f00\u53d1\u8de8\u5e73\u53f0\u7684\u5e94\u7528\u3002 \u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u5305\u62ec Thread (CBaseThread.h) Mutex and Auto lock (CBaseMutexLock.h) Semaphore (CBaseSemaphore.h) Pipe (CBasePipe.h) Socket (CBaseSocketFactory.h/CSocketImp.h) Event Loop (CbaseEventLoop.h/CFdEventLoop.h) \u5176\u5b83\u7cfb\u7edf\u65e0\u5173API (CBaseSysDep.h) \u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u662f\u5b9e\u73b0\u6574\u4e2aFDBus\u7684\u57fa\u7840\uff0c\u76ee\u524d\u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u652f\u6301QNX\uff0cWindows\u548cLinux\u3002 Thread - CBaseThread \u00b6 \u521b\u5efa\uff0c\u9000\u51fa\u7ebf\u7a0b\u4ee5\u53ca\u8bbe\u7f6e\u7ebf\u7a0b\u5c5e\u6027 \u7c7bCBaseThread API\u2014\u2014\u4f9b\u5916\u90e8\u8c03\u7528 CBaseThread()\uff1a\u521b\u5efa\u7ebf\u7a0b\u5b9e\u4f8b\uff1b\u6b64\u65f6\u7ebf\u7a0b\u5e76\u672a\u542f\u52a8 start(bool create_thread)\uff1a\u542f\u52a8\u7ebf\u7a0b\u5e76\u8fd0\u884c\u7ebf\u7a0b\u4e3b\u5faa\u73afrun()\u51fd\u6570\u3002\u5982\u679ccreate_thread\u4e3atrue\u5219\u521b\u4e00\u4e2a\u65b0\u7ebf\u7a0b\uff1b\u5426\u5219\u5728\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u4e3b\u5faa\u73af join()\uff1a(\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\uff09\u7b49\u5f85\u7ebf\u7a0b\u9000\u51fa isSelf()\uff1a\u5224\u65ad\u5f53\u524d\u662f\u4e0d\u662f\u5728\u672c\u7ebf\u7a0b\u4e2d\u8fd0\u884c setPriority(int32_t level)\uff1a\u8bbe\u7f6e\u7ebf\u7a0b\u4f18\u5148\u7ea7 \u7c7bCBaseThread\u865a\u51fd\u6570\u2014\u2014\u4f9b\u5b50\u7c7b\u6269\u5c55 run()\uff1a\u7ebf\u7a0b\u4e3b\u5faa\u73af tearup()\uff1a\u5728\u8fdb\u7a0b\u4e3b\u5faa\u73af\u5f00\u59cb\u524d\u8c03\u7528\uff0c\u548c\u4e3b\u5faa\u73af\u8fd0\u884c\u4e8e\u540c\u4e00\u7ebf\u7a0b\u4e2d\uff0c\u6267\u884c\u5fc5\u8981\u7684\u521d\u59cb\u5316\u548c\u8bbe\u7f6e teardown()\uff1a\u5728\u8fdb\u7a0b\u4e3b\u5faa\u73af\u7ed3\u675f\u540e\u8c03\u7528\uff0c\u548c\u4e3b\u5faa\u73af\u8fd0\u884c\u4e8e\u540c\u4e00\u7ebf\u7a0b\u4e2d\uff0c\u6267\u884c\u73b0\u573a\u6e05\u7406\u5de5\u4f5c\u3002 Mutex - CBaseMutexLock \u00b6 \u8de8\u5e73\u53f0\u7684\u4e92\u65a5\u9501 \u7c7bCBaseMutexLock\u7684API CBaseMutexLock()\uff1a\u521b\u5efa\u4e92\u65a5\u9501\u5b9e\u4f8b lock()\uff1a\u52a0\u9501 unlock()\uff1a\u89e3\u9501 Autolock - CAutoLock \u00b6 Auto lock\u548cMutex\u4e00\u8d77\u4f7f\u7528\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u81ea\u52a8\u52a0\u9501\u548c\u89e3\u9501\uff0c\u5c24\u5176\u662f\u9632\u6b62\u5fd8\u8bb0\u89e3\u9501\uff0c\u9020\u6210\u6b7b\u9501\u3002 \u4ee5Mutex\u4e3a\u53c2\u6570\u521b\u5efaCAutoLock\u53d8\u91cf\uff0c\u5c06\u81ea\u52a8\u8c03\u7528Mutex::lock()\u3002 \u5f53CAutoLock\u53d8\u91cf\u51fa\u4e86\u4f5c\u7528\u57df\u540e\u4f1a\u88ab\u6790\u6784\u3002\u5728\u6790\u6784\u8fc7\u7a0b\u4e2d\u4f1a\u81ea\u52a8\u8c03\u7528Mutex::unlock()\u3002 Semaphore - CBaseSemaphore \u00b6 \u8de8\u5e73\u53f0\u7684\u4fe1\u53f7\u91cf\u5b9e\u73b0 \u7c7bCBaseSemaphore\u7684API CBaseSemaphore(uint32_t initialCount)\uff1a\u521b\u5efa\u4fe1\u53f7\u91cf\u5b9e\u4f8b\u3002initialCount\u6307\u5b9a\u4fe1\u53f7\u91cf\u7684\u521d\u59cb\u503c\u3002 post()\uff1a\u53d1\u9001\u4fe1\u53f7\u3002\u5982\u679c\u6ca1\u6709\u7ebf\u7a0b\u5728\u7b49\u5f85\u5219\u4fe1\u53f7\u91cf\u52a01\uff0c\u5426\u5219\u5524\u9192\u7b49\u5f85\u7ebf\u7a0b wait(int32_t milliseconds)\uff1a\u7b49\u5f85\u4fe1\u53f7\u3002\u5982\u679c\u4fe1\u53f7\u91cf\u4e3a0\u5219\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u4fe1\u53f7\u91cf\u51cf1\u540e\u9000\u51fa\u3002\u4f11\u7720\u7b49\u5f85\u65f6\uff0c\u5982\u679cmilliseconds\u4e3a0\u5219\u65e0\u9650\u7b49\u5f85\u76f4\u5230\u88abpost()\uff0c\u5426\u5219\u6307\u5b9a\u8d85\u65f6\u7684\u6beb\u79d2\u6570\u3002 Pipe - CBasePipe \u00b6 \u8de8\u5e73\u53f0\u7684\u533f\u540d\u7ba1\u9053 \u7c7bCBasePipe\u7684API \u2013 CBasePipe() \u521b\u5efa\u533f\u540d\u7ba1\u9053 open(bool blockOnRead, bool blockOnWrite)\uff1a\u6253\u5f00\u7ba1\u9053\uff0c\u521b\u5efa\u8bfb\u5199\u4e24\u7aef\u7684\u6587\u4ef6\u53e5\u67c4\u3002 blockOnWrite\u4e3atrue\u65f6\uff0c\u5982\u679c\u7ba1\u9053\u7f13\u5b58\u6ee1\u5219write()\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u7acb\u523b\u8fd4\u56de\uff1b blockOnRead\u4e3atrue\u65f6\uff0c\u5982\u679c\u7ba1\u9053\u91cc\u6ca1\u6709\u6570\u636e\u5219read()\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u7acb\u523b\u8fd4\u56de getReadFd()/ getWriteFd()\uff1a\u5206\u522b\u5f97\u5230\u7ba1\u9053\u8bfb\u7aef\u548c\u5199\u7aef\u6587\u4ef6\u53e5\u67c4 read(void *buf, uint32_t nBytes)\uff1a\u4ece\u8bfb\u7aef\u8bfb\u53d6nBytes\u7684\u6570\u636e\u653e\u5728buf\u91cc write (const void *buf, uint32_t nBytes)\uff1a\u4ecebuf\u91cc\u53d6\u51fanBytes\u7684\u6570\u636e\u5199\u5165\u5199\u7aef Socket \u00b6 \u8de8\u5e73\u53f0\u7684Socket\u5b9e\u73b0 Unix\u5e73\u53f0\u4e0a\u652f\u6301TCP socket\u548cUnix domain socket\uff1bWindows\u5e73\u53f0\u53ea\u652f\u6301TCP socket\u3002 Socket\u5730\u5740\u7684url\u5b9a\u4e49\u5982\u4e0b\uff1a TCP socket\uff1atcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 Unix domain socket\uff1afile://socket\u6587\u4ef6\u5730\u5740 Socket\u5de5\u5382\u7c7bCBaseSocketFactory API CClientSocketImp *createClientSocket(const char *url)\uff1a\u521b\u5efa\u5e76\u8fd4\u56desocket\u7684\u5ba2\u6237\u7aef\uff1b\u6839\u636eurl\u51b3\u5b9a\u521b\u5efa\u7684\u662fTCP socket\u8fd8\u662fUnix domain socket CServerSocketImp *createServerSocket(const char *url)\uff1a\u521b\u5efa\u5e76\u8fd4\u56desocket\u7684server\u7aef\uff1b\u6839\u636eurl\u51b3\u5b9a\u521b\u5efa\u7684\u662fTCP socket\u8fd8\u662fUnix domain socket \u5ba2\u6237\u7aefsocket CClientSocketImp API CSocketImp *connect()\uff1a\u8fde\u63a5\u5230Server\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u540e\u7684socket \u670d\u52a1\u5668\u7aefsocket CServerSocketImp API bool bind()\uff1a\u7ed1\u5b9a\u5730\u5740 CSocketImp *accept()\uff1a\u63a5\u6536Client\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u7684socket Socket CSocketImp API send(const uint8_t *data, int32_t size)\uff1a\u4ecedata\u91cc\u53d6\u51fa\u5927\u5c0f\u4e3asize\u7684\u6570\u636e\u53d1\u7ed9\u5bf9\u65b9 recv(uint8_t *data, int32_t size)\uff1a\u63a5\u6536\u5bf9\u65b9\u7684\u6570\u636e\uff0c\u5b58\u50a8\u5728data\u91cc\uff0c\u603b\u6570\u4e0d\u8d85\u8fc7size\u3002 Event Loop \u00b6 \u7ebf\u7a0b\u7684\u4e3b\u5faa\u73af\uff0c\u5206\u4e3a\u4e24\u7c7b CThreadEventLoop \u2013 \u57fa\u4e8eSemaphore\u5b9e\u73b0\uff0c\u80fd\u591f\u5904\u7406Job\u548cTimer CFdEventLoop \u2013 \u57fa\u4e8eselect()\u5b9e\u73b0\uff0c\u9664\u4e86Job\u548cTimer\uff0c\u8fd8\u80fd\u8fd0\u884cWatch\u5904\u7406\u6587\u4ef6\u8bfb\u5199\u901a\u77e5 EventLoop\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u4f7f\u7528\uff0c\u800c\u662f\u88abCBaseWorker\u5c01\u88c5\u6210worker\u6765\u4f7f\u7528 \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42 \u00b6 \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u57fa\u4e8e\u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42\uff0c\u63d0\u51fa\u57fa\u4e8e\u591a\u7ebf\u7a0b\u7684\u8fdb\u7a0b\u5f00\u53d1\u6a21\u578b\uff0c\u5305\u62ec\u5982\u4e0b\u7ec4\u4ef6 Worker (CBaseWorker.h) Timer (CBaseTimer.h) Watch (CBaseWatch.h/CMethodWatch.h) Job (CBaseJob.h/CMethodJob.h) Notification (CBaseNotification.h/CMethodNotification.h/CBaseNotificationCenter.h) \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42\u4e5f\u662fFDBus\u5b9e\u73b0\u7684\u57fa\u7840 Job - CBaseJob \u00b6 Job\u662f\u53ef\u4ee5\u5728Worker\u4e0a\u8fd0\u884c\u7684\u5bf9\u8c61\u3002Job\u88ab\u63d0\u4ea4\u5230Worker\u7684\u666e\u901a\u6216\u7d27\u6025\u961f\u5217\uff0c\u6309FIFO\u65b9\u5f0f\u5904\u7406 \u63d0\u4ea4\u7ed9Worker\u8fd0\u884c\u7684Job\u5fc5\u987b\u662f\u7528new\u521b\u5efa\u7684\u5806\u4e0a\u5bf9\u8c61\uff0c\u4e0d\u80fd\u662f\u6808\u6216data\u533a\u5bf9\u8c61\u3002\u8fd9\u662f\u56e0\u4e3aWorker\u4f1a\u8d1f\u8d23\u9500\u6bc1\u5904\u7406\u5b8c\u6bd5\u7684Job\u3002 Job\u7684\u751f\u547d\u5468\u671f\u901a\u8fc7shared_ptr\u7ba1\u7406\uff1a\u5f53Job\u4f4d\u4e8e\u961f\u5217\u4e2d\u65f6\u5f15\u7528\u8ba1\u6570\u52a01\uff1b\u5f53Job\u8fd0\u884c\u5b8c\u6bd5\u5f15\u7528\u8ba1\u6570\u51cf1\u3002\u5f53\u5f15\u7528\u8ba1\u6570\u4e3a0\u65f6\u9500\u6bc1\u8be5Job\u3002 Job\u7684\u63d0\u4ea4\u5206\u4e3a\u540c\u6b65\u65b9\u5f0f\u548c\u5f02\u6b65\u65b9\u5f0f\uff1a\u540c\u6b65\u65b9\u5f0f\u65f6\uff0cJob\u63d0\u4ea4\u7ed9Worker\u540e\uff0c\u4f1a\u4e00\u76f4\u963b\u585e\u76f4\u5230Job\u8fd0\u884c\u5b8c\u6bd5\uff1b\u5f02\u6b65\u65b9\u5f0f\u4e0b\uff0cJob\u4e00\u65e6\u63d0\u4ea4\u7acb\u523b\u8fd4\u56de\uff0c\u4e0d\u4f1a\u963b\u585e\u3002 Job\u63d0\u4f9b\u4ee5\u4e0b\u865a\u51fd\u6570\u4f9b\u6269\u5c55 void run(CBaseWorker *worker, Ptr &ref)\uff1aJob\u7684\u6267\u884c\u4f53\uff0c\u88abWorker\u8c03\u7528\uff0c\u5728Worker\u7ebf\u7a0b\u4e2d\u8fd0\u884c\u3002worker\u4e3a\u8fd0\u884c\u8be5Job\u7684Worker\uff0cref\u4e3aJob\u7684\u5f15\u7528\uff0c\u7528\u4e8e\u63a7\u5236Job\u7684\u751f\u547d\u5468\u671f\u3002\u5982\u679c\u5728run()\u589e\u52a0\u8be5\u5f15\u7528\u5219Worker\u5904\u7406\u5b8cJob\uff0c\u5bf9\u5f15\u7528\u8ba1\u6570\u51cf1\u65f6\u7531\u4e8e\u4e0d\u4e3a0\uff0c\u4e0d\u4f1a\u91ca\u653e\u8be5Job\u3002 forceRun(bool force)\uff1a\u5982\u679cforce\u4e3atrue\u8868\u660e\u8be5Job\u4e0d\u80fd\u88ab\u4e22\u5f03(\u89c1\u540e) Worker - CBaseWorker \u00b6 Worker\u7ee7\u627f\u4e8eCBaseThread\uff0c\u662f\u53ef\u4ee5\u5904\u7406Timer\uff0cJob\u548cWatch\u7684\u7ebf\u7a0b Worker\u7684\u5b9e\u73b0\u4e3b\u4f53\u662fEvent Loop\u3002\u542f\u52a8Worker\u7ebf\u7a0b\u65f6\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528CThreadEventLoop\u8fd8\u662fCFdEventLoop\u3002\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u8bfb\u5199\u8981\u6c42\u9009\u62e9\u524d\u8005\uff0c\u5426\u5219\u9009\u62e9\u540e\u8005\u3002 Worker\u5185\u7f6e\u4e24\u6761\u961f\u5217\u5904\u7406Job\uff1a\u666e\u901a\u961f\u5217\u548c\u7d27\u6025\u961f\u5217\u3002\u53ea\u6709\u5904\u7406\u5b8c\u7d27\u6025\u961f\u5217\u540e\u624d\u5904\u7406\u666e\u901a\u961f\u5217\u7684Job\u8bf7\u6c42\u3002 CBaseWorker\u7684API CBaseWorker(uint32_t normal_queue_size = 0, uint32_t urgent_queue_size = 0)\uff1a\u521b\u5efaWorker\u5b9e\u4f8b\u3002 normal_queue_size\u8bbe\u7f6e\u666e\u901a\u961f\u5217\u957f\u5ea6\u4e0a\u9650\uff1b urgent_queue_size\u8bbe\u7f6e\u7d27\u6025\u961f\u5217\u957f\u5ea6\u4e0a\u9650\u3002\u5982\u679c\u961f\u5217\u4e2d\u5f85\u5904\u7406\u7684Job\u4e2a\u6570\u8d85\u51fa\u4e0a\u9650\u5219\u65e0\u6cd5\u53d1\u9001\u3002 \u201d0\u201d\u8868\u793a\u65e0\u9650\u5236 \u3002 start(uint32_t flag = FDB_WORKER_DEFAULT)\uff1a\u5f00\u59cb\u8fd0\u884cWorker\u7684Event Loop\u3002Flag\u662f\u5982\u4e0b\u4f4d\u57df\u7684\u7ec4\u5408 FDB_WORKER_EXE_IN_PLACE\uff1a\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u8868\u793a\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u8fd0\u884cEvent Loop\uff1b\u5426\u5219\u5c31\u5728\u5f53\u524d\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884cEvent Loop\uff1b FDB_WORKER_ENABLE_FD_LOOP\uff1a\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u7ebf\u7a0b\u4e0d\u80fd\u7b49\u5f85\u6587\u4ef6\u8bfb\u5199\u901a\u77e5\uff0c\u5373\u4e0d\u652f\u6301Watch\uff0c\u53ea\u80fd\u8fd0\u884cTimer\u548cJob\uff1b\u5426\u5219\u652f\u6301Watch\u3002 exit(int32_t exit_code = 1)\uff1a\u9000\u51faWorker\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002\u8be5\u51fd\u6570\u8c03\u7528\u540e\uff0c\u5982\u679cWorker\u6b63\u5728\u5904\u7406Job\u5219\u65e0\u6cd5\u7acb\u523b\u9000\u51fa\uff0c\u8981\u7b49\u5230Job\u5904\u7406\u5b8c\u6bd5\u624d\u80fd\u9000\u51fa\u3002exit_code\u5fc5\u987b\u975e0\uff0c\u8868\u660e\u9000\u51fa\u7684\u539f\u56e0\uff0c\u901a\u5e38\u53ef\u4ee5\u5728teardown()\u91cc\u4f7f\u7528\u3002 sendAsync(CBaseJob *job, bool urgent = false)\uff1a\u4ee5\u5f02\u6b65\u65b9\u5f0f\u63d0\u4ea4Job\u7ed9Worker\u3002Job\u5fc5\u987b\u662f\u7528new\u7684\u65b9\u5f0f\u52a8\u6001\u521b\u5efa\uff0c\u4e14\u4f7f\u7528\u8005\u4e0d\u9700\u8981\u91ca\u653e\uff0cWorker\u4f1a\u5728\u5904\u7406\u5b8c\u6bd5\u540e\u91ca\u653e\u6389\u3002Urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 sendAsyncEndeavor(CBaseJob *job, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cJob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job\u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 sendSync(CBaseJob job, long milliseconds = 0, bool urgent = false)\uff1a\u4ee5\u540c\u6b65\u65b9\u5f0f\u63d0\u4ea4Job\u7ed9Worker\u3002Job\u5fc5\u987b\u662f\u7528new\u7684\u65b9\u5f0f\u52a8\u6001\u521b\u5efa\uff0c\u4e14\u4f7f\u7528\u8005\u4e0d\u9700\u8981\u91ca\u653e\uff0cWorker\u4f1a\u5728\u5904\u7406\u5b8c\u6bd5\u540e\u91ca\u653e\u6389\u3002 milliseconds\u8bbe\u7f6e\u6700\u957f\u963b\u585e\u65f6\u95f4\uff08**\u9ed8\u8ba40\u4e3a\u65e0\u9650\u7b49\u5f85* \uff09\u3002urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 \u8981\u6ce8\u610f\uff0c\u8be5\u51fd\u6570\u4e0d\u80fd\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u6b7b\u9501 \u3002 sendSyncEndeavor(CBaseJob *job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cjob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job \u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 sendSync(CBaseJob::Ptr &job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0asendSync()\uff0c\u533a\u522b\u662fJob\u4f20\u5165\u7684\u662f\u5f15\u7528\u800c\u975e\u6307\u9488\uff0c\u4f7f\u7528\u8005\u53ef\u80fd\u8fd8\u6301\u6709\u8be5Job\uff0c\u56e0\u6b64\u8be5\u51fd\u6570\u8c03\u7528\u5b8c\u6bd5Worker\u4e0d\u4f1a\u91ca\u653eJob\u7684\u5185\u5b58\uff0c\u53ea\u662f\u51cf\u5c11\u5f15\u7528\u8ba1\u6570\u3002 Urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 sendSyncEndeavor(CBaseJob::Ptr &job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cjob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job \u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 flush(long milliseconds = 0, bool urgent = false)\uff1a\u5411Worker\u540c\u6b65\u63d0\u4ea4\u4e00\u4e2aCBaseJob\u7684\u5b9e\u4f8b\u3002\u4e00\u65e6\u8be5\u51fd\u6570\u8fd4\u56de\uff0c\u53ef\u4ee5\u786e\u4fdd\u6240\u6709\u4e4b\u524d\u5f85\u5904\u7406\u7684Job\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5\u3002\u7531\u4e8e\u662f\u540c\u6b65\u63d0\u4ea4\uff0c\u8be5\u51fd\u6570\u4e0d\u80fd\u88abWorker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u3002 void discardQueuedJobs(bool urgent = false)\uff1a\u4e22\u5f03\u5f53\u524d\u6392\u5728\u961f\u5217\u4e2d\u5f85\u5904\u7406\u7684Job\u3002\u5bf9\u4e8e\u6b63\u5728\u8fd0\u884c\u7684Job\u662f\u65e0\u6cd5\u7ec8\u6b62\u7684\uff0c\u53ea\u80fd\u5f85\u5176\u5904\u7406\u5b8c\u6bd5\uff0c\u4e22\u5f03\u968f\u540e\u7684Job\u3002\u8be5\u51fd\u6570\u6267\u884c\u5b8c\u540e\u518d\u63d0\u4ea4\u7684Job\u5c06\u4e0d\u4f1a\u88ab\u4e22\u5f03\uff0c\u5c06\u4f1a\u6b63\u5e38\u5904\u7406\u3002\u5982\u679cJob\u5f88\u91cd\u8981\uff0c\u8c03\u7528CBaseJob::forecRun()\u53ef\u4ee5\u9632\u6b62\u5176\u88ab\u4e22\u5f03\uff0c\u800c\u662f\u6b63\u5e38\u5904\u7406\u3002 Timer - CBaseLoopTimer \u00b6 Timer\u63d0\u4f9b\u6beb\u79d2\u7ea7\u7cbe\u5ea6\uff0c\u65e0\u6296\u52a8\u4fdd\u969c\u7684\u5b9a\u65f6\u5668\u3002\u4f18\u70b9\u662f\u8d44\u6e90\u5360\u7528\u5c11\uff0c\u548cWorker\u878d\u5408\u5728\u4e00\u8d77\uff0c\u4f7f\u7528\u65b9\u4fbf\u3002 \u7531\u4e8eTimer\u548cJob\uff0cWatch\u53ef\u4ee5\u5728\u540c\u4e00Worker\u7ebf\u7a0b\u4e2d\u8fd0\u884c\uff0c\u4e00\u65e6Job\u6216Watch\u6267\u884c\u65f6\u95f4\u8fc7\u957f\uff0c\u8d85\u51faTimer\u95f4\u9694\uff0c\u4f1a\u5bfc\u81f4Timer\u89e6\u53d1\u65f6\u95f4\u7684\u6296\u52a8\u3002 Timer\u5229\u7528\u7cfb\u7edf\u8c03\u7528\u7684\u8d85\u65f6\u673a\u5236\u5b9e\u73b0\uff0c\u4ee5select()\u4e3a\u4f8b\uff0c\u5982\u679cWorker\u4e0a\u8fd0\u884c\u4e863\u4e2aTimer\uff0c\u5206\u522b\u5c06\u572815\u6beb\u79d2\uff0c40\u6beb\u79d2\uff0c80\u6beb\u79d2\u540e\u5230\u671f\uff0c\u5219select()\u7684\u8d85\u65f6\u8bbe\u7f6e\u5982\u4e0b CBaseLoopTimer\u7684API CBaseLoopTimer(int32_t interval, bool repeat = false)\uff1a\u521b\u5efaTimer\u5b9e\u4f8b\u3002Interval\u4ee3\u8868Timer\u7684\u65f6\u95f4\u95f4\u9694\uff1brepeat\u8868\u793a\u521b\u5efa\u7684\u662fcyclic Timer\u8fd8\u662fone-shot Timer\uff1a\u4e00\u65e6\u4f7f\u80fd\u540e\uff0ccyclic Timer\u4f1a\u4ee5interval\u6beb\u79d2\u4e3a\u5468\u671f\u53cd\u590d\u6267\u884c\uff1bone-shot Timer\u5728interval\u6beb\u79d2\u8d85\u65f6\u540e\u4e0d\u518d\u6267\u884c\u3002 attach(CBaseWorker *worker, bool enb = true)\uff1a\u6307\u5b9a\u8fd0\u884cTimer\u7684Worker\u3002\u53ea\u6709\u6307\u5b9a\u4e86Worker\u540eTimer\u624d\u80fd\u5f00\u59cb\u5de5\u4f5c\u3002\u8d85\u65f6\u540e\uff0cTimer\u7684run()\u51fd\u6570\u5c06\u5728\u8be5Worker\u4e0a\u6267\u884c\u3002 \u5982\u679cenb\u4e3atrue\uff0cTimer\u7acb\u523b\u5f00\u59cb\u5728\u6307\u5b9a\u7684Worker\u4e0a\u6267\u884c\uff1b\u5426\u5219\u53ef\u4ee5\u5c06\u6765\u7528enable()\u542f\u52a8\u3002 enable(int32_t interval = -1)\uff1a\u542f\u52a8Timer\u3002\u542f\u52a8\u540e\u7684Timer\u5c06\u5728\u6307\u5b9a\u7684Worker\u4e0a\u5de5\u4f5c\u3002\u5982\u679c\u8c03\u7528\u8be5\u51fd\u6570\u65f6Timer\u6b63\u5728\u8fd0\u884c\uff0c\u90a3\u4e48\u8d85\u65f6\u65f6\u95f4\u5c06\u88ab\u91cd\u7f6e\u4e3ainterval\u6beb\u79d2\u4e4b\u540e\u3002\u53c2\u6570interval\u63d0\u4f9b\u4fee\u6539\u8d85\u65f6\u65f6\u95f4\u7684\u673a\u4f1a\u3002\u5982\u679c\u4e3a-1\u5219**\u4e0d\u6539\u53d8\u8d85\u65f6\u65f6\u95f4**\u3002\u8be5\u51fd\u6570\u4e0d\u6539\u53d8cyclic/one-shot\u6a21\u5f0f\u3002 enableRepeat(int32_t interval = -1, int32_t init_value = -1)\uff1a\u540cenable()\uff0c\u4f46\u5c06Timer\u7684\u6a21\u5f0f\u8bbe\u4e3a**cyclic**\uff0c\u540c\u65f6\u9664\u4e86\u80fd\u7528interval\u6539\u53d8\u5468\u671f\uff0c\u8fd8\u53ef\u4ee5\u5c06\u7b2c\u4e00\u6b21\u8d85\u65f6\u7684\u65f6\u95f4\u8bbe\u7f6e\u4e3ainit_value\u6beb\u79d2\u3002\u5982\u679cinit_value\u4e3a-1\u5219\u8be5\u65f6\u95f4\u7b49\u4e8einterval\u3002 enableOneShot(int32_t interval = -1)\uff1a\u540cenable()\uff0c\u4f46\u5c06Timer\u7684\u6a21\u5f0f\u8bbe\u7f6e\u4e3aone-shot\u3002 disable()\uff1a\u505c\u6b62\u8fd0\u884cTimer\u3002 CBaseLoopTimer\u7684\u865a\u51fd\u6570 void run()\uff1aTimer\u7684\u6267\u884c\u51fd\u6570\uff1b\u5f53Timer\u8d85\u65f6\u65f6\u5728Worker\u7684\u7ebf\u7a0b\u4e2d\u88ab\u8c03\u7528\u3002 Watch - CBaseFdWatch \u00b6 Watch\u57fa\u4e8eselect()\uff0c\u5c06\u591a\u4e2a\u6587\u4ef6\u7684\u8f93\u5165\u8f93\u51fa\u7684\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u7edf\u4e00\u7b49\u5f85\uff0c\u4e32\u884c\u5904\u7406\u3002 \u6bcf\u4e2aWatch\u5bf9\u5e94\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26(File Descriptor)\u3002\u4f7f\u7528\u8005\u8d1f\u8d23\u6253\u5f00\u6587\u4ef6\u5e76\u4ea4\u7ed9Watch\u3002 Watch\u53ea\u80fd\u5728\u7528FDB_WORKER_ENABLE_FD_LOOP\u6807\u5fd7\u542f\u52a8\u7684Worker\u4e0a\u6267\u884c\u3002 \u548ctimer\u4e00\u6837\uff0cwatch\u5fc5\u987battach\u5728\u7279\u5b9a\u7ebf\u7a0b\u4e0a\u624d\u80fd\u5de5\u4f5c\u3002 CBaseFdWatch\u7684API CBaseFdWatch(int fd, int32_t flags)\uff1a\u521b\u5efaWatch\u7684\u5b9e\u4f8b\u3002fd\u4e3a\u4e00\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1bflags\u8868\u660e\u9700\u8981\u7b49\u5f85\u7684\u6587\u4ef6\u4e8b\u4ef6\uff0c\u53ef\u662f\u4ee5\u4e0b\u4f4d\u57df\u7684\u7ec4\u5408\uff1a POLLIN\uff1a\u5f53\u6587\u4ef6\u6709\u6570\u636e\u53ef\u4f9b\u8bfb\u53d6\u65f6\u8c03\u7528onInput()\u6210\u5458\u51fd\u6570 POLLOUT\uff1a\u5f53\u6587\u4ef6\u53ef\u4ee5\u8f93\u51fa\u6570\u636e\u65f6\u8c03\u7528onOutput()\u6210\u5458\u51fd\u6570 POLLHUP\uff1a\u5f53\u5bf9\u65b9\u5173\u95ed\u6587\u4ef6\u65f6\u8c03\u7528onHup()\u6210\u5458\u51fd\u6570 POLLERR\uff1a\u5f53\u6587\u4ef6\u64cd\u4f5c\u51fa\u73b0\u9519\u8bef\u65f6\u8c03\u7528onError()\u6210\u5458\u51fd\u6570 attach(CBaseWorker *worker, bool enb = true)\uff1a\u6307\u5b9a\u8fd0\u884cWatch\u7684Worker\u3002\u53ea\u6709\u6307\u5b9a\u4e86Worker\u540eWatch\u624d\u80fd\u5f00\u59cb\u5de5\u4f5c\u3002\u4e0a\u8ff0onXxx()\u90fd\u662f\u5728Worker\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u8fd0\u884c\u3002\u5982\u679cenb\u4e3atrue\uff0cWatch\u7acb\u523b\u5f00\u59cb\u5728\u8be5Worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u53ef\u4ee5\u5c06\u6765\u7528enable()\u542f\u52a8\u3002 enable()/disable()\uff1a\u4f7f\u80fd/\u505c\u6b62Watch Notification \u00b6 Notification\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u4e8b\u4ef6\u8ba2\u9605-\u53d1\u5e03\u673a\u5236\uff0c\u7528\u4e8e\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u7ebf\u7a0b\u4e4b\u95f4\u4e00\u5bf9\u591a\u7684\u6d88\u606f\u901a\u77e5\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cJob\u53ea\u80fd\u70b9\u5bf9\u70b9\u901a\u4fe1\u3002 CBaseNotification\u5b9a\u4e49\u6d88\u606f\u901a\u77e5\u7684\u8ba2\u9605\u65b9\uff0cAPI\u5305\u62ec CBaseNotification(FdbEventCode_t event = FDB_INVALID_ID, CBaseWorker *worker = 0) \uff1a\u521b\u5efaNotification\u7684\u5b9e\u4f8b\u3002event\u8bbe\u7f6e\u9700\u8981\u8ba2\u9605\u7684\u4e8b\u4ef6ID\uff1bworker\u9009\u62e9\u63a5\u6536\u901a\u77e5\u7684Worker\uff1a\u5982\u679c\u4e3a\u7a7a\u5219\u6267\u884c\u51fd\u6570run()\u5728CNotificationCenter::notify()\u6267\u884c\u65f6\u88ab\u8c03\u7528\uff1b\u5426\u5219\u5c06\u8f6c\u53d1\u5230Worker\u7684\u7ebf\u7a0b\u4e0a\u6267\u884c\u3002 CBaseNotification\u7684\u865a\u51fd\u6570 void run(T &data)\uff1aNotification\u7684\u6267\u884c\u51fd\u6570\u3002data\u662f\u9700\u8981\u901a\u77e5\u7684\u6570\u636e\uff0c\u4e3a\u6a21\u677f\u7c7b\u578b\u3002 CNotificationCenter\u5b9a\u4e49\u901a\u77e5\u7684\u53d1\u5e03\u65b9\uff0cAPI\u5305\u62ec subscribe(typename CBaseNotification ::Ptr &notification)\uff1a\u8ba2\u9605\u67d0\u4e00\u4e8b\u4ef6\u7684\u901a\u77e5\uff1b\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\u8fd0\u884c\u901a\u77e5\u7684run()\u51fd\u6570\u3002 unsubscribe(typename CBaseNotification ::Ptr &notification)\uff1a\u53d6\u6d88\u8ba2\u9605 void notify(FdbEventCode_t event, T &data)\uff1a\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u901a\u77e5\u6240\u6709\u8ba2\u9605\u4e86\u8be5\u4e8b\u4ef6\u7684Notification\u3002event\u4e3a\u53d1\u751f\u7684\u4e8b\u4ef6\uff1bdata\u4e3a\u4e8b\u4ef6\u8ddf\u968f\u7684\u6570\u636e\u3002\u5982\u679cNotification\u6307\u5b9a\u4e86Worker\uff0c\u8be5Notification\u7684run()\u5c06\u88ab\u629b\u5230Worker\u7ebf\u7a0b\u4e0a\u8fd0\u884c\uff0c\u5426\u5219\u5728\u8c03\u7528notify()\u65f6\u76f4\u63a5\u8fd0\u884c\u3002 Inter-Process Communication(IPC) \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 server vs. socket \u4e00\u4e2aServer\u5305\u542b\u591a\u4e2asocket\uff0c\u5373\u4e00\u4e2aserver\u53ef\u4ee5bind\u5230(\u4fa6\u542c)\u591a\u4e2a\u5730\u5740 socket vs. session \u6bcf\u4e2asocket\u5305\u542b\u591a\u4e2asession\uff0c\u56e0\u4e3aserver\u7684**accept**()\u4f1a\u8fd4\u56de\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26(fd) session \u4e00\u4e2asession\u4ee3\u8868\u4e00\u4e2aclient-server\u7684\u8fde\u63a5; \u6d88\u606f\u90fd\u662f\u5728session\u4e2d\u4f20\u9012 client vs. socket \u4e00\u4e2aclient\u5305\u542b\u591a\u4e2asocket\uff0c\u5373client\u53ef\u4ee5connect\u5230\u591a\u4e2a\u5730\u5740\uff08server\u5fc5\u987b\u5df2\u7ecf\u5728\u4fa6\u542c\u8fd9\u4e9b\u5730\u5740\uff09 \u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6bcf\u4e2aclient\u53ea\u4f1a\u8fde\u63a5\u4e00\u4e2a\u5730\u5740 socket vs. session \u6bcf\u4e2asocket\u5305\u542b\u4e00\u4e2asession\uff0c\u56e0\u4e3aclient\u53ea\u6709\u4e00\u4e2afd client\u548cserver\u7edf\u79f0\u4e3aendpoint\uff0c\u7528FdbEndpointId_t\u8868\u793a session\u7528FdbSessionId_t\u8868\u793a socket\u7528FdbSocketId_t\u8868\u793a IPC \u00b6 IPC\u63d0\u4f9b\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\u3002\u6839\u636e\u901a\u4fe1\u53cc\u65b9\u8fdb\u7a0b\u7684\u90e8\u7f72\u4f4d\u7f6e\u5206\u4e3a\u672c\u5730\u8fdb\u7a0b\u95f4\u901a\u4fe1\u548c\u8282\u70b9\u95f4\u8fdb\u7a0b\u901a\u4fe1\u3002 \u4e0d\u540c\u4e8eJob\u7684\u70b9\u5bf9\u70b9\u901a\u4fe1\uff0cIPC\u91c7\u7528Client-Server\u6a21\u5f0f\uff0c\u5177\u5907\u5982\u4e0b\u7279\u6027 Client\u662f\u8fde\u63a5\u7684\u53d1\u8d77\u8005\uff1bServer\u662f\u8fde\u63a5\u7684\u63a5\u53d7\u8005 Client\u662f\u547d\u4ee4\u7684\u53d1\u8d77\u8005\u548c\u6570\u636e\u7684\u8bf7\u6c42\u8005\uff1bServer\u662f\u547d\u4ee4\u7684\u6267\u884c\u8005\u548c\u6570\u636e\u7684\u4ea7\u751f\u8005 \u4e00\u4e2aClient\u8fde\u63a5\u4e00\u4e2aServer\uff1b\u4e00\u4e2aServer\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aClient Client\u6ca1\u6709\u5730\u5740\uff0c\u4f46\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aServer\u5730\u5740\uff1bServer\u62e5\u6709\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aClient Server\u4e5f\u53ef\u4ee5\u5e7f\u64ad\u65b9\u5f0f\u4e3b\u52a8\u5411\u591a\u4e2aClient\u63a8\u9001\u6d88\u606f\uff1bClient\u53ef\u4ee5\u5411Server\u8ba2\u9605\u7279\u5b9a\u7684\u6d88\u606f IPC\u5e95\u5c42\u5b9e\u73b0\u57fa\u4e8eSocket\uff0c\u76ee\u524d\u4f7f\u7528TCP socket\u548cUnix domain socket\u3002 \u6d88\u606f\u7ed3\u6784 \u00b6 FDBus\u6d88\u606f\u7531ID + \u6570\u636e\u7ec4\u6210 ID\u662f\u5f3a\u5236\u9879\uff0c\u4e3a32\u4f4d\u6574\u578b\uff0c\u6bcf\u4e2aMessage\u5fc5\u987b\u7531ID\u6807\u8bc6\u3002\u5bf9\u4e8e\u4e00\u4e2aServer\uff0cID\u5fc5\u987b\u552f\u4e00\uff0c\u4e0d\u80fd\u91cd\u590d\u3002\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u6240\u6709request-reply\u6d88\u606f\u7684ID\u5fc5\u987b\u552f\u4e00\uff1b\u6240\u6709\u5e7f\u64ad\u63a8\u9001\u7684\u6d88\u606f\u5fc5\u987b\u552f\u4e00\uff1b\u4e8c\u8005\u4e4b\u95f4\u53ef\u4ee5\u6709\u91cd\u590d \u6570\u636e\u90e8\u5206\u4e3a\u53ef\u9009\u9879\uff0c\u652f\u6301\u4e24\u79cd\u683c\u5f0f\uff1a \u539f\u59cb\u6570\u636e (void *) Protocol Buffer\u683c\u5f0f (CFdbBasePayload) \u6d88\u606f\u6570\u636e \u00b6 ** \u539f\u59cb\u6570\u636e **\u6ca1\u6709\u683c\u5f0f\uff0c\u53ea\u662f\u5c06\u4e00\u7247\u5185\u5b58\u6570\u636e\u4ece\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3002\u901a\u5e38\u7528\u4e8e\u6587\u4ef6\uff0c\u5347\u7ea7\u5305\uff0c\u97f3\u9891\u6570\u636e\u7684\u4f20\u8f93\u3002 ** Protocol Buffer **\u662f\u8c37\u6b4c\u5f00\u6e90\u7684\uff0c\u8bed\u8a00\u72ec\u7acb\uff0c\u5e73\u53f0\u72ec\u7acb\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f\uff0c\u9002\u7528\u4e8e\u7f51\u7edc\u4f20\u8f93\uff0c\u6570\u636e\u5b58\u50a8\u7b49\u591a\u9886\u57df\u3002 Protocol Buffer\u652f\u6301\u5927\u90e8\u5206C++\u57fa\u672c\u7c7b\u578b\uff0c\u7531\u57fa\u672c\u7c7b\u578b\u7ec4\u5408\u6210\u7684\u590d\u5408\u7c7b\u578b\uff0c\u590d\u5408\u7c7b\u578b\u7684\u5d4c\u5957\uff0c\u4ee5\u53ca\u57fa\u672c\u7c7b\u578b\u548c\u590d\u5408\u7c7b\u578b\u7ec4\u6210\u7684\uff0c\u957f\u5ea6\u53ef\u53d8\u7684\u6570\u7ec4\uff08vector\uff09\u7c7b\u578b\u3002Protocol Buffer\u7684\u6570\u636e\u6210\u5458\u53ef\u4ee5\u662f\u5fc5\u9009\u6216\u53ef\u9009\uff0c\u4f7f\u5f97\u6d88\u606f\u5b9a\u4e49\u66f4\u52a0\u7075\u6d3b\u3002 Protocol Buffer\u6d88\u606f\u7528\u7279\u5b9a\u7684IDL\u683c\u5f0f\u5b9a\u4e49\uff0c\u81ea\u52a8\u751f\u6210\u5305\u62ecC++\u5728\u5185\u7684\u591a\u79cd\u8bed\u8a00\u7684\u6e90\u4ee3\u7801\uff0c\u907f\u514d\u7e41\u7410\u7684\u7ec4\u5305\u548c\u89e3\u5305\u3002\u5f00\u53d1\u8005\u53ea\u8981\u4e86\u89e3C++\u7684\u57fa\u672c\u7c7b\u578b\uff0c\u7c7b\u548c\u5bb9\u5668\u64cd\u4f5c\uff0c\u4e0d\u5fc5\u5173\u5fc3\u5177\u4f53\u7684\u5305\u683c\u5f0f\u3002 \u901a\u4fe1Endpoint\uff1aClient\u4e0eServer \u00b6 Client\u4e0eServer\u662fFDBus\u901a\u4fe1\u7684\u53c2\u4e0e\u8005\uff0c\u7edf\u79f0Endpoint\u3002Client\u662f\u670d\u52a1/\u529f\u80fd\u7684\u53d1\u8d77\u8005\u548c\u4f7f\u7528\u8005\uff1bServer\u662f\u529f\u80fd/\u670d\u52a1\u7684\u63d0\u4f9b\u8005\u3002 Client\u7ee7\u627f\u81eaCBaseClient\uff0c\u901a\u8fc7connect()\u65b9\u6cd5\u8fde\u63a5\u5230Server\u7ed1\u5b9a\u7684\u5730\u5740\u3002 Server\u7ee7\u627f\u81eaCBaseServer\uff0c\u901a\u8fc7bind()\u65b9\u6cd5\u7ed1\u5b9a\u81ea\u5df1\u7684\u5730\u5740\u3002 connect()/bind()\u7684\u5730\u5740\u4e3a\u7684url\u683c\u5f0f\uff0c\u5305\u62ecTCP\uff0cUnix domain\u548c\u540d\u5b57\u5730\u5740\uff0c\u901a\u5e38\u4f7f\u7528\u9700\u8981NameServer\u89e3\u6790\u7684\u540d\u5b57\u5730\u5740\uff08\u89c1\u540e\uff09\u3002 CFdbBaseObject\uff1a\u66f4\u57fa\u7840\u7684Endpoint \u00b6 \u65e0\u8bba\u662fClient\u8fd8\u662fServer\uff0c\u90fd\u662f\u4ee5CFdbBaseObject\u4e3a\u57fa\u7c7b\uff0c\u6240\u6709\u65b9\u6cd5\u548c\u56de\u8c03\u90fd\u5728\u8be5\u57fa\u7c7b\u91cc CFdbBaseObject\u53ef\u4ee5\u770b\u6210\u5728Client\u548cServer\u4e4b\u95f4\u521b\u5efa\u7684\u901a\u9053\uff0c\u6bcf\u4e2a\u901a\u9053\u7684ID\u5c31\u662fCFdbBaseObject\u7684ID\u3002CBaseClient\u548cCBaseServer\u4f7f\u7528\u901a\u90530\u6765\u901a\u4fe1\uff1b1~65535\u901a\u9053\u7528\u4e8eCFdbBaseObject\u4e4b\u95f4\u7684\u901a\u4fe1\u3002 CFdbBaseObject\uff1aExample \u00b6 \u901a\u8fc7\u7ee7\u627fCBaseClient\u548cCBaseServer\uff0c\u521b\u5efa\u5a92\u4f53\u670d\u52a1MediaService\u7684Client\u7aef\u548cServer\u7aef\uff0c\u4f7f\u7528\u901a\u90530\u901a\u4fe1\uff1b \u901a\u8fc7\u7ee7\u627fCFdbBaseObject\uff0c\u5728MediaService\u7684Client\u7aef\u548cServer\u7aef\u521b\u5efa\u591a\u4e2a\u5a92\u4f53\u64ad\u653e\u5668\u5b9e\u4f8b\u7684Client\u7aef\u548cServer\u7aef\uff0c\u4f7f\u7528\u901a\u90531\uff0c2\u2026\u901a\u4fe1 \u6bcf\u4e2aclient object\u548cserver object\u652f\u6301request-response, subscribe-publish Client/Server\u56de\u8c03(\u865a)\u51fd\u6570 \u00b6 Client/Server\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0cFDBus\u8c03\u7528CBaseClient/CBaseServer\u76f8\u5173\u865a\u51fd\u6570\u901a\u77e5Client/Server\u505a\u76f8\u5e94\u5904\u7406\u3002\u8fd9\u4e9b\u4e8b\u4ef6\u5305\u62ec Client\u8fde\u63a5\u4e0aServer\u6216\u4e0eServer\u65ad\u5f00\u65f6 Server\u6536\u5230Client\u7684\u8fde\u63a5\u8bf7\u6c42\u65f6 Server\u6536\u5230Client\u7684\u547d\u4ee4\u6216\u6570\u636e\u8bf7\u6c42\u65f6 Server\u6536\u5230Client\u6d88\u606f\u8ba2\u9605\u8bf7\u6c42\u65f6 Client\u5411Server\u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\u540e\uff0c\u6536\u5230Server\u56de\u590d\u65f6 \u5728\u5b9e\u73b0\u5177\u4f53\u7684Client/Server\u65f6\u8981**\u91cd\u8f7d\u57fa\u7c7b\u7684\u865a\u51fd\u6570**\uff0c\u6355\u83b7\u8fd9\u4e9b\u4e8b\u4ef6\uff0c\u5904\u7406\u76f8\u5173\u4e1a\u52a1\u3002 Context \u2013 FDBus\u7684\u5de5\u4f5c\u7ebf\u7a0b \u00b6 \u6bcf\u4e2a\u6302\u5728FDBus\u4e0a\u7684\u8fdb\u7a0b\u5fc5\u987b\u542f\u52a8\u4e00\u4e2aWorker\u5904\u7406IPC\u6570\u636e\u7684\u8bfb\u5199\u548c\u6d88\u606f\u4ea4\u4e92\u7ba1\u7406\uff0c\u8be5Worker\u53eb\u505aFDBus\u7684Context\u3002 \u65e0\u8bba\u662fClient\u8fd8\u662fServer\uff0c\u5bf9socket\u7684\u8bfb\u5199\u90fd\u59d4\u6258Context\u7ebf\u7a0b\u6765\u6267\u884c\u3002\u6545\u6240\u6709\u5bf9FDBus\u7684\u8bbf\u95ee\u9996\u5148\u5fc5\u987b\u4ee5Job\u7684\u5f62\u5f0f\u63d0\u4ea4\u7ed9Context\uff1bContext\u6536\u5230\u7684\u6d88\u606f\u4e5f\u4f1a\u4ee5Job\u5f62\u5f0f\u8f6c\u7ed9\u5de5\u4f5c\u7ebf\u7a0b\u5904\u7406\u3002 Context\u662f\u4e2a\u666e\u901a\u7684Worker\uff0c\u53ef\u4ee5\u8fd0\u884cWatch\uff0cJob\uff0cTimer\uff0c\u751a\u81f3Client\u548cServer\u3002\u5bf9\u4e8e\u7b80\u5355\u7684\u8fdb\u7a0b\uff0c\u53ea\u8981\u4e00\u4e2aContext\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6240\u6709\u529f\u80fd\u3002 Client/Server\u7684\u5de5\u4f5c\u7ebf\u7a0b \u00b6 \u9664Context\u5916\uff0c\u6839\u636e\u9700\u8981\u8fd8\u53ef\u4ee5\u542f\u52a8\u5176\u5b83Worker\u7ebf\u7a0b\u6267\u884cClient/Server\u7684\u56de\u8c03\u51fd\u6570\u3002\u6267\u884c\u56de\u8c03\u51fd\u6570\u7684\u7ebf\u7a0b\u53eb\u505aClient/Server\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002 \u6bcf\u4e2a\u6302\u5728FDBus\u4e0a\u7684\u8fdb\u7a0b\u53ef\u4ee5\u542f\u52a8\u6570\u76ee\u4e0d\u53d7\u9650\u5236\u7684Client\u548cServer\u3002\u8fd9\u4e9bClient/Server\u53ef\u4ee5\u6709\u81ea\u5df1\u4e13\u5c5e\u7684\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u5de5\u4f5c\u7ebf\u7a0b\u3002 \u5728\u5b9e\u4f8b\u5316Client/Server\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2aWorker\u4f5c\u4e3a\u5176\u5de5\u4f5c\u7ebf\u7a0b\u3002\u5982\u679c\u51e0\u4e2aEndpoint\u6307\u5b9a\u540c\u4e00\u7ebf\u7a0b\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u4e1a\u52a1\u5c06\u5171\u4eab\u8be5\u7ebf\u7a0b\uff1b\u5982\u679c\u4e0d\u6307\u5b9a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u90a3\u4e48Context\u5c31\u662f\u9ed8\u8ba4\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002\u4e00\u4e2aEndpoint\u4e0d\u80fd\u6307\u5b9a\u591a\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u3002 FDBus\u8fdb\u7a0b\u90e8\u7f72\u56fe \u00b6 FDBus\u5f00\u53d1\u6846\u67b6 \u00b6 Client-Server\u8bf7\u6c42 \u00b6 \u4eceClient\u5411Server\u53d1\u9001\u7684\u8bf7\u6c42\u5305\u62ec\u4ee5\u4e0b\u7c7b\u578b \u5e26\u8d85\u65f6\u7684\u5f02\u6b65\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u4e0d\u4f1a\u7b49\u5f85Server\u7684\u56de\u590d\u3002\u968f\u540e\u7684\u56de\u590d\u901a\u8fc7\u56de\u8c03\u51fd\u6570onReply()\u83b7\u5f97\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6ca1\u6709\u56de\u590d\u4f1a\u53d6\u6d88\u672c\u6b21\u4ea4\u4e92 \u5e26\u8d85\u65f6\u7684\u540c\u6b65\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u4f1a\u7b49\u5f85\u76f4\u5230\u83b7\u5f97Server\u7684\u56de\u590d\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6ca1\u6709\u56de\u590d\u4f1a\u53d6\u6d88\u672c\u6b21\u4ea4\u4e92 \u65e0\u56de\u590d\u7684\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u65e0\u9700Server\u7684\u56de\u590d\uff0c\u65e2\u4e0d\u7b49\u5f85\uff0c\u4e5f\u4e0d\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002 \u65e0\u8bba\u4f55\u79cd\u8bf7\u6c42\uff0cServer\u90fd\u901a\u8fc7onInvoke()\u56de\u8c03\u51fd\u6570\u6765\u63a5\u6536\u5e76\u5904\u7406\u3002 Client-Server\u8fde\u63a5 \u00b6 Client-Server\u65b9\u6cd5\u8c03\u7528 \u00b6 Server\u7684\u6d88\u606f\u63a8\u9001 \u00b6 Server\u53ef\u4ee5\u4e3b\u52a8\u5411Client\u63a8\u9001\u6d88\u606f\uff0c\u800c\u65e0\u9700Client\u8bf7\u6c42\u3002\u4f46\u662f\u9700\u8981\u6ce8\u518c\u540e\uff0cClient\u624d\u80fd\u6536\u5230\u63a8\u9001\u7684\u6d88\u606f\u3002 \u6d88\u606f\u901a\u8fc7ID\u6ce8\u518c\u3002\u9664\u4e86ID\uff0c\u6ce8\u518c\u65f6\u8fd8\u53ef\u4ee5\u9644\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u201cfilter\u201d\u3002Server\u5728\u63a8\u9001\u6d88\u606f\u65f6\uff0c\u53ea\u6709ID\u548cfilter\u90fd\u5339\u914d\u65f6\uff0cClient\u624d\u80fd\u6536\u5230\u6d88\u606f\u3002 \u5e94\u7528\u573a\u666f\uff1aWiFi Server\u6bcf\u626b\u63cf\u5230\u4e00\u4e2a\u7f51\u7edc\u5c31\u901a\u8fc7\u6d88\u606fID MSG_ID_WIFI_FOUND \u5e7f\u64ad\u51fa\u6765\uff0c\u5e76\u4ee5\u7f51\u7edc\u7684SSID\u4f5c\u4e3a\u201cfilter\u201d\u3002Client\u53ef\u4ee5\u6ce8\u518c\u8be5ID\uff1b\u5982\u679c\u53ea\u5bf9\u7279\u5b9aSSID\u611f\u5174\u8da3,\u6ce8\u518c\u65f6\u8fd8\u53ef\u4ee5\u9644\u52a0SSID\u4f5c\u4e3a\u201cfilter\u201d\u3002\u53ea\u6709\u5177\u6709\u8be5SSID\u7684\u7f51\u7edc\u88ab\u641c\u7d22\u5230\u65f6Client\u624d\u4f1a\u6536\u5230\u63a8\u9001\u6d88\u606f\u3002 \u6d88\u606f\u4ee5\u4e00\u5bf9\u591a\u7684\u5f62\u5f0f\u63a8\u9001\uff0c\u6240\u6709\u6ce8\u518c\u8fc7\u6d88\u606f\u7684Client\u90fd\u80fd\u6536\u5230\u3002 \u4f46\u63a5\u6536\u6d88\u606f\u7684\u5148\u540e\u987a\u5e8f\u6ca1\u6709\u4fdd\u8bc1 \u3002 \u63a8\u9001\uff08\u5e7f\u64ad\uff09\u6d88\u606f\u7684\u6ce8\u518c \u00b6 \u5f53Client\u6ce8\u518c\u6d88\u606f\u65f6\uff0cServer\u80fd\u591f\u901a\u8fc7onSubscribe()\u56de\u8c03\u51fd\u6570\u83b7\u77e5\u3002 \u8be5\u56de\u8c03\u51fd\u6570\u7684\u76ee\u7684\u662f\u5728Client\u6ce8\u518c\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0cServer\u6709\u673a\u4f1a\u5c06\u5c5e\u6027\u7684\u521d\u59cb\u503c\u53d1\u9001\u7ed9Client\u7aef\u3002\u901a\u5e38\u53ea\u6709\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u65f6\uff0cServer\u624d\u4f1a\u901a\u8fc7\u6d88\u606f\u5c06\u53d8\u5316\u63a8\u9001\u7ed9Client\u7aef\u3002\u6709\u4e86\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u5f53Client\u6ce8\u518c\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0c\u5373\u4f7f\u5c5e\u6027\u6ca1\u6709\u53d8\u5316\u4e5f\u80fd\u83b7\u5f97\u5c5e\u6027\u7684\u5f53\u524d\u503c\uff0c\u4e14\u65e0\u9700\u53d1\u9001\u989d\u5916\u7684\u8bf7\u6c42\u3002 \u6ce8\u518c\u5e7f\u64ad\u6d88\u606f \u00b6 \u5bfb\u5740\u548c\u7ec4\u7f51 \u00b6 Server\u5730\u5740 \u00b6 Server\u5730\u5740\u4ee3\u8868Server\u5728\u7f51\u7edc\u4e2d\u7684\u4f4d\u7f6e\uff0c\u901a\u8fc7\u8be5\u5730\u5740Client\u53ef\u4ee5\u5b9a\u4f4d\u5e76\u548cServer\u5efa\u7acb\u901a\u4fe1\u3002 Server\u53ef\u4ee5\u540c\u65f6\u7ed1\u5b9a\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u53ef\u4ee5\u63a5\u53d7Client\u7684\u8fde\u63a5\u3002\u4e00\u65e6\u8fde\u63a5\u4e0a\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u63d0\u4f9b\u540c\u6837\u7684\u670d\u52a1\uff0c\u6240\u4ee5Client\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u5730\u5740\u8fde\u63a5\u3002 Server\u5730\u5740\u662f\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684URL\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a TCP socket\uff1atcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 Unix domain socket\uff1afile://socket\u6587\u4ef6\u5730\u5740 Server\u547d\u540d\u4e0e\u540d\u5b57\u89e3\u6790 \u00b6 Server\u5730\u5740\u4e0d\u76f4\u89c2\uff0c\u4f1a\u968f\u7ec4\u7f51\u65b9\u5f0f\u53d8\u5316\uff0c\u4f7f\u7528\u4e0d\u65b9\u4fbf\u3002 FDBus\u91c7\u7528\u7c7b\u4f3cDNS\u65b9\u5f0f\u5b9e\u73b0Server\u5bfb\u5740\uff1a\u6bcf\u4e2aServer\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff0c\u5e76\u8fd0\u884c\u4e00\u4e2a\u53ebNameServer\u7684\u670d\u52a1\uff0c\u8d1f\u8d23\u4e3aServer\u5206\u914d\u5730\u5740\uff0c\u7ba1\u7406Server\u540d\u5b57-\u5730\u5740\u6620\u5c04\uff0c\u89e3\u6790Server\u540d\u5b57\uff0c\u53d1\u5e03Server\u5730\u5740 \u4e3a\u652f\u6301Server\u540d\u5b57\u5bfb\u5740\uff0c\u5728\u4e24\u79cdURL\u4e4b\u5916\u589e\u52a0\u4e00\u79cd\u683c\u5f0f\uff0c\u4f5c\u4e3a\u540d\u5b57\u5730\u5740\uff0c\u5982\u4e0b\u6240\u793a svc://server\u540d\u5b57 \u540d\u5b57\u5730\u5740\u662f\u865a\u62df\u5730\u5740\u3002\u65e0\u8bbaServer\u4f4d\u4e8e\u4f55\u5904\uff0c\u53ea\u8981\u5b83\u7684\u540d\u5b57\u5730\u5740\u4e0d\u53d8\uff0cClient\u90fd\u53ef\u4ee5\u901a\u8fc7\u8be5\u5730\u5740\u4e0e\u4e4b\u5efa\u7acb\u8054\u7cfb\u3002 \u5982\u679cServer\u7ed1\u5b9a\u540d\u5b57\u5730\u5740\uff0cNameServer\u4f1a\u4e3a\u5176\u5206\u914d\u5b9e\u9645\u5730\u5740(tcp://\u6216file://\u5f00\u5934\u7684\u5730\u5740)\uff0c\u5e76\u5c06\u540d\u5b57\u548c\u5730\u5740\u6ce8\u518c\u5230\u6620\u5c04\u8868\u91cc \u5982\u679cClient\u8fde\u63a5\u540d\u5b57\u5730\u5740\uff0cNameServer\u4f1a\u6839\u636e\u540d\u5b57\u67e5\u627e\u5230Server\u7684\u5b9e\u9645\u5730\u5740\uff0c\u9009\u62e9\u4e00\u4e2a\u6700\u5408\u9002\u7684\u5730\u5740\u53d1\u5e03\u7ed9Client\u3002Client\u901a\u8fc7\u8be5\u5730\u5740\u4e0eServer\u5efa\u7acb\u70b9\u5bf9\u70b9\u7684\u76f4\u8fde\u3002 \u5730\u5740\u5206\u914d\u8868 \u00b6 NameServer\u7528\u5982\u4e0b\u89c4\u5219\u5206\u914dServer\u5730\u5740\uff1a TCP Socket Unix Domain Socket HostServer Port 60000 /tmp/fdb-hs NameServer Port 60001 /tmp/fdb-ns User Server Port 60002 \u2013 Port 65535 /tmp/fdb-ipc0, /tmp/fdb-ipc1 \u2026 Server\u540d\u5b57\u89e3\u6790 \u00b6 HostServer\u4e0e\u8282\u70b9\u540d\u5b57 \u00b6 NameServer\u53ea\u80fd\u89e3\u6790\u672c\u5730Server\u540d\u5b57\uff0c\u4f46Server\u53ef\u80fd\u4f4d\u4e8e\u7f51\u7edc\u4e2d\u4efb\u610f\u8282\u70b9\u4e0a\u3002\u4e3a\u4e86\u5c06\u6574\u4e2a\u7f51\u7edc\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u9700\u8981\u542f\u52a8HostServer \u7f51\u7edc\u91cc\u53ea\u6709\u4e00\u4e2aHostServer\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e8e\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\u4e0a\uff0c\u901a\u5e38\u662f\u8fde\u63a5\u6027\u80fd\u8f83\u597d\u7684\u8282\u70b9 \u6240\u6709\u8282\u70b9\u7684NameServer\u90fd\u8fde\u63a5\u5230HostServer\u4e0a\uff0c\u5c06\u672c\u8282\u70b9\u7684\u540d\u5b57\uff0cIP\u5730\u5740\u53d1\u7ed9HostServer\u3002HostServer\u6536\u96c6\u5404\u8282\u70b9\u7684\u8282\u70b9\u540d\u548cIP\u5730\u5740\u5e76\u6ce8\u518c\u5230\u8868\u91cc \u540c\u65f6NameServer\u4eceHostServer\u5904\u83b7\u5f97\u8868\u91cc\u5176\u5b83\u8282\u70b9\u4e0aNameServer\u4fe1\u606f\uff0c\u5e76\u9010\u4e00\u4e0e\u5b83\u4eec\u5efa\u7acb\u8fde\u63a5\u3002\u8fd9\u6837\u8282\u70b9\u91ccNameServer\u548c\u552f\u4e00\u7684HostServer\u6784\u6210\u661f\u5f62\u8fde\u63a5\uff0c\u800c\u5404NameServer\u4e4b\u95f4\u4e24\u4e24\u76f8\u8fde\u3002 Server\u540d\u5b57\u7684\u552f\u4e00\u6027 \u00b6 \u5728\u8282\u70b9\u5185\u90e8\uff0cServer\u540d\u5b57\u5fc5\u987b\u552f\u4e00\uff0c\u5426\u5219\u65e0\u6cd5\u5728NameServer\u91cc\u6ce8\u518c \u5728\u4e0d\u540c\u8282\u70b9\u4e0a\uff0cServer\u53ef\u4ee5\u91cd\u540d\u3002\u4f46\u8fd9\u6837\u4f1a\u9020\u6210\u56f0\u60d1\uff1a\u5047\u5982Client\u5df2\u7ecf\u8fde\u63a5\u5230\u8282\u70b9A\u4e0a\u7684MediaServer\uff0c\u4f46\u8282\u70b9B\u4e0a\u53c8\u542f\u52a8\u4e86MediaServer\u3002\u6b64\u65f6\u8be5Client\u53c8\u4f1a\u6536\u5230MediaServer\u4e0a\u7ebf\u7684\u901a\u77e5\u3002\u662f\u8fde\u8fd8\u662f\u4e0d\u8fde\uff1f Client\u63d0\u4f9b\u4e00\u4e2a\u56de\u8c03\u51fd\u6570connectionEnabled()\uff0c\u5141\u8bb8Client\u5728\u670d\u52a1\u91cd\u540d\u65f6\u9009\u62e9\u8fde\u63a5\u54ea\u4e2a\u8282\u70b9\u7684\u670d\u52a1\u3002 \u8d85\u65f6\u4e0e\u91cd\u8fde \u00b6 \u8d85\u65f6\u4e0e\u91cd\u8fde\u786e\u4fdd\u7f51\u7edc\u4e0d\u7a33\u6216\u5f02\u5e38\u65f6FDBus\u5404\u670d\u52a1\u59cb\u7ec8\u4fdd\u6301\u8fde\u63a5\uff1b\u540c\u65f6\u786e\u4fdd\u4ee5\u4efb\u4f55\u987a\u5e8f\u542f\u52a8Client/Server\uff0c\u540d\u5b57\u89e3\u6790\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u5b83\u4eec\u4e4b\u95f4\u90fd\u80fd\u8fde\u63a5\u4e0a HostServer\u6bcf\u79d2\u949f\u5411\u5404NameServer\u5e7f\u64ad\u5fc3\u8df3\u6d88\u606f\u3002\u5982\u679c5\u79d2\u5185\u6ca1\u6709\u6536\u5230\u67d0\u4e2aNameServer\u7684\u786e\u8ba4\u5219\u8ba4\u4e3a\u8be5NameServer\u6240\u5728\u7684\u8282\u70b9\u6389\u7ebf\uff0c\u5c06\u6e05\u9664\u8be5\u8282\u70b9\u7684\u6ce8\u518c\u4fe1\u606f \u6bcf\u4e2aNameServer\u671f\u5f85\u6bcf\u79d2\u949f\u90fd\u80fd\u6536\u5230HostServer\u7684\u5fc3\u8df3\u5305\u3002\u5982\u679c5\u79d2\u5185\u6ca1\u6709\u6536\u5230\u5219\u8ba4\u4e3aHostServer\u6389\u7ebf\uff0c\u5c06\u542f\u52a8500\u6beb\u79d2\u95f4\u9694\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u4e0eHostServer\u91cd\u8fde \u5f53NameServer\u542f\u52a8\u65f6\u6ca1\u6709\u83b7\u5f97IP\u5730\u5740\uff0c\u5c06\u542f\u52a8300\u6beb\u79d2\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u53cd\u590d\u83b7\u53d6IP\u5730\u5740 \u5f53Server/Client\u5e0c\u671bNameServer\u89e3\u6790\u540d\u5b57\u65f6\u65e0\u6cd5\u4e0eNameServer\u53d6\u5f97\u8054\u7cfb\uff0c\u5c06\u542f\u52a8300\u6beb\u79d2\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u53cd\u590d\u8fde\u63a5NameServer Commands \u00b6 host_server: start host server name_server: start name server Usage: name_server [ -n host_name] [-u host_url] name_server -n \u201chead unit\u201d Start name server and connect to local host server name_server \u2013n \u201cICU\u201d \u2013u tcp://192.168.1.100:60000 Start name server and connect to remote host server lssvc:list all services lssvc List all services in FDBus lssvc \u2013f List all services and keep monitoring Logging \u00b6 Log\u7cfb\u7edf \u00b6 Log\u7cfb\u7edf\u53ef\u4ee5\u6293\u53d6FDBus\u4e0a\u6240\u6709\u6d88\u606f\uff0c\u5305\u62ec\u672c\u4e3b\u673a\u548c\u6240\u6709\u8054\u7f51\u7684\u4e3b\u673a Log\u7cfb\u7edf\u540c\u65f6\u8fd8\u652f\u6301\u8c03\u8bd5Log\u8f93\u51fa Log\u7cfb\u7edf\u4e5f\u57fa\u4e8eFDBus\u5b9e\u73b0\uff1a\u6240\u6709Client/Server\u90fd\u5185\u7f6eLogClient\uff0c\u540c\u65f6\u542f\u52a8LogServer\u3002LogClient\u628aFDBus\u6d88\u606f\u548c\u8c03\u8bd5\u6d88\u606f\u53d1\u7ed9LogServer\u3002 LogServer\u53ef\u4ee5\u628a\u6536\u96c6\u5230\u7684Log\u6253\u5370\u5728\u7ec8\u7aef\u4e0a\u3002\u4e5f\u53ef\u4ee5\u542f\u52a8LogViewer\u8fde\u63a5\u5230LogServer\u4e0a\u6765\u67e5\u770bLog \u8c03\u8bd5Log\u8f93\u51fa \u00b6 \u4f18\u5148\u7ea7\uff08\u4ece\u4f4e\u5230\u9ad8\uff09\uff1a Debug Info Warning Error Fatal \u8f93\u51fa\u65f6LogServer\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u7b49\u7ea7\uff1b\u7ea7\u522b\u4f4e\u7684\u4e0d\u8f93\u51fa \u8c03\u8bd5Log\u8f93\u51faAPI \u2013 \u5e26tag\u7248\u672c \u00b6 FDB_TLOG_D(tag, format, param1, param2\u2026)\uff1a\u8f93\u51fa\u8c03\u8bd5\u7ea7\u522b\u7684Log\u3002Tag\u901a\u5e38\u4ee3\u8868\u6a21\u5757\u540d\uff1bFormat, param1, param2\u2026\u683c\u5f0f\u4e0eprintf()\u76f8\u540c\u3002 \u5bf9\u4e8e\u4e0d\u540c\u7b49\u7ea7\u5206\u522b\u63d0\u4f9b\u4ee5\u4e0b\u65b9\u6cd5 FDB_TLOG_I \u2013 \u8f93\u51fainfo\u7b49\u7ea7\u7684log FDB_TLOG_W \u2013 \u8f93\u51fawarning\u7b49\u7ea7\u7684log FDB_TLOG_E \u2013 \u8f93\u51faerror\u7b49\u7ea7\u7684log FDB_TLOG_F \u2013 \u8f93\u51fafatal\u7b49\u7ea7\u7684log \u8c03\u8bd5Log\u8f93\u51faAPI \u2013 \u65e0tag\u7248\u672c \u00b6 \u5728\u6587\u4ef6\u91cc\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u5b9a\u4e49\u65e0tag\u7248\u672c\uff1a #define _FDB_LOG_TAG_ \u201cmy_tag\" #include <common_base/fdb_log_trace.h> \u4ee5\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528FDB_LOG_D(format, param1, param2\u2026)\uff1a\u8f93\u51fa\u8c03\u8bd5\u7ea7\u522b\u7684Log\u3002Format, param1, param2\u2026\u683c\u5f0f\u4e0eprintf()\u76f8\u540c\u3002Tag\u4f7f\u7528\u7684\u5c31\u662f_FDB_LOG_TAG_\u3002 \u5bf9\u4e8e\u4e0d\u540c\u7b49\u7ea7\u5206\u522b\u63d0\u4f9b\u4ee5\u4e0b\u65b9\u6cd5 FDB_LOG_I \u2013 \u8f93\u51fainfo\u7b49\u7ea7\u7684log FDB_LOG_W \u2013 \u8f93\u51fawarning\u7b49\u7ea7\u7684log FDB_LOG_E \u2013 \u8f93\u51faerror\u7b49\u7ea7\u7684log FDB_LOG_F \u2013 \u8f93\u51fafatal\u7b49\u7ea7\u7684log LogServer \u00b6 \u7cfb\u7edf\u91cc\u53ea\u80fd\u5b58\u5728\u4e00\u4e2aLogServer\uff0c\u542f\u52a8\u65b9\u5f0f\u4e3a\uff1alogsvc [options] FDBus Log\u9009\u9879: -q \u7981\u6b62\u8f93\u51faFDBus\u7684request\u7c7b\u578b\u6d88\u606f -p \u7981\u6b62\u8f93\u51faFDBus\u7684reply\u7c7b\u578b\u6d88\u606f -b \u7981\u6b62\u8f93\u51faFDBus\u7684broadcast\u7c7b\u578b\u6d88\u606f -s \u7981\u6b62\u8f93\u51faFDBus\u7684subscribe\u7c7b\u578b\u6d88\u606f -f \u7981\u6b62\u8f93\u51fa\u6240\u6709FDBus\u6d88\u606f -o \u7981\u6b62\u8f93\u51fa\u5230\u7ec8\u7aef\u4e0a\uff08\u53ef\u4ee5\u901a\u8fc7LogView\u67e5\u770b\uff09 -c \u5982\u679c\u6d88\u606f\u662fraw data\uff0c\u63a7\u5236raw data\u6700\u5927\u8f93\u51fa\u957f\u5ea6 -e ep1,ep2\u2026 \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9aendpoint\u7684FDBus\u6d88\u606f -m host1,host2\u2026 \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9a\u4e3b\u673a\u7684FDBus\u6d88\u606f \u8c03\u8bd5 Log\u9009\u9879: -l level \u8bbe\u7f6e\u8c03\u8bd5Log\u7684\u8f93\u51fa\u7b49\u7ea7\uff0c\u53d6\u503c\u4e3a 0-verbose 1-debug 2-info 3-warning 4-error 5-fatal -d \u7981\u6b62\u8f93\u51fa\u8c03\u8bd5Log -t tag1,tag2\u2026 \u4ec5\u8f93\u51fa\u6307\u5b9atag\u7684\u8c03\u8bd5log -M [host1,host2\u2026] \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9a\u4e3b\u673a\u7684\u8c03\u8bd5Log \u8f93\u51fa\u542b\u4e49 ==== fdbus monitor log format: ==== [F] [pid of message sender] [host name of message sender] [message sender name -> message receiver name] [service name of fdbus] [object id] [message type] [message code] [serial number] [size of payload] [time stamp] message details ==== debug trace log format: ==== [D] [level: V-verbose; D-Debug; I-Information; W-Warning; E-Error; F-Fatal; S-Silence] [tag] [pid of log generator] [host name of log generator] [time stamp] log information LogViewer \u00b6 \u7cfb\u7edf\u91cc\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u8f93\u51fa\u5185\u5bb9\u5b8c\u5168\u76f8\u540c\u7684LogViewer\uff0c\u542f\u52a8\u65b9\u5f0f\u4e3a\uff1alogclt [options] logclt \u2013n [options] \u914d\u7f6eLogServer\u3002\u914d\u7f6e\u9009\u9879options\u548cLogServer\u7684\u542f\u52a8\u9009\u9879\u76f8\u540c logclt \u542f\u52a8LogViewer\u5e76\u628a\u8f93\u51fa\u6253\u5370\u5728stdout\uff08\u7ec8\u7aef\u4e0a\uff09","title":"FDBus API"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#fdbus-api","text":"","title":"FDBus API"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_1","text":"\u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42\u5305\u542b\u4e86\u5b9e\u73b0FDBus\u6240\u9700\u8981\u7684\u8ddf\u5e73\u53f0\u76f8\u5173\u7684API\u3002\u8fd9\u4e9bAPI\u65e2\u53ef\u4ee5\u88abFDBus\u672c\u8eab\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5f00\u53d1\u8de8\u5e73\u53f0\u7684\u5e94\u7528\u3002 \u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u5305\u62ec Thread (CBaseThread.h) Mutex and Auto lock (CBaseMutexLock.h) Semaphore (CBaseSemaphore.h) Pipe (CBasePipe.h) Socket (CBaseSocketFactory.h/CSocketImp.h) Event Loop (CbaseEventLoop.h/CFdEventLoop.h) \u5176\u5b83\u7cfb\u7edf\u65e0\u5173API (CBaseSysDep.h) \u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u662f\u5b9e\u73b0\u6574\u4e2aFDBus\u7684\u57fa\u7840\uff0c\u76ee\u524d\u57fa\u7840\u5e73\u53f0\u7ec4\u4ef6\u652f\u6301QNX\uff0cWindows\u548cLinux\u3002","title":"\u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#thread-cbasethread","text":"\u521b\u5efa\uff0c\u9000\u51fa\u7ebf\u7a0b\u4ee5\u53ca\u8bbe\u7f6e\u7ebf\u7a0b\u5c5e\u6027 \u7c7bCBaseThread API\u2014\u2014\u4f9b\u5916\u90e8\u8c03\u7528 CBaseThread()\uff1a\u521b\u5efa\u7ebf\u7a0b\u5b9e\u4f8b\uff1b\u6b64\u65f6\u7ebf\u7a0b\u5e76\u672a\u542f\u52a8 start(bool create_thread)\uff1a\u542f\u52a8\u7ebf\u7a0b\u5e76\u8fd0\u884c\u7ebf\u7a0b\u4e3b\u5faa\u73afrun()\u51fd\u6570\u3002\u5982\u679ccreate_thread\u4e3atrue\u5219\u521b\u4e00\u4e2a\u65b0\u7ebf\u7a0b\uff1b\u5426\u5219\u5728\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u4e3b\u5faa\u73af join()\uff1a(\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\uff09\u7b49\u5f85\u7ebf\u7a0b\u9000\u51fa isSelf()\uff1a\u5224\u65ad\u5f53\u524d\u662f\u4e0d\u662f\u5728\u672c\u7ebf\u7a0b\u4e2d\u8fd0\u884c setPriority(int32_t level)\uff1a\u8bbe\u7f6e\u7ebf\u7a0b\u4f18\u5148\u7ea7 \u7c7bCBaseThread\u865a\u51fd\u6570\u2014\u2014\u4f9b\u5b50\u7c7b\u6269\u5c55 run()\uff1a\u7ebf\u7a0b\u4e3b\u5faa\u73af tearup()\uff1a\u5728\u8fdb\u7a0b\u4e3b\u5faa\u73af\u5f00\u59cb\u524d\u8c03\u7528\uff0c\u548c\u4e3b\u5faa\u73af\u8fd0\u884c\u4e8e\u540c\u4e00\u7ebf\u7a0b\u4e2d\uff0c\u6267\u884c\u5fc5\u8981\u7684\u521d\u59cb\u5316\u548c\u8bbe\u7f6e teardown()\uff1a\u5728\u8fdb\u7a0b\u4e3b\u5faa\u73af\u7ed3\u675f\u540e\u8c03\u7528\uff0c\u548c\u4e3b\u5faa\u73af\u8fd0\u884c\u4e8e\u540c\u4e00\u7ebf\u7a0b\u4e2d\uff0c\u6267\u884c\u73b0\u573a\u6e05\u7406\u5de5\u4f5c\u3002","title":"Thread - CBaseThread"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#mutex-cbasemutexlock","text":"\u8de8\u5e73\u53f0\u7684\u4e92\u65a5\u9501 \u7c7bCBaseMutexLock\u7684API CBaseMutexLock()\uff1a\u521b\u5efa\u4e92\u65a5\u9501\u5b9e\u4f8b lock()\uff1a\u52a0\u9501 unlock()\uff1a\u89e3\u9501","title":"Mutex - CBaseMutexLock"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#autolock-cautolock","text":"Auto lock\u548cMutex\u4e00\u8d77\u4f7f\u7528\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u81ea\u52a8\u52a0\u9501\u548c\u89e3\u9501\uff0c\u5c24\u5176\u662f\u9632\u6b62\u5fd8\u8bb0\u89e3\u9501\uff0c\u9020\u6210\u6b7b\u9501\u3002 \u4ee5Mutex\u4e3a\u53c2\u6570\u521b\u5efaCAutoLock\u53d8\u91cf\uff0c\u5c06\u81ea\u52a8\u8c03\u7528Mutex::lock()\u3002 \u5f53CAutoLock\u53d8\u91cf\u51fa\u4e86\u4f5c\u7528\u57df\u540e\u4f1a\u88ab\u6790\u6784\u3002\u5728\u6790\u6784\u8fc7\u7a0b\u4e2d\u4f1a\u81ea\u52a8\u8c03\u7528Mutex::unlock()\u3002","title":"Autolock - CAutoLock"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#semaphore-cbasesemaphore","text":"\u8de8\u5e73\u53f0\u7684\u4fe1\u53f7\u91cf\u5b9e\u73b0 \u7c7bCBaseSemaphore\u7684API CBaseSemaphore(uint32_t initialCount)\uff1a\u521b\u5efa\u4fe1\u53f7\u91cf\u5b9e\u4f8b\u3002initialCount\u6307\u5b9a\u4fe1\u53f7\u91cf\u7684\u521d\u59cb\u503c\u3002 post()\uff1a\u53d1\u9001\u4fe1\u53f7\u3002\u5982\u679c\u6ca1\u6709\u7ebf\u7a0b\u5728\u7b49\u5f85\u5219\u4fe1\u53f7\u91cf\u52a01\uff0c\u5426\u5219\u5524\u9192\u7b49\u5f85\u7ebf\u7a0b wait(int32_t milliseconds)\uff1a\u7b49\u5f85\u4fe1\u53f7\u3002\u5982\u679c\u4fe1\u53f7\u91cf\u4e3a0\u5219\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u4fe1\u53f7\u91cf\u51cf1\u540e\u9000\u51fa\u3002\u4f11\u7720\u7b49\u5f85\u65f6\uff0c\u5982\u679cmilliseconds\u4e3a0\u5219\u65e0\u9650\u7b49\u5f85\u76f4\u5230\u88abpost()\uff0c\u5426\u5219\u6307\u5b9a\u8d85\u65f6\u7684\u6beb\u79d2\u6570\u3002","title":"Semaphore - CBaseSemaphore"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#pipe-cbasepipe","text":"\u8de8\u5e73\u53f0\u7684\u533f\u540d\u7ba1\u9053 \u7c7bCBasePipe\u7684API \u2013 CBasePipe() \u521b\u5efa\u533f\u540d\u7ba1\u9053 open(bool blockOnRead, bool blockOnWrite)\uff1a\u6253\u5f00\u7ba1\u9053\uff0c\u521b\u5efa\u8bfb\u5199\u4e24\u7aef\u7684\u6587\u4ef6\u53e5\u67c4\u3002 blockOnWrite\u4e3atrue\u65f6\uff0c\u5982\u679c\u7ba1\u9053\u7f13\u5b58\u6ee1\u5219write()\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u7acb\u523b\u8fd4\u56de\uff1b blockOnRead\u4e3atrue\u65f6\uff0c\u5982\u679c\u7ba1\u9053\u91cc\u6ca1\u6709\u6570\u636e\u5219read()\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4f11\u7720\u7b49\u5f85\uff0c\u5426\u5219\u7acb\u523b\u8fd4\u56de getReadFd()/ getWriteFd()\uff1a\u5206\u522b\u5f97\u5230\u7ba1\u9053\u8bfb\u7aef\u548c\u5199\u7aef\u6587\u4ef6\u53e5\u67c4 read(void *buf, uint32_t nBytes)\uff1a\u4ece\u8bfb\u7aef\u8bfb\u53d6nBytes\u7684\u6570\u636e\u653e\u5728buf\u91cc write (const void *buf, uint32_t nBytes)\uff1a\u4ecebuf\u91cc\u53d6\u51fanBytes\u7684\u6570\u636e\u5199\u5165\u5199\u7aef","title":"Pipe - CBasePipe"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#socket","text":"\u8de8\u5e73\u53f0\u7684Socket\u5b9e\u73b0 Unix\u5e73\u53f0\u4e0a\u652f\u6301TCP socket\u548cUnix domain socket\uff1bWindows\u5e73\u53f0\u53ea\u652f\u6301TCP socket\u3002 Socket\u5730\u5740\u7684url\u5b9a\u4e49\u5982\u4e0b\uff1a TCP socket\uff1atcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 Unix domain socket\uff1afile://socket\u6587\u4ef6\u5730\u5740 Socket\u5de5\u5382\u7c7bCBaseSocketFactory API CClientSocketImp *createClientSocket(const char *url)\uff1a\u521b\u5efa\u5e76\u8fd4\u56desocket\u7684\u5ba2\u6237\u7aef\uff1b\u6839\u636eurl\u51b3\u5b9a\u521b\u5efa\u7684\u662fTCP socket\u8fd8\u662fUnix domain socket CServerSocketImp *createServerSocket(const char *url)\uff1a\u521b\u5efa\u5e76\u8fd4\u56desocket\u7684server\u7aef\uff1b\u6839\u636eurl\u51b3\u5b9a\u521b\u5efa\u7684\u662fTCP socket\u8fd8\u662fUnix domain socket \u5ba2\u6237\u7aefsocket CClientSocketImp API CSocketImp *connect()\uff1a\u8fde\u63a5\u5230Server\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u540e\u7684socket \u670d\u52a1\u5668\u7aefsocket CServerSocketImp API bool bind()\uff1a\u7ed1\u5b9a\u5730\u5740 CSocketImp *accept()\uff1a\u63a5\u6536Client\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u7684socket Socket CSocketImp API send(const uint8_t *data, int32_t size)\uff1a\u4ecedata\u91cc\u53d6\u51fa\u5927\u5c0f\u4e3asize\u7684\u6570\u636e\u53d1\u7ed9\u5bf9\u65b9 recv(uint8_t *data, int32_t size)\uff1a\u63a5\u6536\u5bf9\u65b9\u7684\u6570\u636e\uff0c\u5b58\u50a8\u5728data\u91cc\uff0c\u603b\u6570\u4e0d\u8d85\u8fc7size\u3002","title":"Socket"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#event-loop","text":"\u7ebf\u7a0b\u7684\u4e3b\u5faa\u73af\uff0c\u5206\u4e3a\u4e24\u7c7b CThreadEventLoop \u2013 \u57fa\u4e8eSemaphore\u5b9e\u73b0\uff0c\u80fd\u591f\u5904\u7406Job\u548cTimer CFdEventLoop \u2013 \u57fa\u4e8eselect()\u5b9e\u73b0\uff0c\u9664\u4e86Job\u548cTimer\uff0c\u8fd8\u80fd\u8fd0\u884cWatch\u5904\u7406\u6587\u4ef6\u8bfb\u5199\u901a\u77e5 EventLoop\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u4f7f\u7528\uff0c\u800c\u662f\u88abCBaseWorker\u5c01\u88c5\u6210worker\u6765\u4f7f\u7528","title":"Event Loop"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_2","text":"\u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u57fa\u4e8e\u57fa\u7840\u5e73\u53f0\u62bd\u8c61\u5c42\uff0c\u63d0\u51fa\u57fa\u4e8e\u591a\u7ebf\u7a0b\u7684\u8fdb\u7a0b\u5f00\u53d1\u6a21\u578b\uff0c\u5305\u62ec\u5982\u4e0b\u7ec4\u4ef6 Worker (CBaseWorker.h) Timer (CBaseTimer.h) Watch (CBaseWatch.h/CMethodWatch.h) Job (CBaseJob.h/CMethodJob.h) Notification (CBaseNotification.h/CMethodNotification.h/CBaseNotificationCenter.h) \u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42\u4e5f\u662fFDBus\u5b9e\u73b0\u7684\u57fa\u7840","title":"\u9ad8\u7ea7\u5e73\u53f0\u62bd\u8c61\u5c42"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#job-cbasejob","text":"Job\u662f\u53ef\u4ee5\u5728Worker\u4e0a\u8fd0\u884c\u7684\u5bf9\u8c61\u3002Job\u88ab\u63d0\u4ea4\u5230Worker\u7684\u666e\u901a\u6216\u7d27\u6025\u961f\u5217\uff0c\u6309FIFO\u65b9\u5f0f\u5904\u7406 \u63d0\u4ea4\u7ed9Worker\u8fd0\u884c\u7684Job\u5fc5\u987b\u662f\u7528new\u521b\u5efa\u7684\u5806\u4e0a\u5bf9\u8c61\uff0c\u4e0d\u80fd\u662f\u6808\u6216data\u533a\u5bf9\u8c61\u3002\u8fd9\u662f\u56e0\u4e3aWorker\u4f1a\u8d1f\u8d23\u9500\u6bc1\u5904\u7406\u5b8c\u6bd5\u7684Job\u3002 Job\u7684\u751f\u547d\u5468\u671f\u901a\u8fc7shared_ptr\u7ba1\u7406\uff1a\u5f53Job\u4f4d\u4e8e\u961f\u5217\u4e2d\u65f6\u5f15\u7528\u8ba1\u6570\u52a01\uff1b\u5f53Job\u8fd0\u884c\u5b8c\u6bd5\u5f15\u7528\u8ba1\u6570\u51cf1\u3002\u5f53\u5f15\u7528\u8ba1\u6570\u4e3a0\u65f6\u9500\u6bc1\u8be5Job\u3002 Job\u7684\u63d0\u4ea4\u5206\u4e3a\u540c\u6b65\u65b9\u5f0f\u548c\u5f02\u6b65\u65b9\u5f0f\uff1a\u540c\u6b65\u65b9\u5f0f\u65f6\uff0cJob\u63d0\u4ea4\u7ed9Worker\u540e\uff0c\u4f1a\u4e00\u76f4\u963b\u585e\u76f4\u5230Job\u8fd0\u884c\u5b8c\u6bd5\uff1b\u5f02\u6b65\u65b9\u5f0f\u4e0b\uff0cJob\u4e00\u65e6\u63d0\u4ea4\u7acb\u523b\u8fd4\u56de\uff0c\u4e0d\u4f1a\u963b\u585e\u3002 Job\u63d0\u4f9b\u4ee5\u4e0b\u865a\u51fd\u6570\u4f9b\u6269\u5c55 void run(CBaseWorker *worker, Ptr &ref)\uff1aJob\u7684\u6267\u884c\u4f53\uff0c\u88abWorker\u8c03\u7528\uff0c\u5728Worker\u7ebf\u7a0b\u4e2d\u8fd0\u884c\u3002worker\u4e3a\u8fd0\u884c\u8be5Job\u7684Worker\uff0cref\u4e3aJob\u7684\u5f15\u7528\uff0c\u7528\u4e8e\u63a7\u5236Job\u7684\u751f\u547d\u5468\u671f\u3002\u5982\u679c\u5728run()\u589e\u52a0\u8be5\u5f15\u7528\u5219Worker\u5904\u7406\u5b8cJob\uff0c\u5bf9\u5f15\u7528\u8ba1\u6570\u51cf1\u65f6\u7531\u4e8e\u4e0d\u4e3a0\uff0c\u4e0d\u4f1a\u91ca\u653e\u8be5Job\u3002 forceRun(bool force)\uff1a\u5982\u679cforce\u4e3atrue\u8868\u660e\u8be5Job\u4e0d\u80fd\u88ab\u4e22\u5f03(\u89c1\u540e)","title":"Job - CBaseJob"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#worker-cbaseworker","text":"Worker\u7ee7\u627f\u4e8eCBaseThread\uff0c\u662f\u53ef\u4ee5\u5904\u7406Timer\uff0cJob\u548cWatch\u7684\u7ebf\u7a0b Worker\u7684\u5b9e\u73b0\u4e3b\u4f53\u662fEvent Loop\u3002\u542f\u52a8Worker\u7ebf\u7a0b\u65f6\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528CThreadEventLoop\u8fd8\u662fCFdEventLoop\u3002\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u8bfb\u5199\u8981\u6c42\u9009\u62e9\u524d\u8005\uff0c\u5426\u5219\u9009\u62e9\u540e\u8005\u3002 Worker\u5185\u7f6e\u4e24\u6761\u961f\u5217\u5904\u7406Job\uff1a\u666e\u901a\u961f\u5217\u548c\u7d27\u6025\u961f\u5217\u3002\u53ea\u6709\u5904\u7406\u5b8c\u7d27\u6025\u961f\u5217\u540e\u624d\u5904\u7406\u666e\u901a\u961f\u5217\u7684Job\u8bf7\u6c42\u3002 CBaseWorker\u7684API CBaseWorker(uint32_t normal_queue_size = 0, uint32_t urgent_queue_size = 0)\uff1a\u521b\u5efaWorker\u5b9e\u4f8b\u3002 normal_queue_size\u8bbe\u7f6e\u666e\u901a\u961f\u5217\u957f\u5ea6\u4e0a\u9650\uff1b urgent_queue_size\u8bbe\u7f6e\u7d27\u6025\u961f\u5217\u957f\u5ea6\u4e0a\u9650\u3002\u5982\u679c\u961f\u5217\u4e2d\u5f85\u5904\u7406\u7684Job\u4e2a\u6570\u8d85\u51fa\u4e0a\u9650\u5219\u65e0\u6cd5\u53d1\u9001\u3002 \u201d0\u201d\u8868\u793a\u65e0\u9650\u5236 \u3002 start(uint32_t flag = FDB_WORKER_DEFAULT)\uff1a\u5f00\u59cb\u8fd0\u884cWorker\u7684Event Loop\u3002Flag\u662f\u5982\u4e0b\u4f4d\u57df\u7684\u7ec4\u5408 FDB_WORKER_EXE_IN_PLACE\uff1a\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u8868\u793a\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u8fd0\u884cEvent Loop\uff1b\u5426\u5219\u5c31\u5728\u5f53\u524d\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884cEvent Loop\uff1b FDB_WORKER_ENABLE_FD_LOOP\uff1a\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u7ebf\u7a0b\u4e0d\u80fd\u7b49\u5f85\u6587\u4ef6\u8bfb\u5199\u901a\u77e5\uff0c\u5373\u4e0d\u652f\u6301Watch\uff0c\u53ea\u80fd\u8fd0\u884cTimer\u548cJob\uff1b\u5426\u5219\u652f\u6301Watch\u3002 exit(int32_t exit_code = 1)\uff1a\u9000\u51faWorker\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002\u8be5\u51fd\u6570\u8c03\u7528\u540e\uff0c\u5982\u679cWorker\u6b63\u5728\u5904\u7406Job\u5219\u65e0\u6cd5\u7acb\u523b\u9000\u51fa\uff0c\u8981\u7b49\u5230Job\u5904\u7406\u5b8c\u6bd5\u624d\u80fd\u9000\u51fa\u3002exit_code\u5fc5\u987b\u975e0\uff0c\u8868\u660e\u9000\u51fa\u7684\u539f\u56e0\uff0c\u901a\u5e38\u53ef\u4ee5\u5728teardown()\u91cc\u4f7f\u7528\u3002 sendAsync(CBaseJob *job, bool urgent = false)\uff1a\u4ee5\u5f02\u6b65\u65b9\u5f0f\u63d0\u4ea4Job\u7ed9Worker\u3002Job\u5fc5\u987b\u662f\u7528new\u7684\u65b9\u5f0f\u52a8\u6001\u521b\u5efa\uff0c\u4e14\u4f7f\u7528\u8005\u4e0d\u9700\u8981\u91ca\u653e\uff0cWorker\u4f1a\u5728\u5904\u7406\u5b8c\u6bd5\u540e\u91ca\u653e\u6389\u3002Urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 sendAsyncEndeavor(CBaseJob *job, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cJob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job\u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 sendSync(CBaseJob job, long milliseconds = 0, bool urgent = false)\uff1a\u4ee5\u540c\u6b65\u65b9\u5f0f\u63d0\u4ea4Job\u7ed9Worker\u3002Job\u5fc5\u987b\u662f\u7528new\u7684\u65b9\u5f0f\u52a8\u6001\u521b\u5efa\uff0c\u4e14\u4f7f\u7528\u8005\u4e0d\u9700\u8981\u91ca\u653e\uff0cWorker\u4f1a\u5728\u5904\u7406\u5b8c\u6bd5\u540e\u91ca\u653e\u6389\u3002 milliseconds\u8bbe\u7f6e\u6700\u957f\u963b\u585e\u65f6\u95f4\uff08**\u9ed8\u8ba40\u4e3a\u65e0\u9650\u7b49\u5f85* \uff09\u3002urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 \u8981\u6ce8\u610f\uff0c\u8be5\u51fd\u6570\u4e0d\u80fd\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u6b7b\u9501 \u3002 sendSyncEndeavor(CBaseJob *job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cjob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job \u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 sendSync(CBaseJob::Ptr &job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0asendSync()\uff0c\u533a\u522b\u662fJob\u4f20\u5165\u7684\u662f\u5f15\u7528\u800c\u975e\u6307\u9488\uff0c\u4f7f\u7528\u8005\u53ef\u80fd\u8fd8\u6301\u6709\u8be5Job\uff0c\u56e0\u6b64\u8be5\u51fd\u6570\u8c03\u7528\u5b8c\u6bd5Worker\u4e0d\u4f1a\u91ca\u653eJob\u7684\u5185\u5b58\uff0c\u53ea\u662f\u51cf\u5c11\u5f15\u7528\u8ba1\u6570\u3002 Urgent\u9009\u62e9\u53d1\u9001\u5230\u666e\u901a\u961f\u5217\u8fd8\u662f\u7d27\u6025\u961f\u5217\u3002 sendSyncEndeavor(CBaseJob::Ptr &job, long milliseconds = 0, bool urgent = false)\uff1a\u540c\u4e0a\uff0c\u533a\u522b\u662f\uff0c\u5982\u679c\u8be5\u51fd\u6570\u88abworker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u65f6\uff0cjob\u5c06\u4e0d\u88ab\u9001\u5165\u4efb\u4f55\u961f\u5217\uff0c\u800c\u662f\u76f4\u63a5\u8fd0\u884c\u8be5Job \u3002\u8fd9\u6837\u505a\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u4f1a\u6253\u4e71Job\u5904\u7406\u7684FIFO\u987a\u5e8f\u3002 flush(long milliseconds = 0, bool urgent = false)\uff1a\u5411Worker\u540c\u6b65\u63d0\u4ea4\u4e00\u4e2aCBaseJob\u7684\u5b9e\u4f8b\u3002\u4e00\u65e6\u8be5\u51fd\u6570\u8fd4\u56de\uff0c\u53ef\u4ee5\u786e\u4fdd\u6240\u6709\u4e4b\u524d\u5f85\u5904\u7406\u7684Job\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5\u3002\u7531\u4e8e\u662f\u540c\u6b65\u63d0\u4ea4\uff0c\u8be5\u51fd\u6570\u4e0d\u80fd\u88abWorker\u7ebf\u7a0b\u81ea\u8eab\u8c03\u7528\u3002 void discardQueuedJobs(bool urgent = false)\uff1a\u4e22\u5f03\u5f53\u524d\u6392\u5728\u961f\u5217\u4e2d\u5f85\u5904\u7406\u7684Job\u3002\u5bf9\u4e8e\u6b63\u5728\u8fd0\u884c\u7684Job\u662f\u65e0\u6cd5\u7ec8\u6b62\u7684\uff0c\u53ea\u80fd\u5f85\u5176\u5904\u7406\u5b8c\u6bd5\uff0c\u4e22\u5f03\u968f\u540e\u7684Job\u3002\u8be5\u51fd\u6570\u6267\u884c\u5b8c\u540e\u518d\u63d0\u4ea4\u7684Job\u5c06\u4e0d\u4f1a\u88ab\u4e22\u5f03\uff0c\u5c06\u4f1a\u6b63\u5e38\u5904\u7406\u3002\u5982\u679cJob\u5f88\u91cd\u8981\uff0c\u8c03\u7528CBaseJob::forecRun()\u53ef\u4ee5\u9632\u6b62\u5176\u88ab\u4e22\u5f03\uff0c\u800c\u662f\u6b63\u5e38\u5904\u7406\u3002","title":"Worker - CBaseWorker"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#timer-cbaselooptimer","text":"Timer\u63d0\u4f9b\u6beb\u79d2\u7ea7\u7cbe\u5ea6\uff0c\u65e0\u6296\u52a8\u4fdd\u969c\u7684\u5b9a\u65f6\u5668\u3002\u4f18\u70b9\u662f\u8d44\u6e90\u5360\u7528\u5c11\uff0c\u548cWorker\u878d\u5408\u5728\u4e00\u8d77\uff0c\u4f7f\u7528\u65b9\u4fbf\u3002 \u7531\u4e8eTimer\u548cJob\uff0cWatch\u53ef\u4ee5\u5728\u540c\u4e00Worker\u7ebf\u7a0b\u4e2d\u8fd0\u884c\uff0c\u4e00\u65e6Job\u6216Watch\u6267\u884c\u65f6\u95f4\u8fc7\u957f\uff0c\u8d85\u51faTimer\u95f4\u9694\uff0c\u4f1a\u5bfc\u81f4Timer\u89e6\u53d1\u65f6\u95f4\u7684\u6296\u52a8\u3002 Timer\u5229\u7528\u7cfb\u7edf\u8c03\u7528\u7684\u8d85\u65f6\u673a\u5236\u5b9e\u73b0\uff0c\u4ee5select()\u4e3a\u4f8b\uff0c\u5982\u679cWorker\u4e0a\u8fd0\u884c\u4e863\u4e2aTimer\uff0c\u5206\u522b\u5c06\u572815\u6beb\u79d2\uff0c40\u6beb\u79d2\uff0c80\u6beb\u79d2\u540e\u5230\u671f\uff0c\u5219select()\u7684\u8d85\u65f6\u8bbe\u7f6e\u5982\u4e0b CBaseLoopTimer\u7684API CBaseLoopTimer(int32_t interval, bool repeat = false)\uff1a\u521b\u5efaTimer\u5b9e\u4f8b\u3002Interval\u4ee3\u8868Timer\u7684\u65f6\u95f4\u95f4\u9694\uff1brepeat\u8868\u793a\u521b\u5efa\u7684\u662fcyclic Timer\u8fd8\u662fone-shot Timer\uff1a\u4e00\u65e6\u4f7f\u80fd\u540e\uff0ccyclic Timer\u4f1a\u4ee5interval\u6beb\u79d2\u4e3a\u5468\u671f\u53cd\u590d\u6267\u884c\uff1bone-shot Timer\u5728interval\u6beb\u79d2\u8d85\u65f6\u540e\u4e0d\u518d\u6267\u884c\u3002 attach(CBaseWorker *worker, bool enb = true)\uff1a\u6307\u5b9a\u8fd0\u884cTimer\u7684Worker\u3002\u53ea\u6709\u6307\u5b9a\u4e86Worker\u540eTimer\u624d\u80fd\u5f00\u59cb\u5de5\u4f5c\u3002\u8d85\u65f6\u540e\uff0cTimer\u7684run()\u51fd\u6570\u5c06\u5728\u8be5Worker\u4e0a\u6267\u884c\u3002 \u5982\u679cenb\u4e3atrue\uff0cTimer\u7acb\u523b\u5f00\u59cb\u5728\u6307\u5b9a\u7684Worker\u4e0a\u6267\u884c\uff1b\u5426\u5219\u53ef\u4ee5\u5c06\u6765\u7528enable()\u542f\u52a8\u3002 enable(int32_t interval = -1)\uff1a\u542f\u52a8Timer\u3002\u542f\u52a8\u540e\u7684Timer\u5c06\u5728\u6307\u5b9a\u7684Worker\u4e0a\u5de5\u4f5c\u3002\u5982\u679c\u8c03\u7528\u8be5\u51fd\u6570\u65f6Timer\u6b63\u5728\u8fd0\u884c\uff0c\u90a3\u4e48\u8d85\u65f6\u65f6\u95f4\u5c06\u88ab\u91cd\u7f6e\u4e3ainterval\u6beb\u79d2\u4e4b\u540e\u3002\u53c2\u6570interval\u63d0\u4f9b\u4fee\u6539\u8d85\u65f6\u65f6\u95f4\u7684\u673a\u4f1a\u3002\u5982\u679c\u4e3a-1\u5219**\u4e0d\u6539\u53d8\u8d85\u65f6\u65f6\u95f4**\u3002\u8be5\u51fd\u6570\u4e0d\u6539\u53d8cyclic/one-shot\u6a21\u5f0f\u3002 enableRepeat(int32_t interval = -1, int32_t init_value = -1)\uff1a\u540cenable()\uff0c\u4f46\u5c06Timer\u7684\u6a21\u5f0f\u8bbe\u4e3a**cyclic**\uff0c\u540c\u65f6\u9664\u4e86\u80fd\u7528interval\u6539\u53d8\u5468\u671f\uff0c\u8fd8\u53ef\u4ee5\u5c06\u7b2c\u4e00\u6b21\u8d85\u65f6\u7684\u65f6\u95f4\u8bbe\u7f6e\u4e3ainit_value\u6beb\u79d2\u3002\u5982\u679cinit_value\u4e3a-1\u5219\u8be5\u65f6\u95f4\u7b49\u4e8einterval\u3002 enableOneShot(int32_t interval = -1)\uff1a\u540cenable()\uff0c\u4f46\u5c06Timer\u7684\u6a21\u5f0f\u8bbe\u7f6e\u4e3aone-shot\u3002 disable()\uff1a\u505c\u6b62\u8fd0\u884cTimer\u3002 CBaseLoopTimer\u7684\u865a\u51fd\u6570 void run()\uff1aTimer\u7684\u6267\u884c\u51fd\u6570\uff1b\u5f53Timer\u8d85\u65f6\u65f6\u5728Worker\u7684\u7ebf\u7a0b\u4e2d\u88ab\u8c03\u7528\u3002","title":"Timer - CBaseLoopTimer"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#watch-cbasefdwatch","text":"Watch\u57fa\u4e8eselect()\uff0c\u5c06\u591a\u4e2a\u6587\u4ef6\u7684\u8f93\u5165\u8f93\u51fa\u7684\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u7edf\u4e00\u7b49\u5f85\uff0c\u4e32\u884c\u5904\u7406\u3002 \u6bcf\u4e2aWatch\u5bf9\u5e94\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26(File Descriptor)\u3002\u4f7f\u7528\u8005\u8d1f\u8d23\u6253\u5f00\u6587\u4ef6\u5e76\u4ea4\u7ed9Watch\u3002 Watch\u53ea\u80fd\u5728\u7528FDB_WORKER_ENABLE_FD_LOOP\u6807\u5fd7\u542f\u52a8\u7684Worker\u4e0a\u6267\u884c\u3002 \u548ctimer\u4e00\u6837\uff0cwatch\u5fc5\u987battach\u5728\u7279\u5b9a\u7ebf\u7a0b\u4e0a\u624d\u80fd\u5de5\u4f5c\u3002 CBaseFdWatch\u7684API CBaseFdWatch(int fd, int32_t flags)\uff1a\u521b\u5efaWatch\u7684\u5b9e\u4f8b\u3002fd\u4e3a\u4e00\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1bflags\u8868\u660e\u9700\u8981\u7b49\u5f85\u7684\u6587\u4ef6\u4e8b\u4ef6\uff0c\u53ef\u662f\u4ee5\u4e0b\u4f4d\u57df\u7684\u7ec4\u5408\uff1a POLLIN\uff1a\u5f53\u6587\u4ef6\u6709\u6570\u636e\u53ef\u4f9b\u8bfb\u53d6\u65f6\u8c03\u7528onInput()\u6210\u5458\u51fd\u6570 POLLOUT\uff1a\u5f53\u6587\u4ef6\u53ef\u4ee5\u8f93\u51fa\u6570\u636e\u65f6\u8c03\u7528onOutput()\u6210\u5458\u51fd\u6570 POLLHUP\uff1a\u5f53\u5bf9\u65b9\u5173\u95ed\u6587\u4ef6\u65f6\u8c03\u7528onHup()\u6210\u5458\u51fd\u6570 POLLERR\uff1a\u5f53\u6587\u4ef6\u64cd\u4f5c\u51fa\u73b0\u9519\u8bef\u65f6\u8c03\u7528onError()\u6210\u5458\u51fd\u6570 attach(CBaseWorker *worker, bool enb = true)\uff1a\u6307\u5b9a\u8fd0\u884cWatch\u7684Worker\u3002\u53ea\u6709\u6307\u5b9a\u4e86Worker\u540eWatch\u624d\u80fd\u5f00\u59cb\u5de5\u4f5c\u3002\u4e0a\u8ff0onXxx()\u90fd\u662f\u5728Worker\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u8fd0\u884c\u3002\u5982\u679cenb\u4e3atrue\uff0cWatch\u7acb\u523b\u5f00\u59cb\u5728\u8be5Worker\u4e0a\u8fd0\u884c\uff1b\u5426\u5219\u53ef\u4ee5\u5c06\u6765\u7528enable()\u542f\u52a8\u3002 enable()/disable()\uff1a\u4f7f\u80fd/\u505c\u6b62Watch","title":"Watch - CBaseFdWatch"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#notification","text":"Notification\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u4e8b\u4ef6\u8ba2\u9605-\u53d1\u5e03\u673a\u5236\uff0c\u7528\u4e8e\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u7ebf\u7a0b\u4e4b\u95f4\u4e00\u5bf9\u591a\u7684\u6d88\u606f\u901a\u77e5\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cJob\u53ea\u80fd\u70b9\u5bf9\u70b9\u901a\u4fe1\u3002 CBaseNotification\u5b9a\u4e49\u6d88\u606f\u901a\u77e5\u7684\u8ba2\u9605\u65b9\uff0cAPI\u5305\u62ec CBaseNotification(FdbEventCode_t event = FDB_INVALID_ID, CBaseWorker *worker = 0) \uff1a\u521b\u5efaNotification\u7684\u5b9e\u4f8b\u3002event\u8bbe\u7f6e\u9700\u8981\u8ba2\u9605\u7684\u4e8b\u4ef6ID\uff1bworker\u9009\u62e9\u63a5\u6536\u901a\u77e5\u7684Worker\uff1a\u5982\u679c\u4e3a\u7a7a\u5219\u6267\u884c\u51fd\u6570run()\u5728CNotificationCenter::notify()\u6267\u884c\u65f6\u88ab\u8c03\u7528\uff1b\u5426\u5219\u5c06\u8f6c\u53d1\u5230Worker\u7684\u7ebf\u7a0b\u4e0a\u6267\u884c\u3002 CBaseNotification\u7684\u865a\u51fd\u6570 void run(T &data)\uff1aNotification\u7684\u6267\u884c\u51fd\u6570\u3002data\u662f\u9700\u8981\u901a\u77e5\u7684\u6570\u636e\uff0c\u4e3a\u6a21\u677f\u7c7b\u578b\u3002 CNotificationCenter\u5b9a\u4e49\u901a\u77e5\u7684\u53d1\u5e03\u65b9\uff0cAPI\u5305\u62ec subscribe(typename CBaseNotification ::Ptr &notification)\uff1a\u8ba2\u9605\u67d0\u4e00\u4e8b\u4ef6\u7684\u901a\u77e5\uff1b\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\u8fd0\u884c\u901a\u77e5\u7684run()\u51fd\u6570\u3002 unsubscribe(typename CBaseNotification ::Ptr &notification)\uff1a\u53d6\u6d88\u8ba2\u9605 void notify(FdbEventCode_t event, T &data)\uff1a\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u901a\u77e5\u6240\u6709\u8ba2\u9605\u4e86\u8be5\u4e8b\u4ef6\u7684Notification\u3002event\u4e3a\u53d1\u751f\u7684\u4e8b\u4ef6\uff1bdata\u4e3a\u4e8b\u4ef6\u8ddf\u968f\u7684\u6570\u636e\u3002\u5982\u679cNotification\u6307\u5b9a\u4e86Worker\uff0c\u8be5Notification\u7684run()\u5c06\u88ab\u629b\u5230Worker\u7ebf\u7a0b\u4e0a\u8fd0\u884c\uff0c\u5426\u5219\u5728\u8c03\u7528notify()\u65f6\u76f4\u63a5\u8fd0\u884c\u3002","title":"Notification"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#inter-process-communicationipc","text":"","title":"Inter-Process Communication(IPC)"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_3","text":"server vs. socket \u4e00\u4e2aServer\u5305\u542b\u591a\u4e2asocket\uff0c\u5373\u4e00\u4e2aserver\u53ef\u4ee5bind\u5230(\u4fa6\u542c)\u591a\u4e2a\u5730\u5740 socket vs. session \u6bcf\u4e2asocket\u5305\u542b\u591a\u4e2asession\uff0c\u56e0\u4e3aserver\u7684**accept**()\u4f1a\u8fd4\u56de\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26(fd) session \u4e00\u4e2asession\u4ee3\u8868\u4e00\u4e2aclient-server\u7684\u8fde\u63a5; \u6d88\u606f\u90fd\u662f\u5728session\u4e2d\u4f20\u9012 client vs. socket \u4e00\u4e2aclient\u5305\u542b\u591a\u4e2asocket\uff0c\u5373client\u53ef\u4ee5connect\u5230\u591a\u4e2a\u5730\u5740\uff08server\u5fc5\u987b\u5df2\u7ecf\u5728\u4fa6\u542c\u8fd9\u4e9b\u5730\u5740\uff09 \u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6bcf\u4e2aclient\u53ea\u4f1a\u8fde\u63a5\u4e00\u4e2a\u5730\u5740 socket vs. session \u6bcf\u4e2asocket\u5305\u542b\u4e00\u4e2asession\uff0c\u56e0\u4e3aclient\u53ea\u6709\u4e00\u4e2afd client\u548cserver\u7edf\u79f0\u4e3aendpoint\uff0c\u7528FdbEndpointId_t\u8868\u793a session\u7528FdbSessionId_t\u8868\u793a socket\u7528FdbSocketId_t\u8868\u793a","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#ipc","text":"IPC\u63d0\u4f9b\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\u3002\u6839\u636e\u901a\u4fe1\u53cc\u65b9\u8fdb\u7a0b\u7684\u90e8\u7f72\u4f4d\u7f6e\u5206\u4e3a\u672c\u5730\u8fdb\u7a0b\u95f4\u901a\u4fe1\u548c\u8282\u70b9\u95f4\u8fdb\u7a0b\u901a\u4fe1\u3002 \u4e0d\u540c\u4e8eJob\u7684\u70b9\u5bf9\u70b9\u901a\u4fe1\uff0cIPC\u91c7\u7528Client-Server\u6a21\u5f0f\uff0c\u5177\u5907\u5982\u4e0b\u7279\u6027 Client\u662f\u8fde\u63a5\u7684\u53d1\u8d77\u8005\uff1bServer\u662f\u8fde\u63a5\u7684\u63a5\u53d7\u8005 Client\u662f\u547d\u4ee4\u7684\u53d1\u8d77\u8005\u548c\u6570\u636e\u7684\u8bf7\u6c42\u8005\uff1bServer\u662f\u547d\u4ee4\u7684\u6267\u884c\u8005\u548c\u6570\u636e\u7684\u4ea7\u751f\u8005 \u4e00\u4e2aClient\u8fde\u63a5\u4e00\u4e2aServer\uff1b\u4e00\u4e2aServer\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aClient Client\u6ca1\u6709\u5730\u5740\uff0c\u4f46\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aServer\u5730\u5740\uff1bServer\u62e5\u6709\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aClient Server\u4e5f\u53ef\u4ee5\u5e7f\u64ad\u65b9\u5f0f\u4e3b\u52a8\u5411\u591a\u4e2aClient\u63a8\u9001\u6d88\u606f\uff1bClient\u53ef\u4ee5\u5411Server\u8ba2\u9605\u7279\u5b9a\u7684\u6d88\u606f IPC\u5e95\u5c42\u5b9e\u73b0\u57fa\u4e8eSocket\uff0c\u76ee\u524d\u4f7f\u7528TCP socket\u548cUnix domain socket\u3002","title":"IPC"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_4","text":"FDBus\u6d88\u606f\u7531ID + \u6570\u636e\u7ec4\u6210 ID\u662f\u5f3a\u5236\u9879\uff0c\u4e3a32\u4f4d\u6574\u578b\uff0c\u6bcf\u4e2aMessage\u5fc5\u987b\u7531ID\u6807\u8bc6\u3002\u5bf9\u4e8e\u4e00\u4e2aServer\uff0cID\u5fc5\u987b\u552f\u4e00\uff0c\u4e0d\u80fd\u91cd\u590d\u3002\u66f4\u51c6\u786e\u5730\u8bf4\uff0c\u6240\u6709request-reply\u6d88\u606f\u7684ID\u5fc5\u987b\u552f\u4e00\uff1b\u6240\u6709\u5e7f\u64ad\u63a8\u9001\u7684\u6d88\u606f\u5fc5\u987b\u552f\u4e00\uff1b\u4e8c\u8005\u4e4b\u95f4\u53ef\u4ee5\u6709\u91cd\u590d \u6570\u636e\u90e8\u5206\u4e3a\u53ef\u9009\u9879\uff0c\u652f\u6301\u4e24\u79cd\u683c\u5f0f\uff1a \u539f\u59cb\u6570\u636e (void *) Protocol Buffer\u683c\u5f0f (CFdbBasePayload)","title":"\u6d88\u606f\u7ed3\u6784"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_5","text":"** \u539f\u59cb\u6570\u636e **\u6ca1\u6709\u683c\u5f0f\uff0c\u53ea\u662f\u5c06\u4e00\u7247\u5185\u5b58\u6570\u636e\u4ece\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3002\u901a\u5e38\u7528\u4e8e\u6587\u4ef6\uff0c\u5347\u7ea7\u5305\uff0c\u97f3\u9891\u6570\u636e\u7684\u4f20\u8f93\u3002 ** Protocol Buffer **\u662f\u8c37\u6b4c\u5f00\u6e90\u7684\uff0c\u8bed\u8a00\u72ec\u7acb\uff0c\u5e73\u53f0\u72ec\u7acb\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f\uff0c\u9002\u7528\u4e8e\u7f51\u7edc\u4f20\u8f93\uff0c\u6570\u636e\u5b58\u50a8\u7b49\u591a\u9886\u57df\u3002 Protocol Buffer\u652f\u6301\u5927\u90e8\u5206C++\u57fa\u672c\u7c7b\u578b\uff0c\u7531\u57fa\u672c\u7c7b\u578b\u7ec4\u5408\u6210\u7684\u590d\u5408\u7c7b\u578b\uff0c\u590d\u5408\u7c7b\u578b\u7684\u5d4c\u5957\uff0c\u4ee5\u53ca\u57fa\u672c\u7c7b\u578b\u548c\u590d\u5408\u7c7b\u578b\u7ec4\u6210\u7684\uff0c\u957f\u5ea6\u53ef\u53d8\u7684\u6570\u7ec4\uff08vector\uff09\u7c7b\u578b\u3002Protocol Buffer\u7684\u6570\u636e\u6210\u5458\u53ef\u4ee5\u662f\u5fc5\u9009\u6216\u53ef\u9009\uff0c\u4f7f\u5f97\u6d88\u606f\u5b9a\u4e49\u66f4\u52a0\u7075\u6d3b\u3002 Protocol Buffer\u6d88\u606f\u7528\u7279\u5b9a\u7684IDL\u683c\u5f0f\u5b9a\u4e49\uff0c\u81ea\u52a8\u751f\u6210\u5305\u62ecC++\u5728\u5185\u7684\u591a\u79cd\u8bed\u8a00\u7684\u6e90\u4ee3\u7801\uff0c\u907f\u514d\u7e41\u7410\u7684\u7ec4\u5305\u548c\u89e3\u5305\u3002\u5f00\u53d1\u8005\u53ea\u8981\u4e86\u89e3C++\u7684\u57fa\u672c\u7c7b\u578b\uff0c\u7c7b\u548c\u5bb9\u5668\u64cd\u4f5c\uff0c\u4e0d\u5fc5\u5173\u5fc3\u5177\u4f53\u7684\u5305\u683c\u5f0f\u3002","title":"\u6d88\u606f\u6570\u636e"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#endpointclientserver","text":"Client\u4e0eServer\u662fFDBus\u901a\u4fe1\u7684\u53c2\u4e0e\u8005\uff0c\u7edf\u79f0Endpoint\u3002Client\u662f\u670d\u52a1/\u529f\u80fd\u7684\u53d1\u8d77\u8005\u548c\u4f7f\u7528\u8005\uff1bServer\u662f\u529f\u80fd/\u670d\u52a1\u7684\u63d0\u4f9b\u8005\u3002 Client\u7ee7\u627f\u81eaCBaseClient\uff0c\u901a\u8fc7connect()\u65b9\u6cd5\u8fde\u63a5\u5230Server\u7ed1\u5b9a\u7684\u5730\u5740\u3002 Server\u7ee7\u627f\u81eaCBaseServer\uff0c\u901a\u8fc7bind()\u65b9\u6cd5\u7ed1\u5b9a\u81ea\u5df1\u7684\u5730\u5740\u3002 connect()/bind()\u7684\u5730\u5740\u4e3a\u7684url\u683c\u5f0f\uff0c\u5305\u62ecTCP\uff0cUnix domain\u548c\u540d\u5b57\u5730\u5740\uff0c\u901a\u5e38\u4f7f\u7528\u9700\u8981NameServer\u89e3\u6790\u7684\u540d\u5b57\u5730\u5740\uff08\u89c1\u540e\uff09\u3002","title":"\u901a\u4fe1Endpoint\uff1aClient\u4e0eServer"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#cfdbbaseobjectendpoint","text":"\u65e0\u8bba\u662fClient\u8fd8\u662fServer\uff0c\u90fd\u662f\u4ee5CFdbBaseObject\u4e3a\u57fa\u7c7b\uff0c\u6240\u6709\u65b9\u6cd5\u548c\u56de\u8c03\u90fd\u5728\u8be5\u57fa\u7c7b\u91cc CFdbBaseObject\u53ef\u4ee5\u770b\u6210\u5728Client\u548cServer\u4e4b\u95f4\u521b\u5efa\u7684\u901a\u9053\uff0c\u6bcf\u4e2a\u901a\u9053\u7684ID\u5c31\u662fCFdbBaseObject\u7684ID\u3002CBaseClient\u548cCBaseServer\u4f7f\u7528\u901a\u90530\u6765\u901a\u4fe1\uff1b1~65535\u901a\u9053\u7528\u4e8eCFdbBaseObject\u4e4b\u95f4\u7684\u901a\u4fe1\u3002","title":"CFdbBaseObject\uff1a\u66f4\u57fa\u7840\u7684Endpoint"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#cfdbbaseobjectexample","text":"\u901a\u8fc7\u7ee7\u627fCBaseClient\u548cCBaseServer\uff0c\u521b\u5efa\u5a92\u4f53\u670d\u52a1MediaService\u7684Client\u7aef\u548cServer\u7aef\uff0c\u4f7f\u7528\u901a\u90530\u901a\u4fe1\uff1b \u901a\u8fc7\u7ee7\u627fCFdbBaseObject\uff0c\u5728MediaService\u7684Client\u7aef\u548cServer\u7aef\u521b\u5efa\u591a\u4e2a\u5a92\u4f53\u64ad\u653e\u5668\u5b9e\u4f8b\u7684Client\u7aef\u548cServer\u7aef\uff0c\u4f7f\u7528\u901a\u90531\uff0c2\u2026\u901a\u4fe1 \u6bcf\u4e2aclient object\u548cserver object\u652f\u6301request-response, subscribe-publish","title":"CFdbBaseObject\uff1aExample"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#clientserver","text":"Client/Server\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0cFDBus\u8c03\u7528CBaseClient/CBaseServer\u76f8\u5173\u865a\u51fd\u6570\u901a\u77e5Client/Server\u505a\u76f8\u5e94\u5904\u7406\u3002\u8fd9\u4e9b\u4e8b\u4ef6\u5305\u62ec Client\u8fde\u63a5\u4e0aServer\u6216\u4e0eServer\u65ad\u5f00\u65f6 Server\u6536\u5230Client\u7684\u8fde\u63a5\u8bf7\u6c42\u65f6 Server\u6536\u5230Client\u7684\u547d\u4ee4\u6216\u6570\u636e\u8bf7\u6c42\u65f6 Server\u6536\u5230Client\u6d88\u606f\u8ba2\u9605\u8bf7\u6c42\u65f6 Client\u5411Server\u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\u540e\uff0c\u6536\u5230Server\u56de\u590d\u65f6 \u5728\u5b9e\u73b0\u5177\u4f53\u7684Client/Server\u65f6\u8981**\u91cd\u8f7d\u57fa\u7c7b\u7684\u865a\u51fd\u6570**\uff0c\u6355\u83b7\u8fd9\u4e9b\u4e8b\u4ef6\uff0c\u5904\u7406\u76f8\u5173\u4e1a\u52a1\u3002","title":"Client/Server\u56de\u8c03(\u865a)\u51fd\u6570"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#context-fdbus","text":"\u6bcf\u4e2a\u6302\u5728FDBus\u4e0a\u7684\u8fdb\u7a0b\u5fc5\u987b\u542f\u52a8\u4e00\u4e2aWorker\u5904\u7406IPC\u6570\u636e\u7684\u8bfb\u5199\u548c\u6d88\u606f\u4ea4\u4e92\u7ba1\u7406\uff0c\u8be5Worker\u53eb\u505aFDBus\u7684Context\u3002 \u65e0\u8bba\u662fClient\u8fd8\u662fServer\uff0c\u5bf9socket\u7684\u8bfb\u5199\u90fd\u59d4\u6258Context\u7ebf\u7a0b\u6765\u6267\u884c\u3002\u6545\u6240\u6709\u5bf9FDBus\u7684\u8bbf\u95ee\u9996\u5148\u5fc5\u987b\u4ee5Job\u7684\u5f62\u5f0f\u63d0\u4ea4\u7ed9Context\uff1bContext\u6536\u5230\u7684\u6d88\u606f\u4e5f\u4f1a\u4ee5Job\u5f62\u5f0f\u8f6c\u7ed9\u5de5\u4f5c\u7ebf\u7a0b\u5904\u7406\u3002 Context\u662f\u4e2a\u666e\u901a\u7684Worker\uff0c\u53ef\u4ee5\u8fd0\u884cWatch\uff0cJob\uff0cTimer\uff0c\u751a\u81f3Client\u548cServer\u3002\u5bf9\u4e8e\u7b80\u5355\u7684\u8fdb\u7a0b\uff0c\u53ea\u8981\u4e00\u4e2aContext\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6240\u6709\u529f\u80fd\u3002","title":"Context \u2013 FDBus\u7684\u5de5\u4f5c\u7ebf\u7a0b"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#clientserver_1","text":"\u9664Context\u5916\uff0c\u6839\u636e\u9700\u8981\u8fd8\u53ef\u4ee5\u542f\u52a8\u5176\u5b83Worker\u7ebf\u7a0b\u6267\u884cClient/Server\u7684\u56de\u8c03\u51fd\u6570\u3002\u6267\u884c\u56de\u8c03\u51fd\u6570\u7684\u7ebf\u7a0b\u53eb\u505aClient/Server\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002 \u6bcf\u4e2a\u6302\u5728FDBus\u4e0a\u7684\u8fdb\u7a0b\u53ef\u4ee5\u542f\u52a8\u6570\u76ee\u4e0d\u53d7\u9650\u5236\u7684Client\u548cServer\u3002\u8fd9\u4e9bClient/Server\u53ef\u4ee5\u6709\u81ea\u5df1\u4e13\u5c5e\u7684\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u5de5\u4f5c\u7ebf\u7a0b\u3002 \u5728\u5b9e\u4f8b\u5316Client/Server\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2aWorker\u4f5c\u4e3a\u5176\u5de5\u4f5c\u7ebf\u7a0b\u3002\u5982\u679c\u51e0\u4e2aEndpoint\u6307\u5b9a\u540c\u4e00\u7ebf\u7a0b\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u4e1a\u52a1\u5c06\u5171\u4eab\u8be5\u7ebf\u7a0b\uff1b\u5982\u679c\u4e0d\u6307\u5b9a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u90a3\u4e48Context\u5c31\u662f\u9ed8\u8ba4\u7684\u5de5\u4f5c\u7ebf\u7a0b\u3002\u4e00\u4e2aEndpoint\u4e0d\u80fd\u6307\u5b9a\u591a\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u3002","title":"Client/Server\u7684\u5de5\u4f5c\u7ebf\u7a0b"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#fdbus","text":"","title":"FDBus\u8fdb\u7a0b\u90e8\u7f72\u56fe"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#fdbus_1","text":"","title":"FDBus\u5f00\u53d1\u6846\u67b6"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#client-server","text":"\u4eceClient\u5411Server\u53d1\u9001\u7684\u8bf7\u6c42\u5305\u62ec\u4ee5\u4e0b\u7c7b\u578b \u5e26\u8d85\u65f6\u7684\u5f02\u6b65\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u4e0d\u4f1a\u7b49\u5f85Server\u7684\u56de\u590d\u3002\u968f\u540e\u7684\u56de\u590d\u901a\u8fc7\u56de\u8c03\u51fd\u6570onReply()\u83b7\u5f97\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6ca1\u6709\u56de\u590d\u4f1a\u53d6\u6d88\u672c\u6b21\u4ea4\u4e92 \u5e26\u8d85\u65f6\u7684\u540c\u6b65\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u4f1a\u7b49\u5f85\u76f4\u5230\u83b7\u5f97Server\u7684\u56de\u590d\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6ca1\u6709\u56de\u590d\u4f1a\u53d6\u6d88\u672c\u6b21\u4ea4\u4e92 \u65e0\u56de\u590d\u7684\u8bf7\u6c42\uff1a\u5411Server\u53d1\u9001\u8bf7\u6c42\u540e\uff0c\u65e0\u9700Server\u7684\u56de\u590d\uff0c\u65e2\u4e0d\u7b49\u5f85\uff0c\u4e5f\u4e0d\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002 \u65e0\u8bba\u4f55\u79cd\u8bf7\u6c42\uff0cServer\u90fd\u901a\u8fc7onInvoke()\u56de\u8c03\u51fd\u6570\u6765\u63a5\u6536\u5e76\u5904\u7406\u3002","title":"Client-Server\u8bf7\u6c42"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#client-server_1","text":"","title":"Client-Server\u8fde\u63a5"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#client-server_2","text":"","title":"Client-Server\u65b9\u6cd5\u8c03\u7528"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#server","text":"Server\u53ef\u4ee5\u4e3b\u52a8\u5411Client\u63a8\u9001\u6d88\u606f\uff0c\u800c\u65e0\u9700Client\u8bf7\u6c42\u3002\u4f46\u662f\u9700\u8981\u6ce8\u518c\u540e\uff0cClient\u624d\u80fd\u6536\u5230\u63a8\u9001\u7684\u6d88\u606f\u3002 \u6d88\u606f\u901a\u8fc7ID\u6ce8\u518c\u3002\u9664\u4e86ID\uff0c\u6ce8\u518c\u65f6\u8fd8\u53ef\u4ee5\u9644\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u201cfilter\u201d\u3002Server\u5728\u63a8\u9001\u6d88\u606f\u65f6\uff0c\u53ea\u6709ID\u548cfilter\u90fd\u5339\u914d\u65f6\uff0cClient\u624d\u80fd\u6536\u5230\u6d88\u606f\u3002 \u5e94\u7528\u573a\u666f\uff1aWiFi Server\u6bcf\u626b\u63cf\u5230\u4e00\u4e2a\u7f51\u7edc\u5c31\u901a\u8fc7\u6d88\u606fID MSG_ID_WIFI_FOUND \u5e7f\u64ad\u51fa\u6765\uff0c\u5e76\u4ee5\u7f51\u7edc\u7684SSID\u4f5c\u4e3a\u201cfilter\u201d\u3002Client\u53ef\u4ee5\u6ce8\u518c\u8be5ID\uff1b\u5982\u679c\u53ea\u5bf9\u7279\u5b9aSSID\u611f\u5174\u8da3,\u6ce8\u518c\u65f6\u8fd8\u53ef\u4ee5\u9644\u52a0SSID\u4f5c\u4e3a\u201cfilter\u201d\u3002\u53ea\u6709\u5177\u6709\u8be5SSID\u7684\u7f51\u7edc\u88ab\u641c\u7d22\u5230\u65f6Client\u624d\u4f1a\u6536\u5230\u63a8\u9001\u6d88\u606f\u3002 \u6d88\u606f\u4ee5\u4e00\u5bf9\u591a\u7684\u5f62\u5f0f\u63a8\u9001\uff0c\u6240\u6709\u6ce8\u518c\u8fc7\u6d88\u606f\u7684Client\u90fd\u80fd\u6536\u5230\u3002 \u4f46\u63a5\u6536\u6d88\u606f\u7684\u5148\u540e\u987a\u5e8f\u6ca1\u6709\u4fdd\u8bc1 \u3002","title":"Server\u7684\u6d88\u606f\u63a8\u9001"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_6","text":"\u5f53Client\u6ce8\u518c\u6d88\u606f\u65f6\uff0cServer\u80fd\u591f\u901a\u8fc7onSubscribe()\u56de\u8c03\u51fd\u6570\u83b7\u77e5\u3002 \u8be5\u56de\u8c03\u51fd\u6570\u7684\u76ee\u7684\u662f\u5728Client\u6ce8\u518c\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0cServer\u6709\u673a\u4f1a\u5c06\u5c5e\u6027\u7684\u521d\u59cb\u503c\u53d1\u9001\u7ed9Client\u7aef\u3002\u901a\u5e38\u53ea\u6709\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u65f6\uff0cServer\u624d\u4f1a\u901a\u8fc7\u6d88\u606f\u5c06\u53d8\u5316\u63a8\u9001\u7ed9Client\u7aef\u3002\u6709\u4e86\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u5f53Client\u6ce8\u518c\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0c\u5373\u4f7f\u5c5e\u6027\u6ca1\u6709\u53d8\u5316\u4e5f\u80fd\u83b7\u5f97\u5c5e\u6027\u7684\u5f53\u524d\u503c\uff0c\u4e14\u65e0\u9700\u53d1\u9001\u989d\u5916\u7684\u8bf7\u6c42\u3002","title":"\u63a8\u9001\uff08\u5e7f\u64ad\uff09\u6d88\u606f\u7684\u6ce8\u518c"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_7","text":"","title":"\u6ce8\u518c\u5e7f\u64ad\u6d88\u606f"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_8","text":"","title":"\u5bfb\u5740\u548c\u7ec4\u7f51"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#server_1","text":"Server\u5730\u5740\u4ee3\u8868Server\u5728\u7f51\u7edc\u4e2d\u7684\u4f4d\u7f6e\uff0c\u901a\u8fc7\u8be5\u5730\u5740Client\u53ef\u4ee5\u5b9a\u4f4d\u5e76\u548cServer\u5efa\u7acb\u901a\u4fe1\u3002 Server\u53ef\u4ee5\u540c\u65f6\u7ed1\u5b9a\u591a\u4e2a\u5730\u5740\uff0c\u6bcf\u4e2a\u5730\u5740\u53ef\u4ee5\u63a5\u53d7Client\u7684\u8fde\u63a5\u3002\u4e00\u65e6\u8fde\u63a5\u4e0a\uff0c\u6bcf\u4e2a\u5730\u5740\u90fd\u63d0\u4f9b\u540c\u6837\u7684\u670d\u52a1\uff0c\u6240\u4ee5Client\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u4e00\u4e2a\u5730\u5740\u8fde\u63a5\u3002 Server\u5730\u5740\u662f\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684URL\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a TCP socket\uff1atcp://ip\u5730\u5740:\u7aef\u53e3\u53f7 Unix domain socket\uff1afile://socket\u6587\u4ef6\u5730\u5740","title":"Server\u5730\u5740"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#server_2","text":"Server\u5730\u5740\u4e0d\u76f4\u89c2\uff0c\u4f1a\u968f\u7ec4\u7f51\u65b9\u5f0f\u53d8\u5316\uff0c\u4f7f\u7528\u4e0d\u65b9\u4fbf\u3002 FDBus\u91c7\u7528\u7c7b\u4f3cDNS\u65b9\u5f0f\u5b9e\u73b0Server\u5bfb\u5740\uff1a\u6bcf\u4e2aServer\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff0c\u5e76\u8fd0\u884c\u4e00\u4e2a\u53ebNameServer\u7684\u670d\u52a1\uff0c\u8d1f\u8d23\u4e3aServer\u5206\u914d\u5730\u5740\uff0c\u7ba1\u7406Server\u540d\u5b57-\u5730\u5740\u6620\u5c04\uff0c\u89e3\u6790Server\u540d\u5b57\uff0c\u53d1\u5e03Server\u5730\u5740 \u4e3a\u652f\u6301Server\u540d\u5b57\u5bfb\u5740\uff0c\u5728\u4e24\u79cdURL\u4e4b\u5916\u589e\u52a0\u4e00\u79cd\u683c\u5f0f\uff0c\u4f5c\u4e3a\u540d\u5b57\u5730\u5740\uff0c\u5982\u4e0b\u6240\u793a svc://server\u540d\u5b57 \u540d\u5b57\u5730\u5740\u662f\u865a\u62df\u5730\u5740\u3002\u65e0\u8bbaServer\u4f4d\u4e8e\u4f55\u5904\uff0c\u53ea\u8981\u5b83\u7684\u540d\u5b57\u5730\u5740\u4e0d\u53d8\uff0cClient\u90fd\u53ef\u4ee5\u901a\u8fc7\u8be5\u5730\u5740\u4e0e\u4e4b\u5efa\u7acb\u8054\u7cfb\u3002 \u5982\u679cServer\u7ed1\u5b9a\u540d\u5b57\u5730\u5740\uff0cNameServer\u4f1a\u4e3a\u5176\u5206\u914d\u5b9e\u9645\u5730\u5740(tcp://\u6216file://\u5f00\u5934\u7684\u5730\u5740)\uff0c\u5e76\u5c06\u540d\u5b57\u548c\u5730\u5740\u6ce8\u518c\u5230\u6620\u5c04\u8868\u91cc \u5982\u679cClient\u8fde\u63a5\u540d\u5b57\u5730\u5740\uff0cNameServer\u4f1a\u6839\u636e\u540d\u5b57\u67e5\u627e\u5230Server\u7684\u5b9e\u9645\u5730\u5740\uff0c\u9009\u62e9\u4e00\u4e2a\u6700\u5408\u9002\u7684\u5730\u5740\u53d1\u5e03\u7ed9Client\u3002Client\u901a\u8fc7\u8be5\u5730\u5740\u4e0eServer\u5efa\u7acb\u70b9\u5bf9\u70b9\u7684\u76f4\u8fde\u3002","title":"Server\u547d\u540d\u4e0e\u540d\u5b57\u89e3\u6790"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_9","text":"NameServer\u7528\u5982\u4e0b\u89c4\u5219\u5206\u914dServer\u5730\u5740\uff1a TCP Socket Unix Domain Socket HostServer Port 60000 /tmp/fdb-hs NameServer Port 60001 /tmp/fdb-ns User Server Port 60002 \u2013 Port 65535 /tmp/fdb-ipc0, /tmp/fdb-ipc1 \u2026","title":"\u5730\u5740\u5206\u914d\u8868"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#server_3","text":"","title":"Server\u540d\u5b57\u89e3\u6790"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#hostserver","text":"NameServer\u53ea\u80fd\u89e3\u6790\u672c\u5730Server\u540d\u5b57\uff0c\u4f46Server\u53ef\u80fd\u4f4d\u4e8e\u7f51\u7edc\u4e2d\u4efb\u610f\u8282\u70b9\u4e0a\u3002\u4e3a\u4e86\u5c06\u6574\u4e2a\u7f51\u7edc\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u9700\u8981\u542f\u52a8HostServer \u7f51\u7edc\u91cc\u53ea\u6709\u4e00\u4e2aHostServer\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e8e\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\u4e0a\uff0c\u901a\u5e38\u662f\u8fde\u63a5\u6027\u80fd\u8f83\u597d\u7684\u8282\u70b9 \u6240\u6709\u8282\u70b9\u7684NameServer\u90fd\u8fde\u63a5\u5230HostServer\u4e0a\uff0c\u5c06\u672c\u8282\u70b9\u7684\u540d\u5b57\uff0cIP\u5730\u5740\u53d1\u7ed9HostServer\u3002HostServer\u6536\u96c6\u5404\u8282\u70b9\u7684\u8282\u70b9\u540d\u548cIP\u5730\u5740\u5e76\u6ce8\u518c\u5230\u8868\u91cc \u540c\u65f6NameServer\u4eceHostServer\u5904\u83b7\u5f97\u8868\u91cc\u5176\u5b83\u8282\u70b9\u4e0aNameServer\u4fe1\u606f\uff0c\u5e76\u9010\u4e00\u4e0e\u5b83\u4eec\u5efa\u7acb\u8fde\u63a5\u3002\u8fd9\u6837\u8282\u70b9\u91ccNameServer\u548c\u552f\u4e00\u7684HostServer\u6784\u6210\u661f\u5f62\u8fde\u63a5\uff0c\u800c\u5404NameServer\u4e4b\u95f4\u4e24\u4e24\u76f8\u8fde\u3002","title":"HostServer\u4e0e\u8282\u70b9\u540d\u5b57"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#server_4","text":"\u5728\u8282\u70b9\u5185\u90e8\uff0cServer\u540d\u5b57\u5fc5\u987b\u552f\u4e00\uff0c\u5426\u5219\u65e0\u6cd5\u5728NameServer\u91cc\u6ce8\u518c \u5728\u4e0d\u540c\u8282\u70b9\u4e0a\uff0cServer\u53ef\u4ee5\u91cd\u540d\u3002\u4f46\u8fd9\u6837\u4f1a\u9020\u6210\u56f0\u60d1\uff1a\u5047\u5982Client\u5df2\u7ecf\u8fde\u63a5\u5230\u8282\u70b9A\u4e0a\u7684MediaServer\uff0c\u4f46\u8282\u70b9B\u4e0a\u53c8\u542f\u52a8\u4e86MediaServer\u3002\u6b64\u65f6\u8be5Client\u53c8\u4f1a\u6536\u5230MediaServer\u4e0a\u7ebf\u7684\u901a\u77e5\u3002\u662f\u8fde\u8fd8\u662f\u4e0d\u8fde\uff1f Client\u63d0\u4f9b\u4e00\u4e2a\u56de\u8c03\u51fd\u6570connectionEnabled()\uff0c\u5141\u8bb8Client\u5728\u670d\u52a1\u91cd\u540d\u65f6\u9009\u62e9\u8fde\u63a5\u54ea\u4e2a\u8282\u70b9\u7684\u670d\u52a1\u3002","title":"Server\u540d\u5b57\u7684\u552f\u4e00\u6027"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#_10","text":"\u8d85\u65f6\u4e0e\u91cd\u8fde\u786e\u4fdd\u7f51\u7edc\u4e0d\u7a33\u6216\u5f02\u5e38\u65f6FDBus\u5404\u670d\u52a1\u59cb\u7ec8\u4fdd\u6301\u8fde\u63a5\uff1b\u540c\u65f6\u786e\u4fdd\u4ee5\u4efb\u4f55\u987a\u5e8f\u542f\u52a8Client/Server\uff0c\u540d\u5b57\u89e3\u6790\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u5b83\u4eec\u4e4b\u95f4\u90fd\u80fd\u8fde\u63a5\u4e0a HostServer\u6bcf\u79d2\u949f\u5411\u5404NameServer\u5e7f\u64ad\u5fc3\u8df3\u6d88\u606f\u3002\u5982\u679c5\u79d2\u5185\u6ca1\u6709\u6536\u5230\u67d0\u4e2aNameServer\u7684\u786e\u8ba4\u5219\u8ba4\u4e3a\u8be5NameServer\u6240\u5728\u7684\u8282\u70b9\u6389\u7ebf\uff0c\u5c06\u6e05\u9664\u8be5\u8282\u70b9\u7684\u6ce8\u518c\u4fe1\u606f \u6bcf\u4e2aNameServer\u671f\u5f85\u6bcf\u79d2\u949f\u90fd\u80fd\u6536\u5230HostServer\u7684\u5fc3\u8df3\u5305\u3002\u5982\u679c5\u79d2\u5185\u6ca1\u6709\u6536\u5230\u5219\u8ba4\u4e3aHostServer\u6389\u7ebf\uff0c\u5c06\u542f\u52a8500\u6beb\u79d2\u95f4\u9694\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u4e0eHostServer\u91cd\u8fde \u5f53NameServer\u542f\u52a8\u65f6\u6ca1\u6709\u83b7\u5f97IP\u5730\u5740\uff0c\u5c06\u542f\u52a8300\u6beb\u79d2\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u53cd\u590d\u83b7\u53d6IP\u5730\u5740 \u5f53Server/Client\u5e0c\u671bNameServer\u89e3\u6790\u540d\u5b57\u65f6\u65e0\u6cd5\u4e0eNameServer\u53d6\u5f97\u8054\u7cfb\uff0c\u5c06\u542f\u52a8300\u6beb\u79d2\u7684\u5b9a\u65f6\u5668\u5c1d\u8bd5\u53cd\u590d\u8fde\u63a5NameServer","title":"\u8d85\u65f6\u4e0e\u91cd\u8fde"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#commands","text":"host_server: start host server name_server: start name server Usage: name_server [ -n host_name] [-u host_url] name_server -n \u201chead unit\u201d Start name server and connect to local host server name_server \u2013n \u201cICU\u201d \u2013u tcp://192.168.1.100:60000 Start name server and connect to remote host server lssvc:list all services lssvc List all services in FDBus lssvc \u2013f List all services and keep monitoring","title":"Commands"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#logging","text":"","title":"Logging"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#log","text":"Log\u7cfb\u7edf\u53ef\u4ee5\u6293\u53d6FDBus\u4e0a\u6240\u6709\u6d88\u606f\uff0c\u5305\u62ec\u672c\u4e3b\u673a\u548c\u6240\u6709\u8054\u7f51\u7684\u4e3b\u673a Log\u7cfb\u7edf\u540c\u65f6\u8fd8\u652f\u6301\u8c03\u8bd5Log\u8f93\u51fa Log\u7cfb\u7edf\u4e5f\u57fa\u4e8eFDBus\u5b9e\u73b0\uff1a\u6240\u6709Client/Server\u90fd\u5185\u7f6eLogClient\uff0c\u540c\u65f6\u542f\u52a8LogServer\u3002LogClient\u628aFDBus\u6d88\u606f\u548c\u8c03\u8bd5\u6d88\u606f\u53d1\u7ed9LogServer\u3002 LogServer\u53ef\u4ee5\u628a\u6536\u96c6\u5230\u7684Log\u6253\u5370\u5728\u7ec8\u7aef\u4e0a\u3002\u4e5f\u53ef\u4ee5\u542f\u52a8LogViewer\u8fde\u63a5\u5230LogServer\u4e0a\u6765\u67e5\u770bLog","title":"Log\u7cfb\u7edf"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#log_1","text":"\u4f18\u5148\u7ea7\uff08\u4ece\u4f4e\u5230\u9ad8\uff09\uff1a Debug Info Warning Error Fatal \u8f93\u51fa\u65f6LogServer\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u7b49\u7ea7\uff1b\u7ea7\u522b\u4f4e\u7684\u4e0d\u8f93\u51fa","title":"\u8c03\u8bd5Log\u8f93\u51fa"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#logapi-tag","text":"FDB_TLOG_D(tag, format, param1, param2\u2026)\uff1a\u8f93\u51fa\u8c03\u8bd5\u7ea7\u522b\u7684Log\u3002Tag\u901a\u5e38\u4ee3\u8868\u6a21\u5757\u540d\uff1bFormat, param1, param2\u2026\u683c\u5f0f\u4e0eprintf()\u76f8\u540c\u3002 \u5bf9\u4e8e\u4e0d\u540c\u7b49\u7ea7\u5206\u522b\u63d0\u4f9b\u4ee5\u4e0b\u65b9\u6cd5 FDB_TLOG_I \u2013 \u8f93\u51fainfo\u7b49\u7ea7\u7684log FDB_TLOG_W \u2013 \u8f93\u51fawarning\u7b49\u7ea7\u7684log FDB_TLOG_E \u2013 \u8f93\u51faerror\u7b49\u7ea7\u7684log FDB_TLOG_F \u2013 \u8f93\u51fafatal\u7b49\u7ea7\u7684log","title":"\u8c03\u8bd5Log\u8f93\u51faAPI \u2013 \u5e26tag\u7248\u672c"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#logapi-tag_1","text":"\u5728\u6587\u4ef6\u91cc\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u5b9a\u4e49\u65e0tag\u7248\u672c\uff1a #define _FDB_LOG_TAG_ \u201cmy_tag\" #include <common_base/fdb_log_trace.h> \u4ee5\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528FDB_LOG_D(format, param1, param2\u2026)\uff1a\u8f93\u51fa\u8c03\u8bd5\u7ea7\u522b\u7684Log\u3002Format, param1, param2\u2026\u683c\u5f0f\u4e0eprintf()\u76f8\u540c\u3002Tag\u4f7f\u7528\u7684\u5c31\u662f_FDB_LOG_TAG_\u3002 \u5bf9\u4e8e\u4e0d\u540c\u7b49\u7ea7\u5206\u522b\u63d0\u4f9b\u4ee5\u4e0b\u65b9\u6cd5 FDB_LOG_I \u2013 \u8f93\u51fainfo\u7b49\u7ea7\u7684log FDB_LOG_W \u2013 \u8f93\u51fawarning\u7b49\u7ea7\u7684log FDB_LOG_E \u2013 \u8f93\u51faerror\u7b49\u7ea7\u7684log FDB_LOG_F \u2013 \u8f93\u51fafatal\u7b49\u7ea7\u7684log","title":"\u8c03\u8bd5Log\u8f93\u51faAPI \u2013 \u65e0tag\u7248\u672c"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#logserver","text":"\u7cfb\u7edf\u91cc\u53ea\u80fd\u5b58\u5728\u4e00\u4e2aLogServer\uff0c\u542f\u52a8\u65b9\u5f0f\u4e3a\uff1alogsvc [options] FDBus Log\u9009\u9879: -q \u7981\u6b62\u8f93\u51faFDBus\u7684request\u7c7b\u578b\u6d88\u606f -p \u7981\u6b62\u8f93\u51faFDBus\u7684reply\u7c7b\u578b\u6d88\u606f -b \u7981\u6b62\u8f93\u51faFDBus\u7684broadcast\u7c7b\u578b\u6d88\u606f -s \u7981\u6b62\u8f93\u51faFDBus\u7684subscribe\u7c7b\u578b\u6d88\u606f -f \u7981\u6b62\u8f93\u51fa\u6240\u6709FDBus\u6d88\u606f -o \u7981\u6b62\u8f93\u51fa\u5230\u7ec8\u7aef\u4e0a\uff08\u53ef\u4ee5\u901a\u8fc7LogView\u67e5\u770b\uff09 -c \u5982\u679c\u6d88\u606f\u662fraw data\uff0c\u63a7\u5236raw data\u6700\u5927\u8f93\u51fa\u957f\u5ea6 -e ep1,ep2\u2026 \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9aendpoint\u7684FDBus\u6d88\u606f -m host1,host2\u2026 \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9a\u4e3b\u673a\u7684FDBus\u6d88\u606f \u8c03\u8bd5 Log\u9009\u9879: -l level \u8bbe\u7f6e\u8c03\u8bd5Log\u7684\u8f93\u51fa\u7b49\u7ea7\uff0c\u53d6\u503c\u4e3a 0-verbose 1-debug 2-info 3-warning 4-error 5-fatal -d \u7981\u6b62\u8f93\u51fa\u8c03\u8bd5Log -t tag1,tag2\u2026 \u4ec5\u8f93\u51fa\u6307\u5b9atag\u7684\u8c03\u8bd5log -M [host1,host2\u2026] \u9009\u62e9\u53ea\u8f93\u51fa\u6307\u5b9a\u4e3b\u673a\u7684\u8c03\u8bd5Log \u8f93\u51fa\u542b\u4e49 ==== fdbus monitor log format: ==== [F] [pid of message sender] [host name of message sender] [message sender name -> message receiver name] [service name of fdbus] [object id] [message type] [message code] [serial number] [size of payload] [time stamp] message details ==== debug trace log format: ==== [D] [level: V-verbose; D-Debug; I-Information; W-Warning; E-Error; F-Fatal; S-Silence] [tag] [pid of log generator] [host name of log generator] [time stamp] log information","title":"LogServer"},{"location":"FDBus%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84/#logviewer","text":"\u7cfb\u7edf\u91cc\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u8f93\u51fa\u5185\u5bb9\u5b8c\u5168\u76f8\u540c\u7684LogViewer\uff0c\u542f\u52a8\u65b9\u5f0f\u4e3a\uff1alogclt [options] logclt \u2013n [options] \u914d\u7f6eLogServer\u3002\u914d\u7f6e\u9009\u9879options\u548cLogServer\u7684\u542f\u52a8\u9009\u9879\u76f8\u540c logclt \u542f\u52a8LogViewer\u5e76\u628a\u8f93\u51fa\u6253\u5370\u5728stdout\uff08\u7ec8\u7aef\u4e0a\uff09","title":"LogViewer"},{"location":"Linux/","text":"Linux \u9009\u4fee\u8bfe \u00b6 Syh Shell Programming \u4e00. History And Common Sense \u00b6 \u4ec0\u4e48\u662f UNIX \u00b6 \u591a\u4efb\u52a1\u548c\u591a\u7528\u6237\u7684\u64cd\u4f5c\u7cfb\u7edf 1969 \u5e74\u4e8e AT&T \u7684 Bell \u5b9e\u9a8c\u5ba4\u5f00\u53d1\u3002 System V (1983): \u7b2c\u4e00\u4ee3 UNIX \u5546\u7528\u7248\u672c\u3002 BSD (Berkley Software Distribution) POSIX (Portable Operation System Interface) MAN \u76ee\u5f55 \u00b6 Standard commands \u6807\u51c6\u547d\u4ee4 System calls \u7cfb\u7edf\u8c03\u7528 Library functions \u5e93\u51fd\u6570 Special devices \u8bbe\u5907\u8bf4\u660e File formats \u6587\u4ef6\u683c\u5f0f Games and toys \u6e38\u620f\u4e0e\u5a31\u4e50 Miscellaneous \u6742\u9879 Administrative Commands \u7ba1\u7406\u5458\u547d\u4ee4 \u5176\u4ed6\u5b58\u653e\u5185\u6838\u4f8b\u884c\u7a0b\u5e8f\u7684\u6587\u6863 \u67e5\u8be2Man\u624b\u518c \u5982\u679c\u6ca1\u6709 whatis \u5219 make whatis man -k \u5173\u952e\u5b57 \u4e8c. Common commands \u00b6 \u547d\u4ee4\u683c\u5f0f\uff1a \u547d\u4ee4\u540d -\u7b80\u5199\u9009\u9879 --\u5168\u5199\u9009\u9879 \u53c2\u65701,\u53c2\u65702,... \u6839\u76ee\u5f55 \uff1a / \u5f53\u524d\u76ee\u5f55\uff1a. \u7236\u7ea7\u76ee\u5f55\uff1a.. pwd \uff1a\u6253\u5370\u5de5\u4f5c\u76ee\u5f55 mkdir \uff1a\u65b0\u5efa\u76ee\u5f55 -p \uff1a\u521b\u5efa\u76ee\u5f55\u6811 cd \uff1a\u6539\u53d8\u5de5\u4f5c\u76ee\u5f55 cp \uff1a\u590d\u5236\u6587\u4ef6 -R \uff1a\u9012\u5f52 mv \uff1a\u79fb\u52a8\u6587\u4ef6 ls \uff1a\u5f53\u524d\u76ee\u5f55\u5217\u8868 -l \uff1a\u5c55\u793a\u8be6\u7ec6\u4fe1\u606f cat \uff1a\u8fde\u63a5\u6587\u4ef6\u6216\u6807\u51c6\u8f93\u5165\u5e76\u6253\u5370 more \uff1a\u5206\u5c4f\uff0c\u4e0d\u80fd\u5411\u524d\u770b \u7a7a\u683c\uff1a\u4e0b\u4e00\u5c4f\u5e55 \u56de\u8f66\uff1a\u4e0b\u4e00\u884c less \uff1a\u53ef\u5411\u524d\u5411\u540e\u9605\u89c8\u6587\u4ef6 \u652f\u6301HJKL \u67e5\u770b\u6587\u4ef6 more/less + \u6587\u4ef6\u540d \u67e5\u770bls: ls path |more man -k \u5173\u952e\u5b57|more \u68c0\u7d22\u5173\u952e\u5b57\uff1a man -k \u5173\u952e\u5b57|grep open|more man 2 open : man\u624b\u518c\u7b2c\u4e8c\u7ae0\u7684open\u547d\u4ee4 /\u5173\u952e\u5b57 \uff1a\u68c0\u7d22 \u6307\u4ee4 \u4f5c\u7528 \u5907\u6ce8 CTRL + C \u6740\u6b7b\u8fdb\u7a0b CTRL + SHIFT + C \u590d\u5236 cd \u5207\u6362\u76ee\u5f55 cp \u590d\u5236 cp source target cp -R \u590d\u5236\uff08\u9012\u5f52\uff09 source\u4e3a\u76ee\u5f55\u65f6 \u9700\u8981\u9012\u5f52\u590d\u5236 R: cat \u6253\u5f00\uff08\u8fde\u63a5\uff09\u4e00\u4e2a\u6587\u4ef6 HJKL \u2190\u2193\u2191\u2192 /+\u67e5\u8be2\u5185\u5bb9+\u56de\u8f66 -> \u67e5\u8be2 ls \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5185\u5bb9 ls path ls -R \u9012\u5f52\u67e5\u770b mkdir \u65b0\u5efa\u6587\u4ef6\u5939 make directory1,directory2,\u2026\u2026\uff08\u652f\u6301for\u5faa\u73af\uff09 mkdir (for) mkdir -p a/b/cd \u81ea\u52a8\u5c42\u7ea7\u76ee\u5f55 N \u4e0b\u4e00\u4e2a SHIFT + N \u4e0b\u4e00\u4e2a pwd \u5f53\u524d\u76ee\u5f55 print working directory rm \u5220\u9664 rm -R \u9012\u5f52\u5220\u9664 \u5220\u9664\u6587\u4ef6\u5939 rm -Rf \u9012\u5f52\u5220\u9664\uff08\u522b\u95ee\u6211\uff09 tail \u67e5\u770b\u6587\u4ef6\u7684\u540e\u5341\u884c Hello World \u00b6 vi hello.c cc hello.c //\u7f16\u8bd1\u5e76\u81ea\u52a8\u751f\u6210a.out ./a.out cc hello.c -o hello //\u6307\u5b9a\u751f\u6210\u7684\u6587\u4ef6\u540d VI \u00b6 \u8fdb\u5165 VI \u9ed8\u8ba4\u662f \u547d\u4ee4\u6a21\u5f0f \uff0c\u6309\u4e0b I \u952e\u8fdb\u5165 \u63d2\u5165\u6a21\u5f0f \u3002 I \u5149\u6807\u524d\uff0c a \u5149\u6807\u540e\uff0c o \u4e0b\u4e00\u884c\uff0c O \u4e0a\u4e00\u884c\u3002 \u63d2\u5165\u6a21\u5f0f\u6309\u4e0b esc \u8fd4\u56de \u547d\u4ee4\u6a21\u5f0f \u3002 \u547d\u4ee4\u6a21\u5f0f\u6309\u4e0b : \u8fdb\u5165 \u6267\u884c\u6a21\u5f0f \uff0c\u6309\u4e0b \u56de\u8f66 \u8fd4\u56de\u547d\u4ee4 CMD \u6a21\u5f0f\u3002 set number : \u663e\u793a\u884c\u53f7 q \u76f4\u63a5\u9000\u51fa wq \u4fdd\u5b58\u5e76\u9000\u51fa w \u6587\u4ef6\u540d \uff1a\u53e6\u5b58\u4e3a \u8f93\u5165I \u5de6\u4e0b\u89d2\u663e\u793a\u8fdb\u5165\u63d2\u5165INSERT\u6a21\u5f0f ESC\u8fdb\u5165\u547d\u4ee4 CMD \u6a21\u5f0f i : \u5149\u6807\u524d\u63d2\u5165 a : \u5149\u6807\u540e\u63d2\u5165 o :\u4e0b\u4e00\u884c\u63d2\u5165 O : \u4e0a\u4e00\u884c\u63d2\u5165 y?y \u590d\u5236?\u884c yank d?d \u526a\u5207?\u884c (\uff1f\u5747\u53ef\u7701\u7565) p \u7c98\u8d34 ^ : \u884c\u5934 $ \uff1a\u884c\u5c3e gg \uff1a\u7b2c\u4e00\u884c G \uff1a \u6700\u540e\u4e00\u884czhantie gg=G \uff1a\u6392\u7248 = \uff1a\u5c06\u9009\u4e2d\u7684\u884c\u8fdb\u884c\u6392\u7248\uff1b x \uff1a\u5220\u9664\u4e00\u4e2a\u5b57\u7b26 J \uff1a\u4e0a\u4e0b\u884c\u5408\u5e76 vimtutor \uff1a\u624b\u518c \u4e09. Files/Users \u00b6 \u7cfb\u7edf\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u6253\u5f00\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u4fe1\u606f\u88c5\u8f7d\u5230\u6253\u5f00\u6587\u4ef6\u8868\u3002 \u7ba1\u9053 \u00b6 |more \u5206\u5c4f\u663e\u793a |grep \u5b57\u7b26\u4e32\u67e5\u627e cc/gcc source -o target \u7f16\u8bd1source\u5e76\u751f\u6210target CP \u00b6 \u6253\u5f00\u6e90\u6587\u4ef6 \u6253\u5f00\u6216\u521b\u5efa\u76ee\u6807\u6587\u4ef6 \u4ece\u6e90\u6587\u4ef6\u8bfb\u53d6 \u5199\u5165\u76ee\u6807\u6587\u4ef6\uff0c\u76f4\u5230\u6e90\u6587\u4ef6\u8bfb\u5b8c Linux \u4e0d\u533a\u5206\u6587\u672c\u6587\u4ef6\u3001\u4e8c\u8fdb\u5236\u6587\u4ef6\u7b49\u3002 Linux \u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u5b9e\u73b0\u590d\u5236\uff0c\u9891\u7e41\u7684\u7cfb\u7edf\u8c03\u7528\u5c06\u5f71\u54cd\u6027\u80fd\uff0c\u6240\u4ee5buffer\u7684\u5927\u5c0f\u8bbe\u5b9a\u5c06\u76f4\u63a5\u5f71\u54cd\u8fdb\u7a0b\u8fd0\u884c\u901f\u5ea6\u3002 \u4e5d\u9879\u6743\u9650 \u00b6 \u62e5\u6709\u8005\u8bfb\u3001\u5199\u3001\u6267\u884c\uff1b\u540c\u7ec4\u7528\u6237\u8bfb\u3001\u5199\u3001\u6267\u884c\uff1b\u5176\u4ed6\u7528\u6237\u8bfb\u3001\u5199\u3001\u6267\u884c\u3002 ls -l \u663e\u793a\u6240\u6709\u7528\u6237 rwx\u53ef\u8bfb\u53ef\u5199\u53ef\u6267\u884c\uff0c\u4e09\u7ec4\u5206\u522b\u5bf9\u5e94 user(owner) group others \u770b\u505a\u516b\u8fdb\u5236\u7684\u4e00\u7ec4\u6570\u5b57 \u4e09\u4f4d\u5bf9\u5e94\u4e00\u4e2a\u516b\u8fdb\u5236\u6570 rw-r----- : 0640 \u6587\u4ef6\u64cd\u4f5c \u00b6 \u8981\u5bf9\u67d0\u4e2a\u8bbe\u5907\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5c31\u6253\u5f00\u6b64\u8bbe\u5907\u6587\u4ef6\uff0c\u6253\u5f00\u6587\u4ef6\u5c31\u4f1a\u83b7\u5f97\u8be5\u6587\u4ef6\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26fd( file discriptor), \u5b83\u5c31\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5728PCB\uff08Process Control Block\uff09\u4e2d\u4fdd\u5b58\u7740\u4e00\u4efd\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\uff0c\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u662f\u8fd9\u4e2a\u8868\u7684\u7d22\u5f15\uff0c\u6bcf\u4e2a\u8868\u9879\u90fd\u6709\u4e00\u4e2a\u6307\u5411\u5df2\u6253\u5f00\u6587\u4ef6\u7684\u6307\u9488\u3002 \u5199\u6587\u4ef6\u662f\u8f93\u51fa\u4e0d\u662f\u8f93\u5165 \u8bfb\u6587\u4ef6\u662f\u8f93\u5165 cp(\u9009\u9879)(\u53c2\u6570) \u9009\u9879\uff1a -a\uff1a\u6b64\u53c2\u6570\u7684\u6548\u679c\u548c\u540c\u65f6\u6307\u5b9a\"-dpR\"\u53c2\u6570\u76f8\u540c\uff1b -d\uff1a\u5f53\u590d\u5236\u7b26\u53f7\u8fde\u63a5\u65f6\uff0c\u628a\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u4e5f\u5efa\u7acb\u4e3a\u7b26\u53f7\u8fde\u63a5\uff0c\u5e76\u6307\u5411\u4e0e\u6e90\u6587\u4ef6\u6216\u76ee\u5f55\u8fde\u63a5\u7684\u539f\u59cb\u6587\u4ef6\u6216\u76ee\u5f55\uff1b -f\uff1a\u5f3a\u884c\u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4e0d\u8bba\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u662f\u5426\u5df2\u5b58\u5728\uff1b -i\uff1a\u8986\u76d6\u65e2\u6709\u6587\u4ef6\u4e4b\u524d\u5148\u8be2\u95ee\u7528\u6237\uff1b -l\uff1a\u5bf9\u6e90\u6587\u4ef6\u5efa\u7acb\u786c\u8fde\u63a5\uff0c\u800c\u975e\u590d\u5236\u6587\u4ef6\uff1b -p\uff1a\u4fdd\u7559\u6e90\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u5c5e\u6027\uff1b -R/r\uff1a\u9012\u5f52\u5904\u7406\uff0c\u5c06\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55\u4e00\u5e76\u5904\u7406\uff1b -s\uff1a\u5bf9\u6e90\u6587\u4ef6\u5efa\u7acb\u7b26\u53f7\u8fde\u63a5\uff0c\u800c\u975e\u590d\u5236\u6587\u4ef6\uff1b -u\uff1a\u4f7f\u7528\u8fd9\u9879\u53c2\u6570\u540e\u53ea\u4f1a\u5728\u6e90\u6587\u4ef6\u7684\u66f4\u6539\u65f6\u95f4\u8f83\u76ee\u6807\u6587\u4ef6\u66f4\u65b0\u65f6\u6216\u662f\u540d\u79f0\u76f8\u4e92\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u5e76\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u590d\u5236\u6587\u4ef6\uff1b -S\uff1a\u5728\u5907\u4efd\u6587\u4ef6\u65f6\uff0c\u7528\u6307\u5b9a\u7684\u540e\u7f00\u201cSUFFIX\u201d\u4ee3\u66ff\u6587\u4ef6\u7684\u9ed8\u8ba4\u540e\u7f00\uff1b -b\uff1a\u8986\u76d6\u5df2\u5b58\u5728\u7684\u6587\u4ef6\u76ee\u6807\u524d\u5c06\u76ee\u6807\u6587\u4ef6\u5907\u4efd\uff1b -v\uff1a\u8be6\u7ec6\u663e\u793a\u547d\u4ee4\u6267\u884c\u7684\u64cd\u4f5c\u3002 \u53c2\u6570\uff1a \u6e90\u6587\u4ef6\uff1a\u5236\u5b9a\u6e90\u6587\u4ef6\u5217\u8868\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ccp\u547d\u4ee4\u4e0d\u80fd\u590d\u5236\u76ee\u5f55\uff0c\u5982\u679c\u8981\u590d\u5236\u76ee\u5f55\uff0c\u5219\u5fc5\u987b\u4f7f\u7528-R\u9009\u9879\uff1b \u76ee\u6807\u6587\u4ef6\uff1a\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u3002\u5f53\u201c\u6e90\u6587\u4ef6\u201d\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u8981\u6c42\u201c\u76ee\u6807\u6587\u4ef6\u201d\u4e3a\u6307\u5b9a\u7684\u76ee\u5f55\u3002 \u4f8b\u5b50\uff1a cp file1 file \u5c06file1\u590d\u5236\u81f3file2\u4e2d cp file /usr/men/file1 \u5c06\u6587\u4ef6file\u590d\u5236\u5230\u76ee\u5f55/usr/men\u4e0b\uff0c\u5e76\u6539\u540d\u4e3afile1 cat\u547d\u4ee4\u8fde\u63a5\u6587\u4ef6\u5e76\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u4e0a\uff0ccat\u7ecf\u5e38\u7528\u6765\u663e\u793a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u7c7b\u4f3c\u4e8e\u4e0b\u7684type\u547d\u4ee4\u3002 cat(\u9009\u9879)(\u53c2\u6570) \u9009\u9879\uff1a -n\u6216-number\uff1a\u67091\u5f00\u59cb\u5bf9\u6240\u6709\u8f93\u51fa\u7684\u884c\u6570\u7f16\u53f7\uff1b -b\u6216--number-nonblank\uff1a\u548c-n\u76f8\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5bf9\u4e8e\u7a7a\u767d\u884c\u4e0d\u7f16\u53f7\uff1b -s\u6216--squeeze-blank\uff1a\u5f53\u9047\u5230\u6709\u8fde\u7eed\u4e24\u884c\u4ee5\u4e0a\u7684\u7a7a\u767d\u884c\uff0c\u5c31\u4ee3\u6362\u4e3a\u4e00\u884c\u7684\u7a7a\u767d\u884c\uff1b -A\uff1a\u663e\u793a\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u884c\u5c3e\u663e\u793a\u201c$\u201d\uff1b -e\uff1a\u7b49\u4ef7\u4e8e\"-vE\"\u9009\u9879\uff1b -t\uff1a\u7b49\u4ef7\u4e8e\"-vT\"\u9009\u9879\uff1b \u53c2\u6570\uff1a\u6587\u4ef6\u5217\u8868\uff1a\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u6587\u4ef6\u5217\u8868 \u4f8b\u5b50\uff1a cat m1 \uff08\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u6587\u4ef6ml\u7684\u5185\u5bb9\uff09 cat m1 m2 \uff08\u540c\u65f6\u663e\u793a\u6587\u4ef6ml\u548cm2\u7684\u5185\u5bb9\uff09 cat m1 m2 > file \uff08\u5c06\u6587\u4ef6ml\u548cm2\u5408\u5e76\u540e\u653e\u5165\u6587\u4ef6file\u4e2d\uff09 open file \u8f93\u5165\u547d\u4ee4 man 2 open \u53ef\u67e5\u770b\u7cfb\u7edf\u8c03\u7528open \u4e24\u79cd\u5f62\u5f0f\uff1a int open(const char *pathname, int flags); int open(const char *pathname, int flags, mode_t mode); pathname : \u6587\u4ef6\u8def\u5f84 flags : \u5206\u4e3a\u4e24\u7c7b\uff1a\u4e3b\u7c7b\u3001\u526f\u7c7b \u4e3b\u7c7b\uff1a O_RDONLY \u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6253\u5f00 O_WRONLY \u4ee5\u53ea\u5199\u65b9\u5f0f\u6253\u5f00 O_RDWR \u4ee5\u53ef\u8bfb\u53ef\u5199\u65b9\u5f0f\u6253\u5f00 \u526f\u7c7b\uff1a O_CREAT \u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u8be5\u6587\u4ef6 O_EXCL \u5982\u679c\u4f7f\u7528O_CREAT\u9009\u9879\u4e14\u6587\u4ef6\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u6d88\u606f O_NOCTTY \u5982\u679c\u6587\u4ef6\u4e3a\u7ec8\u7aef\uff0c\u90a3\u4e48\u7ec8\u7aef\u4e0d\u53ef\u4ee5\u8c03\u7528open\u7cfb\u7edf\u8c03\u7528\u7684\u90a3\u4e2a\u8fdb\u7a0b\u7684\u63a7\u5236\u7ec8\u7aef O_TRUNC \u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\u6cfd\u5220\u9664\u6587\u4ef6\u4e2d\u539f\u6709\u6570\u636e O_APPEND \u4ee5\u8ffd\u52a0\u7684\u65b9\u5f0f\u6253\u5f00 mode \u5982\u679c\u6587\u4ef6\u88ab\u65b0\u5efa\uff0c\u5219\u5176\u6743\u9650\u4e3amode mode\u4e3a3\u4f4d\u516b\u8fdb\u5236\u7801 \u7b2c\u4e00\u4f4d\u4ee3\u8868\u6587\u4ef6\u6240\u6709\u8005\u7684\u6743\u9650\uff0c\u7b2c\u4e8c\u4f4d\u4ee3\u8868\u7fa4\u7ec4\u7684\u6743\u9650\uff0c\u7b2c\u4e09\u4f4d\u4e3a\u5176\u4ed6\u4eba\u7684\u6743\u9650 4\u4e3a\u8bfb\u6743\u9650 2\u4e3a\u5199\u6743\u9650 1\u4e3a\u6267\u884c\u6743\u9650 mode\u7684\u6bcf\u4e00\u4f4d\u4e3a\u8fd9\u4e09\u4e2a\u6743\u9650\u6570\u5b57\u7684\u548c su - : \u53d8\u4e3a\u8d85\u7ea7\u7528\u6237 \u63d0\u793a\u7b26\u53d8\u6210# who : \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u7684\u7528\u6237\u4fe1\u606f w : \u67e5\u770b\u5df2\u767b\u5f55\u7684\u7528\u6237\u4ee5\u53ca\u7528\u6237\u7684\u6d3b\u52a8 /etc \u4e0b\u90fd\u662f\u914d\u7f6e\u6587\u4ef6 \u7ec4\u7684\u4fe1\u606f\u5b58\u50a8\u5728 /etc/group \u7528\u6237\u548c\u5bc6\u7801\u4fe1\u606f\u5b58\u50a8\u5728 /etc/passwd \u548c /etc/shadow /etc \u4e0b\u7684passwd \u6587\u4ef6 \u4fee\u6539\u7528\u6237ID\u4e3a0 \u7528\u6237\u5c31\u4f1a\u53d8\u4e3aROOT \u5373\u7cfb\u7edf\u662f\u901a\u8fc7\u7528\u6237ID\u6765\u8bc6\u522b\u7528\u6237 \u800c\u4e0d\u662f\u7528\u6237\u540d \u6b64\u65f6 root\u4e0b\u67e5\u770b /etc \u7684shadow\u6587\u4ef6\u5c31\u53ef\u4ee5\u770b\u5230MD5\u52a0\u5bc6\u540e\u7684\u5bc6\u7801 \u800c\u4e0d\u662fX useradd \u6dfb\u52a0\u7528\u6237 password \u8bbe\u7f6e\u5bc6\u7801 \u76ee\u5f55\u6587\u4ef6\u4fe1\u606f\u4e0e\u4f4d\u64cd\u4f5c \u00b6 opendir \u6253\u5f00\u76ee\u5f55 readdir \u8bfb\u53d6\u76ee\u5f55 closedir \u5173\u95ed\u76ee\u5f55 stat \u7cfb\u7edf\u8c03\u7528\u83b7\u53d6\u6587\u4ef6\u72b6\u6001 ls -a \u5c55\u793a\u6587\u4ef6\u4ee5\u53ca\u9690\u85cf\u6587\u4ef6 ls -i \u5c55\u793a\u6587\u4ef6\u4ee5\u53ca\u6587\u4ef6\u53f7 ls -l \u6587\u4ef6\u540d \u67e5\u770bFCB\u5185\u5bb9 \u91cd\u547d\u540d\u548c\u79fb\u52a8\u6587\u4ef6 \u90fd\u4e0d\u4f1a\u6539\u53d8\u5176\u6587\u4ef6\u53f7 \u56e0\u4e3a\u4f60\u53ea\u662f\u5728\u4fee\u6539\u76ee\u5f55(\u76ee\u5f55\u4e5f\u662f\u4e00\u4e2a\u6587\u4ef6) UNIX\u6587\u4ef6\u7cfb\u7edf\u662findex\u7c7b\u578b\u7684\u6587\u4ef6\u5b58\u50a8 \u5206\u4e3a super block | i_nodes(FCB \u6307\u5411\u540e\u9762\u7684\u6587\u4ef6\u5757) | blocks \u7531i_node\u53ef\u4ee5\u6307\u5411\u5341\u4e2ablock \u90a3\u4e48\u7b2c\u5341\u4e00\u4e2a\u6307\u5411\u7684\u5c31\u662f\u4e00\u4e2a\u65b0\u7684 \u5168\u662f\u6307\u9488\u7684\u6587\u4ef6 \u4ee5\u6b64\u7c7b\u63a8 \u8fd8\u6709\u4e8c\u7ea7\u6307\u9488 \u6587\u4ef6\u540d\u53ea\u5728\u76ee\u5f55\u4e2d\u5b58\u5728 i \u8282\u70b9\u4e2d\u4e0d\u5b58\u50a8\u6587\u4ef6\u540d st_mode \u662f\u4e00\u4e2a16\u4f4d\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u6587\u4ef6\u7c7b\u578b\u548c\u6743\u9650\u88ab\u7f16\u7801\u5728\u8fd9\u4e2a\u6570\u4e2d\u3002 16 bit 0000 000 000 000 000 \u524d\u56db\u4f4d\u4e3afile type regularfile directory \u518d\u4e09\u4f4d setuid setgid sticky \u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 \u5982\u679csetuid \u548c \u8868\u793auser\u7684\u4e09\u4f4d\u7684\u6700\u540e\u4e00\u4f4d\u90fd\u4e3a1 \u5219\u8868\u793auser\u7684\u4e09\u4f4d\u7684\u6700\u540e\u4e00\u4f4d\u53d8\u4e3as sticky \u5bf9\u76ee\u5f55\u6709\u610f\u4e49 sticky\u4e3a1\u65f6 other\u7684\u6700\u540e\u4e00\u4f4d\u53d8\u4e3at \u6240\u4ee5\u4e00\u822c\u4e0d\u53ef\u4ee5\u6709777\u7684mode \u53ef\u4ee5\u91c7\u7528 chmod 1777d \u5bf9\u53ef\u6267\u884c\u6587\u4ef6\u8bbe\u7f6e setuid \u6743\u9650\u65f6\uff0c\u5c06\u5bf9\u8fd0\u884c\u8be5\u6587\u4ef6\u7684\u8fdb\u7a0b\u6388\u4e88\u57fa\u4e8e\u6587\u4ef6\u6240\u6709\u8005\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8be5\u8bbf\u95ee\u6743\u9650**\u4e0d\u662f**\u57fa\u4e8e\u6b63\u5728\u8fd0\u884c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7528\u6237\u3002\u4f7f\u7528\u6b64\u7279\u6b8a\u6743\u9650\uff0c\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u901a\u5e38\u53ea\u6709\u5c5e\u4e3b\u624d\u53ef\u8bbf\u95ee\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002 setgid \u6743\u9650\u4e0e setuid \u6743\u9650\u7c7b\u4f3c\u3002\u53ef\u5c06\u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID \u66f4\u6539\u4e3a\u62e5\u6709\u8be5\u6587\u4ef6\u7684\u7ec4\uff0c\u5e76\u57fa\u4e8e\u6388\u4e88\u8be5\u7ec4\u7684\u6743\u9650\u5bf9\u7528\u6237\u6388\u4e88\u8bbf\u95ee\u6743\u9650\u3002 sticky \u4f4d\u662f\u4fdd\u62a4\u76ee\u5f55\u4e2d\u6587\u4ef6\u7684\u6743\u9650\u4f4d\u3002\u5982\u679c\u5bf9\u76ee\u5f55\u8bbe\u7f6e\u4e86 sticky \u4f4d\uff0c\u5219\u53ea\u6709\u6587\u4ef6\u6240\u6709\u8005\u3001\u76ee\u5f55\u6240\u6709\u8005\u6216\u7279\u6743\u7528\u6237\u624d\u53ef\u4ee5\u5220\u9664\u6587\u4ef6\u3002 root \u7528\u6237\u662f\u7279\u6743\u7528\u6237\u7684\u4e00\u4e2a\u793a\u4f8b\u3002sticky \u4f4d\u7981\u6b62\u7528\u6237\u4ece\u516c\u5171\u76ee\u5f55\uff08\u5982 /tmp \uff09\u4e2d\u5220\u9664\u5176\u4ed6\u7528\u6237\u7684\u6587\u4ef6\uff0c777 \u6743\u9650\u7684\u6587\u4ef6\u9700\u8981\u5bf9 sticky \u7f6e\u4f4d\uff0c\u5426\u5219\u5176\u4ed6\u7a0b\u5e8f\u80fd\u8f7b\u6613\u5730\u5220\u6389\u5b83\u3002 -rwxrwxrw- \u5404\u4e09\u4f4d \u516b\u8fdb\u5236\u8868\u793a\u4e3a766 \u6700\u540e\u7684 9 \u4f4d\u662f\u8bb8\u53ef\u6743\u9650\uff0c\u5206\u4e3a 3 \u7ec4\uff0c\u5bf9\u5e94 3 \u7ec4\u7528\u6237\uff0c\u5206\u522b\u662f\u6587\u4ef6\u6240\u6709\u8005\u3001\u540c\u7ec4\u7528\u6237\u548c\u5176\u4ed6\u7528\u6237\u3002\u6bcf\u7ec4 3 \u4f4d\uff0c\u5206\u522b\u662f\u8bfb\u3001\u5199\u548c\u6267\u884c\u7684\u6743\u9650\u3002 user group other mask(\u63a9\u7801) | \u8fd0\u7b97 | \u542b\u4e49 | \u5907\u6ce8| |-------|-------|-------| | & mask | testing | \u4f7f\u7528\u4f4d\u4e0e\u7684\u65b9\u5f0f\u5f97\u5230\u5bf9\u5e94\u4f4d\u7684\u60c5\u51b5 | | | mask | set | \u4f7f\u7528\u4f4d\u6216\u7684\u65b9\u5f0f\u8d4b\u67d0\u4e00\u4f4d\u503c\u4e3a1 | | & ~mask | reset | \u4f7f\u7528\u53d6\u53cd\u518d\u4e0e\u53bb\u6389\u67d0\u4e00\u4f4d | \u51fd\u6570\u4e0d\u8981\u8d85\u8fc748\u884c \u8d85\u8fc7\u5219\u5206\u5272\u4e3a\u5b50\u51fd\u6570 \u76ee\u5f55\u53ef\u8bfb\uff1a\u53ef\u6267\u884c ls \u67e5\u770b\u5185\u5bb9 \u76ee\u5f55\u53ef\u5199\uff1a\u5728\u76ee\u5f55\u4e2d\u6dfb\u52a0\u6216\u5220\u9664\u6587\u4ef6 \u76ee\u5f55\u53ef\u6267\u884c\uff1a\u53ef\u6267\u884c cd \u547d\u4ee4\u6253\u5f00\u76ee\u5f55 \u4e2d\u6709\u4ee5\u4e0b\u5b9a\u4e49\uff1a #define S_IFMT 0170000 /* type of file */ #define S_IFREG 0100000 /* regular */ #define S_IFDIR 0040000 /* directory */ #define S_IFBLK 0060000 /* block special */ #define S_IFCHR 0020000 /* character special */ #define S_IFIFO 0010000 /* fifo */ #define S_IFLNK 0120000 /* symbolic link */ #define S_IFSOCK 0140000 /* socket */ chmod chmod g-w \u8ba9group\u53bb\u6389 w chmod +w \u52a0\u4e0aw chmod 640 \u76f4\u63a5\u4fee\u6539\u4e3arw-r----- \u6743\u5229\u4e3e\u4f8b\uff1a r \u8bfb : ls x : cd touch \u6587\u4ef6\u540d \u521b\u5efa\u7a7a\u7684\u65b0\u6587\u4ef6 chown \u7528\u6237\u540d \u6587\u4ef6\u540d \u6539\u53d8\u6240\u6709\u8005 ln source target \u94fe\u63a5 \u4e24\u4e2a\u6587\u4ef6\u7684inode\u8282\u70b9\u53f7\u76f8\u540c \u53ea\u662f\u6e90\u6587\u4ef6\u591a\u4e86\u4e00\u4e2a\u5165\u53e3 ls -li \u6587\u4ef6\u540d \u6743\u9650\u4e4b\u540e\u7684\u6570\u5b57\u8868\u793a\u5165\u53e3\u4e2a\u6570 \u5f53\u5165\u53e3\u6570\u4e3a0\u65f6 inode\u91ca\u653e rm \u5176\u5b9e\u7528\u7684\u662funlink \u5220\u9664\u4e86\u94fe\u63a5 move \u5176\u5b9e\u7528\u7684\u662frename \u672c\u8d28\u4e0a\u662f\u91cd\u547d\u540d \u5220\u9664\u5230\u56de\u6536\u7ad9\u53ea\u662f\u79fb\u52a8\u3002\u4ece\u56de\u6536\u7ad9\u5f7b\u5e95\u5220\u9664\u65f6\uff0ci \u8282\u70b9\u88ab\u91ca\u653e\u3002 \u7b26\u53f7\u94fe\u63a5 ln -s source target \u8282\u70b9\u53f7\u4e0d\u4e00\u6837\u4e86 ls-l \u6587\u4ef6\u540d \u53ef\u4ee5\u770b\u5230 source -> target \u94fe\u63a5\u5230\u76ee\u5f55\u7684\u65f6\u5019 \u53ef\u4ee5\u4f7f\u7528\u7b26\u53f7\u94fe\u63a5 \u5176\u4ed6\u547d\u4ee4 \u00b6 \u547d\u4ee4 \u542b\u4e49 chown \u6539\u53d8\u67d0\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6240\u6709\u8005\u548c\u6240\u5c5e\u7684\u7ec4 mkdir \u521b\u5efa\u76ee\u5f55 rmdir \u5220\u9664\u76ee\u5f55 rm \u7cfb\u7edf\u8c03\u7528 unlink mv \u7cfb\u7edf\u8c03\u7528 rename cd \u7cfb\u7edf\u8c03\u7528 chdir opendir \u6253\u5f00\u76ee\u5f55 readdir \u8bfb\u53d6\u76ee\u5f55 closedir \u5173\u95ed\u76ee\u5f55 \u56db. Device,Files and Connection Control \u00b6 \u5e94\u5f53\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u9632\u6b62\u79fb\u52a8\u540e\u5931\u6548\u3002 **\u786c\u94fe\u63a5**\u662f\u5c06\u76ee\u5f55\u94fe\u63a5\u5230\u6811\u7684\u6307\u9488\uff0c\u786c\u94fe\u63a5\u540c\u65f6\u4e5f\u662f\u5c06\u6587\u4ef6\u540d\u548c\u6587\u4ef6\u672c\u8eab\u94fe\u63a5\u8d77\u6765\u7684\u6307\u9488\u3002 \u786c\u94fe\u63a5\u4e0d\u80fd\u6307\u5411\u5176\u4ed6\u7cfb\u7edf\u4e2d\u7684 i \u8282\u70b9\uff0c\u5373\u4f7f\u6839\u4e5f\u4e0d\u80fd\u751f\u6210\u5230\u76ee\u5f55\u7684\u94fe\u63a5\u3002 **\u7b26\u53f7\u94fe\u63a5**\u901a\u8fc7\u540d\u5b57\u5f15\u7528\u6587\u4ef6\uff0c\u800c\u4e0d\u662f i \u8282\u70b9\u53f7\uff0c\u56e0\u800c\u5b83\u53ef\u80fd\u8de8\u8d8a\u6587\u4ef6\u7cfb\u7edf\u3002 \u5728 Unix \u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u8bbe\u5907\u90fd\u88ab\u5f53\u505a\u4e00\u4e2a\u6587\u4ef6\u3002 \u5bf9\u8bbe\u5907\u8fdb\ufa08\u8bfb\u5199\u5c31\u662f\u5bf9\u8bbe\u5907\u5bf9\u5e94\u7684\u9a71\u52a8\u8fdb\ufa08\u8c03\u7528\uff0c\u76f8\u5f53\u4e8e\u8bfb\u5199\u6587\u4ef6\u3002 \u6bcf\u4e2a\u8bbe\u5907\u90fd\u6709\u4e00\u4e2a\u6587\u4ef6\u540d\u3001\u4e00\u4e2a i-\u8282\u70b9\u53f7\u3001\u4e00\u4e2a\u6587\u4ef6\u6240\u6709\u8005\u3001\u4e00\u4e2a\u6743\u9650\u4f4d\u7684\u96c6\u5408\u548c\u6700\u8fd1\u4fee\u6539\u65f6\u95f4\u3002\u4f60\u6240\u4e86\u89e3\u7684\u548c\u6587\u4ef6\u6709\u5173\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u88ab\u8fd0\u7528\u4e8e\u7ec8\u7aef\u548c\u5176\u4ed6\u7684\u8bbe\u5907\u3002 Linux \u5c06\u8bbe\u5907\u6620\u5c04\u5230 /dev/... \u76ee\u5f55\uff0c\u90e8\u5206\u8bbe\u5907\u4f7f\u2f64\u7528\u4e3b\u8bbe\u5907\u53f7\u548c\u6b21\u8bbe\u5907\u53f7\u6765\u533a\u5206\u6307\u5b9a\u7684\u5916\u8bbe\u3002\u4e3b\u8bbe\u5907\u53f7\u8bf4\u660e\u8bbe\u5907\u7c7b\u578b\uff0c\u6b21\u8bbe\u5907\u53f7\u8bf4\u660e\u5177\u4f53\u6307\u54ea\u4e00\u4e2a\u8bbe\u5907\u3002\u6bd4\u5982\uff1a /dev/sda \u6307\u5411 SCSI ID \u6700\u5c0f\u7684 SCSI \u786c\u76d8 /dev/input/mice \u6307\u5411\u9f20\u6807\u8bbe\u5907\u6587\u4ef6\u7684\u7b26\u53f7\u94fe\u63a5 /dev/fd0 \u7684\u4e3b\u8bbe\u5907\u53f7\u4e3afd\uff08\u8f6f\u76d8\u9a71\u52a8\ufa38 floppy disk\uff09\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a0\uff08\u8f6f\u76d8\u9a71\u52a8\ufa38\u7f16\u53f7\uff09 \u5e38\u7528\u7684\u78c1\u76d8\u6587\u4ef6\u7531\u5b57\u8282\u7ec4\u6210\uff0c\u78c1\u76d8\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u6570\u5c31\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u3002\u8bbe\u5907\u6587\u4ef6\u662f\u94fe\u63a5\uff0c\u800c\u4e0d\u662f\u5bb9\u5668\u3002\u952e\u76d8\u548c\u9f20\u6807\u4e0d\u5b58\u50a8\u51fb\u952e\u6570\u548c\u70b9\u51fb\u6570\u3002\u8bbe\u5907\u6587\u4ef6\u7684 i \u8282\u70b9\u5b58\u50a8\u7684\u662f\u6307\u5411\u5185\u6838\u5b50\u7a0b\u5e8f\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u548c\u5b58\u50a8\u5217\u8868\u3002\u5185\u6838\u4e2d\u4f20\u8f93\u8bbe\u5907\u6570\u636e\u7684\u5b50\u7a0b\u5e8f\u88ab\u79f0\u4e3a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 ls -l \u8def\u5f84 ls -l /dev/input/mice \u53d1\u73b0\u7b2c\u4e00\u4f4d\u662fc \u8868\u793a\u662f\u5b57\u7b26\u578b inode\u6307\u5411\u5185\u6838\u4e2d\u7684\u8bbe\u5907\u7684\u9a71\u52a8 \u8bbe\u5907\u4e0e\u6587\u4ef6\u7684\u4e0d\u540c\u4e4b\u5904 \u00b6 \u78c1\u76d8\u6587\u4ef6\u548c\u8bbe\u5907\u6587\u4ef6\u90fd\u6709\u6587\u4ef6\u540d\u548c\u5c5e\u6027\uff0c\u7cfb\u7edf\u8c03\u7528 open \u7528\u4e8e\u521b\u5efa\u4e0e\u6587\u4ef6\u548c\u8bbe\u5907\u7684\u8fde\u63a5\u3002 \u78c1\u76d8\u8fde\u63a5\u7684\u5c5e\u6027\uff1a\u4f8b\u5982\u7f13\u51b2\u3002\u4e0e\u78c1\u76d8\u6587\u4ef6\u7684\u8fde\u63a5\u901a\u5e38\u5305\u542b\u5185\u6838\u7f13\u51b2\u533a\u3002\u4ece\u8fdb\u7a0b\u5230\u78c1\u76d8\u7684\u5b57\u8282\u5148\u88ab\u7f13\u51b2\uff0c\u7136\u540e\u4ece\u5185\u6838\u7684\u7f13\u51b2\u533a\u88ab\u53d1\u9001\u51fa\u53bb\u3002 \u7ec8\u7aef\u8fde\u63a5\u7684\u5c5e\u6027\uff1a\u4f8b\u5982\u56de\u663e\u3002\u56de\u663e\u5b57\u7b26\u4e0d\u662f\u952e\u76d8\u6216\u7a0b\u5e8f\u7684\u4efb\u52a1\u3002 Connection Control - \u8fde\u63a5\u63a7\u5236 \u00b6 man -k file|grep manipulate|grep 2 \u67e5\u8be2\u540e\u53d1\u73b0 \u5728fcntl\u4e2d\u6709\u5bf9\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u51fd\u6570 \u53ef\u4ee5\u83b7\u53d6\u6807\u5fd7\u4f4d \u5982\uff1a F_GETFL \u83b7\u53d6\u5230\u4e00\u4e2aint\u7c7b\u578b\u7684\u8fd4\u56de\u503c \u5229\u7528 | \u5c06append\u4f4d\u4e3a\u7f6e\u4e3a1 s = (fd,F_GETFL); s |= O_APPEND F_SETFL fcntl(fd,F_SETFL,s) 0_SYNC \u548c 0_ASYNC \u5b9e\u73b0\u540c\u6b65IO\u548c\u5f02\u6b65IO \u78c1\u76d8\u8fde\u63a5\u7684\u5c5e\u6027 \u00b6 \u7cfb\u7edf\u8c03\u7528 open \u7528\u4e8e\u5728\u8fdb\u7a0b\u548c\u78c1\u76d8\u6587\u4ef6\u4e4b\u95f4\u521b\u5efa\u4e00\u4e2a\u8fde\u63a5\u3002 \u5c5e\u6027 1\uff1a\u7f13\u51b2 \u00b6 O_SYNC \u4f4d\u544a\u77e5\u5185\u6838\uff0c\u5bf9 write \u7684\u8c03\u7528\u4ec5\u80fd\u5728\u6570\u636e\u5199\u5165\u5b9e\u9645\u7684\u786c\u4ef6\u65f6\u624d\u80fd\u8fd4\u56de\uff08\u540c\u6b65 I/O\uff09\uff0c\u800c\u4e0d\u662f\u5728\u6570\u636e\u590d\u5236\u5230\u5185\u6838\u7f13\u51b2\u65f6\u5c31\u6267\u884c\u9ed8\u8ba4\u7684\u8fd4\u56de\u64cd\u4f5c\uff08\u5f02\u6b65 I/O\uff09\u3002 O_SYNC \u4f1a\u5173\u95ed\u5185\u6838\u7684\u7f13\u51b2\u673a\u5236\uff0c\u5982\u975e\u7279\u6b8a\u60c5\u51b5\uff0c\u6700\u597d\u4e0d\u8981\u5173\u95ed\u7f13\u51b2\u3002 \u5c5e\u6027 2\uff1a\u81ea\u52a8\u6dfb\u52a0\u6a21\u5f0f \u00b6 \u81ea\u52a8\u6dfb\u52a0\u6a21\u5f0f\u7684\u4f7f\u7528\u573a\u666f\u662f\u82e5\u5e72\u8fdb\u7a0b\u5728\u540c\u4e00\u65f6\u95f4\u5199\u5165\u6587\u4ef6\uff0c\u53ef\u7528\u4e8e\u5904\u7406\u7ade\u4e89\u3002\u4f8b\u5982\u7cfb\u7edf\u5199\u65e5\u5fd7\u3002 \u5f53\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684 O_APPEND \u4f4d\u88ab\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u5bf9 write \u7684\u8c03\u7528\u81ea\u52a8\u8c03\u7528 lseek \u5c06\u5185\u5bb9\u6dfb\u52a0\u5230\u6587\u4ef6\u7684\u672b\u5c3e\u3002 \u5bf9 lseek \u548c write \u7684\u8c03\u7528\u662f\u72ec\u7acb\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5185\u6838\u53ef\u4ee5\u968f\u65f6\u6253\u65ad\u8fdb\u7a0b\uff0c\u4ece\u800c\u4f7f\u540e\u9762\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u88ab\u4e2d\u65ad\u3002\u5f53 O_APPEND \u88ab\u7f6e\u4f4d\uff0c\u5185\u6838\u5c06 lseek \u548c write \u7ec4\u5408\u6210\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff0c\u88ab\u8fde\u63a5\u6210\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5355\u5143\u3002 \u7ec8\u7aef\u8fde\u63a5\u7684\u5c5e\u6027 \u00b6 \u7ec8\u7aef\u662f\u952e\u76d8\u548c\u663e\u793a\u5355\u5143\uff0c\u6700\u91cd\u8981\u7684\u529f\u80fd\u662f\u63a5\u53d7\u6765\u81ea\u7528\u6237\u7684\u5b57\u7b26\u8f93\u5165\u548c\u5c06\u8f93\u51fa\u4fe1\u606f\u663e\u793a\u7ed9\u7528\u6237\u3002 stty \u547d\u4ee4 \u00b6 stty \u547d\u4ee4\u8ba9\u7528\u6237\u8bfb\u53d6\u548c\u4fee\u6539\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbe\u7f6e\u3002 \u7f16\u5199\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f \u00b6 \u5173\u4e8e\u8bbe\u7f6e \u00b6 \u9a71\u52a8\u7a0b\u5e8f\u5305\u542b\u5f88\u591a\u5bf9\u4f20\u5165\u7684\u6570\u636e\u6240\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u88ab\u5206\u4e3a 4 \u79cd\uff1a \u8f93\u5165\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u4ece\u7ec8\u7aef\u6765\u7684\u5b57\u7b26 \u8f93\u51fa\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u6d41\u5411\u7ec8\u7aef\u7684\u5b57\u7b26 \u63a7\u5236\uff1a\u5b57\u7b26\u5982\u4f55\u88ab\u8868\u793a\u2014\u2014\u4f4d\u7684\u4e2a\u6570\u3001\u4f4d\u7684\u5947\u5076\u6027\u3001\u505c\u6b62\u4f4d\u7b49 \u672c\u5730\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u6765\u81ea\u9a71\u52a8\u7a0b\u5e8f\u5185\u90e8\u7684\u5b57\u7b26 \u5e93\u51fd\u6570 tcgetattr \u548c tcsetattr \u63d0\u4f9b\u5bf9\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbf\u95ee\u3002\u4e24\u4e2a\u51fd\u6570\u5728 termios \u7ed3\u6784\u4e2d\u4ea4\u6362\u8bbe\u7f6e\u3002 \u5173\u4e8e\u51fd\u6570 \u00b6 \u6539\u53d8\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbe\u7f6e\u5982\u540c\u6539\u53d8\u78c1\u76d8\u6587\u4ef6\u8fde\u63a5\u7684\u8bbe\u7f6e\uff1a \u4ece\u9a71\u52a8\u7a0b\u5e8f\u83b7\u53d6\u5c5e\u6027 \u4fee\u6539\u76f8\u5173\u5c5e\u6027 \u5c06\u4fee\u6539\u540e\u7684\u5c5e\u6027\u8fd4\u56de\u5230\u9a71\u52a8\u7a0b\u5e8f \u5173\u4e8e\u4f4d \u00b6 termios \u7ed3\u6784\u7c7b\u578b\u5305\u62ec\u82e5\u5e72\u4e2a\u6807\u5fd7\u96c6\u548c\u4e00\u4e2a\u63a7\u5236\u5b57\u7b26\u7684\u6570\u7ec4\u3002 \u6bcf\u4e2a\u5c5e\u6027\u5728\u6807\u5fd7\u96c6\u4e2d\u90fd\u5360\u6709\u4e00\u4f4d\u3002\u5c5e\u6027\u7684\u63a9\u7801\u5b9a\u4e49\u5728 termios.h \u4e2d\u3002 \u64cd\u4f5c \u4ee3\u7801 \u6d4b\u8bd5\u4f4d if (flagset & MASK) . \u7f6e\u4f4d flagset |= MASK \u6e05\u9664\u4f4d flagset &= ~MASK \u56de\u8f66 \\r 13 \u6362\u884c \\n 10 \u952e\u76d8\u8f93\u5165\u56de\u8f66\u65f6 13\u88ab\u4f20\u9012\u7ed9\u5185\u6838 \u5185\u6838\u5185\u6838\u8fd4\u56de\u7684\u662f13 \u548c 10 stty -a \u67e5\u770bCMD\u70ed\u952e stty -echo \u5173\u95ed\u56de\u663e stty echo \u6253\u5f00\u56de\u663e stty erase ~ \u5c06\u9000\u683c\u4ece ^\uff1f \u66ff\u6362\u4e3a ~ stty -icanon \u8bbe\u7f6e\u4e00\u6b21\u6027\u8bfb\u5b8c\u64cd\u4f5c\uff0c\u5982\u4f7f\u7528getchar()\u8bfb\u64cd\u4f5c\uff0c\u4e0d\u9700\u8981\u6309enter stty icanon \u91cd\u56de\u89c4\u8303\u6a21\u5f0f man tcgetattr \u5f97\u77e5\u6709 struct termios \u5148get\u540e\u4fee\u6539\u518d\u7528 tcsetattr \u8bbe\u7f6e \u6539\u5b8c\u8bb0\u5f97\u8fd8\u539f tcgetattr ( 0 , & dist ); buf = dist ; buf . c_lflag &= - ECHO ; tcsetattr ( 0 , TCSANOW , & buf ); //\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u7acb\u523b\u4fee\u6539 //\u4f7f\u7528\u540e\u8fd8\u539f tcsetattr ( 0 , TCSANOW , & dist ); 0 : \u6807\u51c6\u8f93\u5165 stdin 1 : \u6807\u51c6\u8f93\u51fa stdout 2 : \u6807\u51c6\u9519\u8bef\u8f93\u51fa stderr \u4e94. Terminal Control and Signal \u00b6 \u8f6f\u4ef6\u5de5\u5177 \u00b6 \u5bf9\u78c1\u76d8\u6587\u4ef6\u548c\u8bbe\u5907\u6587\u4ef6\u4e0d\u52a0\u4ee5\u533a\u5206\u7684\u7a0b\u5e8f\u88ab\u79f0\u4e3a**\u8f6f\u4ef6\u5de5\u5177**\u3002\u8f6f\u4ef6\u5de5\u5177\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u5b57\u8282\uff0c\u8fdb\u884c\u4e00\u4e9b\u5904\u7406\uff0c\u7136\u540e\u5c06\u5305\u542b\u7ed3\u679c\u7684\u5b57\u8282\u6d41\u5199\u5230\u6807\u51c6\u8f93\u51fa\u3002\u5de5\u5177\u53d1\u9001\u9519\u8bef\u6d88\u606f\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\uff0c\u5b83\u4eec\u4e5f\u88ab\u5f53\u505a\u7b80\u5355\u7684\u5b57\u8282\u6d41\u6765\u5904\u7406\u3002 \u7279\u5b9a\u8bbe\u5907\u7a0b\u5e8f \u00b6 \u5176\u5b83\u7a0b\u5e8f(\u5982\u63a7\u5236\u626b\u63cf\u4eea\u3001\u8bb0\u5f55\u538b\u7f29\u76d8\u3001\u64cd\u4f5c\u78c1\u5e26\u9a71\u52a8\u7a0b\u5e8f\u548c\u62cd\u6444\u6570\u7801\u76f8\u7247\u7684\u7a0b\u5e8f)\u4e5f\u80fd\u540c\u7279\u5b9a\u8bbe\u5907\u8fdb\u884c\u4ea4\u4e92\u3002\u5728\u672c\u7ae0\u4e2d\u5c06\u901a\u8fc7\u4e86\u89e3\u6700\u5e38\u89c1\u7684\u4e0e\u7279\u5b9a\u8bbe\u5907\u76f8\u5173\u7684\u7a0b\u5e8f(\u901a\u8fc7\u7ec8\u7aef\u4e0e\u4eba\u4ea4\u4e92\u7684\u7a0b\u5e8f)\u6765\u63a2\u8ba8\u5728\u5199\u8fd9\u4e9b\u7a0b\u5e8f\u65f6\u7528\u5230\u7684\u6982\u5ff5\u548c\u6280\u672f\u3002\u5c06\u8fd9\u4e9b\u9762\u5411\u7ec8\u7aef\u7684\u7a0b\u5e8f\u79f0\u4e3a\u7528\u6237\u7a0b\u5e8f \u7528\u6237\u7a0b\u5e8f \u00b6 \u7528\u6237\u7a0b\u5e8f :\u4e00\u79cd\u5e38\u89c1\u7684\u8bbe\u5907\u76f8\u5173\u7a0b\u5e8f\u7528\u6237\u7a0b\u5e8f\u7684\u4f8b\u5b50\u6709vi,emacs,pine,more,lynx,hangman,robots\u548c\u8bb8\u591a\u52a0\u5229\u798f\u5c3c\u4e9a\u5927\u5b66,\u4f2f\u514b\u5229\u5206\u6821\u7f16\u5199\u7684\u6e38\u620f\u7a0b\u5e8f ,\u8fd9\u4e9b\u7a0b\u5e8f\u8bbe\u7f6e\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u51fb\u952e\u548c\u8f93\u51fa\u5904\u7406\u65b9\u5f0f \u4fe1\u53f7 \u00b6 stty -a \u5f97\u77e5 CTRL+C ------> ^C \u662f\u4e00\u4e2a intr \u4fe1\u53f7 \u4e2d\u65ad\u4fe1\u53f7 \u4fe1\u53f7\u662f\u7531\u5355\u4e2a\u8bcd\u7ec4\u6210\u7684\u6d88\u606f\u3002\u6bcf\u4e2a\u4fe1\u53f7\u90fd\u6709\u4e00\u4e2a\u6570\u5b57\u7f16\u7801 \u4fe1\u53f7\u7684\u8bf7\u6c42\u6765\u6e90\uff1a\u7528\u6237\u3001\u5185\u6838\u548c\u8fdb\u7a0b\u3002 \u540c\u6b65\u4fe1\u53f7\uff1a\u7531\u8fdb\u7a0b\u7684\u67d0\u4e2a\u64cd\u4f5c\u4ea7\u751f\u7684\u4fe1\u53f7\u3002 \u5f02\u6b65\u4fe1\u53f7\uff1a\u7531\u50cf\u7528\u6237\u51fb\u952e\u8fd9\u6837\u7684\u8fdb\u7a0b\u5916\u7684\u4e8b\u4ef6\u5f15\u8d77\u7684\u4fe1\u53f7\u3002 \u4fe1\u53f7\u7f16\u53f7\u4ee5\u53ca\u5b83\u4eec\u7684\u540d\u5b57\u901a\u5e38\u51fa\u73b0\u5728 /usr/include/signal.h \u6587\u4ef6\u4e2d\u3002 \u8fdb\u7a0b\u5904\u7406\u4fe1\u53f7\u7684\u65b9\u5f0f\uff1a \u63a5\u6536\u9ed8\u8ba4\u5904\u7406\uff0c\u901a\u5e38\u662f\u6d88\u4ea1 \u5ffd\u7565\u4fe1\u53f7\uff0c\u4f46 SIGSTOP \u548c SIGKILL \u4e24\u4fe1\u53f7\u4e0d\u53ef\u88ab\u5ffd\u7565 \u8c03\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u7528 void (*signal(int sig, void (*func)(int)))(int) func \u7684\u7279\u6b8a\u503c\uff1a SIG_IGN \u5ffd\u7565\u4fe1\u53f7\uff1b SIG_DEF \u4fe1\u53f7\u6062\u590d\u4e3a\u9ed8\u8ba4\u5904\u7406\u3002 kill \u5411\u7a0b\u5e8f\u53d1\u9001\u547d\u4ee4 ps \u770b\u5230\u5f53\u524d\u524d\u53f0\u7684\u547d\u4ee4 ps -e \u770b\u5230\u5305\u62ec\u540e\u53f0\u7684 kill -l \u67e5\u770b\u6240\u6709\u4fe1\u53f7\u7684\u5b8f\u5b9a\u4e49 \u4e0d\u6307\u5b9a\u4fe1\u53f7\u5219\u9ed8\u8ba4\u53d1\u9001TERM\u4fe1\u53f7 kill \u8fdb\u7a0b\u53f7 \u6740\u6b7b\u8fdb\u7a0b kill -9 \u8fdb\u7a0b\u53f7 \u5bf9\u5e94SIGKILL \u4fe1\u53f7\u5904\u7406\u51fd\u6570 \u00b6 ^S : \u505c\u6b62 ^\\ : \u9000\u51fa ^Z : \u5c06\u4e00\u4e2a\u8fdb\u7a0b\u6302\u8d77\u5230\u540e\u53f0\u5e76\u6682\u505c signal(SIGINT,SIG_IGN) : \u5ffd\u89c6\u4e2d\u65ad\u4fe1\u53f7 man 7 signal \u67e5\u770bSIGNAL\u5b8f\u5b9a\u4e49\u7684\u503c\u548c\u5b9a\u4e49 SIGKILL \u548c SIGSTOP \u4e0d\u53ef\u4ee5\u88ab\u963b\u6b62\u548c\u5ffd\u7565 \u516d. Screen programming \u00b6 curses \u5e93\u662f\u4e00\u7ec4\u51fd\u6570/\u5b57\u7b26\u7ec8\u7aef\u5e93\uff0c\u5c4f\u5e55\u7684\u672c\u8d28\u662f\u4e00\u4e2a\u77e9\u9635\uff0c\u7a0b\u5e8f\u5458\u53ef\u4ee5\u7528\u5b83\u4eec\u6765\u8bbe\u7f6e\u5149\u6807\u7684\u4f4d\u7f6e\u548c\u7ec8\u7aef\u5c4f\u5e55\u4e0a\u663e\u793a\u7684\u5b57\u7b26\u6837\u5f0f\u3002 curses \u5c06\u7ec8\u7aef\u5c4f\u5e55\u770b\u6210\u662f\u7531\u5b57\u7b26\u5355\u5143\u7ec4\u6210\u7684\u7f51\u683c\uff0c\u6bcf\u4e2a\u5355\u5143\u7531\u884c\u5217\u5750\u6807\u5bf9\u6807\u793a\u3002\u5750\u6807\u7cfb\u539f\u70b9\u662f\u5c4f\u5e55\u5de6\u4e0a\u89d2\uff0c\u884c\u5750\u6807\u81ea\u4e0a\u800c\u4e0b\u9012\u589e\uff0c\u5217\u5750\u6807\u81ea\u5de6\u5411\u53f3\u9012\u589e\u3002 curses \u4fdd\u7559\u4e86\u5c4f\u5e55\u7684\u4e24\u4e2a\u5185\u90e8\u7248\u672c\u3002\u4e00\u4e2a\u5185\u90e8\u5c4f\u5e55\u662f\u771f\u5b9e\u5c4f\u5e55\u7684\u590d\u5236\uff0c\u53e6\u4e00\u4e2a\u662f\u5de5\u4f5c\u5c4f\u5e55\uff0c\u8bb0\u5f55\u4e86\u5bf9\u5c4f\u5e55\u7684\u6539\u52a8\u3002 refresh \u51fd\u6570\u6bd4\u8f83\u5de5\u4f5c\u5c4f\u5e55\u548c\u771f\u5b9e\u5c4f\u5e55\u7684\u5dee\u5f02\uff0c\u901a\u8fc7\u7ec8\u7aef\u9a71\u52a8\u9001\u51fa\u80fd\u4f7f\u771f\u5b9e\u5c4f\u5e55\u4e0e\u5de5\u4f5c\u5c4f\u5e55\u4e00\u81f4\u7684\u5b57\u7b26\u548c\u63a7\u5236\u7801\u3002 \u7f16\u8bd1\u65f6\u5019\u9700\u8981\u4f7f\u7528 -lcurses \u8868\u793a\u94fe\u63a5curses\u5e93 cc \uff5e.c -lcurses \u5e38\u7528\u51fd\u6570 \u00b6 move(y,x) : \u5c06\u6e38\u6807\u79fb\u52a8\u81f3 (x,y) \u7684\u4f4d\u7f6e. getyx(win,y,x) : \u5f97\u5230\u76ee\u524d\u6e38\u6807\u7684\u4f4d\u7f6e. (\u8bf7\u6ce8\u610f! \u662f y,x \u800c\uf967\u662f &y,&x ) clear() erase() : \u5c06\u6574\u4e2a\u5c4f\u5e55\u6e05\u9664. (\u8bf7\u6ce8\u610f\u914d\u5408 refresh() \u4f7f\u2f64\u7528) echochar(ch) : \u663e\u793a\u67d0\u4e2a\u5b57\u5143. addch(ch) : \u5728\u5f53\u524d\u4f4d\u7f6e\u753b\u5b57\u7b26ch mvaddch(y,x,ch) : \u5728 (x,y) \u4e0a\u663e\u793a\u67d0\u4e2a\u5b57\u5143. \u76f8\u5f53\u4e8e move(y,x);addch(ch); addstr(str) : \u5728\u5f53\u524d\u4f4d\u7f6e\u753b\u5b57\u7b26\uf905 str mvaddstr(y,x,str) : \u5728(x,y) \u4e0a\u663e\u793a\u4e00\uf905\u5b57\uf905. \u76f8\u5f53\u4e8e move(y,x);addstr(str); printw(format,str) : \u7c7b\u4f3c printf() , \u4ee5\u2f00\u4e00\u5b9a\u7684\u683c\u5f0f\u8f93\u51fa\u81f3\u8424\u5e55. mvprintw(y,x,format,str) : \u5728 (x,y) \u4f4d\u7f6e\u4e0a\u505a printw \u7684\u2f2f\u5de5\u4f5c. \u76f8\u5f53\u4e8e move(y,x);printw(format,str); getch() : \u4ece\u952e\u76d8\u8bfb\u53d6\u2f00\u4e00\u4e2a\u5b57\u5143. (\u6ce8\u610f! \u4f20\u56de\u7684\u662f\u6574\u6570\u503c) getstr() : \u4ece\u952e\u76d8\u8bfb\u53d6\u2f00\u4e00\u4e32\uf905\u5b57\u5143. scanw(format,&arg1,&arg2\u2026) : \u5982\u540c scanf , \u4ece\u952e\u76d8\u8bfb\u53d6\u4e00\uf905\u5b57\u5143. beep() : \u53d1\u51fa\u2f00\u4e00\u58f0\u54d4\u58f0. box(win,ch1,ch2) : \u81ea\u52a8\u753b\u65b9\u6846 refresh() : \u4f7f\u5c4f\u5e55\u6309\u7167\u4f60\u7684\u610f\u56fe\u663e\u793a\u3002\u6bd4\u8f83\u5de5\u4f5c\u5c4f\u5e55\u548c\u771f\u5b9e\u5c4f\u5e55\u7684\u5dee\u5f02\uff0c\u7136\u540erefresh\u901a\u8fc7\u7ec8\u7aef\u9a71 \u52a8\u9001\u51fa\u90a3\u4e9b\u80fd\u4f7f\u771f\u5b9e\u5c4f\u5e55\u4e8e\u5de5\u4f5c\u5c4f\u5e55\u4e00\u81f4\u7684\u5b57\u7b26\u548c\u63a7\u5236\u7801\u3002\uff08\u5de5\u4f5c\u5c4f\u5e55\u5c31\u50cf\u78c1\u76d8\u7f13\u5b58\uff0ccurses\u4e2d\u7684 \u5927\u90e8\u5206\u7684\u51fd\u6570\u90fd\u53ea\u5bf9\u5b83\u8fdb\u884c\u4fee\u6539\uff09 standout() : \u542f\u52a8standout\u6a21\u5f0f\uff08\u4e00\u822c\u4f7f\u5c4f\u5e55\u53d1\u8272\uff09 standend() : \u5173\u95edstandout\u6a21\u5f0f \u65f6\u949f\u7f16\u7a0b\uff1aAlarms \u00b6 sleep \u7684\u5de5\u4f5c\u673a\u5236 \u00b6 \u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u79c1\u6709\u7684\u95f9\u949f(alarm clock) \u3002\u8fd9\u4e2a\u95f9\u949f\u5f88\u50cf\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5728\u4e00\u5b9a\u79d2\u6570\u540e\u95f9\u94c3\u3002\u65f6\u95f4\u4e00\u5230\uff0c\u65f6\u949f\u5c31\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7 SIGALRM \u5230\u8fdb\u7a0b\u3002\u9664\u975e\u8fdb\u7a0b\u4e3a SIGALRM \u8bbe\u7f6e\u4e86\u5904\u7406\u51fd\u6570(handler) \uff0c\u5426\u5219\u4fe1\u53f7\u5c06\u6740\u6b7b\u8fd9\u4e2a\u8fdb\u7a0b\u3002 sleep \u51fd\u6570\u7531 3 \u4e2a\u6b65\u9aa4\u7ec4\u6210\uff1a man 3 sleep \u67e5\u770bsleep\u51fd\u6570 \u4e3a SIGALRM \u8bbe\u7f6e\u4e00\u4e2a\u5904\u7406\u51fd\u6570 \u8c03\u7528 alarm(num_seconds) \u8c03\u7528 pause \u7cfb\u7edf\u8c03\u7528 pause \u6302\u8d77\u8fdb\u7a0b\u76f4\u5230\u4fe1\u53f7\u5230\u8fbe\u3002\u4efb\u4f55\u4fe1\u53f7\u90fd\u53ef\u4ee5\u5524\u9192\u8fdb\u7a0b\uff0c\u800c\u975e\u4ec5\u4ec5\u7b49\u5f85 SIGALRM\u3002 #include <stdio.h> #include <signal.h> main () { void wakeup ( int ); printf ( \"about to sleep for 4 seconds \\n \" ); signal ( SIGALRM , wakeup ); // catch it alarm ( 4 ); // set clock pause (); // freeze here wait for a signal printf ( \"Morning so soon? \\n \" ); // back to work } void wakeup ( int signum ) { #ifndef SHHHH printf ( \"Alarm received from kernel \\n \" ); #endif } \u65f6\u95f4\u7f16\u7a0b\uff1a\u95f4\u9694\u8ba1\u65f6\u5668 \u00b6 interval timer \u8f6f\u4e2d\u65ad 3 \u7c7b\u8ba1\u65f6\u5668\u7684\u540d\u79f0\u548c\u529f\u80fd\u5982\u4e0b\uff1a ITIMER_REAL \u8be5\u8ba1\u65f6\u5668\u8ba1\u91cf\u771f\u5b9e\u65f6\u95f4\uff0c\u5982\u540c\u624b\u8868\u8bb0\u5f55\u65f6\u95f4\u3002\u65e0\u8bba\u7a0b\u5e8f\u5728\u7528\u6237\u6001\u8fd8\u662f\u6838\u5fc3\u6001\uff0c\u7528\u4e86\u591a\u5c11\u5904\u7406\u5668\u65f6\u95f4\u5b83\u90fd\u8bb0\u5f55\u3002\u5f53\u8be5\u8ba1\u65f6\u5668\u7528\u5c3d\uff0c\u53d1\u9001 SIGALRM \u6d88\u606f\u3002 it_value \u521d\u59cb\u65f6\u95f4 it_interval \u95f4\u9694\u65f6\u95f4 \u65f6\u95f4\u5e94\u4e3a\u53cc\u7cbe\u5ea6\u65f6\u95f4\uff1a\u79d2 sec \u548c\u5fae\u5999 usec man -k interval | gerp timer -> man 2 getitimer #include <stdio.h> #include <signal.h> #include <sys/time.h> void wakeup (){ printf ( \"Wake up! \\n \" ); } main (){ struct itimerval itv ; signal ( SIGALRM , wakeup ); printf ( \"Go to sleep \\n \" ); itv . it_interval . tv_sec = 1 ; itv . it_interval . tv_usec = 500000 ; itv . it_value . tv_sec = 5 ; itv . it_value . tv_usec = 0 ; // 5s \u4e2d\u5f00\u59cb\u6267\u2f8f\uff0c\u6bcf\uff11.5\uff53\u5faa\u73af setitimer ( ITIMER_REAL , & itv , NULL ); while ( 1 ){ printf ( \"About to sleep \\n \" ); pause (); } } ITIMER_VIRTUAL \u53ea\u6709\u8fdb\u7a0b\u5728\u7528\u6237\u6001\u8fd0\u884c\u65f6\u624d\u8ba1\u65f6\u3002\u865a\u62df\u8ba1\u65f6\u5668\u7684\u4e09\u5341\u79d2\u6bd4\u5b9e\u9645\u8ba1\u65f6\u5668\u7684\u4e09\u5341\u79d2\u8981\u957f\u3002\u5f53\u865a\u62df\u8ba1\u65f6\u5668\u7528\u5c3d\u65f6\uff0c\u53d1\u9001 SIGVTALRM \u6d88\u606f\u3002 ITIMER_PROF \u7cfb\u7edf\u8c03\u7528\u65f6\u95f4 + \u81ea\u8eab\u8fd0\u884c\u65f6\u95f4 \u8fd9\u4e2a\u8ba1\u65f6\u5668\u5728\u8fdb\u7a0b\u8fd0\u884c\u4e8e\u7528\u6237\u6001\u6216\u7531\u8be5\u8fdb\u7a0b\u8c03\u7528\u800c\u9677\u5165\u6838\u5fc3\u6001\u65f6\u8ba1\u65f6\u3002\u5f53\u8fd9\u4e2a\u8ba1\u65f6\u5668\u7528\u5c3d\uff0c\u53d1\u9001 SIGPROF \u6d88\u606f\u3002 \u95f4\u9694 \u00b6 \u6bcf\u4e2a\u95f4\u9694\u8ba1\u65f6\u5668\u7684\u8bbe\u7f6e\u90fd\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff1a\u521d\u59cb\u65f6\u95f4\u548c\u91cd\u590d\u95f4\u9694\u3002 \u7cbe\u5ea6\u66f4\u9ad8\u7684\u65f6\u5ef6\uff1ausleep \u00b6 usleep(n) \u5c06\u5f53\u524d\u8fdb\u7a0b\u6302\u8d77 n \u5fae\u79d2\u6216\u8005\u76f4\u5230\u6709\u4e00\u4e2a\u4e0d\u80fd\u88ab\u5ffd\u7565\u7684\u4fe1\u53f7\u5230\u8fbe\u3002 \u8ba1\u7b97\u673a\u53ea\u6709\u4e00\u4e2a\u65f6\u949f \u00b6 \u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u80fd\u6709\u591a\u4e2a\u72ec\u7acb\u7684\u65f6\u949f\uff0c\u4f46\u4e00\u4e2a\u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u786c\u4ef6\u65f6\u949f\u7684\u8109\u51b2\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u8bbe\u7f6e\u81ea\u5df1\u7684\u8ba1\u6570\u65f6\u95f4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u6bcf\u8fc7\u4e00\u4e2a\u65f6\u95f4\u7247\u540e\u4e3a\u6240\u6709\u7684\u8ba1\u6570\u5668\u7684\u6570\u503c\u505a\u9012\u51cf\u3002 \u4e03. Processes and procedures \u00b6 ps \u547d\u4ee4 \u00b6 \u8fdb\u7a0b\u5b58\u5728\u4e8e\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u7a7a\u95f4\u662f\u5b58\u653e\u8fd0\u884c\u7684\u7a0b\u5e8f\u548c\u5b83\u4eec\u7684\u6570\u636e\u7684\u4e00\u90e8\u5206\u5185\u5b58\u7a7a\u95f4 \u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 ps\uff08process status\uff09\u547d\u4ee4\u6765\u67e5\u770b\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5bb9\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u5f53\u524d\u7684\u8fdb\u7a0b\u3002 S status \u8868\u793a\u5404\u4e2a\u8fdb\u7a0b\u7684\u72b6\u6001 S \u5217\u7684\u503c\u4e3a R \u8bf4\u660e ps \u5bf9\u5e94\u7684\u8fdb\u7a0b**\u6b63\u5728\u8fd0\u884c**\u3002\u5176\u4ed6\u8fdb\u7a0b\u7684 S \u5217\u503c\u90fd\u662f S\uff0c\u8bf4\u660e\u5b83\u4eec\u90fd\u5904\u4e8e**\u7761\u7720\u72b6\u6001**\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5c5e\u4e8e\u76f8\u5e94\u7684\u7531 UID \u5217\u6307\u660e\u7684\u7528\u6237 ID\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a ID\uff08PID\uff09\uff0c\u540c\u65f6\u4e5f\u6709\u4e00\u4e2a\u7236\u8fdb\u7a0b ID\uff08PPID\uff09 S sleep R running Z zombie UID \u8fdb\u7a0bowner PRI \u4f18\u5148\u7ea7 \u8d8a\u5c0f\u8d8a\u9ad8 PPID \u7236\u8fdb\u7a0bID PRI \u548c NI \u7684\u5217\u5206\u522b\u662f\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u548c niceness \u7ea7\u522b\u3002 nice\u503c\u662f\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c \u53ef\u4ee5\u4e3a\u8d1f\u503c \u5185\u6838\u6839\u636e\u8fd9\u4e9b\u503c\u6765\u51b3\u5b9a\u4f55\u65f6\u8fd0\u884c\u8fdb\u7a0b\u3002 \u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u589e\u52a0 nice\u503c\uff0c\u8ba9\u5176\u4ed6\u8fdb\u7a0b\u6392\u5728\u5176\u524d\u9762\u3002 \u8d85\u7ea7\u7528\u6237\u53ef\u4ee5\u51cf\u5c11\u5b83\u7684 nice\u503c\uff0c\u4f7f\u5b83\u6392\u5728\u5176\u4ed6\u8fdb\u7a0b\u524d\u9762 \u7528\u6237\u53ea\u80fd\u5c06NI\u53d8\u2f24\uff0croot\u4fee\u6539\u7684\u8303\u56f4\u662f -19\u301c20 \u8fdb\u7a0b\u540d + & \u540e\u53f0\u6267\u884c nice -n 5 \u8fdb\u7a0b\u540d NI \u53d8\u4e3a5 PRI \u52a0\u4e0a\u4e865 \u76f4\u63a5 nice \u8fdb\u7a0b\u540d \u76f4\u63a5\u4ee4 PRI \u589e\u52a010 renice \u547d\u4ee4\u7528\u4e8e\u91cd\u65b0\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7 renice 9 \u8fdb\u7a0b\u53f7 ps \u67e5\u770b\u8fdb\u7a0b\u7684 PID \u8fdb\u7a0b\u53f7 TTY \u7ec8\u7aef\u673a\u8fde\u63a5\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u7684\u6587\u4ef6\u540d\u79f0 TIME CMD ps -l \u67e5\u770b\u8fdb\u7a0b\u7684\u76f8\u5173\u4fe1\u606f ps -d \u9664session leader \u4ee5\u5916\u7684\u5168\u90e8\u8fdb\u7a0b \u5305\u62ec\u540e\u53f0\u4ee5\u53ca\u5176\u4ed6\u7528\u6237\u7684\u8fdb\u7a0b ps -e \u9009\u62e9\u6240\u6709\u8fdb\u7a0b ps -aux \u663e\u793a\u6240\u6709\u5305\u542b\u5176\u4ed6\u4f7f\u7528\u8005\u7684\u8fdb\u7a0b top \u7c7b\u4f3c\u4efb\u52a1\u7ba1\u7406\u5668 Shell \u00b6 shell \u662f\u5982\u4f55\u8fd0\u884c\u7a0b\u5e8f\u7684 \u00b6 shell \u6253\u5370\u63d0\u793a\u7b26\uff0c\u8f93\u5165\u547d\u4ee4\uff0cshell \u5c31\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u7136\u540e shell \u518d\u6b21\u6253\u5370\u63d0\u793a\u7b26\uff0c\u5982\u6b64\u53cd\u590d\u3002 \u4e00\u4e2a shell \u7a0b\u5e8f\u7684\u4e3b\u5faa\u73af\u6267\u884c\u4e0b\u9762\u7684 4 \u6b65\uff1a \u7528\u6237\u952e\u5165 a.out shell \u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u6765\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f shell \u5c06\u7a0b\u5e8f\u4ece\u78c1\u76d8\u8f7d\u5165 \u7a0b\u5e8f\u5728\u5b83\u7684\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u76f4\u5230\u7ed3\u675f \u4e00\u4e2a\u7a0b\u5e8f\u5982\u4f55\u8fd0\u884c\u53e6\u4e00\u4e2a\u7a0b\u5e8f \u00b6 exec \u51fd\u6570\u65cf\uff1a int execl ( const char * path , const char * arg , ... /* (char *) NULL */ ); int execlp ( const char * file , const char * arg , ... /* (char *) NULL */ ); int execle ( const char * path , const char * arg , ... /*, (char *) NULL, char * const envp[] */ ); int execv ( const char * path , char * const argv []); int execvp ( const char * file , char * const argv []); int execvpe ( const char * file , char * const argv [], char * const envp []); \u5982\u540c\u6362\u8111 \u3002exec \u7cfb\u7edf\u8c03\u7528\u4ece\u5f53\u524d\u8fdb\u7a0b\u4e2d\u628a\u5f53\u524d\u7a0b\u5e8f\u7684\u673a\u5668\u6307\u4ee4\u6e05\u9664\uff0c\u7136\u540e\u4ece\u7a7a\u7684\u8fdb\u7a0b\u4e2d\u8f7d\u5165\u8c03\u7528\u7684\u6307\u5b9a\u7684\u7a0b\u5e8f\u4ee3\u7801\uff0c\u6700\u540e\u8fd0\u884c\u8fd9\u4e2a\u65b0\u7684\u7a0b\u5e8f\u3002exec \u8c03\u6574\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u4f7f\u4e4b\u9002\u5e94\u65b0\u7684\u7a0b\u5e8f\u5bf9\u5185\u5b58\u7684\u8981\u6c42\u3002\u76f8\u540c\u7684\u8fdb\u7a0b\uff0c\u4e0d\u540c\u7684\u5185\u5bb9\u3002 \u6b65\u9aa4\u5982\u4e0b\uff1a \u7a0b\u5e8f\u8c03\u7528 execvp \u5185\u6838\u4ece\u78c1\u76d8\u5c06\u7a0b\u5e8f\u8f7d\u5165 \u5185\u6838\u5c06 arglist \u590d\u5236\u5230\u8fdb\u7a0b \u5185\u6838\u8c03\u7528 main(argc, argv) exec \u6267\u884c\u4e4b\u540e\uff0c\u539f\u8fdb\u7a0b\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\uff0c\u56e0\u6b64\u9700\u8981\u521b\u5efa\u65b0\u8fdb\u7a0b\u3002 \u5982\u4f55\u5efa\u7acb\u65b0\u7684\u8fdb\u7a0b \u00b6 fork (); fork \u7684\u6267\u884c\u6b65\u9aa4\uff1a \u5206\u914d\u65b0\u7684\u5185\u5b58\u5757\u548c\u5185\u6838\u6570\u636e\u7ed3\u6784 \u590d\u5236\u539f\u6765\u7684\u8fdb\u7a0b\u5230\u65b0\u7684\u8fdb\u7a0b \u5411\u8fd0\u884c\u8fdb\u7a0b\u96c6\u6dfb\u52a0\u65b0\u7684\u8fdb\u7a0b \u5c06\u63a7\u5236\u8fd4\u56de\u7ed9\u4e24\u4e2a\u8fdb\u7a0b fork() \u7684\u8fd4\u56de\u503c \u662f\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 \u5982\u679c\u662f -1 \u8bf4\u660e\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25 #include <stdio.h> main (){ printf ( \"About to execute ls / \\n \" ); execlp ( \"ls\" , \"ls\" , \"/\" , NULL ); printf ( \"DONE! \\n \" ); } #include <stdio.h> main (){ printf ( \"I am %d. About to fork \\n \" , getpid ()); fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c printf ( \"After fork: I am %d \\n \" , getpid ()); } /*I am 22917. About to fork After fork: I am 22917 After fork: I am 22918*/ /*\u7236\u8fdb\u7a0b\u5148\u8fd0\u884c*/ #include <stdio.h> main (){ printf ( \"I am %d. About to fork \\n \" , getpid ()); fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c \u5171\u8ba1\u516b\u4e2a\u8fdb\u7a0b fork (); fork (); printf ( \"After fork: I am %d \\n \" , getpid ()); } #include <stdio.h> main (){ int rv ; printf ( \"I am %d. About to fork \\n \" , getpid ()); rv = fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c if ( 0 == rv ){ // \u6211\u662f\u5b50\u8fdb\u7a0b printf ( \"I am a child. I am %d \\n \" , getpid ()); } else { printf ( \"I am a parent.I am %d. \\n My child is %d \\n \" , getpid (), rv ); } } #include <stdio.h> main (){ int rv ; printf ( \"About to execute ls /: \\n \" ); rv = fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c if ( 0 == rv ){ execlp ( \"ls\" , \"ls\" , \"/\" , NULL ); } else { rv_wait = wait ( NULL ); //\u76f4\u81f3\u5f53\u524d\u8fdb\u7a0b\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u6267\u884c\u7ed3\u675f\u540e\uff0c\u624d\u7ee7\u7eed\u6267\u884c printf ( \"%d is back. Done \\n \" , rv_wait ); //\u8fd4\u56de\u503c\u4e3a\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 } } wait [\u8fdb\u7a0b\u53f7 \u6216 \u4f5c\u4e1a\u53f7] eg\uff1a wait 23 or wait %1 \u5982\u679cwait\u540e\u9762\u4e0d\u5e26\u4efb\u4f55\u7684\u8fdb\u7a0b\u53f7\u6216\u4f5c\u4e1a\u53f7\uff0c\u90a3\u4e48wait\u4f1a\u963b\u585e\u5f53\u524d\u8fdb\u7a0b\u7684\u6267\u884c\uff0c\u76f4\u81f3\u5f53\u524d\u8fdb\u7a0b\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u6267\u884c\u7ed3\u675f\u540e\uff0c\u624d\u7ee7\u7eed\u6267\u884c\u3002 rv_wait wait()\u7684\u8fd4\u56de\u503c\u5206\u4e3a\u4e09\u90e8\u5206 \u524d\u516b\u4f4d exit value \u4e00\u4f4d\u7684Core dump \u540e\u4e03\u4f4dSignum \u8fd4\u56de009 \u5373\u8868\u793a\u88ab9\u53f7\u547d\u4ee4\u6740\u6b7b \u8fd4\u56dea00 \u5373\u8868\u793a\u5b50\u8fdb\u7a0b\u8fd4\u56de\u503c\u4e3a10 \u5982\u679c\u7236\u8fdb\u7a0b\u88ab\u6740\u6b7b \u5b50\u8fdb\u7a0b\u4f1a\u8ba41\u53f7\u8fdb\u7a0binit\u4f5c\u4e3a\u7236\u8fdb\u7a0b \u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b ps -e|head \u67e5\u770binit\u8fdb\u7a0b \u5982\u679c\u5b50\u8fdb\u7a0b\u6b63\u5e38\u8fd0\u884c\u5b8c\u6bd5 \u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210Zombie\u8fdb\u7a0b \u9700\u8981\u7528wait\u56de\u6536 \u624d\u4e0d\u4f1a\u7528\u50f5\u5c38\u8fdb\u7a0b ps -l \u53ef\u4ee5\u67e5\u770b\u5230 \u8be5\u5b50\u8fdb\u7a0b\u6709 \u6807\u793a #include <stdio.h> int main (){ int rv , rv_wait ; printf ( \"About to cook:\" ); rv = fork (); if ( 0 == rv ){ return 10 ; } else { int status ; rv_wait = wait ( & status ); printf ( \"%d is back. status: %0x \\n \" , rv_wait , status ); //\u8fd4\u56de\u503c\u4e3aa00 10\u768416\u8fdb\u5236\u4e3aa } } #include <stdio.h> main (){ int rv , rv_wait ; printf ( \"About to cook: \\n \" ); rv = fork (); if ( 0 == rv ){ return 10 ; } else { signal ( SIGCHLD , SIG_IGN ); //\u901a\u77e5\u5185\u6838\u5bf9\u2f26\u8fdb\u7a0b\u7684\u7ed3\u675f\u4e0d\u5173\u2f3c\uff0c\u7531\u5185\u6838\u56de\u6536\uff0c\u5e76\u4e14\u907f\u514d\u2f57\u8fdb\u7a0b\u88ab\u6302\u8d77\u3002 while ( 1 ){ sleep ( 1 ); } } return 0 ; } \u7236\u8fdb\u7a0b\u5982\u4f55\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa \u00b6 pid = wait ( & status ); \u8fdb\u7a0b\u8c03\u7528 wait \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\u3002 wait \u6682\u505c\u8c03\u7528\u5b83\u7684\u8fdb\u7a0b\u76f4\u5230\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u7136\u540e wait \u53d6\u5f97\u5b50\u8fdb\u7a0b\u7ed3\u675f\u65f6\u4f20\u7ed9 exit \u7684\u503c\u3002 \u7236\u8fdb\u7a0b\u5982\u4f55\u77e5\u9053\u5b50\u8fdb\u7a0b\u662f\u4ee5\u4f55\u79cd\u65b9\u5f0f\u9000\u51fa\u7684\u5462\uff1f \u7b54\u6848\u5728\u4f20\u7ed9 wait \u7684\u53c2\u6570\u4e4b\u4e2d\u3002\u7236\u8fdb\u7a0b\u8c03\u7528 wait \u65f6\u4f20\u4e00\u4e2a\u6574\u578b\u53d8\u91cf\u5730\u5740\u7ed9\u51fd\u6570\u3002\u5185\u6838\u5c06\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u4fdd\u5b58\u5728\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u3002 \u5982\u679c\u5b50\u8fdb\u7a0b\u8c03\u7528 exit \u9000\u51fa\uff0c\u90a3\u4e48\u5185\u6838\u628a exit \u7684\u8fd4\u56de\u503c\u5b58\u653e\u5230\u8fd9\u4e2a\u6574\u6570\u53d8\u91cf\u4e2d\u3002 \u5982\u679c\u8fdb\u7a0b\u662f\u88ab\u6740\u6b7b\u7684\uff0c\u5219\u5185\u6838\u5c06\u4fe1\u53f7\u5e8f\u53f7\u5b58\u653e\u5728\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u3002\u8fd9\u4e2a\u6574\u6570\u7531 3 \u90e8\u5206\u7ec4\u6210\u2014\u2014 8 \u4e2a bit \u662f\u8bb0\u5f55\u9000\u51fa\u503c\uff0c7 \u4e2a bit \u662f\u8bb0\u5f55\u4fe1\u53f7\u5e8f\u53f7\uff0c\u53e6\u4e00\u4e2a bit \u7528\u6765\u6307\u660e\u53d1\u751f\u9519\u8bef\u5e76\u4ea7\u751f\u4e86\u5185\u6838\u6620\u50cf\u3002 wait \u7cfb\u7edf\u51fd\u6570\u6302\u8d77\u8c03\u7528\u5b83\u7684\u8fdb\u7a0b\u76f4\u5230\u5f97\u5230\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u7684\u4e00\u4e2a\u7ed3\u675f\u72b6\u6001 rv_wait = wait(&status) \u7ed3\u675f\u72b6\u6001 rv_wait \u662f\u9000\u51fa\u503c\u6216\u8005\u662f\u4fe1\u53f7\u5e8f\u53f7 \u5982\u679c\u6709\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5df2\u9000\u51fa\u6216\u88ab\u6740\u6b7b\uff0c\u5bf9 wait \u7684\u8c03\u7528\u7acb\u5373\u8fd4\u56de\u3002wait \u8fd4\u56de\u7ed3\u675f\u8fdb\u7a0b\u7684 PID\u3002 \u5982\u679c statusptr \u4e0d\u662f NULL\uff0cwait \u5c06\u9000\u51fa\u72b6\u6001\u6216\u8005\u4fe1\u53f7\u5e8f\u53f7\u590d\u5236\u5230 statusptr \u6307\u5411\u7684\u6574\u6570\u4e2d\u3002\u8be5\u503c\u53ef\u7528 \u4e2d\u7684\u5b8f\u6765\u68c0\u6d4b\u3002 \u5982\u679c\u8c03\u7528\u7684\u8fdb\u7a0b\u6ca1\u6709\u5b50\u8fdb\u7a0b\u4e5f\u6ca1\u6709\u5f97\u5230\u7ec8\u6b62\u72b6\u6001\u503c\uff0c\u5219 wait \u8fd4\u56de -1\u3002 status \u4e3a NULL \u5219\u8868\u793a\u7236\u8fdb\u7a0b\u4e0d\u5173\u5fc3\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001 signal(SIGCHLD,SIG_IGN); \u901a\u77e5\u5185\u6838\u5bf9\u2f26\u8fdb\u7a0b\u7684\u7ed3\u675f\u4e0d\u5173\u2f3c\uff0c\u7531\u5185\u6838\u56de\u6536\uff0c\u5e76\u4e14\u907f\u514d\u2f57\u8fdb\u7a0b\u88ab\u6302\u8d77\u3002 exit \u4e0e exec \u7684\u5176\u4ed6\u7ec6\u8282 \u00b6 \u8fdb\u7a0b\u6b7b\u4ea1\uff1aexit \u548c _exit \u00b6 exit \u662f fork \u7684\u9006\u64cd\u4f5c\uff0c\u8fdb\u7a0b\u901a\u8fc7\u8c03\u7528 exit \u6765\u505c\u6b62\u8fd0\u884c\u3002fork \u521b\u5efa\u4e00\u4e2a\u8fdb\u7a0b\uff0cexit \u5220\u9664\u4e00\u4e2a\u8fdb\u7a0b\u3002 \u5b50\u8fdb\u7a0b\u4f20\u7ed9 exit \u7684\u53c2\u6570\u88ab\u5b58\u653e\u5230\u5185\u6838\uff0c\u76f4\u5230\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u901a\u8fc7 wait \u7cfb\u7edf\u8c03\u7528\u53d6\u56de\u8fd9\u4e2a\u503c\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u6709\u5728\u7b49\u8fd9\u4e2a\u503c\uff0c\u5219\u5b83\u5c06\u88ab\u4fdd\u5b58\u5728\u5185\u6838\u76f4\u5230\u7236\u8fdb\u7a0b\u8c03\u7528 wait\uff0c\u90a3\u65f6\u5185\u6838\u5c06\u901a\u544a\u8fd9\u4e2a\u7236\u8fdb\u7a0b\uff0c\u5176\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u3002 \u50f5\u5c38\u8fdb\u7a0b \u00b6 \u5df2\u6b7b\u4ea1\u4f46\u8fd8\u6ca1\u6709\u5411\u7236\u8fdb\u7a0b\u8fd4\u56de exit \u53c2\u6570\u7684\u8fdb\u7a0b\u79f0\u4e3a**\u50f5\u5c38\u8fdb\u7a0b**\u3002\u5728\u8fdb\u7a0b\u72b6\u6001\u8868\u4e2d\uff0c\u5e38\u4f7f\u7528 defunct \u8868\u793a\u3002 \u5982\u679c\u5176\u7236\u8fdb\u7a0b\u6ca1\u6709\u5b89\u88c5 SIGCHLD \u4fe1\u53f7\u5904\u7406\u51fd\u6570\u8c03\u7528 wait() \u6216\u8005 waitpid \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u4e5f\u6ca1\u6709\u663e\u5f0f\u5730\u5ffd\u7565\u8be5\u4fe1\u53f7\uff0c\u5219\u5b50\u8fdb\u7a0b\u5c06\u6301\u7eed\u4fdd\u6301\u50f5\u5c38\u72b6\u6001\u3002\u5982\u679c\u6b64\u65f6\u7236\u8fdb\u7a0b\u7ed3\u675f\uff0cinit \u8fdb\u7a0b\u4f1a\u63a5\u7ba1\u8be5\u5b50\u8fdb\u7a0b\u5e76\u6e05\u9664\u5b83\u3002 kill -9 \u547d\u4ee4\u65e0\u6cd5\u6e05\u9664\u50f5\u5c38\u8fdb\u7a0b\uff0c\u50f5\u5c38\u8fdb\u7a0b\u5df2\u7ecf\u7ed3\u675f\uff0c\u4e0d\u80fd\u63a5\u6536\u4fe1\u53f7\u3002 \u5982\u4f55\u907f\u514d\u5927\u91cf\u50f5\u5c38\u8fdb\u7a0b\uff1f \u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u8c03\u7528 wait \u7b49\u51fd\u6570 \u4f7f\u7528\u4e24\u6b21 fork()\uff0c\u4f7f\u7d27\u8ddf\u7684\u5b50\u8fdb\u7a0b\u76f4\u63a5\u9000\u51fa\uff0c\u5b50\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0cinit \u5c06\u6e05\u9664\u5b83 \u516b. I/O Redirection and Pipes \u00b6 I/O Redirection \u00b6 3 \u4e2a\u6807\u51c6\u6587\u4ef6\u63cf\u8ff0\u7b26 \u00b6 \u6240\u6709\u7684Unix\u5de5\u5177\u90fd\u4f7f\u7528 0:stdin 1:stdout 2:stderr shell \u7684\u5b50\u8fdb\u7a0b\u9ed8\u8ba4\u7ee7\u627f\u5176\u7236\u8fdb\u7a0b\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002 \u6700\u4f4e\u53ef\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\u539f\u5219 \u00b6 **\u6587\u4ef6\u63cf\u8ff0\u7b26**\u662f\u4e00\u4e2a\u6570\u7ec4\u7684\u7d22\u5f15\u53f7\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u5176\u6253\u5f00\u7684\u4e00\u7ec4\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6253\u5f00\u7684\u6587\u4ef6\u88ab\u4fdd\u6301\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\u3002\u6587\u4ef6\u63cf\u8ff0\u7b26\u5373\u4e3a\u67d0\u4e2a\u6587\u4ef6\u5728\u6b64\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15\u3002 \u5f53\u6253\u5f00\u6587\u4ef6\u65f6\uff0c\u4e3a\u6b64\u6587\u4ef6\u5b89\u6392\u7684\u63cf\u8ff0\u7b26\u603b\u662f\u6b64\u6570\u7ec4\u4e2d\u6700\u4f4e\u53ef\u7528\u4f4d\u7f6e\u7684\u7d22\u5f15\u3002 \u91cd\u5b9a\u5411\u7684\u662fshell\u800c\u4e0d\u662f\u7a0b\u5e8f cmd > filename : shell\u5c06\u6587\u4ef6\u63cf\u8ff0\u7b261\u5b9a\u4f4d\u5230\u6587\u4ef6 \u4f46\u5e76\u4e0d\u5c06\u91cd\u5b9a\u5411\u6807\u8bb0\u548c\u6587\u4ef6\u540d\u4f20\u9012\u7ed9\u7a0b\u5e8f cmd2 > filename : \u91cd\u5b9a\u5411\u6587\u4ef6\u63cf\u8ff0\u7b262 \u5373\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u4e2d > \u8986\u76d6\u539f\u6587\u4ef6 >> \u8ffd\u52a0\u539f\u6587\u4ef6 \u53c2\u7167\u8bfe\u672c305\u9875\u4ee3\u7801\u5982\u4e0b 8.1 close then open \u00b6 // stdinredir1.c #include <stdio.h> #include <fcntl.h> main () { int fd ; char line [ 100 ]; // \u8bfb\u53d6\u5e76\u6253\u5370\u4e09\u884c fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); // \u91cd\u5b9a\u5411\u8f93\u5165 close ( 0 ); // \u5173\u95ed\u8fde\u63a5\u5230\u7ec8\u7aef\u7684\u6807\u51c6\u8f93\u5165\u6d41 fd = open ( \"/etc/passwd\" , O_RDONLY ); if ( fd != 0 ) { fprintf ( stderr , \"Could not open data as fd 0 \\n \" ); exit ( 1 ); } // \u8bfb\u53d6\u5e76\u6253\u5370\u4e09\u884c fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); } 8.2 open.. close. . dup. . close \u00b6 // stdinredir2.c #include <stdio.h> #include <fcntl.h> /* #define CLOSE_DUP /* open, close, dup, close */ /* #define USE_DUP2 /* open, dup2, close */ main () { int fd ; int newfd ; char line [ 100 ]; fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fd = open ( \"data\" , O_RDONLY ); #ifdef CLOSE_DUP close ( 0 ); newfd = dup ( fd ); // \u590d\u5236\u6253\u5f00\u7684 fd \u5230 0 #else newfd = dup2 ( fd , 0 ); // \u5173\u95ed 0\uff0c\u590d\u5236 fd \u5230 0 #endif if ( newfd != 0 ) { fprintf ( stderr , \"Could not duplicate fd to 0 \\n \" ); exit ( 1 ); } close ( fd ); // \u5173\u95ed\u539f\u6709 fd fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); } 8.3 open..dup2..close \u00b6 \u4e0a\u6587\u7684 stdinredir2.c \u5305\u542b\u4e86\u6761\u4ef6\u7f16\u8bd1\u4ee3\u7801\uff0c\u5df2\u7ecf\u63cf\u8ff0\u4e86\u6b64\u65b9\u6cd5\u3002 Pipes \u00b6 \u5c06\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165 0 1 2 \u5bf9\u5e94\u6807\u51c6\u8f93\u5165\u3001\u8f93\u51fa\u3001\u9519\u8bef \u4ece1\u5199 \u4ece0\u8bfb \u4e8e\u662f3 4 \u4e5f\u5bf9\u5e94\u7740\u8f93\u5165\u548c\u8f93\u51fa #include <stdio.h> #include <unistd.h> main (){ int pipefd [ 2 ]; int rv ; pipe ( pipefd ); printf ( \"%d %d \\n \" , pipefd [ 0 ], pipefd [ 1 ]); // 3 \u548c 4 if (( rv = fork ()) == -1 ){ perror ( \"cannot fork\" ); exit ( 1 ); } else if ( 0 == rv ){ //\u5982\u679c\u662f\u5b50\u8fdb\u7a0b close ( pipefd [ 1 ]); close ( 0 ); dup ( pipefd [ 0 ]); close ( pipefd [ 0 ]); execlp ( \"wc\" , \"wc\" , NULL ); } else { close ( pipefd [ 0 ]); close ( 1 ); dup ( pipefd [ 1 ]); close ( pipefd [ 1 ]); execlp ( \"ls\" , \"ls\" , \"-l\" , \"/\" , NULL ); } } \u7ba1\u9053\u5e76\u975e\u6587\u4ef6 \u00b6 \u7ba1\u9053\u662f\u4e0d\u5e26\u6709\u4efb\u4f55\u7ed3\u6784\u7684\u5b57\u8282\u5e8f\u5217 \u4e5d. Server and Socket \u00b6 \u7ba1\u9053\u4f7f\u5f97\u8fdb\u7a0b\u5411\u5176\u4ed6\u8fdb\u7a0b\u53d1\u9001\u6570\u636e\u5c31\u50cf\u5411\u6587\u4ef6\u53d1\u9001\u6570\u636e\u4e00\u6837\u5bb9\u6613\uff0c\u4f46\u662f\u7ba1\u9053\u5177\u6709\u4e24\u4e2a\u91cd\u5927\u7684\u7f3a\u9677\u3002\u7ba1\u9053\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u88ab\u521b\u5efa\uff0c\u901a\u8fc7fork\u6765\u5b9e\u73b0\u5171\u4eab\uff0c\u56e0\u6b64\uff0c\u7ba1\u9053\u53ea\u80fd\u8fde\u63a5\u4e24\u4e2a\u76f8\u5173\u7684\u8fdb\u7a0b\uff0c\u4e5f\u53ea\u80fd\u8fde\u63a5\u540c\u4e00\u53f0\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u3002 socket \u5141\u8bb8\u5728\u4e0d\u76f8\u5173\u7684\u8fdb\u7a0b\u95f4\u521b\u5efa\u7c7b\u4f3c\u7ba1\u9053\u7684\u8fde\u63a5\uff0c\u751a\u81f3\u662f\u5176\u4ed6\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u3002 socket \u4f5c\u4e3a\u7aef\u70b9 bind listen accept IPV4 \u662f32\u4f4d\u4e8c\u8fdb\u5236\u6570 \u800c\u540e\u62c6\u5f00\u6210\u6570\u5b57\u4e0e\u70b9\u7684\u5f62\u5f0f\u8868\u793a \u6bcf\u6bb5\u5bf9\u5e94\u516b\u4f4d\u4e8c\u8fdb\u5236\u6570 // \u670d\u52a1\u5668demo #include <sys/socket.h> #include <netinet/in.h> #include <netinet/ip.h> #include <stdlib.h> main ( int ac , char * av []){ int tcp_socket ; struct sockaddr_in addr ; int fd ; tcp_socket = socket ( AF_INET , SOCK_STREAM , 0 ); addr . sin_family = AF_INET ; addr . sin_port = htons ( atoi ( av [ 1 ])); // \u4ece\u7ec8\u7aef\u8f93\u5165\u7aef\u53e3\u53f7\uff1b\u7f51\u7edc\u5b57\u8282\u5e8f\u8f6c\u6362\uff0chtons \u9002\u7528\u4e8e 16 \u4f4d\uff0chtonl \u9002\u7528\u4e8e 32 \u4f4d addr . sin_addr . s_addr = INADDR_ANY ; if ( bind ( tcp_socket , ( const struct sockaddr * ) & addr , sizeof ( addr )) == -1 ){ perror ( \"cannot bind\" ); exit ( 1 ); } listen ( tcp_socket , 1 ); while ( 1 ){ fd = accept ( tcp_socket , NULL , NULL ); write ( fd , \"This is 10086! \\n \" , 15 ); close ( fd ); } } //\u5ba2\u6237\u7aefdemo \u4e5f\u53ef\u4f7f\u7528telnet #include <sys/socket.h> #include <netinet/in.h> #include <netinet/ip.h> #include <stdlib.h> #include <stdio.h> main ( int ac , char * av []){ int tcp_socket ; struct sockaddr_in addr ; int fd ; char buf [ 1024 ]; int n ; tcp_socket = socket ( AF_INET , SOCK_STREAM , 0 ); addr . sin_family = AF_INET ; addr . sin_port = htons ( atoi ( av [ 2 ])); addr . sin_addr . s_addr = inet_addr ( av [ 1 ]); if ( connect ( tcp_socket , ( const struct sockaddr * ) & addr , sizeof ( addr )) == -1 ){ perror ( \"cannot connect\" ); exit ( 1 ); } n = read ( tcp_socket , buf , sizeof ( buf )); printf ( \"%.*s \\n \" , n , buf ); close ( tcp_socket ); } \u5341. Web Server \u00b6 \u5ba2\u6237\u548c\u670d\u52a1\u5668\u90fd\u662f\u8fdb\u7a0b\u3002\u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1\uff0c\u7136\u540e\u8fdb\u5165\u5faa\u73af\u63a5\u53d7\u548c\u5904\u7406\u8bf7\u6c42\u3002\u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e\u53d1\u9001\u3001\u63a5\u53d7\u6216\u8005\u4ea4\u6362\u6570\u636e\uff0c\u6700\u540e\u9000\u51fa\u3002\u4ea4\u4e92\u8fc7\u7a0b\u5305\u542b\u5982\u4e0b\u4e09\u4e2a\u64cd\u4f5c\uff1a \u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1 \u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668 \u670d\u52a1\u5668\u548c\u5ba2\u6237\u5904\u7406\u4e8b\u52a1 \u53c2\u7167\u6559\u6750364\u9875socklib.c // \u5b9e\u73b0\u4e86\u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1\u4e0e\u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u76f8\u5173\u51fd\u6570 #include <stdio.h> #include <unistd.h> #include <sys/types.h> #include <sys/socket.h> #include <netinet/in.h> #include <netdb.h> #include <time.h> #include <strings.h> #define HOSTLEN 256 #define BACKLOG 1 int make_server_socket_q ( int , int ); int make_server_socket ( int portnum ) { return make_server_socket_q ( portnum , BACKLOG ); } int make_server_socket_q ( int portnum , int backlog ) { struct sockaddr_in saddr ; /* build our address here */ struct hostent * hp ; /* this is part of our */ char hostname [ HOSTLEN ]; /* address */ int sock_id ; /* the socket */ sock_id = socket ( PF_INET , SOCK_STREAM , 0 ); /* get a socket */ if ( sock_id == -1 ) return -1 ; /** build address and bind it to socket **/ bzero (( void * ) & saddr , sizeof ( saddr )); /* clear out struct */ gethostname ( hostname , HOSTLEN ); /* where am I ? */ hp = gethostbyname ( hostname ); /* get info about host */ /* fill in host part */ bcopy (( void * ) hp -> h_addr , ( void * ) & saddr . sin_addr , hp -> h_length ); saddr . sin_port = htons ( portnum ); /* fill in socket port */ saddr . sin_family = AF_INET ; /* fill in addr family */ if ( bind ( sock_id , ( struct sockaddr * ) & saddr , sizeof ( saddr )) != 0 ) return -1 ; /** arrange for incoming calls **/ if ( listen ( sock_id , backlog ) != 0 ) return -1 ; return sock_id ; } int connect_to_server ( char * host , int portnum ) { int sock ; struct sockaddr_in servadd ; /* the number to call */ struct hostent * hp ; /* used to get number */ /** Step 1: Get a socket **/ sock = socket ( AF_INET , SOCK_STREAM , 0 ); /* get a line */ if ( sock == -1 ) return -1 ; /** Step 2: connect to server **/ bzero ( & servadd , sizeof ( servadd )); /* zero the address */ hp = gethostbyname ( host ); /* lookup host's ip # */ if ( hp == NULL ) return -1 ; bcopy ( hp -> h_addr , ( struct sockaddr * ) & servadd . sin_addr , hp -> h_length ); servadd . sin_port = htons ( portnum ); /* fill in port number */ servadd . sin_family = AF_INET ; /* fill in socket type */ if ( connect ( sock , ( struct sockaddr * ) & servadd , sizeof ( servadd )) != 0 ) return -1 ; return sock ; } \u5341\u4e00. Thread mechanism: use of concurrent functions \u00b6 pthread\u51fd\u6570 \u00b6 //a simple multi example #include <stdio.h> #include <pthread.h> void * print_msg ( void * msg ){ int i ; for ( i = 0 ; i < 5 ; i ++ ){ printf ( \"%s \\n \" , ( char * ) msg ); sleep ( 1 ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , print_msg , \"hello\" ); pthread_create ( & t2 , NULL , print_msg , \"world\" ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); } \u4e92\u65a5\u9501 \u00b6 pthread_mutex_lock \u3001 pthread_mutex_unlock // \u4e92\u65a5\u9501\u7684\u4f7f\u7528 #include <stdio.h> #include <pthread.h> int tickets = 100 ; pthread_mutex_t mutex_lock = PTHREAD_MUTEX_INITIALIZER ; void * print_msg ( void * msg ){ while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( tickets > 0 ){ printf ( \"%s sells No. %d ticket \\n \" , ( char * ) msg , tickets ); tickets -- ; } pthread_mutex_unlock ( & mutex_lock ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , print_msg , \"Shenyangnan\" ); pthread_create ( & t2 , NULL , print_msg , \"Shenyang\" ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); } \u6761\u4ef6\u53d8\u91cf \u00b6 pthread_cond_wait \u3001 pthread_cond_signal \u3001 pthread_cond_broadcast **pthread_cond_wait**\u51fd\u6570\u7684\u524d\u540e\u9700\u8981\u5bf9\u4e92\u65a5\u9501\u8fdb\u884clock\u4e0eunlock\uff0c\u51fd\u6570\u4f1a\u4f7f\u5f97\u7ebf\u7a0b\u5728\u6b64\u963b\u585e\u5e76\u91ca\u653e\u4e92\u65a5\u9501\uff0c\u800c\u540e\u7b49\u5f85 signal \u6216 broadcast \u7684\u5524\u9192\u5e76\u540c\u65f6\u5bf9\u7533\u8bf7\u4e92\u65a5\u9501 // \u6761\u4ef6\u53d8\u91cf\u7684\u4f7f\u7528 #include <stdio.h> #include <pthread.h> #define NUM 5 int buf [ NUM ] = { 0 }; int num = 0 ; pthread_mutex_t mutex_lock = PTHREAD_MUTEX_INITIALIZER ; pthread_cond_t flag = PTHREAD_COND_INITIALIZER ; void * producer ( void * useless ){ int count = 0 ; while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( num < NUM ){ buf [ num ] = count ; count ++ ; printf ( \"put %d \\n \" , buf [ num ]); num ++ ; fflush ( stdout ); pthread_cond_signal ( & flag ); } else { pthread_cond_wait ( & flag , & mutex_lock ); } sleep ( 1 ); pthread_mutex_unlock ( & mutex_lock ); } } void * consumer ( void * useless ){ while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( num > 0 ){ num -- ; printf ( \"get %d \\n \" , buf [ num ]); buf [ num ] = 0 ; fflush ( stdout ); sleep ( 1 ); pthread_cond_signal ( & flag ); } else { pthread_cond_wait ( & flag , & mutex_lock ); sleep ( 1 ); } pthread_mutex_unlock ( & mutex_lock ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , consumer , NULL ); pthread_create ( & t2 , NULL , producer , NULL ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); } // \u591a\u7ebf\u7a0b\u7248\u672c\u7684WebServer // // Created by looper on 18-10-2. // /* webserv.c - a minimal web server (version 0.2) * usage: ws portnumber * features: supports the GET command only * runs in the current directory * forks a new child to handle each request * has MAJOR security holes, for demo purposes only * has many other weaknesses, but is a good start * build: cc webserv.c socklib.c -o webserv */ #include <stdio.h> #include <sys/types.h> #include <sys/stat.h> #include <string.h> #include <cstdlib> #include <dnet.h> #include <zconf.h> #include <unistd.h> #include <sys/socket.h> #include <netinet/in.h> #include <netdb.h> #include <time.h> #define HOSTLEN 256 #define BACKLOG 1 int make_server_socket ( int ); int make_server_socket_q ( int , int ); int connect_to_server ( char * , int ); void read_til_crnl ( FILE * ); void process_rq ( char * , int ); void header ( FILE * , char * ); void cannot_do ( int ); void do_404 ( char * , int ); bool isadir ( char * ); bool not_exist ( char * ); void do_ls ( char * , int ); char * file_type ( char * ); bool ends_in_cgi ( char * ); void do_exec ( char * , int ); void do_cat ( char * , int ); int main ( int ac , char * av []) { int sock , fd ; FILE * fpin ; char request [ BUFSIZ ]; if ( ac == 1 ) { fprintf ( stderr , \"usage: ws portnum \\n \" ); exit ( 1 ); } sock = make_server_socket ( atoi ( av [ 1 ])); if ( sock == -1 ) exit ( 2 ); /* main loop here */ while ( 1 ) { /* take a call and buffer it */ fd = accept ( sock , NULL , NULL ); fpin = fdopen ( fd , \"rf\" ); /* read request */ fgets ( request , BUFSIZ , fpin ); printf ( \"got a call: request = %s\" , request ); read_til_crnl ( fpin ); /* do what client asks */ process_rq ( request , fd ); fclose ( fpin ); } } int make_server_socket ( int portnum ) { return make_server_socket_q ( portnum , BACKLOG ); } int make_server_socket_q ( int portnum , int backlog ) { struct sockaddr_in saddr {}; /* build our address here */ struct hostent * hp ; /* this is part of our */ char hostname [ HOSTLEN ]; /* address */ int sock_id ; /* the socket */ sock_id = socket ( PF_INET , SOCK_STREAM , 0 ); /* get a socket */ if ( sock_id == -1 ) return -1 ; /** build address and bind it to socket **/ bzero (( void * ) & saddr , sizeof ( saddr )); /* clear out struct */ gethostname ( hostname , HOSTLEN ); /* where am I ? */ hp = gethostbyname ( hostname ); /* get info about host */ /* fill in host part */ bcopy (( void * ) hp -> h_addr , ( void * ) & saddr . sin_addr , hp -> h_length ); saddr . sin_port = htons ( portnum ); /* fill in socket port */ saddr . sin_family = AF_INET ; /* fill in addr family */ if ( bind ( sock_id , ( struct sockaddr * ) & saddr , sizeof ( saddr )) != 0 ) return -1 ; /** arrange for incoming calls **/ if ( listen ( sock_id , backlog ) != 0 ) return -1 ; return sock_id ; } int connect_to_server ( char * host , int portnum ) { int sock ; struct sockaddr_in servadd {}; /* the number to call */ struct hostent * hp ; /* used to get number */ /** Step 1: Get a socket **/ sock = socket ( AF_INET , SOCK_STREAM , 0 ); /* get a line */ if ( sock == -1 ) return -1 ; /** Step 2: connect to server **/ bzero ( & servadd , sizeof ( servadd )); /* zero the address */ hp = gethostbyname ( host ); /* lookup host's ip # */ if ( hp == nullptr ) return -1 ; bcopy ( hp -> h_addr , ( struct sockaddr * ) & servadd . sin_addr , hp -> h_length ); servadd . sin_port = htons ( portnum ); /* fill in port number */ servadd . sin_family = AF_INET ; /* fill in socket type */ if ( connect ( sock , ( struct sockaddr * ) & servadd , sizeof ( servadd )) != 0 ) return -1 ; return sock ; } /* ------------------------------------------------------ * read_til_crnl(FILE *) skip over all request info until a CRNL is seen ------------------------------------------------------ */ void read_til_crnl ( FILE * fp ) { char buf [ BUFSIZ ]; while ( fgets ( buf , BUFSIZ , fp ) != nullptr && strcmp ( buf , \" \\r\\n \" ) != 0 ); } /* ------------------------------------------------------ * process_rq( char *rq, int fd ) do what the request asks for and write reply to fd handles request in a new process rq is HTTP command: GET /foo/bar.html HTTP/1.0 ------------------------------------------------------ */ void process_rq ( char * rq , int fd ) { char cmd [ BUFSIZ ], arg [ BUFSIZ ]; /* create a new process and return if not the child */ if ( fork () != 0 ) return ; strcpy ( arg , \"./\" ); /* precede args with ./ */ if ( sscanf ( rq , \"%s%s\" , cmd , arg + 2 ) != 2 ) return ; if ( strcmp ( cmd , \"GET\" ) != 0 ) cannot_do ( fd ); else if ( not_exist ( arg )) do_404 ( arg , fd ); else if ( isadir ( arg )) do_ls ( arg , fd ); else if ( ends_in_cgi ( arg )) do_exec ( arg , fd ); else do_cat ( arg , fd ); } /* ------------------------------------------------------ * the reply header thing: all functions need one if content_type is NULL then don't send content type ------------------------------------------------------ */ void header ( FILE * fp , char * content_type ) { fprintf ( fp , \"HTTP/1.0 200 OK \\r\\n \" ); if ( content_type ) fprintf ( fp , \"Content-type: %s;charset=utf-8 \\r\\n \" , content_type ); } /* ------------------------------------------------------ * simple functions first: cannot_do(fd) unimplemented HTTP command and do_404(item,fd) no such object ------------------------------------------------------ */ void cannot_do ( int fd ) { FILE * fp = fdopen ( fd , \"w\" ); fprintf ( fp , \"HTTP/1.0 501 Not Implemented \\r\\n \" ); fprintf ( fp , \"Content-type: text/plain;charset=utf-8 \\r\\n \" ); fprintf ( fp , \" \\r\\n \" ); fprintf ( fp , \"That command is not yet implemented \\r\\n \" ); fclose ( fp ); } void do_404 ( char * item , int fd ) { FILE * fp = fdopen ( fd , \"w\" ); fprintf ( fp , \"HTTP/1.0 404 Not Found \\r\\n \" ); fprintf ( fp , \"Content-type: text/plain;charset=utf-8 \\r\\n \" ); fprintf ( fp , \" \\r\\n \" ); fprintf ( fp , \"The item you requested: %s \\r\\n is not found \\r\\n \" , item ); fclose ( fp ); } /* ------------------------------------------------------ * the directory listing section isadir() uses stat, not_exist() uses stat do_ls runs ls. It should not ------------------------------------------------------ */ bool isadir ( char * f ) { struct stat info {}; return ( stat ( f , & info ) != -1 && S_ISDIR ( info . st_mode )); } bool not_exist ( char * f ) { struct stat info {}; return ( stat ( f , & info ) == -1 ); } void do_ls ( char * dir , int fd ) { FILE * fp ; fp = fdopen ( fd , \"w\" ); header ( fp , \"text/plain;charset=utf-8\" ); fprintf ( fp , \" \\r\\n \" ); fflush ( fp ); dup2 ( fd , 1 ); dup2 ( fd , 2 ); close ( fd ); execlp ( \"ls\" , \"ls\" , \"-l\" , dir , NULL ); perror ( dir ); exit ( 1 ); } /* ------------------------------------------------------ * the cgi stuff. function to check extension and one to run the program. ------------------------------------------------------ */ char * file_type ( char * f ) { /* returns 'extension' of file */ char * cp ; if (( cp = strrchr ( f , '.' )) != nullptr ) return cp + 1 ; return \"\" ; } bool ends_in_cgi ( char * f ) { return ( strcmp ( file_type ( f ), \"cgi\" ) == 0 ); } void do_exec ( char * prog , int fd ) { FILE * fp ; fp = fdopen ( fd , \"w\" ); header ( fp , nullptr ); fflush ( fp ); dup2 ( fd , 1 ); dup2 ( fd , 2 ); close ( fd ); execl ( prog , prog , NULL ); perror ( prog ); } /* ------------------------------------------------------ * do_cat(filename,fd) sends back contents after a header ------------------------------------------------------ */ void do_cat ( char * f , int fd ) { char * extension = file_type ( f ); char * content = \"text/plain;charset=utf-8\" ; FILE * fpsock , * fpfile ; int c ; if ( strcmp ( extension , \"html\" ) == 0 ) content = \"text/html;charset=utf-8\" ; else if ( strcmp ( extension , \"gif\" ) == 0 ) content = \"image/gif\" ; else if ( strcmp ( extension , \"jpg\" ) == 0 ) content = \"image/jpeg\" ; else if ( strcmp ( extension , \"jpeg\" ) == 0 ) content = \"image/jpeg\" ; fpsock = fdopen ( fd , \"w\" ); fpfile = fopen ( f , \"r\" ); if ( fpsock != NULL && fpfile != NULL ) { header ( fpsock , content ); fprintf ( fpsock , \" \\r\\n \" ); while (( c = getc ( fpfile )) != EOF ) putc ( c , fpsock ); fclose ( fpfile ); fclose ( fpsock ); } exit ( 0 ); } \u5341\u4e8c. Interprocess communication(IPC) \u00b6 \u5f02\u6b65I/O \u00b6 Unix\u7cfb\u7edf\u63d0\u4f9b\u4e86\u7cfb\u7edf\u8c03\u7528select,\u5b83\u5141\u8bb8\u7a0b\u5e8f\u6302\u8d77,\u5e76\u7b49\u5f85\u4ece\u4e0d\u6b62\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u8f93\u4eba\u3002\u5b83\u7684\u539f\u7406\u5f88\u7b80\u5355: (1)\u83b7\u5f97\u6240\u9700\u8981\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u5217\u8868; (2)\u5c06\u6b64\u5217\u8868\u4f20\u7ed9select; (3)select\u6302\u8d77\u76f4\u5230\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u6709\u6570\u636e\u5230\u8fbe; (4)select\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\u4e2d\u7684\u82e5\u5e72\u4f4d,\u7528\u6765\u901a\u77e5\u4f60\u54ea\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5df2\u7ecf\u6709\u8f93\u5165\u7684\u6570\u636e\u3002 \u4e0b\u56fe\u4e3a\u6559\u6750468\u9875\u7684select\u5c0f\u7ed3 #include <fcntl.h> #include <stdio.h> #include <stdlib.h> #include <sys/time.h> #include <sys/types.h> #include <unistd.h> #include <sys/select.h> main () { int fd1 , fd2 ; fd_set rfds ; struct timeval tv ; int retval ; int n ; char buf [ 1024 ]; if (( fd1 = open ( \"/dev/input/mice\" , O_RDONLY )) == -1 ) { perror ( \"cannot open\" ); exit ( 1 ); } if (( fd2 = open ( \"/dev/pts/0\" , O_RDONLY )) == -1 ) { perror ( \"cannot open\" ); exit ( 1 ); } while ( 1 ) { FD_ZERO ( & rfds ); FD_SET ( fd1 , & rfds ); FD_SET ( fd2 , & rfds ); /* Wait up to five seconds. */ tv . tv_sec = 5 ; tv . tv_usec = 0 ; retval = select ( fd2 + 1 , & rfds , NULL , NULL , & tv ); if ( retval == -1 ) { perror ( \"select()\" ); } else if ( retval > 0 ) { printf ( \"Data is available now. \\n \" ); if ( FD_ISSET ( fd1 , & rfds )) { n = read ( fd1 , buf , sizeof ( buf )); fflush ( stdout ); printf ( \"mice:%.*s \\n \" , n , buf ); } if ( FD_ISSET ( fd2 , & rfds )) { n = read ( fd2 , buf , sizeof ( buf )); fflush ( stdout ); printf ( \"tty:%.*s \\n \" , n , buf ); } } else { printf ( \"No data within five seconds. \\n \" ); } } } \u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u65b9\u6848\u9009\u62e9 \u00b6 \u4e09\u79cd\u89e3\u51b3\u65b9\u6848\uff1a\u6587\u4ef6\u3001\u7ba1\u9053\u3001\u5171\u4eab\u5185\u5b58\u3002\u5206\u522b\u901a\u8fc7\u78c1\u76d8\u3001\u5185\u6838\u4ee5\u53ca\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u6570\u636e\u7684\u4f20\u8f93\u3002 \u901a\u8fc7\u6587\u4ef6\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1 \u00b6 \u547d\u540d\u7ba1\u9053 \u00b6 \u5171\u4eab\u5185\u5b58 \u00b6 //shmwrite.c #include <sys/ipc.h> #include <sys/shm.h> #include <sys/types.h> #include <string.h> main (){ int seg_id = shmget ( 99 , 128 , IPC_CREAT | 0777 ); char * p ; p = shmat ( seg_id , NULL , 0 ); strcpy ( p , \"Hello shm! \\n \" ); } //shmread,c #include <sys/ipc.h> #include <sys/shm.h> #include <sys/types.h> #include <string.h> #include <stdio.h> main (){ int seg_id = shmget ( 99 , 128 , 0777 ); char * p ; p = shmat ( seg_id , NULL , 0 ); printf ( \"%s\" , p ); } \u901a\u4fe1\u65b9\u6cd5\u6bd4\u8f83 \u00b6 \u6807\u51c6 \u6587\u4ef6 \u547d\u540d\u7ba1\u9053 \u5171\u4eab\u5185\u5b58 socket \u901f\u5ea6 \u5185\u6838\u5c06\u6570\u636e\u590d\u5236\u5230\u78c1\u76d8\uff0c\u7136\u540e\u518d\u4ece\u78c1\u76d8\u4e0a\u590d\u5236\u51fa\u53bb \u5185\u6838\u5c06\u6570\u636e\u590d\u5236\u5230\u5185\u6838\u7a7a\u95f4\uff0c\u518d\u5207\u6362\u56de\u7528\u6237\u7a7a\u95f4 \u8fde\u63a5\u548c\u65e0\u8fde\u63a5 \u591a\u5ba2\u6237\u53ef\u540c\u65f6\u8bfb\u53d6 \u8981\u6c42\u5efa\u7acb\u8fde\u63a5\uff0c\u5355\u5ba2\u6237\u53ef\u8bfb\u53d6 \u591a\u5ba2\u6237\u53ef\u540c\u65f6\u8bfb\u53d6 \u6d41 socket \u9762\u5411\u8fde\u63a5\uff0c\u6570\u636e\u62a5 socket \u65e0\u8fde\u63a5 \u8303\u56f4 \u8fdc\u7a0b\u901a\u4fe1 \u672c\u673a\u8fdb\u7a0b\u901a\u4fe1 \u672c\u673a\u8fdb\u7a0b\u901a\u4fe1 IP \u5730\u5740\u7684 socket \u53ef\u8fdc\u7a0b\u901a\u4fe1\uff0cUnix \u5730\u5740\u7684 socket \u4e0d\u80fd \u8bbf\u95ee\u9650\u5236 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u5730\u5740 socket \u63d0\u4f9b Unix \u6587\u4ef6\u6743\u9650\uff0cInternet socket \u6ca1\u6709\u6743\u9650\u673a\u5236 \u7ade\u6001\u6761\u4ef6 \u9700\u8981\u5904\u7406 \u5185\u6838\u7ba1\u7406\u7684\u961f\u5217 \u9700\u8981\u5904\u7406 \u5185\u6838\u7ba1\u7406\u7684\u961f\u5217 \u5341\u4e8c. Shell Programming \u00b6 \u811a\u672c\u8fd0\u884c \u00b6 \u5efa\u7acb\u4e00\u4e2a\u6587\u672c\u6587\u4ef6 demo1 \uff0c\u4ee5 .sh \u7ed3\u5c3e\u7684\u6216\u8005\u4e0d\u9700\u8981\u540e\u7f00\u90fd\u53ef\u4ee5\uff0c\u4e0b\u9762\u662fdemo1\u7684\u5185\u5bb9: #!/bin/bash NUM = 10 printf \"\u8f93\u51fa\u6570\u5b57 $NUM \\n\" echo $NUM \u76f4\u63a5\u8fd0\u884c\u662f\u4f1a\u62a5\u9519\u8bef\u7684\uff0c\u56e0\u4e3a\u6ca1\u6709\u6743\u9650\u6267\u884c\uff08Permission denied\uff09\uff0c\u9700\u8981\u7ed9\u6743\u9650\u3002\u4e0b\u9762\u65b9\u5f0f chmod +x ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u6267\u884c\u7684\u6743\u9650 chmod +rx ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod u+rx ./demo1 # \u4ec5\u4ec5\u4f7f\u811a\u672c\u6587\u4ef6\u62e5\u6709\u8005\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod u+x ./demo1 # \u53ea\u6709\u81ea\u5df1\u53ef\u4ee5\u6267\u884c\uff0c\u5176\u5b83\u4eba\u4e0d\u80fd\u6267\u884c chmod ug+x ./demo1 # \u53ea\u6709\u81ea\u5df1\u4ee5\u53ca\u540c\u4e00\u7fa4\u53ef\u4ee5\u6267\u884c\uff0c\u5176\u5b83\u4eba\u4e0d\u80fd\u6267\u884c chmod 555 ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod 777 ./demo1 \u5f53\u524d\u76ee\u5f55\u4e0b\u8fd0\u884c demo1 \u811a\u672c ./demo1 # \u8f93\u51fa\u7ed3\u679c===> \u8f93\u51fa\u6570\u5b5710 10 \u76f4\u63a5\u8fd0\u884cdemo1\u811a\u672c\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u628a\u811a\u672c\u7ed9\u7cfb\u7edf\u4e2d\u6240\u6709\u5176\u4ed6\u7684\u7528\u6237\u4f7f\u7528\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u4f60\u5c06demo1\u811a\u672c\u79fb\u52a8\u5230\u76ee\u5f55 /usr/local/bin \u4e2d(\u5fc5\u987b\u8981\u6709root\u7684\u6743\u9650)\uff0c\u79fb\u52a8\u5230 bin \u76ee\u5f55\u4e4b\u540e\uff0c\u4f60\u53ea\u9700\u4f7f\u7528 demo1 \u52a0\u56de\u8f66\u5c31\u80fd\u6267\u884c\u811a\u672c\u4e86\u3002 demo1 # \u8f93\u51fa\u7ed3\u679c===> \u8f93\u51fa\u6570\u5b5710 10 \u901a\u8fc7sh\u6216\u8005bash\u547d\u4ee4\u8fd0\u884c\u811a\u672c\uff0c sh scriptname \u8fd0\u884c\u4e00\u4e2aBash\u811a\u672c\u5c06\u4f1a\u7981\u6b62\u6240\u6709Bash\u7684\u6269\u5c55\u7279\u6027\u3002 # \u4f60\u80fd\u591f\u8fd0\u884c\u5b83\u7528\u547d\u4ee4 sh demo1 # \u53e6\u5916\u4e5f\u4e5f\u53ef\u4ee5\u7528bash\u6765\u6267\u884c bash demo1 \u811a\u672c\u4ee5\"#!\"\u884c\u5f00\u5934\uff0c\u884c\u5c06\u4f1a\u547d\u4ee4\u89e3\u91ca\u5668(sh\u6216\u662fbash)\u3002 #!/bin/rm \u5f53\u4f60\u8fd0\u884c\u8fd9\u4e2a\u811a\u672c\u65f6\uff0c\u9664\u4e86\u8fd9\u4e2a\u811a\u672c\u6d88\u5931\u4e86\u4e4b\u5916\uff0c\u4f60\u4e0d\u4f1a\u53d1\u73b0\u66f4\u591a\u5176\u4ed6\u7684\u4e1c\u897f\u3002 \u7279\u6b8a\u5b57\u7b26 \u6ce8\u91ca \u00b6 \u4ee5 # \u5f00\u5934\u7684\u884c\u5c31\u662f\u6ce8\u91ca\uff0c\u4f1a\u88ab\u89e3\u91ca\u5668\u5ffd\u7565\u3002\u6ce8\u91ca\u884c\u524d\u9762\u4e5f\u53ef\u4ee5\u6709\u7a7a\u767d\u5b57\u7b26\u3002 #-------------------------------------------- # \u8fd9\u662f\u4e00\u4e2a\u6ce8\u91ca # author\uff1a\u4f5c\u8005 # site\uff1ahttps://github.com/jaywcjlove #-------------------------------------------- echo \"A comment will follow.\" # \u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u6ce8\u91ca. # ^ \u6ce8\u610f\u5728#\u524d\u9762\u53ef\u4ee5\u6709\u7a7a\u767d\u7b26 echo\u547d\u4ee4\u7ed9\u51fa\u7684\u4e00\u4e2a\u8f6c\u4e49\u7684#\u5b57\u7b26\u5e76\u4e0d\u4f1a\u5f00\u59cb\u4e00\u4e2a\u6ce8\u91ca\u3002\u540c\u6837\u5730\uff0c\u51fa\u73b0\u5728\u4e00\u4e9b\u53c2\u6570\u4ee3\u6362\u7ed3\u6784\u548c\u5728\u6570\u503c\u5e38\u91cf\u8868\u8fbe\u5f0f\u4e2d\u7684#\u5b57\u7b26\u4e5f\u540c\u6837\u4e0d\u4f1a\u5f00\u59cb\u4e00\u4e2a\u6ce8\u91ca\u3002 echo \"\u8fd9\u91cc\u7684 # \u4e0d\u4f1a\u88ab\u6ce8\u91ca\" echo '\u8fd9\u91cc\u7684 # \u4e0d\u4f1a\u88ab\u6ce8\u91ca' echo \u8fd9\u91cc\u7684 \\# \u4e0d\u4f1a\u88ab\u6ce8\u91ca echo \u8fd9\u91cc\u7684 # \u4f1a\u88ab\u6ce8\u91ca echo ${ PATH #*: } # \u524d\u9762\u7684#\u662f\u53c2\u6570\u4ee3\u6362\uff0c\u4e0d\u662f\u6ce8\u91ca. echo $(( 2#101011 )) # \u57fa\u672c\u8f6c\u6362\uff0c\u4e0d\u662f\u6ce8\u91ca. \u547d\u4ee4\u5206\u5272\u7b26 \u00b6 \u5206\u53f7 ; \u547d\u4ee4\u5206\u5272\u7b26\uff0c\u5206\u5272\u7b26\u5141\u8bb8\u5728\u540c\u4e00\u884c\u91cc\u6709\u4e24\u4e2a\u6216\u66f4\u591a\u7684\u547d\u4ee4\u3002\u6267\u884c demo2 \uff0c\u4f1a\u5c06 demo2 \u62f7\u8d1d\u8f93\u51fa demo2.bak \u3002 echo hello ; echo there # \u8f93\u51fa hello \u548c there filename = 'demo2' # \u53d8\u91cf if [ -x \" $filename \" ] ; then # \u6ce8\u610f\uff1a\"if\" and \"then\"\u9700\u8981\u5206\u9694\u7b26 # \u601d\u8003\u4e00\u4e0b\u8fd9\u662f\u4e3a\u4ec0\u4e48? echo \"File $filename exists.\" ; cp $filename $filename .bak else echo \"File $filename not found.\" ; touch $filename fi ; echo \"File test complete.\" \u7ed3\u675f\u7b26 \u00b6 \u53cc\u5206\u53f7 ;; \uff0ccase\u8bed\u53e5\u5206\u652f\u7684\u7ed3\u675f\u7b26\u3002 demo3 read Keypress case \" $Keypress \" in [[ :lower: ]] ) echo \"Lowercase letter\" ;; [[ :upper: ]] ) echo \"Uppercase letter\" ;; [ 0 -9 ] ) echo \"Digit\" ;; * ) echo \"Punctuation, whitespace, or other\" ;; esac # \u5141\u8bb8\u5b57\u7b26\u4e32\u7684\u8303\u56f4\u51fa\u73b0\u5728[]\u4e2d, #+ \u6216\u8005POSIX\u98ce\u683c\u7684[[\u4e2d. exit 0 \u53e5\u53f7/\u5706\u70b9 \u00b6 \u4f5c\u4e3a\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u7ec4\u6210\u90e8\u5206 . \uff0c\u5f53\u70b9 . \u4ee5\u4e00\u4e2a\u6587\u4ef6\u540d\u4e3a\u524d\u7f00\u65f6\uff0c\u8d77\u4f5c\u7528\u4f7f\u8be5\u6587\u4ef6\u53d8\u6210\u4e86\u9690\u85cf\u6587\u4ef6\u3002\u8fd9\u79cd\u9690\u85cf\u6587\u4ef6ls\u4e00\u822c\u662f\u4e0d\u4f1a\u663e\u793a\u51fa\u6765\u7684\u3002 \u4f5c\u4e3a\u76ee\u5f55\u540d\u65f6\uff0c\u5355\u4e2a\u70b9\uff08.\uff09\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff0c\u4e24\u4e2a\u70b9(..)\u8868\u793a\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff08\u6216\u79f0\u4e3a\u7236\u76ee\u5f55\uff09\u3002 \u70b9(.)\u5b57\u7b26\u5339\u914d\u3002\u4f5c\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4e00\u90e8\u5206,\u5339\u914d\u5b57\u7b26\u65f6\uff0c\u5355\u70b9\uff08.\uff09\u8868\u793a\u5339\u914d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u3002 \u5f15\u53f7 \u00b6 \u5f15\u53f7\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u4f5c\u7528\u662f\u4fdd\u62a4\u547d\u4ee4\u884c\u4e0a\u7684\u4e00\u4e2a\u53c2\u6570\u4e0d\u88abshell\u89e3\u91ca\uff0c\u800c\u628a\u6b64\u53c2\u6570\u4f20\u9012\u7ed9\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u6765\u5904\u7406\u5b83\u3002 bash$ grep '[Ff]ile' demo* demo2:filename = 'demo2' demo2:if [ -x \" $filename \" ] ; then # \u6ce8\u610f\uff1a\"if\" and \"then\"\u9700\u8981\u5206\u9694\u7b26 demo2: echo \"File $filename exists.\" ; cp $filename $filename .bak \u5f15\u53f7\u80fd\u6539\u6389echo's\u4e0d\u6362\u884c\u7684\u201c\u4e60\u60ef\u201d\u3002 bash$ echo $( ls -al ) total 24 drwxr-xr-x 5 kacperwang staff 170 1 22 16 :47 . drwxr-xr-x 5 kacperwang staff 170 1 22 13 :29 .. -rwxr-xr-x 1 kacperwang staff 58 1 22 16 :20 demo1 -rwxr-xr-x 1 kacperwang staff 325 1 22 16 :39 demo2 -rwxr-xr-x 1 kacperwang staff 899 1 22 17 :16 demo3 bash$ echo \" $( ls -al ) \" total 24 drwxr-xr-x 5 kacperwang staff 170 1 22 16 :47 . drwxr-xr-x 5 kacperwang staff 170 1 22 13 :29 .. -rwxr-xr-x 1 kacperwang staff 58 1 22 16 :20 demo1 -rwxr-xr-x 1 kacperwang staff 325 1 22 16 :39 demo2 -rwxr-xr-x 1 kacperwang staff 899 1 22 17 :16 demo3 \u5355\u5f15\u53f7 str = 'this is a string' \u5355\u5f15\u53f7\u91cc\u7684\u4efb\u4f55\u5b57\u7b26\u90fd\u4f1a\u539f\u6837\u8f93\u51fa\uff0c\u5355\u5f15\u53f7\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u662f\u65e0\u6548\u7684 \u5355\u5f15\u53f7\u5b57\u4e32\u4e2d\u4e0d\u80fd\u51fa\u73b0\u5355\u5f15\u53f7\uff08\u5bf9\u5355\u5f15\u53f7\u4f7f\u7528\u8f6c\u4e49\u7b26\u540e\u4e5f\u4e0d\u884c\uff09 \u53cc\u5f15\u53f7 your_name = 'qinjx' str = \"Hello, I know your are \\\" $your_name \\\"! \\n\" \u53cc\u5f15\u53f7\u91cc\u53ef\u4ee5\u6709\u53d8\u91cf \u53cc\u5f15\u53f7\u91cc\u53ef\u4ee5\u51fa\u73b0\u8f6c\u4e49\u5b57\u7b26 \u547d\u4ee4\u66ff\u6362 \u00b6 \u547d\u4ee4\u66ff\u6362\"`\"\uff0c\u5c06\u4f1a\u91cd\u65b0\u5206\u914d\u4e00\u4e2a\u547d\u4ee4\u751a\u81f3\u662f\u591a\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff1b\u5b83\u4f1a\u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u5982\u5b9e\u5730\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u4e0a\u4e0b\u6587\u4e2d\u3002 demo4 script_name = ` basename $0 ` echo \"The name of this script is $script_name .\" textfile_listing = ` ls * ` # \u53d8\u91cf\u4e2d\u5305\u542b\u4e86\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e0b\u6240\u6709\u7684*\u6587\u4ef6 echo $textfile_listing \u901a\u8fc7\u8fd9\u4e2a\u7b26\u53f7\uff0c\u6279\u91cf\u5220\u9664\u6587\u4ef6 rm ` cat filename ` # \"filename\" \u5305\u542b\u4e86\u9700\u8981\u88ab\u5220\u9664\u7684\u6587\u4ef6\u5217\u8868 # \u53ef\u80fd\u4f1a\u4ea7\u751f\"\u53c2\u6570\u5217\u8868\u592a\u957f\"\u7684\u9519\u8bef # \u66f4\u597d\u7684\u65b9\u6cd5\u662f xargs rm -- < filename # ( -- \u540c\u65f6\u8986\u76d6\u4e86\u90a3\u4e9b\u4ee5\"-\"\u5f00\u5934\u7684\u6587\u4ef6\u6240\u4ea7\u751f\u7684\u7279\u6b8a\u60c5\u51b5 ) \u64cd\u4f5c\u7b26 \u00b6 \u8d4b\u503c \u00b6 \u53d8\u91cf\u8d4b\u503c\uff0c\u521d\u59cb\u5316\u6216\u6539\u53d8\u4e00\u4e2a\u53d8\u91cf\u7684\u503c\uff0c\u901a\u7528\u7684\u53d8\u91cf\u8d4b\u503c\u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u7528\u4e8e\u6570\u503c\u548c\u5b57\u7b26\u4e32\u7684\u8d4b\u503c var = 27 category = minerals # \"=\"\u5b57\u7b26\u540e\u9762\u4e0d\u80fd\u52a0\u7a7a\u767d\u5b57\u7b26. \u4e0d\u8981\u628a\"=\"\u8d4b\u503c\u64cd\u4f5c\u7b26\u548c = \u6d4b\u8bd5\u64cd\u4f5c\u7b26\u641e\u6df7\u4e86\u3002 # = \u7528\u4e8e\u6d4b\u8bd5\u64cd\u4f5c\u7b26 if [ \" $string1 \" = \" $string2 \" ] # if [ \"X$string1\" = \"X$string2\" ] \u4f1a\u66f4\u5b89\u5168, # \u5b83\u4e3a\u4e86\u9632\u6b62\u5176\u4e2d\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e3a\u7a7a\u65f6\u4ea7\u751f\u9519\u8bef\u4fe1\u606f. # (\u589e\u52a0\u7684\"X\"\u5b57\u7b26\u53ef\u4ee5\u4e92\u76f8\u62b5\u6d88.) then command fi \u8ba1\u7b97\u64cd\u4f5c\u7b26 \u00b6 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 + \u52a0 / \u9664 ** \u6c42\u5e42 - \u51cf * \u4e58 % \u6c42\u6a21 demo6 # Bash\u5728\u7248\u672c2.02\u5f15\u5165\u4e86\"**\"\u6c42\u5e42\u64cd\u4f5c\u7b26. let \"z=5**3\" echo \"z = $z \" # z = 125 # \u6c42\u6a21\uff08\u5b83\u8fd4\u56de\u6574\u6570\u6574\u9664\u4e00\u4e2a\u6570\u540e\u7684\u4f59\u6570\uff09 let \"y=5 % 3\" echo \"y = $y \" # y = 2 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 += \u52a0\u7b49(plus-equal) \u628a\u539f\u53d8\u91cf\u503c\u589e\u52a0\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf -= \u51cf\u7b49(minus-equal) \u628a\u539f\u53d8\u91cf\u503c\u51cf\u5c11\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf *= \u4e58\u7b49(times-equal) \u628a\u539f\u53d8\u91cf\u503c\u4e58\u4e0a\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf /= \u9664\u7b49(slash-equal) \u628a\u539f\u53d8\u91cf\u503c\u9664\u4ee5\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf %= \u6a21\u7b49(mod-equal) \u628a\u539f\u53d8\u91cf\u503c\u9664\u4ee5\u4e00\u4e2a\u5e38\u91cf\u6574\u9664\uff08\u5373\u53d6\u6a21\uff09\u5e76\u91cd\u65b0\u8d4b\u4f59\u6570\u7684\u503c\u7ed9\u53d8\u91cf let \"var += 5\" # \u4f1a\u4f7f\u53d8\u91cfvar\u503c\u52a0\u4e865\u5e76\u628a\u503c\u8d4b\u7ed9var. let \"var *= 4\" # \u4f7f\u53d8\u91cfvar\u7684\u503c\u4e58\u4e0a4\u5e76\u628a\u503c\u8d4b\u7ed9var. \u4f8b\u5b50\uff1a - \u752810\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u8ba1\u6570\u523011 - \u6700\u5927\u516c\u7ea6\u6570 - \u6574\u6570\u53d8\u91cf\u7b26\u53f7\u7684\u957f\u6574\u6570\u6d4b\u8bd5 \uff0c\u52302.05b\u7248\u672c\u4e3a\u6b62\uff0cBash\u652f\u630164\u4f4d\u7684\u6574\u6570\uff0c\u4ee5\u524d\u7684\u7248\u672c\u4f1a\u6709\u957f\u5ea6\u6ea2\u51fa\u9519\u8bef\u3002 - Bash\u4e0d\u80fd\u5904\u7406\u6d6e\u70b9\u8ba1\u7b97,\u5b83\u4f1a\u628a\u542b\u6709\u5c0f\u6570\u70b9\u7684\u6570\u5f53\u6210\u5b57\u7b26\u4e32\u3002 \u4f4d\u64cd\u4f5c\u7b26 \u00b6 \u4f4d\u64cd\u4f5c\u7b26\u5f88\u5c11\u5728\u811a\u672c\u4e2d\u4f7f\u7528\u3002\u4ed6\u4eec\u4e3b\u8981\u7528\u4e8e\u64cd\u4f5c\u548c\u6d4b\u8bd5\u4ece\u7aef\u53e3\u6216sockets\u4e2d\u8bfb\u5230\u7684\u6570\u636e\u3002\u201c\u4f4d\u8fd0\u7b97\u201d\u66f4\u591a\u5730\u7528\u4e8e\u7f16\u8bd1\u578b\u7684\u8bed\u8a00\uff0c\u6bd4\u5982\u8bf4C\u548cC++\uff0c\u5b83\u4eec\u8fd0\u884c\u8d77\u6765\u5feb\u5730\u50cf\u98de\u3002 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 << \u4f4d\u5de6\u79fb\uff08\u6bcf\u79fb\u4e00\u4f4d\u76f8\u5f53\u4e58\u4ee52\uff09 | \u4f4d\u6216 <<= \u4f4d\u5de6\u79fb\u8d4b\u503c |= \u4f4d\u6216\u8d4b\u503c >> \u4f4d\u53f3\u79fb\uff08\u6bcf\u79fb\u4e00\u4f4d\u76f8\u5f53\u9664\u4ee52\uff09 ~ \u4f4d\u53cd >>= \"\u4f4d\u53f3\u79fb\u8d4b\u503c\"\uff08\u548c<<=\u76f8\u53cd\uff09 ! \u4f4d\u975e & \u4f4d\u4e0e ^ \u4f4d\u6216 &= \u4f4d\u4e8e\u8d4b\u503c ^= \u4f4d\u6216\u8d4b\u503c # <<= # \"\u4f4d\u5de6\u79fb\u8d4b\u503c\" let \"var <<= 2\" \u7ed3\u679c\u4f7fvar\u7684\u4e8c\u8fdb\u5236\u503c\u5de6\u79fb\u4e86\u4e8c\u4f4d\uff08\u76f8\u5f53\u4e8e\u4e58\u4ee54\uff09 \u903b\u8f91\u64cd\u4f5c\u7b26 \u903b\u8f91\u4e0e && if [ $condition1 ] && [ $condition2 ] # \u7b49\u540c\u4e8e: if [ $condition1 -a $condition2 ] # \u5982\u679ccondition1\u548ccondition2\u90fd\u4e3a\u771f\u5219\u8fd4\u56de\u771f... fi ; if [[ $condition1 && $condition2 ]] # Also works. # \u6ce8\u610f&&\u64cd\u4f5c\u4e0d\u80fd\u5728[ ... ]\u7ed3\u6784\u4e2d\u4f7f\u7528. fi ; \u903b\u8f91\u6216 || if [ $condition1 ] || [ $condition2 ] # \u7b49\u540c\u4e8e: if [ $condition1 -o $condition2 ] # \u5982\u679ccondition1\u548ccondition2\u6709\u4e00\u4e2a\u4e3a\u771f\u5219\u8fd4\u56de\u771f... fi ; if [[ $condition1 || $condition2 ]] # Also works. # \u6ce8\u610f||\u64cd\u4f5c\u4e0d\u80fd\u5728[ ... ]\u7ed3\u6784\u4e2d\u4f7f\u7528. fi ; \u4f7f\u7528&&\u548c||\u8fdb\u884c\u6df7\u5408\u6761\u4ef6\u6d4b\u8bd5 demo11 \u3002\u5728\u7b97\u672f\u8ba1\u7b97\u7684\u73af\u5883\u4e2d\uff0c&&\u548c||\u64cd\u4f5c\u7b26\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 bash$ echo $(( 1 && 2 )) $((3 && 0)) $((4 || 0)) $((0 || 0)) 1 0 1 0 \u9017\u53f7\u64cd\u4f5c\u7b26 \u00b6 \u9017\u53f7 , \u64cd\u4f5c\u7b26\u8fde\u63a5\u4e24\u4e2a\u6216\u66f4\u591a\u7684\u7b97\u672f\u64cd\u4f5c\u3002\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u88ab\u6c42\u503c(\u53ef\u80fd\u4f1a\u6709\u526f\u4f5c\u7528)\uff0c\u4f46\u53ea\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ed3\u6784\u3002 demo5 let \"t1 = ((5 + 3, 7 - 1, 15 - 4))\" echo \"t1 = $t1 \" # t1 = 11 let \"t2 = ((a = 9, 15 / 3))\" # \u521d\u59cb\u5316\"a\"\u5e76\u6c42\"t2\"\u7684\u503c. echo \"t2 = $t2 a = $a \" # t2 = 5 a = 9 \u53d8\u91cf \u00b6 \u53d8\u91cf\uff0c\u662f\u811a\u672c\u7f16\u7a0b\u4e2d\u7684\u5982\u4f55\u8fdb\u884c\u6570\u636e\u8868\u73b0\u7684\u529e\u6cd5\u3002\u5b83\u4eec\u53ef\u4ee5\u5728\u7b97\u672f\u8ba1\u7b97\u4e2d\u4f5c\u4e3a\u64cd\u4f5c\u6570\uff0c\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u8fbe\u5f0f\u4e2d\u4f5c\u4e3a\u7b26\u53f7\u8868\u8fbe\u62bd\u8c61\u7684\u610f\u4e49\u6216\u662f\u5176\u4ed6\u7684\u5176\u5b83\u610f\u4e49\u3002\u53d8\u91cf\u662f\u8868\u793a\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u4fdd\u5b58\u4e00\u79cd\u6570\u636e\u9700\u8981\u5360\u7684\u4e00\u4e2a\u4f4d\u7f6e\u6216\u4e00\u7ec4\u7684\u4f4d\u7f6e\u7684\u6807\u8bc6\u3002 \u53d8\u91cf\u503c \u00b6 \u5982\u679cvariable1\u662f\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u90a3\u4e48$variable1\u5c31\u662f\u5f15\u7528\u8fd9\u4e2a\u53d8\u91cf\u7684\u503c\u2015\u2015\u5373\u8fd9\u4e2a\u53d8\u91cf\u5b83\u5305\u542b\u7684\u6570\u636e\u3002 \u53d8\u91cf\u8d4b\u503c\u4e0e\u66ff\u6362\u4f8b\u5b50 t1 = 12 echo $t1 \u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u6709\u4e00\u4e2a\u201dnull\u201d\u503c\u2015\u2015\u8868\u793a\u4ece\u6ca1\u6709\u88ab\u8d4b\u503c\u8fc7\uff08\u6ce8\u610fnull\u503c\u4e0d\u7b49\u4e8e\u96f6\uff09\u3002\u5728\u4e00\u4e2a\u53d8\u91cf\u4ece\u672a\u8d4b\u503c\u4e4b\u524d\u5c31\u4f7f\u7528\u5b83\u901a\u5e38\u4f1a\u5f15\u8d77\u95ee\u9898\u3002\u7136\u800c\uff0c\u4ecd\u7136\u6709\u53ef\u80fd\u5728\u6267\u884c\u7b97\u672f\u8ba1\u7b97\u65f6\u4f7f\u7528\u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u3002 echo \" $uninitialized \" # (blank line) let \"uninitialized += 5\" # Add 5 to it. echo \" $uninitialized \" # 5 # \u7ed3\u8bba: # \u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u6ca1\u6709\u503c\uff0c #+ \u4f46\u662f\u4f3c\u4e4e\u5b83\u5728\u7b97\u672f\u8ba1\u7b97\u4e2d\u7684\u503c\u662f\u96f6\u3002 # \u8fd9\u4e2a\u65e0\u6cd5\u8bc1\u5b9e\uff08\u4e5f\u53ef\u80fd\u662f\u4e0d\u53ef\u79fb\u690d\uff09\u7684\u884c\u4e3a\u3002 \u5b9a\u4e49\u53d8\u91cf \u00b6 # \u53d8\u91cf\u540d\u4e0d\u52a0\u7f8e\u5143\u7b26\u53f7 your_var = \"elaine\" # \u91cd\u65b0\u5b9a\u4e49 your_var = \"newname\" \u6ce8\u610f\u26a0\ufe0f \u9996\u4e2a\u5b57\u7b26\u5fc5\u987b\u4e3a\u5b57\u6bcd\uff08a-z\uff0cA-Z\uff09\u3002 \u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08_\uff09\uff0c\u7b49\u53f7\u5de6\u53f3\u4e5f\u4e0d\u80fd\u6709\u7a7a\u683c\u3002 \u4e0d\u80fd\u4f7f\u7528\u6807\u70b9\u7b26\u53f7\u3002 \u4e0d\u80fd\u4f7f\u7528bash\u91cc\u7684\u5173\u952e\u5b57\uff08\u53ef\u7528help\u547d\u4ee4\u67e5\u770b\u4fdd\u7559\u5173\u952e\u5b57\uff09\u3002 \u53ea\u8bfb\u53d8\u91cf \u00b6 #!/bin/bash github = \"https://jaywcjlove.github.io\" readonly github github = \"https://www.github.com\" # \u8fd0\u884c\u811a\u672c\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a /bin/sh: NAME: This variable is read only. \u4f7f\u7528\u53d8\u91cf \u00b6 your_var = \"github\" echo $your_var echo ${ your_var } echo \"your name is ${ your_var } -l\" \u5220\u9664\u53d8\u91cfunset \u00b6 \u53d8\u91cf\u88ab\u5220\u9664\u540e\u4e0d\u80fd\u518d\u6b21\u4f7f\u7528\u3002unset \u547d\u4ee4\u4e0d\u80fd\u5220\u9664\u53ea\u8bfb\u53d8\u91cf\u3002 myUrl = \"https://jaywcjlove.github.io\" unset myUrl echo $myUrl \u53d8\u91cf\u7c7b\u578b \u00b6 \u4e0d\u540c\u4e0e\u8bb8\u591a\u5176\u4ed6\u7684\u7f16\u7a0b\u8bed\u8a00\uff0cBash\u4e0d\u4ee5\"\u7c7b\u578b\"\u6765\u533a\u5206\u53d8\u91cf\u3002\u672c\u8d28\u4e0a\u6765\u8bf4\uff0cBash\u53d8\u91cf\u662f\u5b57\u7b26\u4e32\uff0c\u4f46\u662f\u6839\u636e\u73af\u5883\u7684\u4e0d\u540c\uff0cBash\u5141\u8bb8\u53d8\u91cf\u6709\u6574\u6570\u8ba1\u7b97\u548c\u6bd4\u8f83\u3002\u5176\u4e2d\u7684\u51b3\u5b9a\u56e0\u7d20\u662f\u53d8\u91cf\u7684\u503c\u662f\u4e0d\u662f\u53ea\u542b\u6709\u6570\u5b57\u3002 \u5c40\u90e8\u53d8\u91cf \u5c40\u90e8\u53d8\u91cf\u5728\u811a\u672c\u6216\u547d\u4ee4\u4e2d\u5b9a\u4e49\uff0c\u4ec5\u5728\u5f53\u524dshell\u5b9e\u4f8b\u4e2d\u6709\u6548\uff0c\u5176\u4ed6shell\u542f\u52a8\u7684\u7a0b\u5e8f\u4e0d\u80fd\u8bbf\u95ee\u5c40\u90e8\u53d8\u91cf\u3002 \u73af\u5883\u53d8\u91cf \u6240\u6709\u7684\u7a0b\u5e8f\uff0c\u5305\u62ecshell\u542f\u52a8\u7684\u7a0b\u5e8f\uff0c\u90fd\u80fd\u8bbf\u95ee\u73af\u5883\u53d8\u91cf\uff0c\u6709\u4e9b\u7a0b\u5e8f\u9700\u8981\u73af\u5883\u53d8\u91cf\u6765\u4fdd\u8bc1\u5176\u6b63\u5e38\u8fd0\u884c\u3002\u5fc5\u8981\u7684\u65f6\u5019shell\u811a\u672c\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u73af\u5883\u53d8\u91cf\u3002 shell\u53d8\u91cf shell\u53d8\u91cf\u662f\u7531shell\u7a0b\u5e8f\u8bbe\u7f6e\u7684\u7279\u6b8a\u53d8\u91cf\u3002shell\u53d8\u91cf\u4e2d\u6709\u4e00\u90e8\u5206\u662f\u73af\u5883\u53d8\u91cf\uff0c\u6709\u4e00\u90e8\u5206\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u4fdd\u8bc1\u4e86shell\u7684\u6b63\u5e38\u8fd0\u884c \u5185\u90e8\u53d8\u91cf \u00b6 \u5185\u90e8\u53d8\u91cf \u8bf4\u660e $BASH Bash\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6587\u4ef6\u7684\u8def\u5f84 $BASH_ENV \u8be5\u73af\u5883\u53d8\u91cf\u4fdd\u5b58\u4e00\u4e2aBash\u542f\u52a8\u6587\u4ef6\u8def\u5f84\uff0c\u5f53\u542f\u52a8\u4e00\u4e2a\u811a\u672c\u7a0b\u5e8f\u65f6\u4f1a\u53bb\u8bfb\u8be5\u73af\u5883\u53d8\u91cf\u6307\u5b9a\u7684\u6587\u4ef6\u3002 $BASH_SUBSHELL \u4e00\u4e2a\u6307\u793a\u5b50shell(subshell)\u7b49\u7ea7\u7684\u53d8\u91cf\u3002\u5b83\u662fBash\u7248\u672c3\u65b0\u52a0\u5165\u7684\u3002 $BASH_VERSINFO[n] \u8fd9\u4e2a\u6570\u7ec4\u542b\u67096\u4e2a\u5143\u7d20\uff0c\u6307\u793a\u4e86\u5b89\u88c5\u7684Bash\u7248\u672c\u7684\u4fe1\u606f\u3002\u5b83\u548c$BASH_VERSION\u76f8\u4f3c\uff0c\u4f46\u5b83\u4eec\u8fd8\u662f\u6709\u4e00\u4e9b\u5c0f\u5c0f\u7684\u4e0d\u540c\u3002 $BASH_VERSION \u5b89\u88c5\u5728\u7cfb\u7edf\u91cc\u7684Bash\u7248\u672c\u3002 $DIRSTACK \u5728\u76ee\u5f55\u5806\u6808\u91cc\u9762\u6700\u9876\u7aef\u7684\u503c(\u5b83\u53d7pushd\u548cpopd\u7684\u63a7\u5236) $EDITOR \u7531\u811a\u672c\u8c03\u7528\u7684\u9ed8\u8ba4\u7684\u7f16\u8f91\u5668\uff0c\u4e00\u822c\u662fvi\u6216\u662femacs\u3002 $EUID \u6709\u6548\u7528\u6237ID $FUNCNAME \u5f53\u524d\u51fd\u6570\u7684\u540d\u5b57 $GLOBIGNORE \u7531\u901a\u914d\u7b26(globbing)\u6269\u5c55\u7684\u4e00\u5217\u6587\u4ef6\u540d\u6a21\u5f0f\u3002 $GROUPS \u76ee\u524d\u7528\u6237\u6240\u5c5e\u7684\u7ec4 $HOME \u7528\u6237\u7684\u5bb6\u76ee\u5f55\uff0c\u901a\u5e38\u662f/home/username $HOSTNAME \u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u7531\u4e00\u4e2a\u521d\u59cb\u5316\u811a\u672c\u4e2d\u7528hostname\u547d\u4ee4\u7ed9\u7cfb\u7edf\u6307\u6d3e\u4e00\u4e2a\u540d\u5b57\u3002\u7136\u800c\uff0cgethostname()\u51fd\u6570\u80fd\u8bbe\u7f6eBash\u5185\u90e8\u53d8\u91cfE$HOSTNAME\u3002 $HOSTTYPE \u673a\u5668\u7c7b\u578b\uff0c\u50cf$MACHTYPE\u4e00\u6837\u6807\u8bc6\u7cfb\u7edf\u786c\u4ef6\u3002 $IFS \u5185\u90e8\u5b57\u6bb5\u5206\u9694\u7b26 $IGNOREEOF \u5ffd\u7565EOF\uff1a\u5728\u9000\u51fa\u63a7\u5236\u53f0\u524d\u6709\u591a\u5c11\u6587\u4ef6\u7ed3\u5c3e\u6807\u8bc6\uff08end-of-files,control-D\uff09\u4f1a\u88abshell\u5ffd\u7565\u3002 $LC_COLLATE \u5b83\u5e38\u5e38\u5728.bashrc\u6216/etc/profile\u6587\u4ef6\u91cc\u88ab\u8bbe\u7f6e\uff0c\u5b83\u63a7\u5236\u6587\u4ef6\u540d\u6269\u5c55\u548c\u6a21\u5f0f\u5339\u914d\u7684\u5c55\u5f00\u987a\u5e8f\u3002 $LINENO \u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u5728\u672cshell\u811a\u672c\u4e2d\u8be5\u53d8\u91cf\u51fa\u73b0\u65f6\u6240\u5728\u7684\u884c\u6570\u3002\u5b83\u53ea\u5728\u811a\u672c\u4e2d\u5b83\u51fa\u73b0\u65f6\u6709\u610f\u4e49\uff0c\u5b83\u4e00\u822c\u53ef\u7528\u4e8e\u8c03\u8bd5\u3002 $MACHTYPE \u673a\u5668\u7c7b\u578b\uff0c\u8bc6\u522b\u7cfb\u7edf\u7684\u786c\u4ef6\u7c7b\u578b\u3002 $OLDPWD \u4e0a\u4e00\u6b21\u5de5\u4f5c\u7684\u76ee\u5f55(\"OLD-print-working-directory\",\u4f60\u4e0a\u4e00\u6b21\u8fdb\u5165\u5de5\u4f5c\u7684\u76ee\u5f55) $TZ \u65f6\u533a $MAILCHECK \u6bcf\u9694\u591a\u5c11\u79d2\u68c0\u67e5\u662f\u5426\u6709\u65b0\u7684\u4fe1\u4ef6 $OSTYPE \u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b $MANPATH man \u6307\u4ee4\u7684\u641c\u5bfb\u8def\u5f84 $PATH \u53ef\u6267\u884c\u7a0b\u5e8f\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\u3002\u4e00\u822c\u6709/usr/bin/, /usr/X11R6/bin/, /usr/local/bin,\u7b49\u7b49\u3002 $PIPESTATUS \u6b64\u6570\u7ec4\u53d8\u91cf\u4fdd\u5b58\u4e86\u6700\u540e\u6267\u884c\u7684\u524d\u53f0\u7ba1\u9053\u7684\u9000\u51fa\u72b6\u6001\u3002\u76f8\u5f53\u6709\u8da3\u7684\u662f\uff0c\u5b83\u4e0d\u4e00\u5b9a\u548c\u6700\u540e\u6267\u884c\u7684\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u4e00\u6837\u3002 $PPID \u4e00\u4e2a\u8fdb\u7a0b\u7684$PPID\u53d8\u91cf\u4fdd\u5b58\u5b83\u7684\u7236\u8fdb\u7a0b\u7684\u8fdb\u7a0bID(pid)\u3002\u7528\u8fd9\u4e2a\u53d8\u91cf\u548cpidof\u547d\u4ee4\u6bd4\u8f83\u3002 $PROMPT_COMMAND \u8fd9\u4e2a\u53d8\u91cf\u5728\u4e3b\u63d0\u793a\u7b26\u524d($PS1\u663e\u793a\u4e4b\u524d)\u6267\u884c\u5b83\u7684\u503c\u91cc\u4fdd\u5b58\u7684\u547d\u4ee4\u3002 $PS1 \u8fd9\u662f\u4e3b\u63d0\u793a\u7b26\uff08\u7b2c\u4e00\u63d0\u793a\u7b26\uff09\uff0c\u5b83\u80fd\u5728\u547d\u4ee4\u884c\u4e0a\u770b\u89c1\u3002 $PS2 \u526f\u63d0\u793a\u7b26\uff08\u7b2c\u4e8c\u63d0\u793a\u7b26\uff09\uff0c\u5b83\u5728\u671f\u671b\u6709\u9644\u52a0\u7684\u8f93\u5165\u65f6\u80fd\u770b\u89c1\u3002\u5b83\u663e\u793a\u50cf\">\"\u7684\u63d0\u793a\u3002 $PS3 \u7b2c\u4e09\u63d0\u793a\u7b26\u3002\u5b83\u5728\u4e00\u4e2aselect\u5faa\u73af\u91cc\u663e\u793a (\u53c2\u8003\u4f8b\u5b50 10-29)\u3002 $PS4 \u7b2c\u56db\u63d0\u793a\u7b26\uff0c\u5b83\u5728\u7528-x\u9009\u9879\u8c03\u7528\u4e00\u4e2a\u811a\u672c\u65f6\u7684\u8f93\u51fa\u7684\u6bcf\u4e00\u884c\u5f00\u5934\u663e\u793a\u3002\u5b83\u901a\u5e38\u663e\u793a\u50cf\"+\"\u7684\u63d0\u793a\u3002 $PWD \u5de5\u4f5c\u76ee\u5f55(\u5373\u4f60\u73b0\u5728\u6240\u5904\u7684\u76ee\u5f55) \uff0c\u5b83\u7c7b\u4f3c\u4e8e\u5185\u5efa\u547d\u4ee4pwd\u3002 $REPLY \u6ca1\u6709\u53d8\u91cf\u63d0\u4f9b\u7ed9read\u547d\u4ee4\u65f6\u7684\u9ed8\u8ba4\u53d8\u91cf\uff0e\u8fd9\u4e5f\u9002\u7528\u4e8eselect\u547d\u4ee4\u7684\u76ee\u5f55\uff0c\u4f46\u53ea\u662f\u63d0\u4f9b\u88ab\u9009\u62e9\u7684\u53d8\u91cf\u9879\u76ee\u7f16\u53f7\u800c\u4e0d\u662f\u53d8\u91cf\u672c\u8eab\u7684\u503c\u3002 $SECONDS \u811a\u672c\u5df2\u8fd0\u884c\u7684\u79d2\u6570\u3002 $SHELLOPTS \u5df2\u7ecf\u6fc0\u6d3b\u7684shell\u9009\u9879\u5217\u8868\uff0c\u5b83\u662f\u4e00\u4e2a\u53ea\u8bfb\u53d8\u91cf\u3002 $SHLVL SHELL\u7684\u5d4c\u5957\u7ea7\u522b\uff0e\u6307\u793a\u4e86Bash\u88ab\u5d4c\u5957\u4e86\u591a\u6df1\uff0e\u5728\u547d\u4ee4\u884c\u91cc\uff0c$SHLVL\u662f1\uff0c\u56e0\u6b64\u5728\u4e00\u4e2a\u811a\u672c\u91cc\uff0c\u5b83\u662f2 $TMOUT \u5982\u679c$TMOUT\u73af\u5883\u53d8\u91cf\u88ab\u8bbe\u4e3a\u975e\u96f6\u503c\u65f6\u95f4\u503ctime\uff0c\u90a3\u4e48\u7ecf\u8fc7time\u8fd9\u4e48\u957f\u7684\u65f6\u95f4\u540e\uff0cshell\u63d0\u793a\u7b26\u4f1a\u8d85\u65f6\uff0e\u8fd9\u5c06\u4f7f\u6b64shell\u9000\u51fa\u767b\u5f55 $UID \u7528\u6237ID\u53f7\uff0c\u8fd9\u662f\u5f53\u524d\u7528\u6237\u7684\u7528\u6237\u6807\u8bc6\u53f7\uff0c\u5b83\u5728/etc/passwd\u6587\u4ef6\u4e2d\u8bb0\u5f55\u3002 \u4f4d\u7f6e\u53c2\u6570 \u00b6 \u53c2\u6570\u5904\u7406 \u8bf4\u660e $# \u4f20\u9012\u5230\u811a\u672c\u7684\u53c2\u6570\u4e2a\u6570 $* \u4ee5\u4e00\u4e2a\u5355\u5b57\u7b26\u4e32\u663e\u793a\u6240\u6709\u5411\u811a\u672c\u4f20\u9012\u7684\u53c2\u6570\u3002\u5982\"\u2217\"\u7528\u300c\"\u300d\u62ec\u8d77\u6765\u7684\u60c5\u51b5\u3001\u4ee5\"1 2\u2026n\"\u7684\u5f62\u5f0f\u8f93\u51fa\u6240\u6709\u53c2\u6570\u3002 $$ \u811a\u672c\u8fd0\u884c\u7684\u5f53\u524d\u8fdb\u7a0bID\u53f7 $! \u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u7684ID\u53f7 $@ \u4e0e\u2217\u76f8\u540c\uff0c\u4f46\u662f\u4f7f\u7528\u65f6\u52a0\u5f15\u53f7\uff0c\u5e76\u5728\u5f15\u53f7\u4e2d\u8fd4\u56de\u6bcf\u4e2a\u53c2\u6570\u3002\u5982\"@\"\u7528\u300c\"\u300d\u62ec\u8d77\u6765\u7684\u60c5\u51b5\u3001\u4ee5\"1\"\"2\" \u2026 \"$n\" \u7684\u5f62\u5f0f\u8f93\u51fa\u6240\u6709\u53c2\u6570\u3002 $- \u663e\u793aShell\u4f7f\u7528\u7684\u5f53\u524d\u9009\u9879\uff0c\u4e0eset\u547d\u4ee4\u529f\u80fd\u76f8\u540c\u3002 $? \u663e\u793a\u6700\u540e\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u30020\u8868\u793a\u6ca1\u6709\u9519\u8bef\uff0c\u5176\u4ed6\u4efb\u4f55\u503c\u8868\u660e\u6709\u9519\u8bef\u3002 \u53c2\u6570\u66ff\u6362 \u00b6 ** \\({parameter}**\uff1a\u548c\\) parameter\u662f\u76f8\u540c\u7684\uff0c\u90fd\u662f\u8868\u793a\u53d8\u91cfparameter\u7684\u503c\uff0c\u53ef\u4ee5\u628a\u53d8\u91cf\u548c\u5b57\u7b26\u4e32\u8fde\u63a5\u3002 your_id = ${ USER } -on- ${ HOSTNAME } echo \" $your_id \" # echo \"Old \\$PATH = $PATH \" PATH = ${ PATH } :/opt/bin #\u5728\u811a\u672c\u7684\u751f\u5b58\u671f\u5185\uff0c\u80fd\u989d\u5916\u589e\u52a0\u8def\u5f84/opt/bin\u5230\u73af\u5883\u53d8\u91cf$PATH\u4e2d\u53bb. echo \"New \\$PATH = $PATH \" ${parameter-default}, ${parameter:-default} \uff1a\u5982\u679c\u53d8\u91cf\u6ca1\u6709\u88ab\u8bbe\u7f6e\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 ${parameter-default} \u548c ${parameter:-default} \u51e0\u4e4e\u662f\u76f8\u7b49\u7684\u3002\u5b83\u4eec\u4e4b\u95f4\u7684\u5dee\u522b\u662f\uff1a\u5f53\u4e00\u4e2a\u53c2\u6570\u5df2\u88ab\u58f0\u660e\uff0c\u4f46\u662f\u503c\u662fNULL\u7684\u65f6\u5019\u4e24\u8005\u4e0d\u540c\u3002 echo ${ username - ` whoami ` } # \u5982\u679c\u53d8\u91cf$username\u8fd8\u6ca1\u6709\u88ab\u8bbe\u7f6e\uff0c\u5219\u628a\u547d\u4ee4`whoami`\u7684\u7ed3\u679c\u8d4b\u7ed9\u8be5\u53d8\u91cf ${parameter=default}, ${parameter:=default} \uff1a\u5982\u679c\u53d8\u91cfparameter\u6ca1\u6709\u8bbe\u7f6e\uff0c\u628a\u5b83\u8bbe\u7f6e\u6210\u9ed8\u8ba4\u503c\u3002\u9664\u4e86\u5f15\u8d77\u7684\u5f53\u53d8\u91cf\u88ab\u58f0\u660e\u4e14\u503c\u662f\u7a7a\u503c\u65f6\u6709\u4e9b\u4e0d\u540c\u5916\uff0c\u4e24\u79cd\u5f62\u5f0f\u51e0\u4e4e\u76f8\u7b49\u3002 echo \"===== \\${parameter+alt_value} =====\" echo a = ${ param1 +xyz } ; echo \"a = $a \" # a = param2 = a = ${ param2 +xyz } echo \"a = $a \" # a = xyz param3 = 123 a = ${ param3 +xyz } echo \"a = $a \" # a = xyz echo echo \"====== \\${parameter:+alt_value} ======\" a = ${ param4 :+xyz } echo \"a = $a \" # a = param5 = a = ${ param5 :+xyz } echo \"a = $a \" # a = # \u4ea7\u751f\u4e0ea=${param5+xyz}\u4e0d\u540c\u3002 param6 = 123 a = ${ param6 +xyz } echo \"a = $a \" # a = xyz ${parameter?err_msg}, ${parameter:?err_msg} \uff1a\u5982\u679c\u53d8\u91cfparameter\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u8be5\u503c\uff0c\u5426\u5219\u6253\u5370err_msg\u9519\u8bef\u4fe1\u606f\u3002 demo20 #!/bin/bash # \u53d8\u91cf\u66ff\u6362\u548c\"usage\"\u4fe1\u606f : ${ 1 ? \"Usage: $0 ARGUMENT\" } # \u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u547d\u4ee4\u884c\u53c2\u6570\u5219\u811a\u672c\u5728\u8fd9\u513f\u5c31\u9000\u51fa\u4e86, #+ \u5e76\u6253\u5370\u4e86\u9519\u8bef\u4fe1\u606f. # usage-message.sh: 1: Usage: usage-message.sh ARGUMENT echo \"These two lines echo only if command-line parameter given.\" echo \"command line parameter = \\\" $1 \\\"\" exit 0 # \u4ec5\u5728\u547d\u4ee4\u884c\u53c2\u6570\u63d0\u4f9b\u65f6\uff0c\u624d\u4f1a\u5728\u8fd9\u513f\u9000\u51fa. # \u5206\u522b\u68c0\u67e5\u6709\u547d\u4ee4\u884c\u53c2\u6570\u548c\u6ca1\u6709\u547d\u4ee4\u884c\u53c2\u6570\u65f6\u7684\u9000\u51fa\u72b6\u6001\u3002 # \u5982\u679c\u6709\u547d\u4ee4\u884c\u53c2\u6570,\u5219\"$?\"\u4e3a0. # \u5426\u5219, \"$?\"\u4e3a1. ** \\({#var}**\uff1a\u5b57\u7b26\u4e32\u957f\u5ea6\uff08\u5373\u53d8\u91cf\\) var\u7684\u5b57\u7b26\u4e2a\u6570\uff09\u3002\u5bf9\u4e8e\u6570\u7ec4\u6765\u8bf4\uff0c${#array}\u662f\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5347\u5e8f\u3002 ${#*}\u548c${#@} \u8868\u793a\u4f4d\u7f6e\u53c2\u6570\u7684\u4e2a\u6570\u3002\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\u6765\u8bf4\uff0c ${#array[*]} \u548c ${#array[@]} \u8868\u793a\u6570\u7ec4\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\u3002 E_NO_ARGS = 65 if [ $# -eq 0 ] # \u5fc5\u987b\u8981\u6709\u547d\u4ee4\u884c\u53c2\u6570\u7ed9\u8fd9\u4e2a\u6f14\u793a\u7a0b\u5e8f. then echo \"Please invoke this script with one or more command-line arguments.\" exit $E_NO_ARGS fi var01 = abcdEFGH28ij echo \"var01 = ${ var01 } \" echo \"Length of var01 = ${# var01 } \" # \u73b0\u5728,\u8ba9\u6211\u4eec\u5728\u53d8\u91cf\u503c\u5185\u5d4c\u5165\u4e00\u4e2a\u7a7a\u683c. var02 = \"abcd EFGH28ij\" echo \"var02 = ${ var02 } \" echo \"Length of var02 = ${# var02 } \" echo \"Number of command-line arguments passed to script = ${# @ } \" echo \"Number of command-line arguments passed to script = ${# * } \" exit 0 ${var##Pattern} \uff1a\u5220\u9664\u4ece \\(var\u524d\u7aef\u5f00\u59cb\u7684\u6700\u77ed\u6216\u6700\u957f\u5339\u914d\\) Pattern\u7684\u5b57\u7b26\u4e32\u3002 demo22 echo ` basename $PWD ` # \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u57fa\u672c\u540d\u5b57. echo \" ${ PWD ##*/ } \" # \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u57fa\u672c\u540d\u5b57. echo echo ` basename $0 ` # \u811a\u672c\u540d. echo $0 # \u811a\u672c\u540d. echo \" ${ 0 ##*/ } \" # \u811a\u672c\u540d. echo filename = test.data echo \" ${ filename ##*. } \" # data # \u6587\u4ef6\u7684\u6269\u5c55\u540d. declare/typeset \u00b6 declare\u6216typeset\u5185\u5efa\u547d\u4ee4(\u5b83\u4eec\u662f\u5b8c\u5168\u76f8\u540c\u7684)\u53ef\u4ee5\u7528\u6765\u9650\u5b9a\u53d8\u91cf\u7684\u5c5e\u6027\u3002\u8fd9\u662f\u5728\u67d0\u4e9b\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4f7f\u7528\u7684\u5b9a\u4e49\u7c7b\u578b\u4e0d\u4e25\u683c\u7684\u65b9\u5f0f\u3002 \u547d\u4ee4declare\u662fbash\u7248\u672c2\u4e4b\u540e\u624d\u6709\u7684\u3002 \u547d\u4ee4typeset\u4e5f\u53ef\u4ee5\u5728ksh\u811a\u672c\u4e2d\u8fd0\u884c\u3002 \u9009\u9879 \u7528declare\u6765\u58f0\u660e\u53d8\u91cf\u7c7b\u578b \u53c2\u6570 \u8bf4\u660e \u4f8b\u5b50 -r \u53ea\u8bfb declare -r var1 -i \u6574\u6570 declare -i number;number=3; -a \u6570\u7ec4 declare -a indices -f \u51fd\u6570 declare -f \u4f1a\u5217\u51fa\u6240\u6709\u5728\u6b64\u811a\u672c\u524d\u9762\u5df2\u5b9a\u4e49\u7684\u51fd\u6570 -x export \u51fd\u8fd9\u6837\u5c06\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\u4f5c\u4e3a\u811a\u672c\u7684\u73af\u5883\u53d8\u91cf\u800c\u88ab\u5bfc\u51fa\u3002 declare -x var3 -x var=$value declare\u547d\u4ee4\u5141\u8bb8\u5728\u58f0\u660e\u53d8\u91cf\u7c7b\u578b\u7684\u65f6\u5019\u540c\u65f6\u7ed9\u53d8\u91cf\u8d4b\u503c\u3002 declare -x var3=373 \u53d8\u91cf\u95f4\u63a5\u5f15\u7528 \u00b6 \u5047\u8bbe\u4e00\u4e2a\u53d8\u91cf\u7684\u503c\u662f\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\u3002\u8fd9\u6837\u8981\u5982\u4f55\u624d\u80fd\u4ece\u7b2c\u4e00\u4e2a\u53d8\u91cf\u5904\u91cd\u65b0\u83b7\u5f97\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u503c\uff1f\u4f8b\u5982\uff0c a=letter_of_alphabet \u548c letter_of_alphabet=z \uff0c\u662f\u5426\u80fd\u7531a\u5f15\u7528\u5f97\u5230z ? \u8fd9\u786e\u5b9e\u53ef\u4ee5\u529e\u5230\uff0c\u8fd9\u79cd\u6280\u672f\u88ab\u79f0\u4e3a\u95f4\u63a5\u5f15\u7528\u3002 a = letter_of_alphabet # \u53d8\u91cf\"a\"\u4fdd\u5b58\u7740\u53e6\u5916\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57. letter_of_alphabet = z # \u76f4\u63a5\u5f15\u7528. echo \"a = $a \" # a = letter_of_alphabet # \u95f4\u63a5\u5f15\u7528. eval a = \\$ $a echo \"Now a = $a \" # \u73b0\u5728 a = z exit 0 $RANDOM \u00b6 $RANDOM\u662fBash\u7684\u4e00\u4e2a\u8fd4\u56de\u4f2a\u968f\u673a\u6574\u6570(\u8303\u56f4\u4e3a0 - 32767)\u7684\u5185\u90e8\u51fd\u6570(\u800c\u4e0d\u662f\u4e00\u4e2a\u5e38\u91cf\u6216\u53d8\u91cf)\uff0c\u5b83\u4e0d\u5e94\u8be5\u7528\u4e8e\u4ea7\u751f\u52a0\u5bc6\u7684\u5bc6\u94a5\u3002 demo25 # \u6a21\u62df\u63b7\u9ab0\u5b50. SPOTS = 6 # \u6a21\u9664 6 \u4f1a\u4ea7\u751f 0 - 5 \u4e4b\u95f4\u7684\u503c. # \u7ed3\u679c\u589e1\u4f1a\u4ea7\u751f 1 - 6 \u4e4b\u95f4\u7684\u503c. # \u591a\u8c22Paulo Marcel Coelho Aragao\u7684\u7b80\u5316. die1 = 0 die2 = 0 # \u8fd9\u4f1a\u6bd4\u4ec5\u8bbe\u7f6eSPOTS=7\u4e14\u4e0d\u589e1\u597d?\u4e3a\u4ec0\u4e48\u4f1a\u597d\uff1f\u4e3a\u4ec0\u4e48\u4f1a\u4e0d\u597d? # \u5355\u72ec\u5730\u63b7\u6bcf\u4e2a\u9ab0\u5b50\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u6b63\u786e\u7684\u673a\u7387. let \"die1 = $RANDOM % $SPOTS +1\" # \u63b7\u7b2c\u4e00\u4e2a. let \"die2 = $RANDOM % $SPOTS +1\" # \u63b7\u7b2c\u4e8c\u4e2a. # \u4e0a\u9762\u7684\u7b97\u672f\u5f0f\u4e2d\uff0c\u54ea\u4e2a\u64cd\u4f5c\u7b26\u4f18\u5148\u8ba1\u7b97 -- #+ \u53d6\u6a21 (%) \u8fd8\u662f \u52a0\u6cd5 (+)? let \"throw = $die1 + $die2 \" echo \"Throw of the dice = $throw \" exit 0 \u53cc\u62ec\u53f7\u7ed3\u6784 \u00b6 \u7528 ((...)) \u7ed3\u6784\u6765\u4f7f\u7528C\u98ce\u683c\u64cd\u4f5c\u7b26\u6765\u5904\u7406\u53d8\u91cf\u3002 demo26 (( a = 23 )) # \u4ee5C\u98ce\u683c\u6765\u8bbe\u7f6e\u4e00\u4e2a\u503c\uff0c\u5728\"=\"\u4e24\u8fb9\u53ef\u4ee5\u6709\u7a7a\u683c. echo \"a (initial value) = $a \" (( a++ )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u540e\u81ea\u589e. echo \"a (after a++) = $a \" (( a-- )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u540e\u81ea\u51cf. echo \"a (after a--) = $a \" (( ++a )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u524d\u81ea\u589e. echo \"a (after ++a) = $a \" (( --a )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u524d\u81ea\u51cf. echo \"a (after --a) = $a \" \u8f6c\u4e49\u5b57\u7b26 \u5728\u5355\u4e2a\u5b57\u7b26\u524d\u9762\u7684\u8f6c\u4e49\u7b26 \\ \u544a\u8bc9shell\u4e0d\u5fc5\u7279\u6b8a\u89e3\u91ca\u8fd9\u4e2a\u5b57\u7b26\uff0c\u53ea\u628a\u5b83\u5f53\u6210\u5b57\u9762\u4e0a\u7684\u610f\u601d\u3002\u4f46\u5728\u4e00\u4e9b\u547d\u4ee4\u548c\u8f6f\u4ef6\u5305\u91cc\uff0c\u6bd4\u5982\u8bf4echo\u548csed,\u8f6c\u4e49\u4e00\u4e2a\u5b57\u7b26\u53ef\u80fd\u4f1a\u5f15\u8d77\u4e00\u4e2a\u76f8\u53cd\u7684\u6548\u679c\uff0d\uff0d\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u89e6\u53d1\u90a3\u4e2a\u5b57\u7b26\u7684\u7279\u6b8a\u610f\u601d\u3002 demo13 \\r \u56de\u8f66 \\n \u6362\u884c \\c \u4e0d\u6362\u884c \\t \u6c34\u5e73\u5236\u8868\u7b26 \\v \u5782\u76f4\u5236\u8868\u7b26 \\a \u8868\u793a\u201c\u8b66\u544a\u201d\uff08\u8702\u9e23\u6216\u662f\u95ea\u52a8\uff09 \\\\ \u53cd\u659c\u6760\u5b57\u7b26 \\0ddd \u5c06\u81ea\u8d1f\u8868\u793a\u62101\u52303\u7684\u516b\u8fdb\u5236\u6570\u503c \u9000\u51fa/\u9000\u51fa\u72b6\u6001 \u00b6 $? \u53d8\u91cf\u7528\u4e8e\u6d4b\u8bd5\u811a\u672c\u4e2d\u7684\u547d\u4ee4\u6267\u884c\u7ed3\u679c\u975e\u5e38\u7684\u6709\u7528\u3002 demo14 echo hello echo $? # \u56e0\u4e3a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u6253\u53700\u3002 lskdf # \u65e0\u6548\u547d\u4ee4\u3002 echo $? # \u56e0\u4e3a\u4e0a\u9762\u7684\u65e0\u6548\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u6253\u5370\u4e00\u4e2a\u975e\u96f6\u7684\u503c\u3002 exit 113 # \u8fd4\u56de113\u72b6\u6001\u7801\u7ed9shell\u3002 # \u53ef\u4ee5\u8fd0\u884c\u811a\u672c\u7ed3\u675f\u540e\u7acb\u5373\u6267\u884c\u547d\u4ee4\"echo $?\" \u68c0\u9a8c\u3002 # \u4f9d\u7167\u60ef\u4f8b,\u547d\u4ee4'exit 0'\u8868\u793a\u6267\u884c\u6210\u529f, #+ \u5f53\u4ea7\u751f\u4e00\u4e2a\u975e\u96f6\u9000\u51fa\u503c\u65f6\u8868\u793a\u4e00\u4e2a\u9519\u8bef\u6216\u662f\u53cd\u5e38\u7684\u6761\u4ef6\u3002 \u4e0b\u9762\u8fd9\u4e9b\u9000\u51fa\u72b6\u6001\u7801\uff0c\u7528\u4e8e\u4fdd\u7559(reserved meanings) \u7684\u542b\u4e49\uff0c\u4e0d\u5e94\u8be5\u5728\u7528\u6237\u811a\u672c\u4f7f\u7528\u3002 Exit Code Number Meaning Example Comments 1 Catchall for general errors let \"var1 = 1/0\" Miscellaneous errors, such as \"divide by zero\" 2 Misuse of shell builtins (according to Bash documentation) - Seldom seen, usually defaults to exit code 1 126 Command invoked cannot execute - Permission problem or command is not an executable 127 \"command not found\" - Possible problem with $PATH or a typo 128 Invalid argument to exit exit 3.14159 exit takes only integer args in the range 0 - 255 (see footnote) 128+n Fatal error signal \"n\" kill -9 $PPID of script $? returns 137 (128 + 9) 130 Script terminated by Control-C - Control-C is fatal error signal 2, (130 = 128 + 2, see above) 255* Exit status out of range exit -1 exit takes only integer args in the range 0 - 255 \u6d4b\u8bd5 \u6d4b\u8bd5\u7ed3\u6784 \u00b6 \u4e00\u4e2aif/then\u7ed3\u6784\u80fd\u5305\u542b\u5d4c\u5957\u7684\u6bd4\u8f83\u548c\u6d4b\u8bd5\u3002 echo \"Testing \\\"false\\\"\" if [ \"false\" ] # \"false\"\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32. then echo \"\\\"false\\\" is true.\" #+ \u5b83\u88ab\u6d4b\u8bd5\u4e3a\u771f. else echo \"\\\"false\\\" is false.\" fi # \"false\"\u4e3a\u771f. Else if \u548c elif elif\u662felse if\u7684\u7f29\u5199\u3002\u4f5c\u7528\u662f\u5728\u4e00\u4e2aif/then\u91cc\u5d4c\u5165\u4e00\u4e2a\u5185\u90e8\u7684if/then\u7ed3\u6784\u3002 [[]] \u7ed3\u6784\u6bd4Bash\u7248\u672c\u7684 [] \u66f4\u901a\u7528\u3002\u7528 [[ ... ]] \u6d4b\u8bd5\u7ed3\u6784\u6bd4\u7528 [ ... ] \u66f4\u80fd\u9632\u6b62\u811a\u672c\u91cc\u7684\u8bb8\u591a\u903b\u8f91\u9519\u8bef\u3002\u6bd4\u5982\u8bf4\uff0c && , || , < \u548c > \u64cd\u4f5c\u7b26\u80fd\u5728\u4e00\u4e2a [[]] \u6d4b\u8bd5\u91cc\u901a\u8fc7\uff0c\u4f46\u5728 [] \u7ed3\u6784\u4f1a\u53d1\u751f\u9519\u8bef\u3002 (( )) \u7ed3\u6784\u6269\u5c55\u5e76\u8ba1\u7b97\u4e00\u4e2a\u7b97\u672f\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u5982\u679c\u8868\u8fbe\u5f0f\u503c\u4e3a0\uff0c\u4f1a\u8fd4\u56de1\u6216\u5047\u4f5c\u4e3a\u9000\u51fa\u72b6\u6001\u7801\u3002\u4e00\u4e2a\u975e\u96f6\u503c\u7684\u8868\u8fbe\u5f0f\u8fd4\u56de\u4e00\u4e2a0\u6216\u771f\u4f5c\u4e3a\u9000\u51fa\u72b6\u6001\u7801\u3002\u8fd9\u4e2a\u7ed3\u6784\u548c\u5148\u524dtest\u547d\u4ee4\u53ca [] \u7ed3\u6784\u7684\u8ba8\u8bba\u521a\u597d\u76f8\u53cd\u3002 \u6587\u4ef6\u6d4b\u8bd5\u64cd\u4f5c\u7b26 \u00b6 \u5982\u679c\u4e0b\u9762\u7684\u6761\u4ef6\u6210\u7acb\u8fd4\u56de\u771f\u3002 demo15 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 -e \u6587\u4ef6\u5b58\u5728 -a \u6587\u4ef6\u5b58\u5728\uff0c\u8fd9\u4e2a\u548c-e\u7684\u4f5c\u7528\u4e00\u6837. \u5b83\u662f\u4e0d\u8d5e\u6210\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\u5b83\u7684\u7528\u5904\u4e0d\u5927\u3002 -f \u6587\u4ef6\u662f\u4e00\u4e2a\u666e\u901a\u6587\u4ef6(\u4e0d\u662f\u4e00\u4e2a\u76ee\u5f55\u6216\u662f\u4e00\u4e2a\u8bbe\u5907\u6587\u4ef6) -s \u6587\u4ef6\u5927\u5c0f\u4e0d\u4e3a\u96f6 -d \u6587\u4ef6\u662f\u4e00\u4e2a\u76ee\u5f55 -b \u6587\u4ef6\u662f\u4e00\u4e2a\u5757\u8bbe\u5907(\u8f6f\u76d8\uff0c\u5149\u9a71\uff0c\u7b49\u7b49\u3002) -c \u6587\u4ef6\u662f\u4e00\u4e2a\u5b57\u7b26\u8bbe\u5907(\u952e\u76d8\uff0c\u8c03\u5236\u89e3\u8c03\u5668\uff0c\u58f0\u5361\uff0c\u7b49\u7b49\u3002) -p \u6587\u4ef6\u662f\u4e00\u4e2a\u7ba1\u9053 -h \u6587\u4ef6\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 -L \u6587\u4ef6\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 -S \u6587\u4ef6\u662f\u4e00\u4e2asocket -t \u6587\u4ef6(\u63cf\u8ff0\u7b26)\u4e0e\u4e00\u4e2a\u7ec8\u7aef\u8bbe\u5907\u76f8\u5173\u3002 -r \u6587\u4ef6\u662f\u5426\u53ef\u8bfb (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -w \u6587\u4ef6\u662f\u5426\u53ef\u5199 (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -x \u6587\u4ef6\u662f\u5426\u53ef\u6267\u884c (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -g \u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8bbe\u7f6e-\u7ec4-ID(sgid)\u6807\u8bb0\u88ab\u8bbe\u7f6e\u3002 -u \u6587\u4ef6\u7684\u8bbe\u7f6e-\u7528\u6237-ID(suid)\u6807\u5fd7\u88ab\u8bbe\u7f6e -k \u7c98\u4f4f\u4f4d\u8bbe\u7f6e -N \u6587\u4ef6\u6700\u540e\u4e00\u6b21\u8bfb\u540e\u88ab\u4fee\u6539 f1 -nt f2 \u6587\u4ef6f1\u6bd4f2\u65b0 f1 -ot f2 \u6587\u4ef6f1\u6bd4f2\u65e7 f1 -ef f2 \u6587\u4ef6f1\u548cf2 \u662f\u76f8\u540c\u6587\u4ef6\u7684\u786c\u94fe\u63a5 ! \"\u975e\" -- \u53cd\u8f6c\u4e0a\u9762\u6240\u6709\u6d4b\u8bd5\u7684\u7ed3\u679c(\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u6761\u4ef6\u5219\u8fd4\u56de\u771f)\u3002 \u6ce8\u610f\u26a0\ufe0f -t \u8fd9\u4e2a\u6d4b\u8bd5\u9009\u9879\u53ef\u4ee5\u7528\u4e8e\u68c0\u67e5\u811a\u672c\u4e2d\u662f\u5426\u6807\u51c6\u8f93\u5165 ([ -t 0 ])\u6216\u6807\u51c6\u8f93\u51fa([ -t 1 ])\u662f\u4e00\u4e2a\u7ec8\u7aef\u3002 -g \u5982\u679c\u4e00\u4e2a\u76ee\u5f55\u7684sgid\u6807\u5fd7\u88ab\u8bbe\u7f6e\uff0c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u521b\u5efa\u7684\u6587\u4ef6\u90fd\u5c5e\u4e8e\u62e5\u6709\u6b64\u76ee\u5f55\u7684\u7528\u6237\u7ec4\uff0c\u800c\u4e0d\u5fc5\u662f\u521b\u5efa\u6587\u4ef6\u7684\u7528\u6237\u6240\u5c5e\u7684\u7ec4\u3002\u8fd9\u4e2a\u7279\u6027\u5bf9\u5728\u4e00\u4e2a\u5de5\u4f5c\u7ec4\u91cc\u7684\u540c\u4eab\u76ee\u5f55\u5f88\u6709\u7528\u5904\u3002 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u00b6 \u4e8c\u5143\u6bd4\u8f83\u64cd\u4f5c\u7b26\u6bd4\u8f83\u4e24\u4e2a\u53d8\u91cf\u6216\u662f\u6570\u503c\u3002\u6ce8\u610f\u6574\u6570\u548c\u5b57\u7b26\u4e32\u6bd4\u8f83\u7684\u5206\u522b\u3002 \u6574\u6570\u6bd4\u8f83 demo16 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 -eq \u7b49\u4e8e if [ \"$a\" -eq \"$b\" ] -ne \u4e0d\u7b49\u4e8e if [ \"$a\" -ne \"$b\" ] -gt \u5927\u4e8e if [ \"$a\" -gt \"$b\" ] -ge \u5927\u4e8e\u7b49\u4e8e if [ \"$a\" -ge \"$b\" ] -lt \u5c0f\u4e8e if [ \"$a\" -lt \"$b\" ] -le \u5c0f\u4e8e\u7b49\u4e8e if [ \"$a\" -le \"$b\" ] < \u5c0f\u4e8e(\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" < \"$b\")) <= \u5c0f\u4e8e\u7b49\u4e8e (\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" <= \"$b\")) > \u5927\u4e8e (\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" > \"$b\")) >= \u5927\u4e8e\u7b49\u4e8e(\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" >= \"$b\")) \u5b57\u7b26\u4e32\u6bd4\u8f83 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 = \u7b49\u4e8e if [ \"$a\" = \"$b\" ] == \u7b49\u4e8e\uff0c\u5b83\u548c=\u662f\u540c\u4e49\u8bcd\u3002 if [ \"$a\" == \"$b\" ] != \u4e0d\u76f8\u7b49\uff0c\u64cd\u4f5c\u7b26\u5728[[ ... ]]\u7ed3\u6784\u91cc\u4f7f\u7528\u6a21\u5f0f\u5339\u914d. if [ \"$a\" != \"$b\" ] < \u5c0f\u4e8e\uff0c\u4f9d\u7167ASCII\u5b57\u7b26\u6392\u5217\u987a\u5e8f\uff0c\u6ce8\u610f\"<\"\u5b57\u7b26\u5728[ ] \u7ed3\u6784\u91cc\u9700\u8981\u8f6c\u4e49 if [[ \"$a\" < \"$b\" ]] if [ \"$a\" \\< \"$b\" ] > \u5927\u4e8e\uff0c\u4f9d\u7167ASCII\u5b57\u7b26\u6392\u5217\u987a\u5e8f\uff0c\u6ce8\u610f\">\"\u5b57\u7b26\u5728[ ] \u7ed3\u6784\u91cc\u9700\u8981\u8f6c\u4e49. if [[ \"$a\" > \"$b\" ]] if [ \"$a\" \\> \"$b\" ] -z \u5b57\u7b26\u4e32\u4e3a\"null\"\uff0c\u5373\u662f\u6307\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a\u96f6\u3002 - -n \u5b57\u7b26\u4e32\u4e0d\u4e3a\"null\"\uff0c\u5373\u957f\u5ea6\u4e0d\u4e3a\u96f6\u3002 - \u6df7\u5408\u6bd4\u8f83 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 -a \u903b\u8f91\u4e0e\uff0c\u5982\u679cexp1\u548cexp2\u90fd\u4e3a\u771f\uff0c\u5219exp1 -a exp2\u8fd4\u56de\u771f\u3002 if [ \"$exp1\" -a \"$exp2\" ] -o \u903b\u8f91\u6216\uff0c\u53ea\u8981exp1\u548cexp2\u4efb\u4f55\u4e00\u4e2a\u4e3a\u771f\uff0c\u5219exp1 -o exp2 \u8fd4\u56de\u771f\u3002 if [ \"$exp1\" -o \"$exp2\" ] \u5728\u4e00\u4e2a\u6df7\u5408\u6d4b\u8bd5\u4e2d\uff0c\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u53d8\u91cf\u5f15\u53f7\u5f15\u8d77\u6765\u53ef\u80fd\u8fd8\u4e0d\u591f\u3002\u5982\u679c$string\u53d8\u91cf\u662f\u7a7a\u7684\u8bdd\uff0c\u8868\u8fbe\u5f0f [ -n \"$string\" -o \"$a\" = \"$b\" ] \u5728\u4e00\u4e9bBash\u7248\u672c\u4e2d\u53ef\u80fd\u4f1a\u5f15\u8d77\u9519\u8bef\u3002\u5b89\u5168\u7684\u529e\u6cd5\u662f\u9644\u52a0\u4e00\u4e2a\u5916\u90e8\u7684\u5b57\u7b26\u4e32\u7ed9\u53ef\u80fd\u6709\u7a7a\u5b57\u7b26\u4e32\u53d8\u91cf\u6bd4\u8f83\u7684\u6240\u6709\u53d8\u91cf\uff0c [ \"x$string\" != x -o \"x$a\" = \"x$b\" ] (x\u5b57\u7b26\u53ef\u4ee5\u4e92\u76f8\u62b5\u6d88) \u64cd\u4f5c\u5b57\u7b26\u4e32 \u00b6 Bash\u5df2\u7ecf\u652f\u6301\u4e86\u4ee4\u4eba\u60ca\u8bb6\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u7684\u6570\u91cf\u3002\u4e0d\u4e00\u81f4\u7684\u547d\u4ee4\u8bed\u6cd5\u548c\u5197\u4f59\u7684\u529f\u80fd\uff0c\u5bfc\u81f4\u771f\u7684\u5b66\u8d77\u6765\u6709\u56f0\u96be\u3002 \u5b57\u7b26\u4e32\u957f\u5ea6 \u00b6 String = abcABC123ABCabc echo ${# String } # 15 echo ` expr length $String ` # 15 echo ` expr \" $String \" : '.*' ` # 15 \u5339\u914d\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u5b57\u4e32\u7684\u957f\u5ea6\uff0c\u4e0b\u9762\u4e24\u79cd\u65b9\u6cd5\u7684 $substring \u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 expr match \"$string\" '$substring' expr \"$string\" : '$substring' String = abcABC123ABCabc # \u2514------\u2518 # echo ` expr match \" $String \" 'abc[A-Z]*.2' ` # 8 echo ` expr \" $String \" : 'abc[A-Z]*.2' ` # 8 \u7d22\u5f15 \u00b6 expr index $string $substring \u5728\u5b57\u7b26\u4e32 \\(string\u4e2d\\) substring\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u6570\u5b57\u4f4d\u7f6e String = abcABC123ABCabc echo ` expr index \" $String \" C12 ` # 6 # C \u5b57\u7b26\u7684\u4f4d\u7f6e. echo ` expr index \" $String \" 1c ` # 3 # 'c' (in #3 position) matches before '1'. \u5b57\u4e32\u63d0\u53d6 \u00b6 ${string:position} \u628a \\(string\u4e2d\u4ece\u7b2c\\) postion\u4e2a\u5b57\u7b26\u5f00\u59cb\u5b57\u7b26\u4e32\u63d0\u53d6\u51fa\u6765\u3002\u5982\u679c \\(string\u662f\"*\"\u6216\"@\"\uff0c\u5219\u8868\u793a\u4ece\u4f4d\u7f6e\u53c2\u6570\u4e2d\u63d0\u53d6\u7b2c\\) postion\u540e\u9762\u7684\u5b57\u7b26\u4e32\u3002 ${string:position:length} \u628a \\(string\u4e2d\\) postion\u4e2a\u5b57\u7b26\u540e\u9762\u7684\u957f\u5ea6\u4e3a$length\u7684\u5b57\u7b26\u4e32\u63d0\u53d6\u51fa\u6765\u3002 demo18 # \u5b57\u4e32\u63d0\u53d6 String = abcABC123ABCabc # 0123456789..... # \u4ee50\u5f00\u59cb\u8ba1\u7b97. echo ${ String : 0 } # abcABC123ABCabc echo ${ String : 1 } # bcABC123ABCabc echo ${ String : 7 } # 23ABCabc echo ${ String : 7 : 3 } # 23A # \u63d0\u53d6\u7684\u5b57\u4e32\u957f\u4e3a3 # \u6709\u6ca1\u6709\u53ef\u80fd\u4ece\u5b57\u7b26\u4e32\u7684\u53f3\u8fb9\u7ed3\u5c3e\u5904\u63d0\u53d6? echo ${ String :- 4 } # abcABC123ABCabc # \u9ed8\u8ba4\u662f\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c31\u76f8\u5f53\u4e8e${parameter:-default}. # \u7136\u800c. . . echo ${ String :(-4) } # Cabc echo ${ String : -4 } # Cabc # \u8fd9\u6837,\u5b83\u53ef\u4ee5\u5de5\u4f5c\u4e86. # \u5706\u62ec\u53f7\u6216\u9644\u52a0\u7684\u7a7a\u767d\u5b57\u7b26\u53ef\u4ee5\u8f6c\u4e49$position\u53c2\u6570. \u5b57\u4e32\u79fb\u52a8 \u00b6 ${string#substring} \u4ece \\(string\u5de6\u8fb9\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u77ed\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string##substring} \u4ece \\(string\u5de6\u8fb9\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u957f\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string%substring} \u4ece \\(string\u7ed3\u5c3e\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u77ed\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string%%substring} \u4ece \\(string\u7ed3\u5c3e\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u957f\u5339\u914d\\) substring\u5b50\u4e32\u3002 String = abcABC123ABCabc # \u251c----\u2518 \u2506 # \u2514----------\u2518 echo ${ String #a*C } # 123ABCabc # \u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u77ed\u7684\u5b57\u7b26\u4e32. echo ${ String ##a*C } # abc # \u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u957f\u7684\u5b57\u7b26\u4e32. String = abcABC123ABCabc # \u2506 || # \u2514------------\u2518 echo ${ String %b*c } # abcABC123ABCa # \u4ece$String\u540e\u9762\u5c3e\u90e8\u5f00\u59cb\uff0c\u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u77ed\u7684\u5b57\u7b26\u4e32. echo ${ String %%b*c } # a # \u4ece$String\u540e\u9762\u5c3e\u90e8\u5f00\u59cb\uff0c\u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u957f\u7684\u5b57\u7b26\u4e32. \u7528awk\u5904\u7406\u5b57\u7b26\u4e32 \u00b6 Bash\u811a\u672c\u53ef\u4ee5\u8c03\u7528awk\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u529f\u80fd\u6765\u4ee3\u66ff\u5b83\u81ea\u5df1\u5185\u5efa\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u7b26 String = 23skidoo1 # 012345678 Bash # 123456789 awk # \u6ce8\u610f\u4e0a\u9762\u4e24\u4e2a\u7a0b\u5e8f\u5bf9\u7d22\u5f15\u7684\u4e0d\u540c\u5904\u7406: # Bash\u628a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u6807\u53f7\u79f0\u4e3a'0'\u3002 # Awk\u628a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u6807\u53f7\u79f0\u4e3a'1'\u3002 echo ${ String : 2 : 4 } # position 3 (0-1-2), 4 characters long # skid # \u5728awk\u4e2d\u4e0eBash\u7684${string:pos:length}\u7b49\u540c\u7684\u662fsubstr(string,pos,length)\u3002 echo | awk '{ print substr(\"' \" ${ String } \" '\",3,4) # skid }' # \u7528\u4e00\u4e2a\u7a7a\u7684\"echo\"\u7531\u7ba1\u9053\u4f20\u4e00\u4e2a\u7a7a\u7684\u8f93\u5165\u7ed9awk, #+ \u8fd9\u6837\u5c31\u4e0d\u5fc5\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u540d\u7ed9awk\u3002 exit 0 for/while \u00b6 \u91cd\u590d\u4e00\u4e9b\u547d\u4ee4\u7684\u4ee3\u7801\u5757,\u5982\u679c\u6761\u4ef6\u4e0d\u6ee1\u8db3\u5c31\u9000\u51fa\u5faa\u73af\u3002 for \u00b6 \u5728\u5faa\u73af\u7684\u6bcf\u6b21\u6267\u884c\u4e2d\uff0carg\u5c06\u987a\u5e8f\u7684\u5b58\u53d6list\u4e2d\u5217\u51fa\u7684\u53d8\u91cf\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u5faa\u73af\u7ed3\u6784\u3002 demo27 for arg in [list] do command(s)... done \u6bcf\u4e2a [list] \u4e2d\u7684\u5143\u7d20\u90fd\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u53c2\u6570\uff0c\u5728\u5904\u7406\u53c2\u6570\u7ec4\u65f6\uff0c\u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u4f7f\u7528set\u547d\u4ee4\u6765\u5f3a\u5236\u89e3\u6790\u6bcf\u4e2a [list] \u4e2d\u7684\u5143\u7d20\u3002\u5e76\u4e14\u5206\u914d\u6bcf\u4e2a\u89e3\u6790\u51fa\u6765\u7684\u90e8\u5206\u5230\u4e00\u4e2a\u4f4d\u7f6e\u53c2\u6570\u4e2d\u3002 \u5faa\u73af\u7684\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50 for planet in Mercury Venus Earth Mars Jupiter Saturn Uranus Neptune Pluto do echo $planet # \u6bcf\u4e2a\u884c\u661f\u88ab\u5355\u72ec\u6253\u5370\u5728\u4e00\u884c\u4e0a. done while \u00b6 \u4e00\u4e2awhile\u5faa\u73af\u53ef\u4ee5\u6709\u591a\u4e2a\u5224\u65ad\u6761\u4ef6\uff0c\u4f46\u662f\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u624d\u80fd\u51b3\u5b9a\u662f\u5426\u9000\u51fa\u5faa\u73af\u3002\u7136\u800c\u8fd9\u9700\u8981\u4e00\u79cd\u6709\u70b9\u4e0d\u540c\u7684\u5faa\u73af\u8bed\u6cd5\u3002 while [condition] do command... done # -------------------------- # \u7b80\u5355\u7684while\u5faa\u73af # -------------------------- var0 = 0 LIMIT = 10 while [ \" $var0 \" -lt \" $LIMIT \" ] do echo -n \" $var0 \" # -n \u5c06\u4f1a\u963b\u6b62\u4ea7\u751f\u65b0\u884c\u3002 # ^ \u7a7a\u683c,\u6570\u5b57\u4e4b\u95f4\u7684\u5206\u9694\u3002 var0 = ` expr $var0 + 1 ` # var0=$(($var0+1)) \u4e5f\u53ef\u4ee5\u3002 # var0=$((var0 + 1)) \u4e5f\u53ef\u4ee5\u3002 # let \"var0 += 1\" \u4e5f\u53ef\u4ee5\u3002 done # \u4f7f\u7528\u5176\u4ed6\u7684\u65b9\u6cd5\u4e5f\u884c\u3002 # -------------------------- # \u591a\u6761\u4ef6\u7684while\u5faa\u73af # -------------------------- var1 = unset previous = $var1 while echo \"previous-variable = $previous \" echo previous = $var1 [ \" $var1 \" ! = end ] # \u8bb0\u5f55\u4e4b\u524d\u7684$var1. # \u8fd9\u4e2a\"while\"\u5faa\u73af\u4e2d\u67094\u4e2a\u6761\u4ef6, \u4f46\u662f\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u80fd\u63a7\u5236\u5faa\u73af. # \u9000\u51fa\u72b6\u6001\u7531\u7b2c4\u4e2a\u6761\u4ef6\u51b3\u5b9a. do echo \"Input variable #1 (end to exit) \" read var1 echo \"variable #1 = $var1 \" done exit 0 until \u00b6 \u8fd9\u4e2a\u7ed3\u6784\u5728\u5faa\u73af\u7684\u9876\u90e8\u5224\u65ad\u6761\u4ef6\uff0c\u5e76\u4e14\u5982\u679c\u6761\u4ef6\u4e00\u76f4\u4e3afalse\u90a3\u5c31\u4e00\u76f4\u5faa\u73af\u4e0b\u53bb\u3002(\u4e0ewhile\u76f8\u53cd)\u3002 until [condition-is-true] do command... done \u6ce8\u610f\u26a0\ufe0f until\u5faa\u73af\u7684\u5224\u65ad\u5728\u5faa\u73af\u7684\u9876\u90e8\uff0c\u8fd9\u4e0e\u67d0\u4e9b\u7f16\u7a0b\u8bed\u8a00\u662f\u4e0d\u540c\u7684\u3002 \u4e0efor\u5faa\u73af\u4e00\u6837\uff0c\u5982\u679c\u60f3\u628ado\u548c\u6761\u4ef6\u653e\u5728\u4e00\u884c\u91cc\uff0c\u5c31\u4f7f\u7528\";\"\u3002 until [condition-is-true] ; do END_CONDITION = end until [ \" $var1 \" = \" $END_CONDITION \" ] # \u5728\u5faa\u73af\u7684\u9876\u90e8\u5224\u65ad\u6761\u4ef6. do echo \"Input variable #1 \" echo \"( $END_CONDITION to exit)\" read var1 echo \"variable #1 = $var1 \" done exit 0 \u5d4c\u5957\u5faa\u73af \u00b6 \u5d4c\u5957\u5faa\u73af\u5c31\u662f\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u8fd8\u6709\u4e00\u4e2a\u5faa\u73af\uff0c\u5185\u90e8\u5faa\u73af\u5728\u5916\u90e8\u5faa\u73af\u4f53\u4e2d\u3002 demo28 outer = 1 # \u8bbe\u7f6e\u5916\u90e8\u5faa\u73af\u8ba1\u6570. # \u5f00\u59cb\u5916\u90e8\u5faa\u73af. for a in 1 2 3 4 5 do echo \"Pass $outer in outer loop.\" echo \"---------------------\" inner = 1 # \u91cd\u8bbe\u5185\u90e8\u5faa\u73af\u7684\u8ba1\u6570. # =============================================== # \u5f00\u59cb\u5185\u90e8\u5faa\u73af. for b in 1 2 3 4 5 do echo \"Pass $inner in inner loop.\" let \"inner+=1\" # \u589e\u52a0\u5185\u90e8\u5faa\u73af\u8ba1\u6570. done # \u5185\u90e8\u5faa\u73af\u7ed3\u675f. # =============================================== let \"outer+=1\" # \u589e\u52a0\u5916\u90e8\u5faa\u73af\u7684\u8ba1\u6570. echo # \u6bcf\u6b21\u5916\u90e8\u5faa\u73af\u4e4b\u95f4\u7684\u95f4\u9694. done # \u5916\u90e8\u5faa\u73af\u7ed3\u675f. exit 0 \u5faa\u73af\u63a7\u5236 \u00b6 \u5f71\u54cd\u5faa\u73af\u884c\u4e3a\u7684\u547d\u4ee4 break \uff0c continue \uff0c break\u547d\u4ee4\u5c06\u4f1a\u8df3\u51fa\u5faa\u73af\uff0ccontinue\u547d\u4ee4\u5c06\u4f1a\u8df3\u8fc7\u672c\u6b21\u5faa\u73af\u4e0b\u8fb9\u7684\u8bed\u53e5\uff0c\u76f4\u63a5\u8fdb\u5165\u4e0b\u6b21\u5faa\u73af\u3002 demo29 continue\uff1a continue\u547d\u4ee4\u4e0ebreak\u547d\u4ee4\u7c7b\u4f3c\uff0c\u53ea\u6709\u4e00\u70b9\u5dee\u522b\uff0c\u5b83\u4e0d\u4f1a\u8df3\u51fa\u6240\u6709\u5faa\u73af\uff0c\u4ec5\u4ec5\u8df3\u51fa\u5f53\u524d\u5faa\u73af\u3002 LIMIT = 19 # \u4e0a\u9650 echo \"Printing Numbers 1 through 20 (but not 3 and 11).\" a = 0 while [ $a -le \" $LIMIT \" ] do a = $(( $a + 1 )) if [ \" $a \" -eq 3 ] || [ \" $a \" -eq 11 ] # Excludes 3 and 11. then continue # \u8df3\u8fc7\u672c\u6b21\u5faa\u73af\u5269\u4e0b\u7684\u8bed\u53e5. fi echo -n \" $a \" # \u5728$a\u7b49\u4e8e3\u548c11\u7684\u65f6\u5019,\u8fd9\u53e5\u5c06\u4e0d\u4f1a\u6267\u884c. done break\uff1a break\u547d\u4ee4\u5141\u8bb8\u8df3\u51fa\u6240\u6709\u5faa\u73af\uff08\u7ec8\u6b62\u6267\u884c\u540e\u9762\u7684\u6240\u6709\u5faa\u73af\uff09\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u811a\u672c\u8fdb\u5165\u6b7b\u5faa\u73af\u76f4\u81f3\u7528\u6237\u8f93\u5165\u6570\u5b57\u5927\u4e8e5\u3002\u8981\u8df3\u51fa\u8fd9\u4e2a\u5faa\u73af\uff0c\u8fd4\u56de\u5230shell\u63d0\u793a\u7b26\u4e0b\uff0c\u5c31\u8981\u4f7f\u7528break\u547d\u4ee4\u3002 while : do echo -n \"Input a number between 1 to 5: \" read aNum case $aNum in 1 | 2 | 3 | 4 | 5 ) echo \"Your number is $aNum !\" ;; * ) echo \"You do not select a number between 1 to 5, game is over!\" break ;; esac done \u26a0\ufe0f \u5728\u5d4c\u5957\u5faa\u73af\u4e2d\uff0cbreak \u547d\u4ee4\u540e\u9762\u8fd8\u53ef\u4ee5\u8ddf\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u8df3\u51fa\u7b2c\u51e0\u5c42\u5faa\u73af\u3002\u4f8b\u5982\uff1a break n #\u8868\u793a\u8df3\u51fa\u7b2c n \u5c42\u5faa\u73af\u3002 case/select \u00b6 case/select\u4f9d\u9760\u5728\u4ee3\u7801\u5757\u7684\u9876\u90e8\u6216\u5e95\u90e8\u7684\u6761\u4ef6\u5224\u65ad\u6765\u51b3\u5b9a\u7a0b\u5e8f\u7684\u5206\u652f\u3002 case \u00b6 case\u5b83\u5141\u8bb8\u901a\u8fc7\u5224\u65ad\u6765\u9009\u62e9\u4ee3\u7801\u5757\u4e2d\u591a\u6761\u8def\u5f84\u4e2d\u7684\u4e00\u6761\u3002\u5b83\u7684\u4f5c\u7528\u548c\u591a\u4e2aif/then/else\u8bed\u53e5\u76f8\u540c\uff0c\u662f\u5b83\u4eec\u7684\u7b80\u5316\u7ed3\u6784\uff0c\u7279\u522b\u9002\u7528\u4e8e\u521b\u5efa\u76ee\u5f55\u3002 demo30 case \" \\(variable\" in ?\"\\) condition1\" ) ?command... ?;; ?\"$condition2\" ) ?command... ?;; esac \u5bf9\u53d8\u91cf\u4f7f\u7528 \"\" \u5e76\u4e0d\u662f\u5f3a\u5236\u7684\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u53d1\u751f\u5355\u8bcd\u5206\u79bb\u3002 \u6bcf\u53e5\u6d4b\u8bd5\u884c\uff0c\u90fd\u4ee5\u53f3\u5c0f\u62ec\u53f7 ) \u7ed3\u5c3e\u3002 \u6bcf\u4e2a\u6761\u4ef6\u5757\u90fd\u4ee5\u4e24\u4e2a\u5206\u53f7\u7ed3\u5c3e ;; \u3002 case\u5757\u7684\u7ed3\u675f\u4ee5esac(case\u7684\u53cd\u5411\u62fc\u5199)\u7ed3\u5c3e\u3002 clear # \u6e05\u5c4f. echo \" \u6211\u7684\u7b80\u5386\" echo \" ------- \" echo \"\u4e0b\u9762\u901a\u8fc7shell\u811a\u672c\u8f93\u51fa\u6211\u7684\u7b80\u5386\" echo echo \"[B]asicinfo, \u57fa\u672c\u4fe1\u606f\" echo \"[E]ducation, \u6559\u80b2\u7ecf\u5386\" echo \"[I]tskill, IT \u6280\u80fd\" echo read person case \" $person \" in # \u6ce8\u610f,\u53d8\u91cf\u662f\u88ab\u5f15\u7528\u7684. \"B\" | \"b\" ) # \u63a5\u53d7\u5927\u5199\u6216\u5c0f\u5199\u8f93\u5165. echo echo \"\u5c0f\u5f1f\u8c03\u8c03\" echo \"\u624b \u673a : 136*****13\" echo \"E-mail :wowohoo@qq.com\" echo \"\u9996 \u9875 : http://JSLite.io\" ;; # \u6ce8\u610f,\u5728\u6bcf\u4e2a\u9009\u9879\u540e\u8fb9\u90fd\u9700\u8981\u4ee5;;\u7ed3\u5c3e. \"E\" | \"e\" ) # \u63a5\u53d7\u5927\u5199\u6216\u5c0f\u5199\u8f93\u5165. echo \"\u25a0 2003\u5e749\u6708 \u5230 2006\u5e748\u6708\" echo \"----------------------------\" echo \"\u203a \u5b66\u6821 : \u91ce\u9e1f\u9ad8\u4e2d\" echo \"\u203a \u4e13\u4e1a : \u827a\u672f\u7c7b\" echo \"\u203a \u5b66\u5386 : \u9ad8\u4e2d\" ;; # \u540e\u8fb9\u7684[I]tskill\u7684\u4fe1\u606f\u5728\u8fd9\u91cc\u5c31\u7701\u7565\u4e86. * ) # \u9ed8\u8ba4\u9009\u9879. # \u7a7a\u8f93\u5165(\u6572RETURN). echo echo \"\u6ca1\u6709\u6570\u636e\uff01\" ;; esac exit 0 select \u00b6 select\u7ed3\u6784\u662f\u5efa\u7acb\u83dc\u5355\u7684\u53e6\u4e00\u79cd\u5de5\u5177\uff0c\u8fd9\u79cd\u7ed3\u6784\u662f\u4eceksh\u4e2d\u5f15\u5165\u7684\u3002 select variable [in list] do ?command... ?break done \u7528select\u6765\u521b\u5efa\u83dc\u5355 PS3 = '\u9009\u62e9\u4f60\u559c\u6b22\u7684\u852c\u83dc: ' # \u8bbe\u7f6e\u63d0\u793a\u7b26\u5b57\u4e32. echo select vegetable in \"\u8c46\" \"\u80e1\u841d\u535c\" \"\u571f\u8c46\" \"\u6d0b\u8471\" \"\u829c\u83c1\u7518\u84dd\" do echo echo \"\u4f60\u6700\u559c\u6b22\u7684\u852c\u83dc\u662f $vegetable \u3002\" echo \"\u8ba8\u538c!\" echo break # \u5982\u679c\u8fd9\u91cc\u6ca1\u6709'break'\u4f1a\u53d1\u751f\u4ec0\u4e48? done exit 0 \u5982\u679c\u5ffd\u7565\u4e86in list\u5217\u8868,\u90a3\u4e48select\u547d\u4ee4\u5c06\u4f7f\u7528\u4f20\u9012\u5230\u811a\u672c\u7684\u547d\u4ee4\u884c\u53c2\u6570($@),\u6216\u8005\u662f\u51fd\u6570\u53c2\u6570(\u5f53select\u662f\u5728\u51fd\u6570\u4e2d\u65f6\uff09\u4e0e\u5ffd\u7565in list\u65f6\u7684for\u8bed\u53e5\u76f8\u6bd4\u8f83\uff1a for variable [in list] PS3 = '\u9009\u62e9\u4f60\u559c\u6b22\u7684\u852c\u83dc: ' echo choice_of (){ select vegetable # [in list] \u88ab\u5ffd\u7565, \u6240\u4ee5'select'\u7528\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u53c2\u6570. do echo echo \"\u4f60\u6700\u559c\u6b22\u7684\u852c\u83dc\u662f $vegetable \u3002\" echo \"\u8ba8\u538c!\" echo break done } choice_of \"\u8c46\" \"\u7c73\u996d\" \"\u80e1\u841d\u535c\" \"\u571f\u8c46\" \"\u6d0b\u8471\" \"\u829c\u83c1\u7518\u84dd\" # $1 $2 $3 $4 $5 $6 # \u4f20\u9012\u7ed9choice_of() \u51fd\u6570\u7684\u53c2\u6570 exit 0 \u51fd\u6570 \u00b6 \u548c\"\u771f\u6b63\u7684\"\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837\uff0cBash\u4e5f\u6709\u51fd\u6570\uff0c\u867d\u7136\u5728\u67d0\u4e9b\u5b9e\u73b0\u65b9\u9762\u7a0d\u6709\u4e9b\u9650\u5236\u3002 \u4e00\u4e2a\u51fd\u6570\u662f\u4e00\u4e2a\u5b50\u7a0b\u5e8f\uff0c\u7528\u4e8e\u5b9e\u73b0\u4e00\u4e32\u64cd\u4f5c\u7684\u4ee3\u7801\u5757(code block)\uff0c\u5b83\u662f\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u7684\"\u9ed1\u76d2\u5b50\"\u3002 \u5f53\u6709\u91cd\u590d\u4ee3\u7801\uff0c\u5f53\u4e00\u4e2a\u4efb\u52a1\u53ea\u9700\u8981\u5f88\u5c11\u7684\u4fee\u6539\u5c31\u88ab\u91cd\u590d\u51e0\u6b21\u6267\u884c\u65f6, \u8fd9\u65f6\u4f60\u5e94\u8003\u8651\u4f7f\u7528\u51fd\u6570\u3002 demo33 function function_name { command... } # \u6216 function_name () { command... } \u5728\u4e00\u4e2a\u51fd\u6570\u5185\u5d4c\u5957\u53e6\u4e00\u4e2a\u51fd\u6570\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u4e0d\u5e38\u7528\u3002 f1 (){ f2 (){ # nested echo \"Function \\\"f2\\\", inside \\\"f1\\\".\" } } f2 # \u5f15\u8d77\u9519\u8bef. # \u5c31\u662f\u4f60\u5148\"declare -f f2\"\u4e86\u4e5f\u6ca1\u7528. f1 # \u4ec0\u4e48\u4e5f\u4e0d\u505a,\u56e0\u4e3a\u8c03\u7528\"f1\"\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\"f2\". f2 # \u73b0\u5728,\u53ef\u4ee5\u6b63\u786e\u7684\u8c03\u7528\"f2\"\u4e86, #+ \u56e0\u4e3a\u4e4b\u524d\u8c03\u7528\"f1\"\u4f7f\"f2\"\u5728\u811a\u672c\u4e2d\u53d8\u5f97\u53ef\u89c1\u4e86. \u5c40\u90e8\u53d8\u91cf \u00b6 \u5982\u679c\u53d8\u91cf\u7528local\u6765\u58f0\u660e\uff0c\u90a3\u4e48\u5b83\u53ea\u80fd\u5728\u8be5\u53d8\u91cf\u58f0\u660e\u7684\u4ee3\u7801\u5757(block of code)\u4e2d\u53ef\u89c1\uff0c\u8fd9\u4e2a\u4ee3\u7801\u5757\u5c31\u662f\u5c40\u90e8\"\u8303\u56f4\"\u3002 # \u5728\u51fd\u6570\u5185\u90e8\u7684\u5168\u5c40\u548c\u5c40\u90e8\u53d8\u91cf. func () { local loc_var = 23 # \u58f0\u660e\u4e3a\u5c40\u90e8\u53d8\u91cf. echo # \u4f7f\u7528\u5185\u5efa\u7684'local'\u5173\u952e\u5b57. echo \"\\\"loc_var\\\" in function = $loc_var \" global_var = 999 # \u6ca1\u6709\u58f0\u660e\u4e3a\u5c40\u90e8\u53d8\u91cf. # \u9ed8\u8ba4\u4e3a\u5168\u5c40\u53d8\u91cf. echo \"\\\"global_var\\\" in function = $global_var \" } func # \u73b0\u5728\uff0c\u6765\u770b\u770b\u662f\u5426\u5c40\u90e8\u53d8\u91cf\"loc_var\"\u80fd\u5426\u5728\u51fd\u6570\u5916\u9762\u53ef\u89c1. echo \"\\\"loc_var\\\" outside function = $loc_var \" # $loc_var outside function = # \u4e0d, $loc_var\u4e0d\u662f\u5168\u5c40\u53ef\u8bbf\u95ee\u7684. echo \"\\\"global_var\\\" outside function = $global_var \" # $global_var outside function = 999 # $global_var \u662f\u5168\u5c40\u53ef\u8bbf\u95ee\u7684. exit 0 # \u4e0eIn contrast to C\u76f8\u6bd4, \u5728\u51fd\u6570\u5185\u58f0\u660e\u7684Bash\u53d8\u91cf\u53ea\u6709\u5728 #+ \u5b83\u88ab\u660e\u786e\u58f0\u660e\u6210\u5c40\u90e8\u7684\u53d8\u91cf\u65f6\u624d\u662f\u5c40\u90e8\u7684 \u26a0\ufe0f \uff1a\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u524d\uff0c\u6240\u6709\u5728\u51fd\u6570\u5185\u58f0\u660e\u4e14\u6ca1\u6709\u660e\u786e\u58f0\u660e\u4e3alocal\u7684\u53d8\u91cf\u90fd\u53ef\u5728\u51fd\u6570\u4f53\u5916\u53ef\u89c1 func (){ global_var = 37 # \u5728\u51fd\u6570\u8fd8\u6ca1\u6709\u88ab\u8c03\u7528\u524d #+ \u53d8\u91cf\u53ea\u5728\u51fd\u6570\u5185\u53ef\u89c1. } # \u51fd\u6570\u7ed3\u675f echo \"global_var = $global_var \" # global_var = # \u51fd\u6570\"func\"\u8fd8\u6ca1\u6709\u88ab\u8c03\u7528, #+ \u6240\u4ee5\u53d8\u91cf$global_var\u8fd8\u4e0d\u80fd\u88ab\u8bbf\u95ee. func echo \"global_var = $global_var \" # global_var = 37 # \u5df2\u7ecf\u5728\u51fd\u6570\u8c03\u7528\u65f6\u8bbe\u7f6e\u4e86\u503c. \u51fd\u6570\u53c2\u6570 \u00b6 \u5728Shell\u4e2d\uff0c\u8c03\u7528\u51fd\u6570\u65f6\u53ef\u4ee5\u5411\u5176\u4f20\u9012\u53c2\u6570\u3002\u5728\u51fd\u6570\u4f53\u5185\u90e8\uff0c\u901a\u8fc7 $n \u7684\u5f62\u5f0f\u6765\u83b7\u53d6\u53c2\u6570\u7684\u503c\uff0c\u4f8b\u5982\uff0c \\(1\u8868\u793a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\\) 2\u8868\u793a\u7b2c\u4e8c\u4e2a\u53c2\u6570 funWithParam (){ echo \"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a $1 !\" echo \"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a $2 !\" echo \"\u7b2c\u5341\u4e2a\u53c2\u6570\u4e3a $10 !\" echo \"\u7b2c\u5341\u4e2a\u53c2\u6570\u4e3a ${ 10 } !\" echo \"\u7b2c\u5341\u4e00\u4e2a\u53c2\u6570\u4e3a ${ 11 } !\" echo \"\u53c2\u6570\u603b\u6570\u6709 $# \u4e2a!\" echo \"\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f93\u51fa\u6240\u6709\u53c2\u6570 $* !\" } funWithParam 1 2 3 4 5 6 7 8 9 34 73 \u51fd\u6570\u8fd4\u56de\u503c \u00b6 \u5b9a\u4e49\u4e00\u4e2a\u5e26\u6709return\u8bed\u53e5\u7684\u51fd\u6570\u3002\u51fd\u6570\u8fd4\u56de\u503c\u5728\u8c03\u7528\u8be5\u51fd\u6570\u540e\u901a\u8fc7 $? \u6765\u83b7\u5f97\u3002 funWithReturn (){ echo \"\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u8fdb\u884c\u76f8\u52a0\u8fd0\u7b97...\" echo \"\u8f93\u5165\u7b2c\u4e00\u4e2a\u6570\u5b57: \" read aNum echo \"\u8f93\u5165\u7b2c\u4e8c\u4e2a\u6570\u5b57: \" read anotherNum echo \"\u4e24\u4e2a\u6570\u5b57\u5206\u522b\u4e3a $aNum \u548c $anotherNum !\" return $(( $aNum + $anotherNum )) } funWithReturn echo \"\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u4e4b\u548c\u4e3a $? !\" # \u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u8fdb\u884c\u76f8\u52a0\u8fd0\u7b97... # \u8f93\u5165\u7b2c\u4e00\u4e2a\u6570\u5b57: # 1 # \u8f93\u5165\u7b2c\u4e8c\u4e2a\u6570\u5b57: # 2 # \u4e24\u4e2a\u6570\u5b57\u5206\u522b\u4e3a 1 \u548c 2 ! # \u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u4e4b\u548c\u4e3a 3 ! \u26a0\ufe0f $10 \u4e0d\u80fd\u83b7\u53d6\u7b2c\u5341\u4e2a\u53c2\u6570\uff0c\u83b7\u53d6\u7b2c\u5341\u4e2a\u53c2\u6570\u9700\u8981 \\({10}\u3002\u5f53n>=10\u65f6\uff0c\u9700\u8981\u4f7f\u7528\\) \u6765\u83b7\u53d6\u53c2\u6570\u3002 \u7279\u6b8a\u5b57\u7b26\u7528\u6765\u5904\u7406\u53c2\u6570\uff1a \u53c2\u6570\u5904\u7406 \u8bf4\u660e $# \u4f20\u9012\u5230\u811a\u672c\u7684\u53c2\u6570\u4e2a\u6570 $* \u4ee5\u4e00\u4e2a\u5355\u5b57\u7b26\u4e32\u663e\u793a\u6240\u6709\u5411\u811a\u672c\u4f20\u9012\u7684\u53c2\u6570 $$ \u811a\u672c\u8fd0\u884c\u7684\u5f53\u524d\u8fdb\u7a0bID\u53f7 $! \u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u7684ID\u53f7 $@ \u4e0e$*\u76f8\u540c\uff0c\u4f46\u662f\u4f7f\u7528\u65f6\u52a0\u5f15\u53f7\uff0c\u5e76\u5728\u5f15\u53f7\u4e2d\u8fd4\u56de\u6bcf\u4e2a\u53c2\u6570\u3002 $- \u663e\u793aShell\u4f7f\u7528\u7684\u5f53\u524d\u9009\u9879\uff0c\u4e0eset\u547d\u4ee4\u529f\u80fd\u76f8\u540c\u3002 $? \u663e\u793a\u6700\u540e\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u30020\u8868\u793a\u6ca1\u6709\u9519\u8bef\uff0c\u5176\u4ed6\u4efb\u4f55\u503c\u8868\u660e\u6709\u9519\u8bef\u3002","title":"Linux \u9009\u4fee\u8bfe"},{"location":"Linux/#linux","text":"Syh Shell Programming","title":"Linux \u9009\u4fee\u8bfe"},{"location":"Linux/#history-and-common-sense","text":"","title":"\u4e00. History And Common Sense"},{"location":"Linux/#unix","text":"\u591a\u4efb\u52a1\u548c\u591a\u7528\u6237\u7684\u64cd\u4f5c\u7cfb\u7edf 1969 \u5e74\u4e8e AT&T \u7684 Bell \u5b9e\u9a8c\u5ba4\u5f00\u53d1\u3002 System V (1983): \u7b2c\u4e00\u4ee3 UNIX \u5546\u7528\u7248\u672c\u3002 BSD (Berkley Software Distribution) POSIX (Portable Operation System Interface)","title":"\u4ec0\u4e48\u662f UNIX"},{"location":"Linux/#man","text":"Standard commands \u6807\u51c6\u547d\u4ee4 System calls \u7cfb\u7edf\u8c03\u7528 Library functions \u5e93\u51fd\u6570 Special devices \u8bbe\u5907\u8bf4\u660e File formats \u6587\u4ef6\u683c\u5f0f Games and toys \u6e38\u620f\u4e0e\u5a31\u4e50 Miscellaneous \u6742\u9879 Administrative Commands \u7ba1\u7406\u5458\u547d\u4ee4 \u5176\u4ed6\u5b58\u653e\u5185\u6838\u4f8b\u884c\u7a0b\u5e8f\u7684\u6587\u6863 \u67e5\u8be2Man\u624b\u518c \u5982\u679c\u6ca1\u6709 whatis \u5219 make whatis man -k \u5173\u952e\u5b57","title":"MAN \u76ee\u5f55"},{"location":"Linux/#common-commands","text":"\u547d\u4ee4\u683c\u5f0f\uff1a \u547d\u4ee4\u540d -\u7b80\u5199\u9009\u9879 --\u5168\u5199\u9009\u9879 \u53c2\u65701,\u53c2\u65702,... \u6839\u76ee\u5f55 \uff1a / \u5f53\u524d\u76ee\u5f55\uff1a. \u7236\u7ea7\u76ee\u5f55\uff1a.. pwd \uff1a\u6253\u5370\u5de5\u4f5c\u76ee\u5f55 mkdir \uff1a\u65b0\u5efa\u76ee\u5f55 -p \uff1a\u521b\u5efa\u76ee\u5f55\u6811 cd \uff1a\u6539\u53d8\u5de5\u4f5c\u76ee\u5f55 cp \uff1a\u590d\u5236\u6587\u4ef6 -R \uff1a\u9012\u5f52 mv \uff1a\u79fb\u52a8\u6587\u4ef6 ls \uff1a\u5f53\u524d\u76ee\u5f55\u5217\u8868 -l \uff1a\u5c55\u793a\u8be6\u7ec6\u4fe1\u606f cat \uff1a\u8fde\u63a5\u6587\u4ef6\u6216\u6807\u51c6\u8f93\u5165\u5e76\u6253\u5370 more \uff1a\u5206\u5c4f\uff0c\u4e0d\u80fd\u5411\u524d\u770b \u7a7a\u683c\uff1a\u4e0b\u4e00\u5c4f\u5e55 \u56de\u8f66\uff1a\u4e0b\u4e00\u884c less \uff1a\u53ef\u5411\u524d\u5411\u540e\u9605\u89c8\u6587\u4ef6 \u652f\u6301HJKL \u67e5\u770b\u6587\u4ef6 more/less + \u6587\u4ef6\u540d \u67e5\u770bls: ls path |more man -k \u5173\u952e\u5b57|more \u68c0\u7d22\u5173\u952e\u5b57\uff1a man -k \u5173\u952e\u5b57|grep open|more man 2 open : man\u624b\u518c\u7b2c\u4e8c\u7ae0\u7684open\u547d\u4ee4 /\u5173\u952e\u5b57 \uff1a\u68c0\u7d22 \u6307\u4ee4 \u4f5c\u7528 \u5907\u6ce8 CTRL + C \u6740\u6b7b\u8fdb\u7a0b CTRL + SHIFT + C \u590d\u5236 cd \u5207\u6362\u76ee\u5f55 cp \u590d\u5236 cp source target cp -R \u590d\u5236\uff08\u9012\u5f52\uff09 source\u4e3a\u76ee\u5f55\u65f6 \u9700\u8981\u9012\u5f52\u590d\u5236 R: cat \u6253\u5f00\uff08\u8fde\u63a5\uff09\u4e00\u4e2a\u6587\u4ef6 HJKL \u2190\u2193\u2191\u2192 /+\u67e5\u8be2\u5185\u5bb9+\u56de\u8f66 -> \u67e5\u8be2 ls \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5185\u5bb9 ls path ls -R \u9012\u5f52\u67e5\u770b mkdir \u65b0\u5efa\u6587\u4ef6\u5939 make directory1,directory2,\u2026\u2026\uff08\u652f\u6301for\u5faa\u73af\uff09 mkdir (for) mkdir -p a/b/cd \u81ea\u52a8\u5c42\u7ea7\u76ee\u5f55 N \u4e0b\u4e00\u4e2a SHIFT + N \u4e0b\u4e00\u4e2a pwd \u5f53\u524d\u76ee\u5f55 print working directory rm \u5220\u9664 rm -R \u9012\u5f52\u5220\u9664 \u5220\u9664\u6587\u4ef6\u5939 rm -Rf \u9012\u5f52\u5220\u9664\uff08\u522b\u95ee\u6211\uff09 tail \u67e5\u770b\u6587\u4ef6\u7684\u540e\u5341\u884c","title":"\u4e8c. Common commands"},{"location":"Linux/#hello-world","text":"vi hello.c cc hello.c //\u7f16\u8bd1\u5e76\u81ea\u52a8\u751f\u6210a.out ./a.out cc hello.c -o hello //\u6307\u5b9a\u751f\u6210\u7684\u6587\u4ef6\u540d","title":"Hello World"},{"location":"Linux/#vi","text":"\u8fdb\u5165 VI \u9ed8\u8ba4\u662f \u547d\u4ee4\u6a21\u5f0f \uff0c\u6309\u4e0b I \u952e\u8fdb\u5165 \u63d2\u5165\u6a21\u5f0f \u3002 I \u5149\u6807\u524d\uff0c a \u5149\u6807\u540e\uff0c o \u4e0b\u4e00\u884c\uff0c O \u4e0a\u4e00\u884c\u3002 \u63d2\u5165\u6a21\u5f0f\u6309\u4e0b esc \u8fd4\u56de \u547d\u4ee4\u6a21\u5f0f \u3002 \u547d\u4ee4\u6a21\u5f0f\u6309\u4e0b : \u8fdb\u5165 \u6267\u884c\u6a21\u5f0f \uff0c\u6309\u4e0b \u56de\u8f66 \u8fd4\u56de\u547d\u4ee4 CMD \u6a21\u5f0f\u3002 set number : \u663e\u793a\u884c\u53f7 q \u76f4\u63a5\u9000\u51fa wq \u4fdd\u5b58\u5e76\u9000\u51fa w \u6587\u4ef6\u540d \uff1a\u53e6\u5b58\u4e3a \u8f93\u5165I \u5de6\u4e0b\u89d2\u663e\u793a\u8fdb\u5165\u63d2\u5165INSERT\u6a21\u5f0f ESC\u8fdb\u5165\u547d\u4ee4 CMD \u6a21\u5f0f i : \u5149\u6807\u524d\u63d2\u5165 a : \u5149\u6807\u540e\u63d2\u5165 o :\u4e0b\u4e00\u884c\u63d2\u5165 O : \u4e0a\u4e00\u884c\u63d2\u5165 y?y \u590d\u5236?\u884c yank d?d \u526a\u5207?\u884c (\uff1f\u5747\u53ef\u7701\u7565) p \u7c98\u8d34 ^ : \u884c\u5934 $ \uff1a\u884c\u5c3e gg \uff1a\u7b2c\u4e00\u884c G \uff1a \u6700\u540e\u4e00\u884czhantie gg=G \uff1a\u6392\u7248 = \uff1a\u5c06\u9009\u4e2d\u7684\u884c\u8fdb\u884c\u6392\u7248\uff1b x \uff1a\u5220\u9664\u4e00\u4e2a\u5b57\u7b26 J \uff1a\u4e0a\u4e0b\u884c\u5408\u5e76 vimtutor \uff1a\u624b\u518c","title":"VI"},{"location":"Linux/#filesusers","text":"\u7cfb\u7edf\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u6253\u5f00\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u4fe1\u606f\u88c5\u8f7d\u5230\u6253\u5f00\u6587\u4ef6\u8868\u3002","title":"\u4e09. Files/Users"},{"location":"Linux/#_1","text":"|more \u5206\u5c4f\u663e\u793a |grep \u5b57\u7b26\u4e32\u67e5\u627e cc/gcc source -o target \u7f16\u8bd1source\u5e76\u751f\u6210target","title":"\u7ba1\u9053"},{"location":"Linux/#cp","text":"\u6253\u5f00\u6e90\u6587\u4ef6 \u6253\u5f00\u6216\u521b\u5efa\u76ee\u6807\u6587\u4ef6 \u4ece\u6e90\u6587\u4ef6\u8bfb\u53d6 \u5199\u5165\u76ee\u6807\u6587\u4ef6\uff0c\u76f4\u5230\u6e90\u6587\u4ef6\u8bfb\u5b8c Linux \u4e0d\u533a\u5206\u6587\u672c\u6587\u4ef6\u3001\u4e8c\u8fdb\u5236\u6587\u4ef6\u7b49\u3002 Linux \u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u5b9e\u73b0\u590d\u5236\uff0c\u9891\u7e41\u7684\u7cfb\u7edf\u8c03\u7528\u5c06\u5f71\u54cd\u6027\u80fd\uff0c\u6240\u4ee5buffer\u7684\u5927\u5c0f\u8bbe\u5b9a\u5c06\u76f4\u63a5\u5f71\u54cd\u8fdb\u7a0b\u8fd0\u884c\u901f\u5ea6\u3002","title":"CP"},{"location":"Linux/#_2","text":"\u62e5\u6709\u8005\u8bfb\u3001\u5199\u3001\u6267\u884c\uff1b\u540c\u7ec4\u7528\u6237\u8bfb\u3001\u5199\u3001\u6267\u884c\uff1b\u5176\u4ed6\u7528\u6237\u8bfb\u3001\u5199\u3001\u6267\u884c\u3002 ls -l \u663e\u793a\u6240\u6709\u7528\u6237 rwx\u53ef\u8bfb\u53ef\u5199\u53ef\u6267\u884c\uff0c\u4e09\u7ec4\u5206\u522b\u5bf9\u5e94 user(owner) group others \u770b\u505a\u516b\u8fdb\u5236\u7684\u4e00\u7ec4\u6570\u5b57 \u4e09\u4f4d\u5bf9\u5e94\u4e00\u4e2a\u516b\u8fdb\u5236\u6570 rw-r----- : 0640","title":"\u4e5d\u9879\u6743\u9650"},{"location":"Linux/#_3","text":"\u8981\u5bf9\u67d0\u4e2a\u8bbe\u5907\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5c31\u6253\u5f00\u6b64\u8bbe\u5907\u6587\u4ef6\uff0c\u6253\u5f00\u6587\u4ef6\u5c31\u4f1a\u83b7\u5f97\u8be5\u6587\u4ef6\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26fd( file discriptor), \u5b83\u5c31\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u5728PCB\uff08Process Control Block\uff09\u4e2d\u4fdd\u5b58\u7740\u4e00\u4efd\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\uff0c\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u662f\u8fd9\u4e2a\u8868\u7684\u7d22\u5f15\uff0c\u6bcf\u4e2a\u8868\u9879\u90fd\u6709\u4e00\u4e2a\u6307\u5411\u5df2\u6253\u5f00\u6587\u4ef6\u7684\u6307\u9488\u3002 \u5199\u6587\u4ef6\u662f\u8f93\u51fa\u4e0d\u662f\u8f93\u5165 \u8bfb\u6587\u4ef6\u662f\u8f93\u5165 cp(\u9009\u9879)(\u53c2\u6570) \u9009\u9879\uff1a -a\uff1a\u6b64\u53c2\u6570\u7684\u6548\u679c\u548c\u540c\u65f6\u6307\u5b9a\"-dpR\"\u53c2\u6570\u76f8\u540c\uff1b -d\uff1a\u5f53\u590d\u5236\u7b26\u53f7\u8fde\u63a5\u65f6\uff0c\u628a\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u4e5f\u5efa\u7acb\u4e3a\u7b26\u53f7\u8fde\u63a5\uff0c\u5e76\u6307\u5411\u4e0e\u6e90\u6587\u4ef6\u6216\u76ee\u5f55\u8fde\u63a5\u7684\u539f\u59cb\u6587\u4ef6\u6216\u76ee\u5f55\uff1b -f\uff1a\u5f3a\u884c\u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4e0d\u8bba\u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55\u662f\u5426\u5df2\u5b58\u5728\uff1b -i\uff1a\u8986\u76d6\u65e2\u6709\u6587\u4ef6\u4e4b\u524d\u5148\u8be2\u95ee\u7528\u6237\uff1b -l\uff1a\u5bf9\u6e90\u6587\u4ef6\u5efa\u7acb\u786c\u8fde\u63a5\uff0c\u800c\u975e\u590d\u5236\u6587\u4ef6\uff1b -p\uff1a\u4fdd\u7559\u6e90\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u5c5e\u6027\uff1b -R/r\uff1a\u9012\u5f52\u5904\u7406\uff0c\u5c06\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55\u4e00\u5e76\u5904\u7406\uff1b -s\uff1a\u5bf9\u6e90\u6587\u4ef6\u5efa\u7acb\u7b26\u53f7\u8fde\u63a5\uff0c\u800c\u975e\u590d\u5236\u6587\u4ef6\uff1b -u\uff1a\u4f7f\u7528\u8fd9\u9879\u53c2\u6570\u540e\u53ea\u4f1a\u5728\u6e90\u6587\u4ef6\u7684\u66f4\u6539\u65f6\u95f4\u8f83\u76ee\u6807\u6587\u4ef6\u66f4\u65b0\u65f6\u6216\u662f\u540d\u79f0\u76f8\u4e92\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u5e76\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u590d\u5236\u6587\u4ef6\uff1b -S\uff1a\u5728\u5907\u4efd\u6587\u4ef6\u65f6\uff0c\u7528\u6307\u5b9a\u7684\u540e\u7f00\u201cSUFFIX\u201d\u4ee3\u66ff\u6587\u4ef6\u7684\u9ed8\u8ba4\u540e\u7f00\uff1b -b\uff1a\u8986\u76d6\u5df2\u5b58\u5728\u7684\u6587\u4ef6\u76ee\u6807\u524d\u5c06\u76ee\u6807\u6587\u4ef6\u5907\u4efd\uff1b -v\uff1a\u8be6\u7ec6\u663e\u793a\u547d\u4ee4\u6267\u884c\u7684\u64cd\u4f5c\u3002 \u53c2\u6570\uff1a \u6e90\u6587\u4ef6\uff1a\u5236\u5b9a\u6e90\u6587\u4ef6\u5217\u8868\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ccp\u547d\u4ee4\u4e0d\u80fd\u590d\u5236\u76ee\u5f55\uff0c\u5982\u679c\u8981\u590d\u5236\u76ee\u5f55\uff0c\u5219\u5fc5\u987b\u4f7f\u7528-R\u9009\u9879\uff1b \u76ee\u6807\u6587\u4ef6\uff1a\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u3002\u5f53\u201c\u6e90\u6587\u4ef6\u201d\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u8981\u6c42\u201c\u76ee\u6807\u6587\u4ef6\u201d\u4e3a\u6307\u5b9a\u7684\u76ee\u5f55\u3002 \u4f8b\u5b50\uff1a cp file1 file \u5c06file1\u590d\u5236\u81f3file2\u4e2d cp file /usr/men/file1 \u5c06\u6587\u4ef6file\u590d\u5236\u5230\u76ee\u5f55/usr/men\u4e0b\uff0c\u5e76\u6539\u540d\u4e3afile1 cat\u547d\u4ee4\u8fde\u63a5\u6587\u4ef6\u5e76\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u4e0a\uff0ccat\u7ecf\u5e38\u7528\u6765\u663e\u793a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u7c7b\u4f3c\u4e8e\u4e0b\u7684type\u547d\u4ee4\u3002 cat(\u9009\u9879)(\u53c2\u6570) \u9009\u9879\uff1a -n\u6216-number\uff1a\u67091\u5f00\u59cb\u5bf9\u6240\u6709\u8f93\u51fa\u7684\u884c\u6570\u7f16\u53f7\uff1b -b\u6216--number-nonblank\uff1a\u548c-n\u76f8\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5bf9\u4e8e\u7a7a\u767d\u884c\u4e0d\u7f16\u53f7\uff1b -s\u6216--squeeze-blank\uff1a\u5f53\u9047\u5230\u6709\u8fde\u7eed\u4e24\u884c\u4ee5\u4e0a\u7684\u7a7a\u767d\u884c\uff0c\u5c31\u4ee3\u6362\u4e3a\u4e00\u884c\u7684\u7a7a\u767d\u884c\uff1b -A\uff1a\u663e\u793a\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u884c\u5c3e\u663e\u793a\u201c$\u201d\uff1b -e\uff1a\u7b49\u4ef7\u4e8e\"-vE\"\u9009\u9879\uff1b -t\uff1a\u7b49\u4ef7\u4e8e\"-vT\"\u9009\u9879\uff1b \u53c2\u6570\uff1a\u6587\u4ef6\u5217\u8868\uff1a\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u6587\u4ef6\u5217\u8868 \u4f8b\u5b50\uff1a cat m1 \uff08\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u6587\u4ef6ml\u7684\u5185\u5bb9\uff09 cat m1 m2 \uff08\u540c\u65f6\u663e\u793a\u6587\u4ef6ml\u548cm2\u7684\u5185\u5bb9\uff09 cat m1 m2 > file \uff08\u5c06\u6587\u4ef6ml\u548cm2\u5408\u5e76\u540e\u653e\u5165\u6587\u4ef6file\u4e2d\uff09 open file \u8f93\u5165\u547d\u4ee4 man 2 open \u53ef\u67e5\u770b\u7cfb\u7edf\u8c03\u7528open \u4e24\u79cd\u5f62\u5f0f\uff1a int open(const char *pathname, int flags); int open(const char *pathname, int flags, mode_t mode); pathname : \u6587\u4ef6\u8def\u5f84 flags : \u5206\u4e3a\u4e24\u7c7b\uff1a\u4e3b\u7c7b\u3001\u526f\u7c7b \u4e3b\u7c7b\uff1a O_RDONLY \u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6253\u5f00 O_WRONLY \u4ee5\u53ea\u5199\u65b9\u5f0f\u6253\u5f00 O_RDWR \u4ee5\u53ef\u8bfb\u53ef\u5199\u65b9\u5f0f\u6253\u5f00 \u526f\u7c7b\uff1a O_CREAT \u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u8be5\u6587\u4ef6 O_EXCL \u5982\u679c\u4f7f\u7528O_CREAT\u9009\u9879\u4e14\u6587\u4ef6\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u6d88\u606f O_NOCTTY \u5982\u679c\u6587\u4ef6\u4e3a\u7ec8\u7aef\uff0c\u90a3\u4e48\u7ec8\u7aef\u4e0d\u53ef\u4ee5\u8c03\u7528open\u7cfb\u7edf\u8c03\u7528\u7684\u90a3\u4e2a\u8fdb\u7a0b\u7684\u63a7\u5236\u7ec8\u7aef O_TRUNC \u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\u6cfd\u5220\u9664\u6587\u4ef6\u4e2d\u539f\u6709\u6570\u636e O_APPEND \u4ee5\u8ffd\u52a0\u7684\u65b9\u5f0f\u6253\u5f00 mode \u5982\u679c\u6587\u4ef6\u88ab\u65b0\u5efa\uff0c\u5219\u5176\u6743\u9650\u4e3amode mode\u4e3a3\u4f4d\u516b\u8fdb\u5236\u7801 \u7b2c\u4e00\u4f4d\u4ee3\u8868\u6587\u4ef6\u6240\u6709\u8005\u7684\u6743\u9650\uff0c\u7b2c\u4e8c\u4f4d\u4ee3\u8868\u7fa4\u7ec4\u7684\u6743\u9650\uff0c\u7b2c\u4e09\u4f4d\u4e3a\u5176\u4ed6\u4eba\u7684\u6743\u9650 4\u4e3a\u8bfb\u6743\u9650 2\u4e3a\u5199\u6743\u9650 1\u4e3a\u6267\u884c\u6743\u9650 mode\u7684\u6bcf\u4e00\u4f4d\u4e3a\u8fd9\u4e09\u4e2a\u6743\u9650\u6570\u5b57\u7684\u548c su - : \u53d8\u4e3a\u8d85\u7ea7\u7528\u6237 \u63d0\u793a\u7b26\u53d8\u6210# who : \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u7684\u7528\u6237\u4fe1\u606f w : \u67e5\u770b\u5df2\u767b\u5f55\u7684\u7528\u6237\u4ee5\u53ca\u7528\u6237\u7684\u6d3b\u52a8 /etc \u4e0b\u90fd\u662f\u914d\u7f6e\u6587\u4ef6 \u7ec4\u7684\u4fe1\u606f\u5b58\u50a8\u5728 /etc/group \u7528\u6237\u548c\u5bc6\u7801\u4fe1\u606f\u5b58\u50a8\u5728 /etc/passwd \u548c /etc/shadow /etc \u4e0b\u7684passwd \u6587\u4ef6 \u4fee\u6539\u7528\u6237ID\u4e3a0 \u7528\u6237\u5c31\u4f1a\u53d8\u4e3aROOT \u5373\u7cfb\u7edf\u662f\u901a\u8fc7\u7528\u6237ID\u6765\u8bc6\u522b\u7528\u6237 \u800c\u4e0d\u662f\u7528\u6237\u540d \u6b64\u65f6 root\u4e0b\u67e5\u770b /etc \u7684shadow\u6587\u4ef6\u5c31\u53ef\u4ee5\u770b\u5230MD5\u52a0\u5bc6\u540e\u7684\u5bc6\u7801 \u800c\u4e0d\u662fX useradd \u6dfb\u52a0\u7528\u6237 password \u8bbe\u7f6e\u5bc6\u7801","title":"\u6587\u4ef6\u64cd\u4f5c"},{"location":"Linux/#_4","text":"opendir \u6253\u5f00\u76ee\u5f55 readdir \u8bfb\u53d6\u76ee\u5f55 closedir \u5173\u95ed\u76ee\u5f55 stat \u7cfb\u7edf\u8c03\u7528\u83b7\u53d6\u6587\u4ef6\u72b6\u6001 ls -a \u5c55\u793a\u6587\u4ef6\u4ee5\u53ca\u9690\u85cf\u6587\u4ef6 ls -i \u5c55\u793a\u6587\u4ef6\u4ee5\u53ca\u6587\u4ef6\u53f7 ls -l \u6587\u4ef6\u540d \u67e5\u770bFCB\u5185\u5bb9 \u91cd\u547d\u540d\u548c\u79fb\u52a8\u6587\u4ef6 \u90fd\u4e0d\u4f1a\u6539\u53d8\u5176\u6587\u4ef6\u53f7 \u56e0\u4e3a\u4f60\u53ea\u662f\u5728\u4fee\u6539\u76ee\u5f55(\u76ee\u5f55\u4e5f\u662f\u4e00\u4e2a\u6587\u4ef6) UNIX\u6587\u4ef6\u7cfb\u7edf\u662findex\u7c7b\u578b\u7684\u6587\u4ef6\u5b58\u50a8 \u5206\u4e3a super block | i_nodes(FCB \u6307\u5411\u540e\u9762\u7684\u6587\u4ef6\u5757) | blocks \u7531i_node\u53ef\u4ee5\u6307\u5411\u5341\u4e2ablock \u90a3\u4e48\u7b2c\u5341\u4e00\u4e2a\u6307\u5411\u7684\u5c31\u662f\u4e00\u4e2a\u65b0\u7684 \u5168\u662f\u6307\u9488\u7684\u6587\u4ef6 \u4ee5\u6b64\u7c7b\u63a8 \u8fd8\u6709\u4e8c\u7ea7\u6307\u9488 \u6587\u4ef6\u540d\u53ea\u5728\u76ee\u5f55\u4e2d\u5b58\u5728 i \u8282\u70b9\u4e2d\u4e0d\u5b58\u50a8\u6587\u4ef6\u540d st_mode \u662f\u4e00\u4e2a16\u4f4d\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u6587\u4ef6\u7c7b\u578b\u548c\u6743\u9650\u88ab\u7f16\u7801\u5728\u8fd9\u4e2a\u6570\u4e2d\u3002 16 bit 0000 000 000 000 000 \u524d\u56db\u4f4d\u4e3afile type regularfile directory \u518d\u4e09\u4f4d setuid setgid sticky \u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 \u5982\u679csetuid \u548c \u8868\u793auser\u7684\u4e09\u4f4d\u7684\u6700\u540e\u4e00\u4f4d\u90fd\u4e3a1 \u5219\u8868\u793auser\u7684\u4e09\u4f4d\u7684\u6700\u540e\u4e00\u4f4d\u53d8\u4e3as sticky \u5bf9\u76ee\u5f55\u6709\u610f\u4e49 sticky\u4e3a1\u65f6 other\u7684\u6700\u540e\u4e00\u4f4d\u53d8\u4e3at \u6240\u4ee5\u4e00\u822c\u4e0d\u53ef\u4ee5\u6709777\u7684mode \u53ef\u4ee5\u91c7\u7528 chmod 1777d \u5bf9\u53ef\u6267\u884c\u6587\u4ef6\u8bbe\u7f6e setuid \u6743\u9650\u65f6\uff0c\u5c06\u5bf9\u8fd0\u884c\u8be5\u6587\u4ef6\u7684\u8fdb\u7a0b\u6388\u4e88\u57fa\u4e8e\u6587\u4ef6\u6240\u6709\u8005\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8be5\u8bbf\u95ee\u6743\u9650**\u4e0d\u662f**\u57fa\u4e8e\u6b63\u5728\u8fd0\u884c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7528\u6237\u3002\u4f7f\u7528\u6b64\u7279\u6b8a\u6743\u9650\uff0c\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u901a\u5e38\u53ea\u6709\u5c5e\u4e3b\u624d\u53ef\u8bbf\u95ee\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002 setgid \u6743\u9650\u4e0e setuid \u6743\u9650\u7c7b\u4f3c\u3002\u53ef\u5c06\u8fdb\u7a0b\u7684\u6709\u6548\u7ec4 ID \u66f4\u6539\u4e3a\u62e5\u6709\u8be5\u6587\u4ef6\u7684\u7ec4\uff0c\u5e76\u57fa\u4e8e\u6388\u4e88\u8be5\u7ec4\u7684\u6743\u9650\u5bf9\u7528\u6237\u6388\u4e88\u8bbf\u95ee\u6743\u9650\u3002 sticky \u4f4d\u662f\u4fdd\u62a4\u76ee\u5f55\u4e2d\u6587\u4ef6\u7684\u6743\u9650\u4f4d\u3002\u5982\u679c\u5bf9\u76ee\u5f55\u8bbe\u7f6e\u4e86 sticky \u4f4d\uff0c\u5219\u53ea\u6709\u6587\u4ef6\u6240\u6709\u8005\u3001\u76ee\u5f55\u6240\u6709\u8005\u6216\u7279\u6743\u7528\u6237\u624d\u53ef\u4ee5\u5220\u9664\u6587\u4ef6\u3002 root \u7528\u6237\u662f\u7279\u6743\u7528\u6237\u7684\u4e00\u4e2a\u793a\u4f8b\u3002sticky \u4f4d\u7981\u6b62\u7528\u6237\u4ece\u516c\u5171\u76ee\u5f55\uff08\u5982 /tmp \uff09\u4e2d\u5220\u9664\u5176\u4ed6\u7528\u6237\u7684\u6587\u4ef6\uff0c777 \u6743\u9650\u7684\u6587\u4ef6\u9700\u8981\u5bf9 sticky \u7f6e\u4f4d\uff0c\u5426\u5219\u5176\u4ed6\u7a0b\u5e8f\u80fd\u8f7b\u6613\u5730\u5220\u6389\u5b83\u3002 -rwxrwxrw- \u5404\u4e09\u4f4d \u516b\u8fdb\u5236\u8868\u793a\u4e3a766 \u6700\u540e\u7684 9 \u4f4d\u662f\u8bb8\u53ef\u6743\u9650\uff0c\u5206\u4e3a 3 \u7ec4\uff0c\u5bf9\u5e94 3 \u7ec4\u7528\u6237\uff0c\u5206\u522b\u662f\u6587\u4ef6\u6240\u6709\u8005\u3001\u540c\u7ec4\u7528\u6237\u548c\u5176\u4ed6\u7528\u6237\u3002\u6bcf\u7ec4 3 \u4f4d\uff0c\u5206\u522b\u662f\u8bfb\u3001\u5199\u548c\u6267\u884c\u7684\u6743\u9650\u3002 user group other mask(\u63a9\u7801) | \u8fd0\u7b97 | \u542b\u4e49 | \u5907\u6ce8| |-------|-------|-------| | & mask | testing | \u4f7f\u7528\u4f4d\u4e0e\u7684\u65b9\u5f0f\u5f97\u5230\u5bf9\u5e94\u4f4d\u7684\u60c5\u51b5 | | | mask | set | \u4f7f\u7528\u4f4d\u6216\u7684\u65b9\u5f0f\u8d4b\u67d0\u4e00\u4f4d\u503c\u4e3a1 | | & ~mask | reset | \u4f7f\u7528\u53d6\u53cd\u518d\u4e0e\u53bb\u6389\u67d0\u4e00\u4f4d | \u51fd\u6570\u4e0d\u8981\u8d85\u8fc748\u884c \u8d85\u8fc7\u5219\u5206\u5272\u4e3a\u5b50\u51fd\u6570 \u76ee\u5f55\u53ef\u8bfb\uff1a\u53ef\u6267\u884c ls \u67e5\u770b\u5185\u5bb9 \u76ee\u5f55\u53ef\u5199\uff1a\u5728\u76ee\u5f55\u4e2d\u6dfb\u52a0\u6216\u5220\u9664\u6587\u4ef6 \u76ee\u5f55\u53ef\u6267\u884c\uff1a\u53ef\u6267\u884c cd \u547d\u4ee4\u6253\u5f00\u76ee\u5f55 \u4e2d\u6709\u4ee5\u4e0b\u5b9a\u4e49\uff1a #define S_IFMT 0170000 /* type of file */ #define S_IFREG 0100000 /* regular */ #define S_IFDIR 0040000 /* directory */ #define S_IFBLK 0060000 /* block special */ #define S_IFCHR 0020000 /* character special */ #define S_IFIFO 0010000 /* fifo */ #define S_IFLNK 0120000 /* symbolic link */ #define S_IFSOCK 0140000 /* socket */ chmod chmod g-w \u8ba9group\u53bb\u6389 w chmod +w \u52a0\u4e0aw chmod 640 \u76f4\u63a5\u4fee\u6539\u4e3arw-r----- \u6743\u5229\u4e3e\u4f8b\uff1a r \u8bfb : ls x : cd touch \u6587\u4ef6\u540d \u521b\u5efa\u7a7a\u7684\u65b0\u6587\u4ef6 chown \u7528\u6237\u540d \u6587\u4ef6\u540d \u6539\u53d8\u6240\u6709\u8005 ln source target \u94fe\u63a5 \u4e24\u4e2a\u6587\u4ef6\u7684inode\u8282\u70b9\u53f7\u76f8\u540c \u53ea\u662f\u6e90\u6587\u4ef6\u591a\u4e86\u4e00\u4e2a\u5165\u53e3 ls -li \u6587\u4ef6\u540d \u6743\u9650\u4e4b\u540e\u7684\u6570\u5b57\u8868\u793a\u5165\u53e3\u4e2a\u6570 \u5f53\u5165\u53e3\u6570\u4e3a0\u65f6 inode\u91ca\u653e rm \u5176\u5b9e\u7528\u7684\u662funlink \u5220\u9664\u4e86\u94fe\u63a5 move \u5176\u5b9e\u7528\u7684\u662frename \u672c\u8d28\u4e0a\u662f\u91cd\u547d\u540d \u5220\u9664\u5230\u56de\u6536\u7ad9\u53ea\u662f\u79fb\u52a8\u3002\u4ece\u56de\u6536\u7ad9\u5f7b\u5e95\u5220\u9664\u65f6\uff0ci \u8282\u70b9\u88ab\u91ca\u653e\u3002 \u7b26\u53f7\u94fe\u63a5 ln -s source target \u8282\u70b9\u53f7\u4e0d\u4e00\u6837\u4e86 ls-l \u6587\u4ef6\u540d \u53ef\u4ee5\u770b\u5230 source -> target \u94fe\u63a5\u5230\u76ee\u5f55\u7684\u65f6\u5019 \u53ef\u4ee5\u4f7f\u7528\u7b26\u53f7\u94fe\u63a5","title":"\u76ee\u5f55\u6587\u4ef6\u4fe1\u606f\u4e0e\u4f4d\u64cd\u4f5c"},{"location":"Linux/#_5","text":"\u547d\u4ee4 \u542b\u4e49 chown \u6539\u53d8\u67d0\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6240\u6709\u8005\u548c\u6240\u5c5e\u7684\u7ec4 mkdir \u521b\u5efa\u76ee\u5f55 rmdir \u5220\u9664\u76ee\u5f55 rm \u7cfb\u7edf\u8c03\u7528 unlink mv \u7cfb\u7edf\u8c03\u7528 rename cd \u7cfb\u7edf\u8c03\u7528 chdir opendir \u6253\u5f00\u76ee\u5f55 readdir \u8bfb\u53d6\u76ee\u5f55 closedir \u5173\u95ed\u76ee\u5f55","title":"\u5176\u4ed6\u547d\u4ee4"},{"location":"Linux/#devicefiles-and-connection-control","text":"\u5e94\u5f53\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u9632\u6b62\u79fb\u52a8\u540e\u5931\u6548\u3002 **\u786c\u94fe\u63a5**\u662f\u5c06\u76ee\u5f55\u94fe\u63a5\u5230\u6811\u7684\u6307\u9488\uff0c\u786c\u94fe\u63a5\u540c\u65f6\u4e5f\u662f\u5c06\u6587\u4ef6\u540d\u548c\u6587\u4ef6\u672c\u8eab\u94fe\u63a5\u8d77\u6765\u7684\u6307\u9488\u3002 \u786c\u94fe\u63a5\u4e0d\u80fd\u6307\u5411\u5176\u4ed6\u7cfb\u7edf\u4e2d\u7684 i \u8282\u70b9\uff0c\u5373\u4f7f\u6839\u4e5f\u4e0d\u80fd\u751f\u6210\u5230\u76ee\u5f55\u7684\u94fe\u63a5\u3002 **\u7b26\u53f7\u94fe\u63a5**\u901a\u8fc7\u540d\u5b57\u5f15\u7528\u6587\u4ef6\uff0c\u800c\u4e0d\u662f i \u8282\u70b9\u53f7\uff0c\u56e0\u800c\u5b83\u53ef\u80fd\u8de8\u8d8a\u6587\u4ef6\u7cfb\u7edf\u3002 \u5728 Unix \u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u8bbe\u5907\u90fd\u88ab\u5f53\u505a\u4e00\u4e2a\u6587\u4ef6\u3002 \u5bf9\u8bbe\u5907\u8fdb\ufa08\u8bfb\u5199\u5c31\u662f\u5bf9\u8bbe\u5907\u5bf9\u5e94\u7684\u9a71\u52a8\u8fdb\ufa08\u8c03\u7528\uff0c\u76f8\u5f53\u4e8e\u8bfb\u5199\u6587\u4ef6\u3002 \u6bcf\u4e2a\u8bbe\u5907\u90fd\u6709\u4e00\u4e2a\u6587\u4ef6\u540d\u3001\u4e00\u4e2a i-\u8282\u70b9\u53f7\u3001\u4e00\u4e2a\u6587\u4ef6\u6240\u6709\u8005\u3001\u4e00\u4e2a\u6743\u9650\u4f4d\u7684\u96c6\u5408\u548c\u6700\u8fd1\u4fee\u6539\u65f6\u95f4\u3002\u4f60\u6240\u4e86\u89e3\u7684\u548c\u6587\u4ef6\u6709\u5173\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u88ab\u8fd0\u7528\u4e8e\u7ec8\u7aef\u548c\u5176\u4ed6\u7684\u8bbe\u5907\u3002 Linux \u5c06\u8bbe\u5907\u6620\u5c04\u5230 /dev/... \u76ee\u5f55\uff0c\u90e8\u5206\u8bbe\u5907\u4f7f\u2f64\u7528\u4e3b\u8bbe\u5907\u53f7\u548c\u6b21\u8bbe\u5907\u53f7\u6765\u533a\u5206\u6307\u5b9a\u7684\u5916\u8bbe\u3002\u4e3b\u8bbe\u5907\u53f7\u8bf4\u660e\u8bbe\u5907\u7c7b\u578b\uff0c\u6b21\u8bbe\u5907\u53f7\u8bf4\u660e\u5177\u4f53\u6307\u54ea\u4e00\u4e2a\u8bbe\u5907\u3002\u6bd4\u5982\uff1a /dev/sda \u6307\u5411 SCSI ID \u6700\u5c0f\u7684 SCSI \u786c\u76d8 /dev/input/mice \u6307\u5411\u9f20\u6807\u8bbe\u5907\u6587\u4ef6\u7684\u7b26\u53f7\u94fe\u63a5 /dev/fd0 \u7684\u4e3b\u8bbe\u5907\u53f7\u4e3afd\uff08\u8f6f\u76d8\u9a71\u52a8\ufa38 floppy disk\uff09\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a0\uff08\u8f6f\u76d8\u9a71\u52a8\ufa38\u7f16\u53f7\uff09 \u5e38\u7528\u7684\u78c1\u76d8\u6587\u4ef6\u7531\u5b57\u8282\u7ec4\u6210\uff0c\u78c1\u76d8\u6587\u4ef6\u4e2d\u7684\u5b57\u8282\u6570\u5c31\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u3002\u8bbe\u5907\u6587\u4ef6\u662f\u94fe\u63a5\uff0c\u800c\u4e0d\u662f\u5bb9\u5668\u3002\u952e\u76d8\u548c\u9f20\u6807\u4e0d\u5b58\u50a8\u51fb\u952e\u6570\u548c\u70b9\u51fb\u6570\u3002\u8bbe\u5907\u6587\u4ef6\u7684 i \u8282\u70b9\u5b58\u50a8\u7684\u662f\u6307\u5411\u5185\u6838\u5b50\u7a0b\u5e8f\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u6587\u4ef6\u7684\u5927\u5c0f\u548c\u5b58\u50a8\u5217\u8868\u3002\u5185\u6838\u4e2d\u4f20\u8f93\u8bbe\u5907\u6570\u636e\u7684\u5b50\u7a0b\u5e8f\u88ab\u79f0\u4e3a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 ls -l \u8def\u5f84 ls -l /dev/input/mice \u53d1\u73b0\u7b2c\u4e00\u4f4d\u662fc \u8868\u793a\u662f\u5b57\u7b26\u578b inode\u6307\u5411\u5185\u6838\u4e2d\u7684\u8bbe\u5907\u7684\u9a71\u52a8","title":"\u56db. Device,Files and Connection Control"},{"location":"Linux/#_6","text":"\u78c1\u76d8\u6587\u4ef6\u548c\u8bbe\u5907\u6587\u4ef6\u90fd\u6709\u6587\u4ef6\u540d\u548c\u5c5e\u6027\uff0c\u7cfb\u7edf\u8c03\u7528 open \u7528\u4e8e\u521b\u5efa\u4e0e\u6587\u4ef6\u548c\u8bbe\u5907\u7684\u8fde\u63a5\u3002 \u78c1\u76d8\u8fde\u63a5\u7684\u5c5e\u6027\uff1a\u4f8b\u5982\u7f13\u51b2\u3002\u4e0e\u78c1\u76d8\u6587\u4ef6\u7684\u8fde\u63a5\u901a\u5e38\u5305\u542b\u5185\u6838\u7f13\u51b2\u533a\u3002\u4ece\u8fdb\u7a0b\u5230\u78c1\u76d8\u7684\u5b57\u8282\u5148\u88ab\u7f13\u51b2\uff0c\u7136\u540e\u4ece\u5185\u6838\u7684\u7f13\u51b2\u533a\u88ab\u53d1\u9001\u51fa\u53bb\u3002 \u7ec8\u7aef\u8fde\u63a5\u7684\u5c5e\u6027\uff1a\u4f8b\u5982\u56de\u663e\u3002\u56de\u663e\u5b57\u7b26\u4e0d\u662f\u952e\u76d8\u6216\u7a0b\u5e8f\u7684\u4efb\u52a1\u3002","title":"\u8bbe\u5907\u4e0e\u6587\u4ef6\u7684\u4e0d\u540c\u4e4b\u5904"},{"location":"Linux/#connection-control-","text":"man -k file|grep manipulate|grep 2 \u67e5\u8be2\u540e\u53d1\u73b0 \u5728fcntl\u4e2d\u6709\u5bf9\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u51fd\u6570 \u53ef\u4ee5\u83b7\u53d6\u6807\u5fd7\u4f4d \u5982\uff1a F_GETFL \u83b7\u53d6\u5230\u4e00\u4e2aint\u7c7b\u578b\u7684\u8fd4\u56de\u503c \u5229\u7528 | \u5c06append\u4f4d\u4e3a\u7f6e\u4e3a1 s = (fd,F_GETFL); s |= O_APPEND F_SETFL fcntl(fd,F_SETFL,s) 0_SYNC \u548c 0_ASYNC \u5b9e\u73b0\u540c\u6b65IO\u548c\u5f02\u6b65IO","title":"Connection Control - \u8fde\u63a5\u63a7\u5236"},{"location":"Linux/#_7","text":"\u7cfb\u7edf\u8c03\u7528 open \u7528\u4e8e\u5728\u8fdb\u7a0b\u548c\u78c1\u76d8\u6587\u4ef6\u4e4b\u95f4\u521b\u5efa\u4e00\u4e2a\u8fde\u63a5\u3002","title":"\u78c1\u76d8\u8fde\u63a5\u7684\u5c5e\u6027"},{"location":"Linux/#1","text":"O_SYNC \u4f4d\u544a\u77e5\u5185\u6838\uff0c\u5bf9 write \u7684\u8c03\u7528\u4ec5\u80fd\u5728\u6570\u636e\u5199\u5165\u5b9e\u9645\u7684\u786c\u4ef6\u65f6\u624d\u80fd\u8fd4\u56de\uff08\u540c\u6b65 I/O\uff09\uff0c\u800c\u4e0d\u662f\u5728\u6570\u636e\u590d\u5236\u5230\u5185\u6838\u7f13\u51b2\u65f6\u5c31\u6267\u884c\u9ed8\u8ba4\u7684\u8fd4\u56de\u64cd\u4f5c\uff08\u5f02\u6b65 I/O\uff09\u3002 O_SYNC \u4f1a\u5173\u95ed\u5185\u6838\u7684\u7f13\u51b2\u673a\u5236\uff0c\u5982\u975e\u7279\u6b8a\u60c5\u51b5\uff0c\u6700\u597d\u4e0d\u8981\u5173\u95ed\u7f13\u51b2\u3002","title":"\u5c5e\u6027 1\uff1a\u7f13\u51b2"},{"location":"Linux/#2","text":"\u81ea\u52a8\u6dfb\u52a0\u6a21\u5f0f\u7684\u4f7f\u7528\u573a\u666f\u662f\u82e5\u5e72\u8fdb\u7a0b\u5728\u540c\u4e00\u65f6\u95f4\u5199\u5165\u6587\u4ef6\uff0c\u53ef\u7528\u4e8e\u5904\u7406\u7ade\u4e89\u3002\u4f8b\u5982\u7cfb\u7edf\u5199\u65e5\u5fd7\u3002 \u5f53\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684 O_APPEND \u4f4d\u88ab\u5f00\u542f\u65f6\uff0c\u6bcf\u4e2a\u5bf9 write \u7684\u8c03\u7528\u81ea\u52a8\u8c03\u7528 lseek \u5c06\u5185\u5bb9\u6dfb\u52a0\u5230\u6587\u4ef6\u7684\u672b\u5c3e\u3002 \u5bf9 lseek \u548c write \u7684\u8c03\u7528\u662f\u72ec\u7acb\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5185\u6838\u53ef\u4ee5\u968f\u65f6\u6253\u65ad\u8fdb\u7a0b\uff0c\u4ece\u800c\u4f7f\u540e\u9762\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u88ab\u4e2d\u65ad\u3002\u5f53 O_APPEND \u88ab\u7f6e\u4f4d\uff0c\u5185\u6838\u5c06 lseek \u548c write \u7ec4\u5408\u6210\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff0c\u88ab\u8fde\u63a5\u6210\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5355\u5143\u3002","title":"\u5c5e\u6027 2\uff1a\u81ea\u52a8\u6dfb\u52a0\u6a21\u5f0f"},{"location":"Linux/#_8","text":"\u7ec8\u7aef\u662f\u952e\u76d8\u548c\u663e\u793a\u5355\u5143\uff0c\u6700\u91cd\u8981\u7684\u529f\u80fd\u662f\u63a5\u53d7\u6765\u81ea\u7528\u6237\u7684\u5b57\u7b26\u8f93\u5165\u548c\u5c06\u8f93\u51fa\u4fe1\u606f\u663e\u793a\u7ed9\u7528\u6237\u3002","title":"\u7ec8\u7aef\u8fde\u63a5\u7684\u5c5e\u6027"},{"location":"Linux/#stty","text":"stty \u547d\u4ee4\u8ba9\u7528\u6237\u8bfb\u53d6\u548c\u4fee\u6539\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbe\u7f6e\u3002","title":"stty \u547d\u4ee4"},{"location":"Linux/#_9","text":"","title":"\u7f16\u5199\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f"},{"location":"Linux/#_10","text":"\u9a71\u52a8\u7a0b\u5e8f\u5305\u542b\u5f88\u591a\u5bf9\u4f20\u5165\u7684\u6570\u636e\u6240\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u88ab\u5206\u4e3a 4 \u79cd\uff1a \u8f93\u5165\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u4ece\u7ec8\u7aef\u6765\u7684\u5b57\u7b26 \u8f93\u51fa\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u6d41\u5411\u7ec8\u7aef\u7684\u5b57\u7b26 \u63a7\u5236\uff1a\u5b57\u7b26\u5982\u4f55\u88ab\u8868\u793a\u2014\u2014\u4f4d\u7684\u4e2a\u6570\u3001\u4f4d\u7684\u5947\u5076\u6027\u3001\u505c\u6b62\u4f4d\u7b49 \u672c\u5730\uff1a\u9a71\u52a8\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u6765\u81ea\u9a71\u52a8\u7a0b\u5e8f\u5185\u90e8\u7684\u5b57\u7b26 \u5e93\u51fd\u6570 tcgetattr \u548c tcsetattr \u63d0\u4f9b\u5bf9\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbf\u95ee\u3002\u4e24\u4e2a\u51fd\u6570\u5728 termios \u7ed3\u6784\u4e2d\u4ea4\u6362\u8bbe\u7f6e\u3002","title":"\u5173\u4e8e\u8bbe\u7f6e"},{"location":"Linux/#_11","text":"\u6539\u53d8\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u8bbe\u7f6e\u5982\u540c\u6539\u53d8\u78c1\u76d8\u6587\u4ef6\u8fde\u63a5\u7684\u8bbe\u7f6e\uff1a \u4ece\u9a71\u52a8\u7a0b\u5e8f\u83b7\u53d6\u5c5e\u6027 \u4fee\u6539\u76f8\u5173\u5c5e\u6027 \u5c06\u4fee\u6539\u540e\u7684\u5c5e\u6027\u8fd4\u56de\u5230\u9a71\u52a8\u7a0b\u5e8f","title":"\u5173\u4e8e\u51fd\u6570"},{"location":"Linux/#_12","text":"termios \u7ed3\u6784\u7c7b\u578b\u5305\u62ec\u82e5\u5e72\u4e2a\u6807\u5fd7\u96c6\u548c\u4e00\u4e2a\u63a7\u5236\u5b57\u7b26\u7684\u6570\u7ec4\u3002 \u6bcf\u4e2a\u5c5e\u6027\u5728\u6807\u5fd7\u96c6\u4e2d\u90fd\u5360\u6709\u4e00\u4f4d\u3002\u5c5e\u6027\u7684\u63a9\u7801\u5b9a\u4e49\u5728 termios.h \u4e2d\u3002 \u64cd\u4f5c \u4ee3\u7801 \u6d4b\u8bd5\u4f4d if (flagset & MASK) . \u7f6e\u4f4d flagset |= MASK \u6e05\u9664\u4f4d flagset &= ~MASK \u56de\u8f66 \\r 13 \u6362\u884c \\n 10 \u952e\u76d8\u8f93\u5165\u56de\u8f66\u65f6 13\u88ab\u4f20\u9012\u7ed9\u5185\u6838 \u5185\u6838\u5185\u6838\u8fd4\u56de\u7684\u662f13 \u548c 10 stty -a \u67e5\u770bCMD\u70ed\u952e stty -echo \u5173\u95ed\u56de\u663e stty echo \u6253\u5f00\u56de\u663e stty erase ~ \u5c06\u9000\u683c\u4ece ^\uff1f \u66ff\u6362\u4e3a ~ stty -icanon \u8bbe\u7f6e\u4e00\u6b21\u6027\u8bfb\u5b8c\u64cd\u4f5c\uff0c\u5982\u4f7f\u7528getchar()\u8bfb\u64cd\u4f5c\uff0c\u4e0d\u9700\u8981\u6309enter stty icanon \u91cd\u56de\u89c4\u8303\u6a21\u5f0f man tcgetattr \u5f97\u77e5\u6709 struct termios \u5148get\u540e\u4fee\u6539\u518d\u7528 tcsetattr \u8bbe\u7f6e \u6539\u5b8c\u8bb0\u5f97\u8fd8\u539f tcgetattr ( 0 , & dist ); buf = dist ; buf . c_lflag &= - ECHO ; tcsetattr ( 0 , TCSANOW , & buf ); //\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u7acb\u523b\u4fee\u6539 //\u4f7f\u7528\u540e\u8fd8\u539f tcsetattr ( 0 , TCSANOW , & dist ); 0 : \u6807\u51c6\u8f93\u5165 stdin 1 : \u6807\u51c6\u8f93\u51fa stdout 2 : \u6807\u51c6\u9519\u8bef\u8f93\u51fa stderr","title":"\u5173\u4e8e\u4f4d"},{"location":"Linux/#terminal-control-and-signal","text":"","title":"\u4e94. Terminal Control and Signal"},{"location":"Linux/#_13","text":"\u5bf9\u78c1\u76d8\u6587\u4ef6\u548c\u8bbe\u5907\u6587\u4ef6\u4e0d\u52a0\u4ee5\u533a\u5206\u7684\u7a0b\u5e8f\u88ab\u79f0\u4e3a**\u8f6f\u4ef6\u5de5\u5177**\u3002\u8f6f\u4ef6\u5de5\u5177\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u5b57\u8282\uff0c\u8fdb\u884c\u4e00\u4e9b\u5904\u7406\uff0c\u7136\u540e\u5c06\u5305\u542b\u7ed3\u679c\u7684\u5b57\u8282\u6d41\u5199\u5230\u6807\u51c6\u8f93\u51fa\u3002\u5de5\u5177\u53d1\u9001\u9519\u8bef\u6d88\u606f\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\uff0c\u5b83\u4eec\u4e5f\u88ab\u5f53\u505a\u7b80\u5355\u7684\u5b57\u8282\u6d41\u6765\u5904\u7406\u3002","title":"\u8f6f\u4ef6\u5de5\u5177"},{"location":"Linux/#_14","text":"\u5176\u5b83\u7a0b\u5e8f(\u5982\u63a7\u5236\u626b\u63cf\u4eea\u3001\u8bb0\u5f55\u538b\u7f29\u76d8\u3001\u64cd\u4f5c\u78c1\u5e26\u9a71\u52a8\u7a0b\u5e8f\u548c\u62cd\u6444\u6570\u7801\u76f8\u7247\u7684\u7a0b\u5e8f)\u4e5f\u80fd\u540c\u7279\u5b9a\u8bbe\u5907\u8fdb\u884c\u4ea4\u4e92\u3002\u5728\u672c\u7ae0\u4e2d\u5c06\u901a\u8fc7\u4e86\u89e3\u6700\u5e38\u89c1\u7684\u4e0e\u7279\u5b9a\u8bbe\u5907\u76f8\u5173\u7684\u7a0b\u5e8f(\u901a\u8fc7\u7ec8\u7aef\u4e0e\u4eba\u4ea4\u4e92\u7684\u7a0b\u5e8f)\u6765\u63a2\u8ba8\u5728\u5199\u8fd9\u4e9b\u7a0b\u5e8f\u65f6\u7528\u5230\u7684\u6982\u5ff5\u548c\u6280\u672f\u3002\u5c06\u8fd9\u4e9b\u9762\u5411\u7ec8\u7aef\u7684\u7a0b\u5e8f\u79f0\u4e3a\u7528\u6237\u7a0b\u5e8f","title":"\u7279\u5b9a\u8bbe\u5907\u7a0b\u5e8f"},{"location":"Linux/#_15","text":"\u7528\u6237\u7a0b\u5e8f :\u4e00\u79cd\u5e38\u89c1\u7684\u8bbe\u5907\u76f8\u5173\u7a0b\u5e8f\u7528\u6237\u7a0b\u5e8f\u7684\u4f8b\u5b50\u6709vi,emacs,pine,more,lynx,hangman,robots\u548c\u8bb8\u591a\u52a0\u5229\u798f\u5c3c\u4e9a\u5927\u5b66,\u4f2f\u514b\u5229\u5206\u6821\u7f16\u5199\u7684\u6e38\u620f\u7a0b\u5e8f ,\u8fd9\u4e9b\u7a0b\u5e8f\u8bbe\u7f6e\u7ec8\u7aef\u9a71\u52a8\u7a0b\u5e8f\u7684\u51fb\u952e\u548c\u8f93\u51fa\u5904\u7406\u65b9\u5f0f","title":"\u7528\u6237\u7a0b\u5e8f"},{"location":"Linux/#_16","text":"stty -a \u5f97\u77e5 CTRL+C ------> ^C \u662f\u4e00\u4e2a intr \u4fe1\u53f7 \u4e2d\u65ad\u4fe1\u53f7 \u4fe1\u53f7\u662f\u7531\u5355\u4e2a\u8bcd\u7ec4\u6210\u7684\u6d88\u606f\u3002\u6bcf\u4e2a\u4fe1\u53f7\u90fd\u6709\u4e00\u4e2a\u6570\u5b57\u7f16\u7801 \u4fe1\u53f7\u7684\u8bf7\u6c42\u6765\u6e90\uff1a\u7528\u6237\u3001\u5185\u6838\u548c\u8fdb\u7a0b\u3002 \u540c\u6b65\u4fe1\u53f7\uff1a\u7531\u8fdb\u7a0b\u7684\u67d0\u4e2a\u64cd\u4f5c\u4ea7\u751f\u7684\u4fe1\u53f7\u3002 \u5f02\u6b65\u4fe1\u53f7\uff1a\u7531\u50cf\u7528\u6237\u51fb\u952e\u8fd9\u6837\u7684\u8fdb\u7a0b\u5916\u7684\u4e8b\u4ef6\u5f15\u8d77\u7684\u4fe1\u53f7\u3002 \u4fe1\u53f7\u7f16\u53f7\u4ee5\u53ca\u5b83\u4eec\u7684\u540d\u5b57\u901a\u5e38\u51fa\u73b0\u5728 /usr/include/signal.h \u6587\u4ef6\u4e2d\u3002 \u8fdb\u7a0b\u5904\u7406\u4fe1\u53f7\u7684\u65b9\u5f0f\uff1a \u63a5\u6536\u9ed8\u8ba4\u5904\u7406\uff0c\u901a\u5e38\u662f\u6d88\u4ea1 \u5ffd\u7565\u4fe1\u53f7\uff0c\u4f46 SIGSTOP \u548c SIGKILL \u4e24\u4fe1\u53f7\u4e0d\u53ef\u88ab\u5ffd\u7565 \u8c03\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u7528 void (*signal(int sig, void (*func)(int)))(int) func \u7684\u7279\u6b8a\u503c\uff1a SIG_IGN \u5ffd\u7565\u4fe1\u53f7\uff1b SIG_DEF \u4fe1\u53f7\u6062\u590d\u4e3a\u9ed8\u8ba4\u5904\u7406\u3002 kill \u5411\u7a0b\u5e8f\u53d1\u9001\u547d\u4ee4 ps \u770b\u5230\u5f53\u524d\u524d\u53f0\u7684\u547d\u4ee4 ps -e \u770b\u5230\u5305\u62ec\u540e\u53f0\u7684 kill -l \u67e5\u770b\u6240\u6709\u4fe1\u53f7\u7684\u5b8f\u5b9a\u4e49 \u4e0d\u6307\u5b9a\u4fe1\u53f7\u5219\u9ed8\u8ba4\u53d1\u9001TERM\u4fe1\u53f7 kill \u8fdb\u7a0b\u53f7 \u6740\u6b7b\u8fdb\u7a0b kill -9 \u8fdb\u7a0b\u53f7 \u5bf9\u5e94SIGKILL","title":"\u4fe1\u53f7"},{"location":"Linux/#_17","text":"^S : \u505c\u6b62 ^\\ : \u9000\u51fa ^Z : \u5c06\u4e00\u4e2a\u8fdb\u7a0b\u6302\u8d77\u5230\u540e\u53f0\u5e76\u6682\u505c signal(SIGINT,SIG_IGN) : \u5ffd\u89c6\u4e2d\u65ad\u4fe1\u53f7 man 7 signal \u67e5\u770bSIGNAL\u5b8f\u5b9a\u4e49\u7684\u503c\u548c\u5b9a\u4e49 SIGKILL \u548c SIGSTOP \u4e0d\u53ef\u4ee5\u88ab\u963b\u6b62\u548c\u5ffd\u7565","title":"\u4fe1\u53f7\u5904\u7406\u51fd\u6570"},{"location":"Linux/#screen-programming","text":"curses \u5e93\u662f\u4e00\u7ec4\u51fd\u6570/\u5b57\u7b26\u7ec8\u7aef\u5e93\uff0c\u5c4f\u5e55\u7684\u672c\u8d28\u662f\u4e00\u4e2a\u77e9\u9635\uff0c\u7a0b\u5e8f\u5458\u53ef\u4ee5\u7528\u5b83\u4eec\u6765\u8bbe\u7f6e\u5149\u6807\u7684\u4f4d\u7f6e\u548c\u7ec8\u7aef\u5c4f\u5e55\u4e0a\u663e\u793a\u7684\u5b57\u7b26\u6837\u5f0f\u3002 curses \u5c06\u7ec8\u7aef\u5c4f\u5e55\u770b\u6210\u662f\u7531\u5b57\u7b26\u5355\u5143\u7ec4\u6210\u7684\u7f51\u683c\uff0c\u6bcf\u4e2a\u5355\u5143\u7531\u884c\u5217\u5750\u6807\u5bf9\u6807\u793a\u3002\u5750\u6807\u7cfb\u539f\u70b9\u662f\u5c4f\u5e55\u5de6\u4e0a\u89d2\uff0c\u884c\u5750\u6807\u81ea\u4e0a\u800c\u4e0b\u9012\u589e\uff0c\u5217\u5750\u6807\u81ea\u5de6\u5411\u53f3\u9012\u589e\u3002 curses \u4fdd\u7559\u4e86\u5c4f\u5e55\u7684\u4e24\u4e2a\u5185\u90e8\u7248\u672c\u3002\u4e00\u4e2a\u5185\u90e8\u5c4f\u5e55\u662f\u771f\u5b9e\u5c4f\u5e55\u7684\u590d\u5236\uff0c\u53e6\u4e00\u4e2a\u662f\u5de5\u4f5c\u5c4f\u5e55\uff0c\u8bb0\u5f55\u4e86\u5bf9\u5c4f\u5e55\u7684\u6539\u52a8\u3002 refresh \u51fd\u6570\u6bd4\u8f83\u5de5\u4f5c\u5c4f\u5e55\u548c\u771f\u5b9e\u5c4f\u5e55\u7684\u5dee\u5f02\uff0c\u901a\u8fc7\u7ec8\u7aef\u9a71\u52a8\u9001\u51fa\u80fd\u4f7f\u771f\u5b9e\u5c4f\u5e55\u4e0e\u5de5\u4f5c\u5c4f\u5e55\u4e00\u81f4\u7684\u5b57\u7b26\u548c\u63a7\u5236\u7801\u3002 \u7f16\u8bd1\u65f6\u5019\u9700\u8981\u4f7f\u7528 -lcurses \u8868\u793a\u94fe\u63a5curses\u5e93 cc \uff5e.c -lcurses","title":"\u516d. Screen programming"},{"location":"Linux/#_18","text":"move(y,x) : \u5c06\u6e38\u6807\u79fb\u52a8\u81f3 (x,y) \u7684\u4f4d\u7f6e. getyx(win,y,x) : \u5f97\u5230\u76ee\u524d\u6e38\u6807\u7684\u4f4d\u7f6e. (\u8bf7\u6ce8\u610f! \u662f y,x \u800c\uf967\u662f &y,&x ) clear() erase() : \u5c06\u6574\u4e2a\u5c4f\u5e55\u6e05\u9664. (\u8bf7\u6ce8\u610f\u914d\u5408 refresh() \u4f7f\u2f64\u7528) echochar(ch) : \u663e\u793a\u67d0\u4e2a\u5b57\u5143. addch(ch) : \u5728\u5f53\u524d\u4f4d\u7f6e\u753b\u5b57\u7b26ch mvaddch(y,x,ch) : \u5728 (x,y) \u4e0a\u663e\u793a\u67d0\u4e2a\u5b57\u5143. \u76f8\u5f53\u4e8e move(y,x);addch(ch); addstr(str) : \u5728\u5f53\u524d\u4f4d\u7f6e\u753b\u5b57\u7b26\uf905 str mvaddstr(y,x,str) : \u5728(x,y) \u4e0a\u663e\u793a\u4e00\uf905\u5b57\uf905. \u76f8\u5f53\u4e8e move(y,x);addstr(str); printw(format,str) : \u7c7b\u4f3c printf() , \u4ee5\u2f00\u4e00\u5b9a\u7684\u683c\u5f0f\u8f93\u51fa\u81f3\u8424\u5e55. mvprintw(y,x,format,str) : \u5728 (x,y) \u4f4d\u7f6e\u4e0a\u505a printw \u7684\u2f2f\u5de5\u4f5c. \u76f8\u5f53\u4e8e move(y,x);printw(format,str); getch() : \u4ece\u952e\u76d8\u8bfb\u53d6\u2f00\u4e00\u4e2a\u5b57\u5143. (\u6ce8\u610f! \u4f20\u56de\u7684\u662f\u6574\u6570\u503c) getstr() : \u4ece\u952e\u76d8\u8bfb\u53d6\u2f00\u4e00\u4e32\uf905\u5b57\u5143. scanw(format,&arg1,&arg2\u2026) : \u5982\u540c scanf , \u4ece\u952e\u76d8\u8bfb\u53d6\u4e00\uf905\u5b57\u5143. beep() : \u53d1\u51fa\u2f00\u4e00\u58f0\u54d4\u58f0. box(win,ch1,ch2) : \u81ea\u52a8\u753b\u65b9\u6846 refresh() : \u4f7f\u5c4f\u5e55\u6309\u7167\u4f60\u7684\u610f\u56fe\u663e\u793a\u3002\u6bd4\u8f83\u5de5\u4f5c\u5c4f\u5e55\u548c\u771f\u5b9e\u5c4f\u5e55\u7684\u5dee\u5f02\uff0c\u7136\u540erefresh\u901a\u8fc7\u7ec8\u7aef\u9a71 \u52a8\u9001\u51fa\u90a3\u4e9b\u80fd\u4f7f\u771f\u5b9e\u5c4f\u5e55\u4e8e\u5de5\u4f5c\u5c4f\u5e55\u4e00\u81f4\u7684\u5b57\u7b26\u548c\u63a7\u5236\u7801\u3002\uff08\u5de5\u4f5c\u5c4f\u5e55\u5c31\u50cf\u78c1\u76d8\u7f13\u5b58\uff0ccurses\u4e2d\u7684 \u5927\u90e8\u5206\u7684\u51fd\u6570\u90fd\u53ea\u5bf9\u5b83\u8fdb\u884c\u4fee\u6539\uff09 standout() : \u542f\u52a8standout\u6a21\u5f0f\uff08\u4e00\u822c\u4f7f\u5c4f\u5e55\u53d1\u8272\uff09 standend() : \u5173\u95edstandout\u6a21\u5f0f","title":"\u5e38\u7528\u51fd\u6570"},{"location":"Linux/#alarms","text":"","title":"\u65f6\u949f\u7f16\u7a0b\uff1aAlarms"},{"location":"Linux/#sleep","text":"\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u79c1\u6709\u7684\u95f9\u949f(alarm clock) \u3002\u8fd9\u4e2a\u95f9\u949f\u5f88\u50cf\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5728\u4e00\u5b9a\u79d2\u6570\u540e\u95f9\u94c3\u3002\u65f6\u95f4\u4e00\u5230\uff0c\u65f6\u949f\u5c31\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7 SIGALRM \u5230\u8fdb\u7a0b\u3002\u9664\u975e\u8fdb\u7a0b\u4e3a SIGALRM \u8bbe\u7f6e\u4e86\u5904\u7406\u51fd\u6570(handler) \uff0c\u5426\u5219\u4fe1\u53f7\u5c06\u6740\u6b7b\u8fd9\u4e2a\u8fdb\u7a0b\u3002 sleep \u51fd\u6570\u7531 3 \u4e2a\u6b65\u9aa4\u7ec4\u6210\uff1a man 3 sleep \u67e5\u770bsleep\u51fd\u6570 \u4e3a SIGALRM \u8bbe\u7f6e\u4e00\u4e2a\u5904\u7406\u51fd\u6570 \u8c03\u7528 alarm(num_seconds) \u8c03\u7528 pause \u7cfb\u7edf\u8c03\u7528 pause \u6302\u8d77\u8fdb\u7a0b\u76f4\u5230\u4fe1\u53f7\u5230\u8fbe\u3002\u4efb\u4f55\u4fe1\u53f7\u90fd\u53ef\u4ee5\u5524\u9192\u8fdb\u7a0b\uff0c\u800c\u975e\u4ec5\u4ec5\u7b49\u5f85 SIGALRM\u3002 #include <stdio.h> #include <signal.h> main () { void wakeup ( int ); printf ( \"about to sleep for 4 seconds \\n \" ); signal ( SIGALRM , wakeup ); // catch it alarm ( 4 ); // set clock pause (); // freeze here wait for a signal printf ( \"Morning so soon? \\n \" ); // back to work } void wakeup ( int signum ) { #ifndef SHHHH printf ( \"Alarm received from kernel \\n \" ); #endif }","title":"sleep \u7684\u5de5\u4f5c\u673a\u5236"},{"location":"Linux/#_19","text":"interval timer \u8f6f\u4e2d\u65ad 3 \u7c7b\u8ba1\u65f6\u5668\u7684\u540d\u79f0\u548c\u529f\u80fd\u5982\u4e0b\uff1a ITIMER_REAL \u8be5\u8ba1\u65f6\u5668\u8ba1\u91cf\u771f\u5b9e\u65f6\u95f4\uff0c\u5982\u540c\u624b\u8868\u8bb0\u5f55\u65f6\u95f4\u3002\u65e0\u8bba\u7a0b\u5e8f\u5728\u7528\u6237\u6001\u8fd8\u662f\u6838\u5fc3\u6001\uff0c\u7528\u4e86\u591a\u5c11\u5904\u7406\u5668\u65f6\u95f4\u5b83\u90fd\u8bb0\u5f55\u3002\u5f53\u8be5\u8ba1\u65f6\u5668\u7528\u5c3d\uff0c\u53d1\u9001 SIGALRM \u6d88\u606f\u3002 it_value \u521d\u59cb\u65f6\u95f4 it_interval \u95f4\u9694\u65f6\u95f4 \u65f6\u95f4\u5e94\u4e3a\u53cc\u7cbe\u5ea6\u65f6\u95f4\uff1a\u79d2 sec \u548c\u5fae\u5999 usec man -k interval | gerp timer -> man 2 getitimer #include <stdio.h> #include <signal.h> #include <sys/time.h> void wakeup (){ printf ( \"Wake up! \\n \" ); } main (){ struct itimerval itv ; signal ( SIGALRM , wakeup ); printf ( \"Go to sleep \\n \" ); itv . it_interval . tv_sec = 1 ; itv . it_interval . tv_usec = 500000 ; itv . it_value . tv_sec = 5 ; itv . it_value . tv_usec = 0 ; // 5s \u4e2d\u5f00\u59cb\u6267\u2f8f\uff0c\u6bcf\uff11.5\uff53\u5faa\u73af setitimer ( ITIMER_REAL , & itv , NULL ); while ( 1 ){ printf ( \"About to sleep \\n \" ); pause (); } } ITIMER_VIRTUAL \u53ea\u6709\u8fdb\u7a0b\u5728\u7528\u6237\u6001\u8fd0\u884c\u65f6\u624d\u8ba1\u65f6\u3002\u865a\u62df\u8ba1\u65f6\u5668\u7684\u4e09\u5341\u79d2\u6bd4\u5b9e\u9645\u8ba1\u65f6\u5668\u7684\u4e09\u5341\u79d2\u8981\u957f\u3002\u5f53\u865a\u62df\u8ba1\u65f6\u5668\u7528\u5c3d\u65f6\uff0c\u53d1\u9001 SIGVTALRM \u6d88\u606f\u3002 ITIMER_PROF \u7cfb\u7edf\u8c03\u7528\u65f6\u95f4 + \u81ea\u8eab\u8fd0\u884c\u65f6\u95f4 \u8fd9\u4e2a\u8ba1\u65f6\u5668\u5728\u8fdb\u7a0b\u8fd0\u884c\u4e8e\u7528\u6237\u6001\u6216\u7531\u8be5\u8fdb\u7a0b\u8c03\u7528\u800c\u9677\u5165\u6838\u5fc3\u6001\u65f6\u8ba1\u65f6\u3002\u5f53\u8fd9\u4e2a\u8ba1\u65f6\u5668\u7528\u5c3d\uff0c\u53d1\u9001 SIGPROF \u6d88\u606f\u3002","title":"\u65f6\u95f4\u7f16\u7a0b\uff1a\u95f4\u9694\u8ba1\u65f6\u5668"},{"location":"Linux/#_20","text":"\u6bcf\u4e2a\u95f4\u9694\u8ba1\u65f6\u5668\u7684\u8bbe\u7f6e\u90fd\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff1a\u521d\u59cb\u65f6\u95f4\u548c\u91cd\u590d\u95f4\u9694\u3002","title":"\u95f4\u9694"},{"location":"Linux/#usleep","text":"usleep(n) \u5c06\u5f53\u524d\u8fdb\u7a0b\u6302\u8d77 n \u5fae\u79d2\u6216\u8005\u76f4\u5230\u6709\u4e00\u4e2a\u4e0d\u80fd\u88ab\u5ffd\u7565\u7684\u4fe1\u53f7\u5230\u8fbe\u3002","title":"\u7cbe\u5ea6\u66f4\u9ad8\u7684\u65f6\u5ef6\uff1ausleep"},{"location":"Linux/#_21","text":"\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u80fd\u6709\u591a\u4e2a\u72ec\u7acb\u7684\u65f6\u949f\uff0c\u4f46\u4e00\u4e2a\u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u786c\u4ef6\u65f6\u949f\u7684\u8109\u51b2\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u8bbe\u7f6e\u81ea\u5df1\u7684\u8ba1\u6570\u65f6\u95f4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u6bcf\u8fc7\u4e00\u4e2a\u65f6\u95f4\u7247\u540e\u4e3a\u6240\u6709\u7684\u8ba1\u6570\u5668\u7684\u6570\u503c\u505a\u9012\u51cf\u3002","title":"\u8ba1\u7b97\u673a\u53ea\u6709\u4e00\u4e2a\u65f6\u949f"},{"location":"Linux/#processes-and-procedures","text":"","title":"\u4e03. Processes and procedures"},{"location":"Linux/#ps","text":"\u8fdb\u7a0b\u5b58\u5728\u4e8e\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u7a7a\u95f4\u662f\u5b58\u653e\u8fd0\u884c\u7684\u7a0b\u5e8f\u548c\u5b83\u4eec\u7684\u6570\u636e\u7684\u4e00\u90e8\u5206\u5185\u5b58\u7a7a\u95f4 \u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 ps\uff08process status\uff09\u547d\u4ee4\u6765\u67e5\u770b\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5bb9\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u5f53\u524d\u7684\u8fdb\u7a0b\u3002 S status \u8868\u793a\u5404\u4e2a\u8fdb\u7a0b\u7684\u72b6\u6001 S \u5217\u7684\u503c\u4e3a R \u8bf4\u660e ps \u5bf9\u5e94\u7684\u8fdb\u7a0b**\u6b63\u5728\u8fd0\u884c**\u3002\u5176\u4ed6\u8fdb\u7a0b\u7684 S \u5217\u503c\u90fd\u662f S\uff0c\u8bf4\u660e\u5b83\u4eec\u90fd\u5904\u4e8e**\u7761\u7720\u72b6\u6001**\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5c5e\u4e8e\u76f8\u5e94\u7684\u7531 UID \u5217\u6307\u660e\u7684\u7528\u6237 ID\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a ID\uff08PID\uff09\uff0c\u540c\u65f6\u4e5f\u6709\u4e00\u4e2a\u7236\u8fdb\u7a0b ID\uff08PPID\uff09 S sleep R running Z zombie UID \u8fdb\u7a0bowner PRI \u4f18\u5148\u7ea7 \u8d8a\u5c0f\u8d8a\u9ad8 PPID \u7236\u8fdb\u7a0bID PRI \u548c NI \u7684\u5217\u5206\u522b\u662f\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u548c niceness \u7ea7\u522b\u3002 nice\u503c\u662f\u8fdb\u7a0b\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c \u53ef\u4ee5\u4e3a\u8d1f\u503c \u5185\u6838\u6839\u636e\u8fd9\u4e9b\u503c\u6765\u51b3\u5b9a\u4f55\u65f6\u8fd0\u884c\u8fdb\u7a0b\u3002 \u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u589e\u52a0 nice\u503c\uff0c\u8ba9\u5176\u4ed6\u8fdb\u7a0b\u6392\u5728\u5176\u524d\u9762\u3002 \u8d85\u7ea7\u7528\u6237\u53ef\u4ee5\u51cf\u5c11\u5b83\u7684 nice\u503c\uff0c\u4f7f\u5b83\u6392\u5728\u5176\u4ed6\u8fdb\u7a0b\u524d\u9762 \u7528\u6237\u53ea\u80fd\u5c06NI\u53d8\u2f24\uff0croot\u4fee\u6539\u7684\u8303\u56f4\u662f -19\u301c20 \u8fdb\u7a0b\u540d + & \u540e\u53f0\u6267\u884c nice -n 5 \u8fdb\u7a0b\u540d NI \u53d8\u4e3a5 PRI \u52a0\u4e0a\u4e865 \u76f4\u63a5 nice \u8fdb\u7a0b\u540d \u76f4\u63a5\u4ee4 PRI \u589e\u52a010 renice \u547d\u4ee4\u7528\u4e8e\u91cd\u65b0\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7 renice 9 \u8fdb\u7a0b\u53f7 ps \u67e5\u770b\u8fdb\u7a0b\u7684 PID \u8fdb\u7a0b\u53f7 TTY \u7ec8\u7aef\u673a\u8fde\u63a5\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u7684\u6587\u4ef6\u540d\u79f0 TIME CMD ps -l \u67e5\u770b\u8fdb\u7a0b\u7684\u76f8\u5173\u4fe1\u606f ps -d \u9664session leader \u4ee5\u5916\u7684\u5168\u90e8\u8fdb\u7a0b \u5305\u62ec\u540e\u53f0\u4ee5\u53ca\u5176\u4ed6\u7528\u6237\u7684\u8fdb\u7a0b ps -e \u9009\u62e9\u6240\u6709\u8fdb\u7a0b ps -aux \u663e\u793a\u6240\u6709\u5305\u542b\u5176\u4ed6\u4f7f\u7528\u8005\u7684\u8fdb\u7a0b top \u7c7b\u4f3c\u4efb\u52a1\u7ba1\u7406\u5668","title":"ps \u547d\u4ee4"},{"location":"Linux/#shell","text":"","title":"Shell"},{"location":"Linux/#shell_1","text":"shell \u6253\u5370\u63d0\u793a\u7b26\uff0c\u8f93\u5165\u547d\u4ee4\uff0cshell \u5c31\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u7136\u540e shell \u518d\u6b21\u6253\u5370\u63d0\u793a\u7b26\uff0c\u5982\u6b64\u53cd\u590d\u3002 \u4e00\u4e2a shell \u7a0b\u5e8f\u7684\u4e3b\u5faa\u73af\u6267\u884c\u4e0b\u9762\u7684 4 \u6b65\uff1a \u7528\u6237\u952e\u5165 a.out shell \u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u6765\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f shell \u5c06\u7a0b\u5e8f\u4ece\u78c1\u76d8\u8f7d\u5165 \u7a0b\u5e8f\u5728\u5b83\u7684\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u76f4\u5230\u7ed3\u675f","title":"shell \u662f\u5982\u4f55\u8fd0\u884c\u7a0b\u5e8f\u7684"},{"location":"Linux/#_22","text":"exec \u51fd\u6570\u65cf\uff1a int execl ( const char * path , const char * arg , ... /* (char *) NULL */ ); int execlp ( const char * file , const char * arg , ... /* (char *) NULL */ ); int execle ( const char * path , const char * arg , ... /*, (char *) NULL, char * const envp[] */ ); int execv ( const char * path , char * const argv []); int execvp ( const char * file , char * const argv []); int execvpe ( const char * file , char * const argv [], char * const envp []); \u5982\u540c\u6362\u8111 \u3002exec \u7cfb\u7edf\u8c03\u7528\u4ece\u5f53\u524d\u8fdb\u7a0b\u4e2d\u628a\u5f53\u524d\u7a0b\u5e8f\u7684\u673a\u5668\u6307\u4ee4\u6e05\u9664\uff0c\u7136\u540e\u4ece\u7a7a\u7684\u8fdb\u7a0b\u4e2d\u8f7d\u5165\u8c03\u7528\u7684\u6307\u5b9a\u7684\u7a0b\u5e8f\u4ee3\u7801\uff0c\u6700\u540e\u8fd0\u884c\u8fd9\u4e2a\u65b0\u7684\u7a0b\u5e8f\u3002exec \u8c03\u6574\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u4f7f\u4e4b\u9002\u5e94\u65b0\u7684\u7a0b\u5e8f\u5bf9\u5185\u5b58\u7684\u8981\u6c42\u3002\u76f8\u540c\u7684\u8fdb\u7a0b\uff0c\u4e0d\u540c\u7684\u5185\u5bb9\u3002 \u6b65\u9aa4\u5982\u4e0b\uff1a \u7a0b\u5e8f\u8c03\u7528 execvp \u5185\u6838\u4ece\u78c1\u76d8\u5c06\u7a0b\u5e8f\u8f7d\u5165 \u5185\u6838\u5c06 arglist \u590d\u5236\u5230\u8fdb\u7a0b \u5185\u6838\u8c03\u7528 main(argc, argv) exec \u6267\u884c\u4e4b\u540e\uff0c\u539f\u8fdb\u7a0b\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\uff0c\u56e0\u6b64\u9700\u8981\u521b\u5efa\u65b0\u8fdb\u7a0b\u3002","title":"\u4e00\u4e2a\u7a0b\u5e8f\u5982\u4f55\u8fd0\u884c\u53e6\u4e00\u4e2a\u7a0b\u5e8f"},{"location":"Linux/#_23","text":"fork (); fork \u7684\u6267\u884c\u6b65\u9aa4\uff1a \u5206\u914d\u65b0\u7684\u5185\u5b58\u5757\u548c\u5185\u6838\u6570\u636e\u7ed3\u6784 \u590d\u5236\u539f\u6765\u7684\u8fdb\u7a0b\u5230\u65b0\u7684\u8fdb\u7a0b \u5411\u8fd0\u884c\u8fdb\u7a0b\u96c6\u6dfb\u52a0\u65b0\u7684\u8fdb\u7a0b \u5c06\u63a7\u5236\u8fd4\u56de\u7ed9\u4e24\u4e2a\u8fdb\u7a0b fork() \u7684\u8fd4\u56de\u503c \u662f\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 \u5982\u679c\u662f -1 \u8bf4\u660e\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25 #include <stdio.h> main (){ printf ( \"About to execute ls / \\n \" ); execlp ( \"ls\" , \"ls\" , \"/\" , NULL ); printf ( \"DONE! \\n \" ); } #include <stdio.h> main (){ printf ( \"I am %d. About to fork \\n \" , getpid ()); fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c printf ( \"After fork: I am %d \\n \" , getpid ()); } /*I am 22917. About to fork After fork: I am 22917 After fork: I am 22918*/ /*\u7236\u8fdb\u7a0b\u5148\u8fd0\u884c*/ #include <stdio.h> main (){ printf ( \"I am %d. About to fork \\n \" , getpid ()); fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c \u5171\u8ba1\u516b\u4e2a\u8fdb\u7a0b fork (); fork (); printf ( \"After fork: I am %d \\n \" , getpid ()); } #include <stdio.h> main (){ int rv ; printf ( \"I am %d. About to fork \\n \" , getpid ()); rv = fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c if ( 0 == rv ){ // \u6211\u662f\u5b50\u8fdb\u7a0b printf ( \"I am a child. I am %d \\n \" , getpid ()); } else { printf ( \"I am a parent.I am %d. \\n My child is %d \\n \" , getpid (), rv ); } } #include <stdio.h> main (){ int rv ; printf ( \"About to execute ls /: \\n \" ); rv = fork (); // \u5b50\u8fdb\u7a0b\u4f1a\u4ecefork()\u7684\u540e\u4e00\u4e2a\u8bed\u53e5\u5f00\u59cb\u6267\u884c if ( 0 == rv ){ execlp ( \"ls\" , \"ls\" , \"/\" , NULL ); } else { rv_wait = wait ( NULL ); //\u76f4\u81f3\u5f53\u524d\u8fdb\u7a0b\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u6267\u884c\u7ed3\u675f\u540e\uff0c\u624d\u7ee7\u7eed\u6267\u884c printf ( \"%d is back. Done \\n \" , rv_wait ); //\u8fd4\u56de\u503c\u4e3a\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 } } wait [\u8fdb\u7a0b\u53f7 \u6216 \u4f5c\u4e1a\u53f7] eg\uff1a wait 23 or wait %1 \u5982\u679cwait\u540e\u9762\u4e0d\u5e26\u4efb\u4f55\u7684\u8fdb\u7a0b\u53f7\u6216\u4f5c\u4e1a\u53f7\uff0c\u90a3\u4e48wait\u4f1a\u963b\u585e\u5f53\u524d\u8fdb\u7a0b\u7684\u6267\u884c\uff0c\u76f4\u81f3\u5f53\u524d\u8fdb\u7a0b\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u6267\u884c\u7ed3\u675f\u540e\uff0c\u624d\u7ee7\u7eed\u6267\u884c\u3002 rv_wait wait()\u7684\u8fd4\u56de\u503c\u5206\u4e3a\u4e09\u90e8\u5206 \u524d\u516b\u4f4d exit value \u4e00\u4f4d\u7684Core dump \u540e\u4e03\u4f4dSignum \u8fd4\u56de009 \u5373\u8868\u793a\u88ab9\u53f7\u547d\u4ee4\u6740\u6b7b \u8fd4\u56dea00 \u5373\u8868\u793a\u5b50\u8fdb\u7a0b\u8fd4\u56de\u503c\u4e3a10 \u5982\u679c\u7236\u8fdb\u7a0b\u88ab\u6740\u6b7b \u5b50\u8fdb\u7a0b\u4f1a\u8ba41\u53f7\u8fdb\u7a0binit\u4f5c\u4e3a\u7236\u8fdb\u7a0b \u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b ps -e|head \u67e5\u770binit\u8fdb\u7a0b \u5982\u679c\u5b50\u8fdb\u7a0b\u6b63\u5e38\u8fd0\u884c\u5b8c\u6bd5 \u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210Zombie\u8fdb\u7a0b \u9700\u8981\u7528wait\u56de\u6536 \u624d\u4e0d\u4f1a\u7528\u50f5\u5c38\u8fdb\u7a0b ps -l \u53ef\u4ee5\u67e5\u770b\u5230 \u8be5\u5b50\u8fdb\u7a0b\u6709 \u6807\u793a #include <stdio.h> int main (){ int rv , rv_wait ; printf ( \"About to cook:\" ); rv = fork (); if ( 0 == rv ){ return 10 ; } else { int status ; rv_wait = wait ( & status ); printf ( \"%d is back. status: %0x \\n \" , rv_wait , status ); //\u8fd4\u56de\u503c\u4e3aa00 10\u768416\u8fdb\u5236\u4e3aa } } #include <stdio.h> main (){ int rv , rv_wait ; printf ( \"About to cook: \\n \" ); rv = fork (); if ( 0 == rv ){ return 10 ; } else { signal ( SIGCHLD , SIG_IGN ); //\u901a\u77e5\u5185\u6838\u5bf9\u2f26\u8fdb\u7a0b\u7684\u7ed3\u675f\u4e0d\u5173\u2f3c\uff0c\u7531\u5185\u6838\u56de\u6536\uff0c\u5e76\u4e14\u907f\u514d\u2f57\u8fdb\u7a0b\u88ab\u6302\u8d77\u3002 while ( 1 ){ sleep ( 1 ); } } return 0 ; }","title":"\u5982\u4f55\u5efa\u7acb\u65b0\u7684\u8fdb\u7a0b"},{"location":"Linux/#_24","text":"pid = wait ( & status ); \u8fdb\u7a0b\u8c03\u7528 wait \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\u3002 wait \u6682\u505c\u8c03\u7528\u5b83\u7684\u8fdb\u7a0b\u76f4\u5230\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u7136\u540e wait \u53d6\u5f97\u5b50\u8fdb\u7a0b\u7ed3\u675f\u65f6\u4f20\u7ed9 exit \u7684\u503c\u3002 \u7236\u8fdb\u7a0b\u5982\u4f55\u77e5\u9053\u5b50\u8fdb\u7a0b\u662f\u4ee5\u4f55\u79cd\u65b9\u5f0f\u9000\u51fa\u7684\u5462\uff1f \u7b54\u6848\u5728\u4f20\u7ed9 wait \u7684\u53c2\u6570\u4e4b\u4e2d\u3002\u7236\u8fdb\u7a0b\u8c03\u7528 wait \u65f6\u4f20\u4e00\u4e2a\u6574\u578b\u53d8\u91cf\u5730\u5740\u7ed9\u51fd\u6570\u3002\u5185\u6838\u5c06\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u4fdd\u5b58\u5728\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u3002 \u5982\u679c\u5b50\u8fdb\u7a0b\u8c03\u7528 exit \u9000\u51fa\uff0c\u90a3\u4e48\u5185\u6838\u628a exit \u7684\u8fd4\u56de\u503c\u5b58\u653e\u5230\u8fd9\u4e2a\u6574\u6570\u53d8\u91cf\u4e2d\u3002 \u5982\u679c\u8fdb\u7a0b\u662f\u88ab\u6740\u6b7b\u7684\uff0c\u5219\u5185\u6838\u5c06\u4fe1\u53f7\u5e8f\u53f7\u5b58\u653e\u5728\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u3002\u8fd9\u4e2a\u6574\u6570\u7531 3 \u90e8\u5206\u7ec4\u6210\u2014\u2014 8 \u4e2a bit \u662f\u8bb0\u5f55\u9000\u51fa\u503c\uff0c7 \u4e2a bit \u662f\u8bb0\u5f55\u4fe1\u53f7\u5e8f\u53f7\uff0c\u53e6\u4e00\u4e2a bit \u7528\u6765\u6307\u660e\u53d1\u751f\u9519\u8bef\u5e76\u4ea7\u751f\u4e86\u5185\u6838\u6620\u50cf\u3002 wait \u7cfb\u7edf\u51fd\u6570\u6302\u8d77\u8c03\u7528\u5b83\u7684\u8fdb\u7a0b\u76f4\u5230\u5f97\u5230\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u7684\u4e00\u4e2a\u7ed3\u675f\u72b6\u6001 rv_wait = wait(&status) \u7ed3\u675f\u72b6\u6001 rv_wait \u662f\u9000\u51fa\u503c\u6216\u8005\u662f\u4fe1\u53f7\u5e8f\u53f7 \u5982\u679c\u6709\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5df2\u9000\u51fa\u6216\u88ab\u6740\u6b7b\uff0c\u5bf9 wait \u7684\u8c03\u7528\u7acb\u5373\u8fd4\u56de\u3002wait \u8fd4\u56de\u7ed3\u675f\u8fdb\u7a0b\u7684 PID\u3002 \u5982\u679c statusptr \u4e0d\u662f NULL\uff0cwait \u5c06\u9000\u51fa\u72b6\u6001\u6216\u8005\u4fe1\u53f7\u5e8f\u53f7\u590d\u5236\u5230 statusptr \u6307\u5411\u7684\u6574\u6570\u4e2d\u3002\u8be5\u503c\u53ef\u7528 \u4e2d\u7684\u5b8f\u6765\u68c0\u6d4b\u3002 \u5982\u679c\u8c03\u7528\u7684\u8fdb\u7a0b\u6ca1\u6709\u5b50\u8fdb\u7a0b\u4e5f\u6ca1\u6709\u5f97\u5230\u7ec8\u6b62\u72b6\u6001\u503c\uff0c\u5219 wait \u8fd4\u56de -1\u3002 status \u4e3a NULL \u5219\u8868\u793a\u7236\u8fdb\u7a0b\u4e0d\u5173\u5fc3\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001 signal(SIGCHLD,SIG_IGN); \u901a\u77e5\u5185\u6838\u5bf9\u2f26\u8fdb\u7a0b\u7684\u7ed3\u675f\u4e0d\u5173\u2f3c\uff0c\u7531\u5185\u6838\u56de\u6536\uff0c\u5e76\u4e14\u907f\u514d\u2f57\u8fdb\u7a0b\u88ab\u6302\u8d77\u3002","title":"\u7236\u8fdb\u7a0b\u5982\u4f55\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa"},{"location":"Linux/#exit-exec","text":"","title":"exit \u4e0e exec \u7684\u5176\u4ed6\u7ec6\u8282"},{"location":"Linux/#exit-_exit","text":"exit \u662f fork \u7684\u9006\u64cd\u4f5c\uff0c\u8fdb\u7a0b\u901a\u8fc7\u8c03\u7528 exit \u6765\u505c\u6b62\u8fd0\u884c\u3002fork \u521b\u5efa\u4e00\u4e2a\u8fdb\u7a0b\uff0cexit \u5220\u9664\u4e00\u4e2a\u8fdb\u7a0b\u3002 \u5b50\u8fdb\u7a0b\u4f20\u7ed9 exit \u7684\u53c2\u6570\u88ab\u5b58\u653e\u5230\u5185\u6838\uff0c\u76f4\u5230\u8fd9\u4e2a\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u901a\u8fc7 wait \u7cfb\u7edf\u8c03\u7528\u53d6\u56de\u8fd9\u4e2a\u503c\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u6709\u5728\u7b49\u8fd9\u4e2a\u503c\uff0c\u5219\u5b83\u5c06\u88ab\u4fdd\u5b58\u5728\u5185\u6838\u76f4\u5230\u7236\u8fdb\u7a0b\u8c03\u7528 wait\uff0c\u90a3\u65f6\u5185\u6838\u5c06\u901a\u544a\u8fd9\u4e2a\u7236\u8fdb\u7a0b\uff0c\u5176\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u3002","title":"\u8fdb\u7a0b\u6b7b\u4ea1\uff1aexit \u548c _exit"},{"location":"Linux/#_25","text":"\u5df2\u6b7b\u4ea1\u4f46\u8fd8\u6ca1\u6709\u5411\u7236\u8fdb\u7a0b\u8fd4\u56de exit \u53c2\u6570\u7684\u8fdb\u7a0b\u79f0\u4e3a**\u50f5\u5c38\u8fdb\u7a0b**\u3002\u5728\u8fdb\u7a0b\u72b6\u6001\u8868\u4e2d\uff0c\u5e38\u4f7f\u7528 defunct \u8868\u793a\u3002 \u5982\u679c\u5176\u7236\u8fdb\u7a0b\u6ca1\u6709\u5b89\u88c5 SIGCHLD \u4fe1\u53f7\u5904\u7406\u51fd\u6570\u8c03\u7528 wait() \u6216\u8005 waitpid \u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u4e5f\u6ca1\u6709\u663e\u5f0f\u5730\u5ffd\u7565\u8be5\u4fe1\u53f7\uff0c\u5219\u5b50\u8fdb\u7a0b\u5c06\u6301\u7eed\u4fdd\u6301\u50f5\u5c38\u72b6\u6001\u3002\u5982\u679c\u6b64\u65f6\u7236\u8fdb\u7a0b\u7ed3\u675f\uff0cinit \u8fdb\u7a0b\u4f1a\u63a5\u7ba1\u8be5\u5b50\u8fdb\u7a0b\u5e76\u6e05\u9664\u5b83\u3002 kill -9 \u547d\u4ee4\u65e0\u6cd5\u6e05\u9664\u50f5\u5c38\u8fdb\u7a0b\uff0c\u50f5\u5c38\u8fdb\u7a0b\u5df2\u7ecf\u7ed3\u675f\uff0c\u4e0d\u80fd\u63a5\u6536\u4fe1\u53f7\u3002 \u5982\u4f55\u907f\u514d\u5927\u91cf\u50f5\u5c38\u8fdb\u7a0b\uff1f \u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u8c03\u7528 wait \u7b49\u51fd\u6570 \u4f7f\u7528\u4e24\u6b21 fork()\uff0c\u4f7f\u7d27\u8ddf\u7684\u5b50\u8fdb\u7a0b\u76f4\u63a5\u9000\u51fa\uff0c\u5b50\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0cinit \u5c06\u6e05\u9664\u5b83","title":"\u50f5\u5c38\u8fdb\u7a0b"},{"location":"Linux/#io-redirection-and-pipes","text":"","title":"\u516b. I/O Redirection and Pipes"},{"location":"Linux/#io-redirection","text":"","title":"I/O Redirection"},{"location":"Linux/#3","text":"\u6240\u6709\u7684Unix\u5de5\u5177\u90fd\u4f7f\u7528 0:stdin 1:stdout 2:stderr shell \u7684\u5b50\u8fdb\u7a0b\u9ed8\u8ba4\u7ee7\u627f\u5176\u7236\u8fdb\u7a0b\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002","title":"3 \u4e2a\u6807\u51c6\u6587\u4ef6\u63cf\u8ff0\u7b26"},{"location":"Linux/#_26","text":"**\u6587\u4ef6\u63cf\u8ff0\u7b26**\u662f\u4e00\u4e2a\u6570\u7ec4\u7684\u7d22\u5f15\u53f7\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u5176\u6253\u5f00\u7684\u4e00\u7ec4\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6253\u5f00\u7684\u6587\u4ef6\u88ab\u4fdd\u6301\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\u3002\u6587\u4ef6\u63cf\u8ff0\u7b26\u5373\u4e3a\u67d0\u4e2a\u6587\u4ef6\u5728\u6b64\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15\u3002 \u5f53\u6253\u5f00\u6587\u4ef6\u65f6\uff0c\u4e3a\u6b64\u6587\u4ef6\u5b89\u6392\u7684\u63cf\u8ff0\u7b26\u603b\u662f\u6b64\u6570\u7ec4\u4e2d\u6700\u4f4e\u53ef\u7528\u4f4d\u7f6e\u7684\u7d22\u5f15\u3002 \u91cd\u5b9a\u5411\u7684\u662fshell\u800c\u4e0d\u662f\u7a0b\u5e8f cmd > filename : shell\u5c06\u6587\u4ef6\u63cf\u8ff0\u7b261\u5b9a\u4f4d\u5230\u6587\u4ef6 \u4f46\u5e76\u4e0d\u5c06\u91cd\u5b9a\u5411\u6807\u8bb0\u548c\u6587\u4ef6\u540d\u4f20\u9012\u7ed9\u7a0b\u5e8f cmd2 > filename : \u91cd\u5b9a\u5411\u6587\u4ef6\u63cf\u8ff0\u7b262 \u5373\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u4e2d > \u8986\u76d6\u539f\u6587\u4ef6 >> \u8ffd\u52a0\u539f\u6587\u4ef6 \u53c2\u7167\u8bfe\u672c305\u9875\u4ee3\u7801\u5982\u4e0b","title":"\u6700\u4f4e\u53ef\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26\u539f\u5219"},{"location":"Linux/#81-close-then-open","text":"// stdinredir1.c #include <stdio.h> #include <fcntl.h> main () { int fd ; char line [ 100 ]; // \u8bfb\u53d6\u5e76\u6253\u5370\u4e09\u884c fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); // \u91cd\u5b9a\u5411\u8f93\u5165 close ( 0 ); // \u5173\u95ed\u8fde\u63a5\u5230\u7ec8\u7aef\u7684\u6807\u51c6\u8f93\u5165\u6d41 fd = open ( \"/etc/passwd\" , O_RDONLY ); if ( fd != 0 ) { fprintf ( stderr , \"Could not open data as fd 0 \\n \" ); exit ( 1 ); } // \u8bfb\u53d6\u5e76\u6253\u5370\u4e09\u884c fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); }","title":"8.1 close then open"},{"location":"Linux/#82-open-close-dup-close","text":"// stdinredir2.c #include <stdio.h> #include <fcntl.h> /* #define CLOSE_DUP /* open, close, dup, close */ /* #define USE_DUP2 /* open, dup2, close */ main () { int fd ; int newfd ; char line [ 100 ]; fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fd = open ( \"data\" , O_RDONLY ); #ifdef CLOSE_DUP close ( 0 ); newfd = dup ( fd ); // \u590d\u5236\u6253\u5f00\u7684 fd \u5230 0 #else newfd = dup2 ( fd , 0 ); // \u5173\u95ed 0\uff0c\u590d\u5236 fd \u5230 0 #endif if ( newfd != 0 ) { fprintf ( stderr , \"Could not duplicate fd to 0 \\n \" ); exit ( 1 ); } close ( fd ); // \u5173\u95ed\u539f\u6709 fd fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); fgets ( line , 100 , stdin ); printf ( \"%s\" , line ); }","title":"8.2 open.. close. . dup. . close"},{"location":"Linux/#83-opendup2close","text":"\u4e0a\u6587\u7684 stdinredir2.c \u5305\u542b\u4e86\u6761\u4ef6\u7f16\u8bd1\u4ee3\u7801\uff0c\u5df2\u7ecf\u63cf\u8ff0\u4e86\u6b64\u65b9\u6cd5\u3002","title":"8.3 open..dup2..close"},{"location":"Linux/#pipes","text":"\u5c06\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165 0 1 2 \u5bf9\u5e94\u6807\u51c6\u8f93\u5165\u3001\u8f93\u51fa\u3001\u9519\u8bef \u4ece1\u5199 \u4ece0\u8bfb \u4e8e\u662f3 4 \u4e5f\u5bf9\u5e94\u7740\u8f93\u5165\u548c\u8f93\u51fa #include <stdio.h> #include <unistd.h> main (){ int pipefd [ 2 ]; int rv ; pipe ( pipefd ); printf ( \"%d %d \\n \" , pipefd [ 0 ], pipefd [ 1 ]); // 3 \u548c 4 if (( rv = fork ()) == -1 ){ perror ( \"cannot fork\" ); exit ( 1 ); } else if ( 0 == rv ){ //\u5982\u679c\u662f\u5b50\u8fdb\u7a0b close ( pipefd [ 1 ]); close ( 0 ); dup ( pipefd [ 0 ]); close ( pipefd [ 0 ]); execlp ( \"wc\" , \"wc\" , NULL ); } else { close ( pipefd [ 0 ]); close ( 1 ); dup ( pipefd [ 1 ]); close ( pipefd [ 1 ]); execlp ( \"ls\" , \"ls\" , \"-l\" , \"/\" , NULL ); } }","title":"Pipes"},{"location":"Linux/#_27","text":"\u7ba1\u9053\u662f\u4e0d\u5e26\u6709\u4efb\u4f55\u7ed3\u6784\u7684\u5b57\u8282\u5e8f\u5217","title":"\u7ba1\u9053\u5e76\u975e\u6587\u4ef6"},{"location":"Linux/#server-and-socket","text":"\u7ba1\u9053\u4f7f\u5f97\u8fdb\u7a0b\u5411\u5176\u4ed6\u8fdb\u7a0b\u53d1\u9001\u6570\u636e\u5c31\u50cf\u5411\u6587\u4ef6\u53d1\u9001\u6570\u636e\u4e00\u6837\u5bb9\u6613\uff0c\u4f46\u662f\u7ba1\u9053\u5177\u6709\u4e24\u4e2a\u91cd\u5927\u7684\u7f3a\u9677\u3002\u7ba1\u9053\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u88ab\u521b\u5efa\uff0c\u901a\u8fc7fork\u6765\u5b9e\u73b0\u5171\u4eab\uff0c\u56e0\u6b64\uff0c\u7ba1\u9053\u53ea\u80fd\u8fde\u63a5\u4e24\u4e2a\u76f8\u5173\u7684\u8fdb\u7a0b\uff0c\u4e5f\u53ea\u80fd\u8fde\u63a5\u540c\u4e00\u53f0\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u3002 socket \u5141\u8bb8\u5728\u4e0d\u76f8\u5173\u7684\u8fdb\u7a0b\u95f4\u521b\u5efa\u7c7b\u4f3c\u7ba1\u9053\u7684\u8fde\u63a5\uff0c\u751a\u81f3\u662f\u5176\u4ed6\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u3002 socket \u4f5c\u4e3a\u7aef\u70b9 bind listen accept IPV4 \u662f32\u4f4d\u4e8c\u8fdb\u5236\u6570 \u800c\u540e\u62c6\u5f00\u6210\u6570\u5b57\u4e0e\u70b9\u7684\u5f62\u5f0f\u8868\u793a \u6bcf\u6bb5\u5bf9\u5e94\u516b\u4f4d\u4e8c\u8fdb\u5236\u6570 // \u670d\u52a1\u5668demo #include <sys/socket.h> #include <netinet/in.h> #include <netinet/ip.h> #include <stdlib.h> main ( int ac , char * av []){ int tcp_socket ; struct sockaddr_in addr ; int fd ; tcp_socket = socket ( AF_INET , SOCK_STREAM , 0 ); addr . sin_family = AF_INET ; addr . sin_port = htons ( atoi ( av [ 1 ])); // \u4ece\u7ec8\u7aef\u8f93\u5165\u7aef\u53e3\u53f7\uff1b\u7f51\u7edc\u5b57\u8282\u5e8f\u8f6c\u6362\uff0chtons \u9002\u7528\u4e8e 16 \u4f4d\uff0chtonl \u9002\u7528\u4e8e 32 \u4f4d addr . sin_addr . s_addr = INADDR_ANY ; if ( bind ( tcp_socket , ( const struct sockaddr * ) & addr , sizeof ( addr )) == -1 ){ perror ( \"cannot bind\" ); exit ( 1 ); } listen ( tcp_socket , 1 ); while ( 1 ){ fd = accept ( tcp_socket , NULL , NULL ); write ( fd , \"This is 10086! \\n \" , 15 ); close ( fd ); } } //\u5ba2\u6237\u7aefdemo \u4e5f\u53ef\u4f7f\u7528telnet #include <sys/socket.h> #include <netinet/in.h> #include <netinet/ip.h> #include <stdlib.h> #include <stdio.h> main ( int ac , char * av []){ int tcp_socket ; struct sockaddr_in addr ; int fd ; char buf [ 1024 ]; int n ; tcp_socket = socket ( AF_INET , SOCK_STREAM , 0 ); addr . sin_family = AF_INET ; addr . sin_port = htons ( atoi ( av [ 2 ])); addr . sin_addr . s_addr = inet_addr ( av [ 1 ]); if ( connect ( tcp_socket , ( const struct sockaddr * ) & addr , sizeof ( addr )) == -1 ){ perror ( \"cannot connect\" ); exit ( 1 ); } n = read ( tcp_socket , buf , sizeof ( buf )); printf ( \"%.*s \\n \" , n , buf ); close ( tcp_socket ); }","title":"\u4e5d. Server and Socket"},{"location":"Linux/#web-server","text":"\u5ba2\u6237\u548c\u670d\u52a1\u5668\u90fd\u662f\u8fdb\u7a0b\u3002\u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1\uff0c\u7136\u540e\u8fdb\u5165\u5faa\u73af\u63a5\u53d7\u548c\u5904\u7406\u8bf7\u6c42\u3002\u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e\u53d1\u9001\u3001\u63a5\u53d7\u6216\u8005\u4ea4\u6362\u6570\u636e\uff0c\u6700\u540e\u9000\u51fa\u3002\u4ea4\u4e92\u8fc7\u7a0b\u5305\u542b\u5982\u4e0b\u4e09\u4e2a\u64cd\u4f5c\uff1a \u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1 \u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668 \u670d\u52a1\u5668\u548c\u5ba2\u6237\u5904\u7406\u4e8b\u52a1 \u53c2\u7167\u6559\u6750364\u9875socklib.c // \u5b9e\u73b0\u4e86\u670d\u52a1\u5668\u8bbe\u7acb\u670d\u52a1\u4e0e\u5ba2\u6237\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u76f8\u5173\u51fd\u6570 #include <stdio.h> #include <unistd.h> #include <sys/types.h> #include <sys/socket.h> #include <netinet/in.h> #include <netdb.h> #include <time.h> #include <strings.h> #define HOSTLEN 256 #define BACKLOG 1 int make_server_socket_q ( int , int ); int make_server_socket ( int portnum ) { return make_server_socket_q ( portnum , BACKLOG ); } int make_server_socket_q ( int portnum , int backlog ) { struct sockaddr_in saddr ; /* build our address here */ struct hostent * hp ; /* this is part of our */ char hostname [ HOSTLEN ]; /* address */ int sock_id ; /* the socket */ sock_id = socket ( PF_INET , SOCK_STREAM , 0 ); /* get a socket */ if ( sock_id == -1 ) return -1 ; /** build address and bind it to socket **/ bzero (( void * ) & saddr , sizeof ( saddr )); /* clear out struct */ gethostname ( hostname , HOSTLEN ); /* where am I ? */ hp = gethostbyname ( hostname ); /* get info about host */ /* fill in host part */ bcopy (( void * ) hp -> h_addr , ( void * ) & saddr . sin_addr , hp -> h_length ); saddr . sin_port = htons ( portnum ); /* fill in socket port */ saddr . sin_family = AF_INET ; /* fill in addr family */ if ( bind ( sock_id , ( struct sockaddr * ) & saddr , sizeof ( saddr )) != 0 ) return -1 ; /** arrange for incoming calls **/ if ( listen ( sock_id , backlog ) != 0 ) return -1 ; return sock_id ; } int connect_to_server ( char * host , int portnum ) { int sock ; struct sockaddr_in servadd ; /* the number to call */ struct hostent * hp ; /* used to get number */ /** Step 1: Get a socket **/ sock = socket ( AF_INET , SOCK_STREAM , 0 ); /* get a line */ if ( sock == -1 ) return -1 ; /** Step 2: connect to server **/ bzero ( & servadd , sizeof ( servadd )); /* zero the address */ hp = gethostbyname ( host ); /* lookup host's ip # */ if ( hp == NULL ) return -1 ; bcopy ( hp -> h_addr , ( struct sockaddr * ) & servadd . sin_addr , hp -> h_length ); servadd . sin_port = htons ( portnum ); /* fill in port number */ servadd . sin_family = AF_INET ; /* fill in socket type */ if ( connect ( sock , ( struct sockaddr * ) & servadd , sizeof ( servadd )) != 0 ) return -1 ; return sock ; }","title":"\u5341. Web Server"},{"location":"Linux/#thread-mechanism-use-of-concurrent-functions","text":"","title":"\u5341\u4e00. Thread mechanism: use of concurrent functions"},{"location":"Linux/#pthread","text":"//a simple multi example #include <stdio.h> #include <pthread.h> void * print_msg ( void * msg ){ int i ; for ( i = 0 ; i < 5 ; i ++ ){ printf ( \"%s \\n \" , ( char * ) msg ); sleep ( 1 ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , print_msg , \"hello\" ); pthread_create ( & t2 , NULL , print_msg , \"world\" ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); }","title":"pthread\u51fd\u6570"},{"location":"Linux/#_28","text":"pthread_mutex_lock \u3001 pthread_mutex_unlock // \u4e92\u65a5\u9501\u7684\u4f7f\u7528 #include <stdio.h> #include <pthread.h> int tickets = 100 ; pthread_mutex_t mutex_lock = PTHREAD_MUTEX_INITIALIZER ; void * print_msg ( void * msg ){ while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( tickets > 0 ){ printf ( \"%s sells No. %d ticket \\n \" , ( char * ) msg , tickets ); tickets -- ; } pthread_mutex_unlock ( & mutex_lock ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , print_msg , \"Shenyangnan\" ); pthread_create ( & t2 , NULL , print_msg , \"Shenyang\" ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); }","title":"\u4e92\u65a5\u9501"},{"location":"Linux/#_29","text":"pthread_cond_wait \u3001 pthread_cond_signal \u3001 pthread_cond_broadcast **pthread_cond_wait**\u51fd\u6570\u7684\u524d\u540e\u9700\u8981\u5bf9\u4e92\u65a5\u9501\u8fdb\u884clock\u4e0eunlock\uff0c\u51fd\u6570\u4f1a\u4f7f\u5f97\u7ebf\u7a0b\u5728\u6b64\u963b\u585e\u5e76\u91ca\u653e\u4e92\u65a5\u9501\uff0c\u800c\u540e\u7b49\u5f85 signal \u6216 broadcast \u7684\u5524\u9192\u5e76\u540c\u65f6\u5bf9\u7533\u8bf7\u4e92\u65a5\u9501 // \u6761\u4ef6\u53d8\u91cf\u7684\u4f7f\u7528 #include <stdio.h> #include <pthread.h> #define NUM 5 int buf [ NUM ] = { 0 }; int num = 0 ; pthread_mutex_t mutex_lock = PTHREAD_MUTEX_INITIALIZER ; pthread_cond_t flag = PTHREAD_COND_INITIALIZER ; void * producer ( void * useless ){ int count = 0 ; while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( num < NUM ){ buf [ num ] = count ; count ++ ; printf ( \"put %d \\n \" , buf [ num ]); num ++ ; fflush ( stdout ); pthread_cond_signal ( & flag ); } else { pthread_cond_wait ( & flag , & mutex_lock ); } sleep ( 1 ); pthread_mutex_unlock ( & mutex_lock ); } } void * consumer ( void * useless ){ while ( 1 ){ pthread_mutex_lock ( & mutex_lock ); if ( num > 0 ){ num -- ; printf ( \"get %d \\n \" , buf [ num ]); buf [ num ] = 0 ; fflush ( stdout ); sleep ( 1 ); pthread_cond_signal ( & flag ); } else { pthread_cond_wait ( & flag , & mutex_lock ); sleep ( 1 ); } pthread_mutex_unlock ( & mutex_lock ); } } main (){ pthread_t t1 , t2 ; pthread_create ( & t1 , NULL , consumer , NULL ); pthread_create ( & t2 , NULL , producer , NULL ); pthread_join ( t1 , NULL ); pthread_join ( t2 , NULL ); } // \u591a\u7ebf\u7a0b\u7248\u672c\u7684WebServer // // Created by looper on 18-10-2. // /* webserv.c - a minimal web server (version 0.2) * usage: ws portnumber * features: supports the GET command only * runs in the current directory * forks a new child to handle each request * has MAJOR security holes, for demo purposes only * has many other weaknesses, but is a good start * build: cc webserv.c socklib.c -o webserv */ #include <stdio.h> #include <sys/types.h> #include <sys/stat.h> #include <string.h> #include <cstdlib> #include <dnet.h> #include <zconf.h> #include <unistd.h> #include <sys/socket.h> #include <netinet/in.h> #include <netdb.h> #include <time.h> #define HOSTLEN 256 #define BACKLOG 1 int make_server_socket ( int ); int make_server_socket_q ( int , int ); int connect_to_server ( char * , int ); void read_til_crnl ( FILE * ); void process_rq ( char * , int ); void header ( FILE * , char * ); void cannot_do ( int ); void do_404 ( char * , int ); bool isadir ( char * ); bool not_exist ( char * ); void do_ls ( char * , int ); char * file_type ( char * ); bool ends_in_cgi ( char * ); void do_exec ( char * , int ); void do_cat ( char * , int ); int main ( int ac , char * av []) { int sock , fd ; FILE * fpin ; char request [ BUFSIZ ]; if ( ac == 1 ) { fprintf ( stderr , \"usage: ws portnum \\n \" ); exit ( 1 ); } sock = make_server_socket ( atoi ( av [ 1 ])); if ( sock == -1 ) exit ( 2 ); /* main loop here */ while ( 1 ) { /* take a call and buffer it */ fd = accept ( sock , NULL , NULL ); fpin = fdopen ( fd , \"rf\" ); /* read request */ fgets ( request , BUFSIZ , fpin ); printf ( \"got a call: request = %s\" , request ); read_til_crnl ( fpin ); /* do what client asks */ process_rq ( request , fd ); fclose ( fpin ); } } int make_server_socket ( int portnum ) { return make_server_socket_q ( portnum , BACKLOG ); } int make_server_socket_q ( int portnum , int backlog ) { struct sockaddr_in saddr {}; /* build our address here */ struct hostent * hp ; /* this is part of our */ char hostname [ HOSTLEN ]; /* address */ int sock_id ; /* the socket */ sock_id = socket ( PF_INET , SOCK_STREAM , 0 ); /* get a socket */ if ( sock_id == -1 ) return -1 ; /** build address and bind it to socket **/ bzero (( void * ) & saddr , sizeof ( saddr )); /* clear out struct */ gethostname ( hostname , HOSTLEN ); /* where am I ? */ hp = gethostbyname ( hostname ); /* get info about host */ /* fill in host part */ bcopy (( void * ) hp -> h_addr , ( void * ) & saddr . sin_addr , hp -> h_length ); saddr . sin_port = htons ( portnum ); /* fill in socket port */ saddr . sin_family = AF_INET ; /* fill in addr family */ if ( bind ( sock_id , ( struct sockaddr * ) & saddr , sizeof ( saddr )) != 0 ) return -1 ; /** arrange for incoming calls **/ if ( listen ( sock_id , backlog ) != 0 ) return -1 ; return sock_id ; } int connect_to_server ( char * host , int portnum ) { int sock ; struct sockaddr_in servadd {}; /* the number to call */ struct hostent * hp ; /* used to get number */ /** Step 1: Get a socket **/ sock = socket ( AF_INET , SOCK_STREAM , 0 ); /* get a line */ if ( sock == -1 ) return -1 ; /** Step 2: connect to server **/ bzero ( & servadd , sizeof ( servadd )); /* zero the address */ hp = gethostbyname ( host ); /* lookup host's ip # */ if ( hp == nullptr ) return -1 ; bcopy ( hp -> h_addr , ( struct sockaddr * ) & servadd . sin_addr , hp -> h_length ); servadd . sin_port = htons ( portnum ); /* fill in port number */ servadd . sin_family = AF_INET ; /* fill in socket type */ if ( connect ( sock , ( struct sockaddr * ) & servadd , sizeof ( servadd )) != 0 ) return -1 ; return sock ; } /* ------------------------------------------------------ * read_til_crnl(FILE *) skip over all request info until a CRNL is seen ------------------------------------------------------ */ void read_til_crnl ( FILE * fp ) { char buf [ BUFSIZ ]; while ( fgets ( buf , BUFSIZ , fp ) != nullptr && strcmp ( buf , \" \\r\\n \" ) != 0 ); } /* ------------------------------------------------------ * process_rq( char *rq, int fd ) do what the request asks for and write reply to fd handles request in a new process rq is HTTP command: GET /foo/bar.html HTTP/1.0 ------------------------------------------------------ */ void process_rq ( char * rq , int fd ) { char cmd [ BUFSIZ ], arg [ BUFSIZ ]; /* create a new process and return if not the child */ if ( fork () != 0 ) return ; strcpy ( arg , \"./\" ); /* precede args with ./ */ if ( sscanf ( rq , \"%s%s\" , cmd , arg + 2 ) != 2 ) return ; if ( strcmp ( cmd , \"GET\" ) != 0 ) cannot_do ( fd ); else if ( not_exist ( arg )) do_404 ( arg , fd ); else if ( isadir ( arg )) do_ls ( arg , fd ); else if ( ends_in_cgi ( arg )) do_exec ( arg , fd ); else do_cat ( arg , fd ); } /* ------------------------------------------------------ * the reply header thing: all functions need one if content_type is NULL then don't send content type ------------------------------------------------------ */ void header ( FILE * fp , char * content_type ) { fprintf ( fp , \"HTTP/1.0 200 OK \\r\\n \" ); if ( content_type ) fprintf ( fp , \"Content-type: %s;charset=utf-8 \\r\\n \" , content_type ); } /* ------------------------------------------------------ * simple functions first: cannot_do(fd) unimplemented HTTP command and do_404(item,fd) no such object ------------------------------------------------------ */ void cannot_do ( int fd ) { FILE * fp = fdopen ( fd , \"w\" ); fprintf ( fp , \"HTTP/1.0 501 Not Implemented \\r\\n \" ); fprintf ( fp , \"Content-type: text/plain;charset=utf-8 \\r\\n \" ); fprintf ( fp , \" \\r\\n \" ); fprintf ( fp , \"That command is not yet implemented \\r\\n \" ); fclose ( fp ); } void do_404 ( char * item , int fd ) { FILE * fp = fdopen ( fd , \"w\" ); fprintf ( fp , \"HTTP/1.0 404 Not Found \\r\\n \" ); fprintf ( fp , \"Content-type: text/plain;charset=utf-8 \\r\\n \" ); fprintf ( fp , \" \\r\\n \" ); fprintf ( fp , \"The item you requested: %s \\r\\n is not found \\r\\n \" , item ); fclose ( fp ); } /* ------------------------------------------------------ * the directory listing section isadir() uses stat, not_exist() uses stat do_ls runs ls. It should not ------------------------------------------------------ */ bool isadir ( char * f ) { struct stat info {}; return ( stat ( f , & info ) != -1 && S_ISDIR ( info . st_mode )); } bool not_exist ( char * f ) { struct stat info {}; return ( stat ( f , & info ) == -1 ); } void do_ls ( char * dir , int fd ) { FILE * fp ; fp = fdopen ( fd , \"w\" ); header ( fp , \"text/plain;charset=utf-8\" ); fprintf ( fp , \" \\r\\n \" ); fflush ( fp ); dup2 ( fd , 1 ); dup2 ( fd , 2 ); close ( fd ); execlp ( \"ls\" , \"ls\" , \"-l\" , dir , NULL ); perror ( dir ); exit ( 1 ); } /* ------------------------------------------------------ * the cgi stuff. function to check extension and one to run the program. ------------------------------------------------------ */ char * file_type ( char * f ) { /* returns 'extension' of file */ char * cp ; if (( cp = strrchr ( f , '.' )) != nullptr ) return cp + 1 ; return \"\" ; } bool ends_in_cgi ( char * f ) { return ( strcmp ( file_type ( f ), \"cgi\" ) == 0 ); } void do_exec ( char * prog , int fd ) { FILE * fp ; fp = fdopen ( fd , \"w\" ); header ( fp , nullptr ); fflush ( fp ); dup2 ( fd , 1 ); dup2 ( fd , 2 ); close ( fd ); execl ( prog , prog , NULL ); perror ( prog ); } /* ------------------------------------------------------ * do_cat(filename,fd) sends back contents after a header ------------------------------------------------------ */ void do_cat ( char * f , int fd ) { char * extension = file_type ( f ); char * content = \"text/plain;charset=utf-8\" ; FILE * fpsock , * fpfile ; int c ; if ( strcmp ( extension , \"html\" ) == 0 ) content = \"text/html;charset=utf-8\" ; else if ( strcmp ( extension , \"gif\" ) == 0 ) content = \"image/gif\" ; else if ( strcmp ( extension , \"jpg\" ) == 0 ) content = \"image/jpeg\" ; else if ( strcmp ( extension , \"jpeg\" ) == 0 ) content = \"image/jpeg\" ; fpsock = fdopen ( fd , \"w\" ); fpfile = fopen ( f , \"r\" ); if ( fpsock != NULL && fpfile != NULL ) { header ( fpsock , content ); fprintf ( fpsock , \" \\r\\n \" ); while (( c = getc ( fpfile )) != EOF ) putc ( c , fpsock ); fclose ( fpfile ); fclose ( fpsock ); } exit ( 0 ); }","title":"\u6761\u4ef6\u53d8\u91cf"},{"location":"Linux/#interprocess-communicationipc","text":"","title":"\u5341\u4e8c.  Interprocess communication(IPC)"},{"location":"Linux/#io","text":"Unix\u7cfb\u7edf\u63d0\u4f9b\u4e86\u7cfb\u7edf\u8c03\u7528select,\u5b83\u5141\u8bb8\u7a0b\u5e8f\u6302\u8d77,\u5e76\u7b49\u5f85\u4ece\u4e0d\u6b62\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u8f93\u4eba\u3002\u5b83\u7684\u539f\u7406\u5f88\u7b80\u5355: (1)\u83b7\u5f97\u6240\u9700\u8981\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u5217\u8868; (2)\u5c06\u6b64\u5217\u8868\u4f20\u7ed9select; (3)select\u6302\u8d77\u76f4\u5230\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u6709\u6570\u636e\u5230\u8fbe; (4)select\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\u4e2d\u7684\u82e5\u5e72\u4f4d,\u7528\u6765\u901a\u77e5\u4f60\u54ea\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5df2\u7ecf\u6709\u8f93\u5165\u7684\u6570\u636e\u3002 \u4e0b\u56fe\u4e3a\u6559\u6750468\u9875\u7684select\u5c0f\u7ed3 #include <fcntl.h> #include <stdio.h> #include <stdlib.h> #include <sys/time.h> #include <sys/types.h> #include <unistd.h> #include <sys/select.h> main () { int fd1 , fd2 ; fd_set rfds ; struct timeval tv ; int retval ; int n ; char buf [ 1024 ]; if (( fd1 = open ( \"/dev/input/mice\" , O_RDONLY )) == -1 ) { perror ( \"cannot open\" ); exit ( 1 ); } if (( fd2 = open ( \"/dev/pts/0\" , O_RDONLY )) == -1 ) { perror ( \"cannot open\" ); exit ( 1 ); } while ( 1 ) { FD_ZERO ( & rfds ); FD_SET ( fd1 , & rfds ); FD_SET ( fd2 , & rfds ); /* Wait up to five seconds. */ tv . tv_sec = 5 ; tv . tv_usec = 0 ; retval = select ( fd2 + 1 , & rfds , NULL , NULL , & tv ); if ( retval == -1 ) { perror ( \"select()\" ); } else if ( retval > 0 ) { printf ( \"Data is available now. \\n \" ); if ( FD_ISSET ( fd1 , & rfds )) { n = read ( fd1 , buf , sizeof ( buf )); fflush ( stdout ); printf ( \"mice:%.*s \\n \" , n , buf ); } if ( FD_ISSET ( fd2 , & rfds )) { n = read ( fd2 , buf , sizeof ( buf )); fflush ( stdout ); printf ( \"tty:%.*s \\n \" , n , buf ); } } else { printf ( \"No data within five seconds. \\n \" ); } } }","title":"\u5f02\u6b65I/O"},{"location":"Linux/#_30","text":"\u4e09\u79cd\u89e3\u51b3\u65b9\u6848\uff1a\u6587\u4ef6\u3001\u7ba1\u9053\u3001\u5171\u4eab\u5185\u5b58\u3002\u5206\u522b\u901a\u8fc7\u78c1\u76d8\u3001\u5185\u6838\u4ee5\u53ca\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u6570\u636e\u7684\u4f20\u8f93\u3002","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u65b9\u6848\u9009\u62e9"},{"location":"Linux/#_31","text":"","title":"\u901a\u8fc7\u6587\u4ef6\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"Linux/#_32","text":"","title":"\u547d\u540d\u7ba1\u9053"},{"location":"Linux/#_33","text":"//shmwrite.c #include <sys/ipc.h> #include <sys/shm.h> #include <sys/types.h> #include <string.h> main (){ int seg_id = shmget ( 99 , 128 , IPC_CREAT | 0777 ); char * p ; p = shmat ( seg_id , NULL , 0 ); strcpy ( p , \"Hello shm! \\n \" ); } //shmread,c #include <sys/ipc.h> #include <sys/shm.h> #include <sys/types.h> #include <string.h> #include <stdio.h> main (){ int seg_id = shmget ( 99 , 128 , 0777 ); char * p ; p = shmat ( seg_id , NULL , 0 ); printf ( \"%s\" , p ); }","title":"\u5171\u4eab\u5185\u5b58"},{"location":"Linux/#_34","text":"\u6807\u51c6 \u6587\u4ef6 \u547d\u540d\u7ba1\u9053 \u5171\u4eab\u5185\u5b58 socket \u901f\u5ea6 \u5185\u6838\u5c06\u6570\u636e\u590d\u5236\u5230\u78c1\u76d8\uff0c\u7136\u540e\u518d\u4ece\u78c1\u76d8\u4e0a\u590d\u5236\u51fa\u53bb \u5185\u6838\u5c06\u6570\u636e\u590d\u5236\u5230\u5185\u6838\u7a7a\u95f4\uff0c\u518d\u5207\u6362\u56de\u7528\u6237\u7a7a\u95f4 \u8fde\u63a5\u548c\u65e0\u8fde\u63a5 \u591a\u5ba2\u6237\u53ef\u540c\u65f6\u8bfb\u53d6 \u8981\u6c42\u5efa\u7acb\u8fde\u63a5\uff0c\u5355\u5ba2\u6237\u53ef\u8bfb\u53d6 \u591a\u5ba2\u6237\u53ef\u540c\u65f6\u8bfb\u53d6 \u6d41 socket \u9762\u5411\u8fde\u63a5\uff0c\u6570\u636e\u62a5 socket \u65e0\u8fde\u63a5 \u8303\u56f4 \u8fdc\u7a0b\u901a\u4fe1 \u672c\u673a\u8fdb\u7a0b\u901a\u4fe1 \u672c\u673a\u8fdb\u7a0b\u901a\u4fe1 IP \u5730\u5740\u7684 socket \u53ef\u8fdc\u7a0b\u901a\u4fe1\uff0cUnix \u5730\u5740\u7684 socket \u4e0d\u80fd \u8bbf\u95ee\u9650\u5236 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u6587\u4ef6\u7cfb\u7edf\u6743\u9650 Unix \u5730\u5740 socket \u63d0\u4f9b Unix \u6587\u4ef6\u6743\u9650\uff0cInternet socket \u6ca1\u6709\u6743\u9650\u673a\u5236 \u7ade\u6001\u6761\u4ef6 \u9700\u8981\u5904\u7406 \u5185\u6838\u7ba1\u7406\u7684\u961f\u5217 \u9700\u8981\u5904\u7406 \u5185\u6838\u7ba1\u7406\u7684\u961f\u5217","title":"\u901a\u4fe1\u65b9\u6cd5\u6bd4\u8f83"},{"location":"Linux/#shell-programming","text":"","title":"\u5341\u4e8c. Shell Programming"},{"location":"Linux/#_35","text":"\u5efa\u7acb\u4e00\u4e2a\u6587\u672c\u6587\u4ef6 demo1 \uff0c\u4ee5 .sh \u7ed3\u5c3e\u7684\u6216\u8005\u4e0d\u9700\u8981\u540e\u7f00\u90fd\u53ef\u4ee5\uff0c\u4e0b\u9762\u662fdemo1\u7684\u5185\u5bb9: #!/bin/bash NUM = 10 printf \"\u8f93\u51fa\u6570\u5b57 $NUM \\n\" echo $NUM \u76f4\u63a5\u8fd0\u884c\u662f\u4f1a\u62a5\u9519\u8bef\u7684\uff0c\u56e0\u4e3a\u6ca1\u6709\u6743\u9650\u6267\u884c\uff08Permission denied\uff09\uff0c\u9700\u8981\u7ed9\u6743\u9650\u3002\u4e0b\u9762\u65b9\u5f0f chmod +x ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u6267\u884c\u7684\u6743\u9650 chmod +rx ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod u+rx ./demo1 # \u4ec5\u4ec5\u4f7f\u811a\u672c\u6587\u4ef6\u62e5\u6709\u8005\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod u+x ./demo1 # \u53ea\u6709\u81ea\u5df1\u53ef\u4ee5\u6267\u884c\uff0c\u5176\u5b83\u4eba\u4e0d\u80fd\u6267\u884c chmod ug+x ./demo1 # \u53ea\u6709\u81ea\u5df1\u4ee5\u53ca\u540c\u4e00\u7fa4\u53ef\u4ee5\u6267\u884c\uff0c\u5176\u5b83\u4eba\u4e0d\u80fd\u6267\u884c chmod 555 ./demo1 # \u4f7f\u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u6267\u884c\u7684\u6743\u9650 chmod 777 ./demo1 \u5f53\u524d\u76ee\u5f55\u4e0b\u8fd0\u884c demo1 \u811a\u672c ./demo1 # \u8f93\u51fa\u7ed3\u679c===> \u8f93\u51fa\u6570\u5b5710 10 \u76f4\u63a5\u8fd0\u884cdemo1\u811a\u672c\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u662f\u628a\u811a\u672c\u7ed9\u7cfb\u7edf\u4e2d\u6240\u6709\u5176\u4ed6\u7684\u7528\u6237\u4f7f\u7528\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u4f60\u5c06demo1\u811a\u672c\u79fb\u52a8\u5230\u76ee\u5f55 /usr/local/bin \u4e2d(\u5fc5\u987b\u8981\u6709root\u7684\u6743\u9650)\uff0c\u79fb\u52a8\u5230 bin \u76ee\u5f55\u4e4b\u540e\uff0c\u4f60\u53ea\u9700\u4f7f\u7528 demo1 \u52a0\u56de\u8f66\u5c31\u80fd\u6267\u884c\u811a\u672c\u4e86\u3002 demo1 # \u8f93\u51fa\u7ed3\u679c===> \u8f93\u51fa\u6570\u5b5710 10 \u901a\u8fc7sh\u6216\u8005bash\u547d\u4ee4\u8fd0\u884c\u811a\u672c\uff0c sh scriptname \u8fd0\u884c\u4e00\u4e2aBash\u811a\u672c\u5c06\u4f1a\u7981\u6b62\u6240\u6709Bash\u7684\u6269\u5c55\u7279\u6027\u3002 # \u4f60\u80fd\u591f\u8fd0\u884c\u5b83\u7528\u547d\u4ee4 sh demo1 # \u53e6\u5916\u4e5f\u4e5f\u53ef\u4ee5\u7528bash\u6765\u6267\u884c bash demo1 \u811a\u672c\u4ee5\"#!\"\u884c\u5f00\u5934\uff0c\u884c\u5c06\u4f1a\u547d\u4ee4\u89e3\u91ca\u5668(sh\u6216\u662fbash)\u3002 #!/bin/rm \u5f53\u4f60\u8fd0\u884c\u8fd9\u4e2a\u811a\u672c\u65f6\uff0c\u9664\u4e86\u8fd9\u4e2a\u811a\u672c\u6d88\u5931\u4e86\u4e4b\u5916\uff0c\u4f60\u4e0d\u4f1a\u53d1\u73b0\u66f4\u591a\u5176\u4ed6\u7684\u4e1c\u897f\u3002 \u7279\u6b8a\u5b57\u7b26","title":"\u811a\u672c\u8fd0\u884c"},{"location":"Linux/#_36","text":"\u4ee5 # \u5f00\u5934\u7684\u884c\u5c31\u662f\u6ce8\u91ca\uff0c\u4f1a\u88ab\u89e3\u91ca\u5668\u5ffd\u7565\u3002\u6ce8\u91ca\u884c\u524d\u9762\u4e5f\u53ef\u4ee5\u6709\u7a7a\u767d\u5b57\u7b26\u3002 #-------------------------------------------- # \u8fd9\u662f\u4e00\u4e2a\u6ce8\u91ca # author\uff1a\u4f5c\u8005 # site\uff1ahttps://github.com/jaywcjlove #-------------------------------------------- echo \"A comment will follow.\" # \u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u6ce8\u91ca. # ^ \u6ce8\u610f\u5728#\u524d\u9762\u53ef\u4ee5\u6709\u7a7a\u767d\u7b26 echo\u547d\u4ee4\u7ed9\u51fa\u7684\u4e00\u4e2a\u8f6c\u4e49\u7684#\u5b57\u7b26\u5e76\u4e0d\u4f1a\u5f00\u59cb\u4e00\u4e2a\u6ce8\u91ca\u3002\u540c\u6837\u5730\uff0c\u51fa\u73b0\u5728\u4e00\u4e9b\u53c2\u6570\u4ee3\u6362\u7ed3\u6784\u548c\u5728\u6570\u503c\u5e38\u91cf\u8868\u8fbe\u5f0f\u4e2d\u7684#\u5b57\u7b26\u4e5f\u540c\u6837\u4e0d\u4f1a\u5f00\u59cb\u4e00\u4e2a\u6ce8\u91ca\u3002 echo \"\u8fd9\u91cc\u7684 # \u4e0d\u4f1a\u88ab\u6ce8\u91ca\" echo '\u8fd9\u91cc\u7684 # \u4e0d\u4f1a\u88ab\u6ce8\u91ca' echo \u8fd9\u91cc\u7684 \\# \u4e0d\u4f1a\u88ab\u6ce8\u91ca echo \u8fd9\u91cc\u7684 # \u4f1a\u88ab\u6ce8\u91ca echo ${ PATH #*: } # \u524d\u9762\u7684#\u662f\u53c2\u6570\u4ee3\u6362\uff0c\u4e0d\u662f\u6ce8\u91ca. echo $(( 2#101011 )) # \u57fa\u672c\u8f6c\u6362\uff0c\u4e0d\u662f\u6ce8\u91ca.","title":"\u6ce8\u91ca"},{"location":"Linux/#_37","text":"\u5206\u53f7 ; \u547d\u4ee4\u5206\u5272\u7b26\uff0c\u5206\u5272\u7b26\u5141\u8bb8\u5728\u540c\u4e00\u884c\u91cc\u6709\u4e24\u4e2a\u6216\u66f4\u591a\u7684\u547d\u4ee4\u3002\u6267\u884c demo2 \uff0c\u4f1a\u5c06 demo2 \u62f7\u8d1d\u8f93\u51fa demo2.bak \u3002 echo hello ; echo there # \u8f93\u51fa hello \u548c there filename = 'demo2' # \u53d8\u91cf if [ -x \" $filename \" ] ; then # \u6ce8\u610f\uff1a\"if\" and \"then\"\u9700\u8981\u5206\u9694\u7b26 # \u601d\u8003\u4e00\u4e0b\u8fd9\u662f\u4e3a\u4ec0\u4e48? echo \"File $filename exists.\" ; cp $filename $filename .bak else echo \"File $filename not found.\" ; touch $filename fi ; echo \"File test complete.\"","title":"\u547d\u4ee4\u5206\u5272\u7b26"},{"location":"Linux/#_38","text":"\u53cc\u5206\u53f7 ;; \uff0ccase\u8bed\u53e5\u5206\u652f\u7684\u7ed3\u675f\u7b26\u3002 demo3 read Keypress case \" $Keypress \" in [[ :lower: ]] ) echo \"Lowercase letter\" ;; [[ :upper: ]] ) echo \"Uppercase letter\" ;; [ 0 -9 ] ) echo \"Digit\" ;; * ) echo \"Punctuation, whitespace, or other\" ;; esac # \u5141\u8bb8\u5b57\u7b26\u4e32\u7684\u8303\u56f4\u51fa\u73b0\u5728[]\u4e2d, #+ \u6216\u8005POSIX\u98ce\u683c\u7684[[\u4e2d. exit 0","title":"\u7ed3\u675f\u7b26"},{"location":"Linux/#_39","text":"\u4f5c\u4e3a\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u7ec4\u6210\u90e8\u5206 . \uff0c\u5f53\u70b9 . \u4ee5\u4e00\u4e2a\u6587\u4ef6\u540d\u4e3a\u524d\u7f00\u65f6\uff0c\u8d77\u4f5c\u7528\u4f7f\u8be5\u6587\u4ef6\u53d8\u6210\u4e86\u9690\u85cf\u6587\u4ef6\u3002\u8fd9\u79cd\u9690\u85cf\u6587\u4ef6ls\u4e00\u822c\u662f\u4e0d\u4f1a\u663e\u793a\u51fa\u6765\u7684\u3002 \u4f5c\u4e3a\u76ee\u5f55\u540d\u65f6\uff0c\u5355\u4e2a\u70b9\uff08.\uff09\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff0c\u4e24\u4e2a\u70b9(..)\u8868\u793a\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff08\u6216\u79f0\u4e3a\u7236\u76ee\u5f55\uff09\u3002 \u70b9(.)\u5b57\u7b26\u5339\u914d\u3002\u4f5c\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4e00\u90e8\u5206,\u5339\u914d\u5b57\u7b26\u65f6\uff0c\u5355\u70b9\uff08.\uff09\u8868\u793a\u5339\u914d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u3002","title":"\u53e5\u53f7/\u5706\u70b9"},{"location":"Linux/#_40","text":"\u5f15\u53f7\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u4f5c\u7528\u662f\u4fdd\u62a4\u547d\u4ee4\u884c\u4e0a\u7684\u4e00\u4e2a\u53c2\u6570\u4e0d\u88abshell\u89e3\u91ca\uff0c\u800c\u628a\u6b64\u53c2\u6570\u4f20\u9012\u7ed9\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u6765\u5904\u7406\u5b83\u3002 bash$ grep '[Ff]ile' demo* demo2:filename = 'demo2' demo2:if [ -x \" $filename \" ] ; then # \u6ce8\u610f\uff1a\"if\" and \"then\"\u9700\u8981\u5206\u9694\u7b26 demo2: echo \"File $filename exists.\" ; cp $filename $filename .bak \u5f15\u53f7\u80fd\u6539\u6389echo's\u4e0d\u6362\u884c\u7684\u201c\u4e60\u60ef\u201d\u3002 bash$ echo $( ls -al ) total 24 drwxr-xr-x 5 kacperwang staff 170 1 22 16 :47 . drwxr-xr-x 5 kacperwang staff 170 1 22 13 :29 .. -rwxr-xr-x 1 kacperwang staff 58 1 22 16 :20 demo1 -rwxr-xr-x 1 kacperwang staff 325 1 22 16 :39 demo2 -rwxr-xr-x 1 kacperwang staff 899 1 22 17 :16 demo3 bash$ echo \" $( ls -al ) \" total 24 drwxr-xr-x 5 kacperwang staff 170 1 22 16 :47 . drwxr-xr-x 5 kacperwang staff 170 1 22 13 :29 .. -rwxr-xr-x 1 kacperwang staff 58 1 22 16 :20 demo1 -rwxr-xr-x 1 kacperwang staff 325 1 22 16 :39 demo2 -rwxr-xr-x 1 kacperwang staff 899 1 22 17 :16 demo3 \u5355\u5f15\u53f7 str = 'this is a string' \u5355\u5f15\u53f7\u91cc\u7684\u4efb\u4f55\u5b57\u7b26\u90fd\u4f1a\u539f\u6837\u8f93\u51fa\uff0c\u5355\u5f15\u53f7\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u662f\u65e0\u6548\u7684 \u5355\u5f15\u53f7\u5b57\u4e32\u4e2d\u4e0d\u80fd\u51fa\u73b0\u5355\u5f15\u53f7\uff08\u5bf9\u5355\u5f15\u53f7\u4f7f\u7528\u8f6c\u4e49\u7b26\u540e\u4e5f\u4e0d\u884c\uff09 \u53cc\u5f15\u53f7 your_name = 'qinjx' str = \"Hello, I know your are \\\" $your_name \\\"! \\n\" \u53cc\u5f15\u53f7\u91cc\u53ef\u4ee5\u6709\u53d8\u91cf \u53cc\u5f15\u53f7\u91cc\u53ef\u4ee5\u51fa\u73b0\u8f6c\u4e49\u5b57\u7b26","title":"\u5f15\u53f7"},{"location":"Linux/#_41","text":"\u547d\u4ee4\u66ff\u6362\"`\"\uff0c\u5c06\u4f1a\u91cd\u65b0\u5206\u914d\u4e00\u4e2a\u547d\u4ee4\u751a\u81f3\u662f\u591a\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff1b\u5b83\u4f1a\u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u5982\u5b9e\u5730\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u4e0a\u4e0b\u6587\u4e2d\u3002 demo4 script_name = ` basename $0 ` echo \"The name of this script is $script_name .\" textfile_listing = ` ls * ` # \u53d8\u91cf\u4e2d\u5305\u542b\u4e86\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e0b\u6240\u6709\u7684*\u6587\u4ef6 echo $textfile_listing \u901a\u8fc7\u8fd9\u4e2a\u7b26\u53f7\uff0c\u6279\u91cf\u5220\u9664\u6587\u4ef6 rm ` cat filename ` # \"filename\" \u5305\u542b\u4e86\u9700\u8981\u88ab\u5220\u9664\u7684\u6587\u4ef6\u5217\u8868 # \u53ef\u80fd\u4f1a\u4ea7\u751f\"\u53c2\u6570\u5217\u8868\u592a\u957f\"\u7684\u9519\u8bef # \u66f4\u597d\u7684\u65b9\u6cd5\u662f xargs rm -- < filename # ( -- \u540c\u65f6\u8986\u76d6\u4e86\u90a3\u4e9b\u4ee5\"-\"\u5f00\u5934\u7684\u6587\u4ef6\u6240\u4ea7\u751f\u7684\u7279\u6b8a\u60c5\u51b5 )","title":"\u547d\u4ee4\u66ff\u6362"},{"location":"Linux/#_42","text":"","title":"\u64cd\u4f5c\u7b26"},{"location":"Linux/#_43","text":"\u53d8\u91cf\u8d4b\u503c\uff0c\u521d\u59cb\u5316\u6216\u6539\u53d8\u4e00\u4e2a\u53d8\u91cf\u7684\u503c\uff0c\u901a\u7528\u7684\u53d8\u91cf\u8d4b\u503c\u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u7528\u4e8e\u6570\u503c\u548c\u5b57\u7b26\u4e32\u7684\u8d4b\u503c var = 27 category = minerals # \"=\"\u5b57\u7b26\u540e\u9762\u4e0d\u80fd\u52a0\u7a7a\u767d\u5b57\u7b26. \u4e0d\u8981\u628a\"=\"\u8d4b\u503c\u64cd\u4f5c\u7b26\u548c = \u6d4b\u8bd5\u64cd\u4f5c\u7b26\u641e\u6df7\u4e86\u3002 # = \u7528\u4e8e\u6d4b\u8bd5\u64cd\u4f5c\u7b26 if [ \" $string1 \" = \" $string2 \" ] # if [ \"X$string1\" = \"X$string2\" ] \u4f1a\u66f4\u5b89\u5168, # \u5b83\u4e3a\u4e86\u9632\u6b62\u5176\u4e2d\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e3a\u7a7a\u65f6\u4ea7\u751f\u9519\u8bef\u4fe1\u606f. # (\u589e\u52a0\u7684\"X\"\u5b57\u7b26\u53ef\u4ee5\u4e92\u76f8\u62b5\u6d88.) then command fi","title":"\u8d4b\u503c"},{"location":"Linux/#_44","text":"\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 + \u52a0 / \u9664 ** \u6c42\u5e42 - \u51cf * \u4e58 % \u6c42\u6a21 demo6 # Bash\u5728\u7248\u672c2.02\u5f15\u5165\u4e86\"**\"\u6c42\u5e42\u64cd\u4f5c\u7b26. let \"z=5**3\" echo \"z = $z \" # z = 125 # \u6c42\u6a21\uff08\u5b83\u8fd4\u56de\u6574\u6570\u6574\u9664\u4e00\u4e2a\u6570\u540e\u7684\u4f59\u6570\uff09 let \"y=5 % 3\" echo \"y = $y \" # y = 2 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 += \u52a0\u7b49(plus-equal) \u628a\u539f\u53d8\u91cf\u503c\u589e\u52a0\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf -= \u51cf\u7b49(minus-equal) \u628a\u539f\u53d8\u91cf\u503c\u51cf\u5c11\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf *= \u4e58\u7b49(times-equal) \u628a\u539f\u53d8\u91cf\u503c\u4e58\u4e0a\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf /= \u9664\u7b49(slash-equal) \u628a\u539f\u53d8\u91cf\u503c\u9664\u4ee5\u4e00\u4e2a\u5e38\u91cf\u5e76\u91cd\u65b0\u8d4b\u503c\u7ed9\u53d8\u91cf %= \u6a21\u7b49(mod-equal) \u628a\u539f\u53d8\u91cf\u503c\u9664\u4ee5\u4e00\u4e2a\u5e38\u91cf\u6574\u9664\uff08\u5373\u53d6\u6a21\uff09\u5e76\u91cd\u65b0\u8d4b\u4f59\u6570\u7684\u503c\u7ed9\u53d8\u91cf let \"var += 5\" # \u4f1a\u4f7f\u53d8\u91cfvar\u503c\u52a0\u4e865\u5e76\u628a\u503c\u8d4b\u7ed9var. let \"var *= 4\" # \u4f7f\u53d8\u91cfvar\u7684\u503c\u4e58\u4e0a4\u5e76\u628a\u503c\u8d4b\u7ed9var. \u4f8b\u5b50\uff1a - \u752810\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u8ba1\u6570\u523011 - \u6700\u5927\u516c\u7ea6\u6570 - \u6574\u6570\u53d8\u91cf\u7b26\u53f7\u7684\u957f\u6574\u6570\u6d4b\u8bd5 \uff0c\u52302.05b\u7248\u672c\u4e3a\u6b62\uff0cBash\u652f\u630164\u4f4d\u7684\u6574\u6570\uff0c\u4ee5\u524d\u7684\u7248\u672c\u4f1a\u6709\u957f\u5ea6\u6ea2\u51fa\u9519\u8bef\u3002 - Bash\u4e0d\u80fd\u5904\u7406\u6d6e\u70b9\u8ba1\u7b97,\u5b83\u4f1a\u628a\u542b\u6709\u5c0f\u6570\u70b9\u7684\u6570\u5f53\u6210\u5b57\u7b26\u4e32\u3002","title":"\u8ba1\u7b97\u64cd\u4f5c\u7b26"},{"location":"Linux/#_45","text":"\u4f4d\u64cd\u4f5c\u7b26\u5f88\u5c11\u5728\u811a\u672c\u4e2d\u4f7f\u7528\u3002\u4ed6\u4eec\u4e3b\u8981\u7528\u4e8e\u64cd\u4f5c\u548c\u6d4b\u8bd5\u4ece\u7aef\u53e3\u6216sockets\u4e2d\u8bfb\u5230\u7684\u6570\u636e\u3002\u201c\u4f4d\u8fd0\u7b97\u201d\u66f4\u591a\u5730\u7528\u4e8e\u7f16\u8bd1\u578b\u7684\u8bed\u8a00\uff0c\u6bd4\u5982\u8bf4C\u548cC++\uff0c\u5b83\u4eec\u8fd0\u884c\u8d77\u6765\u5feb\u5730\u50cf\u98de\u3002 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 << \u4f4d\u5de6\u79fb\uff08\u6bcf\u79fb\u4e00\u4f4d\u76f8\u5f53\u4e58\u4ee52\uff09 | \u4f4d\u6216 <<= \u4f4d\u5de6\u79fb\u8d4b\u503c |= \u4f4d\u6216\u8d4b\u503c >> \u4f4d\u53f3\u79fb\uff08\u6bcf\u79fb\u4e00\u4f4d\u76f8\u5f53\u9664\u4ee52\uff09 ~ \u4f4d\u53cd >>= \"\u4f4d\u53f3\u79fb\u8d4b\u503c\"\uff08\u548c<<=\u76f8\u53cd\uff09 ! \u4f4d\u975e & \u4f4d\u4e0e ^ \u4f4d\u6216 &= \u4f4d\u4e8e\u8d4b\u503c ^= \u4f4d\u6216\u8d4b\u503c # <<= # \"\u4f4d\u5de6\u79fb\u8d4b\u503c\" let \"var <<= 2\" \u7ed3\u679c\u4f7fvar\u7684\u4e8c\u8fdb\u5236\u503c\u5de6\u79fb\u4e86\u4e8c\u4f4d\uff08\u76f8\u5f53\u4e8e\u4e58\u4ee54\uff09 \u903b\u8f91\u64cd\u4f5c\u7b26 \u903b\u8f91\u4e0e && if [ $condition1 ] && [ $condition2 ] # \u7b49\u540c\u4e8e: if [ $condition1 -a $condition2 ] # \u5982\u679ccondition1\u548ccondition2\u90fd\u4e3a\u771f\u5219\u8fd4\u56de\u771f... fi ; if [[ $condition1 && $condition2 ]] # Also works. # \u6ce8\u610f&&\u64cd\u4f5c\u4e0d\u80fd\u5728[ ... ]\u7ed3\u6784\u4e2d\u4f7f\u7528. fi ; \u903b\u8f91\u6216 || if [ $condition1 ] || [ $condition2 ] # \u7b49\u540c\u4e8e: if [ $condition1 -o $condition2 ] # \u5982\u679ccondition1\u548ccondition2\u6709\u4e00\u4e2a\u4e3a\u771f\u5219\u8fd4\u56de\u771f... fi ; if [[ $condition1 || $condition2 ]] # Also works. # \u6ce8\u610f||\u64cd\u4f5c\u4e0d\u80fd\u5728[ ... ]\u7ed3\u6784\u4e2d\u4f7f\u7528. fi ; \u4f7f\u7528&&\u548c||\u8fdb\u884c\u6df7\u5408\u6761\u4ef6\u6d4b\u8bd5 demo11 \u3002\u5728\u7b97\u672f\u8ba1\u7b97\u7684\u73af\u5883\u4e2d\uff0c&&\u548c||\u64cd\u4f5c\u7b26\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 bash$ echo $(( 1 && 2 )) $((3 && 0)) $((4 || 0)) $((0 || 0)) 1 0 1 0","title":"\u4f4d\u64cd\u4f5c\u7b26"},{"location":"Linux/#_46","text":"\u9017\u53f7 , \u64cd\u4f5c\u7b26\u8fde\u63a5\u4e24\u4e2a\u6216\u66f4\u591a\u7684\u7b97\u672f\u64cd\u4f5c\u3002\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u88ab\u6c42\u503c(\u53ef\u80fd\u4f1a\u6709\u526f\u4f5c\u7528)\uff0c\u4f46\u53ea\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ed3\u6784\u3002 demo5 let \"t1 = ((5 + 3, 7 - 1, 15 - 4))\" echo \"t1 = $t1 \" # t1 = 11 let \"t2 = ((a = 9, 15 / 3))\" # \u521d\u59cb\u5316\"a\"\u5e76\u6c42\"t2\"\u7684\u503c. echo \"t2 = $t2 a = $a \" # t2 = 5 a = 9","title":"\u9017\u53f7\u64cd\u4f5c\u7b26"},{"location":"Linux/#_47","text":"\u53d8\u91cf\uff0c\u662f\u811a\u672c\u7f16\u7a0b\u4e2d\u7684\u5982\u4f55\u8fdb\u884c\u6570\u636e\u8868\u73b0\u7684\u529e\u6cd5\u3002\u5b83\u4eec\u53ef\u4ee5\u5728\u7b97\u672f\u8ba1\u7b97\u4e2d\u4f5c\u4e3a\u64cd\u4f5c\u6570\uff0c\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u8fbe\u5f0f\u4e2d\u4f5c\u4e3a\u7b26\u53f7\u8868\u8fbe\u62bd\u8c61\u7684\u610f\u4e49\u6216\u662f\u5176\u4ed6\u7684\u5176\u5b83\u610f\u4e49\u3002\u53d8\u91cf\u662f\u8868\u793a\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\u4fdd\u5b58\u4e00\u79cd\u6570\u636e\u9700\u8981\u5360\u7684\u4e00\u4e2a\u4f4d\u7f6e\u6216\u4e00\u7ec4\u7684\u4f4d\u7f6e\u7684\u6807\u8bc6\u3002","title":"\u53d8\u91cf"},{"location":"Linux/#_48","text":"\u5982\u679cvariable1\u662f\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u90a3\u4e48$variable1\u5c31\u662f\u5f15\u7528\u8fd9\u4e2a\u53d8\u91cf\u7684\u503c\u2015\u2015\u5373\u8fd9\u4e2a\u53d8\u91cf\u5b83\u5305\u542b\u7684\u6570\u636e\u3002 \u53d8\u91cf\u8d4b\u503c\u4e0e\u66ff\u6362\u4f8b\u5b50 t1 = 12 echo $t1 \u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u6709\u4e00\u4e2a\u201dnull\u201d\u503c\u2015\u2015\u8868\u793a\u4ece\u6ca1\u6709\u88ab\u8d4b\u503c\u8fc7\uff08\u6ce8\u610fnull\u503c\u4e0d\u7b49\u4e8e\u96f6\uff09\u3002\u5728\u4e00\u4e2a\u53d8\u91cf\u4ece\u672a\u8d4b\u503c\u4e4b\u524d\u5c31\u4f7f\u7528\u5b83\u901a\u5e38\u4f1a\u5f15\u8d77\u95ee\u9898\u3002\u7136\u800c\uff0c\u4ecd\u7136\u6709\u53ef\u80fd\u5728\u6267\u884c\u7b97\u672f\u8ba1\u7b97\u65f6\u4f7f\u7528\u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u3002 echo \" $uninitialized \" # (blank line) let \"uninitialized += 5\" # Add 5 to it. echo \" $uninitialized \" # 5 # \u7ed3\u8bba: # \u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u6ca1\u6709\u503c\uff0c #+ \u4f46\u662f\u4f3c\u4e4e\u5b83\u5728\u7b97\u672f\u8ba1\u7b97\u4e2d\u7684\u503c\u662f\u96f6\u3002 # \u8fd9\u4e2a\u65e0\u6cd5\u8bc1\u5b9e\uff08\u4e5f\u53ef\u80fd\u662f\u4e0d\u53ef\u79fb\u690d\uff09\u7684\u884c\u4e3a\u3002","title":"\u53d8\u91cf\u503c"},{"location":"Linux/#_49","text":"# \u53d8\u91cf\u540d\u4e0d\u52a0\u7f8e\u5143\u7b26\u53f7 your_var = \"elaine\" # \u91cd\u65b0\u5b9a\u4e49 your_var = \"newname\" \u6ce8\u610f\u26a0\ufe0f \u9996\u4e2a\u5b57\u7b26\u5fc5\u987b\u4e3a\u5b57\u6bcd\uff08a-z\uff0cA-Z\uff09\u3002 \u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08_\uff09\uff0c\u7b49\u53f7\u5de6\u53f3\u4e5f\u4e0d\u80fd\u6709\u7a7a\u683c\u3002 \u4e0d\u80fd\u4f7f\u7528\u6807\u70b9\u7b26\u53f7\u3002 \u4e0d\u80fd\u4f7f\u7528bash\u91cc\u7684\u5173\u952e\u5b57\uff08\u53ef\u7528help\u547d\u4ee4\u67e5\u770b\u4fdd\u7559\u5173\u952e\u5b57\uff09\u3002","title":"\u5b9a\u4e49\u53d8\u91cf"},{"location":"Linux/#_50","text":"#!/bin/bash github = \"https://jaywcjlove.github.io\" readonly github github = \"https://www.github.com\" # \u8fd0\u884c\u811a\u672c\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a /bin/sh: NAME: This variable is read only.","title":"\u53ea\u8bfb\u53d8\u91cf"},{"location":"Linux/#_51","text":"your_var = \"github\" echo $your_var echo ${ your_var } echo \"your name is ${ your_var } -l\"","title":"\u4f7f\u7528\u53d8\u91cf"},{"location":"Linux/#unset","text":"\u53d8\u91cf\u88ab\u5220\u9664\u540e\u4e0d\u80fd\u518d\u6b21\u4f7f\u7528\u3002unset \u547d\u4ee4\u4e0d\u80fd\u5220\u9664\u53ea\u8bfb\u53d8\u91cf\u3002 myUrl = \"https://jaywcjlove.github.io\" unset myUrl echo $myUrl","title":"\u5220\u9664\u53d8\u91cfunset"},{"location":"Linux/#_52","text":"\u4e0d\u540c\u4e0e\u8bb8\u591a\u5176\u4ed6\u7684\u7f16\u7a0b\u8bed\u8a00\uff0cBash\u4e0d\u4ee5\"\u7c7b\u578b\"\u6765\u533a\u5206\u53d8\u91cf\u3002\u672c\u8d28\u4e0a\u6765\u8bf4\uff0cBash\u53d8\u91cf\u662f\u5b57\u7b26\u4e32\uff0c\u4f46\u662f\u6839\u636e\u73af\u5883\u7684\u4e0d\u540c\uff0cBash\u5141\u8bb8\u53d8\u91cf\u6709\u6574\u6570\u8ba1\u7b97\u548c\u6bd4\u8f83\u3002\u5176\u4e2d\u7684\u51b3\u5b9a\u56e0\u7d20\u662f\u53d8\u91cf\u7684\u503c\u662f\u4e0d\u662f\u53ea\u542b\u6709\u6570\u5b57\u3002 \u5c40\u90e8\u53d8\u91cf \u5c40\u90e8\u53d8\u91cf\u5728\u811a\u672c\u6216\u547d\u4ee4\u4e2d\u5b9a\u4e49\uff0c\u4ec5\u5728\u5f53\u524dshell\u5b9e\u4f8b\u4e2d\u6709\u6548\uff0c\u5176\u4ed6shell\u542f\u52a8\u7684\u7a0b\u5e8f\u4e0d\u80fd\u8bbf\u95ee\u5c40\u90e8\u53d8\u91cf\u3002 \u73af\u5883\u53d8\u91cf \u6240\u6709\u7684\u7a0b\u5e8f\uff0c\u5305\u62ecshell\u542f\u52a8\u7684\u7a0b\u5e8f\uff0c\u90fd\u80fd\u8bbf\u95ee\u73af\u5883\u53d8\u91cf\uff0c\u6709\u4e9b\u7a0b\u5e8f\u9700\u8981\u73af\u5883\u53d8\u91cf\u6765\u4fdd\u8bc1\u5176\u6b63\u5e38\u8fd0\u884c\u3002\u5fc5\u8981\u7684\u65f6\u5019shell\u811a\u672c\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u73af\u5883\u53d8\u91cf\u3002 shell\u53d8\u91cf shell\u53d8\u91cf\u662f\u7531shell\u7a0b\u5e8f\u8bbe\u7f6e\u7684\u7279\u6b8a\u53d8\u91cf\u3002shell\u53d8\u91cf\u4e2d\u6709\u4e00\u90e8\u5206\u662f\u73af\u5883\u53d8\u91cf\uff0c\u6709\u4e00\u90e8\u5206\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u4fdd\u8bc1\u4e86shell\u7684\u6b63\u5e38\u8fd0\u884c","title":"\u53d8\u91cf\u7c7b\u578b"},{"location":"Linux/#_53","text":"\u5185\u90e8\u53d8\u91cf \u8bf4\u660e $BASH Bash\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6587\u4ef6\u7684\u8def\u5f84 $BASH_ENV \u8be5\u73af\u5883\u53d8\u91cf\u4fdd\u5b58\u4e00\u4e2aBash\u542f\u52a8\u6587\u4ef6\u8def\u5f84\uff0c\u5f53\u542f\u52a8\u4e00\u4e2a\u811a\u672c\u7a0b\u5e8f\u65f6\u4f1a\u53bb\u8bfb\u8be5\u73af\u5883\u53d8\u91cf\u6307\u5b9a\u7684\u6587\u4ef6\u3002 $BASH_SUBSHELL \u4e00\u4e2a\u6307\u793a\u5b50shell(subshell)\u7b49\u7ea7\u7684\u53d8\u91cf\u3002\u5b83\u662fBash\u7248\u672c3\u65b0\u52a0\u5165\u7684\u3002 $BASH_VERSINFO[n] \u8fd9\u4e2a\u6570\u7ec4\u542b\u67096\u4e2a\u5143\u7d20\uff0c\u6307\u793a\u4e86\u5b89\u88c5\u7684Bash\u7248\u672c\u7684\u4fe1\u606f\u3002\u5b83\u548c$BASH_VERSION\u76f8\u4f3c\uff0c\u4f46\u5b83\u4eec\u8fd8\u662f\u6709\u4e00\u4e9b\u5c0f\u5c0f\u7684\u4e0d\u540c\u3002 $BASH_VERSION \u5b89\u88c5\u5728\u7cfb\u7edf\u91cc\u7684Bash\u7248\u672c\u3002 $DIRSTACK \u5728\u76ee\u5f55\u5806\u6808\u91cc\u9762\u6700\u9876\u7aef\u7684\u503c(\u5b83\u53d7pushd\u548cpopd\u7684\u63a7\u5236) $EDITOR \u7531\u811a\u672c\u8c03\u7528\u7684\u9ed8\u8ba4\u7684\u7f16\u8f91\u5668\uff0c\u4e00\u822c\u662fvi\u6216\u662femacs\u3002 $EUID \u6709\u6548\u7528\u6237ID $FUNCNAME \u5f53\u524d\u51fd\u6570\u7684\u540d\u5b57 $GLOBIGNORE \u7531\u901a\u914d\u7b26(globbing)\u6269\u5c55\u7684\u4e00\u5217\u6587\u4ef6\u540d\u6a21\u5f0f\u3002 $GROUPS \u76ee\u524d\u7528\u6237\u6240\u5c5e\u7684\u7ec4 $HOME \u7528\u6237\u7684\u5bb6\u76ee\u5f55\uff0c\u901a\u5e38\u662f/home/username $HOSTNAME \u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u7531\u4e00\u4e2a\u521d\u59cb\u5316\u811a\u672c\u4e2d\u7528hostname\u547d\u4ee4\u7ed9\u7cfb\u7edf\u6307\u6d3e\u4e00\u4e2a\u540d\u5b57\u3002\u7136\u800c\uff0cgethostname()\u51fd\u6570\u80fd\u8bbe\u7f6eBash\u5185\u90e8\u53d8\u91cfE$HOSTNAME\u3002 $HOSTTYPE \u673a\u5668\u7c7b\u578b\uff0c\u50cf$MACHTYPE\u4e00\u6837\u6807\u8bc6\u7cfb\u7edf\u786c\u4ef6\u3002 $IFS \u5185\u90e8\u5b57\u6bb5\u5206\u9694\u7b26 $IGNOREEOF \u5ffd\u7565EOF\uff1a\u5728\u9000\u51fa\u63a7\u5236\u53f0\u524d\u6709\u591a\u5c11\u6587\u4ef6\u7ed3\u5c3e\u6807\u8bc6\uff08end-of-files,control-D\uff09\u4f1a\u88abshell\u5ffd\u7565\u3002 $LC_COLLATE \u5b83\u5e38\u5e38\u5728.bashrc\u6216/etc/profile\u6587\u4ef6\u91cc\u88ab\u8bbe\u7f6e\uff0c\u5b83\u63a7\u5236\u6587\u4ef6\u540d\u6269\u5c55\u548c\u6a21\u5f0f\u5339\u914d\u7684\u5c55\u5f00\u987a\u5e8f\u3002 $LINENO \u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u5728\u672cshell\u811a\u672c\u4e2d\u8be5\u53d8\u91cf\u51fa\u73b0\u65f6\u6240\u5728\u7684\u884c\u6570\u3002\u5b83\u53ea\u5728\u811a\u672c\u4e2d\u5b83\u51fa\u73b0\u65f6\u6709\u610f\u4e49\uff0c\u5b83\u4e00\u822c\u53ef\u7528\u4e8e\u8c03\u8bd5\u3002 $MACHTYPE \u673a\u5668\u7c7b\u578b\uff0c\u8bc6\u522b\u7cfb\u7edf\u7684\u786c\u4ef6\u7c7b\u578b\u3002 $OLDPWD \u4e0a\u4e00\u6b21\u5de5\u4f5c\u7684\u76ee\u5f55(\"OLD-print-working-directory\",\u4f60\u4e0a\u4e00\u6b21\u8fdb\u5165\u5de5\u4f5c\u7684\u76ee\u5f55) $TZ \u65f6\u533a $MAILCHECK \u6bcf\u9694\u591a\u5c11\u79d2\u68c0\u67e5\u662f\u5426\u6709\u65b0\u7684\u4fe1\u4ef6 $OSTYPE \u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b $MANPATH man \u6307\u4ee4\u7684\u641c\u5bfb\u8def\u5f84 $PATH \u53ef\u6267\u884c\u7a0b\u5e8f\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\u3002\u4e00\u822c\u6709/usr/bin/, /usr/X11R6/bin/, /usr/local/bin,\u7b49\u7b49\u3002 $PIPESTATUS \u6b64\u6570\u7ec4\u53d8\u91cf\u4fdd\u5b58\u4e86\u6700\u540e\u6267\u884c\u7684\u524d\u53f0\u7ba1\u9053\u7684\u9000\u51fa\u72b6\u6001\u3002\u76f8\u5f53\u6709\u8da3\u7684\u662f\uff0c\u5b83\u4e0d\u4e00\u5b9a\u548c\u6700\u540e\u6267\u884c\u7684\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u4e00\u6837\u3002 $PPID \u4e00\u4e2a\u8fdb\u7a0b\u7684$PPID\u53d8\u91cf\u4fdd\u5b58\u5b83\u7684\u7236\u8fdb\u7a0b\u7684\u8fdb\u7a0bID(pid)\u3002\u7528\u8fd9\u4e2a\u53d8\u91cf\u548cpidof\u547d\u4ee4\u6bd4\u8f83\u3002 $PROMPT_COMMAND \u8fd9\u4e2a\u53d8\u91cf\u5728\u4e3b\u63d0\u793a\u7b26\u524d($PS1\u663e\u793a\u4e4b\u524d)\u6267\u884c\u5b83\u7684\u503c\u91cc\u4fdd\u5b58\u7684\u547d\u4ee4\u3002 $PS1 \u8fd9\u662f\u4e3b\u63d0\u793a\u7b26\uff08\u7b2c\u4e00\u63d0\u793a\u7b26\uff09\uff0c\u5b83\u80fd\u5728\u547d\u4ee4\u884c\u4e0a\u770b\u89c1\u3002 $PS2 \u526f\u63d0\u793a\u7b26\uff08\u7b2c\u4e8c\u63d0\u793a\u7b26\uff09\uff0c\u5b83\u5728\u671f\u671b\u6709\u9644\u52a0\u7684\u8f93\u5165\u65f6\u80fd\u770b\u89c1\u3002\u5b83\u663e\u793a\u50cf\">\"\u7684\u63d0\u793a\u3002 $PS3 \u7b2c\u4e09\u63d0\u793a\u7b26\u3002\u5b83\u5728\u4e00\u4e2aselect\u5faa\u73af\u91cc\u663e\u793a (\u53c2\u8003\u4f8b\u5b50 10-29)\u3002 $PS4 \u7b2c\u56db\u63d0\u793a\u7b26\uff0c\u5b83\u5728\u7528-x\u9009\u9879\u8c03\u7528\u4e00\u4e2a\u811a\u672c\u65f6\u7684\u8f93\u51fa\u7684\u6bcf\u4e00\u884c\u5f00\u5934\u663e\u793a\u3002\u5b83\u901a\u5e38\u663e\u793a\u50cf\"+\"\u7684\u63d0\u793a\u3002 $PWD \u5de5\u4f5c\u76ee\u5f55(\u5373\u4f60\u73b0\u5728\u6240\u5904\u7684\u76ee\u5f55) \uff0c\u5b83\u7c7b\u4f3c\u4e8e\u5185\u5efa\u547d\u4ee4pwd\u3002 $REPLY \u6ca1\u6709\u53d8\u91cf\u63d0\u4f9b\u7ed9read\u547d\u4ee4\u65f6\u7684\u9ed8\u8ba4\u53d8\u91cf\uff0e\u8fd9\u4e5f\u9002\u7528\u4e8eselect\u547d\u4ee4\u7684\u76ee\u5f55\uff0c\u4f46\u53ea\u662f\u63d0\u4f9b\u88ab\u9009\u62e9\u7684\u53d8\u91cf\u9879\u76ee\u7f16\u53f7\u800c\u4e0d\u662f\u53d8\u91cf\u672c\u8eab\u7684\u503c\u3002 $SECONDS \u811a\u672c\u5df2\u8fd0\u884c\u7684\u79d2\u6570\u3002 $SHELLOPTS \u5df2\u7ecf\u6fc0\u6d3b\u7684shell\u9009\u9879\u5217\u8868\uff0c\u5b83\u662f\u4e00\u4e2a\u53ea\u8bfb\u53d8\u91cf\u3002 $SHLVL SHELL\u7684\u5d4c\u5957\u7ea7\u522b\uff0e\u6307\u793a\u4e86Bash\u88ab\u5d4c\u5957\u4e86\u591a\u6df1\uff0e\u5728\u547d\u4ee4\u884c\u91cc\uff0c$SHLVL\u662f1\uff0c\u56e0\u6b64\u5728\u4e00\u4e2a\u811a\u672c\u91cc\uff0c\u5b83\u662f2 $TMOUT \u5982\u679c$TMOUT\u73af\u5883\u53d8\u91cf\u88ab\u8bbe\u4e3a\u975e\u96f6\u503c\u65f6\u95f4\u503ctime\uff0c\u90a3\u4e48\u7ecf\u8fc7time\u8fd9\u4e48\u957f\u7684\u65f6\u95f4\u540e\uff0cshell\u63d0\u793a\u7b26\u4f1a\u8d85\u65f6\uff0e\u8fd9\u5c06\u4f7f\u6b64shell\u9000\u51fa\u767b\u5f55 $UID \u7528\u6237ID\u53f7\uff0c\u8fd9\u662f\u5f53\u524d\u7528\u6237\u7684\u7528\u6237\u6807\u8bc6\u53f7\uff0c\u5b83\u5728/etc/passwd\u6587\u4ef6\u4e2d\u8bb0\u5f55\u3002","title":"\u5185\u90e8\u53d8\u91cf"},{"location":"Linux/#_54","text":"\u53c2\u6570\u5904\u7406 \u8bf4\u660e $# \u4f20\u9012\u5230\u811a\u672c\u7684\u53c2\u6570\u4e2a\u6570 $* \u4ee5\u4e00\u4e2a\u5355\u5b57\u7b26\u4e32\u663e\u793a\u6240\u6709\u5411\u811a\u672c\u4f20\u9012\u7684\u53c2\u6570\u3002\u5982\"\u2217\"\u7528\u300c\"\u300d\u62ec\u8d77\u6765\u7684\u60c5\u51b5\u3001\u4ee5\"1 2\u2026n\"\u7684\u5f62\u5f0f\u8f93\u51fa\u6240\u6709\u53c2\u6570\u3002 $$ \u811a\u672c\u8fd0\u884c\u7684\u5f53\u524d\u8fdb\u7a0bID\u53f7 $! \u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u7684ID\u53f7 $@ \u4e0e\u2217\u76f8\u540c\uff0c\u4f46\u662f\u4f7f\u7528\u65f6\u52a0\u5f15\u53f7\uff0c\u5e76\u5728\u5f15\u53f7\u4e2d\u8fd4\u56de\u6bcf\u4e2a\u53c2\u6570\u3002\u5982\"@\"\u7528\u300c\"\u300d\u62ec\u8d77\u6765\u7684\u60c5\u51b5\u3001\u4ee5\"1\"\"2\" \u2026 \"$n\" \u7684\u5f62\u5f0f\u8f93\u51fa\u6240\u6709\u53c2\u6570\u3002 $- \u663e\u793aShell\u4f7f\u7528\u7684\u5f53\u524d\u9009\u9879\uff0c\u4e0eset\u547d\u4ee4\u529f\u80fd\u76f8\u540c\u3002 $? \u663e\u793a\u6700\u540e\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u30020\u8868\u793a\u6ca1\u6709\u9519\u8bef\uff0c\u5176\u4ed6\u4efb\u4f55\u503c\u8868\u660e\u6709\u9519\u8bef\u3002","title":"\u4f4d\u7f6e\u53c2\u6570"},{"location":"Linux/#_55","text":"** \\({parameter}**\uff1a\u548c\\) parameter\u662f\u76f8\u540c\u7684\uff0c\u90fd\u662f\u8868\u793a\u53d8\u91cfparameter\u7684\u503c\uff0c\u53ef\u4ee5\u628a\u53d8\u91cf\u548c\u5b57\u7b26\u4e32\u8fde\u63a5\u3002 your_id = ${ USER } -on- ${ HOSTNAME } echo \" $your_id \" # echo \"Old \\$PATH = $PATH \" PATH = ${ PATH } :/opt/bin #\u5728\u811a\u672c\u7684\u751f\u5b58\u671f\u5185\uff0c\u80fd\u989d\u5916\u589e\u52a0\u8def\u5f84/opt/bin\u5230\u73af\u5883\u53d8\u91cf$PATH\u4e2d\u53bb. echo \"New \\$PATH = $PATH \" ${parameter-default}, ${parameter:-default} \uff1a\u5982\u679c\u53d8\u91cf\u6ca1\u6709\u88ab\u8bbe\u7f6e\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 ${parameter-default} \u548c ${parameter:-default} \u51e0\u4e4e\u662f\u76f8\u7b49\u7684\u3002\u5b83\u4eec\u4e4b\u95f4\u7684\u5dee\u522b\u662f\uff1a\u5f53\u4e00\u4e2a\u53c2\u6570\u5df2\u88ab\u58f0\u660e\uff0c\u4f46\u662f\u503c\u662fNULL\u7684\u65f6\u5019\u4e24\u8005\u4e0d\u540c\u3002 echo ${ username - ` whoami ` } # \u5982\u679c\u53d8\u91cf$username\u8fd8\u6ca1\u6709\u88ab\u8bbe\u7f6e\uff0c\u5219\u628a\u547d\u4ee4`whoami`\u7684\u7ed3\u679c\u8d4b\u7ed9\u8be5\u53d8\u91cf ${parameter=default}, ${parameter:=default} \uff1a\u5982\u679c\u53d8\u91cfparameter\u6ca1\u6709\u8bbe\u7f6e\uff0c\u628a\u5b83\u8bbe\u7f6e\u6210\u9ed8\u8ba4\u503c\u3002\u9664\u4e86\u5f15\u8d77\u7684\u5f53\u53d8\u91cf\u88ab\u58f0\u660e\u4e14\u503c\u662f\u7a7a\u503c\u65f6\u6709\u4e9b\u4e0d\u540c\u5916\uff0c\u4e24\u79cd\u5f62\u5f0f\u51e0\u4e4e\u76f8\u7b49\u3002 echo \"===== \\${parameter+alt_value} =====\" echo a = ${ param1 +xyz } ; echo \"a = $a \" # a = param2 = a = ${ param2 +xyz } echo \"a = $a \" # a = xyz param3 = 123 a = ${ param3 +xyz } echo \"a = $a \" # a = xyz echo echo \"====== \\${parameter:+alt_value} ======\" a = ${ param4 :+xyz } echo \"a = $a \" # a = param5 = a = ${ param5 :+xyz } echo \"a = $a \" # a = # \u4ea7\u751f\u4e0ea=${param5+xyz}\u4e0d\u540c\u3002 param6 = 123 a = ${ param6 +xyz } echo \"a = $a \" # a = xyz ${parameter?err_msg}, ${parameter:?err_msg} \uff1a\u5982\u679c\u53d8\u91cfparameter\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u8be5\u503c\uff0c\u5426\u5219\u6253\u5370err_msg\u9519\u8bef\u4fe1\u606f\u3002 demo20 #!/bin/bash # \u53d8\u91cf\u66ff\u6362\u548c\"usage\"\u4fe1\u606f : ${ 1 ? \"Usage: $0 ARGUMENT\" } # \u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u547d\u4ee4\u884c\u53c2\u6570\u5219\u811a\u672c\u5728\u8fd9\u513f\u5c31\u9000\u51fa\u4e86, #+ \u5e76\u6253\u5370\u4e86\u9519\u8bef\u4fe1\u606f. # usage-message.sh: 1: Usage: usage-message.sh ARGUMENT echo \"These two lines echo only if command-line parameter given.\" echo \"command line parameter = \\\" $1 \\\"\" exit 0 # \u4ec5\u5728\u547d\u4ee4\u884c\u53c2\u6570\u63d0\u4f9b\u65f6\uff0c\u624d\u4f1a\u5728\u8fd9\u513f\u9000\u51fa. # \u5206\u522b\u68c0\u67e5\u6709\u547d\u4ee4\u884c\u53c2\u6570\u548c\u6ca1\u6709\u547d\u4ee4\u884c\u53c2\u6570\u65f6\u7684\u9000\u51fa\u72b6\u6001\u3002 # \u5982\u679c\u6709\u547d\u4ee4\u884c\u53c2\u6570,\u5219\"$?\"\u4e3a0. # \u5426\u5219, \"$?\"\u4e3a1. ** \\({#var}**\uff1a\u5b57\u7b26\u4e32\u957f\u5ea6\uff08\u5373\u53d8\u91cf\\) var\u7684\u5b57\u7b26\u4e2a\u6570\uff09\u3002\u5bf9\u4e8e\u6570\u7ec4\u6765\u8bf4\uff0c${#array}\u662f\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5347\u5e8f\u3002 ${#*}\u548c${#@} \u8868\u793a\u4f4d\u7f6e\u53c2\u6570\u7684\u4e2a\u6570\u3002\u5bf9\u4e8e\u4e00\u4e2a\u6570\u7ec4\u6765\u8bf4\uff0c ${#array[*]} \u548c ${#array[@]} \u8868\u793a\u6570\u7ec4\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\u3002 E_NO_ARGS = 65 if [ $# -eq 0 ] # \u5fc5\u987b\u8981\u6709\u547d\u4ee4\u884c\u53c2\u6570\u7ed9\u8fd9\u4e2a\u6f14\u793a\u7a0b\u5e8f. then echo \"Please invoke this script with one or more command-line arguments.\" exit $E_NO_ARGS fi var01 = abcdEFGH28ij echo \"var01 = ${ var01 } \" echo \"Length of var01 = ${# var01 } \" # \u73b0\u5728,\u8ba9\u6211\u4eec\u5728\u53d8\u91cf\u503c\u5185\u5d4c\u5165\u4e00\u4e2a\u7a7a\u683c. var02 = \"abcd EFGH28ij\" echo \"var02 = ${ var02 } \" echo \"Length of var02 = ${# var02 } \" echo \"Number of command-line arguments passed to script = ${# @ } \" echo \"Number of command-line arguments passed to script = ${# * } \" exit 0 ${var##Pattern} \uff1a\u5220\u9664\u4ece \\(var\u524d\u7aef\u5f00\u59cb\u7684\u6700\u77ed\u6216\u6700\u957f\u5339\u914d\\) Pattern\u7684\u5b57\u7b26\u4e32\u3002 demo22 echo ` basename $PWD ` # \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u57fa\u672c\u540d\u5b57. echo \" ${ PWD ##*/ } \" # \u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u57fa\u672c\u540d\u5b57. echo echo ` basename $0 ` # \u811a\u672c\u540d. echo $0 # \u811a\u672c\u540d. echo \" ${ 0 ##*/ } \" # \u811a\u672c\u540d. echo filename = test.data echo \" ${ filename ##*. } \" # data # \u6587\u4ef6\u7684\u6269\u5c55\u540d.","title":"\u53c2\u6570\u66ff\u6362"},{"location":"Linux/#declaretypeset","text":"declare\u6216typeset\u5185\u5efa\u547d\u4ee4(\u5b83\u4eec\u662f\u5b8c\u5168\u76f8\u540c\u7684)\u53ef\u4ee5\u7528\u6765\u9650\u5b9a\u53d8\u91cf\u7684\u5c5e\u6027\u3002\u8fd9\u662f\u5728\u67d0\u4e9b\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4f7f\u7528\u7684\u5b9a\u4e49\u7c7b\u578b\u4e0d\u4e25\u683c\u7684\u65b9\u5f0f\u3002 \u547d\u4ee4declare\u662fbash\u7248\u672c2\u4e4b\u540e\u624d\u6709\u7684\u3002 \u547d\u4ee4typeset\u4e5f\u53ef\u4ee5\u5728ksh\u811a\u672c\u4e2d\u8fd0\u884c\u3002 \u9009\u9879 \u7528declare\u6765\u58f0\u660e\u53d8\u91cf\u7c7b\u578b \u53c2\u6570 \u8bf4\u660e \u4f8b\u5b50 -r \u53ea\u8bfb declare -r var1 -i \u6574\u6570 declare -i number;number=3; -a \u6570\u7ec4 declare -a indices -f \u51fd\u6570 declare -f \u4f1a\u5217\u51fa\u6240\u6709\u5728\u6b64\u811a\u672c\u524d\u9762\u5df2\u5b9a\u4e49\u7684\u51fd\u6570 -x export \u51fd\u8fd9\u6837\u5c06\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\u4f5c\u4e3a\u811a\u672c\u7684\u73af\u5883\u53d8\u91cf\u800c\u88ab\u5bfc\u51fa\u3002 declare -x var3 -x var=$value declare\u547d\u4ee4\u5141\u8bb8\u5728\u58f0\u660e\u53d8\u91cf\u7c7b\u578b\u7684\u65f6\u5019\u540c\u65f6\u7ed9\u53d8\u91cf\u8d4b\u503c\u3002 declare -x var3=373","title":"declare/typeset"},{"location":"Linux/#_56","text":"\u5047\u8bbe\u4e00\u4e2a\u53d8\u91cf\u7684\u503c\u662f\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\u3002\u8fd9\u6837\u8981\u5982\u4f55\u624d\u80fd\u4ece\u7b2c\u4e00\u4e2a\u53d8\u91cf\u5904\u91cd\u65b0\u83b7\u5f97\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u503c\uff1f\u4f8b\u5982\uff0c a=letter_of_alphabet \u548c letter_of_alphabet=z \uff0c\u662f\u5426\u80fd\u7531a\u5f15\u7528\u5f97\u5230z ? \u8fd9\u786e\u5b9e\u53ef\u4ee5\u529e\u5230\uff0c\u8fd9\u79cd\u6280\u672f\u88ab\u79f0\u4e3a\u95f4\u63a5\u5f15\u7528\u3002 a = letter_of_alphabet # \u53d8\u91cf\"a\"\u4fdd\u5b58\u7740\u53e6\u5916\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57. letter_of_alphabet = z # \u76f4\u63a5\u5f15\u7528. echo \"a = $a \" # a = letter_of_alphabet # \u95f4\u63a5\u5f15\u7528. eval a = \\$ $a echo \"Now a = $a \" # \u73b0\u5728 a = z exit 0","title":"\u53d8\u91cf\u95f4\u63a5\u5f15\u7528"},{"location":"Linux/#random","text":"$RANDOM\u662fBash\u7684\u4e00\u4e2a\u8fd4\u56de\u4f2a\u968f\u673a\u6574\u6570(\u8303\u56f4\u4e3a0 - 32767)\u7684\u5185\u90e8\u51fd\u6570(\u800c\u4e0d\u662f\u4e00\u4e2a\u5e38\u91cf\u6216\u53d8\u91cf)\uff0c\u5b83\u4e0d\u5e94\u8be5\u7528\u4e8e\u4ea7\u751f\u52a0\u5bc6\u7684\u5bc6\u94a5\u3002 demo25 # \u6a21\u62df\u63b7\u9ab0\u5b50. SPOTS = 6 # \u6a21\u9664 6 \u4f1a\u4ea7\u751f 0 - 5 \u4e4b\u95f4\u7684\u503c. # \u7ed3\u679c\u589e1\u4f1a\u4ea7\u751f 1 - 6 \u4e4b\u95f4\u7684\u503c. # \u591a\u8c22Paulo Marcel Coelho Aragao\u7684\u7b80\u5316. die1 = 0 die2 = 0 # \u8fd9\u4f1a\u6bd4\u4ec5\u8bbe\u7f6eSPOTS=7\u4e14\u4e0d\u589e1\u597d?\u4e3a\u4ec0\u4e48\u4f1a\u597d\uff1f\u4e3a\u4ec0\u4e48\u4f1a\u4e0d\u597d? # \u5355\u72ec\u5730\u63b7\u6bcf\u4e2a\u9ab0\u5b50\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u6b63\u786e\u7684\u673a\u7387. let \"die1 = $RANDOM % $SPOTS +1\" # \u63b7\u7b2c\u4e00\u4e2a. let \"die2 = $RANDOM % $SPOTS +1\" # \u63b7\u7b2c\u4e8c\u4e2a. # \u4e0a\u9762\u7684\u7b97\u672f\u5f0f\u4e2d\uff0c\u54ea\u4e2a\u64cd\u4f5c\u7b26\u4f18\u5148\u8ba1\u7b97 -- #+ \u53d6\u6a21 (%) \u8fd8\u662f \u52a0\u6cd5 (+)? let \"throw = $die1 + $die2 \" echo \"Throw of the dice = $throw \" exit 0","title":"$RANDOM"},{"location":"Linux/#_57","text":"\u7528 ((...)) \u7ed3\u6784\u6765\u4f7f\u7528C\u98ce\u683c\u64cd\u4f5c\u7b26\u6765\u5904\u7406\u53d8\u91cf\u3002 demo26 (( a = 23 )) # \u4ee5C\u98ce\u683c\u6765\u8bbe\u7f6e\u4e00\u4e2a\u503c\uff0c\u5728\"=\"\u4e24\u8fb9\u53ef\u4ee5\u6709\u7a7a\u683c. echo \"a (initial value) = $a \" (( a++ )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u540e\u81ea\u589e. echo \"a (after a++) = $a \" (( a-- )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u540e\u81ea\u51cf. echo \"a (after a--) = $a \" (( ++a )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u524d\u81ea\u589e. echo \"a (after ++a) = $a \" (( --a )) # C\u98ce\u683c\u7684\u8ba1\u7b97\u524d\u81ea\u51cf. echo \"a (after --a) = $a \" \u8f6c\u4e49\u5b57\u7b26 \u5728\u5355\u4e2a\u5b57\u7b26\u524d\u9762\u7684\u8f6c\u4e49\u7b26 \\ \u544a\u8bc9shell\u4e0d\u5fc5\u7279\u6b8a\u89e3\u91ca\u8fd9\u4e2a\u5b57\u7b26\uff0c\u53ea\u628a\u5b83\u5f53\u6210\u5b57\u9762\u4e0a\u7684\u610f\u601d\u3002\u4f46\u5728\u4e00\u4e9b\u547d\u4ee4\u548c\u8f6f\u4ef6\u5305\u91cc\uff0c\u6bd4\u5982\u8bf4echo\u548csed,\u8f6c\u4e49\u4e00\u4e2a\u5b57\u7b26\u53ef\u80fd\u4f1a\u5f15\u8d77\u4e00\u4e2a\u76f8\u53cd\u7684\u6548\u679c\uff0d\uff0d\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u89e6\u53d1\u90a3\u4e2a\u5b57\u7b26\u7684\u7279\u6b8a\u610f\u601d\u3002 demo13 \\r \u56de\u8f66 \\n \u6362\u884c \\c \u4e0d\u6362\u884c \\t \u6c34\u5e73\u5236\u8868\u7b26 \\v \u5782\u76f4\u5236\u8868\u7b26 \\a \u8868\u793a\u201c\u8b66\u544a\u201d\uff08\u8702\u9e23\u6216\u662f\u95ea\u52a8\uff09 \\\\ \u53cd\u659c\u6760\u5b57\u7b26 \\0ddd \u5c06\u81ea\u8d1f\u8868\u793a\u62101\u52303\u7684\u516b\u8fdb\u5236\u6570\u503c","title":"\u53cc\u62ec\u53f7\u7ed3\u6784"},{"location":"Linux/#_58","text":"$? \u53d8\u91cf\u7528\u4e8e\u6d4b\u8bd5\u811a\u672c\u4e2d\u7684\u547d\u4ee4\u6267\u884c\u7ed3\u679c\u975e\u5e38\u7684\u6709\u7528\u3002 demo14 echo hello echo $? # \u56e0\u4e3a\u4e0a\u4e00\u6761\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u6253\u53700\u3002 lskdf # \u65e0\u6548\u547d\u4ee4\u3002 echo $? # \u56e0\u4e3a\u4e0a\u9762\u7684\u65e0\u6548\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u6253\u5370\u4e00\u4e2a\u975e\u96f6\u7684\u503c\u3002 exit 113 # \u8fd4\u56de113\u72b6\u6001\u7801\u7ed9shell\u3002 # \u53ef\u4ee5\u8fd0\u884c\u811a\u672c\u7ed3\u675f\u540e\u7acb\u5373\u6267\u884c\u547d\u4ee4\"echo $?\" \u68c0\u9a8c\u3002 # \u4f9d\u7167\u60ef\u4f8b,\u547d\u4ee4'exit 0'\u8868\u793a\u6267\u884c\u6210\u529f, #+ \u5f53\u4ea7\u751f\u4e00\u4e2a\u975e\u96f6\u9000\u51fa\u503c\u65f6\u8868\u793a\u4e00\u4e2a\u9519\u8bef\u6216\u662f\u53cd\u5e38\u7684\u6761\u4ef6\u3002 \u4e0b\u9762\u8fd9\u4e9b\u9000\u51fa\u72b6\u6001\u7801\uff0c\u7528\u4e8e\u4fdd\u7559(reserved meanings) \u7684\u542b\u4e49\uff0c\u4e0d\u5e94\u8be5\u5728\u7528\u6237\u811a\u672c\u4f7f\u7528\u3002 Exit Code Number Meaning Example Comments 1 Catchall for general errors let \"var1 = 1/0\" Miscellaneous errors, such as \"divide by zero\" 2 Misuse of shell builtins (according to Bash documentation) - Seldom seen, usually defaults to exit code 1 126 Command invoked cannot execute - Permission problem or command is not an executable 127 \"command not found\" - Possible problem with $PATH or a typo 128 Invalid argument to exit exit 3.14159 exit takes only integer args in the range 0 - 255 (see footnote) 128+n Fatal error signal \"n\" kill -9 $PPID of script $? returns 137 (128 + 9) 130 Script terminated by Control-C - Control-C is fatal error signal 2, (130 = 128 + 2, see above) 255* Exit status out of range exit -1 exit takes only integer args in the range 0 - 255 \u6d4b\u8bd5","title":"\u9000\u51fa/\u9000\u51fa\u72b6\u6001"},{"location":"Linux/#_59","text":"\u4e00\u4e2aif/then\u7ed3\u6784\u80fd\u5305\u542b\u5d4c\u5957\u7684\u6bd4\u8f83\u548c\u6d4b\u8bd5\u3002 echo \"Testing \\\"false\\\"\" if [ \"false\" ] # \"false\"\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32. then echo \"\\\"false\\\" is true.\" #+ \u5b83\u88ab\u6d4b\u8bd5\u4e3a\u771f. else echo \"\\\"false\\\" is false.\" fi # \"false\"\u4e3a\u771f. Else if \u548c elif elif\u662felse if\u7684\u7f29\u5199\u3002\u4f5c\u7528\u662f\u5728\u4e00\u4e2aif/then\u91cc\u5d4c\u5165\u4e00\u4e2a\u5185\u90e8\u7684if/then\u7ed3\u6784\u3002 [[]] \u7ed3\u6784\u6bd4Bash\u7248\u672c\u7684 [] \u66f4\u901a\u7528\u3002\u7528 [[ ... ]] \u6d4b\u8bd5\u7ed3\u6784\u6bd4\u7528 [ ... ] \u66f4\u80fd\u9632\u6b62\u811a\u672c\u91cc\u7684\u8bb8\u591a\u903b\u8f91\u9519\u8bef\u3002\u6bd4\u5982\u8bf4\uff0c && , || , < \u548c > \u64cd\u4f5c\u7b26\u80fd\u5728\u4e00\u4e2a [[]] \u6d4b\u8bd5\u91cc\u901a\u8fc7\uff0c\u4f46\u5728 [] \u7ed3\u6784\u4f1a\u53d1\u751f\u9519\u8bef\u3002 (( )) \u7ed3\u6784\u6269\u5c55\u5e76\u8ba1\u7b97\u4e00\u4e2a\u7b97\u672f\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u5982\u679c\u8868\u8fbe\u5f0f\u503c\u4e3a0\uff0c\u4f1a\u8fd4\u56de1\u6216\u5047\u4f5c\u4e3a\u9000\u51fa\u72b6\u6001\u7801\u3002\u4e00\u4e2a\u975e\u96f6\u503c\u7684\u8868\u8fbe\u5f0f\u8fd4\u56de\u4e00\u4e2a0\u6216\u771f\u4f5c\u4e3a\u9000\u51fa\u72b6\u6001\u7801\u3002\u8fd9\u4e2a\u7ed3\u6784\u548c\u5148\u524dtest\u547d\u4ee4\u53ca [] \u7ed3\u6784\u7684\u8ba8\u8bba\u521a\u597d\u76f8\u53cd\u3002","title":"\u6d4b\u8bd5\u7ed3\u6784"},{"location":"Linux/#_60","text":"\u5982\u679c\u4e0b\u9762\u7684\u6761\u4ef6\u6210\u7acb\u8fd4\u56de\u771f\u3002 demo15 \u64cd\u4f5c\u7b26 \u63cf\u8ff0 -e \u6587\u4ef6\u5b58\u5728 -a \u6587\u4ef6\u5b58\u5728\uff0c\u8fd9\u4e2a\u548c-e\u7684\u4f5c\u7528\u4e00\u6837. \u5b83\u662f\u4e0d\u8d5e\u6210\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\u5b83\u7684\u7528\u5904\u4e0d\u5927\u3002 -f \u6587\u4ef6\u662f\u4e00\u4e2a\u666e\u901a\u6587\u4ef6(\u4e0d\u662f\u4e00\u4e2a\u76ee\u5f55\u6216\u662f\u4e00\u4e2a\u8bbe\u5907\u6587\u4ef6) -s \u6587\u4ef6\u5927\u5c0f\u4e0d\u4e3a\u96f6 -d \u6587\u4ef6\u662f\u4e00\u4e2a\u76ee\u5f55 -b \u6587\u4ef6\u662f\u4e00\u4e2a\u5757\u8bbe\u5907(\u8f6f\u76d8\uff0c\u5149\u9a71\uff0c\u7b49\u7b49\u3002) -c \u6587\u4ef6\u662f\u4e00\u4e2a\u5b57\u7b26\u8bbe\u5907(\u952e\u76d8\uff0c\u8c03\u5236\u89e3\u8c03\u5668\uff0c\u58f0\u5361\uff0c\u7b49\u7b49\u3002) -p \u6587\u4ef6\u662f\u4e00\u4e2a\u7ba1\u9053 -h \u6587\u4ef6\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 -L \u6587\u4ef6\u662f\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 -S \u6587\u4ef6\u662f\u4e00\u4e2asocket -t \u6587\u4ef6(\u63cf\u8ff0\u7b26)\u4e0e\u4e00\u4e2a\u7ec8\u7aef\u8bbe\u5907\u76f8\u5173\u3002 -r \u6587\u4ef6\u662f\u5426\u53ef\u8bfb (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -w \u6587\u4ef6\u662f\u5426\u53ef\u5199 (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -x \u6587\u4ef6\u662f\u5426\u53ef\u6267\u884c (\u6307\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u547d\u4ee4\u7684\u7528\u6237\u7684\u8bfb\u6743\u9650) -g \u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8bbe\u7f6e-\u7ec4-ID(sgid)\u6807\u8bb0\u88ab\u8bbe\u7f6e\u3002 -u \u6587\u4ef6\u7684\u8bbe\u7f6e-\u7528\u6237-ID(suid)\u6807\u5fd7\u88ab\u8bbe\u7f6e -k \u7c98\u4f4f\u4f4d\u8bbe\u7f6e -N \u6587\u4ef6\u6700\u540e\u4e00\u6b21\u8bfb\u540e\u88ab\u4fee\u6539 f1 -nt f2 \u6587\u4ef6f1\u6bd4f2\u65b0 f1 -ot f2 \u6587\u4ef6f1\u6bd4f2\u65e7 f1 -ef f2 \u6587\u4ef6f1\u548cf2 \u662f\u76f8\u540c\u6587\u4ef6\u7684\u786c\u94fe\u63a5 ! \"\u975e\" -- \u53cd\u8f6c\u4e0a\u9762\u6240\u6709\u6d4b\u8bd5\u7684\u7ed3\u679c(\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u6761\u4ef6\u5219\u8fd4\u56de\u771f)\u3002 \u6ce8\u610f\u26a0\ufe0f -t \u8fd9\u4e2a\u6d4b\u8bd5\u9009\u9879\u53ef\u4ee5\u7528\u4e8e\u68c0\u67e5\u811a\u672c\u4e2d\u662f\u5426\u6807\u51c6\u8f93\u5165 ([ -t 0 ])\u6216\u6807\u51c6\u8f93\u51fa([ -t 1 ])\u662f\u4e00\u4e2a\u7ec8\u7aef\u3002 -g \u5982\u679c\u4e00\u4e2a\u76ee\u5f55\u7684sgid\u6807\u5fd7\u88ab\u8bbe\u7f6e\uff0c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u521b\u5efa\u7684\u6587\u4ef6\u90fd\u5c5e\u4e8e\u62e5\u6709\u6b64\u76ee\u5f55\u7684\u7528\u6237\u7ec4\uff0c\u800c\u4e0d\u5fc5\u662f\u521b\u5efa\u6587\u4ef6\u7684\u7528\u6237\u6240\u5c5e\u7684\u7ec4\u3002\u8fd9\u4e2a\u7279\u6027\u5bf9\u5728\u4e00\u4e2a\u5de5\u4f5c\u7ec4\u91cc\u7684\u540c\u4eab\u76ee\u5f55\u5f88\u6709\u7528\u5904\u3002","title":"\u6587\u4ef6\u6d4b\u8bd5\u64cd\u4f5c\u7b26"},{"location":"Linux/#_61","text":"\u4e8c\u5143\u6bd4\u8f83\u64cd\u4f5c\u7b26\u6bd4\u8f83\u4e24\u4e2a\u53d8\u91cf\u6216\u662f\u6570\u503c\u3002\u6ce8\u610f\u6574\u6570\u548c\u5b57\u7b26\u4e32\u6bd4\u8f83\u7684\u5206\u522b\u3002 \u6574\u6570\u6bd4\u8f83 demo16 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 -eq \u7b49\u4e8e if [ \"$a\" -eq \"$b\" ] -ne \u4e0d\u7b49\u4e8e if [ \"$a\" -ne \"$b\" ] -gt \u5927\u4e8e if [ \"$a\" -gt \"$b\" ] -ge \u5927\u4e8e\u7b49\u4e8e if [ \"$a\" -ge \"$b\" ] -lt \u5c0f\u4e8e if [ \"$a\" -lt \"$b\" ] -le \u5c0f\u4e8e\u7b49\u4e8e if [ \"$a\" -le \"$b\" ] < \u5c0f\u4e8e(\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" < \"$b\")) <= \u5c0f\u4e8e\u7b49\u4e8e (\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" <= \"$b\")) > \u5927\u4e8e (\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" > \"$b\")) >= \u5927\u4e8e\u7b49\u4e8e(\u5728\u53cc\u62ec\u53f7\u91cc\u4f7f\u7528) ((\"$a\" >= \"$b\")) \u5b57\u7b26\u4e32\u6bd4\u8f83 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 = \u7b49\u4e8e if [ \"$a\" = \"$b\" ] == \u7b49\u4e8e\uff0c\u5b83\u548c=\u662f\u540c\u4e49\u8bcd\u3002 if [ \"$a\" == \"$b\" ] != \u4e0d\u76f8\u7b49\uff0c\u64cd\u4f5c\u7b26\u5728[[ ... ]]\u7ed3\u6784\u91cc\u4f7f\u7528\u6a21\u5f0f\u5339\u914d. if [ \"$a\" != \"$b\" ] < \u5c0f\u4e8e\uff0c\u4f9d\u7167ASCII\u5b57\u7b26\u6392\u5217\u987a\u5e8f\uff0c\u6ce8\u610f\"<\"\u5b57\u7b26\u5728[ ] \u7ed3\u6784\u91cc\u9700\u8981\u8f6c\u4e49 if [[ \"$a\" < \"$b\" ]] if [ \"$a\" \\< \"$b\" ] > \u5927\u4e8e\uff0c\u4f9d\u7167ASCII\u5b57\u7b26\u6392\u5217\u987a\u5e8f\uff0c\u6ce8\u610f\">\"\u5b57\u7b26\u5728[ ] \u7ed3\u6784\u91cc\u9700\u8981\u8f6c\u4e49. if [[ \"$a\" > \"$b\" ]] if [ \"$a\" \\> \"$b\" ] -z \u5b57\u7b26\u4e32\u4e3a\"null\"\uff0c\u5373\u662f\u6307\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a\u96f6\u3002 - -n \u5b57\u7b26\u4e32\u4e0d\u4e3a\"null\"\uff0c\u5373\u957f\u5ea6\u4e0d\u4e3a\u96f6\u3002 - \u6df7\u5408\u6bd4\u8f83 \u6bd4\u8f83\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u4f8b\u5b50 -a \u903b\u8f91\u4e0e\uff0c\u5982\u679cexp1\u548cexp2\u90fd\u4e3a\u771f\uff0c\u5219exp1 -a exp2\u8fd4\u56de\u771f\u3002 if [ \"$exp1\" -a \"$exp2\" ] -o \u903b\u8f91\u6216\uff0c\u53ea\u8981exp1\u548cexp2\u4efb\u4f55\u4e00\u4e2a\u4e3a\u771f\uff0c\u5219exp1 -o exp2 \u8fd4\u56de\u771f\u3002 if [ \"$exp1\" -o \"$exp2\" ] \u5728\u4e00\u4e2a\u6df7\u5408\u6d4b\u8bd5\u4e2d\uff0c\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u53d8\u91cf\u5f15\u53f7\u5f15\u8d77\u6765\u53ef\u80fd\u8fd8\u4e0d\u591f\u3002\u5982\u679c$string\u53d8\u91cf\u662f\u7a7a\u7684\u8bdd\uff0c\u8868\u8fbe\u5f0f [ -n \"$string\" -o \"$a\" = \"$b\" ] \u5728\u4e00\u4e9bBash\u7248\u672c\u4e2d\u53ef\u80fd\u4f1a\u5f15\u8d77\u9519\u8bef\u3002\u5b89\u5168\u7684\u529e\u6cd5\u662f\u9644\u52a0\u4e00\u4e2a\u5916\u90e8\u7684\u5b57\u7b26\u4e32\u7ed9\u53ef\u80fd\u6709\u7a7a\u5b57\u7b26\u4e32\u53d8\u91cf\u6bd4\u8f83\u7684\u6240\u6709\u53d8\u91cf\uff0c [ \"x$string\" != x -o \"x$a\" = \"x$b\" ] (x\u5b57\u7b26\u53ef\u4ee5\u4e92\u76f8\u62b5\u6d88)","title":"\u6bd4\u8f83\u64cd\u4f5c\u7b26"},{"location":"Linux/#_62","text":"Bash\u5df2\u7ecf\u652f\u6301\u4e86\u4ee4\u4eba\u60ca\u8bb6\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u7684\u6570\u91cf\u3002\u4e0d\u4e00\u81f4\u7684\u547d\u4ee4\u8bed\u6cd5\u548c\u5197\u4f59\u7684\u529f\u80fd\uff0c\u5bfc\u81f4\u771f\u7684\u5b66\u8d77\u6765\u6709\u56f0\u96be\u3002","title":"\u64cd\u4f5c\u5b57\u7b26\u4e32"},{"location":"Linux/#_63","text":"String = abcABC123ABCabc echo ${# String } # 15 echo ` expr length $String ` # 15 echo ` expr \" $String \" : '.*' ` # 15 \u5339\u914d\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u5b57\u4e32\u7684\u957f\u5ea6\uff0c\u4e0b\u9762\u4e24\u79cd\u65b9\u6cd5\u7684 $substring \u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 expr match \"$string\" '$substring' expr \"$string\" : '$substring' String = abcABC123ABCabc # \u2514------\u2518 # echo ` expr match \" $String \" 'abc[A-Z]*.2' ` # 8 echo ` expr \" $String \" : 'abc[A-Z]*.2' ` # 8","title":"\u5b57\u7b26\u4e32\u957f\u5ea6"},{"location":"Linux/#_64","text":"expr index $string $substring \u5728\u5b57\u7b26\u4e32 \\(string\u4e2d\\) substring\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u6570\u5b57\u4f4d\u7f6e String = abcABC123ABCabc echo ` expr index \" $String \" C12 ` # 6 # C \u5b57\u7b26\u7684\u4f4d\u7f6e. echo ` expr index \" $String \" 1c ` # 3 # 'c' (in #3 position) matches before '1'.","title":"\u7d22\u5f15"},{"location":"Linux/#_65","text":"${string:position} \u628a \\(string\u4e2d\u4ece\u7b2c\\) postion\u4e2a\u5b57\u7b26\u5f00\u59cb\u5b57\u7b26\u4e32\u63d0\u53d6\u51fa\u6765\u3002\u5982\u679c \\(string\u662f\"*\"\u6216\"@\"\uff0c\u5219\u8868\u793a\u4ece\u4f4d\u7f6e\u53c2\u6570\u4e2d\u63d0\u53d6\u7b2c\\) postion\u540e\u9762\u7684\u5b57\u7b26\u4e32\u3002 ${string:position:length} \u628a \\(string\u4e2d\\) postion\u4e2a\u5b57\u7b26\u540e\u9762\u7684\u957f\u5ea6\u4e3a$length\u7684\u5b57\u7b26\u4e32\u63d0\u53d6\u51fa\u6765\u3002 demo18 # \u5b57\u4e32\u63d0\u53d6 String = abcABC123ABCabc # 0123456789..... # \u4ee50\u5f00\u59cb\u8ba1\u7b97. echo ${ String : 0 } # abcABC123ABCabc echo ${ String : 1 } # bcABC123ABCabc echo ${ String : 7 } # 23ABCabc echo ${ String : 7 : 3 } # 23A # \u63d0\u53d6\u7684\u5b57\u4e32\u957f\u4e3a3 # \u6709\u6ca1\u6709\u53ef\u80fd\u4ece\u5b57\u7b26\u4e32\u7684\u53f3\u8fb9\u7ed3\u5c3e\u5904\u63d0\u53d6? echo ${ String :- 4 } # abcABC123ABCabc # \u9ed8\u8ba4\u662f\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c31\u76f8\u5f53\u4e8e${parameter:-default}. # \u7136\u800c. . . echo ${ String :(-4) } # Cabc echo ${ String : -4 } # Cabc # \u8fd9\u6837,\u5b83\u53ef\u4ee5\u5de5\u4f5c\u4e86. # \u5706\u62ec\u53f7\u6216\u9644\u52a0\u7684\u7a7a\u767d\u5b57\u7b26\u53ef\u4ee5\u8f6c\u4e49$position\u53c2\u6570.","title":"\u5b57\u4e32\u63d0\u53d6"},{"location":"Linux/#_66","text":"${string#substring} \u4ece \\(string\u5de6\u8fb9\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u77ed\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string##substring} \u4ece \\(string\u5de6\u8fb9\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u957f\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string%substring} \u4ece \\(string\u7ed3\u5c3e\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u77ed\u5339\u914d\\) substring\u5b50\u4e32\u3002 ${string%%substring} \u4ece \\(string\u7ed3\u5c3e\u5f00\u59cb\uff0c\u5265\u53bb\u6700\u957f\u5339\u914d\\) substring\u5b50\u4e32\u3002 String = abcABC123ABCabc # \u251c----\u2518 \u2506 # \u2514----------\u2518 echo ${ String #a*C } # 123ABCabc # \u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u77ed\u7684\u5b57\u7b26\u4e32. echo ${ String ##a*C } # abc # \u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u957f\u7684\u5b57\u7b26\u4e32. String = abcABC123ABCabc # \u2506 || # \u2514------------\u2518 echo ${ String %b*c } # abcABC123ABCa # \u4ece$String\u540e\u9762\u5c3e\u90e8\u5f00\u59cb\uff0c\u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u77ed\u7684\u5b57\u7b26\u4e32. echo ${ String %%b*c } # a # \u4ece$String\u540e\u9762\u5c3e\u90e8\u5f00\u59cb\uff0c\u5265\u53bb\u5339\u914d'a'\u5230'C'\u4e4b\u95f4\u6700\u957f\u7684\u5b57\u7b26\u4e32.","title":"\u5b57\u4e32\u79fb\u52a8"},{"location":"Linux/#awk","text":"Bash\u811a\u672c\u53ef\u4ee5\u8c03\u7528awk\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u529f\u80fd\u6765\u4ee3\u66ff\u5b83\u81ea\u5df1\u5185\u5efa\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u7b26 String = 23skidoo1 # 012345678 Bash # 123456789 awk # \u6ce8\u610f\u4e0a\u9762\u4e24\u4e2a\u7a0b\u5e8f\u5bf9\u7d22\u5f15\u7684\u4e0d\u540c\u5904\u7406: # Bash\u628a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u6807\u53f7\u79f0\u4e3a'0'\u3002 # Awk\u628a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u6807\u53f7\u79f0\u4e3a'1'\u3002 echo ${ String : 2 : 4 } # position 3 (0-1-2), 4 characters long # skid # \u5728awk\u4e2d\u4e0eBash\u7684${string:pos:length}\u7b49\u540c\u7684\u662fsubstr(string,pos,length)\u3002 echo | awk '{ print substr(\"' \" ${ String } \" '\",3,4) # skid }' # \u7528\u4e00\u4e2a\u7a7a\u7684\"echo\"\u7531\u7ba1\u9053\u4f20\u4e00\u4e2a\u7a7a\u7684\u8f93\u5165\u7ed9awk, #+ \u8fd9\u6837\u5c31\u4e0d\u5fc5\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u540d\u7ed9awk\u3002 exit 0","title":"\u7528awk\u5904\u7406\u5b57\u7b26\u4e32"},{"location":"Linux/#forwhile","text":"\u91cd\u590d\u4e00\u4e9b\u547d\u4ee4\u7684\u4ee3\u7801\u5757,\u5982\u679c\u6761\u4ef6\u4e0d\u6ee1\u8db3\u5c31\u9000\u51fa\u5faa\u73af\u3002","title":"for/while"},{"location":"Linux/#for","text":"\u5728\u5faa\u73af\u7684\u6bcf\u6b21\u6267\u884c\u4e2d\uff0carg\u5c06\u987a\u5e8f\u7684\u5b58\u53d6list\u4e2d\u5217\u51fa\u7684\u53d8\u91cf\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u5faa\u73af\u7ed3\u6784\u3002 demo27 for arg in [list] do command(s)... done \u6bcf\u4e2a [list] \u4e2d\u7684\u5143\u7d20\u90fd\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u53c2\u6570\uff0c\u5728\u5904\u7406\u53c2\u6570\u7ec4\u65f6\uff0c\u8fd9\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u4f7f\u7528set\u547d\u4ee4\u6765\u5f3a\u5236\u89e3\u6790\u6bcf\u4e2a [list] \u4e2d\u7684\u5143\u7d20\u3002\u5e76\u4e14\u5206\u914d\u6bcf\u4e2a\u89e3\u6790\u51fa\u6765\u7684\u90e8\u5206\u5230\u4e00\u4e2a\u4f4d\u7f6e\u53c2\u6570\u4e2d\u3002 \u5faa\u73af\u7684\u4e00\u4e2a\u7b80\u5355\u4f8b\u5b50 for planet in Mercury Venus Earth Mars Jupiter Saturn Uranus Neptune Pluto do echo $planet # \u6bcf\u4e2a\u884c\u661f\u88ab\u5355\u72ec\u6253\u5370\u5728\u4e00\u884c\u4e0a. done","title":"for"},{"location":"Linux/#while","text":"\u4e00\u4e2awhile\u5faa\u73af\u53ef\u4ee5\u6709\u591a\u4e2a\u5224\u65ad\u6761\u4ef6\uff0c\u4f46\u662f\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u624d\u80fd\u51b3\u5b9a\u662f\u5426\u9000\u51fa\u5faa\u73af\u3002\u7136\u800c\u8fd9\u9700\u8981\u4e00\u79cd\u6709\u70b9\u4e0d\u540c\u7684\u5faa\u73af\u8bed\u6cd5\u3002 while [condition] do command... done # -------------------------- # \u7b80\u5355\u7684while\u5faa\u73af # -------------------------- var0 = 0 LIMIT = 10 while [ \" $var0 \" -lt \" $LIMIT \" ] do echo -n \" $var0 \" # -n \u5c06\u4f1a\u963b\u6b62\u4ea7\u751f\u65b0\u884c\u3002 # ^ \u7a7a\u683c,\u6570\u5b57\u4e4b\u95f4\u7684\u5206\u9694\u3002 var0 = ` expr $var0 + 1 ` # var0=$(($var0+1)) \u4e5f\u53ef\u4ee5\u3002 # var0=$((var0 + 1)) \u4e5f\u53ef\u4ee5\u3002 # let \"var0 += 1\" \u4e5f\u53ef\u4ee5\u3002 done # \u4f7f\u7528\u5176\u4ed6\u7684\u65b9\u6cd5\u4e5f\u884c\u3002 # -------------------------- # \u591a\u6761\u4ef6\u7684while\u5faa\u73af # -------------------------- var1 = unset previous = $var1 while echo \"previous-variable = $previous \" echo previous = $var1 [ \" $var1 \" ! = end ] # \u8bb0\u5f55\u4e4b\u524d\u7684$var1. # \u8fd9\u4e2a\"while\"\u5faa\u73af\u4e2d\u67094\u4e2a\u6761\u4ef6, \u4f46\u662f\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u80fd\u63a7\u5236\u5faa\u73af. # \u9000\u51fa\u72b6\u6001\u7531\u7b2c4\u4e2a\u6761\u4ef6\u51b3\u5b9a. do echo \"Input variable #1 (end to exit) \" read var1 echo \"variable #1 = $var1 \" done exit 0","title":"while"},{"location":"Linux/#until","text":"\u8fd9\u4e2a\u7ed3\u6784\u5728\u5faa\u73af\u7684\u9876\u90e8\u5224\u65ad\u6761\u4ef6\uff0c\u5e76\u4e14\u5982\u679c\u6761\u4ef6\u4e00\u76f4\u4e3afalse\u90a3\u5c31\u4e00\u76f4\u5faa\u73af\u4e0b\u53bb\u3002(\u4e0ewhile\u76f8\u53cd)\u3002 until [condition-is-true] do command... done \u6ce8\u610f\u26a0\ufe0f until\u5faa\u73af\u7684\u5224\u65ad\u5728\u5faa\u73af\u7684\u9876\u90e8\uff0c\u8fd9\u4e0e\u67d0\u4e9b\u7f16\u7a0b\u8bed\u8a00\u662f\u4e0d\u540c\u7684\u3002 \u4e0efor\u5faa\u73af\u4e00\u6837\uff0c\u5982\u679c\u60f3\u628ado\u548c\u6761\u4ef6\u653e\u5728\u4e00\u884c\u91cc\uff0c\u5c31\u4f7f\u7528\";\"\u3002 until [condition-is-true] ; do END_CONDITION = end until [ \" $var1 \" = \" $END_CONDITION \" ] # \u5728\u5faa\u73af\u7684\u9876\u90e8\u5224\u65ad\u6761\u4ef6. do echo \"Input variable #1 \" echo \"( $END_CONDITION to exit)\" read var1 echo \"variable #1 = $var1 \" done exit 0","title":"until"},{"location":"Linux/#_67","text":"\u5d4c\u5957\u5faa\u73af\u5c31\u662f\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\u8fd8\u6709\u4e00\u4e2a\u5faa\u73af\uff0c\u5185\u90e8\u5faa\u73af\u5728\u5916\u90e8\u5faa\u73af\u4f53\u4e2d\u3002 demo28 outer = 1 # \u8bbe\u7f6e\u5916\u90e8\u5faa\u73af\u8ba1\u6570. # \u5f00\u59cb\u5916\u90e8\u5faa\u73af. for a in 1 2 3 4 5 do echo \"Pass $outer in outer loop.\" echo \"---------------------\" inner = 1 # \u91cd\u8bbe\u5185\u90e8\u5faa\u73af\u7684\u8ba1\u6570. # =============================================== # \u5f00\u59cb\u5185\u90e8\u5faa\u73af. for b in 1 2 3 4 5 do echo \"Pass $inner in inner loop.\" let \"inner+=1\" # \u589e\u52a0\u5185\u90e8\u5faa\u73af\u8ba1\u6570. done # \u5185\u90e8\u5faa\u73af\u7ed3\u675f. # =============================================== let \"outer+=1\" # \u589e\u52a0\u5916\u90e8\u5faa\u73af\u7684\u8ba1\u6570. echo # \u6bcf\u6b21\u5916\u90e8\u5faa\u73af\u4e4b\u95f4\u7684\u95f4\u9694. done # \u5916\u90e8\u5faa\u73af\u7ed3\u675f. exit 0","title":"\u5d4c\u5957\u5faa\u73af"},{"location":"Linux/#_68","text":"\u5f71\u54cd\u5faa\u73af\u884c\u4e3a\u7684\u547d\u4ee4 break \uff0c continue \uff0c break\u547d\u4ee4\u5c06\u4f1a\u8df3\u51fa\u5faa\u73af\uff0ccontinue\u547d\u4ee4\u5c06\u4f1a\u8df3\u8fc7\u672c\u6b21\u5faa\u73af\u4e0b\u8fb9\u7684\u8bed\u53e5\uff0c\u76f4\u63a5\u8fdb\u5165\u4e0b\u6b21\u5faa\u73af\u3002 demo29 continue\uff1a continue\u547d\u4ee4\u4e0ebreak\u547d\u4ee4\u7c7b\u4f3c\uff0c\u53ea\u6709\u4e00\u70b9\u5dee\u522b\uff0c\u5b83\u4e0d\u4f1a\u8df3\u51fa\u6240\u6709\u5faa\u73af\uff0c\u4ec5\u4ec5\u8df3\u51fa\u5f53\u524d\u5faa\u73af\u3002 LIMIT = 19 # \u4e0a\u9650 echo \"Printing Numbers 1 through 20 (but not 3 and 11).\" a = 0 while [ $a -le \" $LIMIT \" ] do a = $(( $a + 1 )) if [ \" $a \" -eq 3 ] || [ \" $a \" -eq 11 ] # Excludes 3 and 11. then continue # \u8df3\u8fc7\u672c\u6b21\u5faa\u73af\u5269\u4e0b\u7684\u8bed\u53e5. fi echo -n \" $a \" # \u5728$a\u7b49\u4e8e3\u548c11\u7684\u65f6\u5019,\u8fd9\u53e5\u5c06\u4e0d\u4f1a\u6267\u884c. done break\uff1a break\u547d\u4ee4\u5141\u8bb8\u8df3\u51fa\u6240\u6709\u5faa\u73af\uff08\u7ec8\u6b62\u6267\u884c\u540e\u9762\u7684\u6240\u6709\u5faa\u73af\uff09\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u811a\u672c\u8fdb\u5165\u6b7b\u5faa\u73af\u76f4\u81f3\u7528\u6237\u8f93\u5165\u6570\u5b57\u5927\u4e8e5\u3002\u8981\u8df3\u51fa\u8fd9\u4e2a\u5faa\u73af\uff0c\u8fd4\u56de\u5230shell\u63d0\u793a\u7b26\u4e0b\uff0c\u5c31\u8981\u4f7f\u7528break\u547d\u4ee4\u3002 while : do echo -n \"Input a number between 1 to 5: \" read aNum case $aNum in 1 | 2 | 3 | 4 | 5 ) echo \"Your number is $aNum !\" ;; * ) echo \"You do not select a number between 1 to 5, game is over!\" break ;; esac done \u26a0\ufe0f \u5728\u5d4c\u5957\u5faa\u73af\u4e2d\uff0cbreak \u547d\u4ee4\u540e\u9762\u8fd8\u53ef\u4ee5\u8ddf\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u8df3\u51fa\u7b2c\u51e0\u5c42\u5faa\u73af\u3002\u4f8b\u5982\uff1a break n #\u8868\u793a\u8df3\u51fa\u7b2c n \u5c42\u5faa\u73af\u3002","title":"\u5faa\u73af\u63a7\u5236"},{"location":"Linux/#caseselect","text":"case/select\u4f9d\u9760\u5728\u4ee3\u7801\u5757\u7684\u9876\u90e8\u6216\u5e95\u90e8\u7684\u6761\u4ef6\u5224\u65ad\u6765\u51b3\u5b9a\u7a0b\u5e8f\u7684\u5206\u652f\u3002","title":"case/select"},{"location":"Linux/#case","text":"case\u5b83\u5141\u8bb8\u901a\u8fc7\u5224\u65ad\u6765\u9009\u62e9\u4ee3\u7801\u5757\u4e2d\u591a\u6761\u8def\u5f84\u4e2d\u7684\u4e00\u6761\u3002\u5b83\u7684\u4f5c\u7528\u548c\u591a\u4e2aif/then/else\u8bed\u53e5\u76f8\u540c\uff0c\u662f\u5b83\u4eec\u7684\u7b80\u5316\u7ed3\u6784\uff0c\u7279\u522b\u9002\u7528\u4e8e\u521b\u5efa\u76ee\u5f55\u3002 demo30 case \" \\(variable\" in ?\"\\) condition1\" ) ?command... ?;; ?\"$condition2\" ) ?command... ?;; esac \u5bf9\u53d8\u91cf\u4f7f\u7528 \"\" \u5e76\u4e0d\u662f\u5f3a\u5236\u7684\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u53d1\u751f\u5355\u8bcd\u5206\u79bb\u3002 \u6bcf\u53e5\u6d4b\u8bd5\u884c\uff0c\u90fd\u4ee5\u53f3\u5c0f\u62ec\u53f7 ) \u7ed3\u5c3e\u3002 \u6bcf\u4e2a\u6761\u4ef6\u5757\u90fd\u4ee5\u4e24\u4e2a\u5206\u53f7\u7ed3\u5c3e ;; \u3002 case\u5757\u7684\u7ed3\u675f\u4ee5esac(case\u7684\u53cd\u5411\u62fc\u5199)\u7ed3\u5c3e\u3002 clear # \u6e05\u5c4f. echo \" \u6211\u7684\u7b80\u5386\" echo \" ------- \" echo \"\u4e0b\u9762\u901a\u8fc7shell\u811a\u672c\u8f93\u51fa\u6211\u7684\u7b80\u5386\" echo echo \"[B]asicinfo, \u57fa\u672c\u4fe1\u606f\" echo \"[E]ducation, \u6559\u80b2\u7ecf\u5386\" echo \"[I]tskill, IT \u6280\u80fd\" echo read person case \" $person \" in # \u6ce8\u610f,\u53d8\u91cf\u662f\u88ab\u5f15\u7528\u7684. \"B\" | \"b\" ) # \u63a5\u53d7\u5927\u5199\u6216\u5c0f\u5199\u8f93\u5165. echo echo \"\u5c0f\u5f1f\u8c03\u8c03\" echo \"\u624b \u673a : 136*****13\" echo \"E-mail :wowohoo@qq.com\" echo \"\u9996 \u9875 : http://JSLite.io\" ;; # \u6ce8\u610f,\u5728\u6bcf\u4e2a\u9009\u9879\u540e\u8fb9\u90fd\u9700\u8981\u4ee5;;\u7ed3\u5c3e. \"E\" | \"e\" ) # \u63a5\u53d7\u5927\u5199\u6216\u5c0f\u5199\u8f93\u5165. echo \"\u25a0 2003\u5e749\u6708 \u5230 2006\u5e748\u6708\" echo \"----------------------------\" echo \"\u203a \u5b66\u6821 : \u91ce\u9e1f\u9ad8\u4e2d\" echo \"\u203a \u4e13\u4e1a : \u827a\u672f\u7c7b\" echo \"\u203a \u5b66\u5386 : \u9ad8\u4e2d\" ;; # \u540e\u8fb9\u7684[I]tskill\u7684\u4fe1\u606f\u5728\u8fd9\u91cc\u5c31\u7701\u7565\u4e86. * ) # \u9ed8\u8ba4\u9009\u9879. # \u7a7a\u8f93\u5165(\u6572RETURN). echo echo \"\u6ca1\u6709\u6570\u636e\uff01\" ;; esac exit 0","title":"case"},{"location":"Linux/#select","text":"select\u7ed3\u6784\u662f\u5efa\u7acb\u83dc\u5355\u7684\u53e6\u4e00\u79cd\u5de5\u5177\uff0c\u8fd9\u79cd\u7ed3\u6784\u662f\u4eceksh\u4e2d\u5f15\u5165\u7684\u3002 select variable [in list] do ?command... ?break done \u7528select\u6765\u521b\u5efa\u83dc\u5355 PS3 = '\u9009\u62e9\u4f60\u559c\u6b22\u7684\u852c\u83dc: ' # \u8bbe\u7f6e\u63d0\u793a\u7b26\u5b57\u4e32. echo select vegetable in \"\u8c46\" \"\u80e1\u841d\u535c\" \"\u571f\u8c46\" \"\u6d0b\u8471\" \"\u829c\u83c1\u7518\u84dd\" do echo echo \"\u4f60\u6700\u559c\u6b22\u7684\u852c\u83dc\u662f $vegetable \u3002\" echo \"\u8ba8\u538c!\" echo break # \u5982\u679c\u8fd9\u91cc\u6ca1\u6709'break'\u4f1a\u53d1\u751f\u4ec0\u4e48? done exit 0 \u5982\u679c\u5ffd\u7565\u4e86in list\u5217\u8868,\u90a3\u4e48select\u547d\u4ee4\u5c06\u4f7f\u7528\u4f20\u9012\u5230\u811a\u672c\u7684\u547d\u4ee4\u884c\u53c2\u6570($@),\u6216\u8005\u662f\u51fd\u6570\u53c2\u6570(\u5f53select\u662f\u5728\u51fd\u6570\u4e2d\u65f6\uff09\u4e0e\u5ffd\u7565in list\u65f6\u7684for\u8bed\u53e5\u76f8\u6bd4\u8f83\uff1a for variable [in list] PS3 = '\u9009\u62e9\u4f60\u559c\u6b22\u7684\u852c\u83dc: ' echo choice_of (){ select vegetable # [in list] \u88ab\u5ffd\u7565, \u6240\u4ee5'select'\u7528\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u53c2\u6570. do echo echo \"\u4f60\u6700\u559c\u6b22\u7684\u852c\u83dc\u662f $vegetable \u3002\" echo \"\u8ba8\u538c!\" echo break done } choice_of \"\u8c46\" \"\u7c73\u996d\" \"\u80e1\u841d\u535c\" \"\u571f\u8c46\" \"\u6d0b\u8471\" \"\u829c\u83c1\u7518\u84dd\" # $1 $2 $3 $4 $5 $6 # \u4f20\u9012\u7ed9choice_of() \u51fd\u6570\u7684\u53c2\u6570 exit 0","title":"select"},{"location":"Linux/#_69","text":"\u548c\"\u771f\u6b63\u7684\"\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837\uff0cBash\u4e5f\u6709\u51fd\u6570\uff0c\u867d\u7136\u5728\u67d0\u4e9b\u5b9e\u73b0\u65b9\u9762\u7a0d\u6709\u4e9b\u9650\u5236\u3002 \u4e00\u4e2a\u51fd\u6570\u662f\u4e00\u4e2a\u5b50\u7a0b\u5e8f\uff0c\u7528\u4e8e\u5b9e\u73b0\u4e00\u4e32\u64cd\u4f5c\u7684\u4ee3\u7801\u5757(code block)\uff0c\u5b83\u662f\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u7684\"\u9ed1\u76d2\u5b50\"\u3002 \u5f53\u6709\u91cd\u590d\u4ee3\u7801\uff0c\u5f53\u4e00\u4e2a\u4efb\u52a1\u53ea\u9700\u8981\u5f88\u5c11\u7684\u4fee\u6539\u5c31\u88ab\u91cd\u590d\u51e0\u6b21\u6267\u884c\u65f6, \u8fd9\u65f6\u4f60\u5e94\u8003\u8651\u4f7f\u7528\u51fd\u6570\u3002 demo33 function function_name { command... } # \u6216 function_name () { command... } \u5728\u4e00\u4e2a\u51fd\u6570\u5185\u5d4c\u5957\u53e6\u4e00\u4e2a\u51fd\u6570\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u4e0d\u5e38\u7528\u3002 f1 (){ f2 (){ # nested echo \"Function \\\"f2\\\", inside \\\"f1\\\".\" } } f2 # \u5f15\u8d77\u9519\u8bef. # \u5c31\u662f\u4f60\u5148\"declare -f f2\"\u4e86\u4e5f\u6ca1\u7528. f1 # \u4ec0\u4e48\u4e5f\u4e0d\u505a,\u56e0\u4e3a\u8c03\u7528\"f1\"\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\"f2\". f2 # \u73b0\u5728,\u53ef\u4ee5\u6b63\u786e\u7684\u8c03\u7528\"f2\"\u4e86, #+ \u56e0\u4e3a\u4e4b\u524d\u8c03\u7528\"f1\"\u4f7f\"f2\"\u5728\u811a\u672c\u4e2d\u53d8\u5f97\u53ef\u89c1\u4e86.","title":"\u51fd\u6570"},{"location":"Linux/#_70","text":"\u5982\u679c\u53d8\u91cf\u7528local\u6765\u58f0\u660e\uff0c\u90a3\u4e48\u5b83\u53ea\u80fd\u5728\u8be5\u53d8\u91cf\u58f0\u660e\u7684\u4ee3\u7801\u5757(block of code)\u4e2d\u53ef\u89c1\uff0c\u8fd9\u4e2a\u4ee3\u7801\u5757\u5c31\u662f\u5c40\u90e8\"\u8303\u56f4\"\u3002 # \u5728\u51fd\u6570\u5185\u90e8\u7684\u5168\u5c40\u548c\u5c40\u90e8\u53d8\u91cf. func () { local loc_var = 23 # \u58f0\u660e\u4e3a\u5c40\u90e8\u53d8\u91cf. echo # \u4f7f\u7528\u5185\u5efa\u7684'local'\u5173\u952e\u5b57. echo \"\\\"loc_var\\\" in function = $loc_var \" global_var = 999 # \u6ca1\u6709\u58f0\u660e\u4e3a\u5c40\u90e8\u53d8\u91cf. # \u9ed8\u8ba4\u4e3a\u5168\u5c40\u53d8\u91cf. echo \"\\\"global_var\\\" in function = $global_var \" } func # \u73b0\u5728\uff0c\u6765\u770b\u770b\u662f\u5426\u5c40\u90e8\u53d8\u91cf\"loc_var\"\u80fd\u5426\u5728\u51fd\u6570\u5916\u9762\u53ef\u89c1. echo \"\\\"loc_var\\\" outside function = $loc_var \" # $loc_var outside function = # \u4e0d, $loc_var\u4e0d\u662f\u5168\u5c40\u53ef\u8bbf\u95ee\u7684. echo \"\\\"global_var\\\" outside function = $global_var \" # $global_var outside function = 999 # $global_var \u662f\u5168\u5c40\u53ef\u8bbf\u95ee\u7684. exit 0 # \u4e0eIn contrast to C\u76f8\u6bd4, \u5728\u51fd\u6570\u5185\u58f0\u660e\u7684Bash\u53d8\u91cf\u53ea\u6709\u5728 #+ \u5b83\u88ab\u660e\u786e\u58f0\u660e\u6210\u5c40\u90e8\u7684\u53d8\u91cf\u65f6\u624d\u662f\u5c40\u90e8\u7684 \u26a0\ufe0f \uff1a\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u524d\uff0c\u6240\u6709\u5728\u51fd\u6570\u5185\u58f0\u660e\u4e14\u6ca1\u6709\u660e\u786e\u58f0\u660e\u4e3alocal\u7684\u53d8\u91cf\u90fd\u53ef\u5728\u51fd\u6570\u4f53\u5916\u53ef\u89c1 func (){ global_var = 37 # \u5728\u51fd\u6570\u8fd8\u6ca1\u6709\u88ab\u8c03\u7528\u524d #+ \u53d8\u91cf\u53ea\u5728\u51fd\u6570\u5185\u53ef\u89c1. } # \u51fd\u6570\u7ed3\u675f echo \"global_var = $global_var \" # global_var = # \u51fd\u6570\"func\"\u8fd8\u6ca1\u6709\u88ab\u8c03\u7528, #+ \u6240\u4ee5\u53d8\u91cf$global_var\u8fd8\u4e0d\u80fd\u88ab\u8bbf\u95ee. func echo \"global_var = $global_var \" # global_var = 37 # \u5df2\u7ecf\u5728\u51fd\u6570\u8c03\u7528\u65f6\u8bbe\u7f6e\u4e86\u503c.","title":"\u5c40\u90e8\u53d8\u91cf"},{"location":"Linux/#_71","text":"\u5728Shell\u4e2d\uff0c\u8c03\u7528\u51fd\u6570\u65f6\u53ef\u4ee5\u5411\u5176\u4f20\u9012\u53c2\u6570\u3002\u5728\u51fd\u6570\u4f53\u5185\u90e8\uff0c\u901a\u8fc7 $n \u7684\u5f62\u5f0f\u6765\u83b7\u53d6\u53c2\u6570\u7684\u503c\uff0c\u4f8b\u5982\uff0c \\(1\u8868\u793a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\\) 2\u8868\u793a\u7b2c\u4e8c\u4e2a\u53c2\u6570 funWithParam (){ echo \"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a $1 !\" echo \"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a $2 !\" echo \"\u7b2c\u5341\u4e2a\u53c2\u6570\u4e3a $10 !\" echo \"\u7b2c\u5341\u4e2a\u53c2\u6570\u4e3a ${ 10 } !\" echo \"\u7b2c\u5341\u4e00\u4e2a\u53c2\u6570\u4e3a ${ 11 } !\" echo \"\u53c2\u6570\u603b\u6570\u6709 $# \u4e2a!\" echo \"\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f93\u51fa\u6240\u6709\u53c2\u6570 $* !\" } funWithParam 1 2 3 4 5 6 7 8 9 34 73","title":"\u51fd\u6570\u53c2\u6570"},{"location":"Linux/#_72","text":"\u5b9a\u4e49\u4e00\u4e2a\u5e26\u6709return\u8bed\u53e5\u7684\u51fd\u6570\u3002\u51fd\u6570\u8fd4\u56de\u503c\u5728\u8c03\u7528\u8be5\u51fd\u6570\u540e\u901a\u8fc7 $? \u6765\u83b7\u5f97\u3002 funWithReturn (){ echo \"\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u8fdb\u884c\u76f8\u52a0\u8fd0\u7b97...\" echo \"\u8f93\u5165\u7b2c\u4e00\u4e2a\u6570\u5b57: \" read aNum echo \"\u8f93\u5165\u7b2c\u4e8c\u4e2a\u6570\u5b57: \" read anotherNum echo \"\u4e24\u4e2a\u6570\u5b57\u5206\u522b\u4e3a $aNum \u548c $anotherNum !\" return $(( $aNum + $anotherNum )) } funWithReturn echo \"\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u4e4b\u548c\u4e3a $? !\" # \u8fd9\u4e2a\u51fd\u6570\u4f1a\u5bf9\u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u8fdb\u884c\u76f8\u52a0\u8fd0\u7b97... # \u8f93\u5165\u7b2c\u4e00\u4e2a\u6570\u5b57: # 1 # \u8f93\u5165\u7b2c\u4e8c\u4e2a\u6570\u5b57: # 2 # \u4e24\u4e2a\u6570\u5b57\u5206\u522b\u4e3a 1 \u548c 2 ! # \u8f93\u5165\u7684\u4e24\u4e2a\u6570\u5b57\u4e4b\u548c\u4e3a 3 ! \u26a0\ufe0f $10 \u4e0d\u80fd\u83b7\u53d6\u7b2c\u5341\u4e2a\u53c2\u6570\uff0c\u83b7\u53d6\u7b2c\u5341\u4e2a\u53c2\u6570\u9700\u8981 \\({10}\u3002\u5f53n>=10\u65f6\uff0c\u9700\u8981\u4f7f\u7528\\) \u6765\u83b7\u53d6\u53c2\u6570\u3002 \u7279\u6b8a\u5b57\u7b26\u7528\u6765\u5904\u7406\u53c2\u6570\uff1a \u53c2\u6570\u5904\u7406 \u8bf4\u660e $# \u4f20\u9012\u5230\u811a\u672c\u7684\u53c2\u6570\u4e2a\u6570 $* \u4ee5\u4e00\u4e2a\u5355\u5b57\u7b26\u4e32\u663e\u793a\u6240\u6709\u5411\u811a\u672c\u4f20\u9012\u7684\u53c2\u6570 $$ \u811a\u672c\u8fd0\u884c\u7684\u5f53\u524d\u8fdb\u7a0bID\u53f7 $! \u540e\u53f0\u8fd0\u884c\u7684\u6700\u540e\u4e00\u4e2a\u8fdb\u7a0b\u7684ID\u53f7 $@ \u4e0e$*\u76f8\u540c\uff0c\u4f46\u662f\u4f7f\u7528\u65f6\u52a0\u5f15\u53f7\uff0c\u5e76\u5728\u5f15\u53f7\u4e2d\u8fd4\u56de\u6bcf\u4e2a\u53c2\u6570\u3002 $- \u663e\u793aShell\u4f7f\u7528\u7684\u5f53\u524d\u9009\u9879\uff0c\u4e0eset\u547d\u4ee4\u529f\u80fd\u76f8\u540c\u3002 $? \u663e\u793a\u6700\u540e\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u30020\u8868\u793a\u6ca1\u6709\u9519\u8bef\uff0c\u5176\u4ed6\u4efb\u4f55\u503c\u8868\u660e\u6709\u9519\u8bef\u3002","title":"\u51fd\u6570\u8fd4\u56de\u503c"},{"location":"Material%20Theme%20Tutorial/","text":"Material Theme Tutorial \u00b6 \u66f4\u52a0\u5b8c\u6574\u7684Tutorial \u8b66\u544a \u00b6 \u7528\u6cd5 \u00b6 \u8b66\u544a\u5757\u9075\u5faa\u4e00\u4e2a\u7b80\u5355\u7684\u8bed\u6cd5:\u6bcf\u4e2a\u5757\u90fd\u4ee5 !!! \uff0c\u7136\u540e\u4f7f\u7528\u4e00\u4e2a\u5173\u952e\u5b57\u4f5c\u4e3a\u5757\u7684\u7c7b\u578b\u9650\u5b9a\u7b26\u3002\u7136\u540e\uff0c\u5757\u7684\u5185\u5bb9\u8ddf\u968f\u5230\u4e0b\u4e00\u884c\uff0c\u7531\u56db\u4e2a\u7a7a\u683c\u7f29\u8fdb\u3002 Example: Note Text Text \u6539\u53d8\u6807\u9898 \u00b6 Example: title Text Text \u5220\u9664\u6807\u9898 \u00b6 Example: Text Text \u6298\u53e0\u5757 \u00b6 Example: title Text Text \u7c7b\u578b \u00b6 note/seealso note Text Text abstract/summary/tldr summary Text Text info/todo info Text Text tip/hint/important tip Text Text success/check/done done Text Text question/help/faq help Text Text failure/fail/missing fail Text Text danger/error error Text Text bug bug Text Text example/snippet example Text Text quote/cite cite Text Text CodeHilite \u00b6 \u7528\u6cd5 \u00b6 markdown \u7528\u6cd5 \u00b6 import tensorflow as tf Shebang \u7528\u6cd5 \u00b6 #!/usr/bin/python import tensorflow as tf \u4e09\u4e2a\u5192\u53f7 \u00b6 :::python import tensorflow as tf \u591a\u9009\u9879\u5361\u7684\u4ee3\u7801\u5757 \u00b6 ``` bash tab=\"Bash\" !/bin/bash \u00b6 echo \"Hello world!\" ``` c tab=\"C\" #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); } ``` c++ tab=\"C++\" include \u00b6 int main() { std::cout << \"Hello world!\" << std::endl; return 0; } ``` c# tab=\"C#\" using System; class Program { static void Main(string[] args) { Console.WriteLine(\"Hello world!\"); } } \u7279\u5b9a\u884c\u9ad8\u4eae \u00b6 #!python hl_lines=\"3 4\" \"\"\" Bubble sort \"\"\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] \u811a\u6ce8 \u00b6 \u5355\u884c 1 \u591a\u884c 2 \u5143\u6570\u636e \u00b6 \u8bbe\u7f6ehero\u6587\u672c hero: \u652f\u6301\u6458\u8981\u6587\u672c \u7ed9\u51fa\u4e0b\u8f7d\u94fe\u63a5 path: docs source: Material Theme Tutorial.md - \u7ed9\u51fa\u8df3\u8f6c\u94fe\u63a5 redirect: /new/url \u8986\u76d6 \u00b6 \u9875\u9762\u6807\u9898 title: \u9875\u9762\u6807\u9898 \u9875\u9762\u63cf\u8ff0 description: \u9875\u9762\u63cf\u8ff0 Pymdown \u00b6 \u5757 \u00b6 $$ $$ \\[ \\frac{n!}{k!(n-k)!} = \\binom{n}{k} \\] \u5185\u8054 \u00b6 $ $ Lorem ipsum dolor sit amet: \\(p(x|y) = \\frac{p(y|x)p(x)}{p(y)}\\) \u7c97\u4f53\u659c\u4f53 \u00b6 AA **** BB ** \u63d2\u5165\u7b26 \u00b6 inserted text \u4e0b\u5212\u7ebf ^^...^^ <u></u> \u8bc4\u8bba \u00b6 \u5220\u9664 \u6dfb\u52a0 \u9ad8\u4eae deleted added Highlighting one a single \u5185\u8054\u6ce8\u91ca and comments can be added inline . \u5757\u9ad8\u4eae Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. \u8868\u60c5 \u00b6 :shit: :smile: :heart: :thumbsup: \u5185\u8054\u4ee3\u7801\u9ad8\u4eae \u00b6 \u4f7f\u7528 #!js `#!js var test = 0;` var test = 0 ; \u7a81\u51fa \u00b6 ==...== AAA \u667a\u80fd\u7b26\u53f7 \u00b6 \u7bad\u5934 (\u2190, \u2192, \u2194) \u5546\u6807\u548c\u7248\u6743\u7b26\u53f7 (\u00a9, \u2122, \u00ae) \u5206\u6570 (\u00bd, \u00bc, ...). \u4efb\u52a1\u5217\u8868 \u00b6 Curabitur elit nibh, euismod et ullamcorper at, iaculis feugiat est Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst \u6ce2\u6d6a\u7ebf \u00b6 ~~...~~ AAA \u5355\u884c\u811a\u6ce8 \u21a9 \u591a\u884c\u811a\u6ce8 \u591a\u884c\u811a\u6ce8 \u591a\u884c\u811a\u6ce8 \u21a9","title":"Material Theme Tutorial"},{"location":"Material%20Theme%20Tutorial/#material-theme-tutorial","text":"\u66f4\u52a0\u5b8c\u6574\u7684Tutorial","title":"Material Theme Tutorial"},{"location":"Material%20Theme%20Tutorial/#_1","text":"","title":"\u8b66\u544a"},{"location":"Material%20Theme%20Tutorial/#_2","text":"\u8b66\u544a\u5757\u9075\u5faa\u4e00\u4e2a\u7b80\u5355\u7684\u8bed\u6cd5:\u6bcf\u4e2a\u5757\u90fd\u4ee5 !!! \uff0c\u7136\u540e\u4f7f\u7528\u4e00\u4e2a\u5173\u952e\u5b57\u4f5c\u4e3a\u5757\u7684\u7c7b\u578b\u9650\u5b9a\u7b26\u3002\u7136\u540e\uff0c\u5757\u7684\u5185\u5bb9\u8ddf\u968f\u5230\u4e0b\u4e00\u884c\uff0c\u7531\u56db\u4e2a\u7a7a\u683c\u7f29\u8fdb\u3002 Example: Note Text Text","title":"\u7528\u6cd5"},{"location":"Material%20Theme%20Tutorial/#_3","text":"Example: title Text Text","title":"\u6539\u53d8\u6807\u9898"},{"location":"Material%20Theme%20Tutorial/#_4","text":"Example: Text Text","title":"\u5220\u9664\u6807\u9898"},{"location":"Material%20Theme%20Tutorial/#_5","text":"Example: title Text Text","title":"\u6298\u53e0\u5757"},{"location":"Material%20Theme%20Tutorial/#_6","text":"note/seealso note Text Text abstract/summary/tldr summary Text Text info/todo info Text Text tip/hint/important tip Text Text success/check/done done Text Text question/help/faq help Text Text failure/fail/missing fail Text Text danger/error error Text Text bug bug Text Text example/snippet example Text Text quote/cite cite Text Text","title":"\u7c7b\u578b"},{"location":"Material%20Theme%20Tutorial/#codehilite","text":"","title":"CodeHilite"},{"location":"Material%20Theme%20Tutorial/#_7","text":"","title":"\u7528\u6cd5"},{"location":"Material%20Theme%20Tutorial/#markdown","text":"import tensorflow as tf","title":"markdown\u7528\u6cd5"},{"location":"Material%20Theme%20Tutorial/#shebang","text":"#!/usr/bin/python import tensorflow as tf","title":"Shebang\u7528\u6cd5"},{"location":"Material%20Theme%20Tutorial/#_8","text":":::python import tensorflow as tf","title":"\u4e09\u4e2a\u5192\u53f7"},{"location":"Material%20Theme%20Tutorial/#_9","text":"``` bash tab=\"Bash\"","title":"\u591a\u9009\u9879\u5361\u7684\u4ee3\u7801\u5757"},{"location":"Material%20Theme%20Tutorial/#binbash","text":"echo \"Hello world!\" ``` c tab=\"C\" #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); } ``` c++ tab=\"C++\"","title":"!/bin/bash"},{"location":"Material%20Theme%20Tutorial/#include","text":"int main() { std::cout << \"Hello world!\" << std::endl; return 0; } ``` c# tab=\"C#\" using System; class Program { static void Main(string[] args) { Console.WriteLine(\"Hello world!\"); } }","title":"include "},{"location":"Material%20Theme%20Tutorial/#_10","text":"#!python hl_lines=\"3 4\" \"\"\" Bubble sort \"\"\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j]","title":"\u7279\u5b9a\u884c\u9ad8\u4eae"},{"location":"Material%20Theme%20Tutorial/#_11","text":"\u5355\u884c 1 \u591a\u884c 2","title":"\u811a\u6ce8"},{"location":"Material%20Theme%20Tutorial/#_12","text":"\u8bbe\u7f6ehero\u6587\u672c hero: \u652f\u6301\u6458\u8981\u6587\u672c \u7ed9\u51fa\u4e0b\u8f7d\u94fe\u63a5 path: docs source: Material Theme Tutorial.md - \u7ed9\u51fa\u8df3\u8f6c\u94fe\u63a5 redirect: /new/url","title":"\u5143\u6570\u636e"},{"location":"Material%20Theme%20Tutorial/#_13","text":"\u9875\u9762\u6807\u9898 title: \u9875\u9762\u6807\u9898 \u9875\u9762\u63cf\u8ff0 description: \u9875\u9762\u63cf\u8ff0","title":"\u8986\u76d6"},{"location":"Material%20Theme%20Tutorial/#pymdown","text":"","title":"Pymdown"},{"location":"Material%20Theme%20Tutorial/#_14","text":"$$ $$ \\[ \\frac{n!}{k!(n-k)!} = \\binom{n}{k} \\]","title":"\u5757"},{"location":"Material%20Theme%20Tutorial/#_15","text":"$ $ Lorem ipsum dolor sit amet: \\(p(x|y) = \\frac{p(y|x)p(x)}{p(y)}\\)","title":"\u5185\u8054"},{"location":"Material%20Theme%20Tutorial/#_16","text":"AA **** BB **","title":"\u7c97\u4f53\u659c\u4f53"},{"location":"Material%20Theme%20Tutorial/#_17","text":"inserted text \u4e0b\u5212\u7ebf ^^...^^ <u></u>","title":"\u63d2\u5165\u7b26"},{"location":"Material%20Theme%20Tutorial/#_18","text":"\u5220\u9664 \u6dfb\u52a0 \u9ad8\u4eae deleted added Highlighting one a single \u5185\u8054\u6ce8\u91ca and comments can be added inline . \u5757\u9ad8\u4eae Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content.","title":"\u8bc4\u8bba"},{"location":"Material%20Theme%20Tutorial/#_19","text":":shit: :smile: :heart: :thumbsup:","title":"\u8868\u60c5"},{"location":"Material%20Theme%20Tutorial/#_20","text":"\u4f7f\u7528 #!js `#!js var test = 0;` var test = 0 ;","title":"\u5185\u8054\u4ee3\u7801\u9ad8\u4eae"},{"location":"Material%20Theme%20Tutorial/#_21","text":"==...== AAA","title":"\u7a81\u51fa"},{"location":"Material%20Theme%20Tutorial/#_22","text":"\u7bad\u5934 (\u2190, \u2192, \u2194) \u5546\u6807\u548c\u7248\u6743\u7b26\u53f7 (\u00a9, \u2122, \u00ae) \u5206\u6570 (\u00bd, \u00bc, ...).","title":"\u667a\u80fd\u7b26\u53f7"},{"location":"Material%20Theme%20Tutorial/#_23","text":"Curabitur elit nibh, euismod et ullamcorper at, iaculis feugiat est Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst","title":"\u4efb\u52a1\u5217\u8868"},{"location":"Material%20Theme%20Tutorial/#_24","text":"~~...~~ AAA \u5355\u884c\u811a\u6ce8 \u21a9 \u591a\u884c\u811a\u6ce8 \u591a\u884c\u811a\u6ce8 \u591a\u884c\u811a\u6ce8 \u21a9","title":"\u6ce2\u6d6a\u7ebf"},{"location":"MkDocs_demo/","text":"MkDocs_demo \u00b6 Demo yml \u00b6 # Project information site_name: Looper's wiki site_description: Looper's personal notes site_author: 'Looper - Xiao Xu' site_url: 'https://looperxx.github.io/My_wiki' # Repository repo_name: 'looperxx/My_wiki' repo_url: 'https://github.com/looperxx/My_wiki' # Copyright copyright: 'Copyright &copy; 2019 - 2020 Looper Xiao Xu' nav: - Home: index.md - NLP: - 'Machine Reading Comprehension': 'Neural Reading Comprehension and beyond.md' - For MkDocs: - 'Demo' : 'MkDocs_demo.md' - 'Material Theme Tutorial' : 'Material Theme Tutorial.md' theme: name: 'material' # name: 'readthedocs' language: 'zh' # palette: # primary: 'indigo' # accent: 'indigo' # font: # text: 'Roboto' # code: 'Roboto Mono' feature: tabs: true # logo: # icon: 'cloud' # Customization extra: social: - type: 'github' link: 'https://github.com/LooperXX' - type: 'linkedin' link: 'https://www.linkedin.com/in/%E5%95%B8-%E5%BE%90-012456163/' disqus: 'https-looperxx-github-io-my-wiki' # search: # language: 'en, zh' # Google Analytics google_analytics: - 'UA-XXXXXXXX-X' - 'auto' # Extensions extra_javascript: - 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML' markdown_extensions: - admonition - codehilite: guess_lang: false linenums: true - footnotes - meta - toc: permalink: true - pymdownx.arithmatex - pymdownx.betterem: smart_enable: all - pymdownx.caret - pymdownx.critic - pymdownx.details - pymdownx.emoji: emoji_generator: !!python/name:pymdownx.emoji.to_svg - pymdownx.inlinehilite - pymdownx.magiclink - pymdownx.mark - pymdownx.smartsymbols - pymdownx.superfences - pymdownx.tasklist: custom_checkbox: true - pymdownx.tilde Requirements \u00b6 pip install mkdocs pip install mkdocs-material pip install pygments pip install pymdown-extensions","title":"Demo"},{"location":"MkDocs_demo/#mkdocs_demo","text":"","title":"MkDocs_demo"},{"location":"MkDocs_demo/#demo-yml","text":"# Project information site_name: Looper's wiki site_description: Looper's personal notes site_author: 'Looper - Xiao Xu' site_url: 'https://looperxx.github.io/My_wiki' # Repository repo_name: 'looperxx/My_wiki' repo_url: 'https://github.com/looperxx/My_wiki' # Copyright copyright: 'Copyright &copy; 2019 - 2020 Looper Xiao Xu' nav: - Home: index.md - NLP: - 'Machine Reading Comprehension': 'Neural Reading Comprehension and beyond.md' - For MkDocs: - 'Demo' : 'MkDocs_demo.md' - 'Material Theme Tutorial' : 'Material Theme Tutorial.md' theme: name: 'material' # name: 'readthedocs' language: 'zh' # palette: # primary: 'indigo' # accent: 'indigo' # font: # text: 'Roboto' # code: 'Roboto Mono' feature: tabs: true # logo: # icon: 'cloud' # Customization extra: social: - type: 'github' link: 'https://github.com/LooperXX' - type: 'linkedin' link: 'https://www.linkedin.com/in/%E5%95%B8-%E5%BE%90-012456163/' disqus: 'https-looperxx-github-io-my-wiki' # search: # language: 'en, zh' # Google Analytics google_analytics: - 'UA-XXXXXXXX-X' - 'auto' # Extensions extra_javascript: - 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML' markdown_extensions: - admonition - codehilite: guess_lang: false linenums: true - footnotes - meta - toc: permalink: true - pymdownx.arithmatex - pymdownx.betterem: smart_enable: all - pymdownx.caret - pymdownx.critic - pymdownx.details - pymdownx.emoji: emoji_generator: !!python/name:pymdownx.emoji.to_svg - pymdownx.inlinehilite - pymdownx.magiclink - pymdownx.mark - pymdownx.smartsymbols - pymdownx.superfences - pymdownx.tasklist: custom_checkbox: true - pymdownx.tilde","title":"Demo yml"},{"location":"MkDocs_demo/#requirements","text":"pip install mkdocs pip install mkdocs-material pip install pygments pip install pymdown-extensions","title":"Requirements"},{"location":"NLP%20Concepts/","text":"NLP Concepts \u00b6 NMT Concepts \u00b6 \u8fd9\u662f\u4e00\u95e8\u5c06\u4e00\u79cd\u81ea\u7136\u6e90\u8bed\u8a00\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u81ea\u7136\u76ee\u6807\u8bed\u8a00\u7684\u6280\u672f\u3002 \u8fd1\u4e9b\u5e74\u6765\uff0c\u4ee5\u6570\u636e\u4e3a\u9a71\u52a8\u7684\u89e3\u51b3\u65b9\u6848\u662f\u7814\u7a76\u8005\u4eec\u7684\u4e3b\u6d41\u65b9\u5411\uff0c\u4f8b\u5982\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1SMT\u548c\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1NMT\u3002 \u5c3d\u7ba1SMT\u5728\u8fc7\u53bb\u7684\u4e8c\u5341\u5e74\u4e2d\u53d6\u5f97\u4e86\u5de8\u5927\u7684\u8fdb\u6b65\uff0c\u57fa\u4e8e\u5355\u8bcd\u3001\u77ed\u8bed\u4ee5\u53ca\u8bed\u6cd5\u7684\u6a21\u578b\u5c42\u51fa\u4e0d\u7a77\uff0c\u4f46\u7ffb\u8bd1\u8d28\u91cf\u5e76\u6ca1\u6709\u771f\u6b63\u8fbe\u5230\u8ba9\u7528\u6237\u6ee1\u610f\u7684\u6c34\u51c6\uff0c\u5e76\u4e14SMT\u7cfb\u7edf\u53d8\u5f97\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u8bb8\u591a\u4e0d\u540c\u7684\u7ec4\u4ef6\u90fd\u662f\u5355\u72ec\u6784\u5efa\u7684\uff0c\u8fd9\u4f7f\u5f97\u8fdb\u4e00\u6b65\u5f00\u53d1\u53d8\u5f97\u6781\u5176\u56f0\u96be\u3002SMT\u7684\u7f3a\u70b9\u5f88\u660e\u663e\uff0c\u79bb\u6563\u8868\u793a\u7684\u6570\u636e\u7a00\u758f\u95ee\u9898\u3001\u96be\u4ee5\u89e3\u51b3\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u95ee\u9898\u4ee5\u53ca\u9700\u8981\u4e13\u95e8\u8bbe\u8ba1\u7684\u7279\u5f81\u3001\u9690\u5f0f\u7ed3\u6784\u4e0e\u7ffb\u8bd1\u8fc7\u7a0b\u3002 \u800cNMT\u5229\u7528\u8fde\u7eed\u7684\u8868\u793a\u4ee3\u66ff\u79bb\u6563\u8868\u793a\uff0c\u5229\u7528\u795e\u7ecf\u7f51\u7edc\u5b9e\u73b0\u9ad8\u7ef4\u7a7a\u95f4\u4e0b\u7684\u81ea\u7136\u8bed\u8a00\u4e4b\u95f4\u7684\u76f8\u4e92\u6620\u5c04\u3002\u57fa\u4e8eEncoder-Decoder\u6846\u67b6\u548cRNN\uff0c\u53ef\u4ee5\u5c06\u6e90\u8bed\u8a00\u7684\u8bed\u53e5\u8f6c\u5316\u4e3acontext vector\uff0c\u518d\u8f6c\u5316\u4e3a\u76ee\u6807\u8bed\u8a00\u7684\u8bed\u53e5\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u901a\u8fc7LSTM\u548cGRU\u7b49\u95e8\u9600\u673a\u5236\u5e2e\u52a9\u7f13\u89e3\u68af\u5ea6\u6d88\u5931\u4e0e\u68af\u5ea6\u7206\u70b8\u95ee\u9898\uff0c\u4f46\u662f\u5176\u6839\u672c\u7f3a\u70b9\u5728\u4e8e\u5c06\u4efb\u610f\u957f\u5ea6\u7684\u53e5\u5b50\u90fd\u7f16\u7801\u4e3a\u56fa\u5b9a\u957f\u5ea6\u3002\u4e3a\u6b64\uff0c\u5f15\u5165\u6ce8\u610f\u529b\u673a\u5236\uff0c\u4f8b\u5982\u901a\u8fc7\u8ba1\u7b97encoder\u548cdecoder\u4e2d\u9690\u5c42\u5411\u91cf\u7684\u76f8\u5173\u6027\u4f5c\u4e3acontext vector\u7684\u52a0\u6743\u6743\u91cd\uff0c\u52a8\u6001\u8ba1\u7b97\u5173\u8054\u5f3a\u5ea6\u4ee5\u63d0\u5347\u957f\u53e5\u7ffb\u8bd1\u6548\u679c\uff1b\u5f15\u5165CNN\uff0c\u89e3\u51b3RNN\u65e0\u6cd5\u5e76\u884c\u5316\u8ba1\u7b97\u7684\u95ee\u9898\uff0c\u5e76\u5bb9\u6613\u6355\u6349\u5230\u4e00\u4e9b\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u518d\u501f\u52a9\u6b8b\u5dee\u8fde\u63a5\u548c\u6ce8\u610f\u529b\u673a\u5236\uff0c\u83b7\u5f97\u5177\u6709\u66f4\u5927\u6a21\u578b\u5bb9\u91cf\u3001\u66f4\u5f3a\u6a21\u578b\u8868\u793a\u80fd\u529b\u7684\u6df1\u5c42\u6a21\u578b\uff1b\u4f7f\u7528\u7eaf\u7cb9\u7684\u6ce8\u610f\u529b\u673a\u5236Self-Attention\uff0c\u4e0e\u4f20\u7edf\u7684Attention\u673a\u5236\u975e\u5e38\u7684\u4e0d\u540c\uff1a\u4f20\u7edf\u7684Attention\u662f\u57fa\u4e8esource\u7aef\u548ctarget\u7aef\u7684hidden state\u8ba1\u7b97Attention\u7684\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6e90\u7aef\u7684\u6bcf\u4e2a\u8bcd\u4e0e\u76ee\u6807\u7aef\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u4f46Self Attention\u4e0d\u540c\uff0c\u5b83\u53ef\u4ee5\u4e0d\u4ec5\u53ef\u4ee5\u5f97\u5230\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u6709\u6548\u83b7\u53d6\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u81ea\u8eab\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u51cf\u5c0f\uff0c\u53ef\u5e76\u884c\u5316\u5e76\u4e14\u5229\u4e8e\u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\u3002 \u673a\u5668\u7ffb\u8bd1\u8fd8\u5728\u6301\u7eed\u53d1\u5c55\uff0c\u9700\u8981\u514b\u670d\u9886\u57df\u8bef\u5339\u914d\u3001\u8bad\u7ec3\u6570\u636e\u7684\u603b\u91cf\u3001\u751f\u50fb\u8bcd\u3001\u957f\u53e5\u5b50\u3001\u8bcd\u5bf9\u9f50\u548c\u675f\u641c\u7d22\u7684\u6311\u6218\uff0c\u5b9e\u73b0\u7ffb\u8bd1\u8d28\u91cf\u3001\u7ffb\u8bd1\u9886\u57df\u3001\u7ffb\u8bd1\u8bed\u8a00\u79cd\u7c7b\u4e09\u4e2a\u7ef4\u5ea6\u7684\u9ad8\u6c34\u5e73\u673a\u5668\u7ffb\u8bd1\u3002 MRC Concepts \u00b6 \u5173\u4e8e\u673a\u5668\u9605\u8bfb\u7406\u89e3\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u662f\u4e00\u95e8\u8ba9\u673a\u5668\u50cf\u4eba\u7c7b\u4e00\u6837\u9605\u8bfb\u6587\u672c\uff0c\u8fdb\u800c\u6839\u636e\u5bf9\u8be5\u6587\u672c\u7684\u7406\u89e3\u6765\u56de\u7b54\u95ee\u9898\u7684\u6280\u672f\u3002 \u8fd9\u4e00\u4efb\u52a1\u4e3b\u8981\u5206\u4e3a\u56db\u7c7b\uff1a\u5b8c\u5f62\u586b\u7a7a\u3001\u5355\u9879\u9009\u62e9\u3001\u8303\u56f4\u9884\u6d4b\u4ee5\u53ca\u5f00\u653e\u5f0f\u95ee\u7b54\uff0c\u57fa\u4e8eEM\u3001F1 Score\u548cBLEU\u7b49\u6307\u6807\u8bc4\u4ef7\u6a21\u578b\u3002\u4e3a\u4e86\u964d\u4f4e\u96be\u5ea6\uff0c\u6a21\u578b\u5927\u90fd\u5c06\u4e16\u754c\u77e5\u8bc6\u6392\u9664\u5728\u5916\u3002\u76f8\u8f83\u4e8eQA\uff0c\u9605\u8bfb\u7406\u89e3\u5219\u66f4\u5f3a\u8c03\u6587\u672c\u7406\u89e3\uff0c\u5e76\u4ee5\u56de\u7b54\u95ee\u9898\u7684\u5f62\u5f0f\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u7684\u7a0b\u5ea6\uff0c\u6240\u4ee5\u56de\u7b54\u7406\u89e3\u95ee\u9898\u7684\u4fe1\u606f\u90fd\u662f\u6765\u81ea\u4e8e\u6587\u7ae0\u672c\u8eab\u800c\u4e0d\u662f\u4e16\u754c\u77e5\u8bc6\u3002 \u4f20\u7edf\u7684MRC\u57fa\u4e8e(passage,question,answer)\u7684\u4e09\u5143\u7ec4\u8bad\u7ec3\u51fa\u5b9e\u73b0f:(passage,question)->answer\u7684\u7edf\u8ba1\u5b66\u6a21\u578b\uff0c\u9ad8\u5ea6\u4f9d\u8d56\u5df2\u6709\u7684\u8bed\u8a00\u5de5\u5177\uff0c\u624b\u5de5\u8bbe\u8ba1\u5927\u91cf\u7279\u5f81\uff0c\u4f46\u7279\u5f81\u901a\u5e38\u975e\u5e38\u7a00\u758f\u5e76\u4e14\u6982\u62ec\u6027\u5dee\u300215\u5e74\u5927\u89c4\u6a21\u6570\u636e\u96c6\u548c\u795e\u7ecf\u6a21\u578b\u7684\u51fa\u73b0\u4fc3\u8fdb\u4e86MRC\u9886\u57df\u7684\u53d1\u5c55\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u5177\u5907\u4ee5\u4e0b\u4f18\u70b9\uff1a\u81ea\u52a8\u5b66\u4e60\u7279\u5f81\uff1b\u8bcd\u5d4c\u5165\u7f13\u89e3\u53d8\u91cf\u7a00\u758f\u7684\u95ee\u9898\uff1b\u6982\u5ff5\u7b80\u5355\uff0c\u5c06\u4efb\u52a1\u8f6c\u6362\u4e3a\u6784\u5efa\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u7684\u95ee\u9898\u3002\u5176\u5de5\u4f5c\u6d41\u7a0b\u4e3b\u8981\u5206\u4e3a\uff1a\u7406\u89e3\u6587\u7ae0\uff0c\u7406\u89e3\u95ee\u9898\u4ee5\u53ca\u7406\u89e3\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u7684\u8054\u7cfb\u3002\u4ee5THE STANFORD ATTENTIVE READER\u4e3a\u4f8b\uff0c\u901a\u8fc7\u53cc\u5411LSTM(\u591a\u5c42)\u7684Encoder-Decoder\u6846\u67b6\uff0c\u9996\u5148\u4ee5\u8bcd\u5d4c\u5165\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a(\u540c\u65f6\u8003\u8651\u5355\u8bcd\u81ea\u8eab\u5c5e\u6027\u4ee5\u53ca\u5355\u8bcd\u548c\u95ee\u9898\u7684\u76f8\u5173\u6027)\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\u800c\u8a00\uff0c\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u6a21\u578b\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002\u968f\u7740\u7814\u7a76\u7684\u6df1\u5165\uff0c\u5b57\u7b26\u7ea7\u522b\u7684embedding\u53ef\u4ee5\u63d0\u5347\u5c11\u89c1\u8bcd\u548c\u8bcd\u5e93\u5916\u5355\u8bcd\u7684\u8868\u5f81\uff0c\u4f9d\u9760\u4e0a\u4e0b\u6587\u52a8\u6001\u8c03\u6574embedding\u53ef\u4ee5\u89e3\u51b3\u591a\u4e49\u8bcd\u95ee\u9898\uff0c\u4e0d\u540c\u5c42\u6b21\u7684attention\u7ec4\u5408\u3001\u53cc\u5411attention\u4ee5\u53ca\u4f7f\u7528self-attention\u673a\u5236\u7684Transformer\u67b6\u6784\u7684\u5f15\u5165\uff0c\u90fd\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u5347\u4e86\u6a21\u578b\u7684\u6027\u80fd\u3002 MRC\u9886\u57df\u672a\u6765\u9700\u8981\u5efa\u7acb\u66f4\u5177\u5907\u96be\u5ea6\uff0c\u66f4\u63a5\u8fd1\u771f\u5b9e\u5e94\u7528\u573a\u666f\u7684\u5927\u89c4\u6a21\u6570\u636e\u96c6\uff0c\u5e76\u5f15\u5165\u4e16\u754c\u77e5\u8bc6\uff0c\u53d1\u5c55\u66f4\u5b8c\u5584\u7684\u63a8\u7406\u673a\u5236\uff0c\u540c\u65f6\u9700\u8981\u5e94\u7528\u5927\u89c4\u6a21\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u518d\u5c06\u9605\u8bfb\u7406\u89e3\u6280\u672f\u63a8\u5e7f\u5230\u591a\u8bed\u8a00\u3001\u4ee5\u53caQA\u7b49\u5176\u4ed6NLP\u4efb\u52a1\u4e2d\u3002\u771f\u6b63\u505a\u5230\uff0c\u66f4\u591a\u6570\u636e\uff0c\u66f4\u591a\u77e5\u8bc6\uff0c\u66f4\u6df1\u7406\u89e3\u3002 QA Concepts \u00b6 \u8fd9\u662f\u4e00\u95e8\u51c6\u786e\u5730\u7406\u89e3\u4ee5\u81ea\u7136\u8bed\u8a00\u5f62\u5f0f\u63cf\u8ff0\u7684\u7528\u6237\u63d0\u95ee\uff0c\u5e76\u901a\u8fc7\u68c0\u7d22\u5f02\u6784\u8bed\u6599\u5e93\u6216\u95ee\u7b54\u77e5\u8bc6\u5e93\u8fd4\u56de\u7b80\u6d01\u3001\u7cbe\u786e\u7684\u5339\u914d\u7b54\u6848\u7684\u6280\u672f\u3002 \u95ee\u7b54\u7cfb\u7edf\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u4e3b\u8981\u5728\u95ee\u9898\u3001\u6570\u636e\u548c\u7b54\u6848\u4e09\u4e2a\u7ef4\u5ea6\u4e0a\uff1a\u9650\u5b9a\u57df/\u5f00\u653e\u57df\u7684\u95ee\u9898\u3001\u7ed3\u6784\u5316/\u534a\u7ed3\u6784\u5316/\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\u3001\u62bd\u53d6\u5f0f/\u751f\u6210\u5f0f\u7684\u7b54\u6848\u3002 \u57fa\u4e8e\u4fe1\u606f\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\u662f\u7ed3\u5408\u5173\u952e\u8bcd\u5339\u914d\u548c\u4fe1\u606f\u62bd\u53d6\u7684\u7ecf\u5178\u6d45\u5c42\u8bed\u4e49\u5206\u6790\u65b9\u6cd5\uff0c\u5904\u7406\u6d41\u7a0b\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u4e3a\u95ee\u9898\u89e3\u6790\uff08\u5904\u7406\u95ee\u9898\u5e76\u751f\u6210\u95ee\u9898\u5173\u952e\u8bcd\uff09\u3001\u4fe1\u606f\u68c0\u7d22\u3001\u7b54\u6848\u62bd\u53d6\u4e09\u6b65\u3002\u7b80\u800c\u8a00\u4e4b\uff0c\u662f\u5728 IR \u68c0\u7d22\u51fa\u4e0e Query \u76f8\u5173\u7684\u6587\u6863 Document \u7684\u57fa\u7840\u4e0a\uff0c\u6a21\u578b\u53bb\u9605\u8bfb\u5e76\u7406\u89e3 Q \u548c D\uff0c\u5f97\u5230\u7b54\u6848 Answer\u3002 \u968f\u540e\u51fa\u73b0\u4e86\u57fa\u4e8e\u95ee\u7b54\u77e5\u8bc6\u5e93KB\u3001\u57fa\u4e8e\u77e5\u8bc6\u56fe\u8c31KG\u7b49\u65b9\u6cd5\uff0c\u95ee\u7b54\u7cfb\u7edf\u5f80\u5f80\u662f\u591a\u79cd\u673a\u5236\u7684\u7ec4\u5408\u3002\u4f20\u7edf\u7684\u57fa\u4e8e\u7b26\u53f7\u8868\u793a\u7684\u77e5\u8bc6\u5e93\u95ee\u7b54\u662f\u57fa\u4e8e\u77e5\u8bc6\u5e93\u7684\u6d45\u5c42\u63a8\u65ad\uff0c\u901a\u8fc7\u5b9e\u4f53\u94fe\u63a5\u548c\u5173\u7cfb\u62bd\u53d6\u5efa\u7acb\u81ea\u7136\u8bed\u8a00\u548c\u77e5\u8bc6\u5e93\u4e4b\u95f4\u7684\u6620\u5c04\uff0c\u5c06\u95ee\u9898\u7684\u8bed\u4e49\u8868\u793a\u4e0e\u77e5\u8bc6\u5e93\u8fdb\u884c\u5173\u8054\uff0c\u4f9d\u9760\u8fc7\u591a\u7684\u4eba\u5de5\u4ecb\u5165\u3001\u89c4\u5219\u4e0e\u6a21\u677f\u7b49\uff0c\u6548\u679c\u59cb\u7ec8\u4e0d\u5982\u4eba\u610f\u3002 \u968f\u7740\u6df1\u5ea6\u5b66\u4e60\u7684\u53d1\u5c55\uff0c\u795e\u7ecf\u7b54\u6848\u62bd\u53d6\u5e2e\u52a9\u57fa\u4e8eIR\u7684QA\u53d6\u5f97\u4e86\u4ee4\u4eba\u77a9\u76ee\u7684\u6548\u679c\uff1aTHE STANFORD ATTENTIVE READER\u901a\u8fc7\u53cc\u5411LSTM(\u591a\u5c42)\u7684Encoder-Decoder\u6846\u67b6\uff0c\u9996\u5148\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a(\u540c\u65f6\u8003\u8651\u5355\u8bcd\u81ea\u8eab\u5c5e\u6027\u4ee5\u53ca\u5355\u8bcd\u548c\u95ee\u9898\u7684\u76f8\u5173\u6027)\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\u800c\u8a00\uff0c\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u6a21\u578b\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002 \u800c\u5bf9\u4e8eKBQA\u800c\u8a00\uff0c\u6a21\u578b\u9700\u8981\u5bf9\u7ed9\u5b9a\u7684\u81ea\u7136\u8bed\u8a00\u95ee\u9898\u8fdb\u884c\u8bed\u4e49\u7406\u89e3\u548c\u89e3\u6790\uff0c\u8fdb\u800c\u7528\u77e5\u8bc6\u5e93\u8fdb\u884c\u8bed\u4e49\u5339\u914d\u3001\u67e5\u8be2\u4e0e\u63a8\u7406\u5f97\u51fa\u7b54\u6848\uff0c\u4e3b\u8981\u5305\u62ec\u77e5\u8bc6\u5e93\u7684\u5efa\u7acb\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u8be5\u77e5\u8bc6\u5e93\u67e5\u8be2/\u63a8\u7406\u7b54\u6848\u4e24\u4e2a\u5173\u952e\u90e8\u5206\u3002\u901a\u8fc7RDF\u6216\u56fe\u6570\u636e\u5e93\u5b58\u50a8\u7ed3\u6784\u5316/\u534a\u7ed3\u6784\u5316/\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u7ecf\u8fc7\u4fe1\u606f\u62bd\u53d6(\u5b9e\u4f53\u62bd\u53d6\u3001\u5173\u7cfb\u62bd\u53d6\u3001\u5c5e\u6027\u62bd\u53d6)\uff0c\u77e5\u8bc6\u878d\u5408(\u5b9e\u4f53\u94fe\u63a5\u3001\u77e5\u8bc6\u5408\u5e76)\uff0c\u77e5\u8bc6\u52a0\u5de5(\u672c\u4f53\u6784\u5efa\u3001\u77e5\u8bc6\u63a8\u7406)\uff0c\u77e5\u8bc6\u66f4\u65b0\u7b49\u6b65\u9aa4\uff0c\u5efa\u7acb\u8d77\u5b8c\u5907\u6709\u6548\u7684\u77e5\u8bc6\u5e93/\u77e5\u8bc6\u56fe\u8c31\uff0c\u5b8c\u6210\u4e86\u5c06\u77e5\u8bc6\u3001\u6587\u6863\u3001\u53e5\u5b50\u3001\u8bcd\u6c47\u6620\u5c04\u5230\u7edf\u4e00\u8bed\u4e49\u7a7a\u95f4\u4e0b\uff0c\u5b9e\u73b0\u8de8\u9886\u57df\u3001\u8de8\u5bf9\u8c61\u7684\u77e5\u8bc6\u8fc1\u79fb\uff0c\u63d0\u4f9b\u591a\u4efb\u52a1\u5b66\u4e60\u7684\u7edf\u4e00\u5e95\u5c42\u8868\u793a\u3002\u518d\u901a\u8fc7\u8bed\u4e49\u89e3\u6790\u3001\u4fe1\u606f\u62bd\u53d6\u3001\u5411\u91cf\u5efa\u6a21\u7b49\u65b9\u6cd5\uff0c\u5b9e\u73b0\u95ee\u9898\u8bed\u4e49\u548c\u77e5\u8bc6\u8bed\u4e49\u7684\u7406\u89e3\u548c\u5339\u914d\uff0c\u5373\u5b8c\u6210\u95ee\u9898\u7684\u7406\u89e3\u4e0e\u8868\u793a\uff0c\u518d\u5c06\u5176\u5173\u8054\u5230\u77e5\u8bc6\u5e93\u7684\u7ed3\u6784\u5316\u67e5\u8be2\u4e2d\u5b8c\u6210\u8bed\u4e49\u5173\u8054\u3002 QA\u9886\u57df\u76ee\u524d\u8fd8\u5728\u6301\u7eed\u53d1\u5c55\uff0c\u5bf9\u4e8e\u590d\u6742\u95ee\u9898\u548c\u63a8\u7406\u6027\u95ee\u9898\u7684\u7814\u7a76\u8fd8\u5728\u7ee7\u7eed\u3002","title":"Some Concepts"},{"location":"NLP%20Concepts/#nlp-concepts","text":"","title":"NLP Concepts"},{"location":"NLP%20Concepts/#nmt-concepts","text":"\u8fd9\u662f\u4e00\u95e8\u5c06\u4e00\u79cd\u81ea\u7136\u6e90\u8bed\u8a00\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u81ea\u7136\u76ee\u6807\u8bed\u8a00\u7684\u6280\u672f\u3002 \u8fd1\u4e9b\u5e74\u6765\uff0c\u4ee5\u6570\u636e\u4e3a\u9a71\u52a8\u7684\u89e3\u51b3\u65b9\u6848\u662f\u7814\u7a76\u8005\u4eec\u7684\u4e3b\u6d41\u65b9\u5411\uff0c\u4f8b\u5982\u7edf\u8ba1\u673a\u5668\u7ffb\u8bd1SMT\u548c\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1NMT\u3002 \u5c3d\u7ba1SMT\u5728\u8fc7\u53bb\u7684\u4e8c\u5341\u5e74\u4e2d\u53d6\u5f97\u4e86\u5de8\u5927\u7684\u8fdb\u6b65\uff0c\u57fa\u4e8e\u5355\u8bcd\u3001\u77ed\u8bed\u4ee5\u53ca\u8bed\u6cd5\u7684\u6a21\u578b\u5c42\u51fa\u4e0d\u7a77\uff0c\u4f46\u7ffb\u8bd1\u8d28\u91cf\u5e76\u6ca1\u6709\u771f\u6b63\u8fbe\u5230\u8ba9\u7528\u6237\u6ee1\u610f\u7684\u6c34\u51c6\uff0c\u5e76\u4e14SMT\u7cfb\u7edf\u53d8\u5f97\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u8bb8\u591a\u4e0d\u540c\u7684\u7ec4\u4ef6\u90fd\u662f\u5355\u72ec\u6784\u5efa\u7684\uff0c\u8fd9\u4f7f\u5f97\u8fdb\u4e00\u6b65\u5f00\u53d1\u53d8\u5f97\u6781\u5176\u56f0\u96be\u3002SMT\u7684\u7f3a\u70b9\u5f88\u660e\u663e\uff0c\u79bb\u6563\u8868\u793a\u7684\u6570\u636e\u7a00\u758f\u95ee\u9898\u3001\u96be\u4ee5\u89e3\u51b3\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u95ee\u9898\u4ee5\u53ca\u9700\u8981\u4e13\u95e8\u8bbe\u8ba1\u7684\u7279\u5f81\u3001\u9690\u5f0f\u7ed3\u6784\u4e0e\u7ffb\u8bd1\u8fc7\u7a0b\u3002 \u800cNMT\u5229\u7528\u8fde\u7eed\u7684\u8868\u793a\u4ee3\u66ff\u79bb\u6563\u8868\u793a\uff0c\u5229\u7528\u795e\u7ecf\u7f51\u7edc\u5b9e\u73b0\u9ad8\u7ef4\u7a7a\u95f4\u4e0b\u7684\u81ea\u7136\u8bed\u8a00\u4e4b\u95f4\u7684\u76f8\u4e92\u6620\u5c04\u3002\u57fa\u4e8eEncoder-Decoder\u6846\u67b6\u548cRNN\uff0c\u53ef\u4ee5\u5c06\u6e90\u8bed\u8a00\u7684\u8bed\u53e5\u8f6c\u5316\u4e3acontext vector\uff0c\u518d\u8f6c\u5316\u4e3a\u76ee\u6807\u8bed\u8a00\u7684\u8bed\u53e5\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u901a\u8fc7LSTM\u548cGRU\u7b49\u95e8\u9600\u673a\u5236\u5e2e\u52a9\u7f13\u89e3\u68af\u5ea6\u6d88\u5931\u4e0e\u68af\u5ea6\u7206\u70b8\u95ee\u9898\uff0c\u4f46\u662f\u5176\u6839\u672c\u7f3a\u70b9\u5728\u4e8e\u5c06\u4efb\u610f\u957f\u5ea6\u7684\u53e5\u5b50\u90fd\u7f16\u7801\u4e3a\u56fa\u5b9a\u957f\u5ea6\u3002\u4e3a\u6b64\uff0c\u5f15\u5165\u6ce8\u610f\u529b\u673a\u5236\uff0c\u4f8b\u5982\u901a\u8fc7\u8ba1\u7b97encoder\u548cdecoder\u4e2d\u9690\u5c42\u5411\u91cf\u7684\u76f8\u5173\u6027\u4f5c\u4e3acontext vector\u7684\u52a0\u6743\u6743\u91cd\uff0c\u52a8\u6001\u8ba1\u7b97\u5173\u8054\u5f3a\u5ea6\u4ee5\u63d0\u5347\u957f\u53e5\u7ffb\u8bd1\u6548\u679c\uff1b\u5f15\u5165CNN\uff0c\u89e3\u51b3RNN\u65e0\u6cd5\u5e76\u884c\u5316\u8ba1\u7b97\u7684\u95ee\u9898\uff0c\u5e76\u5bb9\u6613\u6355\u6349\u5230\u4e00\u4e9b\u5168\u5c40\u7684\u7ed3\u6784\u4fe1\u606f\uff0c\u518d\u501f\u52a9\u6b8b\u5dee\u8fde\u63a5\u548c\u6ce8\u610f\u529b\u673a\u5236\uff0c\u83b7\u5f97\u5177\u6709\u66f4\u5927\u6a21\u578b\u5bb9\u91cf\u3001\u66f4\u5f3a\u6a21\u578b\u8868\u793a\u80fd\u529b\u7684\u6df1\u5c42\u6a21\u578b\uff1b\u4f7f\u7528\u7eaf\u7cb9\u7684\u6ce8\u610f\u529b\u673a\u5236Self-Attention\uff0c\u4e0e\u4f20\u7edf\u7684Attention\u673a\u5236\u975e\u5e38\u7684\u4e0d\u540c\uff1a\u4f20\u7edf\u7684Attention\u662f\u57fa\u4e8esource\u7aef\u548ctarget\u7aef\u7684hidden state\u8ba1\u7b97Attention\u7684\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6e90\u7aef\u7684\u6bcf\u4e2a\u8bcd\u4e0e\u76ee\u6807\u7aef\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1b\u4f46Self Attention\u4e0d\u540c\uff0c\u5b83\u53ef\u4ee5\u4e0d\u4ec5\u53ef\u4ee5\u5f97\u5230\u6e90\u7aef\u4e0e\u76ee\u6807\u7aef\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u6709\u6548\u83b7\u53d6\u6e90\u7aef\u6216\u76ee\u6807\u7aef\u81ea\u8eab\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u51cf\u5c0f\uff0c\u53ef\u5e76\u884c\u5316\u5e76\u4e14\u5229\u4e8e\u957f\u8ddd\u79bb\u4f9d\u8d56\u5b66\u4e60\u3002 \u673a\u5668\u7ffb\u8bd1\u8fd8\u5728\u6301\u7eed\u53d1\u5c55\uff0c\u9700\u8981\u514b\u670d\u9886\u57df\u8bef\u5339\u914d\u3001\u8bad\u7ec3\u6570\u636e\u7684\u603b\u91cf\u3001\u751f\u50fb\u8bcd\u3001\u957f\u53e5\u5b50\u3001\u8bcd\u5bf9\u9f50\u548c\u675f\u641c\u7d22\u7684\u6311\u6218\uff0c\u5b9e\u73b0\u7ffb\u8bd1\u8d28\u91cf\u3001\u7ffb\u8bd1\u9886\u57df\u3001\u7ffb\u8bd1\u8bed\u8a00\u79cd\u7c7b\u4e09\u4e2a\u7ef4\u5ea6\u7684\u9ad8\u6c34\u5e73\u673a\u5668\u7ffb\u8bd1\u3002","title":"NMT Concepts"},{"location":"NLP%20Concepts/#mrc-concepts","text":"\u5173\u4e8e\u673a\u5668\u9605\u8bfb\u7406\u89e3\uff0c\u5b66\u751f\u8ba4\u4e3a\u8fd9\u662f\u4e00\u95e8\u8ba9\u673a\u5668\u50cf\u4eba\u7c7b\u4e00\u6837\u9605\u8bfb\u6587\u672c\uff0c\u8fdb\u800c\u6839\u636e\u5bf9\u8be5\u6587\u672c\u7684\u7406\u89e3\u6765\u56de\u7b54\u95ee\u9898\u7684\u6280\u672f\u3002 \u8fd9\u4e00\u4efb\u52a1\u4e3b\u8981\u5206\u4e3a\u56db\u7c7b\uff1a\u5b8c\u5f62\u586b\u7a7a\u3001\u5355\u9879\u9009\u62e9\u3001\u8303\u56f4\u9884\u6d4b\u4ee5\u53ca\u5f00\u653e\u5f0f\u95ee\u7b54\uff0c\u57fa\u4e8eEM\u3001F1 Score\u548cBLEU\u7b49\u6307\u6807\u8bc4\u4ef7\u6a21\u578b\u3002\u4e3a\u4e86\u964d\u4f4e\u96be\u5ea6\uff0c\u6a21\u578b\u5927\u90fd\u5c06\u4e16\u754c\u77e5\u8bc6\u6392\u9664\u5728\u5916\u3002\u76f8\u8f83\u4e8eQA\uff0c\u9605\u8bfb\u7406\u89e3\u5219\u66f4\u5f3a\u8c03\u6587\u672c\u7406\u89e3\uff0c\u5e76\u4ee5\u56de\u7b54\u95ee\u9898\u7684\u5f62\u5f0f\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u7684\u7a0b\u5ea6\uff0c\u6240\u4ee5\u56de\u7b54\u7406\u89e3\u95ee\u9898\u7684\u4fe1\u606f\u90fd\u662f\u6765\u81ea\u4e8e\u6587\u7ae0\u672c\u8eab\u800c\u4e0d\u662f\u4e16\u754c\u77e5\u8bc6\u3002 \u4f20\u7edf\u7684MRC\u57fa\u4e8e(passage,question,answer)\u7684\u4e09\u5143\u7ec4\u8bad\u7ec3\u51fa\u5b9e\u73b0f:(passage,question)->answer\u7684\u7edf\u8ba1\u5b66\u6a21\u578b\uff0c\u9ad8\u5ea6\u4f9d\u8d56\u5df2\u6709\u7684\u8bed\u8a00\u5de5\u5177\uff0c\u624b\u5de5\u8bbe\u8ba1\u5927\u91cf\u7279\u5f81\uff0c\u4f46\u7279\u5f81\u901a\u5e38\u975e\u5e38\u7a00\u758f\u5e76\u4e14\u6982\u62ec\u6027\u5dee\u300215\u5e74\u5927\u89c4\u6a21\u6570\u636e\u96c6\u548c\u795e\u7ecf\u6a21\u578b\u7684\u51fa\u73b0\u4fc3\u8fdb\u4e86MRC\u9886\u57df\u7684\u53d1\u5c55\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u5177\u5907\u4ee5\u4e0b\u4f18\u70b9\uff1a\u81ea\u52a8\u5b66\u4e60\u7279\u5f81\uff1b\u8bcd\u5d4c\u5165\u7f13\u89e3\u53d8\u91cf\u7a00\u758f\u7684\u95ee\u9898\uff1b\u6982\u5ff5\u7b80\u5355\uff0c\u5c06\u4efb\u52a1\u8f6c\u6362\u4e3a\u6784\u5efa\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u7684\u95ee\u9898\u3002\u5176\u5de5\u4f5c\u6d41\u7a0b\u4e3b\u8981\u5206\u4e3a\uff1a\u7406\u89e3\u6587\u7ae0\uff0c\u7406\u89e3\u95ee\u9898\u4ee5\u53ca\u7406\u89e3\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u7684\u8054\u7cfb\u3002\u4ee5THE STANFORD ATTENTIVE READER\u4e3a\u4f8b\uff0c\u901a\u8fc7\u53cc\u5411LSTM(\u591a\u5c42)\u7684Encoder-Decoder\u6846\u67b6\uff0c\u9996\u5148\u4ee5\u8bcd\u5d4c\u5165\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a(\u540c\u65f6\u8003\u8651\u5355\u8bcd\u81ea\u8eab\u5c5e\u6027\u4ee5\u53ca\u5355\u8bcd\u548c\u95ee\u9898\u7684\u76f8\u5173\u6027)\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\u800c\u8a00\uff0c\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u6a21\u578b\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002\u968f\u7740\u7814\u7a76\u7684\u6df1\u5165\uff0c\u5b57\u7b26\u7ea7\u522b\u7684embedding\u53ef\u4ee5\u63d0\u5347\u5c11\u89c1\u8bcd\u548c\u8bcd\u5e93\u5916\u5355\u8bcd\u7684\u8868\u5f81\uff0c\u4f9d\u9760\u4e0a\u4e0b\u6587\u52a8\u6001\u8c03\u6574embedding\u53ef\u4ee5\u89e3\u51b3\u591a\u4e49\u8bcd\u95ee\u9898\uff0c\u4e0d\u540c\u5c42\u6b21\u7684attention\u7ec4\u5408\u3001\u53cc\u5411attention\u4ee5\u53ca\u4f7f\u7528self-attention\u673a\u5236\u7684Transformer\u67b6\u6784\u7684\u5f15\u5165\uff0c\u90fd\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u5347\u4e86\u6a21\u578b\u7684\u6027\u80fd\u3002 MRC\u9886\u57df\u672a\u6765\u9700\u8981\u5efa\u7acb\u66f4\u5177\u5907\u96be\u5ea6\uff0c\u66f4\u63a5\u8fd1\u771f\u5b9e\u5e94\u7528\u573a\u666f\u7684\u5927\u89c4\u6a21\u6570\u636e\u96c6\uff0c\u5e76\u5f15\u5165\u4e16\u754c\u77e5\u8bc6\uff0c\u53d1\u5c55\u66f4\u5b8c\u5584\u7684\u63a8\u7406\u673a\u5236\uff0c\u540c\u65f6\u9700\u8981\u5e94\u7528\u5927\u89c4\u6a21\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u518d\u5c06\u9605\u8bfb\u7406\u89e3\u6280\u672f\u63a8\u5e7f\u5230\u591a\u8bed\u8a00\u3001\u4ee5\u53caQA\u7b49\u5176\u4ed6NLP\u4efb\u52a1\u4e2d\u3002\u771f\u6b63\u505a\u5230\uff0c\u66f4\u591a\u6570\u636e\uff0c\u66f4\u591a\u77e5\u8bc6\uff0c\u66f4\u6df1\u7406\u89e3\u3002","title":"MRC Concepts"},{"location":"NLP%20Concepts/#qa-concepts","text":"\u8fd9\u662f\u4e00\u95e8\u51c6\u786e\u5730\u7406\u89e3\u4ee5\u81ea\u7136\u8bed\u8a00\u5f62\u5f0f\u63cf\u8ff0\u7684\u7528\u6237\u63d0\u95ee\uff0c\u5e76\u901a\u8fc7\u68c0\u7d22\u5f02\u6784\u8bed\u6599\u5e93\u6216\u95ee\u7b54\u77e5\u8bc6\u5e93\u8fd4\u56de\u7b80\u6d01\u3001\u7cbe\u786e\u7684\u5339\u914d\u7b54\u6848\u7684\u6280\u672f\u3002 \u95ee\u7b54\u7cfb\u7edf\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u4e3b\u8981\u5728\u95ee\u9898\u3001\u6570\u636e\u548c\u7b54\u6848\u4e09\u4e2a\u7ef4\u5ea6\u4e0a\uff1a\u9650\u5b9a\u57df/\u5f00\u653e\u57df\u7684\u95ee\u9898\u3001\u7ed3\u6784\u5316/\u534a\u7ed3\u6784\u5316/\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\u3001\u62bd\u53d6\u5f0f/\u751f\u6210\u5f0f\u7684\u7b54\u6848\u3002 \u57fa\u4e8e\u4fe1\u606f\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\u662f\u7ed3\u5408\u5173\u952e\u8bcd\u5339\u914d\u548c\u4fe1\u606f\u62bd\u53d6\u7684\u7ecf\u5178\u6d45\u5c42\u8bed\u4e49\u5206\u6790\u65b9\u6cd5\uff0c\u5904\u7406\u6d41\u7a0b\u53ef\u4ee5\u7b80\u5355\u5730\u5206\u4e3a\u95ee\u9898\u89e3\u6790\uff08\u5904\u7406\u95ee\u9898\u5e76\u751f\u6210\u95ee\u9898\u5173\u952e\u8bcd\uff09\u3001\u4fe1\u606f\u68c0\u7d22\u3001\u7b54\u6848\u62bd\u53d6\u4e09\u6b65\u3002\u7b80\u800c\u8a00\u4e4b\uff0c\u662f\u5728 IR \u68c0\u7d22\u51fa\u4e0e Query \u76f8\u5173\u7684\u6587\u6863 Document \u7684\u57fa\u7840\u4e0a\uff0c\u6a21\u578b\u53bb\u9605\u8bfb\u5e76\u7406\u89e3 Q \u548c D\uff0c\u5f97\u5230\u7b54\u6848 Answer\u3002 \u968f\u540e\u51fa\u73b0\u4e86\u57fa\u4e8e\u95ee\u7b54\u77e5\u8bc6\u5e93KB\u3001\u57fa\u4e8e\u77e5\u8bc6\u56fe\u8c31KG\u7b49\u65b9\u6cd5\uff0c\u95ee\u7b54\u7cfb\u7edf\u5f80\u5f80\u662f\u591a\u79cd\u673a\u5236\u7684\u7ec4\u5408\u3002\u4f20\u7edf\u7684\u57fa\u4e8e\u7b26\u53f7\u8868\u793a\u7684\u77e5\u8bc6\u5e93\u95ee\u7b54\u662f\u57fa\u4e8e\u77e5\u8bc6\u5e93\u7684\u6d45\u5c42\u63a8\u65ad\uff0c\u901a\u8fc7\u5b9e\u4f53\u94fe\u63a5\u548c\u5173\u7cfb\u62bd\u53d6\u5efa\u7acb\u81ea\u7136\u8bed\u8a00\u548c\u77e5\u8bc6\u5e93\u4e4b\u95f4\u7684\u6620\u5c04\uff0c\u5c06\u95ee\u9898\u7684\u8bed\u4e49\u8868\u793a\u4e0e\u77e5\u8bc6\u5e93\u8fdb\u884c\u5173\u8054\uff0c\u4f9d\u9760\u8fc7\u591a\u7684\u4eba\u5de5\u4ecb\u5165\u3001\u89c4\u5219\u4e0e\u6a21\u677f\u7b49\uff0c\u6548\u679c\u59cb\u7ec8\u4e0d\u5982\u4eba\u610f\u3002 \u968f\u7740\u6df1\u5ea6\u5b66\u4e60\u7684\u53d1\u5c55\uff0c\u795e\u7ecf\u7b54\u6848\u62bd\u53d6\u5e2e\u52a9\u57fa\u4e8eIR\u7684QA\u53d6\u5f97\u4e86\u4ee4\u4eba\u77a9\u76ee\u7684\u6548\u679c\uff1aTHE STANFORD ATTENTIVE READER\u901a\u8fc7\u53cc\u5411LSTM(\u591a\u5c42)\u7684Encoder-Decoder\u6846\u67b6\uff0c\u9996\u5148\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a(\u540c\u65f6\u8003\u8651\u5355\u8bcd\u81ea\u8eab\u5c5e\u6027\u4ee5\u53ca\u5355\u8bcd\u548c\u95ee\u9898\u7684\u76f8\u5173\u6027)\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\u800c\u8a00\uff0c\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u6a21\u578b\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002 \u800c\u5bf9\u4e8eKBQA\u800c\u8a00\uff0c\u6a21\u578b\u9700\u8981\u5bf9\u7ed9\u5b9a\u7684\u81ea\u7136\u8bed\u8a00\u95ee\u9898\u8fdb\u884c\u8bed\u4e49\u7406\u89e3\u548c\u89e3\u6790\uff0c\u8fdb\u800c\u7528\u77e5\u8bc6\u5e93\u8fdb\u884c\u8bed\u4e49\u5339\u914d\u3001\u67e5\u8be2\u4e0e\u63a8\u7406\u5f97\u51fa\u7b54\u6848\uff0c\u4e3b\u8981\u5305\u62ec\u77e5\u8bc6\u5e93\u7684\u5efa\u7acb\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u8be5\u77e5\u8bc6\u5e93\u67e5\u8be2/\u63a8\u7406\u7b54\u6848\u4e24\u4e2a\u5173\u952e\u90e8\u5206\u3002\u901a\u8fc7RDF\u6216\u56fe\u6570\u636e\u5e93\u5b58\u50a8\u7ed3\u6784\u5316/\u534a\u7ed3\u6784\u5316/\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u7ecf\u8fc7\u4fe1\u606f\u62bd\u53d6(\u5b9e\u4f53\u62bd\u53d6\u3001\u5173\u7cfb\u62bd\u53d6\u3001\u5c5e\u6027\u62bd\u53d6)\uff0c\u77e5\u8bc6\u878d\u5408(\u5b9e\u4f53\u94fe\u63a5\u3001\u77e5\u8bc6\u5408\u5e76)\uff0c\u77e5\u8bc6\u52a0\u5de5(\u672c\u4f53\u6784\u5efa\u3001\u77e5\u8bc6\u63a8\u7406)\uff0c\u77e5\u8bc6\u66f4\u65b0\u7b49\u6b65\u9aa4\uff0c\u5efa\u7acb\u8d77\u5b8c\u5907\u6709\u6548\u7684\u77e5\u8bc6\u5e93/\u77e5\u8bc6\u56fe\u8c31\uff0c\u5b8c\u6210\u4e86\u5c06\u77e5\u8bc6\u3001\u6587\u6863\u3001\u53e5\u5b50\u3001\u8bcd\u6c47\u6620\u5c04\u5230\u7edf\u4e00\u8bed\u4e49\u7a7a\u95f4\u4e0b\uff0c\u5b9e\u73b0\u8de8\u9886\u57df\u3001\u8de8\u5bf9\u8c61\u7684\u77e5\u8bc6\u8fc1\u79fb\uff0c\u63d0\u4f9b\u591a\u4efb\u52a1\u5b66\u4e60\u7684\u7edf\u4e00\u5e95\u5c42\u8868\u793a\u3002\u518d\u901a\u8fc7\u8bed\u4e49\u89e3\u6790\u3001\u4fe1\u606f\u62bd\u53d6\u3001\u5411\u91cf\u5efa\u6a21\u7b49\u65b9\u6cd5\uff0c\u5b9e\u73b0\u95ee\u9898\u8bed\u4e49\u548c\u77e5\u8bc6\u8bed\u4e49\u7684\u7406\u89e3\u548c\u5339\u914d\uff0c\u5373\u5b8c\u6210\u95ee\u9898\u7684\u7406\u89e3\u4e0e\u8868\u793a\uff0c\u518d\u5c06\u5176\u5173\u8054\u5230\u77e5\u8bc6\u5e93\u7684\u7ed3\u6784\u5316\u67e5\u8be2\u4e2d\u5b8c\u6210\u8bed\u4e49\u5173\u8054\u3002 QA\u9886\u57df\u76ee\u524d\u8fd8\u5728\u6301\u7eed\u53d1\u5c55\uff0c\u5bf9\u4e8e\u590d\u6742\u95ee\u9898\u548c\u63a8\u7406\u6027\u95ee\u9898\u7684\u7814\u7a76\u8fd8\u5728\u7ee7\u7eed\u3002","title":"QA Concepts"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/","text":"NLP\u7b80\u4ecb \u00b6 NLP\u7684\u5de8\u4eba\u80a9\u8180 \u901a\u5e38\u6765\u8bf4\uff0cNLP\u4e2d\u76d1\u7763\u4efb\u52a1\u7684\u57fa\u672c\u5957\u8def\u90fd\u53ef\u4ee5\u7528\u4e09\u4e2a\u79ef\u6728\u6765\u8fdb\u884c\u5f52\u7eb3\uff1a \u6587\u672c\u6570\u636e\u641c\u96c6\u548c\u9884\u5904\u7406 \u5c06\u6587\u672c\u8fdb\u884c\u7f16\u7801\u548c\u8868\u5f81 \u8bbe\u8ba1\u6a21\u578b\u89e3\u51b3\u5177\u4f53\u4efb\u52a1 \u5176\u4e2d\u6570\u636e\u5904\u7406\u9636\u6bb5\u81ea\u4e0d\u7528\u8bf4\uff0c\u5404\u4e2a\u4efb\u52a1\u6309\u7167\u5404\u81ea\u7684\u903b\u8f91\u53bb\u5904\u7406\u548c\u5f97\u5230\u76f8\u5e94\u7684\u8f93\u5165\u3002 \u800c\u5176\u4e2d\u7684\u7b2c\u4e8c\u9636\u6bb5Encoder\u6a21\u5757\u4e0e\u7b2c\u4e09\u9636\u6bb5\u7684Task-specific Model\u6a21\u5757\uff0c\u901a\u5e38\u6765\u8bf4\uff0c\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u6e05\u6670\uff0c\u4e8c\u8005\u4e4b\u95f4\u4e92\u6709\u6e17\u900f\u3002\u800c\u56de\u987e\u8fc7\u53bb\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684NLP\u4efb\u52a1\u53ef\u4ee5\u53d1\u73b0\uff0c\u51e0\u4e4e\u7edd\u5927\u591a\u6570\u90fd\u6bd4\u8f83\u7b26\u5408\u8fd9\u4e09\u5c42\u6982\u5ff5\u3002\u6bd4\u5982\u5f88\u591a\u751f\u6210\u4efb\u52a1\u7684Seq2Seq\u6846\u67b6\u4e2d\u4e0d\u5916\u4e4e\u90fd\u6709\u4e00\u4e2aEncoder\u548c\u4e00\u4e2aDecoder\uff0c\u5bf9\u5e94\u5230\u8fd9\u91cc\u7684\u8bddDecoder\u66f4\u50cf\u662f\u4e00\u4e2aTask-specific Model\uff0c\u7136\u540e\u76f8\u5e94\u7684\u5c06Encoder\u505a\u4e00\u4e9b\u7ec6\u5fae\u7684\u8c03\u6574\uff0c\u6bd4\u5982\u5f15\u5165Attention\u673a\u5236\u7b49\u7b49\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u7684\u7ed3\u6784\uff0c\u5219Encoder\u6a21\u5757\u4e0eTask-specific Model\u6a21\u5757\u7684\u533a\u5206\u66f4\u4e3a\u660e\u663e\u548c\u6e05\u6670\uff0cEncoder\u8d1f\u8d23\u63d0\u53d6\u6587\u672c\u7684\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u4e00\u4e9b\u5168\u8fde\u63a5\u5c42\u548cSoftmax\u5c42\u4fbf\u53ef\u4ee5\u5f53\u505aTask-specific Model\u6a21\u5757\uff0c\u5982\u6b64\u4fbf\u5b8c\u6210\u4e86\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3002 \u65e2\u7136\u5f88\u591a\u7684NLP\u4efb\u52a1\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e09\u4e2a\u6a21\u5757\u6765\u8fdb\u884c\u5f52\u7eb3\u7684\u8bdd\uff0c\u5e76\u4e14\u5176\u4e2d\u6570\u636e\u5c42\u548cTask-specific Model\u6a21\u5757\u5c42\u53ef\u80fd\u6839\u636e\u5177\u4f53\u4efb\u52a1\u7684\u4e0d\u540c\u9700\u8981\u505a\u4e00\u4e9b\u76f8\u5e94\u7684\u8bbe\u8ba1\uff0c\u800cEncoder\u5c42\u4fbf\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u76f8\u5bf9\u6bd4\u8f83\u901a\u7528\u7684\u6a21\u5757\u6765\u4f7f\u7528\u3002\u90a3\u4e48\u81ea\u7136\u4f1a\u6709\u4e00\u4e2a\u60f3\u6cd5\uff0c\u80fd\u4e0d\u80fd\u7c7b\u4f3c\u4e8e\u56fe\u50cf\u9886\u57df\u4e2d\u7684ImageNet\u4e0a\u9884\u8bad\u7ec3\u7684\u5404\u79cd\u6a21\u578b\uff0c\u6765\u505a\u4e00\u4e2aNLP\u4e2d\u9884\u8bad\u7ec3\u597d\u7684Encoder\u6a21\u5757\uff0c\u7136\u540e\u6211\u62ff\u6765\u76f4\u63a5\u5229\u7528\u5c31\u597d\u4e86\uff1f\u5e94\u8be5\u8bf4\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u5e76\u4e0d\u96be\u60f3\u5230\uff0cNLP\u4eba\u4e5f\u82b1\u4e86\u4e00\u4e9b\u65f6\u95f4\u53bb\u601d\u8003NLP\u4e2d\u7a76\u7adf\u8be5\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e9b\u66f4\u901a\u7528\u7684\u53ef\u4ee5\u8fc1\u79fb\u5229\u7528\u7684\u4e1c\u897f\uff0c\u800c\u4e0d\u662f\u6240\u6709\u7684\u4efb\u52a1\u90fd\u8981\u201cfrom scratch\u201d\u3002\u56e0\u4e3a\u5982\u4f55\u5c3d\u91cf\u5229\u7528\u5df2\u6709\u7684\u77e5\u8bc6\u3001\u7ecf\u9a8c\u548c\u5de5\u5177\uff0c\u907f\u514d\u91cd\u590d\u9020\u8f6e\u5b50\uff0c\u60f3\u5c3d\u4e00\u5207\u529e\u6cd5\u201c\u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u201d\u5feb\u901f\u53d1\u5c55\uff0c\u6211\u60f3\u5927\u6982\u4e5f\u662f\u6700\u6734\u7d20\u7684\u201c\u53d1\u5c55\u662f\u786c\u9053\u7406\u201d\u7684\u4f53\u73b0\u3002 1. \u68af\u5b50\u51fa\u73b0\u4e4b\u524d \u00b6 \u72b9\u5982\u751f\u547d\u7684\u8bde\u751f\u4e4b\u521d\uff0c\u6df7\u6c8c\u800c\u539f\u59cb\u3002\u5728word2vec\u8bde\u751f\u4e4b\u524d\uff0cNLP\u4e2d\u5e76\u6ca1\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u65b9\u6cd5\u53bb\u8868\u793a\u4e00\u6bb5\u6587\u672c\uff0c\u5404\u4f4d\u524d\u8f88\u548c\u5927\u5e08\u4eec\u53d1\u660e\u4e86\u8bb8\u591a\u7684\u65b9\u6cd5\uff1a\u4eceone-hot\u8868\u793a\u4e00\u4e2a\u8bcd\u5230\u7528bag-of-words\u6765\u8868\u793a\u4e00\u6bb5\u6587\u672c\uff0c\u4ecek-shingles\u628a\u4e00\u6bb5\u6587\u672c\u5207\u5206\u6210\u4e00\u4e9b\u6587\u5b57\u7247\u6bb5\u5230\u6c49\u8bed\u4e2d\u7528\u5404\u79cd\u5e8f\u5217\u6807\u6ce8\u65b9\u6cd5\u5c06\u6587\u672c\u6309\u8bed\u4e49\u8fdb\u884c\u5206\u5272\uff0c\u4ece tf-idf \u4e2d\u7528\u9891\u7387\u7684\u624b\u6bb5\u6765\u8868\u5f81\u8bcd\u8bed\u7684\u91cd\u8981\u6027\u5230text-rank\u4e2d\u501f\u9274\u4e86page-rank\u7684\u65b9\u6cd5\u6765\u8868\u5f81\u8bcd\u8bed\u7684\u6743\u91cd\uff0c\u4ece\u57fa\u4e8eSVD\u7eaf\u6570\u5b66\u5206\u89e3\u8bcd\u6587\u6863\u77e9\u9635\u7684LSA\uff0c\u5230pLSA\u4e2d\u7528\u6982\u7387\u624b\u6bb5\u6765\u8868\u5f81\u6587\u6863\u5f62\u6210\u8fc7\u7a0b\u5e76\u5c06\u8bcd\u6587\u6863\u77e9\u9635\u7684\u6c42\u89e3\u7ed3\u679c\u8d4b\u4e88\u6982\u7387\u542b\u4e49\uff0c\u518d\u5230LDA\u4e2d\u5f15\u5165\u4e24\u4e2a\u5171\u8f6d\u5206\u5e03\u4ece\u800c\u5b8c\u7f8e\u5f15\u5165\u5148\u9a8c...... 1.1 \u8bed\u8a00\u6a21\u578b \u00b6 \u4ee5\u4e0a\u8fd9\u4e9b\u90fd\u662f\u76f8\u5bf9\u6bd4\u8f83\u4f20\u7edf\u7684\u65b9\u6cd5\uff0c\u5728\u4ecb\u7ecd\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u6765\u770b\u770b\u8bed\u8a00\u6a21\u578b\u3002\u5b9e\u9645\u4e0a\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u672c\u8d28\u662f\u5bf9\u4e00\u6bb5\u81ea\u7136\u8bed\u8a00\u7684\u6587\u672c\u8fdb\u884c\u9884\u6d4b\u6982\u7387\u7684\u5927\u5c0f\uff0c\u5373\u5982\u679c\u6587\u672c\u7528 \\(S_i\\) \u6765\u8868\u793a\uff0c\u90a3\u4e48\u8bed\u8a00\u6a21\u578b\u5c31\u662f\u8981\u6c42 \\(P(S_i)\\) \u7684\u5927\u5c0f\uff0c\u5982\u679c\u6309\u7167\u5927\u6570\u5b9a\u5f8b\u4e2d\u9891\u7387\u5bf9\u4e8e\u6982\u7387\u65e0\u9650\u903c\u8fd1\u7684\u601d\u60f3\uff0c\u6c42\u8fd9\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u81ea\u7136\u8981\u7528\u8fd9\u4e2a\u6587\u672c\u5728\u6240\u6709\u4eba\u7c7b\u5386\u53f2\u4e0a\u4ea7\u751f\u8fc7\u7684\u6240\u6709\u6587\u672c\u96c6\u5408\u4e2d\uff0c\u5148\u6c42\u8fd9\u4e2a\u6587\u672c\u7684\u9891\u7387 \\(P(S_i)\\) \uff0c\u800c\u540e\u4fbf\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u516c\u5f0f\u6765\u6c42\u5f97 $$ P\\left(S_{i}\\right)=\\frac{c\\left(S_{i}\\right)}{\\sum_{j=0}^{\\infty} c\\left(S_{j}\\right)} $$ \u8fd9\u4e2a\u516c\u5f0f\u8db3\u591f\u7b80\u5355\uff0c\u4f46\u95ee\u9898\u662f\u5168\u4eba\u7c7b\u6240\u6709\u5386\u53f2\u7684\u8bed\u6599\u8fd9\u79cd\u7edf\u8ba1\u663e\u7136\u65e0\u6cd5\u5b9e\u73b0\uff0c\u56e0\u6b64\u4e3a\u4e86\u5c06\u8fd9\u4e2a\u4e0d\u53ef\u80fd\u7684\u7edf\u8ba1\u4efb\u52a1\u53d8\u5f97\u53ef\u80fd\uff0c\u6709\u4eba\u5c06\u6587\u672c\u4e0d\u5f53\u505a\u4e00\u4e2a\u6574\u4f53\uff0c\u800c\u662f\u628a\u5b83\u62c6\u6563\u6210\u4e00\u4e2a\u4e2a\u7684\u8bcd\uff0c\u901a\u8fc7\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u6982\u7387\u5173\u7cfb\uff0c\u4ece\u800c\u6c42\u5f97\u6574\u4e2a\u6587\u672c\u7684\u6982\u7387\u5927\u5c0f\u3002\u5047\u5b9a\u53e5\u5b50\u957f\u5ea6\u4e3a T\uff0c\u8bcd\u7528 x \u8868\u793a\uff0c\u5373\uff1a $$ P\\left(S_{i}\\right)=P\\left(x_{0}, x_{1}, \\ldots, x_{T}\\right)=P\\left(x_{0}\\right) P\\left(x_{1} | x_{0}\\right) P\\left(x_{2} | x_{0}, x_{1}\\right) \\ldots P\\left(x_{T} | x_{0}, x_{1}, x_{2}, \\ldots, x_{T-1}\\right) $$ \u7136\u800c\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u8ba1\u7b97\u4f9d\u7136\u8fc7\u4e8e\u590d\u6742\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u4f1a\u5f15\u5165\u9a6c\u5c14\u79d1\u592b\u5047\u8bbe\uff1a\u5047\u5b9a\u4e00\u4e2a\u53e5\u5b50\u4e2d\u7684\u8bcd\u53ea\u4e0e\u5b83\u524d\u9762\u7684 n \u4e2a\u8bcd\u76f8\u5173\uff0c\u7279\u522b\u5730\uff0c\u5f53 n=1 \u7684\u65f6\u5019\uff0c\u53e5\u5b50\u7684\u6982\u7387\u8ba1\u7b97\u516c\u5f0f\u6700\u4e3a\u7b80\u6d01\uff1a $$ P\\left(S_{i}\\right)=P\\left(x_{0}, x_{1}, \\ldots, x_{T}\\right)=P\\left(x_{0}\\right) P\\left(x_{1} | x_{0}\\right) P\\left(x_{2} | x_{1}\\right) \\ldots P\\left(x_{T} | x_{T-1}\\right)=P\\left(x_{0}\\right) \\Pi_{i=0}^{T-1} P\\left(x_{i+1} | x_{i}\\right) $$ \u5e76\u4e14\u628a\u8bcd\u9891\u7684\u7edf\u8ba1\u7528\u6765\u4f30\u8ba1\u8fd9\u4e2a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u6761\u4ef6\u6982\u7387\uff0c\u5982\u4e0b\uff1a $$ P\\left(x_{i+1} | x_{i}\\right)=\\frac{c\\left(x_{i+1}, x_{i}\\right)}{c\\left(x_{i}\\right)} $$ \u8fd9\u6837\u4e00\u6765\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u8ba1\u7b97\u7ec8\u4e8e\u53d8\u5f97\u53ef\u884c\u3002\u7136\u800c\uff0c \u8fd9\u79cd\u57fa\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6a21\u578b\u5374\u5b58\u5728\u5f88\u591a\u95ee\u9898\uff1a \u7b2c\u4e00\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b \\(c\\left(x_{i+1}, x_{i}\\right)\\) \u7684\u8ba1\u7b97\u4f1a\u9047\u5230\u7279\u522b\u591a\u96f6\u503c\uff0c\u5c24\u5176\u5728 n \u53d6\u503c\u8f83\u5927\u65f6\uff0c\u8fd9\u79cd\u6570\u636e\u7a00\u758f\u5bfc\u81f4\u7684\u8ba1\u7b97\u4e3a 0 \u7684\u73b0\u8c61\u53d8\u5f97\u7279\u522b\u4e25\u91cd\u3002\u6240\u4ee5\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u4e2d\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u65b9\u5411\u4fbf\u662f\u8bbe\u8ba1\u5404\u79cd\u5e73\u6ed1\u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u3002 \u7b2c\u4e8c\uff0c \u53e6\u4e00\u4e2a\u66f4\u4e3a\u4e25\u91cd\u7684\u95ee\u9898\u662f\uff0c\u57fa\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u628a n \u53d6\u5f97\u5f88\u5927\uff0c\u4e00\u822c\u6765\u8bf4\u5728 3-gram \u6bd4\u8f83\u5e38\u89c1\uff0c\u518d\u5927\u7684\u8bdd\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u4f1a\u6307\u6570\u4e0a\u5347\u3002\u8fd9\u4e2a\u95ee\u9898\u7684\u5b58\u5728\u5bfc\u81f4\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u5efa\u6a21\u8bed\u8a00\u4e2d\u4e0a\u4e0b\u6587\u8f83\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u7b2c\u4e09\uff0c\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027\u3002 1.2 NNLM \u00b6 \u8fd9\u4e9b\u7f3a\u70b9\u7684\u5b58\u5728\uff0c\u8feb\u4f7f 2003 \u5e74 Bengio \u5728\u4ed6\u7684\u7ecf\u5178\u8bba\u6587 ***A Neural Probabilistic Language Model***\u4e2d\uff0c\u9996\u6b21\u5c06\u6df1\u5ea6\u5b66\u4e60\u7684\u601d\u60f3\u878d\u5165\u5230\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u5e76\u53d1\u73b0\u5c06\u8bad\u7ec3\u5f97\u5230\u7684 NNLM\uff08Neural Net Language Model\uff0c\u795e\u7ecf\u7f51\u7edc\u8bed\u8a00\u6a21\u578b\uff09\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\u53c2\u6570\u5f53\u505a\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u5f81\u65f6\uff0c\u80fd\u591f\u5f88\u597d\u5730\u83b7\u53d6\u8bcd\u8bed\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u3002 \u6487\u53bb\u6b63\u5219\u5316\u9879\uff0cNNLM \u7684\u6781\u5927\u76ee\u6807\u51fd\u6570\u5bf9\u6570\u4f3c\u7136\u51fd\u6570\uff0c\u5176\u672c\u8d28\u4e0a\u662f\u4e2a N-Gram \u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5982\u4e0b\u6240\u793a\uff1a $$ \\begin{array}{c}{L=\\frac{1}{T} \\sum_{t} \\log P\\left(w_{t} | w_{t-1}, \\ldots, w_{t-n+1} ; \\theta\\right)+R(\\theta)} \\ {P\\left(w_{t} | w_{t-1}, \\ldots, w_{t-n+1} ; \\theta\\right)=\\frac{e^{y_{w_{t}}}}{\\sum_{i} e^{y_{i}}}}\\end{array} $$ \u5176\u4e2d\uff0c\u5f52\u4e00\u5316\u4e4b\u524d\u7684\u6982\u7387\u5927\u5c0f\uff08\u4e5f\u5c31\u662f logits\uff09\u4e3a\uff1a $$ \\begin{array}{c}{y=b+W x+U \\tanh (d+H x)} \\ {x=\\left(C\\left(w_{t-1}\\right), C\\left(w_{t-2}\\right), \\ldots, C\\left(w_{t-n+1}\\right)\\right)}\\end{array} $$ x \u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6bcf\u4e2a\u8bcd\u6620\u5c04\u4e3a m \u7ef4\u7684\u5411\u91cf\uff0c\u7136\u540e\u5c06\u8fd9 n-1 \u4e2a\u8bcd\u7684\u5411\u91cf concat \u8d77\u6765\uff0c\u7ec4\u5408\u6210\u4e00\u4e2a (n-1)*m \u7ef4\u7684\u5411\u91cf\u3002 **\u8fd9\u91cc\u53ef\u4ee5\u5c06 NNLM \u7684\u7f51\u7edc\u7ed3\u6784\u62c6\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a**\u7b2c\u4e00\u90e8\u5206\uff0c\u4ece\u8bcd\u5230\u8bcd\u5411\u91cf\u7684\u6620\u5c04\uff0c\u901a\u8fc7 C \u77e9\u9635\u5b8c\u6210\u6620\u5c04\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a \\(|V| * m\\) \uff1b \u7b2c\u4e8c\u90e8\u5206\uff0c\u4ece x \u5230\u9690\u85cf\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 H\uff0c\u8fd9\u91cc\u7684\u53c2\u6570\u4e2a\u6570\u4e3a \\(|H| * m * (n-1)\\) \uff1b \u7b2c\u4e09\u90e8\u5206\uff0c\u4ece\u9690\u85cf\u5c42\u5230\u8f93\u51fa\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 U\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a$ |V| * |H|$\uff1b\u7b2c\u56db\u90e8\u5206\uff0c\u4ece x \u5230\u8f93\u51fa\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 W\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a \\(|V| * m * (n-1)\\) \u3002 \u56e0\u6b64\uff0c\u5982\u679c\u7b97\u4e0a\u504f\u7f6e\u9879\u7684\u53c2\u6570\u4e2a\u6570\uff08\u5176\u4e2d\u8f93\u51fa\u5c42\u4e3a \\(|V|\\) \uff0c\u8f93\u5165\u5c42\u5230\u9690\u85cf\u5c42\u4e3a \\(|H|\\) \uff09\u7684\u8bdd\uff0cNNLM \u7684\u53c2\u6570\u4e2a\u6570\u4e3a\uff1a $$ |V|(1+|H|+m n)+|H|(1+m n-m) $$ \u53ef\u89c1 NNLM \u7684\u53c2\u6570\u4e2a\u6570\u662f\u6240\u53d6\u7a97\u53e3\u5927\u5c0f n \u7684\u7ebf\u6027\u51fd\u6570\uff0c\u8fd9\u4fbf\u53ef\u4ee5\u8ba9 NNLM \u80fd\u5bf9\u66f4\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u5efa\u6a21\u3002 \u4e0d\u8fc7 NNLM \u7684\u6700\u4e3b\u8981\u8d21\u732e\u662f\u975e\u5e38\u6709\u521b\u89c1\u6027\u5730\u5c06\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\u7279\u5f81\u6620\u5c04\u77e9\u9635\u5f53\u505a\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ece\u800c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u8bcd\u8868\u5f81\u4e3a\u4e00\u4e2a\u5411\u91cf\u5f62\u5f0f \uff0c\u8fd9\u76f4\u63a5\u542f\u53d1\u4e86\u540e\u6765\u7684 word2vec \u7684\u5de5\u4f5c\u3002 2. \u5386\u53f2\u7a81\u7834\u2014\u2014\u68af\u5b50\u6765\u4e86 \u00b6 \u81eaNNLM\u4e8e2003\u5e74\u88ab\u63d0\u51fa\u540e\uff0c\u540e\u9762\u53c8\u51fa\u73b0\u4e86\u5f88\u591a\u7c7b\u4f3c\u548c\u6539\u8fdb\u7684\u5de5\u4f5c\uff0c\u8bf8\u5982LBL, C&W\u548cRNNLM\u6a21\u578b\u7b49\u7b49\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u4e3b\u8981\u4ece\u4e24\u4e2a\u65b9\u9762\u53bb\u4f18\u5316NNLM\u7684\u601d\u60f3\uff0c\u5176\u4e00\u662fNNLM\u53ea\u7528\u4e86\u5de6\u8fb9\u7684n-1\u4e2a\u8bcd\uff0c\u5982\u4f55\u5229\u7528\u66f4\u591a\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u4fbf\u6210\u4e3a\u4e86\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u4f18\u5316\u601d\u8def\uff08\u5982Mikolov\u7b49\u4eba\u63d0\u51fa\u7684RNNLM\uff09\uff1b\u5176\u4e8c\u662fNNLM\u7684\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u7f3a\u70b9\u662f\u8f93\u51fa\u5c42\u8ba1\u7b97\u91cf\u592a\u5927\uff0c\u5982\u4f55\u51cf\u5c0f\u8ba1\u7b97\u91cf\u4f7f\u5f97\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u8bad\u7ec3\u53d8\u5f97\u53ef\u884c\uff0c\u8fd9\u4e5f\u662f\u5de5\u7a0b\u5e94\u7528\u4e0a\u81f3\u5173\u91cd\u8981\u7684\u4f18\u5316\u65b9\u5411\uff08\u5982Mnih\u548cHinton\u63d0\u51fa\u7684LBL\u4ee5\u53ca\u540e\u7eed\u7684\u4e00\u7cfb\u5217\u6a21\u578b\uff09\u3002 \u4e3a\u4e86\u66f4\u597d\u7406\u89e3NNLM\u4e4b\u540e\u4ee5\u53caword2vec\u8bde\u751f\u524d\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u73b0\u6709\u7684\u51e0\u4e2a\u4e3b\u8981\u6a21\u578b\u90fd\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\u3002 NNLM\u867d\u7136\u5c06N-Gram\u7684\u9636n\u63d0\u9ad8\u5230\u4e865\uff0c\u76f8\u6bd4\u539f\u6765\u7684\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8fdb\u6b65\uff0c\u4f46\u662f\u4e3a\u4e86\u83b7\u53d6\u66f4\u597d\u7684\u957f\u7a0b\u4f9d\u8d56\u5173\u7cfb\uff0c5\u663e\u7136\u662f\u4e0d\u591f\u7684\u3002\u518d\u8005\uff0c\u56e0\u4e3aNNLM\u53ea\u5bf9\u8bcd\u7684\u5de6\u4fa7\u6587\u672c\u8fdb\u884c\u5efa\u6a21\uff0c\u6240\u4ee5\u5f97\u5230\u7684\u8bcd\u5411\u91cf\u5e76\u4e0d\u662f\u8bed\u5883\u7684\u5145\u5206\u8868\u5f81\u3002\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\u5c31\u66f4\u4e25\u91cd\u4e86\uff0cNNLM\u7684\u8bad\u7ec3\u4f9d\u7136\u8fd8\u662f\u592a\u6162\uff0c\u5728\u8bba\u6587\u4e2d\uff0cBengio\u8bf4\u4ed6\u4eec\u7528\u4e8640\u5757CPU\uff0c\u5728\u542b\u67091400\u4e07\u4e2a\u8bcd\uff0c\u53ea\u4fdd\u7559\u8bcd\u9891\u76f8\u5bf9\u8f83\u9ad8\u7684\u8bcd\u4e4b\u540e\u8bcd\u5178\u5927\u5c0f\u4e3a17964\u4e2a\u8bcd\uff0c\u53ea\u8bad\u7ec3\u4e865\u4e2aepoch\uff0c\u4f46\u662f\u8017\u65f6\u8d85\u8fc73\u5468\u3002\u6309\u8fd9\u4e48\u6765\u7b97\uff0c\u5982\u679c\u53ea\u7528\u4e00\u5757CPU\uff0c\u53ef\u80fd\u9700\u89812\u5e74\u591a\uff0c\u8fd9\u8fd8\u662f\u5728\u4ec5\u67091400\u4e07\u4e2a\u8bcd\u7684\u8bed\u6599\u4e0a\u3002\u5982\u6b64\u8017\u65f6\u7684\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u663e\u7136\u4e25\u91cd\u9650\u5236\u4e86NNLM\u7684\u5e94\u7528\u3002 2007\u5e74Mnih\u548cHinton\u63d0\u51fa\u7684LBL\u4ee5\u53ca\u540e\u7eed\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u6a21\u578b\uff0c\u7701\u53bb\u4e86NNLM\u4e2d\u7684\u6fc0\u6d3b\u51fd\u6570\uff0c\u76f4\u63a5\u628a\u6a21\u578b\u53d8\u6210\u4e86\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\uff0c\u5c24\u5176\u662f\u540e\u6765\u5c06Hierarchical Softmax\u5f15\u5165\u5230LBL\u540e\uff0c\u8bad\u7ec3\u6548\u7387\u8fdb\u4e00\u6b65\u589e\u5f3a\uff0c\u4f46\u662f\u8868\u8fbe\u80fd\u529b\u4e0d\u5982NNLM\u8fd9\u79cd\u795e\u7ecf\u7f51\u7edc\u7684\u7ed3\u6784\uff1b2008\u5e74Collobert\u548cWeston \u63d0\u51fa\u7684C&W\u6a21\u578b\u4e0d\u518d\u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u7ed3\u6784\uff0c\u800c\u662f\u5c06\u76ee\u6807\u6587\u672c\u7247\u6bb5\u6574\u4f53\u5f53\u505a\u8f93\u5165\uff0c\u7136\u540e\u9884\u6d4b\u8fd9\u4e2a\u7247\u6bb5\u662f\u771f\u5b9e\u6587\u672c\u7684\u6982\u7387\uff0c\u6240\u4ee5\u5b83\u7684\u5de5\u4f5c\u4e3b\u8981\u662f\u6539\u53d8\u4e86\u76ee\u6807\u8f93\u51fa\uff0c\u7531\u4e8e\u8f93\u51fa\u53ea\u662f\u4e00\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u4e0d\u518d\u662f\u8bcd\u5178\u5927\u5c0f\uff0c\u56e0\u6b64\u8bad\u7ec3\u6548\u7387\u5927\u5927\u63d0\u5347\uff0c\u4f46\u7531\u4e8e\u4f7f\u7528\u4e86\u8fd9\u79cd\u6bd4\u8f83\u201c\u522b\u81f4\u201d\u7684\u76ee\u6807\u8f93\u51fa\uff0c\u4f7f\u5f97\u5b83\u7684\u8bcd\u5411\u91cf\u8868\u5f81\u80fd\u529b\u6709\u9650\uff1b2010\u5e74Mikolov\uff08\u5bf9\uff0c\u8fd8\u662f\u540c\u4e00\u4e2aMikolov\uff09\u63d0\u51fa\u7684RNNLM\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u957f\u7a0b\u4f9d\u8d56\u5173\u7cfb\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u95ee\u9898\u4f9d\u7136\u5b58\u5728\u3002 2.1 CBOW \u548c Skip-gram \u00b6 2013 \u5e74\uff0cTomas Mikolov \u8fde\u653e\u51e0\u7bc7\u5212\u65f6\u4ee3\u7684\u8bba\u6587\uff0c\u5176\u4e2d\u6700\u4e3a\u91cd\u8981\u7684\u662f\u4e24\u7bc7\uff0c Efficient estimation of word representations in vector space \u9996\u6b21\u63d0\u51fa\u4e86 CBOW\u548cSkip-gram\u6a21\u578b\uff0c\u8fdb\u4e00\u6b65\u5730\u5728 Distributed Representations of Words and Phrases and their Compositionality \u4e2d\uff0c\u53c8\u4ecb\u7ecd\u4e86\u51e0\u79cd\u4f18\u5316\u8bad\u7ec3\u7684\u65b9\u6cd5\uff0c\u5305\u62ec Hierarchical Softmax\uff08\u5f53\u7136\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u65e9\u5728 2003 \u5e74\uff0cBengio \u5c31\u5728\u4ed6\u63d0\u51fa NNLM \u8bba\u6587\u4e2d\u7684 Future Work \u90e8\u5206\u63d0\u5230\u4e86\u8fd9\u79cd\u65b9\u6cd5\uff0c\u5e76\u4e8e 2005 \u5e74\u628a\u5b83\u7cfb\u7edf\u5316\u53d1\u8868\u4e86\u4e00\u7bc7\u8bba\u6587\uff09\uff0cNegative Sampling \u548c Subsampling \u6280\u672f\u3002 \u653e\u51fa\u4e24\u7bc7\u8bba\u6587\u540e\uff0c\u5f53\u65f6\u4ecd\u5728\u8c37\u6b4c\u5de5\u4f5c\u7684 Mikolov \u53c8\u9a6c\u4e0d\u505c\u8e44\u653e\u51fa\u4e86\u5927\u6740\u5668\u2014\u2014word2vec \u5de5\u5177\uff0c\u5e76\u5728\u5176\u4e2d\u5f00\u6e90\u4e86\u4ed6\u7684\u65b9\u6cd5\u3002\u987a\u4fbf\u63d0\u4e00\u4e0b\u7684\u662f\uff0c\u5f88\u591a\u4eba\u4ee5\u4e3a word2vec \u662f\u4e00\u79cd\u6a21\u578b\u548c\u65b9\u6cd5\uff0c \u5176\u5b9e word2vec \u53ea\u662f\u4e00\u4e2a\u5de5\u5177 \uff0c\u80cc\u540e\u7684\u6a21\u578b\u662f CBOW \u6216\u8005 Skip-gram\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86 Hierarchical Softmax \u6216 Negative Sampling \u8fd9\u4e9b\u8bad\u7ec3\u7684\u4f18\u5316\u65b9\u6cd5\u3002 \u6240\u4ee5\u51c6\u786e\u8bf4\u6765\uff0cword2vec \u5e76\u4e0d\u662f\u4e00\u4e2a\u6a21\u578b\u6216\u7b97\u6cd5\uff0c\u53ea\u4e0d\u8fc7 Mikolov \u6070\u597d\u5728\u5f53\u65f6\u628a\u4ed6\u5f00\u6e90\u7684\u5de5\u5177\u5305\u8d77\u540d\u53eb\u505a word2vec \u800c\u5df2\u3002\u4e0d\u8fc7\u4e3a\u4e86\u53d9\u8ff0\u7b80\u5355\uff0c\u5728\u4e0b\u6587\u6211\u5c06\u7528 word2vec \u6765\u6307\u4ee3\u4e0a\u9762\u63d0\u5230 Mikolov \u4e24\u7bc7\u8bba\u6587\u4e2d\u7684\u4e00\u6574\u4e2a\u76f8\u5173\u7684\u4f18\u5316\u601d\u60f3\u3002 **word2vec \u5bf9\u4e8e\u524d\u4eba\u7684\u4f18\u5316\uff0c\u4e3b\u8981\u662f\u4e24\u65b9\u9762\u7684\u5de5\u4f5c\uff1a\u6a21\u578b\u7684\u7b80\u5316\u548c\u8bad\u7ec3\u6280\u5de7\u7684\u4f18\u5316\u3002**\u6211\u4eec\u5148\u6765\u770b\u770b\u6a21\u578b\u7684\u7b80\u5316\u65b9\u9762\uff0c\u4e5f\u5c31\u662f\u8033\u719f\u80fd\u8be6\u7684 CBOW \u548c Skip-gram\u3002 \u5bf9\u4e8e CBOW \u800c\u8a00\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u5b83\u7684\u540d\u5b57\u4e0a\u4e00\u7aa5\u7a76\u7adf\uff0c\u5b83\u7684\u5168\u79f0\u662f Continuous Bag-of-Words\uff0c\u4e5f\u5c31\u662f\u8fde\u7eed\u7684\u8bcd\u888b\u6a21\u578b\uff0c\u4e3a\u4ec0\u4e48\u53d6\u8fd9\u4e2a\u540d\u5b57\uff0c\u5148\u6765\u770b\u770b\u5b83\u7684\u76ee\u6807\u51fd\u6570\u3002 $$ \\begin{array}{c}{\\frac{1}{T} \\sum_{t=1}^{T} \\log P\\left(w_{t} | c_{t}\\right)} \\ {P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right)}\\end{array} $$ \u9996\u5148\uff0cCBOW \u6ca1\u6709\u9690\u85cf\u5c42\uff0c\u672c\u8d28\u4e0a\u53ea\u6709\u4e24\u5c42\u7ed3\u6784\uff0c\u8f93\u5165\u5c42\u5c06\u76ee\u6807\u8bcd\u8bed\u5883 c \u4e2d\u7684**\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7b80\u5355\u6c42\u548c**\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u6c42\u5e73\u5747\uff09\u540e\u5f97\u5230\u8bed\u5883\u5411\u91cf\uff0c\u7136\u540e**\u76f4\u63a5\u4e0e\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u6c42\u70b9\u79ef**\uff0c\u76ee\u6807\u51fd\u6570\u4e5f\u5c31\u662f\u8981\u8ba9\u8fd9\u4e2a\u4e0e\u76ee\u6807\u8bcd\u5411\u91cf\u7684\u70b9\u79ef\u53d6\u5f97\u6700\u5927\u503c\uff0c\u5bf9\u5e94\u7684\u4e0e\u975e\u76ee\u6807\u8bcd\u7684\u70b9\u79ef\u5c3d\u91cf\u53d6\u5f97\u6700\u5c0f\u503c\u3002 \u4ece\u8fd9\u53ef\u4ee5\u770b\u51fa\uff0cCBOW \u7684\u7b2c\u4e00\u4e2a\u7279\u70b9\u662f\u53d6\u6d88\u4e86 NNLM \u4e2d\u7684\u9690\u85cf\u5c42\uff0c\u76f4\u63a5\u5c06\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u76f8\u8fde\uff1b\u7b2c\u4e8c\u4e2a\u7279\u70b9\u4fbf\u662f\u5728\u6c42\u8bed\u5883 context \u5411\u91cf\u65f6\u5019\uff0c\u8bed\u5883\u5185\u7684\u8bcd\u5e8f\u5df2\u7ecf\u4e22\u5f03\uff08\u8fd9\u4e2a\u662f\u540d\u5b57\u4e2d Continuous \u7684\u6765\u6e90\uff09\uff1b\u7b2c\u4e09\uff0c\u56e0\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u51fd\u6570\u4ecd\u7136\u662f\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\uff0c\u6240\u4ee5\u9700\u8981\u987a\u5e8f\u904d\u5386\u8bed\u6599\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\uff08\u8fd9\u4e2a\u662f\u540d\u5b57\u4e2d Bag-of-Words \u7684\u6765\u6e90\uff09\u3002 \u56e0\u6b64\u6709\u4e86\u8fd9\u4e9b\u7279\u70b9\uff08\u5c24\u5176\u662f\u7b2c\u4e8c\u70b9\u548c\u7b2c\u4e09\u70b9\uff09\uff0cMikolov \u624d\u628a\u8fd9\u4e2a\u7b80\u5355\u7684\u6a21\u578b\u53d6\u540d\u53eb\u505a CBOW\uff0c\u7b80\u5355\u5374\u6709\u6548\u7684\u5178\u8303\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u6bcf\u4e2a\u8bcd\u5bf9\u5e94\u5230\u4e24\u4e2a\u8bcd\u5411\u91cf\uff0c\u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\u90fd\u6709\u4f53\u73b0\uff0c\u5176\u4e2d $e(wt) $\u662f\u8bcd\u7684\u8f93\u5165\u5411\u91cf\uff0c\u800c \\(e'(wt)\\) \u5219\u662f\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u6216\u8005\u66f4\u51c6\u786e\u7684\u6765\u8bb2\uff0c\u524d\u8005\u662f CBOW \u8f93\u5165\u5c42\u4e2d\u8ddf\u8bcd wt \u6240\u5728\u4f4d\u7f6e\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u7684\u6743\u503c\uff08\u5176\u5b9e\u8fd9\u5c31\u662f\u8bcd\u5411\u91cf\uff09\u7ec4\u5408\u6210\u7684\u5411\u91cf\uff0c\u800c\u662f\u8f93\u51fa\u5c42\u4e2d\u4e0e\u8bcd wt \u6240\u5728\u4f4d\u7f6e\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u7684\u6743\u503c\u7ec4\u5408\u6210\u7684\u5411\u91cf\uff0c\u6240\u4ee5\u628a\u8fd9\u4e00\u5411\u91cf\u53eb\u505a\u8f93\u51fa\u5411\u91cf\u3002 \u540c\u6837\u5730\uff0c\u548c CBOW \u5bf9\u5e94\uff0cSkip-gram \u7684\u6a21\u578b\u57fa\u672c\u601d\u60f3\u548c CBOW \u975e\u5e38\u7c7b\u4f3c\uff0c\u53ea\u662f\u6362\u4e86\u4e00\u4e2a\u65b9\u5411\uff1a CBOW \u662f\u8ba9\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf e'(wt) \u62df\u5408\u8bed\u5883\u7684\u8f93\u5165\u5411\u91cf x Skip-gram \u5219\u662f\u8ba9\u8bed\u5883\u4e2d\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u5c3d\u91cf\u62df\u5408\u5f53\u524d\u8bcd\u7684\u8f93\u5165\u5411\u91cf e(wt)\uff0c\u548c CBOW \u7684\u65b9\u5411\u76f8\u53cd \u56e0\u6b64\u5b83\u7684\u76ee\u6807\u51fd\u6570\u5982\u4e0b\uff1a $$ \\begin{array}{c}{\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j \\in c} \\log P\\left(w_{j} | w_{t}\\right)} \\ {P\\left(w_{j} | w_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{j}\\right) e\\left(w_{t}\\right)\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) e\\left(w_{t}\\right)\\right)}}\\end{array} $$ \u53ef\u4ee5\u770b\u51fa\u76ee\u6807\u51fd\u6570\u4e2d\u6709\u4e24\u4e2a\u6c42\u548c\u7b26\u53f7\uff0c\u6700\u91cc\u9762\u7684\u6c42\u548c\u7b26\u53f7\u7684\u610f\u4e49\u4fbf\u662f\u8ba9\u5f53\u524d\u7684\u8f93\u5165\u8bcd\u5206\u522b\u548c\u8be5\u8bcd\u5bf9\u5e94\u8bed\u5883\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u5c3d\u91cf\u63a5\u8fd1\uff0c\u4ece\u800c\u4fbf\u53ef\u4ee5\u8868\u73b0\u4e3a\u8be5\u8bcd\u4e0e\u5176\u4e0a\u4e0b\u6587\u5c3d\u91cf\u63a5\u8fd1\u3002 \u548c CBOW \u7c7b\u4f3c\uff0cSkip-gram \u672c\u8d28\u4e0a\u4e5f\u53ea\u6709\u4e24\u5c42\uff1a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\uff0c\u8f93\u5165\u5c42\u8d1f\u8d23\u5c06\u8f93\u5165\u8bcd\u6620\u5c04\u4e3a\u4e00\u4e2a\u8bcd\u5411\u91cf\uff0c\u8f93\u51fa\u5c42\u8d1f\u8d23\u5c06\u5176\u7ecf\u8fc7\u7ebf\u6027\u6620\u5c04\u8ba1\u7b97\u5f97\u5230\u6bcf\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002 \u518d\u7ec6\u5fc3\u4e00\u70b9\u7684\u8bdd\uff0c\u5176\u5b9e\u65e0\u8bba CBOW \u8fd8\u662f Skip-gram\uff0c\u672c\u8d28\u4e0a\u90fd\u662f\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u76f8\u8fde\uff0c\u4e2d\u95f4\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u7684\u5c42\u3002\u56e0\u6b64\uff0c\u8fd9\u4e24\u4e2a\u6a21\u578b\u7684\u53c2\u6570\u4e2a\u6570\u90fd\u662f$ 2 \u00d7 |e| \u00d7 |V| $\uff0c\u5176\u4e2d \\(|e|\\) \u548c \\(|V|\\) \u5206\u522b\u662f\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\u548c\u8bcd\u5178\u7684\u5927\u5c0f\uff0c\u76f8\u6bd4\u4e0a\u6587\u4e2d\u6211\u4eec\u8ba1\u7b97\u5f97\u5230 NNLM \u7684\u53c2\u6570\u4e2a\u6570 \\(|V|(1+|H|+|e|n) + |H|(1+|e|n-|e|)\\) \u5df2\u7ecf\u5927\u5927\u51cf\u5c0f\uff0c\u4e14\u4e0e\u4e0a\u4e0b\u6587\u6240\u53d6\u8bcd\u7684\u4e2a\u6570\u65e0\u5173\u4e86\uff0c\u4e5f\u5c31\u662f\u7ec8\u4e8e\u907f\u514d\u4e86 N-gram \u4e2d\u968f\u7740\u9636\u6570 N \u589e\u5927\u800c\u4f7f\u5f97\u8ba1\u7b97\u590d\u6742\u5ea6\u6025\u5267\u4e0a\u5347\u7684\u95ee\u9898\u3002 \u7136\u800c\uff0cMikolov \u5927\u795e\u8bf4\u4e86\uff0c\u8fd9\u4e9b\u516c\u5f0f\u662f\u201c impractical \u201d\u7684\uff0c\u4ed6\u7684\u8a00\u4e0b\u4e4b\u610f\u662f\u8ba1\u7b97\u590d\u6742\u5ea6\u4f9d\u7136\u548c\u8bcd\u5178\u5927\u5c0f\u6709\u5173\uff0c\u800c\u8fd9\u901a\u5e38\u90fd\u610f\u5473\u7740\u975e\u5e38\u975e\u5e38\u5927\uff0c\u4ee5\u4e0b\u662f\u4ed6\u7684\u539f\u8bdd\uff1a ..., and W is the number of words in the vocabulary. This formulation is impractical because the cost of computing \u2207 log p(wO|wI ) is proportional to W, which is often large (10 5\u201310 7 terms). \u4e0d\u5f97\u4e0d\u8bf4\uff0c\u5927\u795e\u5c31\u662f\u5927\u795e\uff0c\u5c06\u6a21\u578b\u5df2\u7ecf\u7b80\u5316\u5230\u4e86\u53ea\u5269\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\uff08\u518d\u8131\u5c31\u6ca1\u4e86\uff09\uff0c\u4f9d\u7136\u4e0d\u6ee1\u8db3\uff0c\u8fd8\u201c\u5f97\u5bf8\u8fdb\u5c3a\u201d\u5730\u6253\u8d77\u4e86\u8bcd\u5178\u7684\u201c\u5c0f\u7b97\u76d8\u201d\uff0c\u90a3\u4e48 Mikolov \u7684\u201c\u5c0f\u7b97\u76d8\u201d\u662f\u4ec0\u4e48\u5462\uff1f \u4ed6\u5728\u8bba\u6587\u4e2d\u9996\u5148\u63d0\u5230\u4e86 Hierachical Softmax\uff0c\u8ba4\u4e3a\u8fd9\u662f\u5bf9 full softmax \u7684\u4e00\u79cd\u4f18\u5316\u624b\u6bb5\u3002 Hierachical Softmax \u7684\u57fa\u672c\u601d\u60f3\u5c31\u662f\u9996\u5148\u5c06\u8bcd\u5178\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u6309\u7167\u8bcd\u9891\u5927\u5c0f\u6784\u5efa\u51fa\u4e00\u68f5 Huffman \u6811\uff0c\u4fdd\u8bc1\u8bcd\u9891\u8f83\u5927\u7684\u8bcd\u5904\u4e8e\u76f8\u5bf9\u6bd4\u8f83\u6d45\u7684\u5c42\uff0c\u8bcd\u9891\u8f83\u4f4e\u7684\u8bcd\u76f8\u5e94\u7684\u5904\u4e8e Huffman \u6811\u8f83\u6df1\u5c42\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u5904\u4e8e\u8fd9\u68f5 Huffman \u6811\u4e0a\u7684\u67d0\u4e2a\u53f6\u5b50\u8282\u70b9\u3002 \u7b2c\u4e8c\uff0c\u5c06\u539f\u672c\u7684\u4e00\u4e2a |V| \u5206\u7c7b\u95ee\u9898\u53d8\u6210\u4e86 log |V| \u6b21\u7684\u4e8c\u5206\u7c7b\u95ee\u9898\uff0c\u505a\u6cd5\u7b80\u5355\u8bf4\u6765\u5c31\u662f\uff0c\u539f\u5148\u8981\u8ba1\u7b97 P(wt|ct) \u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u4f7f\u7528\u7684\u662f\u666e\u901a\u7684 softmax\uff0c\u52bf\u5fc5\u8981\u6c42\u8bcd\u5178\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002\u4e3a\u4e86\u51cf\u5c11\u8fd9\u4e00\u6b65\u7684\u8ba1\u7b97\u91cf\uff0c\u5728 Hierachical Softmax \u4e2d\uff0c\u540c\u6837\u662f\u8ba1\u7b97\u5f53\u524d\u8bcd wt \u5728\u5176\u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\u5927\u5c0f\uff0c\u53ea\u9700\u8981\u628a\u5b83\u53d8\u6210\u5728 Huffman \u6811\u4e2d\u7684\u8def\u5f84\u9884\u6d4b\u95ee\u9898\u5c31\u53ef\u4ee5\u4e86\uff0c\u56e0\u4e3a\u5f53\u524d\u8bcd wt \u5728 Huffman \u6811\u4e2d\u5bf9\u5e94\u5230\u4e00\u6761\u8def\u5f84\uff0c\u8fd9\u6761\u8def\u5f84\u7531\u8fd9\u68f5\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u7ecf\u8fc7\u4e00\u7cfb\u5217\u4e2d\u95f4\u7684\u7236\u8282\u70b9\uff0c\u6700\u7ec8\u5230\u8fbe\u5f53\u524d\u8fd9\u4e2a\u8bcd\u7684\u53f6\u5b50\u8282\u70b9\u800c\u7ec4\u6210\uff0c\u90a3\u4e48\u5728\u6bcf\u4e00\u4e2a\u7236\u8282\u70b9\u4e0a\uff0c\u90fd\u5bf9\u5e94\u7684\u662f\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\uff08\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a LR \u5206\u7c7b\u5668\uff09\uff0c\u800c Huffman \u6811\u7684\u6784\u9020\u8fc7\u7a0b\u4fdd\u8bc1\u4e86\u6811\u7684\u6df1\u5ea6\u4e3a log |V|\uff0c\u6240\u4ee5\u4e5f\u5c31\u53ea\u9700\u8981\u505a log |V| \u6b21\u4e8c\u5206\u7c7b\u4fbf\u53ef\u4ee5\u6c42\u5f97 P(wt|ct) \u7684\u5927\u5c0f\uff0c\u8fd9\u76f8\u6bd4\u539f\u6765 |V| \u6b21\u7684\u8ba1\u7b97\u91cf\uff0c\u5df2\u7ecf\u5927\u5927\u51cf\u5c0f\u4e86\u3002 \u63a5\u7740\uff0cMikolov \u53c8\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u7684\u601d\u60f3\uff0c\u800c\u8fd9\u4e00\u601d\u60f3\u4e5f\u662f\u53d7\u4e86 C&W \u6a21\u578b\u4e2d\u6784\u9020\u8d1f\u6837\u672c\u65b9\u6cd5\u542f\u53d1\uff0c\u540c\u65f6\u53c2\u8003\u4e86 Noise Contrastive Estimation (NCE) \u7684\u601d\u60f3\uff0c\u7528 CBOW \u7684\u6846\u67b6\u7b80\u5355\u6765\u8bb2\u5c31\u662f\uff0c\u8d1f\u91c7\u6837\u6bcf\u904d\u5386\u5230\u4e00\u4e2a\u76ee\u6807\u8bcd\uff0c\u4e3a\u4e86\u4f7f\u5f97\u76ee\u6807\u8bcd\u7684\u6982\u7387 P(wt|ct) \u6700\u5927\uff0c\u6839\u636e softmax \u51fd\u6570\u7684\u6982\u7387\u516c\u5f0f\uff0c\u4e5f\u5c31\u662f\u8ba9\u5206\u5b50\u4e2d\u7684 \\(e^{\\prime}\\left(w_{t}\\right)^{T} x\\) \u6700\u5927\uff0c\u800c\u5206\u6bcd\u4e2d\u5176\u4ed6\u975e\u76ee\u6807\u8bcd\u7684 \\(e^{\\prime}\\left(w_{i}\\right)^{T} x\\) \u6700\u5c0f\u3002 \u666e\u901a softmax \u7684\u8ba1\u7b97\u91cf\u592a\u5927\u5c31\u662f\u56e0\u4e3a\u5b83\u628a\u8bcd\u5178\u4e2d\u6240\u6709\u5176\u4ed6\u975e\u76ee\u6807\u8bcd\u90fd\u5f53\u505a\u8d1f\u4f8b\u4e86\uff0c\u800c\u8d1f\u91c7\u6837\u7684\u601d\u60f3\u7279\u522b\u7b80\u5355\uff0c\u5c31\u662f\u6bcf\u6b21\u6309\u7167\u4e00\u5b9a\u6982\u7387\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u8bcd\u5f53\u505a\u8d1f\u4f8b\uff0c\u4ece\u800c\u5c31\u53ea\u9700\u8981\u8ba1\u7b97\u8fd9\u4e9b\u8d1f\u91c7\u6837\u51fa\u6765\u7684\u8d1f\u4f8b\u4e86\uff0c\u90a3\u4e48\u6982\u7387\u516c\u5f0f\u4fbf\u76f8\u5e94\u53d8\u4e3a\uff1a $$ P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{K} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right) $$ \u4ed4\u7ec6\u548c\u666e\u901a softmax \u8fdb\u884c\u6bd4\u8f83\u4fbf\u4f1a\u53d1\u73b0\uff0c\u5c06\u539f\u6765\u7684 |V| \u5206\u7c7b\u95ee\u9898\u53d8\u6210\u4e86 K \u5206\u7c7b\u95ee\u9898\uff0c\u8fd9\u4fbf\u628a\u8bcd\u5178\u5927\u5c0f\u5bf9\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u5f71\u54cd\u53d8\u6210\u4e86\u4e00\u4e2a\u5e38\u6570\u9879\uff0c\u800c\u6539\u52a8\u53c8\u975e\u5e38\u7684\u5fae\u5c0f\uff0c\u4e0d\u53ef\u8c13\u4e0d\u5de7\u5999\u3002 \u9664\u6b64\u4e4b\u5916\uff0cMikolov \u8fd8\u63d0\u5230\u4e86\u4e00\u4e9b\u5176\u4ed6\u6280\u5de7\uff0c\u6bd4\u5982\u5bf9\u4e8e\u90a3\u4e9b\u8d85\u9ad8\u9891\u7387\u7684\u8bcd\uff0c\u5c24\u5176\u662f\u505c\u7528\u8bcd\uff0c\u53ef\u4ee5\u4f7f\u7528 Subsampling \u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\uff0c\u4e0d\u8fc7\u8fd9\u5df2\u7ecf\u4e0d\u662f word2vec \u6700\u4e3b\u8981\u7684\u5185\u5bb9\u4e86\u3002 \u81ea\u6b64\uff0c\u7ecf\u8fc7\u6a21\u578b\u548c\u8bad\u7ec3\u6280\u5de7\u7684\u53cc\u91cd\u4f18\u5316\uff0c\u7ec8\u4e8e\u4f7f\u5f97\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u8bad\u7ec3\u6210\u4e3a\u4e86\u73b0\u5b9e\uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5f97\u5230\u7684\u8fd9\u4e9b\u8bcd\u5411\u91cf\u80fd\u591f\u5728\u8bed\u4e49\u4e0a\u6709\u975e\u5e38\u597d\u7684\u8868\u73b0\uff0c\u80fd\u5c06\u8bed\u4e49\u5173\u7cfb\u901a\u8fc7\u5411\u91cf\u7a7a\u95f4\u5173\u7cfb\u8868\u5f81\u51fa\u6765\u3002 word2vec \u7684\u51fa\u73b0\uff0c\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u7684\u53d1\u5c55\uff0c\u5c24\u5176\u662f\u4fc3\u8fdb\u4e86\u6df1\u5ea6\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u5e94\u7528\uff08\u4e0d\u8fc7\u6709\u610f\u601d\u7684\u662f\uff0cword2vec \u7b97\u6cd5\u672c\u8eab\u5176\u5b9e\u5e76\u4e0d\u662f\u4e00\u4e2a\u6df1\u5ea6\u6a21\u578b\uff0c\u5b83\u53ea\u6709\u4e24\u5c42\u5168\u8fde\u63a5\uff09\uff0c \u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u8bcd\u5411\u91cf\u6765\u521d\u59cb\u5316\u7f51\u7edc\u7ed3\u6784\u7684\u7b2c\u4e00\u5c42\u51e0\u4e4e\u5df2\u7ecf\u6210\u4e86\u6807\u914d\uff0c\u5c24\u5176\u662f\u5728\u53ea\u6709\u5c11\u91cf\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u62ff\u9884\u8bad\u7ec3\u7684 embedding \u521d\u59cb\u5316\u7b2c\u4e00\u5c42\uff0c\u51e0\u4e4e\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u5728\u86ee\u5e72\u3002 \u5728\u6b64\u4e4b\u540e\uff0c\u4e00\u5927\u6279 word embedding \u65b9\u6cd5\u5927\u91cf\u6d8c\u73b0\uff0c\u6bd4\u8f83\u77e5\u540d\u7684\u6709 GloVe \u548c fastText \u7b49\u7b49\uff0c\u5b83\u4eec\u5404\u81ea\u4fa7\u91cd\u4e0d\u540c\u7684\u89d2\u5ea6\uff0c\u5e76\u4e14\u4ece\u4e0d\u540c\u7684\u65b9\u5411\u90fd\u5f97\u5230\u4e86\u8fd8\u4e0d\u9519\u7684 embedding \u8868\u5f81\u3002 2.2 GloVe \u00b6 \u5148\u6765\u770b\u770b GloVe \u7684\u635f\u5931\u51fd\u6570\uff1a $$ J=\\sum_{i=1}^{V} \\sum_{j=1}^{V} f\\left(X_{i j}\\right)\\left(w_{i}^{T} w_{j}+b_{i}+b_{j}-\\log X_{i j}\\right)^{2} $$ \u5176\u4e2d Xij \u662f\u4e24\u4e2a\u8bcd i \u548c j \u5728\u67d0\u4e2a\u7a97\u53e3\u5927\u5c0f\u4e2d\u7684\u5171\u73b0\u9891\u7387\uff08\u4e0d\u8fc7 GloVe \u5bf9\u5176\u505a\u4e86\u4e00\u4e9b\u6539\u8fdb\uff0c\u5171\u73b0\u9891\u7387\u76f8\u5e94\u6709\u4e00\u4e2a\u8870\u51cf\u7cfb\u6570\uff0c\u4f7f\u5f97\u8ddd\u79bb\u8d8a\u8fdc\u7684\u8bcd\u5bf9\u5171\u73b0\u9891\u7387\u8d8a\u5c0f\u4e00\u4e9b\uff09\uff0c f(Xij) \u662f\u4e00\u4e2a\u6743\u91cd\u7cfb\u6570\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u5171\u73b0\u8d8a\u591a\u7684 pair \u5bf9\u4e8e\u76ee\u6807\u51fd\u6570\u8d21\u732e\u5e94\u8be5\u8d8a\u5927\uff0c\u4f46\u662f\u53c8\u4e0d\u80fd\u65e0\u9650\u5236\u589e\u5927\uff0c\u6240\u4ee5\u5bf9\u5171\u73b0\u9891\u7387\u8fc7\u4e8e\u5927\u7684 pair \u9650\u5b9a\u6700\u5927\u503c\uff0c\u4ee5\u9632\u8bad\u7ec3\u7684\u65f6\u5019\u88ab\u8fd9\u4e9b\u9891\u7387\u8fc7\u5927\u7684 pair \u4e3b\u5bfc\u4e86\u6574\u4e2a\u76ee\u6807\u51fd\u6570\u3002 \u5269\u4e0b\u7684\u5c31\u662f\u7b97\u6cd5\u7684\u6838\u5fc3\u90e8\u5206\u4e86\uff0c\u4e24\u4e2ab\u503c\u662f\u4e24\u4e2a\u504f\u7f6e\u9879\uff0c\u6487\u53bb\u4e0d\u8c08\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 \\(\\left(w_{i}^{T} w_{j}-\\log X_{i j}\\right)^{2}\\) \u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5747\u65b9\u8bef\u5dee\u51fd\u6570\uff0c wi \u662f\u5f53\u524d\u8bcd\u7684\u5411\u91cf\uff0c wj \u5bf9\u5e94\u7684\u662f\u4e0e\u5176\u5728\u540c\u4e00\u4e2a\u7a97\u53e3\u4e2d\u51fa\u73b0\u7684\u5171\u73b0\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c \u4e24\u8005\u7684\u5411\u91cf\u70b9\u4e58\u8981\u53bb\u5c3d\u91cf\u62df\u5408\u5b83\u4eec\u5171\u73b0\u9891\u7387\u7684\u5bf9\u6570\u503c \u3002 \u4ece\u76f4\u89c2\u4e0a\u7406\u89e3\uff0c\u5982\u679c\u4e24\u4e2a\u8bcd\u5171\u73b0\u9891\u7387\u8d8a\u9ad8\uff0c\u90a3\u4e48\u5176\u5bf9\u6570\u503c\u5f53\u7136\u4e5f\u8d8a\u9ad8\uff0c\u56e0\u800c\u7b97\u6cd5\u8981\u6c42\u4e8c\u8005\u8bcd\u5411\u91cf\u7684\u70b9\u4e58\u4e5f\u8d8a\u5927\uff0c\u800c**\u4e24\u4e2a\u8bcd\u5411\u91cf\u7684\u70b9\u4e58\u8d8a\u5927\uff0c\u5176\u5b9e\u5305\u542b\u4e86\u4e24\u5c42\u542b\u4e49\uff1a** \u7b2c\u4e00\uff0c\u8981\u6c42\u5404\u81ea\u8bcd\u5411\u91cf\u7684\u6a21\u8d8a\u5927 \uff0c\u901a\u5e38\u6765\u8bf4\uff0c\u9664\u53bb\u9891\u7387\u975e\u5e38\u9ad8\u7684\u8bcd\uff08\u6bd4\u5982\u505c\u7528\u8bcd\uff09\uff0c\u5bf9\u4e8e\u6709\u660e\u786e\u8bed\u4e49\u7684\u8bcd\u6765\u8bf4\uff0c\u5b83\u4eec\u7684\u8bcd\u5411\u91cf\u6a21\u957f\u4f1a\u968f\u7740\u8bcd\u9891\u589e\u5927\u800c\u589e\u5927\uff0c\u56e0\u6b64\u4e24\u4e2a\u8bcd\u5171\u73b0\u9891\u7387\u8d8a\u5927\uff0c\u8981\u6c42\u5404\u81ea\u8bcd\u5411\u91cf\u6a21\u957f\u8d8a\u5927\u662f\u6709\u76f4\u89c9\u610f\u4e49\u7684\uff0c\u6bd4\u5982\u201c\u9b51\u9b45\u9b4d\u9b49\u201d\u5047\u5982\u80fd\u88ab\u62c6\u5206\u6210\u4e24\u4e2a\u8bcd\uff0c\u90a3\u4e48\u201c\u9b51\u9b45\u201d\u548c\u201c\u9b4d\u9b49\u201d\u8fd9\u4e24\u4e2a\u8bcd\u7684\u5171\u73b0\u9891\u7387\u76f8\u6bd4\u201c\u201c\u9b51\u9b45\u201d\u548c\u5176\u4ed6\u8bcd\u7684\u5171\u73b0\u9891\u7387\u8981\u5927\u5f97\u591a\uff0c\u5bf9\u5e94\u5230\u201c\u9b51\u9b45\u201d\u7684\u8bcd\u5411\u91cf\uff0c\u4fbf\u4f1a\u503e\u5411\u4e8e\u5728\u67d0\u4e2a\u8bcd\u5411\u91cf\u7ef4\u5ea6\u4e0a\u6301\u7eed\u66f4\u65b0\uff0c\u8fdb\u800c\u4f7f\u5f97\u5b83\u7684\u6a21\u957f\u4e5f\u4f1a\u6bd4\u8f83\u504f\u5927\u3002 \u7b2c\u4e8c\uff0c\u8981\u6c42\u8fd9\u4e24\u4e2a\u8bcd\u5411\u91cf\u7684\u5939\u89d2\u8d8a\u5c0f \uff0c\u8fd9\u4e5f\u662f\u7b26\u5408\u76f4\u89c9\u7684\uff0c\u56e0\u4e3a\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u8bed\u5883\u4e0b\u9891\u7387\u8d8a\u5927\uff0c\u8bf4\u660e\u8fd9\u4e24\u4e2a\u8bcd\u7684\u8bed\u4e49\u8d8a\u63a5\u8fd1\uff0c\u56e0\u800c\u8bcd\u5411\u91cf\u7684\u5939\u89d2\u4e5f\u504f\u5411\u4e8e\u8d8a\u5c0f\u3002 \u6b64\u5916\uff0c\u53ef\u4ee5\u4ece GloVe \u4f7f\u7528\u7684\u635f\u5931\u51fd\u6570\u4e2d\u53d1\u73b0\uff0c\u5b83\u7684\u8bad\u7ec3\u4e3b\u8981\u662f\u4e24\u4e2a\u6b65\u9aa4\uff1a \u7edf\u8ba1\u5171\u73b0\u77e9\u9635\u548c\u8bad\u7ec3\u83b7\u53d6\u8bcd\u5411\u91cf \uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5176\u5b9e\u662f\u6ca1\u6709\u6211\u4eec\u901a\u5e38\u7406\u89e3\u5f53\u4e2d\u7684\u6a21\u578b\u7684\u3002 \u66f4\u9051\u8bba\u795e\u7ecf\u7f51\u7edc\uff0c \u5b83\u6574\u4e2a\u7684\u7b97\u6cd5\u6846\u67b6\u90fd\u662f\u57fa\u4e8e\u77e9\u9635\u5206\u89e3\u7684\u505a\u6cd5\u6765\u83b7\u53d6\u8bcd\u5411\u91cf\u7684\uff0c\u672c\u8d28\u4e0a\u548c\u8bf8\u5982 LSA \u8fd9\u79cd\u57fa\u4e8e SVD \u7684\u77e9\u9635\u5206\u89e3\u65b9\u6cd5\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c \uff0c\u53ea\u4e0d\u8fc7 SVD \u5206\u89e3\u592a\u8fc7\u4e8e\u8017\u65f6\uff0c\u8fd0\u7b97\u91cf\u5de8\u5927\uff0c\u76f8\u540c\u70b9\u662f LSA \u4e5f\u662f\u8f93\u5165\u5171\u73b0\u77e9\u9635\uff0c\u4e0d\u8fc7\u4e00\u822c\u4e3b\u8981\u4ee5\u8bcd-\u6587\u6863\u5171\u73b0\u77e9\u9635\u4e3a\u4e3b\uff0c\u53e6\u5916\uff0cLSA \u4e2d\u7684\u5171\u73b0\u77e9\u9635\u6ca1\u6709\u505a\u7279\u6b8a\u5904\u7406\uff0c\u800c GloVe \u8003\u8651\u5230\u4e86\u5bf9\u8ddd\u79bb\u8f83\u8fdc\u7684\u8bcd\u5bf9\u505a\u76f8\u5e94\u7684\u60e9\u7f5a\u7b49\u7b49\u3002 \u7136\u800c\uff0c \u76f8\u6bd4 word2vec\uff0cGloVe \u5374\u66f4\u52a0\u5145\u5206\u7684\u5229\u7528\u4e86\u8bcd\u7684\u5171\u73b0\u4fe1\u606f \uff0cword2vec \u4e2d\u5219\u662f\u76f4\u63a5\u7c97\u66b4\u7684\u8ba9\u4e24\u4e2a\u5411\u91cf\u7684\u70b9\u4e58\u76f8\u6bd4\u5176\u4ed6\u8bcd\u7684\u70b9\u4e58\u6700\u5927\uff0c\u81f3\u5c11\u5728\u8868\u9762\u4e0a\u770b\u6765\u4f3c\u4e4e\u662f\u6ca1\u6709\u7528\u5230\u8bcd\u7684\u5171\u73b0\u4fe1\u606f\uff0c\u4e0d\u50cf GloVe \u8fd9\u91cc\u660e\u786e\u7684\u5c31\u662f\u62df\u5408\u8bcd\u5bf9\u7684\u5171\u73b0\u9891\u7387\u3002 \u4e0d\u8fc7\u66f4\u6709\u610f\u601d\u7684\u8fd8\u662f\uff0cGloVe \u548c word2vec \u4f3c\u4e4e\u6709\u79cd\u66f4\u4e3a\u5185\u5728\u7684\u8054\u7cfb\uff0c\u518d\u6765\u770b\u770b\u4ed6\u4eec\u7684\u76ee\u6807\u51fd\u6570\u6709\u4ec0\u4e48\u4e0d\u4e00\u6837\uff0c\u8fd9\u662f Skip-gram \u7684\u76ee\u6807\u51fd\u6570\uff08\u8fd9\u91cc\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e86\u5bf9\u4e8e\u8bed\u6599\u7684\u904d\u5386 N\uff09: $$ \\begin{array}{c}{\\frac{1}{N T} \\sum_{n=1}^{N} \\sum_{t=1}^{T} \\sum_{j \\in c} \\log P\\left(w_{n j} | w_{n t}\\right)} \\ {P\\left(w_{j} | w_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{j}\\right) e\\left(w_{t}\\right)\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) e\\left(w_{t}\\right)\\right)}}\\end{array} $$ \u800c\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\u662f\u6309\u7167\u8bed\u6599\u7684\u987a\u5e8f\u53bb\u904d\u5386\uff0c\u5982\u679c\u5148\u628a\u8bed\u6599\u5f53\u4e2d\u7684\u76f8\u5173\u8bcd\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u6309\u7167\u8bcd\u5178\u5e8f\u8fdb\u884c\u904d\u5386\uff0c\u4fbf\u53ef\u4ee5\u8bc1\u660e Skip-gram \u5b9e\u9645\u4e0a\u548c GloVe \u7684\u4f18\u5316\u76ee\u6807\u4e00\u81f4\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u53c2\u8003\u8bc1\u660e\u7ec6\u8282\uff08arXiv:1611.05962\uff09\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002 2.3 fastText \u00b6 word2vec \u548c GloVe \u90fd\u4e0d\u9700\u8981\u4eba\u5de5\u6807\u8bb0\u7684\u76d1\u7763\u6570\u636e\uff0c\u53ea\u9700\u8981\u8bed\u8a00\u5185\u90e8\u5b58\u5728\u7684\u76d1\u7763\u4fe1\u53f7\u5373\u53ef\u4ee5\u5b8c\u6210\u8bad\u7ec3\u3002\u800c\u4e0e\u6b64\u76f8\u5bf9\u5e94\u7684\uff0c fastText \u5219\u662f\u5229\u7528\u5e26\u6709\u76d1\u7763\u6807\u8bb0\u7684\u6587\u672c\u5206\u7c7b\u6570\u636e\u5b8c\u6210\u8bad\u7ec3\u3002 \u672c\u8d28\u4e0a\u6ca1\u6709\u4ec0\u4e48\u7279\u6b8a\u7684\uff0c\u6a21\u578b\u6846\u67b6\u5c31\u662f CBOW\uff0c\u53ea\u4e0d\u8fc7\u4e0e\u666e\u901a\u7684 CBOW \u6709\u4e24\u70b9\u4e0d\u4e00\u6837\uff0c\u5206\u522b\u662f\u8f93\u5165\u6570\u636e\u548c\u9884\u6d4b\u76ee\u6807\u7684\u4e0d\u540c\uff0c\u5728\u8f93\u5165\u6570\u636e\u4e0a\uff0cCBOW \u8f93\u5165\u7684\u662f\u4e00\u6bb5\u533a\u95f4\u4e2d\u9664\u53bb\u76ee\u6807\u8bcd\u4e4b\u5916\u7684\u6240\u6709\u5176\u4ed6\u8bcd\u7684\u5411\u91cf\u52a0\u548c\u6216\u5e73\u5747\uff0c \u800c fastText \u4e3a\u4e86\u5229\u7528\u66f4\u591a\u7684\u8bed\u5e8f\u4fe1\u606f\uff0c\u5c06 bag-of-words \u53d8\u6210\u4e86 bag-of-features \uff0c\u4e5f\u5c31\u662f\u4e0b\u56fe\u4e2d\u7684\u8f93\u5165 x \u4e0d\u518d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8bcd\uff0c\u8fd8\u53ef\u4ee5\u52a0\u4e0a bigram \u6216\u8005\u662f trigram \u7684\u4fe1\u606f\u7b49\u7b49\u3002 \u7b2c\u4e8c\u4e2a\u4e0d\u540c\u5728\u4e8e\uff0c CBOW \u9884\u6d4b\u76ee\u6807\u662f\u8bed\u5883\u4e2d\u7684\u4e00\u4e2a\u8bcd\uff0c\u800c fastText \u9884\u6d4b\u76ee\u6807\u662f\u5f53\u524d\u8fd9\u6bb5\u8f93\u5165\u6587\u672c\u7684\u7c7b\u522b \uff0c\u6b63\u56e0\u4e3a\u9700\u8981\u8fd9\u4e2a\u6587\u672c\u7c7b\u522b\uff0c\u56e0\u6b64\u624d\u8bf4 fastText \u662f\u4e00\u4e2a\u76d1\u7763\u6a21\u578b\u3002 \u800c\u76f8\u540c\u70b9\u5728\u4e8e\uff0cfastText \u7684\u7f51\u7edc\u7ed3\u6784\u548c CBOW \u57fa\u672c\u4e00\u81f4\uff0c\u540c\u65f6\u5728\u8f93\u51fa\u5c42\u7684\u5206\u7c7b\u4e0a\u4e5f\u4f7f\u7528\u4e86 Hierachical Softmax \u6280\u5de7\u6765\u52a0\u901f\u8bad\u7ec3\u3002 $$ -\\frac{1}{N} \\sum_{n=1}^{N} y_{n} \\log f\\left(B A x_{n}\\right), x_{n}=\\sum_{i=1}^{l_{n}} x_{n, i} $$ \u8fd9\u91cc\u7684 \\(x_{n,i}\\) \u4fbf\u662f\u8bed\u6599\u5f53\u4e2d\u7b2c n \u7bc7\u6587\u6863\u7684\u7b2c i \u4e2a\u8bcd\u4ee5\u53ca\u52a0\u4e0a N-gram \u7684\u7279\u5f81\u4fe1\u606f\u3002\u4ece\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u4fbf\u53ef\u4ee5\u77e5\u9053 fastText \u540c\u6837\u53ea\u6709\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u5206\u522b\u662f A \u548c B\uff0c\u5176\u4e2d A \u4fbf\u662f\u6700\u7ec8\u53ef\u4ee5\u83b7\u53d6\u7684\u8bcd\u5411\u91cf\u4fe1\u606f\u3002 fastText \u6700\u5927\u7684\u7279\u70b9\u5728\u4e8e\u5feb\uff0c\u8bba\u6587\u4e2d\u5bf9\u8fd9\u4e00\u70b9\u4e5f\u505a\u4e86\u8be6\u7ec6\u7684\u5b9e\u9a8c\u9a8c\u8bc1\uff0c\u5728\u4e00\u4e9b\u5206\u7c7b\u6570\u636e\u96c6\u4e0a\uff0cfastText \u901a\u5e38\u90fd\u53ef\u4ee5\u628a CNN \u7ed3\u6784\u7684\u6a21\u578b\u8981\u8017\u65f6\u51e0\u5c0f\u65f6\u751a\u81f3\u51e0\u5929\u7684\u65f6\u95f4\uff0c\u6025\u5267\u51cf\u5c11\u5230\u53ea\u9700\u8981\u6d88\u8017\u51e0\u79d2\u949f\uff0c\u4e0d\u53ef\u8c13\u4e0d\u201cfast\u201d\u3002 \u4e0d\u8fc7\u8bf4\u4e2a\u516b\u5366\uff0c\u4e3a\u4ec0\u4e48 fastText \u7ed3\u6784\u548c CBOW \u5982\u6b64\u76f8\u4f3c\u3002\u611f\u5174\u8da3\u7684\u8bfb\u8005\u60f3\u8981\u7ee7\u7eed\u6df1\u6316\u7684\u8bdd\uff0c\u8fd8\u53ef\u4ee5\u770b\u770b 2015 \u5e74 ACL \u7684\u4e00\u7bc7\u8bba\u6587 Deep Unordered Composition Rivals Syntactic Methods for Text Classification \uff0c\u7ed3\u6784\u53c8\u662f\u4f55\u5176\u76f8\u4f3c\uff0c\u5e76\u4e14\u6bd4 fastText \u7684\u8bba\u6587\u63a2\u8ba8\u7684\u66f4\u4e3a\u6df1\u5165\u4e00\u4e9b\uff0c\u4f46\u662f fastText \u662f 2016 \u5e74\u7684\u6587\u7ae0\uff0c\u5269\u4e0b\u7684\u5927\u5bb6\u81ea\u5df1\u53bb\u60f3\u597d\u4e86\u3002 \u8fd9\u91cc\u9762\u5927\u6982\u4e00\u4e2a\u7279\u522b\u91cd\u8981\u7684\u539f\u56e0\u5c31\u662f fastText \u7684\u4f5c\u8005\u4e4b\u4e00\u4fbf\u662f 3 \u5e74\u524d CBOW \u7684\u63d0\u51fa\u8005 Mikolov \u672c\u4eba\uff0c\u53ea\u4e0d\u8fc7\u6614\u65e5\u7684 Mikolov \u8fd8\u5728\u8c37\u6b4c\uff0c\u5982\u4eca 3 \u5e74\u65f6\u95f4\u4e00\u6643\u800c\u8fc7\uff0c\u65e9\u5df2\u662f Facebook \u7684\u4eba\u4e86\u3002 2.4 \u722c\u4e0a\u7b2c\u4e00\u7ea7\u68af\u5b50\u7684\u9769\u547d\u610f\u4e49 \u00b6 \u4e3a\u4ec0\u4e48\u8bf4 word2vec \u7684\u51fa\u73b0\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u9886\u57df\u7684\u53d1\u5c55\uff1f \u901a\u5e38\u4ee5\u4e3a\uff0cword2vec \u4e00\u7c7b\u7684\u65b9\u6cd5\u4f1a\u7ed9\u6bcf\u4e00\u4e2a\u8bcd\u8d4b\u4e88\u4e00\u4e2a**\u5411\u91cf\u7684\u8868\u5f81**\uff0c\u4e0d\u8fc7\u4f3c\u4e4e\u4ece\u6765\u6ca1\u6709\u4eba\u60f3\u8fc7\u8fd9\u4e2a\u529e\u6cd5\u4e3a\u4ec0\u4e48\u884c\u4e4b\u6709\u6548\uff1f\u96be\u9053\u662f\u7687\u5e1d\u7684\u65b0\u8863\uff1f\u6309\u7406\u6765\u8bf4\uff0c\u5305\u62ec NNLM \u5728\u5185\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4e3b\u8981\u51fa\u53d1\u70b9\u90fd\u662f\u5c06\u4e00\u4e2a\u8bcd\u8868\u793a\u6210\u8bcd\u5411\u91cf\uff0c\u5e76\u5c06\u5176\u8bed\u4e49**\u901a\u8fc7\u4e0a\u4e0b\u6587\u6765\u8868\u5f81**\u3002 \u5176\u5b9e\uff0c\u8fd9\u80cc\u540e\u662f\u6709\u7406\u8bba\u57fa\u7840\u7684\uff0c1954 \u5e74 Harris \u63d0\u51fa\u5206\u5e03\u5047\u8bf4\uff08distributional hypothesis\uff09\uff0c\u8fd9\u4e00\u5047\u8bf4\u8ba4\u4e3a\uff1a\u4e0a\u4e0b\u6587\u76f8\u4f3c\u7684\u8bcd\uff0c\u5176\u8bed\u4e49\u4e5f\u76f8\u4f3c\uff0c1957 \u5e74 Firth \u5bf9\u5206\u5e03\u5047\u8bf4\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u9610\u8ff0\u548c\u660e\u786e\uff1a\u8bcd\u7684\u8bed\u4e49\u7531\u5176\u4e0a\u4e0b\u6587\u51b3\u5b9a\uff08a word is characterized by the company it keeps\uff09\uff0c30 \u5e74\u540e\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u7956\u5e08\u7237 Hinton \u4e5f\u4e8e 1986 \u5e74\u5c1d\u8bd5\u8fc7\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\u3002 \u800c word2vec \u7684\u8d21\u732e\u8fdc\u4e0d\u6b62\u662f\u7ed9\u6bcf\u4e00\u4e2a\u8bcd\u8d4b\u4e88\u4e00\u4e2a**\u5206\u5e03\u5f0f\u7684\u8868\u5f81**\uff0c\u79c1\u4ee5\u4e3a\uff0c \u5b83\u5e26\u6765\u4e86\u4e00\u79cd\u5168\u65b0\u7684 NLP \u6a21\u578b\u5efa\u7acb\u65b9\u6cd5 \u3002\u5728\u8fd9\u4e4b\u524d\uff0c\u5927\u591a\u6570 NLP \u4efb\u52a1\u90fd\u8981\u5728\u5982\u4f55\u6316\u6398\u66f4\u591a\u6587\u672c\u8bed\u4e49\u7279\u5f81\u4e0a\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\uff0c\u751a\u81f3\u8fd9\u4e00\u90e8\u5206\u5de5\u4f5c\u5360\u53bb\u4e86\u6574\u4e2a\u4efb\u52a1\u5de5\u4f5c\u91cf\u7684\u7edd\u5927\u90e8\u5206\u3002 \u800c\u4ee5 word2vec \u4e3a\u4ee3\u8868\u7684 distributed representation \u65b9\u6cd5\u5927\u91cf\u6d8c\u73b0\u540e\uff08\u5c24\u5176\u662f\u56e0\u4e3a\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u9884\u8bad\u7ec3\u8bcd\u5411\u91cf\u6210\u4e3a\u73b0\u5b9e\uff0c\u5e76\u4e14\u88ab\u8bc1\u660e\u786e\u5b9e\u884c\u4e4b\u6709\u6548\u4e4b\u540e\uff09\uff0c\u7b97\u6cd5\u4eba\u5458\u53d1\u73b0\u5229\u7528 word2vec \u5728\u9884\u8bad\u7ec3\u4e0a\u5b66\u4e60\u5230\u7684\u8bcd\u5411\u91cf\uff0c\u521d\u59cb\u5316\u4ed6\u4eec\u81ea\u5df1\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\uff0c\u4f1a\u5e26\u6765\u6781\u5927\u6548\u679c\u7684\u63d0\u5347\uff0c\u4ee5\u81f3\u4e8e\u8fd9\u4e94\u5e74\u4ee5\u6765\uff0c\u51e0\u4e4e\u4e1a\u5185\u7684\u9ed8\u8ba4\u505a\u6cd5\u4fbf\u662f\u8981\u7528\u65e0\u8bba word2vec \u8fd8\u662f GloVe \u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\uff0c\u4f5c\u4e3a\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\uff0c**\u5982\u679c\u4e0d\u8fd9\u4e48\u505a\uff0c\u5927\u7ea6\u53ea\u6709\u4e24\u4e2a\u539f\u56e0\uff1a**1\uff09\u4f60\u5f88\u571f\u8c6a\uff0c\u6709\u94b1\u6807\u6ce8\u5927\u91cf\u76d1\u7763\u6570\u636e\uff1b2\uff09\u4f60\u5728\u86ee\u5e72\u3002 \u800c\u8fd9\u4e00\u4e2a\u601d\u60f3\uff0c\u7edd\u4e0d\u662f\u5982\u5b83\u8868\u8c61\u6240\u663e\u793a\u7684\u4e00\u6837\uff0c\u4f3c\u4e4e\u548c\u8fc7\u53bb\u505a\u6587\u672c\u7279\u5f81\u6ca1\u4ec0\u4e48\u592a\u5927\u533a\u522b\uff0c\u662f\u7684\uff0c\u8868\u8c61\u786e\u5b9e\u662f\u8fd9\u6837\uff0c\u65e0\u975e\u662f\u628a\u4e00\u4e2a\u8bcd\u7528\u4e86\u4e00\u5806\u6570\u5b57\u6765\u8868\u5f81\u800c\u5df2\uff0c \u8fd9\u548c\u79bb\u6563\u5316\u7684\u7279\u5f81\u6709\u4ec0\u4e48\u672c\u8d28\u533a\u522b\u5417\uff1f **\u6709\uff0c\u56e0\u4e3a\u5b83\u5f00\u542f\u4e86\u4e00\u79cd\u5168\u65b0\u7684 NLP \u6a21\u578b\u8bad\u7ec3\u65b9\u5f0f\u2014\u2014\u8fc1\u79fb\u5b66\u4e60\u3002**\u57fa\u672c\u601d\u60f3\u4fbf\u662f\u5229\u7528\u4e00\u5207\u53ef\u4ee5\u5229\u7528\u7684\u73b0\u6210\u77e5\u8bc6\uff0c\u8fbe\u5230\u5feb\u901f\u5b66\u4e60\u7684\u76ee\u7684\uff0c\u8fd9\u548c\u4eba\u7c7b\u7684\u8fdb\u5316\u5386\u7a0b\u4f55\u5176\u76f8\u4f3c\u3002 \u867d\u7136\u54bf\u54bf\u5440\u5440\u56eb\u56f5\u541e\u67a3\u4f3c\u7684\u521a\u5f00\u59cb\u80fd\u591f\u8bf4\u5f97\u4e09\u4e24\u4e2a\u8bcd\uff0c\u7136\u800c\u8fd9\u662f\u201cNLP \u7684\u4e00\u5c0f\u6b65\uff0c\u4eba\u7c7b AI \u7684\u4e00\u5927\u6b65\u201d\u3002\u6b63\u5982\u4eba\u7c7b\u8bed\u8a00\u4ea7\u751f\u4e4b\u521d\uff0c\u4e00\u65e6\u67d0\u4e2a\u539f\u59cb\u4eba\u7c7b\u7684\u5589\u90e8\u53d1\u51fa\u7684\u67d0\u4e2a\u97f3\u8282\uff0c\u7ecf\u65e0\u6bd4\u667a\u6167\u548c\u5228\u6839\u95ee\u5e95\u8003\u8bc1\u7684\u53f2\u5b66\u5bb6\u7814\u7a76\u8bc1\u5b9e\u4e86\u5b83\u5177\u6709\u67d0\u4e2a\u660e\u786e\u7684\u6307\u4ee3\u610f\u4e49\uff08\u65e0\u8bba\u5b83\u6307\u4ee3\u4ec0\u4e48\uff0c\u5373\u4fbf\u662f\u4eba\u7c7b\u7684\u6392\u6cc4\u7269\uff09\uff0c\u8fd9\u4fbf\u65e0\u6bd4\u5e84\u4e25\u7684\u5ba3\u793a\u7740\u4e00\u4e2a\u5168\u65b0\u7269\u79cd\u7684\u8bde\u751f\uff0c\u6211\u60f3\u8fc1\u79fb\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u8fd9\u4e00\u5c0f\u6b65\uff0c\u5927\u6982\u4e0e\u6b64\u540c\u62c5\u5f53\u3002 3. \u68af\u5b50\u7684\u4e00\u7ea7\u534a \u00b6 \u9664\u4e86\u5728 word \u7ea7\u522b\u7684 embedding \u65b9\u6cd5\u4e0a\u6709\u5927\u91cf\u6a21\u578b\u548c\u7b97\u6cd5\u7684\u6d8c\u73b0\uff0c\u540c\u6837\u5730\uff0c\u5728\u5b57\u7b26\u7ea7\u522b\u3001\u53e5\u5b50\u7ea7\u522b\u548c\u6bb5\u843d\u7ea7\u522b\u540c\u6837\u6709\u5927\u91cf\u6a21\u578b\u63d0\u51fa\u3002 word2vec \u5f00\u6e90\u968f\u540e\u7684\u7b2c\u4e00\u5e74\uff0c\u4e5f\u5c31\u662f\u5728 2014 \u5e74\uff0c\u8fd8\u662f Mikolov\uff0c\u5728\u4ed6\u548c\u53e6\u4e00\u4f4d\u4f5c\u8005\u5408\u4f5c\u7684\u4e00\u7bc7\u8bba\u6587 Distributed Representations of Sentences and Documents \u4e2d\uff0c\u63d0\u51fa\u4e86\u53ef\u4ee5\u501f\u9274 word2vec \u601d\u60f3\u7684\u4e24\u79cd\u7ed3\u6784\uff1aPV-DM \u548c PV-DBOW\uff0c\u5206\u522b\u5bf9\u5e94 word2vec \u4e2d\u7684 CBOW \u548c Skip-gram\u3002 3.1 PV-DM \u548c PV-DBOW \u00b6 PV-DM \u7684\u5168\u79f0\u662f Distributed Memory Model of Paragraph Vectors\uff0c\u548c CBOW \u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u4e0a\u4e0b\u6587\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u4e0d\u8fc7\u5728\u8f93\u5165\u5c42\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4e5f\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6587\u6863 ID \u6620\u5c04\u5230\u4e00\u4e2a\u5411\u91cf\u7684 look-up table\uff0c\u6a21\u578b\u7684\u76ee\u7684\u4fbf\u662f\u5c06\u5f53\u524d\u6587\u6863\u7684\u5411\u91cf\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5411\u91cf\u8054\u5408\u8f93\u5165\u6a21\u578b\uff0c\u5e76\u8ba9\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\u3002 \u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5bf9\u4e8e\u73b0\u6709\u7684\u6587\u6863\uff0c\u4fbf\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u5feb\u901f\u5f97\u5230\u8be5\u6587\u6863\u7684\u5411\u91cf\uff0c\u800c\u5bf9\u4e8e\u65b0\u7684\u4e00\u7bc7\u6587\u6863\uff0c\u90a3\u4e48\u5219\u9700\u8981\u5c06\u5df2\u6709\u7684 look-up table \u6dfb\u52a0\u76f8\u5e94\u7684\u5217\uff0c\u7136\u540e\u91cd\u65b0\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u53ea\u4e0d\u8fc7\u6b64\u65f6\u56fa\u5b9a\u597d\u5176\u4ed6\u7684\u53c2\u6570\uff0c\u53ea\u8c03\u6574 look-up table\uff0c\u6536\u655b\u540e\u4fbf\u53ef\u4ee5\u5f97\u5230\u65b0\u6587\u6863\u5bf9\u5e94\u7684\u5411\u91cf\u4e86\u3002 PV-DBOW \u7684\u5168\u79f0\u5219\u662f Distributed Bag of Words version of Paragraph Vector\uff0c\u548c Skip-gram \u7c7b\u4f3c\uff0c\u901a\u8fc7\u6587\u6863\u6765\u9884\u6d4b\u6587\u6863\u5185\u7684\u8bcd\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u6587\u672c\u7247\u6bb5\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u7247\u6bb5\u4e2d\u91c7\u6837\u4e00\u4e2a\u8bcd\uff0c\u8ba9 PV-DBOW \u6a21\u578b\u6765\u9884\u6d4b\u8fd9\u4e2a\u8bcd\u3002 \u4ee5\u6b64\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u8bad\u7ec3\u65b9\u6cd5\uff0c\u8bf4\u767d\u4e86\uff0c\u672c\u8d28\u4e0a\u548c Skip-gram \u662f\u4e00\u6837\u7684\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u81f4\u547d\u7684\u5f31\u70b9\uff0c\u5c31\u662f\u4e3a\u4e86\u83b7\u53d6\u65b0\u6587\u6863\u7684\u5411\u91cf\uff0c\u8fd8\u5f97\u7ee7\u7eed\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u5e76\u4e14\u7531\u4e8e\u6a21\u578b\u4e3b\u8981\u662f\u9488\u5bf9\u6587\u6863\u5411\u91cf\u9884\u6d4b\u8bcd\u5411\u91cf\u7684\u8fc7\u7a0b\u8fdb\u884c\u5efa\u6a21\uff0c\u5176\u5b9e\u5f88\u96be\u53bb\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u66f4\u4e30\u5bcc\u7684\u8bed\u4e49\u7ed3\u6784\uff0c\u6240\u4ee5\u8fd9\u4e24\u79cd\u83b7\u53d6\u6587\u6863\u5411\u91cf\u7684\u65b9\u6cd5\u90fd\u672a\u80fd\u5927\u89c4\u6a21\u5e94\u7528\u5f00\u6765\u3002 3.2 Skip-thoughts \u00b6 2015 \u5e74\uff0c\u591a\u4f26\u591a\u5927\u5b66\u7684 Kiros \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u65b9\u6cd5\u53eb Skip-thoughts\u3002\u540c\u6837\u4e5f\u662f\u501f\u9274\u4e86 Skip-gram \u7684\u601d\u60f3\uff0c\u4f46\u662f\u548c PV-DBOW \u4e2d\u5229\u7528\u6587\u6863\u6765\u9884\u6d4b\u8bcd\u7684\u505a\u6cd5\u4e0d\u4e00\u6837\u7684\u662f\uff0c Skip-thoughts \u76f4\u63a5\u5728\u53e5\u5b50\u95f4\u8fdb\u884c\u9884\u6d4b\uff0c\u4e5f\u5c31\u662f\u5c06 Skip-gram \u4e2d\u4ee5\u8bcd\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u66ff\u6362\u6210\u4e86\u4ee5\u53e5\u5b50\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u9009\u5b9a\u4e00\u4e2a\u7a97\u53e3\uff0c\u904d\u5386\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u7136\u540e\u5206\u522b\u5229\u7528\u5f53\u524d\u53e5\u5b50\u53bb\u9884\u6d4b\u548c\u8f93\u51fa\u5b83\u7684\u4e0a\u4e00\u53e5\u548c\u4e0b\u4e00\u53e5 \u3002 \u5bf9\u4e8e\u53e5\u5b50\u7684\u5efa\u6a21\u5229\u7528\u7684 RNN \u7684 sequence \u7ed3\u6784\uff0c\u9884\u6d4b\u4e0a\u4e00\u4e2a\u548c\u4e0b\u4e00\u4e2a\u53e5\u5b50\u65f6\u5019\uff0c\u4e5f\u662f\u5229\u7528\u7684\u4e00\u4e2a sequence \u7684 RNN \u6765\u751f\u6210\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7ed3\u6784\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a Encoder-Decoder \u6846\u67b6\uff0c\u53ea\u4e0d\u8fc7\u548c\u666e\u901a\u6846\u67b6\u4e0d\u4e00\u6837\u7684\u662f\uff0cSkip-thoughts \u6709\u4e24\u4e2a Decoder\u3002 \u5728\u4eca\u5929\u770b\u6765\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u6709\u5f88\u591a\u4e0d\u5b8c\u5584\u6216\u8005\u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff08\u4f5c\u8005\u4e5f\u5728\u8bba\u6587\u4e2d\u5206\u522b\u63d0\u5230\u4e86\u8fd9\u4e9b future works\uff09\uff0c\u6bd4\u5982\u8f93\u5165\u7684 Encoder \u53ef\u4ee5\u5f15\u5165 attention \u673a\u5236\uff0c\u4ece\u800c\u8ba9 Decoder \u7684\u8f93\u5165\u4e0d\u518d\u53ea\u662f\u4f9d\u8d56 Encoder \u6700\u540e\u4e00\u4e2a\u65f6\u523b\u7684\u8f93\u51fa\uff1bEncoder \u548c Decoder \u53ef\u4ee5\u5229\u7528\u66f4\u6df1\u5c42\u7684\u7ed3\u6784\uff1bDecoder \u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6269\u5927\uff0c\u53ef\u4ee5\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u66f4\u591a\u7684\u53e5\u5b50\uff1bRNN \u4e5f\u4e0d\u662f\u552f\u4e00\u7684\u9009\u62e9\uff0c\u8bf8\u5982 CNN \u4ee5\u53ca 2017 \u5e74\u8c37\u6b4c\u63d0\u51fa\u7684 Transformer \u7ed3\u6784\u4e5f\u53ef\u4ee5\u5229\u7528\u8fdb\u6765\uff0c\u540e\u6765\u679c\u4e0d\u5176\u7136\u8c37\u6b4c\u7684 BERT \u4fbf\u501f\u9274\u4e86\u8fd9\u4e00\u601d\u8def\uff0c\u5f53\u7136\u8fd9\u662f\u540e\u8bdd\u4e86\uff0c\u7559\u4e0b\u6682\u4e14\u4e0d\u8868\u3002 3.3 Quick-thoughts \u00b6 2018 \u5e74\u7684\u65f6\u5019\uff0c\u5728 Skip-thoughts \u7684\u57fa\u7840\u4e0a\uff0cGoogle Brain \u7684 Logeswaran \u7b49\u4eba\u5c06\u8fd9\u4e00\u601d\u60f3\u505a\u4e86\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u4ed6\u4eec\u8ba4\u4e3a Skip-thoughts \u7684 Decoder \u6548\u7387\u592a\u4f4e\uff0c\u4e14\u65e0\u6cd5\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u5f88\u597d\u7684\u8bad\u7ec3\uff08\u8fd9\u662f RNN \u7ed3\u6784\u7684\u901a\u75c5\uff09\u3002 \u6240\u4ee5\u4ed6\u4eec\u628a Skip-thoughts \u7684\u751f\u6210\u4efb\u52a1\u6539\u8fdb\u6210\u4e3a\u4e86\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1 \uff0c\u5177\u4f53\u8bf4\u6765\u5c31\u662f\u628a\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u6b63\u4f8b\uff0c\u628a\u4e0d\u662f\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u8d1f\u4f8b\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u8f93\u5165\u6a21\u578b\uff0c\u8ba9\u6a21\u578b\u5224\u65ad\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u662f\u5426\u662f\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002 \u53ef\u4ee5\u8bf4\uff0c\u4ec5\u4ec5\u51e0\u4e2a\u6708\u4e4b\u540e\u7684 BERT \u6b63\u662f\u5229\u7528\u7684\u8fd9\u79cd\u601d\u8def\u3002\u800c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u548c Skip-thoughts \u4e00\u8109\u76f8\u627f\u3002 3.4 InferSent \u00b6 \u9664\u4e86 Skip-thoughts \u548c Quick-thoughts \u8fd9\u4e24\u79cd\u4e0d\u9700\u8981\u4eba\u5de5\u6807\u8bb0\u6570\u636e\u7684\u6a21\u578b\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u4ece\u76d1\u7763\u6570\u636e\u4e2d\u5b66\u4e60\u53e5\u5b50\u8868\u793a\u7684\u65b9\u6cd5\u3002 \u6bd4\u5982 2017 \u5e74 Facebook \u7684\u7814\u7a76\u4eba\u5458 Conneau \u7b49\u4eba\u63d0\u51fa\u7684 InferSent \u6846\u67b6\uff0c\u5b83\u7684\u601d\u60f3\u7279\u522b\u7b80\u5355\uff0c\u5148\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\u5728\u65af\u5766\u798f\u7684 SNLI\uff08Stanford Natural Language Inference\uff09\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\uff0c\u800c\u540e\u5c06\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u4ee5\u6b64\u6765\u83b7\u5f97\u4e00\u4e2a\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a\uff0c\u518d\u5c06\u8fd9\u4e2a\u53e5\u5b50\u7684\u8868\u793a\u5e94\u7528\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\uff0c\u6765\u8bc4\u4f30\u53e5\u5b50\u5411\u91cf\u7684\u4f18\u52a3\u3002\u6846\u67b6\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fd9\u4e2a\u6846\u67b6\u6700\u5e95\u5c42\u662f\u4e00\u4e2a Encoder\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u8981\u83b7\u53d6\u7684\u53e5\u5b50\u5411\u91cf\u63d0\u53d6\u5668\uff0c\u7136\u540e\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u5411\u91cf\u901a\u8fc7\u4e00\u4e9b\u5411\u91cf\u64cd\u4f5c\u540e\u5f97\u5230\u53e5\u5b50\u5bf9\u7684\u6df7\u5408\u8bed\u4e49\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u5168\u8fde\u63a5\u5c42\u5e76\u505a SNLI \u4e0a\u7684\u4e09\u5206\u7c7b\u4efb\u52a1\u3002 \u505a\u8fc7\u53e5\u5b50\u5339\u914d\u4efb\u52a1\u7684\u4e00\u5b9a\u77e5\u9053\uff0c\u8fd9\u4e2a\u6846\u67b6\u662f\u4e00\u4e2a\u6700\u57fa\u672c\uff08\u751a\u81f3\u4e5f\u662f\u6700\u7b80\u964b\uff09\u7684\u53e5\u5b50\u5339\u914d\u6846\u67b6\u3002\u5bf9\u4e8e\u5e95\u5c42\u7684 Encoder \u6765\u8bf4\uff0c\u8bba\u6587\u4f5c\u8005\u5206\u522b\u5c1d\u8bd5\u4e86 7 \u79cd\u6a21\u578b\uff0c\u7136\u540e\u5206\u522b\u4ee5\u8fd9\u4e9b\u6a21\u578b\u4f5c\u4e3a\u5e95\u5c42\u7684 Encoder \u7ed3\u6784\u5728 SNLI \u4e0a\u8fdb\u884c\u76d1\u7763\u8bad\u7ec3\u3002 \u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bc4\u4f30\uff0c\u6700\u540e\u53d1\u73b0\u5f53 Encoder \u4f7f\u7528 BiLSTM with max pooling \u7ed3\u6784\u65f6\uff0c\u5bf9\u4e8e\u53e5\u5b50\u7684\u8868\u5f81\u6027\u80fd\u6700\u597d\u3002\u5bf9\u5177\u4f53\u7ec6\u8282\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u53c2\u8003\u4ed6\u4eec\u7684\u8bba\u6587***Supervised Learning of Universal Sentence Representations from Natural Language Inference Data***\u3002 3.5 General Purpose Sentence Representation \u00b6 \u6b64\u5916\uff0c\u9664\u4e86 InferSent \u8fd9\u79cd\u5355\u4e2a\u4efb\u52a1\u7684\u76d1\u7763\u5b66\u4e60\u5916\uff0c\u6700\u65b0\u7684\u5de5\u4f5c\u9010\u6e10\u5c06\u591a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\u5e94\u7528\u5230\u83b7\u53d6\u53e5\u5b50\u7684\u8868\u5f81\u4e2d\u3002 \u4f8b\u5982 Subramanian \u7b49\u4eba\u53d1\u8868\u5728 ICLR 2018 \u4e0a\u7684 Learning General Purpose Distributed Sentence Representations via Large Scale Multi-task Learning \uff0c\u5c31\u63d0\u51fa\u4e86**\u5229\u7528\u56db\u79cd\u4e0d\u540c\u7684\u76d1\u7763\u4efb\u52a1\u6765\u8054\u5408\u5b66\u4e60\u53e5\u5b50\u7684\u8868\u5f81**\uff0c\u8fd9\u56db\u79cd\u4efb\u52a1\u5206\u522b\u662f\uff1aNatural Language Inference\uff0cSkip-thougts\uff0cNeural Machine Translation \u4ee5\u53ca Constituency Parsing \u7b49\u3002 \u4f5c\u8005\u7684\u51fa\u53d1\u70b9\u4e5f\u7279\u522b\u7b80\u5355\uff0c \u901a\u7528\u7684\u53e5\u5b50\u8868\u5f81\u5e94\u8be5\u901a\u8fc7\u4fa7\u91cd\u70b9\u4e0d\u540c\u7684\u4efb\u52a1\u6765\u8054\u5408\u5b66\u4e60\u5230\uff0c\u800c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u7279\u5b9a\u4efb\u52a1\u6765\u5b66\u4e60\u53e5\u5b50\u8868\u5f81 \uff0c\u540e\u6765\u4f5c\u8005\u5728\u8bba\u6587\u4e2d\u7684\u5b9e\u9a8c\u4e5f\u786e\u5b9e\u8bc1\u660e\u4e86\u8fd9\u70b9\u3002 \u5b9e\u9a8c\u7684\u5177\u4f53\u505a\u6cd5\u662f\uff0c\u5148\u7528\u8054\u5408\u5b66\u4e60\u7684\u65b9\u6cd5\u5728\u4e0a\u8ff0\u56db\u4e2a\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5c06\u6a21\u578b\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e5\u5b50\u7684\u8868\u5f81\uff08\u6216\u8005\u628a\u8fd9\u4e2a\u8054\u5408\u5b66\u4e60\u7684\u6a21\u578b\u4f5c\u4e3a\u7279\u5f81\u63d0\u53d6\u5668\uff09\uff0c\u7136\u540e\u76f4\u63a5\u5728\u8fd9\u4e2a\u8868\u5f81\u4e0a\u63a5\u4e0a\u975e\u5e38\u7b80\u5355\u7684\u5168\u8fde\u63a5\u5c42\u505a\u5206\u7c7b\u5668\uff0c\u5e76\u4e14\u540c\u65f6\u4fdd\u8bc1\u6700\u5e95\u5c42\u7684\u7279\u5f81\u63d0\u53d6\u5668\u4e2d\u53c2\u6570**\u4e0d\u52a8**\uff08\u4e5f\u5c31\u662f\u53ea\u628a\u5b83\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff09\uff0c\u518d\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u505a\u8bad\u7ec3\uff08\u53ea\u8bad\u7ec3\u6700\u540e\u63a5\u4e0a\u7684\u5168\u8fde\u63a5\u5c42\u5206\u7c7b\u5668\uff09\uff0c\u6700\u540e\u6839\u636e\u8bad\u7ec3\u51fa\u6765\u7684\u7b80\u5355\u5206\u7c7b\u5668\u5728\u5404\u81ea\u5206\u7c7b\u4efb\u52a1\u7684\u6d4b\u8bd5\u96c6\u4e0a\u505a\u8bc4\u4f30\u3002 \u6700\u540e\u4f5c\u8005\u60ca\u559c\u7684\u53d1\u73b0\u5f88\u591a\u4efb\u52a1\u4e0a\u4ed6\u4eec\u7684\u7b80\u5355\u5206\u7c7b\u5668\u90fd\u8981\u8d85\u8fc7\u5f53\u65f6\u7684\u6700\u597d\u7ed3\u679c\uff0c\u5e76\u4e14\u4ed6\u4eec\u8fd8\u53d1\u73b0\u8054\u5408\u8bad\u7ec3\u4e2d**\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e8e\u53e5\u5b50\u8868\u5f81\u4e2d\u7684\u4e0d\u540c\u65b9\u9762\u6709\u4e0d\u540c\u7684\u8d21\u732e**\u3002 3.6 Universal Sentence Encoder \u00b6 \u540c\u6837\u5728 2018 \u5e74\uff0c\u8c37\u6b4c\u7684 Daniel Cer \u7b49\u4eba\u5728\u8bba\u6587 Universal Sentence Encoder \u4e2d\u63d0\u51fa\u7684\u601d\u8def\u57fa\u672c\u548c General Purpose Sentence Representation \u7684\u5de5\u4f5c\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u4f5c\u8005\u63d0\u51fa\u4e86\u5229\u7528 Transformer \u548c DAN\uff08\u4e0a\u6587\u63d0\u5230\u8fc7\u7684\u548c CBOW \u4e0e fastText \u90fd\u795e\u4f3c\u7684 Deep Unordered Composition Rivals Syntactic Methods for Text Classification \uff09\u4e24\u79cd\u6846\u67b6\u4f5c\u4e3a\u53e5\u5b50\u7684 Encoder\u3002 Transformer \u7ed3\u6784\u66f4\u4e3a\u590d\u6742\uff0c\u53c2\u6570\u66f4\u591a\uff0c\u8bad\u7ec3\u4e5f\u76f8\u5bf9\u6bd4\u8f83\u8017\u65f6\uff0c\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u6548\u679c\u4f1a\u66f4\u597d\u4e00\u4e9b\u3002\u5bf9\u5e94\u7684\uff0cDAN \u7ed3\u6784\u7b80\u5355\uff0c\u53ea\u6709\u4e24\u4e2a\u9690\u85cf\u5c42\uff08\u751a\u81f3\u53ef\u4ee5\u51cf\u5c0f\u4e3a\u53ea\u9700\u8981\u4e00\u4e2a\u9690\u85cf\u5c42\uff09\uff0c\u53c2\u6570\u6bd4\u8f83\u5c11\uff0c\u8bad\u7ec3\u76f8\u5bf9\u6bd4\u8f83\u7701\u65f6\u7701\u8d44\u6e90\uff0c\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u6548\u679c\u4f1a\u5dee\u4e00\u4e9b\uff08\u5e76\u4e0d\u662f\u7edd\u5bf9\uff0c\u8bba\u6587\u4e2d\u4e5f\u53d1\u73b0\u67d0\u4e9b\u573a\u666f\u4e0b DAN \u7684\u6548\u679c\u751a\u81f3\u66f4\u597d\uff09\u3002\u7136\u540e\u4f5c\u8005\u65e2\u5728\u65e0\u6807\u8bb0\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u4e5f\u5728\u76d1\u7763\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u6700\u540e\u5728\u5341\u4e2a\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8fc1\u79fb\u5b66\u4e60\u7684\u8bc4\u4f30\u3002\u6b64\u5916\uff0c\u4f5c\u8005\u8fd8\u653e\u51fa\u4e86\u4ed6\u4eec\u9884\u8bad\u7ec3\u597d\u7684 Encoder\uff0c\u53ef\u4ee5\u4f9b\u8fc1\u79fb\u5b66\u4e60\u7684\u53e5\u5b50\u7279\u5f81\u63d0\u53d6\u5668\u4f7f\u7528\u3002 \u9884\u8bad\u7ec3 Encoder\uff1a https://tfhub.dev/google/universal-sentence-encoder/2 4. \u62e8\u5f00\u8ff7\u96fe\u2014\u2014\u7b2c\u4e8c\u7ea7\u68af\u5b50\u82e5\u9690\u82e5\u73b0 \u00b6 4.1 \u6208\u591a\u4f1a\u6765\u5417\uff1f \u00b6 \u4e0a\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86\u597d\u51e0\u79cd\u83b7\u53d6\u53e5\u5b50\u8868\u5f81\u7684\u65b9\u6cd5\uff0c\u7136\u800c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u53ea\u5bf9\u5982\u4f55\u83b7\u53d6\u66f4\u597d\u7684\u53e5\u5b50\u8868\u5f81\u611f\u5174\u8da3\uff0c\u5176\u5b9e\u66f4\u6709\u8da3\u7684\u662f\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5728\u8bc4\u4f30\u4ed6\u4eec\u5404\u81ea\u6a21\u578b\u6027\u80fd\u7684\u65f6\u5019\u6240\u91c7\u53d6\u7684\u65b9\u6cd5\uff0c\u56de\u8fc7\u5934\u53bb\u8fdb\u884c\u68b3\u7406\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba\u662f\u7a0d\u65e9\u4e9b\u7684InferSent\uff0c\u8fd8\u662f2018\u5e74\u63d0\u51fa\u7684Quick-thoughts\u548cMulti-task Learning\u83b7\u53d6\u901a\u7528\u53e5\u5b50\u8868\u5f81\u7684\u65b9\u6cd5\uff0c \u4ed6\u4eec\u65e0\u4e00\u4f8b\u5916\u7684\u90fd\u4f7f\u7528\u4e86\u540c\u4e00\u79cd\u601d\u8def\uff1a\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u8868\u5f81\uff0c\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u800c\u6b64\u65f6\u7684\u6a21\u578b\u4e00\u822c\u90fd\u53ea\u7528\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u7136\u540e\u63a5\u4e0asoftmax\u8fdb\u884c\u5206\u7c7b\uff0c\u5206\u7c7b\u5668\u8db3\u591f\u7b80\u5355\uff0c\u8db3\u591f\u6d45\u5c42\uff0c\u76f8\u6bd4\u90a3\u4e9b\u5728\u8fd9\u4e9b\u5206\u7c7b\u4efb\u52a1\u4e0a\u8bbe\u8ba1\u7684\u8db3\u591f\u590d\u6742\u7684\u6a21\u578b\u6765\u8bf4\u7b80\u76f4\u4e0d\u503c\u4e00\u63d0\uff0c\u7136\u800c\u4ee4\u4eba\u5927\u8dcc\u773c\u955c\u7684\u662f\uff0c\u7ed3\u679c\u65e0\u4e00\u4f8b\u5916\u7684\u8fd9\u4e9b\u7b80\u5355\u7684\u5206\u7c7b\u5668\u90fd\u80fd\u591f\u6bd4\u80a9\u751a\u81f3\u8d85\u8d8a\u4ed6\u4eec\u5404\u81ea\u65f6\u4ee3\u7684\u6700\u597d\u7ed3\u679c\uff0c\u8fd9\u4e0d\u80fd\u4e0d\u8bf4\u662f\u4e2a\u60ca\u559c\u3002\u800c\u521b\u9020\u8fd9\u4e9b\u60ca\u559c\u7684\u80cc\u540e\u529f\u81e3\uff0c\u5c31\u662f\u8fc1\u79fb\u5b66\u4e60\u3002\u66f4\u8fdb\u4e00\u6b65\u5730\uff0c\u8fc1\u79fb\u5b66\u4e60\u7684\u672c\u8d28\uff0c\u5c31\u662f\u7ed9\u722c\u4e0a\u201c\u5de8\u4eba\u7684\u80a9\u8180\u201d\u63d0\u4f9b\u4e86\u4e00\u67b6\u7ed3\u5b9e\u7684\u68af\u5b50\u3002 \u5177\u4f53\u7684\uff0c\u5728\u8fd9\u4e9b\u53e5\u5b50\u7ea7\u522b\u7684\u4efb\u52a1\u4e2d\uff0c\u5c5e\u4e8eInferSent\u548cQuick-thoughts\u8fd9\u4e9b\u6a21\u578b\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4fbf\u662f\u4ed6\u4eec\u5404\u81ea\u4f7f\u7528\u7684\u8bad\u7ec3\u6570\u636e\uff0c\u8fc1\u79fb\u5b66\u4e60\u6700\u540e\u7ed9\u4ed6\u4eec\u642d\u4e86\u4e00\u4e2a\u68af\u5b50\uff0c\u7136\u800c\u8fd9\u4e2a\u68af\u5b50\u5e76\u6ca1\u6709\u5f88\u597d\u4e0a\uff0c\u78d5\u78d5\u7eca\u7eca\uff0c\u4eba\u7c7bAI\u7b97\u662f\u7ad9\u5728\u7b2c\u4e00\u7ea7\u68af\u5b50\u4e0a\uff0c\u8bd5\u63a2\u6027\u7684\u4f38\u51fa\u4e86\u4e00\u53ea\u817f\uff0c\u53e6\u4e00\u53ea\u817f\u5373\u5c06\u8de8\u51fa\uff0c\u53ea\u53ef\u60dc\u5e76\u4e0d\u77e5\u9053\u662f\u5426\u6709\u4ed6\u4eec\u82e6\u82e6\u7b49\u5f85\u4e86\u4e94\u5e74\u4e4b\u4e45\u7684\u6208\u591a\uff1f 4.2 \u4e00\u4e1d\u66d9\u5149 \u00b6 2017\u5e74\uff0cSalesforce\u7684Bryan McCann\u548c\u5176\u4ed6\u4e00\u4e9b\u4eba\uff0c\u53d1\u8868\u4e86\u4e00\u7bc7\u6587\u7ae0\u300aLearned in Translation: Contextualized Word Vectors\u300b\uff0c\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u4ed6\u4eec\u9996\u5148\u7528\u4e00\u4e2aEncoder-Decoder\u6846\u67b6\u5728\u673a\u5668\u7ffb\u8bd1\u7684\u8bad\u7ec3\u8bed\u6599\u4e0a\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u800c\u540e\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u53ea\u53d6\u5176\u4e2d\u7684Embedding\u5c42\u548cEncoder\u5c42\uff0c\u540c\u65f6\u5728\u4e00\u4e2a\u65b0\u7684\u4efb\u52a1\u4e0a\u8bbe\u8ba1\u4e00\u4e2atask-specific\u6a21\u578b\uff0c\u7136\u540e\u5c06\u539f\u5148\u9884\u8bad\u7ec3\u597d\u7684Embedding\u5c42\u548cEncoder\u5c42\u7684\u8f93\u51fa\u4f5c\u4e3a\u8fd9\u4e2atask-specific\u6a21\u578b\u7684\u8f93\u5165\uff0c\u6700\u7ec8\u5728\u65b0\u7684\u4efb\u52a1\u573a\u666f\u4e0b\u8fdb\u884c\u8bad\u7ec3\u3002\u4ed6\u4eec\u5c1d\u8bd5\u4e86\u5f88\u591a\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u5305\u62ec\u6587\u672c\u5206\u7c7b\uff0cQuestion Answering\uff0cNatural Language Inference\u548cSQuAD\u7b49\u7b49\uff0c\u5e76\u5728\u8fd9\u4e9b\u4efb\u52a1\u4e2d\uff0c\u4e0eGloVe\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\u5019\u7684\u6548\u679c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\u4ed6\u4eec\u63d0\u51fa\u7684Context Vectors\u5728\u4e0d\u540c\u4efb\u52a1\u4e2d\u4e0d\u540c\u7a0b\u5ea6\u7684\u90fd\u5e26\u6765\u4e86\u6548\u679c\u7684\u63d0\u5347\u3002 \u548c\u4e0a\u6587\u4e2d\u63d0\u5230\u7684\u8bf8\u5982 Skip-thoughts \u65b9\u6cd5\u6709\u6240\u4e0d\u540c\u7684\u662f\uff0cCoVe \u66f4\u4fa7\u91cd\u4e8e\u5982\u4f55\u5c06\u73b0\u6709\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5f97\u5230\u7684\u8868\u5f81\u8fc1\u79fb\u5230\u65b0\u4efb\u52a1\u573a\u666f\u4e2d \uff0c\u800c\u4e4b\u524d\u7684\u53e5\u5b50\u7ea7\u4efb\u52a1\u4e2d**\u5927\u591a\u6570\u90fd\u53ea\u628a\u8fc1\u79fb\u8fc7\u7a0b\u5f53\u505a\u4e00\u4e2a\u8bc4\u4f30\u4ed6\u4eec\u8868\u5f81\u6548\u679c\u7684\u624b\u6bb5**\uff0c\u56e0\u6b64\u89c2\u5ff5\u4e0a\u6709\u6240\u4e0d\u540c\u3002 \u90a3\u4e48\uff0cCoVe \u4f3c\u4e4e\u901a\u8fc7\u76d1\u7763\u6570\u636e\u4e0a\u7684\u9884\u8bad\u7ec3\uff0c\u53d6\u5f97\u4e86\u8ba9\u4eba\u773c\u524d\u4e00\u4eae\u7684\u7ed3\u679c\uff0c\u662f\u5426\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5730\uff0c\u6487\u53bb\u76d1\u7763\u6570\u636e\u7684\u4f9d\u8d56\uff0c\u76f4\u63a5\u5728\u65e0\u6807\u8bb0\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5462\uff1f 4.3 ELMo \u00b6 2018\u5e74\u7684\u65e9\u4e9b\u65f6\u5019\uff0cAllenNLP\u7684Matthew E. Peters\u7b49\u4eba\u5728\u8bba\u6587\u300aDeep contextualized word representations\u300b\uff08\u8be5\u8bba\u6587\u540c\u65f6\u88abICLR\u548cNAACL\u63a5\u53d7\uff0c\u5e76\u4e14\u8fd8\u83b7\u5f97\u4e86NAACL\u6700\u4f73\u8bba\u6587\u5956\uff0c\u53ef\u89c1\u8fd9\u7bc7\u8bba\u6587\u7684\u542b\u91d1\u91cf\uff09\u4e2d\u9996\u6b21\u63d0\u51fa\u4e86ELMo\uff0c\u5b83\u7684\u5168\u79f0\u662fEmbeddings from Language Models\uff0c\u4ece\u540d\u79f0\u4e0a\u53ef\u4ee5\u770b\u51fa\uff0cELMo\u4e3a\u4e86\u5229\u7528\u65e0\u6807\u8bb0\u6570\u636e\uff0c\u4f7f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u5b83\u662f\u5982\u4f55\u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u3002 \u57fa\u672c\u6846\u67b6\u662f\u4e00\u4e2a\u53cc\u5c42\u7684 Bi-LSTM\uff0c\u4e0d\u8fc7\u5728\u7b2c\u4e00\u5c42\u548c\u7b2c\u4e8c\u5c42\u4e4b\u95f4\u52a0\u5165\u4e86\u4e00\u4e2a\u6b8b\u5dee\u7ed3\u6784\uff08\u4e00\u822c\u6765\u8bf4\uff0c\u6b8b\u5dee\u7ed3\u6784\u80fd\u8ba9\u8bad\u7ec3\u8fc7\u7a0b\u66f4\u7a33\u5b9a\uff09\u3002\u505a\u9884\u8bad\u7ec3\u7684\u65f6\u5019\uff0cELMo \u7684\u8bad\u7ec3\u76ee\u6807\u51fd\u6570\u4e3a\uff1a $$ \\sum_{k=1}^{N} \\log p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)+\\log p\\left(t_{k} | t_{k+1}, \\ldots, t_{N}\\right) $$ \u8fd9\u4e2a\u5f0f\u5b50\u5f88\u6e05\u6670\uff0c\u524d\u540e\u6709\u4e24\u4e2a\u6982\u7387\uff0c\u7b2c\u4e00\u4e2a\u6982\u7387\u662f\u6765\u81ea\u4e8e\u6b63\u5411\u7684\u7531\u5de6\u5230\u53f3\u7684 RNN \u7ed3\u6784\uff0c\u5728\u6bcf\u4e00\u4e2a\u65f6\u523b\u4e0a\u7684 RNN \u8f93\u51fa\uff08\u4e5f\u5c31\u662f\u8fd9\u91cc\u7684\u7b2c\u4e8c\u5c42 LSTM \u8f93\u51fa\uff09\uff0c\u7136\u540e\u518d\u63a5\u4e00\u4e2a Softmax \u5c42\u5c06\u5176\u53d8\u4e3a\u6982\u7387\u542b\u4e49\uff0c\u5c31\u81ea\u7136\u5f97\u5230\u4e86 \\(p\\left(t_{k} | t_{1}, \\dots, t_{k-1}\\right)\\) \uff1b\u4e0e\u6b64\u7c7b\u4f3c\uff0c\u7b2c\u4e8c\u4e2a\u6982\u7387\u6765\u81ea\u53cd\u5411\u7684\u7531\u53f3\u5230\u5de6\u7684 RNN \u7ed3\u6784\uff0c\u6bcf\u4e00\u4e2a\u65f6\u523b RNN \u7684\u8f93\u51fa\u7ecf\u8fc7 Softmax \u5c42\u540e\u4e5f\u80fd\u5f97\u5230\u4e00\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u8868\u793a\u4ece\u67d0\u4e2a\u8bcd\u7684\u4e0b\u6587\u63a8\u65ad\u8be5\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002 ELMo \u7684\u57fa\u672c\u6846\u67b6\u4fbf\u662f 2-stacked biLSTM + Residual \u7684\u7ed3\u6784\uff0c\u4e0d\u8fc7\u548c\u666e\u901a RNN \u7ed3\u6784\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0cELMo \u501f\u9274\u4e86 2016 \u5e74 Google Brain \u7684 Rafal Jozefowicz \u7b49\u4eba\u53d1\u8868\u7684 Exploring the Limits of Language Modeling \uff0c\u5176\u4e3b\u8981\u6539\u8fdb\u5728\u4e8e\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4e0d\u518d\u662f word\uff0c\u800c\u662f\u53d8\u4e3a\u4e86\u4e00\u4e2a char-based CNN \u7ed3\u6784\uff0cELMo \u5728\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u8003\u8651\u4e86\u4f7f\u7528\u540c\u6837\u7684\u8fd9\u79cd\u7ed3\u6784\uff0c\u8be5\u7ed3\u6784\u5982\u4e0b\u56fe\u793a\uff1a \u8fd9\u6837\u505a\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f\u56e0\u4e3a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u90fd\u4f7f\u7528\u4e86\u8fd9\u79cd CNN \u7ed3\u6784\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u8f93\u51fa\u5c42\u4f7f\u7528\u8fd9\u79cd\u7ed3\u6784\u600e\u4e48\u7528\uff0c\u4ee5\u53ca\u6709\u4ec0\u4e48\u4f18\u52bf\u3002\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5728 CBOW \u4e2d\u7684\u666e\u901a Softmax \u65b9\u6cd5\u4e2d\uff0c\u4e3a\u4e86\u8ba1\u7b97\u6bcf\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\uff0c\u4f7f\u7528\u7684\u5982\u4e0b\u516c\u5f0f\u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a $$ P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right) $$ \u8bf4\u767d\u4e86\uff0c\u4e5f\u5c31\u662f\u5148\u901a\u8fc7\u5411\u91cf\u70b9\u4e58\u7684\u5f62\u5f0f\u8ba1\u7b97\u5f97\u5230 logits\uff0c\u7136\u540e\u518d\u901a\u8fc7 softmax \u53d8\u6210\u6982\u7387\u610f\u4e49\uff0c\u8fd9\u672c\u8d28\u4e0a\u548c\u666e\u901a\u5206\u7c7b\u6ca1\u4ec0\u4e48\u533a\u522b\uff0c\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u8f83\u5927\u7684 |V| \u5206\u7c7b\u95ee\u9898\u3002 \u73b0\u5728\u6211\u4eec\u5047\u5b9a char-based CNN \u6a21\u578b\u662f\u73b0\u6210\u5df2\u6709\u7684\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u76ee\u6807\u8bcd\u90fd\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u5411\u91cf\u8868\u793a CNN(tk) \uff0c\u5f53\u524d\u65f6\u523b\u7684 LSTM \u7684\u8f93\u51fa\u5411\u91cf\u4e3a h\uff0c\u90a3\u4e48\u4fbf\u53ef\u4ee5\u901a\u8fc7\u540c\u6837\u7684\u65b9\u6cd5\u5f97\u5230\u76ee\u6807\u8bcd\u7684\u6982\u7387\u5927\u5c0f\uff1a $$ p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)=\\frac{\\exp \\left(\\operatorname{CNN} \\left(t_{k}\\right)^{T} h\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(\\operatorname{CNN} \\left(t_{i}\\right)^{T} h\\right)}, h=\\operatorname{LSTM}\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right) $$ \u5728\u539f\u8bba\u6587\u4e2d\uff0c\u628a\u8fd9\u79cd\u5148\u7ecf\u8fc7 CNN \u5f97\u5230\u8bcd\u5411\u91cf\uff0c\u7136\u540e\u518d\u8ba1\u7b97 Softmax \u7684\u65b9\u6cd5\u53eb\u505a CNN Softmax\u3002 \u5229\u7528 CNN \u89e3\u51b3\u6709\u4e09\u70b9\u4f18\u52bf\u503c\u5f97\u6ce8\u610f\uff1a CNN \u80fd\u51cf\u5c11\u666e\u901a\u505a Softmax \u65f6\u5168\u8fde\u63a5\u5c42\u4e2d\u7684\u5fc5\u987b\u8981\u6709\u7684 |V|h \u7684\u53c2\u6570\u89c4\u6a21\uff0c\u53ea\u9700\u4fdd\u6301 CNN \u5185\u90e8\u7684\u53c2\u6570\u5927\u5c0f\u5373\u53ef\u3002\u4e00\u822c\u6765\u8bf4\uff0cCNN \u4e2d\u7684\u53c2\u6570\u89c4\u6a21\u90fd\u8981\u6bd4 |V|h \u7684\u53c2\u6570\u89c4\u6a21\u5c0f\u5f97\u591a\uff1b CNN \u53ef\u4ee5\u89e3\u51b3 OOV \uff08Out-of-Vocabulary\uff09\u95ee\u9898\uff0c\u8fd9\u4e2a\u5728\u7ffb\u8bd1\u95ee\u9898\u4e2d\u5c24\u5176\u5934\u75bc\uff1b \u5728\u9884\u6d4b\u9636\u6bb5\uff0cCNN \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u8ba1\u7b97\u53ef\u4ee5\u9884\u5148\u505a\u597d\uff0c\u66f4\u80fd\u591f\u51cf\u8f7b inference \u9636\u6bb5\u7684\u8ba1\u7b97\u538b\u529b\u3002 \u8865\u5145\u4e00\u53e5\uff0c\u666e\u901a Softmax \u5728\u5927\u8bcd\u5178\u4e0a\u7684\u8ba1\u7b97\u538b\u529b\uff0c\u90fd\u662f\u56e0\u4e3a\u6765\u81ea\u4e8e\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u628a\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa\u901a\u8fc7\u5168\u8fde\u63a5\u5c42\u6620\u5c04\u4e3a\u5355\u4e2a\u503c\uff08\u800c\u6bcf\u4e2a\u7c7b\u522b\u9700\u8981\u4e00\u4e2a\u6620\u5c04\u4e00\u6b21\u3002\u4e00\u6b21 h \u5927\u5c0f\u7684\u8ba1\u7b97\u89c4\u6a21\uff0c|V| \u6b21\u6620\u5c04\u4fbf\u9700\u8981\u603b\u5171 |V| h \u8fd9\u4e48\u591a\u6b21\u7684\u6620\u5c04\u89c4\u6a21\uff09\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7c7b\u522b\u7684\u6620\u5c04\u53c2\u6570\u90fd\u4e0d\u540c\uff0c\u800c CNN Softmax \u7684\u597d\u5904\u5c31\u5728\u4e8e\u80fd\u591f\u505a\u5230\u5bf9\u4e8e\u4e0d\u540c\u7684\u8bcd\uff0c**\u6620\u5c04\u53c2\u6570\u90fd\u662f\u5171\u4eab\u7684* \uff0c\u8fd9\u4e2a\u5171\u4eab\u4fbf\u4f53\u73b0\u5728\u4f7f\u7528\u7684 CNN \u4e2d\u7684\u53c2\u6570\u90fd\u662f\u540c\u4e00\u5957\uff0c\u4ece\u800c\u5927\u5927\u51cf\u5c11\u53c2\u6570\u7684\u89c4\u6a21\u3002 \u540c\u6837\u7684\uff0c\u5bf9\u4e8e\u8f93\u5165\u5c42\uff0cELMo \u4e5f\u662f\u7528\u4e86\u4e00\u6837\u7684 CNN \u7ed3\u6784\uff0c\u53ea\u4e0d\u8fc7\u53c2\u6570\u4e0d\u4e00\u6837\u800c\u5df2\u3002\u548c\u8f93\u51fa\u5c42\u4e2d\u7684\u5206\u6790\u7c7b\u4f3c\uff0c\u8f93\u5165\u5c42\u4e2d CNN \u7684\u5f15\u5165\u540c\u6837\u53ef\u4ee5\u51cf\u5c11\u53c2\u6570\u89c4\u6a21\u3002\u4e0d\u8fc7 Exploring the Limits of Language Modeling \u6587\u4e2d\u4e5f\u6307\u51fa\u4e86\u8bad\u7ec3\u65f6\u95f4\u4f1a\u7565\u5fae\u589e\u52a0\uff0c\u56e0\u4e3a\u539f\u6765\u7684 look-up \u64cd\u4f5c\u53ef\u4ee5\u505a\u5230\u66f4\u5feb\u4e00\u4e9b\uff0c\u5bf9 OOV \u95ee\u9898\u4e5f\u80fd\u591f\u6bd4\u8f83\u597d\u7684\u5e94\u5bf9\uff0c\u4ece\u800c\u628a\u8bcd\u5178\u5927\u5c0f\u4e0d\u518d\u9650\u5b9a\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u8bcd\u5178\u5927\u5c0f\u4e0a\u3002 \u6700\u7ec8 ELMo \u7684\u4e3b\u8981\u7ed3\u6784\u4fbf\u5982\u4e0b\u56fe\uff08b\uff09\u6240\u793a\uff0c\u53ef\u89c1\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u90fd\u662f\u4e00\u4e2a CNN\uff0c\u4e2d\u95f4\u4f7f\u7528 Bi-LSTM \u6846\u67b6\uff0c\u81f3\u4e8e\u5177\u4f53\u7ec6\u8282\u4fbf\u5982\u4e0a\u4e24\u5f20\u56fe\u4e2d\u6240\u793a\u3002 \u6700\u540e\uff0c\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u8bad\u7ec3\u5b8c\u6210\u7684\u8fd9\u79cd CNN-BIG-LSTM \u6a21\u578b\uff0c\u600e\u4e48\u7528\u5462\uff1f\u5176\u5b9e\uff0c\u5982\u679c\u628a\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u7ed3\u679c\u62ff\u51fa\u6765\uff0c\u8fd9\u91cc\u5927\u6982\u6709\u4e09\u5c42\u7684\u8bcd\u5411\u91cf\u53ef\u4ee5\u5229\u7528\uff1a\u8f93\u5165\u5c42 CNN \u7684\u8f93\u51fa\uff0c\u5373\u662f LSTM \u7684\u8f93\u5165\u5411\u91cf\uff0c\u7b2c\u4e00\u5c42 LSTM \u7684\u8f93\u51fa\u548c\u7b2c\u4e8c\u5c42\u7684\u8f93\u51fa\u5411\u91cf\u3002 \u53c8\u56e0\u4e3a LSTM \u662f\u53cc\u5411\u7684\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u8bcd\uff0c\u5982\u679c LSTM \u7684\u5c42\u6570\u4e3a L \u7684\u8bdd\uff0c\u603b\u5171\u53ef\u83b7\u5f97\u7684\u5411\u91cf\u4e2a\u6570\u4e3a 2L+1\uff0c\u8868\u793a\u5982\u4e0b\uff1a $$ R_{k}=x_{k}, \\overrightarrow{\\mathbf{h}} k, j, \\overleftarrow{\\mathbf{h}} k, j, j=[1,2, \\ldots, L] $$ \u5230\u8fd9\u91cc\u8fd8\u53ea\u662f\u628a ELMo \u7684\u5411\u91cf\u7ed9\u62bd\u53d6\u51fa\u6765\u4e86\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u53ef\u4ee5\u6839\u636e\u4e0b\u9762\u7684\u5f0f\u5b50\u5f97\u5230\u5b83\u7684\u5411\u91cf\uff0c\u5176\u4e2d \u03b3 \u662f\u4e00\u4e2a scale \u56e0\u5b50\uff0c\u52a0\u5165\u8fd9\u4e2a\u56e0\u5b50\u4e3b\u8981\u662f\u60f3\u5c06 ELMo \u7684\u5411\u91cf\u4e0e\u5177\u4f53\u4efb\u52a1\u7684\u5411\u91cf\u5206\u5e03\u62c9\u5e73\u5230\u540c\u4e00\u4e2a\u5206\u5e03\u6c34\u5e73\uff0c\u8fd9\u65f6\u5019\u4fbf\u9700\u8981\u8fd9\u4e48\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u4e86\u3002 \u53e6\u5916\uff0c sj \u4fbf\u662f\u9488\u5bf9\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u5229\u7528\u4e00\u4e2a softmax \u7684\u53c2\u6570\u6765\u5b66\u4e60\u4e0d\u540c\u5c42\u7684\u6743\u503c\u53c2\u6570\uff0c\u56e0\u4e3a\u4e0d\u540c\u4efb\u52a1\u9700\u8981\u7684\u8bcd\u8bed\u610f\u4e49\u7c92\u5ea6\u4e5f\u4e0d\u4e00\u81f4\uff0c \u4e00\u822c\u8ba4\u4e3a\u6d45\u5c42\u7684\u8868\u5f81\u6bd4\u8f83\u503e\u5411\u4e8e\u53e5\u6cd5\uff0c\u800c\u9ad8\u5c42\u8f93\u51fa\u7684\u5411\u91cf\u6bd4\u8f83\u503e\u5411\u4e8e\u8bed\u4e49\u4fe1\u606f \u3002\u56e0\u6b64\u901a\u8fc7\u4e00\u4e2a softmax \u7684\u7ed3\u6784\u8ba9\u4efb\u52a1\u81ea\u52a8\u53bb\u5b66\u4e60\u5404\u5c42\u4e4b\u95f4\u7684\u6743\u91cd\uff0c\u81ea\u7136\u4e5f\u662f\u6bd4\u8f83\u5408\u7406\u7684\u505a\u6cd5\u3002 $$ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o} k^{t a s k}=\\gamma^{t a s k} \\sum j=0^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j} $$ \u524d\u9762\u6211\u4eec\u8bf4\u8fc7\uff0c\u65e0\u8bba\u662f\u57fa\u4e8e\u4f20\u7edf\u7edf\u8ba1\u7684 N-gram \u8fd8\u662f\u666e\u901a\u795e\u7ecf\u7f51\u7edc\u7684 NNLM \u7ed3\u6784\uff0c\u90fd\u4f1a\u6709\u4e00\u4e2a\u5f88\u4e25\u91cd\u7684\u95ee\u9898\uff0c**\u90a3\u5c31\u662f\u8ba1\u7b97\u590d\u6742\u5ea6\u968f\u7740\u4e0a\u4e0b\u6587\u7a97\u53e3 N \u5927\u5c0f\u7684\u589e\u5927\u6025\u5267\u4e0a\u5347\u3002**\u5176\u4e2d N-gram \u662f\u6307\u6570\u4e0a\u5347\uff0cNNLM \u662f\u4ee5 |d| \u00d7 N \u7684\u5f62\u5f0f\u589e\u52a0\uff0c|d| \u662f\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\uff0c\u867d\u7136 NNLM \u5df2\u7ecf\u6539\u89c2\u4e86\u5f88\u591a\uff0c\u4f46\u4f9d\u7136\u662f\u4e00\u4e2a\u659c\u7387\u5f88\u5927\u7684\u7ebf\u6027\u589e\u52a0\u5173\u7cfb\u3002 \u540e\u6765 CBOW \u548c Skip-gram \u4ee5\u53ca\u518d\u540e\u6765\u7684 GloVe \u7ec8\u4e8e\u505a\u5230\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6\u4e0e\u6240\u9009\u7a97\u53e3\u5927\u5c0f\u65e0\u5173\uff0c \u53ea\u4e0e\u8bcd\u5178\u5927\u5c0f\u548c\u8bcd\u5411\u91cf\u7ef4\u5ea6\u76f8\u5173 \u3002 \u4e0d\u8fc7\u9700\u8981\u6307\u51fa\u7684\u662f\uff0c\u8fd9\u91cc\u8ba8\u8bba\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u53ea\u662f\u9884\u6d4b\u5355\u4e2a\u8bcd\u7684\u8ba1\u7b97\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5982\u679c\u662f\u6c42\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u8bdd\uff0c\u8fd8\u662f\u907f\u514d\u4e0d\u4e86\u8981\u4e0e\u5e8f\u5217\u957f\u5ea6\u76f8\u5173\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\u548c\u4e0b\u9762\u8981\u5206\u6790\u7684 RNN \u5728\u6a2a\u5411\u7684\u65f6\u95f4\u5e8f\u5217\u4e0a\u6709\u4e00\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5176\u539f\u56e0\u662f\u4e00\u81f4\u7684\u3002\u5e76\u4e14\u8fd1\u4e9b\u5e74\u5f97\u76ca\u4e8e\u786c\u4ef6\u6301\u7eed\u7684\u6469\u5c14\u5b9a\u5f8b\u53d1\u6325\u5a01\u529b\uff0c\u673a\u5668\u7684\u8ba1\u7b97\u80fd\u529b\u4e5f\u6709\u957f\u8db3\u7684\u8fdb\u6b65\uff0c\u56e0\u6b64\u5728\u8fd9\u4e24\u65b9\u9762\u56e0\u7d20\u7684\u4f5c\u7528\u4e0b\uff0c\u4ee5 word2vec \u4e3a\u4ee3\u8868\u7684\u65b9\u6cd5\u5927\u653e\u5149\u5f69\uff0c\u5f15\u9886\u4e86\u4e00\u6ce2 NLP \u7684\u53d1\u5c55\u6d6a\u6f6e\u3002 \u7136\u800c\uff0c\u5728\u4eca\u5929\u770b\u6765\uff0c\u65e0\u8bba word2vec \u4e2d\u7684\u6a21\u578b\u3001\u8fd8\u662f GloVe \u7684\u6a21\u578b\uff0c\u90fd\u8fc7\u4e8e\u7b80\u5355\uff0c\u5b83\u4eec\u90fd\u53d7\u9650\u4e8e\u6240\u4f7f\u7528\u7684\u6a21\u578b\u8868\u5f81\u80fd\u529b\uff0c\u67d0\u79cd\u610f\u4e49\u4e0a\u90fd\u53ea\u80fd\u5f97\u5230\u6bd4\u8f83\u504f\u4e0a\u4e0b\u6587\u5171\u73b0\u610f\u4e49\u4e0a\u7684\u8bcd\u5411\u91cf\uff0c\u5e76\u4e14\u4e5f\u5f88\u5c11\u8003\u8651\u8fc7\u8bcd\u5e8f\u5bf9\u4e8e\u8bcd\u7684\u610f\u4e49\u7684\u5f71\u54cd\uff08\u6bd4\u5982 CBOW \u4ece\u5176\u540d\u79f0\u6765\u770b\u5c31\u662f\u4e00\u4e2a bag-of-words\uff0c\u5728\u6a21\u578b\u7684\u8f93\u5165\u4e2d\u6ca1\u6709\u8bcd\u5e8f\u7684\u6982\u5ff5\uff09\u3002 \u7406\u8bba\u4e0a\uff0cRNN \u7ed3\u6784\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u8ddf\u4e24\u4e2a\u65b9\u5411\u4e0a\u90fd\u6709\u5173\u7cfb\uff0c\u4e00\u65b9\u9762\u662f\u7eb5\u5411\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u662f\u6a2a\u5411\u4e0a\u3002 \u7eb5\u5411\u4e0a\u4e3b\u8981\u662f RNN \u7ed3\u6784\u672c\u8eab\u7684\u65f6\u95f4\u590d\u6742\u5ea6 \uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u53ea\u4e0e RNN \u7ed3\u6784\u5185\u90e8\u7684 hidden state \u7ef4\u5ea6\u4ee5\u53ca\u6a21\u578b\u7ed3\u6784\u7684\u590d\u6742\u5ea6\uff0c\u5728 ELMo \u4e2d\u7684\u8bdd\u8fd8\u8ddf\u8bcd\u5178\u5927\u5c0f\u76f8\u5173\uff08\u56e0\u4e3a\u6700\u540e\u4e00\u5c42\u8fd8\u662f\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u4ee5\u53ca\u8f93\u5165\u4e5f\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f\u7684 loop up \u64cd\u4f5c\uff09\u3002 \u5728\u6a2a\u5411\u4e0a\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u5c31\u4e3b\u8981\u662f\u53d7\u5236\u4e8e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6 \uff0c\u800c RNN \u7ed3\u6784\u672c\u8eab\u56e0\u4e3a\u5728\u65f6\u95f4\u5e8f\u5217\u4e0a\u5171\u4eab\u53c2\u6570\uff0c\u5176\u81ea\u8eab\u8ba1\u7b97\u590d\u6742\u5ea6\u8fd9\u4e00\u90e8\u5206\u4e0d\u53d8\uff0c\u56e0\u800c\u603b\u7684 ELMo \u7ed3\u6784\u8ba1\u7b97\u590d\u6742\u5ea6\u4e3b\u8981\u6709\u8bcd\u5178\u5927\u5c0f\u3001\u9690\u85cf\u5c42\u8f93\u51fa\u7ef4\u5ea6\u5927\u5c0f\u3001\u6a21\u578b\u7684\u7ed3\u6784\u590d\u6742\u5ea6\u4ee5\u53ca\u6700\u540e\u7684\u8f93\u5165\u5e8f\u5217\u957f\u5ea6\u3002\u524d\u4e09\u8005\u53ef\u4ee5\u8ba4\u4e3a\u548c\u4e4b\u524d\u7684\u6a21\u578b\u4fdd\u6301\u4e00\u81f4\uff0c\u6700\u540e\u7684\u8f93\u5165\u5e8f\u5217\u957f\u5ea6\uff0c\u4e5f\u53ea\u662f\u4e0e\u5176\u4fdd\u6301\u7ebf\u6027\u5173\u7cfb\uff0c\u867d\u7136\u7cfb\u6570\u662f\u5355\u4e2a RNN \u5355\u5143\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u659c\u7387\u4f9d\u7136\u5f88\u5927\uff08\u901a\u5e38 RNN \u7ed3\u6784\u7684\u8bad\u7ec3\u90fd\u6bd4\u8f83\u8d39\u65f6\uff09\uff0c\u4f46\u662f\u5728\u673a\u5668\u6027\u80fd\u63d0\u5347\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u90e8\u5206\u81f3\u5c11\u4e0d\u662f\u963b\u788d\u8bcd\u5411\u91cf\u6280\u672f\u53d1\u5c55\u7684\u6700\u5173\u952e\u7684\u56e0\u7d20\u4e86\u3002 \u56e0\u6b64\uff0c\u5728\u65b0\u7684\u65f6\u4ee3\u4e0b\uff0c\u673a\u5668\u6027\u80fd\u5f97\u5230\u66f4\u8fdb\u4e00\u6b65\u63d0\u5347\u7684\u80cc\u666f\u4e0b\uff0c\u7b97\u6cd5\u4eba\u5458\u90fd\u6025\u9700\u4e00\u79cd\u80fd\u591f\u63ed\u793a\u65e0\u8bba\u8bcd\u8fd8\u662f\u53e5\u5b50\u66f4\u6df1\u5c42\u8bed\u4e49\u7684\u65b9\u6cd5\u51fa\u73b0\uff0c\u6211\u60f3 ELMo \u6b63\u662f\u987a\u5e94\u4e86\u8fd9\u79cd\u65f6\u4ee3\u7684\u9700\u8981\u800c\u534e\u4e3d\u8bde\u751f\u3002 ELMo \u7684\u601d\u60f3\u8db3\u591f\u7b80\u5355\uff0c\u76f8\u6bd4\u5b83\u7684\u524d\u8f88\u4eec\uff0c\u53ef\u4ee5\u8bf4 ELMo \u5e76\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u521b\u65b0\uff0c\u8fde\u6a21\u578b\u4e5f\u57fa\u672c\u662f\u5f15\u7528\u548c\u62fc\u63a5\u522b\u4eba\u7684\u5de5\u4f5c \uff0c\u5b83\u7684\u601d\u60f3\u5728\u5f88\u591a\u5e74\u524d\u5c31\u5df2\u7ecf\u6709\u4eba\u5728\u7528\uff0c\u5e76\u6ca1\u6709\u7279\u522b\u65b0\u5947\u7684\u5730\u65b9\u3002 \u8fd9\u4f3c\u4e4e\u4ece\u53cd\u9762\u8bc1\u660e\u4e86\u771f\u6b63\u6f02\u4eae\u7684\u5de5\u4f5c\u4ece\u6765\u4e0d\u662f\u7a81\u51fa\u5404\u81ea\u7684\u6a21\u578b\u6709\u591a\u4e48\u7eda\u4e3d\uff0c\u53ea\u6709\u65e0\u5176\u4ed6\u4eae\u70b9\u7684\u8bba\u6587\uff0c\u624d\u9700\u8981\u4f9d\u9760\u63cf\u6479\u4e86\u9ad8\u6e05\u8db3\u591f\u559c\u4eba\u773c\u7403\u7684\u56fe\u7247\u53bb\u5438\u5f15\u8bc4\u5ba1\u4eba\u7684\u6ce8\u610f\u529b\u3002\u56e0\u6b64\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u53bb\u770b\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u5f97\u51fa\u4e00\u4e2a\u557c\u7b11\u7686\u975e\u7684\u7ed3\u8bba\uff1a\u8bba\u6587\u7684\u6f02\u4eae\u7a0b\u5ea6\u4e0e\u8bba\u6587\u56fe\u7684\u6f02\u4eae\u7a0b\u5ea6\u5448\u53cd\u6bd4\u3002 \u4f46\u540c\u65f6\u5b83\u7684\u6548\u679c\u53c8\u8db3\u591f\u60ca\u8273\uff0c\u5b83\u7684\u51fa\u73b0\uff0c\u5728 2018 \u5e74\u521d\uff0c\u8fd9\u4e2a\u4e5f\u8bb8\u5728 NLP \u5386\u53f2\u4e0a\u5e76\u6ca1\u6709\u591a\u4e48\u663e\u773c\u7684\u5e74\u5934\uff0c\u6380\u8d77\u4e86\u4e00\u9635\u4e0d\u5c0f\u7684\u6ce2\u6f9c\uff0c\u81f3\u5c11\u5728 6 \u9879 NLP \u4efb\u52a1\u4e0a\u6a2a\u626b\u5f53\u65f6\u7684\u6700\u597d\u7ed3\u679c\uff0c\u5305\u62ec question answering(SQuAD), textual entailment(SNLI), semantic role labelling(SRL), named entity extraction(NER), coreference resolution(Coref), and sentiment analysis(SST-5)\u3002 \u800c\u540e\u6765\u7684\u6545\u4e8b\u4ee5\u53ca\u53ef\u9884\u89c1\u7684\u5c06\u6765\u91cc\uff0c\u8fd9\u6216\u8bb8\u4ec5\u4ec5\u53ea\u662f\u4e00\u4e2a\u5f00\u59cb\uff0c\u5c31\u5982\u5c71\u6d2a\u6d77\u5578\u524d\u7684\u4e00\u6735\u6e05\u79c0\u7684\u6d9f\u6f2a\u3002 4.4 ULMFit \u00b6 \u5dee\u4e0d\u591a\u548cELMo\u540c\u671f\uff0c\u53e6\u4e00\u4e2a\u540c\u6837\u975e\u5e38\u60ca\u8273\u7684\u5de5\u4f5c\u4e5f\u88ab\u63d0\u51fa\u6765\uff0c\u8fd9\u4e2a\u56e2\u961f\u662f\u81f4\u529b\u4e8e\u5c06\u6df1\u5ea6\u5b66\u4e60\u666e\u53ca\u548c\u6613\u7528\u7684Fast AI\uff0c\u800c\u8bba\u6587\u7684\u4e24\u4f4d\u5171\u540c\u4f5c\u8005\u4e4b\u4e00\u7684Jeremy Howard\uff0c\u5176\u5b9e\u5c31\u662fFastAI\u7684\u521b\u59cb\u4eba\uff0c\u662fKaggle\u4e4b\u524d\u7684president\u548c\u9996\u5e2d\u79d1\u5b66\u5bb6\uff0c\u5e76\u4e14\u4eb2\u81ea\u53c2\u4e0e\u8fc7Kaggle\u4e0a\u7684\u5f88\u591a\u6bd4\u8d5b\uff0c\u957f\u671f\u6392\u5728\u6392\u884c\u699c\u7684\u7b2c\u4e00\u3002\u5728\u4ed6\u4eec\u7684\u8bba\u6587\u300aUniversal Language Model Fine-tuning for Text Classification\u300b\u4e2d\uff0c\u4ed6\u4eec\u63d0\u51fa\u4e86ULMFit\u7ed3\u6784\uff0c\u5176\u5b9e\u8fd9\u672c\u8d28\u4e0a\u4ed6\u4eec\u63d0\u51fa\u7684\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5177\u4f53\u7684\u67d0\u79cd\u7ed3\u6784\u6216\u6a21\u578b\uff0c\u53ea\u4e0d\u8fc7\u6b63\u5982\u8bba\u6587\u6807\u9898\u6240\u8a00\uff0c\u4ed6\u4eec\u4e3b\u8981\u628a\u5b83\u5e94\u7528\u5728\u4e86\u6587\u672c\u5206\u7c7b\u7684\u95ee\u9898\u4e2d\u3002\u548cELMo\u76f8\u540c\u7684\u5730\u65b9\u5728\u4e8e\uff0cULMFit\u540c\u6837\u4f7f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e14\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4e3b\u8981\u4e5f\u662fLSTM\uff0c\u57fa\u672c\u7684\u601d\u8def\u4e5f\u662f\u9884\u8bad\u7ec3\u5b8c\u6210\u540e\u53bb\u5177\u4f53\u4efb\u52a1\u4e0a\u8fdb\u884cfinetune\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u5730\u65b9\u4e5f\u6709\u5f88\u591a\uff0c\u5206\u522b\u6765\u8bb2\u8bb2\u3002 \u9996\u5148\uff0cULMFit\u7684\u9884\u8bad\u7ec3\u548cfinetune\u8fc7\u7a0b\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff0c \u5206\u522b\u662f\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\uff08\u6bd4\u5982Wikitext 103\uff0c\u6709103million\u4e2a\u8bcd\uff09\u5148\u9884\u8bad\u7ec3\uff0c\u7136\u540e\u518d\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u5177\u4f53\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u91cd\u65b0\u5229\u7528\u8bed\u8a00\u6a21\u578b\u6765finetune\u4e00\u4e0b\uff08\u8fd9\u662f\u7b2c\u4e00\u6b21finetune\uff0c\u53eb\u505aLM finetune\uff09\uff0c\u800c\u540e\u518d\u6839\u636e\u5177\u4f53\u4efb\u52a1\u8bbe\u8ba1\u7684\u4e00\u4e2a\u6a21\u578b\u4e0a\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u8fd9\u4e2a\u4efb\u52a1\u6a21\u578b\u7684\u591a\u5c42\uff0c\u518d\u4e00\u6b21finetune\uff08\u8fd9\u662f\u7b2c\u4e8c\u6b21finetune\uff0c\u5982\u679c\u662f\u5206\u7c7b\u95ee\u9898\u7684\u8bdd\u53ef\u4ee5\u53eb\u505aClassifier finetune\uff09 \uff0c\u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a\uff1a \u5176\u6b21\uff0c\u6240\u4f7f\u7528\u7684\u6a21\u578b\u6765\u81ea\u4e8e 2017 \u5e74 Salesforce \u7684\u8bba\u6587 Regularizing and Optimizing LSTM Language Models \uff0c\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u4ed6\u4eec\u63d0\u51fa\u4e86 AWD-LSTM \uff0c\u6b63\u5982\u540d\u5b57\u4e2d\u6240\u63ed\u793a\u7684\uff0c\u8fd9\u4e2a\u6846\u67b6\u66f4\u591a\u7684\u662f\u4e00\u79cd\u8bad\u7ec3\u65b9\u6cd5\uff0c\u4e3b\u8981\u601d\u60f3\u5206\u4e3a\u4e24\u5927\u5757\uff0c\u5176\u4e2d Averaged SGD \u662f\u6307\u5148\u5c06\u6a21\u578b\u8bad\u7ec3\u5230\u4e00\u5b9a epoch\uff0c\u7136\u540e\u518d\u5c06\u5176\u540e\u7684\u6bcf\u4e00\u8f6e\u6743\u503c\u8fdb\u884c\u5e73\u5747\u540e\uff0c\u5f97\u5230\u6700\u7ec8\u7684\u6743\u503c\uff0c\u7528\u516c\u5f0f\u8868\u793a\u5c31\u662f\uff0c\u666e\u901a\u7684 SGD \u65b9\u6cd5\u6743\u503c\u66f4\u65b0\u8fc7\u7a0b\u4e3a\uff1a $$ w_{k+1}=w_{k}-\\gamma_{k} \\nabla f\\left(w_{k}\\right) $$ \u5176\u4e2d k \u4ee3\u8868\u8fed\u4ee3\u6b21\u6570\uff0c\u800c f \u5219\u662f loss function\uff0c\u8fd9\u5c31\u662f\u666e\u901a\u7684\u4e00\u4e2a SGD \u6743\u503c\u66f4\u65b0\u8fed\u4ee3\u5f0f\u5b50\uff0c\u90a3\u4e48 ASGD \u5219\u628a\u5b83\u53d8\u6210\u4e86\uff1a $$ w=\\frac{1}{K-T+1} \\sum_{i=T}^{K} w_{i} $$ \u5176\u4e2d T \u662f\u4e00\u4e2a\u9608\u503c\uff0c\u800c K \u662f\u603b\u5171\u7684\u8fed\u4ee3\u6b21\u6570\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u628a\u8fed\u4ee3\u5230\u7b2c T \u6b21\u4e4b\u540e\uff0c\u5bf9\u8be5\u53c2\u6570\u5728\u5176\u540e\u7684\u7b2c T \u8f6e\u5230\u6700\u540e\u4e00\u8f6e\u4e4b\u95f4\u7684\u6240\u6709\u503c\u6c42\u5e73\u5747\uff0c\u4ece\u800c\u5f97\u5230\u6700\u540e\u6a21\u578b\u7684\u8be5\u53c2\u6570\u503c\u3002\u800c\u76f8\u5e94\u7684\uff0c\u666e\u901a\u7684 SGD \u5219\u662f\u76f4\u63a5\u53d6 w = wk \u4f5c\u4e3a\u6700\u540e\u6a21\u578b\u7684\u53c2\u6570\u503c\u3002 \u9664\u4e86\u4f7f\u7528 ASGD \u65b9\u6cd5\u8bad\u7ec3\u6a21\u578b\u4e4b\u5916\uff0c\u5728\u666e\u901a LSTM \u4e0a\u4e00\u4e2a\u65f6\u523b\u548c\u4e0b\u4e00\u4e2a\u65f6\u523b\u4e4b\u95f4\u7684\u9690\u85cf\u5c42\u4e4b\u95f4\u662f\u6709\u8fde\u63a5\u7684\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fde\u63a5\u901a\u8fc7\u4e00\u4e2a\u5168\u8fde\u63a5\u7684\u77e9\u9635\u76f8\u8fde\uff0c\u800c\u8fd9\u4e2a\u6a21\u578b\u5219\u7528\u4e86 DropConnect \u7684\u65b9\u6cd5\u968f\u673a drop \u6389\u4e00\u4e9b\u8fde\u63a5\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u4e00\u4e9b\u8fc7\u62df\u5408\u7684\u98ce\u9669\uff0c\u5f53\u7136\u5728\u8f93\u5165\u5c42\u5230\u9690\u85cf\u5c42\u4e4b\u95f4\u4e5f\u6709\u6b63\u5e38\u7684 dropout \u64cd\u4f5c\u3002 \u7b2c\u4e09\uff0c\u5fae\u8c03\u65b9\u6cd5\u8bbe\u8ba1\u975e\u5e38\u7cbe\u5999\u3002 \u4f5c\u8005\u63d0\u51fa\u4e86\u51e0\u79cd\u5fae\u8c03\u7684\u6280\u5de7\uff0c\u5b83\u4eec\u662f\uff1adiscriminative fine-tuning, slanted triangular learning rates \u4ee5\u53ca gradual unfreezing \uff0c\u5206\u522b\u6765\u770b\u4e00\u4e0b\u3002 discriminative fine-tune \u7684\u57fa\u672c\u601d\u60f3\u662f\u9488\u5bf9\u4e0d\u540c\u5c42\u5728\u8bad\u7ec3\u66f4\u65b0\u53c2\u6570\u7684\u65f6\u5019\uff0c\u8d4b\u4e88\u4e0d\u540c\u7684\u5b66\u4e60\u7387\u3002\u8fd9\u91cc\u7684\u51fa\u53d1\u70b9\u662f\uff0c\u5bf9\u4e8e NLP \u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6765\u8bf4\uff0c\u4e0d\u540c\u5c42\u7684\u8868\u5f81\u6709\u4e0d\u540c\u7684\u7269\u7406\u542b\u4e49\uff0c\u6bd4\u5982\u6d45\u5c42\u504f\u53e5\u6cd5\u4fe1\u606f\uff0c\u9ad8\u5c42\u504f\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e0d\u540c\u5c42\u7684\u5b66\u4e60\u7387\u4e0d\u540c\uff0c\u81ea\u7136\u5c31\u662f\u6bd4\u8f83\u5408\u7406\u7684\u4e86\u3002\u5177\u4f53\u516c\u5f0f\u5982\u4e0b\uff1a $$ \\theta_{t} {l}=\\theta_{t-1} +\\eta^{l} \\nabla_{\\theta^{l}} J(\\theta) $$ \u8fd9\u91cc\u7684 \\(\\eta^{l}\\) \u4fbf\u662f\u4e0d\u540c\u7684\u5c42 \\(l\\) \u6709\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u539f\u6587\u4e5f\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u9009\u62e9\uff1a\u5148\u6307\u5b9a\u6700\u540e\u4e00\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u7136\u540e\u6839\u636e\u4e0b\u5f0f\u5f97\u5230\u524d\u9762\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u57fa\u672c\u601d\u60f3\u662f\u8ba9\u6d45\u5c42\u7684\u5b66\u4e60\u7387\u8981\u66f4\u5c0f\u4e00\u4e9b\u3002 $$ \\eta {l-1}=\\frac{\\eta }{2.6} $$ \u800c\u5bf9\u4e8eslanted triangular learning rates\u6765\u8bf4\uff0c\u4e3b\u8981\u601d\u60f3\u4fbf\u662f\u5728finetune\u7684\u7b2c\u4e00\u9636\u6bb5\uff0c\u5e0c\u671b\u80fd\u591f\u5148\u7a33\u5b9a\u4f4f\u539f\u6765\u5df2\u7ecf\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u9009\u62e9\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684finetune\u5b66\u4e60\u7387\uff1b\u5c14\u540e\u5e0c\u671b\u80fd\u591f\u9010\u6b65\u52a0\u5927\u5b66\u4e60\u7387\uff0c\u4f7f\u5f97\u5b66\u4e60\u8fc7\u7a0b\u80fd\u591f\u5c3d\u91cf\u5feb\u901f\uff1b\u6700\u540e\uff0c\u5f53\u8bad\u7ec3\u63a5\u8fd1\u5c3e\u58f0\u65f6\uff0c\u9010\u6b65\u51cf\u5c0f\u5b66\u4e60\u7387\uff0c\u8fd9\u6837\u8ba9\u6a21\u578b\u9010\u6e10\u5e73\u7a33\u6536\u655b\uff08\u8fd9\u4e2a\u601d\u60f3\uff0c\u4e2a\u4eba\u89c9\u5f97\u5927\u6982\u501f\u9274\u4e862017\u5e74\u8c37\u6b4c\u63d0\u51faTransformer\u65f6\u7528\u5230\u7684warm up\u7684\u5b66\u4e60\u7387\u8c03\u8282\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u662f\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u5148\u5c06\u5b66\u4e60\u7387\u9010\u6b65\u589e\u5927\uff0c\u5c14\u540e\u518d\u9010\u6b65\u51cf\u5c0f\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u4e00\u4e2a\u4e09\u6bb5\u8bba\u5f0f\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u7528\u56fe\u8868\u793a\u5982\u4e0b \u53e6\u4e00\u4e2a finetune \u7684\u6280\u5de7\u662f gradual unfreezing\uff0c\u4e3b\u8981\u601d\u60f3\u662f\u628a\u9884\u8bad\u7ec3\u6a21\u578b\u5728\u65b0\u4efb\u52a1\u4e0a finetune \u65f6\uff0c\u9010\u5c42\u89e3\u51bb\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u5148 finetune \u6700\u540e\u4e00\u5c42\uff0c\u7136\u540e\u518d\u89e3\u51bb\u5012\u6570\u7b2c\u4e8c\u5c42\uff0c\u628a\u5012\u6570\u7b2c\u4e8c\u5c42\u548c\u6700\u540e\u4e00\u5c42\u4e00\u8d77 finetune\uff0c\u7136\u540e\u518d\u89e3\u51bb\u7b2c\u4e09\u5c42\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u9010\u5c42\u5f80\u6d45\u5c42\u63a8\u8fdb\uff0c\u6700\u7ec8 finetune \u6574\u4e2a\u6a21\u578b\u6216\u8005\u7ec8\u6b62\u5230\u67d0\u4e2a\u4e2d\u95f4\u5c42\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86 finetune \u8fc7\u7a0b\u80fd\u591f\u66f4\u5e73\u7a33\u3002 \u5f53\u7136\uff0c\u503c\u5f97\u63d0\u51fa\u7684\u662f\uff0c\u56e0\u4e3a ULMFiT \u4e2d\u5305\u542b\u4e86\u4e24\u6b21 finetune\uff0c\u5373\u5728\u65b0\u4efb\u52a1\u4e0a\u7528\u8bed\u8a00\u6a21\u578b finetune \u548c\u5728\u65b0\u4efb\u52a1\u4e0a finetune \u8bad\u7ec3\u4e00\u4e2a\u6700\u7ec8\u7684 task-specifi-model\uff08\u6bd4\u5982\u5206\u7c7b\u5668\uff09\u3002 \u800c\u8bba\u6587\u4e2d\u4e3b\u8981\u628a discriminative fine-tuning \u548c slanted triangular learning rates \u8fd9\u4e24\u4e2a\u6280\u5de7\u7528\u5728\u4e86\u8bed\u8a00\u6a21\u578b\u7684 finetune \u9636\u6bb5\uff0c\u628a\u6700\u540e\u4e00\u4e2a gradual unfreezing \u7684\u6280\u5de7\u5e94\u7528\u5728\u6700\u7ec8 task-specifi-model \u7684 finetune \u9636\u6bb5\u3002 \u901a\u8fc7\u4e0a\u9762\u7684\u8fd9\u4e9b\u65b9\u6cd5\uff0c**ULMFiT \u6700\u7ec8\u5728\u5206\u7c7b\u4efb\u52a1\u4e0a\u8868\u73b0\u60ca\u8273\uff0c\u5c24\u5176\u662f\u53ea\u9700\u8981 100 \u4e2a\u6807\u8bb0\u6570\u636e\uff0c\u5c31\u80fd\u591f\u5b66\u4e60\u5230\u4e00\u4e2a\u8868\u73b0\u975e\u5e38 comparable \u7684\u5206\u7c7b\u5668\u3002**\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u9884\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5bf9\u6700\u7ec8\u8868\u73b0\u8d77\u5230\u4e86\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\u3002 4.5 GPT \u00b6 \u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u8fd9\u628a\u706b\u88ab\u70b9\u71c3\u540e\uff0c\u6574\u4e2a\u4e1a\u754c\u90fd\u5728\u60ca\u547c\uff0c\u539f\u6765\u9884\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\u8fdc\u4e0d\u6b62\u5341\u5e74\u524d Bengio \u548c\u4e94\u5e74\u524d Mikolov \u53ea\u4e3a\u5f97\u5230\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u5a01\u529b\u3002 \u7136\u800c\u5f88\u5feb\u5728 2018 \u5e74 6 \u6708\uff0c\u4e0d\u518d\u5c5e\u4e8e\u201c\u94a2\u94c1\u4fa0\u201d\u9a6c\u65af\u514b\u7684 OpenAI\uff0c\u53d1\u4e86\u4e00\u4e2a\u5927\u65b0\u95fb\uff0c\u76f8\u5173\u8bba\u6587\u662f***Improving Language Understanding by Generative Pre-Training***\uff0c\u5f80\u8fd9\u628a\u706b\u52bf\u6b63\u731b\u7684\u70c8\u7130\u4e0a\u52a0\u4e86\u4e00\u5242\u731b\u6599\uff0c\u4ece\u800c\u5c06\u8fd9\u628a\u706b\u63a8\u5411\u4e86\u4e00\u4e2a\u65b0\u7684\u9ad8\u6f6e\u3002 OpenAI \u7684\u731b\u6599\u914d\u65b9\u91cc\uff0c\u7b2c\u4e00\u5242\u4e3b\u6599\u4fbf\u662f\u8c37\u6b4c\u4e8e 2017 \u5e74\u4e2d\u63d0\u51fa\u7684 Transformer*****\u6846\u67b6 \uff08*Attention Is All You Need \uff09\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5148\u6765\u5f04\u660e\u767d Transformer \u91cc\u9762\u90fd\u6709\u4ec0\u4e48\u4e1c\u897f\u3002 \u79c1\u4ee5\u4e3a\uff0cTransformer \u91cc\u6700\u4e3a\u6838\u5fc3\u7684\u673a\u5236\u662f Self-attention\uff0c\u6b63\u56e0\u4e3a Self-attention \u7684\u5b58\u5728\uff0c\u624d\u4f7f\u5f97 Transformer \u5728\u505a\u7c7b\u4f3c\u7ffb\u8bd1\u95ee\u9898\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8ba9\u5176 Encoder \u4e0d\u7528\u505a\u5e8f\u5217\u8f93\u5165\uff0c\u800c\u662f\u5c06\u6574\u4e2a\u5e8f\u5217\u4e00\u6b21\u5168\u8f93\u5165\uff0c\u5e76\u4e14\u8d85\u957f\u5e8f\u5217\u7684\u8f93\u5165\u4e5f\u53d8\u5f97\u53ef\u80fd\u3002\u800c\u5177\u4f53\u5230 Self-attention \u4e2d\uff0c\u53ef\u4ee5\u7528\u4e0b\u56fe\u8868\u793a\uff1a \u7b80\u5355\u8bf4\u6765\uff0c\u8f93\u5165\u4e3a\u53e5\u5b50\u7684\u77e9\u9635\uff0c\u5148\u5206\u522b\u901a\u8fc7\u4e09\u4e2a\u5168\u8fde\u63a5\u77e9\u9635\u5c06\u8f93\u5165\u77e9\u9635\u53d8\u5316\u4e3a\u4e09\u4e2a\u77e9\u9635\uff0c\u5206\u522b\u4e3a Q, K \u548c V\uff0c\u7136\u540e\u901a\u8fc7 Q \u548c K \u8ba1\u7b97\u5f97\u5230\u4e00\u4e9b\u6743\u503c\uff0c\u5c06\u8fd9\u4e9b\u6743\u503c\u52a0\u6743\u6c42\u548c\u5230 V \u77e9\u9635\u4e0a\uff0c\u4fbf\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u77e9\u9635\u8868\u793a\u3002 \u800c Self-attention \u4e2d\u7684\u591a\u5934\u673a\u5236\u4fbf\u662f\u5c06\u8fd9\u6837\u7684\u64cd\u4f5c\u5206\u522b\u8fdb\u884c\u591a\u6b21\uff0c\u8ba9\u53e5\u5b50\u7684\u8868\u5f81\u5145\u5206\u5b66\u4e60\u5230\u4e0d\u540c\u7684\u4fa7\u91cd\u70b9\uff0c\u6700\u7ec8\u5c06\u8fd9\u4e9b\u591a\u5934\u5b66\u4e60\u51fa\u6765\u7684\u8868\u5f81 concat \u5230\u4e00\u8d77\uff0c\u7136\u540e\u518d\u540c\u4e00\u4e2a\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u4fbf\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u53e5\u5b50\u6700\u7ec8 Self-attention \u4e0b\u65b0\u7684\u8868\u793a\u3002 \u5c06\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5934\u7684\u64cd\u4f5c\u8fc7\u7a0b\u7528\u516c\u5f0f\u8868\u793a\u5982\u4e0b\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f softmax \u662f\u9488\u5bf9\u77e9\u9635\u7684 row \u65b9\u5411\u8fdb\u884c\u64cd\u4f5c\u5f97\u5230\u7684\u3002\u6240\u4ee5\uff0c\u8bf4\u767d\u4e86\uff0c\u8fd9\u4e2a\u516c\u5f0f\u8868\u793a\u7684\u610f\u601d\u5c31\u662f\u9488\u5bf9 V \u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u52a0\u6743\u6743\u503c\u901a\u8fc7 Q \u548c K \u7684\u70b9\u4e58\u5f97\u5230\u3002 \u4e0d\u8fc7\u5176\u5b9e Self-attention \u548c\u666e\u901a attention \u673a\u5236\u5728\u5f62\u5f0f\u4e0a\u51e0\u4e4e\u5b8c\u5168\u7b49\u4ef7\u3002\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0c\u5bf9\u4e8e\u666e\u901a\u7684 attention \u673a\u5236\uff0c\u8f93\u5165\u53ef\u80fd\u6709\u591a\u4e2a\uff0c\u5e76\u4e14\u4e0b\u5f0f\u5728\u6c42\u5f97 \\(e_{ij}\\) \u4e2d\u7684 \\(v_a^T\\) \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u5c06\u5f0f\u5b50\u53f3\u8fb9\u7684\u90e8\u5206\uff08\u4e5f\u5c31\u662f attention \u7684\u8f93\u5165\uff09\u6620\u5c04\u4e3a\u4e00\u4e2a\u503c\uff0c\u4ece\u800c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u503c\u8ba1\u7b97 attention \u7684\u6743\u503c\u5927\u5c0f\u3002 \u9664\u6b64\u4e4b\u5916\uff0c\u666e\u901a attention \u548c self-attention \u5e76\u6ca1\u6709\u672c\u8d28\u4e0d\u540c\uff0c\u6700\u5927\u7684\u533a\u522b\u8fd8\u662f\u5728\u4e8e\u5728\u81ea\u6211\u8f93\u5165\u4e0a\u8ba1\u7b97 attention \u6743\u503c\u5927\u5c0f\u3002 \u5728 Transformer \u7684 Encoder \u4e2d\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u8bbe\u8ba1\uff0c\u6bd4\u5982\u52a0\u5165 position embedding\uff08\u56e0\u4e3a Transformer \u7684 Encoder \u4e2d\u4e0d\u662f\u65f6\u5e8f\u8f93\u5165\u8bcd\u5e8f\u5217\uff0c\u56e0\u6b64 position embedding \u4e5f\u662f\u4e3b\u8981\u4f4d\u7f6e\u4fe1\u606f\uff09\uff1bResidual \u7ed3\u6784\uff0c\u4f7f\u5f97\u6a21\u578b\u7684\u8bad\u7ec3\u8fc7\u7a0b\u66f4\u4e3a\u5e73\u7a33\uff1b\u6b64\u5916\u8fd8\u6709 normalization \u5c42\uff0c\u63a5\u7740\u4fbf\u662f feed forward \u5c42\uff08\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u4e24\u5c42\u7684\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u4e2d\u95f4\u52a0\u4e00\u4e2a ReLu \u7684\u6fc0\u6d3b\u51fd\u6570\uff09\u3002 Decoder \u7684\u7ed3\u6784\u4e0e\u6b64\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5728\u8fdb\u884c decode \u7684\u65f6\u5019\uff0c\u4f1a\u5c06 Encoder \u8fd9\u8fb9\u7684\u8f93\u51fa\u4f5c\u4e3a Decoder \u4e2d Self-attention \u65f6\u7684 K \u548c V\u3002 \u5bf9\u4e8e decode \u8fc7\u7a0b\uff0c\u5177\u4f53\u6765\u770b\uff0c\u5927\u81f4\u8fc7\u7a0b\u5982\u4e0b\u3002 Decoder \u5b9e\u9645\u4e0a\u8fd8\u6709\u5f88\u591a\u7ec6\u8282\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u8bad\u7ec3\u65f6 Decoder \u4e2d\u7684\u8f93\u5165\u53ef\u4ee5\u7528\u77e9\u9635\u5f62\u5f0f\u4e00\u6b21\u5b8c\u6210\u5f53\u524d\u6574\u4e2a\u5e8f\u5217\u7684 decode \u8fc7\u7a0b\uff0c\u56e0\u4e3a ground truth \u5df2\u7ecf\u63d0\u524d\u77e5\u9053\uff0c\u53ea\u9700\u505a\u597d\u6bcf\u4e2a\u8bcd\u7684 mask \u5c31\u597d\uff08\u4e3a\u4e86\u907f\u514d\u5f85\u9884\u6d4b\u7684\u8bcd\u5f71\u54cd\u5230\u5f53\u524d\u7684\u8f93\u5165\uff09\u3002 \u7136\u800c\u5728\u505a inference \u7684\u65f6\u5019\uff0cDecoder \u5fc5\u987b\u6309\u7167\u5e8f\u5217\u8f93\u5165\uff0c\u56e0\u4e3a\u5728\u751f\u6210\u6bcf\u4e00\u4e2a\u8bcd\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u5148\u751f\u6210\u5b83\u7684\u524d\u4e00\u4e2a\u8bcd\uff0c\u65e0\u6cd5\u4e00\u6b21\u5c06\u6574\u4e2a\u5e8f\u5217\u5168\u90e8\u751f\u6210\uff08\u5f53\u7136\u7406\u8bba\u4e0a\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u6548\u679c\u5e76\u4e0d\u597d\uff09\u3002 \u5728\u77e9\u9635\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\uff0c**Decoder \u4e2d\u6709\u8bb8\u591a mask \u64cd\u4f5c\uff0c\u53c2\u4e0e\u8fd0\u7b97\u7684\u4e09\u4e2a\u77e9\u9635 Q,K \u548c V \u90fd\u8981\u505a\u8bb8\u591a mask \u64cd\u4f5c\uff0c\u4e3b\u8981\u6709\u4e24\u65b9\u9762\u4f5c\u7528\uff1a**\u4e00\u65b9\u9762\u662f\u6d88\u9664\u8f93\u5165\u53e5\u5b50\u672c\u8eab\u957f\u5ea6\u4e4b\u5916\u7684 padding \u5f71\u54cd\uff0c\u53e6\u4e00\u65b9\u9762\u662f decoder \u5fc5\u987b\u8981\u6c42\u4e0d\u80fd\u63d0\u524d\u770b\u5230\u5f85\u751f\u6210\u7684\u8bcd\u3002 \u9664\u4e86 mask \u64cd\u4f5c\uff0c\u53e6\u5916\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u548c Encoder \u4e2d\u53ea\u6709\u4e00\u79cd\u7c7b\u578b Self-attention \u4e0d\u540c\u7684\u662f\uff0c Decoder \u7684 attention \u5b9e\u9645\u5305\u542b\u4e24\u90e8\u5206\uff1a \u7b2c\u4e00\u90e8\u5206\u662f\u5e26\u6709 mask \u7684 Self-attention \uff0c\u901a\u8fc7 mask \u5c06 decode \u9636\u6bb5\u7684 attention \u9650\u5b9a\u53ea\u4f1a attention \u5230\u5df2\u7ecf\u751f\u6210\u8fc7\u7684\u8bcd\u4e0a\uff0c\u56e0\u6b64\u53eb\u505a Mask Self-attention\u3002 \u7b2c\u4e8c\u90e8\u5206\u662f\u666e\u901a\u7684 Self-attention \u64cd\u4f5c \uff0c\u4e0d\u8fc7\u8fd9\u65f6\u7684 K \u548c V \u77e9\u9635\u5df2\u7ecf\u66ff\u6362\u4e3a Encoder \u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u6240\u4ee5\u672c\u8d28\u4e0a\u5e76\u975e\u4e00\u4e2a Self-attention\u3002 \u4e0b\u9762\u7684\u52a8\u56fe\u5f88\u597d\u5730\u8868\u73b0\u4e86 decoding \u8fc7\u7a0b\uff0c\u751f\u6210\u6bcf\u4e00\u4e2a\u8bcd\u7684\u65f6\u5019\uff0c\u65e2\u548c Encoder \u7684\u8f93\u51fa\u4fe1\u606f\u6709\u5173\uff0c\u4e5f\u548c\u5df2\u7ecf\u751f\u6210\u8fc7\u7684\u8bcd\u76f8\u5173\u3002 \u5927\u4f53\u4ecb\u7ecd\u5b8c Transformer \u540e\uff0c\u518d\u770b\u770b GPT \u4e2d\u662f\u600e\u4e48\u7528 Transformer \u7684\u3002\u6309\u7167\u8bba\u6587\u7684\u8bf4\u6cd5\uff0cGPT \u4f7f\u7528\u7684 Transformer \u662f\u53ea\u7528\u4e86 Decoder\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u8bed\u8a00\u6a21\u578b\u6765\u8bb2\uff0c\u786e\u5b9e\u4e0d\u9700\u8981 Encoder \u7684\u5b58\u5728\u3002 \u800c\u5177\u4f53\u6a21\u578b\uff0c\u4ed6\u4eec\u53c2\u8003\u4e86 2018 \u5e74\u65e9\u4e9b\u65f6\u5019\u8c37\u6b4c\u7684 Generating Wikipedia by Summarizing Long Sequences \uff0cGPT \u540d\u79f0\u4e2d\u7684 Generative \u4fbf\u662f\u6e90\u81ea\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e8c\u8005\u90fd\u6709\u7528\u5230\u751f\u6210\u5f0f\u65b9\u6cd5\u6765\u8bad\u7ec3\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u751f\u6210\u5f0f Decoder\u3002 \u5173\u4e8e\u8fd9\u7bc7\u8bba\u6587\u4e2d\u63d0\u5230\u7684 T-DMCA \uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a Decoder\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u7bc7\u6587\u7ae0\u4e2d\u8981\u505a\u8d85\u957f\u7684\u5e8f\u5217\u8f93\u5165\uff08\u53ef\u4ee5\u957f\u8fbe 11000 \u4e2a\u8bcd\uff09\uff0c\u4e3a\u4e86\u80fd\u591f\u9ad8\u6548\u8282\u7701\u65f6\u95f4\u548c\u5185\u5b58\u7684\u5904\u7406\u5982\u6b64\u957f\u7684\u5e8f\u5217\uff0c\u505a\u4e86\u4e00\u4e9b Memory-Compressed \u5de5\u4f5c\uff0c\u4e3b\u8981\u662f\u4e24\u65b9\u9762\uff1a \u4e00\u65b9\u9762\u662f\u628a\u4e00\u4e2a batch \u5185\u90e8\u7684\u5e8f\u5217\u6309\u957f\u5ea6\u8fdb\u884c\u5206\u7ec4\uff0c\u7136\u540e\u5206\u522b\u5728\u6bcf\u4e2a\u7ec4\u5185\u90e8\u8fdb\u884c self-attention \u64cd\u4f5c\uff0c\u907f\u514d\u5c06\u4e00\u4e9b\u5f88\u77ed\u7684\u53e5\u5b50\u4e5f padding \u5230\u6574\u4e2a\u8bed\u6599\u7684\u6700\u5927\u957f\u5ea6\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u901a\u8fc7 CNN \u64cd\u4f5c\uff0c\u628a K \u548c V \u538b\u7f29\u5230\u5e8f\u5217\u957f\u5ea6\u66f4\u5c0f\u7684\u4e00\u4e2a\u77e9\u9635\uff0c\u540c\u65f6\u4fdd\u6301 Q \u4e0d\u53d8\uff0c\u8fd9\u6837\u4e5f\u80fd\u5728\u76f8\u5f53\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u8ba1\u7b97\u91cf\u3002 \u9664\u4e86\u8fd9\u4e9b\u5177\u4f53\u7684\u6a21\u578b\u7ec6\u8282\u5916\uff0cGPT \u672c\u8d28\u4e0a\u5c31\u662f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u6765\u4f18\u5316\u548c\u8bad\u7ec3 Transformer-Decoder\uff0c\u8fd9\u548c\u4e0a\u6587\u63d0\u5230\u8fc7\u7684\u8bed\u8a00\u6a21\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u9884\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u4fbf\u53ef\u4ee5\u5728\u5177\u4f53\u4efb\u52a1\u4e0a\u8fdb\u884c finetune\uff0c\u548c ULMFiT \u4e2d\u7684 finetune \u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\u7684\u65b9\u6cd5\u4e0d\u4e00\u6837\u7684\u662f\uff0cGPT \u76f4\u63a5\u628a\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u7cc5\u5408\u5230\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u4e2d\uff0c\u5982\uff1a $$ L_{3}(C)=L_{2}(C)+\\lambda L_{1}(C) $$ \u5176\u4e2d L2 \u662f task-specific \u7684\u76ee\u6807\u51fd\u6570\uff0c L1 \u5219\u662f\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u3002\u8bba\u6587\u4e2d\u8bf4\u8fd9\u79cd\u8054\u5408\u5b66\u4e60\u65b9\u5f0f\u80fd\u591f\u8ba9\u8bad\u7ec3\u6548\u679c\u66f4\u597d\u3002\u800c\u5728\u5177\u4f53\u5982\u4f55\u505a\u8fc1\u79fb\u5b66\u4e60\u7684\u65b9\u9762\uff0cGPT \u5927\u6982\u4e5f\u540c\u6837\u501f\u9274\u4e86\u4e0a\u9762\u63d0\u5230\u7684***Generating Wikipedia by Summarizing Long Sequences*** \u4e2d\u7684\u505a\u6cd5\uff0c\u975e\u5e38\u5de7\u5999\u5730\u5c06\u6574\u4e2a\u8fc1\u79fb\u5b66\u4e60\u7684\u6846\u67b6\u505a\u5230\u975e\u5e38\u7cbe\u7b80\u548c\u901a\u7528\u3002 \u5206\u7c7b\u95ee\u9898\u4e2d\uff0c\u76f4\u63a5\u5728\u539f\u5e8f\u5217\u7684\u5f00\u59cb\u548c\u672b\u5c3e\u6dfb\u52a0\u8868\u793a\u5f00\u59cb\u548c\u672b\u5c3e\u7684\u7b26\u53f7\uff0c\u5728 Text Entailment \u95ee\u9898\u4e2d\uff0c\u5c06 Premise \u548c Hypothesis \u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u5206\u9694\u7b26\u201c$\u201d\u8fde\u63a5\u8d77\u6765\u6210\u4e3a\u4e00\u4e2a\u5e8f\u5217\uff0c\u7136\u540e\u540c\u6837\u5728\u5f00\u5934\u548c\u672b\u5c3e\u6dfb\u52a0\u6807\u8bb0\u7b26\u53f7\u3002 \u6587\u672c\u76f8\u4f3c\u95ee\u9898\u4e2d\uff0c\u56e0\u4e3a\u5e8f\u5217 1 \u548c\u5e8f\u5217 2 \u6ca1\u6709\u5148\u540e\u5173\u7cfb\uff0c\u56e0\u6b64\u5c06\u5148\u540e\u5173\u7cfb\u76f8\u53cd\u7684\u4e24\u4e2a\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\u3002\u5728 Question Aswering \u4e2d\uff0c\u5c06 query \u548c\u6bcf\u4e2a\u5019\u9009\u7684 answer \u90fd\u5206\u522b\u8fde\u63a5\u6210\u4e00\u4e2a\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\uff0c\u6700\u540e\u6309\u5404\u81ea\u7684\u6253\u5206\u8fdb\u884c\u6392\u5e8f\u3002 \u56e0\u6b64\uff0c\u8fd9\u5957\u8f93\u5165\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u57fa\u672c\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u8f93\u5165\u6846\u67b6\u6765\u8868\u5f81\u8bb8\u591a\u6587\u672c\u95ee\u9898\uff08\u4ee5\u81f3\u4e8e\u540e\u6765\u7684***BERT*** \u76f4\u63a5\u501f\u7528\u4e86\u8fd9\u5957\u505a\u6cd5\uff09\u3002 \u9664\u6b64\u4e4b\u5916\uff0c\u5728\u8f93\u51fa\u5c42\uff0c\u53ea\u9700\u8981\u63a5\u5165\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u5168\u8fde\u63a5\u5c42\u6216 MLP\uff0c\u6839\u672c\u4e0d\u9700\u8981\u975e\u5e38\u590d\u6742\u7684\u6a21\u578b\u8bbe\u8ba1\u3002\u800c\u6574\u4e2a finetune \u9636\u6bb5\uff0c\u65b0\u52a0\u5165\u7684\u53c2\u6570\u6781\u5c11\uff0c\u53ea\u6709\u8f93\u51fa\u5c42\u4ee5\u53ca\u8f93\u5165\u5c42\u4e2d\u6dfb\u52a0\u7684\u4e00\u4e9b\u7279\u6b8a\u6807\u8bb0\uff08\u6bd4\u5982\u5206\u9694\u7b26\uff09\u3002 \u6b63\u662f\u56e0\u4e3a\u6709\u4e86\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u8fd9\u79cd\u901a\u7528\u5316\u8bbe\u8ba1\u8003\u8651\uff0c\u4e00\u65e6\u4e2d\u95f4\u7684 Transformer\uff08\u5f53\u7136\uff0c\u6b63\u5982\u524d\u6587\u6240\u8bf4\uff0c\u8fd9\u91cc\u7684 Transformer \u5728\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\u65f6\u53ea\u6709 Decoder \u90e8\u5206\u3002\u5728\u5c06\u5176\u5f53\u505a\u6587\u672c\u7279\u5f81\u63d0\u53d6\u5668\u7684\u65f6\u5019\uff0c\u76f8\u5e94\u7684\u4e5f\u53ef\u4ee5\u5f88\u4fbf\u5229\u7684\u5c06\u5176\u53d8\u6210 Encoder\uff09\u8868\u5f81\u80fd\u529b\u8db3\u591f\u5f3a\u5927\uff0c\u8fc1\u79fb\u5b66\u4e60\u5728 NLP \u4efb\u52a1\u4e2d\u7684\u5a01\u529b\u4e5f\u4f1a\u53d8\u5f97\u66f4\u4e3a\u5f3a\u5927\u3002 \u679c\u4e0d\u5176\u7136\uff0cGPT \u5728\u516c\u5e03\u7684\u7ed3\u679c\u4e2d\uff0c\u4e00\u4e3e\u5237\u65b0\u4e86 12 \u9879 NLP \u4efb\u52a1\u4e2d\u7684 9 \u9879\u699c\u5355\uff0c\u6548\u679c\u4e0d\u53ef\u8c13\u4e0d\u60ca\u8273\u3002\u7136\u800c\u5bf9\u4e8e OpenAI \u6765\u8bb2\uff0cGPT \u5e95\u5c42\u6a21\u578b\u4f7f\u7528\u7684\u662f\u8c37\u6b4c\u63d0\u51fa\u7684 Tranformer\uff0c\u6b63\u662f\u4f9d\u9760\u4e86 Transformer \u7684\u5f3a\u5927\u8868\u5f81\u80fd\u529b\uff0c\u4f7f\u5f97\u6700\u7ec8\u7684\u6548\u679c\u6709\u4e86\u4e00\u4e2a\u575a\u5b9e\u7684\u57fa\u7840\u3002 **\u7136\u800c\u4ec5\u4ec5\u8fc7\u4e86\u56db\u4e2a\u6708\u4e4b\u540e\u7684 BERT \u6a2a\u7a7a\u51fa\u4e16\uff0c\u540c\u6837\u4e5f\u662f\u7528\u4e86 Transformer\uff0c\u540c\u6837\u662f\u8c37\u6b4c\uff0c\u751a\u81f3\u5f88\u591a\u601d\u60f3\u4e5f\u662f\u76f4\u63a5\u501f\u9274 GPT\u3002**GPT \u4f5c\u4e3a\u4e0e BERT \u6c14\u8d28\u6700\u4e3a\u63a5\u8fd1\u7684\u5de5\u4f5c\uff0c\u540c\u65f6\u4e5f\u662f BERT \u7684\u524d\u8f88\uff0c\u5f97\u5230\u7684\u5f85\u9047\u5dee\u522b\u5982\u6b64\u4e4b\u5927\uff0c\u4e0d\u77e5\u9053 GPT \u662f\u5426\u6709\u4e9b\u53ef\u60dc\u548c\u9057\u61be\u3002 \u76f8\u6bd4 BERT\uff0cGPT \u5e76\u6ca1\u6709\u5e26\u6765\u7279\u522b\u5de8\u5927\u7684\u53cd\u54cd\uff0c\u4ed6\u7684\u60ca\u8273\u4eae\u76f8\uff0c\u8fc5\u901f\u53d8\u4e3a\u6c34\u91cc\u7684\u4e00\u58f0\u95f7\u54cd\uff0c\u6380\u8d77\u4e86\u4e00\u9635\u6d9f\u6f2a\u540e\u8fc5\u901f\u6d88\u6563\uff0c\u5c06\u6574\u4e2a\u821e\u53f0\u8ba9\u4f4d\u4e8e\u6b63\u503c\u9752\u6625\u5149\u8273\u7167\u4eba\u7684 BERT\uff0c\u9887\u6709\u70b9\u201c\u6210\u4e5f\u8427\u4f55\u8d25\u4e5f\u8427\u4f55\u201d\u7684\u5473\u9053\u3002 4.6 BERT \u00b6 Bidirectional Encoder Representations from Transformers(BERT) \u5982\u679c\u8981\u7528\u4e00\u53e5\u65f6\u4e0b\u6b63\u6d41\u884c\u7684\u8bdd\u6765\u5f62\u5bb9 BERT \u7684\u51fa\u73b0\uff0c\u8fd9\u53e5\u8bdd\u5927\u6982\u518d\u6070\u5f53\u4e0d\u8fc7\uff1a \u4e00\u5207\u8fc7\u5f80\uff0c \u7686\u4e3a\u5e8f\u7ae0\u3002 2018 \u5e74 10 \u6708 11 \u65e5\uff0c\u8fd9\u4f3c\u4e4e\u662f\u4e2a\u7edd\u5bf9\u5e73\u51e1\u7684\u65e5\u5b50\u3002\u8bf4\u53e5\u9898\u5916\u8bdd\uff0c\u65e0\u72ec\u6709\u5076\uff0cOpenAI \u5728\u5176\u535a\u5ba2\u653e\u51fa GPT \u7684\u65f6\u95f4\u6070\u597d\u4e0d\u591a\u4e0d\u5c11\u662f 4 \u4e2a\u6574\u6708\u524d\uff0c\u5373 2018 \u5e74 6 \u6708 11 \u65e5\uff09\uff0c\u7136\u800c Google AI \u7684 Jacob Devlin \u548c\u4ed6\u7684\u5408\u4f5c\u8005\u4eec\u6084\u6084\u5730\u5728 arXiv \u4e0a\u653e\u4e0a\u4e86\u4ed6\u4eec\u7684\u6700\u65b0\u6587\u7ae0\uff0c\u540d\u4e3a BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding \u3002 \u968f\u540e\u5148\u662f\u5728 Twitter \u4e0a\u5f15\u53d1\u4e86\u4e00\u6ce2\u6d6a\u6f6e\uff0c\u540c\u6837\u662f Google AI \u56e2\u961f\u7684 Thang Luong \u5728\u5176 Twitter \u4e0a\u76f4\u8a00\u8fd9\u9879\u5de5\u4f5c\u662f\u4e00\u4e2a\u5212\u65f6\u4ee3\u7684\u5de5\u4f5c\u3002\u7136\u540e\u5728\u4e2d\u6587\u793e\u533a\u4e5f\u8fc5\u901f\u53d1\u9175\uff0c\u90a3\u51e0\u5929 NLP \u4ece\uff08\u642c\uff09\u4e1a\uff08\u7816\uff09\u4eba\u5458\u7684\u670b\u53cb\u5708\u57fa\u672c\u88ab BERT \u5237\u5c4f\uff0c\u5373\u4fbf\u65f6\u81f3\u4e00\u4e2a\u591a\u6708\u540e\u7684\u4eca\u65e5\uff0c\u8fd9\u4e00\u73b0\u8c61\u4e5f\u57fa\u672c\u4e0d\u89c1\u6d88\u9000\u7684\u8ff9\u8c61\uff0c\u51e0\u4e4e\u5927\u5bb6\u89c1\u9762\u95f2\u804a\u5f00\u53e3\u5fc5\u8c08 BERT\uff0c\u4f3c\u4e4e\u505a NLP \u7684\u5927\u53ef\u4e0d\u5fc5\u4f7f\u7528\u534e\u590f\u5149\u8f89\u707f\u70c2\u6587\u660e\u4e4b\u4e00\u7684\u201c\u5403\u8fc7\u4e86\u5417\uff1f\u201d\uff0c\u800c\u66ff\u6362\u4e3a\u4eca\u65e5\u7684\u201cBERT \u8dd1\u8d77\u6765\u4e86\u5417\uff1f\u201d\uff0c\u53ef\u89c1\u4e00\u6591\u3002 \u4e0d\u5f97\u4e0d\u8bf4\uff0cJacob \u548c\u4ed6\u7684\u5c0f\u4f19\u4f34\u4eec\u771f\u662f\u5927\u624b\u7b14\uff0c\u548c 4 \u4e2a\u6708\u524d\u4ed6\u7684\u524d\u8f88 GPT \u81f3\u5c11\u4e00\u6837\uff0c\u4e43\u81f3\u91ce\u5fc3\u66f4\u5927\u3002\u9664\u4e86 GPT \u5237\u8fc7\u7684\u90a3\u4e9b\u699c\u4e4b\u5916\uff0cBERT \u8fd8\u6dfb\u52a0\u4e86\u4e00\u9879\u4efb\u52a1 SQuAD\uff08\u8fd9\u5927\u6982\u662f\u5f53\u524d NLP \u6700\u4e3a\u706b\u70ed\u7684\u4efb\u52a1\u4e4b\u4e00\uff09\uff0c\u4e5f\u8bb8\u8fd9\u91cc\u7684\u6bcf\u4e00\u9879\u4efb\u52a1\u90fd\u53ef\u80fd\u662f\u4e00\u4e2a\u7814\u7a76\u5c0f\u7ec4\u7684\u6d3b\u547d\u672c\u94b1\uff0c\u751a\u81f3\u8fd8\u6709\u53ef\u80fd\u662f\u67d0\u4e2a\u8bc4\u6559\u6388\u804c\u79f0\u7684\u6551\u547d\u7a3b\u8349\u3002 \u7136\u800c\uff0cBERT \u4e1d\u6beb\u4e0d\u653e\u5728\u773c\u91cc\uff0c\u76f4\u63a5\u5c06\u5b83\u7684\u94c1\u8e44\u8e0f\u5165 11 \u9879 NLP \u4efb\u52a1\uff0c\u5c06\u9014\u4e2d\u76ee\u89c1\u8033\u95fb\u6240\u906d\u9047\u7684\u4e00\u5207\u8361\u5e73\u65e0\u4f59\uff0c\u7559\u7ed9\u5728\u8fd9\u4e4b\u524d\u4ecd\u5728\u82e6\u82e6\u6323\u624e\u4e8e\u67d0\u4e2a\u6392\u884c\u699c\u4e2d\u7684\u4eba\u4eec\u65e0\u5c3d\u7684\u9519\u6115\u548c\u550f\u5618\uff0c\u800c BERT \u4f3c\u4e4e\u4e0d\u66fe\u5fc3\u8f6f\u548c\u8fdf\u7591\u7247\u523b\u3002 \u5f88\u5feb\uff0c\u5927\u6982\u8fc7\u4e86\u4e0d\u5230\u4e00\u4e2a\u6708\uff0cGoogle AI \u628a\u4ed6\u4eec\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684 BERT \u6a21\u578b\u516c\u5e03\u51fa\u6765\uff0c\u5305\u62ec\u82f1\u8bed\u7684 base \u548c large \u6a21\u578b\uff0c\u53e6\u5916\u9488\u5bf9\u5176\u4ed6\u8bed\u8a00\u4e5f\u653e\u51fa\u4e86\u4e2d\u6587\uff08\u4ec5\u6709\u7684\u4e00\u4e2a\u975e\u82f1\u8bed\u7684\u5355\u4e2a\u6a21\u578b\uff09\u548c\u4e00\u4e2a 10 2\u79cd\u8bed\u8a00\u7684\u6df7\u5408\u8bed\u8a00\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u8fd9\u518d\u6b21\u89e6\u53d1\u548c\u5f15\u7206\u4e86 NLP \u754c\u7684\u96c6\u4f53\u9ad8\u6f6e\u3002 \u4e0d\u8fc7\uff0c\u4e3a\u4f55 BERT \u80fd\u5982\u6b64\u5f15\u4eba\u6ce8\u76ee\uff0c\u4e0d\u59a8\u6765\u4e00\u63a2\u7a76\u7adf\u3002\u79c1\u4ee5\u4e3a\uff0c BERT \u6700\u4e3b\u8981\u7684\u51e0\u4e2a\u7279\u5f81\u5206\u522b\u662f\uff1a \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684 Transformer\uff1b \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684 Mask-LM (Mask-Language Model)\uff1b \u5229\u7528 Next Sentence Prediction \u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f\uff1b \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86 GPT \u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97 BERT \u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u3002 \u4e3a\u4e86\u66f4\u6df1\u5165\u7406\u89e3 BERT\uff0c\u6211\u4eec\u5206\u522b\u6765\u770b\u770b\u4ed6\u7684\u8fd9\u4e9b\u7279\u5f81\u3002 \u9996\u5148\u770b\u770b BERT \u5982\u4f55\u4f7f\u7528\u53cc\u5411 Transformer\u3002\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c \u7528\u4e00\u53e5\u8bdd\u6765\u56de\u7b54\u4e3a\u4ec0\u4e48 BERT \u4f7f\u7528\u53cc\u5411 Transformer\uff1aBERT \u7528\u4e86 Transformer \u7684 Encoder \u6846\u67b6\u3002 \u4f46\u662f\uff0c\u6211\u60f3\u8fd9\u6837\u7684\u7b54\u6848\u81ea\u7136\u662f\u8981\u6263\u5206\u7684\uff0c\u66f4\u201c\u6c42\u751f\u6b32\u201d\u4e00\u70b9\u7684\u7b54\u6848\u662f\uff1a \u56e0\u4e3a Encoder \u4e2d\u7528\u4e86 Self-attention \u673a\u5236\uff0c\u800c\u8fd9\u4e2a\u673a\u5236\u4f1a\u5c06\u6bcf\u4e00\u4e2a\u8bcd\u5728\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5f97\u5230\u65b0\u7684\u8868\u5f81\u3002 \u66f4\u901a\u4fd7\u7684\u8bf4\u6cd5\u662f\u6bcf\u4e00\u4e2a\u8bcd\u5728\u7ecf\u8fc7 Self-attention\u4e4b\u540e\uff0c\u5176\u65b0\u7684\u8868\u5f81\u5c06\u4f1a\u662f\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\uff08\u5f53\u7136\u4e5f\u5305\u62ec\u5b83\u672c\u8eab\uff09\u7684\u52a0\u6743\u6c42\u548c\uff0c\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u8fbe\u5230\u4e86\u201c\u6211\u4e2d\u6709\u4f60\uff0c\u4f60\u4e2d\u6709\u6211\u201d\u7684\u5883\u754c\u3002 \u5982\u679c\u7ecf\u8fc7\u66f4\u591a\u7684 transformer \u7684 block\uff08\u610f\u5473\u7740\u7ecf\u8fc7\u66f4\u591a Self-attention\uff09\uff0c\u90a3\u4e48\u4e92\u76f8\u4ea4\u878d\u7684\u7a0b\u5ea6\u5c06\u4f1a\u66f4\u9ad8\uff0c\u7c7b\u4f3c\u4e8e BERT \u8fd9\u6837\u6df1\u7684\u7ed3\u6784\uff08Base \u6a21\u578b\u662f 12\u5c42\uff0cLarge \u6a21\u578b\u662f 24\u5c42\uff09\uff0c\u7ecf\u8fc7\u6240\u6709 block \u540e\uff0c\u5f7c\u65f6\uff0c\u9051\u8bba\u201c\u6211\u4e2d\u6709\u4f60\uff0c\u4f60\u4e2d\u6709\u6211\u201d\u4e86\uff0c\u4e00\u5207\u65e9\u5df2\u662f\u201c\u6211\u5728\u54ea\u91cc\u201d\u548c\u201c\u6211\u662f\u8c01\u201d\u8fd9\u6837\u7684\u54f2\u5b66\u5f0f\u547d\u9898\u4e86\uff0c\u4e5f\u5c31\u662f\u8fde\u201c\u4f60\u6211\u201d\u7684\u754c\u9650\u90fd\u65e9\u5df2\u6df7\u6c8c\u7684\u72b6\u6001\u4e86\u3002 \u56e0\u6b64\uff0c\u8bf4 BERT \u662f\u53cc\u5411\u7684\u8bed\u8a00\u6a21\u578b\u7ed3\u6784\uff0c\u4e0d\u4ec5\u4e1d\u6beb\u4e0d\u8fc7\u5206\uff0c\u5b83\u5b9e\u8d28\u4e0a\u662f\u4e00\u79cd\u5c06\u5e8f\u5217\u4e2d\u6bcf\u4e00\u4e2a\u8bcd\u4e4b\u95f4\u65e0\u6bd4\u4ea4\u878d\u5728\u4e00\u5757\u7684\u6a21\u578b\u3002\u66f4\u53ef\u8d35\u7684\u662f\uff0c\u4ea4\u878d\u7684\u59ff\u52bf\u8fd8\u53ef\u4ee5\u591a\u79cd\u591a\u6837\uff0c\u8fd9\u53ef\u4ece Large \u7248\u672c BERT \u7684\u591a\u5934\u673a\u5236\u4e2d Head \u4e2a\u6570\u591a\u8fbe 16 \u4e2a\uff0c\u4f53\u4f1a\u51fa\u8fd9\u79cd\u4ea4\u878d\u7684\u7a0b\u5ea6\uff0c\u53ef\u8c13\u4e1d\u4e1d\u5165\u6263\u3002 \u8fd9\u91cc\u4ec5\u7ed9\u51fa\u4e00\u4f8b\uff0c\u4e0b\u56fe\u53ea\u662f\u4e24\u4e2a head \u5b66\u4e60\u5230\u7684\u4ea4\u878d\u6a21\u5f0f\uff0c\u5982\u679c\u591a\u8fbe 16 \u4e2a head\uff0c\u8fd9\u6837\u7684\u4ea4\u878d\u6a21\u5f0f\u8fd8\u8981\u91cd\u590d 16\u6b21\uff0c\u53ef\u89c1\u4e00\u6591\u3002 \u800c\u76f8\u5e94\u7684\u5728ELMo\u4e0eGPT\u4e2d\uff0c\u5b83\u4eec\u5e76\u6ca1\u6709\u7528\u4e0a\u8fd9\u79cd\u4ea4\u878d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u5b83\u4eec\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u5355\u5411\u7684\u6a21\u578b\uff0cELMo\u7a0d\u5fae\u597d\u4e00\u70b9\uff0c\u5c06\u4e24\u4e2a\u5355\u5411\u6a21\u578b\u7684\u4fe1\u606fconcat\u8d77\u6765\uff0c GPT\u5219\u53ea\u7528\u4e86\u5355\u5411\u6a21\u578b\uff0c\u8fd9\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709\u7528\u4e0aTransformer Encoder\uff0c\u53ea\u7528\u4e86Decdoer\u7684\u5929\u751f\u57fa\u56e0\u51b3\u5b9a\u7684\uff0c\u5176\u5b9e\uff0c\u5f88\u591a\u4eba\u5c31\u628a\u8fd9\u79cdleft-to-right\u7684Transformer\u6846\u67b6\u53eb\u505aDecoder\uff0c\u56e0\u4e3a\u4e8b\u5b9e\u4e0aDecoder\u5c31\u662f\u5982\u6b64\uff08\u5177\u4f53\u505a\u7684\u65f6\u5019\u9700\u8981\u63d0\u524d\u628a\u672a\u6765\u5f85\u751f\u6210\u7684\u8bcd\u505a\u597dmask\uff0c\u7ec6\u8282\u4e0a\u901a\u8fc7\u4e0a\u4e09\u89d2\u77e9\u9635\u6765\u5b9e\u73b0\uff09\uff0c\u8fd9\u4e5f\u662fOpenAI\u628a\u4ed6\u4eec\u7684\u6a21\u578b\u53eb\u505a\"Generative\"\u7684\u539f\u56e0\u6240\u5728\u3002 \u7136\u800c\uff0c\u4f7f\u7528\u53cc\u5411Transformer\u4f1a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6b63\u5982\u4e0a\u9762\u7684\u5206\u6790\uff0c\u5373\u4fbf\u5bf9\u4e8eBase\u7248BERT\u6765\u8bf4\uff0c\u7ecf\u8fc712\u4e2ablock\uff0c\u6bcf\u4e00\u4e2ablock\u5185\u90e8\u90fd\u670912\u4e2a\u591a\u5934\u6ce8\u610f\u529b\u673a\u5236\uff0c\u5230\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\uff0c\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u4fe1\u606f\uff0c\u65e9\u5df2\u878d\u5408\u4e86\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\u7684\u4fe1\u606f\uff0c\u800c\u666e\u901a\u7684\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u662f\u901a\u8fc7\u67d0\u4e2a\u8bcd\u7684\u4e0a\u4e0b\u6587\u8bed\u5883\u9884\u6d4b\u5f53\u524d\u8bcd\u7684\u6982\u7387\uff0c\u5982\u679c\u76f4\u63a5\u628a\u8fd9\u4e2a\u5957\u7528\u5230Transformer\u7684Encoder\u4e2d\uff0c\u4f1a\u53d1\u73b0\u5f85\u9884\u6d4b\u7684\u8f93\u51fa\u548c\u5e8f\u5217\u8f93\u5165\u5df2\u7ecf\u7cc5\u5408\u5728\u4e00\u5757\u4e86\uff0c\u8bf4\u767d\u4e86\u5c31\u662fEncoder\u7684\u8f93\u5165\u5df2\u7ecf\u5305\u542b\u4e86\u6b63\u786e\u7684\u76d1\u7763\u4fe1\u606f\u4e86\uff0c\u76f8\u5f53\u4e8e\u7ed9\u6a21\u578b\u6cc4\u9898\u4e86\uff0c\u5982\u6b64\u8bf4\u6765\u666e\u901a\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u65e0\u6cd5\u76f4\u63a5\u5957\u7528\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u89e3\u51b3Self-attention\u4e2d\u5e26\u6765\u4e86\u8868\u5f81\u6027\u80fd\u5353\u8d8a\u7684\u53cc\u5411\u673a\u5236\uff0c\u5374\u53c8\u540c\u65f6\u5e26\u6765\u4e86\u4fe1\u606f\u6cc4\u9732\u7684\u8fd9\u4e00\u95ee\u9898\uff1f BERT\u7684\u4f5c\u8005\u5f88\u5feb\u8054\u60f3\u5230\u4e86\uff0c\u5982\u679c\u6211\u628a\u539f\u6765\u8981\u9884\u6d4b\u6574\u4e2a\u53e5\u5b50\u7684\u8f93\u51fa\uff0c\u6539\u4e3a\u53ea\u9884\u6d4b\u8fd9\u4e2a\u53e5\u5b50\u4e2d\u7684\u67d0\u4e2a\u8bcd\uff0c\u5e76\u4e14\u628a\u8f93\u5165\u4e2d\u8fd9\u4e2a\u8bcd\u6240\u5728\u4f4d\u7f6e\u6316\u7a7a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c82\u4e0d\u5c31\u4e0d\u4f1a\u5b58\u5728\u6cc4\u9732\u771f\u9898\u7684\u95ee\u9898\u4e86\uff1fJacob\u662f\u8fd9\u6837\u60f3\u7684\uff08\u5b9e\u9645\u4e0a\u662f\u53c2\u8003\u4e86\u5f88\u65e9\u4e4b\u524d\u63d0\u51fa\u7684Cloze\u95ee\u9898\uff09\uff0c\u8fd9\u4f4d\u4ee5\u5355\u4eba\u5f92\u624b\u642d\u5efa\u5927\u5de5\u7a0b\u8457\u79f0\u7684\u725b\u4eba\uff0c\u884c\u52a8\u529b\u8d85\u5f3a\uff0c\u7acb\u9a6c\u5c31\u628a\u8fd9\u4e00\u65b9\u6cd5\u5438\u6536\u548c\u5b9e\u73b0\u5230BERT\u4e2d\uff0c\u4ed6\u4eec\u7684\u60f3\u6cd5\u4e5f\u7279\u522b\u7b80\u5355\u3002 \u8f93\u5165\u5e8f\u5217\u4f9d\u7136\u548c\u666e\u901aTransformer\u4fdd\u6301\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u628a\u6316\u6389\u7684\u4e00\u4e2a\u8bcd\u7528\"[MASK]\"\u66ff\u6362 Transformer\u7684Encoder\u90e8\u5206\u6309\u6b63\u5e38\u8fdb\u884c \u8f93\u51fa\u5c42\u5728\u88ab\u6316\u6389\u7684\u8bcd\u4f4d\u7f6e\uff0c\u63a5\u4e00\u4e2a\u5206\u7c7b\u5c42\u505a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5f97\u5230\u88abmask\u6389\u7684\u8bcd\u6982\u7387\u5927\u5c0f \u6b63\u662f\u56e0\u4e3a\u52a0\u4e86mask\uff0c\u56e0\u6b64BERT\u624d\u628a\u8fd9\u79cd\u65b9\u6cd5\u53eb\u505aMasked-LM\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a \u800c\u8fd9\u5c31\u76f4\u63a5\u628a\u666e\u901a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u751f\u6210\u95ee\u9898\uff08\u6b63\u5982GPT\u4e2d\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u751f\u6210\u95ee\u9898\u4e00\u6837\uff0c\u867d\u7136\u5176\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5e8f\u5217\u751f\u6210\u95ee\u9898\uff09\uff0c\u53d8\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5e76\u4e14\u4e5f\u76f4\u63a5\u89e3\u51b3\u4e86Encoder\u4e2d\u591a\u5c42Self-attention\u7684\u53cc\u5411\u673a\u5236\u5e26\u6765\u7684\u6cc4\u5bc6\u95ee\u9898\uff08\u5355\u5c42Self-attention\u662f\u771f\u53cc\u5411\uff0c\u4f46\u4e0d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff0c\u53ea\u6709\u591a\u5c42\u7d2f\u52a0\u7684Self-attention\u624d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff09\uff0c\u4f7f\u5f97\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u771f\u53cc\u5411\u673a\u5236\u53d8\u4e3a\u73b0\u5b9e\u3002 \u4e0d\u8fc7\uff0cBERT\u9488\u5bf9\u5982\u4f55\u505a\u201c[MASK]\u201d\uff0c\u505a\u4e86\u4e00\u4e9b\u66f4\u6df1\u5165\u7684\u7814\u7a76\uff0c\u5b83\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9009\u53d6\u8bed\u6599\u4e2d\u6240\u6709\u8bcd\u768415%\u8fdb\u884c\u968f\u673amask \u9009\u4e2d\u7684\u8bcd\u572880%\u7684\u6982\u7387\u4e0b\u88ab\u771f\u5b9emask \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u800c\u88ab\u968f\u673a\u66ff\u6362\u6210\u5176\u4ed6\u4e00\u4e2a\u8bcd \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u4ecd\u7136\u4fdd\u7559\u539f\u6765\u771f\u5b9e\u7684\u8bcd \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff0cBERT \u4e5f\u7ed9\u51fa\u4e86\u8db3\u591f\u611f\u6027\u7684\u89e3\u91ca\u3002\u5bf9\u4e8e\u8981\u505a mask\uff0c\u8fd9\u4e2a\u539f\u56e0\u4e0a\u9762\u5df2\u7ecf\u5206\u6790\u4e86\uff0c\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u53cc\u5411\u673a\u5236\u7684\u6cc4\u5bc6\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\uff1b\u800c\u4e3a\u4ec0\u4e48\u8fd8\u8981\u6709\u4e00\u90e8\u5206\u6982\u7387\u4e0d\u505a\u771f\u6b63\u7684 mask\uff0c\u800c\u662f\u8f93\u5165\u4e00\u4e2a\u5b9e\u9645\u7684\u8bcd\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u5c3d\u91cf\u8ba9\u8bad\u7ec3\u548c finetune \u65f6\u8f93\u5165\u4fdd\u6301\u4e00\u81f4\uff0c\u56e0\u4e3a finetune \u8f93\u5165\u4e2d\u662f\u6ca1\u6709\u201c[MASK]\u201d\u6807\u8bb0\u7684\u3002 \u5bf9\u4e8e\u4fdd\u7559\u4e3a\u539f\u6765\u7684\u771f\u5b9e\u8bcd\uff0c\u4e5f\u5c31\u662f\u771f\u7684\u6709 10% \u7684\u60c5\u51b5\u4e0b\u662f\u6cc4\u5bc6\u7684\uff08\u5360\u6240\u6709\u8bcd\u7684\u6bd4\u4f8b\u4e3a 15% * 10% = 1.5%\uff09\uff0c\u4f5c\u8005\u8bf4\u8fd9\u6837\u80fd\u591f\u7ed9\u6a21\u578b\u4e00\u5b9a\u7684 bias\uff0c\u76f8\u5f53\u4e8e\u662f\u989d\u5916\u7684\u5956\u52b1\uff0c\u5c06\u6a21\u578b\u5bf9\u4e8e\u8bcd\u7684\u8868\u5f81\u80fd\u62c9\u5411\u8bcd\u7684\u771f\u5b9e\u8868\u5f81\u3002 \u7b14\u8005\u4e2a\u4eba\u7406\u89e3\u662f\uff1a\u56e0\u4e3a\u8f93\u5165\u5c42\u662f\u5f85\u9884\u6d4b\u8bcd\u7684\u771f\u5b9e embedding\uff0c\u5728\u8f93\u51fa\u5c42\u4e2d\u7684\u8be5\u8bcd\u4f4d\u7f6e\u5f97\u5230\u7684 embedding\uff0c\u662f\u7ecf\u8fc7\u5c42\u5c42 Self-attention \u540e\u5f97\u5230\u7684\uff0c\u8fd9\u90e8\u5206 embedding \u91cc\u80af\u5b9a\u591a\u5c11\u4fdd\u7559\u6709\u90e8\u5206\u8f93\u5165 embedding \u7684\u4fe1\u606f\uff0c\u800c\u8fd9\u90e8\u5206\u7684\u591a\u5c11\u5c31\u662f\u901a\u8fc7\u8f93\u5165\u4e00\u5b9a\u6bd4\u4f8b\u771f\u5b9e\u8bcd\u6240\u5e26\u6765\u7684\u989d\u5916\u5956\u52b1\uff0c\u6700\u7ec8\u4f1a\u4f7f\u5f97\u6a21\u578b\u7684\u8f93\u51fa\u5411\u91cf\u671d\u8f93\u5165\u5c42\u7684\u771f\u5b9e embedding \u6709\u4e00\u4e2a\u504f\u79fb\u3002\u5982\u679c\u5168\u7528 mask \u7684\u8bdd\uff0c\u6a21\u578b\u53ea\u9700\u4fdd\u8bc1\u8f93\u51fa\u5c42\u7684\u5206\u7c7b\u51c6\u786e\uff0c\u5bf9\u4e8e\u8f93\u51fa\u5c42\u7684\u5411\u91cf\u8868\u5f81\u5e76\u4e0d\u5173\u5fc3\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6700\u7ec8\u7684\u5411\u91cf\u8f93\u51fa\u6548\u679c\u5e76\u4e0d\u597d\u3002 \u6700\u540e\uff0cBERT \u5bf9\u9009\u4e2d\u7684\u8bcd\u5728 10% \u6982\u7387\u4e0b\u4e0d\u505a mask\uff0c\u800c\u662f\u88ab\u968f\u673a\u66ff\u6362\u6210\u4e3a\u4e00\u4e2a\u5176\u4ed6\u8bcd\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0cBERT \u4e5f\u7ed9\u51fa\u4e86\u4ed6\u4eec\u7684\u89e3\u91ca\uff1a\u56e0\u4e3a\u6a21\u578b\u4e0d\u77e5\u9053\u54ea\u4e9b\u8bcd\u662f\u88ab mask \u7684\uff0c\u54ea\u4e9b\u8bcd\u662f mask \u4e86\u4e4b\u540e\u53c8\u88ab\u66ff\u6362\u6210\u4e86\u4e00\u4e2a\u5176\u4ed6\u7684\u8bcd\uff0c\u8fd9\u4f1a\u8feb\u4f7f\u6a21\u578b\u5c3d\u91cf\u5728\u6bcf\u4e00\u4e2a\u8bcd\u4e0a\u90fd\u5b66\u4e60\u5230\u4e00\u4e2a\u5168\u5c40\u8bed\u5883\u4e0b\u7684\u8868\u5f81\uff0c\u56e0\u800c\u4e5f\u80fd\u8ba9 BERT \u83b7\u5f97\u66f4\u597d\u7684\u8bed\u5883\u76f8\u5173\u7684\u8bcd\u5411\u91cf\uff08\u8fd9\u6b63\u662f\u89e3\u51b3\u4e00\u8bcd\u591a\u4e49\u7684\u6700\u91cd\u8981\u7279\u6027\uff09\u3002 \u5176\u5b9e\u66f4\u611f\u6027\u7684\u89e3\u91ca\u662f\uff0c\u56e0\u4e3a\u6a21\u578b\u4e0d\u77e5\u9053\u54ea\u91cc\u6709\u5751\uff0c\u6240\u4ee5\u968f\u65f6\u90fd\u8981\u63d0\u5fc3\u540a\u80c6\uff0c\u4fdd\u6301\u9ad8\u5ea6\u7684\u8b66\u60d5\u3002\u6b63\u5982\u4e00\u9a6c\u5e73\u5ddd\u7684\u5927\u897f\u5317\u9ad8\u901f\u516c\u8def\uff0c\u901a\u5e38\u8ba4\u4e3a\u90fd\u662f\u8def\u7ebf\u76f4\uff0c\u8def\u9762\u72b6\u51b5\u597d\uff0c\u4f46\u5982\u679c\u6389\u4ee5\u8f7b\u5fc3\uff0c\u4e00\u65e6\u6709\u4e86\u7a81\u53d1\u60c5\u51b5\uff0c\u5f80\u5f80\u4e5f\u6700\u5bb9\u6613\u51fa\u4e8b\u6545\uff0c\u9c81\u68d2\u6027\u4e0d\u9ad8\uff1b\u800c\u53cd\u5012\u662f\u5c71\u95f4\u5c0f\u8def\uff0c\u660e\u786e\u544a\u8bc9\u4e86\u6bcf\u4e00\u4f4d\u53f8\u673a\u8def\u9762\u968f\u65f6\u90fd\u6709\u5751\uff0c\u5e76\u4e14\u6ca1\u6cd5\u8001\u8fdc\u5c31\u63d0\u524d\u77e5\u9053\uff0c\u6240\u4ee5\u5373\u4fbf\u8001\u53f8\u673a\u4e5f\u53ea\u80fd\u5c0f\u5fc3\u7ffc\u7ffc\u7684\u628a\u7a33\u65b9\u5411\u76d8\u6162\u6162\u5f00\uff0c\u8fd9\u6837\u505a\u53cd\u5012\u9c81\u68d2\u6027\u66f4\u9ad8\u3002 \u6b63\u6240\u8c13\u300a\u5de6\u4f20\u300b\u4e2d\u6240\u8a00\u201c\u5c45\u5b89\u601d\u5371\uff0c\u601d\u5219\u6709\u5907\uff0c\u6709\u5907\u65e0\u60a3\uff0c\u6562\u4ee5\u6b64\u89c4\u201d\uff0cBERT \u7684\u8fd9\u79cd\u8bbe\u8ba1\u53c8\u4f55\u5c1d\u4e0d\u662f\u201c\u5c45\u5b89\u601d\u5371\u201d\u7684\u5178\u8303\uff0cJacob \u7ed9\u51fa\u7684\u539f\u6587\u89e3\u91ca\u5982\u4e0b\uff1a The Transformer encoder does not know which words it will be asked to predict or which have been replaced by random words, so it is forced to keep a distributional contextual representation of every input token. \u7136\u800c\u53ef\u60dc\u7684\u662f\uff0cJacob \u5e76\u6ca1\u6709\u5728\u8bba\u6587\u4e2d\u505a\u66f4\u7ec6\u81f4\u7684\u5b9e\u9a8c\uff0c\u6765\u8bc1\u660e\u8fd9\u4e9b\u8a00\u8bba\u7684\u6b63\u786e\u6027\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5b58\u5728\u5176\u4ed6\u7684\u66f4\u4f18\u7684\u6bd4\u4f8b\u7ec4\u5408\u3002 \u9664\u4e86\u7528\u4e0a Mask-LM \u7684\u65b9\u6cd5\u4f7f\u5f97\u53cc\u5411 Transformer \u4e0b\u7684\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u73b0\u5b9e\uff0cBERT \u8fd8\u5229\u7528\u548c\u501f\u9274\u4e86 Skip-thoughts \u65b9\u6cd5\u4e2d\u7684\u53e5\u5b50\u9884\u6d4b\u95ee\u9898\uff0c\u6765\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u5173\u7cfb\u3002\u5177\u4f53\u505a\u6cd5\u5219\u662f\u5c06\u4e24\u4e2a\u53e5\u5b50\u7ec4\u5408\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u7ec4\u5408\u65b9\u5f0f\u4f1a\u6309\u7167\u4e0b\u9762\u5c06\u8981\u4ecb\u7ecd\u7684\u65b9\u5f0f\uff0c\u7136\u540e\u8ba9\u6a21\u578b\u9884\u6d4b\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u4e3a\u5148\u540e\u8fd1\u90bb\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u4e5f\u5c31\u662f\u4f1a\u628a\"Next Sentence Prediction\"\u95ee\u9898\u5efa\u6a21\u6210\u4e3a\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\u3002 \u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u6570\u636e\u4e2d\u6709 50% \u7684\u60c5\u51b5\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5148\u540e\u5173\u7cfb\uff0c\u800c\u53e6\u5916 50% \u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u968f\u673a\u4ece\u8bed\u6599\u4e2d\u51d1\u5230\u4e00\u8d77\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u5177\u5907\u5148\u540e\u5173\u7cfb\uff0c\u4ee5\u6b64\u6765\u6784\u9020\u8bad\u7ec3\u6570\u636e\u3002\u53e5\u5b50\u7ea7\u522b\u7684\u9884\u6d4b\u601d\u8def\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684 Skip-thoughts \u57fa\u672c\u4e00\u81f4\uff0c\u5f53\u7136\u66f4\u672c\u8d28\u7684\u601d\u60f3\u6765\u6e90\u8fd8\u662f\u6765\u81ea\u4e8e word2vec \u4e2d\u7684 skip-gram \u6a21\u578b\u3002 \u5728\u9884\u8bad\u7ec3\u9636\u6bb5\uff0c\u56e0\u4e3a\u6709\u4e24\u4e2a\u4efb\u52a1\u9700\u8981\u8bad\u7ec3\uff1aMask-LM \u548c Next Sentence Prediction\uff0c\u56e0\u6b64 BERT \u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2a Multi-task Learning\u3002 BERT\u7684\u635f\u5931\u51fd\u6570\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u6765\u81ea Mask-LM \u7684\u5355\u8bcd\u7ea7\u522b\u5206\u7c7b\u4efb\u52a1\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\u3002\u901a\u8fc7\u8fd9\u4e24\u4e2a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\uff0c\u53ef\u4ee5\u4f7f\u5f97 BERT \u5b66\u4e60\u5230\u7684\u8868\u5f81\u65e2\u6709 token \u7ea7\u522b\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u5305\u542b\u4e86\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u4fe1\u606f\u3002\u5177\u4f53\u635f\u5931\u51fd\u6570\u5982\u4e0b\uff1a $$ L\\left(\\theta, \\theta_{1}, \\theta_{2}\\right)=L_{1}\\left(\\theta, \\theta_{1}\\right)+L_{2}\\left(\\theta, \\theta_{2}\\right) $$ \u5176\u4e2d \u03b8 \u662f BERT \u4e2d Encoder \u90e8\u5206\u7684\u53c2\u6570\uff0c\u03b81 \u662f Mask-LM \u4efb\u52a1\u4e2d\u5728 Encoder \u4e0a\u6240\u63a5\u7684\u8f93\u51fa\u5c42\u4e2d\u7684\u53c2\u6570\uff0c\u03b82 \u5219\u662f\u53e5\u5b50\u9884\u6d4b\u4efb\u52a1\u4e2d\u5728 Encoder \u63a5\u4e0a\u7684\u5206\u7c7b\u5668\u53c2\u6570\u3002\u56e0\u6b64\uff0c\u5728\u7b2c\u4e00\u90e8\u5206\u7684\u635f\u5931\u51fd\u6570\u4e2d\uff0c\u5982\u679c\u88ab mask \u7684\u8bcd\u96c6\u5408\u4e3a M\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f |V| \u4e0a\u7684\u591a\u5206\u7c7b\u95ee\u9898\uff0c\u90a3\u4e48\u5177\u4f53\u8bf4\u6765\u6709\uff1a $$ L_{1}\\left(\\theta, \\theta_{1}\\right)=-\\sum_{i=1}^{M} \\log p\\left(m=m_{i} | \\theta, \\theta_{1}\\right), m_{i} \\in[1,2, \\ldots,|V|] $$ \u5728\u53e5\u5b50\u9884\u6d4b\u4efb\u52a1\u4e2d\uff0c\u4e5f\u662f\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898\u7684\u635f\u5931\u51fd\u6570\uff1a $$ L_{2}\\left(\\theta, \\theta_{2}\\right)=-\\sum_{j=1}^{N} \\log p\\left(n=n_{i} | \\theta, \\theta_{2}\\right), n_{i} \\in[I s N e x t, N o t N e x t] $$ \u56e0\u6b64\uff0c\u4e24\u4e2a\u4efb\u52a1\u8054\u5408\u5b66\u4e60\u7684\u635f\u5931\u51fd\u6570\u662f\uff1a $$ L\\left(\\theta, \\theta_{1}, \\theta_{2}\\right)=-\\sum_{i=1}^{M} \\log p\\left(m=m_{i} | \\theta, \\theta_{1}\\right)-\\sum_{j=1}^{N} \\log p\\left(n=n_{i} | \\theta, \\theta_{2}\\right) $$ \u5177\u4f53\u7684\u9884\u8bad\u7ec3\u5de5\u7a0b\u5b9e\u73b0\u7ec6\u8282\u65b9\u9762\uff0cBERT \u8fd8\u5229\u7528\u4e86\u4e00\u7cfb\u5217\u7b56\u7565\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u6613\u4e8e\u8bad\u7ec3\uff0c\u6bd4\u5982\u5bf9\u4e8e\u5b66\u4e60\u7387\u7684 warm-up \u7b56\u7565\uff08\u548c\u4e0a\u6587\u63d0\u5230\u7684 ULMFiT \u4ee5\u53ca Transformer \u4e2d\u7528\u5230\u7684\u6280\u5de7\u7c7b\u4f3c\uff09\uff0c\u4f7f\u7528\u7684\u6fc0\u6d3b\u51fd\u6570\u4e0d\u518d\u662f\u666e\u901a\u7684 ReLu\uff0c\u800c\u662f GeLu\uff0c\u4e5f\u662f\u7528\u4e86 dropout \u7b49\u5e38\u89c1\u7684\u8bad\u7ec3\u6280\u5de7\u3002 \u6b64\u5916\uff0cBERT \u4f7f\u7528\u7684\u8bed\u6599\u6bd4 GPT \u4e5f\u8981\u5927\u5f97\u591a\uff08GPT \u7528\u7684\u662f BooksCorpus\uff0c800 million \u4e2a\u8bcd\uff0cBERT \u9664\u4e86 BooksCorpus \u4e4b\u5916\uff0c\u8fd8\u52a0\u5165\u4e86 Wikipedia \u6570\u636e\u96c6\uff0c2500 million \u4e2a\u8bcd\uff0c\u603b\u5171\u6709 3.3 billion \u4e2a\u8bcd\uff09\u3002 \u6700\u540e\uff0c\u5f53 BERT \u9884\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u9488\u5bf9\u5982\u4f55\u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u8fc1\u79fb\u5230\u7279\u5b9a\u4efb\u52a1\u80cc\u666f\u4e0b\uff0cBERT \u5728 GPT \u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u8fd9\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5de5\u4f5c\u8fdb\u884c\u4e86\u66f4\u6df1\u5165\u7684\u8bbe\u8ba1\u3002\u7531\u4e8e\u4e2d\u95f4\u7684 Encoder \u5bf9\u4e8e\u6240\u6709\u4efb\u52a1\u51e0\u4e4e\u90fd\u53ef\u4ee5\u76f4\u63a5\u5229\u7528\uff0c\u56e0\u6b64\u8fd9\u90e8\u5206\u7684\u8bbe\u8ba1\u4e3b\u8981\u5206\u4e3a\u4e24\u65b9\u9762\uff1a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u3002 \u5728\u8f93\u5165\u5c42\u65b9\u9762\uff0c\u601d\u8def\u548c GPT \u57fa\u672c\u7c7b\u4f3c\uff0c\u5982\u679c\u8f93\u5165\u53ea\u6709\u4e00\u4e2a\u53e5\u5b50\uff0c\u5219\u76f4\u63a5\u5728\u53e5\u5b50\u524d\u540e\u6dfb\u52a0\u53e5\u5b50\u7684\u8d77\u59cb\u6807\u8bb0\u4f4d\u548c\u53e5\u5b50\u7684\u7ed3\u675f\u7b26\u53f7\u3002\u5728 BERT \u4e2d\uff0c\u8d77\u59cb\u6807\u8bb0\u90fd\u7528\u201c[CLS]\u201d\u6765\u8868\u793a\uff0c\u7ed3\u675f\u6807\u8bb0\u7b26\u7528\"[SEP]\"\u8868\u793a\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u53e5\u5b50\u7684\u8f93\u5165\u60c5\u51b5\uff0c\u9664\u4e86\u8d77\u59cb\u6807\u8bb0\u548c\u7ed3\u675f\u6807\u8bb0\u4e4b\u5916\uff0c\u4e24\u4e2a\u53e5\u5b50\u95f4\u901a\u8fc7\"[SEP]\"\u6765\u8fdb\u884c\u533a\u5206\u3002 \u9664\u4e86\u8fd9\u4e9b\u4e4b\u5916\uff0cBERT \u8fd8\u7528\u4e24\u4e2a\u8868\u793a\u5f53\u524d\u662f\u53e5\u5b50 A \u6216\u53e5\u5b50 B \u7684\u5411\u91cf\u6765\u8fdb\u884c\u8868\u793a\u3002\u5bf9\u4e8e\u53e5\u5b50 A \u6765\u8bf4\uff0c\u6bcf\u4e00\u8bcd\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u540c\u6837\u7684\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50 A \u7684\u5411\u91cf\uff0c\u5982\u679c\u6709\u53e5\u5b50 B \u7684\u8bdd\uff0c\u53e5\u5b50 B \u4e2d\u7684\u6bcf\u4e2a\u8bcd\u4e5f\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50 B \u7684\u5411\u91cf\u3002 \u5f53\u7136\uff0c\u548c Transformer \u4e2d\u4e00\u6837\uff0c\u4e3a\u4e86\u5f15\u5165\u5e8f\u5217\u4e2d\u8bcd\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4e5f\u7528\u4e86 position embedding\uff0c\u56e0\u6b64\uff0c\u6700\u7ec8\u7684\u8f93\u5165\u5c42\u5927\u6982\u662f\uff1a \u9664\u4e86\u8f93\u5165\u5c42\u8981\u5c3d\u91cf\u505a\u5230\u901a\u7528\u4e4b\u5916\uff0c\u6839\u636e\u4e0d\u540c\u4efb\u52a1\u8bbe\u8ba1\u4e0d\u540c\u7684\u8f93\u51fa\u5c42\u4e5f\u53d8\u5f97\u5c24\u4e3a\u91cd\u8981\uff0cBERT \u4e3b\u8981\u9488\u5bf9\u56db\u7c7b\u4efb\u52a1\u8003\u8651\u548c\u8bbe\u8ba1\u4e86\u4e00\u4e9b\u975e\u5e38\u6613\u4e8e\u79fb\u690d\u7684\u8f93\u51fa\u5c42\uff0c\u8fd9\u56db\u7c7b\u4efb\u52a1\u5206\u522b\u662f\uff1a\u5355\u4e2a\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3001\u4e24\u4e2a\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\uff0c\u53e5\u5b50\u6216\u7b54\u6848\u9009\u62e9\u4efb\u52a1\u3002 \u5bf9\u4e8e\u5355\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u548c\u5e8f\u5217\u5bf9\u7684\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4f7f\u7528\u6846\u67b6\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u8981\u8f93\u5165\u5c42\u6309\u7167\u4e0a\u9762\u7684\u65b9\u6cd5\u505a\u597d\u8868\u793a\u5373\u53ef\u3002 \u8fd9\u4e24\u4e2a\u5206\u7c7b\u4efb\u52a1\u90fd\u662f\u5229\u7528 Encoder \u6700\u540e\u4e00\u5c42\u7684\u7b2c\u4e00\u4e2a\u65f6\u523b\u201c[CLS]\u201d\u5bf9\u5e94\u7684\u8f93\u51fa\u4f5c\u4e3a\u5206\u7c7b\u5668\u7684\u8f93\u5165\uff0c\u8fd9\u4e2a\u65f6\u523b\u53ef\u4ee5\u5f97\u5230\u8f93\u5165\u5e8f\u5217\u7684\u5168\u5c40\u8868\u5f81\uff0c\u5e76\u4e14\u56e0\u4e3a\u76d1\u7763\u4fe1\u53f7\u4ece\u8fd9\u4e2a\u4f4d\u7f6e\u53cd\u9988\u7ed9\u6a21\u578b\uff0c\u56e0\u800c\u5b9e\u9645\u4e0a\u5728 finetune \u9636\u6bb5\u4e5f\u53ef\u4ee5\u4f7f\u5f97\u8fd9\u4e00\u8868\u5f81\u5c3d\u91cf\u503e\u5411\u4e8e\u5168\u5c40\u7684\u8868\u5f81\u3002 \u5f53\u7136\uff0c\u5373\u4fbf\u5982\u6b64\uff0c\u540c\u6837\u4e5f\u662f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u7b80\u5355\u6613\u884c\u7684\u529e\u6cd5\u5c06\u5176\u4ed6\u65f6\u523b\u751a\u81f3\u5176\u4ed6\u5c42\u5185\u7684\u8868\u5f81\u62ff\u6765\u7528\u7684\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u5e76\u4e0d\u9700\u8981\u5c40\u9650\u5728\u8fd9\u4e00\u4e2a\u65f6\u523b\u4e0a\u7684\u8868\u5f81\u3002\u53e6\u5916\uff0c finetune \u9636\u6bb5\uff0c\u5728 BERT Encoder \u57fa\u7840\u4e0a\uff0c\u8fd9\u4e9b\u5206\u7c7b\u4efb\u52a1\u56e0\u4e3a\u53ea\u9700\u8981\u63a5\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u56e0\u6b64\u589e\u52a0\u7684\u53c2\u6570\u53ea\u6709 H \u00d7 K \uff0c\u5176\u4e2d H \u662f Encoder \u8f93\u51fa\u5c42\u4e2d\u9690\u72b6\u6001\u7684\u7ef4\u5ea6\uff0cK \u662f\u5206\u7c7b\u7c7b\u522b\u4e2a\u6570\u3002 \u5bf9\u4e8e SQuAD 1.1 \u4efb\u52a1\u6765\u8bf4\uff0c\u9700\u8981\u5728\u7ed9\u5b9a\u6bb5\u843d\u4e2d\u627e\u5230\u6b63\u786e\u7b54\u6848\u6240\u5728\u533a\u95f4\uff0c\u8fd9\u6bb5\u533a\u95f4\u901a\u8fc7\u4e00\u4e2a\u8d77\u59cb\u7b26\u4e0e\u7ec8\u6b62\u7b26\u6765\u8fdb\u884c\u6807\u8bb0\uff0c\u56e0\u6b64\u53ea\u9700\u9884\u6d4b\u8f93\u5165\u5e8f\u5217\u4e2d\u54ea\u4e2a token \u6240\u5728\u4f4d\u7f6e\u662f\u8d77\u59cb\u7b26\u6216\u7ec8\u6b62\u7b26\u5373\u53ef\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u53ea\u9700\u7ef4\u62a4\u4e24\u4e2a\u5411\u91cf\uff0c\u5206\u522b\u662f\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u7684\u5411\u91cf\uff0c\u4e0d\u8fc7\u4e0e\u5176\u8bf4\u662f\u5411\u91cf\uff0c\u8fd8\u4e0d\u5982\u8bf4\u662f\u4e24\u4e2a\u5bf9\u5e94\u7684\u5168\u8fde\u63a5\u5c42\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u6709\u4e9b\u7279\u6b8a\uff0c\u5728\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u4e2d\uff0c\u8f93\u5165\u5c42\u7684\u8282\u70b9\u4e2a\u6570\u4e3a BERT Encoder \u8f93\u51fa\u7684\u8282\u70b9\u4e2a\u6570\uff0c\u4e5f\u5c31\u662f H\uff0c\u800c\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u8f93\u51fa\u5c42\u90fd\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u3002 \u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u4f5c\u7528\u5c31\u662f\u8981\u628a\u5e8f\u5217\u8f93\u51fa\u7684\u5411\u91cf\u901a\u8fc7\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u6620\u5c04\u4e3a\u4e00\u4e2a\u5b9e\u6570\u503c\uff0c\u53ef\u4ee5\u7b49\u540c\u4e8e\u6253\u5206\uff0c\u7136\u540e\u518d\u6839\u636e\u8fd9\u4e2a\u6253\u5206\u5728\u5e8f\u5217\u7684\u65b9\u5411\u4e0a\u9009\u53d6\u6700\u5927\u503c\u4f5c\u4e3a\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u3002\u56e0\u6b64\u8fd9\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u53ea\u589e\u52a0\u4e86 H \u00d7 2 \u7684\u53c2\u6570\u91cf\uff0c\u53ef\u8c13\u6bd4\u5206\u7c7b\u4efb\u52a1\u7684\u53c2\u6570\u589e\u52a0\u8fd8\u8981\u5c11\uff08\u81f3\u5c11\u548c 2 \u5206\u7c7b\u4efb\u52a1\u7684\u53c2\u6570\u4e00\u81f4\uff09\u3002 \u8fd9\u91cc\u6709\u4e24\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff1a\u5176\u4e00\uff0c\u65e0\u8bba\u5bf9\u4e8e\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u4e5f\u597d\uff0c\u5b83\u4eec\u7684\u5224\u65ad\u548c\u666e\u901a\u5206\u7c7b\u4efb\u52a1\u4e0d\u4e00\u6837\uff0c\u4e0d\u662f\u76f4\u63a5\u9488\u5bf9\u6bcf\u4e2a token \u8fdb\u884c\u662f\u5426\u662f\u8d77\u59cb\u7b26\u7684\u5206\u7c7b\uff08\u5982\u679c\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u53c2\u6570\u91cf\u8981\u589e\u52a0 H \u00d7 4\uff09\uff0c\u800c\u662f\u7c7b\u4f3c\u4e8e\u5728\u5168\u4f53\u8f93\u5165\u5e8f\u5217\u4e0a\u8fdb\u884c\u6392\u5e8f\uff0c\u56e0\u6b64\u9488\u5bf9\u8d77\u59cb\u7b26\u7684\u5224\u65ad\u6765\u8bb2\u53ea\u9700\u8981\u4e00\u4e2a H \u00d7 1 \u7684\u5168\u8fde\u63a5\u5c31\u53ef\u4ee5\u4e86\u3002 \u7b2c\u4e8c\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8bad\u7ec3\u65f6\u65e0\u987b\u62c5\u5fc3\u7ec8\u6b62\u7b26\u662f\u5426\u5728\u8d77\u59cb\u7b26\u540e\u9762\uff0c\u56e0\u4e3a\u5373\u4fbf\u6a21\u578b\u8bad\u7ec3\u65f6\u9884\u6d4b\u662f\u7ec8\u6b62\u7b26\u5728\u8d77\u59cb\u7b26\u524d\u9762\uff0c\u8fd9\u4e00\u9519\u8bef\u73b0\u8c61\u4f1a\u901a\u8fc7\u635f\u5931\u51fd\u6570\u53cd\u9988\u7ed9\u6a21\u578b\uff0c\u7136\u800c\u5728\u505a inference \u65f6\uff0c\u5c31\u5fc5\u987b\u4fdd\u8bc1\u7ec8\u6b62\u7b26\u4e00\u5b9a\u8981\u5728\u8d77\u59cb\u7b26\u540e\u9762\u3002 BERT \u4e5f\u8003\u8651\u4e86\u5982\u4f55\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e0a\u8fdb\u884c finetune\uff0c\u5bf9\u4e8e\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a token \u800c\u8a00\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002\u548c\u524d\u9762\u63d0\u5230\u7684\u666e\u901a\u5206\u7c7b\u4efb\u52a1\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u8fd9\u91cc\u7684\u5206\u7c7b\u9700\u8981\u9488\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u505a\u5206\u7c7b\uff0c\u53c2\u6570\u589e\u52a0\u5728 H \u00d7 K \uff0c\u8fd9\u91cc\u7684 K \u662f\u5e8f\u5217\u6807\u6ce8\u4e2d\u6807\u6ce8\u7684\u79cd\u7c7b\u4e2a\u6570\u3002 \u6700\u540e\u5bf9\u4e8e SWAG \u4efb\u52a1\u6765\u8bb2\uff0c\u56e0\u4e3a\u9700\u8981\u5728\u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\u540e\uff0c\u4ece\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u4e2d\u9009\u62e9\u4e00\u4e2a\u6700\u6709\u53ef\u80fd\u662f\u8be5\u53e5\u5b50\u7684\u4e0b\u4e00\u4e2a\u53e5\u5b50\uff0c\u8fd9\u91cc\u9762\u901a\u5e38\u5305\u542b\u4e86\u4e00\u4e9b\u5e38\u8bc6\u63a8\u7406\u3002 BERT \u7684\u505a\u6cd5\u662f\u5c06\u524d\u7f6e\u53e5\u5b50\u548c\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u5206\u522b\u8fdb\u884c\u7ec4\u5408\u6210\u4e00\u4e2a\u53e5\u5b50\u5bf9\uff0c\u5e76\u6309\u7167\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u65b9\u6cd5\u8f93\u5165\u5230 Encoder\uff0c\u8fd9\u6837\u4fbf\u5f97\u5230\u56db\u4e2a pair \u7684\u53e5\u5b50\u8868\u5f81\uff0c\u7136\u540e\u53ea\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u5411\u91cf\uff08\u6216\u8005\u8bf4\u662f\u4e00\u4e2a\u591a\u5230 1 \u7684\u5168\u8fde\u63a5\u5c42\uff09\uff0c\u4fbf\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u4e2a\u5019\u9009\u53e5\u5b50\u8fdb\u884c\u6253\u5206\uff0c\u4ece\u800c\u5f97\u5230\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u4e2d\u6700\u6709\u53ef\u80fd\u662f\u4e0b\u4e00\u4e2a\u7684\u53e5\u5b50\u3002 \u8fd9\u4e2a\u5168\u8fde\u63a5\u53ea\u9700\u8981\u589e\u52a0 H \u00d7 1 \u7684\u53c2\u6570\u91cf\uff0c\u8fd9\u4e00\u70b9\u548c SQuAD 1.1 \u4efb\u52a1\u7684\u60c5\u51b5\u7c7b\u4f3c\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u505a\u6cd5\u548c GPT \u5bf9\u4e8e Question Selection \u7684\u505a\u6cd5\u4e5f\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u7406\u8bba\u4e0a\u5e94\u8be5\u4e5f\u53ef\u4ee5\u5e94\u7528\u5230 WikiQA \u8fd9\u79cd\u6570\u636e\u96c6\u4e0a\u7684\uff0cfinetune \u9636\u6bb5\u540c\u6837\u53ea\u9700\u8981\u589e\u52a0 H \u00d7 1 \u7684\u53c2\u6570\u91cf\u3002 \u6700\u540e\uff0c\u6211\u4eec\u518d\u6b21\u603b\u7ed3 BERT \u7684\u51e0\u4e2a\u4e3b\u8981\u7279\u70b9\uff1a Transformer Encoder \u56e0\u4e3a\u6709 Self-attention \u673a\u5236\uff0cBERT \u81ea\u5e26\u53cc\u5411\u529f\u80fd\uff1b \u56e0\u4e3a\u53cc\u5411\u529f\u80fd\u4ee5\u53ca\u591a\u5c42 Self-attention \u673a\u5236\u7684\u5f71\u54cd\uff0c\u4f7f\u5f97 BERT \u5fc5\u987b\u4f7f\u7528 Cloze \u7248\u7684\u8bed\u8a00\u6a21\u578b Masked-LM \u6765\u5b8c\u6210 token \u7ea7\u522b\u7684\u9884\u8bad\u7ec3\uff1b \u4e3a\u4e86\u83b7\u53d6\u6bd4\u8bcd\u66f4\u9ad8\u7ea7\u522b\u7684\u53e5\u5b50\u7ea7\u522b\u8bed\u4e49\u8868\u5f81\uff0cBERT \u52a0\u5165\u4e86 Next Sentence Prediction \u6765\u548c Masked-LM \u4e00\u8d77\u505a\u8054\u5408\u8bad\u7ec3\uff1b \u4e3a\u4e86\u9002\u914d\u591a\u4efb\u52a1\u4e0b\u7684\u8fc1\u79fb\u5b66\u4e60\uff0cBERT \u8bbe\u8ba1\u4e86\u66f4\u901a\u7528\u7684\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u3002 \u7136\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u770b BERT \u90fd\u7ad9\u5728\u4e86\u54ea\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff1a \u9488\u5bf9\u7b2c\u4e00\u70b9\uff0c\u53cc\u5411\u529f\u80fd\u662f Transformer Encoder \u81ea\u5e26\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662f Transformer\uff1b \u7b2c\u4e8c\u70b9\u4e2d Masked-LM \u7684\u5de8\u4eba\u80a9\u8180\u662f\u8bed\u8a00\u6a21\u578b\u3001CBOW \u4ee5\u53ca Cloze\u95ee\u9898\uff1b \u7b2c\u4e09\u70b9\u4e2d Next Sentence Prediction \u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662f Skip-gram\u3001Skip-thoughts \u548c Quick-thoughts \u7b49\u5de5\u4f5c\uff1b \u7b2c\u56db\u70b9\u4e2d\uff0c\u5bf9\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u6539\u9020\uff0c\u501f\u9274\u4e86 T-DMCA \u4ee5\u53ca GPT \u7684\u505a\u6cd5\u3002 \u518d\u6765\u770b\u770b\u9884\u8bad\u7ec3\u4f7f\u7528\u7684\u6570\u636e\u65b9\u9762\uff0cELMo \u4f7f\u7528\u7684\u662f 1B Word Benchmark \u6570\u636e\u96c6\uff0c\u8bcd\u6570\u4e3a 10 \u4ebf\uff0c\u7136\u800c\u53e5\u5b50\u95f4\u7684\u987a\u5e8f\u662f\u968f\u673a\u6253\u4e71\u7684\uff0c\u65e0\u6cd5\u5efa\u6a21\u53e5\u5b50\u7ea7\u522b\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5 GPT \u548c BERT \u90fd\u5f03\u7528\u8fd9\u4e2a\u6570\u636e\u96c6\uff1bGPT \u4f7f\u7528\u7684\u662f BooksCorpus\uff0c\u8bcd\u6570\u4e3a 8 \u4ebf\uff1bBERT \u9664\u4e86\u4f7f\u7528 BooksCorpus \u4e4b\u5916\uff0c\u8fd8\u52a0\u5165\u4e86 25 \u4ebf\u7ea7\u522b\u7684 Wikipedia \u6570\u636e\u96c6\uff0c\u56e0\u6b64\u6574\u4f53\u4f7f\u7528\u7684\u6570\u636e\u96c6\u4e3a 33 \u4ebf\u4e2a\u8bcd\u3002\u53ef\u89c1 BERT \u4f7f\u7528\u7684\u6570\u636e\u96c6\u662f\u6700\u5927\u7684\u3002 \u6a21\u578b\u65b9\u9762\uff0cELMo \u4f7f\u7528\u7684\u662f\u4e00\u4e2a Bi-LSTM \u7ed3\u6784\uff0c\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4f7f\u7528 CNN \u6765\u8fdb\u884c\u5efa\u6a21\u3002\u800c GPT \u4f7f\u7528\u4e86 12 \u4e2a block\uff0c\u9690\u85cf\u5c42\u8282\u70b9\u6570\u4e3a 768\uff0c\u591a\u5934\u4e3a 12\uff0c\u8fd9\u4e5f\u662f BERT \u7684 base \u7248\u672c\uff08base \u7248\u672c\u5c31\u662f\u4e3a\u4e86\u8ddf GPT \u505a\u5bf9\u6bd4\uff09\uff0c\u53c2\u6570\u91cf\u6309\u7167 BERT base \u7248\u672c\u4f30\u8ba1\u4e3a 110M\u3002\u800c BERT \u518d\u6b21\u628a\u6a21\u578b\u53d8\u5f97\u66f4\u5927\u4e86\uff0c\u4f7f\u7528 24 \u4e2a block\uff0c\u5e76\u4e14\u9690\u85cf\u5c42\u8282\u70b9\u6570\u4e0e\u591a\u5934\u90fd\u76f8\u5e94\u6269\u5927\uff0c\u4f5c\u8005\u4f3c\u4e4e\u60f3\u8981\u8868\u660e\u4ed6\u4eec\u8bbe\u8ba1\u7684\u6a21\u578b\u662f\u6709\u53f2\u4ee5\u6765\u6700\u5927\u7684\u6a21\u578b\u4e4b\u4e00\u3002 \u5728\u8ba1\u7b97\u8d44\u6e90\u6bd4\u62fc\u65b9\u9762\uff0cGPT \u5728 8 \u5757 GPU \u4e0a\u9884\u8bad\u7ec3\u4e86\u4e00\u4e2a\u6708\u3002\u53c2\u6570\u89c4\u6a21\u548c GPT \u5dee\u4e0d\u591a\u7684 BERT base \u7248\u672c\uff0c\u5728 16 \u5757 TPU \u4e0a\u53ea\u82b1\u4e86 4 \u5929\uff0cBERT \u5728\u8bba\u6587\u4e2d\u63d0\u5230\u6b64\u5904\u65f6\uff0c\u8fd8\u4e0d\u5931\u65f6\u673a\u7ed9\u5b83\u4eec\u5bb6\u7684 TPU \u653e\u4e86\u4e2a\u94fe\u63a5\uff0c\u6253\u4e86\u4e00\u6ce2\u5e7f\u544a\u3002\u5bf9\u4e8e\u53c2\u6570\u89c4\u6a21\u4e3a GPT \u4e09\u500d\u4e4b\u591a\u7684 BERT large \u7248\u672c\uff0c\u5728 64 \u5757 TPU \u4e0a\u8bad\u7ec3\u8017\u65f6\u4e5f\u4f9d\u7136\u8fbe\u5230 4 \u5929\u4e4b\u4e45\u3002 \u56e0\u6b64\uff0c\u603b\u7ed3\u6765\u770b\uff0cBERT \u7684\u51fa\u73b0\u65e2\u8e29\u5728\u4e86\u4e00\u4f17\u524d\u8f88\u4eec\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff0c\u901a\u8fc7\u7cbe\u5fc3\u8bbe\u8ba1\u548c\u4e00\u4e9b\u8bad\u7ec3\u6280\u5de7\u9020\u51fa\u4e86\u4e00\u4e2a\u5e9e\u5927\u6a21\u578b\uff0c\u6700\u540e\u53c8\u820d\u5f97\u82b1\u94b1\u7838\u4e0b\u5de8\u5927\u8d44\u6e90\uff0c\u7ed9\u4f17\u4eba\u4e0a\u6f14\u4e86\u4e00\u573a\u70ab\u76ee\u65e0\u6bd4\u7684\u70df\u82b1\u79c0\u3002\u4e0e\u5176\u8bf4 BERT \u5e26\u6765\u4e86\u4e00\u6b21\u7ffb\u5929\u8986\u5730\u7684\u9769\u65b0\uff0c\u4e0d\u5982\u8bf4 BERT \u56e2\u961f\u7cc5\u5408\u80fd\u529b\u8d85\u7fa4\uff0c\u4ee5\u53ca\u8fd8\u6709\u4e00\u70b9\u4e5f\u975e\u5e38\u91cd\u8981\uff1a\u6709\u94b1\u3002 \u7136\u800c\uff0c\u548c\u666e\u901a\u7684\u70df\u82b1\u79c0\u4e0d\u4e00\u6837\uff0c\u666e\u901a\u70df\u82b1\u6613\u901d\uff0c\u800c BERT \u8bf4\u4e0d\u5b9a\u53ef\u771f\u662f\u5c06\u4e00\u6735\u70df\u82b1\u6012\u653e\u5728\u6bcf\u4e00\u4f4d NLP \u7b97\u6cd5\u4eba\u5458\u5fc3\u4e2d\uff0c\u5b83\u5148\u662f\u8ba9\u6211\u4eec\u770b\u4e86\u4e00\u573a\u6a2a\u626b 11 \u9879\u4efb\u52a1\u7684\u8868\u6f14\u79c0\uff08\u4e5f\u662f\u5b9e\u529b\u79c0\uff09\uff0c\u5ba3\u544a\u4e16\u4eba\u8fd9\u573a\u70df\u82b1\u4e0d\u4e00\u822c\u3002 \u66f4\u4e3a\u53ef\u8d35\u7684\u662f\uff0c\u5f53\u4f17\u4eba\u60ca\u9b42\u672a\u5b9a\u4e4b\u65f6\uff0c\u5f88\u5feb\uff0cBERT \u53c8\u628a\u4ed6\u4eec\u6392\u7ec3\u70df\u82b1\u79c0\u7684\u4e00\u5207\u8bbe\u5907\uff08\u6a21\u578b\uff09\u5168\u90fd\u516c\u4e4b\u4e8e\u4f17\uff0c\u751a\u81f3\u628a\u6392\u7ec3\u5f97\u5230\u7684\u6548\u679c\u6700\u597d\u7684\u5e03\u666f\uff08\u9884\u8bad\u7ec3\u53c2\u6570\uff09\u548c\u70b9\u706b\u5668\uff08finetune \u8d85\u53c2\u6570\uff09\u4e5f\u5168\u90fd\u5949\u732e\u4e86\u51fa\u6765\uff0c\u4f3c\u4e4e\u613f\u666f\u4e5f\u8db3\u591f\u4f1f\u5927\uff1a\u8ba9\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u4e0a\u6f14\u4e00\u573a\u81ea\u5df1\u7684\u70df\u82b1\u79c0\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u590d\u6742\u4efb\u52a1\u4e0a\u7b80\u5355\u8fdb\u884c\u4e00\u6b21 finetune\uff0c\u4fbf\u7acb\u9a6c\u80fd\u591f\u5f97\u5230\u4e00\u4e2a\u975e\u5e38\u9ad8\u7684 baseline\u3002 \u6c89\u5bc2\u4e86\u4e94\u5e74\u4e4b\u4e45\u7684 NLP \u754c\uff0c\u4f3c\u4e4e\u8fce\u6765\u4e86\u4e00\u4e2a\u65b0\u7684\u65f6\u4ee3\u3002 4.7 \u5982\u4f55\u722c\u4e0a\u68af\u5b50\u7684\u7b2c\u4e8c\u7ea7 \u00b6 \u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u4f18\u52bf\u5728\u4e8e \u8fd1\u4e4e\u65e0\u9650\u91cf\u7684\u4f18\u8d28\u6570\u636e \u65e0\u9700\u4eba\u5de5\u6807\u6ce8 \u4e00\u6b21\u5b66\u4e60\u591a\u6b21\u590d\u7528 \u5b66\u4e60\u5230\u7684\u8868\u5f81\u53ef\u5728\u591a\u4e2a\u4efb\u52a1\u4e2d\u8fdb\u884c\u5feb\u901f\u8fc1\u79fb \u95ee\u9898\u662f\u5982\u4f55\u5229\u7528\u8fd9\u4e9b\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0cGoogle\u4eec\u5df2\u7ecf\u7ed9\u6211\u4eec\u63d0\u4f9b\u5de8\u4eba\u7684\u80a9\u8180\u4e86\uff0c\u90a3\u201c\u68af\u5b50\u201d\u5728\u54ea\u5462\uff1f\u6211\u4eec\u600e\u4e48\u722c\u4e0a\u53bb\u8fd9\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\uff1f\u4e5f\u5c31\u662f\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u6709\u4e09\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528\u3002\u5b83\u4eec\u5206\u522b\u662f\uff1a \u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u5f53\u505a\u4e00\u4e2a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u76f4\u63a5\u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u8f93\u51fa\u5c42\u53bb\u6389\uff0c\u7136\u540e\u4f7f\u7528\u53bb\u6389\u8f93\u51fa\u5c42\u4e4b\u540e\u7684\u6700\u540e\u4e00\u5c42\u8f93\u51fa\u4f5c\u4e3a\u7279\u5f81\u8f93\u5165\u5230\u6211\u4eec\u81ea\u5df1\u7cbe\u5fc3\u8bbe\u8ba1\u597d\u7684Task-specific\u6a21\u578b\u4e2d\u53bb\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u4f5c\u4e3a\u7279\u5f81\u63d0\u53d6\u5668\u7684\u90e8\u5206\uff08\u6bd4\u5982BERT Encoder\uff09\u7684\u53c2\u6570\u662f\u4e0d\u53d8\u7684\u3002 \u53e6\u5916\uff0c\u7279\u5f81\u63d0\u53d6\u5668\u5e76\u4e0d\u4e00\u5b9a\u53ea\u80fd\u7528\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e2d\u95f4\u7684\u67d0\u4e9b\u5c42\uff0c\u751a\u81f3\u4e5f\u53ef\u4ee5\u501f\u9274ELMo\u7684\u505a\u6cd5\uff0c\u5728\u5404\u5c42\u4e4b\u95f4\u5229\u7528\u4e00\u4e2asoftmax\u6765\u5b66\u4e60\u5404\u81ea\u7684\u6743\u503c\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e9b\u66f4\u4e3a\u590d\u6742\u7684\u5404\u5c42\u7ec4\u5408\u65b9\u5f0f\uff1b \u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u6574\u4f53\u63a5\u5165 Task-specific \u6a21\u578b\uff0c\u7ee7\u800c\u91cd\u65b0\u5728\u65b0\u7684\u6570\u636e\u96c6\u4e0a\u6574\u4f53\u91cd\u65b0\u8bad\u7ec3\u3002\u5f53\u7136\u8bad\u7ec3\u6280\u5de7\u53ef\u4ee5\u6709\u5f88\u591a\u79cd\uff0c\u6bd4\u5982 ULMFiT \u7684\u4e09\u89d2\u5b66\u4e60\u7387\u548c\u9010\u5c42\u89e3\u51bb\u6216\u8005\u662f Transformer \u7684 warmup \u7b56\u7565\uff08\u4e0a\u6587\u90fd\u6709\u63d0\u5230\uff09\uff0c\u8fd9\u4e9b\u8bad\u7ec3\u6280\u5de7\u975e\u5e38\u91cd\u8981\uff0c\u9700\u8981\u597d\u597d\u628a\u63a7\uff0c\u5426\u5219\u5f88\u5bb9\u6613\u5b66\u5d29\u4e86\uff0c\u751a\u81f3\u8ba9\u539f\u6709\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u4f18\u52bf\u90fd\u88ab\u65b0\u7684 finetune \u62b9\u53bb\u4e86\uff0c\u56e0\u6b64\u9700\u8981\u5b9e\u9a8c\u8bbe\u8ba1\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684 finetune \u7b56\u7565\u3002 \u6b64\u5916\uff0c\u548c\u7279\u5f81\u63d0\u53d6\u5668\u7684\u63a5\u5165\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u63a5\u5165\u4e0d\u4e00\u5b9a\u53ea\u80fd\u63a5\u6700\u540e\u5c42\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u590d\u6742\u7684\u63a5\u5165\u65b9\u5f0f\uff0c\u6bd4\u5982 DenseNet\uff1b \u548c\u4e0a\u9762\u4e24\u79cd\u6781\u7aef\u60c5\u51b5\u76f8\u53cd\uff0c\u6216\u8005\u8bf4\u7efc\u5408\u4e86\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\u7684\u65b9\u6848\uff0c\u5373\u4fdd\u7559\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u4e00\u90e8\u5206\uff0c\u53e6\u5916\u4e00\u90e8\u5206\u5219\u548c Task-specific \u6a21\u578b\u4e00\u8d77 finetune\u3002 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u662f\u4e2a\u6bd4\u8f83\u5408\u7406\u7684\u9009\u62e9\uff0c\u6bd4\u5982\u9884\u8bad\u7ec3\u6a21\u578b\u6bd4\u8f83\u6df1\uff08NLP \u6a21\u578b\u901a\u5e38\u6765\u8bb2\u6bd4 CV \u6a21\u578b\u90fd\u8981\u6d45\u5f88\u591a\uff09\uff0c\u4ee5\u53ca\u8bad\u7ec3\u6570\u636e\u4e0d\u7b97\u592a\u591a\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u65f6\u5019\u4e00\u65b9\u9762\u8981\u4fdd\u8bc1\u9884\u8bad\u7ec3\u6a21\u578b\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u66fe\u7ecf\u5b66\u4e60\u5230\u7684\u8868\u5f81\uff0c\u53e6\u4e00\u65b9\u9762\u56e0\u4e3a\u53c8\u8981\u505a\u65b0\u6570\u636e\u4e0b\u7684\u8fc1\u79fb\uff0c\u4f46\u662f\u6570\u636e\u91cf\u6bd4\u8f83\u5c11\uff0c\u91cd\u65b0 finetune \u6574\u4e2a\u6a21\u578b\u53ef\u80fd\u4e0d\u592a\u5408\u9002\uff0c\u5bb9\u6613\u5bfc\u81f4\u6a21\u578b\u7684\u9c81\u68d2\u6027\u4e0d\u9ad8\uff0c\u90a3\u4e48\u4f3c\u4e4e\u9009\u62e9\u6700\u540e\u7684\u4e00\u4e9b\u5c42\u8fdb\u884c\u9009\u62e9\u6027\u7684 finetune \u4f1a\u662f\u6bd4\u8f83\u597d\u7684\u65b9\u6848\u3002 \u4e0a\u9762\u8fd9\u4e09\u79cd\u65b9\u6848\uff0c\u65e2\u5305\u62ec\u4e86 BERT \u6240\u8a00\u7684 feature-based \u4f7f\u7528\u65b9\u6cd5\uff0c \u4e5f\u5305\u62ec\u4e86 BERT \u7684 finetune \u65b9\u6cd5\u3002\u53e6\u5916 GPT \u548c BERT \u4e5f\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u5f88\u597d\u7684\u8f93\u5165\u5c42\u4e0e\u8f93\u51fa\u5c42\u901a\u7528\u5305\uff0c\u518d\u52a0\u4e0a\u4e00\u4e9b\u8bad\u7ec3\u6280\u5de7\uff0c\u4e00\u822c\u7684 NLP \u4efb\u52a1\u5e94\u8be5\u662f\u8db3\u591f\u5e94\u4ed8\u4e86\u3002 \u7136\u800c\uff0cGPT \u548c BERT \u5373\u4fbf\u5237\u65b0\u4e86\u5341\u591a\u9879NLP\u4efb\u52a1\uff0c\u4f46\u4f3c\u4e4e\u5404\u81ea\u9ed8\u5951\u7684\u90fd\u4e0d\u66fe\u5c1d\u8bd5\u8fc7\u5728\u751f\u6210\u95ee\u9898\u4e2d\u5927\u5c55\u8eab\u624b \u3002\u6bd4\u5982\u4e8c\u8005\u7684\u4e3b\u8981\u5f81\u6218\u6c99\u573a GLUE \u8fde\u540d\u5b57\u4e2d\u90fd\u76f4\u6307\u8fd9\u4e2a\u201c\u80f6\u6c34\u201d\u6392\u884c\u699c\u4e3b\u8981\u5c31\u662f\u8bed\u8a00\u7406\u89e3\u95ee\u9898\u3002 \u9664\u4e86 GLUE \u5916\uff0cGPT \u989d\u5916\u5237\u8fc7\u7684\u6570\u636e\u96c6\u6709 4 \u4e2a\uff1aSNLI, SciTail, RACE \u548c Stroy Cloze\uff0c\u5176\u4e2d SNLI \u548c SciTail \u90fd\u662f\u81ea\u7136\u8bed\u8a00\u63a8\u65ad\u95ee\u9898\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u95ee\u9898\uff0cRACE \u548c Stroy Cloze\u662f QA \u6216\u9605\u8bfb\u7406\u89e3\u95ee\u9898\uff0c\u672c\u8d28\u4e0a\u53ef\u4ee5\u8ba4\u4e3a\u5206\u522b\u662f\u4e00\u4e2a token \u7ea7\u522b\u7684\u5206\u7c7b\u4ee5\u53ca\u53e5\u5b50\u7ea7\u522b\u7684\u6253\u5206\u6392\u5e8f\u95ee\u9898\u3002 \u800c BERT \u989d\u5916\u5237\u8fc7\u7684\u4e09\u4e2a\u6570\u636e\u96c6\u4e2d SQuAD \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a token \u7ea7\u522b\u7684\u5206\u7c7b\u95ee\u9898\uff0cNER \u4e5f\u662f\u5982\u6b64\uff0cSWAG \u5219\u662f\u4ece\u5019\u9009\u53e5\u5b50\u4e2d\u9009\u62e9\u6b63\u786e\u7684\u63a8\u65ad\uff0c\u662f\u4e00\u4e2a\u53e5\u5b50\u7ea7\u522b\u7684\u6253\u5206\u6392\u5e8f\u95ee\u9898\u3002 GPT \u5237\u4e86 12 \u9879\u6570\u636e\u96c6\uff08\u6253\u7834\u5176\u4e2d 9 \u9879\u7eaa\u5f55\uff09\uff0cBERT \u5237\u4e86 11 \u9879\u6570\u636e\u96c6\uff08\u6253\u7834\u5176\u4e2d 11 \u9879\uff09\uff0c\u7136\u800c**\u65e0\u4e00\u4f8b\u5916\u8fd9\u4e9b\u6570\u636e\u96c6\u5168\u662f\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u9886\u57df\u7684\u95ee\u9898**\uff0c\u800c**\u5bf9\u4e8e NLP \u4e2d\u53e6\u4e00\u4e2a\u5e9e\u5927\u9886\u57df\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff0c\u4e0d\u7ea6\u800c\u540c\u5730\u9009\u62e9\u4e86\u653e\u5f03\uff0c\u662f\u672a\u66fe\u6ce8\u610f\uff0c\u8fd8\u662f\u9009\u62e9\u89c6\u800c\u4e0d\u89c1\uff0c\u80cc\u540e\u7684\u539f\u56e0\u6211\u65e0\u4ece\u731c\u6d4b\u3002** \u4e0d\u8fc7\uff0c\u65e0\u8bba GPT \u548c BERT \u662f\u4ec0\u4e48\u539f\u56e0\u6ca1\u6709\u9009\u62e9\u5728\u751f\u6210\u95ee\u9898\u4e2d\u53bb\u5c1d\u8bd5\uff0c\u79c1\u4ee5\u4e3a\uff0c\u60f3\u8981\u628a GPT \u548c BERT \u7684\u9884\u8bad\u7ec3\u6a21\u578b\u8fc1\u79fb\u5230\u751f\u6210\u95ee\u9898\u4e2d\uff0c\u5927\u7ea6\u5e94\u8be5\u4e5f\u4e0d\u662f\u4e00\u4ef6\u975e\u5e38\u56f0\u96be\u7684\u4e8b\u3002 \u9996\u5148 GPT \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u751f\u6210\u6a21\u578b\uff0c\u800c BERT \u867d\u4f7f\u7528\u7684\u662f Encoder\uff0c\u4f46\u628a\u5b83\u6539\u9020\u6210\u4e00\u4e2a Decoder \u5e94\u8be5\u4e0d\u662f\u4ec0\u4e48\u7279\u522b\u56f0\u96be\u7684\u4e8b\uff0c\u56e0\u4e3a\u672c\u8d28\u4e0a Encoder \u548c Decoder \u57fa\u672c\u6846\u67b6\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7 Decoder \u9700\u8981\u505a\u597d\u4e24\u4ef6\u4e8b\u60c5\uff1a \u7b2c\u4e00\u4ef6\u4e8b\u60c5\u662f Decoder \u4e2d\u4e5f\u6709 Self-attention \u5c42\uff0c\u548c Encoder \u4e2d\u7684 Self-attention \u4e0d\u540c\u7684\u662f\uff0cDecoder \u9700\u8981\u505a\u597d mask\uff0c\u4ee5\u907f\u514d attention \u5230\u672a\u6765\u5f85\u9884\u6d4b\u7684\u8bcd\u4e0a\u53bb\u3002\u7b2c\u4e8c\u4ef6\u4e8b\u60c5\u662f Decoder \u4e2d\u6709\u4e00\u4e2a\u4ea4\u53c9 attention\uff0c\u7528\u4e8e\u83b7\u53d6\u6765\u81ea\u4e8e Encoder \u4fa7\u7684\u4fe1\u606f\u3002 \u4f46\u662f\uff0c\u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230 Encoder-Decoder \u6574\u4f53\u8fd9\u79cd Seq2Seq \u6846\u67b6\u662f\u5426\u8981\u4fdd\u7559\u7684\u95ee\u9898\u3002\u5982\u679c\u4f7f\u7528 GPT \u7528\u7684 T-DMCA \u8fd9\u79cd\u4ec5\u7528 Decoder \u505a\u751f\u6210\u95ee\u9898\u7684\uff0c\u90a3\u4e48\u6539\u9020\u76f8\u5bf9\u4f1a\u66f4\u6613\u884c\uff0c\u5982\u679c\u8981\u4fdd\u7559 Encoder-Decoder \u8fd9\u79cd\u53cc\u7ed3\u6784\uff0c\u90a3\u4e48\u6539\u9020\u53ef\u80fd\u4f1a\u76f8\u5bf9\u590d\u6742\u4e00\u4e9b\u3002 \u4e50\u89c2\u4e00\u70b9\uff0c\u5982\u679c\u8fd9\u79cd\u6539\u9020\u975e\u5e38\u6210\u529f\uff08\u4f3c\u4e4e\u5df2\u7ecf\u5177\u5907\u6709\u5145\u5206\u7684\u7406\u7531\u6765\u76f8\u4fe1\u8fd9\u4e00\u70b9\uff09\uff0c\u90a3\u4e48 NLP \u4f3c\u4e4e\u4f1a\u8fce\u6765\u4e00\u4e2a\u9636\u6bb5\u6027\u7684\u5927\u4e00\u7edf\u65f6\u4ee3\uff1a\u4e5f\u5c31\u662f\u4e00\u4e2a\u57fa\u672c\u6a21\u578b\u505a\u5230\u4e00\u4e2a\u95ed\u73af\u3002\u5176\u6d41\u7a0b\u662f\uff1a\u4ece\u6587\u672c\u5230\u8bed\u4e49\u8868\u5f81\uff0c\u518d\u4ece\u8bed\u4e49\u8868\u5f81\u91cd\u65b0\u751f\u6210\u6587\u672c\u3002\u8fd9\u6837\u770b\u6765\uff0c\u81f3\u5c11\u5728 NLP \u9886\u57df\uff08CV \u7b49\u5176\u4ed6 AI \u9886\u57df\uff0c\u7559\u7ed9\u5404\u4f4d\u770b\u5b98\u81ea\u884c\u8111\u6d1e\u597d\u4e86\uff09\uff0c\u672a\u6765\u5927\u7ea6\u8fd8\u662f\u5f88\u503c\u5f97\u671f\u5f85\u7684\u4e00\u4ef6\u4e8b\u60c5\u3002 \u90a3\u4e48\u4ee5\u8c37\u6b4c\u4e3a\u4ee3\u8868\u7684\u8fd9\u4e9b\u5de5\u4f5c\uff0c\u4f1a\u4e0d\u4f1a\u50cf\u4e94\u5e74\u4ee5\u524d\u4e00\u6837\uff0c\u4e5f\u5373\u5c06\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u65f6\u4ee3\u5462\uff1f\u80fd\u4e0d\u80fd\u8ba9 AI \u6210\u529f\u722c\u4e0a\u7b2c\u4e8c\u7ea7\u68af\u5b50\u5462\uff1f\u8ba9\u6211\u4eec\u62ed\u76ee\u4ee5\u5f85\u3002 \u540e\u73b0\u4ee3\u542f\u793a\u5f55\uff1f \u00b6 \u56de\u8fc7\u5934\u6765\u770b\u6b64\u6587\uff0c\u901a\u7bc7\u5927\u4f53\u90fd\u662f\u53cd\u89c2AI\u513f\u5b50\u7406\u89e3\u4ed6\u4eba\u8bf4\u7684\u8bdd\u5199\u7684\u4e66\uff0c\u65e0\u975e\u90fd\u662f\u4e9b\u4eba\u7c7b\u6bcd\u4eb2\u7684\u80b2\u513f\u7b14\u8bb0\uff0c\u5f92\u5f53\u4ee5\u53f2\u4e3a\u9274\u53ef\u4ee5\u77e5\u5174\u66ff\u7f62\u4e86\u3002 \u5b9e\u4e8b\u6c42\u662f\u7684\u8bf4\uff0c\u4eba\u7c7b\u6bcd\u4eb2\u7684\u6559\u5b66\u6210\u679c\u76ee\u524d\u770b\u6765\uff0c\u81f3\u5c11\u8fd8\u4e0d\u7b97\u592a\u8d56\uff0c\u5bc4\u517b\u5728\u5404\u5927\u516c\u53f8\uff08\u4ee5Google, Facebook\u548cOpenAI\u7b49\u4e3a\u4ee3\u8868\uff09\u7684AI\u513f\u5b50\u4eec\u4e5f\u5f00\u59cb\u7406\u89e3\u6bcd\u4eb2\u7684\u4e00\u4e9b\u7a0d\u5fae\u7b80\u5355\u4e9b\u7684\u6307\u4ee4\uff0c\u751a\u81f3\u4e5f\u80fd\u54bf\u54bf\u5440\u5440\u7684\u5f00\u53e3\u8bf4\u8bdd\u4e86\uff0c\u4e0d\u80fd\u4e0d\u8bf4\u8fd9\u5341\u591a\u5e74\u7684AI\u6210\u957f\u5927\u5bb6\u6709\u76ee\u5171\u7779\u3002\u4f46\u6210\u679c\u6bd5\u7adf\u5c5e\u4e8e\u8fc7\u53bb\uff0c\u671b\u5b50\u6210\u9f99\u7684\u4eba\u7c7b\u6bcd\u4eb2\u5bf9\u4e8e\u513f\u5b50\u7684\u4eca\u540e\u8be5\u5982\u4f55\u5b89\u6392\uff1f\u6bd5\u7adf\u513f\u5b50\u4ee5\u540e\u8fd8\u8981\u4e0a\u6e05\u5317\u5e38\u9752\u85e4\uff0c\u6bd5\u7adf\u4e03\u5927\u59d1\u516b\u5927\u59e8\u7684\u996d\u684c\u4e0a\uff0c\u4eba\u7c7b\u6bcd\u4eb2\u8fd8\u6307\u671b\u7740\u513f\u5b50\u6765\u957f\u8138\u7684\u4e0d\u662f\uff1f \u4e0d\u8fc7\u975e\u8981\u95ee\u4eba\u7c7b\u6bcd\u4eb2\u7684\u80b2\u513f\u8ba1\u5212\uff0c\u9996\u5148\u90a3\u4e9b\u6709\u6743\u6709\u52bf\u7684\u6258\u513f\u6240\u6240\u957f\u4eec\uff08\u4ee5Google, Facebook\u548cOpenAI\u7b49\u4e3a\u4ee3\u8868\uff09\u5982\u679c\u771f\u96c4\u5fc3\u4e07\u4e08\u4e5f\u4e00\u5b9a\u4e0d\u613f\u900f\u9732\u534a\u70b9\u98ce\u58f0\uff0c\u5176\u6b21\u53ef\u80fd\u4eba\u7c7b\u6bcd\u4eb2\u81ea\u5df1\u4e5f\u5f04\u7684\u4e0d\u662f\u592a\u6e05\u695a\uff0c\u65e0\u975e\u662f\u8d70\u4e00\u6b65\u77a7\u4e00\u6b65\u7f62\u4e86\u3002\u7136\u800c\u6ca1\u4ec0\u4e48\u80fd\u591f\u963b\u6321\u4eba\u7c7b\u5bf9\u4e8e\u672a\u6765\u7684\u597d\u5947\u5fc3\uff0c\u8ffd\u672c\u6eaf\u6e90\u6309\u56fe\u7d22\u9aa5\u4e4b\u4e0b\uff0c\u8bf4\u4e0d\u5b9a\u4e5f\u80fd\u7aa5\u7684\u4e00\u4e9b\u86db\u4e1d\u9a6c\u8ff9\u3002 \u56e0\u800c\uff0c\u65e0\u59a8\u62ac\u62ac\u5934\u770b\u770b\u661f\u7a7a\uff0c\u4e5f\u770b\u770b\u672a\u6765\uff0c\u4ee5\u671fAI\u7684\u4eca\u540e\u4e5f\u80fd\u5237\u5237\u670b\u53cb\u5708\uff0c\u611f\u53f9\u4e00\u4e0b\u5e74\u534e\u6613\u901d\uff0c\u751a\u800c\u81f3\u4e8e\u80fd\u4f53\u4f1a\u5f97\u5230\u4eba\u7c7b\u6bcd\u4eb2\u517b\u513f\u80b2\u5973\u7684\u8270\u96be\uff0c\u54ea\u6015\u53ea\u6709\u4e1d\u6beb\uff0c\u5927\u6982\u4eba\u7c7b\u6bcd\u4eb2\u4e5f\u5c31\u4e0d\u6789\u8d39\u4e86\u4e00\u7247\u53ef\u80fd\u548c\u4eba\u7c7b\u5386\u53f2\u4e00\u6837\u60a0\u4e45\u7684\u671b\u5b50\u6210\u9f99\u4e4b\u5fc3\u3002\u95f2\u8bdd\u5c11\u53d9\uff0c\u8ba9\u6211\u4eec\u5f00\u5f00\u8111\u6d1e\uff0c\u5927\u8a00\u4e0d\u60ed\u7684\u770b\u770b\u4eca\u540eNLP\u7684\u4e00\u4e9b\u53ef\u80fd\u6027\u3002\u53ea\u4e0d\u8fc7\u6211\u4eba\u5fae\u8a00\u8f7b\uff0c\u6682\u4e14\u5e7b\u60f3\u4e00\u4e0b\u7687\u5e1d\u7684\u91d1\u9504\u5934\u5427\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8bed\u8a00\u5b66\u6d41\u6d3e\u5927\u7ea6\u53ef\u4ee5\u5206\u4e3a\u4e94\u4e2a\u6d41\u6d3e\uff1a\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u3001\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u3001\u8f6c\u6362\uff0d\u751f\u6210\u8bed\u8a00\u5b66\u3001\u7cfb\u7edf\u529f\u80fd\u8bed\u8a00\u5b66\u548c\u8ba4\u77e5\u8bed\u8a00\u5b66\u8fd9\u4e94\u4e2a\u5927\u7684\u5b66\u6d3e\uff0c\u5176\u4e2d\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u5e74\u4ee3\u6bd4\u8f83\u4e45\u8fdc\u4e86\uff0c\u6ce8\u91cd\u641c\u96c6\u591a\u79cd\u8bed\u8a00\u5386\u53f2\u8d44\u6599\uff0c\u901a\u8fc7\u5bf9\u6bd4\u5f52\u7eb3\u603b\u7ed3\u7b49\u7b49\u65b9\u6cd5\uff0c\u8fdb\u800c\u7406\u89e3\u8bed\u8a00\u7684\u6f14\u5316\u548c\u53d1\u5c55\u5386\u7a0b\uff0c\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u7684\u4e3b\u8981\u8d21\u732e\u5728\u4e8e\u5b83\u628a\u8bed\u8a00\u5b66\u4ece\u5176\u4ed6\u5b66\u79d1\u91cc\u62bd\u79bb\u51fa\u6765\u6210\u4e3a\u4e00\u95e8\u72ec\u7acb\u7684\u5b66\u79d1\u3002 \u800c\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\uff08\u5927\u7ea6\u5174\u8d77\u4e8e20\u4e16\u7eaa20\u5e74\u4ee3\u5de6\u53f3\uff09\u7684\u5f00\u5c71\u9f3b\u7956\u7d22\u7eea\u5c14\uff08\u540c\u65f6\u4ed6\u4e5f\u662f\u73b0\u4ee3\u8bed\u8a00\u5b66\u4e4b\u7236\uff09\uff0c\u5bf9\u4e8e\u8bed\u8a00\u7684\u7406\u89e3\uff0c\u4ed6\u6709\u4e00\u4e2a\u975e\u5e38\u7ecf\u5178\u7684\u7c7b\u6bd4\uff0c\u4ed6\u8ba4\u4e3a\u8bed\u8a00\u5c31\u50cf\u662f\u4e00\u76d8\u8c61\u68cb\uff0c\u68cb\u76d8\u4e0a\u7684\u6bcf\u4e00\u4e2a\u68cb\u5b50\u90fd\u6709\u7279\u5b9a\u7684\u6e38\u620f\u89c4\u5219\uff0c\u68cb\u5b50\u53ea\u4e0d\u8fc7\u662f\u8fd9\u4e9b\u7279\u5b9a\u6e38\u620f\u89c4\u5219\u7684\u4e00\u4e2a\u5b9e\u7269\u6807\u8bb0\u800c\u5df2\uff0c\u5982\u679c\u67d0\u5929\u5f04\u4e22\u4e86\u67d0\u4e00\u4e2a\u68cb\u5b50\uff0c\u6211\u4eec\u7acb\u9a6c\u53ef\u4ee5\u62ff\u4efb\u4f55\u4e00\u4e2a\u5c0f\u7269\u4ef6\u6765\u4ee3\u66ff\u8fd9\u4e2a\u68cb\u5b50\u7684\u529f\u80fd\uff0c\u53ea\u8981\u6e38\u620f\u89c4\u5219\u4e0d\u53d8\uff0c\u90a3\u4e48\u68cb\u5c40\u4f9d\u7136\u80fd\u591f\u7167\u5e38\u8fdb\u884c\uff0c\u68cb\u5b50\u66ff\u6362\u524d\u540e\u57fa\u672c\u4e0d\u4f1a\u6709\u4efb\u4f55\u5dee\u522b\uff0c \u800c\u7d22\u7eea\u5c14\u5219\u8ba4\u4e3a\u8bed\u8a00\u91cc\u7684\u57fa\u672c\u5355\u4f4d\u8bf8\u5982\u8bcd\u8bed\u4e60\u8bed\u7b49\u7b49\u90fd\u53ea\u4e0d\u8fc7\u662f\u68cb\u76d8\u4e0a\u7684\u68cb\u5b50\uff08signifiant\uff0c\u80fd\u6307\uff09\uff0c\u91cd\u8981\u7684\u4e0d\u662f\u68cb\u5b50\u672c\u8eab\uff0c\u800c\u662f\u68cb\u5b50\u80cc\u540e\u5bf9\u5e94\u7684\u4e00\u6574\u5957\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u8bed\u8a00\u91cc\u7684\u5404\u79cd\u7ed3\u6784\u6216\u7ea6\u5b9a\u4fd7\u79f0\u7684\u6307\u4ee3\u6216\u7528\u6cd5\uff08signifi\u00e9\uff0c\u6240\u6307\uff09 \u3002\u8c61\u68cb\u7684\u6574\u4e2a\u89c4\u5219\u4fbf\u662f\u6211\u4eec\u6240\u4f7f\u7528\u7684\u4e00\u6574\u5957\u8bed\u8a00\u7cfb\u7edf\uff0c\u6bd4\u5982\u8c61\u68cb\u7684\u89c4\u5219\u4fbf\u662f\u6211\u4eec\u7684\u6c49\u8bed\uff0c\u800c\u56fd\u9645\u8c61\u68cb\u7684\u89c4\u5219\u4fbf\u662f\u82f1\u8bed\uff0c\u4e24\u79cd\u8c61\u68cb\u5404\u81ea\u4f7f\u7528\u7684\u68cb\u5b50\u5404\u6709\u4e0d\u540c\uff0c\u89c4\u5219\u81ea\u7136\u4e5f\u6709\u6240\u533a\u522b\u3002\u7d22\u7eea\u5c14\u4e4b\u540e\uff0c\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u53c8\u8fdb\u4e00\u6b65\u53d1\u5c55\u6210\u4e3a\u4e09\u4e2a\u72ec\u7acb\u5b50\u5b66\u6d3e\uff0c\u4f46\u5b83\u4eec\u7684\u5171\u540c\u70b9\u90fd\u662f\u548c\u7d22\u7eea\u5c14\u4e00\u8109\u76f8\u627f\u7684\uff0c\u4e5f\u5c31\u662f\u90fd\u8ba4\u4e3a**\u8bed\u8a00\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7b26\u53f7\u7cfb\u7edf**\uff0c\u7b26\u53f7\u53ea\u662f\u8868\u9762\uff0c\u66f4\u91cd\u8981\u7684\u662f\u6316\u6398\u548c\u7814\u7a76\u7b26\u53f7\u7cfb\u7edf\u5185\u5728\u7684\u89c4\u5219\u548c\u8054\u7cfb\u3002\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u5174\u8d77\u540e\uff0c\u6807\u5fd7\u7740\u73b0\u4ee3\u8bed\u8a00\u5b66\u7684\u8bde\u751f\uff0c\u5e76\u4e14\u5728\u4e00\u6bb5\u65f6\u671f\u5185\u4e0d\u4ec5\u663e\u8457\u7684\u5f71\u54cd\u4e86\u540e\u6765\u7684\u8bed\u8a00\u5b66\u6d41\u6d3e\uff0c\u8fd8\u5f71\u54cd\u4e86\u5176\u4ed6\u7684\u4e00\u4e9b\u4eba\u6587\u5b66\u79d1\u3002 \u5230\u4e86 1957 \u5e74\uff0c\u4e54\u59c6\u65af\u57fa\u51fa\u7248\u300a\u53e5\u6cd5\u7ed3\u6784\u300b\u4e00\u4e66\uff0c\u6807\u5fd7\u7740\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u7684\u8bde\u751f\u3002 \u4e54\u59c6\u65af\u57fa\u7684\u4e3b\u8981\u89c2\u70b9\u5219\u8ba4\u4e3a\u4eba\u7c7b\u5929\u751f\u6709\u4e00\u5957\u666e\u904d\u8bed\u6cd5\uff0c\u6211\u4eec\u65e5\u5e38\u7684\u8bed\u8a00\u7cfb\u7edf\u53ea\u4e0d\u8fc7\u662f\u8fd9\u5957\u666e\u904d\u8bed\u6cd5\u7684\u5f62\u5f0f\u5316\u4f53\u73b0\u800c\u5df2 \u3002 \u56e0\u6b64\u4ed6\u8ba4\u4e3a\u8bed\u8a00\u4e2d\u5b58\u5728\u7740\u6df1\u5c42\u7ed3\u6784\u548c\u8868\u5c42\u7ed3\u6784\uff0c\u6df1\u5c42\u7ed3\u6784\u4e0e\u610f\u4e49\u548c\u6982\u5ff5\u76f8\u5173\uff0c\u800c\u8868\u5c42\u7ed3\u6784\u5219\u4e0e\u8bed\u97f3\u548c\u7b26\u53f7\u76f8\u5173\uff0c\u8fd9\u4e24\u5c42\u7ed3\u6784\u7531\u4e00\u5957\u8f6c\u6362\u8bed\u6cd5\u8fde\u63a5\u8d77\u6765\uff0c\u4e5f\u5c31\u662f\u7531\u6df1\u5c42\u7ed3\u6784\u751f\u6210\u8868\u5c42\u7ed3\u6784\u3002\u4ed6\u4e3a\u6b64\u8fd8\u7279\u522b\u4e3e\u4e86\u4e00\u4e9b\u4f8b\u5b50\uff0c\u4e3a\u4e86\u8bf4\u660e\u4e24\u4e2a\u53e5\u5b50\u8868\u5c42\u7ed3\u6784\u7c7b\u4f3c\u4e43\u81f3\u5b8c\u5168\u4e00\u6837\uff0c\u4f46\u662f\u6df1\u5c42\u8bed\u4e49\u5b8c\u5168\u4e0d\u76f8\u5173\u7684\u73b0\u8c61\uff0c\u6bd4\u5982\uff1a Flying planes can be dangerous. \u8fd9\u4e2a\u53e5\u5b50\u53ef\u4ee5\u56e0\u4e3a\u540c\u4e00\u4efd\u8868\u5c42\u7ed3\u6784\u5bf9\u5e94\u5230\u4e24\u5957\u4e0d\u540c\u7684\u6df1\u5c42\u7ed3\u6784\uff0c\u800c\u8868\u8fbe\u51fa\u5b8c\u5168\u4e0d\u4e00\u6837\u7684\u610f\u4e49\uff0c\u7b2c\u4e00\u79cd\u662f flying \u4f5c\u4e3a\u5f62\u5bb9\u8bcd\uff0c\u90a3\u4e48\u6b64\u65f6\u53e5\u5b50\u60f3\u8868\u8fbe\u7684\u610f\u4e49\u662f\u5728\u5929\u4e0a\u6b63\u5728\u98de\u884c\u7684\u98de\u673a\u5f88\u5371\u9669\uff1b\u800c\u7b2c\u4e8c\u79cd\u662f\u628a\"flying planes\"\u89e3\u6784\u6210\u4e00\u79cd\u52a8\u5bbe\u7ed3\u6784\uff0c\u90a3\u4e48\u8fd9\u4e2a\u53e5\u5b50\u8868\u8fbe\u7684\u610f\u601d\u5c31\u6210\u4e86\u5f00\u98de\u673a\u8fd9\u4e2a\u52a8\u4f5c\u5f88\u5371\u9669\u3002 \u4e54\u59c6\u65af\u57fa\u4e3e\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5c31\u662f\u4e3a\u4e86\u8bf4\u660e\u4f20\u7edf\u7684\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u5bf9\u4e8e\u8fd9\u79cd\u53e5\u5b50\u6839\u672c\u65e0\u80fd\u4e3a\u529b\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u8868\u5c42\u7ed3\u6784\u662f\u5b8c\u5168\u4e00\u81f4\u7684\uff0c\u4ece\u800c\u5f97\u51fa\u8bed\u8a00\u6709\u4e00\u79cd\u66f4\u4e3a\u672c\u8d28\u7684\u6df1\u5c42\u7ed3\u6784\u7684\u7ed3\u8bba\u3002 \u4f46\u662f\u4e2a\u4eba\u7406\u89e3\uff0c\u4e0e\u5176\u8bf4\u662f\u8bed\u8a00\u5b66\u7684\u6df1\u5c42\u7ed3\u6784\uff0c\u8fd8\u4e0d\u5982\u8bf4\u662f\u4eba\u7c7b\u8ba4\u77e5\u4f53\u7cfb\u6216\u8005\u5ba2\u89c2\u4e16\u754c\u7684\u7ed3\u6784\u5316\u8868\u793a\uff0c\u56e0\u4e3a\u6df1\u5c42\u7ed3\u6784\u5fc5\u7136\u5bf9\u5e94\u5230\u4eba\u7c7b\u7684\u8ba4\u77e5\u4f53\u7cfb\u3002\u5e76\u4e14\u4e54\u59c6\u65af\u57fa\u8fc7\u4e8e\u5f3a\u8c03\u4e86\u666e\u904d\u8bed\u6cd5\u7684\u5929\u751f\u6027\uff0c\u800c\u5ffd\u7565\u4e86\u540e\u5929\u8bed\u8a00\u7684\u5851\u9020\u548c\u4e60\u5f97\u3002 \u540e\u6765\u4e54\u59c6\u65af\u57fa\u7684\u4f17\u591a\u5f1f\u5b50\uff08\u4e54\u6cbb\u83b1\u8003\u592b\u7b49\u4eba\uff09\u4e5f\u516c\u5f00\u5ba3\u5224\u4e0e\u81ea\u5df1\u8001\u5e08\u4e54\u59c6\u65af\u57fa\u7684\u8bed\u8a00\u5b66\u89c2\u70b9\u51b3\u88c2\uff0c\u5e76\u5404\u81ea\u72ec\u7acb\u53d1\u5c55\u51fa\u4e86\u4e00\u4e9b\u65b0\u7684\u8bed\u8a00\u5b66\u7406\u8bba\uff0c\u6bd4\u5982\u4e54\u6cbb\u83b1\u8003\u592b\u7684\u8ba4\u77e5\u8bed\u8a00\u5b66\u6d41\u6d3e\u3002 \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4ece\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\uff0c\u5230\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\uff0c\u518d\u5230\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\uff0c\u8fd9\u4e09\u4e2a\u6d41\u6d3e\u57fa\u672c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u8109\u76f8\u627f\u7684\uff0c\u53ea\u4e0d\u8fc7\u6240\u60f3\u8981\u63ed\u793a\u7684\u4e1c\u897f\u8d8a\u6765\u8d8a\u6df1\u5c42\uff0c \u4ece\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u7740\u91cd\u4e8e\u7814\u7a76\u8bed\u8a00\u5b66\u7684\u4e00\u4e9b\u8868\u73b0\u5f62\u5f0f\u548c\u6f14\u5316\u5f62\u6001\uff0c\u5230\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u7740\u91cd\u4e8e\u7814\u7a76\u7b26\u53f7\u7cfb\u7edf\u80cc\u540e\u7684\u7ed3\u6784\uff0c\u518d\u5230\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u8ba4\u4e3a\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u63ed\u793a\u7684\u53ea\u662f\u8bed\u8a00\u7684\u8868\u5c42\u7ed3\u6784\uff0c\u56e0\u800c\u81ea\u5df1\u63d0\u51fa\u4e86\u6df1\u5c42\u7ed3\u6784\u7684\u6982\u5ff5\u3002 \u800c\u5230\u4e86 20 \u4e16\u7eaa\u516b\u4e5d\u5341\u5e74\u4ee3\uff0c\u4ee5\u97e9\u793c\u5fb7\u4e3a\u4ee3\u8868\u7684\u4e00\u4e9b\u8bed\u8a00\u5b66\u5bb6\uff0c\u9010\u6e10\u6ce8\u610f\u5230\u65e0\u8bba\u662f\u7ed3\u6784\u4e3b\u4e49\u8fd8\u662f\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\uff0c\u5b83\u4eec\u90fd\u7247\u9762\u7684\u5f3a\u8c03\u8bed\u8a00\u5b66\u7684\u7406\u8bba\u5f62\u5f0f\uff0c\u800c\u5ffd\u89c6\u4e86\u8bed\u8a00\u7684\u793e\u4f1a\u7684\u529f\u80fd\u5c5e\u6027\uff0c \u97e9\u793c\u5fb7\u8ba4\u4e3a\u8fd9\u8bed\u8a00\u7684\u7ed3\u6784\u548c\u8bed\u6cd5\u7b49\u7b49\u7406\u8bba\u5f62\u5f0f\uff0c\u4ee5\u53ca\u793e\u4f1a\u529f\u80fd\u5c5e\u6027\u662f\u8bed\u8a00\u7684\u4e24\u4e2a\u65b9\u9762\uff0c\u8fd9\u4e8c\u8005\u90fd\u5f88\u91cd\u8981\uff0c\u4ed6\u60f3\u8981\u628a\u4e8c\u8005\u7edf\u4e00\u8d77\u6765\u3002 \u56e0\u6b64\u53d1\u5c55\u4e86\u4ed6\u81ea\u5df1\u7684\u8bed\u8a00\u5b66\u89c2\u70b9\uff0c\u4ed6\u63d0\u51fa\u4e86\u7cfb\u7edf\u8bed\u6cd5\u548c\u529f\u80fd\u8bed\u6cd5\u7684\u6982\u5ff5\uff0c\u524d\u8005\u5f3a\u8c03\u8bed\u8a00\u7684\u5185\u5728\u7ed3\u6784\u548c\u5f62\u5f0f\u7406\u8bba\uff0c\u8fd9\u70b9\u548c\u7d22\u7eea\u5c14\u7684\u7ed3\u6784\u4e3b\u4e49\u4e00\u8109\u76f8\u627f\uff0c\u4f46\u4ed6\u540c\u65f6\u8fd8\u63d0\u51fa\u4e86\u529f\u80fd\u8bed\u6cd5\uff0c\u7740\u91cd\u8bed\u8a00\u7684\u793e\u4f1a\u5c5e\u6027\uff0c\u8bf4\u660e\u8bed\u8a00\u662f\u793e\u4f1a\u4ea4\u6d41\u548c\u6c9f\u901a\u7684\u5a92\u4ecb\uff0c\u4e0d\u8fc7\u7531\u4e8e\u5728\u7cfb\u7edf\u8bed\u6cd5\u4e0a\u7684\u5f71\u54cd\u529b\u8fdc\u4e0d\u5982\u4e54\u59c6\u65af\u57fa\u7b49\u6d41\u6d3e\u7684\u5f71\u54cd\u529b\uff0c\u529f\u80fd\u8bed\u6cd5\u7684\u5efa\u6811\u5012\u662f\u522b\u7684\u6d41\u6d3e\u6240\u7f3a\u4e4f\u7684\uff0c\u56e0\u6b64\u628a\u97e9\u793c\u5fb7\u7684\u5b66\u8bf4\u5c31\u53eb\u505a\u7cfb\u7edf\u529f\u80fd\u8bed\u8a00\u5b66\u4e86\u3002 \u800c\u4e0a\u6587\u63d0\u5230\u7684\u4e54\u59c6\u65af\u57fa\u7684\u5f1f\u5b50\u4e4b\u4e00\u4e54\u6cbb\u83b1\u8003\u592b\uff0c\u8ba4\u4e3a\u4ed6\u7684\u8001\u5e08\u5bf9\u4e8e\u4eba\u7c7b\u5929\u751f\u5177\u6709\u666e\u904d\u8bed\u6cd5\u7684\u89c2\u70b9\u662f\u5927\u9519\u7279\u9519\uff0c\u5c24\u5176\u662f\u8f6c\u6362\u751f\u6210\u8bed\u6cd5\u4e2d\u8ba4\u4e3a\u6df1\u5c42\u7ed3\u6784\u7531\u4e00\u4e9b\u6709\u9650\u7684\u666e\u904d\u8bed\u6cd5\u7ec4\u6210\uff0c\u7740\u91cd\u8bed\u8a00\u89c4\u5219\u7684\u5f62\u5f0f\u5316\u3002 \u4e54\u6cbb\u83b1\u8003\u592b\u4e25\u5389\u62a8\u51fb\u4e86\u4ed6\u8001\u5e08\u7684\u89c2\u70b9\uff0c\u4e0e\u8f6c\u6362\u751f\u6210\u8bed\u6cd5\u7740\u91cd\u5f62\u5f0f\u548c\u89c4\u5219\u7684\u63a2\u8ba8\u76f8\u53cd\uff0c \u8ba4\u77e5\u8bed\u8a00\u5b66\u8ba4\u4e3a\u8bed\u8a00\u4e0d\u662f\u4eba\u7c7b\u7684\u4e00\u4e2a\u72ec\u7acb\u7cfb\u7edf\uff0c\u4eba\u7c7b\u7684\u4e00\u5207\u8bed\u8a00\u884c\u4e3a\u90fd\u53ea\u4e0d\u8fc7\u662f\u4eba\u7c7b\u5bf9\u4e8e\u5ba2\u89c2\u4e16\u754c\u548c\u7cbe\u795e\u4e16\u754c\u4eb2\u8eab\u4f53\u9a8c\u7684\u5916\u5316 \uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8bed\u8a00\u65e0\u8bba\u628a\u5b83\u53eb\u505a\u7b26\u53f7\u4e5f\u597d\uff0c\u53eb\u505a\u8bed\u6cd5\u7ed3\u6784\u4e5f\u597d\uff0c\u53eb\u505a\u7cfb\u7edf\u4e5f\u597d\uff0c\u90fd\u9003\u79bb\u4e0d\u4e86\u8bed\u8a00\u662f\u4eba\u7c7b\u8ba4\u77e5\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u8bed\u8a00\u5e76\u4e0d\u72ec\u7acb\u5b58\u5728\u3002 \u4eba\u7c7b\u5728\u957f\u671f\u7684\u81ea\u7136\u6f14\u5316\u4e2d\uff0c\u5f62\u6210\u4e86\u4e00\u5957\u81ea\u5df1\u72ec\u6709\u7684\u8ba4\u77e5\u7cfb\u7edf\uff0c\u800c\u901a\u8fc7\u8fd9\u5957\u8ba4\u77e5\u7cfb\u7edf\uff0c\u4eba\u7c7b\u53ef\u4ee5\u83b7\u5f97\u5bf9\u4e8e\u8eab\u8fb9\u5ba2\u89c2\u73af\u5883\u4ee5\u53ca\u81ea\u5df1\u5185\u90e8\u7cbe\u795e\u4e16\u754c\u7684\u4e00\u5957\u72ec\u7279\u4f53\u9a8c\uff0c\u8fd9\u5957\u4f53\u9a8c\u5982\u679c\u6620\u5c04\u5230\u5916\u5728\u7684\u8bed\u97f3\u6216\u6587\u4e0a\uff0c\u4fbf\u5f62\u6210\u4e86\u6211\u4eec\u4eba\u7c7b\u7684\u8bed\u8a00\u7cfb\u7edf\u3002\u56e0\u6b64\u4eba\u7c7b\u7684\u8bed\u8a00\u4e0e\u4eba\u7c7b\u5176\u4ed6\u8ba4\u77e5\u80fd\u529b\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u533a\u522b\u3002 \u4e0d\u8fc7\uff0c\u8ba4\u77e5\u8bed\u8a00\u5b66\u5e76\u6ca1\u6709\u4e00\u5473\u5730\u67b6\u7a7a\u81ea\u5df1\u7684\u8bed\u8a00\u5b66\u89c2\u5ff5\uff0c\u5b83\u4e5f\u9002\u65f6\u5730\u9053\u51fa\u4e86\u8bed\u6cd5\u89c4\u5219\u548c\u4eba\u7c7b\u7684\u8ba4\u77e5\u7cfb\u7edf\u6709\u4e00\u5b9a\u7684\u5bf9\u5e94\u6027\uff0c\u8a00\u4e0b\u4e4b\u610f\u4fbf\u662f\u8bf4\u8bed\u6cd5\u89c4\u5219\u662f\u4eba\u7c7b\u8ba4\u77e5\u7cfb\u7edf\u62bd\u8c61\u5316\u7684\u5916\u5728\u4f53\u73b0\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u8ba4\u77e5\u8bed\u8a00\u5b66\u6bd4\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u53c8\u66f4\u8fdb\u4e86\u4e00\u6b65\uff0c\u76f4\u63a5\u4ece\u7814\u7a76\u4eba\u7c7b\u7684\u8ba4\u77e5\u89d2\u5ea6\u6765\u7814\u7a76\u4eba\u7c7b\u7684\u8bed\u8a00\u5b66\u3002\u4e54\u6cbb\u83b1\u8003\u592b\u5728\u8bed\u8a00\u5b66\u4e2d\u5f15\u5165\u4e86\u9690\u55bb\u7684\u6982\u5ff5\uff0c\u8ba4\u4e3a\u9690\u55bb\u662f\u4eba\u7c7b\u6700\u91cd\u8981\u7684\u8ba4\u77e5\u6d3b\u52a8\u4e4b\u4e00\uff0c\u4e5f\u662f\u8bed\u8a00\u4e2d\u6700\u666e\u904d\u7684\u73b0\u8c61\u3002 \u7136\u800c\u56de\u5230\u5f53\u4e0b\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4f3c\u4e4e\u73b0\u5728\u8c08\u8ba4\u77e5\uff0c\u6709\u70b9\u4e3a\u65f6\u5c1a\u65e9\u3002\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u5386\u7a0b\u4e2d\uff0c\u9664\u4e86\u4e54\u59c6\u65af\u57fa\u7684\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u66fe\u7ecf\u5728\u4e0a\u4e16\u7eaa\u516d\u4e03\u5341\u5e74\u4ee3\u5927\u653e\u5f02\u5f69\uff0c\u4e00\u5ea6\u6210\u4e3a\u5f53\u65f6\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u6d41\u65b9\u6cd5\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u4f3c\u4e4e\u7406\u8bba\u8bed\u8a00\u5b66\u754c\u4e00\u76f4\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8131\u94a9\u6bd4\u8f83\u4e25\u91cd\uff0c\u8fd9\u4e00\u65b9\u9762\u63ed\u793a\u4e86\u4eba\u7c7b\u8bed\u8a00\u7cfb\u7edf\u7684\u590d\u6742\uff0c\u53e6\u4e00\u65b9\u9762\uff0c \u4e5f\u9884\u793a\u7740\u73b0\u5728\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7f3a\u4e4f\u4e25\u5bc6\u7684\u7406\u8bba\u652f\u6301\u3002 \u8bf4\u767d\u4e86\uff0c\u73b0\u5728\u7684 NLP \u754c\uff0c\u5c24\u5176\u4ee5 BERT \u4e3a\u4ee3\u8868\u7684\u505a\u6cd5\uff0c\u5b9e\u9645\u4e0a\u662f\u7b80\u5355\u7c97\u66b4\u7684\u4ee3\u540d\u8bcd\uff0c \u5b83\u4eec\u628a\u4eba\u7c7b\u8bed\u8a00\u4e60\u5f97\u8fc7\u7a0b\u4e2d\u7684\u8f7b\u91cf\u3001\u6cdb\u5316\u548c\u4f4e\u529f\u8017\uff0c\u7528\u5927\u6570\u636e\u3001\u5927\u6a21\u578b\u548c\u5927\u8ba1\u7b97\u91cf\u70ae\u8f70\u7684\u8361\u7136\u65e0\u5b58 \u3002 \u7ad9\u5728\u773c\u529b\u6240\u53ca\u4e4b\u5904\u7684\u6ee1\u76ee\u75ae\u75cd\u4e0a\uff0c\u6211\u4eec\u4f9d\u7136\u65e0\u6cd5\u8ba9\u673a\u5668\u771f\u6b63\u660e\u767d\u201c\u55b5\u661f\u4eba\u201d\u8fd9\u4e2a\u8bcd\u5bf9\u4e8e\u4eba\u7c7b\u800c\u8a00\uff0c\u5176\u80cc\u540e\u7a76\u7adf\u610f\u5473\u7740\u4e00\u4e2a\u600e\u6837\u7684\u590d\u6742\u60c5\u7eea\u548c\u4f53\u9a8c\uff08\u66f4\u6709\u8da3\u7684\u662f\uff0c\u5373\u4fbf\u5bf9\u4e8e\u6bcf\u4e2a\u4eba\u7c7b\u4e2a\u4f53\u800c\u8a00\uff0c\u5176\u80cc\u540e\u7684\u4f53\u9a8c\u4e5f\u662f\u5343\u5dee\u4e07\u522b\u7684\uff0c\u53ef\u89c1\u8bed\u8a00\u7b3c\u9614\u4e86\u7b26\u53f7\u6027\u3001\u8ba4\u77e5\u6027\u3001\u793e\u4f1a\u6027\u548c\u4e2a\u4f53\u6027\u4e4b\u540e\u7684\u590d\u6742\u7a0b\u5ea6\uff09\u3002 \u7136\u800c\u5728\u8eab\u540e\u7559\u4e0b\u4e00\u7247\u5e9f\u589f\u548c\u5c38\u9aa8\u7684 BERT\uff0c\u6b63\u51c6\u5907\u91cd\u5efa\u4e00\u4e2a\u4f1f\u5927\u65b0\u5e1d\u56fd\u7684 BERT\uff0c\u5b83\u7a76\u7adf\u662f\u8981\u9009\u62e9\u5f00\u5fc3\u5462\u8fd8\u662f\u96be\u8fc7\uff1f\u5bf9\u4e8e\u4eba\u7c7b\u6bcd\u4eb2\u800c\u8a00\uff0c\u8fd9\u5927\u6982\u4f1a\u662f\u4e2a\u95ee\u9898\u3002 \u4e0d\u8fc7\u65e0\u8bba\u5982\u4f55\uff0c\u5e1d\u56fd\u7684\u5efa\u7acb\u603b\u662f\u8270\u96be\u7684\u3002\u8ba9\u4eba\u7c7b\u6bcd\u4eb2\u8db3\u53ef\u6b23\u6170\u7684\u662f\uff0c\u5373\u4fbf\u6b65\u5c65\u7ef4\u8270\uff0c\u6258\u513f\u6240\u91cc\u7684 AI \u513f\u5b50\u4eec\u4f9d\u7136\u4e00\u6b65\u4e00\u6b65\u575a\u5b9a\u7684\u8e29\u4e0a\u4e86\u7b80\u964b\u7684\u68af\u5b50\u3002 \u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u56de\u9996\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u548c\u4eba\u7c7b\u6bcd\u4eb2\u7684\u8bed\u8a00\u4e60\u5f97\u65b9\u5f0f\u4f9d\u9760\u67d0\u4e00\u4e2a\u673a\u7f18\u5de7\u5408\u7684\u57fa\u56e0\u7a81\u53d8\u4e0d\u540c\uff0cAI \u8e0f\u51fa\u4e86\u4e00\u6761\u53ea\u5c5e\u4e8e\u5b83\u81ea\u5df1\u7684\u8def\uff0c\u672a\u6765\u7684\u5de8\u4eba\u80a9\u8180\u548c\u68af\u5b50\u5728\u54ea\u91cc\uff0c\u6211\u4eec\u662f\u5426\u9700\u8981\u9009\u7528\u65b0\u7684\u5de8\u4eba\u80a9\u8180\u548c\u68af\u5b50\uff0c\u8fd9\u90fd\u662f\u6210\u957f\u7684\u5fc5\u7ecf\u4e4b\u75db\uff0c\u4e00\u5207\u90fd\u7559\u7ed9\u672a\u6765\u53bb\u8bc1\u5b9e\u6216\u8bc1\u4f2a\u5427\u3002 Reference \u00b6 A Neural Probabilistic Language Model \u4e00\u6587\u770b\u61c2NLP\u795e\u7ecf\u7f51\u7edc\u53d1\u5c55\u5386\u53f2\u4e2d\u6700\u91cd\u8981\u76848\u4e2a\u91cc\u7a0b\u7891\uff01 Representation Learning: A Review and New Perspectives Efficient estimation of word representations in vector space Distributed Representations of Words and Phrases and their Compositionality GloVe: Global Vectors for Word Representation Word and Document Embeddings based on Neural Network Approaches fasttext [\u8bba\u6587\u7b14\u8bb0]ELMo","title":"NLP\u7b80\u4ecb"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#nlp","text":"NLP\u7684\u5de8\u4eba\u80a9\u8180 \u901a\u5e38\u6765\u8bf4\uff0cNLP\u4e2d\u76d1\u7763\u4efb\u52a1\u7684\u57fa\u672c\u5957\u8def\u90fd\u53ef\u4ee5\u7528\u4e09\u4e2a\u79ef\u6728\u6765\u8fdb\u884c\u5f52\u7eb3\uff1a \u6587\u672c\u6570\u636e\u641c\u96c6\u548c\u9884\u5904\u7406 \u5c06\u6587\u672c\u8fdb\u884c\u7f16\u7801\u548c\u8868\u5f81 \u8bbe\u8ba1\u6a21\u578b\u89e3\u51b3\u5177\u4f53\u4efb\u52a1 \u5176\u4e2d\u6570\u636e\u5904\u7406\u9636\u6bb5\u81ea\u4e0d\u7528\u8bf4\uff0c\u5404\u4e2a\u4efb\u52a1\u6309\u7167\u5404\u81ea\u7684\u903b\u8f91\u53bb\u5904\u7406\u548c\u5f97\u5230\u76f8\u5e94\u7684\u8f93\u5165\u3002 \u800c\u5176\u4e2d\u7684\u7b2c\u4e8c\u9636\u6bb5Encoder\u6a21\u5757\u4e0e\u7b2c\u4e09\u9636\u6bb5\u7684Task-specific Model\u6a21\u5757\uff0c\u901a\u5e38\u6765\u8bf4\uff0c\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u6e05\u6670\uff0c\u4e8c\u8005\u4e4b\u95f4\u4e92\u6709\u6e17\u900f\u3002\u800c\u56de\u987e\u8fc7\u53bb\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684NLP\u4efb\u52a1\u53ef\u4ee5\u53d1\u73b0\uff0c\u51e0\u4e4e\u7edd\u5927\u591a\u6570\u90fd\u6bd4\u8f83\u7b26\u5408\u8fd9\u4e09\u5c42\u6982\u5ff5\u3002\u6bd4\u5982\u5f88\u591a\u751f\u6210\u4efb\u52a1\u7684Seq2Seq\u6846\u67b6\u4e2d\u4e0d\u5916\u4e4e\u90fd\u6709\u4e00\u4e2aEncoder\u548c\u4e00\u4e2aDecoder\uff0c\u5bf9\u5e94\u5230\u8fd9\u91cc\u7684\u8bddDecoder\u66f4\u50cf\u662f\u4e00\u4e2aTask-specific Model\uff0c\u7136\u540e\u76f8\u5e94\u7684\u5c06Encoder\u505a\u4e00\u4e9b\u7ec6\u5fae\u7684\u8c03\u6574\uff0c\u6bd4\u5982\u5f15\u5165Attention\u673a\u5236\u7b49\u7b49\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u7684\u7ed3\u6784\uff0c\u5219Encoder\u6a21\u5757\u4e0eTask-specific Model\u6a21\u5757\u7684\u533a\u5206\u66f4\u4e3a\u660e\u663e\u548c\u6e05\u6670\uff0cEncoder\u8d1f\u8d23\u63d0\u53d6\u6587\u672c\u7684\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u4e00\u4e9b\u5168\u8fde\u63a5\u5c42\u548cSoftmax\u5c42\u4fbf\u53ef\u4ee5\u5f53\u505aTask-specific Model\u6a21\u5757\uff0c\u5982\u6b64\u4fbf\u5b8c\u6210\u4e86\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3002 \u65e2\u7136\u5f88\u591a\u7684NLP\u4efb\u52a1\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e09\u4e2a\u6a21\u5757\u6765\u8fdb\u884c\u5f52\u7eb3\u7684\u8bdd\uff0c\u5e76\u4e14\u5176\u4e2d\u6570\u636e\u5c42\u548cTask-specific Model\u6a21\u5757\u5c42\u53ef\u80fd\u6839\u636e\u5177\u4f53\u4efb\u52a1\u7684\u4e0d\u540c\u9700\u8981\u505a\u4e00\u4e9b\u76f8\u5e94\u7684\u8bbe\u8ba1\uff0c\u800cEncoder\u5c42\u4fbf\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u76f8\u5bf9\u6bd4\u8f83\u901a\u7528\u7684\u6a21\u5757\u6765\u4f7f\u7528\u3002\u90a3\u4e48\u81ea\u7136\u4f1a\u6709\u4e00\u4e2a\u60f3\u6cd5\uff0c\u80fd\u4e0d\u80fd\u7c7b\u4f3c\u4e8e\u56fe\u50cf\u9886\u57df\u4e2d\u7684ImageNet\u4e0a\u9884\u8bad\u7ec3\u7684\u5404\u79cd\u6a21\u578b\uff0c\u6765\u505a\u4e00\u4e2aNLP\u4e2d\u9884\u8bad\u7ec3\u597d\u7684Encoder\u6a21\u5757\uff0c\u7136\u540e\u6211\u62ff\u6765\u76f4\u63a5\u5229\u7528\u5c31\u597d\u4e86\uff1f\u5e94\u8be5\u8bf4\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u5e76\u4e0d\u96be\u60f3\u5230\uff0cNLP\u4eba\u4e5f\u82b1\u4e86\u4e00\u4e9b\u65f6\u95f4\u53bb\u601d\u8003NLP\u4e2d\u7a76\u7adf\u8be5\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e9b\u66f4\u901a\u7528\u7684\u53ef\u4ee5\u8fc1\u79fb\u5229\u7528\u7684\u4e1c\u897f\uff0c\u800c\u4e0d\u662f\u6240\u6709\u7684\u4efb\u52a1\u90fd\u8981\u201cfrom scratch\u201d\u3002\u56e0\u4e3a\u5982\u4f55\u5c3d\u91cf\u5229\u7528\u5df2\u6709\u7684\u77e5\u8bc6\u3001\u7ecf\u9a8c\u548c\u5de5\u5177\uff0c\u907f\u514d\u91cd\u590d\u9020\u8f6e\u5b50\uff0c\u60f3\u5c3d\u4e00\u5207\u529e\u6cd5\u201c\u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u201d\u5feb\u901f\u53d1\u5c55\uff0c\u6211\u60f3\u5927\u6982\u4e5f\u662f\u6700\u6734\u7d20\u7684\u201c\u53d1\u5c55\u662f\u786c\u9053\u7406\u201d\u7684\u4f53\u73b0\u3002","title":"NLP\u7b80\u4ecb"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#1","text":"\u72b9\u5982\u751f\u547d\u7684\u8bde\u751f\u4e4b\u521d\uff0c\u6df7\u6c8c\u800c\u539f\u59cb\u3002\u5728word2vec\u8bde\u751f\u4e4b\u524d\uff0cNLP\u4e2d\u5e76\u6ca1\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u65b9\u6cd5\u53bb\u8868\u793a\u4e00\u6bb5\u6587\u672c\uff0c\u5404\u4f4d\u524d\u8f88\u548c\u5927\u5e08\u4eec\u53d1\u660e\u4e86\u8bb8\u591a\u7684\u65b9\u6cd5\uff1a\u4eceone-hot\u8868\u793a\u4e00\u4e2a\u8bcd\u5230\u7528bag-of-words\u6765\u8868\u793a\u4e00\u6bb5\u6587\u672c\uff0c\u4ecek-shingles\u628a\u4e00\u6bb5\u6587\u672c\u5207\u5206\u6210\u4e00\u4e9b\u6587\u5b57\u7247\u6bb5\u5230\u6c49\u8bed\u4e2d\u7528\u5404\u79cd\u5e8f\u5217\u6807\u6ce8\u65b9\u6cd5\u5c06\u6587\u672c\u6309\u8bed\u4e49\u8fdb\u884c\u5206\u5272\uff0c\u4ece tf-idf \u4e2d\u7528\u9891\u7387\u7684\u624b\u6bb5\u6765\u8868\u5f81\u8bcd\u8bed\u7684\u91cd\u8981\u6027\u5230text-rank\u4e2d\u501f\u9274\u4e86page-rank\u7684\u65b9\u6cd5\u6765\u8868\u5f81\u8bcd\u8bed\u7684\u6743\u91cd\uff0c\u4ece\u57fa\u4e8eSVD\u7eaf\u6570\u5b66\u5206\u89e3\u8bcd\u6587\u6863\u77e9\u9635\u7684LSA\uff0c\u5230pLSA\u4e2d\u7528\u6982\u7387\u624b\u6bb5\u6765\u8868\u5f81\u6587\u6863\u5f62\u6210\u8fc7\u7a0b\u5e76\u5c06\u8bcd\u6587\u6863\u77e9\u9635\u7684\u6c42\u89e3\u7ed3\u679c\u8d4b\u4e88\u6982\u7387\u542b\u4e49\uff0c\u518d\u5230LDA\u4e2d\u5f15\u5165\u4e24\u4e2a\u5171\u8f6d\u5206\u5e03\u4ece\u800c\u5b8c\u7f8e\u5f15\u5165\u5148\u9a8c......","title":"1. \u68af\u5b50\u51fa\u73b0\u4e4b\u524d"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#11","text":"\u4ee5\u4e0a\u8fd9\u4e9b\u90fd\u662f\u76f8\u5bf9\u6bd4\u8f83\u4f20\u7edf\u7684\u65b9\u6cd5\uff0c\u5728\u4ecb\u7ecd\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e4b\u524d\uff0c\u5148\u6765\u770b\u770b\u8bed\u8a00\u6a21\u578b\u3002\u5b9e\u9645\u4e0a\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u672c\u8d28\u662f\u5bf9\u4e00\u6bb5\u81ea\u7136\u8bed\u8a00\u7684\u6587\u672c\u8fdb\u884c\u9884\u6d4b\u6982\u7387\u7684\u5927\u5c0f\uff0c\u5373\u5982\u679c\u6587\u672c\u7528 \\(S_i\\) \u6765\u8868\u793a\uff0c\u90a3\u4e48\u8bed\u8a00\u6a21\u578b\u5c31\u662f\u8981\u6c42 \\(P(S_i)\\) \u7684\u5927\u5c0f\uff0c\u5982\u679c\u6309\u7167\u5927\u6570\u5b9a\u5f8b\u4e2d\u9891\u7387\u5bf9\u4e8e\u6982\u7387\u65e0\u9650\u903c\u8fd1\u7684\u601d\u60f3\uff0c\u6c42\u8fd9\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u81ea\u7136\u8981\u7528\u8fd9\u4e2a\u6587\u672c\u5728\u6240\u6709\u4eba\u7c7b\u5386\u53f2\u4e0a\u4ea7\u751f\u8fc7\u7684\u6240\u6709\u6587\u672c\u96c6\u5408\u4e2d\uff0c\u5148\u6c42\u8fd9\u4e2a\u6587\u672c\u7684\u9891\u7387 \\(P(S_i)\\) \uff0c\u800c\u540e\u4fbf\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u516c\u5f0f\u6765\u6c42\u5f97 $$ P\\left(S_{i}\\right)=\\frac{c\\left(S_{i}\\right)}{\\sum_{j=0}^{\\infty} c\\left(S_{j}\\right)} $$ \u8fd9\u4e2a\u516c\u5f0f\u8db3\u591f\u7b80\u5355\uff0c\u4f46\u95ee\u9898\u662f\u5168\u4eba\u7c7b\u6240\u6709\u5386\u53f2\u7684\u8bed\u6599\u8fd9\u79cd\u7edf\u8ba1\u663e\u7136\u65e0\u6cd5\u5b9e\u73b0\uff0c\u56e0\u6b64\u4e3a\u4e86\u5c06\u8fd9\u4e2a\u4e0d\u53ef\u80fd\u7684\u7edf\u8ba1\u4efb\u52a1\u53d8\u5f97\u53ef\u80fd\uff0c\u6709\u4eba\u5c06\u6587\u672c\u4e0d\u5f53\u505a\u4e00\u4e2a\u6574\u4f53\uff0c\u800c\u662f\u628a\u5b83\u62c6\u6563\u6210\u4e00\u4e2a\u4e2a\u7684\u8bcd\uff0c\u901a\u8fc7\u6bcf\u4e2a\u8bcd\u4e4b\u95f4\u7684\u6982\u7387\u5173\u7cfb\uff0c\u4ece\u800c\u6c42\u5f97\u6574\u4e2a\u6587\u672c\u7684\u6982\u7387\u5927\u5c0f\u3002\u5047\u5b9a\u53e5\u5b50\u957f\u5ea6\u4e3a T\uff0c\u8bcd\u7528 x \u8868\u793a\uff0c\u5373\uff1a $$ P\\left(S_{i}\\right)=P\\left(x_{0}, x_{1}, \\ldots, x_{T}\\right)=P\\left(x_{0}\\right) P\\left(x_{1} | x_{0}\\right) P\\left(x_{2} | x_{0}, x_{1}\\right) \\ldots P\\left(x_{T} | x_{0}, x_{1}, x_{2}, \\ldots, x_{T-1}\\right) $$ \u7136\u800c\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u8ba1\u7b97\u4f9d\u7136\u8fc7\u4e8e\u590d\u6742\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u4f1a\u5f15\u5165\u9a6c\u5c14\u79d1\u592b\u5047\u8bbe\uff1a\u5047\u5b9a\u4e00\u4e2a\u53e5\u5b50\u4e2d\u7684\u8bcd\u53ea\u4e0e\u5b83\u524d\u9762\u7684 n \u4e2a\u8bcd\u76f8\u5173\uff0c\u7279\u522b\u5730\uff0c\u5f53 n=1 \u7684\u65f6\u5019\uff0c\u53e5\u5b50\u7684\u6982\u7387\u8ba1\u7b97\u516c\u5f0f\u6700\u4e3a\u7b80\u6d01\uff1a $$ P\\left(S_{i}\\right)=P\\left(x_{0}, x_{1}, \\ldots, x_{T}\\right)=P\\left(x_{0}\\right) P\\left(x_{1} | x_{0}\\right) P\\left(x_{2} | x_{1}\\right) \\ldots P\\left(x_{T} | x_{T-1}\\right)=P\\left(x_{0}\\right) \\Pi_{i=0}^{T-1} P\\left(x_{i+1} | x_{i}\\right) $$ \u5e76\u4e14\u628a\u8bcd\u9891\u7684\u7edf\u8ba1\u7528\u6765\u4f30\u8ba1\u8fd9\u4e2a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u6761\u4ef6\u6982\u7387\uff0c\u5982\u4e0b\uff1a $$ P\\left(x_{i+1} | x_{i}\\right)=\\frac{c\\left(x_{i+1}, x_{i}\\right)}{c\\left(x_{i}\\right)} $$ \u8fd9\u6837\u4e00\u6765\uff0c\u8bed\u8a00\u6a21\u578b\u7684\u8ba1\u7b97\u7ec8\u4e8e\u53d8\u5f97\u53ef\u884c\u3002\u7136\u800c\uff0c \u8fd9\u79cd\u57fa\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6a21\u578b\u5374\u5b58\u5728\u5f88\u591a\u95ee\u9898\uff1a \u7b2c\u4e00\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b \\(c\\left(x_{i+1}, x_{i}\\right)\\) \u7684\u8ba1\u7b97\u4f1a\u9047\u5230\u7279\u522b\u591a\u96f6\u503c\uff0c\u5c24\u5176\u5728 n \u53d6\u503c\u8f83\u5927\u65f6\uff0c\u8fd9\u79cd\u6570\u636e\u7a00\u758f\u5bfc\u81f4\u7684\u8ba1\u7b97\u4e3a 0 \u7684\u73b0\u8c61\u53d8\u5f97\u7279\u522b\u4e25\u91cd\u3002\u6240\u4ee5\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u4e2d\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u65b9\u5411\u4fbf\u662f\u8bbe\u8ba1\u5404\u79cd\u5e73\u6ed1\u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u3002 \u7b2c\u4e8c\uff0c \u53e6\u4e00\u4e2a\u66f4\u4e3a\u4e25\u91cd\u7684\u95ee\u9898\u662f\uff0c\u57fa\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u628a n \u53d6\u5f97\u5f88\u5927\uff0c\u4e00\u822c\u6765\u8bf4\u5728 3-gram \u6bd4\u8f83\u5e38\u89c1\uff0c\u518d\u5927\u7684\u8bdd\uff0c\u8ba1\u7b97\u590d\u6742\u5ea6\u4f1a\u6307\u6570\u4e0a\u5347\u3002\u8fd9\u4e2a\u95ee\u9898\u7684\u5b58\u5728\u5bfc\u81f4\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u5efa\u6a21\u8bed\u8a00\u4e2d\u4e0a\u4e0b\u6587\u8f83\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u7b2c\u4e09\uff0c\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u65e0\u6cd5\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027\u3002","title":"1.1 \u8bed\u8a00\u6a21\u578b"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#12-nnlm","text":"\u8fd9\u4e9b\u7f3a\u70b9\u7684\u5b58\u5728\uff0c\u8feb\u4f7f 2003 \u5e74 Bengio \u5728\u4ed6\u7684\u7ecf\u5178\u8bba\u6587 ***A Neural Probabilistic Language Model***\u4e2d\uff0c\u9996\u6b21\u5c06\u6df1\u5ea6\u5b66\u4e60\u7684\u601d\u60f3\u878d\u5165\u5230\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u5e76\u53d1\u73b0\u5c06\u8bad\u7ec3\u5f97\u5230\u7684 NNLM\uff08Neural Net Language Model\uff0c\u795e\u7ecf\u7f51\u7edc\u8bed\u8a00\u6a21\u578b\uff09\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\u53c2\u6570\u5f53\u505a\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u5f81\u65f6\uff0c\u80fd\u591f\u5f88\u597d\u5730\u83b7\u53d6\u8bcd\u8bed\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u3002 \u6487\u53bb\u6b63\u5219\u5316\u9879\uff0cNNLM \u7684\u6781\u5927\u76ee\u6807\u51fd\u6570\u5bf9\u6570\u4f3c\u7136\u51fd\u6570\uff0c\u5176\u672c\u8d28\u4e0a\u662f\u4e2a N-Gram \u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5982\u4e0b\u6240\u793a\uff1a $$ \\begin{array}{c}{L=\\frac{1}{T} \\sum_{t} \\log P\\left(w_{t} | w_{t-1}, \\ldots, w_{t-n+1} ; \\theta\\right)+R(\\theta)} \\ {P\\left(w_{t} | w_{t-1}, \\ldots, w_{t-n+1} ; \\theta\\right)=\\frac{e^{y_{w_{t}}}}{\\sum_{i} e^{y_{i}}}}\\end{array} $$ \u5176\u4e2d\uff0c\u5f52\u4e00\u5316\u4e4b\u524d\u7684\u6982\u7387\u5927\u5c0f\uff08\u4e5f\u5c31\u662f logits\uff09\u4e3a\uff1a $$ \\begin{array}{c}{y=b+W x+U \\tanh (d+H x)} \\ {x=\\left(C\\left(w_{t-1}\\right), C\\left(w_{t-2}\\right), \\ldots, C\\left(w_{t-n+1}\\right)\\right)}\\end{array} $$ x \u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6bcf\u4e2a\u8bcd\u6620\u5c04\u4e3a m \u7ef4\u7684\u5411\u91cf\uff0c\u7136\u540e\u5c06\u8fd9 n-1 \u4e2a\u8bcd\u7684\u5411\u91cf concat \u8d77\u6765\uff0c\u7ec4\u5408\u6210\u4e00\u4e2a (n-1)*m \u7ef4\u7684\u5411\u91cf\u3002 **\u8fd9\u91cc\u53ef\u4ee5\u5c06 NNLM \u7684\u7f51\u7edc\u7ed3\u6784\u62c6\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a**\u7b2c\u4e00\u90e8\u5206\uff0c\u4ece\u8bcd\u5230\u8bcd\u5411\u91cf\u7684\u6620\u5c04\uff0c\u901a\u8fc7 C \u77e9\u9635\u5b8c\u6210\u6620\u5c04\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a \\(|V| * m\\) \uff1b \u7b2c\u4e8c\u90e8\u5206\uff0c\u4ece x \u5230\u9690\u85cf\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 H\uff0c\u8fd9\u91cc\u7684\u53c2\u6570\u4e2a\u6570\u4e3a \\(|H| * m * (n-1)\\) \uff1b \u7b2c\u4e09\u90e8\u5206\uff0c\u4ece\u9690\u85cf\u5c42\u5230\u8f93\u51fa\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 U\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a$ |V| * |H|$\uff1b\u7b2c\u56db\u90e8\u5206\uff0c\u4ece x \u5230\u8f93\u51fa\u5c42\u7684\u6620\u5c04\uff0c\u901a\u8fc7\u77e9\u9635 W\uff0c\u53c2\u6570\u4e2a\u6570\u4e3a \\(|V| * m * (n-1)\\) \u3002 \u56e0\u6b64\uff0c\u5982\u679c\u7b97\u4e0a\u504f\u7f6e\u9879\u7684\u53c2\u6570\u4e2a\u6570\uff08\u5176\u4e2d\u8f93\u51fa\u5c42\u4e3a \\(|V|\\) \uff0c\u8f93\u5165\u5c42\u5230\u9690\u85cf\u5c42\u4e3a \\(|H|\\) \uff09\u7684\u8bdd\uff0cNNLM \u7684\u53c2\u6570\u4e2a\u6570\u4e3a\uff1a $$ |V|(1+|H|+m n)+|H|(1+m n-m) $$ \u53ef\u89c1 NNLM \u7684\u53c2\u6570\u4e2a\u6570\u662f\u6240\u53d6\u7a97\u53e3\u5927\u5c0f n \u7684\u7ebf\u6027\u51fd\u6570\uff0c\u8fd9\u4fbf\u53ef\u4ee5\u8ba9 NNLM \u80fd\u5bf9\u66f4\u957f\u7684\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u5efa\u6a21\u3002 \u4e0d\u8fc7 NNLM \u7684\u6700\u4e3b\u8981\u8d21\u732e\u662f\u975e\u5e38\u6709\u521b\u89c1\u6027\u5730\u5c06\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\u7279\u5f81\u6620\u5c04\u77e9\u9635\u5f53\u505a\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ece\u800c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u8bcd\u8868\u5f81\u4e3a\u4e00\u4e2a\u5411\u91cf\u5f62\u5f0f \uff0c\u8fd9\u76f4\u63a5\u542f\u53d1\u4e86\u540e\u6765\u7684 word2vec \u7684\u5de5\u4f5c\u3002","title":"1.2 NNLM"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#2","text":"\u81eaNNLM\u4e8e2003\u5e74\u88ab\u63d0\u51fa\u540e\uff0c\u540e\u9762\u53c8\u51fa\u73b0\u4e86\u5f88\u591a\u7c7b\u4f3c\u548c\u6539\u8fdb\u7684\u5de5\u4f5c\uff0c\u8bf8\u5982LBL, C&W\u548cRNNLM\u6a21\u578b\u7b49\u7b49\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u4e3b\u8981\u4ece\u4e24\u4e2a\u65b9\u9762\u53bb\u4f18\u5316NNLM\u7684\u601d\u60f3\uff0c\u5176\u4e00\u662fNNLM\u53ea\u7528\u4e86\u5de6\u8fb9\u7684n-1\u4e2a\u8bcd\uff0c\u5982\u4f55\u5229\u7528\u66f4\u591a\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u4fbf\u6210\u4e3a\u4e86\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u4f18\u5316\u601d\u8def\uff08\u5982Mikolov\u7b49\u4eba\u63d0\u51fa\u7684RNNLM\uff09\uff1b\u5176\u4e8c\u662fNNLM\u7684\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u7f3a\u70b9\u662f\u8f93\u51fa\u5c42\u8ba1\u7b97\u91cf\u592a\u5927\uff0c\u5982\u4f55\u51cf\u5c0f\u8ba1\u7b97\u91cf\u4f7f\u5f97\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u8bad\u7ec3\u53d8\u5f97\u53ef\u884c\uff0c\u8fd9\u4e5f\u662f\u5de5\u7a0b\u5e94\u7528\u4e0a\u81f3\u5173\u91cd\u8981\u7684\u4f18\u5316\u65b9\u5411\uff08\u5982Mnih\u548cHinton\u63d0\u51fa\u7684LBL\u4ee5\u53ca\u540e\u7eed\u7684\u4e00\u7cfb\u5217\u6a21\u578b\uff09\u3002 \u4e3a\u4e86\u66f4\u597d\u7406\u89e3NNLM\u4e4b\u540e\u4ee5\u53caword2vec\u8bde\u751f\u524d\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u73b0\u6709\u7684\u51e0\u4e2a\u4e3b\u8981\u6a21\u578b\u90fd\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\u3002 NNLM\u867d\u7136\u5c06N-Gram\u7684\u9636n\u63d0\u9ad8\u5230\u4e865\uff0c\u76f8\u6bd4\u539f\u6765\u7684\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8fdb\u6b65\uff0c\u4f46\u662f\u4e3a\u4e86\u83b7\u53d6\u66f4\u597d\u7684\u957f\u7a0b\u4f9d\u8d56\u5173\u7cfb\uff0c5\u663e\u7136\u662f\u4e0d\u591f\u7684\u3002\u518d\u8005\uff0c\u56e0\u4e3aNNLM\u53ea\u5bf9\u8bcd\u7684\u5de6\u4fa7\u6587\u672c\u8fdb\u884c\u5efa\u6a21\uff0c\u6240\u4ee5\u5f97\u5230\u7684\u8bcd\u5411\u91cf\u5e76\u4e0d\u662f\u8bed\u5883\u7684\u5145\u5206\u8868\u5f81\u3002\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\u5c31\u66f4\u4e25\u91cd\u4e86\uff0cNNLM\u7684\u8bad\u7ec3\u4f9d\u7136\u8fd8\u662f\u592a\u6162\uff0c\u5728\u8bba\u6587\u4e2d\uff0cBengio\u8bf4\u4ed6\u4eec\u7528\u4e8640\u5757CPU\uff0c\u5728\u542b\u67091400\u4e07\u4e2a\u8bcd\uff0c\u53ea\u4fdd\u7559\u8bcd\u9891\u76f8\u5bf9\u8f83\u9ad8\u7684\u8bcd\u4e4b\u540e\u8bcd\u5178\u5927\u5c0f\u4e3a17964\u4e2a\u8bcd\uff0c\u53ea\u8bad\u7ec3\u4e865\u4e2aepoch\uff0c\u4f46\u662f\u8017\u65f6\u8d85\u8fc73\u5468\u3002\u6309\u8fd9\u4e48\u6765\u7b97\uff0c\u5982\u679c\u53ea\u7528\u4e00\u5757CPU\uff0c\u53ef\u80fd\u9700\u89812\u5e74\u591a\uff0c\u8fd9\u8fd8\u662f\u5728\u4ec5\u67091400\u4e07\u4e2a\u8bcd\u7684\u8bed\u6599\u4e0a\u3002\u5982\u6b64\u8017\u65f6\u7684\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u663e\u7136\u4e25\u91cd\u9650\u5236\u4e86NNLM\u7684\u5e94\u7528\u3002 2007\u5e74Mnih\u548cHinton\u63d0\u51fa\u7684LBL\u4ee5\u53ca\u540e\u7eed\u7684\u4e00\u7cfb\u5217\u76f8\u5173\u6a21\u578b\uff0c\u7701\u53bb\u4e86NNLM\u4e2d\u7684\u6fc0\u6d3b\u51fd\u6570\uff0c\u76f4\u63a5\u628a\u6a21\u578b\u53d8\u6210\u4e86\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\uff0c\u5c24\u5176\u662f\u540e\u6765\u5c06Hierarchical Softmax\u5f15\u5165\u5230LBL\u540e\uff0c\u8bad\u7ec3\u6548\u7387\u8fdb\u4e00\u6b65\u589e\u5f3a\uff0c\u4f46\u662f\u8868\u8fbe\u80fd\u529b\u4e0d\u5982NNLM\u8fd9\u79cd\u795e\u7ecf\u7f51\u7edc\u7684\u7ed3\u6784\uff1b2008\u5e74Collobert\u548cWeston \u63d0\u51fa\u7684C&W\u6a21\u578b\u4e0d\u518d\u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u7ed3\u6784\uff0c\u800c\u662f\u5c06\u76ee\u6807\u6587\u672c\u7247\u6bb5\u6574\u4f53\u5f53\u505a\u8f93\u5165\uff0c\u7136\u540e\u9884\u6d4b\u8fd9\u4e2a\u7247\u6bb5\u662f\u771f\u5b9e\u6587\u672c\u7684\u6982\u7387\uff0c\u6240\u4ee5\u5b83\u7684\u5de5\u4f5c\u4e3b\u8981\u662f\u6539\u53d8\u4e86\u76ee\u6807\u8f93\u51fa\uff0c\u7531\u4e8e\u8f93\u51fa\u53ea\u662f\u4e00\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u4e0d\u518d\u662f\u8bcd\u5178\u5927\u5c0f\uff0c\u56e0\u6b64\u8bad\u7ec3\u6548\u7387\u5927\u5927\u63d0\u5347\uff0c\u4f46\u7531\u4e8e\u4f7f\u7528\u4e86\u8fd9\u79cd\u6bd4\u8f83\u201c\u522b\u81f4\u201d\u7684\u76ee\u6807\u8f93\u51fa\uff0c\u4f7f\u5f97\u5b83\u7684\u8bcd\u5411\u91cf\u8868\u5f81\u80fd\u529b\u6709\u9650\uff1b2010\u5e74Mikolov\uff08\u5bf9\uff0c\u8fd8\u662f\u540c\u4e00\u4e2aMikolov\uff09\u63d0\u51fa\u7684RNNLM\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3\u957f\u7a0b\u4f9d\u8d56\u5173\u7cfb\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u95ee\u9898\u4f9d\u7136\u5b58\u5728\u3002","title":"2. \u5386\u53f2\u7a81\u7834\u2014\u2014\u68af\u5b50\u6765\u4e86"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#21-cbow-skip-gram","text":"2013 \u5e74\uff0cTomas Mikolov \u8fde\u653e\u51e0\u7bc7\u5212\u65f6\u4ee3\u7684\u8bba\u6587\uff0c\u5176\u4e2d\u6700\u4e3a\u91cd\u8981\u7684\u662f\u4e24\u7bc7\uff0c Efficient estimation of word representations in vector space \u9996\u6b21\u63d0\u51fa\u4e86 CBOW\u548cSkip-gram\u6a21\u578b\uff0c\u8fdb\u4e00\u6b65\u5730\u5728 Distributed Representations of Words and Phrases and their Compositionality \u4e2d\uff0c\u53c8\u4ecb\u7ecd\u4e86\u51e0\u79cd\u4f18\u5316\u8bad\u7ec3\u7684\u65b9\u6cd5\uff0c\u5305\u62ec Hierarchical Softmax\uff08\u5f53\u7136\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u65e9\u5728 2003 \u5e74\uff0cBengio \u5c31\u5728\u4ed6\u63d0\u51fa NNLM \u8bba\u6587\u4e2d\u7684 Future Work \u90e8\u5206\u63d0\u5230\u4e86\u8fd9\u79cd\u65b9\u6cd5\uff0c\u5e76\u4e8e 2005 \u5e74\u628a\u5b83\u7cfb\u7edf\u5316\u53d1\u8868\u4e86\u4e00\u7bc7\u8bba\u6587\uff09\uff0cNegative Sampling \u548c Subsampling \u6280\u672f\u3002 \u653e\u51fa\u4e24\u7bc7\u8bba\u6587\u540e\uff0c\u5f53\u65f6\u4ecd\u5728\u8c37\u6b4c\u5de5\u4f5c\u7684 Mikolov \u53c8\u9a6c\u4e0d\u505c\u8e44\u653e\u51fa\u4e86\u5927\u6740\u5668\u2014\u2014word2vec \u5de5\u5177\uff0c\u5e76\u5728\u5176\u4e2d\u5f00\u6e90\u4e86\u4ed6\u7684\u65b9\u6cd5\u3002\u987a\u4fbf\u63d0\u4e00\u4e0b\u7684\u662f\uff0c\u5f88\u591a\u4eba\u4ee5\u4e3a word2vec \u662f\u4e00\u79cd\u6a21\u578b\u548c\u65b9\u6cd5\uff0c \u5176\u5b9e word2vec \u53ea\u662f\u4e00\u4e2a\u5de5\u5177 \uff0c\u80cc\u540e\u7684\u6a21\u578b\u662f CBOW \u6216\u8005 Skip-gram\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86 Hierarchical Softmax \u6216 Negative Sampling \u8fd9\u4e9b\u8bad\u7ec3\u7684\u4f18\u5316\u65b9\u6cd5\u3002 \u6240\u4ee5\u51c6\u786e\u8bf4\u6765\uff0cword2vec \u5e76\u4e0d\u662f\u4e00\u4e2a\u6a21\u578b\u6216\u7b97\u6cd5\uff0c\u53ea\u4e0d\u8fc7 Mikolov \u6070\u597d\u5728\u5f53\u65f6\u628a\u4ed6\u5f00\u6e90\u7684\u5de5\u5177\u5305\u8d77\u540d\u53eb\u505a word2vec \u800c\u5df2\u3002\u4e0d\u8fc7\u4e3a\u4e86\u53d9\u8ff0\u7b80\u5355\uff0c\u5728\u4e0b\u6587\u6211\u5c06\u7528 word2vec \u6765\u6307\u4ee3\u4e0a\u9762\u63d0\u5230 Mikolov \u4e24\u7bc7\u8bba\u6587\u4e2d\u7684\u4e00\u6574\u4e2a\u76f8\u5173\u7684\u4f18\u5316\u601d\u60f3\u3002 **word2vec \u5bf9\u4e8e\u524d\u4eba\u7684\u4f18\u5316\uff0c\u4e3b\u8981\u662f\u4e24\u65b9\u9762\u7684\u5de5\u4f5c\uff1a\u6a21\u578b\u7684\u7b80\u5316\u548c\u8bad\u7ec3\u6280\u5de7\u7684\u4f18\u5316\u3002**\u6211\u4eec\u5148\u6765\u770b\u770b\u6a21\u578b\u7684\u7b80\u5316\u65b9\u9762\uff0c\u4e5f\u5c31\u662f\u8033\u719f\u80fd\u8be6\u7684 CBOW \u548c Skip-gram\u3002 \u5bf9\u4e8e CBOW \u800c\u8a00\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u5b83\u7684\u540d\u5b57\u4e0a\u4e00\u7aa5\u7a76\u7adf\uff0c\u5b83\u7684\u5168\u79f0\u662f Continuous Bag-of-Words\uff0c\u4e5f\u5c31\u662f\u8fde\u7eed\u7684\u8bcd\u888b\u6a21\u578b\uff0c\u4e3a\u4ec0\u4e48\u53d6\u8fd9\u4e2a\u540d\u5b57\uff0c\u5148\u6765\u770b\u770b\u5b83\u7684\u76ee\u6807\u51fd\u6570\u3002 $$ \\begin{array}{c}{\\frac{1}{T} \\sum_{t=1}^{T} \\log P\\left(w_{t} | c_{t}\\right)} \\ {P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right)}\\end{array} $$ \u9996\u5148\uff0cCBOW \u6ca1\u6709\u9690\u85cf\u5c42\uff0c\u672c\u8d28\u4e0a\u53ea\u6709\u4e24\u5c42\u7ed3\u6784\uff0c\u8f93\u5165\u5c42\u5c06\u76ee\u6807\u8bcd\u8bed\u5883 c \u4e2d\u7684**\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7b80\u5355\u6c42\u548c**\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u6c42\u5e73\u5747\uff09\u540e\u5f97\u5230\u8bed\u5883\u5411\u91cf\uff0c\u7136\u540e**\u76f4\u63a5\u4e0e\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u6c42\u70b9\u79ef**\uff0c\u76ee\u6807\u51fd\u6570\u4e5f\u5c31\u662f\u8981\u8ba9\u8fd9\u4e2a\u4e0e\u76ee\u6807\u8bcd\u5411\u91cf\u7684\u70b9\u79ef\u53d6\u5f97\u6700\u5927\u503c\uff0c\u5bf9\u5e94\u7684\u4e0e\u975e\u76ee\u6807\u8bcd\u7684\u70b9\u79ef\u5c3d\u91cf\u53d6\u5f97\u6700\u5c0f\u503c\u3002 \u4ece\u8fd9\u53ef\u4ee5\u770b\u51fa\uff0cCBOW \u7684\u7b2c\u4e00\u4e2a\u7279\u70b9\u662f\u53d6\u6d88\u4e86 NNLM \u4e2d\u7684\u9690\u85cf\u5c42\uff0c\u76f4\u63a5\u5c06\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u76f8\u8fde\uff1b\u7b2c\u4e8c\u4e2a\u7279\u70b9\u4fbf\u662f\u5728\u6c42\u8bed\u5883 context \u5411\u91cf\u65f6\u5019\uff0c\u8bed\u5883\u5185\u7684\u8bcd\u5e8f\u5df2\u7ecf\u4e22\u5f03\uff08\u8fd9\u4e2a\u662f\u540d\u5b57\u4e2d Continuous \u7684\u6765\u6e90\uff09\uff1b\u7b2c\u4e09\uff0c\u56e0\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u51fd\u6570\u4ecd\u7136\u662f\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\uff0c\u6240\u4ee5\u9700\u8981\u987a\u5e8f\u904d\u5386\u8bed\u6599\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\uff08\u8fd9\u4e2a\u662f\u540d\u5b57\u4e2d Bag-of-Words \u7684\u6765\u6e90\uff09\u3002 \u56e0\u6b64\u6709\u4e86\u8fd9\u4e9b\u7279\u70b9\uff08\u5c24\u5176\u662f\u7b2c\u4e8c\u70b9\u548c\u7b2c\u4e09\u70b9\uff09\uff0cMikolov \u624d\u628a\u8fd9\u4e2a\u7b80\u5355\u7684\u6a21\u578b\u53d6\u540d\u53eb\u505a CBOW\uff0c\u7b80\u5355\u5374\u6709\u6548\u7684\u5178\u8303\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u6bcf\u4e2a\u8bcd\u5bf9\u5e94\u5230\u4e24\u4e2a\u8bcd\u5411\u91cf\uff0c\u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\u90fd\u6709\u4f53\u73b0\uff0c\u5176\u4e2d $e(wt) $\u662f\u8bcd\u7684\u8f93\u5165\u5411\u91cf\uff0c\u800c \\(e'(wt)\\) \u5219\u662f\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u6216\u8005\u66f4\u51c6\u786e\u7684\u6765\u8bb2\uff0c\u524d\u8005\u662f CBOW \u8f93\u5165\u5c42\u4e2d\u8ddf\u8bcd wt \u6240\u5728\u4f4d\u7f6e\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u7684\u6743\u503c\uff08\u5176\u5b9e\u8fd9\u5c31\u662f\u8bcd\u5411\u91cf\uff09\u7ec4\u5408\u6210\u7684\u5411\u91cf\uff0c\u800c\u662f\u8f93\u51fa\u5c42\u4e2d\u4e0e\u8bcd wt \u6240\u5728\u4f4d\u7f6e\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u7684\u6743\u503c\u7ec4\u5408\u6210\u7684\u5411\u91cf\uff0c\u6240\u4ee5\u628a\u8fd9\u4e00\u5411\u91cf\u53eb\u505a\u8f93\u51fa\u5411\u91cf\u3002 \u540c\u6837\u5730\uff0c\u548c CBOW \u5bf9\u5e94\uff0cSkip-gram \u7684\u6a21\u578b\u57fa\u672c\u601d\u60f3\u548c CBOW \u975e\u5e38\u7c7b\u4f3c\uff0c\u53ea\u662f\u6362\u4e86\u4e00\u4e2a\u65b9\u5411\uff1a CBOW \u662f\u8ba9\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf e'(wt) \u62df\u5408\u8bed\u5883\u7684\u8f93\u5165\u5411\u91cf x Skip-gram \u5219\u662f\u8ba9\u8bed\u5883\u4e2d\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u5c3d\u91cf\u62df\u5408\u5f53\u524d\u8bcd\u7684\u8f93\u5165\u5411\u91cf e(wt)\uff0c\u548c CBOW \u7684\u65b9\u5411\u76f8\u53cd \u56e0\u6b64\u5b83\u7684\u76ee\u6807\u51fd\u6570\u5982\u4e0b\uff1a $$ \\begin{array}{c}{\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j \\in c} \\log P\\left(w_{j} | w_{t}\\right)} \\ {P\\left(w_{j} | w_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{j}\\right) e\\left(w_{t}\\right)\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) e\\left(w_{t}\\right)\\right)}}\\end{array} $$ \u53ef\u4ee5\u770b\u51fa\u76ee\u6807\u51fd\u6570\u4e2d\u6709\u4e24\u4e2a\u6c42\u548c\u7b26\u53f7\uff0c\u6700\u91cc\u9762\u7684\u6c42\u548c\u7b26\u53f7\u7684\u610f\u4e49\u4fbf\u662f\u8ba9\u5f53\u524d\u7684\u8f93\u5165\u8bcd\u5206\u522b\u548c\u8be5\u8bcd\u5bf9\u5e94\u8bed\u5883\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u5c3d\u91cf\u63a5\u8fd1\uff0c\u4ece\u800c\u4fbf\u53ef\u4ee5\u8868\u73b0\u4e3a\u8be5\u8bcd\u4e0e\u5176\u4e0a\u4e0b\u6587\u5c3d\u91cf\u63a5\u8fd1\u3002 \u548c CBOW \u7c7b\u4f3c\uff0cSkip-gram \u672c\u8d28\u4e0a\u4e5f\u53ea\u6709\u4e24\u5c42\uff1a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\uff0c\u8f93\u5165\u5c42\u8d1f\u8d23\u5c06\u8f93\u5165\u8bcd\u6620\u5c04\u4e3a\u4e00\u4e2a\u8bcd\u5411\u91cf\uff0c\u8f93\u51fa\u5c42\u8d1f\u8d23\u5c06\u5176\u7ecf\u8fc7\u7ebf\u6027\u6620\u5c04\u8ba1\u7b97\u5f97\u5230\u6bcf\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002 \u518d\u7ec6\u5fc3\u4e00\u70b9\u7684\u8bdd\uff0c\u5176\u5b9e\u65e0\u8bba CBOW \u8fd8\u662f Skip-gram\uff0c\u672c\u8d28\u4e0a\u90fd\u662f\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u76f8\u8fde\uff0c\u4e2d\u95f4\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u7684\u5c42\u3002\u56e0\u6b64\uff0c\u8fd9\u4e24\u4e2a\u6a21\u578b\u7684\u53c2\u6570\u4e2a\u6570\u90fd\u662f$ 2 \u00d7 |e| \u00d7 |V| $\uff0c\u5176\u4e2d \\(|e|\\) \u548c \\(|V|\\) \u5206\u522b\u662f\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\u548c\u8bcd\u5178\u7684\u5927\u5c0f\uff0c\u76f8\u6bd4\u4e0a\u6587\u4e2d\u6211\u4eec\u8ba1\u7b97\u5f97\u5230 NNLM \u7684\u53c2\u6570\u4e2a\u6570 \\(|V|(1+|H|+|e|n) + |H|(1+|e|n-|e|)\\) \u5df2\u7ecf\u5927\u5927\u51cf\u5c0f\uff0c\u4e14\u4e0e\u4e0a\u4e0b\u6587\u6240\u53d6\u8bcd\u7684\u4e2a\u6570\u65e0\u5173\u4e86\uff0c\u4e5f\u5c31\u662f\u7ec8\u4e8e\u907f\u514d\u4e86 N-gram \u4e2d\u968f\u7740\u9636\u6570 N \u589e\u5927\u800c\u4f7f\u5f97\u8ba1\u7b97\u590d\u6742\u5ea6\u6025\u5267\u4e0a\u5347\u7684\u95ee\u9898\u3002 \u7136\u800c\uff0cMikolov \u5927\u795e\u8bf4\u4e86\uff0c\u8fd9\u4e9b\u516c\u5f0f\u662f\u201c impractical \u201d\u7684\uff0c\u4ed6\u7684\u8a00\u4e0b\u4e4b\u610f\u662f\u8ba1\u7b97\u590d\u6742\u5ea6\u4f9d\u7136\u548c\u8bcd\u5178\u5927\u5c0f\u6709\u5173\uff0c\u800c\u8fd9\u901a\u5e38\u90fd\u610f\u5473\u7740\u975e\u5e38\u975e\u5e38\u5927\uff0c\u4ee5\u4e0b\u662f\u4ed6\u7684\u539f\u8bdd\uff1a ..., and W is the number of words in the vocabulary. This formulation is impractical because the cost of computing \u2207 log p(wO|wI ) is proportional to W, which is often large (10 5\u201310 7 terms). \u4e0d\u5f97\u4e0d\u8bf4\uff0c\u5927\u795e\u5c31\u662f\u5927\u795e\uff0c\u5c06\u6a21\u578b\u5df2\u7ecf\u7b80\u5316\u5230\u4e86\u53ea\u5269\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\uff08\u518d\u8131\u5c31\u6ca1\u4e86\uff09\uff0c\u4f9d\u7136\u4e0d\u6ee1\u8db3\uff0c\u8fd8\u201c\u5f97\u5bf8\u8fdb\u5c3a\u201d\u5730\u6253\u8d77\u4e86\u8bcd\u5178\u7684\u201c\u5c0f\u7b97\u76d8\u201d\uff0c\u90a3\u4e48 Mikolov \u7684\u201c\u5c0f\u7b97\u76d8\u201d\u662f\u4ec0\u4e48\u5462\uff1f \u4ed6\u5728\u8bba\u6587\u4e2d\u9996\u5148\u63d0\u5230\u4e86 Hierachical Softmax\uff0c\u8ba4\u4e3a\u8fd9\u662f\u5bf9 full softmax \u7684\u4e00\u79cd\u4f18\u5316\u624b\u6bb5\u3002 Hierachical Softmax \u7684\u57fa\u672c\u601d\u60f3\u5c31\u662f\u9996\u5148\u5c06\u8bcd\u5178\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u6309\u7167\u8bcd\u9891\u5927\u5c0f\u6784\u5efa\u51fa\u4e00\u68f5 Huffman \u6811\uff0c\u4fdd\u8bc1\u8bcd\u9891\u8f83\u5927\u7684\u8bcd\u5904\u4e8e\u76f8\u5bf9\u6bd4\u8f83\u6d45\u7684\u5c42\uff0c\u8bcd\u9891\u8f83\u4f4e\u7684\u8bcd\u76f8\u5e94\u7684\u5904\u4e8e Huffman \u6811\u8f83\u6df1\u5c42\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u5904\u4e8e\u8fd9\u68f5 Huffman \u6811\u4e0a\u7684\u67d0\u4e2a\u53f6\u5b50\u8282\u70b9\u3002 \u7b2c\u4e8c\uff0c\u5c06\u539f\u672c\u7684\u4e00\u4e2a |V| \u5206\u7c7b\u95ee\u9898\u53d8\u6210\u4e86 log |V| \u6b21\u7684\u4e8c\u5206\u7c7b\u95ee\u9898\uff0c\u505a\u6cd5\u7b80\u5355\u8bf4\u6765\u5c31\u662f\uff0c\u539f\u5148\u8981\u8ba1\u7b97 P(wt|ct) \u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u4f7f\u7528\u7684\u662f\u666e\u901a\u7684 softmax\uff0c\u52bf\u5fc5\u8981\u6c42\u8bcd\u5178\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002\u4e3a\u4e86\u51cf\u5c11\u8fd9\u4e00\u6b65\u7684\u8ba1\u7b97\u91cf\uff0c\u5728 Hierachical Softmax \u4e2d\uff0c\u540c\u6837\u662f\u8ba1\u7b97\u5f53\u524d\u8bcd wt \u5728\u5176\u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\u5927\u5c0f\uff0c\u53ea\u9700\u8981\u628a\u5b83\u53d8\u6210\u5728 Huffman \u6811\u4e2d\u7684\u8def\u5f84\u9884\u6d4b\u95ee\u9898\u5c31\u53ef\u4ee5\u4e86\uff0c\u56e0\u4e3a\u5f53\u524d\u8bcd wt \u5728 Huffman \u6811\u4e2d\u5bf9\u5e94\u5230\u4e00\u6761\u8def\u5f84\uff0c\u8fd9\u6761\u8def\u5f84\u7531\u8fd9\u68f5\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u7ecf\u8fc7\u4e00\u7cfb\u5217\u4e2d\u95f4\u7684\u7236\u8282\u70b9\uff0c\u6700\u7ec8\u5230\u8fbe\u5f53\u524d\u8fd9\u4e2a\u8bcd\u7684\u53f6\u5b50\u8282\u70b9\u800c\u7ec4\u6210\uff0c\u90a3\u4e48\u5728\u6bcf\u4e00\u4e2a\u7236\u8282\u70b9\u4e0a\uff0c\u90fd\u5bf9\u5e94\u7684\u662f\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\uff08\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a LR \u5206\u7c7b\u5668\uff09\uff0c\u800c Huffman \u6811\u7684\u6784\u9020\u8fc7\u7a0b\u4fdd\u8bc1\u4e86\u6811\u7684\u6df1\u5ea6\u4e3a log |V|\uff0c\u6240\u4ee5\u4e5f\u5c31\u53ea\u9700\u8981\u505a log |V| \u6b21\u4e8c\u5206\u7c7b\u4fbf\u53ef\u4ee5\u6c42\u5f97 P(wt|ct) \u7684\u5927\u5c0f\uff0c\u8fd9\u76f8\u6bd4\u539f\u6765 |V| \u6b21\u7684\u8ba1\u7b97\u91cf\uff0c\u5df2\u7ecf\u5927\u5927\u51cf\u5c0f\u4e86\u3002 \u63a5\u7740\uff0cMikolov \u53c8\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u7684\u601d\u60f3\uff0c\u800c\u8fd9\u4e00\u601d\u60f3\u4e5f\u662f\u53d7\u4e86 C&W \u6a21\u578b\u4e2d\u6784\u9020\u8d1f\u6837\u672c\u65b9\u6cd5\u542f\u53d1\uff0c\u540c\u65f6\u53c2\u8003\u4e86 Noise Contrastive Estimation (NCE) \u7684\u601d\u60f3\uff0c\u7528 CBOW \u7684\u6846\u67b6\u7b80\u5355\u6765\u8bb2\u5c31\u662f\uff0c\u8d1f\u91c7\u6837\u6bcf\u904d\u5386\u5230\u4e00\u4e2a\u76ee\u6807\u8bcd\uff0c\u4e3a\u4e86\u4f7f\u5f97\u76ee\u6807\u8bcd\u7684\u6982\u7387 P(wt|ct) \u6700\u5927\uff0c\u6839\u636e softmax \u51fd\u6570\u7684\u6982\u7387\u516c\u5f0f\uff0c\u4e5f\u5c31\u662f\u8ba9\u5206\u5b50\u4e2d\u7684 \\(e^{\\prime}\\left(w_{t}\\right)^{T} x\\) \u6700\u5927\uff0c\u800c\u5206\u6bcd\u4e2d\u5176\u4ed6\u975e\u76ee\u6807\u8bcd\u7684 \\(e^{\\prime}\\left(w_{i}\\right)^{T} x\\) \u6700\u5c0f\u3002 \u666e\u901a softmax \u7684\u8ba1\u7b97\u91cf\u592a\u5927\u5c31\u662f\u56e0\u4e3a\u5b83\u628a\u8bcd\u5178\u4e2d\u6240\u6709\u5176\u4ed6\u975e\u76ee\u6807\u8bcd\u90fd\u5f53\u505a\u8d1f\u4f8b\u4e86\uff0c\u800c\u8d1f\u91c7\u6837\u7684\u601d\u60f3\u7279\u522b\u7b80\u5355\uff0c\u5c31\u662f\u6bcf\u6b21\u6309\u7167\u4e00\u5b9a\u6982\u7387\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u8bcd\u5f53\u505a\u8d1f\u4f8b\uff0c\u4ece\u800c\u5c31\u53ea\u9700\u8981\u8ba1\u7b97\u8fd9\u4e9b\u8d1f\u91c7\u6837\u51fa\u6765\u7684\u8d1f\u4f8b\u4e86\uff0c\u90a3\u4e48\u6982\u7387\u516c\u5f0f\u4fbf\u76f8\u5e94\u53d8\u4e3a\uff1a $$ P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{K} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right) $$ \u4ed4\u7ec6\u548c\u666e\u901a softmax \u8fdb\u884c\u6bd4\u8f83\u4fbf\u4f1a\u53d1\u73b0\uff0c\u5c06\u539f\u6765\u7684 |V| \u5206\u7c7b\u95ee\u9898\u53d8\u6210\u4e86 K \u5206\u7c7b\u95ee\u9898\uff0c\u8fd9\u4fbf\u628a\u8bcd\u5178\u5927\u5c0f\u5bf9\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u5f71\u54cd\u53d8\u6210\u4e86\u4e00\u4e2a\u5e38\u6570\u9879\uff0c\u800c\u6539\u52a8\u53c8\u975e\u5e38\u7684\u5fae\u5c0f\uff0c\u4e0d\u53ef\u8c13\u4e0d\u5de7\u5999\u3002 \u9664\u6b64\u4e4b\u5916\uff0cMikolov \u8fd8\u63d0\u5230\u4e86\u4e00\u4e9b\u5176\u4ed6\u6280\u5de7\uff0c\u6bd4\u5982\u5bf9\u4e8e\u90a3\u4e9b\u8d85\u9ad8\u9891\u7387\u7684\u8bcd\uff0c\u5c24\u5176\u662f\u505c\u7528\u8bcd\uff0c\u53ef\u4ee5\u4f7f\u7528 Subsampling \u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\uff0c\u4e0d\u8fc7\u8fd9\u5df2\u7ecf\u4e0d\u662f word2vec \u6700\u4e3b\u8981\u7684\u5185\u5bb9\u4e86\u3002 \u81ea\u6b64\uff0c\u7ecf\u8fc7\u6a21\u578b\u548c\u8bad\u7ec3\u6280\u5de7\u7684\u53cc\u91cd\u4f18\u5316\uff0c\u7ec8\u4e8e\u4f7f\u5f97\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u8bad\u7ec3\u6210\u4e3a\u4e86\u73b0\u5b9e\uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5f97\u5230\u7684\u8fd9\u4e9b\u8bcd\u5411\u91cf\u80fd\u591f\u5728\u8bed\u4e49\u4e0a\u6709\u975e\u5e38\u597d\u7684\u8868\u73b0\uff0c\u80fd\u5c06\u8bed\u4e49\u5173\u7cfb\u901a\u8fc7\u5411\u91cf\u7a7a\u95f4\u5173\u7cfb\u8868\u5f81\u51fa\u6765\u3002 word2vec \u7684\u51fa\u73b0\uff0c\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u7684\u53d1\u5c55\uff0c\u5c24\u5176\u662f\u4fc3\u8fdb\u4e86\u6df1\u5ea6\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u5e94\u7528\uff08\u4e0d\u8fc7\u6709\u610f\u601d\u7684\u662f\uff0cword2vec \u7b97\u6cd5\u672c\u8eab\u5176\u5b9e\u5e76\u4e0d\u662f\u4e00\u4e2a\u6df1\u5ea6\u6a21\u578b\uff0c\u5b83\u53ea\u6709\u4e24\u5c42\u5168\u8fde\u63a5\uff09\uff0c \u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u8bcd\u5411\u91cf\u6765\u521d\u59cb\u5316\u7f51\u7edc\u7ed3\u6784\u7684\u7b2c\u4e00\u5c42\u51e0\u4e4e\u5df2\u7ecf\u6210\u4e86\u6807\u914d\uff0c\u5c24\u5176\u662f\u5728\u53ea\u6709\u5c11\u91cf\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u62ff\u9884\u8bad\u7ec3\u7684 embedding \u521d\u59cb\u5316\u7b2c\u4e00\u5c42\uff0c\u51e0\u4e4e\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u5728\u86ee\u5e72\u3002 \u5728\u6b64\u4e4b\u540e\uff0c\u4e00\u5927\u6279 word embedding \u65b9\u6cd5\u5927\u91cf\u6d8c\u73b0\uff0c\u6bd4\u8f83\u77e5\u540d\u7684\u6709 GloVe \u548c fastText \u7b49\u7b49\uff0c\u5b83\u4eec\u5404\u81ea\u4fa7\u91cd\u4e0d\u540c\u7684\u89d2\u5ea6\uff0c\u5e76\u4e14\u4ece\u4e0d\u540c\u7684\u65b9\u5411\u90fd\u5f97\u5230\u4e86\u8fd8\u4e0d\u9519\u7684 embedding \u8868\u5f81\u3002","title":"2.1 CBOW \u548c Skip-gram"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#22-glove","text":"\u5148\u6765\u770b\u770b GloVe \u7684\u635f\u5931\u51fd\u6570\uff1a $$ J=\\sum_{i=1}^{V} \\sum_{j=1}^{V} f\\left(X_{i j}\\right)\\left(w_{i}^{T} w_{j}+b_{i}+b_{j}-\\log X_{i j}\\right)^{2} $$ \u5176\u4e2d Xij \u662f\u4e24\u4e2a\u8bcd i \u548c j \u5728\u67d0\u4e2a\u7a97\u53e3\u5927\u5c0f\u4e2d\u7684\u5171\u73b0\u9891\u7387\uff08\u4e0d\u8fc7 GloVe \u5bf9\u5176\u505a\u4e86\u4e00\u4e9b\u6539\u8fdb\uff0c\u5171\u73b0\u9891\u7387\u76f8\u5e94\u6709\u4e00\u4e2a\u8870\u51cf\u7cfb\u6570\uff0c\u4f7f\u5f97\u8ddd\u79bb\u8d8a\u8fdc\u7684\u8bcd\u5bf9\u5171\u73b0\u9891\u7387\u8d8a\u5c0f\u4e00\u4e9b\uff09\uff0c f(Xij) \u662f\u4e00\u4e2a\u6743\u91cd\u7cfb\u6570\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u5171\u73b0\u8d8a\u591a\u7684 pair \u5bf9\u4e8e\u76ee\u6807\u51fd\u6570\u8d21\u732e\u5e94\u8be5\u8d8a\u5927\uff0c\u4f46\u662f\u53c8\u4e0d\u80fd\u65e0\u9650\u5236\u589e\u5927\uff0c\u6240\u4ee5\u5bf9\u5171\u73b0\u9891\u7387\u8fc7\u4e8e\u5927\u7684 pair \u9650\u5b9a\u6700\u5927\u503c\uff0c\u4ee5\u9632\u8bad\u7ec3\u7684\u65f6\u5019\u88ab\u8fd9\u4e9b\u9891\u7387\u8fc7\u5927\u7684 pair \u4e3b\u5bfc\u4e86\u6574\u4e2a\u76ee\u6807\u51fd\u6570\u3002 \u5269\u4e0b\u7684\u5c31\u662f\u7b97\u6cd5\u7684\u6838\u5fc3\u90e8\u5206\u4e86\uff0c\u4e24\u4e2ab\u503c\u662f\u4e24\u4e2a\u504f\u7f6e\u9879\uff0c\u6487\u53bb\u4e0d\u8c08\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 \\(\\left(w_{i}^{T} w_{j}-\\log X_{i j}\\right)^{2}\\) \u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5747\u65b9\u8bef\u5dee\u51fd\u6570\uff0c wi \u662f\u5f53\u524d\u8bcd\u7684\u5411\u91cf\uff0c wj \u5bf9\u5e94\u7684\u662f\u4e0e\u5176\u5728\u540c\u4e00\u4e2a\u7a97\u53e3\u4e2d\u51fa\u73b0\u7684\u5171\u73b0\u8bcd\u7684\u8bcd\u5411\u91cf\uff0c \u4e24\u8005\u7684\u5411\u91cf\u70b9\u4e58\u8981\u53bb\u5c3d\u91cf\u62df\u5408\u5b83\u4eec\u5171\u73b0\u9891\u7387\u7684\u5bf9\u6570\u503c \u3002 \u4ece\u76f4\u89c2\u4e0a\u7406\u89e3\uff0c\u5982\u679c\u4e24\u4e2a\u8bcd\u5171\u73b0\u9891\u7387\u8d8a\u9ad8\uff0c\u90a3\u4e48\u5176\u5bf9\u6570\u503c\u5f53\u7136\u4e5f\u8d8a\u9ad8\uff0c\u56e0\u800c\u7b97\u6cd5\u8981\u6c42\u4e8c\u8005\u8bcd\u5411\u91cf\u7684\u70b9\u4e58\u4e5f\u8d8a\u5927\uff0c\u800c**\u4e24\u4e2a\u8bcd\u5411\u91cf\u7684\u70b9\u4e58\u8d8a\u5927\uff0c\u5176\u5b9e\u5305\u542b\u4e86\u4e24\u5c42\u542b\u4e49\uff1a** \u7b2c\u4e00\uff0c\u8981\u6c42\u5404\u81ea\u8bcd\u5411\u91cf\u7684\u6a21\u8d8a\u5927 \uff0c\u901a\u5e38\u6765\u8bf4\uff0c\u9664\u53bb\u9891\u7387\u975e\u5e38\u9ad8\u7684\u8bcd\uff08\u6bd4\u5982\u505c\u7528\u8bcd\uff09\uff0c\u5bf9\u4e8e\u6709\u660e\u786e\u8bed\u4e49\u7684\u8bcd\u6765\u8bf4\uff0c\u5b83\u4eec\u7684\u8bcd\u5411\u91cf\u6a21\u957f\u4f1a\u968f\u7740\u8bcd\u9891\u589e\u5927\u800c\u589e\u5927\uff0c\u56e0\u6b64\u4e24\u4e2a\u8bcd\u5171\u73b0\u9891\u7387\u8d8a\u5927\uff0c\u8981\u6c42\u5404\u81ea\u8bcd\u5411\u91cf\u6a21\u957f\u8d8a\u5927\u662f\u6709\u76f4\u89c9\u610f\u4e49\u7684\uff0c\u6bd4\u5982\u201c\u9b51\u9b45\u9b4d\u9b49\u201d\u5047\u5982\u80fd\u88ab\u62c6\u5206\u6210\u4e24\u4e2a\u8bcd\uff0c\u90a3\u4e48\u201c\u9b51\u9b45\u201d\u548c\u201c\u9b4d\u9b49\u201d\u8fd9\u4e24\u4e2a\u8bcd\u7684\u5171\u73b0\u9891\u7387\u76f8\u6bd4\u201c\u201c\u9b51\u9b45\u201d\u548c\u5176\u4ed6\u8bcd\u7684\u5171\u73b0\u9891\u7387\u8981\u5927\u5f97\u591a\uff0c\u5bf9\u5e94\u5230\u201c\u9b51\u9b45\u201d\u7684\u8bcd\u5411\u91cf\uff0c\u4fbf\u4f1a\u503e\u5411\u4e8e\u5728\u67d0\u4e2a\u8bcd\u5411\u91cf\u7ef4\u5ea6\u4e0a\u6301\u7eed\u66f4\u65b0\uff0c\u8fdb\u800c\u4f7f\u5f97\u5b83\u7684\u6a21\u957f\u4e5f\u4f1a\u6bd4\u8f83\u504f\u5927\u3002 \u7b2c\u4e8c\uff0c\u8981\u6c42\u8fd9\u4e24\u4e2a\u8bcd\u5411\u91cf\u7684\u5939\u89d2\u8d8a\u5c0f \uff0c\u8fd9\u4e5f\u662f\u7b26\u5408\u76f4\u89c9\u7684\uff0c\u56e0\u4e3a\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u8bed\u5883\u4e0b\u9891\u7387\u8d8a\u5927\uff0c\u8bf4\u660e\u8fd9\u4e24\u4e2a\u8bcd\u7684\u8bed\u4e49\u8d8a\u63a5\u8fd1\uff0c\u56e0\u800c\u8bcd\u5411\u91cf\u7684\u5939\u89d2\u4e5f\u504f\u5411\u4e8e\u8d8a\u5c0f\u3002 \u6b64\u5916\uff0c\u53ef\u4ee5\u4ece GloVe \u4f7f\u7528\u7684\u635f\u5931\u51fd\u6570\u4e2d\u53d1\u73b0\uff0c\u5b83\u7684\u8bad\u7ec3\u4e3b\u8981\u662f\u4e24\u4e2a\u6b65\u9aa4\uff1a \u7edf\u8ba1\u5171\u73b0\u77e9\u9635\u548c\u8bad\u7ec3\u83b7\u53d6\u8bcd\u5411\u91cf \uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5176\u5b9e\u662f\u6ca1\u6709\u6211\u4eec\u901a\u5e38\u7406\u89e3\u5f53\u4e2d\u7684\u6a21\u578b\u7684\u3002 \u66f4\u9051\u8bba\u795e\u7ecf\u7f51\u7edc\uff0c \u5b83\u6574\u4e2a\u7684\u7b97\u6cd5\u6846\u67b6\u90fd\u662f\u57fa\u4e8e\u77e9\u9635\u5206\u89e3\u7684\u505a\u6cd5\u6765\u83b7\u53d6\u8bcd\u5411\u91cf\u7684\uff0c\u672c\u8d28\u4e0a\u548c\u8bf8\u5982 LSA \u8fd9\u79cd\u57fa\u4e8e SVD \u7684\u77e9\u9635\u5206\u89e3\u65b9\u6cd5\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c \uff0c\u53ea\u4e0d\u8fc7 SVD \u5206\u89e3\u592a\u8fc7\u4e8e\u8017\u65f6\uff0c\u8fd0\u7b97\u91cf\u5de8\u5927\uff0c\u76f8\u540c\u70b9\u662f LSA \u4e5f\u662f\u8f93\u5165\u5171\u73b0\u77e9\u9635\uff0c\u4e0d\u8fc7\u4e00\u822c\u4e3b\u8981\u4ee5\u8bcd-\u6587\u6863\u5171\u73b0\u77e9\u9635\u4e3a\u4e3b\uff0c\u53e6\u5916\uff0cLSA \u4e2d\u7684\u5171\u73b0\u77e9\u9635\u6ca1\u6709\u505a\u7279\u6b8a\u5904\u7406\uff0c\u800c GloVe \u8003\u8651\u5230\u4e86\u5bf9\u8ddd\u79bb\u8f83\u8fdc\u7684\u8bcd\u5bf9\u505a\u76f8\u5e94\u7684\u60e9\u7f5a\u7b49\u7b49\u3002 \u7136\u800c\uff0c \u76f8\u6bd4 word2vec\uff0cGloVe \u5374\u66f4\u52a0\u5145\u5206\u7684\u5229\u7528\u4e86\u8bcd\u7684\u5171\u73b0\u4fe1\u606f \uff0cword2vec \u4e2d\u5219\u662f\u76f4\u63a5\u7c97\u66b4\u7684\u8ba9\u4e24\u4e2a\u5411\u91cf\u7684\u70b9\u4e58\u76f8\u6bd4\u5176\u4ed6\u8bcd\u7684\u70b9\u4e58\u6700\u5927\uff0c\u81f3\u5c11\u5728\u8868\u9762\u4e0a\u770b\u6765\u4f3c\u4e4e\u662f\u6ca1\u6709\u7528\u5230\u8bcd\u7684\u5171\u73b0\u4fe1\u606f\uff0c\u4e0d\u50cf GloVe \u8fd9\u91cc\u660e\u786e\u7684\u5c31\u662f\u62df\u5408\u8bcd\u5bf9\u7684\u5171\u73b0\u9891\u7387\u3002 \u4e0d\u8fc7\u66f4\u6709\u610f\u601d\u7684\u8fd8\u662f\uff0cGloVe \u548c word2vec \u4f3c\u4e4e\u6709\u79cd\u66f4\u4e3a\u5185\u5728\u7684\u8054\u7cfb\uff0c\u518d\u6765\u770b\u770b\u4ed6\u4eec\u7684\u76ee\u6807\u51fd\u6570\u6709\u4ec0\u4e48\u4e0d\u4e00\u6837\uff0c\u8fd9\u662f Skip-gram \u7684\u76ee\u6807\u51fd\u6570\uff08\u8fd9\u91cc\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e86\u5bf9\u4e8e\u8bed\u6599\u7684\u904d\u5386 N\uff09: $$ \\begin{array}{c}{\\frac{1}{N T} \\sum_{n=1}^{N} \\sum_{t=1}^{T} \\sum_{j \\in c} \\log P\\left(w_{n j} | w_{n t}\\right)} \\ {P\\left(w_{j} | w_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{j}\\right) e\\left(w_{t}\\right)\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) e\\left(w_{t}\\right)\\right)}}\\end{array} $$ \u800c\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\u662f\u6309\u7167\u8bed\u6599\u7684\u987a\u5e8f\u53bb\u904d\u5386\uff0c\u5982\u679c\u5148\u628a\u8bed\u6599\u5f53\u4e2d\u7684\u76f8\u5173\u8bcd\u8fdb\u884c\u5408\u5e76\uff0c\u7136\u540e\u6309\u7167\u8bcd\u5178\u5e8f\u8fdb\u884c\u904d\u5386\uff0c\u4fbf\u53ef\u4ee5\u8bc1\u660e Skip-gram \u5b9e\u9645\u4e0a\u548c GloVe \u7684\u4f18\u5316\u76ee\u6807\u4e00\u81f4\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u53c2\u8003\u8bc1\u660e\u7ec6\u8282\uff08arXiv:1611.05962\uff09\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002","title":"2.2 GloVe"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#23-fasttext","text":"word2vec \u548c GloVe \u90fd\u4e0d\u9700\u8981\u4eba\u5de5\u6807\u8bb0\u7684\u76d1\u7763\u6570\u636e\uff0c\u53ea\u9700\u8981\u8bed\u8a00\u5185\u90e8\u5b58\u5728\u7684\u76d1\u7763\u4fe1\u53f7\u5373\u53ef\u4ee5\u5b8c\u6210\u8bad\u7ec3\u3002\u800c\u4e0e\u6b64\u76f8\u5bf9\u5e94\u7684\uff0c fastText \u5219\u662f\u5229\u7528\u5e26\u6709\u76d1\u7763\u6807\u8bb0\u7684\u6587\u672c\u5206\u7c7b\u6570\u636e\u5b8c\u6210\u8bad\u7ec3\u3002 \u672c\u8d28\u4e0a\u6ca1\u6709\u4ec0\u4e48\u7279\u6b8a\u7684\uff0c\u6a21\u578b\u6846\u67b6\u5c31\u662f CBOW\uff0c\u53ea\u4e0d\u8fc7\u4e0e\u666e\u901a\u7684 CBOW \u6709\u4e24\u70b9\u4e0d\u4e00\u6837\uff0c\u5206\u522b\u662f\u8f93\u5165\u6570\u636e\u548c\u9884\u6d4b\u76ee\u6807\u7684\u4e0d\u540c\uff0c\u5728\u8f93\u5165\u6570\u636e\u4e0a\uff0cCBOW \u8f93\u5165\u7684\u662f\u4e00\u6bb5\u533a\u95f4\u4e2d\u9664\u53bb\u76ee\u6807\u8bcd\u4e4b\u5916\u7684\u6240\u6709\u5176\u4ed6\u8bcd\u7684\u5411\u91cf\u52a0\u548c\u6216\u5e73\u5747\uff0c \u800c fastText \u4e3a\u4e86\u5229\u7528\u66f4\u591a\u7684\u8bed\u5e8f\u4fe1\u606f\uff0c\u5c06 bag-of-words \u53d8\u6210\u4e86 bag-of-features \uff0c\u4e5f\u5c31\u662f\u4e0b\u56fe\u4e2d\u7684\u8f93\u5165 x \u4e0d\u518d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8bcd\uff0c\u8fd8\u53ef\u4ee5\u52a0\u4e0a bigram \u6216\u8005\u662f trigram \u7684\u4fe1\u606f\u7b49\u7b49\u3002 \u7b2c\u4e8c\u4e2a\u4e0d\u540c\u5728\u4e8e\uff0c CBOW \u9884\u6d4b\u76ee\u6807\u662f\u8bed\u5883\u4e2d\u7684\u4e00\u4e2a\u8bcd\uff0c\u800c fastText \u9884\u6d4b\u76ee\u6807\u662f\u5f53\u524d\u8fd9\u6bb5\u8f93\u5165\u6587\u672c\u7684\u7c7b\u522b \uff0c\u6b63\u56e0\u4e3a\u9700\u8981\u8fd9\u4e2a\u6587\u672c\u7c7b\u522b\uff0c\u56e0\u6b64\u624d\u8bf4 fastText \u662f\u4e00\u4e2a\u76d1\u7763\u6a21\u578b\u3002 \u800c\u76f8\u540c\u70b9\u5728\u4e8e\uff0cfastText \u7684\u7f51\u7edc\u7ed3\u6784\u548c CBOW \u57fa\u672c\u4e00\u81f4\uff0c\u540c\u65f6\u5728\u8f93\u51fa\u5c42\u7684\u5206\u7c7b\u4e0a\u4e5f\u4f7f\u7528\u4e86 Hierachical Softmax \u6280\u5de7\u6765\u52a0\u901f\u8bad\u7ec3\u3002 $$ -\\frac{1}{N} \\sum_{n=1}^{N} y_{n} \\log f\\left(B A x_{n}\\right), x_{n}=\\sum_{i=1}^{l_{n}} x_{n, i} $$ \u8fd9\u91cc\u7684 \\(x_{n,i}\\) \u4fbf\u662f\u8bed\u6599\u5f53\u4e2d\u7b2c n \u7bc7\u6587\u6863\u7684\u7b2c i \u4e2a\u8bcd\u4ee5\u53ca\u52a0\u4e0a N-gram \u7684\u7279\u5f81\u4fe1\u606f\u3002\u4ece\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u4fbf\u53ef\u4ee5\u77e5\u9053 fastText \u540c\u6837\u53ea\u6709\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u5206\u522b\u662f A \u548c B\uff0c\u5176\u4e2d A \u4fbf\u662f\u6700\u7ec8\u53ef\u4ee5\u83b7\u53d6\u7684\u8bcd\u5411\u91cf\u4fe1\u606f\u3002 fastText \u6700\u5927\u7684\u7279\u70b9\u5728\u4e8e\u5feb\uff0c\u8bba\u6587\u4e2d\u5bf9\u8fd9\u4e00\u70b9\u4e5f\u505a\u4e86\u8be6\u7ec6\u7684\u5b9e\u9a8c\u9a8c\u8bc1\uff0c\u5728\u4e00\u4e9b\u5206\u7c7b\u6570\u636e\u96c6\u4e0a\uff0cfastText \u901a\u5e38\u90fd\u53ef\u4ee5\u628a CNN \u7ed3\u6784\u7684\u6a21\u578b\u8981\u8017\u65f6\u51e0\u5c0f\u65f6\u751a\u81f3\u51e0\u5929\u7684\u65f6\u95f4\uff0c\u6025\u5267\u51cf\u5c11\u5230\u53ea\u9700\u8981\u6d88\u8017\u51e0\u79d2\u949f\uff0c\u4e0d\u53ef\u8c13\u4e0d\u201cfast\u201d\u3002 \u4e0d\u8fc7\u8bf4\u4e2a\u516b\u5366\uff0c\u4e3a\u4ec0\u4e48 fastText \u7ed3\u6784\u548c CBOW \u5982\u6b64\u76f8\u4f3c\u3002\u611f\u5174\u8da3\u7684\u8bfb\u8005\u60f3\u8981\u7ee7\u7eed\u6df1\u6316\u7684\u8bdd\uff0c\u8fd8\u53ef\u4ee5\u770b\u770b 2015 \u5e74 ACL \u7684\u4e00\u7bc7\u8bba\u6587 Deep Unordered Composition Rivals Syntactic Methods for Text Classification \uff0c\u7ed3\u6784\u53c8\u662f\u4f55\u5176\u76f8\u4f3c\uff0c\u5e76\u4e14\u6bd4 fastText \u7684\u8bba\u6587\u63a2\u8ba8\u7684\u66f4\u4e3a\u6df1\u5165\u4e00\u4e9b\uff0c\u4f46\u662f fastText \u662f 2016 \u5e74\u7684\u6587\u7ae0\uff0c\u5269\u4e0b\u7684\u5927\u5bb6\u81ea\u5df1\u53bb\u60f3\u597d\u4e86\u3002 \u8fd9\u91cc\u9762\u5927\u6982\u4e00\u4e2a\u7279\u522b\u91cd\u8981\u7684\u539f\u56e0\u5c31\u662f fastText \u7684\u4f5c\u8005\u4e4b\u4e00\u4fbf\u662f 3 \u5e74\u524d CBOW \u7684\u63d0\u51fa\u8005 Mikolov \u672c\u4eba\uff0c\u53ea\u4e0d\u8fc7\u6614\u65e5\u7684 Mikolov \u8fd8\u5728\u8c37\u6b4c\uff0c\u5982\u4eca 3 \u5e74\u65f6\u95f4\u4e00\u6643\u800c\u8fc7\uff0c\u65e9\u5df2\u662f Facebook \u7684\u4eba\u4e86\u3002","title":"2.3 fastText"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#24","text":"\u4e3a\u4ec0\u4e48\u8bf4 word2vec \u7684\u51fa\u73b0\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u9886\u57df\u7684\u53d1\u5c55\uff1f \u901a\u5e38\u4ee5\u4e3a\uff0cword2vec \u4e00\u7c7b\u7684\u65b9\u6cd5\u4f1a\u7ed9\u6bcf\u4e00\u4e2a\u8bcd\u8d4b\u4e88\u4e00\u4e2a**\u5411\u91cf\u7684\u8868\u5f81**\uff0c\u4e0d\u8fc7\u4f3c\u4e4e\u4ece\u6765\u6ca1\u6709\u4eba\u60f3\u8fc7\u8fd9\u4e2a\u529e\u6cd5\u4e3a\u4ec0\u4e48\u884c\u4e4b\u6709\u6548\uff1f\u96be\u9053\u662f\u7687\u5e1d\u7684\u65b0\u8863\uff1f\u6309\u7406\u6765\u8bf4\uff0c\u5305\u62ec NNLM \u5728\u5185\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4e3b\u8981\u51fa\u53d1\u70b9\u90fd\u662f\u5c06\u4e00\u4e2a\u8bcd\u8868\u793a\u6210\u8bcd\u5411\u91cf\uff0c\u5e76\u5c06\u5176\u8bed\u4e49**\u901a\u8fc7\u4e0a\u4e0b\u6587\u6765\u8868\u5f81**\u3002 \u5176\u5b9e\uff0c\u8fd9\u80cc\u540e\u662f\u6709\u7406\u8bba\u57fa\u7840\u7684\uff0c1954 \u5e74 Harris \u63d0\u51fa\u5206\u5e03\u5047\u8bf4\uff08distributional hypothesis\uff09\uff0c\u8fd9\u4e00\u5047\u8bf4\u8ba4\u4e3a\uff1a\u4e0a\u4e0b\u6587\u76f8\u4f3c\u7684\u8bcd\uff0c\u5176\u8bed\u4e49\u4e5f\u76f8\u4f3c\uff0c1957 \u5e74 Firth \u5bf9\u5206\u5e03\u5047\u8bf4\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u9610\u8ff0\u548c\u660e\u786e\uff1a\u8bcd\u7684\u8bed\u4e49\u7531\u5176\u4e0a\u4e0b\u6587\u51b3\u5b9a\uff08a word is characterized by the company it keeps\uff09\uff0c30 \u5e74\u540e\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u7956\u5e08\u7237 Hinton \u4e5f\u4e8e 1986 \u5e74\u5c1d\u8bd5\u8fc7\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\u3002 \u800c word2vec \u7684\u8d21\u732e\u8fdc\u4e0d\u6b62\u662f\u7ed9\u6bcf\u4e00\u4e2a\u8bcd\u8d4b\u4e88\u4e00\u4e2a**\u5206\u5e03\u5f0f\u7684\u8868\u5f81**\uff0c\u79c1\u4ee5\u4e3a\uff0c \u5b83\u5e26\u6765\u4e86\u4e00\u79cd\u5168\u65b0\u7684 NLP \u6a21\u578b\u5efa\u7acb\u65b9\u6cd5 \u3002\u5728\u8fd9\u4e4b\u524d\uff0c\u5927\u591a\u6570 NLP \u4efb\u52a1\u90fd\u8981\u5728\u5982\u4f55\u6316\u6398\u66f4\u591a\u6587\u672c\u8bed\u4e49\u7279\u5f81\u4e0a\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\uff0c\u751a\u81f3\u8fd9\u4e00\u90e8\u5206\u5de5\u4f5c\u5360\u53bb\u4e86\u6574\u4e2a\u4efb\u52a1\u5de5\u4f5c\u91cf\u7684\u7edd\u5927\u90e8\u5206\u3002 \u800c\u4ee5 word2vec \u4e3a\u4ee3\u8868\u7684 distributed representation \u65b9\u6cd5\u5927\u91cf\u6d8c\u73b0\u540e\uff08\u5c24\u5176\u662f\u56e0\u4e3a\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u7684\u9884\u8bad\u7ec3\u8bcd\u5411\u91cf\u6210\u4e3a\u73b0\u5b9e\uff0c\u5e76\u4e14\u88ab\u8bc1\u660e\u786e\u5b9e\u884c\u4e4b\u6709\u6548\u4e4b\u540e\uff09\uff0c\u7b97\u6cd5\u4eba\u5458\u53d1\u73b0\u5229\u7528 word2vec \u5728\u9884\u8bad\u7ec3\u4e0a\u5b66\u4e60\u5230\u7684\u8bcd\u5411\u91cf\uff0c\u521d\u59cb\u5316\u4ed6\u4eec\u81ea\u5df1\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\uff0c\u4f1a\u5e26\u6765\u6781\u5927\u6548\u679c\u7684\u63d0\u5347\uff0c\u4ee5\u81f3\u4e8e\u8fd9\u4e94\u5e74\u4ee5\u6765\uff0c\u51e0\u4e4e\u4e1a\u5185\u7684\u9ed8\u8ba4\u505a\u6cd5\u4fbf\u662f\u8981\u7528\u65e0\u8bba word2vec \u8fd8\u662f GloVe \u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\uff0c\u4f5c\u4e3a\u6a21\u578b\u7684\u7b2c\u4e00\u5c42\uff0c**\u5982\u679c\u4e0d\u8fd9\u4e48\u505a\uff0c\u5927\u7ea6\u53ea\u6709\u4e24\u4e2a\u539f\u56e0\uff1a**1\uff09\u4f60\u5f88\u571f\u8c6a\uff0c\u6709\u94b1\u6807\u6ce8\u5927\u91cf\u76d1\u7763\u6570\u636e\uff1b2\uff09\u4f60\u5728\u86ee\u5e72\u3002 \u800c\u8fd9\u4e00\u4e2a\u601d\u60f3\uff0c\u7edd\u4e0d\u662f\u5982\u5b83\u8868\u8c61\u6240\u663e\u793a\u7684\u4e00\u6837\uff0c\u4f3c\u4e4e\u548c\u8fc7\u53bb\u505a\u6587\u672c\u7279\u5f81\u6ca1\u4ec0\u4e48\u592a\u5927\u533a\u522b\uff0c\u662f\u7684\uff0c\u8868\u8c61\u786e\u5b9e\u662f\u8fd9\u6837\uff0c\u65e0\u975e\u662f\u628a\u4e00\u4e2a\u8bcd\u7528\u4e86\u4e00\u5806\u6570\u5b57\u6765\u8868\u5f81\u800c\u5df2\uff0c \u8fd9\u548c\u79bb\u6563\u5316\u7684\u7279\u5f81\u6709\u4ec0\u4e48\u672c\u8d28\u533a\u522b\u5417\uff1f **\u6709\uff0c\u56e0\u4e3a\u5b83\u5f00\u542f\u4e86\u4e00\u79cd\u5168\u65b0\u7684 NLP \u6a21\u578b\u8bad\u7ec3\u65b9\u5f0f\u2014\u2014\u8fc1\u79fb\u5b66\u4e60\u3002**\u57fa\u672c\u601d\u60f3\u4fbf\u662f\u5229\u7528\u4e00\u5207\u53ef\u4ee5\u5229\u7528\u7684\u73b0\u6210\u77e5\u8bc6\uff0c\u8fbe\u5230\u5feb\u901f\u5b66\u4e60\u7684\u76ee\u7684\uff0c\u8fd9\u548c\u4eba\u7c7b\u7684\u8fdb\u5316\u5386\u7a0b\u4f55\u5176\u76f8\u4f3c\u3002 \u867d\u7136\u54bf\u54bf\u5440\u5440\u56eb\u56f5\u541e\u67a3\u4f3c\u7684\u521a\u5f00\u59cb\u80fd\u591f\u8bf4\u5f97\u4e09\u4e24\u4e2a\u8bcd\uff0c\u7136\u800c\u8fd9\u662f\u201cNLP \u7684\u4e00\u5c0f\u6b65\uff0c\u4eba\u7c7b AI \u7684\u4e00\u5927\u6b65\u201d\u3002\u6b63\u5982\u4eba\u7c7b\u8bed\u8a00\u4ea7\u751f\u4e4b\u521d\uff0c\u4e00\u65e6\u67d0\u4e2a\u539f\u59cb\u4eba\u7c7b\u7684\u5589\u90e8\u53d1\u51fa\u7684\u67d0\u4e2a\u97f3\u8282\uff0c\u7ecf\u65e0\u6bd4\u667a\u6167\u548c\u5228\u6839\u95ee\u5e95\u8003\u8bc1\u7684\u53f2\u5b66\u5bb6\u7814\u7a76\u8bc1\u5b9e\u4e86\u5b83\u5177\u6709\u67d0\u4e2a\u660e\u786e\u7684\u6307\u4ee3\u610f\u4e49\uff08\u65e0\u8bba\u5b83\u6307\u4ee3\u4ec0\u4e48\uff0c\u5373\u4fbf\u662f\u4eba\u7c7b\u7684\u6392\u6cc4\u7269\uff09\uff0c\u8fd9\u4fbf\u65e0\u6bd4\u5e84\u4e25\u7684\u5ba3\u793a\u7740\u4e00\u4e2a\u5168\u65b0\u7269\u79cd\u7684\u8bde\u751f\uff0c\u6211\u60f3\u8fc1\u79fb\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u8fd9\u4e00\u5c0f\u6b65\uff0c\u5927\u6982\u4e0e\u6b64\u540c\u62c5\u5f53\u3002","title":"2.4 \u722c\u4e0a\u7b2c\u4e00\u7ea7\u68af\u5b50\u7684\u9769\u547d\u610f\u4e49"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#3","text":"\u9664\u4e86\u5728 word \u7ea7\u522b\u7684 embedding \u65b9\u6cd5\u4e0a\u6709\u5927\u91cf\u6a21\u578b\u548c\u7b97\u6cd5\u7684\u6d8c\u73b0\uff0c\u540c\u6837\u5730\uff0c\u5728\u5b57\u7b26\u7ea7\u522b\u3001\u53e5\u5b50\u7ea7\u522b\u548c\u6bb5\u843d\u7ea7\u522b\u540c\u6837\u6709\u5927\u91cf\u6a21\u578b\u63d0\u51fa\u3002 word2vec \u5f00\u6e90\u968f\u540e\u7684\u7b2c\u4e00\u5e74\uff0c\u4e5f\u5c31\u662f\u5728 2014 \u5e74\uff0c\u8fd8\u662f Mikolov\uff0c\u5728\u4ed6\u548c\u53e6\u4e00\u4f4d\u4f5c\u8005\u5408\u4f5c\u7684\u4e00\u7bc7\u8bba\u6587 Distributed Representations of Sentences and Documents \u4e2d\uff0c\u63d0\u51fa\u4e86\u53ef\u4ee5\u501f\u9274 word2vec \u601d\u60f3\u7684\u4e24\u79cd\u7ed3\u6784\uff1aPV-DM \u548c PV-DBOW\uff0c\u5206\u522b\u5bf9\u5e94 word2vec \u4e2d\u7684 CBOW \u548c Skip-gram\u3002","title":"3. \u68af\u5b50\u7684\u4e00\u7ea7\u534a"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#31-pv-dm-pv-dbow","text":"PV-DM \u7684\u5168\u79f0\u662f Distributed Memory Model of Paragraph Vectors\uff0c\u548c CBOW \u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u4e0a\u4e0b\u6587\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u4e0d\u8fc7\u5728\u8f93\u5165\u5c42\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4e5f\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6587\u6863 ID \u6620\u5c04\u5230\u4e00\u4e2a\u5411\u91cf\u7684 look-up table\uff0c\u6a21\u578b\u7684\u76ee\u7684\u4fbf\u662f\u5c06\u5f53\u524d\u6587\u6863\u7684\u5411\u91cf\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5411\u91cf\u8054\u5408\u8f93\u5165\u6a21\u578b\uff0c\u5e76\u8ba9\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\u3002 \u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5bf9\u4e8e\u73b0\u6709\u7684\u6587\u6863\uff0c\u4fbf\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u5feb\u901f\u5f97\u5230\u8be5\u6587\u6863\u7684\u5411\u91cf\uff0c\u800c\u5bf9\u4e8e\u65b0\u7684\u4e00\u7bc7\u6587\u6863\uff0c\u90a3\u4e48\u5219\u9700\u8981\u5c06\u5df2\u6709\u7684 look-up table \u6dfb\u52a0\u76f8\u5e94\u7684\u5217\uff0c\u7136\u540e\u91cd\u65b0\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u53ea\u4e0d\u8fc7\u6b64\u65f6\u56fa\u5b9a\u597d\u5176\u4ed6\u7684\u53c2\u6570\uff0c\u53ea\u8c03\u6574 look-up table\uff0c\u6536\u655b\u540e\u4fbf\u53ef\u4ee5\u5f97\u5230\u65b0\u6587\u6863\u5bf9\u5e94\u7684\u5411\u91cf\u4e86\u3002 PV-DBOW \u7684\u5168\u79f0\u5219\u662f Distributed Bag of Words version of Paragraph Vector\uff0c\u548c Skip-gram \u7c7b\u4f3c\uff0c\u901a\u8fc7\u6587\u6863\u6765\u9884\u6d4b\u6587\u6863\u5185\u7684\u8bcd\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u6587\u672c\u7247\u6bb5\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u7247\u6bb5\u4e2d\u91c7\u6837\u4e00\u4e2a\u8bcd\uff0c\u8ba9 PV-DBOW \u6a21\u578b\u6765\u9884\u6d4b\u8fd9\u4e2a\u8bcd\u3002 \u4ee5\u6b64\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u8bad\u7ec3\u65b9\u6cd5\uff0c\u8bf4\u767d\u4e86\uff0c\u672c\u8d28\u4e0a\u548c Skip-gram \u662f\u4e00\u6837\u7684\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u81f4\u547d\u7684\u5f31\u70b9\uff0c\u5c31\u662f\u4e3a\u4e86\u83b7\u53d6\u65b0\u6587\u6863\u7684\u5411\u91cf\uff0c\u8fd8\u5f97\u7ee7\u7eed\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u5e76\u4e14\u7531\u4e8e\u6a21\u578b\u4e3b\u8981\u662f\u9488\u5bf9\u6587\u6863\u5411\u91cf\u9884\u6d4b\u8bcd\u5411\u91cf\u7684\u8fc7\u7a0b\u8fdb\u884c\u5efa\u6a21\uff0c\u5176\u5b9e\u5f88\u96be\u53bb\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u66f4\u4e30\u5bcc\u7684\u8bed\u4e49\u7ed3\u6784\uff0c\u6240\u4ee5\u8fd9\u4e24\u79cd\u83b7\u53d6\u6587\u6863\u5411\u91cf\u7684\u65b9\u6cd5\u90fd\u672a\u80fd\u5927\u89c4\u6a21\u5e94\u7528\u5f00\u6765\u3002","title":"3.1 PV-DM \u548c PV-DBOW"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#32-skip-thoughts","text":"2015 \u5e74\uff0c\u591a\u4f26\u591a\u5927\u5b66\u7684 Kiros \u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u65b9\u6cd5\u53eb Skip-thoughts\u3002\u540c\u6837\u4e5f\u662f\u501f\u9274\u4e86 Skip-gram \u7684\u601d\u60f3\uff0c\u4f46\u662f\u548c PV-DBOW \u4e2d\u5229\u7528\u6587\u6863\u6765\u9884\u6d4b\u8bcd\u7684\u505a\u6cd5\u4e0d\u4e00\u6837\u7684\u662f\uff0c Skip-thoughts \u76f4\u63a5\u5728\u53e5\u5b50\u95f4\u8fdb\u884c\u9884\u6d4b\uff0c\u4e5f\u5c31\u662f\u5c06 Skip-gram \u4e2d\u4ee5\u8bcd\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u66ff\u6362\u6210\u4e86\u4ee5\u53e5\u5b50\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u9009\u5b9a\u4e00\u4e2a\u7a97\u53e3\uff0c\u904d\u5386\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u7136\u540e\u5206\u522b\u5229\u7528\u5f53\u524d\u53e5\u5b50\u53bb\u9884\u6d4b\u548c\u8f93\u51fa\u5b83\u7684\u4e0a\u4e00\u53e5\u548c\u4e0b\u4e00\u53e5 \u3002 \u5bf9\u4e8e\u53e5\u5b50\u7684\u5efa\u6a21\u5229\u7528\u7684 RNN \u7684 sequence \u7ed3\u6784\uff0c\u9884\u6d4b\u4e0a\u4e00\u4e2a\u548c\u4e0b\u4e00\u4e2a\u53e5\u5b50\u65f6\u5019\uff0c\u4e5f\u662f\u5229\u7528\u7684\u4e00\u4e2a sequence \u7684 RNN \u6765\u751f\u6210\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7ed3\u6784\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a Encoder-Decoder \u6846\u67b6\uff0c\u53ea\u4e0d\u8fc7\u548c\u666e\u901a\u6846\u67b6\u4e0d\u4e00\u6837\u7684\u662f\uff0cSkip-thoughts \u6709\u4e24\u4e2a Decoder\u3002 \u5728\u4eca\u5929\u770b\u6765\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u6709\u5f88\u591a\u4e0d\u5b8c\u5584\u6216\u8005\u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff08\u4f5c\u8005\u4e5f\u5728\u8bba\u6587\u4e2d\u5206\u522b\u63d0\u5230\u4e86\u8fd9\u4e9b future works\uff09\uff0c\u6bd4\u5982\u8f93\u5165\u7684 Encoder \u53ef\u4ee5\u5f15\u5165 attention \u673a\u5236\uff0c\u4ece\u800c\u8ba9 Decoder \u7684\u8f93\u5165\u4e0d\u518d\u53ea\u662f\u4f9d\u8d56 Encoder \u6700\u540e\u4e00\u4e2a\u65f6\u523b\u7684\u8f93\u51fa\uff1bEncoder \u548c Decoder \u53ef\u4ee5\u5229\u7528\u66f4\u6df1\u5c42\u7684\u7ed3\u6784\uff1bDecoder \u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6269\u5927\uff0c\u53ef\u4ee5\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u66f4\u591a\u7684\u53e5\u5b50\uff1bRNN \u4e5f\u4e0d\u662f\u552f\u4e00\u7684\u9009\u62e9\uff0c\u8bf8\u5982 CNN \u4ee5\u53ca 2017 \u5e74\u8c37\u6b4c\u63d0\u51fa\u7684 Transformer \u7ed3\u6784\u4e5f\u53ef\u4ee5\u5229\u7528\u8fdb\u6765\uff0c\u540e\u6765\u679c\u4e0d\u5176\u7136\u8c37\u6b4c\u7684 BERT \u4fbf\u501f\u9274\u4e86\u8fd9\u4e00\u601d\u8def\uff0c\u5f53\u7136\u8fd9\u662f\u540e\u8bdd\u4e86\uff0c\u7559\u4e0b\u6682\u4e14\u4e0d\u8868\u3002","title":"3.2 Skip-thoughts"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#33-quick-thoughts","text":"2018 \u5e74\u7684\u65f6\u5019\uff0c\u5728 Skip-thoughts \u7684\u57fa\u7840\u4e0a\uff0cGoogle Brain \u7684 Logeswaran \u7b49\u4eba\u5c06\u8fd9\u4e00\u601d\u60f3\u505a\u4e86\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u4ed6\u4eec\u8ba4\u4e3a Skip-thoughts \u7684 Decoder \u6548\u7387\u592a\u4f4e\uff0c\u4e14\u65e0\u6cd5\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u5f88\u597d\u7684\u8bad\u7ec3\uff08\u8fd9\u662f RNN \u7ed3\u6784\u7684\u901a\u75c5\uff09\u3002 \u6240\u4ee5\u4ed6\u4eec\u628a Skip-thoughts \u7684\u751f\u6210\u4efb\u52a1\u6539\u8fdb\u6210\u4e3a\u4e86\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1 \uff0c\u5177\u4f53\u8bf4\u6765\u5c31\u662f\u628a\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u6b63\u4f8b\uff0c\u628a\u4e0d\u662f\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u8d1f\u4f8b\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u8f93\u5165\u6a21\u578b\uff0c\u8ba9\u6a21\u578b\u5224\u65ad\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u662f\u5426\u662f\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002 \u53ef\u4ee5\u8bf4\uff0c\u4ec5\u4ec5\u51e0\u4e2a\u6708\u4e4b\u540e\u7684 BERT \u6b63\u662f\u5229\u7528\u7684\u8fd9\u79cd\u601d\u8def\u3002\u800c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u548c Skip-thoughts \u4e00\u8109\u76f8\u627f\u3002","title":"3.3 Quick-thoughts"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#34-infersent","text":"\u9664\u4e86 Skip-thoughts \u548c Quick-thoughts \u8fd9\u4e24\u79cd\u4e0d\u9700\u8981\u4eba\u5de5\u6807\u8bb0\u6570\u636e\u7684\u6a21\u578b\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u4ece\u76d1\u7763\u6570\u636e\u4e2d\u5b66\u4e60\u53e5\u5b50\u8868\u793a\u7684\u65b9\u6cd5\u3002 \u6bd4\u5982 2017 \u5e74 Facebook \u7684\u7814\u7a76\u4eba\u5458 Conneau \u7b49\u4eba\u63d0\u51fa\u7684 InferSent \u6846\u67b6\uff0c\u5b83\u7684\u601d\u60f3\u7279\u522b\u7b80\u5355\uff0c\u5148\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\u5728\u65af\u5766\u798f\u7684 SNLI\uff08Stanford Natural Language Inference\uff09\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\uff0c\u800c\u540e\u5c06\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u4ee5\u6b64\u6765\u83b7\u5f97\u4e00\u4e2a\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a\uff0c\u518d\u5c06\u8fd9\u4e2a\u53e5\u5b50\u7684\u8868\u793a\u5e94\u7528\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\uff0c\u6765\u8bc4\u4f30\u53e5\u5b50\u5411\u91cf\u7684\u4f18\u52a3\u3002\u6846\u67b6\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fd9\u4e2a\u6846\u67b6\u6700\u5e95\u5c42\u662f\u4e00\u4e2a Encoder\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u8981\u83b7\u53d6\u7684\u53e5\u5b50\u5411\u91cf\u63d0\u53d6\u5668\uff0c\u7136\u540e\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u5411\u91cf\u901a\u8fc7\u4e00\u4e9b\u5411\u91cf\u64cd\u4f5c\u540e\u5f97\u5230\u53e5\u5b50\u5bf9\u7684\u6df7\u5408\u8bed\u4e49\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u5168\u8fde\u63a5\u5c42\u5e76\u505a SNLI \u4e0a\u7684\u4e09\u5206\u7c7b\u4efb\u52a1\u3002 \u505a\u8fc7\u53e5\u5b50\u5339\u914d\u4efb\u52a1\u7684\u4e00\u5b9a\u77e5\u9053\uff0c\u8fd9\u4e2a\u6846\u67b6\u662f\u4e00\u4e2a\u6700\u57fa\u672c\uff08\u751a\u81f3\u4e5f\u662f\u6700\u7b80\u964b\uff09\u7684\u53e5\u5b50\u5339\u914d\u6846\u67b6\u3002\u5bf9\u4e8e\u5e95\u5c42\u7684 Encoder \u6765\u8bf4\uff0c\u8bba\u6587\u4f5c\u8005\u5206\u522b\u5c1d\u8bd5\u4e86 7 \u79cd\u6a21\u578b\uff0c\u7136\u540e\u5206\u522b\u4ee5\u8fd9\u4e9b\u6a21\u578b\u4f5c\u4e3a\u5e95\u5c42\u7684 Encoder \u7ed3\u6784\u5728 SNLI \u4e0a\u8fdb\u884c\u76d1\u7763\u8bad\u7ec3\u3002 \u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bc4\u4f30\uff0c\u6700\u540e\u53d1\u73b0\u5f53 Encoder \u4f7f\u7528 BiLSTM with max pooling \u7ed3\u6784\u65f6\uff0c\u5bf9\u4e8e\u53e5\u5b50\u7684\u8868\u5f81\u6027\u80fd\u6700\u597d\u3002\u5bf9\u5177\u4f53\u7ec6\u8282\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u53c2\u8003\u4ed6\u4eec\u7684\u8bba\u6587***Supervised Learning of Universal Sentence Representations from Natural Language Inference Data***\u3002","title":"3.4 InferSent"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#35-general-purpose-sentence-representation","text":"\u6b64\u5916\uff0c\u9664\u4e86 InferSent \u8fd9\u79cd\u5355\u4e2a\u4efb\u52a1\u7684\u76d1\u7763\u5b66\u4e60\u5916\uff0c\u6700\u65b0\u7684\u5de5\u4f5c\u9010\u6e10\u5c06\u591a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\u5e94\u7528\u5230\u83b7\u53d6\u53e5\u5b50\u7684\u8868\u5f81\u4e2d\u3002 \u4f8b\u5982 Subramanian \u7b49\u4eba\u53d1\u8868\u5728 ICLR 2018 \u4e0a\u7684 Learning General Purpose Distributed Sentence Representations via Large Scale Multi-task Learning \uff0c\u5c31\u63d0\u51fa\u4e86**\u5229\u7528\u56db\u79cd\u4e0d\u540c\u7684\u76d1\u7763\u4efb\u52a1\u6765\u8054\u5408\u5b66\u4e60\u53e5\u5b50\u7684\u8868\u5f81**\uff0c\u8fd9\u56db\u79cd\u4efb\u52a1\u5206\u522b\u662f\uff1aNatural Language Inference\uff0cSkip-thougts\uff0cNeural Machine Translation \u4ee5\u53ca Constituency Parsing \u7b49\u3002 \u4f5c\u8005\u7684\u51fa\u53d1\u70b9\u4e5f\u7279\u522b\u7b80\u5355\uff0c \u901a\u7528\u7684\u53e5\u5b50\u8868\u5f81\u5e94\u8be5\u901a\u8fc7\u4fa7\u91cd\u70b9\u4e0d\u540c\u7684\u4efb\u52a1\u6765\u8054\u5408\u5b66\u4e60\u5230\uff0c\u800c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u7279\u5b9a\u4efb\u52a1\u6765\u5b66\u4e60\u53e5\u5b50\u8868\u5f81 \uff0c\u540e\u6765\u4f5c\u8005\u5728\u8bba\u6587\u4e2d\u7684\u5b9e\u9a8c\u4e5f\u786e\u5b9e\u8bc1\u660e\u4e86\u8fd9\u70b9\u3002 \u5b9e\u9a8c\u7684\u5177\u4f53\u505a\u6cd5\u662f\uff0c\u5148\u7528\u8054\u5408\u5b66\u4e60\u7684\u65b9\u6cd5\u5728\u4e0a\u8ff0\u56db\u4e2a\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5c06\u6a21\u578b\u7684\u8f93\u51fa\u4f5c\u4e3a\u53e5\u5b50\u7684\u8868\u5f81\uff08\u6216\u8005\u628a\u8fd9\u4e2a\u8054\u5408\u5b66\u4e60\u7684\u6a21\u578b\u4f5c\u4e3a\u7279\u5f81\u63d0\u53d6\u5668\uff09\uff0c\u7136\u540e\u76f4\u63a5\u5728\u8fd9\u4e2a\u8868\u5f81\u4e0a\u63a5\u4e0a\u975e\u5e38\u7b80\u5355\u7684\u5168\u8fde\u63a5\u5c42\u505a\u5206\u7c7b\u5668\uff0c\u5e76\u4e14\u540c\u65f6\u4fdd\u8bc1\u6700\u5e95\u5c42\u7684\u7279\u5f81\u63d0\u53d6\u5668\u4e2d\u53c2\u6570**\u4e0d\u52a8**\uff08\u4e5f\u5c31\u662f\u53ea\u628a\u5b83\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff09\uff0c\u518d\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u505a\u8bad\u7ec3\uff08\u53ea\u8bad\u7ec3\u6700\u540e\u63a5\u4e0a\u7684\u5168\u8fde\u63a5\u5c42\u5206\u7c7b\u5668\uff09\uff0c\u6700\u540e\u6839\u636e\u8bad\u7ec3\u51fa\u6765\u7684\u7b80\u5355\u5206\u7c7b\u5668\u5728\u5404\u81ea\u5206\u7c7b\u4efb\u52a1\u7684\u6d4b\u8bd5\u96c6\u4e0a\u505a\u8bc4\u4f30\u3002 \u6700\u540e\u4f5c\u8005\u60ca\u559c\u7684\u53d1\u73b0\u5f88\u591a\u4efb\u52a1\u4e0a\u4ed6\u4eec\u7684\u7b80\u5355\u5206\u7c7b\u5668\u90fd\u8981\u8d85\u8fc7\u5f53\u65f6\u7684\u6700\u597d\u7ed3\u679c\uff0c\u5e76\u4e14\u4ed6\u4eec\u8fd8\u53d1\u73b0\u8054\u5408\u8bad\u7ec3\u4e2d**\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e8e\u53e5\u5b50\u8868\u5f81\u4e2d\u7684\u4e0d\u540c\u65b9\u9762\u6709\u4e0d\u540c\u7684\u8d21\u732e**\u3002","title":"3.5 General Purpose Sentence Representation"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#36-universal-sentence-encoder","text":"\u540c\u6837\u5728 2018 \u5e74\uff0c\u8c37\u6b4c\u7684 Daniel Cer \u7b49\u4eba\u5728\u8bba\u6587 Universal Sentence Encoder \u4e2d\u63d0\u51fa\u7684\u601d\u8def\u57fa\u672c\u548c General Purpose Sentence Representation \u7684\u5de5\u4f5c\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u4f5c\u8005\u63d0\u51fa\u4e86\u5229\u7528 Transformer \u548c DAN\uff08\u4e0a\u6587\u63d0\u5230\u8fc7\u7684\u548c CBOW \u4e0e fastText \u90fd\u795e\u4f3c\u7684 Deep Unordered Composition Rivals Syntactic Methods for Text Classification \uff09\u4e24\u79cd\u6846\u67b6\u4f5c\u4e3a\u53e5\u5b50\u7684 Encoder\u3002 Transformer \u7ed3\u6784\u66f4\u4e3a\u590d\u6742\uff0c\u53c2\u6570\u66f4\u591a\uff0c\u8bad\u7ec3\u4e5f\u76f8\u5bf9\u6bd4\u8f83\u8017\u65f6\uff0c\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u6548\u679c\u4f1a\u66f4\u597d\u4e00\u4e9b\u3002\u5bf9\u5e94\u7684\uff0cDAN \u7ed3\u6784\u7b80\u5355\uff0c\u53ea\u6709\u4e24\u4e2a\u9690\u85cf\u5c42\uff08\u751a\u81f3\u53ef\u4ee5\u51cf\u5c0f\u4e3a\u53ea\u9700\u8981\u4e00\u4e2a\u9690\u85cf\u5c42\uff09\uff0c\u53c2\u6570\u6bd4\u8f83\u5c11\uff0c\u8bad\u7ec3\u76f8\u5bf9\u6bd4\u8f83\u7701\u65f6\u7701\u8d44\u6e90\uff0c\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u6548\u679c\u4f1a\u5dee\u4e00\u4e9b\uff08\u5e76\u4e0d\u662f\u7edd\u5bf9\uff0c\u8bba\u6587\u4e2d\u4e5f\u53d1\u73b0\u67d0\u4e9b\u573a\u666f\u4e0b DAN \u7684\u6548\u679c\u751a\u81f3\u66f4\u597d\uff09\u3002\u7136\u540e\u4f5c\u8005\u65e2\u5728\u65e0\u6807\u8bb0\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u4e5f\u5728\u76d1\u7763\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u6700\u540e\u5728\u5341\u4e2a\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8fc1\u79fb\u5b66\u4e60\u7684\u8bc4\u4f30\u3002\u6b64\u5916\uff0c\u4f5c\u8005\u8fd8\u653e\u51fa\u4e86\u4ed6\u4eec\u9884\u8bad\u7ec3\u597d\u7684 Encoder\uff0c\u53ef\u4ee5\u4f9b\u8fc1\u79fb\u5b66\u4e60\u7684\u53e5\u5b50\u7279\u5f81\u63d0\u53d6\u5668\u4f7f\u7528\u3002 \u9884\u8bad\u7ec3 Encoder\uff1a https://tfhub.dev/google/universal-sentence-encoder/2","title":"3.6 Universal Sentence Encoder"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#4","text":"","title":"4. \u62e8\u5f00\u8ff7\u96fe\u2014\u2014\u7b2c\u4e8c\u7ea7\u68af\u5b50\u82e5\u9690\u82e5\u73b0"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#41","text":"\u4e0a\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86\u597d\u51e0\u79cd\u83b7\u53d6\u53e5\u5b50\u8868\u5f81\u7684\u65b9\u6cd5\uff0c\u7136\u800c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u53ea\u5bf9\u5982\u4f55\u83b7\u53d6\u66f4\u597d\u7684\u53e5\u5b50\u8868\u5f81\u611f\u5174\u8da3\uff0c\u5176\u5b9e\u66f4\u6709\u8da3\u7684\u662f\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5728\u8bc4\u4f30\u4ed6\u4eec\u5404\u81ea\u6a21\u578b\u6027\u80fd\u7684\u65f6\u5019\u6240\u91c7\u53d6\u7684\u65b9\u6cd5\uff0c\u56de\u8fc7\u5934\u53bb\u8fdb\u884c\u68b3\u7406\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba\u662f\u7a0d\u65e9\u4e9b\u7684InferSent\uff0c\u8fd8\u662f2018\u5e74\u63d0\u51fa\u7684Quick-thoughts\u548cMulti-task Learning\u83b7\u53d6\u901a\u7528\u53e5\u5b50\u8868\u5f81\u7684\u65b9\u6cd5\uff0c \u4ed6\u4eec\u65e0\u4e00\u4f8b\u5916\u7684\u90fd\u4f7f\u7528\u4e86\u540c\u4e00\u79cd\u601d\u8def\uff1a\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u8868\u5f81\uff0c\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\u8fdb\u884c\u8bad\u7ec3\uff0c\u800c\u6b64\u65f6\u7684\u6a21\u578b\u4e00\u822c\u90fd\u53ea\u7528\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u7136\u540e\u63a5\u4e0asoftmax\u8fdb\u884c\u5206\u7c7b\uff0c\u5206\u7c7b\u5668\u8db3\u591f\u7b80\u5355\uff0c\u8db3\u591f\u6d45\u5c42\uff0c\u76f8\u6bd4\u90a3\u4e9b\u5728\u8fd9\u4e9b\u5206\u7c7b\u4efb\u52a1\u4e0a\u8bbe\u8ba1\u7684\u8db3\u591f\u590d\u6742\u7684\u6a21\u578b\u6765\u8bf4\u7b80\u76f4\u4e0d\u503c\u4e00\u63d0\uff0c\u7136\u800c\u4ee4\u4eba\u5927\u8dcc\u773c\u955c\u7684\u662f\uff0c\u7ed3\u679c\u65e0\u4e00\u4f8b\u5916\u7684\u8fd9\u4e9b\u7b80\u5355\u7684\u5206\u7c7b\u5668\u90fd\u80fd\u591f\u6bd4\u80a9\u751a\u81f3\u8d85\u8d8a\u4ed6\u4eec\u5404\u81ea\u65f6\u4ee3\u7684\u6700\u597d\u7ed3\u679c\uff0c\u8fd9\u4e0d\u80fd\u4e0d\u8bf4\u662f\u4e2a\u60ca\u559c\u3002\u800c\u521b\u9020\u8fd9\u4e9b\u60ca\u559c\u7684\u80cc\u540e\u529f\u81e3\uff0c\u5c31\u662f\u8fc1\u79fb\u5b66\u4e60\u3002\u66f4\u8fdb\u4e00\u6b65\u5730\uff0c\u8fc1\u79fb\u5b66\u4e60\u7684\u672c\u8d28\uff0c\u5c31\u662f\u7ed9\u722c\u4e0a\u201c\u5de8\u4eba\u7684\u80a9\u8180\u201d\u63d0\u4f9b\u4e86\u4e00\u67b6\u7ed3\u5b9e\u7684\u68af\u5b50\u3002 \u5177\u4f53\u7684\uff0c\u5728\u8fd9\u4e9b\u53e5\u5b50\u7ea7\u522b\u7684\u4efb\u52a1\u4e2d\uff0c\u5c5e\u4e8eInferSent\u548cQuick-thoughts\u8fd9\u4e9b\u6a21\u578b\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4fbf\u662f\u4ed6\u4eec\u5404\u81ea\u4f7f\u7528\u7684\u8bad\u7ec3\u6570\u636e\uff0c\u8fc1\u79fb\u5b66\u4e60\u6700\u540e\u7ed9\u4ed6\u4eec\u642d\u4e86\u4e00\u4e2a\u68af\u5b50\uff0c\u7136\u800c\u8fd9\u4e2a\u68af\u5b50\u5e76\u6ca1\u6709\u5f88\u597d\u4e0a\uff0c\u78d5\u78d5\u7eca\u7eca\uff0c\u4eba\u7c7bAI\u7b97\u662f\u7ad9\u5728\u7b2c\u4e00\u7ea7\u68af\u5b50\u4e0a\uff0c\u8bd5\u63a2\u6027\u7684\u4f38\u51fa\u4e86\u4e00\u53ea\u817f\uff0c\u53e6\u4e00\u53ea\u817f\u5373\u5c06\u8de8\u51fa\uff0c\u53ea\u53ef\u60dc\u5e76\u4e0d\u77e5\u9053\u662f\u5426\u6709\u4ed6\u4eec\u82e6\u82e6\u7b49\u5f85\u4e86\u4e94\u5e74\u4e4b\u4e45\u7684\u6208\u591a\uff1f","title":"4.1 \u6208\u591a\u4f1a\u6765\u5417\uff1f"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#42","text":"2017\u5e74\uff0cSalesforce\u7684Bryan McCann\u548c\u5176\u4ed6\u4e00\u4e9b\u4eba\uff0c\u53d1\u8868\u4e86\u4e00\u7bc7\u6587\u7ae0\u300aLearned in Translation: Contextualized Word Vectors\u300b\uff0c\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u4ed6\u4eec\u9996\u5148\u7528\u4e00\u4e2aEncoder-Decoder\u6846\u67b6\u5728\u673a\u5668\u7ffb\u8bd1\u7684\u8bad\u7ec3\u8bed\u6599\u4e0a\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u800c\u540e\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u53ea\u53d6\u5176\u4e2d\u7684Embedding\u5c42\u548cEncoder\u5c42\uff0c\u540c\u65f6\u5728\u4e00\u4e2a\u65b0\u7684\u4efb\u52a1\u4e0a\u8bbe\u8ba1\u4e00\u4e2atask-specific\u6a21\u578b\uff0c\u7136\u540e\u5c06\u539f\u5148\u9884\u8bad\u7ec3\u597d\u7684Embedding\u5c42\u548cEncoder\u5c42\u7684\u8f93\u51fa\u4f5c\u4e3a\u8fd9\u4e2atask-specific\u6a21\u578b\u7684\u8f93\u5165\uff0c\u6700\u7ec8\u5728\u65b0\u7684\u4efb\u52a1\u573a\u666f\u4e0b\u8fdb\u884c\u8bad\u7ec3\u3002\u4ed6\u4eec\u5c1d\u8bd5\u4e86\u5f88\u591a\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u5305\u62ec\u6587\u672c\u5206\u7c7b\uff0cQuestion Answering\uff0cNatural Language Inference\u548cSQuAD\u7b49\u7b49\uff0c\u5e76\u5728\u8fd9\u4e9b\u4efb\u52a1\u4e2d\uff0c\u4e0eGloVe\u4f5c\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\u5019\u7684\u6548\u679c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\u4ed6\u4eec\u63d0\u51fa\u7684Context Vectors\u5728\u4e0d\u540c\u4efb\u52a1\u4e2d\u4e0d\u540c\u7a0b\u5ea6\u7684\u90fd\u5e26\u6765\u4e86\u6548\u679c\u7684\u63d0\u5347\u3002 \u548c\u4e0a\u6587\u4e2d\u63d0\u5230\u7684\u8bf8\u5982 Skip-thoughts \u65b9\u6cd5\u6709\u6240\u4e0d\u540c\u7684\u662f\uff0cCoVe \u66f4\u4fa7\u91cd\u4e8e\u5982\u4f55\u5c06\u73b0\u6709\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5f97\u5230\u7684\u8868\u5f81\u8fc1\u79fb\u5230\u65b0\u4efb\u52a1\u573a\u666f\u4e2d \uff0c\u800c\u4e4b\u524d\u7684\u53e5\u5b50\u7ea7\u4efb\u52a1\u4e2d**\u5927\u591a\u6570\u90fd\u53ea\u628a\u8fc1\u79fb\u8fc7\u7a0b\u5f53\u505a\u4e00\u4e2a\u8bc4\u4f30\u4ed6\u4eec\u8868\u5f81\u6548\u679c\u7684\u624b\u6bb5**\uff0c\u56e0\u6b64\u89c2\u5ff5\u4e0a\u6709\u6240\u4e0d\u540c\u3002 \u90a3\u4e48\uff0cCoVe \u4f3c\u4e4e\u901a\u8fc7\u76d1\u7763\u6570\u636e\u4e0a\u7684\u9884\u8bad\u7ec3\uff0c\u53d6\u5f97\u4e86\u8ba9\u4eba\u773c\u524d\u4e00\u4eae\u7684\u7ed3\u679c\uff0c\u662f\u5426\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5730\uff0c\u6487\u53bb\u76d1\u7763\u6570\u636e\u7684\u4f9d\u8d56\uff0c\u76f4\u63a5\u5728\u65e0\u6807\u8bb0\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5462\uff1f","title":"4.2 \u4e00\u4e1d\u66d9\u5149"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#43-elmo","text":"2018\u5e74\u7684\u65e9\u4e9b\u65f6\u5019\uff0cAllenNLP\u7684Matthew E. Peters\u7b49\u4eba\u5728\u8bba\u6587\u300aDeep contextualized word representations\u300b\uff08\u8be5\u8bba\u6587\u540c\u65f6\u88abICLR\u548cNAACL\u63a5\u53d7\uff0c\u5e76\u4e14\u8fd8\u83b7\u5f97\u4e86NAACL\u6700\u4f73\u8bba\u6587\u5956\uff0c\u53ef\u89c1\u8fd9\u7bc7\u8bba\u6587\u7684\u542b\u91d1\u91cf\uff09\u4e2d\u9996\u6b21\u63d0\u51fa\u4e86ELMo\uff0c\u5b83\u7684\u5168\u79f0\u662fEmbeddings from Language Models\uff0c\u4ece\u540d\u79f0\u4e0a\u53ef\u4ee5\u770b\u51fa\uff0cELMo\u4e3a\u4e86\u5229\u7528\u65e0\u6807\u8bb0\u6570\u636e\uff0c\u4f7f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u5b83\u662f\u5982\u4f55\u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u3002 \u57fa\u672c\u6846\u67b6\u662f\u4e00\u4e2a\u53cc\u5c42\u7684 Bi-LSTM\uff0c\u4e0d\u8fc7\u5728\u7b2c\u4e00\u5c42\u548c\u7b2c\u4e8c\u5c42\u4e4b\u95f4\u52a0\u5165\u4e86\u4e00\u4e2a\u6b8b\u5dee\u7ed3\u6784\uff08\u4e00\u822c\u6765\u8bf4\uff0c\u6b8b\u5dee\u7ed3\u6784\u80fd\u8ba9\u8bad\u7ec3\u8fc7\u7a0b\u66f4\u7a33\u5b9a\uff09\u3002\u505a\u9884\u8bad\u7ec3\u7684\u65f6\u5019\uff0cELMo \u7684\u8bad\u7ec3\u76ee\u6807\u51fd\u6570\u4e3a\uff1a $$ \\sum_{k=1}^{N} \\log p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)+\\log p\\left(t_{k} | t_{k+1}, \\ldots, t_{N}\\right) $$ \u8fd9\u4e2a\u5f0f\u5b50\u5f88\u6e05\u6670\uff0c\u524d\u540e\u6709\u4e24\u4e2a\u6982\u7387\uff0c\u7b2c\u4e00\u4e2a\u6982\u7387\u662f\u6765\u81ea\u4e8e\u6b63\u5411\u7684\u7531\u5de6\u5230\u53f3\u7684 RNN \u7ed3\u6784\uff0c\u5728\u6bcf\u4e00\u4e2a\u65f6\u523b\u4e0a\u7684 RNN \u8f93\u51fa\uff08\u4e5f\u5c31\u662f\u8fd9\u91cc\u7684\u7b2c\u4e8c\u5c42 LSTM \u8f93\u51fa\uff09\uff0c\u7136\u540e\u518d\u63a5\u4e00\u4e2a Softmax \u5c42\u5c06\u5176\u53d8\u4e3a\u6982\u7387\u542b\u4e49\uff0c\u5c31\u81ea\u7136\u5f97\u5230\u4e86 \\(p\\left(t_{k} | t_{1}, \\dots, t_{k-1}\\right)\\) \uff1b\u4e0e\u6b64\u7c7b\u4f3c\uff0c\u7b2c\u4e8c\u4e2a\u6982\u7387\u6765\u81ea\u53cd\u5411\u7684\u7531\u53f3\u5230\u5de6\u7684 RNN \u7ed3\u6784\uff0c\u6bcf\u4e00\u4e2a\u65f6\u523b RNN \u7684\u8f93\u51fa\u7ecf\u8fc7 Softmax \u5c42\u540e\u4e5f\u80fd\u5f97\u5230\u4e00\u4e2a\u6982\u7387\u5927\u5c0f\uff0c\u8868\u793a\u4ece\u67d0\u4e2a\u8bcd\u7684\u4e0b\u6587\u63a8\u65ad\u8be5\u8bcd\u7684\u6982\u7387\u5927\u5c0f\u3002 ELMo \u7684\u57fa\u672c\u6846\u67b6\u4fbf\u662f 2-stacked biLSTM + Residual \u7684\u7ed3\u6784\uff0c\u4e0d\u8fc7\u548c\u666e\u901a RNN \u7ed3\u6784\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0cELMo \u501f\u9274\u4e86 2016 \u5e74 Google Brain \u7684 Rafal Jozefowicz \u7b49\u4eba\u53d1\u8868\u7684 Exploring the Limits of Language Modeling \uff0c\u5176\u4e3b\u8981\u6539\u8fdb\u5728\u4e8e\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4e0d\u518d\u662f word\uff0c\u800c\u662f\u53d8\u4e3a\u4e86\u4e00\u4e2a char-based CNN \u7ed3\u6784\uff0cELMo \u5728\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u8003\u8651\u4e86\u4f7f\u7528\u540c\u6837\u7684\u8fd9\u79cd\u7ed3\u6784\uff0c\u8be5\u7ed3\u6784\u5982\u4e0b\u56fe\u793a\uff1a \u8fd9\u6837\u505a\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f\u56e0\u4e3a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u90fd\u4f7f\u7528\u4e86\u8fd9\u79cd CNN \u7ed3\u6784\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u8f93\u51fa\u5c42\u4f7f\u7528\u8fd9\u79cd\u7ed3\u6784\u600e\u4e48\u7528\uff0c\u4ee5\u53ca\u6709\u4ec0\u4e48\u4f18\u52bf\u3002\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5728 CBOW \u4e2d\u7684\u666e\u901a Softmax \u65b9\u6cd5\u4e2d\uff0c\u4e3a\u4e86\u8ba1\u7b97\u6bcf\u4e2a\u8bcd\u7684\u6982\u7387\u5927\u5c0f\uff0c\u4f7f\u7528\u7684\u5982\u4e0b\u516c\u5f0f\u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a $$ P\\left(w_{t} | c_{t}\\right)=\\frac{\\exp \\left(e {\\prime}\\left(w_{t}\\right) x\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(e {\\prime}\\left(w_{i}\\right) x\\right)}, x=\\sum_{i \\in c} e\\left(w_{i}\\right) $$ \u8bf4\u767d\u4e86\uff0c\u4e5f\u5c31\u662f\u5148\u901a\u8fc7\u5411\u91cf\u70b9\u4e58\u7684\u5f62\u5f0f\u8ba1\u7b97\u5f97\u5230 logits\uff0c\u7136\u540e\u518d\u901a\u8fc7 softmax \u53d8\u6210\u6982\u7387\u610f\u4e49\uff0c\u8fd9\u672c\u8d28\u4e0a\u548c\u666e\u901a\u5206\u7c7b\u6ca1\u4ec0\u4e48\u533a\u522b\uff0c\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u8f83\u5927\u7684 |V| \u5206\u7c7b\u95ee\u9898\u3002 \u73b0\u5728\u6211\u4eec\u5047\u5b9a char-based CNN \u6a21\u578b\u662f\u73b0\u6210\u5df2\u6709\u7684\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u76ee\u6807\u8bcd\u90fd\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u5411\u91cf\u8868\u793a CNN(tk) \uff0c\u5f53\u524d\u65f6\u523b\u7684 LSTM \u7684\u8f93\u51fa\u5411\u91cf\u4e3a h\uff0c\u90a3\u4e48\u4fbf\u53ef\u4ee5\u901a\u8fc7\u540c\u6837\u7684\u65b9\u6cd5\u5f97\u5230\u76ee\u6807\u8bcd\u7684\u6982\u7387\u5927\u5c0f\uff1a $$ p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)=\\frac{\\exp \\left(\\operatorname{CNN} \\left(t_{k}\\right)^{T} h\\right)}{\\sum_{i=1}^{|V|} \\exp \\left(\\operatorname{CNN} \\left(t_{i}\\right)^{T} h\\right)}, h=\\operatorname{LSTM}\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right) $$ \u5728\u539f\u8bba\u6587\u4e2d\uff0c\u628a\u8fd9\u79cd\u5148\u7ecf\u8fc7 CNN \u5f97\u5230\u8bcd\u5411\u91cf\uff0c\u7136\u540e\u518d\u8ba1\u7b97 Softmax \u7684\u65b9\u6cd5\u53eb\u505a CNN Softmax\u3002 \u5229\u7528 CNN \u89e3\u51b3\u6709\u4e09\u70b9\u4f18\u52bf\u503c\u5f97\u6ce8\u610f\uff1a CNN \u80fd\u51cf\u5c11\u666e\u901a\u505a Softmax \u65f6\u5168\u8fde\u63a5\u5c42\u4e2d\u7684\u5fc5\u987b\u8981\u6709\u7684 |V|h \u7684\u53c2\u6570\u89c4\u6a21\uff0c\u53ea\u9700\u4fdd\u6301 CNN \u5185\u90e8\u7684\u53c2\u6570\u5927\u5c0f\u5373\u53ef\u3002\u4e00\u822c\u6765\u8bf4\uff0cCNN \u4e2d\u7684\u53c2\u6570\u89c4\u6a21\u90fd\u8981\u6bd4 |V|h \u7684\u53c2\u6570\u89c4\u6a21\u5c0f\u5f97\u591a\uff1b CNN \u53ef\u4ee5\u89e3\u51b3 OOV \uff08Out-of-Vocabulary\uff09\u95ee\u9898\uff0c\u8fd9\u4e2a\u5728\u7ffb\u8bd1\u95ee\u9898\u4e2d\u5c24\u5176\u5934\u75bc\uff1b \u5728\u9884\u6d4b\u9636\u6bb5\uff0cCNN \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u8ba1\u7b97\u53ef\u4ee5\u9884\u5148\u505a\u597d\uff0c\u66f4\u80fd\u591f\u51cf\u8f7b inference \u9636\u6bb5\u7684\u8ba1\u7b97\u538b\u529b\u3002 \u8865\u5145\u4e00\u53e5\uff0c\u666e\u901a Softmax \u5728\u5927\u8bcd\u5178\u4e0a\u7684\u8ba1\u7b97\u538b\u529b\uff0c\u90fd\u662f\u56e0\u4e3a\u6765\u81ea\u4e8e\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u628a\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u51fa\u901a\u8fc7\u5168\u8fde\u63a5\u5c42\u6620\u5c04\u4e3a\u5355\u4e2a\u503c\uff08\u800c\u6bcf\u4e2a\u7c7b\u522b\u9700\u8981\u4e00\u4e2a\u6620\u5c04\u4e00\u6b21\u3002\u4e00\u6b21 h \u5927\u5c0f\u7684\u8ba1\u7b97\u89c4\u6a21\uff0c|V| \u6b21\u6620\u5c04\u4fbf\u9700\u8981\u603b\u5171 |V| h \u8fd9\u4e48\u591a\u6b21\u7684\u6620\u5c04\u89c4\u6a21\uff09\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7c7b\u522b\u7684\u6620\u5c04\u53c2\u6570\u90fd\u4e0d\u540c\uff0c\u800c CNN Softmax \u7684\u597d\u5904\u5c31\u5728\u4e8e\u80fd\u591f\u505a\u5230\u5bf9\u4e8e\u4e0d\u540c\u7684\u8bcd\uff0c**\u6620\u5c04\u53c2\u6570\u90fd\u662f\u5171\u4eab\u7684* \uff0c\u8fd9\u4e2a\u5171\u4eab\u4fbf\u4f53\u73b0\u5728\u4f7f\u7528\u7684 CNN \u4e2d\u7684\u53c2\u6570\u90fd\u662f\u540c\u4e00\u5957\uff0c\u4ece\u800c\u5927\u5927\u51cf\u5c11\u53c2\u6570\u7684\u89c4\u6a21\u3002 \u540c\u6837\u7684\uff0c\u5bf9\u4e8e\u8f93\u5165\u5c42\uff0cELMo \u4e5f\u662f\u7528\u4e86\u4e00\u6837\u7684 CNN \u7ed3\u6784\uff0c\u53ea\u4e0d\u8fc7\u53c2\u6570\u4e0d\u4e00\u6837\u800c\u5df2\u3002\u548c\u8f93\u51fa\u5c42\u4e2d\u7684\u5206\u6790\u7c7b\u4f3c\uff0c\u8f93\u5165\u5c42\u4e2d CNN \u7684\u5f15\u5165\u540c\u6837\u53ef\u4ee5\u51cf\u5c11\u53c2\u6570\u89c4\u6a21\u3002\u4e0d\u8fc7 Exploring the Limits of Language Modeling \u6587\u4e2d\u4e5f\u6307\u51fa\u4e86\u8bad\u7ec3\u65f6\u95f4\u4f1a\u7565\u5fae\u589e\u52a0\uff0c\u56e0\u4e3a\u539f\u6765\u7684 look-up \u64cd\u4f5c\u53ef\u4ee5\u505a\u5230\u66f4\u5feb\u4e00\u4e9b\uff0c\u5bf9 OOV \u95ee\u9898\u4e5f\u80fd\u591f\u6bd4\u8f83\u597d\u7684\u5e94\u5bf9\uff0c\u4ece\u800c\u628a\u8bcd\u5178\u5927\u5c0f\u4e0d\u518d\u9650\u5b9a\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u8bcd\u5178\u5927\u5c0f\u4e0a\u3002 \u6700\u7ec8 ELMo \u7684\u4e3b\u8981\u7ed3\u6784\u4fbf\u5982\u4e0b\u56fe\uff08b\uff09\u6240\u793a\uff0c\u53ef\u89c1\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u90fd\u662f\u4e00\u4e2a CNN\uff0c\u4e2d\u95f4\u4f7f\u7528 Bi-LSTM \u6846\u67b6\uff0c\u81f3\u4e8e\u5177\u4f53\u7ec6\u8282\u4fbf\u5982\u4e0a\u4e24\u5f20\u56fe\u4e2d\u6240\u793a\u3002 \u6700\u540e\uff0c\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u8bad\u7ec3\u5b8c\u6210\u7684\u8fd9\u79cd CNN-BIG-LSTM \u6a21\u578b\uff0c\u600e\u4e48\u7528\u5462\uff1f\u5176\u5b9e\uff0c\u5982\u679c\u628a\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u7ed3\u679c\u62ff\u51fa\u6765\uff0c\u8fd9\u91cc\u5927\u6982\u6709\u4e09\u5c42\u7684\u8bcd\u5411\u91cf\u53ef\u4ee5\u5229\u7528\uff1a\u8f93\u5165\u5c42 CNN \u7684\u8f93\u51fa\uff0c\u5373\u662f LSTM \u7684\u8f93\u5165\u5411\u91cf\uff0c\u7b2c\u4e00\u5c42 LSTM \u7684\u8f93\u51fa\u548c\u7b2c\u4e8c\u5c42\u7684\u8f93\u51fa\u5411\u91cf\u3002 \u53c8\u56e0\u4e3a LSTM \u662f\u53cc\u5411\u7684\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u8bcd\uff0c\u5982\u679c LSTM \u7684\u5c42\u6570\u4e3a L \u7684\u8bdd\uff0c\u603b\u5171\u53ef\u83b7\u5f97\u7684\u5411\u91cf\u4e2a\u6570\u4e3a 2L+1\uff0c\u8868\u793a\u5982\u4e0b\uff1a $$ R_{k}=x_{k}, \\overrightarrow{\\mathbf{h}} k, j, \\overleftarrow{\\mathbf{h}} k, j, j=[1,2, \\ldots, L] $$ \u5230\u8fd9\u91cc\u8fd8\u53ea\u662f\u628a ELMo \u7684\u5411\u91cf\u7ed9\u62bd\u53d6\u51fa\u6765\u4e86\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u53ef\u4ee5\u6839\u636e\u4e0b\u9762\u7684\u5f0f\u5b50\u5f97\u5230\u5b83\u7684\u5411\u91cf\uff0c\u5176\u4e2d \u03b3 \u662f\u4e00\u4e2a scale \u56e0\u5b50\uff0c\u52a0\u5165\u8fd9\u4e2a\u56e0\u5b50\u4e3b\u8981\u662f\u60f3\u5c06 ELMo \u7684\u5411\u91cf\u4e0e\u5177\u4f53\u4efb\u52a1\u7684\u5411\u91cf\u5206\u5e03\u62c9\u5e73\u5230\u540c\u4e00\u4e2a\u5206\u5e03\u6c34\u5e73\uff0c\u8fd9\u65f6\u5019\u4fbf\u9700\u8981\u8fd9\u4e48\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u4e86\u3002 \u53e6\u5916\uff0c sj \u4fbf\u662f\u9488\u5bf9\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u5229\u7528\u4e00\u4e2a softmax \u7684\u53c2\u6570\u6765\u5b66\u4e60\u4e0d\u540c\u5c42\u7684\u6743\u503c\u53c2\u6570\uff0c\u56e0\u4e3a\u4e0d\u540c\u4efb\u52a1\u9700\u8981\u7684\u8bcd\u8bed\u610f\u4e49\u7c92\u5ea6\u4e5f\u4e0d\u4e00\u81f4\uff0c \u4e00\u822c\u8ba4\u4e3a\u6d45\u5c42\u7684\u8868\u5f81\u6bd4\u8f83\u503e\u5411\u4e8e\u53e5\u6cd5\uff0c\u800c\u9ad8\u5c42\u8f93\u51fa\u7684\u5411\u91cf\u6bd4\u8f83\u503e\u5411\u4e8e\u8bed\u4e49\u4fe1\u606f \u3002\u56e0\u6b64\u901a\u8fc7\u4e00\u4e2a softmax \u7684\u7ed3\u6784\u8ba9\u4efb\u52a1\u81ea\u52a8\u53bb\u5b66\u4e60\u5404\u5c42\u4e4b\u95f4\u7684\u6743\u91cd\uff0c\u81ea\u7136\u4e5f\u662f\u6bd4\u8f83\u5408\u7406\u7684\u505a\u6cd5\u3002 $$ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o} k^{t a s k}=\\gamma^{t a s k} \\sum j=0^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j} $$ \u524d\u9762\u6211\u4eec\u8bf4\u8fc7\uff0c\u65e0\u8bba\u662f\u57fa\u4e8e\u4f20\u7edf\u7edf\u8ba1\u7684 N-gram \u8fd8\u662f\u666e\u901a\u795e\u7ecf\u7f51\u7edc\u7684 NNLM \u7ed3\u6784\uff0c\u90fd\u4f1a\u6709\u4e00\u4e2a\u5f88\u4e25\u91cd\u7684\u95ee\u9898\uff0c**\u90a3\u5c31\u662f\u8ba1\u7b97\u590d\u6742\u5ea6\u968f\u7740\u4e0a\u4e0b\u6587\u7a97\u53e3 N \u5927\u5c0f\u7684\u589e\u5927\u6025\u5267\u4e0a\u5347\u3002**\u5176\u4e2d N-gram \u662f\u6307\u6570\u4e0a\u5347\uff0cNNLM \u662f\u4ee5 |d| \u00d7 N \u7684\u5f62\u5f0f\u589e\u52a0\uff0c|d| \u662f\u8bcd\u5411\u91cf\u7684\u7ef4\u5ea6\uff0c\u867d\u7136 NNLM \u5df2\u7ecf\u6539\u89c2\u4e86\u5f88\u591a\uff0c\u4f46\u4f9d\u7136\u662f\u4e00\u4e2a\u659c\u7387\u5f88\u5927\u7684\u7ebf\u6027\u589e\u52a0\u5173\u7cfb\u3002 \u540e\u6765 CBOW \u548c Skip-gram \u4ee5\u53ca\u518d\u540e\u6765\u7684 GloVe \u7ec8\u4e8e\u505a\u5230\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6\u4e0e\u6240\u9009\u7a97\u53e3\u5927\u5c0f\u65e0\u5173\uff0c \u53ea\u4e0e\u8bcd\u5178\u5927\u5c0f\u548c\u8bcd\u5411\u91cf\u7ef4\u5ea6\u76f8\u5173 \u3002 \u4e0d\u8fc7\u9700\u8981\u6307\u51fa\u7684\u662f\uff0c\u8fd9\u91cc\u8ba8\u8bba\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\u53ea\u662f\u9884\u6d4b\u5355\u4e2a\u8bcd\u7684\u8ba1\u7b97\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5982\u679c\u662f\u6c42\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u8bdd\uff0c\u8fd8\u662f\u907f\u514d\u4e0d\u4e86\u8981\u4e0e\u5e8f\u5217\u957f\u5ea6\u76f8\u5173\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\u548c\u4e0b\u9762\u8981\u5206\u6790\u7684 RNN \u5728\u6a2a\u5411\u7684\u65f6\u95f4\u5e8f\u5217\u4e0a\u6709\u4e00\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5176\u539f\u56e0\u662f\u4e00\u81f4\u7684\u3002\u5e76\u4e14\u8fd1\u4e9b\u5e74\u5f97\u76ca\u4e8e\u786c\u4ef6\u6301\u7eed\u7684\u6469\u5c14\u5b9a\u5f8b\u53d1\u6325\u5a01\u529b\uff0c\u673a\u5668\u7684\u8ba1\u7b97\u80fd\u529b\u4e5f\u6709\u957f\u8db3\u7684\u8fdb\u6b65\uff0c\u56e0\u6b64\u5728\u8fd9\u4e24\u65b9\u9762\u56e0\u7d20\u7684\u4f5c\u7528\u4e0b\uff0c\u4ee5 word2vec \u4e3a\u4ee3\u8868\u7684\u65b9\u6cd5\u5927\u653e\u5149\u5f69\uff0c\u5f15\u9886\u4e86\u4e00\u6ce2 NLP \u7684\u53d1\u5c55\u6d6a\u6f6e\u3002 \u7136\u800c\uff0c\u5728\u4eca\u5929\u770b\u6765\uff0c\u65e0\u8bba word2vec \u4e2d\u7684\u6a21\u578b\u3001\u8fd8\u662f GloVe \u7684\u6a21\u578b\uff0c\u90fd\u8fc7\u4e8e\u7b80\u5355\uff0c\u5b83\u4eec\u90fd\u53d7\u9650\u4e8e\u6240\u4f7f\u7528\u7684\u6a21\u578b\u8868\u5f81\u80fd\u529b\uff0c\u67d0\u79cd\u610f\u4e49\u4e0a\u90fd\u53ea\u80fd\u5f97\u5230\u6bd4\u8f83\u504f\u4e0a\u4e0b\u6587\u5171\u73b0\u610f\u4e49\u4e0a\u7684\u8bcd\u5411\u91cf\uff0c\u5e76\u4e14\u4e5f\u5f88\u5c11\u8003\u8651\u8fc7\u8bcd\u5e8f\u5bf9\u4e8e\u8bcd\u7684\u610f\u4e49\u7684\u5f71\u54cd\uff08\u6bd4\u5982 CBOW \u4ece\u5176\u540d\u79f0\u6765\u770b\u5c31\u662f\u4e00\u4e2a bag-of-words\uff0c\u5728\u6a21\u578b\u7684\u8f93\u5165\u4e2d\u6ca1\u6709\u8bcd\u5e8f\u7684\u6982\u5ff5\uff09\u3002 \u7406\u8bba\u4e0a\uff0cRNN \u7ed3\u6784\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u8ddf\u4e24\u4e2a\u65b9\u5411\u4e0a\u90fd\u6709\u5173\u7cfb\uff0c\u4e00\u65b9\u9762\u662f\u7eb5\u5411\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u662f\u6a2a\u5411\u4e0a\u3002 \u7eb5\u5411\u4e0a\u4e3b\u8981\u662f RNN \u7ed3\u6784\u672c\u8eab\u7684\u65f6\u95f4\u590d\u6742\u5ea6 \uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u53ea\u4e0e RNN \u7ed3\u6784\u5185\u90e8\u7684 hidden state \u7ef4\u5ea6\u4ee5\u53ca\u6a21\u578b\u7ed3\u6784\u7684\u590d\u6742\u5ea6\uff0c\u5728 ELMo \u4e2d\u7684\u8bdd\u8fd8\u8ddf\u8bcd\u5178\u5927\u5c0f\u76f8\u5173\uff08\u56e0\u4e3a\u6700\u540e\u4e00\u5c42\u8fd8\u662f\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u4ee5\u53ca\u8f93\u5165\u4e5f\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f\u7684 loop up \u64cd\u4f5c\uff09\u3002 \u5728\u6a2a\u5411\u4e0a\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u5c31\u4e3b\u8981\u662f\u53d7\u5236\u4e8e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6 \uff0c\u800c RNN \u7ed3\u6784\u672c\u8eab\u56e0\u4e3a\u5728\u65f6\u95f4\u5e8f\u5217\u4e0a\u5171\u4eab\u53c2\u6570\uff0c\u5176\u81ea\u8eab\u8ba1\u7b97\u590d\u6742\u5ea6\u8fd9\u4e00\u90e8\u5206\u4e0d\u53d8\uff0c\u56e0\u800c\u603b\u7684 ELMo \u7ed3\u6784\u8ba1\u7b97\u590d\u6742\u5ea6\u4e3b\u8981\u6709\u8bcd\u5178\u5927\u5c0f\u3001\u9690\u85cf\u5c42\u8f93\u51fa\u7ef4\u5ea6\u5927\u5c0f\u3001\u6a21\u578b\u7684\u7ed3\u6784\u590d\u6742\u5ea6\u4ee5\u53ca\u6700\u540e\u7684\u8f93\u5165\u5e8f\u5217\u957f\u5ea6\u3002\u524d\u4e09\u8005\u53ef\u4ee5\u8ba4\u4e3a\u548c\u4e4b\u524d\u7684\u6a21\u578b\u4fdd\u6301\u4e00\u81f4\uff0c\u6700\u540e\u7684\u8f93\u5165\u5e8f\u5217\u957f\u5ea6\uff0c\u4e5f\u53ea\u662f\u4e0e\u5176\u4fdd\u6301\u7ebf\u6027\u5173\u7cfb\uff0c\u867d\u7136\u7cfb\u6570\u662f\u5355\u4e2a RNN \u5355\u5143\u7684\u8ba1\u7b97\u590d\u6742\u5ea6\uff0c\u659c\u7387\u4f9d\u7136\u5f88\u5927\uff08\u901a\u5e38 RNN \u7ed3\u6784\u7684\u8bad\u7ec3\u90fd\u6bd4\u8f83\u8d39\u65f6\uff09\uff0c\u4f46\u662f\u5728\u673a\u5668\u6027\u80fd\u63d0\u5347\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u90e8\u5206\u81f3\u5c11\u4e0d\u662f\u963b\u788d\u8bcd\u5411\u91cf\u6280\u672f\u53d1\u5c55\u7684\u6700\u5173\u952e\u7684\u56e0\u7d20\u4e86\u3002 \u56e0\u6b64\uff0c\u5728\u65b0\u7684\u65f6\u4ee3\u4e0b\uff0c\u673a\u5668\u6027\u80fd\u5f97\u5230\u66f4\u8fdb\u4e00\u6b65\u63d0\u5347\u7684\u80cc\u666f\u4e0b\uff0c\u7b97\u6cd5\u4eba\u5458\u90fd\u6025\u9700\u4e00\u79cd\u80fd\u591f\u63ed\u793a\u65e0\u8bba\u8bcd\u8fd8\u662f\u53e5\u5b50\u66f4\u6df1\u5c42\u8bed\u4e49\u7684\u65b9\u6cd5\u51fa\u73b0\uff0c\u6211\u60f3 ELMo \u6b63\u662f\u987a\u5e94\u4e86\u8fd9\u79cd\u65f6\u4ee3\u7684\u9700\u8981\u800c\u534e\u4e3d\u8bde\u751f\u3002 ELMo \u7684\u601d\u60f3\u8db3\u591f\u7b80\u5355\uff0c\u76f8\u6bd4\u5b83\u7684\u524d\u8f88\u4eec\uff0c\u53ef\u4ee5\u8bf4 ELMo \u5e76\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u521b\u65b0\uff0c\u8fde\u6a21\u578b\u4e5f\u57fa\u672c\u662f\u5f15\u7528\u548c\u62fc\u63a5\u522b\u4eba\u7684\u5de5\u4f5c \uff0c\u5b83\u7684\u601d\u60f3\u5728\u5f88\u591a\u5e74\u524d\u5c31\u5df2\u7ecf\u6709\u4eba\u5728\u7528\uff0c\u5e76\u6ca1\u6709\u7279\u522b\u65b0\u5947\u7684\u5730\u65b9\u3002 \u8fd9\u4f3c\u4e4e\u4ece\u53cd\u9762\u8bc1\u660e\u4e86\u771f\u6b63\u6f02\u4eae\u7684\u5de5\u4f5c\u4ece\u6765\u4e0d\u662f\u7a81\u51fa\u5404\u81ea\u7684\u6a21\u578b\u6709\u591a\u4e48\u7eda\u4e3d\uff0c\u53ea\u6709\u65e0\u5176\u4ed6\u4eae\u70b9\u7684\u8bba\u6587\uff0c\u624d\u9700\u8981\u4f9d\u9760\u63cf\u6479\u4e86\u9ad8\u6e05\u8db3\u591f\u559c\u4eba\u773c\u7403\u7684\u56fe\u7247\u53bb\u5438\u5f15\u8bc4\u5ba1\u4eba\u7684\u6ce8\u610f\u529b\u3002\u56e0\u6b64\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u53bb\u770b\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u5f97\u51fa\u4e00\u4e2a\u557c\u7b11\u7686\u975e\u7684\u7ed3\u8bba\uff1a\u8bba\u6587\u7684\u6f02\u4eae\u7a0b\u5ea6\u4e0e\u8bba\u6587\u56fe\u7684\u6f02\u4eae\u7a0b\u5ea6\u5448\u53cd\u6bd4\u3002 \u4f46\u540c\u65f6\u5b83\u7684\u6548\u679c\u53c8\u8db3\u591f\u60ca\u8273\uff0c\u5b83\u7684\u51fa\u73b0\uff0c\u5728 2018 \u5e74\u521d\uff0c\u8fd9\u4e2a\u4e5f\u8bb8\u5728 NLP \u5386\u53f2\u4e0a\u5e76\u6ca1\u6709\u591a\u4e48\u663e\u773c\u7684\u5e74\u5934\uff0c\u6380\u8d77\u4e86\u4e00\u9635\u4e0d\u5c0f\u7684\u6ce2\u6f9c\uff0c\u81f3\u5c11\u5728 6 \u9879 NLP \u4efb\u52a1\u4e0a\u6a2a\u626b\u5f53\u65f6\u7684\u6700\u597d\u7ed3\u679c\uff0c\u5305\u62ec question answering(SQuAD), textual entailment(SNLI), semantic role labelling(SRL), named entity extraction(NER), coreference resolution(Coref), and sentiment analysis(SST-5)\u3002 \u800c\u540e\u6765\u7684\u6545\u4e8b\u4ee5\u53ca\u53ef\u9884\u89c1\u7684\u5c06\u6765\u91cc\uff0c\u8fd9\u6216\u8bb8\u4ec5\u4ec5\u53ea\u662f\u4e00\u4e2a\u5f00\u59cb\uff0c\u5c31\u5982\u5c71\u6d2a\u6d77\u5578\u524d\u7684\u4e00\u6735\u6e05\u79c0\u7684\u6d9f\u6f2a\u3002","title":"4.3 ELMo"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#44-ulmfit","text":"\u5dee\u4e0d\u591a\u548cELMo\u540c\u671f\uff0c\u53e6\u4e00\u4e2a\u540c\u6837\u975e\u5e38\u60ca\u8273\u7684\u5de5\u4f5c\u4e5f\u88ab\u63d0\u51fa\u6765\uff0c\u8fd9\u4e2a\u56e2\u961f\u662f\u81f4\u529b\u4e8e\u5c06\u6df1\u5ea6\u5b66\u4e60\u666e\u53ca\u548c\u6613\u7528\u7684Fast AI\uff0c\u800c\u8bba\u6587\u7684\u4e24\u4f4d\u5171\u540c\u4f5c\u8005\u4e4b\u4e00\u7684Jeremy Howard\uff0c\u5176\u5b9e\u5c31\u662fFastAI\u7684\u521b\u59cb\u4eba\uff0c\u662fKaggle\u4e4b\u524d\u7684president\u548c\u9996\u5e2d\u79d1\u5b66\u5bb6\uff0c\u5e76\u4e14\u4eb2\u81ea\u53c2\u4e0e\u8fc7Kaggle\u4e0a\u7684\u5f88\u591a\u6bd4\u8d5b\uff0c\u957f\u671f\u6392\u5728\u6392\u884c\u699c\u7684\u7b2c\u4e00\u3002\u5728\u4ed6\u4eec\u7684\u8bba\u6587\u300aUniversal Language Model Fine-tuning for Text Classification\u300b\u4e2d\uff0c\u4ed6\u4eec\u63d0\u51fa\u4e86ULMFit\u7ed3\u6784\uff0c\u5176\u5b9e\u8fd9\u672c\u8d28\u4e0a\u4ed6\u4eec\u63d0\u51fa\u7684\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5177\u4f53\u7684\u67d0\u79cd\u7ed3\u6784\u6216\u6a21\u578b\uff0c\u53ea\u4e0d\u8fc7\u6b63\u5982\u8bba\u6587\u6807\u9898\u6240\u8a00\uff0c\u4ed6\u4eec\u4e3b\u8981\u628a\u5b83\u5e94\u7528\u5728\u4e86\u6587\u672c\u5206\u7c7b\u7684\u95ee\u9898\u4e2d\u3002\u548cELMo\u76f8\u540c\u7684\u5730\u65b9\u5728\u4e8e\uff0cULMFit\u540c\u6837\u4f7f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e14\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4e3b\u8981\u4e5f\u662fLSTM\uff0c\u57fa\u672c\u7684\u601d\u8def\u4e5f\u662f\u9884\u8bad\u7ec3\u5b8c\u6210\u540e\u53bb\u5177\u4f53\u4efb\u52a1\u4e0a\u8fdb\u884cfinetune\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u5730\u65b9\u4e5f\u6709\u5f88\u591a\uff0c\u5206\u522b\u6765\u8bb2\u8bb2\u3002 \u9996\u5148\uff0cULMFit\u7684\u9884\u8bad\u7ec3\u548cfinetune\u8fc7\u7a0b\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff0c \u5206\u522b\u662f\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\uff08\u6bd4\u5982Wikitext 103\uff0c\u6709103million\u4e2a\u8bcd\uff09\u5148\u9884\u8bad\u7ec3\uff0c\u7136\u540e\u518d\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u5177\u4f53\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u91cd\u65b0\u5229\u7528\u8bed\u8a00\u6a21\u578b\u6765finetune\u4e00\u4e0b\uff08\u8fd9\u662f\u7b2c\u4e00\u6b21finetune\uff0c\u53eb\u505aLM finetune\uff09\uff0c\u800c\u540e\u518d\u6839\u636e\u5177\u4f53\u4efb\u52a1\u8bbe\u8ba1\u7684\u4e00\u4e2a\u6a21\u578b\u4e0a\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u8fd9\u4e2a\u4efb\u52a1\u6a21\u578b\u7684\u591a\u5c42\uff0c\u518d\u4e00\u6b21finetune\uff08\u8fd9\u662f\u7b2c\u4e8c\u6b21finetune\uff0c\u5982\u679c\u662f\u5206\u7c7b\u95ee\u9898\u7684\u8bdd\u53ef\u4ee5\u53eb\u505aClassifier finetune\uff09 \uff0c\u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a\uff1a \u5176\u6b21\uff0c\u6240\u4f7f\u7528\u7684\u6a21\u578b\u6765\u81ea\u4e8e 2017 \u5e74 Salesforce \u7684\u8bba\u6587 Regularizing and Optimizing LSTM Language Models \uff0c\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u4ed6\u4eec\u63d0\u51fa\u4e86 AWD-LSTM \uff0c\u6b63\u5982\u540d\u5b57\u4e2d\u6240\u63ed\u793a\u7684\uff0c\u8fd9\u4e2a\u6846\u67b6\u66f4\u591a\u7684\u662f\u4e00\u79cd\u8bad\u7ec3\u65b9\u6cd5\uff0c\u4e3b\u8981\u601d\u60f3\u5206\u4e3a\u4e24\u5927\u5757\uff0c\u5176\u4e2d Averaged SGD \u662f\u6307\u5148\u5c06\u6a21\u578b\u8bad\u7ec3\u5230\u4e00\u5b9a epoch\uff0c\u7136\u540e\u518d\u5c06\u5176\u540e\u7684\u6bcf\u4e00\u8f6e\u6743\u503c\u8fdb\u884c\u5e73\u5747\u540e\uff0c\u5f97\u5230\u6700\u7ec8\u7684\u6743\u503c\uff0c\u7528\u516c\u5f0f\u8868\u793a\u5c31\u662f\uff0c\u666e\u901a\u7684 SGD \u65b9\u6cd5\u6743\u503c\u66f4\u65b0\u8fc7\u7a0b\u4e3a\uff1a $$ w_{k+1}=w_{k}-\\gamma_{k} \\nabla f\\left(w_{k}\\right) $$ \u5176\u4e2d k \u4ee3\u8868\u8fed\u4ee3\u6b21\u6570\uff0c\u800c f \u5219\u662f loss function\uff0c\u8fd9\u5c31\u662f\u666e\u901a\u7684\u4e00\u4e2a SGD \u6743\u503c\u66f4\u65b0\u8fed\u4ee3\u5f0f\u5b50\uff0c\u90a3\u4e48 ASGD \u5219\u628a\u5b83\u53d8\u6210\u4e86\uff1a $$ w=\\frac{1}{K-T+1} \\sum_{i=T}^{K} w_{i} $$ \u5176\u4e2d T \u662f\u4e00\u4e2a\u9608\u503c\uff0c\u800c K \u662f\u603b\u5171\u7684\u8fed\u4ee3\u6b21\u6570\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u628a\u8fed\u4ee3\u5230\u7b2c T \u6b21\u4e4b\u540e\uff0c\u5bf9\u8be5\u53c2\u6570\u5728\u5176\u540e\u7684\u7b2c T \u8f6e\u5230\u6700\u540e\u4e00\u8f6e\u4e4b\u95f4\u7684\u6240\u6709\u503c\u6c42\u5e73\u5747\uff0c\u4ece\u800c\u5f97\u5230\u6700\u540e\u6a21\u578b\u7684\u8be5\u53c2\u6570\u503c\u3002\u800c\u76f8\u5e94\u7684\uff0c\u666e\u901a\u7684 SGD \u5219\u662f\u76f4\u63a5\u53d6 w = wk \u4f5c\u4e3a\u6700\u540e\u6a21\u578b\u7684\u53c2\u6570\u503c\u3002 \u9664\u4e86\u4f7f\u7528 ASGD \u65b9\u6cd5\u8bad\u7ec3\u6a21\u578b\u4e4b\u5916\uff0c\u5728\u666e\u901a LSTM \u4e0a\u4e00\u4e2a\u65f6\u523b\u548c\u4e0b\u4e00\u4e2a\u65f6\u523b\u4e4b\u95f4\u7684\u9690\u85cf\u5c42\u4e4b\u95f4\u662f\u6709\u8fde\u63a5\u7684\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fde\u63a5\u901a\u8fc7\u4e00\u4e2a\u5168\u8fde\u63a5\u7684\u77e9\u9635\u76f8\u8fde\uff0c\u800c\u8fd9\u4e2a\u6a21\u578b\u5219\u7528\u4e86 DropConnect \u7684\u65b9\u6cd5\u968f\u673a drop \u6389\u4e00\u4e9b\u8fde\u63a5\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u4e00\u4e9b\u8fc7\u62df\u5408\u7684\u98ce\u9669\uff0c\u5f53\u7136\u5728\u8f93\u5165\u5c42\u5230\u9690\u85cf\u5c42\u4e4b\u95f4\u4e5f\u6709\u6b63\u5e38\u7684 dropout \u64cd\u4f5c\u3002 \u7b2c\u4e09\uff0c\u5fae\u8c03\u65b9\u6cd5\u8bbe\u8ba1\u975e\u5e38\u7cbe\u5999\u3002 \u4f5c\u8005\u63d0\u51fa\u4e86\u51e0\u79cd\u5fae\u8c03\u7684\u6280\u5de7\uff0c\u5b83\u4eec\u662f\uff1adiscriminative fine-tuning, slanted triangular learning rates \u4ee5\u53ca gradual unfreezing \uff0c\u5206\u522b\u6765\u770b\u4e00\u4e0b\u3002 discriminative fine-tune \u7684\u57fa\u672c\u601d\u60f3\u662f\u9488\u5bf9\u4e0d\u540c\u5c42\u5728\u8bad\u7ec3\u66f4\u65b0\u53c2\u6570\u7684\u65f6\u5019\uff0c\u8d4b\u4e88\u4e0d\u540c\u7684\u5b66\u4e60\u7387\u3002\u8fd9\u91cc\u7684\u51fa\u53d1\u70b9\u662f\uff0c\u5bf9\u4e8e NLP \u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6765\u8bf4\uff0c\u4e0d\u540c\u5c42\u7684\u8868\u5f81\u6709\u4e0d\u540c\u7684\u7269\u7406\u542b\u4e49\uff0c\u6bd4\u5982\u6d45\u5c42\u504f\u53e5\u6cd5\u4fe1\u606f\uff0c\u9ad8\u5c42\u504f\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e0d\u540c\u5c42\u7684\u5b66\u4e60\u7387\u4e0d\u540c\uff0c\u81ea\u7136\u5c31\u662f\u6bd4\u8f83\u5408\u7406\u7684\u4e86\u3002\u5177\u4f53\u516c\u5f0f\u5982\u4e0b\uff1a $$ \\theta_{t} {l}=\\theta_{t-1} +\\eta^{l} \\nabla_{\\theta^{l}} J(\\theta) $$ \u8fd9\u91cc\u7684 \\(\\eta^{l}\\) \u4fbf\u662f\u4e0d\u540c\u7684\u5c42 \\(l\\) \u6709\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u539f\u6587\u4e5f\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u9009\u62e9\uff1a\u5148\u6307\u5b9a\u6700\u540e\u4e00\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u7136\u540e\u6839\u636e\u4e0b\u5f0f\u5f97\u5230\u524d\u9762\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u57fa\u672c\u601d\u60f3\u662f\u8ba9\u6d45\u5c42\u7684\u5b66\u4e60\u7387\u8981\u66f4\u5c0f\u4e00\u4e9b\u3002 $$ \\eta {l-1}=\\frac{\\eta }{2.6} $$ \u800c\u5bf9\u4e8eslanted triangular learning rates\u6765\u8bf4\uff0c\u4e3b\u8981\u601d\u60f3\u4fbf\u662f\u5728finetune\u7684\u7b2c\u4e00\u9636\u6bb5\uff0c\u5e0c\u671b\u80fd\u591f\u5148\u7a33\u5b9a\u4f4f\u539f\u6765\u5df2\u7ecf\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u9009\u62e9\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684finetune\u5b66\u4e60\u7387\uff1b\u5c14\u540e\u5e0c\u671b\u80fd\u591f\u9010\u6b65\u52a0\u5927\u5b66\u4e60\u7387\uff0c\u4f7f\u5f97\u5b66\u4e60\u8fc7\u7a0b\u80fd\u591f\u5c3d\u91cf\u5feb\u901f\uff1b\u6700\u540e\uff0c\u5f53\u8bad\u7ec3\u63a5\u8fd1\u5c3e\u58f0\u65f6\uff0c\u9010\u6b65\u51cf\u5c0f\u5b66\u4e60\u7387\uff0c\u8fd9\u6837\u8ba9\u6a21\u578b\u9010\u6e10\u5e73\u7a33\u6536\u655b\uff08\u8fd9\u4e2a\u601d\u60f3\uff0c\u4e2a\u4eba\u89c9\u5f97\u5927\u6982\u501f\u9274\u4e862017\u5e74\u8c37\u6b4c\u63d0\u51faTransformer\u65f6\u7528\u5230\u7684warm up\u7684\u5b66\u4e60\u7387\u8c03\u8282\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u662f\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u5148\u5c06\u5b66\u4e60\u7387\u9010\u6b65\u589e\u5927\uff0c\u5c14\u540e\u518d\u9010\u6b65\u51cf\u5c0f\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u4e00\u4e2a\u4e09\u6bb5\u8bba\u5f0f\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u7528\u56fe\u8868\u793a\u5982\u4e0b \u53e6\u4e00\u4e2a finetune \u7684\u6280\u5de7\u662f gradual unfreezing\uff0c\u4e3b\u8981\u601d\u60f3\u662f\u628a\u9884\u8bad\u7ec3\u6a21\u578b\u5728\u65b0\u4efb\u52a1\u4e0a finetune \u65f6\uff0c\u9010\u5c42\u89e3\u51bb\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u5148 finetune \u6700\u540e\u4e00\u5c42\uff0c\u7136\u540e\u518d\u89e3\u51bb\u5012\u6570\u7b2c\u4e8c\u5c42\uff0c\u628a\u5012\u6570\u7b2c\u4e8c\u5c42\u548c\u6700\u540e\u4e00\u5c42\u4e00\u8d77 finetune\uff0c\u7136\u540e\u518d\u89e3\u51bb\u7b2c\u4e09\u5c42\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u9010\u5c42\u5f80\u6d45\u5c42\u63a8\u8fdb\uff0c\u6700\u7ec8 finetune \u6574\u4e2a\u6a21\u578b\u6216\u8005\u7ec8\u6b62\u5230\u67d0\u4e2a\u4e2d\u95f4\u5c42\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86 finetune \u8fc7\u7a0b\u80fd\u591f\u66f4\u5e73\u7a33\u3002 \u5f53\u7136\uff0c\u503c\u5f97\u63d0\u51fa\u7684\u662f\uff0c\u56e0\u4e3a ULMFiT \u4e2d\u5305\u542b\u4e86\u4e24\u6b21 finetune\uff0c\u5373\u5728\u65b0\u4efb\u52a1\u4e0a\u7528\u8bed\u8a00\u6a21\u578b finetune \u548c\u5728\u65b0\u4efb\u52a1\u4e0a finetune \u8bad\u7ec3\u4e00\u4e2a\u6700\u7ec8\u7684 task-specifi-model\uff08\u6bd4\u5982\u5206\u7c7b\u5668\uff09\u3002 \u800c\u8bba\u6587\u4e2d\u4e3b\u8981\u628a discriminative fine-tuning \u548c slanted triangular learning rates \u8fd9\u4e24\u4e2a\u6280\u5de7\u7528\u5728\u4e86\u8bed\u8a00\u6a21\u578b\u7684 finetune \u9636\u6bb5\uff0c\u628a\u6700\u540e\u4e00\u4e2a gradual unfreezing \u7684\u6280\u5de7\u5e94\u7528\u5728\u6700\u7ec8 task-specifi-model \u7684 finetune \u9636\u6bb5\u3002 \u901a\u8fc7\u4e0a\u9762\u7684\u8fd9\u4e9b\u65b9\u6cd5\uff0c**ULMFiT \u6700\u7ec8\u5728\u5206\u7c7b\u4efb\u52a1\u4e0a\u8868\u73b0\u60ca\u8273\uff0c\u5c24\u5176\u662f\u53ea\u9700\u8981 100 \u4e2a\u6807\u8bb0\u6570\u636e\uff0c\u5c31\u80fd\u591f\u5b66\u4e60\u5230\u4e00\u4e2a\u8868\u73b0\u975e\u5e38 comparable \u7684\u5206\u7c7b\u5668\u3002**\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u9884\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u5bf9\u6700\u7ec8\u8868\u73b0\u8d77\u5230\u4e86\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\u3002","title":"4.4 ULMFit"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#45-gpt","text":"\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u8fd9\u628a\u706b\u88ab\u70b9\u71c3\u540e\uff0c\u6574\u4e2a\u4e1a\u754c\u90fd\u5728\u60ca\u547c\uff0c\u539f\u6765\u9884\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\u8fdc\u4e0d\u6b62\u5341\u5e74\u524d Bengio \u548c\u4e94\u5e74\u524d Mikolov \u53ea\u4e3a\u5f97\u5230\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u5a01\u529b\u3002 \u7136\u800c\u5f88\u5feb\u5728 2018 \u5e74 6 \u6708\uff0c\u4e0d\u518d\u5c5e\u4e8e\u201c\u94a2\u94c1\u4fa0\u201d\u9a6c\u65af\u514b\u7684 OpenAI\uff0c\u53d1\u4e86\u4e00\u4e2a\u5927\u65b0\u95fb\uff0c\u76f8\u5173\u8bba\u6587\u662f***Improving Language Understanding by Generative Pre-Training***\uff0c\u5f80\u8fd9\u628a\u706b\u52bf\u6b63\u731b\u7684\u70c8\u7130\u4e0a\u52a0\u4e86\u4e00\u5242\u731b\u6599\uff0c\u4ece\u800c\u5c06\u8fd9\u628a\u706b\u63a8\u5411\u4e86\u4e00\u4e2a\u65b0\u7684\u9ad8\u6f6e\u3002 OpenAI \u7684\u731b\u6599\u914d\u65b9\u91cc\uff0c\u7b2c\u4e00\u5242\u4e3b\u6599\u4fbf\u662f\u8c37\u6b4c\u4e8e 2017 \u5e74\u4e2d\u63d0\u51fa\u7684 Transformer*****\u6846\u67b6 \uff08*Attention Is All You Need \uff09\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5148\u6765\u5f04\u660e\u767d Transformer \u91cc\u9762\u90fd\u6709\u4ec0\u4e48\u4e1c\u897f\u3002 \u79c1\u4ee5\u4e3a\uff0cTransformer \u91cc\u6700\u4e3a\u6838\u5fc3\u7684\u673a\u5236\u662f Self-attention\uff0c\u6b63\u56e0\u4e3a Self-attention \u7684\u5b58\u5728\uff0c\u624d\u4f7f\u5f97 Transformer \u5728\u505a\u7c7b\u4f3c\u7ffb\u8bd1\u95ee\u9898\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8ba9\u5176 Encoder \u4e0d\u7528\u505a\u5e8f\u5217\u8f93\u5165\uff0c\u800c\u662f\u5c06\u6574\u4e2a\u5e8f\u5217\u4e00\u6b21\u5168\u8f93\u5165\uff0c\u5e76\u4e14\u8d85\u957f\u5e8f\u5217\u7684\u8f93\u5165\u4e5f\u53d8\u5f97\u53ef\u80fd\u3002\u800c\u5177\u4f53\u5230 Self-attention \u4e2d\uff0c\u53ef\u4ee5\u7528\u4e0b\u56fe\u8868\u793a\uff1a \u7b80\u5355\u8bf4\u6765\uff0c\u8f93\u5165\u4e3a\u53e5\u5b50\u7684\u77e9\u9635\uff0c\u5148\u5206\u522b\u901a\u8fc7\u4e09\u4e2a\u5168\u8fde\u63a5\u77e9\u9635\u5c06\u8f93\u5165\u77e9\u9635\u53d8\u5316\u4e3a\u4e09\u4e2a\u77e9\u9635\uff0c\u5206\u522b\u4e3a Q, K \u548c V\uff0c\u7136\u540e\u901a\u8fc7 Q \u548c K \u8ba1\u7b97\u5f97\u5230\u4e00\u4e9b\u6743\u503c\uff0c\u5c06\u8fd9\u4e9b\u6743\u503c\u52a0\u6743\u6c42\u548c\u5230 V \u77e9\u9635\u4e0a\uff0c\u4fbf\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u77e9\u9635\u8868\u793a\u3002 \u800c Self-attention \u4e2d\u7684\u591a\u5934\u673a\u5236\u4fbf\u662f\u5c06\u8fd9\u6837\u7684\u64cd\u4f5c\u5206\u522b\u8fdb\u884c\u591a\u6b21\uff0c\u8ba9\u53e5\u5b50\u7684\u8868\u5f81\u5145\u5206\u5b66\u4e60\u5230\u4e0d\u540c\u7684\u4fa7\u91cd\u70b9\uff0c\u6700\u7ec8\u5c06\u8fd9\u4e9b\u591a\u5934\u5b66\u4e60\u51fa\u6765\u7684\u8868\u5f81 concat \u5230\u4e00\u8d77\uff0c\u7136\u540e\u518d\u540c\u4e00\u4e2a\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u4fbf\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u53e5\u5b50\u6700\u7ec8 Self-attention \u4e0b\u65b0\u7684\u8868\u793a\u3002 \u5c06\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5934\u7684\u64cd\u4f5c\u8fc7\u7a0b\u7528\u516c\u5f0f\u8868\u793a\u5982\u4e0b\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f softmax \u662f\u9488\u5bf9\u77e9\u9635\u7684 row \u65b9\u5411\u8fdb\u884c\u64cd\u4f5c\u5f97\u5230\u7684\u3002\u6240\u4ee5\uff0c\u8bf4\u767d\u4e86\uff0c\u8fd9\u4e2a\u516c\u5f0f\u8868\u793a\u7684\u610f\u601d\u5c31\u662f\u9488\u5bf9 V \u8fdb\u884c\u52a0\u6743\u6c42\u548c\uff0c\u52a0\u6743\u6743\u503c\u901a\u8fc7 Q \u548c K \u7684\u70b9\u4e58\u5f97\u5230\u3002 \u4e0d\u8fc7\u5176\u5b9e Self-attention \u548c\u666e\u901a attention \u673a\u5236\u5728\u5f62\u5f0f\u4e0a\u51e0\u4e4e\u5b8c\u5168\u7b49\u4ef7\u3002\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0c\u5bf9\u4e8e\u666e\u901a\u7684 attention \u673a\u5236\uff0c\u8f93\u5165\u53ef\u80fd\u6709\u591a\u4e2a\uff0c\u5e76\u4e14\u4e0b\u5f0f\u5728\u6c42\u5f97 \\(e_{ij}\\) \u4e2d\u7684 \\(v_a^T\\) \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u5c06\u5f0f\u5b50\u53f3\u8fb9\u7684\u90e8\u5206\uff08\u4e5f\u5c31\u662f attention \u7684\u8f93\u5165\uff09\u6620\u5c04\u4e3a\u4e00\u4e2a\u503c\uff0c\u4ece\u800c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u503c\u8ba1\u7b97 attention \u7684\u6743\u503c\u5927\u5c0f\u3002 \u9664\u6b64\u4e4b\u5916\uff0c\u666e\u901a attention \u548c self-attention \u5e76\u6ca1\u6709\u672c\u8d28\u4e0d\u540c\uff0c\u6700\u5927\u7684\u533a\u522b\u8fd8\u662f\u5728\u4e8e\u5728\u81ea\u6211\u8f93\u5165\u4e0a\u8ba1\u7b97 attention \u6743\u503c\u5927\u5c0f\u3002 \u5728 Transformer \u7684 Encoder \u4e2d\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u8bbe\u8ba1\uff0c\u6bd4\u5982\u52a0\u5165 position embedding\uff08\u56e0\u4e3a Transformer \u7684 Encoder \u4e2d\u4e0d\u662f\u65f6\u5e8f\u8f93\u5165\u8bcd\u5e8f\u5217\uff0c\u56e0\u6b64 position embedding \u4e5f\u662f\u4e3b\u8981\u4f4d\u7f6e\u4fe1\u606f\uff09\uff1bResidual \u7ed3\u6784\uff0c\u4f7f\u5f97\u6a21\u578b\u7684\u8bad\u7ec3\u8fc7\u7a0b\u66f4\u4e3a\u5e73\u7a33\uff1b\u6b64\u5916\u8fd8\u6709 normalization \u5c42\uff0c\u63a5\u7740\u4fbf\u662f feed forward \u5c42\uff08\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u4e24\u5c42\u7684\u5168\u8fde\u63a5\u7f51\u7edc\uff0c\u4e2d\u95f4\u52a0\u4e00\u4e2a ReLu \u7684\u6fc0\u6d3b\u51fd\u6570\uff09\u3002 Decoder \u7684\u7ed3\u6784\u4e0e\u6b64\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5728\u8fdb\u884c decode \u7684\u65f6\u5019\uff0c\u4f1a\u5c06 Encoder \u8fd9\u8fb9\u7684\u8f93\u51fa\u4f5c\u4e3a Decoder \u4e2d Self-attention \u65f6\u7684 K \u548c V\u3002 \u5bf9\u4e8e decode \u8fc7\u7a0b\uff0c\u5177\u4f53\u6765\u770b\uff0c\u5927\u81f4\u8fc7\u7a0b\u5982\u4e0b\u3002 Decoder \u5b9e\u9645\u4e0a\u8fd8\u6709\u5f88\u591a\u7ec6\u8282\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u8bad\u7ec3\u65f6 Decoder \u4e2d\u7684\u8f93\u5165\u53ef\u4ee5\u7528\u77e9\u9635\u5f62\u5f0f\u4e00\u6b21\u5b8c\u6210\u5f53\u524d\u6574\u4e2a\u5e8f\u5217\u7684 decode \u8fc7\u7a0b\uff0c\u56e0\u4e3a ground truth \u5df2\u7ecf\u63d0\u524d\u77e5\u9053\uff0c\u53ea\u9700\u505a\u597d\u6bcf\u4e2a\u8bcd\u7684 mask \u5c31\u597d\uff08\u4e3a\u4e86\u907f\u514d\u5f85\u9884\u6d4b\u7684\u8bcd\u5f71\u54cd\u5230\u5f53\u524d\u7684\u8f93\u5165\uff09\u3002 \u7136\u800c\u5728\u505a inference \u7684\u65f6\u5019\uff0cDecoder \u5fc5\u987b\u6309\u7167\u5e8f\u5217\u8f93\u5165\uff0c\u56e0\u4e3a\u5728\u751f\u6210\u6bcf\u4e00\u4e2a\u8bcd\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u5148\u751f\u6210\u5b83\u7684\u524d\u4e00\u4e2a\u8bcd\uff0c\u65e0\u6cd5\u4e00\u6b21\u5c06\u6574\u4e2a\u5e8f\u5217\u5168\u90e8\u751f\u6210\uff08\u5f53\u7136\u7406\u8bba\u4e0a\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u6548\u679c\u5e76\u4e0d\u597d\uff09\u3002 \u5728\u77e9\u9635\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\uff0c**Decoder \u4e2d\u6709\u8bb8\u591a mask \u64cd\u4f5c\uff0c\u53c2\u4e0e\u8fd0\u7b97\u7684\u4e09\u4e2a\u77e9\u9635 Q,K \u548c V \u90fd\u8981\u505a\u8bb8\u591a mask \u64cd\u4f5c\uff0c\u4e3b\u8981\u6709\u4e24\u65b9\u9762\u4f5c\u7528\uff1a**\u4e00\u65b9\u9762\u662f\u6d88\u9664\u8f93\u5165\u53e5\u5b50\u672c\u8eab\u957f\u5ea6\u4e4b\u5916\u7684 padding \u5f71\u54cd\uff0c\u53e6\u4e00\u65b9\u9762\u662f decoder \u5fc5\u987b\u8981\u6c42\u4e0d\u80fd\u63d0\u524d\u770b\u5230\u5f85\u751f\u6210\u7684\u8bcd\u3002 \u9664\u4e86 mask \u64cd\u4f5c\uff0c\u53e6\u5916\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u548c Encoder \u4e2d\u53ea\u6709\u4e00\u79cd\u7c7b\u578b Self-attention \u4e0d\u540c\u7684\u662f\uff0c Decoder \u7684 attention \u5b9e\u9645\u5305\u542b\u4e24\u90e8\u5206\uff1a \u7b2c\u4e00\u90e8\u5206\u662f\u5e26\u6709 mask \u7684 Self-attention \uff0c\u901a\u8fc7 mask \u5c06 decode \u9636\u6bb5\u7684 attention \u9650\u5b9a\u53ea\u4f1a attention \u5230\u5df2\u7ecf\u751f\u6210\u8fc7\u7684\u8bcd\u4e0a\uff0c\u56e0\u6b64\u53eb\u505a Mask Self-attention\u3002 \u7b2c\u4e8c\u90e8\u5206\u662f\u666e\u901a\u7684 Self-attention \u64cd\u4f5c \uff0c\u4e0d\u8fc7\u8fd9\u65f6\u7684 K \u548c V \u77e9\u9635\u5df2\u7ecf\u66ff\u6362\u4e3a Encoder \u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u6240\u4ee5\u672c\u8d28\u4e0a\u5e76\u975e\u4e00\u4e2a Self-attention\u3002 \u4e0b\u9762\u7684\u52a8\u56fe\u5f88\u597d\u5730\u8868\u73b0\u4e86 decoding \u8fc7\u7a0b\uff0c\u751f\u6210\u6bcf\u4e00\u4e2a\u8bcd\u7684\u65f6\u5019\uff0c\u65e2\u548c Encoder \u7684\u8f93\u51fa\u4fe1\u606f\u6709\u5173\uff0c\u4e5f\u548c\u5df2\u7ecf\u751f\u6210\u8fc7\u7684\u8bcd\u76f8\u5173\u3002 \u5927\u4f53\u4ecb\u7ecd\u5b8c Transformer \u540e\uff0c\u518d\u770b\u770b GPT \u4e2d\u662f\u600e\u4e48\u7528 Transformer \u7684\u3002\u6309\u7167\u8bba\u6587\u7684\u8bf4\u6cd5\uff0cGPT \u4f7f\u7528\u7684 Transformer \u662f\u53ea\u7528\u4e86 Decoder\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u8bed\u8a00\u6a21\u578b\u6765\u8bb2\uff0c\u786e\u5b9e\u4e0d\u9700\u8981 Encoder \u7684\u5b58\u5728\u3002 \u800c\u5177\u4f53\u6a21\u578b\uff0c\u4ed6\u4eec\u53c2\u8003\u4e86 2018 \u5e74\u65e9\u4e9b\u65f6\u5019\u8c37\u6b4c\u7684 Generating Wikipedia by Summarizing Long Sequences \uff0cGPT \u540d\u79f0\u4e2d\u7684 Generative \u4fbf\u662f\u6e90\u81ea\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e8c\u8005\u90fd\u6709\u7528\u5230\u751f\u6210\u5f0f\u65b9\u6cd5\u6765\u8bad\u7ec3\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u751f\u6210\u5f0f Decoder\u3002 \u5173\u4e8e\u8fd9\u7bc7\u8bba\u6587\u4e2d\u63d0\u5230\u7684 T-DMCA \uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a Decoder\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u7bc7\u6587\u7ae0\u4e2d\u8981\u505a\u8d85\u957f\u7684\u5e8f\u5217\u8f93\u5165\uff08\u53ef\u4ee5\u957f\u8fbe 11000 \u4e2a\u8bcd\uff09\uff0c\u4e3a\u4e86\u80fd\u591f\u9ad8\u6548\u8282\u7701\u65f6\u95f4\u548c\u5185\u5b58\u7684\u5904\u7406\u5982\u6b64\u957f\u7684\u5e8f\u5217\uff0c\u505a\u4e86\u4e00\u4e9b Memory-Compressed \u5de5\u4f5c\uff0c\u4e3b\u8981\u662f\u4e24\u65b9\u9762\uff1a \u4e00\u65b9\u9762\u662f\u628a\u4e00\u4e2a batch \u5185\u90e8\u7684\u5e8f\u5217\u6309\u957f\u5ea6\u8fdb\u884c\u5206\u7ec4\uff0c\u7136\u540e\u5206\u522b\u5728\u6bcf\u4e2a\u7ec4\u5185\u90e8\u8fdb\u884c self-attention \u64cd\u4f5c\uff0c\u907f\u514d\u5c06\u4e00\u4e9b\u5f88\u77ed\u7684\u53e5\u5b50\u4e5f padding \u5230\u6574\u4e2a\u8bed\u6599\u7684\u6700\u5927\u957f\u5ea6\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u901a\u8fc7 CNN \u64cd\u4f5c\uff0c\u628a K \u548c V \u538b\u7f29\u5230\u5e8f\u5217\u957f\u5ea6\u66f4\u5c0f\u7684\u4e00\u4e2a\u77e9\u9635\uff0c\u540c\u65f6\u4fdd\u6301 Q \u4e0d\u53d8\uff0c\u8fd9\u6837\u4e5f\u80fd\u5728\u76f8\u5f53\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u8ba1\u7b97\u91cf\u3002 \u9664\u4e86\u8fd9\u4e9b\u5177\u4f53\u7684\u6a21\u578b\u7ec6\u8282\u5916\uff0cGPT \u672c\u8d28\u4e0a\u5c31\u662f\u7528\u4e86\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u6765\u4f18\u5316\u548c\u8bad\u7ec3 Transformer-Decoder\uff0c\u8fd9\u548c\u4e0a\u6587\u63d0\u5230\u8fc7\u7684\u8bed\u8a00\u6a21\u578b\u4fdd\u6301\u4e00\u81f4\u3002 \u5229\u7528\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u9884\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u4fbf\u53ef\u4ee5\u5728\u5177\u4f53\u4efb\u52a1\u4e0a\u8fdb\u884c finetune\uff0c\u548c ULMFiT \u4e2d\u7684 finetune \u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\u7684\u65b9\u6cd5\u4e0d\u4e00\u6837\u7684\u662f\uff0cGPT \u76f4\u63a5\u628a\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u7cc5\u5408\u5230\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u4e2d\uff0c\u5982\uff1a $$ L_{3}(C)=L_{2}(C)+\\lambda L_{1}(C) $$ \u5176\u4e2d L2 \u662f task-specific \u7684\u76ee\u6807\u51fd\u6570\uff0c L1 \u5219\u662f\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u3002\u8bba\u6587\u4e2d\u8bf4\u8fd9\u79cd\u8054\u5408\u5b66\u4e60\u65b9\u5f0f\u80fd\u591f\u8ba9\u8bad\u7ec3\u6548\u679c\u66f4\u597d\u3002\u800c\u5728\u5177\u4f53\u5982\u4f55\u505a\u8fc1\u79fb\u5b66\u4e60\u7684\u65b9\u9762\uff0cGPT \u5927\u6982\u4e5f\u540c\u6837\u501f\u9274\u4e86\u4e0a\u9762\u63d0\u5230\u7684***Generating Wikipedia by Summarizing Long Sequences*** \u4e2d\u7684\u505a\u6cd5\uff0c\u975e\u5e38\u5de7\u5999\u5730\u5c06\u6574\u4e2a\u8fc1\u79fb\u5b66\u4e60\u7684\u6846\u67b6\u505a\u5230\u975e\u5e38\u7cbe\u7b80\u548c\u901a\u7528\u3002 \u5206\u7c7b\u95ee\u9898\u4e2d\uff0c\u76f4\u63a5\u5728\u539f\u5e8f\u5217\u7684\u5f00\u59cb\u548c\u672b\u5c3e\u6dfb\u52a0\u8868\u793a\u5f00\u59cb\u548c\u672b\u5c3e\u7684\u7b26\u53f7\uff0c\u5728 Text Entailment \u95ee\u9898\u4e2d\uff0c\u5c06 Premise \u548c Hypothesis \u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u5206\u9694\u7b26\u201c$\u201d\u8fde\u63a5\u8d77\u6765\u6210\u4e3a\u4e00\u4e2a\u5e8f\u5217\uff0c\u7136\u540e\u540c\u6837\u5728\u5f00\u5934\u548c\u672b\u5c3e\u6dfb\u52a0\u6807\u8bb0\u7b26\u53f7\u3002 \u6587\u672c\u76f8\u4f3c\u95ee\u9898\u4e2d\uff0c\u56e0\u4e3a\u5e8f\u5217 1 \u548c\u5e8f\u5217 2 \u6ca1\u6709\u5148\u540e\u5173\u7cfb\uff0c\u56e0\u6b64\u5c06\u5148\u540e\u5173\u7cfb\u76f8\u53cd\u7684\u4e24\u4e2a\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\u3002\u5728 Question Aswering \u4e2d\uff0c\u5c06 query \u548c\u6bcf\u4e2a\u5019\u9009\u7684 answer \u90fd\u5206\u522b\u8fde\u63a5\u6210\u4e00\u4e2a\u5e8f\u5217\u4f5c\u4e3a\u8f93\u5165\uff0c\u6700\u540e\u6309\u5404\u81ea\u7684\u6253\u5206\u8fdb\u884c\u6392\u5e8f\u3002 \u56e0\u6b64\uff0c\u8fd9\u5957\u8f93\u5165\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u57fa\u672c\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u8f93\u5165\u6846\u67b6\u6765\u8868\u5f81\u8bb8\u591a\u6587\u672c\u95ee\u9898\uff08\u4ee5\u81f3\u4e8e\u540e\u6765\u7684***BERT*** \u76f4\u63a5\u501f\u7528\u4e86\u8fd9\u5957\u505a\u6cd5\uff09\u3002 \u9664\u6b64\u4e4b\u5916\uff0c\u5728\u8f93\u51fa\u5c42\uff0c\u53ea\u9700\u8981\u63a5\u5165\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u5168\u8fde\u63a5\u5c42\u6216 MLP\uff0c\u6839\u672c\u4e0d\u9700\u8981\u975e\u5e38\u590d\u6742\u7684\u6a21\u578b\u8bbe\u8ba1\u3002\u800c\u6574\u4e2a finetune \u9636\u6bb5\uff0c\u65b0\u52a0\u5165\u7684\u53c2\u6570\u6781\u5c11\uff0c\u53ea\u6709\u8f93\u51fa\u5c42\u4ee5\u53ca\u8f93\u5165\u5c42\u4e2d\u6dfb\u52a0\u7684\u4e00\u4e9b\u7279\u6b8a\u6807\u8bb0\uff08\u6bd4\u5982\u5206\u9694\u7b26\uff09\u3002 \u6b63\u662f\u56e0\u4e3a\u6709\u4e86\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u8fd9\u79cd\u901a\u7528\u5316\u8bbe\u8ba1\u8003\u8651\uff0c\u4e00\u65e6\u4e2d\u95f4\u7684 Transformer\uff08\u5f53\u7136\uff0c\u6b63\u5982\u524d\u6587\u6240\u8bf4\uff0c\u8fd9\u91cc\u7684 Transformer \u5728\u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\u65f6\u53ea\u6709 Decoder \u90e8\u5206\u3002\u5728\u5c06\u5176\u5f53\u505a\u6587\u672c\u7279\u5f81\u63d0\u53d6\u5668\u7684\u65f6\u5019\uff0c\u76f8\u5e94\u7684\u4e5f\u53ef\u4ee5\u5f88\u4fbf\u5229\u7684\u5c06\u5176\u53d8\u6210 Encoder\uff09\u8868\u5f81\u80fd\u529b\u8db3\u591f\u5f3a\u5927\uff0c\u8fc1\u79fb\u5b66\u4e60\u5728 NLP \u4efb\u52a1\u4e2d\u7684\u5a01\u529b\u4e5f\u4f1a\u53d8\u5f97\u66f4\u4e3a\u5f3a\u5927\u3002 \u679c\u4e0d\u5176\u7136\uff0cGPT \u5728\u516c\u5e03\u7684\u7ed3\u679c\u4e2d\uff0c\u4e00\u4e3e\u5237\u65b0\u4e86 12 \u9879 NLP \u4efb\u52a1\u4e2d\u7684 9 \u9879\u699c\u5355\uff0c\u6548\u679c\u4e0d\u53ef\u8c13\u4e0d\u60ca\u8273\u3002\u7136\u800c\u5bf9\u4e8e OpenAI \u6765\u8bb2\uff0cGPT \u5e95\u5c42\u6a21\u578b\u4f7f\u7528\u7684\u662f\u8c37\u6b4c\u63d0\u51fa\u7684 Tranformer\uff0c\u6b63\u662f\u4f9d\u9760\u4e86 Transformer \u7684\u5f3a\u5927\u8868\u5f81\u80fd\u529b\uff0c\u4f7f\u5f97\u6700\u7ec8\u7684\u6548\u679c\u6709\u4e86\u4e00\u4e2a\u575a\u5b9e\u7684\u57fa\u7840\u3002 **\u7136\u800c\u4ec5\u4ec5\u8fc7\u4e86\u56db\u4e2a\u6708\u4e4b\u540e\u7684 BERT \u6a2a\u7a7a\u51fa\u4e16\uff0c\u540c\u6837\u4e5f\u662f\u7528\u4e86 Transformer\uff0c\u540c\u6837\u662f\u8c37\u6b4c\uff0c\u751a\u81f3\u5f88\u591a\u601d\u60f3\u4e5f\u662f\u76f4\u63a5\u501f\u9274 GPT\u3002**GPT \u4f5c\u4e3a\u4e0e BERT \u6c14\u8d28\u6700\u4e3a\u63a5\u8fd1\u7684\u5de5\u4f5c\uff0c\u540c\u65f6\u4e5f\u662f BERT \u7684\u524d\u8f88\uff0c\u5f97\u5230\u7684\u5f85\u9047\u5dee\u522b\u5982\u6b64\u4e4b\u5927\uff0c\u4e0d\u77e5\u9053 GPT \u662f\u5426\u6709\u4e9b\u53ef\u60dc\u548c\u9057\u61be\u3002 \u76f8\u6bd4 BERT\uff0cGPT \u5e76\u6ca1\u6709\u5e26\u6765\u7279\u522b\u5de8\u5927\u7684\u53cd\u54cd\uff0c\u4ed6\u7684\u60ca\u8273\u4eae\u76f8\uff0c\u8fc5\u901f\u53d8\u4e3a\u6c34\u91cc\u7684\u4e00\u58f0\u95f7\u54cd\uff0c\u6380\u8d77\u4e86\u4e00\u9635\u6d9f\u6f2a\u540e\u8fc5\u901f\u6d88\u6563\uff0c\u5c06\u6574\u4e2a\u821e\u53f0\u8ba9\u4f4d\u4e8e\u6b63\u503c\u9752\u6625\u5149\u8273\u7167\u4eba\u7684 BERT\uff0c\u9887\u6709\u70b9\u201c\u6210\u4e5f\u8427\u4f55\u8d25\u4e5f\u8427\u4f55\u201d\u7684\u5473\u9053\u3002","title":"4.5 GPT"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#46-bert","text":"Bidirectional Encoder Representations from Transformers(BERT) \u5982\u679c\u8981\u7528\u4e00\u53e5\u65f6\u4e0b\u6b63\u6d41\u884c\u7684\u8bdd\u6765\u5f62\u5bb9 BERT \u7684\u51fa\u73b0\uff0c\u8fd9\u53e5\u8bdd\u5927\u6982\u518d\u6070\u5f53\u4e0d\u8fc7\uff1a \u4e00\u5207\u8fc7\u5f80\uff0c \u7686\u4e3a\u5e8f\u7ae0\u3002 2018 \u5e74 10 \u6708 11 \u65e5\uff0c\u8fd9\u4f3c\u4e4e\u662f\u4e2a\u7edd\u5bf9\u5e73\u51e1\u7684\u65e5\u5b50\u3002\u8bf4\u53e5\u9898\u5916\u8bdd\uff0c\u65e0\u72ec\u6709\u5076\uff0cOpenAI \u5728\u5176\u535a\u5ba2\u653e\u51fa GPT \u7684\u65f6\u95f4\u6070\u597d\u4e0d\u591a\u4e0d\u5c11\u662f 4 \u4e2a\u6574\u6708\u524d\uff0c\u5373 2018 \u5e74 6 \u6708 11 \u65e5\uff09\uff0c\u7136\u800c Google AI \u7684 Jacob Devlin \u548c\u4ed6\u7684\u5408\u4f5c\u8005\u4eec\u6084\u6084\u5730\u5728 arXiv \u4e0a\u653e\u4e0a\u4e86\u4ed6\u4eec\u7684\u6700\u65b0\u6587\u7ae0\uff0c\u540d\u4e3a BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding \u3002 \u968f\u540e\u5148\u662f\u5728 Twitter \u4e0a\u5f15\u53d1\u4e86\u4e00\u6ce2\u6d6a\u6f6e\uff0c\u540c\u6837\u662f Google AI \u56e2\u961f\u7684 Thang Luong \u5728\u5176 Twitter \u4e0a\u76f4\u8a00\u8fd9\u9879\u5de5\u4f5c\u662f\u4e00\u4e2a\u5212\u65f6\u4ee3\u7684\u5de5\u4f5c\u3002\u7136\u540e\u5728\u4e2d\u6587\u793e\u533a\u4e5f\u8fc5\u901f\u53d1\u9175\uff0c\u90a3\u51e0\u5929 NLP \u4ece\uff08\u642c\uff09\u4e1a\uff08\u7816\uff09\u4eba\u5458\u7684\u670b\u53cb\u5708\u57fa\u672c\u88ab BERT \u5237\u5c4f\uff0c\u5373\u4fbf\u65f6\u81f3\u4e00\u4e2a\u591a\u6708\u540e\u7684\u4eca\u65e5\uff0c\u8fd9\u4e00\u73b0\u8c61\u4e5f\u57fa\u672c\u4e0d\u89c1\u6d88\u9000\u7684\u8ff9\u8c61\uff0c\u51e0\u4e4e\u5927\u5bb6\u89c1\u9762\u95f2\u804a\u5f00\u53e3\u5fc5\u8c08 BERT\uff0c\u4f3c\u4e4e\u505a NLP \u7684\u5927\u53ef\u4e0d\u5fc5\u4f7f\u7528\u534e\u590f\u5149\u8f89\u707f\u70c2\u6587\u660e\u4e4b\u4e00\u7684\u201c\u5403\u8fc7\u4e86\u5417\uff1f\u201d\uff0c\u800c\u66ff\u6362\u4e3a\u4eca\u65e5\u7684\u201cBERT \u8dd1\u8d77\u6765\u4e86\u5417\uff1f\u201d\uff0c\u53ef\u89c1\u4e00\u6591\u3002 \u4e0d\u5f97\u4e0d\u8bf4\uff0cJacob \u548c\u4ed6\u7684\u5c0f\u4f19\u4f34\u4eec\u771f\u662f\u5927\u624b\u7b14\uff0c\u548c 4 \u4e2a\u6708\u524d\u4ed6\u7684\u524d\u8f88 GPT \u81f3\u5c11\u4e00\u6837\uff0c\u4e43\u81f3\u91ce\u5fc3\u66f4\u5927\u3002\u9664\u4e86 GPT \u5237\u8fc7\u7684\u90a3\u4e9b\u699c\u4e4b\u5916\uff0cBERT \u8fd8\u6dfb\u52a0\u4e86\u4e00\u9879\u4efb\u52a1 SQuAD\uff08\u8fd9\u5927\u6982\u662f\u5f53\u524d NLP \u6700\u4e3a\u706b\u70ed\u7684\u4efb\u52a1\u4e4b\u4e00\uff09\uff0c\u4e5f\u8bb8\u8fd9\u91cc\u7684\u6bcf\u4e00\u9879\u4efb\u52a1\u90fd\u53ef\u80fd\u662f\u4e00\u4e2a\u7814\u7a76\u5c0f\u7ec4\u7684\u6d3b\u547d\u672c\u94b1\uff0c\u751a\u81f3\u8fd8\u6709\u53ef\u80fd\u662f\u67d0\u4e2a\u8bc4\u6559\u6388\u804c\u79f0\u7684\u6551\u547d\u7a3b\u8349\u3002 \u7136\u800c\uff0cBERT \u4e1d\u6beb\u4e0d\u653e\u5728\u773c\u91cc\uff0c\u76f4\u63a5\u5c06\u5b83\u7684\u94c1\u8e44\u8e0f\u5165 11 \u9879 NLP \u4efb\u52a1\uff0c\u5c06\u9014\u4e2d\u76ee\u89c1\u8033\u95fb\u6240\u906d\u9047\u7684\u4e00\u5207\u8361\u5e73\u65e0\u4f59\uff0c\u7559\u7ed9\u5728\u8fd9\u4e4b\u524d\u4ecd\u5728\u82e6\u82e6\u6323\u624e\u4e8e\u67d0\u4e2a\u6392\u884c\u699c\u4e2d\u7684\u4eba\u4eec\u65e0\u5c3d\u7684\u9519\u6115\u548c\u550f\u5618\uff0c\u800c BERT \u4f3c\u4e4e\u4e0d\u66fe\u5fc3\u8f6f\u548c\u8fdf\u7591\u7247\u523b\u3002 \u5f88\u5feb\uff0c\u5927\u6982\u8fc7\u4e86\u4e0d\u5230\u4e00\u4e2a\u6708\uff0cGoogle AI \u628a\u4ed6\u4eec\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684 BERT \u6a21\u578b\u516c\u5e03\u51fa\u6765\uff0c\u5305\u62ec\u82f1\u8bed\u7684 base \u548c large \u6a21\u578b\uff0c\u53e6\u5916\u9488\u5bf9\u5176\u4ed6\u8bed\u8a00\u4e5f\u653e\u51fa\u4e86\u4e2d\u6587\uff08\u4ec5\u6709\u7684\u4e00\u4e2a\u975e\u82f1\u8bed\u7684\u5355\u4e2a\u6a21\u578b\uff09\u548c\u4e00\u4e2a 10 2\u79cd\u8bed\u8a00\u7684\u6df7\u5408\u8bed\u8a00\u9884\u8bad\u7ec3\u6a21\u578b\uff0c\u8fd9\u518d\u6b21\u89e6\u53d1\u548c\u5f15\u7206\u4e86 NLP \u754c\u7684\u96c6\u4f53\u9ad8\u6f6e\u3002 \u4e0d\u8fc7\uff0c\u4e3a\u4f55 BERT \u80fd\u5982\u6b64\u5f15\u4eba\u6ce8\u76ee\uff0c\u4e0d\u59a8\u6765\u4e00\u63a2\u7a76\u7adf\u3002\u79c1\u4ee5\u4e3a\uff0c BERT \u6700\u4e3b\u8981\u7684\u51e0\u4e2a\u7279\u5f81\u5206\u522b\u662f\uff1a \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684 Transformer\uff1b \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684 Mask-LM (Mask-Language Model)\uff1b \u5229\u7528 Next Sentence Prediction \u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f\uff1b \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86 GPT \u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97 BERT \u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u3002 \u4e3a\u4e86\u66f4\u6df1\u5165\u7406\u89e3 BERT\uff0c\u6211\u4eec\u5206\u522b\u6765\u770b\u770b\u4ed6\u7684\u8fd9\u4e9b\u7279\u5f81\u3002 \u9996\u5148\u770b\u770b BERT \u5982\u4f55\u4f7f\u7528\u53cc\u5411 Transformer\u3002\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c \u7528\u4e00\u53e5\u8bdd\u6765\u56de\u7b54\u4e3a\u4ec0\u4e48 BERT \u4f7f\u7528\u53cc\u5411 Transformer\uff1aBERT \u7528\u4e86 Transformer \u7684 Encoder \u6846\u67b6\u3002 \u4f46\u662f\uff0c\u6211\u60f3\u8fd9\u6837\u7684\u7b54\u6848\u81ea\u7136\u662f\u8981\u6263\u5206\u7684\uff0c\u66f4\u201c\u6c42\u751f\u6b32\u201d\u4e00\u70b9\u7684\u7b54\u6848\u662f\uff1a \u56e0\u4e3a Encoder \u4e2d\u7528\u4e86 Self-attention \u673a\u5236\uff0c\u800c\u8fd9\u4e2a\u673a\u5236\u4f1a\u5c06\u6bcf\u4e00\u4e2a\u8bcd\u5728\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5f97\u5230\u65b0\u7684\u8868\u5f81\u3002 \u66f4\u901a\u4fd7\u7684\u8bf4\u6cd5\u662f\u6bcf\u4e00\u4e2a\u8bcd\u5728\u7ecf\u8fc7 Self-attention\u4e4b\u540e\uff0c\u5176\u65b0\u7684\u8868\u5f81\u5c06\u4f1a\u662f\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\uff08\u5f53\u7136\u4e5f\u5305\u62ec\u5b83\u672c\u8eab\uff09\u7684\u52a0\u6743\u6c42\u548c\uff0c\u6bcf\u4e00\u4e2a\u8bcd\u90fd\u8fbe\u5230\u4e86\u201c\u6211\u4e2d\u6709\u4f60\uff0c\u4f60\u4e2d\u6709\u6211\u201d\u7684\u5883\u754c\u3002 \u5982\u679c\u7ecf\u8fc7\u66f4\u591a\u7684 transformer \u7684 block\uff08\u610f\u5473\u7740\u7ecf\u8fc7\u66f4\u591a Self-attention\uff09\uff0c\u90a3\u4e48\u4e92\u76f8\u4ea4\u878d\u7684\u7a0b\u5ea6\u5c06\u4f1a\u66f4\u9ad8\uff0c\u7c7b\u4f3c\u4e8e BERT \u8fd9\u6837\u6df1\u7684\u7ed3\u6784\uff08Base \u6a21\u578b\u662f 12\u5c42\uff0cLarge \u6a21\u578b\u662f 24\u5c42\uff09\uff0c\u7ecf\u8fc7\u6240\u6709 block \u540e\uff0c\u5f7c\u65f6\uff0c\u9051\u8bba\u201c\u6211\u4e2d\u6709\u4f60\uff0c\u4f60\u4e2d\u6709\u6211\u201d\u4e86\uff0c\u4e00\u5207\u65e9\u5df2\u662f\u201c\u6211\u5728\u54ea\u91cc\u201d\u548c\u201c\u6211\u662f\u8c01\u201d\u8fd9\u6837\u7684\u54f2\u5b66\u5f0f\u547d\u9898\u4e86\uff0c\u4e5f\u5c31\u662f\u8fde\u201c\u4f60\u6211\u201d\u7684\u754c\u9650\u90fd\u65e9\u5df2\u6df7\u6c8c\u7684\u72b6\u6001\u4e86\u3002 \u56e0\u6b64\uff0c\u8bf4 BERT \u662f\u53cc\u5411\u7684\u8bed\u8a00\u6a21\u578b\u7ed3\u6784\uff0c\u4e0d\u4ec5\u4e1d\u6beb\u4e0d\u8fc7\u5206\uff0c\u5b83\u5b9e\u8d28\u4e0a\u662f\u4e00\u79cd\u5c06\u5e8f\u5217\u4e2d\u6bcf\u4e00\u4e2a\u8bcd\u4e4b\u95f4\u65e0\u6bd4\u4ea4\u878d\u5728\u4e00\u5757\u7684\u6a21\u578b\u3002\u66f4\u53ef\u8d35\u7684\u662f\uff0c\u4ea4\u878d\u7684\u59ff\u52bf\u8fd8\u53ef\u4ee5\u591a\u79cd\u591a\u6837\uff0c\u8fd9\u53ef\u4ece Large \u7248\u672c BERT \u7684\u591a\u5934\u673a\u5236\u4e2d Head \u4e2a\u6570\u591a\u8fbe 16 \u4e2a\uff0c\u4f53\u4f1a\u51fa\u8fd9\u79cd\u4ea4\u878d\u7684\u7a0b\u5ea6\uff0c\u53ef\u8c13\u4e1d\u4e1d\u5165\u6263\u3002 \u8fd9\u91cc\u4ec5\u7ed9\u51fa\u4e00\u4f8b\uff0c\u4e0b\u56fe\u53ea\u662f\u4e24\u4e2a head \u5b66\u4e60\u5230\u7684\u4ea4\u878d\u6a21\u5f0f\uff0c\u5982\u679c\u591a\u8fbe 16 \u4e2a head\uff0c\u8fd9\u6837\u7684\u4ea4\u878d\u6a21\u5f0f\u8fd8\u8981\u91cd\u590d 16\u6b21\uff0c\u53ef\u89c1\u4e00\u6591\u3002 \u800c\u76f8\u5e94\u7684\u5728ELMo\u4e0eGPT\u4e2d\uff0c\u5b83\u4eec\u5e76\u6ca1\u6709\u7528\u4e0a\u8fd9\u79cd\u4ea4\u878d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u5b83\u4eec\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u5355\u5411\u7684\u6a21\u578b\uff0cELMo\u7a0d\u5fae\u597d\u4e00\u70b9\uff0c\u5c06\u4e24\u4e2a\u5355\u5411\u6a21\u578b\u7684\u4fe1\u606fconcat\u8d77\u6765\uff0c GPT\u5219\u53ea\u7528\u4e86\u5355\u5411\u6a21\u578b\uff0c\u8fd9\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709\u7528\u4e0aTransformer Encoder\uff0c\u53ea\u7528\u4e86Decdoer\u7684\u5929\u751f\u57fa\u56e0\u51b3\u5b9a\u7684\uff0c\u5176\u5b9e\uff0c\u5f88\u591a\u4eba\u5c31\u628a\u8fd9\u79cdleft-to-right\u7684Transformer\u6846\u67b6\u53eb\u505aDecoder\uff0c\u56e0\u4e3a\u4e8b\u5b9e\u4e0aDecoder\u5c31\u662f\u5982\u6b64\uff08\u5177\u4f53\u505a\u7684\u65f6\u5019\u9700\u8981\u63d0\u524d\u628a\u672a\u6765\u5f85\u751f\u6210\u7684\u8bcd\u505a\u597dmask\uff0c\u7ec6\u8282\u4e0a\u901a\u8fc7\u4e0a\u4e09\u89d2\u77e9\u9635\u6765\u5b9e\u73b0\uff09\uff0c\u8fd9\u4e5f\u662fOpenAI\u628a\u4ed6\u4eec\u7684\u6a21\u578b\u53eb\u505a\"Generative\"\u7684\u539f\u56e0\u6240\u5728\u3002 \u7136\u800c\uff0c\u4f7f\u7528\u53cc\u5411Transformer\u4f1a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6b63\u5982\u4e0a\u9762\u7684\u5206\u6790\uff0c\u5373\u4fbf\u5bf9\u4e8eBase\u7248BERT\u6765\u8bf4\uff0c\u7ecf\u8fc712\u4e2ablock\uff0c\u6bcf\u4e00\u4e2ablock\u5185\u90e8\u90fd\u670912\u4e2a\u591a\u5934\u6ce8\u610f\u529b\u673a\u5236\uff0c\u5230\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\uff0c\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u4fe1\u606f\uff0c\u65e9\u5df2\u878d\u5408\u4e86\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\u7684\u4fe1\u606f\uff0c\u800c\u666e\u901a\u7684\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u662f\u901a\u8fc7\u67d0\u4e2a\u8bcd\u7684\u4e0a\u4e0b\u6587\u8bed\u5883\u9884\u6d4b\u5f53\u524d\u8bcd\u7684\u6982\u7387\uff0c\u5982\u679c\u76f4\u63a5\u628a\u8fd9\u4e2a\u5957\u7528\u5230Transformer\u7684Encoder\u4e2d\uff0c\u4f1a\u53d1\u73b0\u5f85\u9884\u6d4b\u7684\u8f93\u51fa\u548c\u5e8f\u5217\u8f93\u5165\u5df2\u7ecf\u7cc5\u5408\u5728\u4e00\u5757\u4e86\uff0c\u8bf4\u767d\u4e86\u5c31\u662fEncoder\u7684\u8f93\u5165\u5df2\u7ecf\u5305\u542b\u4e86\u6b63\u786e\u7684\u76d1\u7763\u4fe1\u606f\u4e86\uff0c\u76f8\u5f53\u4e8e\u7ed9\u6a21\u578b\u6cc4\u9898\u4e86\uff0c\u5982\u6b64\u8bf4\u6765\u666e\u901a\u8bed\u8a00\u6a21\u578b\u7684\u76ee\u6807\u51fd\u6570\u65e0\u6cd5\u76f4\u63a5\u5957\u7528\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u89e3\u51b3Self-attention\u4e2d\u5e26\u6765\u4e86\u8868\u5f81\u6027\u80fd\u5353\u8d8a\u7684\u53cc\u5411\u673a\u5236\uff0c\u5374\u53c8\u540c\u65f6\u5e26\u6765\u4e86\u4fe1\u606f\u6cc4\u9732\u7684\u8fd9\u4e00\u95ee\u9898\uff1f BERT\u7684\u4f5c\u8005\u5f88\u5feb\u8054\u60f3\u5230\u4e86\uff0c\u5982\u679c\u6211\u628a\u539f\u6765\u8981\u9884\u6d4b\u6574\u4e2a\u53e5\u5b50\u7684\u8f93\u51fa\uff0c\u6539\u4e3a\u53ea\u9884\u6d4b\u8fd9\u4e2a\u53e5\u5b50\u4e2d\u7684\u67d0\u4e2a\u8bcd\uff0c\u5e76\u4e14\u628a\u8f93\u5165\u4e2d\u8fd9\u4e2a\u8bcd\u6240\u5728\u4f4d\u7f6e\u6316\u7a7a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c82\u4e0d\u5c31\u4e0d\u4f1a\u5b58\u5728\u6cc4\u9732\u771f\u9898\u7684\u95ee\u9898\u4e86\uff1fJacob\u662f\u8fd9\u6837\u60f3\u7684\uff08\u5b9e\u9645\u4e0a\u662f\u53c2\u8003\u4e86\u5f88\u65e9\u4e4b\u524d\u63d0\u51fa\u7684Cloze\u95ee\u9898\uff09\uff0c\u8fd9\u4f4d\u4ee5\u5355\u4eba\u5f92\u624b\u642d\u5efa\u5927\u5de5\u7a0b\u8457\u79f0\u7684\u725b\u4eba\uff0c\u884c\u52a8\u529b\u8d85\u5f3a\uff0c\u7acb\u9a6c\u5c31\u628a\u8fd9\u4e00\u65b9\u6cd5\u5438\u6536\u548c\u5b9e\u73b0\u5230BERT\u4e2d\uff0c\u4ed6\u4eec\u7684\u60f3\u6cd5\u4e5f\u7279\u522b\u7b80\u5355\u3002 \u8f93\u5165\u5e8f\u5217\u4f9d\u7136\u548c\u666e\u901aTransformer\u4fdd\u6301\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u628a\u6316\u6389\u7684\u4e00\u4e2a\u8bcd\u7528\"[MASK]\"\u66ff\u6362 Transformer\u7684Encoder\u90e8\u5206\u6309\u6b63\u5e38\u8fdb\u884c \u8f93\u51fa\u5c42\u5728\u88ab\u6316\u6389\u7684\u8bcd\u4f4d\u7f6e\uff0c\u63a5\u4e00\u4e2a\u5206\u7c7b\u5c42\u505a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5f97\u5230\u88abmask\u6389\u7684\u8bcd\u6982\u7387\u5927\u5c0f \u6b63\u662f\u56e0\u4e3a\u52a0\u4e86mask\uff0c\u56e0\u6b64BERT\u624d\u628a\u8fd9\u79cd\u65b9\u6cd5\u53eb\u505aMasked-LM\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a \u800c\u8fd9\u5c31\u76f4\u63a5\u628a\u666e\u901a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u751f\u6210\u95ee\u9898\uff08\u6b63\u5982GPT\u4e2d\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u751f\u6210\u95ee\u9898\u4e00\u6837\uff0c\u867d\u7136\u5176\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5e8f\u5217\u751f\u6210\u95ee\u9898\uff09\uff0c\u53d8\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5e76\u4e14\u4e5f\u76f4\u63a5\u89e3\u51b3\u4e86Encoder\u4e2d\u591a\u5c42Self-attention\u7684\u53cc\u5411\u673a\u5236\u5e26\u6765\u7684\u6cc4\u5bc6\u95ee\u9898\uff08\u5355\u5c42Self-attention\u662f\u771f\u53cc\u5411\uff0c\u4f46\u4e0d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff0c\u53ea\u6709\u591a\u5c42\u7d2f\u52a0\u7684Self-attention\u624d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff09\uff0c\u4f7f\u5f97\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u771f\u53cc\u5411\u673a\u5236\u53d8\u4e3a\u73b0\u5b9e\u3002 \u4e0d\u8fc7\uff0cBERT\u9488\u5bf9\u5982\u4f55\u505a\u201c[MASK]\u201d\uff0c\u505a\u4e86\u4e00\u4e9b\u66f4\u6df1\u5165\u7684\u7814\u7a76\uff0c\u5b83\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9009\u53d6\u8bed\u6599\u4e2d\u6240\u6709\u8bcd\u768415%\u8fdb\u884c\u968f\u673amask \u9009\u4e2d\u7684\u8bcd\u572880%\u7684\u6982\u7387\u4e0b\u88ab\u771f\u5b9emask \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u800c\u88ab\u968f\u673a\u66ff\u6362\u6210\u5176\u4ed6\u4e00\u4e2a\u8bcd \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u4ecd\u7136\u4fdd\u7559\u539f\u6765\u771f\u5b9e\u7684\u8bcd \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff0cBERT \u4e5f\u7ed9\u51fa\u4e86\u8db3\u591f\u611f\u6027\u7684\u89e3\u91ca\u3002\u5bf9\u4e8e\u8981\u505a mask\uff0c\u8fd9\u4e2a\u539f\u56e0\u4e0a\u9762\u5df2\u7ecf\u5206\u6790\u4e86\uff0c\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u53cc\u5411\u673a\u5236\u7684\u6cc4\u5bc6\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\uff1b\u800c\u4e3a\u4ec0\u4e48\u8fd8\u8981\u6709\u4e00\u90e8\u5206\u6982\u7387\u4e0d\u505a\u771f\u6b63\u7684 mask\uff0c\u800c\u662f\u8f93\u5165\u4e00\u4e2a\u5b9e\u9645\u7684\u8bcd\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u5c3d\u91cf\u8ba9\u8bad\u7ec3\u548c finetune \u65f6\u8f93\u5165\u4fdd\u6301\u4e00\u81f4\uff0c\u56e0\u4e3a finetune \u8f93\u5165\u4e2d\u662f\u6ca1\u6709\u201c[MASK]\u201d\u6807\u8bb0\u7684\u3002 \u5bf9\u4e8e\u4fdd\u7559\u4e3a\u539f\u6765\u7684\u771f\u5b9e\u8bcd\uff0c\u4e5f\u5c31\u662f\u771f\u7684\u6709 10% \u7684\u60c5\u51b5\u4e0b\u662f\u6cc4\u5bc6\u7684\uff08\u5360\u6240\u6709\u8bcd\u7684\u6bd4\u4f8b\u4e3a 15% * 10% = 1.5%\uff09\uff0c\u4f5c\u8005\u8bf4\u8fd9\u6837\u80fd\u591f\u7ed9\u6a21\u578b\u4e00\u5b9a\u7684 bias\uff0c\u76f8\u5f53\u4e8e\u662f\u989d\u5916\u7684\u5956\u52b1\uff0c\u5c06\u6a21\u578b\u5bf9\u4e8e\u8bcd\u7684\u8868\u5f81\u80fd\u62c9\u5411\u8bcd\u7684\u771f\u5b9e\u8868\u5f81\u3002 \u7b14\u8005\u4e2a\u4eba\u7406\u89e3\u662f\uff1a\u56e0\u4e3a\u8f93\u5165\u5c42\u662f\u5f85\u9884\u6d4b\u8bcd\u7684\u771f\u5b9e embedding\uff0c\u5728\u8f93\u51fa\u5c42\u4e2d\u7684\u8be5\u8bcd\u4f4d\u7f6e\u5f97\u5230\u7684 embedding\uff0c\u662f\u7ecf\u8fc7\u5c42\u5c42 Self-attention \u540e\u5f97\u5230\u7684\uff0c\u8fd9\u90e8\u5206 embedding \u91cc\u80af\u5b9a\u591a\u5c11\u4fdd\u7559\u6709\u90e8\u5206\u8f93\u5165 embedding \u7684\u4fe1\u606f\uff0c\u800c\u8fd9\u90e8\u5206\u7684\u591a\u5c11\u5c31\u662f\u901a\u8fc7\u8f93\u5165\u4e00\u5b9a\u6bd4\u4f8b\u771f\u5b9e\u8bcd\u6240\u5e26\u6765\u7684\u989d\u5916\u5956\u52b1\uff0c\u6700\u7ec8\u4f1a\u4f7f\u5f97\u6a21\u578b\u7684\u8f93\u51fa\u5411\u91cf\u671d\u8f93\u5165\u5c42\u7684\u771f\u5b9e embedding \u6709\u4e00\u4e2a\u504f\u79fb\u3002\u5982\u679c\u5168\u7528 mask \u7684\u8bdd\uff0c\u6a21\u578b\u53ea\u9700\u4fdd\u8bc1\u8f93\u51fa\u5c42\u7684\u5206\u7c7b\u51c6\u786e\uff0c\u5bf9\u4e8e\u8f93\u51fa\u5c42\u7684\u5411\u91cf\u8868\u5f81\u5e76\u4e0d\u5173\u5fc3\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6700\u7ec8\u7684\u5411\u91cf\u8f93\u51fa\u6548\u679c\u5e76\u4e0d\u597d\u3002 \u6700\u540e\uff0cBERT \u5bf9\u9009\u4e2d\u7684\u8bcd\u5728 10% \u6982\u7387\u4e0b\u4e0d\u505a mask\uff0c\u800c\u662f\u88ab\u968f\u673a\u66ff\u6362\u6210\u4e3a\u4e00\u4e2a\u5176\u4ed6\u8bcd\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0cBERT \u4e5f\u7ed9\u51fa\u4e86\u4ed6\u4eec\u7684\u89e3\u91ca\uff1a\u56e0\u4e3a\u6a21\u578b\u4e0d\u77e5\u9053\u54ea\u4e9b\u8bcd\u662f\u88ab mask \u7684\uff0c\u54ea\u4e9b\u8bcd\u662f mask \u4e86\u4e4b\u540e\u53c8\u88ab\u66ff\u6362\u6210\u4e86\u4e00\u4e2a\u5176\u4ed6\u7684\u8bcd\uff0c\u8fd9\u4f1a\u8feb\u4f7f\u6a21\u578b\u5c3d\u91cf\u5728\u6bcf\u4e00\u4e2a\u8bcd\u4e0a\u90fd\u5b66\u4e60\u5230\u4e00\u4e2a\u5168\u5c40\u8bed\u5883\u4e0b\u7684\u8868\u5f81\uff0c\u56e0\u800c\u4e5f\u80fd\u8ba9 BERT \u83b7\u5f97\u66f4\u597d\u7684\u8bed\u5883\u76f8\u5173\u7684\u8bcd\u5411\u91cf\uff08\u8fd9\u6b63\u662f\u89e3\u51b3\u4e00\u8bcd\u591a\u4e49\u7684\u6700\u91cd\u8981\u7279\u6027\uff09\u3002 \u5176\u5b9e\u66f4\u611f\u6027\u7684\u89e3\u91ca\u662f\uff0c\u56e0\u4e3a\u6a21\u578b\u4e0d\u77e5\u9053\u54ea\u91cc\u6709\u5751\uff0c\u6240\u4ee5\u968f\u65f6\u90fd\u8981\u63d0\u5fc3\u540a\u80c6\uff0c\u4fdd\u6301\u9ad8\u5ea6\u7684\u8b66\u60d5\u3002\u6b63\u5982\u4e00\u9a6c\u5e73\u5ddd\u7684\u5927\u897f\u5317\u9ad8\u901f\u516c\u8def\uff0c\u901a\u5e38\u8ba4\u4e3a\u90fd\u662f\u8def\u7ebf\u76f4\uff0c\u8def\u9762\u72b6\u51b5\u597d\uff0c\u4f46\u5982\u679c\u6389\u4ee5\u8f7b\u5fc3\uff0c\u4e00\u65e6\u6709\u4e86\u7a81\u53d1\u60c5\u51b5\uff0c\u5f80\u5f80\u4e5f\u6700\u5bb9\u6613\u51fa\u4e8b\u6545\uff0c\u9c81\u68d2\u6027\u4e0d\u9ad8\uff1b\u800c\u53cd\u5012\u662f\u5c71\u95f4\u5c0f\u8def\uff0c\u660e\u786e\u544a\u8bc9\u4e86\u6bcf\u4e00\u4f4d\u53f8\u673a\u8def\u9762\u968f\u65f6\u90fd\u6709\u5751\uff0c\u5e76\u4e14\u6ca1\u6cd5\u8001\u8fdc\u5c31\u63d0\u524d\u77e5\u9053\uff0c\u6240\u4ee5\u5373\u4fbf\u8001\u53f8\u673a\u4e5f\u53ea\u80fd\u5c0f\u5fc3\u7ffc\u7ffc\u7684\u628a\u7a33\u65b9\u5411\u76d8\u6162\u6162\u5f00\uff0c\u8fd9\u6837\u505a\u53cd\u5012\u9c81\u68d2\u6027\u66f4\u9ad8\u3002 \u6b63\u6240\u8c13\u300a\u5de6\u4f20\u300b\u4e2d\u6240\u8a00\u201c\u5c45\u5b89\u601d\u5371\uff0c\u601d\u5219\u6709\u5907\uff0c\u6709\u5907\u65e0\u60a3\uff0c\u6562\u4ee5\u6b64\u89c4\u201d\uff0cBERT \u7684\u8fd9\u79cd\u8bbe\u8ba1\u53c8\u4f55\u5c1d\u4e0d\u662f\u201c\u5c45\u5b89\u601d\u5371\u201d\u7684\u5178\u8303\uff0cJacob \u7ed9\u51fa\u7684\u539f\u6587\u89e3\u91ca\u5982\u4e0b\uff1a The Transformer encoder does not know which words it will be asked to predict or which have been replaced by random words, so it is forced to keep a distributional contextual representation of every input token. \u7136\u800c\u53ef\u60dc\u7684\u662f\uff0cJacob \u5e76\u6ca1\u6709\u5728\u8bba\u6587\u4e2d\u505a\u66f4\u7ec6\u81f4\u7684\u5b9e\u9a8c\uff0c\u6765\u8bc1\u660e\u8fd9\u4e9b\u8a00\u8bba\u7684\u6b63\u786e\u6027\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5b58\u5728\u5176\u4ed6\u7684\u66f4\u4f18\u7684\u6bd4\u4f8b\u7ec4\u5408\u3002 \u9664\u4e86\u7528\u4e0a Mask-LM \u7684\u65b9\u6cd5\u4f7f\u5f97\u53cc\u5411 Transformer \u4e0b\u7684\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u73b0\u5b9e\uff0cBERT \u8fd8\u5229\u7528\u548c\u501f\u9274\u4e86 Skip-thoughts \u65b9\u6cd5\u4e2d\u7684\u53e5\u5b50\u9884\u6d4b\u95ee\u9898\uff0c\u6765\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u5173\u7cfb\u3002\u5177\u4f53\u505a\u6cd5\u5219\u662f\u5c06\u4e24\u4e2a\u53e5\u5b50\u7ec4\u5408\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u7ec4\u5408\u65b9\u5f0f\u4f1a\u6309\u7167\u4e0b\u9762\u5c06\u8981\u4ecb\u7ecd\u7684\u65b9\u5f0f\uff0c\u7136\u540e\u8ba9\u6a21\u578b\u9884\u6d4b\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u4e3a\u5148\u540e\u8fd1\u90bb\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u4e5f\u5c31\u662f\u4f1a\u628a\"Next Sentence Prediction\"\u95ee\u9898\u5efa\u6a21\u6210\u4e3a\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\u3002 \u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u6570\u636e\u4e2d\u6709 50% \u7684\u60c5\u51b5\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5148\u540e\u5173\u7cfb\uff0c\u800c\u53e6\u5916 50% \u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u968f\u673a\u4ece\u8bed\u6599\u4e2d\u51d1\u5230\u4e00\u8d77\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u5177\u5907\u5148\u540e\u5173\u7cfb\uff0c\u4ee5\u6b64\u6765\u6784\u9020\u8bad\u7ec3\u6570\u636e\u3002\u53e5\u5b50\u7ea7\u522b\u7684\u9884\u6d4b\u601d\u8def\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684 Skip-thoughts \u57fa\u672c\u4e00\u81f4\uff0c\u5f53\u7136\u66f4\u672c\u8d28\u7684\u601d\u60f3\u6765\u6e90\u8fd8\u662f\u6765\u81ea\u4e8e word2vec \u4e2d\u7684 skip-gram \u6a21\u578b\u3002 \u5728\u9884\u8bad\u7ec3\u9636\u6bb5\uff0c\u56e0\u4e3a\u6709\u4e24\u4e2a\u4efb\u52a1\u9700\u8981\u8bad\u7ec3\uff1aMask-LM \u548c Next Sentence Prediction\uff0c\u56e0\u6b64 BERT \u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2a Multi-task Learning\u3002 BERT\u7684\u635f\u5931\u51fd\u6570\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u6765\u81ea Mask-LM \u7684\u5355\u8bcd\u7ea7\u522b\u5206\u7c7b\u4efb\u52a1\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\u3002\u901a\u8fc7\u8fd9\u4e24\u4e2a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\uff0c\u53ef\u4ee5\u4f7f\u5f97 BERT \u5b66\u4e60\u5230\u7684\u8868\u5f81\u65e2\u6709 token \u7ea7\u522b\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u5305\u542b\u4e86\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u4fe1\u606f\u3002\u5177\u4f53\u635f\u5931\u51fd\u6570\u5982\u4e0b\uff1a $$ L\\left(\\theta, \\theta_{1}, \\theta_{2}\\right)=L_{1}\\left(\\theta, \\theta_{1}\\right)+L_{2}\\left(\\theta, \\theta_{2}\\right) $$ \u5176\u4e2d \u03b8 \u662f BERT \u4e2d Encoder \u90e8\u5206\u7684\u53c2\u6570\uff0c\u03b81 \u662f Mask-LM \u4efb\u52a1\u4e2d\u5728 Encoder \u4e0a\u6240\u63a5\u7684\u8f93\u51fa\u5c42\u4e2d\u7684\u53c2\u6570\uff0c\u03b82 \u5219\u662f\u53e5\u5b50\u9884\u6d4b\u4efb\u52a1\u4e2d\u5728 Encoder \u63a5\u4e0a\u7684\u5206\u7c7b\u5668\u53c2\u6570\u3002\u56e0\u6b64\uff0c\u5728\u7b2c\u4e00\u90e8\u5206\u7684\u635f\u5931\u51fd\u6570\u4e2d\uff0c\u5982\u679c\u88ab mask \u7684\u8bcd\u96c6\u5408\u4e3a M\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u8bcd\u5178\u5927\u5c0f |V| \u4e0a\u7684\u591a\u5206\u7c7b\u95ee\u9898\uff0c\u90a3\u4e48\u5177\u4f53\u8bf4\u6765\u6709\uff1a $$ L_{1}\\left(\\theta, \\theta_{1}\\right)=-\\sum_{i=1}^{M} \\log p\\left(m=m_{i} | \\theta, \\theta_{1}\\right), m_{i} \\in[1,2, \\ldots,|V|] $$ \u5728\u53e5\u5b50\u9884\u6d4b\u4efb\u52a1\u4e2d\uff0c\u4e5f\u662f\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898\u7684\u635f\u5931\u51fd\u6570\uff1a $$ L_{2}\\left(\\theta, \\theta_{2}\\right)=-\\sum_{j=1}^{N} \\log p\\left(n=n_{i} | \\theta, \\theta_{2}\\right), n_{i} \\in[I s N e x t, N o t N e x t] $$ \u56e0\u6b64\uff0c\u4e24\u4e2a\u4efb\u52a1\u8054\u5408\u5b66\u4e60\u7684\u635f\u5931\u51fd\u6570\u662f\uff1a $$ L\\left(\\theta, \\theta_{1}, \\theta_{2}\\right)=-\\sum_{i=1}^{M} \\log p\\left(m=m_{i} | \\theta, \\theta_{1}\\right)-\\sum_{j=1}^{N} \\log p\\left(n=n_{i} | \\theta, \\theta_{2}\\right) $$ \u5177\u4f53\u7684\u9884\u8bad\u7ec3\u5de5\u7a0b\u5b9e\u73b0\u7ec6\u8282\u65b9\u9762\uff0cBERT \u8fd8\u5229\u7528\u4e86\u4e00\u7cfb\u5217\u7b56\u7565\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u6613\u4e8e\u8bad\u7ec3\uff0c\u6bd4\u5982\u5bf9\u4e8e\u5b66\u4e60\u7387\u7684 warm-up \u7b56\u7565\uff08\u548c\u4e0a\u6587\u63d0\u5230\u7684 ULMFiT \u4ee5\u53ca Transformer \u4e2d\u7528\u5230\u7684\u6280\u5de7\u7c7b\u4f3c\uff09\uff0c\u4f7f\u7528\u7684\u6fc0\u6d3b\u51fd\u6570\u4e0d\u518d\u662f\u666e\u901a\u7684 ReLu\uff0c\u800c\u662f GeLu\uff0c\u4e5f\u662f\u7528\u4e86 dropout \u7b49\u5e38\u89c1\u7684\u8bad\u7ec3\u6280\u5de7\u3002 \u6b64\u5916\uff0cBERT \u4f7f\u7528\u7684\u8bed\u6599\u6bd4 GPT \u4e5f\u8981\u5927\u5f97\u591a\uff08GPT \u7528\u7684\u662f BooksCorpus\uff0c800 million \u4e2a\u8bcd\uff0cBERT \u9664\u4e86 BooksCorpus \u4e4b\u5916\uff0c\u8fd8\u52a0\u5165\u4e86 Wikipedia \u6570\u636e\u96c6\uff0c2500 million \u4e2a\u8bcd\uff0c\u603b\u5171\u6709 3.3 billion \u4e2a\u8bcd\uff09\u3002 \u6700\u540e\uff0c\u5f53 BERT \u9884\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u9488\u5bf9\u5982\u4f55\u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u8fc1\u79fb\u5230\u7279\u5b9a\u4efb\u52a1\u80cc\u666f\u4e0b\uff0cBERT \u5728 GPT \u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u8fd9\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5de5\u4f5c\u8fdb\u884c\u4e86\u66f4\u6df1\u5165\u7684\u8bbe\u8ba1\u3002\u7531\u4e8e\u4e2d\u95f4\u7684 Encoder \u5bf9\u4e8e\u6240\u6709\u4efb\u52a1\u51e0\u4e4e\u90fd\u53ef\u4ee5\u76f4\u63a5\u5229\u7528\uff0c\u56e0\u6b64\u8fd9\u90e8\u5206\u7684\u8bbe\u8ba1\u4e3b\u8981\u5206\u4e3a\u4e24\u65b9\u9762\uff1a\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u3002 \u5728\u8f93\u5165\u5c42\u65b9\u9762\uff0c\u601d\u8def\u548c GPT \u57fa\u672c\u7c7b\u4f3c\uff0c\u5982\u679c\u8f93\u5165\u53ea\u6709\u4e00\u4e2a\u53e5\u5b50\uff0c\u5219\u76f4\u63a5\u5728\u53e5\u5b50\u524d\u540e\u6dfb\u52a0\u53e5\u5b50\u7684\u8d77\u59cb\u6807\u8bb0\u4f4d\u548c\u53e5\u5b50\u7684\u7ed3\u675f\u7b26\u53f7\u3002\u5728 BERT \u4e2d\uff0c\u8d77\u59cb\u6807\u8bb0\u90fd\u7528\u201c[CLS]\u201d\u6765\u8868\u793a\uff0c\u7ed3\u675f\u6807\u8bb0\u7b26\u7528\"[SEP]\"\u8868\u793a\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u53e5\u5b50\u7684\u8f93\u5165\u60c5\u51b5\uff0c\u9664\u4e86\u8d77\u59cb\u6807\u8bb0\u548c\u7ed3\u675f\u6807\u8bb0\u4e4b\u5916\uff0c\u4e24\u4e2a\u53e5\u5b50\u95f4\u901a\u8fc7\"[SEP]\"\u6765\u8fdb\u884c\u533a\u5206\u3002 \u9664\u4e86\u8fd9\u4e9b\u4e4b\u5916\uff0cBERT \u8fd8\u7528\u4e24\u4e2a\u8868\u793a\u5f53\u524d\u662f\u53e5\u5b50 A \u6216\u53e5\u5b50 B \u7684\u5411\u91cf\u6765\u8fdb\u884c\u8868\u793a\u3002\u5bf9\u4e8e\u53e5\u5b50 A \u6765\u8bf4\uff0c\u6bcf\u4e00\u8bcd\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u540c\u6837\u7684\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50 A \u7684\u5411\u91cf\uff0c\u5982\u679c\u6709\u53e5\u5b50 B \u7684\u8bdd\uff0c\u53e5\u5b50 B \u4e2d\u7684\u6bcf\u4e2a\u8bcd\u4e5f\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50 B \u7684\u5411\u91cf\u3002 \u5f53\u7136\uff0c\u548c Transformer \u4e2d\u4e00\u6837\uff0c\u4e3a\u4e86\u5f15\u5165\u5e8f\u5217\u4e2d\u8bcd\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4e5f\u7528\u4e86 position embedding\uff0c\u56e0\u6b64\uff0c\u6700\u7ec8\u7684\u8f93\u5165\u5c42\u5927\u6982\u662f\uff1a \u9664\u4e86\u8f93\u5165\u5c42\u8981\u5c3d\u91cf\u505a\u5230\u901a\u7528\u4e4b\u5916\uff0c\u6839\u636e\u4e0d\u540c\u4efb\u52a1\u8bbe\u8ba1\u4e0d\u540c\u7684\u8f93\u51fa\u5c42\u4e5f\u53d8\u5f97\u5c24\u4e3a\u91cd\u8981\uff0cBERT \u4e3b\u8981\u9488\u5bf9\u56db\u7c7b\u4efb\u52a1\u8003\u8651\u548c\u8bbe\u8ba1\u4e86\u4e00\u4e9b\u975e\u5e38\u6613\u4e8e\u79fb\u690d\u7684\u8f93\u51fa\u5c42\uff0c\u8fd9\u56db\u7c7b\u4efb\u52a1\u5206\u522b\u662f\uff1a\u5355\u4e2a\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3001\u4e24\u4e2a\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\uff0c\u53e5\u5b50\u6216\u7b54\u6848\u9009\u62e9\u4efb\u52a1\u3002 \u5bf9\u4e8e\u5355\u5e8f\u5217\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u548c\u5e8f\u5217\u5bf9\u7684\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4f7f\u7528\u6846\u67b6\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u8981\u8f93\u5165\u5c42\u6309\u7167\u4e0a\u9762\u7684\u65b9\u6cd5\u505a\u597d\u8868\u793a\u5373\u53ef\u3002 \u8fd9\u4e24\u4e2a\u5206\u7c7b\u4efb\u52a1\u90fd\u662f\u5229\u7528 Encoder \u6700\u540e\u4e00\u5c42\u7684\u7b2c\u4e00\u4e2a\u65f6\u523b\u201c[CLS]\u201d\u5bf9\u5e94\u7684\u8f93\u51fa\u4f5c\u4e3a\u5206\u7c7b\u5668\u7684\u8f93\u5165\uff0c\u8fd9\u4e2a\u65f6\u523b\u53ef\u4ee5\u5f97\u5230\u8f93\u5165\u5e8f\u5217\u7684\u5168\u5c40\u8868\u5f81\uff0c\u5e76\u4e14\u56e0\u4e3a\u76d1\u7763\u4fe1\u53f7\u4ece\u8fd9\u4e2a\u4f4d\u7f6e\u53cd\u9988\u7ed9\u6a21\u578b\uff0c\u56e0\u800c\u5b9e\u9645\u4e0a\u5728 finetune \u9636\u6bb5\u4e5f\u53ef\u4ee5\u4f7f\u5f97\u8fd9\u4e00\u8868\u5f81\u5c3d\u91cf\u503e\u5411\u4e8e\u5168\u5c40\u7684\u8868\u5f81\u3002 \u5f53\u7136\uff0c\u5373\u4fbf\u5982\u6b64\uff0c\u540c\u6837\u4e5f\u662f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u7b80\u5355\u6613\u884c\u7684\u529e\u6cd5\u5c06\u5176\u4ed6\u65f6\u523b\u751a\u81f3\u5176\u4ed6\u5c42\u5185\u7684\u8868\u5f81\u62ff\u6765\u7528\u7684\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u5e76\u4e0d\u9700\u8981\u5c40\u9650\u5728\u8fd9\u4e00\u4e2a\u65f6\u523b\u4e0a\u7684\u8868\u5f81\u3002\u53e6\u5916\uff0c finetune \u9636\u6bb5\uff0c\u5728 BERT Encoder \u57fa\u7840\u4e0a\uff0c\u8fd9\u4e9b\u5206\u7c7b\u4efb\u52a1\u56e0\u4e3a\u53ea\u9700\u8981\u63a5\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u56e0\u6b64\u589e\u52a0\u7684\u53c2\u6570\u53ea\u6709 H \u00d7 K \uff0c\u5176\u4e2d H \u662f Encoder \u8f93\u51fa\u5c42\u4e2d\u9690\u72b6\u6001\u7684\u7ef4\u5ea6\uff0cK \u662f\u5206\u7c7b\u7c7b\u522b\u4e2a\u6570\u3002 \u5bf9\u4e8e SQuAD 1.1 \u4efb\u52a1\u6765\u8bf4\uff0c\u9700\u8981\u5728\u7ed9\u5b9a\u6bb5\u843d\u4e2d\u627e\u5230\u6b63\u786e\u7b54\u6848\u6240\u5728\u533a\u95f4\uff0c\u8fd9\u6bb5\u533a\u95f4\u901a\u8fc7\u4e00\u4e2a\u8d77\u59cb\u7b26\u4e0e\u7ec8\u6b62\u7b26\u6765\u8fdb\u884c\u6807\u8bb0\uff0c\u56e0\u6b64\u53ea\u9700\u9884\u6d4b\u8f93\u5165\u5e8f\u5217\u4e2d\u54ea\u4e2a token \u6240\u5728\u4f4d\u7f6e\u662f\u8d77\u59cb\u7b26\u6216\u7ec8\u6b62\u7b26\u5373\u53ef\u3002 \u8fd9\u4e2a\u8fc7\u7a0b\u53ea\u9700\u7ef4\u62a4\u4e24\u4e2a\u5411\u91cf\uff0c\u5206\u522b\u662f\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u7684\u5411\u91cf\uff0c\u4e0d\u8fc7\u4e0e\u5176\u8bf4\u662f\u5411\u91cf\uff0c\u8fd8\u4e0d\u5982\u8bf4\u662f\u4e24\u4e2a\u5bf9\u5e94\u7684\u5168\u8fde\u63a5\u5c42\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u6709\u4e9b\u7279\u6b8a\uff0c\u5728\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u4e2d\uff0c\u8f93\u5165\u5c42\u7684\u8282\u70b9\u4e2a\u6570\u4e3a BERT Encoder \u8f93\u51fa\u7684\u8282\u70b9\u4e2a\u6570\uff0c\u4e5f\u5c31\u662f H\uff0c\u800c\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u8f93\u51fa\u5c42\u90fd\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u3002 \u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u7684\u4f5c\u7528\u5c31\u662f\u8981\u628a\u5e8f\u5217\u8f93\u51fa\u7684\u5411\u91cf\u901a\u8fc7\u8fd9\u4e24\u4e2a\u5168\u8fde\u63a5\u5c42\u6620\u5c04\u4e3a\u4e00\u4e2a\u5b9e\u6570\u503c\uff0c\u53ef\u4ee5\u7b49\u540c\u4e8e\u6253\u5206\uff0c\u7136\u540e\u518d\u6839\u636e\u8fd9\u4e2a\u6253\u5206\u5728\u5e8f\u5217\u7684\u65b9\u5411\u4e0a\u9009\u53d6\u6700\u5927\u503c\u4f5c\u4e3a\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u3002\u56e0\u6b64\u8fd9\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u53ea\u589e\u52a0\u4e86 H \u00d7 2 \u7684\u53c2\u6570\u91cf\uff0c\u53ef\u8c13\u6bd4\u5206\u7c7b\u4efb\u52a1\u7684\u53c2\u6570\u589e\u52a0\u8fd8\u8981\u5c11\uff08\u81f3\u5c11\u548c 2 \u5206\u7c7b\u4efb\u52a1\u7684\u53c2\u6570\u4e00\u81f4\uff09\u3002 \u8fd9\u91cc\u6709\u4e24\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff1a\u5176\u4e00\uff0c\u65e0\u8bba\u5bf9\u4e8e\u8d77\u59cb\u7b26\u548c\u7ec8\u6b62\u7b26\u4e5f\u597d\uff0c\u5b83\u4eec\u7684\u5224\u65ad\u548c\u666e\u901a\u5206\u7c7b\u4efb\u52a1\u4e0d\u4e00\u6837\uff0c\u4e0d\u662f\u76f4\u63a5\u9488\u5bf9\u6bcf\u4e2a token \u8fdb\u884c\u662f\u5426\u662f\u8d77\u59cb\u7b26\u7684\u5206\u7c7b\uff08\u5982\u679c\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u53c2\u6570\u91cf\u8981\u589e\u52a0 H \u00d7 4\uff09\uff0c\u800c\u662f\u7c7b\u4f3c\u4e8e\u5728\u5168\u4f53\u8f93\u5165\u5e8f\u5217\u4e0a\u8fdb\u884c\u6392\u5e8f\uff0c\u56e0\u6b64\u9488\u5bf9\u8d77\u59cb\u7b26\u7684\u5224\u65ad\u6765\u8bb2\u53ea\u9700\u8981\u4e00\u4e2a H \u00d7 1 \u7684\u5168\u8fde\u63a5\u5c31\u53ef\u4ee5\u4e86\u3002 \u7b2c\u4e8c\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8bad\u7ec3\u65f6\u65e0\u987b\u62c5\u5fc3\u7ec8\u6b62\u7b26\u662f\u5426\u5728\u8d77\u59cb\u7b26\u540e\u9762\uff0c\u56e0\u4e3a\u5373\u4fbf\u6a21\u578b\u8bad\u7ec3\u65f6\u9884\u6d4b\u662f\u7ec8\u6b62\u7b26\u5728\u8d77\u59cb\u7b26\u524d\u9762\uff0c\u8fd9\u4e00\u9519\u8bef\u73b0\u8c61\u4f1a\u901a\u8fc7\u635f\u5931\u51fd\u6570\u53cd\u9988\u7ed9\u6a21\u578b\uff0c\u7136\u800c\u5728\u505a inference \u65f6\uff0c\u5c31\u5fc5\u987b\u4fdd\u8bc1\u7ec8\u6b62\u7b26\u4e00\u5b9a\u8981\u5728\u8d77\u59cb\u7b26\u540e\u9762\u3002 BERT \u4e5f\u8003\u8651\u4e86\u5982\u4f55\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e0a\u8fdb\u884c finetune\uff0c\u5bf9\u4e8e\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a token \u800c\u8a00\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002\u548c\u524d\u9762\u63d0\u5230\u7684\u666e\u901a\u5206\u7c7b\u4efb\u52a1\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u8fd9\u91cc\u7684\u5206\u7c7b\u9700\u8981\u9488\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u8bcd\u505a\u5206\u7c7b\uff0c\u53c2\u6570\u589e\u52a0\u5728 H \u00d7 K \uff0c\u8fd9\u91cc\u7684 K \u662f\u5e8f\u5217\u6807\u6ce8\u4e2d\u6807\u6ce8\u7684\u79cd\u7c7b\u4e2a\u6570\u3002 \u6700\u540e\u5bf9\u4e8e SWAG \u4efb\u52a1\u6765\u8bb2\uff0c\u56e0\u4e3a\u9700\u8981\u5728\u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\u540e\uff0c\u4ece\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u4e2d\u9009\u62e9\u4e00\u4e2a\u6700\u6709\u53ef\u80fd\u662f\u8be5\u53e5\u5b50\u7684\u4e0b\u4e00\u4e2a\u53e5\u5b50\uff0c\u8fd9\u91cc\u9762\u901a\u5e38\u5305\u542b\u4e86\u4e00\u4e9b\u5e38\u8bc6\u63a8\u7406\u3002 BERT \u7684\u505a\u6cd5\u662f\u5c06\u524d\u7f6e\u53e5\u5b50\u548c\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u5206\u522b\u8fdb\u884c\u7ec4\u5408\u6210\u4e00\u4e2a\u53e5\u5b50\u5bf9\uff0c\u5e76\u6309\u7167\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\u65b9\u6cd5\u8f93\u5165\u5230 Encoder\uff0c\u8fd9\u6837\u4fbf\u5f97\u5230\u56db\u4e2a pair \u7684\u53e5\u5b50\u8868\u5f81\uff0c\u7136\u540e\u53ea\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u5411\u91cf\uff08\u6216\u8005\u8bf4\u662f\u4e00\u4e2a\u591a\u5230 1 \u7684\u5168\u8fde\u63a5\u5c42\uff09\uff0c\u4fbf\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u4e2a\u5019\u9009\u53e5\u5b50\u8fdb\u884c\u6253\u5206\uff0c\u4ece\u800c\u5f97\u5230\u56db\u4e2a\u5019\u9009\u53e5\u5b50\u4e2d\u6700\u6709\u53ef\u80fd\u662f\u4e0b\u4e00\u4e2a\u7684\u53e5\u5b50\u3002 \u8fd9\u4e2a\u5168\u8fde\u63a5\u53ea\u9700\u8981\u589e\u52a0 H \u00d7 1 \u7684\u53c2\u6570\u91cf\uff0c\u8fd9\u4e00\u70b9\u548c SQuAD 1.1 \u4efb\u52a1\u7684\u60c5\u51b5\u7c7b\u4f3c\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u505a\u6cd5\u548c GPT \u5bf9\u4e8e Question Selection \u7684\u505a\u6cd5\u4e5f\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u7406\u8bba\u4e0a\u5e94\u8be5\u4e5f\u53ef\u4ee5\u5e94\u7528\u5230 WikiQA \u8fd9\u79cd\u6570\u636e\u96c6\u4e0a\u7684\uff0cfinetune \u9636\u6bb5\u540c\u6837\u53ea\u9700\u8981\u589e\u52a0 H \u00d7 1 \u7684\u53c2\u6570\u91cf\u3002 \u6700\u540e\uff0c\u6211\u4eec\u518d\u6b21\u603b\u7ed3 BERT \u7684\u51e0\u4e2a\u4e3b\u8981\u7279\u70b9\uff1a Transformer Encoder \u56e0\u4e3a\u6709 Self-attention \u673a\u5236\uff0cBERT \u81ea\u5e26\u53cc\u5411\u529f\u80fd\uff1b \u56e0\u4e3a\u53cc\u5411\u529f\u80fd\u4ee5\u53ca\u591a\u5c42 Self-attention \u673a\u5236\u7684\u5f71\u54cd\uff0c\u4f7f\u5f97 BERT \u5fc5\u987b\u4f7f\u7528 Cloze \u7248\u7684\u8bed\u8a00\u6a21\u578b Masked-LM \u6765\u5b8c\u6210 token \u7ea7\u522b\u7684\u9884\u8bad\u7ec3\uff1b \u4e3a\u4e86\u83b7\u53d6\u6bd4\u8bcd\u66f4\u9ad8\u7ea7\u522b\u7684\u53e5\u5b50\u7ea7\u522b\u8bed\u4e49\u8868\u5f81\uff0cBERT \u52a0\u5165\u4e86 Next Sentence Prediction \u6765\u548c Masked-LM \u4e00\u8d77\u505a\u8054\u5408\u8bad\u7ec3\uff1b \u4e3a\u4e86\u9002\u914d\u591a\u4efb\u52a1\u4e0b\u7684\u8fc1\u79fb\u5b66\u4e60\uff0cBERT \u8bbe\u8ba1\u4e86\u66f4\u901a\u7528\u7684\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u3002 \u7136\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u770b BERT \u90fd\u7ad9\u5728\u4e86\u54ea\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff1a \u9488\u5bf9\u7b2c\u4e00\u70b9\uff0c\u53cc\u5411\u529f\u80fd\u662f Transformer Encoder \u81ea\u5e26\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662f Transformer\uff1b \u7b2c\u4e8c\u70b9\u4e2d Masked-LM \u7684\u5de8\u4eba\u80a9\u8180\u662f\u8bed\u8a00\u6a21\u578b\u3001CBOW \u4ee5\u53ca Cloze\u95ee\u9898\uff1b \u7b2c\u4e09\u70b9\u4e2d Next Sentence Prediction \u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662f Skip-gram\u3001Skip-thoughts \u548c Quick-thoughts \u7b49\u5de5\u4f5c\uff1b \u7b2c\u56db\u70b9\u4e2d\uff0c\u5bf9\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u6539\u9020\uff0c\u501f\u9274\u4e86 T-DMCA \u4ee5\u53ca GPT \u7684\u505a\u6cd5\u3002 \u518d\u6765\u770b\u770b\u9884\u8bad\u7ec3\u4f7f\u7528\u7684\u6570\u636e\u65b9\u9762\uff0cELMo \u4f7f\u7528\u7684\u662f 1B Word Benchmark \u6570\u636e\u96c6\uff0c\u8bcd\u6570\u4e3a 10 \u4ebf\uff0c\u7136\u800c\u53e5\u5b50\u95f4\u7684\u987a\u5e8f\u662f\u968f\u673a\u6253\u4e71\u7684\uff0c\u65e0\u6cd5\u5efa\u6a21\u53e5\u5b50\u7ea7\u522b\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5 GPT \u548c BERT \u90fd\u5f03\u7528\u8fd9\u4e2a\u6570\u636e\u96c6\uff1bGPT \u4f7f\u7528\u7684\u662f BooksCorpus\uff0c\u8bcd\u6570\u4e3a 8 \u4ebf\uff1bBERT \u9664\u4e86\u4f7f\u7528 BooksCorpus \u4e4b\u5916\uff0c\u8fd8\u52a0\u5165\u4e86 25 \u4ebf\u7ea7\u522b\u7684 Wikipedia \u6570\u636e\u96c6\uff0c\u56e0\u6b64\u6574\u4f53\u4f7f\u7528\u7684\u6570\u636e\u96c6\u4e3a 33 \u4ebf\u4e2a\u8bcd\u3002\u53ef\u89c1 BERT \u4f7f\u7528\u7684\u6570\u636e\u96c6\u662f\u6700\u5927\u7684\u3002 \u6a21\u578b\u65b9\u9762\uff0cELMo \u4f7f\u7528\u7684\u662f\u4e00\u4e2a Bi-LSTM \u7ed3\u6784\uff0c\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4f7f\u7528 CNN \u6765\u8fdb\u884c\u5efa\u6a21\u3002\u800c GPT \u4f7f\u7528\u4e86 12 \u4e2a block\uff0c\u9690\u85cf\u5c42\u8282\u70b9\u6570\u4e3a 768\uff0c\u591a\u5934\u4e3a 12\uff0c\u8fd9\u4e5f\u662f BERT \u7684 base \u7248\u672c\uff08base \u7248\u672c\u5c31\u662f\u4e3a\u4e86\u8ddf GPT \u505a\u5bf9\u6bd4\uff09\uff0c\u53c2\u6570\u91cf\u6309\u7167 BERT base \u7248\u672c\u4f30\u8ba1\u4e3a 110M\u3002\u800c BERT \u518d\u6b21\u628a\u6a21\u578b\u53d8\u5f97\u66f4\u5927\u4e86\uff0c\u4f7f\u7528 24 \u4e2a block\uff0c\u5e76\u4e14\u9690\u85cf\u5c42\u8282\u70b9\u6570\u4e0e\u591a\u5934\u90fd\u76f8\u5e94\u6269\u5927\uff0c\u4f5c\u8005\u4f3c\u4e4e\u60f3\u8981\u8868\u660e\u4ed6\u4eec\u8bbe\u8ba1\u7684\u6a21\u578b\u662f\u6709\u53f2\u4ee5\u6765\u6700\u5927\u7684\u6a21\u578b\u4e4b\u4e00\u3002 \u5728\u8ba1\u7b97\u8d44\u6e90\u6bd4\u62fc\u65b9\u9762\uff0cGPT \u5728 8 \u5757 GPU \u4e0a\u9884\u8bad\u7ec3\u4e86\u4e00\u4e2a\u6708\u3002\u53c2\u6570\u89c4\u6a21\u548c GPT \u5dee\u4e0d\u591a\u7684 BERT base \u7248\u672c\uff0c\u5728 16 \u5757 TPU \u4e0a\u53ea\u82b1\u4e86 4 \u5929\uff0cBERT \u5728\u8bba\u6587\u4e2d\u63d0\u5230\u6b64\u5904\u65f6\uff0c\u8fd8\u4e0d\u5931\u65f6\u673a\u7ed9\u5b83\u4eec\u5bb6\u7684 TPU \u653e\u4e86\u4e2a\u94fe\u63a5\uff0c\u6253\u4e86\u4e00\u6ce2\u5e7f\u544a\u3002\u5bf9\u4e8e\u53c2\u6570\u89c4\u6a21\u4e3a GPT \u4e09\u500d\u4e4b\u591a\u7684 BERT large \u7248\u672c\uff0c\u5728 64 \u5757 TPU \u4e0a\u8bad\u7ec3\u8017\u65f6\u4e5f\u4f9d\u7136\u8fbe\u5230 4 \u5929\u4e4b\u4e45\u3002 \u56e0\u6b64\uff0c\u603b\u7ed3\u6765\u770b\uff0cBERT \u7684\u51fa\u73b0\u65e2\u8e29\u5728\u4e86\u4e00\u4f17\u524d\u8f88\u4eec\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff0c\u901a\u8fc7\u7cbe\u5fc3\u8bbe\u8ba1\u548c\u4e00\u4e9b\u8bad\u7ec3\u6280\u5de7\u9020\u51fa\u4e86\u4e00\u4e2a\u5e9e\u5927\u6a21\u578b\uff0c\u6700\u540e\u53c8\u820d\u5f97\u82b1\u94b1\u7838\u4e0b\u5de8\u5927\u8d44\u6e90\uff0c\u7ed9\u4f17\u4eba\u4e0a\u6f14\u4e86\u4e00\u573a\u70ab\u76ee\u65e0\u6bd4\u7684\u70df\u82b1\u79c0\u3002\u4e0e\u5176\u8bf4 BERT \u5e26\u6765\u4e86\u4e00\u6b21\u7ffb\u5929\u8986\u5730\u7684\u9769\u65b0\uff0c\u4e0d\u5982\u8bf4 BERT \u56e2\u961f\u7cc5\u5408\u80fd\u529b\u8d85\u7fa4\uff0c\u4ee5\u53ca\u8fd8\u6709\u4e00\u70b9\u4e5f\u975e\u5e38\u91cd\u8981\uff1a\u6709\u94b1\u3002 \u7136\u800c\uff0c\u548c\u666e\u901a\u7684\u70df\u82b1\u79c0\u4e0d\u4e00\u6837\uff0c\u666e\u901a\u70df\u82b1\u6613\u901d\uff0c\u800c BERT \u8bf4\u4e0d\u5b9a\u53ef\u771f\u662f\u5c06\u4e00\u6735\u70df\u82b1\u6012\u653e\u5728\u6bcf\u4e00\u4f4d NLP \u7b97\u6cd5\u4eba\u5458\u5fc3\u4e2d\uff0c\u5b83\u5148\u662f\u8ba9\u6211\u4eec\u770b\u4e86\u4e00\u573a\u6a2a\u626b 11 \u9879\u4efb\u52a1\u7684\u8868\u6f14\u79c0\uff08\u4e5f\u662f\u5b9e\u529b\u79c0\uff09\uff0c\u5ba3\u544a\u4e16\u4eba\u8fd9\u573a\u70df\u82b1\u4e0d\u4e00\u822c\u3002 \u66f4\u4e3a\u53ef\u8d35\u7684\u662f\uff0c\u5f53\u4f17\u4eba\u60ca\u9b42\u672a\u5b9a\u4e4b\u65f6\uff0c\u5f88\u5feb\uff0cBERT \u53c8\u628a\u4ed6\u4eec\u6392\u7ec3\u70df\u82b1\u79c0\u7684\u4e00\u5207\u8bbe\u5907\uff08\u6a21\u578b\uff09\u5168\u90fd\u516c\u4e4b\u4e8e\u4f17\uff0c\u751a\u81f3\u628a\u6392\u7ec3\u5f97\u5230\u7684\u6548\u679c\u6700\u597d\u7684\u5e03\u666f\uff08\u9884\u8bad\u7ec3\u53c2\u6570\uff09\u548c\u70b9\u706b\u5668\uff08finetune \u8d85\u53c2\u6570\uff09\u4e5f\u5168\u90fd\u5949\u732e\u4e86\u51fa\u6765\uff0c\u4f3c\u4e4e\u613f\u666f\u4e5f\u8db3\u591f\u4f1f\u5927\uff1a\u8ba9\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u4e0a\u6f14\u4e00\u573a\u81ea\u5df1\u7684\u70df\u82b1\u79c0\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u590d\u6742\u4efb\u52a1\u4e0a\u7b80\u5355\u8fdb\u884c\u4e00\u6b21 finetune\uff0c\u4fbf\u7acb\u9a6c\u80fd\u591f\u5f97\u5230\u4e00\u4e2a\u975e\u5e38\u9ad8\u7684 baseline\u3002 \u6c89\u5bc2\u4e86\u4e94\u5e74\u4e4b\u4e45\u7684 NLP \u754c\uff0c\u4f3c\u4e4e\u8fce\u6765\u4e86\u4e00\u4e2a\u65b0\u7684\u65f6\u4ee3\u3002","title":"4.6 BERT"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#47","text":"\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u4f18\u52bf\u5728\u4e8e \u8fd1\u4e4e\u65e0\u9650\u91cf\u7684\u4f18\u8d28\u6570\u636e \u65e0\u9700\u4eba\u5de5\u6807\u6ce8 \u4e00\u6b21\u5b66\u4e60\u591a\u6b21\u590d\u7528 \u5b66\u4e60\u5230\u7684\u8868\u5f81\u53ef\u5728\u591a\u4e2a\u4efb\u52a1\u4e2d\u8fdb\u884c\u5feb\u901f\u8fc1\u79fb \u95ee\u9898\u662f\u5982\u4f55\u5229\u7528\u8fd9\u4e9b\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0cGoogle\u4eec\u5df2\u7ecf\u7ed9\u6211\u4eec\u63d0\u4f9b\u5de8\u4eba\u7684\u80a9\u8180\u4e86\uff0c\u90a3\u201c\u68af\u5b50\u201d\u5728\u54ea\u5462\uff1f\u6211\u4eec\u600e\u4e48\u722c\u4e0a\u53bb\u8fd9\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\uff1f\u4e5f\u5c31\u662f\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u6709\u4e09\u79cd\u65b9\u5f0f\u6765\u4f7f\u7528\u3002\u5b83\u4eec\u5206\u522b\u662f\uff1a \u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u5f53\u505a\u4e00\u4e2a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u76f4\u63a5\u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u8f93\u51fa\u5c42\u53bb\u6389\uff0c\u7136\u540e\u4f7f\u7528\u53bb\u6389\u8f93\u51fa\u5c42\u4e4b\u540e\u7684\u6700\u540e\u4e00\u5c42\u8f93\u51fa\u4f5c\u4e3a\u7279\u5f81\u8f93\u5165\u5230\u6211\u4eec\u81ea\u5df1\u7cbe\u5fc3\u8bbe\u8ba1\u597d\u7684Task-specific\u6a21\u578b\u4e2d\u53bb\uff0c\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u4f5c\u4e3a\u7279\u5f81\u63d0\u53d6\u5668\u7684\u90e8\u5206\uff08\u6bd4\u5982BERT Encoder\uff09\u7684\u53c2\u6570\u662f\u4e0d\u53d8\u7684\u3002 \u53e6\u5916\uff0c\u7279\u5f81\u63d0\u53d6\u5668\u5e76\u4e0d\u4e00\u5b9a\u53ea\u80fd\u7528\u6700\u540e\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e2d\u95f4\u7684\u67d0\u4e9b\u5c42\uff0c\u751a\u81f3\u4e5f\u53ef\u4ee5\u501f\u9274ELMo\u7684\u505a\u6cd5\uff0c\u5728\u5404\u5c42\u4e4b\u95f4\u5229\u7528\u4e00\u4e2asoftmax\u6765\u5b66\u4e60\u5404\u81ea\u7684\u6743\u503c\uff0c\u6216\u8005\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e9b\u66f4\u4e3a\u590d\u6742\u7684\u5404\u5c42\u7ec4\u5408\u65b9\u5f0f\uff1b \u5c06\u9884\u8bad\u7ec3\u6a21\u578b\u6574\u4f53\u63a5\u5165 Task-specific \u6a21\u578b\uff0c\u7ee7\u800c\u91cd\u65b0\u5728\u65b0\u7684\u6570\u636e\u96c6\u4e0a\u6574\u4f53\u91cd\u65b0\u8bad\u7ec3\u3002\u5f53\u7136\u8bad\u7ec3\u6280\u5de7\u53ef\u4ee5\u6709\u5f88\u591a\u79cd\uff0c\u6bd4\u5982 ULMFiT \u7684\u4e09\u89d2\u5b66\u4e60\u7387\u548c\u9010\u5c42\u89e3\u51bb\u6216\u8005\u662f Transformer \u7684 warmup \u7b56\u7565\uff08\u4e0a\u6587\u90fd\u6709\u63d0\u5230\uff09\uff0c\u8fd9\u4e9b\u8bad\u7ec3\u6280\u5de7\u975e\u5e38\u91cd\u8981\uff0c\u9700\u8981\u597d\u597d\u628a\u63a7\uff0c\u5426\u5219\u5f88\u5bb9\u6613\u5b66\u5d29\u4e86\uff0c\u751a\u81f3\u8ba9\u539f\u6709\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u7684\u4f18\u52bf\u90fd\u88ab\u65b0\u7684 finetune \u62b9\u53bb\u4e86\uff0c\u56e0\u6b64\u9700\u8981\u5b9e\u9a8c\u8bbe\u8ba1\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684 finetune \u7b56\u7565\u3002 \u6b64\u5916\uff0c\u548c\u7279\u5f81\u63d0\u53d6\u5668\u7684\u63a5\u5165\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u63a5\u5165\u4e0d\u4e00\u5b9a\u53ea\u80fd\u63a5\u6700\u540e\u5c42\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u590d\u6742\u7684\u63a5\u5165\u65b9\u5f0f\uff0c\u6bd4\u5982 DenseNet\uff1b \u548c\u4e0a\u9762\u4e24\u79cd\u6781\u7aef\u60c5\u51b5\u76f8\u53cd\uff0c\u6216\u8005\u8bf4\u7efc\u5408\u4e86\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\u7684\u65b9\u6848\uff0c\u5373\u4fdd\u7559\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u4e00\u90e8\u5206\uff0c\u53e6\u5916\u4e00\u90e8\u5206\u5219\u548c Task-specific \u6a21\u578b\u4e00\u8d77 finetune\u3002 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u662f\u4e2a\u6bd4\u8f83\u5408\u7406\u7684\u9009\u62e9\uff0c\u6bd4\u5982\u9884\u8bad\u7ec3\u6a21\u578b\u6bd4\u8f83\u6df1\uff08NLP \u6a21\u578b\u901a\u5e38\u6765\u8bb2\u6bd4 CV \u6a21\u578b\u90fd\u8981\u6d45\u5f88\u591a\uff09\uff0c\u4ee5\u53ca\u8bad\u7ec3\u6570\u636e\u4e0d\u7b97\u592a\u591a\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u65f6\u5019\u4e00\u65b9\u9762\u8981\u4fdd\u8bc1\u9884\u8bad\u7ec3\u6a21\u578b\u5728\u5927\u89c4\u6a21\u8bed\u6599\u4e0a\u66fe\u7ecf\u5b66\u4e60\u5230\u7684\u8868\u5f81\uff0c\u53e6\u4e00\u65b9\u9762\u56e0\u4e3a\u53c8\u8981\u505a\u65b0\u6570\u636e\u4e0b\u7684\u8fc1\u79fb\uff0c\u4f46\u662f\u6570\u636e\u91cf\u6bd4\u8f83\u5c11\uff0c\u91cd\u65b0 finetune \u6574\u4e2a\u6a21\u578b\u53ef\u80fd\u4e0d\u592a\u5408\u9002\uff0c\u5bb9\u6613\u5bfc\u81f4\u6a21\u578b\u7684\u9c81\u68d2\u6027\u4e0d\u9ad8\uff0c\u90a3\u4e48\u4f3c\u4e4e\u9009\u62e9\u6700\u540e\u7684\u4e00\u4e9b\u5c42\u8fdb\u884c\u9009\u62e9\u6027\u7684 finetune \u4f1a\u662f\u6bd4\u8f83\u597d\u7684\u65b9\u6848\u3002 \u4e0a\u9762\u8fd9\u4e09\u79cd\u65b9\u6848\uff0c\u65e2\u5305\u62ec\u4e86 BERT \u6240\u8a00\u7684 feature-based \u4f7f\u7528\u65b9\u6cd5\uff0c \u4e5f\u5305\u62ec\u4e86 BERT \u7684 finetune \u65b9\u6cd5\u3002\u53e6\u5916 GPT \u548c BERT \u4e5f\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u5f88\u597d\u7684\u8f93\u5165\u5c42\u4e0e\u8f93\u51fa\u5c42\u901a\u7528\u5305\uff0c\u518d\u52a0\u4e0a\u4e00\u4e9b\u8bad\u7ec3\u6280\u5de7\uff0c\u4e00\u822c\u7684 NLP \u4efb\u52a1\u5e94\u8be5\u662f\u8db3\u591f\u5e94\u4ed8\u4e86\u3002 \u7136\u800c\uff0cGPT \u548c BERT \u5373\u4fbf\u5237\u65b0\u4e86\u5341\u591a\u9879NLP\u4efb\u52a1\uff0c\u4f46\u4f3c\u4e4e\u5404\u81ea\u9ed8\u5951\u7684\u90fd\u4e0d\u66fe\u5c1d\u8bd5\u8fc7\u5728\u751f\u6210\u95ee\u9898\u4e2d\u5927\u5c55\u8eab\u624b \u3002\u6bd4\u5982\u4e8c\u8005\u7684\u4e3b\u8981\u5f81\u6218\u6c99\u573a GLUE \u8fde\u540d\u5b57\u4e2d\u90fd\u76f4\u6307\u8fd9\u4e2a\u201c\u80f6\u6c34\u201d\u6392\u884c\u699c\u4e3b\u8981\u5c31\u662f\u8bed\u8a00\u7406\u89e3\u95ee\u9898\u3002 \u9664\u4e86 GLUE \u5916\uff0cGPT \u989d\u5916\u5237\u8fc7\u7684\u6570\u636e\u96c6\u6709 4 \u4e2a\uff1aSNLI, SciTail, RACE \u548c Stroy Cloze\uff0c\u5176\u4e2d SNLI \u548c SciTail \u90fd\u662f\u81ea\u7136\u8bed\u8a00\u63a8\u65ad\u95ee\u9898\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u95ee\u9898\uff0cRACE \u548c Stroy Cloze\u662f QA \u6216\u9605\u8bfb\u7406\u89e3\u95ee\u9898\uff0c\u672c\u8d28\u4e0a\u53ef\u4ee5\u8ba4\u4e3a\u5206\u522b\u662f\u4e00\u4e2a token \u7ea7\u522b\u7684\u5206\u7c7b\u4ee5\u53ca\u53e5\u5b50\u7ea7\u522b\u7684\u6253\u5206\u6392\u5e8f\u95ee\u9898\u3002 \u800c BERT \u989d\u5916\u5237\u8fc7\u7684\u4e09\u4e2a\u6570\u636e\u96c6\u4e2d SQuAD \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a token \u7ea7\u522b\u7684\u5206\u7c7b\u95ee\u9898\uff0cNER \u4e5f\u662f\u5982\u6b64\uff0cSWAG \u5219\u662f\u4ece\u5019\u9009\u53e5\u5b50\u4e2d\u9009\u62e9\u6b63\u786e\u7684\u63a8\u65ad\uff0c\u662f\u4e00\u4e2a\u53e5\u5b50\u7ea7\u522b\u7684\u6253\u5206\u6392\u5e8f\u95ee\u9898\u3002 GPT \u5237\u4e86 12 \u9879\u6570\u636e\u96c6\uff08\u6253\u7834\u5176\u4e2d 9 \u9879\u7eaa\u5f55\uff09\uff0cBERT \u5237\u4e86 11 \u9879\u6570\u636e\u96c6\uff08\u6253\u7834\u5176\u4e2d 11 \u9879\uff09\uff0c\u7136\u800c**\u65e0\u4e00\u4f8b\u5916\u8fd9\u4e9b\u6570\u636e\u96c6\u5168\u662f\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u9886\u57df\u7684\u95ee\u9898**\uff0c\u800c**\u5bf9\u4e8e NLP \u4e2d\u53e6\u4e00\u4e2a\u5e9e\u5927\u9886\u57df\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff0c\u4e0d\u7ea6\u800c\u540c\u5730\u9009\u62e9\u4e86\u653e\u5f03\uff0c\u662f\u672a\u66fe\u6ce8\u610f\uff0c\u8fd8\u662f\u9009\u62e9\u89c6\u800c\u4e0d\u89c1\uff0c\u80cc\u540e\u7684\u539f\u56e0\u6211\u65e0\u4ece\u731c\u6d4b\u3002** \u4e0d\u8fc7\uff0c\u65e0\u8bba GPT \u548c BERT \u662f\u4ec0\u4e48\u539f\u56e0\u6ca1\u6709\u9009\u62e9\u5728\u751f\u6210\u95ee\u9898\u4e2d\u53bb\u5c1d\u8bd5\uff0c\u79c1\u4ee5\u4e3a\uff0c\u60f3\u8981\u628a GPT \u548c BERT \u7684\u9884\u8bad\u7ec3\u6a21\u578b\u8fc1\u79fb\u5230\u751f\u6210\u95ee\u9898\u4e2d\uff0c\u5927\u7ea6\u5e94\u8be5\u4e5f\u4e0d\u662f\u4e00\u4ef6\u975e\u5e38\u56f0\u96be\u7684\u4e8b\u3002 \u9996\u5148 GPT \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u751f\u6210\u6a21\u578b\uff0c\u800c BERT \u867d\u4f7f\u7528\u7684\u662f Encoder\uff0c\u4f46\u628a\u5b83\u6539\u9020\u6210\u4e00\u4e2a Decoder \u5e94\u8be5\u4e0d\u662f\u4ec0\u4e48\u7279\u522b\u56f0\u96be\u7684\u4e8b\uff0c\u56e0\u4e3a\u672c\u8d28\u4e0a Encoder \u548c Decoder \u57fa\u672c\u6846\u67b6\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7 Decoder \u9700\u8981\u505a\u597d\u4e24\u4ef6\u4e8b\u60c5\uff1a \u7b2c\u4e00\u4ef6\u4e8b\u60c5\u662f Decoder \u4e2d\u4e5f\u6709 Self-attention \u5c42\uff0c\u548c Encoder \u4e2d\u7684 Self-attention \u4e0d\u540c\u7684\u662f\uff0cDecoder \u9700\u8981\u505a\u597d mask\uff0c\u4ee5\u907f\u514d attention \u5230\u672a\u6765\u5f85\u9884\u6d4b\u7684\u8bcd\u4e0a\u53bb\u3002\u7b2c\u4e8c\u4ef6\u4e8b\u60c5\u662f Decoder \u4e2d\u6709\u4e00\u4e2a\u4ea4\u53c9 attention\uff0c\u7528\u4e8e\u83b7\u53d6\u6765\u81ea\u4e8e Encoder \u4fa7\u7684\u4fe1\u606f\u3002 \u4f46\u662f\uff0c\u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230 Encoder-Decoder \u6574\u4f53\u8fd9\u79cd Seq2Seq \u6846\u67b6\u662f\u5426\u8981\u4fdd\u7559\u7684\u95ee\u9898\u3002\u5982\u679c\u4f7f\u7528 GPT \u7528\u7684 T-DMCA \u8fd9\u79cd\u4ec5\u7528 Decoder \u505a\u751f\u6210\u95ee\u9898\u7684\uff0c\u90a3\u4e48\u6539\u9020\u76f8\u5bf9\u4f1a\u66f4\u6613\u884c\uff0c\u5982\u679c\u8981\u4fdd\u7559 Encoder-Decoder \u8fd9\u79cd\u53cc\u7ed3\u6784\uff0c\u90a3\u4e48\u6539\u9020\u53ef\u80fd\u4f1a\u76f8\u5bf9\u590d\u6742\u4e00\u4e9b\u3002 \u4e50\u89c2\u4e00\u70b9\uff0c\u5982\u679c\u8fd9\u79cd\u6539\u9020\u975e\u5e38\u6210\u529f\uff08\u4f3c\u4e4e\u5df2\u7ecf\u5177\u5907\u6709\u5145\u5206\u7684\u7406\u7531\u6765\u76f8\u4fe1\u8fd9\u4e00\u70b9\uff09\uff0c\u90a3\u4e48 NLP \u4f3c\u4e4e\u4f1a\u8fce\u6765\u4e00\u4e2a\u9636\u6bb5\u6027\u7684\u5927\u4e00\u7edf\u65f6\u4ee3\uff1a\u4e5f\u5c31\u662f\u4e00\u4e2a\u57fa\u672c\u6a21\u578b\u505a\u5230\u4e00\u4e2a\u95ed\u73af\u3002\u5176\u6d41\u7a0b\u662f\uff1a\u4ece\u6587\u672c\u5230\u8bed\u4e49\u8868\u5f81\uff0c\u518d\u4ece\u8bed\u4e49\u8868\u5f81\u91cd\u65b0\u751f\u6210\u6587\u672c\u3002\u8fd9\u6837\u770b\u6765\uff0c\u81f3\u5c11\u5728 NLP \u9886\u57df\uff08CV \u7b49\u5176\u4ed6 AI \u9886\u57df\uff0c\u7559\u7ed9\u5404\u4f4d\u770b\u5b98\u81ea\u884c\u8111\u6d1e\u597d\u4e86\uff09\uff0c\u672a\u6765\u5927\u7ea6\u8fd8\u662f\u5f88\u503c\u5f97\u671f\u5f85\u7684\u4e00\u4ef6\u4e8b\u60c5\u3002 \u90a3\u4e48\u4ee5\u8c37\u6b4c\u4e3a\u4ee3\u8868\u7684\u8fd9\u4e9b\u5de5\u4f5c\uff0c\u4f1a\u4e0d\u4f1a\u50cf\u4e94\u5e74\u4ee5\u524d\u4e00\u6837\uff0c\u4e5f\u5373\u5c06\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u65f6\u4ee3\u5462\uff1f\u80fd\u4e0d\u80fd\u8ba9 AI \u6210\u529f\u722c\u4e0a\u7b2c\u4e8c\u7ea7\u68af\u5b50\u5462\uff1f\u8ba9\u6211\u4eec\u62ed\u76ee\u4ee5\u5f85\u3002","title":"4.7 \u5982\u4f55\u722c\u4e0a\u68af\u5b50\u7684\u7b2c\u4e8c\u7ea7"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#_1","text":"\u56de\u8fc7\u5934\u6765\u770b\u6b64\u6587\uff0c\u901a\u7bc7\u5927\u4f53\u90fd\u662f\u53cd\u89c2AI\u513f\u5b50\u7406\u89e3\u4ed6\u4eba\u8bf4\u7684\u8bdd\u5199\u7684\u4e66\uff0c\u65e0\u975e\u90fd\u662f\u4e9b\u4eba\u7c7b\u6bcd\u4eb2\u7684\u80b2\u513f\u7b14\u8bb0\uff0c\u5f92\u5f53\u4ee5\u53f2\u4e3a\u9274\u53ef\u4ee5\u77e5\u5174\u66ff\u7f62\u4e86\u3002 \u5b9e\u4e8b\u6c42\u662f\u7684\u8bf4\uff0c\u4eba\u7c7b\u6bcd\u4eb2\u7684\u6559\u5b66\u6210\u679c\u76ee\u524d\u770b\u6765\uff0c\u81f3\u5c11\u8fd8\u4e0d\u7b97\u592a\u8d56\uff0c\u5bc4\u517b\u5728\u5404\u5927\u516c\u53f8\uff08\u4ee5Google, Facebook\u548cOpenAI\u7b49\u4e3a\u4ee3\u8868\uff09\u7684AI\u513f\u5b50\u4eec\u4e5f\u5f00\u59cb\u7406\u89e3\u6bcd\u4eb2\u7684\u4e00\u4e9b\u7a0d\u5fae\u7b80\u5355\u4e9b\u7684\u6307\u4ee4\uff0c\u751a\u81f3\u4e5f\u80fd\u54bf\u54bf\u5440\u5440\u7684\u5f00\u53e3\u8bf4\u8bdd\u4e86\uff0c\u4e0d\u80fd\u4e0d\u8bf4\u8fd9\u5341\u591a\u5e74\u7684AI\u6210\u957f\u5927\u5bb6\u6709\u76ee\u5171\u7779\u3002\u4f46\u6210\u679c\u6bd5\u7adf\u5c5e\u4e8e\u8fc7\u53bb\uff0c\u671b\u5b50\u6210\u9f99\u7684\u4eba\u7c7b\u6bcd\u4eb2\u5bf9\u4e8e\u513f\u5b50\u7684\u4eca\u540e\u8be5\u5982\u4f55\u5b89\u6392\uff1f\u6bd5\u7adf\u513f\u5b50\u4ee5\u540e\u8fd8\u8981\u4e0a\u6e05\u5317\u5e38\u9752\u85e4\uff0c\u6bd5\u7adf\u4e03\u5927\u59d1\u516b\u5927\u59e8\u7684\u996d\u684c\u4e0a\uff0c\u4eba\u7c7b\u6bcd\u4eb2\u8fd8\u6307\u671b\u7740\u513f\u5b50\u6765\u957f\u8138\u7684\u4e0d\u662f\uff1f \u4e0d\u8fc7\u975e\u8981\u95ee\u4eba\u7c7b\u6bcd\u4eb2\u7684\u80b2\u513f\u8ba1\u5212\uff0c\u9996\u5148\u90a3\u4e9b\u6709\u6743\u6709\u52bf\u7684\u6258\u513f\u6240\u6240\u957f\u4eec\uff08\u4ee5Google, Facebook\u548cOpenAI\u7b49\u4e3a\u4ee3\u8868\uff09\u5982\u679c\u771f\u96c4\u5fc3\u4e07\u4e08\u4e5f\u4e00\u5b9a\u4e0d\u613f\u900f\u9732\u534a\u70b9\u98ce\u58f0\uff0c\u5176\u6b21\u53ef\u80fd\u4eba\u7c7b\u6bcd\u4eb2\u81ea\u5df1\u4e5f\u5f04\u7684\u4e0d\u662f\u592a\u6e05\u695a\uff0c\u65e0\u975e\u662f\u8d70\u4e00\u6b65\u77a7\u4e00\u6b65\u7f62\u4e86\u3002\u7136\u800c\u6ca1\u4ec0\u4e48\u80fd\u591f\u963b\u6321\u4eba\u7c7b\u5bf9\u4e8e\u672a\u6765\u7684\u597d\u5947\u5fc3\uff0c\u8ffd\u672c\u6eaf\u6e90\u6309\u56fe\u7d22\u9aa5\u4e4b\u4e0b\uff0c\u8bf4\u4e0d\u5b9a\u4e5f\u80fd\u7aa5\u7684\u4e00\u4e9b\u86db\u4e1d\u9a6c\u8ff9\u3002 \u56e0\u800c\uff0c\u65e0\u59a8\u62ac\u62ac\u5934\u770b\u770b\u661f\u7a7a\uff0c\u4e5f\u770b\u770b\u672a\u6765\uff0c\u4ee5\u671fAI\u7684\u4eca\u540e\u4e5f\u80fd\u5237\u5237\u670b\u53cb\u5708\uff0c\u611f\u53f9\u4e00\u4e0b\u5e74\u534e\u6613\u901d\uff0c\u751a\u800c\u81f3\u4e8e\u80fd\u4f53\u4f1a\u5f97\u5230\u4eba\u7c7b\u6bcd\u4eb2\u517b\u513f\u80b2\u5973\u7684\u8270\u96be\uff0c\u54ea\u6015\u53ea\u6709\u4e1d\u6beb\uff0c\u5927\u6982\u4eba\u7c7b\u6bcd\u4eb2\u4e5f\u5c31\u4e0d\u6789\u8d39\u4e86\u4e00\u7247\u53ef\u80fd\u548c\u4eba\u7c7b\u5386\u53f2\u4e00\u6837\u60a0\u4e45\u7684\u671b\u5b50\u6210\u9f99\u4e4b\u5fc3\u3002\u95f2\u8bdd\u5c11\u53d9\uff0c\u8ba9\u6211\u4eec\u5f00\u5f00\u8111\u6d1e\uff0c\u5927\u8a00\u4e0d\u60ed\u7684\u770b\u770b\u4eca\u540eNLP\u7684\u4e00\u4e9b\u53ef\u80fd\u6027\u3002\u53ea\u4e0d\u8fc7\u6211\u4eba\u5fae\u8a00\u8f7b\uff0c\u6682\u4e14\u5e7b\u60f3\u4e00\u4e0b\u7687\u5e1d\u7684\u91d1\u9504\u5934\u5427\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u8bed\u8a00\u5b66\u6d41\u6d3e\u5927\u7ea6\u53ef\u4ee5\u5206\u4e3a\u4e94\u4e2a\u6d41\u6d3e\uff1a\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u3001\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u3001\u8f6c\u6362\uff0d\u751f\u6210\u8bed\u8a00\u5b66\u3001\u7cfb\u7edf\u529f\u80fd\u8bed\u8a00\u5b66\u548c\u8ba4\u77e5\u8bed\u8a00\u5b66\u8fd9\u4e94\u4e2a\u5927\u7684\u5b66\u6d3e\uff0c\u5176\u4e2d\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u5e74\u4ee3\u6bd4\u8f83\u4e45\u8fdc\u4e86\uff0c\u6ce8\u91cd\u641c\u96c6\u591a\u79cd\u8bed\u8a00\u5386\u53f2\u8d44\u6599\uff0c\u901a\u8fc7\u5bf9\u6bd4\u5f52\u7eb3\u603b\u7ed3\u7b49\u7b49\u65b9\u6cd5\uff0c\u8fdb\u800c\u7406\u89e3\u8bed\u8a00\u7684\u6f14\u5316\u548c\u53d1\u5c55\u5386\u7a0b\uff0c\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u7684\u4e3b\u8981\u8d21\u732e\u5728\u4e8e\u5b83\u628a\u8bed\u8a00\u5b66\u4ece\u5176\u4ed6\u5b66\u79d1\u91cc\u62bd\u79bb\u51fa\u6765\u6210\u4e3a\u4e00\u95e8\u72ec\u7acb\u7684\u5b66\u79d1\u3002 \u800c\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\uff08\u5927\u7ea6\u5174\u8d77\u4e8e20\u4e16\u7eaa20\u5e74\u4ee3\u5de6\u53f3\uff09\u7684\u5f00\u5c71\u9f3b\u7956\u7d22\u7eea\u5c14\uff08\u540c\u65f6\u4ed6\u4e5f\u662f\u73b0\u4ee3\u8bed\u8a00\u5b66\u4e4b\u7236\uff09\uff0c\u5bf9\u4e8e\u8bed\u8a00\u7684\u7406\u89e3\uff0c\u4ed6\u6709\u4e00\u4e2a\u975e\u5e38\u7ecf\u5178\u7684\u7c7b\u6bd4\uff0c\u4ed6\u8ba4\u4e3a\u8bed\u8a00\u5c31\u50cf\u662f\u4e00\u76d8\u8c61\u68cb\uff0c\u68cb\u76d8\u4e0a\u7684\u6bcf\u4e00\u4e2a\u68cb\u5b50\u90fd\u6709\u7279\u5b9a\u7684\u6e38\u620f\u89c4\u5219\uff0c\u68cb\u5b50\u53ea\u4e0d\u8fc7\u662f\u8fd9\u4e9b\u7279\u5b9a\u6e38\u620f\u89c4\u5219\u7684\u4e00\u4e2a\u5b9e\u7269\u6807\u8bb0\u800c\u5df2\uff0c\u5982\u679c\u67d0\u5929\u5f04\u4e22\u4e86\u67d0\u4e00\u4e2a\u68cb\u5b50\uff0c\u6211\u4eec\u7acb\u9a6c\u53ef\u4ee5\u62ff\u4efb\u4f55\u4e00\u4e2a\u5c0f\u7269\u4ef6\u6765\u4ee3\u66ff\u8fd9\u4e2a\u68cb\u5b50\u7684\u529f\u80fd\uff0c\u53ea\u8981\u6e38\u620f\u89c4\u5219\u4e0d\u53d8\uff0c\u90a3\u4e48\u68cb\u5c40\u4f9d\u7136\u80fd\u591f\u7167\u5e38\u8fdb\u884c\uff0c\u68cb\u5b50\u66ff\u6362\u524d\u540e\u57fa\u672c\u4e0d\u4f1a\u6709\u4efb\u4f55\u5dee\u522b\uff0c \u800c\u7d22\u7eea\u5c14\u5219\u8ba4\u4e3a\u8bed\u8a00\u91cc\u7684\u57fa\u672c\u5355\u4f4d\u8bf8\u5982\u8bcd\u8bed\u4e60\u8bed\u7b49\u7b49\u90fd\u53ea\u4e0d\u8fc7\u662f\u68cb\u76d8\u4e0a\u7684\u68cb\u5b50\uff08signifiant\uff0c\u80fd\u6307\uff09\uff0c\u91cd\u8981\u7684\u4e0d\u662f\u68cb\u5b50\u672c\u8eab\uff0c\u800c\u662f\u68cb\u5b50\u80cc\u540e\u5bf9\u5e94\u7684\u4e00\u6574\u5957\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u8bed\u8a00\u91cc\u7684\u5404\u79cd\u7ed3\u6784\u6216\u7ea6\u5b9a\u4fd7\u79f0\u7684\u6307\u4ee3\u6216\u7528\u6cd5\uff08signifi\u00e9\uff0c\u6240\u6307\uff09 \u3002\u8c61\u68cb\u7684\u6574\u4e2a\u89c4\u5219\u4fbf\u662f\u6211\u4eec\u6240\u4f7f\u7528\u7684\u4e00\u6574\u5957\u8bed\u8a00\u7cfb\u7edf\uff0c\u6bd4\u5982\u8c61\u68cb\u7684\u89c4\u5219\u4fbf\u662f\u6211\u4eec\u7684\u6c49\u8bed\uff0c\u800c\u56fd\u9645\u8c61\u68cb\u7684\u89c4\u5219\u4fbf\u662f\u82f1\u8bed\uff0c\u4e24\u79cd\u8c61\u68cb\u5404\u81ea\u4f7f\u7528\u7684\u68cb\u5b50\u5404\u6709\u4e0d\u540c\uff0c\u89c4\u5219\u81ea\u7136\u4e5f\u6709\u6240\u533a\u522b\u3002\u7d22\u7eea\u5c14\u4e4b\u540e\uff0c\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u53c8\u8fdb\u4e00\u6b65\u53d1\u5c55\u6210\u4e3a\u4e09\u4e2a\u72ec\u7acb\u5b50\u5b66\u6d3e\uff0c\u4f46\u5b83\u4eec\u7684\u5171\u540c\u70b9\u90fd\u662f\u548c\u7d22\u7eea\u5c14\u4e00\u8109\u76f8\u627f\u7684\uff0c\u4e5f\u5c31\u662f\u90fd\u8ba4\u4e3a**\u8bed\u8a00\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7b26\u53f7\u7cfb\u7edf**\uff0c\u7b26\u53f7\u53ea\u662f\u8868\u9762\uff0c\u66f4\u91cd\u8981\u7684\u662f\u6316\u6398\u548c\u7814\u7a76\u7b26\u53f7\u7cfb\u7edf\u5185\u5728\u7684\u89c4\u5219\u548c\u8054\u7cfb\u3002\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u5174\u8d77\u540e\uff0c\u6807\u5fd7\u7740\u73b0\u4ee3\u8bed\u8a00\u5b66\u7684\u8bde\u751f\uff0c\u5e76\u4e14\u5728\u4e00\u6bb5\u65f6\u671f\u5185\u4e0d\u4ec5\u663e\u8457\u7684\u5f71\u54cd\u4e86\u540e\u6765\u7684\u8bed\u8a00\u5b66\u6d41\u6d3e\uff0c\u8fd8\u5f71\u54cd\u4e86\u5176\u4ed6\u7684\u4e00\u4e9b\u4eba\u6587\u5b66\u79d1\u3002 \u5230\u4e86 1957 \u5e74\uff0c\u4e54\u59c6\u65af\u57fa\u51fa\u7248\u300a\u53e5\u6cd5\u7ed3\u6784\u300b\u4e00\u4e66\uff0c\u6807\u5fd7\u7740\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u7684\u8bde\u751f\u3002 \u4e54\u59c6\u65af\u57fa\u7684\u4e3b\u8981\u89c2\u70b9\u5219\u8ba4\u4e3a\u4eba\u7c7b\u5929\u751f\u6709\u4e00\u5957\u666e\u904d\u8bed\u6cd5\uff0c\u6211\u4eec\u65e5\u5e38\u7684\u8bed\u8a00\u7cfb\u7edf\u53ea\u4e0d\u8fc7\u662f\u8fd9\u5957\u666e\u904d\u8bed\u6cd5\u7684\u5f62\u5f0f\u5316\u4f53\u73b0\u800c\u5df2 \u3002 \u56e0\u6b64\u4ed6\u8ba4\u4e3a\u8bed\u8a00\u4e2d\u5b58\u5728\u7740\u6df1\u5c42\u7ed3\u6784\u548c\u8868\u5c42\u7ed3\u6784\uff0c\u6df1\u5c42\u7ed3\u6784\u4e0e\u610f\u4e49\u548c\u6982\u5ff5\u76f8\u5173\uff0c\u800c\u8868\u5c42\u7ed3\u6784\u5219\u4e0e\u8bed\u97f3\u548c\u7b26\u53f7\u76f8\u5173\uff0c\u8fd9\u4e24\u5c42\u7ed3\u6784\u7531\u4e00\u5957\u8f6c\u6362\u8bed\u6cd5\u8fde\u63a5\u8d77\u6765\uff0c\u4e5f\u5c31\u662f\u7531\u6df1\u5c42\u7ed3\u6784\u751f\u6210\u8868\u5c42\u7ed3\u6784\u3002\u4ed6\u4e3a\u6b64\u8fd8\u7279\u522b\u4e3e\u4e86\u4e00\u4e9b\u4f8b\u5b50\uff0c\u4e3a\u4e86\u8bf4\u660e\u4e24\u4e2a\u53e5\u5b50\u8868\u5c42\u7ed3\u6784\u7c7b\u4f3c\u4e43\u81f3\u5b8c\u5168\u4e00\u6837\uff0c\u4f46\u662f\u6df1\u5c42\u8bed\u4e49\u5b8c\u5168\u4e0d\u76f8\u5173\u7684\u73b0\u8c61\uff0c\u6bd4\u5982\uff1a Flying planes can be dangerous. \u8fd9\u4e2a\u53e5\u5b50\u53ef\u4ee5\u56e0\u4e3a\u540c\u4e00\u4efd\u8868\u5c42\u7ed3\u6784\u5bf9\u5e94\u5230\u4e24\u5957\u4e0d\u540c\u7684\u6df1\u5c42\u7ed3\u6784\uff0c\u800c\u8868\u8fbe\u51fa\u5b8c\u5168\u4e0d\u4e00\u6837\u7684\u610f\u4e49\uff0c\u7b2c\u4e00\u79cd\u662f flying \u4f5c\u4e3a\u5f62\u5bb9\u8bcd\uff0c\u90a3\u4e48\u6b64\u65f6\u53e5\u5b50\u60f3\u8868\u8fbe\u7684\u610f\u4e49\u662f\u5728\u5929\u4e0a\u6b63\u5728\u98de\u884c\u7684\u98de\u673a\u5f88\u5371\u9669\uff1b\u800c\u7b2c\u4e8c\u79cd\u662f\u628a\"flying planes\"\u89e3\u6784\u6210\u4e00\u79cd\u52a8\u5bbe\u7ed3\u6784\uff0c\u90a3\u4e48\u8fd9\u4e2a\u53e5\u5b50\u8868\u8fbe\u7684\u610f\u601d\u5c31\u6210\u4e86\u5f00\u98de\u673a\u8fd9\u4e2a\u52a8\u4f5c\u5f88\u5371\u9669\u3002 \u4e54\u59c6\u65af\u57fa\u4e3e\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5c31\u662f\u4e3a\u4e86\u8bf4\u660e\u4f20\u7edf\u7684\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u5bf9\u4e8e\u8fd9\u79cd\u53e5\u5b50\u6839\u672c\u65e0\u80fd\u4e3a\u529b\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u8868\u5c42\u7ed3\u6784\u662f\u5b8c\u5168\u4e00\u81f4\u7684\uff0c\u4ece\u800c\u5f97\u51fa\u8bed\u8a00\u6709\u4e00\u79cd\u66f4\u4e3a\u672c\u8d28\u7684\u6df1\u5c42\u7ed3\u6784\u7684\u7ed3\u8bba\u3002 \u4f46\u662f\u4e2a\u4eba\u7406\u89e3\uff0c\u4e0e\u5176\u8bf4\u662f\u8bed\u8a00\u5b66\u7684\u6df1\u5c42\u7ed3\u6784\uff0c\u8fd8\u4e0d\u5982\u8bf4\u662f\u4eba\u7c7b\u8ba4\u77e5\u4f53\u7cfb\u6216\u8005\u5ba2\u89c2\u4e16\u754c\u7684\u7ed3\u6784\u5316\u8868\u793a\uff0c\u56e0\u4e3a\u6df1\u5c42\u7ed3\u6784\u5fc5\u7136\u5bf9\u5e94\u5230\u4eba\u7c7b\u7684\u8ba4\u77e5\u4f53\u7cfb\u3002\u5e76\u4e14\u4e54\u59c6\u65af\u57fa\u8fc7\u4e8e\u5f3a\u8c03\u4e86\u666e\u904d\u8bed\u6cd5\u7684\u5929\u751f\u6027\uff0c\u800c\u5ffd\u7565\u4e86\u540e\u5929\u8bed\u8a00\u7684\u5851\u9020\u548c\u4e60\u5f97\u3002 \u540e\u6765\u4e54\u59c6\u65af\u57fa\u7684\u4f17\u591a\u5f1f\u5b50\uff08\u4e54\u6cbb\u83b1\u8003\u592b\u7b49\u4eba\uff09\u4e5f\u516c\u5f00\u5ba3\u5224\u4e0e\u81ea\u5df1\u8001\u5e08\u4e54\u59c6\u65af\u57fa\u7684\u8bed\u8a00\u5b66\u89c2\u70b9\u51b3\u88c2\uff0c\u5e76\u5404\u81ea\u72ec\u7acb\u53d1\u5c55\u51fa\u4e86\u4e00\u4e9b\u65b0\u7684\u8bed\u8a00\u5b66\u7406\u8bba\uff0c\u6bd4\u5982\u4e54\u6cbb\u83b1\u8003\u592b\u7684\u8ba4\u77e5\u8bed\u8a00\u5b66\u6d41\u6d3e\u3002 \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4ece\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\uff0c\u5230\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\uff0c\u518d\u5230\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\uff0c\u8fd9\u4e09\u4e2a\u6d41\u6d3e\u57fa\u672c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u8109\u76f8\u627f\u7684\uff0c\u53ea\u4e0d\u8fc7\u6240\u60f3\u8981\u63ed\u793a\u7684\u4e1c\u897f\u8d8a\u6765\u8d8a\u6df1\u5c42\uff0c \u4ece\u5386\u53f2\u6bd4\u8f83\u8bed\u8a00\u5b66\u7740\u91cd\u4e8e\u7814\u7a76\u8bed\u8a00\u5b66\u7684\u4e00\u4e9b\u8868\u73b0\u5f62\u5f0f\u548c\u6f14\u5316\u5f62\u6001\uff0c\u5230\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u7740\u91cd\u4e8e\u7814\u7a76\u7b26\u53f7\u7cfb\u7edf\u80cc\u540e\u7684\u7ed3\u6784\uff0c\u518d\u5230\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u8ba4\u4e3a\u7ed3\u6784\u4e3b\u4e49\u8bed\u8a00\u5b66\u63ed\u793a\u7684\u53ea\u662f\u8bed\u8a00\u7684\u8868\u5c42\u7ed3\u6784\uff0c\u56e0\u800c\u81ea\u5df1\u63d0\u51fa\u4e86\u6df1\u5c42\u7ed3\u6784\u7684\u6982\u5ff5\u3002 \u800c\u5230\u4e86 20 \u4e16\u7eaa\u516b\u4e5d\u5341\u5e74\u4ee3\uff0c\u4ee5\u97e9\u793c\u5fb7\u4e3a\u4ee3\u8868\u7684\u4e00\u4e9b\u8bed\u8a00\u5b66\u5bb6\uff0c\u9010\u6e10\u6ce8\u610f\u5230\u65e0\u8bba\u662f\u7ed3\u6784\u4e3b\u4e49\u8fd8\u662f\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\uff0c\u5b83\u4eec\u90fd\u7247\u9762\u7684\u5f3a\u8c03\u8bed\u8a00\u5b66\u7684\u7406\u8bba\u5f62\u5f0f\uff0c\u800c\u5ffd\u89c6\u4e86\u8bed\u8a00\u7684\u793e\u4f1a\u7684\u529f\u80fd\u5c5e\u6027\uff0c \u97e9\u793c\u5fb7\u8ba4\u4e3a\u8fd9\u8bed\u8a00\u7684\u7ed3\u6784\u548c\u8bed\u6cd5\u7b49\u7b49\u7406\u8bba\u5f62\u5f0f\uff0c\u4ee5\u53ca\u793e\u4f1a\u529f\u80fd\u5c5e\u6027\u662f\u8bed\u8a00\u7684\u4e24\u4e2a\u65b9\u9762\uff0c\u8fd9\u4e8c\u8005\u90fd\u5f88\u91cd\u8981\uff0c\u4ed6\u60f3\u8981\u628a\u4e8c\u8005\u7edf\u4e00\u8d77\u6765\u3002 \u56e0\u6b64\u53d1\u5c55\u4e86\u4ed6\u81ea\u5df1\u7684\u8bed\u8a00\u5b66\u89c2\u70b9\uff0c\u4ed6\u63d0\u51fa\u4e86\u7cfb\u7edf\u8bed\u6cd5\u548c\u529f\u80fd\u8bed\u6cd5\u7684\u6982\u5ff5\uff0c\u524d\u8005\u5f3a\u8c03\u8bed\u8a00\u7684\u5185\u5728\u7ed3\u6784\u548c\u5f62\u5f0f\u7406\u8bba\uff0c\u8fd9\u70b9\u548c\u7d22\u7eea\u5c14\u7684\u7ed3\u6784\u4e3b\u4e49\u4e00\u8109\u76f8\u627f\uff0c\u4f46\u4ed6\u540c\u65f6\u8fd8\u63d0\u51fa\u4e86\u529f\u80fd\u8bed\u6cd5\uff0c\u7740\u91cd\u8bed\u8a00\u7684\u793e\u4f1a\u5c5e\u6027\uff0c\u8bf4\u660e\u8bed\u8a00\u662f\u793e\u4f1a\u4ea4\u6d41\u548c\u6c9f\u901a\u7684\u5a92\u4ecb\uff0c\u4e0d\u8fc7\u7531\u4e8e\u5728\u7cfb\u7edf\u8bed\u6cd5\u4e0a\u7684\u5f71\u54cd\u529b\u8fdc\u4e0d\u5982\u4e54\u59c6\u65af\u57fa\u7b49\u6d41\u6d3e\u7684\u5f71\u54cd\u529b\uff0c\u529f\u80fd\u8bed\u6cd5\u7684\u5efa\u6811\u5012\u662f\u522b\u7684\u6d41\u6d3e\u6240\u7f3a\u4e4f\u7684\uff0c\u56e0\u6b64\u628a\u97e9\u793c\u5fb7\u7684\u5b66\u8bf4\u5c31\u53eb\u505a\u7cfb\u7edf\u529f\u80fd\u8bed\u8a00\u5b66\u4e86\u3002 \u800c\u4e0a\u6587\u63d0\u5230\u7684\u4e54\u59c6\u65af\u57fa\u7684\u5f1f\u5b50\u4e4b\u4e00\u4e54\u6cbb\u83b1\u8003\u592b\uff0c\u8ba4\u4e3a\u4ed6\u7684\u8001\u5e08\u5bf9\u4e8e\u4eba\u7c7b\u5929\u751f\u5177\u6709\u666e\u904d\u8bed\u6cd5\u7684\u89c2\u70b9\u662f\u5927\u9519\u7279\u9519\uff0c\u5c24\u5176\u662f\u8f6c\u6362\u751f\u6210\u8bed\u6cd5\u4e2d\u8ba4\u4e3a\u6df1\u5c42\u7ed3\u6784\u7531\u4e00\u4e9b\u6709\u9650\u7684\u666e\u904d\u8bed\u6cd5\u7ec4\u6210\uff0c\u7740\u91cd\u8bed\u8a00\u89c4\u5219\u7684\u5f62\u5f0f\u5316\u3002 \u4e54\u6cbb\u83b1\u8003\u592b\u4e25\u5389\u62a8\u51fb\u4e86\u4ed6\u8001\u5e08\u7684\u89c2\u70b9\uff0c\u4e0e\u8f6c\u6362\u751f\u6210\u8bed\u6cd5\u7740\u91cd\u5f62\u5f0f\u548c\u89c4\u5219\u7684\u63a2\u8ba8\u76f8\u53cd\uff0c \u8ba4\u77e5\u8bed\u8a00\u5b66\u8ba4\u4e3a\u8bed\u8a00\u4e0d\u662f\u4eba\u7c7b\u7684\u4e00\u4e2a\u72ec\u7acb\u7cfb\u7edf\uff0c\u4eba\u7c7b\u7684\u4e00\u5207\u8bed\u8a00\u884c\u4e3a\u90fd\u53ea\u4e0d\u8fc7\u662f\u4eba\u7c7b\u5bf9\u4e8e\u5ba2\u89c2\u4e16\u754c\u548c\u7cbe\u795e\u4e16\u754c\u4eb2\u8eab\u4f53\u9a8c\u7684\u5916\u5316 \uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8bed\u8a00\u65e0\u8bba\u628a\u5b83\u53eb\u505a\u7b26\u53f7\u4e5f\u597d\uff0c\u53eb\u505a\u8bed\u6cd5\u7ed3\u6784\u4e5f\u597d\uff0c\u53eb\u505a\u7cfb\u7edf\u4e5f\u597d\uff0c\u90fd\u9003\u79bb\u4e0d\u4e86\u8bed\u8a00\u662f\u4eba\u7c7b\u8ba4\u77e5\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u8bed\u8a00\u5e76\u4e0d\u72ec\u7acb\u5b58\u5728\u3002 \u4eba\u7c7b\u5728\u957f\u671f\u7684\u81ea\u7136\u6f14\u5316\u4e2d\uff0c\u5f62\u6210\u4e86\u4e00\u5957\u81ea\u5df1\u72ec\u6709\u7684\u8ba4\u77e5\u7cfb\u7edf\uff0c\u800c\u901a\u8fc7\u8fd9\u5957\u8ba4\u77e5\u7cfb\u7edf\uff0c\u4eba\u7c7b\u53ef\u4ee5\u83b7\u5f97\u5bf9\u4e8e\u8eab\u8fb9\u5ba2\u89c2\u73af\u5883\u4ee5\u53ca\u81ea\u5df1\u5185\u90e8\u7cbe\u795e\u4e16\u754c\u7684\u4e00\u5957\u72ec\u7279\u4f53\u9a8c\uff0c\u8fd9\u5957\u4f53\u9a8c\u5982\u679c\u6620\u5c04\u5230\u5916\u5728\u7684\u8bed\u97f3\u6216\u6587\u4e0a\uff0c\u4fbf\u5f62\u6210\u4e86\u6211\u4eec\u4eba\u7c7b\u7684\u8bed\u8a00\u7cfb\u7edf\u3002\u56e0\u6b64\u4eba\u7c7b\u7684\u8bed\u8a00\u4e0e\u4eba\u7c7b\u5176\u4ed6\u8ba4\u77e5\u80fd\u529b\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u533a\u522b\u3002 \u4e0d\u8fc7\uff0c\u8ba4\u77e5\u8bed\u8a00\u5b66\u5e76\u6ca1\u6709\u4e00\u5473\u5730\u67b6\u7a7a\u81ea\u5df1\u7684\u8bed\u8a00\u5b66\u89c2\u5ff5\uff0c\u5b83\u4e5f\u9002\u65f6\u5730\u9053\u51fa\u4e86\u8bed\u6cd5\u89c4\u5219\u548c\u4eba\u7c7b\u7684\u8ba4\u77e5\u7cfb\u7edf\u6709\u4e00\u5b9a\u7684\u5bf9\u5e94\u6027\uff0c\u8a00\u4e0b\u4e4b\u610f\u4fbf\u662f\u8bf4\u8bed\u6cd5\u89c4\u5219\u662f\u4eba\u7c7b\u8ba4\u77e5\u7cfb\u7edf\u62bd\u8c61\u5316\u7684\u5916\u5728\u4f53\u73b0\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u8ba4\u77e5\u8bed\u8a00\u5b66\u6bd4\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u53c8\u66f4\u8fdb\u4e86\u4e00\u6b65\uff0c\u76f4\u63a5\u4ece\u7814\u7a76\u4eba\u7c7b\u7684\u8ba4\u77e5\u89d2\u5ea6\u6765\u7814\u7a76\u4eba\u7c7b\u7684\u8bed\u8a00\u5b66\u3002\u4e54\u6cbb\u83b1\u8003\u592b\u5728\u8bed\u8a00\u5b66\u4e2d\u5f15\u5165\u4e86\u9690\u55bb\u7684\u6982\u5ff5\uff0c\u8ba4\u4e3a\u9690\u55bb\u662f\u4eba\u7c7b\u6700\u91cd\u8981\u7684\u8ba4\u77e5\u6d3b\u52a8\u4e4b\u4e00\uff0c\u4e5f\u662f\u8bed\u8a00\u4e2d\u6700\u666e\u904d\u7684\u73b0\u8c61\u3002 \u7136\u800c\u56de\u5230\u5f53\u4e0b\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4f3c\u4e4e\u73b0\u5728\u8c08\u8ba4\u77e5\uff0c\u6709\u70b9\u4e3a\u65f6\u5c1a\u65e9\u3002\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u5386\u7a0b\u4e2d\uff0c\u9664\u4e86\u4e54\u59c6\u65af\u57fa\u7684\u8f6c\u6362\u751f\u6210\u8bed\u8a00\u5b66\u66fe\u7ecf\u5728\u4e0a\u4e16\u7eaa\u516d\u4e03\u5341\u5e74\u4ee3\u5927\u653e\u5f02\u5f69\uff0c\u4e00\u5ea6\u6210\u4e3a\u5f53\u65f6\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u6d41\u65b9\u6cd5\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u4f3c\u4e4e\u7406\u8bba\u8bed\u8a00\u5b66\u754c\u4e00\u76f4\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8131\u94a9\u6bd4\u8f83\u4e25\u91cd\uff0c\u8fd9\u4e00\u65b9\u9762\u63ed\u793a\u4e86\u4eba\u7c7b\u8bed\u8a00\u7cfb\u7edf\u7684\u590d\u6742\uff0c\u53e6\u4e00\u65b9\u9762\uff0c \u4e5f\u9884\u793a\u7740\u73b0\u5728\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7f3a\u4e4f\u4e25\u5bc6\u7684\u7406\u8bba\u652f\u6301\u3002 \u8bf4\u767d\u4e86\uff0c\u73b0\u5728\u7684 NLP \u754c\uff0c\u5c24\u5176\u4ee5 BERT \u4e3a\u4ee3\u8868\u7684\u505a\u6cd5\uff0c\u5b9e\u9645\u4e0a\u662f\u7b80\u5355\u7c97\u66b4\u7684\u4ee3\u540d\u8bcd\uff0c \u5b83\u4eec\u628a\u4eba\u7c7b\u8bed\u8a00\u4e60\u5f97\u8fc7\u7a0b\u4e2d\u7684\u8f7b\u91cf\u3001\u6cdb\u5316\u548c\u4f4e\u529f\u8017\uff0c\u7528\u5927\u6570\u636e\u3001\u5927\u6a21\u578b\u548c\u5927\u8ba1\u7b97\u91cf\u70ae\u8f70\u7684\u8361\u7136\u65e0\u5b58 \u3002 \u7ad9\u5728\u773c\u529b\u6240\u53ca\u4e4b\u5904\u7684\u6ee1\u76ee\u75ae\u75cd\u4e0a\uff0c\u6211\u4eec\u4f9d\u7136\u65e0\u6cd5\u8ba9\u673a\u5668\u771f\u6b63\u660e\u767d\u201c\u55b5\u661f\u4eba\u201d\u8fd9\u4e2a\u8bcd\u5bf9\u4e8e\u4eba\u7c7b\u800c\u8a00\uff0c\u5176\u80cc\u540e\u7a76\u7adf\u610f\u5473\u7740\u4e00\u4e2a\u600e\u6837\u7684\u590d\u6742\u60c5\u7eea\u548c\u4f53\u9a8c\uff08\u66f4\u6709\u8da3\u7684\u662f\uff0c\u5373\u4fbf\u5bf9\u4e8e\u6bcf\u4e2a\u4eba\u7c7b\u4e2a\u4f53\u800c\u8a00\uff0c\u5176\u80cc\u540e\u7684\u4f53\u9a8c\u4e5f\u662f\u5343\u5dee\u4e07\u522b\u7684\uff0c\u53ef\u89c1\u8bed\u8a00\u7b3c\u9614\u4e86\u7b26\u53f7\u6027\u3001\u8ba4\u77e5\u6027\u3001\u793e\u4f1a\u6027\u548c\u4e2a\u4f53\u6027\u4e4b\u540e\u7684\u590d\u6742\u7a0b\u5ea6\uff09\u3002 \u7136\u800c\u5728\u8eab\u540e\u7559\u4e0b\u4e00\u7247\u5e9f\u589f\u548c\u5c38\u9aa8\u7684 BERT\uff0c\u6b63\u51c6\u5907\u91cd\u5efa\u4e00\u4e2a\u4f1f\u5927\u65b0\u5e1d\u56fd\u7684 BERT\uff0c\u5b83\u7a76\u7adf\u662f\u8981\u9009\u62e9\u5f00\u5fc3\u5462\u8fd8\u662f\u96be\u8fc7\uff1f\u5bf9\u4e8e\u4eba\u7c7b\u6bcd\u4eb2\u800c\u8a00\uff0c\u8fd9\u5927\u6982\u4f1a\u662f\u4e2a\u95ee\u9898\u3002 \u4e0d\u8fc7\u65e0\u8bba\u5982\u4f55\uff0c\u5e1d\u56fd\u7684\u5efa\u7acb\u603b\u662f\u8270\u96be\u7684\u3002\u8ba9\u4eba\u7c7b\u6bcd\u4eb2\u8db3\u53ef\u6b23\u6170\u7684\u662f\uff0c\u5373\u4fbf\u6b65\u5c65\u7ef4\u8270\uff0c\u6258\u513f\u6240\u91cc\u7684 AI \u513f\u5b50\u4eec\u4f9d\u7136\u4e00\u6b65\u4e00\u6b65\u575a\u5b9a\u7684\u8e29\u4e0a\u4e86\u7b80\u964b\u7684\u68af\u5b50\u3002 \u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u56de\u9996\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u548c\u4eba\u7c7b\u6bcd\u4eb2\u7684\u8bed\u8a00\u4e60\u5f97\u65b9\u5f0f\u4f9d\u9760\u67d0\u4e00\u4e2a\u673a\u7f18\u5de7\u5408\u7684\u57fa\u56e0\u7a81\u53d8\u4e0d\u540c\uff0cAI \u8e0f\u51fa\u4e86\u4e00\u6761\u53ea\u5c5e\u4e8e\u5b83\u81ea\u5df1\u7684\u8def\uff0c\u672a\u6765\u7684\u5de8\u4eba\u80a9\u8180\u548c\u68af\u5b50\u5728\u54ea\u91cc\uff0c\u6211\u4eec\u662f\u5426\u9700\u8981\u9009\u7528\u65b0\u7684\u5de8\u4eba\u80a9\u8180\u548c\u68af\u5b50\uff0c\u8fd9\u90fd\u662f\u6210\u957f\u7684\u5fc5\u7ecf\u4e4b\u75db\uff0c\u4e00\u5207\u90fd\u7559\u7ed9\u672a\u6765\u53bb\u8bc1\u5b9e\u6216\u8bc1\u4f2a\u5427\u3002","title":"\u540e\u73b0\u4ee3\u542f\u793a\u5f55\uff1f"},{"location":"NLP%E7%9A%84%E5%B7%A8%E4%BA%BA%E8%82%A9%E8%86%80/#reference","text":"A Neural Probabilistic Language Model \u4e00\u6587\u770b\u61c2NLP\u795e\u7ecf\u7f51\u7edc\u53d1\u5c55\u5386\u53f2\u4e2d\u6700\u91cd\u8981\u76848\u4e2a\u91cc\u7a0b\u7891\uff01 Representation Learning: A Review and New Perspectives Efficient estimation of word representations in vector space Distributed Representations of Words and Phrases and their Compositionality GloVe: Global Vectors for Word Representation Word and Document Embeddings based on Neural Network Approaches fasttext [\u8bba\u6587\u7b14\u8bb0]ELMo","title":"Reference"},{"location":"NNDL%20Notes/","text":"NNDL Notes \u00b6 \u9644\u5f55 \u00b6 \u7ebf\u6027\u4ee3\u6570 \u00b6 \u5fae\u79ef\u5206 \u00b6 \u6570\u5b66\u4f18\u5316 \u00b6 \u62c9\u683c\u6717\u65e5\u4e58\u6570\u6cd5 KKT \u6761\u4ef6 \u6982\u7387\u8bba \u00b6 \u9a6c\u5c14\u79d1\u592b\u8fc7\u7a0b \u9ad8\u65af\u8fc7\u7a0b \u4fe1\u606f\u8bba \u00b6","title":"NNDL Notes"},{"location":"NNDL%20Notes/#nndl-notes","text":"","title":"NNDL Notes"},{"location":"NNDL%20Notes/#_1","text":"","title":"\u9644\u5f55"},{"location":"NNDL%20Notes/#_2","text":"","title":"\u7ebf\u6027\u4ee3\u6570"},{"location":"NNDL%20Notes/#_3","text":"","title":"\u5fae\u79ef\u5206"},{"location":"NNDL%20Notes/#_4","text":"\u62c9\u683c\u6717\u65e5\u4e58\u6570\u6cd5 KKT \u6761\u4ef6","title":"\u6570\u5b66\u4f18\u5316"},{"location":"NNDL%20Notes/#_5","text":"\u9a6c\u5c14\u79d1\u592b\u8fc7\u7a0b \u9ad8\u65af\u8fc7\u7a0b","title":"\u6982\u7387\u8bba"},{"location":"NNDL%20Notes/#_6","text":"","title":"\u4fe1\u606f\u8bba"},{"location":"NNDL%20exercise/","text":"NNDL \u4e60\u9898 \u00b6 \u7b2c 2 \u7ae0\u673a\u5668\u5b66\u4e60\u6982\u8ff0 \u00b6 \u4e60\u98982-1 \u5206\u6790\u4e3a\u4ec0\u4e48\u5e73\u65b9\u635f\u5931\u51fd\u6570\u4e0d\u9002\u7528\u4e8e\u5206\u7c7b\u95ee\u9898\u3002 Answer \u5047\u8bbe\u5206\u7c7b\u95ee\u9898\u7684\u7c7b\u522b\u662f \\({1,2,3}\\) \u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u771f\u5b9e\u7c7b\u522b\u4e3a 2 \u7684\u6837\u672c X \u800c\u8a00\uff0c\u6a21\u578b\u7684\u5206\u7c7b\u7ed3\u679c\u662f 1 \u6216 3 \uff0c\u5e73\u65b9\u635f\u5931\u51fd\u6570\u5f97\u5230\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u6837\u7684 \u8fd9\u663e\u7136\u4e0d\u5408\u7406\uff0c\u65e0\u6cd5\u8ba9\u901a\u8fc7\u8fd9\u4e00\u635f\u5931\u51fd\u6570\u8bad\u7ec3\u6a21\u578b \u4e60\u98982-2 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u7ed9\u6bcf\u4e2a\u6837\u672c \\(\\left(\\mathbf{x}^{(n)}, y^{(n)}\\right)\\) \u8d4b\u4e88\u4e00\u4e2a\u6743\u91cd \\(r^{(n)}\\) \uff0c\u7ecf\u9a8c\u98ce\u9669\u51fd\u6570\u4e3a \\[ \\mathcal{R}(\\mathbf{w})=\\frac{1}{2} \\sum_{n=1}^{N} r^{(n)}\\left(y^{(n)}-\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}\\right)^{2} \\] \u8ba1\u7b97\u5176\u6700\u4f18\u53c2\u6570 \\(\\mathbf{w}^{*}\\) \uff0c\u5e76\u5206\u6790\u6743\u91cd \\(r^{(n)}\\) \u7684\u4f5c\u7528\u3002 Answer =-= \u4e3a\u6bcf\u4e2a\u6837\u672c\u90fd\u5206\u914d\u4e86\u6743\u91cd\uff0c\u76f8\u5f53\u4e8e\u5bf9\u6bcf\u4e2a\u6837\u672c\u90fd\u8bbe\u7f6e\u4e86\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u6216\u7406\u89e3\u4e3a\u5bf9\u6bcf\u4e2a\u6837\u672c\u7684\u91cd\u89c6\u7a0b\u5ea6\u4e0d\u4e00\u6837\u3002 \u4e60\u98982-3 \u8bc1\u660e\u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u5982\u679c\u6837\u672c\u6570\u91cf \\(N\\) \u5c0f\u4e8e\u7279\u5f81\u6570\u91cf \\(d+1\\) \uff0c\u5219 \\(X X^{\\mathrm{T}}\\) \u7684\u79e9\u6700\u5927\u4e3a \\(N\\) \u3002 Answer \u5df2\u77e5\u5b9a\u7406\uff1a\u8bbe \\(A,B\\) \u5206\u522b\u4e3a \\(n\\times m,m \\times s\\) \u7684\u77e9\u9635\uff0c\u5219 \\(\\mathrm{rank}(\\mathrm{AB}) \\leqslant \\min \\{\\mathrm{rank}(\\mathrm{A}), \\mathrm{rank}(\\mathrm{B})\\}\\) \u800c \\(X \\in \\mathbb{R}^{(d+1) \\times N}\\) , $ X^T \\in \\mathbb{R}^{N \\times (d+1)}$ , \\(rank(X)=rank(X^{T})=min((d+1),N)\\) , \\(N < d+1\\) .\u53ef\u77e5 \\(rank(X)=N\\) \u53ef\u77e5 \\(rank(XX^T) \\leq \\{N,N\\} = N\\) \u4e60\u98982-4 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u9a8c\u8bc1\u5cad\u56de\u5f52\u7684\u89e3\u4e3a**\u7ed3\u6784\u98ce\u9669\u6700\u5c0f\u5316\u51c6\u5219**\u4e0b\u7684\u6700\u5c0f\u4e8c\u4e58\u6cd5\u4f30\u8ba1\uff0c\u89c1\u516c\u5f0f(2.45)\u3002 Answer \u5df2\u77e5 \\[ \\mathcal{R}(\\mathbf{w})=\\frac{1}{2}\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}+\\frac{1}{2} \\lambda\\|\\mathbf{w}\\|^{2} \\] \\[ \\mathbf{w}^{*}=\\left(X X^{\\mathrm{T}}+\\lambda I\\right)^{-1} X \\mathbf{y} \\] \u53ef\u5f97 \\[ \\begin{aligned} \\frac{\\partial \\mathcal{R}(\\mathbf{w})}{\\partial \\mathbf{w}} &=\\frac{1}{2} \\frac{\\partial\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}+ \\lambda\\|\\mathbf{w}\\|^{2}}{\\partial \\mathbf{w}} \\\\ &=-X\\left(\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right)+\\lambda \\mathbf{w} \\end{aligned} \\] \u4ee4 \\(\\frac{\\partial}{\\partial \\mathbf{w}} \\mathcal{R}(\\mathbf{w})=0\\) \u53ef\u5f97 \\[ -XY + XX^{\\mathrm{T}}\\mathbf{w}+\\lambda \\mathbf{w}=0\\\\ (XX^{\\mathrm{T}}+\\lambda I)\\mathbf{w}=XY \\\\ \\] \u5373 \\[ \\mathbf{w}^{*}=\\left(X X^{\\mathrm{T}}+\\lambda I\\right)^{-1} X \\mathbf{y} \\] \u4e60\u98982-5 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u82e5\u5047\u8bbe\u6807\u7b7e \\(y \\sim \\mathcal{N}\\left(\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}, \\beta\\right)\\) \uff0c\u5e76\u7528\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u6765\u4f18\u5316\u53c2\u6570\u65f6\uff0c\u9a8c\u8bc1\u6700\u4f18\u53c2\u6570\u4e3a\u516c\u5f0f(2.51) \u7684\u89e3\u3002 Answer \u5df2\u77e5 \\[ \\log p(\\mathbf{y} | X ; \\mathbf{w}, \\sigma)=\\sum_{n=1}^{N} \\log \\mathcal{N}(y^{(n)} | \\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}, \\sigma^{2} ) \\] \u4ee4 \\(\\frac{\\partial \\log p(\\mathbf{y} | X ; \\mathbf{w}, \\sigma)}{\\partial \\mathbf{w}}=0\\) \uff0c\u5373\u6709 \\[ \\frac{\\partial \\left(\\sum _{n=1}^{N} - \\frac{\\left(y^{(n)}-\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}\\right)^2}{2 \\beta}\\right)}{\\partial \\mathbf{w}}=0\\\\ \\frac{\\partial \\frac{1}{2}\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}}{\\partial \\mathbf{w}} = 0 \\\\ -X\\left(\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right) = 0 \\] \u5219 \\[ \\mathbf{w}^{M L}=\\left(X X^{\\mathrm{T}}\\right)^{-1} X \\mathbf{y} \\] \u4e60\u98982-6 \u5047\u8bbe\u6709 \\(N\\) \u4e2a\u6837\u672c \\(x^{(1)}, x^{(2)}, \\cdots, x^{(N)}\\) \u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(\\mathcal{N}\\left(\\mu, \\sigma^{2}\\right)\\) \uff0c\u5176\u4e2d \\(\\mu\\) \u672a\u77e5 (1) \u4f7f\u7528\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u6765\u6c42\u89e3\u6700\u4f18\u53c2\u6570 \\(\\mu^{M L}\\) (2) \u82e5\u53c2\u6570 \\(\\mu\\) \u4e3a\u968f\u673a\u53d8\u91cf\uff0c\u5e76\u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(\\mathcal{N}\\left(\\mu_{0}, \\sigma_{0}^{2}\\right)\\) \uff0c\u4f7f\u7528\u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u6765\u6c42\u89e3\u6700\u4f18\u53c2\u6570 \\(\\mu^{M A P}\\) \u3002 Answer \u7531\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u516c\u5f0f\u53ef\u77e5 \\[ \\frac{\\partial \\sum^N_{n=1}log \\mathcal{N}\\left(y^{(n)} | \\mu, \\sigma^{2}\\right)}{\\partial \\mu} = 0 \\\\ \\frac{\\partial \\sum^N_{n=1} (y^{(n)}-\\mu)^2}{\\partial \\mu} = 0 \\\\ \\mu^{M L} = \\frac{1}{N} \\sum^N_{n=1} y^{(n)} \\] \u4e60\u98982-7 \u5728\u4e60\u98982-6\u4e2d\uff0c\u8bc1\u660e\u5f53 \\(N \\rightarrow \\infty\\) \u65f6\uff0c\u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u8d8b\u5411\u4e8e\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u3002 Answer \u4e60\u98982-8 \u9a8c\u8bc1\u516c\u5f0f(2.60) Answer \u4e60\u98982-9 \u8bd5\u5206\u6790\u5728\u4ec0\u4e48\u56e0\u7d20\u4f1a\u5bfc\u81f4\u6a21\u578b\u51fa\u73b0\u56fe2.6\u6240\u793a\u7684\u9ad8\u504f\u5dee\u548c\u9ad8\u65b9\u5dee\u60c5\u51b5\u3002 Answer \u4e60\u98982-10 \u9a8c\u8bc1\u516c\u5f0f(2.65) Answer \u4e60\u98982-11 \u5206\u522b\u7528\u4e00\u5143\u3001\u4e8c\u5143\u548c\u4e09\u5143\u7279\u5f81\u7684\u8bcd\u888b\u6a21\u578b\u8868\u793a\u6587\u672c\u201c\u6211\u6253\u4e86\u5f20\u4e09\u201d\u548c\u201c\u5f20\u4e09\u6253\u4e86\u6211\u201d\uff0c\u5e76\u5206\u6790\u4e0d\u540c\u6a21\u578b\u7684\u4f18\u7f3a\u70b9\u3002 Answer \u4e60\u98982-12 \u5bf9\u4e8e\u4e00\u4e2a\u4e09\u7c7b\u5206\u7c7b\u95ee\u9898\uff0c\u6570\u636e\u96c6\u7684\u771f\u5b9e\u6807\u7b7e\u548c\u6a21\u578b\u7684\u9884\u6d4b\u6807\u7b7e\u5982\u4e0b\uff1a \u5206\u522b\u8ba1\u7b97\u6a21\u578b\u7684\u67e5\u51c6\u7387\u3001\u67e5\u5168\u7387\u3001F1 \u503c\u4ee5\u53ca\u5b83\u4eec\u7684\u5b8f\u5e73\u5747\u548c\u5fae\u5e73\u5747\u3002 Answer","title":"NNDL exercise"},{"location":"NNDL%20exercise/#nndl","text":"","title":"NNDL \u4e60\u9898"},{"location":"NNDL%20exercise/#2","text":"\u4e60\u98982-1 \u5206\u6790\u4e3a\u4ec0\u4e48\u5e73\u65b9\u635f\u5931\u51fd\u6570\u4e0d\u9002\u7528\u4e8e\u5206\u7c7b\u95ee\u9898\u3002 Answer \u5047\u8bbe\u5206\u7c7b\u95ee\u9898\u7684\u7c7b\u522b\u662f \\({1,2,3}\\) \u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u771f\u5b9e\u7c7b\u522b\u4e3a 2 \u7684\u6837\u672c X \u800c\u8a00\uff0c\u6a21\u578b\u7684\u5206\u7c7b\u7ed3\u679c\u662f 1 \u6216 3 \uff0c\u5e73\u65b9\u635f\u5931\u51fd\u6570\u5f97\u5230\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u6837\u7684 \u8fd9\u663e\u7136\u4e0d\u5408\u7406\uff0c\u65e0\u6cd5\u8ba9\u901a\u8fc7\u8fd9\u4e00\u635f\u5931\u51fd\u6570\u8bad\u7ec3\u6a21\u578b \u4e60\u98982-2 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u7ed9\u6bcf\u4e2a\u6837\u672c \\(\\left(\\mathbf{x}^{(n)}, y^{(n)}\\right)\\) \u8d4b\u4e88\u4e00\u4e2a\u6743\u91cd \\(r^{(n)}\\) \uff0c\u7ecf\u9a8c\u98ce\u9669\u51fd\u6570\u4e3a \\[ \\mathcal{R}(\\mathbf{w})=\\frac{1}{2} \\sum_{n=1}^{N} r^{(n)}\\left(y^{(n)}-\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}\\right)^{2} \\] \u8ba1\u7b97\u5176\u6700\u4f18\u53c2\u6570 \\(\\mathbf{w}^{*}\\) \uff0c\u5e76\u5206\u6790\u6743\u91cd \\(r^{(n)}\\) \u7684\u4f5c\u7528\u3002 Answer =-= \u4e3a\u6bcf\u4e2a\u6837\u672c\u90fd\u5206\u914d\u4e86\u6743\u91cd\uff0c\u76f8\u5f53\u4e8e\u5bf9\u6bcf\u4e2a\u6837\u672c\u90fd\u8bbe\u7f6e\u4e86\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u6216\u7406\u89e3\u4e3a\u5bf9\u6bcf\u4e2a\u6837\u672c\u7684\u91cd\u89c6\u7a0b\u5ea6\u4e0d\u4e00\u6837\u3002 \u4e60\u98982-3 \u8bc1\u660e\u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u5982\u679c\u6837\u672c\u6570\u91cf \\(N\\) \u5c0f\u4e8e\u7279\u5f81\u6570\u91cf \\(d+1\\) \uff0c\u5219 \\(X X^{\\mathrm{T}}\\) \u7684\u79e9\u6700\u5927\u4e3a \\(N\\) \u3002 Answer \u5df2\u77e5\u5b9a\u7406\uff1a\u8bbe \\(A,B\\) \u5206\u522b\u4e3a \\(n\\times m,m \\times s\\) \u7684\u77e9\u9635\uff0c\u5219 \\(\\mathrm{rank}(\\mathrm{AB}) \\leqslant \\min \\{\\mathrm{rank}(\\mathrm{A}), \\mathrm{rank}(\\mathrm{B})\\}\\) \u800c \\(X \\in \\mathbb{R}^{(d+1) \\times N}\\) , $ X^T \\in \\mathbb{R}^{N \\times (d+1)}$ , \\(rank(X)=rank(X^{T})=min((d+1),N)\\) , \\(N < d+1\\) .\u53ef\u77e5 \\(rank(X)=N\\) \u53ef\u77e5 \\(rank(XX^T) \\leq \\{N,N\\} = N\\) \u4e60\u98982-4 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u9a8c\u8bc1\u5cad\u56de\u5f52\u7684\u89e3\u4e3a**\u7ed3\u6784\u98ce\u9669\u6700\u5c0f\u5316\u51c6\u5219**\u4e0b\u7684\u6700\u5c0f\u4e8c\u4e58\u6cd5\u4f30\u8ba1\uff0c\u89c1\u516c\u5f0f(2.45)\u3002 Answer \u5df2\u77e5 \\[ \\mathcal{R}(\\mathbf{w})=\\frac{1}{2}\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}+\\frac{1}{2} \\lambda\\|\\mathbf{w}\\|^{2} \\] \\[ \\mathbf{w}^{*}=\\left(X X^{\\mathrm{T}}+\\lambda I\\right)^{-1} X \\mathbf{y} \\] \u53ef\u5f97 \\[ \\begin{aligned} \\frac{\\partial \\mathcal{R}(\\mathbf{w})}{\\partial \\mathbf{w}} &=\\frac{1}{2} \\frac{\\partial\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}+ \\lambda\\|\\mathbf{w}\\|^{2}}{\\partial \\mathbf{w}} \\\\ &=-X\\left(\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right)+\\lambda \\mathbf{w} \\end{aligned} \\] \u4ee4 \\(\\frac{\\partial}{\\partial \\mathbf{w}} \\mathcal{R}(\\mathbf{w})=0\\) \u53ef\u5f97 \\[ -XY + XX^{\\mathrm{T}}\\mathbf{w}+\\lambda \\mathbf{w}=0\\\\ (XX^{\\mathrm{T}}+\\lambda I)\\mathbf{w}=XY \\\\ \\] \u5373 \\[ \\mathbf{w}^{*}=\\left(X X^{\\mathrm{T}}+\\lambda I\\right)^{-1} X \\mathbf{y} \\] \u4e60\u98982-5 \u5728\u7ebf\u6027\u56de\u5f52\u4e2d\uff0c\u82e5\u5047\u8bbe\u6807\u7b7e \\(y \\sim \\mathcal{N}\\left(\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}, \\beta\\right)\\) \uff0c\u5e76\u7528\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u6765\u4f18\u5316\u53c2\u6570\u65f6\uff0c\u9a8c\u8bc1\u6700\u4f18\u53c2\u6570\u4e3a\u516c\u5f0f(2.51) \u7684\u89e3\u3002 Answer \u5df2\u77e5 \\[ \\log p(\\mathbf{y} | X ; \\mathbf{w}, \\sigma)=\\sum_{n=1}^{N} \\log \\mathcal{N}(y^{(n)} | \\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}, \\sigma^{2} ) \\] \u4ee4 \\(\\frac{\\partial \\log p(\\mathbf{y} | X ; \\mathbf{w}, \\sigma)}{\\partial \\mathbf{w}}=0\\) \uff0c\u5373\u6709 \\[ \\frac{\\partial \\left(\\sum _{n=1}^{N} - \\frac{\\left(y^{(n)}-\\mathbf{w}^{\\mathrm{T}} \\mathbf{x}^{(n)}\\right)^2}{2 \\beta}\\right)}{\\partial \\mathbf{w}}=0\\\\ \\frac{\\partial \\frac{1}{2}\\left\\|\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right\\|^{2}}{\\partial \\mathbf{w}} = 0 \\\\ -X\\left(\\mathbf{y}-X^{\\mathrm{T}} \\mathbf{w}\\right) = 0 \\] \u5219 \\[ \\mathbf{w}^{M L}=\\left(X X^{\\mathrm{T}}\\right)^{-1} X \\mathbf{y} \\] \u4e60\u98982-6 \u5047\u8bbe\u6709 \\(N\\) \u4e2a\u6837\u672c \\(x^{(1)}, x^{(2)}, \\cdots, x^{(N)}\\) \u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(\\mathcal{N}\\left(\\mu, \\sigma^{2}\\right)\\) \uff0c\u5176\u4e2d \\(\\mu\\) \u672a\u77e5 (1) \u4f7f\u7528\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u6765\u6c42\u89e3\u6700\u4f18\u53c2\u6570 \\(\\mu^{M L}\\) (2) \u82e5\u53c2\u6570 \\(\\mu\\) \u4e3a\u968f\u673a\u53d8\u91cf\uff0c\u5e76\u670d\u4ece\u6b63\u6001\u5206\u5e03 \\(\\mathcal{N}\\left(\\mu_{0}, \\sigma_{0}^{2}\\right)\\) \uff0c\u4f7f\u7528\u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u6765\u6c42\u89e3\u6700\u4f18\u53c2\u6570 \\(\\mu^{M A P}\\) \u3002 Answer \u7531\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u516c\u5f0f\u53ef\u77e5 \\[ \\frac{\\partial \\sum^N_{n=1}log \\mathcal{N}\\left(y^{(n)} | \\mu, \\sigma^{2}\\right)}{\\partial \\mu} = 0 \\\\ \\frac{\\partial \\sum^N_{n=1} (y^{(n)}-\\mu)^2}{\\partial \\mu} = 0 \\\\ \\mu^{M L} = \\frac{1}{N} \\sum^N_{n=1} y^{(n)} \\] \u4e60\u98982-7 \u5728\u4e60\u98982-6\u4e2d\uff0c\u8bc1\u660e\u5f53 \\(N \\rightarrow \\infty\\) \u65f6\uff0c\u6700\u5927\u540e\u9a8c\u4f30\u8ba1\u8d8b\u5411\u4e8e\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u3002 Answer \u4e60\u98982-8 \u9a8c\u8bc1\u516c\u5f0f(2.60) Answer \u4e60\u98982-9 \u8bd5\u5206\u6790\u5728\u4ec0\u4e48\u56e0\u7d20\u4f1a\u5bfc\u81f4\u6a21\u578b\u51fa\u73b0\u56fe2.6\u6240\u793a\u7684\u9ad8\u504f\u5dee\u548c\u9ad8\u65b9\u5dee\u60c5\u51b5\u3002 Answer \u4e60\u98982-10 \u9a8c\u8bc1\u516c\u5f0f(2.65) Answer \u4e60\u98982-11 \u5206\u522b\u7528\u4e00\u5143\u3001\u4e8c\u5143\u548c\u4e09\u5143\u7279\u5f81\u7684\u8bcd\u888b\u6a21\u578b\u8868\u793a\u6587\u672c\u201c\u6211\u6253\u4e86\u5f20\u4e09\u201d\u548c\u201c\u5f20\u4e09\u6253\u4e86\u6211\u201d\uff0c\u5e76\u5206\u6790\u4e0d\u540c\u6a21\u578b\u7684\u4f18\u7f3a\u70b9\u3002 Answer \u4e60\u98982-12 \u5bf9\u4e8e\u4e00\u4e2a\u4e09\u7c7b\u5206\u7c7b\u95ee\u9898\uff0c\u6570\u636e\u96c6\u7684\u771f\u5b9e\u6807\u7b7e\u548c\u6a21\u578b\u7684\u9884\u6d4b\u6807\u7b7e\u5982\u4e0b\uff1a \u5206\u522b\u8ba1\u7b97\u6a21\u578b\u7684\u67e5\u51c6\u7387\u3001\u67e5\u5168\u7387\u3001F1 \u503c\u4ee5\u53ca\u5b83\u4eec\u7684\u5b8f\u5e73\u5747\u548c\u5fae\u5e73\u5747\u3002 Answer","title":"\u7b2c 2 \u7ae0\u673a\u5668\u5b66\u4e60\u6982\u8ff0"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/","text":"Neural Reading Comprehension and beyond-2 \u00b6 Part II Neural Reading Comprehension: Applications \u00b6 Chapter 5 Open Domain Question Answering \u00b6 \u5728\u7b2c\u4e00\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\uff1a\u9605\u8bfb\u7406\u89e3\u7684\u786e\u5207\u8868\u8fbe\u548c\u53d1\u5c55\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u7684\u5173\u952e\u7ec4\u6210\u90e8\u5206\u4ee5\u53ca\u672a\u6765\u7684\u7814\u7a76\u65b9\u5411\u3002\u4f46\u662f\uff0c\u76ee\u524d\u5c1a\u4e0d\u6e05\u695a\u9605\u8bfb\u7406\u89e3\u4ec5\u4ec5\u662f\u7528\u4f5c\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u7684\u4e00\u9879\u4efb\u52a1\uff0c\u8fd8\u662f\u53ef\u4ee5\u4f7f\u4efb\u4e00\u6709\u7528\u7684\u5e94\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u5728\u7b2c\u4e8c\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u5c06\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u5e76\u8ba8\u8bba\u6211\u4eec\u5728\u6784\u5efa\u5c06\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u5176\u6838\u5fc3\u7ec4\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u65b9\u9762\u6240\u505a\u7684\u52aa\u529b\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u5f00\u653e\u57df\u95ee\u7b54\u4f5c\u4e3a\u9605\u8bfb\u7406\u89e3\u7684\u4e00\u79cd\u5e94\u7528\u3002\u5f00\u653e\u57df\u95ee\u7b54\u4e00\u76f4\u662fNLP\u5386\u53f2\u4e0a\u7684\u4e00\u4e2a\u957f\u671f\u95ee\u9898\u3002\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u7684\u76ee\u6807\u662f\u57fa\u4e8e\u5927\u91cf\u975e\u7ed3\u6784\u5316\u81ea\u7136\u8bed\u8a00\u6587\u6863\uff0c\u7ed3\u6784\u5316\u6570\u636e(\u4f8b\u5982\u77e5\u8bc6\u5e93)\uff0c\u6784\u5efa\u80fd\u591f\u81ea\u52a8\u56de\u7b54\u4eba\u7c7b\u53ef\u80fd\u63d0\u51fa\u7684\u4efb\u4f55(\u7c7b\u4e8b\u5b9e)\u95ee\u9898\u7684\u81ea\u52a8\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002 )\uff0c\u534a\u7ed3\u6784\u5316\u6570\u636e(\u4f8b\u5982\u8868\u683c)\u6216\u5176\u4ed6\u5f62\u5f0f\u7684\u56fe\u7247\u6216\u89c6\u9891\u3002 \u672c\u7ae0\u5b89\u6392\u5982\u4e0b\u3002\u6211\u4eec\u9996\u5148\u5bf9\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u548c\u5386\u53f2\u4e0a\u4e00\u4e9b\u8457\u540d\u7684\u7cfb\u7edf\u8fdb\u884c\u9ad8\u5c42\u6b21\u7684\u6982\u8ff0(\u7b2c5.1\u8282)\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e2a\u6211\u4eec\u6784\u5efa\u7684\u540d\u4e3aDRQA\u7684\u5f00\u653e\u57df\u95ee\u7b54\u7cfb\u7edf(\u7b2c5.2\u8282)\uff0c\u8be5\u7cfb\u7edf\u65e8\u5728\u56de\u7b54\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u4e2d\u7684\u95ee\u9898\u3002\u5b83\u672c\u8d28\u4e0a\u7ed3\u5408\u4e86\u4fe1\u606f\u68c0\u7d22\u6a21\u5757\u548c\u6211\u4eec\u57283.2\u8282\u4e2d\u4ecb\u7ecd\u7684\u9ad8\u6027\u80fd\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u5757\u3002\u6211\u4eec\u5c06\u8fdb\u4e00\u6b65\u8ba8\u8bba\u5982\u4f55\u901a\u8fc7\u4ece\u68c0\u7d22\u6a21\u5757\u521b\u5efa\u53d7\u8fdc\u7a0b\u76d1\u7763\u7684\u8bad\u7ec3\u793a\u4f8b\u6765\u6539\u8fdb\u7cfb\u7edf\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u591a\u4e2a\u95ee\u7b54\u57fa\u51c6\u8fdb\u884c\u5168\u9762\u8bc4\u4f30(\u7b2c5.3\u8282)\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u57285.4\u8282\u4e2d\u8ba8\u8bba\u5f53\u524d\u7684\u5c40\u9650\u6027\uff0c\u540e\u7eed\u5de5\u4f5c\u548c\u672a\u6765\u7684\u65b9\u5411\u3002 5.1 A Brief History of Open-domain QA \u00b6 \u81ea1960\u5e74\u4ee3\u4ee5\u6765\uff0c\u95ee\u9898\u89e3\u7b54\u662fNLP\u7cfb\u7edf\u6700\u65e9\u7684\u4efb\u52a1\u4e4b\u4e00\u3002\u6700\u65e9\u7684\u73b0\u4ee3\u7cfb\u7edf\u662f\u57fa\u4e8e\u6587\u672c\u7684\u95ee\u7b54\u7cfb\u7edf\uff0c\u5b83\u662fPROTO-SYNTHEX\u7cfb\u7edf\u3002\u7cfb\u7edf\u9996\u5148\u6839\u636e\u95ee\u9898\u4e2d\u7684\u5185\u5bb9\u8bcd\u5236\u5b9a\u67e5\u8be2\uff0c\u6839\u636e\u4e0e\u95ee\u9898\u91cd\u53e0\u7684\u9891\u7387\u52a0\u6743\u9879\u68c0\u7d22\u5019\u9009\u7b54\u6848\u53e5\u5b50\uff0c\u6700\u540e\u8fdb\u884c\u4f9d\u8d56\u9879\u89e3\u6790\u5339\u914d\u4ee5\u83b7\u5f97\u6700\u7ec8\u7b54\u6848\u3002\u53e6\u4e00\u4e2a\u8457\u540d\u7684\u7cfb\u7edfMURAX\u65e8\u5728\u4f7f\u7528\u6d45\u5c42\u8bed\u8a00\u5904\u7406\u548c\u4fe1\u606f\u68c0\u7d22\u6280\u672f\u56de\u7b54GROLIER\u5728\u7ebf\u767e\u79d1\u5168\u4e66\u4e2d\u7684\u4e00\u822c\u77e5\u8bc6\u95ee\u9898\u3002 \u81ea1999\u5e74\u4ee5\u6765\uff0c\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u7684\u5174\u8da3\u6709\u6240\u589e\u52a0\u3002\u95ee\u9898\u89e3\u7b54\u8d5b\u9053\u9996\u6b21\u88ab\u7eb3\u5165TREC\u6bd4\u8d5b\u3002\u9996\u5148\u5b9a\u4e49\u4efb\u52a1\uff0c\u7cfb\u7edf\u68c0\u7d22\u5305\u542b\u5f00\u653e\u57df\u95ee\u9898\u7b54\u6848\u7684\u6587\u672c\u7247\u6bb5\u3002\u5b83\u523a\u6fc0\u4e86\u5f53\u65f6\u5f00\u53d1\u7684\u5404\u79cd\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\uff0c\u5e76\u4e14\u5927\u591a\u6570\u7cfb\u7edf\u7531\u4e24\u4e2a\u9636\u6bb5\u7ec4\u6210\uff1a\u4e00\u4e2aIR\u7cfb\u7edf\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u8be5\u95ee\u9898\u4ea7\u751f\u7684\u67e5\u8be2\u76f8\u5339\u914d\u7684\u524dn\u4e2a\u6587\u6863\u6216\u6bb5\u843d\uff1b\u4ee5\u53ca\u4e00\u4e2a\u57fa\u4e8e\u7a97\u53e3\u7684\u5355\u8bcd\u8bc4\u5206\u7cfb\u7edf\uff0c\u7528\u4e8e\u67e5\u660e\u53ef\u80fd\u7684\u7b54\u6848\u3002 \u6700\u8fd1\uff0c\u968f\u7740\u77e5\u8bc6\u5e93 KB \u7684\u53d1\u5c55\uff0c\u4f8b\u5982FREEBASE\u548cDBPEDIA\uff0c\u5728\u77e5\u8bc6\u5e93\u7684\u95ee\u7b54\u4e2d\uff0c\u51fa\u73b0\u4e86\u8bb8\u591a\u521b\u65b0\u3002\u57fa\u4e8eFREEBASE\u7684WEBQUESTIONS\u548cSIMPLEQUESTIONS\u6216\u57fa\u4e8e\u81ea\u52a8\u63d0\u53d6\u7684KB(\u4f8b\u5982OpenIE\u4e09\u5143\u7ec4\u548cNELL)\u3002\u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u9898\u89e3\u7b54\u5df2\u7ecf\u53d6\u5f97\u4e86\u5f88\u591a\u8fdb\u5c55\uff0c\u4e3b\u8981\u7684\u65b9\u6cd5\u662f\u57fa\u4e8e\u8bed\u4e49\u89e3\u6790\u6216\u4fe1\u606f\u63d0\u53d6\u6280\u672f\u3002\u4f46\u662f\uff0c\u77e5\u8bc6\u5e93\u5177\u6709\u56fa\u6709\u7684\u5c40\u9650\u6027(\u4e0d\u5b8c\u6574\u548c\u56fa\u5b9a\u7684\u6a21\u5f0f)\uff0c\u8fd9\u4fc3\u4f7f\u7814\u7a76\u4eba\u5458\u6700\u8fd1\u56de\u5230\u539f\u59cb\u6587\u672c\u7b54\u590d\u7684\u539f\u59cb\u573a\u666f\u4e2d\u3002 \u8fd8\u6709\u5927\u91cf\u4f7f\u7528\u5927\u91cf\u8d44\u6e90\u7684\u9ad8\u5ea6\u5f00\u53d1\u7684\u5168\u6d41\u6c34\u7ebf QA \u65b9\u6cd5\uff0c\u5305\u62ec\u6587\u672c\u96c6\u5408(\u7f51\u9875\uff0cWikipedia\uff0c\u65b0\u95fb\u4e13\u7ebf\u6587\u7ae0)\u548c\u7ed3\u6784\u5316\u77e5\u8bc6\u5e93(FREEBASE\uff0cDBPEDIA\u7b49)\u3002\u51e0\u4e2a\u8457\u540d\u7684\u7cfb\u7edf\u5305\u62ecMicrosoft\u7684ASKMSR\uff0cIBM\u7684DEEPQA\u548cYODAQA\u3002 ASKMSR\u662f\u57fa\u4e8e\u641c\u7d22\u5f15\u64ce\u7684\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\uff0c\u5b83\u4f9d\u8d56\u4e8e\u201c\u6570\u636e\u5197\u4f59\u800c\u4e0d\u662f\u5bf9\u95ee\u9898\u6216\u5019\u9009\u7b54\u6848\u7684\u590d\u6742\u8bed\u8a00\u5206\u6790\u201d\u3002DEEPQA\u662f\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u7531\u8bb8\u591a\u4e0d\u540c\u7684\u90e8\u5206\u7ec4\u6210\uff0c\u5b83\u4f9d\u8d56\u4e8e\u975e\u7ed3\u6784\u5316\u4fe1\u606f\u4ee5\u53ca\u7ed3\u6784\u5316\u6570\u636e\u6765\u751f\u6210\u5019\u9009\u7b54\u6848\u6216\u5bf9\u8bc1\u636e\u8fdb\u884c\u6295\u7968\u3002\u56fe5.1\u8bf4\u660e\u4e86\u9ad8\u7ea7\u67b6\u6784\u3002 YODAQA\u662f\u4e00\u4e2a\u4ee5 DEEPQA \u4e3a\u6a21\u578b\u7684\u5f00\u6e90\u7cfb\u7edf\uff0c\u7279\u522b\u662f\u5c06\u7f51\u7ad9\uff0c\u6570\u636e\u5e93\u548c Wikipedia \u7ec4\u5408\u5728\u4e00\u8d77\u3002\u4e0e\u8fd9\u4e9b\u65b9\u6cd5\u8fdb\u884c\u6bd4\u8f83\u53ef\u4e3a\u6027\u80fd\u7684\u201c\u4e0a\u9650\u201d\u57fa\u51c6\u63d0\u4f9b\u6709\u7528\u7684\u53c2\u7167\u3002 \u6211\u4eec\u7684DRQA\u7cfb\u7edf(\u7b2c5.2\u8282)\u4e13\u6ce8\u4e8e\u4f7f\u7528Wikipedia\u4f5c\u4e3a\u552f\u4e00\u77e5\u8bc6\u6e90\u7684\u95ee\u9898\u89e3\u7b54\uff0c\u4f8b\u5982\u5728\u767e\u79d1\u5168\u4e66\u4e2d\u5bfb\u627e\u7b54\u6848\u65f6\u6240\u505a\u7684\u56de\u7b54\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u5df2\u7ecf\u6709\u5f88\u591a\u5173\u4e8e\u4f7f\u7528Wikipedia\u4f5c\u4e3a\u8d44\u6e90\u7684\u95ee\u9898\u89e3\u7b54\u6a21\u578b\u3002 Ryu \u7b49\u4eba\u4f7f\u7528\u57fa\u4e8e Wikipedia \u7684\u77e5\u8bc6\u6a21\u578b\u6267\u884c\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u3002\u4ed6\u4eec\u6839\u636e\u4e0d\u540c\u7c7b\u578b\u7684\u534a\u7ed3\u6784\u5316\u77e5\u8bc6(\u4f8b\u5982\u4fe1\u606f\u6846\uff0c\u6587\u7ae0\u7ed3\u6784\uff0c\u7c7b\u522b\u7ed3\u6784\u548c\u5b9a\u4e49)\u5c06\u6587\u7ae0\u5185\u5bb9\u4e0e\u5176\u4ed6\u591a\u4e2a\u7b54\u6848\u5339\u914d\u6a21\u5757\u7ed3\u5408\u5728\u4e00\u8d77\u3002\u540c\u6837\uff0cAhn\u7b49\u4eba\u4e5f\u5c06Wikipedia\u4f5c\u4e3a\u6587\u672c\u8d44\u6e90\u4e0e\u5176\u4ed6\u8d44\u6e90\u76f8\u7ed3\u5408\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u8fd8\u5177\u6709\u5bf9\u5176\u4ed6\u6587\u6863\u7684\u4fe1\u606f\u68c0\u7d22\u3002Buscaldi\u548cRosso\u8fd8\u4eceWikipedia\u6316\u6398\u77e5\u8bc6\u4ee5\u8fdb\u884c\u95ee\u9898\u89e3\u7b54\u3002 \u4ed6\u4eec\u6ca1\u6709\u5c06\u5176\u7528\u4f5c\u5bfb\u627e\u95ee\u9898\u7b54\u6848\u7684\u8d44\u6e90\uff0c\u800c\u662f\u4e13\u6ce8\u4e8e\u9a8c\u8bc1\u5176\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\u8fd4\u56de\u7684\u7b54\u6848\uff0c\u5e76\u4f7f\u7528Wikipedia\u7c7b\u522b\u6765\u786e\u5b9a\u5e94\u4e0e\u9884\u671f\u7b54\u6848\u5339\u914d\u7684\u4e00\u7ec4\u6a21\u5f0f\u3002 \u5728\u6211\u4eec\u7684\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u4ec5\u8003\u8651\u6587\u672c\u7406\u89e3\uff0c\u5e76\u4f7f\u7528Wikipedia\u6587\u672c\u6587\u6863\u4f5c\u4e3a\u552f\u4e00\u8d44\u6e90\uff0c\u4ee5\u5f3a\u8c03\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1 \u3002 \u6211\u4eec\u76f8\u4fe1\uff0c\u6dfb\u52a0\u5176\u4ed6\u77e5\u8bc6\u8d44\u6e90\u6216\u4fe1\u606f\u5c06\u8fdb\u4e00\u6b65\u6539\u5584\u6211\u4eec\u7cfb\u7edf\u7684\u6027\u80fd\u3002 5.2 Our System: DRQA \u00b6 5.2.1 An Overview \u00b6 \u5728\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u6211\u4eec\u7684\u7cfb\u7edfDRQA\uff0c \u8be5\u7cfb\u7edf\u7740\u91cd\u4e8e\u4f7f\u7528\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u4f5c\u4e3a\u6587\u6863\u7684\u552f\u4e00\u77e5\u8bc6\u6e90\u6765\u56de\u7b54\u95ee\u9898 \u3002\u6211\u4eec\u6709\u5174\u8da3\u6784\u5efa\u4e00\u4e2a\u901a\u7528\u77e5\u8bc6\u7684\u95ee\u9898\u56de\u7b54\u7cfb\u7edf\uff0c\u8be5\u7cfb\u7edf\u53ef\u4ee5\u56de\u7b54\u5305\u542b\u7b54\u6848\u5e76\u53ef\u4ee5\u4eceWikipedia\u4e2d\u63d0\u53d6\u7684\u4efb\u4f55\u5f62\u5f0f\u7684\u95ee\u9898\u3002\u6211\u4eec\u9009\u62e9\u4f7f\u7528Wikipedia\u7684\u539f\u56e0\u6709\u5f88\u591a\uff1a Wikipedia\u662f\u4e0d\u65ad\u53d1\u5c55\u7684\u5927\u89c4\u6a21\uff0c\u4e30\u5bcc\uff0c\u8be6\u7ec6\u4fe1\u606f\u7684\u6765\u6e90\uff0c\u53ef\u4ee5\u4fc3\u8fdb\u667a\u80fd\u673a\u5668\u7684\u53d1\u5c55\u3002\u4e0e\u8bf8\u5982FREEBASE\u6216DBPEDIA\u4e4b\u7c7b\u7684\u77e5\u8bc6\u5e93(KB)\u4e00\u6837\uff0c\u5b83\u4eec\u5bf9\u4e8e\u8ba1\u7b97\u673a\u6765\u8bf4\u8f83\u5bb9\u6613\u5904\u7406\uff0c\u4f46\u5bf9\u4e8e\u5f00\u653e\u57df\u95ee\u9898\u7684\u56de\u7b54\u5374\u8fc7\u4e8e\u7a00\u758f\uff0c\u56e0\u6b64Wikipedia\u5305\u542b\u4eba\u7c7b\u611f\u5174\u8da3\u7684\u6700\u65b0\u77e5\u8bc6\u3002 \u8bb8\u591a\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6(\u4f8b\u5982SQUAD)\u5efa\u7acb\u5728Wikipedia\u4e0a\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u5229\u7528\u8fd9\u4e9b\u8d44\u6e90\uff0c\u6211\u4eec\u5c06\u5728\u4e0d\u4e45\u540e\u5bf9\u5176\u8fdb\u884c\u63cf\u8ff0\u3002 \u603b\u4f53\u800c\u8a00\uff0c\u7ef4\u57fa\u767e\u79d1\u7684\u6587\u7ae0\u7b80\u6d01\uff0c\u9ad8\u8d28\u91cf\u4e14\u683c\u5f0f\u6b63\u786e\uff0c\u56e0\u6b64\u662f\u5f00\u653e\u57df\u95ee\u7b54\u975e\u5e38\u6709\u7528\u7684\u8d44\u6e90 \u4f7f\u7528Wikipedia\u6587\u7ae0\u4f5c\u4e3a\u77e5\u8bc6\u6e90\u4f1a\u5bfc\u81f4\u95ee\u9898\u89e3\u7b54\u7684\u4efb\u52a1\u7ed3\u5408\u4e86\u5927\u89c4\u6a21\u5f00\u653e\u57df\u95ee\u7b54\u548c\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218\u3002\u4e3a\u4e86\u56de\u7b54\u4efb\u4f55\u95ee\u9898\uff0c\u5fc5\u987b\u9996\u5148\u68c0\u7d22\u8d85\u8fc7500\u4e07\u4e2a\u9879\u76ee\u4e2d\u7684\u51e0\u7bc7\u76f8\u5173\u6587\u7ae0\uff0c\u7136\u540e\u4ed4\u7ec6\u626b\u63cf\u5b83\u4eec\u4ee5\u627e\u51fa\u7b54\u6848\u3002\u8fd9\u8ba9\u4eba\u60f3\u8d77\u4f20\u7edf\u7684TREC QA\u7cfb\u7edf\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u4f46\u662f\u6211\u4eec\u8ba4\u4e3a\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5c06\u5728\u9605\u8bfb\u68c0\u7d22\u5230\u7684\u6587\u7ae0/\u6bb5\u843d\u4ee5\u83b7\u53d6\u6700\u7ec8\u7b54\u6848\u65b9\u9762\u53d1\u6325\u5173\u952e\u4f5c\u7528\u3002\u5982\u56fe5.2\u6240\u793a\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4e3b\u8981\u7531\u4e24\u4e2a\u7ec4\u4ef6\u7ec4\u6210\uff1a(1)\u7528\u4e8e\u67e5\u627e\u76f8\u5173\u6587\u7ae0\u7684DOCUMENT RETRIEVER\u6a21\u5757\uff0c\u4ee5\u53ca(2)\u7528\u4e8e\u4ece\u5355\u4e2a\u6587\u6863\u6216\u5c11\u91cf\u96c6\u5408\u4e2d\u63d0\u53d6\u7b54\u6848\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578bDOCUMENT READER\u3002 \u6211\u4eec\u7684\u7cfb\u7edf\u5c06Wikipedia\u89c6\u4e3a \u6587\u7ae0\u7684\u96c6\u5408 \uff0c\u5e76\u4e14 \u4e0d\u4f9d\u8d56\u4e8e\u5176\u5185\u90e8\u56fe\u7ed3\u6784 \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u662f\u901a\u7528\u7684\uff0c\u53ef\u4ee5\u8f6c\u6362\u4e3a\u5176\u4ed6\u6587\u6863\uff0c\u4e66\u7c4d\u751a\u81f3\u6bcf\u65e5\u66f4\u65b0\u7684\u62a5\u7eb8\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u3002 5.2.2 Document Retriever \u00b6 \u9075\u5faa\u7ecf\u5178\u7684QA\u7cfb\u7edf\uff0c\u6211\u4eec\u4f7f\u7528\u9ad8\u6548\u7684(\u975e\u673a\u5668\u5b66\u4e60)\u6587\u6863\u68c0\u7d22\u7cfb\u7edf\u6765\u9996\u5148\u7f29\u5c0f\u641c\u7d22\u8303\u56f4\uff0c\u5e76\u4e13\u6ce8\u4e8e\u4ec5\u9605\u8bfb\u53ef\u80fd\u76f8\u5173\u7684\u6587\u7ae0\u3002 \u4e0e\u5185\u7f6e\u7684\u57fa\u4e8e ElasticSearch \u7684 Wikipedia \u641c\u7d22API\u76f8\u6bd4\uff0c\u7b80\u5355\u7684\u5012\u6392\u7d22\u5f15\u67e5\u627e\u540e\u518d\u8fdb\u884c(term vector model scoring)\u672f\u8bed\u5411\u91cf\u6a21\u578b\u8bc4\u5206\uff0c\u5728\u8bb8\u591a\u4efb\u52a1\u7c7b\u578b\u4e0a\u90fd\u80fd\u5f88\u597d\u5730\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u5c06\u6587\u7ae0\u548c\u95ee\u9898\u4f5c\u4e3aTF-IDF\u52a0\u6743\u8bcd\u888b\u5411\u91cf\u8fdb\u884c\u6bd4\u8f83\u3002 \u6211\u4eec\u901a\u8fc7\u4f7f\u7528 n-gram \u7279\u5f81\u8003\u8651\u5c40\u90e8\u5355\u8bcd\u987a\u5e8f\u6765\u8fdb\u4e00\u6b65\u6539\u5584\u6211\u4eec\u7684\u7cfb\u7edf\u3002\u6211\u4eec\u6027\u80fd\u6700\u597d\u7684\u7cfb\u7edf\u901a\u8fc7\u4f7f\u7528\u6563\u5217\u5c06bigram\u6620\u5c04\u5230 \\(2^{24}\\) bins(with an unsigned murmur3 hash)\uff0c\u4ece\u800c\u5728\u4fdd\u6301\u901f\u5ea6\u548c\u5185\u5b58\u6548\u7387\u7684\u540c\u65f6\u4f7f\u7528bigram\u8ba1\u6570\u3002 \u901a\u8fc7\u5c06DOCUMENT RETRIEVER\u8bbe\u7f6e\u4e3a\u8fd4\u56de\u7ed9\u5b9a\u4efb\u4f55\u95ee\u9898\u76845\u7bc7Wikipedia\u6587\u7ae0\uff0c\u6211\u4eec\u5c06\u5176\u7528\u4f5c\u5b8c\u6574\u6a21\u578b\u7684\u7b2c\u4e00\u90e8\u5206\u3002 \u8fd9\u4e9b\u6587\u7ae0\u7136\u540e\u7531DOCUMENT READER\u5904\u7406\u3002 5.2.3 Document Reader \u00b6 DOCUMENT READER \u65e8\u5728\u9605\u8bfb\u6240\u6709\u6bb5\u843d\u5e76\u4ece\u4e2d\u63d0\u53d6\u53ef\u80fd\u7684\u7b54\u6848\u3002\u8fd9\u6b63\u662f\u6211\u4eec\u5728\u57fa\u4e8e\u8de8\u5ea6\u7684\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e2d\u6240\u505a\u7684\u8bbe\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u57283.2\u8282\u4e2d\u63cf\u8ff0\u7684STANFORD ATTENTIVE READER\u6a21\u578b\u76f4\u63a5\u52a0\u5165\u6b64\u6d41\u6c34\u7ebf\u4e2d\u3002 \u6211\u4eec\u5c06\u51fa\u73b0\u5728\u524d5\u7bc7\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u6bb5\u843d\u90fd\u8f93\u5165\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6587\u6863\u9605\u8bfb\u5668\uff0c\u5b83\u53ef\u4ee5\u7528\u4fe1\u5fc3\u5206\u6570\u6765\u9884\u6d4b\u7b54\u6848\u8303\u56f4\u3002 \u4e3a\u4e86\u4f7f\u5206\u6570\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u68c0\u7d22\u5230\u7684\u6587\u6863\u4e2d\u7684\u5404\u4e2a\u6bb5\u843d\u4e4b\u95f4\u517c\u5bb9\uff0c\u6211\u4eec\u4f7f\u7528\u975e\u5f52\u4e00\u5316\u6307\u6570\uff0c\u5e76\u5728\u6240\u6709\u8003\u8651\u7684\u6bb5\u843d\u8303\u56f4\u5185\u91c7\u7528argmax \u4f5c\u4e3a\u6700\u7ec8\u9884\u6d4b\u3002 \u8fd9\u53ea\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u5e76\u4e14\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u53ef\u4ee5\u6c47\u603b\u4e0d\u540c\u6bb5\u843d\u7684\u8bc1\u636e\u3002 \u6211\u4eec\u5c06\u57285.4\u8282\u4e2d\u8ba8\u8bba\u672a\u6765\u7684\u5de5\u4f5c\u3002 5.2.4 Distant Supervision \u00b6 \u6211\u4eec\u5df2\u7ecf\u5efa\u7acb\u4e86\u5b8c\u6574\u7684\u6d41\u6c34\u7ebf\uff0c\u5176\u4e2d\u96c6\u6210\u4e86\u7ecf\u5178\u7684\u68c0\u7d22\u6a21\u5757\u548c\u6211\u4eec\u4ee5\u524d\u7684\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7ec4\u4ef6\u3002\u5269\u4e0b\u7684\u5173\u952e\u95ee\u9898\u662f\u6211\u4eec\u5982\u4f55\u4e3a\u5f00\u653e\u57df\u95ee\u7b54\u8bbe\u7f6e\u8bad\u7ec3\u8be5\u9605\u8bfb\u7406\u89e3\u6a21\u5757\uff1f \u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u5c31\u662f\u5c06SQuAD\u6570\u636e\u96c6\u4f5c\u4e3a\u8bad\u7ec3\u8bed\u6599\u5e93\u4f7f\u7528\uff0c\u8be5\u6570\u636e\u96c6\u4e5f\u5efa\u7acb\u5728Wikipedia\u6bb5\u843d\u7684\u57fa\u7840\u4e0a\u3002\u4f46\u662f\uff0c\u6b64\u65b9\u6cd5\u53d7\u5230\u4ee5\u4e0b\u65b9\u5f0f\u7684\u9650\u5236\uff1a \u6b63\u5982\u6211\u4eec\u5728\u7b2c4.2\u8282\u4e2d\u5148\u524d\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u5728SQUAD\u4e2d\u7684\u95ee\u9898\u662f\u5728\u6ce8\u91ca\u8005\u770b\u5230\u6bb5\u843d\u4e4b\u540e\u7f16\u5199\u7684\uff0c\u4ee5\u786e\u4fdd\u53ef\u4ee5\u901a\u8fc7\u6bb5\u843d\u4e2d\u7684\u8de8\u5ea6\u6765\u56de\u7b54\u3002\u5f53\u4eba\u4eec\u9996\u5148\u60f3\u5230\u4e00\u4e2a\u95ee\u9898\u5e76\u5c1d\u8bd5\u4eceWeb\u6216\u5176\u4ed6\u6765\u6e90\u627e\u51fa\u4ed6\u7684\u7b54\u6848\u65f6\uff0c\u8fd9\u79cd\u5206\u5e03\u662f\u975e\u5e38\u5177\u4f53\u7684\uff0c\u5e76\u4e14\u4e0e\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u95ee\u9898\u89e3\u7b54\u4e0d\u540c\u3002 \u8bb8\u591aSQUAD\u95ee\u9898\u786e\u5b9e\u4e0e\u4e0a\u4e0b\u6587\u6709\u5173\u3002\u8fd9\u4e9b\u95ee\u9898\u672c\u8eab\u65e0\u6cd5\u7406\u89e3\uff0c\u56e0\u6b64\u5bf9\u4e8e\u5f00\u653e\u57df\u95ee\u7b54\u6beb\u65e0\u7528\u5904\u3002 Clark\u548cGardner \u4f30\u8ba1SQUAD\u4e2d\u7ea632.6\uff05\u7684\u95ee\u9898\u4f9d\u8d56\u4e8e\u6587\u6863\u6216\u6bb5\u843d\u3002 \u6700\u540e\uff0cSQuAD\u7684\u5927\u5c0f\u5f88\u5c0f(8\u4e07\u4e2a\u8bad\u7ec3\u793a\u4f8b)\u3002 \u5982\u679c\u6211\u4eec\u53ef\u4ee5\u6536\u96c6\u66f4\u591a\u7684\u57f9\u8bad\u793a\u4f8b\uff0c\u5219\u5e94\u8be5\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u3002 \u4e3a\u4e86\u514b\u670d\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u53ef\u4ee5\u4ece\u5176\u4ed6\u95ee\u7b54\u8d44\u6e90\u4e2d\u81ea\u52a8\u521b\u5efa\u5176\u4ed6\u8bad\u7ec3\u793a\u4f8b\u7684\u65b9\u6cd5\u3002\u60f3\u6cd5\u662f\u91cd\u65b0\u4f7f\u7528\u6211\u4eec\u6784\u5efa\u7684\u6709\u6548\u4fe1\u606f\u68c0\u7d22\u6a21\u5757\uff1a\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u6709\u4e00\u4e2a\u95ee\u9898\u7b54\u6848\u5bf9 \\((q,a)\\) \uff0c\u5e76\u4e14\u68c0\u7d22\u6a21\u5757\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u627e\u5230\u4e0e\u95ee\u9898 q \u76f8\u5173\u4e14\u6bb5\u843d\u4e2d\u5305\u542b\u7b54\u6848\u7247\u6bb5 a \u7684\u6587\u7ae0 p\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4ee5 \\((p,q,a)\\) \u4e09\u5143\u7ec4\u7684\u5f62\u5f0f\u521b\u5efa\u4e00\u4e2a\u8fdc\u7a0b\u76d1\u7763\u7684\u8bad\u7ec3\u793a\u4f8b\uff0c\u4ee5\u8bad\u7ec3\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff1a $$ f:(q,a) \\to (p,q,a) \\ if p \\in \\text{Document Retriever} (q) \\text{and} a \\text{appears in} p $$ \u8fd9\u4e2a\u60f3\u6cd5\u4e0e\u4f7f\u7528 distant supervision \u8fdb\u884c\u5173\u7cfb\u63d0\u53d6\u7684\u6d41\u884c\u65b9\u6cd5\u5f88\u76f8\u4f3c\u3002\u5c3d\u7ba1\u8fd9\u4e9b\u793a\u4f8b\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53ef\u80fd\u5f88\u5608\u6742\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u4fbf\u5b9c\u7684\u89e3\u51b3\u65b9\u6848\u6765\u4e3a\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u521b\u5efadistant supervision\u7684\u793a\u4f8b\uff0c\u5e76\u4e14\u53ef\u4ee5\u662fSQUAD\u793a\u4f8b\u7684\u6709\u7528\u8865\u5145\u3002 \u6211\u4eec\u5c06\u5728\u7b2c5.3\u8282\u4e2d\u63cf\u8ff0\u8fd9\u4e9b\u8fdc\u7a0b\u76d1\u7763\u793a\u4f8b\u7684\u6709\u6548\u6027\u3002 5.3 Evaluation \u00b6 5.3.1 Question Answering Datasets \u00b6 \u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\u6211\u4eec\u5e94\u8be5\u5bf9\u54ea\u4e2a\u95ee\u9898\u56de\u7b54\u6570\u636e\u96c6\u8fdb\u884c\u8bc4\u4f30\u3002 \u6b63\u5982\u6211\u4eec\u6240\u8ba8\u8bba\u7684\uff0cSQUAD\u662f\u76ee\u524d\u53ef\u7528\u4e8e\u56de\u7b54\u95ee\u9898\u7684\u6700\u5927\u7684\u901a\u7528QA\u6570\u636e\u96c6\u4e4b\u4e00\uff0c\u4f46\u4e0e\u5f00\u653e\u57dfQA\u573a\u666f\u6709\u5f88\u5927\u4e0d\u540c\u3002 \u6211\u4eec\u5efa\u8bae\u5728\u9488\u5bf9\u5f00\u653e\u57df\u95ee\u7b54\u5f00\u53d1\u7684\u5176\u4ed6\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u548c\u8bc4\u4f30\u6211\u4eec\u7684\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u6784\u9020\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u91c7\u7528\u4ee5\u4e0b\u4e09\u4e2a\u6570\u636e\u96c6\uff1a TREC \u6570\u636e\u96c6\u57fa\u4e8eTREC QA\u4efb\u52a1\u57fa\u51c6\u3002\u6211\u4eec\u4f7f\u7528\u5927\u578b\u7248\u672c\uff0c\u5176\u4e2d\u5305\u542b\u603b\u51712180\u4e2a\u95ee\u9898\u3002 WebQuestions \u6570\u636e\u96c6\u65e8\u5728\u56de\u7b54Freebase KB\u4e2d\u7684\u95ee\u9898\u3002\u5b83\u662f\u901a\u8fc7GOOGLE SUGGEST API\u6293\u53d6\u95ee\u9898\uff0c\u7136\u540e\u4f7f\u7528Amazon Mechanical Turk\u83b7\u5f97\u7b54\u6848\u800c\u521b\u5efa\u7684\u3002\u6211\u4eec\u4f7f\u7528\u5b9e\u4f53\u540d\u79f0\u5c06\u6bcf\u4e2a\u7b54\u6848\u8f6c\u6362\u4e3a\u6587\u672c\uff0c\u4ee5\u4f7f\u6570\u636e\u96c6\u4e0d\u5f15\u7528Freebase ID\uff0c\u800c\u4ec5\u7531\u7eaf\u6587\u672c\u95ee\u9898\u5bf9\u7ec4\u6210\u3002 WikiMovies \u6570\u636e\u96c6\u5728\u7535\u5f71\u9886\u57df\u5305\u542b96k\u95ee\u7b54\u5bf9\u3002\u8fd9\u4e9b\u793a\u4f8b\u6700\u521d\u662f\u4eceOMDB\u548cMOVIELENS\u6570\u636e\u5e93\u521b\u5efa\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 Wikipedia \u7684\u5b50\u96c6\u4f5c\u4e3a\u77e5\u8bc6\u6e90(\u7535\u5f71\u9886\u57df\u7684\u6807\u9898\u548c\u6587\u7ae0\u7684\u7b2c\u4e00\u90e8\u5206)\u6765\u56de\u7b54\u8fd9\u4e9b\u793a\u4f8b\u3002 \u6211\u4eec\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u4e0d\u4e00\u5b9a\u662f\u5728\u6765\u81ea Wikipedia \u56de\u7b54\u7684\u80cc\u666f\u4e0b\u6536\u96c6\u7684\u3002 TREC\u6570\u636e\u96c6\u65e8\u5728\u57fa\u4e8e\u6587\u672c\u7684\u95ee\u9898\u89e3\u7b54(TREC\u6587\u6863\u96c6\u4e3b\u8981\u7531\u65b0\u95fb\u4e13\u7ebf\u6587\u7ae0\u7ec4\u6210)\uff0c\u800cWEBQUESTIONS\u548cWIKIMOVIES\u5219\u4e3b\u8981\u7528\u4e8e\u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u9898\u89e3\u7b54\u3002\u6211\u4eec\u5c06\u6240\u6709\u8fd9\u4e9b\u8d44\u6e90\u653e\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u6846\u67b6\u4e2d\uff0c\u5e76\u6d4b\u8bd5\u6211\u4eec\u7684\u7cfb\u7edf\u5bf9\u6240\u6709\u95ee\u9898\u7684\u56de\u7b54\u7a0b\u5ea6\uff0c\u5e0c\u671b\u5b83\u80fd\u53cd\u6620\u51fa\u4e00\u822c\u77e5\u8bc6\u95ee\u7b54\u7684\u6027\u80fd\u3002 \u88685.1\u548c\u56fe5.3\u7ed9\u51fa\u4e86\u8fd9\u4e9b\u95ee\u7b54\u6570\u636e\u96c6\u7684\u8be6\u7ec6\u7edf\u8ba1\u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cSQUAD\u793a\u4f8b\u7684\u5206\u5e03\u4e0e\u5176\u4ed6QA\u6570\u636e\u96c6\u5b8c\u5168\u4e0d\u540c\u3002\u7531\u4e8e\u6784\u9020\u65b9\u6cd5\u7684\u539f\u56e0\uff0cSQUAD\u7684\u95ee\u9898\u66f4\u957f(\u5e73\u574710.4\u4e2a\u4ee4\u724c\u4e0e6.7-7.5\u4e2a\u4ee4\u724c)\u3002\u540c\u6837\uff0c\u6240\u6709\u8fd9\u4e9b\u6570\u636e\u96c6\u90fd\u6709\u7b80\u77ed\u7684\u7b54\u6848(\u5c3d\u7ba1SQUAD\u4e2d\u7684\u7b54\u6848\u7a0d\u957f)\uff0c\u800c\u4e14\u5927\u591a\u6570\u90fd\u662f\u4e8b\u5b9e\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u95ee\u7b54\u6570\u636e\u96c6\u4e2d\u7684\u8bb8\u591a\u95ee\u9898\u53ef\u80fd\u6709\u591a\u4e2a\u7b54\u6848(\u8bf7\u53c2\u89c1\u88685.1\u7684\u201canswers\u201d\u5217)\u3002\u4f8b\u5982\uff0cWEBQUESTIONS\u4e2d\u7684\u95ee\u9898\uff1a\u5728\u5df4\u57fa\u65af\u5766\u4eba\u8bf4\u4ec0\u4e48\u8bed\u8a00\uff1f\u6709\u4e24\u4e2a\u6709\u6548\u7b54\u6848\uff1a\u82f1\u8bed\u548c\u4e4c\u5c14\u90fd\u8bed\u3002\u7531\u4e8e\u6211\u4eec\u7684\u7cfb\u7edf\u65e8\u5728\u8fd4\u56de\u4e00\u4e2a\u7b54\u6848\uff0c\u56e0\u6b64\u5982\u679c\u8bc4\u4f30\u7ed9\u51fa\u4efb\u4f55\u7b54\u6848\uff0c\u5219\u6211\u4eec\u7684\u8bc4\u4f30\u4f1a\u8ba4\u4e3a\u8be5\u9884\u6d4b\u662f\u6b63\u786e\u7684\u3002 5.3.3 Document Retriever Performance \u00b6 \u6211\u4eec\u9996\u5148\u68c0\u67e5\u6240\u6709 QA \u6570\u636e\u96c6\u4e0a\u68c0\u7d22\u6a21\u5757\u7684\u6027\u80fd\u3002 \u88685.2\u5c065.2.2\u8282\u4e2d\u63cf\u8ff0\u7684\u4e24\u79cd\u65b9\u6cd5\u7684\u6027\u80fd\u4e0eWikipedia\u641c\u7d22\u5f15\u64ce\u7684\u6027\u80fd\u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u4ee5\u67e5\u627e\u5305\u542b\u7ed9\u5b9a\u95ee\u9898\u7684\u7b54\u6848\u7684\u6587\u7ae0\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u7cfb\u7edf\u6240\u8fd4\u56de\u7684\u524d5\u4e2a\u76f8\u5173\u9875\u9762\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u76f8\u5173\u95ee\u9898\u7684\u7b54\u6848\uff0c\u8fd9\u4e9b\u95ee\u9898\u7684\u7b54\u6848\u4e0e\u5b83\u4eec\u7684\u4efb\u4f55\u5173\u8054\u7b54\u6848\u7684\u6587\u672c\u8de8\u5ea6\u90fd\u81f3\u5c11\u4e00\u6837\u3002 \u6240\u6709\u6570\u636e\u96c6\u4e0a\u7684\u7ed3\u679c\u5747\u8868\u660e\uff0c\u6211\u4eec\u7684\u7b80\u5355\u65b9\u6cd5\u4f18\u4e8eWikipedia\u641c\u7d22\uff0c\u5c24\u5176\u662f\u4f7f\u7528bigram\u54c8\u5e0c\u3002 \u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u4f7f\u7528Okapi BM25\u8fdb\u884c\u68c0\u7d22\u6216\u4f7f\u7528\u8bcd\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u4f59\u5f26\u8ddd\u79bb(\u901a\u8fc7\u5c06\u95ee\u9898\u548c\u6587\u7ae0\u7f16\u7801\u4e3a\u8bcd\u888b\u5411\u91cf)\uff0c\u6211\u4eec\u53d1\u73b0\u4e24\u8005\u7684\u6548\u679c\u90fd\u8f83\u5dee\u3002 5.4 Future Work \u00b6 \u6211\u4eec\u7684DRQA\u8bc1\u660e\uff0c\u5c06\u4fe1\u606f\u68c0\u7d22\u4e0e\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u76f8\u7ed3\u5408\u662f\u5f00\u653e\u57df\u95ee\u9898\u56de\u7b54\u7684\u6709\u6548\u65b9\u6cd5\u3002\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u7684\u5de5\u4f5c\u671d\u7740\u8fd9\u4e00\u7814\u7a76\u65b9\u5411\u8fc8\u51fa\u7b2c\u4e00\u6b65\u3002\u4f46\u662f\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4ecd\u5904\u4e8e\u65e9\u671f\u9636\u6bb5\uff0c\u8bb8\u591a\u5b9e\u73b0\u7ec6\u8282\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u8fdb\u3002 \u6211\u4eec\u8ba4\u4e3a\u4ee5\u4e0b\u7814\u7a76\u65b9\u5411\u5c06\uff08\u6781\u5927\u5730\uff09\u6539\u5584\u6211\u4eec\u7684DRQA\u7cfb\u7edf\uff0c\u5e94\u4f5c\u4e3a\u672a\u6765\u7684\u5de5\u4f5c\u3002\u786e\u5b9e\uff0c\u5728\u6211\u4eec\u53d1\u5e03\u6211\u4eec\u7684DRQA\u7cfb\u7edf\u540e\u7684\u7b2c\u4e8c\u5e74\u4e2d\uff0c\u5df2\u7ecf\u5b9e\u73b0\u4e86\u4e00\u4e9b\u60f3\u6cd5\uff0c\u6211\u4eec\u8fd8\u5c06\u5728\u672c\u8282\u4e2d\u5bf9\u5176\u8fdb\u884c\u8be6\u7ec6\u63cf\u8ff0\u3002 Aggregating evidence from multiple paragraphs. Using more and better training data. Making the DOCUMENT RETRIEVER trainable. Better DOCUMENT READER module. More analysis is needed. Chapter 6 Conversational Question Answering \u00b6","title":"Neural Reading Comprehension and beyond-2"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#neural-reading-comprehension-and-beyond-2","text":"","title":"Neural Reading Comprehension and beyond-2"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#part-ii-neural-reading-comprehension-applications","text":"","title":"Part II Neural Reading Comprehension: Applications"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#chapter-5-open-domain-question-answering","text":"\u5728\u7b2c\u4e00\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\uff1a\u9605\u8bfb\u7406\u89e3\u7684\u786e\u5207\u8868\u8fbe\u548c\u53d1\u5c55\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u7684\u5173\u952e\u7ec4\u6210\u90e8\u5206\u4ee5\u53ca\u672a\u6765\u7684\u7814\u7a76\u65b9\u5411\u3002\u4f46\u662f\uff0c\u76ee\u524d\u5c1a\u4e0d\u6e05\u695a\u9605\u8bfb\u7406\u89e3\u4ec5\u4ec5\u662f\u7528\u4f5c\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u7684\u4e00\u9879\u4efb\u52a1\uff0c\u8fd8\u662f\u53ef\u4ee5\u4f7f\u4efb\u4e00\u6709\u7528\u7684\u5e94\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u5728\u7b2c\u4e8c\u90e8\u5206\u4e2d\uff0c\u6211\u4eec\u5c06\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u5e76\u8ba8\u8bba\u6211\u4eec\u5728\u6784\u5efa\u5c06\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u5176\u6838\u5fc3\u7ec4\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u65b9\u9762\u6240\u505a\u7684\u52aa\u529b\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u5f00\u653e\u57df\u95ee\u7b54\u4f5c\u4e3a\u9605\u8bfb\u7406\u89e3\u7684\u4e00\u79cd\u5e94\u7528\u3002\u5f00\u653e\u57df\u95ee\u7b54\u4e00\u76f4\u662fNLP\u5386\u53f2\u4e0a\u7684\u4e00\u4e2a\u957f\u671f\u95ee\u9898\u3002\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u7684\u76ee\u6807\u662f\u57fa\u4e8e\u5927\u91cf\u975e\u7ed3\u6784\u5316\u81ea\u7136\u8bed\u8a00\u6587\u6863\uff0c\u7ed3\u6784\u5316\u6570\u636e(\u4f8b\u5982\u77e5\u8bc6\u5e93)\uff0c\u6784\u5efa\u80fd\u591f\u81ea\u52a8\u56de\u7b54\u4eba\u7c7b\u53ef\u80fd\u63d0\u51fa\u7684\u4efb\u4f55(\u7c7b\u4e8b\u5b9e)\u95ee\u9898\u7684\u81ea\u52a8\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002 )\uff0c\u534a\u7ed3\u6784\u5316\u6570\u636e(\u4f8b\u5982\u8868\u683c)\u6216\u5176\u4ed6\u5f62\u5f0f\u7684\u56fe\u7247\u6216\u89c6\u9891\u3002 \u672c\u7ae0\u5b89\u6392\u5982\u4e0b\u3002\u6211\u4eec\u9996\u5148\u5bf9\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u548c\u5386\u53f2\u4e0a\u4e00\u4e9b\u8457\u540d\u7684\u7cfb\u7edf\u8fdb\u884c\u9ad8\u5c42\u6b21\u7684\u6982\u8ff0(\u7b2c5.1\u8282)\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e2a\u6211\u4eec\u6784\u5efa\u7684\u540d\u4e3aDRQA\u7684\u5f00\u653e\u57df\u95ee\u7b54\u7cfb\u7edf(\u7b2c5.2\u8282)\uff0c\u8be5\u7cfb\u7edf\u65e8\u5728\u56de\u7b54\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u4e2d\u7684\u95ee\u9898\u3002\u5b83\u672c\u8d28\u4e0a\u7ed3\u5408\u4e86\u4fe1\u606f\u68c0\u7d22\u6a21\u5757\u548c\u6211\u4eec\u57283.2\u8282\u4e2d\u4ecb\u7ecd\u7684\u9ad8\u6027\u80fd\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u5757\u3002\u6211\u4eec\u5c06\u8fdb\u4e00\u6b65\u8ba8\u8bba\u5982\u4f55\u901a\u8fc7\u4ece\u68c0\u7d22\u6a21\u5757\u521b\u5efa\u53d7\u8fdc\u7a0b\u76d1\u7763\u7684\u8bad\u7ec3\u793a\u4f8b\u6765\u6539\u8fdb\u7cfb\u7edf\u3002\u7136\u540e\uff0c\u6211\u4eec\u5bf9\u591a\u4e2a\u95ee\u7b54\u57fa\u51c6\u8fdb\u884c\u5168\u9762\u8bc4\u4f30(\u7b2c5.3\u8282)\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u57285.4\u8282\u4e2d\u8ba8\u8bba\u5f53\u524d\u7684\u5c40\u9650\u6027\uff0c\u540e\u7eed\u5de5\u4f5c\u548c\u672a\u6765\u7684\u65b9\u5411\u3002","title":"Chapter 5 Open Domain Question Answering"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#51-a-brief-history-of-open-domain-qa","text":"\u81ea1960\u5e74\u4ee3\u4ee5\u6765\uff0c\u95ee\u9898\u89e3\u7b54\u662fNLP\u7cfb\u7edf\u6700\u65e9\u7684\u4efb\u52a1\u4e4b\u4e00\u3002\u6700\u65e9\u7684\u73b0\u4ee3\u7cfb\u7edf\u662f\u57fa\u4e8e\u6587\u672c\u7684\u95ee\u7b54\u7cfb\u7edf\uff0c\u5b83\u662fPROTO-SYNTHEX\u7cfb\u7edf\u3002\u7cfb\u7edf\u9996\u5148\u6839\u636e\u95ee\u9898\u4e2d\u7684\u5185\u5bb9\u8bcd\u5236\u5b9a\u67e5\u8be2\uff0c\u6839\u636e\u4e0e\u95ee\u9898\u91cd\u53e0\u7684\u9891\u7387\u52a0\u6743\u9879\u68c0\u7d22\u5019\u9009\u7b54\u6848\u53e5\u5b50\uff0c\u6700\u540e\u8fdb\u884c\u4f9d\u8d56\u9879\u89e3\u6790\u5339\u914d\u4ee5\u83b7\u5f97\u6700\u7ec8\u7b54\u6848\u3002\u53e6\u4e00\u4e2a\u8457\u540d\u7684\u7cfb\u7edfMURAX\u65e8\u5728\u4f7f\u7528\u6d45\u5c42\u8bed\u8a00\u5904\u7406\u548c\u4fe1\u606f\u68c0\u7d22\u6280\u672f\u56de\u7b54GROLIER\u5728\u7ebf\u767e\u79d1\u5168\u4e66\u4e2d\u7684\u4e00\u822c\u77e5\u8bc6\u95ee\u9898\u3002 \u81ea1999\u5e74\u4ee5\u6765\uff0c\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u7684\u5174\u8da3\u6709\u6240\u589e\u52a0\u3002\u95ee\u9898\u89e3\u7b54\u8d5b\u9053\u9996\u6b21\u88ab\u7eb3\u5165TREC\u6bd4\u8d5b\u3002\u9996\u5148\u5b9a\u4e49\u4efb\u52a1\uff0c\u7cfb\u7edf\u68c0\u7d22\u5305\u542b\u5f00\u653e\u57df\u95ee\u9898\u7b54\u6848\u7684\u6587\u672c\u7247\u6bb5\u3002\u5b83\u523a\u6fc0\u4e86\u5f53\u65f6\u5f00\u53d1\u7684\u5404\u79cd\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\uff0c\u5e76\u4e14\u5927\u591a\u6570\u7cfb\u7edf\u7531\u4e24\u4e2a\u9636\u6bb5\u7ec4\u6210\uff1a\u4e00\u4e2aIR\u7cfb\u7edf\uff0c\u7528\u4e8e\u9009\u62e9\u4e0e\u8be5\u95ee\u9898\u4ea7\u751f\u7684\u67e5\u8be2\u76f8\u5339\u914d\u7684\u524dn\u4e2a\u6587\u6863\u6216\u6bb5\u843d\uff1b\u4ee5\u53ca\u4e00\u4e2a\u57fa\u4e8e\u7a97\u53e3\u7684\u5355\u8bcd\u8bc4\u5206\u7cfb\u7edf\uff0c\u7528\u4e8e\u67e5\u660e\u53ef\u80fd\u7684\u7b54\u6848\u3002 \u6700\u8fd1\uff0c\u968f\u7740\u77e5\u8bc6\u5e93 KB \u7684\u53d1\u5c55\uff0c\u4f8b\u5982FREEBASE\u548cDBPEDIA\uff0c\u5728\u77e5\u8bc6\u5e93\u7684\u95ee\u7b54\u4e2d\uff0c\u51fa\u73b0\u4e86\u8bb8\u591a\u521b\u65b0\u3002\u57fa\u4e8eFREEBASE\u7684WEBQUESTIONS\u548cSIMPLEQUESTIONS\u6216\u57fa\u4e8e\u81ea\u52a8\u63d0\u53d6\u7684KB(\u4f8b\u5982OpenIE\u4e09\u5143\u7ec4\u548cNELL)\u3002\u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u9898\u89e3\u7b54\u5df2\u7ecf\u53d6\u5f97\u4e86\u5f88\u591a\u8fdb\u5c55\uff0c\u4e3b\u8981\u7684\u65b9\u6cd5\u662f\u57fa\u4e8e\u8bed\u4e49\u89e3\u6790\u6216\u4fe1\u606f\u63d0\u53d6\u6280\u672f\u3002\u4f46\u662f\uff0c\u77e5\u8bc6\u5e93\u5177\u6709\u56fa\u6709\u7684\u5c40\u9650\u6027(\u4e0d\u5b8c\u6574\u548c\u56fa\u5b9a\u7684\u6a21\u5f0f)\uff0c\u8fd9\u4fc3\u4f7f\u7814\u7a76\u4eba\u5458\u6700\u8fd1\u56de\u5230\u539f\u59cb\u6587\u672c\u7b54\u590d\u7684\u539f\u59cb\u573a\u666f\u4e2d\u3002 \u8fd8\u6709\u5927\u91cf\u4f7f\u7528\u5927\u91cf\u8d44\u6e90\u7684\u9ad8\u5ea6\u5f00\u53d1\u7684\u5168\u6d41\u6c34\u7ebf QA \u65b9\u6cd5\uff0c\u5305\u62ec\u6587\u672c\u96c6\u5408(\u7f51\u9875\uff0cWikipedia\uff0c\u65b0\u95fb\u4e13\u7ebf\u6587\u7ae0)\u548c\u7ed3\u6784\u5316\u77e5\u8bc6\u5e93(FREEBASE\uff0cDBPEDIA\u7b49)\u3002\u51e0\u4e2a\u8457\u540d\u7684\u7cfb\u7edf\u5305\u62ecMicrosoft\u7684ASKMSR\uff0cIBM\u7684DEEPQA\u548cYODAQA\u3002 ASKMSR\u662f\u57fa\u4e8e\u641c\u7d22\u5f15\u64ce\u7684\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\uff0c\u5b83\u4f9d\u8d56\u4e8e\u201c\u6570\u636e\u5197\u4f59\u800c\u4e0d\u662f\u5bf9\u95ee\u9898\u6216\u5019\u9009\u7b54\u6848\u7684\u590d\u6742\u8bed\u8a00\u5206\u6790\u201d\u3002DEEPQA\u662f\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u7531\u8bb8\u591a\u4e0d\u540c\u7684\u90e8\u5206\u7ec4\u6210\uff0c\u5b83\u4f9d\u8d56\u4e8e\u975e\u7ed3\u6784\u5316\u4fe1\u606f\u4ee5\u53ca\u7ed3\u6784\u5316\u6570\u636e\u6765\u751f\u6210\u5019\u9009\u7b54\u6848\u6216\u5bf9\u8bc1\u636e\u8fdb\u884c\u6295\u7968\u3002\u56fe5.1\u8bf4\u660e\u4e86\u9ad8\u7ea7\u67b6\u6784\u3002 YODAQA\u662f\u4e00\u4e2a\u4ee5 DEEPQA \u4e3a\u6a21\u578b\u7684\u5f00\u6e90\u7cfb\u7edf\uff0c\u7279\u522b\u662f\u5c06\u7f51\u7ad9\uff0c\u6570\u636e\u5e93\u548c Wikipedia \u7ec4\u5408\u5728\u4e00\u8d77\u3002\u4e0e\u8fd9\u4e9b\u65b9\u6cd5\u8fdb\u884c\u6bd4\u8f83\u53ef\u4e3a\u6027\u80fd\u7684\u201c\u4e0a\u9650\u201d\u57fa\u51c6\u63d0\u4f9b\u6709\u7528\u7684\u53c2\u7167\u3002 \u6211\u4eec\u7684DRQA\u7cfb\u7edf(\u7b2c5.2\u8282)\u4e13\u6ce8\u4e8e\u4f7f\u7528Wikipedia\u4f5c\u4e3a\u552f\u4e00\u77e5\u8bc6\u6e90\u7684\u95ee\u9898\u89e3\u7b54\uff0c\u4f8b\u5982\u5728\u767e\u79d1\u5168\u4e66\u4e2d\u5bfb\u627e\u7b54\u6848\u65f6\u6240\u505a\u7684\u56de\u7b54\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u5df2\u7ecf\u6709\u5f88\u591a\u5173\u4e8e\u4f7f\u7528Wikipedia\u4f5c\u4e3a\u8d44\u6e90\u7684\u95ee\u9898\u89e3\u7b54\u6a21\u578b\u3002 Ryu \u7b49\u4eba\u4f7f\u7528\u57fa\u4e8e Wikipedia \u7684\u77e5\u8bc6\u6a21\u578b\u6267\u884c\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u3002\u4ed6\u4eec\u6839\u636e\u4e0d\u540c\u7c7b\u578b\u7684\u534a\u7ed3\u6784\u5316\u77e5\u8bc6(\u4f8b\u5982\u4fe1\u606f\u6846\uff0c\u6587\u7ae0\u7ed3\u6784\uff0c\u7c7b\u522b\u7ed3\u6784\u548c\u5b9a\u4e49)\u5c06\u6587\u7ae0\u5185\u5bb9\u4e0e\u5176\u4ed6\u591a\u4e2a\u7b54\u6848\u5339\u914d\u6a21\u5757\u7ed3\u5408\u5728\u4e00\u8d77\u3002\u540c\u6837\uff0cAhn\u7b49\u4eba\u4e5f\u5c06Wikipedia\u4f5c\u4e3a\u6587\u672c\u8d44\u6e90\u4e0e\u5176\u4ed6\u8d44\u6e90\u76f8\u7ed3\u5408\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u8fd8\u5177\u6709\u5bf9\u5176\u4ed6\u6587\u6863\u7684\u4fe1\u606f\u68c0\u7d22\u3002Buscaldi\u548cRosso\u8fd8\u4eceWikipedia\u6316\u6398\u77e5\u8bc6\u4ee5\u8fdb\u884c\u95ee\u9898\u89e3\u7b54\u3002 \u4ed6\u4eec\u6ca1\u6709\u5c06\u5176\u7528\u4f5c\u5bfb\u627e\u95ee\u9898\u7b54\u6848\u7684\u8d44\u6e90\uff0c\u800c\u662f\u4e13\u6ce8\u4e8e\u9a8c\u8bc1\u5176\u95ee\u9898\u89e3\u7b54\u7cfb\u7edf\u8fd4\u56de\u7684\u7b54\u6848\uff0c\u5e76\u4f7f\u7528Wikipedia\u7c7b\u522b\u6765\u786e\u5b9a\u5e94\u4e0e\u9884\u671f\u7b54\u6848\u5339\u914d\u7684\u4e00\u7ec4\u6a21\u5f0f\u3002 \u5728\u6211\u4eec\u7684\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u4ec5\u8003\u8651\u6587\u672c\u7406\u89e3\uff0c\u5e76\u4f7f\u7528Wikipedia\u6587\u672c\u6587\u6863\u4f5c\u4e3a\u552f\u4e00\u8d44\u6e90\uff0c\u4ee5\u5f3a\u8c03\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1 \u3002 \u6211\u4eec\u76f8\u4fe1\uff0c\u6dfb\u52a0\u5176\u4ed6\u77e5\u8bc6\u8d44\u6e90\u6216\u4fe1\u606f\u5c06\u8fdb\u4e00\u6b65\u6539\u5584\u6211\u4eec\u7cfb\u7edf\u7684\u6027\u80fd\u3002","title":"5.1 A Brief History of Open-domain QA"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#52-our-system-drqa","text":"","title":"5.2 Our System: DRQA"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#521-an-overview","text":"\u5728\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u6211\u4eec\u7684\u7cfb\u7edfDRQA\uff0c \u8be5\u7cfb\u7edf\u7740\u91cd\u4e8e\u4f7f\u7528\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u4f5c\u4e3a\u6587\u6863\u7684\u552f\u4e00\u77e5\u8bc6\u6e90\u6765\u56de\u7b54\u95ee\u9898 \u3002\u6211\u4eec\u6709\u5174\u8da3\u6784\u5efa\u4e00\u4e2a\u901a\u7528\u77e5\u8bc6\u7684\u95ee\u9898\u56de\u7b54\u7cfb\u7edf\uff0c\u8be5\u7cfb\u7edf\u53ef\u4ee5\u56de\u7b54\u5305\u542b\u7b54\u6848\u5e76\u53ef\u4ee5\u4eceWikipedia\u4e2d\u63d0\u53d6\u7684\u4efb\u4f55\u5f62\u5f0f\u7684\u95ee\u9898\u3002\u6211\u4eec\u9009\u62e9\u4f7f\u7528Wikipedia\u7684\u539f\u56e0\u6709\u5f88\u591a\uff1a Wikipedia\u662f\u4e0d\u65ad\u53d1\u5c55\u7684\u5927\u89c4\u6a21\uff0c\u4e30\u5bcc\uff0c\u8be6\u7ec6\u4fe1\u606f\u7684\u6765\u6e90\uff0c\u53ef\u4ee5\u4fc3\u8fdb\u667a\u80fd\u673a\u5668\u7684\u53d1\u5c55\u3002\u4e0e\u8bf8\u5982FREEBASE\u6216DBPEDIA\u4e4b\u7c7b\u7684\u77e5\u8bc6\u5e93(KB)\u4e00\u6837\uff0c\u5b83\u4eec\u5bf9\u4e8e\u8ba1\u7b97\u673a\u6765\u8bf4\u8f83\u5bb9\u6613\u5904\u7406\uff0c\u4f46\u5bf9\u4e8e\u5f00\u653e\u57df\u95ee\u9898\u7684\u56de\u7b54\u5374\u8fc7\u4e8e\u7a00\u758f\uff0c\u56e0\u6b64Wikipedia\u5305\u542b\u4eba\u7c7b\u611f\u5174\u8da3\u7684\u6700\u65b0\u77e5\u8bc6\u3002 \u8bb8\u591a\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6(\u4f8b\u5982SQUAD)\u5efa\u7acb\u5728Wikipedia\u4e0a\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u5229\u7528\u8fd9\u4e9b\u8d44\u6e90\uff0c\u6211\u4eec\u5c06\u5728\u4e0d\u4e45\u540e\u5bf9\u5176\u8fdb\u884c\u63cf\u8ff0\u3002 \u603b\u4f53\u800c\u8a00\uff0c\u7ef4\u57fa\u767e\u79d1\u7684\u6587\u7ae0\u7b80\u6d01\uff0c\u9ad8\u8d28\u91cf\u4e14\u683c\u5f0f\u6b63\u786e\uff0c\u56e0\u6b64\u662f\u5f00\u653e\u57df\u95ee\u7b54\u975e\u5e38\u6709\u7528\u7684\u8d44\u6e90 \u4f7f\u7528Wikipedia\u6587\u7ae0\u4f5c\u4e3a\u77e5\u8bc6\u6e90\u4f1a\u5bfc\u81f4\u95ee\u9898\u89e3\u7b54\u7684\u4efb\u52a1\u7ed3\u5408\u4e86\u5927\u89c4\u6a21\u5f00\u653e\u57df\u95ee\u7b54\u548c\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218\u3002\u4e3a\u4e86\u56de\u7b54\u4efb\u4f55\u95ee\u9898\uff0c\u5fc5\u987b\u9996\u5148\u68c0\u7d22\u8d85\u8fc7500\u4e07\u4e2a\u9879\u76ee\u4e2d\u7684\u51e0\u7bc7\u76f8\u5173\u6587\u7ae0\uff0c\u7136\u540e\u4ed4\u7ec6\u626b\u63cf\u5b83\u4eec\u4ee5\u627e\u51fa\u7b54\u6848\u3002\u8fd9\u8ba9\u4eba\u60f3\u8d77\u4f20\u7edf\u7684TREC QA\u7cfb\u7edf\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u4f46\u662f\u6211\u4eec\u8ba4\u4e3a\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5c06\u5728\u9605\u8bfb\u68c0\u7d22\u5230\u7684\u6587\u7ae0/\u6bb5\u843d\u4ee5\u83b7\u53d6\u6700\u7ec8\u7b54\u6848\u65b9\u9762\u53d1\u6325\u5173\u952e\u4f5c\u7528\u3002\u5982\u56fe5.2\u6240\u793a\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4e3b\u8981\u7531\u4e24\u4e2a\u7ec4\u4ef6\u7ec4\u6210\uff1a(1)\u7528\u4e8e\u67e5\u627e\u76f8\u5173\u6587\u7ae0\u7684DOCUMENT RETRIEVER\u6a21\u5757\uff0c\u4ee5\u53ca(2)\u7528\u4e8e\u4ece\u5355\u4e2a\u6587\u6863\u6216\u5c11\u91cf\u96c6\u5408\u4e2d\u63d0\u53d6\u7b54\u6848\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578bDOCUMENT READER\u3002 \u6211\u4eec\u7684\u7cfb\u7edf\u5c06Wikipedia\u89c6\u4e3a \u6587\u7ae0\u7684\u96c6\u5408 \uff0c\u5e76\u4e14 \u4e0d\u4f9d\u8d56\u4e8e\u5176\u5185\u90e8\u56fe\u7ed3\u6784 \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u662f\u901a\u7528\u7684\uff0c\u53ef\u4ee5\u8f6c\u6362\u4e3a\u5176\u4ed6\u6587\u6863\uff0c\u4e66\u7c4d\u751a\u81f3\u6bcf\u65e5\u66f4\u65b0\u7684\u62a5\u7eb8\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u3002","title":"5.2.1 An Overview"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#522-document-retriever","text":"\u9075\u5faa\u7ecf\u5178\u7684QA\u7cfb\u7edf\uff0c\u6211\u4eec\u4f7f\u7528\u9ad8\u6548\u7684(\u975e\u673a\u5668\u5b66\u4e60)\u6587\u6863\u68c0\u7d22\u7cfb\u7edf\u6765\u9996\u5148\u7f29\u5c0f\u641c\u7d22\u8303\u56f4\uff0c\u5e76\u4e13\u6ce8\u4e8e\u4ec5\u9605\u8bfb\u53ef\u80fd\u76f8\u5173\u7684\u6587\u7ae0\u3002 \u4e0e\u5185\u7f6e\u7684\u57fa\u4e8e ElasticSearch \u7684 Wikipedia \u641c\u7d22API\u76f8\u6bd4\uff0c\u7b80\u5355\u7684\u5012\u6392\u7d22\u5f15\u67e5\u627e\u540e\u518d\u8fdb\u884c(term vector model scoring)\u672f\u8bed\u5411\u91cf\u6a21\u578b\u8bc4\u5206\uff0c\u5728\u8bb8\u591a\u4efb\u52a1\u7c7b\u578b\u4e0a\u90fd\u80fd\u5f88\u597d\u5730\u5b8c\u6210\u6b64\u4efb\u52a1\u3002\u5c06\u6587\u7ae0\u548c\u95ee\u9898\u4f5c\u4e3aTF-IDF\u52a0\u6743\u8bcd\u888b\u5411\u91cf\u8fdb\u884c\u6bd4\u8f83\u3002 \u6211\u4eec\u901a\u8fc7\u4f7f\u7528 n-gram \u7279\u5f81\u8003\u8651\u5c40\u90e8\u5355\u8bcd\u987a\u5e8f\u6765\u8fdb\u4e00\u6b65\u6539\u5584\u6211\u4eec\u7684\u7cfb\u7edf\u3002\u6211\u4eec\u6027\u80fd\u6700\u597d\u7684\u7cfb\u7edf\u901a\u8fc7\u4f7f\u7528\u6563\u5217\u5c06bigram\u6620\u5c04\u5230 \\(2^{24}\\) bins(with an unsigned murmur3 hash)\uff0c\u4ece\u800c\u5728\u4fdd\u6301\u901f\u5ea6\u548c\u5185\u5b58\u6548\u7387\u7684\u540c\u65f6\u4f7f\u7528bigram\u8ba1\u6570\u3002 \u901a\u8fc7\u5c06DOCUMENT RETRIEVER\u8bbe\u7f6e\u4e3a\u8fd4\u56de\u7ed9\u5b9a\u4efb\u4f55\u95ee\u9898\u76845\u7bc7Wikipedia\u6587\u7ae0\uff0c\u6211\u4eec\u5c06\u5176\u7528\u4f5c\u5b8c\u6574\u6a21\u578b\u7684\u7b2c\u4e00\u90e8\u5206\u3002 \u8fd9\u4e9b\u6587\u7ae0\u7136\u540e\u7531DOCUMENT READER\u5904\u7406\u3002","title":"5.2.2 Document Retriever"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#523-document-reader","text":"DOCUMENT READER \u65e8\u5728\u9605\u8bfb\u6240\u6709\u6bb5\u843d\u5e76\u4ece\u4e2d\u63d0\u53d6\u53ef\u80fd\u7684\u7b54\u6848\u3002\u8fd9\u6b63\u662f\u6211\u4eec\u5728\u57fa\u4e8e\u8de8\u5ea6\u7684\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e2d\u6240\u505a\u7684\u8bbe\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u57283.2\u8282\u4e2d\u63cf\u8ff0\u7684STANFORD ATTENTIVE READER\u6a21\u578b\u76f4\u63a5\u52a0\u5165\u6b64\u6d41\u6c34\u7ebf\u4e2d\u3002 \u6211\u4eec\u5c06\u51fa\u73b0\u5728\u524d5\u7bc7\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u6bb5\u843d\u90fd\u8f93\u5165\u7ecf\u8fc7\u8bad\u7ec3\u7684\u6587\u6863\u9605\u8bfb\u5668\uff0c\u5b83\u53ef\u4ee5\u7528\u4fe1\u5fc3\u5206\u6570\u6765\u9884\u6d4b\u7b54\u6848\u8303\u56f4\u3002 \u4e3a\u4e86\u4f7f\u5206\u6570\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u68c0\u7d22\u5230\u7684\u6587\u6863\u4e2d\u7684\u5404\u4e2a\u6bb5\u843d\u4e4b\u95f4\u517c\u5bb9\uff0c\u6211\u4eec\u4f7f\u7528\u975e\u5f52\u4e00\u5316\u6307\u6570\uff0c\u5e76\u5728\u6240\u6709\u8003\u8651\u7684\u6bb5\u843d\u8303\u56f4\u5185\u91c7\u7528argmax \u4f5c\u4e3a\u6700\u7ec8\u9884\u6d4b\u3002 \u8fd9\u53ea\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u5e76\u4e14\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u53ef\u4ee5\u6c47\u603b\u4e0d\u540c\u6bb5\u843d\u7684\u8bc1\u636e\u3002 \u6211\u4eec\u5c06\u57285.4\u8282\u4e2d\u8ba8\u8bba\u672a\u6765\u7684\u5de5\u4f5c\u3002","title":"5.2.3 Document Reader"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#524-distant-supervision","text":"\u6211\u4eec\u5df2\u7ecf\u5efa\u7acb\u4e86\u5b8c\u6574\u7684\u6d41\u6c34\u7ebf\uff0c\u5176\u4e2d\u96c6\u6210\u4e86\u7ecf\u5178\u7684\u68c0\u7d22\u6a21\u5757\u548c\u6211\u4eec\u4ee5\u524d\u7684\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7ec4\u4ef6\u3002\u5269\u4e0b\u7684\u5173\u952e\u95ee\u9898\u662f\u6211\u4eec\u5982\u4f55\u4e3a\u5f00\u653e\u57df\u95ee\u7b54\u8bbe\u7f6e\u8bad\u7ec3\u8be5\u9605\u8bfb\u7406\u89e3\u6a21\u5757\uff1f \u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u5c31\u662f\u5c06SQuAD\u6570\u636e\u96c6\u4f5c\u4e3a\u8bad\u7ec3\u8bed\u6599\u5e93\u4f7f\u7528\uff0c\u8be5\u6570\u636e\u96c6\u4e5f\u5efa\u7acb\u5728Wikipedia\u6bb5\u843d\u7684\u57fa\u7840\u4e0a\u3002\u4f46\u662f\uff0c\u6b64\u65b9\u6cd5\u53d7\u5230\u4ee5\u4e0b\u65b9\u5f0f\u7684\u9650\u5236\uff1a \u6b63\u5982\u6211\u4eec\u5728\u7b2c4.2\u8282\u4e2d\u5148\u524d\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u5728SQUAD\u4e2d\u7684\u95ee\u9898\u662f\u5728\u6ce8\u91ca\u8005\u770b\u5230\u6bb5\u843d\u4e4b\u540e\u7f16\u5199\u7684\uff0c\u4ee5\u786e\u4fdd\u53ef\u4ee5\u901a\u8fc7\u6bb5\u843d\u4e2d\u7684\u8de8\u5ea6\u6765\u56de\u7b54\u3002\u5f53\u4eba\u4eec\u9996\u5148\u60f3\u5230\u4e00\u4e2a\u95ee\u9898\u5e76\u5c1d\u8bd5\u4eceWeb\u6216\u5176\u4ed6\u6765\u6e90\u627e\u51fa\u4ed6\u7684\u7b54\u6848\u65f6\uff0c\u8fd9\u79cd\u5206\u5e03\u662f\u975e\u5e38\u5177\u4f53\u7684\uff0c\u5e76\u4e14\u4e0e\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u95ee\u9898\u89e3\u7b54\u4e0d\u540c\u3002 \u8bb8\u591aSQUAD\u95ee\u9898\u786e\u5b9e\u4e0e\u4e0a\u4e0b\u6587\u6709\u5173\u3002\u8fd9\u4e9b\u95ee\u9898\u672c\u8eab\u65e0\u6cd5\u7406\u89e3\uff0c\u56e0\u6b64\u5bf9\u4e8e\u5f00\u653e\u57df\u95ee\u7b54\u6beb\u65e0\u7528\u5904\u3002 Clark\u548cGardner \u4f30\u8ba1SQUAD\u4e2d\u7ea632.6\uff05\u7684\u95ee\u9898\u4f9d\u8d56\u4e8e\u6587\u6863\u6216\u6bb5\u843d\u3002 \u6700\u540e\uff0cSQuAD\u7684\u5927\u5c0f\u5f88\u5c0f(8\u4e07\u4e2a\u8bad\u7ec3\u793a\u4f8b)\u3002 \u5982\u679c\u6211\u4eec\u53ef\u4ee5\u6536\u96c6\u66f4\u591a\u7684\u57f9\u8bad\u793a\u4f8b\uff0c\u5219\u5e94\u8be5\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u7cfb\u7edf\u6027\u80fd\u3002 \u4e3a\u4e86\u514b\u670d\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u79cd\u53ef\u4ee5\u4ece\u5176\u4ed6\u95ee\u7b54\u8d44\u6e90\u4e2d\u81ea\u52a8\u521b\u5efa\u5176\u4ed6\u8bad\u7ec3\u793a\u4f8b\u7684\u65b9\u6cd5\u3002\u60f3\u6cd5\u662f\u91cd\u65b0\u4f7f\u7528\u6211\u4eec\u6784\u5efa\u7684\u6709\u6548\u4fe1\u606f\u68c0\u7d22\u6a21\u5757\uff1a\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u6709\u4e00\u4e2a\u95ee\u9898\u7b54\u6848\u5bf9 \\((q,a)\\) \uff0c\u5e76\u4e14\u68c0\u7d22\u6a21\u5757\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u627e\u5230\u4e0e\u95ee\u9898 q \u76f8\u5173\u4e14\u6bb5\u843d\u4e2d\u5305\u542b\u7b54\u6848\u7247\u6bb5 a \u7684\u6587\u7ae0 p\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4ee5 \\((p,q,a)\\) \u4e09\u5143\u7ec4\u7684\u5f62\u5f0f\u521b\u5efa\u4e00\u4e2a\u8fdc\u7a0b\u76d1\u7763\u7684\u8bad\u7ec3\u793a\u4f8b\uff0c\u4ee5\u8bad\u7ec3\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff1a $$ f:(q,a) \\to (p,q,a) \\ if p \\in \\text{Document Retriever} (q) \\text{and} a \\text{appears in} p $$ \u8fd9\u4e2a\u60f3\u6cd5\u4e0e\u4f7f\u7528 distant supervision \u8fdb\u884c\u5173\u7cfb\u63d0\u53d6\u7684\u6d41\u884c\u65b9\u6cd5\u5f88\u76f8\u4f3c\u3002\u5c3d\u7ba1\u8fd9\u4e9b\u793a\u4f8b\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53ef\u80fd\u5f88\u5608\u6742\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u4fbf\u5b9c\u7684\u89e3\u51b3\u65b9\u6848\u6765\u4e3a\u5f00\u653e\u57df\u95ee\u9898\u89e3\u7b54\u521b\u5efadistant supervision\u7684\u793a\u4f8b\uff0c\u5e76\u4e14\u53ef\u4ee5\u662fSQUAD\u793a\u4f8b\u7684\u6709\u7528\u8865\u5145\u3002 \u6211\u4eec\u5c06\u5728\u7b2c5.3\u8282\u4e2d\u63cf\u8ff0\u8fd9\u4e9b\u8fdc\u7a0b\u76d1\u7763\u793a\u4f8b\u7684\u6709\u6548\u6027\u3002","title":"5.2.4 Distant Supervision"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#53-evaluation","text":"","title":"5.3 Evaluation"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#531-question-answering-datasets","text":"\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\u6211\u4eec\u5e94\u8be5\u5bf9\u54ea\u4e2a\u95ee\u9898\u56de\u7b54\u6570\u636e\u96c6\u8fdb\u884c\u8bc4\u4f30\u3002 \u6b63\u5982\u6211\u4eec\u6240\u8ba8\u8bba\u7684\uff0cSQUAD\u662f\u76ee\u524d\u53ef\u7528\u4e8e\u56de\u7b54\u95ee\u9898\u7684\u6700\u5927\u7684\u901a\u7528QA\u6570\u636e\u96c6\u4e4b\u4e00\uff0c\u4f46\u4e0e\u5f00\u653e\u57dfQA\u573a\u666f\u6709\u5f88\u5927\u4e0d\u540c\u3002 \u6211\u4eec\u5efa\u8bae\u5728\u9488\u5bf9\u5f00\u653e\u57df\u95ee\u7b54\u5f00\u53d1\u7684\u5176\u4ed6\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u548c\u8bc4\u4f30\u6211\u4eec\u7684\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u6784\u9020\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u91c7\u7528\u4ee5\u4e0b\u4e09\u4e2a\u6570\u636e\u96c6\uff1a TREC \u6570\u636e\u96c6\u57fa\u4e8eTREC QA\u4efb\u52a1\u57fa\u51c6\u3002\u6211\u4eec\u4f7f\u7528\u5927\u578b\u7248\u672c\uff0c\u5176\u4e2d\u5305\u542b\u603b\u51712180\u4e2a\u95ee\u9898\u3002 WebQuestions \u6570\u636e\u96c6\u65e8\u5728\u56de\u7b54Freebase KB\u4e2d\u7684\u95ee\u9898\u3002\u5b83\u662f\u901a\u8fc7GOOGLE SUGGEST API\u6293\u53d6\u95ee\u9898\uff0c\u7136\u540e\u4f7f\u7528Amazon Mechanical Turk\u83b7\u5f97\u7b54\u6848\u800c\u521b\u5efa\u7684\u3002\u6211\u4eec\u4f7f\u7528\u5b9e\u4f53\u540d\u79f0\u5c06\u6bcf\u4e2a\u7b54\u6848\u8f6c\u6362\u4e3a\u6587\u672c\uff0c\u4ee5\u4f7f\u6570\u636e\u96c6\u4e0d\u5f15\u7528Freebase ID\uff0c\u800c\u4ec5\u7531\u7eaf\u6587\u672c\u95ee\u9898\u5bf9\u7ec4\u6210\u3002 WikiMovies \u6570\u636e\u96c6\u5728\u7535\u5f71\u9886\u57df\u5305\u542b96k\u95ee\u7b54\u5bf9\u3002\u8fd9\u4e9b\u793a\u4f8b\u6700\u521d\u662f\u4eceOMDB\u548cMOVIELENS\u6570\u636e\u5e93\u521b\u5efa\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 Wikipedia \u7684\u5b50\u96c6\u4f5c\u4e3a\u77e5\u8bc6\u6e90(\u7535\u5f71\u9886\u57df\u7684\u6807\u9898\u548c\u6587\u7ae0\u7684\u7b2c\u4e00\u90e8\u5206)\u6765\u56de\u7b54\u8fd9\u4e9b\u793a\u4f8b\u3002 \u6211\u4eec\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u4e0d\u4e00\u5b9a\u662f\u5728\u6765\u81ea Wikipedia \u56de\u7b54\u7684\u80cc\u666f\u4e0b\u6536\u96c6\u7684\u3002 TREC\u6570\u636e\u96c6\u65e8\u5728\u57fa\u4e8e\u6587\u672c\u7684\u95ee\u9898\u89e3\u7b54(TREC\u6587\u6863\u96c6\u4e3b\u8981\u7531\u65b0\u95fb\u4e13\u7ebf\u6587\u7ae0\u7ec4\u6210)\uff0c\u800cWEBQUESTIONS\u548cWIKIMOVIES\u5219\u4e3b\u8981\u7528\u4e8e\u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u9898\u89e3\u7b54\u3002\u6211\u4eec\u5c06\u6240\u6709\u8fd9\u4e9b\u8d44\u6e90\u653e\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u6846\u67b6\u4e2d\uff0c\u5e76\u6d4b\u8bd5\u6211\u4eec\u7684\u7cfb\u7edf\u5bf9\u6240\u6709\u95ee\u9898\u7684\u56de\u7b54\u7a0b\u5ea6\uff0c\u5e0c\u671b\u5b83\u80fd\u53cd\u6620\u51fa\u4e00\u822c\u77e5\u8bc6\u95ee\u7b54\u7684\u6027\u80fd\u3002 \u88685.1\u548c\u56fe5.3\u7ed9\u51fa\u4e86\u8fd9\u4e9b\u95ee\u7b54\u6570\u636e\u96c6\u7684\u8be6\u7ec6\u7edf\u8ba1\u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cSQUAD\u793a\u4f8b\u7684\u5206\u5e03\u4e0e\u5176\u4ed6QA\u6570\u636e\u96c6\u5b8c\u5168\u4e0d\u540c\u3002\u7531\u4e8e\u6784\u9020\u65b9\u6cd5\u7684\u539f\u56e0\uff0cSQUAD\u7684\u95ee\u9898\u66f4\u957f(\u5e73\u574710.4\u4e2a\u4ee4\u724c\u4e0e6.7-7.5\u4e2a\u4ee4\u724c)\u3002\u540c\u6837\uff0c\u6240\u6709\u8fd9\u4e9b\u6570\u636e\u96c6\u90fd\u6709\u7b80\u77ed\u7684\u7b54\u6848(\u5c3d\u7ba1SQUAD\u4e2d\u7684\u7b54\u6848\u7a0d\u957f)\uff0c\u800c\u4e14\u5927\u591a\u6570\u90fd\u662f\u4e8b\u5b9e\u3002 \u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u95ee\u7b54\u6570\u636e\u96c6\u4e2d\u7684\u8bb8\u591a\u95ee\u9898\u53ef\u80fd\u6709\u591a\u4e2a\u7b54\u6848(\u8bf7\u53c2\u89c1\u88685.1\u7684\u201canswers\u201d\u5217)\u3002\u4f8b\u5982\uff0cWEBQUESTIONS\u4e2d\u7684\u95ee\u9898\uff1a\u5728\u5df4\u57fa\u65af\u5766\u4eba\u8bf4\u4ec0\u4e48\u8bed\u8a00\uff1f\u6709\u4e24\u4e2a\u6709\u6548\u7b54\u6848\uff1a\u82f1\u8bed\u548c\u4e4c\u5c14\u90fd\u8bed\u3002\u7531\u4e8e\u6211\u4eec\u7684\u7cfb\u7edf\u65e8\u5728\u8fd4\u56de\u4e00\u4e2a\u7b54\u6848\uff0c\u56e0\u6b64\u5982\u679c\u8bc4\u4f30\u7ed9\u51fa\u4efb\u4f55\u7b54\u6848\uff0c\u5219\u6211\u4eec\u7684\u8bc4\u4f30\u4f1a\u8ba4\u4e3a\u8be5\u9884\u6d4b\u662f\u6b63\u786e\u7684\u3002","title":"5.3.1 Question Answering Datasets"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#533-document-retriever-performance","text":"\u6211\u4eec\u9996\u5148\u68c0\u67e5\u6240\u6709 QA \u6570\u636e\u96c6\u4e0a\u68c0\u7d22\u6a21\u5757\u7684\u6027\u80fd\u3002 \u88685.2\u5c065.2.2\u8282\u4e2d\u63cf\u8ff0\u7684\u4e24\u79cd\u65b9\u6cd5\u7684\u6027\u80fd\u4e0eWikipedia\u641c\u7d22\u5f15\u64ce\u7684\u6027\u80fd\u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u4ee5\u67e5\u627e\u5305\u542b\u7ed9\u5b9a\u95ee\u9898\u7684\u7b54\u6848\u7684\u6587\u7ae0\u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u7cfb\u7edf\u6240\u8fd4\u56de\u7684\u524d5\u4e2a\u76f8\u5173\u9875\u9762\u4e2d\u7684\u81f3\u5c11\u4e00\u4e2a\u76f8\u5173\u95ee\u9898\u7684\u7b54\u6848\uff0c\u8fd9\u4e9b\u95ee\u9898\u7684\u7b54\u6848\u4e0e\u5b83\u4eec\u7684\u4efb\u4f55\u5173\u8054\u7b54\u6848\u7684\u6587\u672c\u8de8\u5ea6\u90fd\u81f3\u5c11\u4e00\u6837\u3002 \u6240\u6709\u6570\u636e\u96c6\u4e0a\u7684\u7ed3\u679c\u5747\u8868\u660e\uff0c\u6211\u4eec\u7684\u7b80\u5355\u65b9\u6cd5\u4f18\u4e8eWikipedia\u641c\u7d22\uff0c\u5c24\u5176\u662f\u4f7f\u7528bigram\u54c8\u5e0c\u3002 \u6211\u4eec\u8fd8\u6bd4\u8f83\u4e86\u4f7f\u7528Okapi BM25\u8fdb\u884c\u68c0\u7d22\u6216\u4f7f\u7528\u8bcd\u5d4c\u5165\u7a7a\u95f4\u4e2d\u7684\u4f59\u5f26\u8ddd\u79bb(\u901a\u8fc7\u5c06\u95ee\u9898\u548c\u6587\u7ae0\u7f16\u7801\u4e3a\u8bcd\u888b\u5411\u91cf)\uff0c\u6211\u4eec\u53d1\u73b0\u4e24\u8005\u7684\u6548\u679c\u90fd\u8f83\u5dee\u3002","title":"5.3.3 Document Retriever Performance"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#54-future-work","text":"\u6211\u4eec\u7684DRQA\u8bc1\u660e\uff0c\u5c06\u4fe1\u606f\u68c0\u7d22\u4e0e\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u76f8\u7ed3\u5408\u662f\u5f00\u653e\u57df\u95ee\u9898\u56de\u7b54\u7684\u6709\u6548\u65b9\u6cd5\u3002\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u7684\u5de5\u4f5c\u671d\u7740\u8fd9\u4e00\u7814\u7a76\u65b9\u5411\u8fc8\u51fa\u7b2c\u4e00\u6b65\u3002\u4f46\u662f\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4ecd\u5904\u4e8e\u65e9\u671f\u9636\u6bb5\uff0c\u8bb8\u591a\u5b9e\u73b0\u7ec6\u8282\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u8fdb\u3002 \u6211\u4eec\u8ba4\u4e3a\u4ee5\u4e0b\u7814\u7a76\u65b9\u5411\u5c06\uff08\u6781\u5927\u5730\uff09\u6539\u5584\u6211\u4eec\u7684DRQA\u7cfb\u7edf\uff0c\u5e94\u4f5c\u4e3a\u672a\u6765\u7684\u5de5\u4f5c\u3002\u786e\u5b9e\uff0c\u5728\u6211\u4eec\u53d1\u5e03\u6211\u4eec\u7684DRQA\u7cfb\u7edf\u540e\u7684\u7b2c\u4e8c\u5e74\u4e2d\uff0c\u5df2\u7ecf\u5b9e\u73b0\u4e86\u4e00\u4e9b\u60f3\u6cd5\uff0c\u6211\u4eec\u8fd8\u5c06\u5728\u672c\u8282\u4e2d\u5bf9\u5176\u8fdb\u884c\u8be6\u7ec6\u63cf\u8ff0\u3002 Aggregating evidence from multiple paragraphs. Using more and better training data. Making the DOCUMENT RETRIEVER trainable. Better DOCUMENT READER module. More analysis is needed.","title":"5.4 Future Work"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond-2/#chapter-6-conversational-question-answering","text":"","title":"Chapter 6 Conversational Question Answering"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/","text":"Neural Reading Comprehension and beyond \u9605\u8bfb\u7b14\u8bb0 \u00b6 Chapter 1 Introduction \u00b6 \u600e\u6837\u53eb\u505a\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff1f \u8bcd\u6027\u6807\u6ce8 part-of-speech tagging \u4e13\u6709\u540d\u8bcd \u5e38\u7528\u540d\u8bcd \u52a8\u8bcd \u5f62\u5bb9\u8bcd \u4ecb\u8bcd \u547d\u540d\u5b9e\u4f53\u8bc6\u522b named entity recognition \u4eba\u540d \u5730\u540d \u53e5\u6cd5\u5206\u6790 syntactic parsing \u7406\u89e3\u6bcf\u4e00\u4e2a\u53e5\u5b50 \u5355\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb \u8bed\u6cd5\u7ed3\u6784 \u5171\u6307\u6d88\u89e3/\u6307\u4ee3\u6d88\u89e3 coreference resolution \u53e5\u5b50\u4e4b\u95f4\u7684\u76f8\u4e92\u4f5c\u7528 She \u6307\u4ee3\u4e0a\u6587\u7684 A The girls \u6307\u4ee3\u4e0a\u6587\u7684 ABCD \u5982\u4f55\u5168\u9762\u5730\u6d4b\u8bd5\u8bc4\u4f30\u8fd9\u4e9b\u65b9\u9762\uff1f \u9605\u8bfb\u7406\u89e3\u2014\u2014\u57fa\u4e8e\u4e00\u6bb5\u6587\u672c\u56de\u7b54\u9605\u8bfb\u7406\u89e3\u95ee\u9898 \u8ba1\u7b97\u673a\u7cfb\u7edf\u5fc5\u987b\u7406\u89e3\u6587\u672c\u7684\u8bb8\u591a\u4e0d\u540c\u65b9\u9762\u624d\u80fd\u6b63\u786e\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898 \u672c\u8bba\u6587\u7684\u6838\u5fc3\u4e3b\u9898\u4e4b\u4e00\uff1a\u7531\u4e8e\u53ef\u4ee5\u8bbe\u8ba1\u95ee\u9898\u6765\u68c0\u6d4b\u6211\u4eec\u5173\u5fc3\u7684\u67d0\u4e9b\u65b9\u9762\uff0c\u9605\u8bfb\u7406\u89e3\u53ef\u80fd\u662f\u8bc4\u4f30\u8bed\u8a00\u7406\u89e3\u7684\u6700\u5408\u9002\u7684\u4efb\u52a1 \u6700\u8fd1\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u662f\u4e3a\u4ec0\u4e48\uff1f (passage, question, answer) \u7684\u4e09\u5143\u7ec4\u7684\u5f62\u5f0f\u521b\u5efa\u5927\u89c4\u6a21\u7684\u76d1\u7763\u6570\u636e\u96c6 \u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u53d1\u5c55 \u5728\u672c\u8bba\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u6db5\u76d6\u73b0\u4ee3\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u672c\u8d28 \u95ee\u9898\u7684\u5f62\u6210\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6784\u5efa\u6a21\u5757\u548c\u5173\u952e\u6210\u5206\uff0c\u4ee5\u53ca\u5bf9\u5f53\u524d\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u53ef\u4ee5\u5728\u54ea\u4e9b\u65b9\u9762\u53d6\u5f97\u4f18\u52bf\u4ee5\u53ca\u5b83\u4eec\u4ecd\u7136\u843d\u540e\u7684\u5730\u65b9\u7684\u7406\u89e3 \u8bba\u6587\u7684\u7b2c\u4e8c\u4e2a\u4e2d\u5fc3\u4e3b\u9898 \u6211\u4eec\u6df1\u4fe1\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u5efa\u7acb\u8868\u73b0\u4f18\u79c0\u7684\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\uff0c\u5b83\u4eec\u5c06\u6210\u4e3a\u95ee\u7b54\u548c\u5bf9\u8bdd\u7cfb\u7edf\u7b49\u5e94\u7528\u7684\u5173\u952e\u6280\u672f \u9605\u8bfb\u7406\u89e3\u53ef\u4ee5\u4fc3\u8fdb\u66f4\u52a0\u667a\u80fd\u7684\u641c\u7d22\u5f15\u64ce google\u4e0d\u4ec5\u8fd4\u56de\u641c\u7d22\u6587\u6863\u5217\u8868\uff0c\u8fd8\u5c1d\u8bd5\u9605\u8bfb\u8fd9\u4e9bWeb\u6587\u6863\uff0c\u6700\u540e\u7a81\u51fa\u663e\u793a\u6700\u5408\u7406\u7684\u7b54\u6848\u5e76\u5c06\u5176\u663e\u793a\u5728\u641c\u7d22\u7ed3\u679c\u7684\u9876\u90e8 \u672c\u6587\u8fd8\u5bf9\u5982\u4f55\u4ece\u6700\u8fd1\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u6784\u5efa\u5b9e\u9645\u5e94\u7528\u505a\u4e86\u63a2\u7d22 \u5f00\u653e\u9886\u57df\u95ee\u7b54 Open-domain question answering \u7ed3\u5408\u4e86\u4fe1\u606f\u68c0\u7d22\u548c\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218 \uff0c\u65e8\u5728\u56de\u7b54\u6765\u81eaWeb\u6216\u5927\u578b\u767e\u79d1\u5168\u4e66\uff08\u4f8b\u5982\u7ef4\u57fa\u767e\u79d1\uff09\u7684\u4e00\u822c\u95ee\u9898 \u4f1a\u8bdd\u95ee\u7b54 Conversational question answering \u7ed3\u5408\u4e86\u5bf9\u8bdd\u548c\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218\uff0c\u5e76\u89e3\u51b3\u4e86\u5728\u6587\u672c\u6bb5\u843d\u4e2d\u591a\u56de\u5408\u95ee\u9898\u56de\u7b54\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u7528\u6237\u5982\u4f55\u4e0e\u4f1a\u8bdd\u4ee3\u7406\u4eba\u4ea4\u6d41 \u672c\u6587\u6784\u6210 \u57fa\u7840 \u4fa7\u91cd\u4e8e\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\uff0c\u91cd\u70b9\u662f\u4ed4\u7ec6\u9605\u8bfb\u4e00\u4e2a\u77ed\u6bb5\uff0c\u4ee5\u4fbf\u8ba1\u7b97\u673a\u7cfb\u7edf\u80fd\u591f\u56de\u7b54\u7406\u89e3\u95ee\u9898 \u7b2c\u4e8c\u7ae0 \u6211\u4eec\u9996\u5148\u6982\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u9886\u57df\u7684\u5386\u53f2\u548c\u6700\u65b0\u53d1\u5c55\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6b63\u5f0f\u5b9a\u4e49\u95ee\u9898\u7684\u8868\u8ff0\u53ca\u5176\u4e3b\u8981\u7c7b\u522b\u3002 \u7136\u540e\uff0c\u6211\u4eec\u7b80\u8981\u8ba8\u8bba\u9605\u8bfb\u7406\u89e3\u548c\u4e00\u822c\u95ee\u9898\u56de\u7b54\u7684\u5dee\u5f02\u3002 \u6700\u540e\uff0c\u6211\u4eec\u8ba4\u4e3a\u6700\u8fd1\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u662f\u7531\u5927\u89c4\u6a21\u6570\u636e\u96c6\u548c\u795e\u7ecf\u6a21\u578b\u9a71\u52a8\u7684\u3002 \u7b2c\u4e09\u7ae0 \u6211\u4eec\u4ecb\u7ecd\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u5bb6\u65cf\u3002\u6211\u4eec\u9996\u5148\u63cf\u8ff0\u975e\u795e\u7ecf\u7684\uff0c\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\uff0c\u5e76\u8ba8\u8bba\u5b83\u4eec\u4e0e\u7aef\u5230\u7aef\u795e\u7ecf\u65b9\u6cd5\u7684\u533a\u522b\u3002 \u7136\u540e\u6211\u4eec\u4ecb\u7ecd\u4e00\u79cd\u6211\u4eec\u63d0\u51fa\u7684\u540d\u4e3a THE STANFORD ATTENTIVE READER \u7684\u795e\u7ecf\u65b9\u6cd5\uff0c\u5e76\u63cf\u8ff0\u5176\u57fa\u672c\u6784\u5efa\u5757\u548c\u6269\u5c55\u3002\u6211\u4eec\u5728\u4e24\u4e2a\u6709\u4ee3\u8868\u6027\u7684\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u4e0a\u5448\u73b0\u5b9e\u9a8c\u7ed3\u679c\uff1a CNN/DAILY MAIL \u548c SQUAD \uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u6211\u4eec\u5bf9\u795e\u7ecf\u6a21\u578b\u8fdb\u884c\u4e86\u6df1\u5165\u5206\u6790\uff0c\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u6a21\u578b\u5b9e\u9645\u5b66\u5230\u4e86\u4ec0\u4e48\u3002 \u6700\u540e\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5728\u4e0d\u540c\u65b9\u9762\u7684\u6700\u65b0\u8fdb\u5c55\u3002 \u672c\u7ae0\u57fa\u4e8e\u6211\u4eec\u7684\u5de5\u4f5c\u3002(Chen et al.,2016), (Chen et al.,2017) \u7b2c\u56db\u7ae0 \u6211\u4eec\u5c06\u8ba8\u8bba\u8be5\u9886\u57df\u7684\u672a\u6765\u5de5\u4f5c\u548c\u672a\u89e3\u51b3\u7684\u95ee\u9898\u3002\u6211\u4eec\u9996\u5148\u68c0\u67e5\u73b0\u6709\u6a21\u578b\u7684\u9519\u8bef\u60c5\u51b5\uff0c\u5c3d\u7ba1\u5b83\u4eec\u5728\u5f53\u524d\u7684\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5177\u6709\u5f88\u9ad8\u7684\u51c6\u786e\u6027\u3002 \u7136\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u672a\u6765\u65b9\u5411\u3002 \u6700\u540e\uff0c\u6211\u4eec\u56de\u987e\u4e86\u8be5\u9886\u57df\u7684\u51e0\u4e2a\u91cd\u8981\u7814\u7a76\u95ee\u9898\uff0c\u8fd9\u4e9b\u95ee\u9898\u4ecd\u7136\u662f\u4e00\u4e2a\u60ac\u800c\u672a\u51b3\u7684\u95ee\u9898\uff0c\u672a\u6765\u8fd8\u6709\u5f85\u56de\u7b54\u3002 \u5e94\u7528 \u5c06\u9605\u8bfb\u7406\u89e3\u89c6\u4e3a\u5b9e\u9645\u5e94\u7528\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u4f8b\u5982\u95ee\u7b54\u7cfb\u7edf\u548c\u4f1a\u8bdd\u4ee3\u7406\uff08\u5bf9\u8bdd\u7cfb\u7edf\uff09 \u7b2c\u4e94\u7ae0 \u6211\u4eec\u5c06\u5f00\u653e\u9886\u57df\u95ee\u7b54\u7cfb\u7edf\u7684\u95ee\u9898\u4f5c\u4e3a\u9605\u8bfb\u7406\u89e3\u7684\u5e94\u7528\u6765\u89e3\u51b3\u3002\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u5c06\u9ad8\u6027\u80fd\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u4e0e\u6709\u6548\u7684\u4fe1\u606f\u68c0\u7d22\u6280\u672f\u76f8\u7ed3\u5408\uff0c\u6784\u5efa\u65b0\u4e00\u4ee3\u5f00\u653e\u9886\u57df\u95ee\u7b54\u7cfb\u7edf\u3002 \u6211\u4eec\u63cf\u8ff0\u4e86\u4e00\u4e2a\u6211\u4eec\u5efa\u7acb\u7684\u540d\u4e3a DRQA \u7684\u7cfb\u7edf\uff1a\u5b83\u7684\u5173\u952e\u7ec4\u4ef6\u4ee5\u53ca\u6211\u4eec\u5982\u4f55\u4e3a\u5b83\u521b\u5efa\u8bad\u7ec3\u96c6\uff0c\u7136\u540e\u6211\u4eec\u5bf9\u591a\u4e2aQA\u57fa\u51c6\u8fdb\u884c\u5168\u9762\u8bc4\u4f30\u3002 \u6211\u4eec\u6700\u540e\u8ba8\u8bba\u4e86\u5b83\u76ee\u524d\u7684\u5c40\u9650\u6027\u548c\u672a\u6765\u7684\u5de5\u4f5c\u3002\u672c\u7ae0\u57fa\u4e8e\u6211\u4eec\u7684\u5de5\u4f5c(Chen et al., 2017) \u7b2c\u516d\u7ae0 \u6211\u4eec\u7814\u7a76\u4e86\u4f1a\u8bdd\u4ee3\u7406\u7684\u95ee\u9898\uff0c\u5176\u4e2d\u673a\u5668\u5fc5\u987b\u7406\u89e3\u6587\u672c\u6bb5\u843d\u5e76\u56de\u7b54\u51fa\u73b0\u5728\u5bf9\u8bdd\u4e2d\u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u6211\u4eec\u9996\u5148\u7b80\u8981\u56de\u987e\u4e00\u4e0b\u6709\u5173\u5bf9\u8bdd\u7684\u6587\u732e\uff0c\u5e76\u8ba4\u4e3a\u5bf9\u8bdd\u95ee\u9898\u56de\u7b54\u662f\u5efa\u7acb\u4fe1\u606f\u5bfb\u6c42\u5bf9\u8bdd\u4ee3\u7406\u4eba\u7684\u5173\u952e\u3002 \u6211\u4eec\u4ecb\u7ecd\u4e86 COQA \uff1a\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u4f1a\u8bdd\u95ee\u7b54\u7cfb\u7edf\u7684\u65b0\u6570\u636e\u96c6\uff0c\u5305\u62ec127k\u95ee\u9898\u548c\u7b54\u6848\uff0c\u4ece8k\u5173\u4e8e\u6587\u672c\u6bb5\u843d\u7684\u5bf9\u8bdd\u4e2d\u83b7\u5f97\u3002 \u6211\u4eec\u6df1\u5165\u5206\u6790\u6570\u636e\u96c6\uff0c\u5e76\u5728\u4f1a\u8bdd\u548c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u4e4b\u4e0a\u6784\u5efa\u51e0\u4e2a\u7ade\u4e89\u6a21\u578b\uff0c\u5e76\u5c55\u793a\u5b9e\u9a8c\u7ed3\u679c\u3002 \u7b2c\u4e03\u7ae0 \u603b\u7ed3 \u672c\u6587\u8d21\u732e \u7b2c\u4e00\u6279\u7814\u7a76\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u4eba\u3002\u7279\u522b\u662f\uff0c\u6211\u4eec\u63d0\u51fa\u4e86 STANFORD ATTENTIVE READER \u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5728\u5404\u79cd\u73b0\u4ee3\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4f18\u8d8a\u7684\u6027\u80fd \u6211\u4eec\u52aa\u529b\u66f4\u597d\u5730\u7406\u89e3\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5b9e\u9645\u5b66\u5230\u4e86\u4ec0\u4e48\uff0c\u4ee5\u53ca\u89e3\u51b3\u5f53\u524d\u4efb\u52a1\u9700\u8981\u591a\u5927\u7684\u8bed\u8a00\u7406\u89e3\u6df1\u5ea6\u3002\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u76f8\u6bd4\uff0c\u795e\u7ecf\u6a21\u578b\u66f4\u597d\u5730\u5b66\u4e60\u8bcd\u6c47\u5339\u914d\u548c\u91ca\u4e49\uff0c\u800c\u73b0\u6709\u7cfb\u7edf\u7684\u63a8\u7406\u80fd\u529b\u4ecd\u7136\u76f8\u5f53\u6709\u9650\u3002 \u6211\u4eec\u5f00\u521b\u4e86\u5c06\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u5f00\u653e\u57df\u95ee\u7b54\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u7684\u7814\u7a76\u65b9\u5411\uff0c\u5e76\u7814\u7a76\u4e86\u5982\u4f55\u63a8\u5e7f\u8be5\u6848\u4f8b\u7684\u6a21\u578b\u3002\u7279\u522b\u662f\uff0c\u6211\u4eec\u5728 DRQA \u7cfb\u7edf\u4e2d\u5b9e\u73b0\u4e86\u8fd9\u4e00\u60f3\u6cd5\uff0c DRQA \u7cfb\u7edf\u662f\u57fa\u4e8e\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u7684\u4e00\u4e2a\u5927\u578b\uff0c\u4eff\u771f\u95ee\u7b54\u7cfb\u7edf\u3002 \u6700\u540e\uff0c\u6211\u4eec\u7740\u624b\u89e3\u51b3\u4f1a\u8bdd\u95ee\u9898\u56de\u7b54\u95ee\u9898\uff0c\u5176\u4e2d\u8ba1\u7b97\u673a\u7cfb\u7edf\u9700\u8981\u5728\u5bf9\u8bdd\u73af\u5883\u4e2d\u56de\u7b54\u7406\u89e3\u95ee\u9898\uff0c\u56e0\u6b64\u6bcf\u4e2a\u95ee\u9898\u90fd\u9700\u8981\u901a\u8fc7\u5176\u5bf9\u8bdd\u5386\u53f2\u6765\u7406\u89e3\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e86 COQA \u6311\u6218\uff0c\u5e76\u5efa\u7acb\u4e86\u9002\u5e94\u8fd9\u4e00\u95ee\u9898\u7684\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u3002\u6211\u4eec\u76f8\u4fe1\u8fd9\u662f\u6784\u5efa\u5bf9\u8bddQA\u4ee3\u7406\u7684\u7b2c\u4e00\u6b65\uff0c\u4e5f\u662f\u91cd\u8981\u7684\u4e00\u6b65\u3002 Neural Reading Comprehension:Foundations \u00b6 Chapter 2 An Overview of Reading Comprehension \u00b6 2.1 History \u00b6 \u5148\u5bf9\u65e9\u671f\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u53d1\u5c55\u8fdb\u884c\u4ecb\u7ecd\uff0c\u5f53\u65f6\u7531\u4e8e\u6570\u636e\u96c6\u4ee5\u53ca\u6a21\u578b\u4e24\u65b9\u9762\u7684\u539f\u56e0\uff0c\u9605\u8bfb\u7406\u89e3\u88ab\u89c6\u4e3a\u4e00\u9879\u592a\u96be\u7684\u4efb\u52a1\uff0c\u6ca1\u80fd\u5f97\u5230\u7a81\u7834\u6027\u7684\u8fdb\u5c55\u3002 2013\u5e74\u52302015\u5e74\u95f4\uff0c\u5c06\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u4e00\u79cd\u76d1\u7763\u5b66\u4e60\u95ee\u9898\uff0c\u8bd5\u56fe\u901a\u8fc7 (passage, question, answer) \u7684\u4e09\u5143\u7ec4\u8bad\u7ec3\u51fa\u80fd\u591f\u5b9e\u73b0 \\(f:(passage, question \\to answer)\\) \u7684\u7edf\u8ba1\u5b66\u6a21\u578b \u4e24\u4e2a\u91cd\u8981\u7684\u6570\u636e\u96c6 MCTEST \u6536\u96c6\u4e86660\u4e2a\u865a\u6784\u6545\u4e8b\uff0c\u6bcf\u4e2a\u6545\u4e8b\u67094\u4e2a\u9009\u62e9\u9898\uff08\u6bcf\u4e2a\u95ee\u9898\u9644\u5e264\u4e2a\u5047\u8bbe\u7b54\u6848\uff0c\u5176\u4e2d\u4e00\u4e2a\u662f\u6b63\u786e\u7684\uff09 PROCESSBANK \u65e8\u5728\u56de\u7b54\u63cf\u8ff0\u751f\u7269\u8fc7\u7a0b\u7684\u6bb5\u843d\u4e2d\u7684\u4e8c\u5143\u9009\u62e9\u95ee\u9898\uff0c\u5e76\u4e14\u9700\u8981\u4e86\u89e3\u8fc7\u7a0b\u4e2d\u5b9e\u4f53\u548c\u4e8b\u4ef6\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8be5\u6570\u636e\u96c6\u5305\u62ec\u5206\u5e03\u5728200\u4e2a\u6bb5\u843d\u4e2d\u7684585\u4e2a\u95ee\u9898\u3002 \u5728\u6700\u521d\u7684 MCTEST \u8bba\u6587\u4e2d\uff0cRichardson\u7b49\u4eba\u63d0\u51fa\u4e86\u51e0\u4e2a\u57fa\u4e8e\u89c4\u5219\u7684\u57fa\u7ebf\uff0c\u800c\u6ca1\u6709\u5229\u7528\u4efb\u4f55\u8bad\u7ec3\u6570\u636e\u3002\u4e00\u79cd\u662f\u542f\u53d1\u5f0f\u6ed1\u52a8\u7a97\u53e3\u65b9\u6cd5\uff0c\u5176\u6d4b\u91cf\u95ee\u9898\u4e2d\u7684\u5355\u8bcd\uff0c\u7b54\u6848\u548c\u6ed1\u52a8\u7a97\u53e3\u4e4b\u95f4\u7684\u52a0\u6743\u5355\u8bcd\u91cd\u53e0/\u8ddd\u79bb\u4fe1\u606f; \u53e6\u4e00\u79cd\u662f\u901a\u8fc7\u5c06\u6bcf\u4e2a\u95ee\u7b54\u914d\u5bf9\u8f6c\u6362\u6210\u58f0\u660e\u6765\u8fd0\u884c\u73b0\u6210\u7684\u6587\u672c\u8574\u6db5\u7cfb\u7edf\u3002\u8be5\u6570\u636e\u96c6\u540e\u6765\u542f\u53d1\u4e86\u4e00\u7cfb\u5217\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e9b\u6a21\u578b\u4e3b\u8981\u5efa\u7acb\u5728\u4e00\u4e2a\u7b80\u5355\u7684\u6700\u5927\u8fb9\u7f18\u5b66\u4e60\u6846\u67b6\u4e4b\u4e0a\uff0c\u8be5\u6846\u67b6\u5177\u6709\u4e30\u5bcc\u7684\u624b\u5de5\u8bbe\u8ba1\u8bed\u8a00\u7279\u5f81\uff0c\u5305\u62ec\u53e5\u6cd5\u4f9d\u8d56\u6027\uff0c\u8bed\u4e49\u6846\u67b6\uff0c\u5171\u6307\u89e3\u6790\uff0c\u8bed\u7bc7\u5173\u7cfb\u548c\u5355\u8bcd\u5d4c\u5165\u3002MC500\u90e8\u5206\u7684\u6027\u80fd\u4ece63\uff05\u9002\u5ea6\u63d0\u9ad8\u523070\uff05\u5de6\u53f3\u3002 \u5728 PROCESSBANK \u6570\u636e\u96c6\u4e2d\uff0cBerant\u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u7edf\u8ba1\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u9996\u5148\u5b66\u4e60\u9884\u6d4b\u8fc7\u7a0b\u7ed3\u6784\uff0c\u7136\u540e\u5c06\u95ee\u9898\u6620\u5c04\u5230\u53ef\u4ee5\u9488\u5bf9\u7ed3\u6784\u6267\u884c\u7684\u5f62\u5f0f\u67e5\u8be2\u3002\u540c\u6837\uff0c\u8be5\u6a21\u578b\u5305\u542b\u5927\u91cf\u624b\u5de5\u7279\u5f81\uff0c\u6700\u7ec8\u5728\u4e8c\u5206\u7c7b\u4efb\u52a1\u4e2d\u83b7\u5f9766.7\uff05\u7684\u51c6\u786e\u6027\u3002\u4e0e\u65e9\u671f\u57fa\u4e8e\u89c4\u5219\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u76f8\u6bd4\uff0c\u8fd9\u4e9b\u673a\u5668\u5b66\u4e60\u6a21\u578b\u53d6\u5f97\u4e86\u9002\u5ea6\u7684\u8fdb\u6b65\u3002\u4f46\u662f\uff0c\u4ed6\u4eec\u7684\u6539\u8fdb\u4ecd\u7136\u76f8\u5f53\u6709\u9650\uff0c\u4ed6\u4eec\u7684\u5f31\u70b9\u603b\u7ed3\u5982\u4e0b\uff1a \u9ad8\u5ea6\u4f9d\u8d56\u5df2\u6709\u7684\u8bed\u8a00\u5de5\u5177\uff0c\u96be\u4ee5\u6784\u9020\u6709\u6548\u7684\u7279\u5f81\uff0c\u6570\u636e\u96c6\u89c4\u6a21\u4e0d\u591f\u5927 \u7a81\u7834\u6027\u7684\u8fdb\u5c55\u53d1\u751f\u57282015\u5e74\uff0cHermann\u63d0\u51fa\u4e86\u4e00\u4e2a\u5ec9\u4ef7\u7684\u7528\u4e8e\u521b\u5efa\u5927\u89c4\u6a21\u76d1\u7763\u5b66\u4e60\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u65b9\u6cd5\uff0c\u6784\u5efa\u4e86 CNN/daily mail \u6570\u636e\u96c6\uff0c\u5e76\u63d0\u51fa\u4e86\u4e00\u4e2a\u5305\u542b\u6ce8\u610f\u529b\u673a\u5236\u7684 LSTM \u6a21\u578b\uff0c attentive reader CNN/daily mail \u9644\u6709\u4e00\u4e9b\u8981\u70b9\uff0c\u603b\u7ed3\u4e86\u6587\u7ae0\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u7684\u5404\u4e2a\u65b9\u9762\u3002\u4ed6\u4eec\u5c06\u65b0\u95fb\u6587\u7ae0\u4f5c\u4e3a\u6bb5\u843d\uff0c\u5e76\u5c06\u5176\u4e2d\u4e00\u4e2a\u5173\u952e\u70b9\u8f6c\u6362\u4e3a\u5b8c\u5f62\u586b\u7a7a\u6837\u5f0f\u95ee\u9898\uff0c\u901a\u8fc7\u7528\u5360\u4f4d\u7b26\u66ff\u6362\u4e00\u4e2a\u5b9e\u4f53\uff0c\u7b54\u6848\u5c31\u662f\u8fd9\u4e2a\u88ab\u66ff\u6362\u7684\u5b9e\u4f53\u3002\u4e3a\u4e86\u786e\u4fdd\u63a5\u8fd1\u8be5\u4efb\u52a1\u7684\u7cfb\u7edf\u9700\u8981\u771f\u6b63\u7406\u89e3\u8be5\u6bb5\u843d\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u4e16\u754c\u77e5\u8bc6\u6216\u8bed\u8a00\u6a21\u578b\u6765\u56de\u7b54\u95ee\u9898\uff0c\u4ed6\u4eec\u8fd0\u884c\u5b9e\u4f53\u8bc6\u522b\u548c\u5171\u6307\u6d88\u89e3\u89e3\u51b3\u7cfb\u7edf\uff0c\u5e76\u7528\u62bd\u8c61\u66ff\u6362\u6bcf\u4e2a\u5171\u540c\u53c2\u8003\u94fe\u4e2d\u7684\u6240\u6709\u5b9e\u4f53\u3002\u7ed3\u679c\uff0c\u51e0\u4e4e\u514d\u8d39\u6536\u96c6\u4e86\u8fd1100\u4e07\u4e2a\u6570\u636e\u793a\u4f8b\u3002\u800c\u6211\u4eec\u57282016\u5e74\u63d0\u51fa\u4e86\u53e6\u5916\u4e00\u4e2a\u57fa\u4e8e\u7b80\u5355\u7684\u795e\u7ecf\u7f51\u7edc\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578b(3.2\u8282)\uff0c\u8fbe\u5230\u4e86\u8fd9\u4e00\u6570\u636e\u7684\u6700\u4f73\u6548\u679c\u3002 \u7136\u800c\uff0c\u867d\u7136\u8fd9\u4e2a\u534a\u5408\u6210\u6570\u636e\u96c6\u4e3a\u57f9\u8bad\u6709\u6548\u7684\u7edf\u8ba1\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u6709\u524d\u666f\u7684\u9014\u5f84\uff0c\u4f46\u7531\u4e8e\u6570\u636e\u521b\u5efa\u65b9\u6cd5\uff0c\u6570\u636e\u96c6\u7684\u6784\u5efa\u5b58\u5728\u566a\u97f3\uff0c\u4e14\u6709\u5171\u6307\u9519\u8bef\u7684\u73b0\u8c61\uff0c\u9650\u5236\u4e86\u9605\u8bfb\u7406\u89e3\u7684\u8fdb\u4e00\u6b65\u53d1\u5c55\u3002 \u4e8e\u662f\uff0c2016\u5e74\u65b0\u6570\u636e\u96c6 SQuAD \u7684\u51fa\u73b0\u5e26\u52a8\u4e86\u4e00\u5927\u6ce2\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u4ea7\u751f \u8be5\u6570\u636e\u96c6\u5728536\u7bc7\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e2d\u5305\u542b107,785\u4e2a\u95ee\u7b54\u914d\u5bf9\uff0c\u95ee\u9898\u7531\u4f17\u7b79\u5de5\u4f5c\u8005\u63d0\u51fa\uff0c\u6bcf\u4e2a\u95ee\u9898\u7684\u7b54\u6848\u90fd\u662f\u6765\u81ea\u76f8\u5e94\u9605\u8bfb\u6bb5\u843d\u7684\u6587\u672c\u8303\u56f4, SQuAD \u662f\u7b2c\u4e00\u4e2a\u5177\u6709\u81ea\u7136\u95ee\u9898\u7684\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u3002\u7531\u4e8e\u5176\u9ad8\u8d28\u91cf\u548c\u53ef\u9760\u7684\u81ea\u52a8\u8bc4\u4f30\uff0c\u8be5\u6570\u636e\u96c6\u6fc0\u53d1\u4e86\u5bf9NLP\u793e\u533a\u7684\u5de8\u5927\u5174\u8da3\uff0c\u5e76\u6210\u4e3a\u8be5\u9886\u57df\u7684\u6838\u5fc3\u57fa\u51c6\u3002 \u622a\u81f32018\u5e7410\u6708, \u5df2\u8d85\u8fc7\u4eba\u7c7b\u4f30\u8ba1\u768491.2\uff05( F1 Score )\uff0c\u800c\u539f\u4f5c\u8005(2016)\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u8fdb51.0%\u3002 SQUAD \u4e0a\u76ee\u524d\u6240\u6709\u6700\u4f73\u6027\u80fd\u7cfb\u7edf\u90fd\u5efa\u7acb\u5728\u7aef\u5230\u7aef\u795e\u7ecf\u7f51\u7edc\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u4e0a\u3002\u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u4ece\u8868\u793a\u6bb5\u843d\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u548c\u95ee\u9898\u4f5c\u4e3a\u5bc6\u96c6\u5411\u91cf\uff08\u4f8b\u5982\uff0c300\u7ef4\uff09\uff0c\u901a\u8fc7\u51e0\u4e2a\u5efa\u6a21\u6216\u4ea4\u4e92\u5c42\uff0c\u6700\u540e\u8fdb\u884c\u9884\u6d4b\u3002\u53ef\u4ee5\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u6216\u5176\u53d8\u4f53\u5171\u540c\u4f18\u5316\u6240\u6709\u53c2\u6570\u3002\u8fd9\u7c7b\u6a21\u578b\u53ef\u4ee5\u79f0\u4e3a\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\uff0c\u6211\u4eec\u5c06\u5728\u7b2c3\u7ae0\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u3002\u4e0d\u540c\u4e8e\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u6709\u51e0\u4e2a\u5f88\u5927\u7684\u4f18\u70b9\uff1a \u5b83\u4eec\u4e0d\u4f9d\u8d56\u4e8e\u4efb\u4f55\u4e0b\u6e38\u8bed\u8a00\u7279\u5f81 \uff08\u4f8b\u5982\uff0c\u4f9d\u5b58\u53e5\u6cd5\u5206\u6790\u6216\u5171\u6307\u6d88\u89e3\uff09\u5e76\u4e14\u6240\u6709\u7279\u5f81\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u7aef\u5230\u7aef\u6846\u67b6\u4e2d\u81ea\u5df1\u5b66\u4e60\u3002\u8fd9\u53ef\u4ee5\u907f\u514d\u8bed\u8a00\u6ce8\u91ca\u4e2d\u7684\u566a\u58f0\uff0c\u540c\u65f6\u8fd8\u5728\u6709\u7528\u7279\u5f81\u7684\u7a7a\u95f4\u4e2d\u63d0\u4f9b\u6781\u5927\u7684\u7075\u6d3b\u6027\u3002 \u4f20\u7edf\u7684\u7b26\u53f7NLP\u7cfb\u7edf\u5b58\u5728\u4e00\u4e2a\u4e25\u91cd\u95ee\u9898\uff1a \u7279\u5f81\u901a\u5e38\u975e\u5e38\u7a00\u758f\u5e76\u4e14\u6982\u62ec\u6027\u5dee \u3002 \u4f8b\u5982\uff0c\u56de\u7b54\u4e00\u4e2a\u95ee\u9898\u201cHow many individual libraries make up the main school library?\u201d \u6587\u7ae0\uff1a\u201c...... Harvard Library, which is the world\u2019s largest academic and private library system, comprising 79 individual libraries with over 18 million volumes.\u201d \u7cfb\u7edf\u5fc5\u987b\u6839\u636e\u6307\u6807\u7279\u6027\u6765\u5b66\u4e60comprising \u548cmake up\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb(pw: passage word; qw: question word).\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u6b63\u786e\u5730\u5bf9\u8fd9\u4e9b\u7279\u6027\u8fdb\u884c\u52a0\u6743\u3002\u8fd9\u662f\u6240\u6709\u975e\u795e\u7ecfNLP\u6a21\u578b\u4e2d\u666e\u904d\u5b58\u5728\u7684\u95ee\u9898\u3002\u5229\u7528\u4f4e\u7ef4\u3001\u5bc6\u96c6\u7684\u8bcd\u5d4c\u5165\uff0c\u901a\u8fc7\u5171\u4eab\u76f8\u4f3c\u8bcd\u4e4b\u95f4\u7684\u7edf\u8ba1\u5f3a\u5ea6\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u7f13\u89e3\u7a00\u758f\u6027\u3002 \\[ \\mathrm{pw}_{i}=\\text { comprising } \\wedge \\mathrm{qw}_{j}=\\text { make } \\wedge \\mathrm{qw}_{j+1}=\\mathrm{up} \\] \u4ed6\u4eec\u4ece\u6784\u5efa\u4e00\u7cfb\u5217\u624b\u5de5\u7279\u5f81\u7684\u5de5\u4f5c\u4e2d\u89e3\u8131\u51fa\u6765\u3002\u56e0\u6b64\uff0c\u795e\u7ecf\u6a21\u578b\u5728\u6982\u5ff5\u4e0a\u66f4\u7b80\u5355\uff0c\u7126\u70b9\u53ef\u4ee5\u8f6c\u79fb\u5230\u795e\u7ecf\u67b6\u6784\u7684\u8bbe\u8ba1\u4e0a\u3002\u7531\u4e8e TensorFlow \u548c PyTorch \u7b49\u73b0\u4ee3\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u7684\u53d1\u5c55\uff0c\u5df2\u7ecf\u53d6\u5f97\u4e86\u5f88\u5927\u8fdb\u5c55\uff0c\u73b0\u5728\u5f00\u53d1\u65b0\u6a21\u578b\u7684\u8fc7\u7a0b\u975e\u5e38\u5feb\u6377\u3002 \u867d\u7136\u8fbe\u5230\u4eba\u7c7b\u6c34\u5e73\u7684performance\u5f88\u4ee4\u4eba\u632f\u594b\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u7b49\u4e8e\u89e3\u51b3\u4e86MRC\u95ee\u9898\uff0c\u5e76\u4e14 SQUAD \u6570\u636e\u96c6\u4e2d\u7684\u6240\u6709\u95ee\u9898\u7684\u7b54\u6848\u90fd\u662f \u539f\u6587\u4e2d\u7684\u67d0\u4e00\u4e2a\u8bcd \uff0c\u5e76\u4e14\u5927\u90e8\u5206\u4f8b\u5b50\u90fd\u5f88\u7b80\u5355\uff0c\u5e76\u4e0d\u9700\u8981 \u7efc\u5408\u63a8\u7406 \u8fd9\u4e9b\u6a21\u578b\u90fd\u662f\u7aef\u5230\u7aef\u7684\u6df1\u5ea6\u5b66\u4e60/\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff0c\u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u81ea\u52a8\u5b66\u4e60\u7279\u5f81\uff1b\u8bcd\u5d4c\u5165\u7f13\u89e3\u53d8\u91cf\u7a00\u758f\u7684\u95ee\u9898\uff1b\u6982\u5ff5\u7b80\u5355\uff0c\u5c06\u4efb\u52a1\u8f6c\u6362\u4e3a\u6784\u5efa\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u7684\u95ee\u9898\u3002 \u8fd9\u4e4b\u540e\u53c8\u51fa\u73b0\u4e86\u5f88\u591a\u65b0\u7684\u6570\u636e\u96c6\uff0c\u4ed6\u4eec\u7684\u6765\u6e90\u548c\u6784\u9020\u65b9\u5f0f\u90fd\u5f88\u4e0d\u540c\uff0c\u4ed6\u4eec\u7684\u76ee\u6807\u662f\u5e94\u5bf9\u8bb8\u591a\u4e4b\u524d\u6ca1\u6709\u5904\u7406\u8fc7\u7684\u6311\u6218\u2014\u2014\u72ec\u7acb\u4e8e\u6bb5\u843d\u7f16\u6392\u7684\u95ee\u9898\uff0c\u9700\u8981\u591a\u4e2a\u53e5\u5b50\u751a\u81f3\u591a\u4e2a\u6587\u6863\u6765\u56de\u7b54\u7684\u95ee\u9898\uff0c\u57fa\u4e8e\u957f\u6587\u6863\u7684\u95ee\u9898\uff0c\u6bd4\u5982\u4e00\u672c\u4e66\uff0c\u6216\u8005\u4e0d\u80fd\u4ece\u6bb5\u843d\u4e2d\u56de\u7b54\u7684\u95ee\u9898\u3002\u5728\u64b0\u5199\u672c\u6587\u65f6\uff0c\u5927\u591a\u6570\u8fd9\u4e9b\u6570\u636e\u96c6\u8fd8\u6ca1\u6709\u5f97\u5230\u89e3\u51b3\uff0c\u5e76\u4e14\u5728\u6700\u5148\u8fdb\u7684\u65b9\u6cd5\u548c\u4eba\u7c7b\u7684\u6027\u80fd\u6c34\u5e73\u4e4b\u95f4\u4ecd\u7136\u5b58\u5728\u5f88\u5927\u7684\u5dee\u8ddd\u3002\u9605\u8bfb\u7406\u89e3\u5df2\u6210\u4e3a\u5f53\u4eca\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u6700\u6d3b\u8dc3\u7684\u9886\u57df\u4e4b\u4e00\uff0c\u4ecd\u6709\u8bb8\u591a\u5f85\u89e3\u51b3\u7684\u95ee\u9898\u3002\u6211\u4eec\u5c06\u57284.2\u8282\u8ba8\u8bba\u9605\u8bfb\u7684\u6700\u65b0\u53d1\u5c55 2.2 Task Definition \u00b6 2.2.1 Problem Formulation \u00b6 \u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\u53ef\u4ee5\u88ab\u5b9a\u4e49\u8868\u8ff0\u4e3a\u4e00\u4e2a\u76d1\u7763\u5b66\u4e60\u95ee\u9898\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u8bad\u7ec3\u6837\u672c\u7684\u96c6\u5408 \\({(p_i,q_i,a_i)}_{i=1}^n\\) \uff0c\u76ee\u6807\u662f\u5b66\u4e60\u9884\u6d4b\u51fd\u6570 \\(f\\) \uff0c\u8f93\u5165\u4e00\u7bc7\u6587\u7ae0\u7684\u6587\u672c \\(p\\) \u548c\u76f8\u5173\u7684\u95ee\u9898 \\(q\\) \uff0c\u7ed9\u51fa\u7b54\u6848 \\(a\\) \u4f5c\u4e3a\u8f93\u51fa $$ f:(p,q) \\to a $$ - \u5b9a\u4e49 \\(p=(p_1,p_2,...,p_{l_p})\\) , \\(q=(q_1,q_2,...,q_{l_q})\\) \u5728\u5f53\u524d\u7684\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u4e2d\uff0c\u901a\u5e38\u9700\u8981\u4e00\u4e2atokenization\u7684\u9884\u5904\u7406\u6b65\u9aa4 \u3002\u5176\u4e2d \\(l_p\\) \u548c \\(l_q\\) \u8868\u793a\u6587\u7ae0\u548c\u95ee\u9898\u7684\u957f\u5ea6\uff0c\u5e76\u4e14 \\(p_i ,q_i\\in V\\) \uff0c \\(V\\) \u662f\u9884\u5148\u5b9a\u4e49\u7684\u8bcd\u5178\u3002\u8fd9\u91cc\u6211\u4eec\u53ea\u8ba4\u4e3a\u6587\u7ae0 \\(p\\) \u662f\u4e00\u4e2a\u7531 \\(l_p\\) \u957f\u5ea6\u7684\u5355\u8bcd\u5e8f\u5217\u7ec4\u6210\u7684\u77ed\u6bb5\u843d\uff0c\u5c06\u5176\u6269\u5c55\u5230\u591a\u6bb5\u843d\u8bbe\u7f6e\u975e\u5e38\u7b80\u5355\uff0c\u5c06 \\(p\\) \u89c6\u4e3a\u4e00\u7ec4\u6bb5\u843d\uff0c\u6216\u8005\u5c06\u5176\u5206\u89e3\u4e3a\u66f4\u5c0f\u7684\u8bed\u8a00\u5355\u5143\uff0c\u5982\u53e5\u5b50\u3002 \u5df2\u7ecf\u6709\u4e00\u4e9b\u5c1d\u8bd5\u5c06\u6bb5\u843d\u5efa\u6a21\u4e3a\u4e00\u4e2a\u53e5\u5b50\u5e8f\u5217\uff0c\u4f46\u76ee\u524d\u6ca1\u6709\u660e\u786e\u7684\u8bc1\u636e\u8868\u660e\u5b83\u4f18\u4e8e\u5c06\u6574\u4e2a\u6bb5\u843d\u89c6\u4e3a\u4e00\u4e2a\u957f\u5e8f\u5217\u7684\u65b9\u6cd5 - \u57fa\u4e8e\u56de\u7b54\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u73b0\u6709\u7684\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u5206\u6210\u56db\u7c7b\uff1a \u5b8c\u5f62\u586b\u7a7a cloze style \u7b54\u6848\u53ef\u4ee5\u6765\u81ea\u4e8e\u9884\u5b9a\u4e49\u7684\u9009\u9879\u96c6\u5408\u6216\u8005\u662f\u5b8c\u6574\u7684\u8bcd\u6c47\u8868 \u5355\u9879\u9009\u62e9 multiple choice \u6bcf\u4e00\u4e2a\u9009\u9879\u53ef\u4ee5\u662f\u4e00\u4e2a\u5355\u8bcd\u3001\u8bcd\u7ec4\u6216\u53e5\u5b50\uff0c\u5e76\u4e14\u7b54\u6848\u5fc5\u987b\u6765\u81ea\u4e8e\u9009\u9879\u96c6\u5408\u4e2d \u8303\u56f4\u9884\u6d4b span prediction \u8fd9\u4e00\u7c7b\u522b\u4e5f\u88ab\u79f0\u4e3a\u62bd\u53d6\u95ee\u9898\u56de\u7b54\uff0c\u5e76\u4e14\u56de\u7b54\u5fc5\u987b\u662f\u6587\u7ae0\u7684\u4e00\u90e8\u5206 \u5f00\u653e\u5f0f\u56de\u7b54 free-form answer \u7b54\u6848\u53ef\u4ee5\u662f\u4efb\u4f55\u81ea\u7531\u7684\u6587\u672c\u5f62\u5f0f\uff0c\u5373\u4e00\u4e2a\u4efb\u610f\u957f\u5ea6\u7684\u5355\u8bcd\u5e8f\u5217 2.2.2 Evaluation \u00b6 \u5b8c\u5f62\u586b\u7a7a\u548c\u5355\u9879\u9009\u62e9\uff0c\u6d4b\u91cf \u51c6\u786e\u7387 \\[ Accuracy = \\frac{TP+TN}{\u603b\u6837\u672c} // \u6b63\u786e\u5206\u7c7b\u7684\u6837\u672c\u6bd4\u4f8b \\] \u8303\u56f4\u8bc4\u4f30\uff0c\u5c06\u9884\u6d4b\u7ed3\u679c\u4e0e\u7b54\u6848\u8fdb\u884c\u6bd4\u8f83\uff0c\u6d4b\u91cf\u7cbe\u786e\u5339\u914d\u548c\u90e8\u5206\u5f97\u5206 Exact match ( EM ) \u5b8c\u5168\u5339\u914d\u76841.0\u5206\uff0c\u5426\u52190.0\u5206 F1 score \u9884\u6d4b\u7ed3\u679c\u548c\u7b54\u6848\u4e4b\u95f4\u7684\u5e73\u5747\u5355\u8bcd\u91cd\u53e0 the average word overlap \u9884\u6d4b\u7ed3\u679c\u548c\u7b54\u6848\u88ab\u5904\u7406\u4e3a\u7b26\u53f7\u7ea7\u522b\uff0c\u7b26\u53f7\u7ea7\u522b\u7684 F1 score \u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a \\[ F1 = \\frac{2 * Precision * Recall}{Precision + Recall} \\] \\[ Precision = \\frac{TP}{TP+FP} // \u9884\u6d4b\u4e3a\u6b63\u7684\u6837\u672c\u7684\u6b63\u786e\u7387 \u67e5\u51c6\u7387 \\] \\[ Recall = \\frac{TP}{TP+FN} // \u6b63\u6837\u672c\u7684\u4e2d\u9884\u6d4b\u6b63\u786e\u7684\u90e8\u5206 \\] \u4f5c\u8005\u5ffd\u7565\u6240\u6709\u7684\u6807\u70b9\u7b26\u53f7\uff0c\u5728\u82f1\u8bed\u4e2d`a,an,the` \u4e5f\u88ab\u5ffd\u7565 \u4e3a\u4e86\u8ba9\u8bc4\u4f30\u66f4\u52a0\u53ef\u9760\uff0c\u6211\u4eec\u4f1a\u5bf9\u6bcf\u4e2a\u95ee\u9898\u7ed9\u51fa\u591a\u4e2a\u6807\u51c6\u7b54\u6848\uff0c\u56e0\u6b64EM\u4e2d\u53ea\u8981\u548c\u4e00\u4e2a\u6807\u51c6\u7b54\u6848\u4e00\u81f4\u5373\u53ef\uff0cF1\u5219\u662f\u8ba1\u7b97\u9884\u6d4b\u7ed3\u679c\u548c\u6240\u6709\u6807\u51c6\u7b54\u6848\u7684\u6700\u5927\u5f97\u5206 \u5f00\u653e\u5f0f\u56de\u7b54 \u8fd9\u4e00\u7c7b\u578b\u7684\u95ee\u9898\u8fd8\u6ca1\u6709\u6700\u5408\u9002\u7684\u8bc4\u4f30\u6307\u6807\uff0c\u4e00\u822c\u4f7f\u7528NLG\u4efb\u52a1\u4e2d\u4f7f\u7528\u7684\u6807\u51c6\u8bc4\u4f30\u6307\u6807\uff1a BLEU N-gram N-gram\u662f\u4e00\u79cd\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u53ef\u4ee5\u5c06\u4e00\u53e5\u8bdd\u8868\u793an\u4e2a\u8fde\u7eed\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u5229\u7528\u4e0a\u4e0b\u6587\u4e2d\u76f8\u90bb\u8bcd\u95f4\u7684\u642d\u914d\u4fe1\u606f\uff0c\u8ba1\u7b97\u51fa\u53e5\u5b50\u7684\u6982\u7387\uff0c\u4ece\u800c\u5224\u65ad\u4e00\u53e5\u8bdd\u662f\u5426\u901a\u987a\u3002BLEU\u4e5f\u662f\u91c7\u7528\u4e86N-gram\u7684\u5339\u914d\u539f\u5219 \u539f\u6587\uff1a \u732b\u5750\u5728\u57ab\u5b50\u4e0a \u673a\u5668\u7ffb\u8bd1\uff1aThe cat sat on the mat. \u4eba\u5de5\u7ffb\u8bd1\uff1aThe cat is on the mat. 1-gram \u5339\u914d\u5ea6 5/6 2-gram \u5339\u914d\u5ea6 3/5 3-gram \u5339\u914d\u5ea6 1/4 \u4e00\u822c\u60c5\u51b5 1-gram \u53ef\u4ee5\u4ee3\u8868\u539f\u6587\u6709\u591a\u5c11\u8bcd\u88ab\u5355\u72ec\u7ffb\u8bd1\u51fa\u6765\uff0c\u53ef\u4ee5\u53cd\u6620\u8bd1\u6587\u7684**\u5145\u5206\u6027** \uff0c 2-gram \u4ee5\u4e0a\u53ef\u4ee5\u53cd\u6620\u8bd1\u6587\u7684**\u6d41\u7545\u6027** \uff0c\u5b83\u7684\u503c\u8d8a\u9ad8\u8bf4\u660e\u53ef\u8bfb\u6027\u8d8a\u597d\u3002\u8fd9\u4e24\u4e2a\u6307\u6807\u662f\u80fd\u591f\u8ddf\u4eba\u5de5\u8bc4\u4ef7\u5bf9\u6807\u7684\u3002 \u7279\u6b8a\u60c5\u51b5 \u539f\u6587\uff1a\u732b\u5750\u5728\u57ab\u5b50\u4e0a \u673a\u5668\u8bd1\u6587\uff1a the the the the the the the. \u53c2\u8003\u8bd1\u6587\uff1aThe cat is on the mat. \u8ba1\u7b97 1-gram \u7684\u8bdd\uff0c\u4f1a\u53d1\u73b0\u6240\u6709the\u90fd\u5339\u914d\u4e0a\u4e86\uff0c\u5339\u914d\u5ea6\u662f 7/7 \u4f20\u7edf\u4e0a\uff0c Precision \u4e0e Recall \u76f8\u7ed3\u5408\u4ee5\u514b\u670d\u8fd9\u79cd\u4e0e\u957f\u5ea6\u76f8\u5173\u7684\u95ee\u9898 \u4fee\u6b63\u2460 $$ Count_{clip} = min(Count, MaxRefCount ) $$ Count \u673a\u5668\u7ffb\u8bd1\u7684\u7ed3\u679c\u4e2d N-gram \u7684\u51fa\u73b0\u6b21\u6570 Max_Ref_Count \u5404\u53c2\u8003\u8bd1\u6587\u4e2d N-gram \u6700\u5927\u51fa\u73b0\u6b21\u6570 \u4e0a\u4f8b\u4e2d\u7684 7/7 \u5219\u4f1a\u88ab\u4fee\u6b63\u4e3a 2/7 \u4fee\u6b63\u2461 \u673a\u5668\u8bd1\u6587\uff1aThe cat \u53c2\u8003\u8bd1\u6587\uff1aThe cat is on the mat. \u5339\u914d\u5ea6\uff1a 2/2 \u53ea\u7ffb\u8bd1\u51fa\u4e86\u53e5\u5b50\u4e2d\u90e8\u5206\u53e5\u5b50\u4e14\u7ffb\u8bd1\u7684\u6bd4\u8f83\u51c6\u786e\uff0c\u90a3\u4e48\u5b83\u7684\u5339\u914d\u5ea6\u4f9d\u7136\u4f1a\u5f88\u9ad8\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u8bc4\u5206\u7684\u504f\u5411\u6027\uff0cBLEU\u5728\u6700\u540e\u7684\u8bc4\u5206\u7ed3\u679c\u4e2d\u5f15\u5165\u4e86\u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50 Brevity Penalty \\[ B P=\\left\\{\\begin{array}{ll}{1} & {\\text {if } l_{c}>l s} \\\\ {e^{1-\\frac{l_{s}}{l_{c}}}} & {\\text { if } l_{c}<=l_{s}}\\end{array}\\right. \\] lc \u673a\u5668\u7ffb\u8bd1\u7684\u8bd1\u6587\u957f\u5ea6 ls \u53c2\u8003\u7b54\u6848\u7684\u957f\u5ea6 \u5b58\u5728\u591a\u4e2a\u53c2\u8003\u7b54\u6848\u65f6\u9009\u62e9\u4e0e\u673a\u5668\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u6700\u63a5\u8fd1\u7684 \u5f53\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u5927\u4e8e\u53c2\u8003\u8bd1\u6587\u7684\u957f\u5ea6\u65f6\uff0c\u60e9\u7f5a\u7cfb\u6570\u4e3a1\uff0c\u610f\u5473\u7740\u4e0d\u60e9\u7f5a\uff0c\u53ea\u6709\u673a\u5668\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u5c0f\u4e8e\u53c2\u8003\u7b54\u6848\u624d\u4f1a\u8ba1\u7b97\u60e9\u7f5a\u56e0\u5b50\u3002 \u516c\u5f0f \u7531\u4e8e\u5404N-gram\u7edf\u8ba1\u91cf\u7684\u7cbe\u5ea6\u968f\u7740\u9636\u6570\u7684\u5347\u9ad8\u800c\u5448\u6307\u6570\u5f62\u5f0f\u9012\u51cf\uff0c\u6240\u4ee5\u4e3a\u4e86\u5e73\u8861\u5404\u9636\u7edf\u8ba1\u91cf\u7684\u4f5c\u7528\uff0c\u5bf9\u5176\u91c7\u7528\u51e0\u4f55\u5e73\u5747\u5f62\u5f0f\u6c42\u5e73\u5747\u503c\u7136\u540e\u52a0\u6743\uff0c\u518d\u4e58\u4ee5\u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50\uff0c\u5f97\u5230\u6700\u540e\u7684\u8bc4\u4ef7\u516c\u5f0f\uff1a \\[ \\mathrm{BLEU}=\\mathrm{BP} \\cdot \\exp \\left(\\sum_{n=1}^{N} w_{n} \\log p_{n}\\right) \\] \\(BP\\) \u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50 \\(W_n\\) BLEU \u539f\u578b\u4e2d\u4f7f\u7528\u7684\u662f\u5747\u5300\u52a0\u6743\uff0c\u5373 \\(W_n = 1/N\\) \uff0c\u5e76\u4e14N\u7684\u4e0a\u9650\u53d6\u503c\u4e3a4\uff0c\u5373\u6700\u591a\u53ea\u7edf\u8ba1 4-gram \u7684\u7cbe\u5ea6 \\(p_n\\) \u5bf9\u4e00\u53e5\u539f\u6587\u800c\u8a00\uff0c\u5c06\u5176\u6240\u6709\u673a\u5668\u7ffb\u8bd1\u7ed3\u679c\u7684\u7cbe\u5ea6\u4e2d\u7684\u5206\u5b50\u4e4b\u548c\u9664\u4ee5\u5206\u6bcd\u4e4b\u548c \\[ p_{n}=\\frac{\\sum_{C \\in\\{\\text {Candidate}\\}} \\sum_{n-gram \\in C} \\operatorname{Count}_{c l i p}(n-g r a m)}{\\sum_{C^{\\prime} \\in\\{\\text {Candidate}\\}} \\sum_{n-gram^{\\prime} \\in C^{\\prime}} \\operatorname{Count}(n-gram)} \\] \u4f18\u70b9\uff1a\u65b9\u4fbf\u3001\u5feb\u901f\uff0c\u7ed3\u679c\u6bd4\u8f83\u63a5\u8fd1\u4eba\u7c7b\u8bc4\u5206\u3002 \u7f3a\u70b9\uff1a \u4e0d\u8003\u8651\u8bed\u8a00\u8868\u8fbe\uff08\u8bed\u6cd5\uff09\u4e0a\u7684\u51c6\u786e\u6027 \u6d4b\u8bc4\u7cbe\u5ea6\u4f1a\u53d7\u5e38\u7528\u8bcd\u7684\u5e72\u6270 \u77ed\u8bd1\u53e5\u7684\u6d4b\u8bc4\u7cbe\u5ea6\u6709\u65f6\u4f1a\u8f83\u9ad8 \u6ca1\u6709\u8003\u8651\u540c\u4e49\u8bcd\u6216\u76f8\u4f3c\u8868\u8fbe\u7684\u60c5\u51b5\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5408\u7406\u7ffb\u8bd1\u88ab\u5426\u5b9a BLEU\u672c\u8eab\u5c31\u4e0d\u8ffd\u6c42\u767e\u5206\u4e4b\u767e\u7684\u51c6\u786e\u6027\uff0c\u4e5f\u4e0d\u53ef\u80fd\u505a\u5230\u767e\u5206\u4e4b\u767e\uff0c\u5b83\u7684\u76ee\u6807\u53ea\u662f\u7ed9\u51fa\u4e00\u4e2a\u5feb\u4e14\u4e0d\u5dee\u7684\u81ea\u52a8\u8bc4\u4f30\u89e3\u51b3\u65b9\u6848 BLEU\uff1a\u4e00\u79cd\u81ea\u52a8\u8bc4\u4f30\u673a\u5668\u7ffb\u8bd1\u7684\u65b9\u6cd5 \u673a\u5668\u7ffb\u8bd1\u8bc4\u6d4b\u2014\u2014BLEU\u7b97\u6cd5\u8be6\u89e3 Meteor \u57fa\u4e8e\u5355\u7cbe\u5ea6\u7684\u52a0\u6743\u8c03\u548c\u5e73\u5747\u6570\u548c\u5355\u5b57\u53ec\u56de\u7387 $$ {Pen=\\gamma\\left(\\frac{ch}{m}\\right)^{\\theta}} \\ {F_{\\text {mean}}=\\frac{P_{m} R_{m}}{\\alpha P_{m}+(1-\\alpha) R_{m}}} \\ {P_{m}=\\frac{|m|}{\\sum_{k} h_{k}\\left(c_{i}\\right)}} \\ {R_{m}=\\frac{|m|}{\\sum_{k} h_{k}\\left(s_{i, j}\\right)}} \\ {METEOR=(1-Pen) F_{mean}} $$ \u5176\u4e2d\uff0c \\(\\alpha, \\gamma, \\theta\\) \u5747\u4e3a\u7528\u4e8e\u8bc4\u4ef7\u7684\u9ed8\u8ba4\u53c2\u6570 \u9884\u5148\u5b9a\u4e49\u7684\u6821\u51c6 alignment \\(m\\) \uff0c\u800c\u8fd9\u4e00\u6821\u51c6\u57fa\u4e8e WordNet \u7684\u540c\u4e49\u8bcd\u5e93\uff0c\u901a\u8fc7\u6700\u5c0f\u5316\u5bf9\u5e94\u8bed\u53e5\u4e2d\u8fde\u7eed\u6709\u5e8f\u7684\u5757 chunks \\(ch\\) \u6765\u5f97\u51fa \u540c\u65f6\u8003\u8651\u4e86\u57fa\u4e8e\u6574\u4e2a\u8bed\u6599\u5e93\u4e0a\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747 ROUGE \u4e0e BLEU \u7c7b\u4f3c\u4e00\u79cd\u57fa\u4e8e\u53ec\u56de\u7387\u7684\u76f8\u4f3c\u6027\u5ea6\u91cf\uff0c\u5145\u5206\u8003\u5bdf\u7ffb\u8bd1\u7684\u5145\u5206\u6027\u548c\u5fe0\u5b9e\u6027\uff0c\u65e0\u6cd5\u8bc4\u4ef7\u6d41\u7545\u5ea6 ROUGE-L \u4f7f\u7528\u57fa\u4e8eLCS\u7684F-measure\u6765\u8bc4\u4ef7\u4e24\u4e2a\u53e5\u5b50X\u548cY\u7684\u76f8\u4f3c\u6027\uff0c\u5047\u8bbeX\u662f\u53c2\u8003\u8bd1\u6587\uff0cY\u662f\u5e26\u8bc4\u6d4b\u8bd1\u6587 \\[ \\begin{array}{c}{R_{lcs}=\\frac{LCS(X, Y)}{m}} \\\\ {P_{lcs}=\\frac{LCS(X, Y)}{n}} \\\\ {F_{lcs}=\\frac{\\left(1+\\beta^{2}\\right) R_{lcs} P_{lcs}}{R_{l c s}+\\beta^{2} P_{lcs}}}\\end{array} \\] \\(m,n\\) \u5206\u522b\u4ee3\u8868X\u4e0eY\u7684\u5e8f\u5217\u957f\u5ea6 \\(R_{lcs}\\) \u548c \\(P_{lcs}\\) \u5206\u522b\u5bf9\u5e94\u53ec\u56de\u7387\u548c\u51c6\u786e\u7387 \\(\\beta = \\frac{P_{lcs}}{R_{lcs}}\\) \uff0c\u5982\u679c \\(\\beta\\) \u8fc7\u5927\uff0c\u5219\u53ea\u9700\u8981\u8003\u8651 \\(R_{lcs}\\) \u603b\u7684\u6765\u8bf4\uff0c ROUGE \u6709\u4ee5\u4e0b\u53d8\u79cd Name Description ROUGE-N \u57fa\u4e8eN-gram\u5171\u73b0\u6027\u7edf\u8ba1 ROUGE-L \u57fa\u4e8e\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\u7684\u7cbe\u51c6\u5ea6\u548c\u53ec\u56de\u7387\u7edf\u8ba1 ROUGE-W \u5e26\u6743\u91cd\u7684ROUGE-L ROUGE-S \u4e0d\u8fde\u7eed\u4e8c\u5143\u7ec4\u5171\u7ebf\u6027\u7cbe\u51c6\u5ea6\u548c\u53ec\u56de\u7387\u7edf\u8ba1 2.3 Reading Comprehension vs. Question Answering \u00b6 \u9605\u8bfb\u7406\u89e3\u53ef\u4ee5\u89c6\u4e3a\u95ee\u7b54\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4e24\u8005\u5b58\u5728\u5173\u7cfb\u4e5f\u6709\u4e00\u5b9a\u7684\u533a\u522b\u3002 \u56e0\u4e3aQA\u5f88\u53ef\u80fd\u662f\u57fa\u4e8e\u4e00\u7bc7\u77ed\u6587\u7684 \u7136\u800c\uff0c\u5c3d\u7ba1\u9605\u8bfb\u7406\u89e3\u548c\u4e00\u822c\u95ee\u9898\u56de\u7b54\u5728\u95ee\u9898\u7684\u5f62\u6210\u3001\u65b9\u6cd5\u548c\u8bc4\u4ef7\u4e0a\u6709\u8bb8\u591a\u5171\u540c\u7684\u7279\u70b9\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u5b83\u4eec\u5f3a\u8c03\u7684\u6700\u7ec8\u76ee\u6807\u662f\u4e0d\u540c\u7684 QA\u7684\u6700\u7ec8\u76ee\u6807\u662f\u5efa\u7acb\u80fd\u591f\u81ea\u52a8\u56de\u7b54\u4eba\u7c7b\u63d0\u95ee\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\uff0c\u4e0d\u7ba1\u4f9d\u8d56\u4e8e\u4f55\u79cd\u8d44\u6e90\u3002 \u53ef\u4ee5\u662f\u7ed3\u6784\u5316\u7684\u77e5\u8bc6\u5e93\uff0c\u975e\u7ed3\u6784\u5316\u7684\u6587\u672c\u96c6\u5408\uff0c\u534a\u7ed3\u6784\u5316\u8868\u751a\u81f3\u5176\u4ed6\u6a21\u5f0f\u3002\u4e3a\u4e86\u63d0\u9ad8QA\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u4eba\u4eec\u5728(1)\u5982\u4f55\u641c\u7d22\u548c\u8bc6\u522b\u76f8\u5173\u8d44\u6e90\uff0c(2)\u5982\u4f55\u96c6\u6210\u6765\u81ea\u4e0d\u540c\u4fe1\u606f\u7247\u6bb5\u7684\u7b54\u6848\uff0c\u751a\u81f3(3)\u7814\u7a76\u4eba\u7c7b\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u901a\u5e38\u4f1a\u95ee\u54ea\u4e9b\u7c7b\u578b\u7684\u95ee\u9898\u4e0a\u8fdb\u884c\u4e86\u5927\u91cf\u7684\u5de5\u4f5c \u7136\u800c\u9605\u8bfb\u7406\u89e3\u5219\u66f4\u5f3a\u8c03\u6587\u672c\u7406\u89e3\uff0c\u5e76\u56de\u7b54\u95ee\u9898\u7684\u5f62\u5f0f\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u7684\u7a0b\u5ea6\uff0c\u6240\u4ee5\u56de\u7b54\u7406\u89e3\u95ee\u9898\u7684\u4fe1\u606f\u90fd\u662f\u6765\u81ea\u4e8e\u6587\u7ae0\u672c\u8eab\u800c\u4e0d\u662f\u4efb\u4f55\u4e16\u754c\u77e5\u8bc6\u3002 \u95ee\u9898\u4e5f\u901a\u5e38\u662f\u4e3a\u4e86\u6d4b\u8bd5\u4e0d\u540c\u65b9\u9762\u7684\u9605\u8bfb\u7406\u89e3\u800c\u8bbe\u8ba1\u7684\u3002\u8fd9\u79cd\u533a\u522b\u7c7b\u4f3c\u4e8e\u4eba\u4eec\u901a\u5e38\u5728\u641c\u7d22\u5f15\u64ce\u4e0a\u95ee\u4ec0\u4e48\u95ee\u9898\uff0c\u800c\u5728\u4eba\u7c7b\u9605\u8bfb\u7406\u89e3\u6d4b\u8bd5\u4e2d\u901a\u5e38\u4f1a\u63d0\u51fa\u4ec0\u4e48\u7c7b\u578b\u7684\u95ee\u9898\u3002 \u65e9\u671f\u5de5\u4f5c\u4e2d\u4f7f\u7528\u672f\u8bed micro-reading \u548c macro-reading \u5b8f\u89c2\u9605\u8bfb\u4e0e\u5fae\u89c2\u9605\u8bfb \u6765\u533a\u5206\u8fd9\u4e24\u79cd\u60c5\u51b5\u3002\u524d\u8005\u96c6\u4e2d\u5728\u9605\u8bfb\u4e00\u4e2a\u6587\u672c\u6587\u6863\uff0c\u5e76\u65e8\u5728\u63d0\u53d6\u6587\u6863\u5b8c\u6574\u7684\u4fe1\u606f\u5185\u5bb9(\u7c7b\u4f3c\u4e8e\u6211\u4eec\u7684\u9605\u8bfb\u7406\u89e3\u7684\u8bbe\u5b9a),\u800c\u540e\u8005\u9700\u8981\u5927\u578b\u6587\u672c\u96c6\u5408(Web)\u4f5c\u4e3a\u8f93\u5165,\u5e76\u63d0\u53d6\u5927\u91cf\u7684\u4e8b\u5b9e\u5728\u6587\u672c\u4e2d\u8868\u8fbe,\u800c\u4e0d\u9700\u8981\u63d0\u53d6\u6bcf\u4e00\u4e2a\u4e8b\u5b9e\u3002\u5b8f\u89c2\u9605\u8bfb\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528\u6587\u6863\u4e2d\u4fe1\u606f\u7684\u5197\u4f59\uff0c\u91cd\u70b9\u5206\u6790\u6587\u672c\u4e2d\u4e8b\u5b9e\u7684\u7b80\u5355\u63aa\u8f9e\uff0c\u800c\u5fae\u89c2\u9605\u8bfb\u5219\u9700\u8981\u6df1\u5165\u7814\u7a76\u8bed\u8a00\u7406\u89e3\u3002 2.4 Datasets and Models \u00b6 \u9605\u8bfb\u7406\u89e3\u9886\u57df\u7684\u6210\u529f\u4e3b\u8981\u5f52\u7ed3\u4e8e\u4e24\u70b9\uff1a large-scale reading comprehension datasets \u5927\u89c4\u6a21\u7684\u6570\u636e\u96c6 end-to-end neural reading comprehension models \u7aef\u5230\u7aef\u7684\u6df1\u5ea6\u6a21\u578b \u4ed6\u4eec\u5171\u540c\u52aa\u529b\u63a8\u8fdb\u8fd9\u4e00\u9886\u57df\u7684\u53d1\u5c55\uff0c\u5e76\u63a8\u52a8\u5efa\u7acb\u66f4\u597d\u7684\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u7684\u8fb9\u754c: \u4e00\u65b9\u9762\uff0c\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u521b\u5efa\u4f7f\u5f97\u8bad\u7ec3\u795e\u7ecf\u6a21\u578b\u6210\u4e3a\u53ef\u80fd\uff0c\u540c\u65f6\u4e5f\u5c55\u793a\u4e86\u5b83\u4eec\u76f8\u5bf9\u4e8e\u7b26\u53f7NLP\u7cfb\u7edf\u7684\u7ade\u4e89\u529b\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u7684\u53ef\u7528\u6027\u8fdb\u4e00\u6b65\u5438\u5f15\u4e86\u6211\u4eec\u7814\u7a76\u793e\u533a\u7684\u5927\u91cf\u5173\u6ce8\uff0c\u5e76\u6fc0\u53d1\u4e86\u4e00\u7cfb\u5217\u5efa\u6a21\u521b\u65b0\u3002\u7531\u4e8e\u6240\u6709\u8fd9\u4e9b\u52aa\u529b\uff0c\u5df2\u7ecf\u53d6\u5f97\u4e86\u5de8\u5927\u7684\u8fdb\u5c55\u3002 \u53e6\u4e00\u65b9\u9762\u4e86\u89e3\u73b0\u6709\u6a21\u578b\u7684\u6027\u80fd\u6709\u52a9\u4e8e\u8fdb\u4e00\u6b65\u8ba4\u8bc6\u73b0\u6709\u6570\u636e\u96c6\u7684\u5c40\u9650\u6027\u3002\u8fd9\u4fc3\u4f7f\u6211\u4eec\u5bfb\u6c42\u66f4\u597d\u7684\u65b9\u5f0f\u6765\u6784\u5efa\u66f4\u591a\u7684\u6311\u6218 \u56fe2.2\u663e\u793a\u4e862016\u5e74\u540e\u5173\u952e\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u6700\u65b0\u5f00\u53d1\u65f6\u95f4\u8f74. \u6b63\u5982\u6240\u770b\u5230\u7684\uff0c\u5c3d\u7ba1\u53ea\u6709\u4e09\u5e74\u7684\u65f6\u95f4\uff0c\u8fd9\u4e2a\u9886\u57df\u5df2\u7ecf\u53d6\u5f97\u4e86\u60ca\u4eba\u7684\u8fdb\u5c55\u3002\u5728\u5efa\u7acb\u66f4\u597d\u7684\u6570\u636e\u96c6\u548c\u66f4\u6709\u6548\u7684\u6a21\u578b\u65b9\u9762\u7684\u521b\u65b0\u4ea4\u66ff\u51fa\u73b0\uff0c\u5e76\u5bf9\u8be5\u9886\u57df\u7684\u53d1\u5c55\u4f5c\u51fa\u4e86\u8d21\u732e\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u8ba4\u4e3a\u7ee7\u7eed\u53d1\u5c55\u8fd9\u4e24\u4e2a\u90e8\u5206\u540c\u6837\u91cd\u8981\u3002 \u5728\u4e0b\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u4e3b\u8981\u5173\u6ce8\u5efa\u6a21\u65b9\u9762\uff0c\u4f7f\u7528\u6211\u4eec\u524d\u9762\u6240\u63cf\u8ff0\u5f97\u66f4\u5177\u6709\u4ee3\u8868\u6027\u7684\u7684\u4e24\u4e2a\u6570\u636e\u96c6: CNN/Daily MAIL \u548c SQUAD \u3002\u5728\u7b2c\u56db\u7ae0\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u66f4\u591a\u5173\u4e8e\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u8fdb\u5c55\u548c\u672a\u6765\u7684\u5de5\u4f5c Chapter 3 Neural Reading Comprehension Models \u00b6 3.1 Previous Approaches: Feature-based Models \u00b6 \u4ee5\u5f80\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u7814\u7a76\u65b9\u6cd5\u5927\u591a\u57fa\u4e8e\u7279\u5f81\u5efa\u6a21\uff0c\u4ee5\u9648\u4e39\u7426\uff082016\uff09\u7684\u5728CNN/daily mail\u4e0a\u4f7f\u7528\u7684\u65b9\u6cd5\u4e3a\u4f8b\u3002\u5b83\u7684\u4e3b\u8981\u601d\u60f3\u662f\u6784\u5efa\u4e00\u4e2a\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u63d0\u53d6\u7684\u5206\u7c7b\u5668\uff0c\u4ee5\u68c0\u6d4b\u54ea\u4e9b\u7279\u5f81\u5bf9\u4e8e\u8be5\u4efb\u52a1\u800c\u8a00\u6bd4\u8f83\u91cd\u8981\u3002 \u4e3a\u6bcf\u4e00\u4e2a\u5019\u9009\u5b9e\u4f53\u8bbe\u8ba1\u4e00\u4e2a\u7279\u5f81\u5411\u91cf \\(f_{p,q}(e)\\) \uff0c\u5b66\u4e60\u4e00\u4e2a\u6743\u91cd\u5411\u91cf \\(W_T\\) \u4f7f\u5f97\u6b63\u786e\u7b54\u6848\u7684ranking\u6bd4\u5176\u4ed6\u5019\u9009\u5b9e\u4f53\u9ad8\uff08\u5373\u8f6c\u6362\u6210\u5019\u9009\u5b9e\u4f53\u7684ranking\u95ee\u9898\uff0c\u5c06ranking\u5f97\u5206\u6700\u9ad8\u7684\u5b9e\u4f53\u4f5c\u4e3a\u4f5c\u4e3a\u7b54\u6848\uff09 $$ \\mathbf{w}^{\\top} f_{p, q}(a)>\\mathbf{w}^{\\top} f_{p, q}(e), \\forall e \\in \\mathcal{E} \\backslash a $$ \u4e3a\u6bcf\u4e00\u4e2a\u5b9e\u4f53\u6784\u5efa\u7279\u5f81\u5411\u91cf\u540e\uff0c\u4f7f\u7528\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u73b0rank\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u6784\u5efa\u6709\u7528\u7684\u7279\u5f81\u5411\u91cf\u3002 \u5982\u8868\u6240\u793a\uff0c\u8fd9\u4e9b\u7279\u5f81\u88ab\u5f88\u597d\u5730\u8bbe\u8ba1\u5e76\u63cf\u8ff0\u4e86\u5b9e\u4f53\u7684\u4fe1\u606f(\u4f8b\u5982\uff0c\u9891\u7387\u3001\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u662f\u5426\u662f\u4e00\u4e2a\u95ee\u9898/\u77ed\u6587\u8bcd)\uff0c\u4ee5\u53ca\u5b83\u4eec\u5982\u4f55\u4e0e\u6587\u7ae0/\u95ee\u9898\u5bf9\u9f50(\u4f8b\u5982\uff0c\u5171\u73b0\u3001\u8ddd\u79bb\u3001\u7ebf\u6027\u548c\u8bed\u6cd5\u5339\u914d)\u3002\u4e00\u4e9b\u7279\u6027(#6\u548c #8 )\u4e5f\u4f9d\u8d56\u4e8e\u8bed\u8a00\u5de5\u5177\uff0c\u6bd4\u5982\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\u548c\u8bcd\u6027\u6807\u8bb0(\u51b3\u5b9a\u4e00\u4e2a\u5355\u8bcd\u662f\u5426\u662f\u52a8\u8bcd)\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8e\u975e\u795e\u7ecf\u6a21\u578b\uff0c\u5982\u4f55\u6784\u9020\u4e00\u7ec4\u6709\u7528\u7684\u7279\u5f81\u59cb\u7ec8\u662f\u4e00\u4e2a\u6311\u6218\u3002\u6709\u7528\u7684\u7279\u6027\u5fc5\u987b\u662f\u975e\u6b63\u5f0f\u7684\uff0c\u5e76\u4e14\u80fd\u591f\u5f88\u597d\u5730\u9002\u5e94\u7279\u5b9a\u7684\u4efb\u52a1\uff0c\u540c\u65f6\u53c8\u4e0d\u80fd \u8fc7\u4e8e\u7a00\u758f \u800c\u4e0d\u80fd\u5f88\u597d\u5730\u4ece\u8bad\u7ec3\u96c6\u4e2d\u6982\u62ec\u51fa\u6765\u3002\u6211\u4eec\u5728\u4e4b\u524d\u76842.1.2\u8282\u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7\uff0c\u8fd9\u5728\u5927\u591a\u6570\u57fa\u4e8e\u7279\u6027\u7684\u6a21\u578b\u4e2d\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u3002\u6b64\u5916\uff0c\u4f7f\u7528\u73b0\u6210\u7684\u8bed\u8a00\u5de5\u5177\u4f7f\u6a21\u578b\u66f4\u52a0\u6602\u8d35\uff0c\u5b83\u4eec\u7684\u6700\u7ec8\u6027\u80fd\u53d6\u51b3\u4e8e\u8fd9\u4e9b\u6ce8\u91ca\u7684\u51c6\u786e\u6027\u3002 \u5176\u4ed6\u6784\u5efa\u57fa\u4e8e\u7279\u5f81\u7684\u6a21\u578b\u5728\u672c\u8d28\u4e0a\u4e0e\u6211\u4eec\u7684\u76f8\u4f3c\uff08\u5bf9\u4e8e\u8fd9\u4e9b\u8de8\u5ea6\u9884\u6d4b\u4efb\u52a1\uff0c\u5b83\u4eec\u9700\u8981\u9996\u5148\u786e\u5b9a\u4e00\u7ec4\u53ef\u80fd\u7684\u7b54\u6848\uff09 3.2 A Neural Approach: The Stanford Attentive Reader \u00b6 3.2.1 Preliminaries \u00b6 WORD EMBEDDINGS \u00b6 \u7b2c\u4e00\u4e2a\u5173\u952e\u7684idea\u5c31\u662f\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u4f4e\u7ef4\u7684\u3001\u771f\u5b9e\u6570\u503c\u7684\u5411\u91cf\u3002\u4ee5\u5f80\u7684One-hot \u5411\u91cf\u7684\u6700\u5927\u7684\u95ee\u9898\u662f\u4ed6\u4eec\u5728\u5355\u8bcd\u4e4b\u95f4\u6ca1\u6709\u4efb\u4f55\u8bed\u4e49\u76f8\u4f3c\u6027\uff0c\u5373\u5bf9\u4e8e\u4efb\u610f\u4e00\u5bf9\u4e0d\u540c\u7684\u5355\u8bcd \\(a,b,cos(va,vb)=0\\) \u3002\u4f4e\u7ef4\u5355\u8bcd\u5d4c\u5165\u6709\u6548\u5730\u89e3\u51b3\u4e86\u8fd9\u4e00\u95ee\u9898\uff0c\u76f8\u4f3c\u7684\u5355\u8bcd\u53ef\u4ee5\u5728\u51e0\u4f55\u7a7a\u95f4\u4e2d\u7f16\u7801\u4e3a\u76f8\u4f3c\u7684\u5411\u91cf\uff1a \\(cos(v_{car},v_{vechicle})<cos(v_{car},v_{man})\\) \u3002\u8fd9\u4e9b\u8bcd\u7684\u5d4c\u5165\u53ef\u4ee5\u4ece\u5927\u578b\u65e0\u6807\u8bb0\u6587\u672c\u8bed\u6599\u5e93\u4e2d\u6709\u6548\u5730\u5b66\u4e60\u5230\uff0c\u8fd9\u662f\u57fa\u4e8e\u5355\u8bcd\u51fa\u73b0\u5728\u76f8\u4f3c\u7684\u4e0a\u4e0b\u6587\u4e2d\u5f80\u5f80\u5177\u6709\u76f8\u4f3c\u7684\u542b\u4e49\u8fd9\u4e00\u5047\u8bbe(\u53c8\u79f0\u5206\u5e03\u5047\u8bf4)\u3002 \u6700\u8fd1\u7684\u53ef\u4f38\u7f29\u7b97\u6cd5\u548c\u53d1\u5e03\u7684\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5d4c\u5165\u96c6\u6700\u7ec8\u666e\u53ca\u4e86\u5355\u8bcd\u5d4c\u5165\uff0c\u5982word2vec (Mikolov et al., 2013)\uff0cGlove(Pennington et al.,2014)\u548cFASTTEXT (Bojanowski et al.,2017)\u3002\u5b83\u4eec\u5df2\u6210\u4e3a\u73b0\u4ee3NLP\u7cfb\u7edf\u7684\u4e2d\u6d41\u7825\u67f1\u3002 RECURRENT NEURAL NETWORKS \u00b6 \u7b2c\u4e8c\u4e2a\u91cd\u8981\u7684\u601d\u60f3\u662f\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs)\u6765\u5efa\u6a21NLP\u4e2d\u7684\u53e5\u5b50\u6216\u6bb5\u843d\u3002\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u662f\u4e00\u7c7b\u9002\u5408\u5904\u7406\u53d8\u957f\u5e8f\u5217\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5b83\u4eec\u9012\u5f52\u5730\u5c06\u53c2\u6570\u5316\u51fd\u6570\u5e94\u7528\u4e8e\u5e8f\u5217 \\(x_1,\u2026,x_n\\) \\[ \\mathbf{h}_{t}=f\\left(\\mathbf{h}_{t-1}, \\mathbf{x}_{t} ; \\Theta\\right) \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{h h} \\in \\mathbb{R}^{h \\times h}, \\mathbf{W}^{h x} \\in \\mathbb{R}^{h \\times d}, \\mathbf{b} \\in \\mathbb{R}^{h}\\) \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\u3002 \u53d8\u4f53LSTM\u548cGRU\u662f\u5e38\u7528\u7684\u4e24\u79cd\uff0cLSTM\u4ecd\u7136\u662f\u5f53\u4ecaNLP\u5e94\u7528\u4e2d\u6700\u6709\u7ade\u4e89\u529b\u7684RNN\u53d8\u4f53\uff0c\u4e5f\u662f\u6211\u4eec\u5c06\u63cf\u8ff0\u7684\u795e\u7ecf\u6a21\u578b\u7684\u9ed8\u8ba4\u9009\u62e9\u3002 \\[ \\begin{aligned} \\mathbf{i}_{t} &=\\sigma\\left(\\mathbf{W}^{i h} \\mathbf{h}_{t-1}+\\mathbf{W}^{i x} \\mathbf{x}_{t}+\\mathbf{b}^{i}\\right) \\\\ \\mathbf{f}_{t} &=\\sigma\\left(\\mathbf{W}^{f h} \\mathbf{h}_{t-1}+\\mathbf{W}^{f x} \\mathbf{x}_{t}+\\mathbf{b}^{f}\\right) \\\\ \\mathbf{o}_{t} &=\\sigma\\left(\\mathbf{W}^{o h} \\mathbf{h}_{t-1}+\\mathbf{W}^{o x} \\mathbf{x}_{t}+\\mathbf{b}^{o}\\right) \\\\ \\mathbf{g}_{t} &=\\tanh \\left(\\mathbf{W}^{g h} \\mathbf{h}_{t-1}+\\mathbf{W}^{g x} \\mathbf{x}_{t}+\\mathbf{b}^{g}\\right) \\\\ \\mathbf{c}_{t} &=\\mathbf{f}_{t} \\odot \\mathbf{c}_{t-1}+\\mathbf{i}_{t} \\odot \\mathbf{g}_{t} \\\\ \\mathbf{h}_{t} &=\\mathbf{o}_{t} \\odot \\tanh \\left(\\mathbf{c}_{t}\\right) \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{i h}, \\mathbf{W}^{f h}, \\mathbf{W}^{o h}, \\mathbf{W}^{g h} \\in \\mathbb{R}^{h \\times h}, \\mathbf{W}^{i x}, \\mathbf{W}^{f x}, \\mathbf{W}^{o x}, \\mathbf{W}^{g x} \\in \\mathbb{R}^{h \\times d}\\) and \\(\\mathbf{b}^{i}, \\mathbf{b}^{f}, \\mathbf{b}^{o}, \\mathbf{b}^{g} \\in \\mathbb{R}^{h}\\) \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\u3002 \u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u6709\u7528\u7684\u7cbe\u5de7\u8bbe\u8ba1BiRNN\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u5f88\u7b80\u5355:\u5bf9\u4e8e\u4e00\u4e2a\u53e5\u5b50\u6216\u4e00\u4e2a\u6bb5\u843d\uff0c \\(x=x_1,\u2026,x_n\\) \u524d\u5411RNN\u4ece\u5de6\u5230\u53f3\uff0c\u540e\u5411RNN\u4ece\u53f3\u5230\u5de6\uff1a \\[ \\begin{aligned} \\overrightarrow{\\mathbf{h}}_{t} &=f\\left(\\overrightarrow{\\mathbf{h}}_{t-1}, \\mathbf{x}_{t} ; \\overrightarrow{\\Theta}\\right), \\quad t=1, \\ldots, n \\\\ \\overleftarrow{\\mathbf{h}}_{t} &=f\\left(\\overleftarrow{\\mathbf{h}}_{t+1}, \\mathbf{x}_{t} ; \\overleftarrow{\\Theta}\\right), \\quad t=n, \\ldots, 1 \\end{aligned} \\] \u6211\u4eec\u5b9a\u4e49 \\(\\mathbf{h}_{t}=\\left[\\overrightarrow{\\mathbf{h}}_{t} ; \\overleftarrow{\\mathbf{h}_{t}}\\right] \\in \\mathbb{R}^{2 h}\\) \uff0c\u5bf9\u6765\u81eaRNNs\u7684\u4e24\u4e2a\u65b9\u5411\u7684\u9690\u85cf\u5411\u91cf\u8fdb\u884c\u62fc\u63a5\u3002\u8fd9\u4e9b\u8868\u793a\u53ef\u4ee5\u6709\u6548\u5730\u5bf9\u6765\u81ea\u5de6\u4e0a\u4e0b\u6587\u548c\u53f3\u4e0a\u4e0b\u6587\u7684\u4fe1\u606f\u8fdb\u884c\u7f16\u7801\uff0c\u9002\u7528\u4e8e\u8bb8\u591aNLP\u4efb\u52a1\u7684\u901a\u7528\u53ef\u8bad\u7ec3\u7279\u5f81\u63d0\u53d6\u7ec4\u4ef6 ATTENTION MECHANISM \u00b6 \u7b2c\u4e09\u4e2a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u662f\u6ce8\u610f\u673a\u5236\u3002\u9996\u6b21\u5f15\u5165sequence-to-sequence(seq2seq)\u6a21\u578b\u7528\u4e8e\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\uff0c\u5e76\u5df2\u6269\u5c55\u5230\u5176\u4ed6NLP\u4efb\u52a1\u3002 \u5173\u952e\u7684\u601d\u60f3\u662f\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u9884\u6d4b\u4e00\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\uff0c\u6216\u8005\u628a\u4e00\u4e2a\u53e5\u5b50\u4ece\u4e00\u79cd\u8bed\u8a00\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd\u8bed\u8a00\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u6765\u7f16\u7801\u4e00\u4e2a\u53e5\u5b50(\u6216\u8005\u673a\u5668\u7ffb\u8bd1\u7684\u6e90\u53e5): \\(h_1,h_2,\u2026,h_n\\) \uff0c\u5e76\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65 \\(h_n\\) \u9884\u6d4b\u60c5\u611f\u6807\u7b7e\u6216\u76ee\u6807\u8bed\u8a00\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd: \\[ P(Y=y)=\\frac{\\exp \\left(\\mathbf{W}_{y} \\mathbf{h}_{n}\\right)}{\\sum_{y^{\\prime}} \\exp \\left(\\mathbf{W}_{y^{\\prime}} \\mathbf{h}_{n}\\right)} \\] \u8fd9\u5c31\u8981\u6c42\u8be5\u6a21\u578b\u80fd\u591f\u5c06\u4e00\u4e2a\u53e5\u5b50\u7684\u6240\u6709\u5fc5\u8981\u4fe1\u606f\u538b\u7f29\u6210\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u63d0\u9ad8\u6027\u80fd\u7684\u4fe1\u606f\u74f6\u9888\u3002\u8bbe\u8ba1\u4e86\u4e00\u79cd\u6ce8\u610f\u673a\u5236\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898:\u5b83\u4e0d\u662f\u5c06\u6240\u6709\u4fe1\u606f\u538b\u7f29\u5230\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5411\u91cf\u4e2d\uff0c\u800c\u662f\u5728\u6240\u6709\u65f6\u95f4\u6b65\u9aa4\u4e2d\u67e5\u770b\u9690\u85cf\u5411\u91cf\u5e76\u81ea\u9002\u5e94\u5730\u9009\u53d6\u8fd9\u4e9b\u5411\u91cf\u7684\u5b50\u96c6: \\[ \\begin{aligned} \\alpha_{i} &=\\frac{\\exp \\left(g\\left(\\mathbf{h}_{i}, \\mathbf{w} ; \\Theta_{g}\\right)\\right)}{\\sum_{i^{\\prime}=1}^{n} \\exp \\left(g\\left(\\mathbf{h}_{i^{\\prime}}, \\mathbf{w} ; \\Theta_{g}\\right)\\right)} \\\\ \\mathbf{c} &=\\sum_{i=1}^{n} \\alpha_{i} \\mathbf{h}_{i} \\end{aligned} \\] \u8fd9\u91ccw\u53ef\u4ee5\u662f\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5b66\u4e60\u5230\u7684\u4efb\u52a1\u7279\u5b9a\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u673a\u5668\u7ffb\u8bd1\u4e2d\u5f53\u524d\u76ee\u6807\u9690\u85cf\u72b6\u6001\uff0cg\u662f\u53c2\u6570\u51fd\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u70b9\u79ef\u3001\u53cc\u7ebf\u6027\u79ef\u3001\u6216MLP \\[ \\begin{aligned} g_{dot}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{h}_{i}^{\\top} \\mathbf{w} \\\\ g_{bilinear}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{h}_{i}^{\\top} \\mathbf{W} \\mathbf{w} \\\\ g_{MLP}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{v}^{\\top} \\tanh \\left(\\mathbf{W}^{h} \\mathbf{h}_{i}+\\mathbf{W}^{w} \\mathbf{w}\\right) \\end{aligned} \\] \u7b80\u5355\u6765\u8bf4\uff0cAttention\u673a\u5236\u4f1a\u4e3a\u6bcf\u4e00\u4e2ahihi\u8ba1\u7b97\u4e00\u4e2a\u76f8\u4f3c\u5ea6\u5206\u6570\uff0c\u7136\u540e\u4f7f\u7528softmax\u505a\u5f52\u4e00\u5316\u3002\u56e0\u6b64\u03b1\u03b1\u57fa\u672c\u4e0a\u80fd\u591f\u6355\u83b7\u53e5\u5b50\u4e2d\u7684\u90a3\u4e00\u90e8\u5206\u662f\u771f\u6b63\u76f8\u5173\u7684\uff0ccc\u5219\u7528\u52a0\u6743\u548c\u8868\u793a\u6240\u6709\u65f6\u95f4\u6b65\u957f\u7684\u603b\u548c\uff0c\u53ef\u4ee5\u7528\u4e8e\u6700\u7ec8\u9884\u6d4b\u3002 \u6ce8\u610f\u673a\u5236\u5df2\u88ab\u8bc1\u660e\u5728\u4f17\u591a\u5e94\u7528\u4e2d\u5177\u6709\u5e7f\u6cdb\u7684\u6709\u6548\u6027\uff0c\u6210\u4e3a\u795e\u7ecfNLP\u6a21\u578b\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u6700\u8fd1\uff0cParikh et al.(2016)\u548cVaswani et al.(2017)\u63a8\u6d4b\u6ce8\u610f\u673a\u5236\u4e0d\u5fc5\u4e0e\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7ed3\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u5b8c\u5168\u57fa\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u524d\u9988\u7f51\u7edc\u6784\u5efa\uff0c\u540c\u65f6\u63d0\u4f9b\u6700\u5c0f\u7684\u5e8f\u5217\u4fe1\u606f\u3002\u8fd9\u7c7b\u6a21\u578b\u901a\u5e38\u9700\u8981\u66f4\u5c11\u7684\u53c2\u6570\uff0c\u5e76\u4e14\u5177\u6709\u66f4\u5f3a\u7684\u5e76\u884c\u6027\u548c\u53ef\u4f38\u7f29\u6027\u2014\u2014\u7279\u522b\u662f\u5728Vaswani et al.(2017)\u4e2d\u63d0\u51fa\u7684Transformer\u6a21\u578b\u5df2\u7ecf\u6210\u4e3a\u4e00\u4e2a\u7814\u7a76\u70ed\u70b9\u3002 3.2.2 The Model \u00b6 THE STANFORD ATTENTIVE READER \u662f\u53d7\u5230\u4e86 ATTENTIVE READER \u548c\u5176\u4ed6\u5e76\u884c\u5de5\u4f5c\u7684\u542f\u53d1\uff0c\u76ee\u6807\u662f\u662f\u6a21\u578b\u53d8\u5f97\u7b80\u5355\u800c\u5f3a\u5927\u3002\u6211\u4eec\u9996\u5148\u63cf\u8ff0\u4e86Chen\u7b49\u4eba(2017)\u4ecb\u7ecd\u7684\u8de8\u5ea6\u9884\u6d4b\u95ee\u9898\u7684\u5b8c\u6574\u5f62\u5f0f\uff0c\u7136\u540e\u8ba8\u8bba\u4e86\u5b83\u7684\u5176\u4ed6\u53d8\u4f53\u3002 \u5bf9\u4e8e\u57fa\u4e8e\u8303\u56f4\u7684\u95ee\u9898\u800c\u8a00\uff0c\u7ed9\u5b9a\u4e00\u7bc7\u6587\u7ae0 \\(p\\) \u7531 \\(l_p\\) \u4e2atokens \\((p_1,p_2,...,p_{l_p})\\) \u6784\u6210\u548c\u4e00\u4e2a\u95ee\u9898 \\(q\\) \u7531 \\(l_q\\) \u4e2atokens \\((q_1,q_2,...,q_{l_q})\\) \u6784\u6210\uff0c\u76ee\u6807\u662f\u4e3a\u4e86\u9884\u6d4b\u4e00\u4e2a\u8303\u56f4 \\(a_{start},a_{end}\\) \uff0c\u662f\u95ee\u9898\u7684\u7b54\u6848\u3002 \u4e0a\u56fe\u662f\u6a21\u578b\u7684\u6574\u4f53\u7ed3\u6784\u56fe\u3002\u8be5\u6a21\u578b\u9996\u5148\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u7136\u540e\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002\u8be5\u6a21\u578b\u5efa\u7acb\u5728\u6587\u7ae0\u548c\u95ee\u9898\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u4f4e\u7ef4\u3001\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5d4c\u5165\u7684\u57fa\u7840\u4e0a(\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u8bed\u8a00\u6ce8\u91ca)\u3002\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002\u8ba9\u6211\u4eec\u8fdb\u4e00\u6b65\u4e86\u89e3\u6bcf\u4e2a\u7ec4\u4ef6\u7684\u7ec6\u8282: QUESTION ENCODING \u00b6 \u95ee\u9898\u7f16\u7801\u76f8\u5bf9\u7b80\u5355:\u9996\u5148\u5c06\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcdqiqi\u6620\u5c04\u5230\u5176\u5d4c\u5165\u7684\u5355\u8bcd \\(\\mathbf{E}\\left(q_{i}\\right) \\in \\mathbb{R}^{d}\\) \u4e2d\uff0c\u7136\u540e\u5728\u5176\u4e0a\u5e94\u7528\u53cc\u5411LSTM\uff0c\u6700\u7ec8\u5f97\u5230 \\[ \\mathbf{q}_{1}, \\mathbf{q}_{2}, \\ldots, \\mathbf{q}_{l_{q}}=\\operatorname{BiLSTM}\\left(\\mathbf{E}\\left(q_{1}\\right), \\mathbf{E}\\left(q_{2}\\right), \\ldots, \\mathbf{E}\\left(q_{l_{q}}\\right) ; \\Theta^{(q)}\\right) \\in \\mathbb{R}^{h} \\] \u7136\u540e\u6211\u4eec\u5c06\u8fd9\u4e9b\u9690\u85cf\u7684\u5355\u4f4d\u901a\u8fc7\u4e00\u4e2a\u6ce8\u610f\u529b\u5c42\u805a\u5408\u6210\u4e00\u4e2a\u5411\u91cf \\[ \\begin{aligned} b_{j} &=\\frac{\\exp \\left(\\mathbf{w}^{q \\top} \\mathbf{q}_{j}\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\mathbf{w}^{q \\top} \\mathbf{q}_{j^{\\prime}}\\right)} \\\\ \\mathbf{q} &=\\sum_{j} b_{j} \\mathbf{q}_{j} \\end{aligned} \\] \\(b_j\\) \u5ea6\u91cf\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcd\u7684\u91cd\u8981\u6027\uff0c \\(w_q\u2208R_h\\) \u662f\u4e00\u4e2a\u9700\u8981\u5b66\u4e60\u7684\u6743\u5411\u91cf\u3002\u56e0\u6b64\uff0c \\(q\u2208R_h\\) \u662f\u95ee\u9898\u7684\u6700\u7ec8\u5411\u91cf\u8868\u793a\u3002\u5b9e\u9645\u4e0a\uff0c\u5c06 \\(q\\) \u8868\u793a\u4e3aLSTMs\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5411\u91cf\u7684\u8fde\u63a5\u66f4\u7b80\u5355(\u4e5f\u66f4\u5e38\u89c1)\u3002\u7136\u800c\uff0c\u57fa\u4e8e\u7ecf\u9a8c\u7684\u8868\u73b0\uff0c\u6211\u4eec\u53d1\u73b0\u6dfb\u52a0\u8fd9\u4e2a\u6ce8\u610f\u5c42\u6709\u52a9\u4e8e\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u5b83\u4e3a\u66f4\u76f8\u5173\u7684\u95ee\u9898\u8bcd\u589e\u52a0\u4e86\u66f4\u591a\u7684\u6743\u91cd\u3002 PASSAGE ENCODING \u00b6 \u9996\u5148\u4e3a\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u5f62\u6210\u4e00\u4e2a\u8f93\u5165\u8868\u793a \\(\\tilde{\\mathbf{p}}_{i} \\in \\mathbb{R}^{\\overline{d}}\\) \uff0c\u5e76\u4e14\u5b83\u4eec\u7a7f\u8fc7\u53e6\u4e00\u4e2a\u53cc\u5411LSTM: \\[ \\mathbf{p}_{1}, \\mathbf{p}_{2}, \\ldots, \\mathbf{p}_{l_{p}}=\\operatorname{BiLSTM}\\left(\\tilde{\\mathbf{p}}_{1}, \\tilde{\\mathbf{p}}_{2}, \\ldots, \\tilde{\\mathbf{p}}_{l_{p}} ; \\Theta^{(p)}\\right) \\in \\mathbb{R}^{h} \\] \u8f93\u5165\u8868\u793a \\(\\tilde{\\mathbf{p}}_{i}\\) \u53ef\u5206\u4e3a\u4e24\u7c7b: \u4e00\u662f\u7f16\u7801\u6bcf\u4e2a\u5355\u8bcd\u672c\u8eab\u7684\u5c5e\u6027,,\u53e6\u4e00\u4e2a\u662f\u7f16\u7801\u5176\u4e0e\u95ee\u9898\u7684\u76f8\u5173\u6027 \u3002 properties of each word itself, its relevance with respect to the question \u5355\u8bcd\u672c\u8eab\u7684\u5c5e\u6027 \u00b6 \u9664\u4e86\u8bcd\u5d4c\u5165 \\(f_{emb}(p_i)=E(p_i)\u2208\\mathbb{R}^d\\) ,\u6211\u4eec\u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e9b\u4eba\u5de5\u7279\u5f81\u53cd\u6620\u8bcdpipi\u5728\u5b83\u7684\u4e0a\u4e0b\u6587\u7684\u6027\u8d28,\u5305\u62ec\u5b83\u7684\u8bcd\u6027(POS)\u548c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b(NER)\u53ca\u5176\u9891\u7387(\u89c4\u8303\u5316)\u8bcd\u9891(TF): \\(f_{\\text {token}}\\left(p_{i}\\right)=\\left(\\operatorname{POS}\\left(p_{i}\\right), \\mathrm{NER}\\left(p_{i}\\right), \\mathrm{TF}\\left(p_{i}\\right)\\right)\\) \u3002\u5bf9\u4e8ePOS\u548cNER\u6807\u8bb0\uff0c\u6211\u4eec\u8fd0\u884c\u73b0\u6210\u7684\u5de5\u5177\u5e76\u5c06\u5176\u8f6c\u6362\u4e3aOne-hot\u8868\u793a\uff0c\u56e0\u4e3a\u6807\u8bb0\u96c6\u5f88\u5c0f\u3002TF\u7279\u5f81\u662f\u5b9e\u503c\u6570\uff0c\u5b83\u5ea6\u91cf\u5355\u8bcd\u5728\u6587\u7ae0\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u9664\u4ee5\u5355\u8bcd\u603b\u6570\u3002 \u4e0e\u95ee\u9898\u7684\u76f8\u5173\u6027 \u00b6 \u8003\u8651\u4e86\u4e24\u79cd\u8868\u793a Exact match : \\(f_{\\text {exact-match}}\\left(p_{i}\\right)=\\mathbb{I}\\left(p_{i} \\in q\\right) \\in \\mathbb{R}.\\) \u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e09\u4e2a\u7b80\u5355\u7684\u4e8c\u8fdb\u5236\u7279\u6027\uff0c\u8868\u660e \\(p_i\\) \u662f\u5426\u80fd\u591f\u7cbe\u786e\u5730\u5339\u914d\u95ee\u9898 \\(q\\) \u4e2d\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u65e0\u8bba\u662f\u539f\u59cb\u7684\u3001\u5c0f\u5199\u7684\u8fd8\u662f\u5f15\u7406\u5f62\u5f0f\u7684\u3002 Aligned question embeddings : Exact match\u7279\u6027\u7f16\u7801\u4e86\u95ee\u9898\u8bcd\u548c\u6bb5\u843d\u8bcd\u4e4b\u95f4\u7684\u786c\u5bf9\u9f50\u3002\u5bf9\u9f50\u95ee\u9898\u5d4c\u5165(Aligned question embeddings)\u7684\u76ee\u7684\u662f\u5728word embedding\u7a7a\u95f4\u4e2d\u7f16\u7801\u5355\u8bcd\u4e4b\u95f4\u8f6f\u5bf9\u9f50\u7684\u6982\u5ff5\uff0c\u8fd9\u6837\u7c7b\u4f3c(\u4f46\u4e0d\u76f8\u540c)\u7684\u5355\u8bcd\uff0c\u4f8b\u5982car\u548cvehicle\uff0c\u5c31\u53ef\u4ee5\u5f88\u597d\u5730\u5bf9\u9f50\u3002\u5177\u4f53\u5730\u8bf4,\u6211\u4eec\u4f7f\u7528 \\[ f_{a l i g n}\\left(p_{i}\\right)=\\sum_{j} a_{i, j} \\mathbf{E}\\left(q_{j}\\right) \\] \u5176\u4e2d\uff0c \\(a_{i,j}\\) \u662f\u8861\u91cf\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd \\(p_i\\) \u548c\u95ee\u9898\u4e2d\u7684\u5355\u8bcd \\(qj\\) \u503c\u95f4\u76f8\u4f3c\u5ea6\u7684\u6ce8\u610f\u529b\u6743\u91cd\u503c\uff0c \\(\\mathbf{E}\\left(q_{j}\\right) \\in \\mathbb{R}^{d}\\) \u662f\u95ee\u9898\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\u3002 \\(a_{i,j}\\) \u7531\u8bcd\u5d4c\u5165\u7684\u975e\u7ebf\u6027\u6620\u5c04\u4e4b\u95f4\u7684\u70b9\u79ef\u8ba1\u7b97\uff1a \\[ a_{i, j}=\\frac{\\exp \\left(\\operatorname{MLP}\\left(\\mathbf{E}\\left(p_{i}\\right)\\right)^{T} \\operatorname{MLP}\\left(\\mathbf{E}\\left(q_{j}\\right)\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\operatorname{MLP}\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) ^T{MLP}\\left(\\mathbf{E}\\left(q_{j^{\\prime}}\\right)\\right)\\right)} \\] \u5176\u4e2d \\(\\operatorname{MLP}(\\mathbf{x})=\\max \\left(0, \\mathbf{W}_{\\operatorname{MLP}} \\mathbf{x}+\\mathbf{b}_{\\mathrm{MLP}}\\right)\\) \u662f\u5177\u6709\u975e\u7ebf\u6027\u51fd\u6570\u7684\u5355\u5c42dense\u5c42\uff0c \\(\\mathbf{W}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d \\times d} \\text { and } \\mathbf{b}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d}.\\) and \\(\\mathbf{W}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d \\times d} \\text { and } \\mathbf{b}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d}\\) \u6700\u540e\uff0c\u6211\u4eec\u5c06\u56db\u4e2a\u7ec4\u4ef6\u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u8f93\u5165\u8868\u793a: \\[ \\tilde{\\mathbf{p}}_{i}=\\left(f_{e m b}\\left(p_{i}\\right), f_{t o k e n}\\left(p_{i}\\right), f_{e x a c t-m a t c h}\\left(p_{i}\\right), f_{a l i g n}\\left(p_{i}\\right)\\right) \\in \\mathbb{R}^{\\tilde{d}} \\] \u8fd9\u90e8\u5206\u5728\u6a21\u578b\u4e2d\u7684\u4f53\u73b0\u5982\u4e0b ANSWER PREDICTION \u00b6 \u73b0\u5728\u6211\u4eec\u6709\u4e86\u6587\u7ae0\u548c\u95ee\u9898\u7684\u5411\u91cf\u8868\u793a\u4e86\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u9884\u6d4b\u6700\u53ef\u80fd\u662f\u6b63\u786e\u7b54\u6848\u7684\u8303\u56f4\u3002\u6211\u4eec\u518d\u6b21\u8fd0\u7528\u6ce8\u610f\u529b\u673a\u5236\u7684\u601d\u60f3\uff0c\u8bad\u7ec3\u4e24\u4e2a\u72ec\u7acb\u7684\u5206\u7c7b\u5668\uff0c\u4e00\u4e2a\u662f\u9884\u6d4b\u8de8\u5ea6\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u53e6\u4e00\u4e2a\u662f\u9884\u6d4b\u8de8\u5ea6\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528\u53cc\u7ebf\u6027\u4e58\u79ef\u6765\u6355\u6349pipi\u548cqq\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027: \\[ \\begin{aligned} P^{(\\mathrm{start})}(i) &=\\frac{\\exp \\left(\\mathbf{p}_{i} \\mathbf{W}^{(\\mathrm{sart})} \\mathbf{q}\\right)}{\\sum_{i^{\\prime}} \\exp \\left(\\mathbf{p}_{i^{\\prime}} \\mathbf{W}^{(\\mathrm{start})} \\mathbf{q}\\right)} \\\\ P^{(\\mathrm{end})}(i) &=\\frac{\\exp \\left(\\mathbf{p}_{i} \\mathbf{W}^{(\\mathrm{end})} \\mathbf{q}\\right)}{\\sum_{i^{\\prime}} \\exp \\left(\\mathbf{p}_{i^{\\prime}} \\mathbf{W}^{(\\mathrm{end})} \\mathbf{q}\\right)} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{(\\text { start })}, \\mathbf{W}^{(\\text { end })} \\in \\mathbb{R}^{h \\times h}\\) \u662f\u8981\u5b66\u4e60\u7684\u989d\u5916\u53d8\u91cf\u3002\u8fd9\u548c\u6ce8\u610f\u529b\u7684\u8868\u8fbe\u5f0f\u7565\u6709\u4e0d\u540c\u56e0\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u5bf9\u6240\u6709\u5411\u91cf\u8868\u793a\u53d6\u52a0\u6743\u548c\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4f7f\u7528\u6807\u51c6\u5316\u7684\u6743\u91cd\u6765\u8fdb\u884c\u76f4\u63a5\u9884\u6d4b\u3002\u6211\u4eec\u4f7f\u7528\u53cc\u7ebf\u6027\u4e58\u79ef\u662f\u56e0\u4e3a\u6211\u4eec\u53d1\u73b0\u5b83\u4eec\u5728\u7ecf\u9a8c\u4e0a\u662f\u6709\u6548\u7684\u3002 TRAINING AND INFERENCE \u00b6 \u6700\u7ec8\u7684\u8bad\u7ec3\u76ee\u6807\u662f\u6700\u5c0f\u5316\u4ea4\u53c9\u71b5\u635f\u5931\uff1a \\[ \\mathcal{L}=-\\sum \\log P^{(\\mathrm{start})}\\left(a_{\\mathrm{start}}\\right)-\\sum \\log P^{(\\mathrm{end})}\\left(a_{\\mathrm{end}}\\right) \\] \u5176\u4e2d\uff0c\u6240\u6709\u7684\u53c2\u6570 \\(\\Theta=\\Theta^{(p)}, \\Theta^{(q)}, \\mathbf{w}^{(q)}, \\mathbf{W}_{\\mathrm{MLP}}, \\mathbf{b}_{\\mathrm{MLP}}, \\mathbf{W}^{(\\mathrm{start})}, \\mathbf{W}^{(\\mathrm{end})}\\) \u90fd\u662f\u901a\u8fc7SGD\u8fdb\u884c\u4f18\u5316\u7684\u3002 \u5728\u63a8\u7406\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u8303\u56f4 \\(p_{i}, \\dots, p_{i^{\\prime}}, i \\leq i^{\\prime} \\leq i+max\\_{len}\\) \u5e76\u4e14 \\(P^{(\\text { start })}(i) \\times P^{(\\text { end })}\\left(i^{\\prime}\\right)\\) \u53d6\u6700\u5927\u503c\u3002 \\(max\\_len\\) \u662f\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u5e38\u91cf\uff0c\u63a7\u5236\u7b54\u6848\u7684\u6700\u5927\u957f\u5ea6\u3002 3.2.3 Extensions \u00b6 \u63a5\u4e0b\u6765\u6211\u4eec\u7ed9\u51fa\u4e00\u4e9b\u53d8\u4f53\uff0c\u662f\u7528\u4e8e\u89e3\u51b3\u5176\u4ed6\u7c7b\u578b\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u6a21\u578b\u9075\u5faa\u76f8\u540c\u7684\u8fc7\u7a0b\uff0c\u6587\u7ae0\u7f16\u7801\u548c\u95ee\u9898\u7f16\u7801\u90fd\u5982\u4e0a\u6587\u6240\u8ff0\u3002\u56e0\u6b64\u6211\u4eec\u73b0\u5728\u6709\u4e86 \\(\\mathbf{p}_{1}, \\mathbf{p}_{2}, \\dots, \\mathbf{p}_{l_{p}} \\in \\mathbb{R}^{h} \\text { and } \\mathbf{q} \\in \\mathbb{R}^{h}\\) \uff0c\u6211\u4eec\u53ea\u8ba8\u8bbaAnswer prediction\u7ec4\u4ef6\u548c\u8bad\u7ec3\u76ee\u6807\u3002 CLOZE STYLE \u00b6 \u540c\u6837\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u95ee\u9898\u5bf9\u6587\u7ae0\u4e2d\u6240\u6709\u5355\u8bcd\u7684\u53cc\u7ebf\u6027\u4e58\u79ef\u6765\u8ba1\u7b97\u6ce8\u610f\u529b\u51fd\u6570\uff0c\u7136\u540e\u8ba1\u7b97\u4e00\u4e2a\u8f93\u51fa\u5411\u91cfo\uff0c\u5b83\u5bf9\u6240\u6709\u6bb5\u843d\u8868\u793a\u5f62\u5f0f\u8fdb\u884c\u52a0\u6743\u548c \\[ P(Y=e | p, q)=\\frac{\\exp \\left(\\mathbf{W}_{e}^{(a)} \\mathbf{o}\\right)}{\\sum_{e^{\\prime} \\in \\mathcal{E}} \\exp \\left(\\mathbf{W}_{e^{\\prime}}^{(a)} \\mathbf{o}\\right)} \\] \u5176\u4e2d\uff0c \\(\\mathcal{E}\\) \u8868\u793a\u5019\u9009\u7684\u5355\u8bcd\u6216\u5b9e\u4f53\u7684\u96c6\u5408\u3002\u91c7\u7528\u8d1f\u5bf9\u6570\u4f3c\u7136\u76ee\u6807\u8fdb\u884c\u8bad\u7ec3\uff0c\u5728\u9884\u6d4b\u8fc7\u7a0b\u4e2d\u9009\u62e9 \\(e \\in \\mathcal{E}\\) \u4f7f \\(\\mathbf{W}_{e}^{(a)} \\mathbf{o}\\) \u6700\u5927\u5316\uff0c\u662f\u5f88\u7b80\u5355\u7684\u3002 MULTIPLE CHOICE \u00b6 \u5728\u8fd9\u4e00\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u7ed9\u51fak\u4e2a\u5047\u5b9a\u7b54\u6848 \\(\\mathcal{A}=\\left\\{a_{1}, \\dots, a_{k}\\right\\}\\) \uff0c\u901a\u8fc7\u4f7f\u7528\u7b2c\u4e09\u4e2aBiLSTM\u5c06\u6bcf\u4e2a\u90fd\u7f16\u7801\u4e3a\u5411\u91cfai , \u7c7b\u4f3c\u4e8e\u6211\u4eec\u7684\u95ee\u9898\u7f16\u7801\u6b65\u9aa4\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8f93\u51fa\u5411\u91cfo\u5e76\u4e14\u901a\u8fc7\u53e6\u4e00\u4e2a\u53cc\u7ebf\u6027\u4e58\u79ef\u7684\u76f8\u4f3c\u6027\u51fd\u6570\uff0c\u628a\u5b83\u548c\u6bcf\u4e2a\u5047\u5b9a\u7b54\u6848\u7684\u5411\u91cf ai\u8fdb\u884c\u6bd4\u8f83 \\[ P(Y=i | p, q)=\\frac{\\exp \\left(\\mathbf{a}_{i} \\mathbf{W}^{(a)} \\mathbf{o}\\right)}{\\sum_{i^{\\prime}=1, \\ldots, k} \\exp \\left(\\mathbf{a}_{i^{\\prime}}^{\\prime} \\mathbf{W}^{(a)} \\mathbf{o}\\right)} \\] \u8bad\u7ec3\u65f6\u4f7f\u7528\u4ea4\u53c9\u71b5Loss\u51fd\u6570\u3002 FREE-FORM ANSWER \u00b6 \u8fd9\u79cd\u95ee\u9898\u7684\u7b54\u6848\u4e0d\u9650\u5b9a\u4e0e\u4e00\u4e2a\u5b9e\u4f53\u6216\u662f\u6587\u4e2d\u7684\u4e00\u4e2a\u8303\u56f4\uff0c\u53ef\u4ee5\u53d6\u4efb\u4f55\u5355\u8bcd\u5e8f\u5217\uff0c\u6700\u5e38\u89c1\u7684\u89e3\u51b3\u65b9\u6848\u662f\u5c06LSTM\u7684\u5e8f\u5217decoder\u5408\u5e76\u5230\u5f53\u524d\u6846\u67b6\u4e2d\u3002\u5177\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u5047\u5b9a\u4e00\u4e2a\u7b54\u6848\u5b57\u7b26\u4e32\u4e3a \\(a=\\left(a_{1}, a_{2}, \\dots, a_{l_{a}}\\right)\\) \u4ee5\u53ca\u4e00\u4e2a\u7279\u6b8a\u7684\u5e8f\u5217\u7ec8\u70b9token\u27e8eos\u27e9\u27e8eos\u27e9\u4f1a\u88ab\u6dfb\u52a0\u5230\u6bcf\u4e00\u4e2a\u7b54\u6848\u7684\u672b\u5c3e\u3002\u6211\u4eec\u53ef\u4ee5\u540c\u6837\u4f7f\u7528\u8f93\u51fa\u5411\u91cfo\u5e76\u4e14decoder\u4f1a\u6bcf\u6b21\u751f\u6210\u4e00\u4e2a\u5355\u8bcd\uff0c\u56e0\u6b64\u6761\u4ef6\u6982\u7387\u53ef\u4ee5\u5206\u89e3\u4e3a: \\[ P(a | p, q)=P(a | \\mathbf{o})=\\prod_{j=1}^{l_{a}} P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right) \\] $$P\\left(A_{1} A_{2} \\cdots A_{n}\\right)=P\\left(A_{1}\\right) P\\left(A_{2} | A_{1}\\right) \\cdots P\\left(A_{n} | A_{1} A_{2} \\cdots A_{n-1}\\right) $$ \u5176\u4e2d\uff0c \\(P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right)\\) \u662f\u4e00\u4e2aLSTM\u7684\u53c2\u6570\u5316\u8868\u793a\uff0c\u8be5LSTM\u4ee5\u8f93\u51fa\u5411\u91cfoo\u4e3a\u521d\u59cb\u9690\u5c42\u5411\u91cf\uff0c\u5728\u5b8c\u6574\u7684\u8bcd\u6c47\u8868 \\(\\mathcal{V} \\cup\\{\\langle\\text { eos }\\rangle\\}\\) \u4e2d\uff0c\u6839\u636e\u9690\u5c42\u5411\u91cf \\(h_j\\) \u9884\u6d4b\u51fa \\(a_j\\) \uff0c\u8bad\u7ec3\u76ee\u6807\u4e3a \\[ \\mathcal{L}=-\\log P(a | p, q)=-\\log \\sum_{j=1}^{l_{a}} P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right) \\] \u5bf9\u4e8e\u9884\u6d4b\uff0c\u6bcf\u6b21\u9884\u6d4b\u4e00\u4e2a\u5355\u8bcd\uff0c\u4f7f\u5f97 \\(P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right)\\) \u6700\u5927\uff0c\u7136\u540e\u8f93\u5165\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u77e5\u9053\u9884\u6d4b\u5230token\u27e8eos\u27e9\u27e8eos\u27e9\u3002 \u7531\u4e8e\u81ea\u7531\u5f62\u5f0f\u7684\u7b54\u9898\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u66f4\u52a0\u590d\u6742\uff0c\u4e5f\u66f4\u96be\u8bc4\u4f30\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u65b9\u6cd5\u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u95ee\u9898\u76f8\u6bd4\u8fd8\u6ca1\u6709\u5f97\u5230\u5145\u5206\u7684\u63a2\u7d22\u3002\u6700\u540e\uff0c\u6211\u4eec\u8ba4\u4e3a (Gu et al., 2016; See et al., 2017)\u63d0\u51fa\u4e86\u4e00\u79cd\u7528\u4e8e\u603b\u7ed3\u4efb\u52a1\u7684\u590d\u5236\u673a\u5236\u3002\u5b83\u5141\u8bb8\u89e3\u7801\u5668\u9009\u62e9\u4ece\u6e90\u6587\u672c\u4e2d\u590d\u5236\u4e00\u4e2a\u5355\u8bcd\uff0c\u6216\u8005\u4ece\u8bcd\u6c47\u8868\u4e2d\u751f\u6210\u4e00\u4e2a\u5355\u8bcd\uff0c\u8fd9\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u4e5f\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u7b54\u6848\u5355\u8bcd\u4ecd\u7136\u53ef\u80fd\u51fa\u73b0\u5728\u6bb5\u843d\u6216\u95ee\u9898\u4e2d\u3002\u6211\u4eec\u5c06\u5728\u7b2c6.3\u8282\u4e2d\u8ba8\u8bba\u4e00\u4e2a\u5177\u6709\u590d\u5236\u673a\u5236\u7684\u6a21\u578b\u3002 3.3 Experiments \u00b6 3.3.1 Datasets \u00b6 \u7531\u4e8e\u6570\u636e\u96c6\u7684\u6784\u9020\u65b9\u5f0f\uff0c CNN/Daily Mail \u6bd4 SQUAD \u5927\u7684\u591a\u3002\u6b64\u5916\uff0c\u524d\u8005\u7684\u6587\u7ae0\u957f\u5ea6\u4e5f\u8981\u957f\u7684\u591a\u3002\u6700\u540e\uff0c SQUAD \u7684\u7b54\u6848\u5e73\u5747\u53ea\u5305\u542b3.1\u4e2atoken\uff0c\u8fd9\u53cd\u6620\u51fa\u5176\u95ee\u9898\u5927\u90e8\u5206\u662f\u4e8b\u5b9e\uff0c\u5927\u90e8\u5206\u7684\u7b54\u6848\u662f\u5e38\u89c1\u7684\u540d\u8bcd\u6216\u547d\u540d\u5b9e\u4f53\u3002 3.3.2 Implementation Details \u00b6 STACKED BILSTMS \u00b6 \u589e\u5927\u95ee\u9898\u548c\u6587\u7ae0\u7f16\u7801\u7684\u53cc\u5411LSTM\u7684\u6df1\u5ea6\uff0c\u5c06\u4f1a\u8ba1\u7b97 \\(\\mathbf{h}_{t}=\\left[\\overrightarrow{\\mathbf{h}}_{t} ; \\overleftarrow{\\mathbf{h}}_{t}\\right] \\in \\mathbb{R}^{2 h}\\) \u5e76\u4e14\u628a \\(h_t\\) \u4f5c\u4e3a\u4e0b\u4e00\u5c42\u7684\u8f93\u5165 \\(X_t\\) \uff0c\u4f20\u9012\u5230\u53e6\u4e00\u5c42BiLSTM\u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0cStack\u6bd4\u5355\u5c42\u6548\u679c\u597d\uff0c\u5b9e\u9a8c\u91c7\u7528\u4e86\u4e09\u5c42\u3002 DROPOUT \u00b6 \u5728\u795e\u7ecf\u7f51\u7edc\u6b63\u5219\u5316\u4e2d\uff0cDropout\u662f\u4e00\u79cd\u6709\u6548\u4e14\u5e94\u7528\u5e7f\u6cdb\u7684\u65b9\u6cd5\u3002\u7b80\u5355\u5730\u8bf4\uff0cdropout\u662f\u6307\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u968f\u673a\u5c4f\u853d\u6389\u4e00\u4e9b\u5355\u5143\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u6a21\u578b\uff0c\u53ef\u4ee5\u5c06dropout\u6dfb\u52a0\u5230\u6bcf\u4e2aLSTM\u5c42\u7684\u5d4c\u5165\u3001\u8f93\u5165\u5411\u91cf\u548c\u9690\u85cf\u5411\u91cf\u4e2d\u3002\u6700\u540e\uff0c variational dropout \u662f\u5df2\u7ecf\u8bc1\u660e\u5728RNNs\u89c4\u8303\u5316\u4e2d\u6bd4\u6807\u51c6\u7684Dropout\u6548\u679c\u66f4\u597d\u7684\u65b9\u6cd5\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u5e94\u7528\u76f8\u540c\u7684dropout mask\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u5165\uff0c\u8f93\u51fa\u548c\u5faa\u73af\u5c42\uff0c\u5373\u5728\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e2d\u4f1a\u4e22\u5f03\u76f8\u540c\u7684\u5355\u4f4d\u3002\u6211\u4eec\u5efa\u8bae\u8bfb\u8005\u5728\u5b9e\u8df5\u4e2d\u4f7f\u7528\u8fd9\u79cd\u53d8\u4f53\u3002 HANDLING WORD EMBEDDINGS \u00b6 \u5904\u7406\u5355\u8bcd\u5d4c\u5165\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5(\u4e5f\u662f\u6211\u4eec\u7684\u9ed8\u8ba4\u9009\u62e9)\u662f\u5c06\u6700\u9891\u7e41\u7684 \\(K(\\mathrm{e.} \\mathrm{g.}, K=500,000)\\) \u5355\u8bcd\u7c7b\u578b\u4fdd\u5b58\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0c\u5e76\u5c06\u6240\u6709\u5176\u4ed6\u5355\u8bcd\u6620\u5c04\u5230 \\(\u27e8unk\u27e9\\) \u4e2d\uff0c\u7136\u540e\u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\u8fd9KK\u4e2a\u5355\u8bcd\u3002\u901a\u5e38\uff0c\u5f53\u8bad\u7ec3\u96c6\u8db3\u591f\u5927\u65f6\uff0c\u6211\u4eec\u5bf9\u6240\u6709\u5355\u8bcdembeddings\u8fdb\u884c\u5fae\u8c03\uff1b\u5f53\u8bad\u7ec3\u96c6\u76f8\u5bf9\u8f83\u5c0f\u65f6(\u4f8b\u5982\uff0cSQUAD)\uff0c\u6211\u4eec\u901a\u5e38\u5c06\u6240\u6709\u5355\u8bcdembeddings\u56fa\u5b9a\u4e3a\u9759\u6001\u7279\u6027\u3002\u5728 Chen et al. (2017)\u7684\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5bf9\u6700\u5e38\u89c1\u7684\u7591\u95ee\u8bcd\u8fdb\u884c\u5fae\u8c03\u662f\u6709\u5e2e\u52a9\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5173\u952e\u8bcd\u7684\u8868\u5f81\uff0c\u5982what, how, which\u53ef\u80fd\u5bf9\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u81f3\u5173\u91cd\u8981\u3002\u7814\u7a76\u8868\u660e\uff0c\u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u597d\u7684\u5d4c\u5165\u4ee5\u53ca\u5904\u7406\u8bcd\u6c47\u5916\u5355\u8bcd\u7684\u65b9\u6cd5\u5bf9\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u8868\u73b0\u6709\u5f88\u5927\u7684\u5f71\u54cd\u3002 MODEL SPECIFICATIONS \u00b6 \u5bf9\u4e8e\u6240\u6709\u9700\u8981\u8bed\u8a00\u6ce8\u91ca\u7684\u5b9e\u9a8c(\u5f15\u7406\u3001\u8bcd\u6027\u6807\u8bb0\u3001\u547d\u540d\u5b9e\u4f53\u6807\u8bb0\u3001\u4f9d\u8d56\u89e3\u6790)\uff0c\u6211\u4eec\u4f7f\u7528Stanford CoreNLP toolkit (Manning et al., 2014)\u8fdb\u884c\u9884\u5904\u7406\u3002\u4e3a\u4e86\u8bad\u7ec3\u6240\u6709\u7684\u795e\u7ecf\u6a21\u578b\uff0c\u6211\u4eec\u6309\u7167\u6587\u7ae0\u957f\u5ea6\u5bf9\u6240\u6709\u7684\u793a\u4f8b\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u66f4\u65b0\u968f\u673a\u62bd\u53d6\u5927\u5c0f\u4e3a32\u7684\u5c0f\u6279\u6837\u672c\u3002 CNN/DAILY MAIL \u4e2d\u4f7f\u7528\u5c0f\u5199\u7684100\u7ef4\u9884\u8bad\u7ec3\u7684GLOVE\u8bcd\u5411\u91cf\uff0c\u5728Wikipedia\u548cGigaword\u4e0a\u521d\u59cb\u5316\u3002 attention\u548couput\u7684\u53c2\u6570\u521d\u59cb\u5316\u4e3a[-0.01, 0.01]\u5747\u5300\u5206\u5e03\u3002\u5355\u5c42BiLSTM\u6743\u91cd\u521d\u59cb\u5316\u4f7f\u7528\u9ad8\u65af\u5206\u5e03 \\(\\mathcal{N}(0,0.1)\\) \u3002\u4f7f\u7528\u4e86\u5355\u5c42\u7684BiLSTM\uff0c\u9690\u85cf\u5c42\u5927\u5c0f\u4e3aCNN(128)\u3001Dailymail(256)\u3002\u4f18\u5316\u51fd\u6570\u91c7\u7528SGD\u548c\u56fa\u5b9a\u7684\u5b66\u4e60\u73870.1\uff0c\u5e76\u5728Embedding\u5c42\u4f7f\u7528dropout 0.2\uff0c\u5f53\u68af\u5ea6\u7684\u8303\u6570\u8d85\u8fc710\u65f6\uff0c\u5bf9\u5d4c\u5165\u5c42\u8fdb\u884c\u68af\u5ea6\u88c1\u526a\u3002 SQuAD\u4e2d\u4f7f\u75283\u5c42BiLSTM(h=128)\uff0c\u4f7f\u7528\u4e86\u4f18\u5316\u51fd\u6570Adamax\uff0c\u5728\u8bcd\u5d4c\u5165\u548c\u6240\u6709LSTM\u9690\u5c42\u4e2ddropout 0.3\u3002\u4f7f\u7528300\u7ef4\u7684GLOVE\u8bcd\u5411\u91cf\uff08fine-tune 1000\u4e2a\u9891\u7387\u6700\u9ad8\u7684\u95ee\u9898\u4e2d\u51fa\u73b0\u7684\u8bcd\uff09 16\u548c17\u5e74\u7684\u4e24\u7bc7\u8bba\u6587\u4e2d\u7684\u5b9e\u9a8c\u7ed3\u679c\u6709\u6240\u4e0d\u540c\u3002\u5173\u952e\u7684\u4e0d\u540c\u5728\u4e8eCNN/DAILY MAIL\u4e2d\u76f4\u63a5\u4f7f\u7528\u4e86\u8bcd\u5d4c\u5165\uff0c\u6ca1\u6709\u989d\u5916\u7684\u4e24\u79cd\u7279\u6027\uff1b\u6ca1\u6709\u5728\u95ee\u9898\u7684\u7f16\u7801\u5c42\u4e2d\u4f7f\u7528attention\u5c42\uff0c\u53ea\u662f\u628a\u53cc\u5411LSTM\u7684\u6700\u540e\u4e00\u4e2a\u9690\u5c42\u5411\u91cf\u8fde\u63a5\u8d77\u6765\u3002 3.3.3 Experimental Results \u00b6 3.3.3.3 ABLATION STUDIES \u00b6 \u572817\u5e74\u7684\u8bba\u6587\u4e2d\u5bf9\u6587\u7ae0\u7684\u8868\u5f81\u8fdb\u884c\u4e86\u6a21\u578b\u7b80\u5316\u6d4b\u8bd5\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6ca1\u6709\u5bf9\u9f50\u7684\u95ee\u9898\u5d4c\u5165(\u53ea\u6709word\u5d4c\u5165\u548c\u4e00\u4e9b\u624b\u52a8\u7279\u6027)\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4ecd\u7136\u80fd\u591f\u5b9e\u73b0F1\u8d85\u8fc777%\u3002\u7cbe\u786e\u5339\u914d\u7279\u5f81\u7684\u6709\u6548\u6027\u4e5f\u8868\u660e\uff0c\u5728\u8be5\u6570\u636e\u96c6\u4e0a\uff0c\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u5b58\u5728\u5927\u91cf\u7684\u5355\u8bcd\u91cd\u53e0\u3002\u66f4\u6709\u8da3\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u540c\u65f6\u5220\u9664 \\(f_{aligned }\\) \u548c \\(f_{exact match}\\) \uff0c\u6027\u80fd\u4f1a\u663e\u8457\u4e0b\u964d\uff0c\u56e0\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u8fd9\u4e24\u4e2a\u7279\u6027\u5728\u7279\u5f81\u8868\u793a\u65b9\u9762\u53d1\u6325\u7740\u76f8\u4f3c\u4f46\u4e92\u8865\u7684\u4f5c\u7528\uff0c\u5c31\u50cf\u95ee\u9898\u548c\u6587\u7ae0\u5355\u8bcd\u4e4b\u95f4\u7684\u786c\u5bf9\u9f50\u548c\u8f6f\u5bf9\u9f50\u4e00\u6837 3.3.4 Analysis: What Have the Models Learned? \u00b6 \u6211\u4eec\u8bd5\u56fe\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u6a21\u578b\u5b9e\u9645\u4e0a\u5b66\u5230\u4e86\u4ec0\u4e48\uff0c\u4ee5\u53ca\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u591a\u5927\u7684\u8bed\u8a00\u7406\u89e3\u6df1\u5ea6\u3002\u6211\u4eec\u901a\u8fc7\u5bf9CNN\u6570\u636e\u96c6\u5f00\u53d1\u96c6\u4e2d\u7684100\u4e2a\u968f\u673a\u62bd\u6837\u793a\u4f8b\u8fdb\u884c\u4ed4\u7ec6\u7684\u624b\u5de5\u5206\u6790\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002 \u6211\u4eec\u5927\u81f4\u5c06\u5176\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b(\u5982\u679c\u4e00\u4e2a\u4f8b\u5b50\u6ee1\u8db3\u4e00\u4e2a\u4ee5\u4e0a\u7684\u7c7b\u522b\uff0c\u6211\u4eec\u5c06\u5176\u5206\u4e3a\u6700\u65e9\u7684\u7c7b\u522b): Exact match : \u95ee\u9898\u4e2d\u7684\u5360\u4f4d\u7b26\u5468\u56f4\u7684\u6700\u8fd1\u7684\u5355\u8bcd\u4e5f\u53ef\u4ee5\u5728\u56f4\u7ed5\u5b9e\u4f53\u6807\u8bb0\u7684\u6bb5\u843d\u4e2d\u627e\u5230\u3002\u7b54\u6848\u4e0d\u8a00\u81ea\u660e\u3002 Sentence-level paraphrasing : \u95ee\u9898\u7684\u6587\u672c\u5c31\u6765\u81ea\u4e0e\u6587\u7ae0\u4e2d\u7684\u4e00\u53e5\u8bdd\uff08\u6539\u5199\u6765\uff09\uff0c\u6240\u4ee5\u7b54\u6848\u80af\u5b9a\u53ef\u4ee5\u4ece\u90a3\u4e2a\u53e5\u5b50\u786e\u5b9a\u3002 Partial clue : \u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u6211\u4eec\u4e0d\u80fd\u5728\u95ee\u9898\u6587\u672c\u548c\u4e00\u4e9b\u53e5\u5b50\u4e4b\u95f4\u627e\u5230\u4e00\u4e2a\u5b8c\u5168\u7684\u8bed\u4e49\u5339\u914d\uff0c\u6211\u4eec\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u90e8\u5206\u7ebf\u7d22\u6765\u63a8\u65ad\u7b54\u6848\uff0c\u6bd4\u5982\u4e00\u4e9b\u5355\u8bcd/\u6982\u5ff5\u91cd\u53e0\u3002 Multiple sentences : \u591a\u53e5\u8bdd\u5fc5\u987b\u7ecf\u8fc7\u5904\u7406\u624d\u80fd\u63a8\u65ad\u51fa\u6b63\u786e\u7684\u7b54\u6848\u3002 Coreference errors : \u5728\u6570\u636e\u96c6\u4e2d\u4e0d\u53ef\u907f\u514d\u5730\u5b58\u5728\u7740\u5927\u91cf\u7684\u6307\u4ee3\u9519\u8bef\u3002\u8fd9\u4e00\u7c7b\u522b\u5305\u62ec\u5bf9\u51fa\u73b0\u5728\u95ee\u9898\u4e2d\u7684\u7b54\u6848\u5b9e\u4f53\u6216\u5173\u952e\u5b9e\u4f53\u5177\u6709\u5173\u952e\u6307\u4ee3\u9519\u8bef\u7684\u793a\u4f8b\u3002\u57fa\u672c\u4e0a\u6211\u4eec\u628a\u8fd9\u4e2a\u7c7b\u522b\u5f53\u4f5c\u201c\u4e0d\u53ef\u56de\u7b54\u7684\u201d\u3002 Ambiguous or hard : \u8fd9\u4e00\u7c7b\u5305\u62ec\u6211\u4eec\u8ba4\u4e3a\u4eba\u7c7b\u65e0\u6cd5(\u81ea\u4fe1\u5730)\u83b7\u5f97\u6b63\u786e\u7b54\u6848\u7684\u4f8b\u5b50\u3002 \u52a0\u4e0a\u6700\u7b80\u5355\u7684\u7cbe\u786e\u5339\u914d\u7c7b\u522b\uff0c\u6211\u4eec\u5047\u8bbe\u5927\u90e8\u5206\u793a\u4f8b(\u8fd9\u4e2a\u5b50\u96c6\u4e2d73%)\u80fd\u591f\u901a\u8fc7\u8bc6\u522b\u6700\u76f8\u5173\u7684(\u5355\u4e2a)\u53e5\u5b50\u5e76\u6839\u636e\u5b83\u63a8\u65ad\u51fa\u7b54\u6848\u3002\u6b64\u5916\uff0c\u53ea\u6709\u4e24\u4e2a\u4f8b\u5b50\u9700\u8981\u591a\u4e2a\u53e5\u5b50\u8fdb\u884c\u63a8\u7406\u3002\u8fd9\u6bd4\u6211\u4eec\u9884\u671f\u7684\u8981\u4f4e\uff0c\u8fd9\u8868\u660e\u6570\u636e\u96c6\u9700\u8981\u7684\u63a8\u7406\u6bd4\u4e4b\u524d\u8ba4\u4e3a\u7684\u8981\u5c11\u3002\u4ee4\u6211\u4eec\u60ca\u8bb6\u7684\u662f\uff0c\u6839\u636e\u6211\u4eec\u7684\u624b\u5de5\u5206\u6790\uff0c\u201c\u5171\u53c2\u9519\u8bef\u201d\u548c\u201c\u6a21\u7cca/\u56f0\u96be\u201d\u7684\u60c5\u51b5\u5360\u8fd9\u4e2a\u6837\u672c\u96c6\u768425%\uff0c\u8fd9\u5bf9\u4e8e\u51c6\u786e\u7387\u8fdc\u8fdc\u9ad8\u4e8e75%\u7684\u8bad\u7ec3\u6a21\u578b\u6765\u8bf4\u80af\u5b9a\u662f\u4e00\u4e2a\u969c\u788d(\u5f53\u7136\uff0c\u6a21\u578b\u6709\u65f6\u53ef\u80fd\u4f1a\u505a\u51fa\u5e78\u8fd0\u7684\u731c\u6d4b)\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u7684\u96c6\u6210\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5728\u5f00\u53d1\u96c6\u4e0a\u5df2\u7ecf\u80fd\u591f\u8fbe\u523076.5%\uff0c\u6211\u4eec\u8ba4\u4e3a\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u8fdb\u4e00\u6b65\u6539\u8fdb\u7684\u524d\u666f\u662f\u5f88\u5c0f\u7684\u3002 \u5728\u4e0a\u8ff0\u5206\u7c7b\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u7814\u7a76\u795e\u7ecf\u7f51\u7edc\u548c\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u7684\u5206\u7c7b\u6027\u80fd\u3002\u5982\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5f97\u5230\u4ee5\u4e0b\u89c2\u5bdf\u7ed3\u679c:(i)\u7cbe\u786e\u5339\u914d\u7684\u60c5\u51b5\u975e\u5e38\u7b80\u5355\uff0c\u4e24\u4e2a\u7cfb\u7edf\u7684tems\u90fd\u5f97\u5230100%\u7684\u6b63\u786e\u3002(ii)\u5bf9\u4e8e ambiguous/hard \u4ee5\u53ca entity-linking-error\u7684\u60c5\u51b5\uff0c\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u8fd9\u4e24\u4e2a\u7cfb\u7edf\u7684\u6027\u80fd\u90fd\u5f88\u5dee\u3002(\u4e09)\u4e24\u79cd\u7cfb\u7edf\u4e3b\u8981\u4e0d\u540c\u4e4b\u5904\u5728\u4e8eparaphrasing\u7684\u60c5\u51b5\uff0c\u4ee5\u53ca\u90e8\u5206partial clue\u7684\u60c5\u51b5\u3002\u8fd9\u6e05\u695a\u5730\u663e\u793a\u4e86\u795e\u7ecf\u7cfb\u7edf\u7f51\u7edc\u80fd\u591f\u66f4\u597d\u5730\u5b66\u4e60\u8bed\u4e49\u5339\u914d\uff0c\u5305\u62ec \u91ca\u4e49\u6216\u4e24\u4e2a\u53e5\u5b50\u4e4b\u95f4\u7684\u8bcd\u6c47\u53d8\u5316 \u3002(4)\u6211\u4eec\u8ba4\u4e3a\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5728\u6240\u6709\u7684\u5355\u53e5\u548c\u660e\u786e\u7684\u60c5\u51b5\u4e0b single-sentence and unambiguous \u90fd\u5df2\u7ecf\u8fbe\u5230\u4e86\u8fd1\u4e4e\u6700\u4f18\u7684\u6027\u80fd\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u53d1\u73b0\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u6a21\u578b\u76f8\u6bd4\uff0c\u795e\u7ecf\u7f51\u7edc\u5728\u8bc6\u522b\u8bcd\u6c47\u5339\u914d\u548c\u91ca\u4e49\u65b9\u9762\u65e0\u7591\u66f4\u5f3a\u5927\uff1b\u867d\u7136\u76ee\u524d\u8fd8\u4e0d\u6e05\u695a\u4ed6\u4eec\u662f\u5426\u4e5f\u8d62\u5f97\u4e86\u9700\u8981\u66f4\u590d\u6742\u7684\u6587\u672c\u63a8\u7406\u7684\u4f8b\u5b50\uff0c\u56e0\u4e3a\u76ee\u524d\u7684\u6570\u636e\u96c6\u5728\u8fd9\u65b9\u9762\u4ecd\u7136\u975e\u5e38\u6709\u9650\u3002 3.4 Further Advances \u00b6 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6700\u65b0\u8fdb\u5c55\u3002\u6211\u4eec\u5c06\u5b83\u4eec\u5206\u4e3a\u4ee5\u4e0b\u56db\u7c7b: word representations attention mechanisms alternatives to LSTMs others (such as training objectives, data augmentation) \u6700\u540e\u5bf9\u5176\u91cd\u8981\u6027\u8fdb\u884c\u4e86\u603b\u7ed3\u548c\u8ba8\u8bba\u3002 3.4.1 Word Representations \u00b6 \u9996\u5148\u662f\u5bf9question\u548cpassage words \u7684\u66f4\u597d\u7684\u5355\u8bcd\u8868\u793a\uff0c\u56e0\u6b64\u795e\u7ecf\u6a21\u578b\u662f\u5efa\u7acb\u5728\u66f4\u597d\u7684\u57fa\u7840\u4e0a\u7684\u3002\u4ece\u6587\u672c\u6216\u662f\u627e\u5230\u6700\u597d\u7684\u5b57\u5d4c\u5165\u96c6\u5408\u4e3a\u7279\u5b9a\u7684\u4efb\u52a1\u5b66\u4e60\u66f4\u597d\u7684 distributed \u8bcd\u8868\u793a\u4ecd\u7136\u662f\u4e00\u4e2a\u6d3b\u8dc3\u7684\u7814\u7a76\u8bfe\u9898\u2014\u2014\u4f8b\u5982\uff0c Mikolov et al. (2017)\u53d1\u73b0\uff0c\u7528 FASTTEXT \u53d6\u4ee3GLOVE\u7684\u9884\u8bad\u7ec3\u5411\u91cf\u4e3a\u6211\u4eec\u7684\u6a21\u578b\u5728SQUAD\u4e2d\u5e26\u6765\u4e861%\u7684\u63d0\u5347\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6709\u4e24\u4e2a\u5173\u952e\u7684\u60f3\u6cd5\u5df2\u7ecf\u88ab\u8bc1\u660e(\u975e\u5e38)\u6709\u7528\uff1a CHARACTER EMBEDDINGS \u00b6 \u7528\u5b57\u7b26\u7ea7\u522b\u7684\u5d4c\u5165\u65b9\u5f0f\u6765\u8868\u5f81\u5355\u8bcd\uff0c\u53ef\u4ee5\u8ba9\u6a21\u578b\u5728\u5f88\u5c11\u89c1\u7684\u5355\u8bcd\u4ee5\u53ca\u8bcd\u5e93\u4ee5\u5916\u7684\u5355\u8bcd\u4e0a\u6709\u63d0\u5347\u3002\u73b0\u5728\u5e38\u7528\u7684\u662f\u5c06\u6bcf\u4e2a\u5355\u8bcd\u7528\u4e00\u4e32\u5b57\u7b26\u5411\u91cf\u8868\u793a\uff0c\u7136\u540e\u7528\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u5bf9\u5b57\u7b26\u5411\u91cf\u505a\u5377\u79ef\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528n-gram\u5b57\u7b26\u7684 surface patterns\u3002\u5177\u4f53\u6765\u8bf4\uff0c \\(C\\) \u662f\u5b57\u7b26\u7684\u8bcd\u6c47\u8868\uff0c\u6bcf\u4e2a\u5355\u8bcd\u7c7b\u578b \\(x\\) \u90fd\u53ef\u4ee5\u8868\u793a\u4e3a\u5b57\u7b26\u5e8f\u5217 \\(\\left(c_{1}, \\ldots, c_{|x|}\\right), \\forall c_{i} \\in \\mathcal{C}.\\) \u6211\u4eec\u9996\u5148\u5c06 \\(C\\) \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5b57\u7b26\u90fd\u6620\u5c04\u4e3a\u4e00\u4e2a \\(d_c\\) \u7ef4\u5ea6\u7684\u5411\u91cf\uff0c\u6240\u4ee5\u5355\u8bcdxx\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a \\(\\mathbf{c}_{1}, \\dots, \\mathbf{c}_{|x|}\\) \u3002 \u63a5\u4e0b\u6765\u6211\u6211\u4eec\u4f7f\u7528\u5e26\u6709\u4e00\u4e2a \\(\\mathbf{w} \\in \\mathbb{R}^{d_{c} \\times w}\\) \u7684\u5bbd\u5ea6\u4e3aww\u7684\u5377\u79ef\u6838\u7684\u5377\u79ef\u5c42\uff0c \\(\\mathbf{c}_{i : i+j}\\) \u8868\u793a \\(\\mathbf{c}_{i}, \\mathbf{c}_{i+1}, \\ldots, \\mathbf{c}_{i+j}\\) \u3002\u56e0\u6b64\uff0c \\(for \\ i=1, \\ldots,|x|-w+1\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5377\u79ef\u6838\u5e76\u6dfb\u52a0\u504f\u5dee\u548c\u975e\u7ebf\u6027\u51fd\u6570 \\(tanh\\) : \\[ f_{i}=\\tanh \\left(\\mathbf{w}^{\\top} \\mathbf{c}_{i : i+w-1}+b\\right) \\] \u6700\u540e\u6211\u4eec\u518d\u5bf9\u83b7\u5f97 \\(f_{1}, \\ldots, f_{|x|-w+1}\\) \u7684\u4f7f\u7528 max-pooling \uff0c\u83b7\u5f97\u4e00\u4e2a\u6807\u91cf\u7279\u5f81\uff1a \\[ f=\\max _{i}\\left\\{f_{i}\\right\\} \\] \u83b7\u5f97\u7279\u5f81\u672c\u8d28\u4e0a\u662f\u9009\u62e9\u4e00\u4e2a\u5b57\u7b26\u7684n-gram\uff0c\u5176\u4e2dn-gram\u5927\u5c0f\u4e0e\u8fc7\u6ee4\u5668\u7684\u5bbd\u5ea6w\u76f8\u5173\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5377\u79ef\u6838 \\(\\mathbf{w}_{1}, \\dots, \\mathbf{w}_{d^{*}}\\) \u91cd\u590d\u5982\u4e0a\u7684\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6bcf\u4e2a\u5355\u8bcd\u7c7b\u578b \\(\\mathbf{E}_{c}(x) \\in \\mathbb{R}^{d^{*}}\\) \u7684\u57fa\u4e8e\u5b57\u7b26\u7684\u5355\u8bcd\u8868\u793a\u3002\u6240\u6709\u7684\u5b57\u7b26\u5d4c\u5165\uff0c\u8fc7\u6ee4\u5668\u6743\u91cd \\(w\\) \u548c\u504f\u5dee \\(b\\) \u90fd\u662f\u5728\u8bad\u7ec3\u4e2d\u5b66\u4e60\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u5b57\u7b26\u5d4c\u5165\u7684\u7ef4\u6570 \\(d_c\\) \u901a\u5e38\u53d6\u4e00\u4e2a\u5c0f\u503c(\u4f8b\u598220)\uff0c\u5bbd\u5ea6w\u901a\u5e38\u53d63 - 5\uff0c\u800c100\u662f \\(d^\u2217\\) \u7684\u4e00\u4e2a\u5178\u578b\u503c\u3002 CONTEXTUALIZED WORD EMBEDDINGS \u00b6 \u4e0e\u4f20\u7edf\u7684\u8bcd\u5d4c\u5165\u65b9\u5f0f\u4e0d\u540c\uff0c\u4f20\u7edf\u65b9\u6cd5\u4e2d\u4e00\u4e2a\u5355\u8bcd\u5bf9\u5e94\u4e00\u4e2a\u8bcd\u5411\u91cf\uff0c\u4f46\u662f\u60c5\u666f\u5316\u8bcd\u5d4c\u5165\u5c06\u6bcf\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6574\u4e2a\u8f93\u5165\u8bed\u53e5\u7684\u51fd\u6570\u5206\u914d\u4e00\u4e2a\u5411\u91cf\uff0c\u8fd9\u6837\u8bcd\u5411\u91cf\u80fd\u591f\u53cd\u6620\u66f4\u4e3a\u590d\u6742\u7684\u7279\u5f81(\u4f8b\u5982\u8bed\u6cd5\u548c\u8bed\u4e49)\uff0c\u5e76\u4e14\u5355\u8bcd\u7684\u5411\u91cf\u8fd8\u80fd\u6839\u636e\u4e0a\u4e0b\u6587\u610f\u601d\u8fdb\u884c\u6539\u53d8(\u4f8b\u5982\u4e00\u8bcd\u591a\u4e49) \u4ee5 ELMO \u4e3a\u4f8b\uff0c\u4ed6\u4eec\u7684\u60c5\u666f\u5316\u8bcd\u5d4c\u5165\u662f\u5728\u4e00\u4e2a\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u4e0a\u9884\u5148\u8bad\u7ec3\u7684\u6df1\u5c42\u53cc\u5411\u8bed\u8a00\u6a21\u578b\u7684\u5185\u90e8\u72b6\u6001\u7684\u5b66\u4e60\u51fd\u6570\u3002\u57fa\u672c\u4e0a\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \\(\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)\\) \uff0c\u5b83\u4eec\u8fd0\u884cLL\u5c42\u6b63\u5411LSTM\uff0c\u5e8f\u5217\u6982\u7387\u6a21\u578b\u4e3a: \\[ P\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)=\\prod_{k=1}^{n} P\\left(x_{k} | x_{1}, \\ldots, x_{k-1}\\right) \\] \u53ea\u6709\u6700\u9876\u5c42\u7684LSTM\u7684 \\(\\overrightarrow{\\mathrm{h}}_{k}^{(L)}\\) \u88ab\u7528\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2atoken \\(x_{k+1}\\) \u3002\u7c7b\u4f3c\u7684\u53e6\u4e00\u4e2a \\(L\\) \u5c42LSTM\u53cd\u5411\u8fd0\u884c\u83b7\u5f97 \\(\\overleftarrow{\\mathbf{h}}_{k}^{(L)}\\) \u6765\u9884\u6d4btoken \\(x_{k-1}\\) \u3002\u603b\u4f53\u7684\u8bad\u7ec3\u76ee\u6807\u662f\u6700\u5927\u5316\u4e24\u4e2a\u65b9\u5411\u7684\u4f3c\u7136\u4f30\u8ba1\uff1a \\[ \\sum_{k=1}^{n}\\left(\\log P\\left(x_{k} | x_{1}, \\ldots, x_{k-1} ; \\Theta_{x}, \\overrightarrow{\\Theta}_{\\mathrm{LSTM}}, \\Theta_{s}\\right)+\\log P\\left(x_{k} | x_{k+1}, \\ldots, x_{n} ; \\Theta_{x}, \\overleftarrow{\\Theta}_{\\mathrm{LSTM}}, \\Theta_{s}\\right)\\right) \\] \u5176\u4e2d\uff0c \\(\\Theta_{x} ,\\Theta_{s}\\) \u662f\u4e24\u4e2aLSTM\u90fd\u5171\u4eab\u7684\u8bcd\u5d4c\u5165\u548csoftmax\u53c2\u6570\u3002\u6700\u7ec8\u7684\u60c5\u666f\u8bcd\u5d4c\u5165\u662f\u901a\u8fc7\u6240\u6709\u53cc\u5411LSTM\u5c42\u548c\u8f93\u5165\u8bcd\u5d4c\u5165\u7684\u7ebf\u6027\u7ec4\u5408\uff0c\u4e58\u4ee5\u4e00\u4e2a\u7ebf\u6027\u6807\u91cf: \\[ \\operatorname{ELMO}\\left(x_{k}\\right)=\\gamma\\left(s_{0} \\mathbf{x}_{k}+\\sum_{j=1}^{L} \\overrightarrow{s}_{j} \\overrightarrow{\\mathbf{h}}_{k}^{(j)}+\\sum_{j=1}^{L} \\overleftarrow{s}_{j} \\overleftarrow{\\mathbf{h}}_{k}^{(j)}\\right) \\] \u6240\u6709\u7684\u6743\u91cd \\(\\gamma, s_{0}, \\overrightarrow{s}_{j},\\overleftarrow{s}_{j}\\) \u90fd\u662f\u9488\u5bf9\u7279\u5b9a\u4efb\u52a1\u5728\u8bad\u7ec3\u4e2d\u5b66\u4e60\u7684\u3002 \u8fd9\u4e9b\u60c5\u666f\u5316\u7684\u5355\u8bcd\u5d4c\u5165\u901a\u5e38\u4e0e\u4f20\u7edf\u7684\u5355\u8bcd\u7c7b\u578b\u5d4c\u5165\u548c\u5b57\u7b26\u5d4c\u5165\u4e00\u8d77\u4f7f\u7528\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8fd9\u79cd\u5728\u975e\u5e38\u5927\u7684\u6587\u672c\u8bed\u6599\u5e93\u4e0a\u9884\u5148\u8bad\u7ec3\u8fc7\u7684\u8bcd\u5d4c\u5165\u662f\u975e\u5e38\u6709\u6548\u7684\u3002 \u6700\u8fd1\uff0cRadford et al. (2018) and Devlin et al. (2018)\u53d1\u73b0\u8fd9\u4e9bcontextualized word embeddings\u4e0d\u4ec5\u53ef\u4ee5\u4f5c\u4e3a\u4efb\u52a1\u7279\u5b9a\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784(\u5728\u672c\u6587\u4e2d\u662f\u4e00\u4e2a\u9605\u8bfb\u7406\u89e3\u6a21\u578b)\u4e2d\u5355\u8bcd\u8868\u793a\u7684\u7279\u5f81\uff0c\u800c\u4e14\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5fae\u8c03\u6df1\u5c42\u8bed\u8a00\u6a21\u578b\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u6700\u5c0f\u7684\u4fee\u6539\u5c31\u53ef\u4ee5\u6267\u884c\u540e\u7eed\u4efb\u52a1\u3002\u6b64\u5916, Devlin et al. (2018)\u63d0\u51fa\u4e86\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u5f0f\u6765\u8bad\u7ec3\u53cc\u5411\u8bed\u8a00\u6a21\u578b: \u800c\u4e0d\u662f\u603b\u5728\u4e00\u4e2a\u65b9\u5411\u4e0a\u53e0\u52a0LSTMs\u548c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u867d\u7136ELMo\u91c7\u7528biLSTM\uff0c\u4f46\u5b83\u672c\u8d28\u4e0a\u662f\u4f7f\u7528\u4e24\u4e2a\u5355\u5411lstm\u5728\u4e24\u4e2a\u65b9\u5411\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd ,\u5b83\u4eec\u5728\u8f93\u5165\u5c42\u968f\u673a\u5c4f\u853d\u4e00\u4e9b\u5355\u8bcd\uff0c\u5728\u53cc\u5411\u5c42\u53e0\u52a0\uff0c\u5e76\u5728\u9876\u5c42\u9884\u6d4b\u8fd9\u4e9b\u5c4f\u853d\u5355\u8bcd\u3002\u4ed6\u4eec\u53d1\u73b0\u8fd9\u79cd\u8bad\u7ec3\u7b56\u7565\u5728\u7ecf\u9a8c\u4e0a\u975e\u5e38\u6709\u7528\u3002 3.4.2 Attention Mechanisms \u00b6 \u9488\u5bf9\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff0c\u5df2\u7ecf\u63d0\u51fa\u4e86\u8bb8\u591aAttention\u673a\u5236\uff0c\u5b83\u4eec\u7684\u76ee\u7684\u662f\u5728\u4e0d\u540c\u5c42\u6b21\u3001\u4e0d\u540c\u7c92\u5ea6\u6216\u5206\u5c42\u7684\u65b9\u5f0f\u4e0a\u6355\u6349\u95ee\u9898\u548c\u6587\u7ae0\u4e4b\u95f4\u7684\u8bed\u4e49\u76f8\u4f3c\u6027\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u4e00\u4e2a\u7ed3\u8bba\u3002\u6211\u4eec\u7684 THE STANFORD ATTENTIVE READER \u91c7\u7528\u7684\u662f\u6700\u7b80\u5355\u7684attention\u5f62\u5f0f\uff0c\u6b64\u5916\u6211\u4eec\u8ba4\u4e3a\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u5584\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6027\u80fd\uff1a BIDIRECTIONAL ATTENTION \u00b6 \u9664\u4e86\u6211\u4eec\u5df2\u7ecf\u62e5\u6709\u7684\uff0c\u5173\u952e\u7684\u533a\u522b\u662f\u4ed6\u4eec\u6709 question-to-passage \u7684\u6ce8\u610f\u529b\uff0c\u8fd9\u610f\u5473\u7740\u54ea\u4e9b\u6bb5\u843d\u5355\u8bcd\u4e0e\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcd\u6700\u76f8\u4f3c\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u8fd9\u53ef\u4ee5\u5b9e\u73b0\u4e3a:\u5bf9\u4e8e\u95ee\u9898\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u6240\u6709\u77ed\u6587\u5355\u8bcd\u7684\u6ce8\u610f\u56fe\uff0c\u4f46\u662f\u662f\u53cc\u5411\u7684\uff1a \\[ f_{q-\\text {align}}\\left(q_{i}\\right)=\\sum_{j} b_{i, j} \\mathbf{E}\\left(p_{j}\\right) \\] \u4e4b\u540e\u53ef\u4ee5\u7528\u5b83\u4f5c\u4e3a\u95ee\u9898\u7f16\u7801\u8f93\u5165\u5c42\u7684\u4e00\u90e8\u5206\u3002 Seo\u7b49\u4eba(2017)\u7684\u6ce8\u610f\u673a\u5236\u6bd4\u8f83\u590d\u6742\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u662f\u76f8\u4f3c\u7684\u3002\u6211\u4eec\u8fd8\u8ba4\u4e3a\uff0c\u5728\u8fd9\u4e2a\u65b9\u5411\u4e0a\u7684\u6ce8\u610f\u529b\u529f\u80fd\u6ca1\u6709\u90a3\u4e48\u6709\u7528\uff0cSeo\u7b49\u4eba(2017)\u4e5f\u8bc1\u660e\u4e86\u8fd9\u4e00\u70b9\u3002\u8fd9\u662f\u56e0\u4e3a\u95ee\u9898\u4e00\u822c\u90fd\u5f88\u77ed(\u5e73\u574710-20\u4e2a\u5355\u8bcd)\uff0c\u4f7f\u7528\u4e00\u4e2aLSTM\u8fdb\u884c\u95ee\u9898\u7f16\u7801(\u65e0\u9700\u989d\u5916\u6ce8\u610f)\u901a\u5e38\u5c31\u8db3\u591f\u4e86\u3002 SELF-ATTENTION OVER PASSAGE \u00b6 \u76f4\u89c2\u7684\u611f\u89c9\u662f\uff0c\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\uff0c\u5e0c\u671b\u5b83\u53ef\u4ee5\u89e3\u51b3\u6307\u4ee3\u95ee\u9898\uff0c\u5e76\u4ece\u6587\u7ae0\u4e2d\u7684\u591a\u4e2a\u4f4d\u7f6e\u805a(\u540c\u4e00\u5b9e\u4f53\u7684\u4fe1\u606f\u3002 \u9996\u5148\u8ba1\u7b97\u51fa\u6587\u7ae0\u7684\u9690\u5c42\u5411\u91cf \\(\\mathbf{p}_{1}, \\mathbf{p}_{2}, \\dots, \\mathbf{p}_{l_{p}}\\) \uff0c\u7136\u540e\u901a\u8fc7\u5728\u5176\u4e0a\u4e3a\u6bcf\u4e00\u4e2api\u4f7f\u7528MLP\u5b9e\u73b0\u6ce8\u610f\u529b\u51fd\u6570\uff1a \\[ \\begin{aligned} a_{i, j} &=\\frac{\\exp \\left(g_{\\mathrm{MLP}}\\left(\\mathbf{p}_{i}, \\mathbf{p}_{j}\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(g_{\\mathrm{MLP}}\\left(\\mathbf{p}_{i}, \\mathbf{p}_{j^{\\prime}}\\right)\\right)} \\\\ \\mathbf{c}_{i} &=\\sum_{j} a_{i, j} \\mathbf{p}_{j} \\end{aligned} \\] \u968f\u540e\uff0c \\(c_i\\) \u548c \\(p_i\\) \u90fd\u88ab\u8fde\u63a5\u5e76\u6295\u5165\u5230\u53e6\u4e00\u4e2aBiLSTM : \\(\\mathbf{h}_{i}^{(p)}=\\operatorname{BiLSTM}\\left(\\mathbf{h}_{i-1}^{(p)},\\left[\\mathbf{p}_{i}, \\mathbf{c}_{i}\\right]\\right)\\) \u4e2d\uff0c\u53ef\u4ee5\u88ab\u7528\u505a\u6700\u7ec8\u7684\u6587\u7ae0\u8868\u793a\u3002 3.4.3 Alternatives to LSTMs \u00b6 \u6df1\u5c42\u7684LSTM\u6bd4\u6d45\u5c42\u7684LSTM\u8981\u597d\uff0c\u4f46\u662f\u4f1a\u5e26\u6765\u4e24\u4e2a\u96be\u4ee5\u4f18\u5316\u7684\u95ee\u9898\uff1a\u68af\u5ea6\u6d88\u5931\uff1b\u53ef\u6269\u5c55\u6027\u5dee\uff0c\u56e0\u4e3a\u968f\u7740\u5c42\u6570\u7684\u589e\u52a0\uff0c\u8bad\u7ec3/\u63a8\u7406\u65f6\u95f4\u5448\u7ebf\u6027\u589e\u957f\u3002\u7531\u4e8eLSTMs\u7684\u987a\u5e8f\u6027\uff0c\u5b83\u5f88\u96be\u5e76\u884c\u5316\uff0c\u56e0\u6b64\u4f38\u7f29\u6027\u5f88\u5dee\u3002 \u4e00\u65b9\u9762\uff0c\u6709\u4e00\u4e9b\u5de5\u4f5c\u5c1d\u8bd5\u5728\u5c42\u4e0e\u5c42\u4e4b\u95f4\u6dfb\u52a0 highway \u8fde\u63a5\u6216residual\u8fde\u63a5(He et al.\uff0c 2016)\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u4f18\u5316\u8fc7\u7a0b\uff0c\u80fd\u591f\u8bad\u7ec3\u66f4\u591a\u5c42\u7684LSTMs\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u4eba\u4eec\u5f00\u59cb\u5bfb\u627eLSTMs\u7684\u66ff\u4ee3\u54c1\uff0c\u5728\u6d88\u9664\u91cd\u590d\u7ed3\u6784\u7684\u540c\u65f6\uff0c\u6027\u80fd\u4ecd\u7136\u7c7b\u4f3c\u751a\u81f3\u66f4\u597d\u3002 \u8fd9\u65b9\u9762\u6700\u503c\u5f97\u6ce8\u610f\u7684\u5de5\u4f5c\u662f\u8c37\u6b4c\u7814\u7a76\u4eba\u5458\u63d0\u51fa\u7684 TRANSFORMER \u6a21\u578b\u3002\u4ec5\u5efa\u7acb\u5728\u5355\u8bcd\u5d4c\u5165\u548c\u7b80\u5355\u7684\u4f4d\u7f6e\u7f16\u7801\u4e4b\u4e0a\uff0c\u8fd9\u4e9b\u4f4d\u7f6e\u7f16\u7801\u5177\u6709\u5806\u53e0\u7684\u81ea\u6211\u5173\u6ce8\u5c42\u548c position-wise \u7684\u5168\u8fde\u63a5\u5c42\u3002\u901a\u8fc7\u6b8b\u5dee\u8fde\u63a5\uff0c\u8be5\u6a21\u578b\u80fd\u591f\u5728\u591a\u4e2a\u5c42\u6b21\u4e0a\u5feb\u901f\u8bad\u7ec3\u3002\u5b83\u9996\u5148\u5728L = 6\u5c42\u7684\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u4f18\u5f02\u7684\u6027\u80fd(\u6bcf\u5c42\u7531\u4e00\u4e2a\u81ea\u6211\u6ce8\u610f\u548c\u4e00\u4e2a\u5b8c\u5168\u8fde\u63a5\u7684\u524d\u9988\u7f51\u7edc\u7ec4\u6210)\uff0c\u7136\u540e\u88abYu\u7b49\u4eba(2018)\u6539\u7f16\u7528\u4e8e\u9605\u8bfb\u7406\u89e3 \u8be5\u6a21\u578b\u540d\u4e3a QANET (Yu ET al.,2018)\uff0c\u5b83\u5806\u53e0\u4e86\u591a\u4e2a\u5377\u79ef\u5c42\uff0c\u4ee5self-attention\u548c\u5168\u8fde\u63a5\u5c42\u4e3a\u4e2d\u5fc3\uff0c\u4f5c\u4e3a\u95ee\u9898\u548c\u6bb5\u843d\u7f16\u7801\u7684\u6784\u5efa\u5757\uff0c\u4ee5\u53ca\u5728\u6700\u7ec8\u9884\u6d4b\u4e4b\u524d\u5806\u53e0\u7684\u51e0\u4e2a\u5c42\u3002\u8be5\u6a21\u578b\u663e\u793a\u4e86\u5f53\u65f6\u6700\u5148\u8fdb\u7684\u6027\u80fd(\u88683.4)\uff0c\u540c\u65f6\u663e\u793a\u4e86\u663e\u8457\u7684\u52a0\u901f\u3002 \u6539\u8fdb\u7684simple recurrent unit( SRU )\uff0c\u7b80\u5316\u5faa\u73af\u7684\u540c\u65f6\u4fdd\u6301\u6a21\u578b\u80fd\u529b\u3002 3.4.4 Others \u00b6 TRAINING OBJECTIVES \u00b6 cloze style\u6216\u8005multiple choice \u901a\u5e38\u76f4\u63a5\u4f7f\u7528\u4ea4\u53c9\u71b5\u6216\u8005\u662f\u6700\u5927\u8fb9\u754c\u635f\u5931\uff0c\u4f46\u662f\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\uff0c Xiong et al. (2018)\u63d0\u51fa\u9884\u6d4b\u7b54\u6848\u4e24\u4e2a\u7aef\u70b9\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u4e0e\u6700\u7ec8\u8bc4\u4ef7\u6307\u6807\u4e4b\u95f4\u5b58\u5728\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u5373 gold answer\u4e0e ground truth\u4e4b\u95f4\u5b58\u5728\u91cd\u53e0\u3002\u4f8b\u5982: Span \u201cWarriors\u201d \u4e5f\u662f\u4e00\u4e2a\u6b63\u786e\u7684\u7b54\u6848\uff0c\u4f46\u662f\u4ece\u4ea4\u53c9\u71b5\u8bad\u7ec3\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5b83\u5e76\u4e0d\u6bd4 span \u201chistory\u201d\u66f4\u597d\u3002Xiong\u7b49\u4eba(2018)\u63d0\u51fa\u4e86\u4e00\u79cd\u6df7\u5408\u8bad\u7ec3\u76ee\u6807\uff0c\u5c06\u4f4d\u7f6e\u4ea4\u53c9\u71b5\u635f\u5931\u548c\u8bad\u7ec3\u540e\u7684\u5355\u8bcd\u91cd\u53e0\u91cf\u4e0e\u5f3a\u5316\u5b66\u4e60\u76f8\u7ed3\u5408\u3002\u57fa\u672c\u4e0a\uff0c\u4ed6\u4eec\u4f7f\u7528 \\(P^{(start)}{(i)}\\) \u548c \\(P^{(end)}{(i)}\\) \u91c7\u7528\u4ea4\u53c9\u71b5\u8bad\u7ec3\uff0c\u62bd\u53d6\u7b54\u6848\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u4f5c\u4e3a\u6837\u672c\uff0c\u7136\u540e\u4f7f\u7528F1 Score\u4f5c\u4e3a\u5956\u52b1\u51fd\u6570\u3002 \u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u81ea\u7531\u5f62\u5f0f\u56de\u7b54\uff0c\u8fd1\u5e74\u6765\u5728\u8bad\u7ec3\u66f4\u597d\u7684seq2seq\u6a21\u578b\u65b9\u9762\u6709\u4e86\u8bb8\u591a\u8fdb\u5c55\uff0c\u5c24\u5176\u662f\u5728\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u7684\u80cc\u666f\u4e0b\uff0c\u5982sentence-level training (Ranzato et al.,2016)\u548c minimum risk training (Shen et al.,2016)\u3002\u7136\u800c\uff0c\u6211\u4eec\u5728\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e0a\u8fd8\u6ca1\u6709\u770b\u5230\u5f88\u591a\u8fd9\u6837\u7684\u5e94\u7528\u3002 DATA AUGMENTATION \u00b6 \u5229\u7528\u4e86\u4e24\u79cd\u6700\u5148\u8fdb\u7684\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u6a21\u578b:\u4e00\u79cd\u662f\u4ece\u82f1\u8bed\u5230\u6cd5\u8bed\u7684\u6a21\u578b\uff0c\u53e6\u4e00\u79cd\u662f\u4ece\u6cd5\u8bed\u5230\u82f1\u8bed\u7684\u6a21\u578b\u3002\u5c06\u6cd5\u8bed\u7ffb\u8bd1\u6210\u82f1\u8bed\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c\u8fd9\u4e24\u4e2a\u6a21\u578b\u6765\u89e3\u91ca\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e00\u4e2a\u53e5\u5b50(\u5982\u679c\u9700\u8981\u7684\u8bdd\uff0c\u5bf9\u7b54\u6848\u505a\u4e00\u4e9b\u4fee\u6539)\u3002 3.4.5 Summary \u00b6 \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u4e0d\u540c\u65b9\u9762\u7684\u6700\u65b0\u8fdb\u5c55\uff0c\u8fd9\u4e9b\u8fdb\u5c55\u5bf9\u5f53\u524d\u9605\u8bfb\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5(\u5c24\u5176\u662fSQUAD)\u7684\u6700\u65b0\u8fdb\u5c55\u505a\u51fa\u4e86\u8d21\u732e\u3002\u54ea\u4e9b\u7ec4\u4ef6\u6bd4\u5176\u4ed6\u7ec4\u4ef6\u66f4\u91cd\u8981?\u6211\u4eec\u9700\u8981\u628a\u8fd9\u4e9b\u90fd\u52a0\u8d77\u6765\u5417?\u8fd9\u4e9b\u6700\u65b0\u7684\u8fdb\u5c55\u662f\u5426\u53ef\u4ee5\u63a8\u5e7f\u5230\u5176\u4ed6\u9605\u8bfb\u7406\u89e3\u4efb\u52a1?\u5b83\u4eec\u5982\u4f55\u4e0e\u4e0d\u540c\u7684\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u76f8\u5173\u8054?\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u95ee\u9898\u4e2d\u7684\u5927\u591a\u6570\u8fd8\u6ca1\u6709\u4e00\u4e2a\u660e\u786e\u7684\u7b54\u6848\uff0c\u4ecd\u7136\u9700\u8981\u5927\u91cf\u7684\u8c03\u67e5\u3002 \u6b63\u5982\u6240\u770b\u5230\u7684\uff0c\u6240\u6709\u8fd9\u4e9b\u7ec4\u4ef6\u6216\u591a\u6216\u5c11\u90fd\u4f1a\u5bf9\u6700\u7ec8\u7684\u6027\u80fd\u505a\u51fa\u8d21\u732e\u3002\u6700\u91cd\u8981\u7684\u521b\u65b0\u53ef\u80fd\u662f\u4f7f\u7528\u60c5\u666f\u5316\u5355\u8bcd\u5d4c\u5165(\u4f8b\u5982ELMO)\uff0c\u800c\u6ce8\u610f\u529f\u80fd\u7684\u8868\u8fbe\u4e5f\u5f88\u91cd\u8981\u3002\u7814\u7a76\u8fd9\u4e9b\u8fdb\u6b65\u662f\u5426\u53ef\u4ee5\u63a8\u5e7f\u5230\u672a\u6765\u7684\u5176\u4ed6\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\uff0c\u5c06\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002 Chapter 4 The Future of Reading Comprehension \u00b6 \u9996\u5148\u5728\u4e4b\u524d\u7684\u7ae0\u8282\u4e2d\u5df2\u7ecf\u63cf\u8ff0\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5728\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e2d\u7684\u6210\u529f\u5e94\u7528\u4ee5\u53ca\u4ed6\u4eec\u7684\u4e00\u4e9b\u5173\u952e\u70b9\u3002\u5c3d\u7ba1\u5df2\u7ecf\u6709\u4e86\u5f88\u5927\u7684\u8fdb\u6b65\uff0c\u4f46\u662f\u8ddd\u79bb\u4eba\u5de5\u9605\u8bfb\u7406\u89e3\u8fd8\u662f\u5b58\u5728\u6709\u4e00\u5b9a\u7684\u5dee\u8ddd\u3002 \u57284.1\u4e3b\u8981\u662f\u63d0\u51fa\u4e00\u4e9b\u73b0\u5b58\u6a21\u578b\u9884\u6d4b\u9519\u8bef\u7684\u4f8b\u5b50\uff0c\u8bf4\u660e\u8fd9\u4e9b\u6a21\u578b\u867d\u7136\u80fd\u591f\u5728\u4e00\u822c\u7684\u5e94\u7528\u4e0a\u53d6\u5f97\u9ad8\u6027\u80fd\uff0c\u4f46\u662f\u5374\u4ecd\u7136\u5728\u5f88\u591a\u7b80\u5355\u7684\u7684\u5c0f\u95ee\u9898\u4e0a\u51fa\u73b0\u9884\u6d4b\u9519\u8bef\uff1b\u57284.2\u548c4.3\u5206\u522b\u8bb2\u8ff0\u6570\u636e\u96c6\u548c\u6a21\u578b\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u5f71\u54cd\u548c\u5b58\u5728\u7684\u4e0d\u8db3\u4ee5\u53ca\u9700\u8981\u6df1\u5165\u7814\u7a76\u7684\u65b9\u5411\uff1b\u57284.4\u56de\u987e\u672c\u9886\u57df\u51e0\u4e2a\u91cd\u8981\u7684\u7814\u7a76\u95ee\u9898\u3002 4.1 Is SQuAD Solved Yet? \u00b6 \u5c3d\u7ba1\u5728SQuAD\u6570\u636e\u96c6\u4e0a\uff0c\u673a\u5668\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8d85\u8d8a\u4eba\u7c7b\u7684\u8868\u73b0\uff0c\u4f46\u662f\u901a\u8fc7\u5206\u6790\u53ef\u4ee5\u53d1\u73b0\uff0c\u6a21\u578b\u4f9d\u65e7\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\u3002\u4ece\u4e00\u4e9b\u9519\u8bef\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0c\u5373\u4fbf\u662f\u5728\u8be5\u6570\u636e\u96c6\u4e0a\u8868\u73b0\u6700\u4f73\u7684bert\u6a21\u578b\uff0c\u4ecd\u7136\u7f3a\u4e4f\u5bf9\u6587\u672c\u4e3b\u4f53\u548c\u4e8b\u4ef6\u4e4b\u95f4\u5185\u5728\u7ed3\u6784\u7684\u7406\u89e3\u3002\u8fd9\u4e9b\u6a21\u578b\u4e00\u76f4\u5728\u8fdb\u884c\u975e\u5e38\u590d\u6742\u7684\u6587\u672c\u5339\u914d\uff0c\u4f46\u5b83\u4eec\u4ecd\u7136\u96be\u4ee5\u7406\u89e3\u5b9e\u4f53\u548c\u6587\u672c\u4e2d\u6240\u8868\u8fbe\u7684\u4e8b\u4ef6\u4e4b\u95f4\u7684\u5185\u5728\u7ed3\u6784\u3002 \u8fd8\u6709\u5b66\u8005\u53d1\u73b0\u5728**\u6587\u672b**\u6dfb\u52a0\u4e00\u4e9b\u5206\u6563\u6ce8\u610f\u529b\u7684\u53e5\u5b50\uff0c\u8fd9\u4e9b\u53e5\u5b50\u4e0e\u95ee\u9898\u6709\u5355\u8bcd\u91cd\u53e0\uff0c\u4f46\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u4e0e\u6b63\u786e\u7b54\u6848\u76f8\u77db\u76fe\uff0c\u4e5f\u6ca1\u6709\u8bef\u5bfc\u4eba\u7c7b\u7684\u7406\u89e3\uff0c\u4f46\u5374\u4f1a\u8ba9\u6a21\u578b\u8868\u73b0\u5927\u5e45\u4e0b\u964d\u3002\u5982\u679c\u6dfb\u52a0\u4e0d\u7b26\u5408\u8bed\u6cd5\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u6548\u679c\u4f1a\u66f4\u7cdf\u3002\u8fd9\u8bf4\u660e\u76ee\u524d\u7684\u6a21\u578b \u4e25\u91cd\u4f9d\u8d56\u4e8e\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u7684\u8bcd\u6c47\u7ebf\u7d22 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5206\u6563\u6ce8\u610f\u529b\u7684\u53e5\u5b50\u4f1a\u5982\u6b64\u5177\u6709\u7834\u574f\u6027 \u5bf9\u4e8e\u5bf9\u6297\u6027\u6837\u672c\u5b58\u5728\u9c81\u68d2\u6027\u5dee \u7b49\u7f3a\u70b9 \u8fd9\u662f\u76d1\u7763\u5b66\u4e60\u7684\u4e00\u4e2a\u5173\u952e\u95ee\u9898\uff0c\u5b83\u4f7f\u5f97\u73b0\u6709\u7684\u6a21\u578b\u96be\u4ee5\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u90e8\u7f72 \u603b\u4e4b\uff0c\u5c3d\u7ba1\u6a21\u578b\u5728SQuAD\u4e0a\u6709\u4e86\u5f88\u9ad8\u7684\u6b63\u786e\u7387\uff0c\u4f46\u8fd9\u4e9b\u6a21\u578b\u4f9d\u65e7\u505c\u7559\u5728\u5bf9\u6587\u672c\u6d45\u5c42\u6b21\u7ed3\u6784\u4fe1\u606f\u7684\u7406\u89e3\u4e0a\uff0c\u5bf9\u4e8e\u6df1\u5c42\u6b21\u7ed3\u6784\u7684\u7406\u89e3\u8fd8\u662f\u4f1a\u72af\u5f88\u591a\u7b80\u5355\u7684\u9519\u8bef\u3002\u5728SQUAD\u4e2d\u6709\u4e00\u4e9b\u56f0\u96be\u7684\u4f8b\u5b50\u9700\u8981\u590d\u6742\u7684\u63a8\u7406\uff0c\u4f46\u662f\u7531\u4e8e\u5b83\u4eec\u7684\u7a00\u7f3a\u6027\uff0c\u8fd9\u7c7b\u95ee\u9898\u7684\u51c6\u786e\u6027\u5e76\u6ca1\u6709\u771f\u6b63\u53cd\u6620\u5728\u5e73\u5747\u5ea6\u91cf\u7ed3\u679c\u4e2d\u3002\u6b64\u5916\uff0c\u9ad8\u51c6\u786e\u7387\u53ea\u6709\u5728\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u6765\u81ea\u540c\u4e00\u5206\u5e03\u65f6\u624d\u6210\u7acb\uff0c\u5206\u5e03\u4e0d\u540c\u5219\u5177\u6709\u4e25\u91cd\u7684\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u9700\u8981\u5efa\u7acb\u66f4\u4e3a\u5168\u9762\u7684\u6570\u636e\u96c6\u4ee5\u53ca\u66f4\u6709\u6548\u7684\u6a21\u578b\u3002 4.2 Future Work: Datasets \u00b6 \u4e0a\u6587\u4e2d\u6211\u4eec\u8ba8\u8bba\u5e76\u8bc1\u660e\u4e86\uff1a\u795e\u7ecf\u6a21\u578b\u80fd\u591f\u5b9e\u73b0\u8d85\u4eba\u7c7b\u6216\u9876\u5cf0\u6027\u80fd\uff1b\u867d\u7136\u8fd9\u4e9b\u6570\u636e\u96c6\u975e\u5e38\u6709\u7528\uff0c\u4f46\u5927\u591a\u6570\u4f8b\u5b50\u90fd\u5f88\u7b80\u5355\uff0c\u4e14\u4e0d\u9700\u8981\u592a\u591a\u63a8\u7406\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u4e2d\u7f3a\u5c11\u4e86\u4ec0\u4e48\u5c5e\u6027\u5462\uff1f\u6211\u4eec\u63a5\u4e0b\u6765\u5e94\u8be5\u5236\u4f5c\u600e\u6837\u7684\u6570\u636e\u96c6\uff0c\u600e\u6837\u6536\u96c6\u66f4\u597d\u7684\u6570\u636e\u96c6\u5462\uff1f \u4ee5SQUAD\u4e3a\u4f8b\uff0c\u4e3b\u8981\u7531\u4ee5\u4e0b\u9650\u5236\uff1a \u95ee\u7b54\u7684\u95ee\u9898\u662f\u6839\u636e\u8fd9\u7bc7\u6587\u7ae0\u63d0\u51fa\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u63d0\u95ee\u8005\u5728\u63d0\u95ee\u65f6\u770b\u7740\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4ed6\u4eec\u5f88\u53ef\u80fd\u4f1a\u6a21\u4eff\u53e5\u5b50\u7ed3\u6784\uff0c\u91cd\u590d\u4f7f\u7528\u76f8\u540c\u7684\u5355\u8bcd\u3002\u8fd9\u51cf\u8f7b\u4e86\u56de\u7b54\u95ee\u9898\u7684\u96be\u5ea6\uff0c\u56e0\u4e3a\u8bb8\u591a\u95ee\u9898\u7684\u5355\u8bcd\u4e0e\u6587\u7ae0\u4e2d\u7684**\u5355\u8bcd\u91cd\u53e0** \u3002 \u95ee\u7b54\u7684\u95ee\u9898\u662f\u6587\u672c\u77ed\u8ddd\u79bb\u7684\u8de8\u5ea6\u9884\u6d4b\u3002\u8fd9\u4e0d\u4ec5\u610f\u5473\u7740\u6240\u6709\u7684\u95ee\u9898\u90fd\u662f\u53ef\u56de\u7b54\u7684\uff0c\u800c\u4e14\u8fd8\u6392\u9664\u4e86\u8bb8\u591a\u53ef\u80fd\u63d0\u51fa\u7684\u95ee\u9898\uff0c\u5982 yes/no \u3001 count \u95ee\u9898\u3002\u6b63\u5982\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\uff0cSQUAD\u4e2d\u7684\u5927\u591a\u6570\u95ee\u9898\u90fd\u662f\u4e8b\u5b9e\u6027\u7684\u95ee\u9898\uff0c\u7b54\u6848\u901a\u5e38\u90fd\u5f88\u77ed(\u5e73\u57473.1 tokens)\u3002\u56e0\u6b64\uff0c\u6570\u636e\u96c6\u4e2d\u4e5f\u5f88\u5c11\u6709 why (\u56e0\u679c\u5173\u7cfb)\u548c how (\u8fc7\u7a0b)\u7684\u95ee\u9898\u3002 \u5927\u90e8\u5206\u7684\u95ee\u7b54\u95ee\u9898\u90fd\u662f\u901a\u8fc7\u5355\u4e2a\u53e5\u5b50\u6765\u9884\u6d4b\uff0c\u57fa\u672c\u4e0d\u9700\u8981\u591a\u6bb5\u6587\u5b57\u63a8\u7406\u3002\u5e76\u4e14\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5728\u89e3\u51b3\u6307\u4ee3\u95ee\u9898\uff0c\u800c\u6307\u4ee3\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u6307\u4ee3\u7cfb\u7edf\u6765\u89e3\u51b3 \u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u9650\u5236\uff0c\u51fa\u73b0\u4e86\u5f88\u591a\u65b0\u7684\u6570\u636e\u96c6\uff1a TriviaQA \u5148\u6536\u96c6\u95ee\u9898/\u7b54\u6848\u5bf9\uff0c\u7136\u540e\u6784\u5efa\u76f8\u5e94\u7684\u6bb5\u843d\uff0c\u6570\u636e\u91cf\u6781\u5927\uff0c\u4f46\u662f\u4e0d\u80fd\u4fdd\u8bc1P\u63d0\u4f9b\u4e86Q\u7684A RACE \u7528\u4eba\u7c7b\u7684\u6807\u51c6\u5316\u6d4b\u8bd5\u8bc4\u4f30\u673a\u5668\u9605\u8bfb\u7406\u89e3\u80fd\u529b\uff0c\u4e13\u5bb6\u8bbe\u5b9a\u95ee\u9898\u548c\u7b54\u6848\uff084\u4e2a\u5019\u9009\uff09\uff0c\u5e76\u4e14\u6709\u00bc\u662f\u9700\u8981\u591a\u4e2a\u8bed\u53e5\u63a8\u7406\u7684 NarrativeQA \u6839\u636e\u4e66\u6216\u7535\u5f71\u7684\u60c5\u8282\u6458\u8981\u8fdb\u884c\u63d0\u95ee\uff0c\u6ce8\u91ca\u8005\u88ab\u9f13\u52b1\u4f7f\u7528\u81ea\u5df1\u7684\u6587\u5b57\u5e76\u4e14\u4e0d\u5141\u8bb8\u590d\u5236\u6587\u4e2d\u7684\u8bed\u53e5\u3002\u60c5\u8282\u6458\u8981\u901a\u5e38\u5305\u542b\u66f4\u591a\u7684\u4eba\u7269\u548c\u4e8b\u4ef6\uff0c\u6bd4\u65b0\u95fb\u6587\u7ae0\u6216\u7ef4\u57fa\u767e\u79d1\u6bb5\u843d\u66f4\u590d\u6742\u3002\u6709\u57fa\u4e8e\u6458\u8981\u7684(\u5e73\u5747659tokens)\u548c\u57fa\u4e8e\u5b8c\u6574\u4e66\u7c4d/\u7535\u5f71\u811a\u672c(\u5e73\u574762528tokens)\u56de\u7b54\u7684\u3002\u7531\u4e8e\u7b54\u6848\u662f\u81ea\u7531\u5f62\u5f0f\u7684\uff0c\u7f3a\u4e4f\u4e00\u81f4\u6027\uff0c\u5f88\u96be\u8bc4\u4f30 SQuAD 2.0 \u589e\u52a0\u8d1f\u6837\u672c\u4f8b\u5b50\u3002\u8fd9\u4e9b\u95ee\u9898\u4e0d\u80fd\u4ece\u6587\u7ae0\u4e2d\u5f97\u5230\u7b54\u6848\uff0c\u4f46\u662f\u770b\u8d77\u6765\u548c\u6b63\u6837\u672c\u95ee\u9898(\u76f8\u5173\u7684\uff0c\u6587\u7ae0\u4e2d\u6709\u4e00\u4e2a\u53ef\u4fe1\u7684\u7b54\u6848)\u5f88\u76f8\u4f3c\u3002 \u4e3a\u4e86\u5f88\u597d\u5730\u5904\u7406\u6570\u636e\u96c6\uff0c\u7cfb\u7edf\u4e0d\u4ec5\u9700\u8981\u56de\u7b54\u95ee\u9898\uff0c\u8fd8\u9700\u8981\u786e\u5b9a\u6bb5\u843d\u4e2d\u4ec0\u4e48\u65f6\u5019\u4e0d\u652f\u6301\u56de\u7b54\uff0c\u5e76\u907f\u514d\u56de\u7b54 \u3002\u8fd9\u662f\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u9762\uff0c\u4f46\u5728\u4ee5\u524d\u7684\u6570\u636e\u96c6\u4e2d\u88ab\u5ffd\u7565\u4e86\u3002 HotpotQA \u95ee\u7b54\u95ee\u9898\u9700\u8981\u5206\u6790\u591a\u4e2a\u652f\u6301\u6587\u6863\u3002\u7b2c\u4e00\u4e2a\u662f\u5e72\u6270\u8bbe\u7f6e\uff0c\u5176\u4e2d\u6bcf\u4e2a\u95ee\u9898\u90fd\u63d0\u4f9b10\u4e2a\u6bb5\u843d\uff0c\u5305\u62ec\u7528\u4e8e\u6784\u5efa\u95ee\u9898\u7684\u4e24\u4e2a\u6bb5\u843d\u548c\u4eceWikipedia\u68c0\u7d22\u5230\u76848\u4e2a\u5e72\u6270\u6bb5\u843d;\u7b2c\u4e8c\u4e2a\u8bbe\u7f6e\u662f\u4f7f\u7528\u5b8c\u6574\u7684Wikipedia\u6765\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u3002 \u4e0e SQUAD \u76f8\u6bd4\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u8981\u4e48\u9700\u8981\u66f4\u590d\u6742\u7684\u8de8\u65f6\u6001\u6216\u6587\u6863\u63a8\u7406\uff0c\u8981\u4e48\u9700\u8981\u5904\u7406\u66f4\u957f\u7684\u6587\u6863\uff0c\u8981\u4e48\u9700\u8981\u751f\u6210\u81ea\u7531\u5f62\u5f0f\u7684\u7b54\u6848\u800c\u4e0d\u662f\u63d0\u53d6\u5355\u4e2a\u8de8\u5ea6\uff0c\u8981\u4e48\u9700\u8981\u9884\u6d4b\u6587\u7ae0\u4e2d\u4f55\u65f6\u6ca1\u6709\u7b54\u6848\u3002\u5b83\u4eec\u5e26\u6765\u4e86\u65b0\u7684\u6311\u6218\uff0c\u8bb8\u591a\u6311\u6218\u4ecd\u7136\u8d85\u51fa\u4e86\u73b0\u6709\u6a21\u578b\u7684\u8303\u56f4\u3002 \u6211\u4eec\u76f8\u4fe1\u8fd9\u4e9b\u6570\u636e\u96c6\u5c06\u5728\u672a\u6765\u8fdb\u4e00\u6b65\u6fc0\u53d1\u4e00\u7cfb\u5217\u7684\u5efa\u6a21\u521b\u65b0\u3002\u5f53\u6211\u4eec\u7684\u6a21\u578b\u8fbe\u5230\u4e0b\u4e00\u4e2a\u6027\u80fd\u7ea7\u522b\u540e\uff0c\u6211\u4eec\u5c06\u9700\u8981\u5f00\u59cb\u6784\u5efa\u66f4\u52a0\u56f0\u96be\u7684\u6570\u636e\u96c6\u6765\u89e3\u51b3\u3002 4.3 Future Work: Models \u00b6 \u6211\u4eec\u63a5\u4e0b\u6765\u4ecb\u7ecd\u672a\u6765\u5de5\u4f5c\u6a21\u578b\u7684\u7814\u7a76\u65b9\u5411\u3002 \u6211\u4eec\u9996\u5148\u63cf\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u671f\u671b\uff1a\u73b0\u6709\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u53ea\u6ce8\u91cd\u51c6\u786e\u6027,\u7ed9\u5b9a\u4e00\u4e2a\u6570\u636e\u96c6\u5206\u5272,\u4e3b\u8981\u76ee\u6807\u662f\u5f97\u5230\u6700\u597d\u7684\u6d4b\u8bd5\u51c6\u786e\u6027\u5206\u6570\u3002\u4f46\u662f,\u6211\u4eec\u8ba4\u4e3a\u8fd8\u6709\u5176\u4ed6\u91cd\u8981\u7684\u65b9\u9762\u88ab\u5ffd\u89c6\u4e86,\u6211\u4eec\u5728\u672a\u6765\u9700\u8981\u5305\u62ec**\u901f\u5ea6\u548c\u53ef\u6269\u5c55\u6027\u3001\u5065\u58ee\u6027\u548c\u53ef\u89e3\u91ca**\u6027\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u5f53\u524d\u6a21\u578b\u4e2d\u8fd8\u7f3a\u5c11\u54ea\u4e9b\u91cd\u8981\u5143\u7d20 4.3.1 Desiderata \u00b6 \u9664\u4e86\u51c6\u786e\u6027(\u5728\u6807\u51c6\u6570\u636e\u96c6\u4e0a\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u5206\u6570)\uff0c\u540e\u7eed\u7684\u9700\u6c42\u5bf9\u672a\u6765\u7684\u5de5\u4f5c\u4e5f\u975e\u5e38\u91cd\u8981\uff1a Speed and Scalability \u5982\u4f55\u6784\u5efa\u66f4\u5feb\u7684\u6a21\u578b(train\u548cinference\u90fd\u8981\u5feb)\uff0c\u4ee5\u53ca\u5982\u4f55\u6269\u5c55\u5230\u66f4\u957f\u7684\u6587\u6863\uff0c\u8fd9\u4e9b\u90fd\u662f\u9700\u8981\u7814\u7a76\u7684\u91cd\u8981\u65b9\u5411\u3002\u5efa\u7acb\u66f4\u5feb\u7684\u8bad\u7ec3\u6a21\u578b\u53ef\u4ee5\u964d\u4f4e\u5b9e\u9a8c\u7684\u5468\u8f6c\u65f6\u95f4\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u6211\u4eec\u5728\u66f4\u5927\u7684\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u8bad\u7ec3\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u90e8\u7f72\u6a21\u578b\u65f6\uff0c\u4e3a\u63a8\u7406\u6784\u5efa\u66f4\u5feb\u7684\u6a21\u578b\u975e\u5e38\u6709\u7528\u3002\u6b64\u5916\uff0c\u7f16\u7801\u5f88\u957f\u7684\u6587\u6863\u662f\u4e0d\u73b0\u5b9e\u7684 (\u4f8b\u5982\uff0cTRIVIAQA)\uff0c\u751a\u81f3\u662f\u4e00\u6574\u672c\u4e66(\u4f8b\u5982\uff0cNARRATIVEQA)\u4f7f\u7528RNN\uff0c\u8fd9\u4ecd\u7136\u662f\u4e00\u4e2a\u4e25\u5cfb\u7684\u6311\u6218\u3002 \u73b0\u6709\u7684\u89e3\u51b3\u529e\u6cd5\u5305\u62ec\uff1a \u4f7f\u7528Transformer\u6216SRU\u4ee3\u66ffLSTM Train\u9636\u6bb5\uff0c\u5b66\u4e60\u8df3\u8fc7\u90e8\u5206\u6587\u6863\u4e0d\u9700\u8981\u9605\u8bfb\u6240\u6709\u7684\u5185\u5bb9\uff0c\u8fd0\u884c\u66f4\u5feb\u5e76\u4e14\u4fdd\u6301\u7c7b\u4f3c\u6027\u80fd \u4f18\u5316\u7b97\u6cd5\u7684\u9009\u62e9\u4e5f\u4f1a\u6781\u5927\u5730\u5f71\u54cd\u6536\u655b\u901f\u5ea6\uff0c\u591aGPU\u8bad\u7ec3\u548c\u786c\u4ef6\u6027\u80fd\u4e5f\u662f\u9700\u8981\u8003\u8651\u7684\u91cd\u8981\u65b9\u9762 Robustness \u5982\u4f55\u5728\u8bad\u7ec3\u8fc7\u7a0b\u6dfb\u52a0\u66f4\u591a\u7684\u5bf9\u6297\u6837\u672c \u5728\u591a\u6570\u636e\u96c6\u4e0a\u505a\u8fc1\u79fb\u5b66\u4e60\u548c\u591a\u4efb\u52a1\u5b66\u4e60\u4ee5\u5b9e\u73b0\u8de8\u6570\u636e\u96c6\u7684\u8f83\u597d\u8868\u73b0 \u6253\u7834\u6807\u51c6\u7684\u76d1\u7763\u5b66\u4e60\u65b9\u6cd5\uff0c\u521b\u9020\u66f4\u597d\u7684\u6a21\u578b\u8bc4\u4f30\u65b9\u6cd5\u4ee5\u4fbf\u6784\u5efa\u66f4\u5065\u58ee\u7684\u6a21\u578b Interpretability \u4f7f\u6a21\u578b\u4ece\u6587\u6863\u4e2d\u63d0\u53d6\u7247\u6bb5\u4f5c\u4e3a\u56de\u7b54\u4f9d\u636e\u6216\u751f\u6210\u7406\u8bba\u4f9d\u636e \u901a\u8fc7\u600e\u6837\u7684\u8bad\u7ec3\u96c6\u8fbe\u5230\u8fd9\u79cd\u53ef\u89e3\u91ca\u6027\u6c34\u5e73\u3002\u4ece\u6700\u7ec8\u7b54\u6848\u4e2d\u63a8\u65ad\u51fa\u7406\u8bba\u4f9d\u636e\u662f\u53ef\u884c\u7684\uff0c\u4f46\u76f8\u5f53\u56f0\u96be\u3002\u6211\u4eec\u5e94\u8be5\u8003\u8651\u6536\u96c6\u4eba\u7c7b\u7684\u89e3\u91ca\u7528\u6765\u76d1\u7763\u5b66\u4e60 4.3.2 Structures and Modules \u00b6 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u89e3\u51b3\u66f4\u56f0\u96be\u7684\u9605\u8bfb\u7406\u89e3\u95ee\u9898\uff0c\u5f53\u524d\u6a21\u578b\u4e2d\u7f3a\u5931\u7684\u7ed3\u6784\u5316\u4e0e\u6a21\u5757\u5316\u3002\u7ed3\u6784\u5316\u88ab\u8bc1\u5b9e\u53ef\u4ee5\u5e2e\u52a9\u6a21\u578b\u627e\u5230\u5f88\u591a\u76f8\u5173\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u56de\u7b54\u95ee\u9898\uff1b\u6a21\u5757\u5316\u4efb\u52a1\u53ef\u4ee5\u5c06\u4efb\u52a1\u4ece\u590d\u6742\u4efb\u52a1\u5206\u89e3\u6210\u7b80\u5355\u4efb\u52a1\uff0c\u6709\u52a9\u4e8e\u6a21\u578b\u5728\u590d\u6742\u95ee\u9898\u4e0a\u7684\u6269\u5c55\u3002 \u9996\u5148\uff0c\u5f53\u524d\u7684\u6a21\u578b\u8981\u4e48\u5efa\u7acb\u5728\u5e8f\u5217\u6a21\u578b\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u4e48\u5bf9\u79f0\u5730\u5904\u7406\u6240\u6709\u5355\u8bcd\u5bf9(Transformer)\uff0c\u5ffd\u7565\u8bed\u8a00\u7684\u56fa\u6709\u7ed3\u6784\u3002\u4e00\u65b9\u9762\uff0c\u8fd9\u8feb\u4f7f\u6211\u4eec\u7684\u6a21\u578b\u4ece\u5934\u5f00\u59cb\u5b66\u4e60\u6240\u6709\u76f8\u5173\u7684\u8bed\u8a00\u4fe1\u606f\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u7684\u6a21\u578b\u7684\u5b66\u4e60\u66f4\u52a0\u56f0\u96be\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u591a\u5e74\u6765\uff0cNLP\u793e\u533a\u5728\u8bed\u8a00\u8868\u793a\u4efb\u52a1(\u5982\u53e5\u6cd5\u5206\u6790\u3001\u6307\u4ee3)\u7684\u7814\u7a76\u548c\u8bed\u8a00\u8d44\u6e90\u548c\u5de5\u5177\u7684\u6784\u5efa\u4e0a\u6295\u5165\u4e86\u5927\u91cf\u7684\u7cbe\u529b\u3002\u8bed\u8a00\u6309\u7167\u5355\u8bcd\u5e8f\u5217\u4e0a\u7684\u5c42\u6b21\u7ed3\u6784\u548c\u5d4c\u5957\u7ed3\u6784\u5bf9\u610f\u4e49\u8fdb\u884c\u7f16\u7801\u3002\u5728\u6211\u4eec\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u4e2d\u66f4\u660e\u786e\u5730\u7f16\u7801\u8bed\u8a00\u7ed3\u6784\u662f\u5426\u4ecd\u7136\u6709\u7528\uff1f \u4e0a\u56fe\u5c55\u793a\u4e86CORENLP\u8f93\u51fa\u7684\u51e0\u4e2aSQUAD\u4e2d\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u6837\u7684\u7ed3\u6784\u5316\u4fe1\u606f\u662f\u6709\u7528\u7684\uff1a 2400\u662fprofessors\u7684\u6570\u5b57\u4fee\u9970\u8bed\u3002\u8fd9\u4e00\u4fe1\u606f\u5e94\u8be5\u6709\u52a9\u4e8e\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a\u54c8\u4f5b\u5927\u5b66\u6559\u6388\u3001\u8bb2\u5e08\u548c\u8bb2\u5e08\u7684\u603b\u6570\u662f\u591a\u5c11\uff1f \u6307\u4ee3\u4fe1\u606f\u6709\u52a9\u4e8e\u56de\u7b54\u4ece\u54ea\u4e00\u5e74\u5f00\u59cb\uff0c\u54c8\u4f5b\u5927\u5b66\u5728\u4e16\u754c\u5927\u5b66\u7684\u5b66\u672f\u6392\u540d\u4e2d\u540d\u5217\u524d\u8305\uff1f \u56e0\u6b64\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u8bed\u8a00\u77e5\u8bc6/\u7ed3\u6784\u4ecd\u7136\u662f\u5bf9\u73b0\u6709\u6a21\u578b\u7684\u6709\u76ca\u8865\u5145\u3002 \u5269\u4e0b\u7684\u6211\u4eec\u9700\u8981\u56de\u7b54\u7684\u95ee\u9898\u662f: \u5c06\u8fd9\u4e9b\u7ed3\u6784\u5408\u5e76\u5230\u5e8f\u5217\u6a21\u578b\u4e2d\u6700\u597d\u7684\u65b9\u6cd5\u662f\u4ec0\u4e48 \u6211\u4eec\u662f\u5c06\u7ed3\u6784\u5efa\u6a21\u4e3a\u6f5c\u5728\u53d8\u91cf\uff0c\u8fd8\u662f\u4f9d\u8d56\u73b0\u6210\u7684\u8bed\u8a00\u5de5\u5177? \u5bf9\u4e8e\u540e\u4e00\u79cd\u60c5\u51b5\uff0c\u5f53\u524d\u7684\u5de5\u5177\u662f\u5426\u8db3\u591f\u597d\uff0c\u4ece\u800c\u4f7f\u6a21\u578b\u80fd\u591f\u53d7\u76ca\u66f4\u591a (\u800c\u4e0d\u662f\u5fcd\u53d7\u566a\u97f3)?\u6211\u4eec\u80fd\u8fdb\u4e00\u6b65\u63d0\u9ad8\u8fd9\u4e9b\u4ee3\u8868\u4efb\u52a1\u7684\u6027\u80fd\u5417? \u6211\u4eec\u8ba4\u4e3a\uff0c\u5927\u591a\u6570\u73b0\u6709\u6a21\u578b\u4ecd\u7136\u7f3a\u5c11\u7684\u53e6\u4e00\u4e2a\u65b9\u9762\u662f***modules***\u6a21\u5757\u3002\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\u672c\u8d28\u4e0a\u662f\u975e\u5e38\u590d\u6742\u7684\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u4f8b\u5b50\u9700\u8981\u4e0d\u540c\u7c7b\u578b\u7684\u63a8\u7406\u80fd\u529b\u3002\u5982\u679c\u6211\u4eec\u60f3\u901a\u8fc7\u4e00\u4e2a\u5de8\u5927\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u5b66\u4e60\u6240\u6709\u7684\u4e1c\u897f\uff0c\u8fd9\u4ecd\u7136\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6311\u6218(\u8fd9\u8ba9\u4eba\u60f3\u8d77\u4e3a\u4ec0\u4e48\u63d0\u51fa\u6ce8\u610f\u529b\u673a\u5236\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u60f3\u628a\u4e00\u4e2a\u53e5\u5b50\u6216\u4e00\u6bb5\u8bdd\u7684\u610f\u601d\u538b\u7f29\u6210\u4e00\u4e2a\u5411\u91cf!)\u6211\u4eec\u76f8\u4fe1\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u8fbe\u5230\u66f4\u6df1\u5c42\u6b21\u7684\u9605\u8bfb\u7406\u89e3\uff0c\u6211\u4eec\u672a\u6765\u7684\u6a21\u578b\u5c06\u66f4\u52a0\u7ed3\u6784\u5316\u3001\u6a21\u5757\u5316\uff0c\u89e3\u51b3\u4e00\u4e2a\u7efc\u5408\u6027\u7684\u4efb\u52a1\u53ef\u4ee5\u5206\u89e3\u6210\u8bb8\u591a\u5b50\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u89e3\u51b3\u6bcf\u4e00\u4e2a\u8f83\u5c0f\u7684\u5b50\u95ee\u9898(\u4f8b\u5982\uff0c\u6bcf\u4e00\u79cd\u63a8\u7406\u7c7b\u578b)\uff0c\u5e76\u6700\u7ec8\u5c06\u5b83\u4eec\u7ec4\u5408\u8d77\u6765\u3002 \u8fd9\u79cd\u6a21\u5757\u5316\u7684\u601d\u60f3\u662f(Andreas et al., 2016) \u63d0\u51faNEURAL MODULE NETWORKS (NMN)\u3002\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u76ee\u524d\u662f\u5728\u89c6\u89c9\u95ee\u7b54\u9886\u57df\u6216\u8005\u5c0f\u7684\u6570\u636e\u96c6\u95ee\u7b54\u95ee\u9898\u4e2d\u8fdb\u884c\u7814\u7a76\uff0c\u5bf9\u4e8e\u5927\u89c4\u6a21\u8bed\u6599\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u8fd8\u9762\u4e34\u5de8\u5927\u7684\u6311\u6218\u3002 4.4 Research Questions \u00b6 \u5982\u4f55\u8861\u91cf\u6a21\u578b\u5728\u8fd9\u4e00\u9886\u57df\u53d6\u5f97\u7684\u8fdb\u6b65\uff1a\u7528\u4eba\u7c7b\u7684\u6807\u51c6\u5316\u6d4b\u8bd5\u6765\u8bc4\u4ef7\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u6027\u80fd\uff1b\u5c06\u591a\u4e2a\u6570\u636e\u96c6\u96c6\u6210\u4e3a\u4e00\u4e2a\u6d4b\u8bd5\u96c6\u8fdb\u884c\u8bc4\u4f30\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u5bf9\u5355\u4e2a\u6570\u636e\u96c6\u8fdb\u884c\u6d4b\u8bd5 Sugawara\u7b49\u4eba(2017)\u8bd5\u56fe\u5c06\u9605\u8bfb\u7406\u89e3\u6280\u80fd\u5206\u4e3a\u4e24\u7c7b:\u524d\u63d0\u6280\u80fd\u548c\u53ef\u8bfb\u6027\u3002\u5148\u51b3\u6280\u80fd\u8861\u91cf\u7684\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u63a8\u7406\u548c\u7b54\u9898\u6240\u9700\u7684\u77e5\u8bc6\u5e76\u5b9a\u4e49\u4e8613\u9879\u6280\u80fd:\u5bf9\u8c61\u8ddf\u8e2a\u3001\u6570\u5b66\u63a8\u7406\u3001\u6307\u4ee3\u6d88\u89e3\u3001\u903b\u8f91\u63a8\u7406\u3001\u7c7b\u6bd4\u3001\u56e0\u679c\u5173\u7cfb\u3001\u65f6\u7a7a\u5173\u7cfb\u3001\u7701\u7565\u53f7\u3001\u8854\u63a5\u3001\u7cbe\u5316\u3001\u5143\u77e5\u8bc6\u3001schematic clause relation\u548c\u6807\u70b9\u7b26\u53f7\u3002\u53ef\u8bfb\u6027\u5ea6\u91cf\u201c\u6587\u672c\u5904\u7406\u7684\u6613\u7528\u6027\u201d\uff0c\u5e76\u4f7f\u7528\u4e86\u5e7f\u6cdb\u7684\u8bed\u8a00\u7279\u6027/\u4eba\u7c7b\u53ef\u8bfb\u6027\u5ea6\u91cf\u3002\u4f5c\u8005\u7684\u7ed3\u8bba\u662f\uff0c\u8fd9\u4e24\u4e2a\u96c6\u5408\u662f\u5f31\u76f8\u5173\u7684\uff0c\u4ece\u6613\u4e8e\u9605\u8bfb\u7684\u4e0a\u4e0b\u6587\u4e2d\u8bbe\u8ba1\u96be\u7684\u95ee\u9898\u662f\u53ef\u80fd\u7684\u3002\u8fd9\u4e9b\u7814\u7a76\u8868\u660e\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u57fa\u4e8e\u8fd9\u4e9b\u5c5e\u6027\u6784\u5efa\u6570\u636e\u96c6\u548c\u5f00\u53d1\u6a21\u578b\u3002 \u6a21\u578b\u8868\u5f81\u548c\u7ed3\u6784\u54ea\u4e2a\u66f4\u91cd\u8981\uff1a\u6709\u65f6\u5019\u7b80\u5355\u6a21\u578b\u4e5f\u80fd\u8fbe\u5230\u8f83\u597d\u7684\u6027\u80fd\uff0c\u4f46\u662f\u6a21\u578b\u6355\u6349\u5230\u7684\u6587\u7ae0\u7279\u5f81\u5c31\u4f1a\u5c11\u5f88\u591a\uff0c\u4e24\u8005\u7684\u7ed3\u5408\u53ef\u80fd\u662f\u672a\u6765\u7684\u8d8b\u52bf\uff08\u4e0b\u56fe\u5de6\u53f3\u5206\u522b\u4e3a\u590d\u6742\u6a21\u578b\u548c\u7b80\u5355\u6a21\u578b\uff09\u3002","title":"Machine Reading Comprehension"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#neural-reading-comprehension-and-beyond","text":"","title":"Neural Reading Comprehension and beyond \u9605\u8bfb\u7b14\u8bb0"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#chapter-1-introduction","text":"\u600e\u6837\u53eb\u505a\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff1f \u8bcd\u6027\u6807\u6ce8 part-of-speech tagging \u4e13\u6709\u540d\u8bcd \u5e38\u7528\u540d\u8bcd \u52a8\u8bcd \u5f62\u5bb9\u8bcd \u4ecb\u8bcd \u547d\u540d\u5b9e\u4f53\u8bc6\u522b named entity recognition \u4eba\u540d \u5730\u540d \u53e5\u6cd5\u5206\u6790 syntactic parsing \u7406\u89e3\u6bcf\u4e00\u4e2a\u53e5\u5b50 \u5355\u8bcd\u4e4b\u95f4\u7684\u5173\u7cfb \u8bed\u6cd5\u7ed3\u6784 \u5171\u6307\u6d88\u89e3/\u6307\u4ee3\u6d88\u89e3 coreference resolution \u53e5\u5b50\u4e4b\u95f4\u7684\u76f8\u4e92\u4f5c\u7528 She \u6307\u4ee3\u4e0a\u6587\u7684 A The girls \u6307\u4ee3\u4e0a\u6587\u7684 ABCD \u5982\u4f55\u5168\u9762\u5730\u6d4b\u8bd5\u8bc4\u4f30\u8fd9\u4e9b\u65b9\u9762\uff1f \u9605\u8bfb\u7406\u89e3\u2014\u2014\u57fa\u4e8e\u4e00\u6bb5\u6587\u672c\u56de\u7b54\u9605\u8bfb\u7406\u89e3\u95ee\u9898 \u8ba1\u7b97\u673a\u7cfb\u7edf\u5fc5\u987b\u7406\u89e3\u6587\u672c\u7684\u8bb8\u591a\u4e0d\u540c\u65b9\u9762\u624d\u80fd\u6b63\u786e\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898 \u672c\u8bba\u6587\u7684\u6838\u5fc3\u4e3b\u9898\u4e4b\u4e00\uff1a\u7531\u4e8e\u53ef\u4ee5\u8bbe\u8ba1\u95ee\u9898\u6765\u68c0\u6d4b\u6211\u4eec\u5173\u5fc3\u7684\u67d0\u4e9b\u65b9\u9762\uff0c\u9605\u8bfb\u7406\u89e3\u53ef\u80fd\u662f\u8bc4\u4f30\u8bed\u8a00\u7406\u89e3\u7684\u6700\u5408\u9002\u7684\u4efb\u52a1 \u6700\u8fd1\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u662f\u4e3a\u4ec0\u4e48\uff1f (passage, question, answer) \u7684\u4e09\u5143\u7ec4\u7684\u5f62\u5f0f\u521b\u5efa\u5927\u89c4\u6a21\u7684\u76d1\u7763\u6570\u636e\u96c6 \u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u53d1\u5c55 \u5728\u672c\u8bba\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u6db5\u76d6\u73b0\u4ee3\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u672c\u8d28 \u95ee\u9898\u7684\u5f62\u6210\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6784\u5efa\u6a21\u5757\u548c\u5173\u952e\u6210\u5206\uff0c\u4ee5\u53ca\u5bf9\u5f53\u524d\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u53ef\u4ee5\u5728\u54ea\u4e9b\u65b9\u9762\u53d6\u5f97\u4f18\u52bf\u4ee5\u53ca\u5b83\u4eec\u4ecd\u7136\u843d\u540e\u7684\u5730\u65b9\u7684\u7406\u89e3 \u8bba\u6587\u7684\u7b2c\u4e8c\u4e2a\u4e2d\u5fc3\u4e3b\u9898 \u6211\u4eec\u6df1\u4fe1\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u5efa\u7acb\u8868\u73b0\u4f18\u79c0\u7684\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\uff0c\u5b83\u4eec\u5c06\u6210\u4e3a\u95ee\u7b54\u548c\u5bf9\u8bdd\u7cfb\u7edf\u7b49\u5e94\u7528\u7684\u5173\u952e\u6280\u672f \u9605\u8bfb\u7406\u89e3\u53ef\u4ee5\u4fc3\u8fdb\u66f4\u52a0\u667a\u80fd\u7684\u641c\u7d22\u5f15\u64ce google\u4e0d\u4ec5\u8fd4\u56de\u641c\u7d22\u6587\u6863\u5217\u8868\uff0c\u8fd8\u5c1d\u8bd5\u9605\u8bfb\u8fd9\u4e9bWeb\u6587\u6863\uff0c\u6700\u540e\u7a81\u51fa\u663e\u793a\u6700\u5408\u7406\u7684\u7b54\u6848\u5e76\u5c06\u5176\u663e\u793a\u5728\u641c\u7d22\u7ed3\u679c\u7684\u9876\u90e8 \u672c\u6587\u8fd8\u5bf9\u5982\u4f55\u4ece\u6700\u8fd1\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u6784\u5efa\u5b9e\u9645\u5e94\u7528\u505a\u4e86\u63a2\u7d22 \u5f00\u653e\u9886\u57df\u95ee\u7b54 Open-domain question answering \u7ed3\u5408\u4e86\u4fe1\u606f\u68c0\u7d22\u548c\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218 \uff0c\u65e8\u5728\u56de\u7b54\u6765\u81eaWeb\u6216\u5927\u578b\u767e\u79d1\u5168\u4e66\uff08\u4f8b\u5982\u7ef4\u57fa\u767e\u79d1\uff09\u7684\u4e00\u822c\u95ee\u9898 \u4f1a\u8bdd\u95ee\u7b54 Conversational question answering \u7ed3\u5408\u4e86\u5bf9\u8bdd\u548c\u9605\u8bfb\u7406\u89e3\u7684\u6311\u6218\uff0c\u5e76\u89e3\u51b3\u4e86\u5728\u6587\u672c\u6bb5\u843d\u4e2d\u591a\u56de\u5408\u95ee\u9898\u56de\u7b54\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u7528\u6237\u5982\u4f55\u4e0e\u4f1a\u8bdd\u4ee3\u7406\u4eba\u4ea4\u6d41 \u672c\u6587\u6784\u6210 \u57fa\u7840 \u4fa7\u91cd\u4e8e\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\uff0c\u91cd\u70b9\u662f\u4ed4\u7ec6\u9605\u8bfb\u4e00\u4e2a\u77ed\u6bb5\uff0c\u4ee5\u4fbf\u8ba1\u7b97\u673a\u7cfb\u7edf\u80fd\u591f\u56de\u7b54\u7406\u89e3\u95ee\u9898 \u7b2c\u4e8c\u7ae0 \u6211\u4eec\u9996\u5148\u6982\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u9886\u57df\u7684\u5386\u53f2\u548c\u6700\u65b0\u53d1\u5c55\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6b63\u5f0f\u5b9a\u4e49\u95ee\u9898\u7684\u8868\u8ff0\u53ca\u5176\u4e3b\u8981\u7c7b\u522b\u3002 \u7136\u540e\uff0c\u6211\u4eec\u7b80\u8981\u8ba8\u8bba\u9605\u8bfb\u7406\u89e3\u548c\u4e00\u822c\u95ee\u9898\u56de\u7b54\u7684\u5dee\u5f02\u3002 \u6700\u540e\uff0c\u6211\u4eec\u8ba4\u4e3a\u6700\u8fd1\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6210\u529f\u662f\u7531\u5927\u89c4\u6a21\u6570\u636e\u96c6\u548c\u795e\u7ecf\u6a21\u578b\u9a71\u52a8\u7684\u3002 \u7b2c\u4e09\u7ae0 \u6211\u4eec\u4ecb\u7ecd\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u5bb6\u65cf\u3002\u6211\u4eec\u9996\u5148\u63cf\u8ff0\u975e\u795e\u7ecf\u7684\uff0c\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\uff0c\u5e76\u8ba8\u8bba\u5b83\u4eec\u4e0e\u7aef\u5230\u7aef\u795e\u7ecf\u65b9\u6cd5\u7684\u533a\u522b\u3002 \u7136\u540e\u6211\u4eec\u4ecb\u7ecd\u4e00\u79cd\u6211\u4eec\u63d0\u51fa\u7684\u540d\u4e3a THE STANFORD ATTENTIVE READER \u7684\u795e\u7ecf\u65b9\u6cd5\uff0c\u5e76\u63cf\u8ff0\u5176\u57fa\u672c\u6784\u5efa\u5757\u548c\u6269\u5c55\u3002\u6211\u4eec\u5728\u4e24\u4e2a\u6709\u4ee3\u8868\u6027\u7684\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u4e0a\u5448\u73b0\u5b9e\u9a8c\u7ed3\u679c\uff1a CNN/DAILY MAIL \u548c SQUAD \uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u6211\u4eec\u5bf9\u795e\u7ecf\u6a21\u578b\u8fdb\u884c\u4e86\u6df1\u5165\u5206\u6790\uff0c\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u6a21\u578b\u5b9e\u9645\u5b66\u5230\u4e86\u4ec0\u4e48\u3002 \u6700\u540e\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5728\u4e0d\u540c\u65b9\u9762\u7684\u6700\u65b0\u8fdb\u5c55\u3002 \u672c\u7ae0\u57fa\u4e8e\u6211\u4eec\u7684\u5de5\u4f5c\u3002(Chen et al.,2016), (Chen et al.,2017) \u7b2c\u56db\u7ae0 \u6211\u4eec\u5c06\u8ba8\u8bba\u8be5\u9886\u57df\u7684\u672a\u6765\u5de5\u4f5c\u548c\u672a\u89e3\u51b3\u7684\u95ee\u9898\u3002\u6211\u4eec\u9996\u5148\u68c0\u67e5\u73b0\u6709\u6a21\u578b\u7684\u9519\u8bef\u60c5\u51b5\uff0c\u5c3d\u7ba1\u5b83\u4eec\u5728\u5f53\u524d\u7684\u57fa\u51c6\u6d4b\u8bd5\u4e2d\u5177\u6709\u5f88\u9ad8\u7684\u51c6\u786e\u6027\u3002 \u7136\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u672a\u6765\u65b9\u5411\u3002 \u6700\u540e\uff0c\u6211\u4eec\u56de\u987e\u4e86\u8be5\u9886\u57df\u7684\u51e0\u4e2a\u91cd\u8981\u7814\u7a76\u95ee\u9898\uff0c\u8fd9\u4e9b\u95ee\u9898\u4ecd\u7136\u662f\u4e00\u4e2a\u60ac\u800c\u672a\u51b3\u7684\u95ee\u9898\uff0c\u672a\u6765\u8fd8\u6709\u5f85\u56de\u7b54\u3002 \u5e94\u7528 \u5c06\u9605\u8bfb\u7406\u89e3\u89c6\u4e3a\u5b9e\u9645\u5e94\u7528\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u4f8b\u5982\u95ee\u7b54\u7cfb\u7edf\u548c\u4f1a\u8bdd\u4ee3\u7406\uff08\u5bf9\u8bdd\u7cfb\u7edf\uff09 \u7b2c\u4e94\u7ae0 \u6211\u4eec\u5c06\u5f00\u653e\u9886\u57df\u95ee\u7b54\u7cfb\u7edf\u7684\u95ee\u9898\u4f5c\u4e3a\u9605\u8bfb\u7406\u89e3\u7684\u5e94\u7528\u6765\u89e3\u51b3\u3002\u6211\u4eec\u8ba8\u8bba\u5982\u4f55\u5c06\u9ad8\u6027\u80fd\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u4e0e\u6709\u6548\u7684\u4fe1\u606f\u68c0\u7d22\u6280\u672f\u76f8\u7ed3\u5408\uff0c\u6784\u5efa\u65b0\u4e00\u4ee3\u5f00\u653e\u9886\u57df\u95ee\u7b54\u7cfb\u7edf\u3002 \u6211\u4eec\u63cf\u8ff0\u4e86\u4e00\u4e2a\u6211\u4eec\u5efa\u7acb\u7684\u540d\u4e3a DRQA \u7684\u7cfb\u7edf\uff1a\u5b83\u7684\u5173\u952e\u7ec4\u4ef6\u4ee5\u53ca\u6211\u4eec\u5982\u4f55\u4e3a\u5b83\u521b\u5efa\u8bad\u7ec3\u96c6\uff0c\u7136\u540e\u6211\u4eec\u5bf9\u591a\u4e2aQA\u57fa\u51c6\u8fdb\u884c\u5168\u9762\u8bc4\u4f30\u3002 \u6211\u4eec\u6700\u540e\u8ba8\u8bba\u4e86\u5b83\u76ee\u524d\u7684\u5c40\u9650\u6027\u548c\u672a\u6765\u7684\u5de5\u4f5c\u3002\u672c\u7ae0\u57fa\u4e8e\u6211\u4eec\u7684\u5de5\u4f5c(Chen et al., 2017) \u7b2c\u516d\u7ae0 \u6211\u4eec\u7814\u7a76\u4e86\u4f1a\u8bdd\u4ee3\u7406\u7684\u95ee\u9898\uff0c\u5176\u4e2d\u673a\u5668\u5fc5\u987b\u7406\u89e3\u6587\u672c\u6bb5\u843d\u5e76\u56de\u7b54\u51fa\u73b0\u5728\u5bf9\u8bdd\u4e2d\u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u6211\u4eec\u9996\u5148\u7b80\u8981\u56de\u987e\u4e00\u4e0b\u6709\u5173\u5bf9\u8bdd\u7684\u6587\u732e\uff0c\u5e76\u8ba4\u4e3a\u5bf9\u8bdd\u95ee\u9898\u56de\u7b54\u662f\u5efa\u7acb\u4fe1\u606f\u5bfb\u6c42\u5bf9\u8bdd\u4ee3\u7406\u4eba\u7684\u5173\u952e\u3002 \u6211\u4eec\u4ecb\u7ecd\u4e86 COQA \uff1a\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u4f1a\u8bdd\u95ee\u7b54\u7cfb\u7edf\u7684\u65b0\u6570\u636e\u96c6\uff0c\u5305\u62ec127k\u95ee\u9898\u548c\u7b54\u6848\uff0c\u4ece8k\u5173\u4e8e\u6587\u672c\u6bb5\u843d\u7684\u5bf9\u8bdd\u4e2d\u83b7\u5f97\u3002 \u6211\u4eec\u6df1\u5165\u5206\u6790\u6570\u636e\u96c6\uff0c\u5e76\u5728\u4f1a\u8bdd\u548c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u4e4b\u4e0a\u6784\u5efa\u51e0\u4e2a\u7ade\u4e89\u6a21\u578b\uff0c\u5e76\u5c55\u793a\u5b9e\u9a8c\u7ed3\u679c\u3002 \u7b2c\u4e03\u7ae0 \u603b\u7ed3 \u672c\u6587\u8d21\u732e \u7b2c\u4e00\u6279\u7814\u7a76\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u4eba\u3002\u7279\u522b\u662f\uff0c\u6211\u4eec\u63d0\u51fa\u4e86 STANFORD ATTENTIVE READER \u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5728\u5404\u79cd\u73b0\u4ee3\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u4e2d\u8868\u73b0\u51fa\u4f18\u8d8a\u7684\u6027\u80fd \u6211\u4eec\u52aa\u529b\u66f4\u597d\u5730\u7406\u89e3\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5b9e\u9645\u5b66\u5230\u4e86\u4ec0\u4e48\uff0c\u4ee5\u53ca\u89e3\u51b3\u5f53\u524d\u4efb\u52a1\u9700\u8981\u591a\u5927\u7684\u8bed\u8a00\u7406\u89e3\u6df1\u5ea6\u3002\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u76f8\u6bd4\uff0c\u795e\u7ecf\u6a21\u578b\u66f4\u597d\u5730\u5b66\u4e60\u8bcd\u6c47\u5339\u914d\u548c\u91ca\u4e49\uff0c\u800c\u73b0\u6709\u7cfb\u7edf\u7684\u63a8\u7406\u80fd\u529b\u4ecd\u7136\u76f8\u5f53\u6709\u9650\u3002 \u6211\u4eec\u5f00\u521b\u4e86\u5c06\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u5f00\u653e\u57df\u95ee\u7b54\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u7684\u7814\u7a76\u65b9\u5411\uff0c\u5e76\u7814\u7a76\u4e86\u5982\u4f55\u63a8\u5e7f\u8be5\u6848\u4f8b\u7684\u6a21\u578b\u3002\u7279\u522b\u662f\uff0c\u6211\u4eec\u5728 DRQA \u7cfb\u7edf\u4e2d\u5b9e\u73b0\u4e86\u8fd9\u4e00\u60f3\u6cd5\uff0c DRQA \u7cfb\u7edf\u662f\u57fa\u4e8e\u82f1\u8bed\u7ef4\u57fa\u767e\u79d1\u7684\u4e00\u4e2a\u5927\u578b\uff0c\u4eff\u771f\u95ee\u7b54\u7cfb\u7edf\u3002 \u6700\u540e\uff0c\u6211\u4eec\u7740\u624b\u89e3\u51b3\u4f1a\u8bdd\u95ee\u9898\u56de\u7b54\u95ee\u9898\uff0c\u5176\u4e2d\u8ba1\u7b97\u673a\u7cfb\u7edf\u9700\u8981\u5728\u5bf9\u8bdd\u73af\u5883\u4e2d\u56de\u7b54\u7406\u89e3\u95ee\u9898\uff0c\u56e0\u6b64\u6bcf\u4e2a\u95ee\u9898\u90fd\u9700\u8981\u901a\u8fc7\u5176\u5bf9\u8bdd\u5386\u53f2\u6765\u7406\u89e3\u3002\u4e3a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u63d0\u51fa\u4e86 COQA \u6311\u6218\uff0c\u5e76\u5efa\u7acb\u4e86\u9002\u5e94\u8fd9\u4e00\u95ee\u9898\u7684\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u3002\u6211\u4eec\u76f8\u4fe1\u8fd9\u662f\u6784\u5efa\u5bf9\u8bddQA\u4ee3\u7406\u7684\u7b2c\u4e00\u6b65\uff0c\u4e5f\u662f\u91cd\u8981\u7684\u4e00\u6b65\u3002","title":"Chapter 1 Introduction"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#neural-reading-comprehensionfoundations","text":"","title":"Neural Reading Comprehension:Foundations"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#chapter-2-an-overview-of-reading-comprehension","text":"","title":"Chapter 2 An Overview of Reading Comprehension"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#21-history","text":"\u5148\u5bf9\u65e9\u671f\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u53d1\u5c55\u8fdb\u884c\u4ecb\u7ecd\uff0c\u5f53\u65f6\u7531\u4e8e\u6570\u636e\u96c6\u4ee5\u53ca\u6a21\u578b\u4e24\u65b9\u9762\u7684\u539f\u56e0\uff0c\u9605\u8bfb\u7406\u89e3\u88ab\u89c6\u4e3a\u4e00\u9879\u592a\u96be\u7684\u4efb\u52a1\uff0c\u6ca1\u80fd\u5f97\u5230\u7a81\u7834\u6027\u7684\u8fdb\u5c55\u3002 2013\u5e74\u52302015\u5e74\u95f4\uff0c\u5c06\u9605\u8bfb\u7406\u89e3\u4f5c\u4e3a\u4e00\u79cd\u76d1\u7763\u5b66\u4e60\u95ee\u9898\uff0c\u8bd5\u56fe\u901a\u8fc7 (passage, question, answer) \u7684\u4e09\u5143\u7ec4\u8bad\u7ec3\u51fa\u80fd\u591f\u5b9e\u73b0 \\(f:(passage, question \\to answer)\\) \u7684\u7edf\u8ba1\u5b66\u6a21\u578b \u4e24\u4e2a\u91cd\u8981\u7684\u6570\u636e\u96c6 MCTEST \u6536\u96c6\u4e86660\u4e2a\u865a\u6784\u6545\u4e8b\uff0c\u6bcf\u4e2a\u6545\u4e8b\u67094\u4e2a\u9009\u62e9\u9898\uff08\u6bcf\u4e2a\u95ee\u9898\u9644\u5e264\u4e2a\u5047\u8bbe\u7b54\u6848\uff0c\u5176\u4e2d\u4e00\u4e2a\u662f\u6b63\u786e\u7684\uff09 PROCESSBANK \u65e8\u5728\u56de\u7b54\u63cf\u8ff0\u751f\u7269\u8fc7\u7a0b\u7684\u6bb5\u843d\u4e2d\u7684\u4e8c\u5143\u9009\u62e9\u95ee\u9898\uff0c\u5e76\u4e14\u9700\u8981\u4e86\u89e3\u8fc7\u7a0b\u4e2d\u5b9e\u4f53\u548c\u4e8b\u4ef6\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8be5\u6570\u636e\u96c6\u5305\u62ec\u5206\u5e03\u5728200\u4e2a\u6bb5\u843d\u4e2d\u7684585\u4e2a\u95ee\u9898\u3002 \u5728\u6700\u521d\u7684 MCTEST \u8bba\u6587\u4e2d\uff0cRichardson\u7b49\u4eba\u63d0\u51fa\u4e86\u51e0\u4e2a\u57fa\u4e8e\u89c4\u5219\u7684\u57fa\u7ebf\uff0c\u800c\u6ca1\u6709\u5229\u7528\u4efb\u4f55\u8bad\u7ec3\u6570\u636e\u3002\u4e00\u79cd\u662f\u542f\u53d1\u5f0f\u6ed1\u52a8\u7a97\u53e3\u65b9\u6cd5\uff0c\u5176\u6d4b\u91cf\u95ee\u9898\u4e2d\u7684\u5355\u8bcd\uff0c\u7b54\u6848\u548c\u6ed1\u52a8\u7a97\u53e3\u4e4b\u95f4\u7684\u52a0\u6743\u5355\u8bcd\u91cd\u53e0/\u8ddd\u79bb\u4fe1\u606f; \u53e6\u4e00\u79cd\u662f\u901a\u8fc7\u5c06\u6bcf\u4e2a\u95ee\u7b54\u914d\u5bf9\u8f6c\u6362\u6210\u58f0\u660e\u6765\u8fd0\u884c\u73b0\u6210\u7684\u6587\u672c\u8574\u6db5\u7cfb\u7edf\u3002\u8be5\u6570\u636e\u96c6\u540e\u6765\u542f\u53d1\u4e86\u4e00\u7cfb\u5217\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e9b\u6a21\u578b\u4e3b\u8981\u5efa\u7acb\u5728\u4e00\u4e2a\u7b80\u5355\u7684\u6700\u5927\u8fb9\u7f18\u5b66\u4e60\u6846\u67b6\u4e4b\u4e0a\uff0c\u8be5\u6846\u67b6\u5177\u6709\u4e30\u5bcc\u7684\u624b\u5de5\u8bbe\u8ba1\u8bed\u8a00\u7279\u5f81\uff0c\u5305\u62ec\u53e5\u6cd5\u4f9d\u8d56\u6027\uff0c\u8bed\u4e49\u6846\u67b6\uff0c\u5171\u6307\u89e3\u6790\uff0c\u8bed\u7bc7\u5173\u7cfb\u548c\u5355\u8bcd\u5d4c\u5165\u3002MC500\u90e8\u5206\u7684\u6027\u80fd\u4ece63\uff05\u9002\u5ea6\u63d0\u9ad8\u523070\uff05\u5de6\u53f3\u3002 \u5728 PROCESSBANK \u6570\u636e\u96c6\u4e2d\uff0cBerant\u7b49\u4eba\u63d0\u51fa\u4e86\u4e00\u79cd\u7edf\u8ba1\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u9996\u5148\u5b66\u4e60\u9884\u6d4b\u8fc7\u7a0b\u7ed3\u6784\uff0c\u7136\u540e\u5c06\u95ee\u9898\u6620\u5c04\u5230\u53ef\u4ee5\u9488\u5bf9\u7ed3\u6784\u6267\u884c\u7684\u5f62\u5f0f\u67e5\u8be2\u3002\u540c\u6837\uff0c\u8be5\u6a21\u578b\u5305\u542b\u5927\u91cf\u624b\u5de5\u7279\u5f81\uff0c\u6700\u7ec8\u5728\u4e8c\u5206\u7c7b\u4efb\u52a1\u4e2d\u83b7\u5f9766.7\uff05\u7684\u51c6\u786e\u6027\u3002\u4e0e\u65e9\u671f\u57fa\u4e8e\u89c4\u5219\u7684\u542f\u53d1\u5f0f\u65b9\u6cd5\u76f8\u6bd4\uff0c\u8fd9\u4e9b\u673a\u5668\u5b66\u4e60\u6a21\u578b\u53d6\u5f97\u4e86\u9002\u5ea6\u7684\u8fdb\u6b65\u3002\u4f46\u662f\uff0c\u4ed6\u4eec\u7684\u6539\u8fdb\u4ecd\u7136\u76f8\u5f53\u6709\u9650\uff0c\u4ed6\u4eec\u7684\u5f31\u70b9\u603b\u7ed3\u5982\u4e0b\uff1a \u9ad8\u5ea6\u4f9d\u8d56\u5df2\u6709\u7684\u8bed\u8a00\u5de5\u5177\uff0c\u96be\u4ee5\u6784\u9020\u6709\u6548\u7684\u7279\u5f81\uff0c\u6570\u636e\u96c6\u89c4\u6a21\u4e0d\u591f\u5927 \u7a81\u7834\u6027\u7684\u8fdb\u5c55\u53d1\u751f\u57282015\u5e74\uff0cHermann\u63d0\u51fa\u4e86\u4e00\u4e2a\u5ec9\u4ef7\u7684\u7528\u4e8e\u521b\u5efa\u5927\u89c4\u6a21\u76d1\u7763\u5b66\u4e60\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u65b9\u6cd5\uff0c\u6784\u5efa\u4e86 CNN/daily mail \u6570\u636e\u96c6\uff0c\u5e76\u63d0\u51fa\u4e86\u4e00\u4e2a\u5305\u542b\u6ce8\u610f\u529b\u673a\u5236\u7684 LSTM \u6a21\u578b\uff0c attentive reader CNN/daily mail \u9644\u6709\u4e00\u4e9b\u8981\u70b9\uff0c\u603b\u7ed3\u4e86\u6587\u7ae0\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u7684\u5404\u4e2a\u65b9\u9762\u3002\u4ed6\u4eec\u5c06\u65b0\u95fb\u6587\u7ae0\u4f5c\u4e3a\u6bb5\u843d\uff0c\u5e76\u5c06\u5176\u4e2d\u4e00\u4e2a\u5173\u952e\u70b9\u8f6c\u6362\u4e3a\u5b8c\u5f62\u586b\u7a7a\u6837\u5f0f\u95ee\u9898\uff0c\u901a\u8fc7\u7528\u5360\u4f4d\u7b26\u66ff\u6362\u4e00\u4e2a\u5b9e\u4f53\uff0c\u7b54\u6848\u5c31\u662f\u8fd9\u4e2a\u88ab\u66ff\u6362\u7684\u5b9e\u4f53\u3002\u4e3a\u4e86\u786e\u4fdd\u63a5\u8fd1\u8be5\u4efb\u52a1\u7684\u7cfb\u7edf\u9700\u8981\u771f\u6b63\u7406\u89e3\u8be5\u6bb5\u843d\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u4e16\u754c\u77e5\u8bc6\u6216\u8bed\u8a00\u6a21\u578b\u6765\u56de\u7b54\u95ee\u9898\uff0c\u4ed6\u4eec\u8fd0\u884c\u5b9e\u4f53\u8bc6\u522b\u548c\u5171\u6307\u6d88\u89e3\u89e3\u51b3\u7cfb\u7edf\uff0c\u5e76\u7528\u62bd\u8c61\u66ff\u6362\u6bcf\u4e2a\u5171\u540c\u53c2\u8003\u94fe\u4e2d\u7684\u6240\u6709\u5b9e\u4f53\u3002\u7ed3\u679c\uff0c\u51e0\u4e4e\u514d\u8d39\u6536\u96c6\u4e86\u8fd1100\u4e07\u4e2a\u6570\u636e\u793a\u4f8b\u3002\u800c\u6211\u4eec\u57282016\u5e74\u63d0\u51fa\u4e86\u53e6\u5916\u4e00\u4e2a\u57fa\u4e8e\u7b80\u5355\u7684\u795e\u7ecf\u7f51\u7edc\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578b(3.2\u8282)\uff0c\u8fbe\u5230\u4e86\u8fd9\u4e00\u6570\u636e\u7684\u6700\u4f73\u6548\u679c\u3002 \u7136\u800c\uff0c\u867d\u7136\u8fd9\u4e2a\u534a\u5408\u6210\u6570\u636e\u96c6\u4e3a\u57f9\u8bad\u6709\u6548\u7684\u7edf\u8ba1\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u6709\u524d\u666f\u7684\u9014\u5f84\uff0c\u4f46\u7531\u4e8e\u6570\u636e\u521b\u5efa\u65b9\u6cd5\uff0c\u6570\u636e\u96c6\u7684\u6784\u5efa\u5b58\u5728\u566a\u97f3\uff0c\u4e14\u6709\u5171\u6307\u9519\u8bef\u7684\u73b0\u8c61\uff0c\u9650\u5236\u4e86\u9605\u8bfb\u7406\u89e3\u7684\u8fdb\u4e00\u6b65\u53d1\u5c55\u3002 \u4e8e\u662f\uff0c2016\u5e74\u65b0\u6570\u636e\u96c6 SQuAD \u7684\u51fa\u73b0\u5e26\u52a8\u4e86\u4e00\u5927\u6ce2\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u4ea7\u751f \u8be5\u6570\u636e\u96c6\u5728536\u7bc7\u7ef4\u57fa\u767e\u79d1\u6587\u7ae0\u4e2d\u5305\u542b107,785\u4e2a\u95ee\u7b54\u914d\u5bf9\uff0c\u95ee\u9898\u7531\u4f17\u7b79\u5de5\u4f5c\u8005\u63d0\u51fa\uff0c\u6bcf\u4e2a\u95ee\u9898\u7684\u7b54\u6848\u90fd\u662f\u6765\u81ea\u76f8\u5e94\u9605\u8bfb\u6bb5\u843d\u7684\u6587\u672c\u8303\u56f4, SQuAD \u662f\u7b2c\u4e00\u4e2a\u5177\u6709\u81ea\u7136\u95ee\u9898\u7684\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u3002\u7531\u4e8e\u5176\u9ad8\u8d28\u91cf\u548c\u53ef\u9760\u7684\u81ea\u52a8\u8bc4\u4f30\uff0c\u8be5\u6570\u636e\u96c6\u6fc0\u53d1\u4e86\u5bf9NLP\u793e\u533a\u7684\u5de8\u5927\u5174\u8da3\uff0c\u5e76\u6210\u4e3a\u8be5\u9886\u57df\u7684\u6838\u5fc3\u57fa\u51c6\u3002 \u622a\u81f32018\u5e7410\u6708, \u5df2\u8d85\u8fc7\u4eba\u7c7b\u4f30\u8ba1\u768491.2\uff05( F1 Score )\uff0c\u800c\u539f\u4f5c\u8005(2016)\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u8fdb51.0%\u3002 SQUAD \u4e0a\u76ee\u524d\u6240\u6709\u6700\u4f73\u6027\u80fd\u7cfb\u7edf\u90fd\u5efa\u7acb\u5728\u7aef\u5230\u7aef\u795e\u7ecf\u7f51\u7edc\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u4e0a\u3002\u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u4ece\u8868\u793a\u6bb5\u843d\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u548c\u95ee\u9898\u4f5c\u4e3a\u5bc6\u96c6\u5411\u91cf\uff08\u4f8b\u5982\uff0c300\u7ef4\uff09\uff0c\u901a\u8fc7\u51e0\u4e2a\u5efa\u6a21\u6216\u4ea4\u4e92\u5c42\uff0c\u6700\u540e\u8fdb\u884c\u9884\u6d4b\u3002\u53ef\u4ee5\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u6216\u5176\u53d8\u4f53\u5171\u540c\u4f18\u5316\u6240\u6709\u53c2\u6570\u3002\u8fd9\u7c7b\u6a21\u578b\u53ef\u4ee5\u79f0\u4e3a\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\uff0c\u6211\u4eec\u5c06\u5728\u7b2c3\u7ae0\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u3002\u4e0d\u540c\u4e8e\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\uff0c\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u6709\u51e0\u4e2a\u5f88\u5927\u7684\u4f18\u70b9\uff1a \u5b83\u4eec\u4e0d\u4f9d\u8d56\u4e8e\u4efb\u4f55\u4e0b\u6e38\u8bed\u8a00\u7279\u5f81 \uff08\u4f8b\u5982\uff0c\u4f9d\u5b58\u53e5\u6cd5\u5206\u6790\u6216\u5171\u6307\u6d88\u89e3\uff09\u5e76\u4e14\u6240\u6709\u7279\u5f81\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u7aef\u5230\u7aef\u6846\u67b6\u4e2d\u81ea\u5df1\u5b66\u4e60\u3002\u8fd9\u53ef\u4ee5\u907f\u514d\u8bed\u8a00\u6ce8\u91ca\u4e2d\u7684\u566a\u58f0\uff0c\u540c\u65f6\u8fd8\u5728\u6709\u7528\u7279\u5f81\u7684\u7a7a\u95f4\u4e2d\u63d0\u4f9b\u6781\u5927\u7684\u7075\u6d3b\u6027\u3002 \u4f20\u7edf\u7684\u7b26\u53f7NLP\u7cfb\u7edf\u5b58\u5728\u4e00\u4e2a\u4e25\u91cd\u95ee\u9898\uff1a \u7279\u5f81\u901a\u5e38\u975e\u5e38\u7a00\u758f\u5e76\u4e14\u6982\u62ec\u6027\u5dee \u3002 \u4f8b\u5982\uff0c\u56de\u7b54\u4e00\u4e2a\u95ee\u9898\u201cHow many individual libraries make up the main school library?\u201d \u6587\u7ae0\uff1a\u201c...... Harvard Library, which is the world\u2019s largest academic and private library system, comprising 79 individual libraries with over 18 million volumes.\u201d \u7cfb\u7edf\u5fc5\u987b\u6839\u636e\u6307\u6807\u7279\u6027\u6765\u5b66\u4e60comprising \u548cmake up\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb(pw: passage word; qw: question word).\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u6b63\u786e\u5730\u5bf9\u8fd9\u4e9b\u7279\u6027\u8fdb\u884c\u52a0\u6743\u3002\u8fd9\u662f\u6240\u6709\u975e\u795e\u7ecfNLP\u6a21\u578b\u4e2d\u666e\u904d\u5b58\u5728\u7684\u95ee\u9898\u3002\u5229\u7528\u4f4e\u7ef4\u3001\u5bc6\u96c6\u7684\u8bcd\u5d4c\u5165\uff0c\u901a\u8fc7\u5171\u4eab\u76f8\u4f3c\u8bcd\u4e4b\u95f4\u7684\u7edf\u8ba1\u5f3a\u5ea6\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u7f13\u89e3\u7a00\u758f\u6027\u3002 \\[ \\mathrm{pw}_{i}=\\text { comprising } \\wedge \\mathrm{qw}_{j}=\\text { make } \\wedge \\mathrm{qw}_{j+1}=\\mathrm{up} \\] \u4ed6\u4eec\u4ece\u6784\u5efa\u4e00\u7cfb\u5217\u624b\u5de5\u7279\u5f81\u7684\u5de5\u4f5c\u4e2d\u89e3\u8131\u51fa\u6765\u3002\u56e0\u6b64\uff0c\u795e\u7ecf\u6a21\u578b\u5728\u6982\u5ff5\u4e0a\u66f4\u7b80\u5355\uff0c\u7126\u70b9\u53ef\u4ee5\u8f6c\u79fb\u5230\u795e\u7ecf\u67b6\u6784\u7684\u8bbe\u8ba1\u4e0a\u3002\u7531\u4e8e TensorFlow \u548c PyTorch \u7b49\u73b0\u4ee3\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u7684\u53d1\u5c55\uff0c\u5df2\u7ecf\u53d6\u5f97\u4e86\u5f88\u5927\u8fdb\u5c55\uff0c\u73b0\u5728\u5f00\u53d1\u65b0\u6a21\u578b\u7684\u8fc7\u7a0b\u975e\u5e38\u5feb\u6377\u3002 \u867d\u7136\u8fbe\u5230\u4eba\u7c7b\u6c34\u5e73\u7684performance\u5f88\u4ee4\u4eba\u632f\u594b\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u7b49\u4e8e\u89e3\u51b3\u4e86MRC\u95ee\u9898\uff0c\u5e76\u4e14 SQUAD \u6570\u636e\u96c6\u4e2d\u7684\u6240\u6709\u95ee\u9898\u7684\u7b54\u6848\u90fd\u662f \u539f\u6587\u4e2d\u7684\u67d0\u4e00\u4e2a\u8bcd \uff0c\u5e76\u4e14\u5927\u90e8\u5206\u4f8b\u5b50\u90fd\u5f88\u7b80\u5355\uff0c\u5e76\u4e0d\u9700\u8981 \u7efc\u5408\u63a8\u7406 \u8fd9\u4e9b\u6a21\u578b\u90fd\u662f\u7aef\u5230\u7aef\u7684\u6df1\u5ea6\u5b66\u4e60/\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff0c\u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u81ea\u52a8\u5b66\u4e60\u7279\u5f81\uff1b\u8bcd\u5d4c\u5165\u7f13\u89e3\u53d8\u91cf\u7a00\u758f\u7684\u95ee\u9898\uff1b\u6982\u5ff5\u7b80\u5355\uff0c\u5c06\u4efb\u52a1\u8f6c\u6362\u4e3a\u6784\u5efa\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u7684\u95ee\u9898\u3002 \u8fd9\u4e4b\u540e\u53c8\u51fa\u73b0\u4e86\u5f88\u591a\u65b0\u7684\u6570\u636e\u96c6\uff0c\u4ed6\u4eec\u7684\u6765\u6e90\u548c\u6784\u9020\u65b9\u5f0f\u90fd\u5f88\u4e0d\u540c\uff0c\u4ed6\u4eec\u7684\u76ee\u6807\u662f\u5e94\u5bf9\u8bb8\u591a\u4e4b\u524d\u6ca1\u6709\u5904\u7406\u8fc7\u7684\u6311\u6218\u2014\u2014\u72ec\u7acb\u4e8e\u6bb5\u843d\u7f16\u6392\u7684\u95ee\u9898\uff0c\u9700\u8981\u591a\u4e2a\u53e5\u5b50\u751a\u81f3\u591a\u4e2a\u6587\u6863\u6765\u56de\u7b54\u7684\u95ee\u9898\uff0c\u57fa\u4e8e\u957f\u6587\u6863\u7684\u95ee\u9898\uff0c\u6bd4\u5982\u4e00\u672c\u4e66\uff0c\u6216\u8005\u4e0d\u80fd\u4ece\u6bb5\u843d\u4e2d\u56de\u7b54\u7684\u95ee\u9898\u3002\u5728\u64b0\u5199\u672c\u6587\u65f6\uff0c\u5927\u591a\u6570\u8fd9\u4e9b\u6570\u636e\u96c6\u8fd8\u6ca1\u6709\u5f97\u5230\u89e3\u51b3\uff0c\u5e76\u4e14\u5728\u6700\u5148\u8fdb\u7684\u65b9\u6cd5\u548c\u4eba\u7c7b\u7684\u6027\u80fd\u6c34\u5e73\u4e4b\u95f4\u4ecd\u7136\u5b58\u5728\u5f88\u5927\u7684\u5dee\u8ddd\u3002\u9605\u8bfb\u7406\u89e3\u5df2\u6210\u4e3a\u5f53\u4eca\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u6700\u6d3b\u8dc3\u7684\u9886\u57df\u4e4b\u4e00\uff0c\u4ecd\u6709\u8bb8\u591a\u5f85\u89e3\u51b3\u7684\u95ee\u9898\u3002\u6211\u4eec\u5c06\u57284.2\u8282\u8ba8\u8bba\u9605\u8bfb\u7684\u6700\u65b0\u53d1\u5c55","title":"2.1 History"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#22-task-definition","text":"","title":"2.2  Task Definition"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#221-problem-formulation","text":"\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\u53ef\u4ee5\u88ab\u5b9a\u4e49\u8868\u8ff0\u4e3a\u4e00\u4e2a\u76d1\u7763\u5b66\u4e60\u95ee\u9898\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u8bad\u7ec3\u6837\u672c\u7684\u96c6\u5408 \\({(p_i,q_i,a_i)}_{i=1}^n\\) \uff0c\u76ee\u6807\u662f\u5b66\u4e60\u9884\u6d4b\u51fd\u6570 \\(f\\) \uff0c\u8f93\u5165\u4e00\u7bc7\u6587\u7ae0\u7684\u6587\u672c \\(p\\) \u548c\u76f8\u5173\u7684\u95ee\u9898 \\(q\\) \uff0c\u7ed9\u51fa\u7b54\u6848 \\(a\\) \u4f5c\u4e3a\u8f93\u51fa $$ f:(p,q) \\to a $$ - \u5b9a\u4e49 \\(p=(p_1,p_2,...,p_{l_p})\\) , \\(q=(q_1,q_2,...,q_{l_q})\\) \u5728\u5f53\u524d\u7684\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u4e2d\uff0c\u901a\u5e38\u9700\u8981\u4e00\u4e2atokenization\u7684\u9884\u5904\u7406\u6b65\u9aa4 \u3002\u5176\u4e2d \\(l_p\\) \u548c \\(l_q\\) \u8868\u793a\u6587\u7ae0\u548c\u95ee\u9898\u7684\u957f\u5ea6\uff0c\u5e76\u4e14 \\(p_i ,q_i\\in V\\) \uff0c \\(V\\) \u662f\u9884\u5148\u5b9a\u4e49\u7684\u8bcd\u5178\u3002\u8fd9\u91cc\u6211\u4eec\u53ea\u8ba4\u4e3a\u6587\u7ae0 \\(p\\) \u662f\u4e00\u4e2a\u7531 \\(l_p\\) \u957f\u5ea6\u7684\u5355\u8bcd\u5e8f\u5217\u7ec4\u6210\u7684\u77ed\u6bb5\u843d\uff0c\u5c06\u5176\u6269\u5c55\u5230\u591a\u6bb5\u843d\u8bbe\u7f6e\u975e\u5e38\u7b80\u5355\uff0c\u5c06 \\(p\\) \u89c6\u4e3a\u4e00\u7ec4\u6bb5\u843d\uff0c\u6216\u8005\u5c06\u5176\u5206\u89e3\u4e3a\u66f4\u5c0f\u7684\u8bed\u8a00\u5355\u5143\uff0c\u5982\u53e5\u5b50\u3002 \u5df2\u7ecf\u6709\u4e00\u4e9b\u5c1d\u8bd5\u5c06\u6bb5\u843d\u5efa\u6a21\u4e3a\u4e00\u4e2a\u53e5\u5b50\u5e8f\u5217\uff0c\u4f46\u76ee\u524d\u6ca1\u6709\u660e\u786e\u7684\u8bc1\u636e\u8868\u660e\u5b83\u4f18\u4e8e\u5c06\u6574\u4e2a\u6bb5\u843d\u89c6\u4e3a\u4e00\u4e2a\u957f\u5e8f\u5217\u7684\u65b9\u6cd5 - \u57fa\u4e8e\u56de\u7b54\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u73b0\u6709\u7684\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u5206\u6210\u56db\u7c7b\uff1a \u5b8c\u5f62\u586b\u7a7a cloze style \u7b54\u6848\u53ef\u4ee5\u6765\u81ea\u4e8e\u9884\u5b9a\u4e49\u7684\u9009\u9879\u96c6\u5408\u6216\u8005\u662f\u5b8c\u6574\u7684\u8bcd\u6c47\u8868 \u5355\u9879\u9009\u62e9 multiple choice \u6bcf\u4e00\u4e2a\u9009\u9879\u53ef\u4ee5\u662f\u4e00\u4e2a\u5355\u8bcd\u3001\u8bcd\u7ec4\u6216\u53e5\u5b50\uff0c\u5e76\u4e14\u7b54\u6848\u5fc5\u987b\u6765\u81ea\u4e8e\u9009\u9879\u96c6\u5408\u4e2d \u8303\u56f4\u9884\u6d4b span prediction \u8fd9\u4e00\u7c7b\u522b\u4e5f\u88ab\u79f0\u4e3a\u62bd\u53d6\u95ee\u9898\u56de\u7b54\uff0c\u5e76\u4e14\u56de\u7b54\u5fc5\u987b\u662f\u6587\u7ae0\u7684\u4e00\u90e8\u5206 \u5f00\u653e\u5f0f\u56de\u7b54 free-form answer \u7b54\u6848\u53ef\u4ee5\u662f\u4efb\u4f55\u81ea\u7531\u7684\u6587\u672c\u5f62\u5f0f\uff0c\u5373\u4e00\u4e2a\u4efb\u610f\u957f\u5ea6\u7684\u5355\u8bcd\u5e8f\u5217","title":"2.2.1 Problem Formulation"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#222-evaluation","text":"\u5b8c\u5f62\u586b\u7a7a\u548c\u5355\u9879\u9009\u62e9\uff0c\u6d4b\u91cf \u51c6\u786e\u7387 \\[ Accuracy = \\frac{TP+TN}{\u603b\u6837\u672c} // \u6b63\u786e\u5206\u7c7b\u7684\u6837\u672c\u6bd4\u4f8b \\] \u8303\u56f4\u8bc4\u4f30\uff0c\u5c06\u9884\u6d4b\u7ed3\u679c\u4e0e\u7b54\u6848\u8fdb\u884c\u6bd4\u8f83\uff0c\u6d4b\u91cf\u7cbe\u786e\u5339\u914d\u548c\u90e8\u5206\u5f97\u5206 Exact match ( EM ) \u5b8c\u5168\u5339\u914d\u76841.0\u5206\uff0c\u5426\u52190.0\u5206 F1 score \u9884\u6d4b\u7ed3\u679c\u548c\u7b54\u6848\u4e4b\u95f4\u7684\u5e73\u5747\u5355\u8bcd\u91cd\u53e0 the average word overlap \u9884\u6d4b\u7ed3\u679c\u548c\u7b54\u6848\u88ab\u5904\u7406\u4e3a\u7b26\u53f7\u7ea7\u522b\uff0c\u7b26\u53f7\u7ea7\u522b\u7684 F1 score \u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a \\[ F1 = \\frac{2 * Precision * Recall}{Precision + Recall} \\] \\[ Precision = \\frac{TP}{TP+FP} // \u9884\u6d4b\u4e3a\u6b63\u7684\u6837\u672c\u7684\u6b63\u786e\u7387 \u67e5\u51c6\u7387 \\] \\[ Recall = \\frac{TP}{TP+FN} // \u6b63\u6837\u672c\u7684\u4e2d\u9884\u6d4b\u6b63\u786e\u7684\u90e8\u5206 \\] \u4f5c\u8005\u5ffd\u7565\u6240\u6709\u7684\u6807\u70b9\u7b26\u53f7\uff0c\u5728\u82f1\u8bed\u4e2d`a,an,the` \u4e5f\u88ab\u5ffd\u7565 \u4e3a\u4e86\u8ba9\u8bc4\u4f30\u66f4\u52a0\u53ef\u9760\uff0c\u6211\u4eec\u4f1a\u5bf9\u6bcf\u4e2a\u95ee\u9898\u7ed9\u51fa\u591a\u4e2a\u6807\u51c6\u7b54\u6848\uff0c\u56e0\u6b64EM\u4e2d\u53ea\u8981\u548c\u4e00\u4e2a\u6807\u51c6\u7b54\u6848\u4e00\u81f4\u5373\u53ef\uff0cF1\u5219\u662f\u8ba1\u7b97\u9884\u6d4b\u7ed3\u679c\u548c\u6240\u6709\u6807\u51c6\u7b54\u6848\u7684\u6700\u5927\u5f97\u5206 \u5f00\u653e\u5f0f\u56de\u7b54 \u8fd9\u4e00\u7c7b\u578b\u7684\u95ee\u9898\u8fd8\u6ca1\u6709\u6700\u5408\u9002\u7684\u8bc4\u4f30\u6307\u6807\uff0c\u4e00\u822c\u4f7f\u7528NLG\u4efb\u52a1\u4e2d\u4f7f\u7528\u7684\u6807\u51c6\u8bc4\u4f30\u6307\u6807\uff1a BLEU N-gram N-gram\u662f\u4e00\u79cd\u7edf\u8ba1\u8bed\u8a00\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u53ef\u4ee5\u5c06\u4e00\u53e5\u8bdd\u8868\u793an\u4e2a\u8fde\u7eed\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u5229\u7528\u4e0a\u4e0b\u6587\u4e2d\u76f8\u90bb\u8bcd\u95f4\u7684\u642d\u914d\u4fe1\u606f\uff0c\u8ba1\u7b97\u51fa\u53e5\u5b50\u7684\u6982\u7387\uff0c\u4ece\u800c\u5224\u65ad\u4e00\u53e5\u8bdd\u662f\u5426\u901a\u987a\u3002BLEU\u4e5f\u662f\u91c7\u7528\u4e86N-gram\u7684\u5339\u914d\u539f\u5219 \u539f\u6587\uff1a \u732b\u5750\u5728\u57ab\u5b50\u4e0a \u673a\u5668\u7ffb\u8bd1\uff1aThe cat sat on the mat. \u4eba\u5de5\u7ffb\u8bd1\uff1aThe cat is on the mat. 1-gram \u5339\u914d\u5ea6 5/6 2-gram \u5339\u914d\u5ea6 3/5 3-gram \u5339\u914d\u5ea6 1/4 \u4e00\u822c\u60c5\u51b5 1-gram \u53ef\u4ee5\u4ee3\u8868\u539f\u6587\u6709\u591a\u5c11\u8bcd\u88ab\u5355\u72ec\u7ffb\u8bd1\u51fa\u6765\uff0c\u53ef\u4ee5\u53cd\u6620\u8bd1\u6587\u7684**\u5145\u5206\u6027** \uff0c 2-gram \u4ee5\u4e0a\u53ef\u4ee5\u53cd\u6620\u8bd1\u6587\u7684**\u6d41\u7545\u6027** \uff0c\u5b83\u7684\u503c\u8d8a\u9ad8\u8bf4\u660e\u53ef\u8bfb\u6027\u8d8a\u597d\u3002\u8fd9\u4e24\u4e2a\u6307\u6807\u662f\u80fd\u591f\u8ddf\u4eba\u5de5\u8bc4\u4ef7\u5bf9\u6807\u7684\u3002 \u7279\u6b8a\u60c5\u51b5 \u539f\u6587\uff1a\u732b\u5750\u5728\u57ab\u5b50\u4e0a \u673a\u5668\u8bd1\u6587\uff1a the the the the the the the. \u53c2\u8003\u8bd1\u6587\uff1aThe cat is on the mat. \u8ba1\u7b97 1-gram \u7684\u8bdd\uff0c\u4f1a\u53d1\u73b0\u6240\u6709the\u90fd\u5339\u914d\u4e0a\u4e86\uff0c\u5339\u914d\u5ea6\u662f 7/7 \u4f20\u7edf\u4e0a\uff0c Precision \u4e0e Recall \u76f8\u7ed3\u5408\u4ee5\u514b\u670d\u8fd9\u79cd\u4e0e\u957f\u5ea6\u76f8\u5173\u7684\u95ee\u9898 \u4fee\u6b63\u2460 $$ Count_{clip} = min(Count, MaxRefCount ) $$ Count \u673a\u5668\u7ffb\u8bd1\u7684\u7ed3\u679c\u4e2d N-gram \u7684\u51fa\u73b0\u6b21\u6570 Max_Ref_Count \u5404\u53c2\u8003\u8bd1\u6587\u4e2d N-gram \u6700\u5927\u51fa\u73b0\u6b21\u6570 \u4e0a\u4f8b\u4e2d\u7684 7/7 \u5219\u4f1a\u88ab\u4fee\u6b63\u4e3a 2/7 \u4fee\u6b63\u2461 \u673a\u5668\u8bd1\u6587\uff1aThe cat \u53c2\u8003\u8bd1\u6587\uff1aThe cat is on the mat. \u5339\u914d\u5ea6\uff1a 2/2 \u53ea\u7ffb\u8bd1\u51fa\u4e86\u53e5\u5b50\u4e2d\u90e8\u5206\u53e5\u5b50\u4e14\u7ffb\u8bd1\u7684\u6bd4\u8f83\u51c6\u786e\uff0c\u90a3\u4e48\u5b83\u7684\u5339\u914d\u5ea6\u4f9d\u7136\u4f1a\u5f88\u9ad8\u3002 \u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u8bc4\u5206\u7684\u504f\u5411\u6027\uff0cBLEU\u5728\u6700\u540e\u7684\u8bc4\u5206\u7ed3\u679c\u4e2d\u5f15\u5165\u4e86\u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50 Brevity Penalty \\[ B P=\\left\\{\\begin{array}{ll}{1} & {\\text {if } l_{c}>l s} \\\\ {e^{1-\\frac{l_{s}}{l_{c}}}} & {\\text { if } l_{c}<=l_{s}}\\end{array}\\right. \\] lc \u673a\u5668\u7ffb\u8bd1\u7684\u8bd1\u6587\u957f\u5ea6 ls \u53c2\u8003\u7b54\u6848\u7684\u957f\u5ea6 \u5b58\u5728\u591a\u4e2a\u53c2\u8003\u7b54\u6848\u65f6\u9009\u62e9\u4e0e\u673a\u5668\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u6700\u63a5\u8fd1\u7684 \u5f53\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u5927\u4e8e\u53c2\u8003\u8bd1\u6587\u7684\u957f\u5ea6\u65f6\uff0c\u60e9\u7f5a\u7cfb\u6570\u4e3a1\uff0c\u610f\u5473\u7740\u4e0d\u60e9\u7f5a\uff0c\u53ea\u6709\u673a\u5668\u7ffb\u8bd1\u8bd1\u6587\u957f\u5ea6\u5c0f\u4e8e\u53c2\u8003\u7b54\u6848\u624d\u4f1a\u8ba1\u7b97\u60e9\u7f5a\u56e0\u5b50\u3002 \u516c\u5f0f \u7531\u4e8e\u5404N-gram\u7edf\u8ba1\u91cf\u7684\u7cbe\u5ea6\u968f\u7740\u9636\u6570\u7684\u5347\u9ad8\u800c\u5448\u6307\u6570\u5f62\u5f0f\u9012\u51cf\uff0c\u6240\u4ee5\u4e3a\u4e86\u5e73\u8861\u5404\u9636\u7edf\u8ba1\u91cf\u7684\u4f5c\u7528\uff0c\u5bf9\u5176\u91c7\u7528\u51e0\u4f55\u5e73\u5747\u5f62\u5f0f\u6c42\u5e73\u5747\u503c\u7136\u540e\u52a0\u6743\uff0c\u518d\u4e58\u4ee5\u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50\uff0c\u5f97\u5230\u6700\u540e\u7684\u8bc4\u4ef7\u516c\u5f0f\uff1a \\[ \\mathrm{BLEU}=\\mathrm{BP} \\cdot \\exp \\left(\\sum_{n=1}^{N} w_{n} \\log p_{n}\\right) \\] \\(BP\\) \u957f\u5ea6\u60e9\u7f5a\u56e0\u5b50 \\(W_n\\) BLEU \u539f\u578b\u4e2d\u4f7f\u7528\u7684\u662f\u5747\u5300\u52a0\u6743\uff0c\u5373 \\(W_n = 1/N\\) \uff0c\u5e76\u4e14N\u7684\u4e0a\u9650\u53d6\u503c\u4e3a4\uff0c\u5373\u6700\u591a\u53ea\u7edf\u8ba1 4-gram \u7684\u7cbe\u5ea6 \\(p_n\\) \u5bf9\u4e00\u53e5\u539f\u6587\u800c\u8a00\uff0c\u5c06\u5176\u6240\u6709\u673a\u5668\u7ffb\u8bd1\u7ed3\u679c\u7684\u7cbe\u5ea6\u4e2d\u7684\u5206\u5b50\u4e4b\u548c\u9664\u4ee5\u5206\u6bcd\u4e4b\u548c \\[ p_{n}=\\frac{\\sum_{C \\in\\{\\text {Candidate}\\}} \\sum_{n-gram \\in C} \\operatorname{Count}_{c l i p}(n-g r a m)}{\\sum_{C^{\\prime} \\in\\{\\text {Candidate}\\}} \\sum_{n-gram^{\\prime} \\in C^{\\prime}} \\operatorname{Count}(n-gram)} \\] \u4f18\u70b9\uff1a\u65b9\u4fbf\u3001\u5feb\u901f\uff0c\u7ed3\u679c\u6bd4\u8f83\u63a5\u8fd1\u4eba\u7c7b\u8bc4\u5206\u3002 \u7f3a\u70b9\uff1a \u4e0d\u8003\u8651\u8bed\u8a00\u8868\u8fbe\uff08\u8bed\u6cd5\uff09\u4e0a\u7684\u51c6\u786e\u6027 \u6d4b\u8bc4\u7cbe\u5ea6\u4f1a\u53d7\u5e38\u7528\u8bcd\u7684\u5e72\u6270 \u77ed\u8bd1\u53e5\u7684\u6d4b\u8bc4\u7cbe\u5ea6\u6709\u65f6\u4f1a\u8f83\u9ad8 \u6ca1\u6709\u8003\u8651\u540c\u4e49\u8bcd\u6216\u76f8\u4f3c\u8868\u8fbe\u7684\u60c5\u51b5\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5408\u7406\u7ffb\u8bd1\u88ab\u5426\u5b9a BLEU\u672c\u8eab\u5c31\u4e0d\u8ffd\u6c42\u767e\u5206\u4e4b\u767e\u7684\u51c6\u786e\u6027\uff0c\u4e5f\u4e0d\u53ef\u80fd\u505a\u5230\u767e\u5206\u4e4b\u767e\uff0c\u5b83\u7684\u76ee\u6807\u53ea\u662f\u7ed9\u51fa\u4e00\u4e2a\u5feb\u4e14\u4e0d\u5dee\u7684\u81ea\u52a8\u8bc4\u4f30\u89e3\u51b3\u65b9\u6848 BLEU\uff1a\u4e00\u79cd\u81ea\u52a8\u8bc4\u4f30\u673a\u5668\u7ffb\u8bd1\u7684\u65b9\u6cd5 \u673a\u5668\u7ffb\u8bd1\u8bc4\u6d4b\u2014\u2014BLEU\u7b97\u6cd5\u8be6\u89e3 Meteor \u57fa\u4e8e\u5355\u7cbe\u5ea6\u7684\u52a0\u6743\u8c03\u548c\u5e73\u5747\u6570\u548c\u5355\u5b57\u53ec\u56de\u7387 $$ {Pen=\\gamma\\left(\\frac{ch}{m}\\right)^{\\theta}} \\ {F_{\\text {mean}}=\\frac{P_{m} R_{m}}{\\alpha P_{m}+(1-\\alpha) R_{m}}} \\ {P_{m}=\\frac{|m|}{\\sum_{k} h_{k}\\left(c_{i}\\right)}} \\ {R_{m}=\\frac{|m|}{\\sum_{k} h_{k}\\left(s_{i, j}\\right)}} \\ {METEOR=(1-Pen) F_{mean}} $$ \u5176\u4e2d\uff0c \\(\\alpha, \\gamma, \\theta\\) \u5747\u4e3a\u7528\u4e8e\u8bc4\u4ef7\u7684\u9ed8\u8ba4\u53c2\u6570 \u9884\u5148\u5b9a\u4e49\u7684\u6821\u51c6 alignment \\(m\\) \uff0c\u800c\u8fd9\u4e00\u6821\u51c6\u57fa\u4e8e WordNet \u7684\u540c\u4e49\u8bcd\u5e93\uff0c\u901a\u8fc7\u6700\u5c0f\u5316\u5bf9\u5e94\u8bed\u53e5\u4e2d\u8fde\u7eed\u6709\u5e8f\u7684\u5757 chunks \\(ch\\) \u6765\u5f97\u51fa \u540c\u65f6\u8003\u8651\u4e86\u57fa\u4e8e\u6574\u4e2a\u8bed\u6599\u5e93\u4e0a\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747 ROUGE \u4e0e BLEU \u7c7b\u4f3c\u4e00\u79cd\u57fa\u4e8e\u53ec\u56de\u7387\u7684\u76f8\u4f3c\u6027\u5ea6\u91cf\uff0c\u5145\u5206\u8003\u5bdf\u7ffb\u8bd1\u7684\u5145\u5206\u6027\u548c\u5fe0\u5b9e\u6027\uff0c\u65e0\u6cd5\u8bc4\u4ef7\u6d41\u7545\u5ea6 ROUGE-L \u4f7f\u7528\u57fa\u4e8eLCS\u7684F-measure\u6765\u8bc4\u4ef7\u4e24\u4e2a\u53e5\u5b50X\u548cY\u7684\u76f8\u4f3c\u6027\uff0c\u5047\u8bbeX\u662f\u53c2\u8003\u8bd1\u6587\uff0cY\u662f\u5e26\u8bc4\u6d4b\u8bd1\u6587 \\[ \\begin{array}{c}{R_{lcs}=\\frac{LCS(X, Y)}{m}} \\\\ {P_{lcs}=\\frac{LCS(X, Y)}{n}} \\\\ {F_{lcs}=\\frac{\\left(1+\\beta^{2}\\right) R_{lcs} P_{lcs}}{R_{l c s}+\\beta^{2} P_{lcs}}}\\end{array} \\] \\(m,n\\) \u5206\u522b\u4ee3\u8868X\u4e0eY\u7684\u5e8f\u5217\u957f\u5ea6 \\(R_{lcs}\\) \u548c \\(P_{lcs}\\) \u5206\u522b\u5bf9\u5e94\u53ec\u56de\u7387\u548c\u51c6\u786e\u7387 \\(\\beta = \\frac{P_{lcs}}{R_{lcs}}\\) \uff0c\u5982\u679c \\(\\beta\\) \u8fc7\u5927\uff0c\u5219\u53ea\u9700\u8981\u8003\u8651 \\(R_{lcs}\\) \u603b\u7684\u6765\u8bf4\uff0c ROUGE \u6709\u4ee5\u4e0b\u53d8\u79cd Name Description ROUGE-N \u57fa\u4e8eN-gram\u5171\u73b0\u6027\u7edf\u8ba1 ROUGE-L \u57fa\u4e8e\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217\u7684\u7cbe\u51c6\u5ea6\u548c\u53ec\u56de\u7387\u7edf\u8ba1 ROUGE-W \u5e26\u6743\u91cd\u7684ROUGE-L ROUGE-S \u4e0d\u8fde\u7eed\u4e8c\u5143\u7ec4\u5171\u7ebf\u6027\u7cbe\u51c6\u5ea6\u548c\u53ec\u56de\u7387\u7edf\u8ba1","title":"2.2.2 Evaluation"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#23-reading-comprehension-vs-question-answering","text":"\u9605\u8bfb\u7406\u89e3\u53ef\u4ee5\u89c6\u4e3a\u95ee\u7b54\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4e24\u8005\u5b58\u5728\u5173\u7cfb\u4e5f\u6709\u4e00\u5b9a\u7684\u533a\u522b\u3002 \u56e0\u4e3aQA\u5f88\u53ef\u80fd\u662f\u57fa\u4e8e\u4e00\u7bc7\u77ed\u6587\u7684 \u7136\u800c\uff0c\u5c3d\u7ba1\u9605\u8bfb\u7406\u89e3\u548c\u4e00\u822c\u95ee\u9898\u56de\u7b54\u5728\u95ee\u9898\u7684\u5f62\u6210\u3001\u65b9\u6cd5\u548c\u8bc4\u4ef7\u4e0a\u6709\u8bb8\u591a\u5171\u540c\u7684\u7279\u70b9\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u5b83\u4eec\u5f3a\u8c03\u7684\u6700\u7ec8\u76ee\u6807\u662f\u4e0d\u540c\u7684 QA\u7684\u6700\u7ec8\u76ee\u6807\u662f\u5efa\u7acb\u80fd\u591f\u81ea\u52a8\u56de\u7b54\u4eba\u7c7b\u63d0\u95ee\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\uff0c\u4e0d\u7ba1\u4f9d\u8d56\u4e8e\u4f55\u79cd\u8d44\u6e90\u3002 \u53ef\u4ee5\u662f\u7ed3\u6784\u5316\u7684\u77e5\u8bc6\u5e93\uff0c\u975e\u7ed3\u6784\u5316\u7684\u6587\u672c\u96c6\u5408\uff0c\u534a\u7ed3\u6784\u5316\u8868\u751a\u81f3\u5176\u4ed6\u6a21\u5f0f\u3002\u4e3a\u4e86\u63d0\u9ad8QA\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u4eba\u4eec\u5728(1)\u5982\u4f55\u641c\u7d22\u548c\u8bc6\u522b\u76f8\u5173\u8d44\u6e90\uff0c(2)\u5982\u4f55\u96c6\u6210\u6765\u81ea\u4e0d\u540c\u4fe1\u606f\u7247\u6bb5\u7684\u7b54\u6848\uff0c\u751a\u81f3(3)\u7814\u7a76\u4eba\u7c7b\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u901a\u5e38\u4f1a\u95ee\u54ea\u4e9b\u7c7b\u578b\u7684\u95ee\u9898\u4e0a\u8fdb\u884c\u4e86\u5927\u91cf\u7684\u5de5\u4f5c \u7136\u800c\u9605\u8bfb\u7406\u89e3\u5219\u66f4\u5f3a\u8c03\u6587\u672c\u7406\u89e3\uff0c\u5e76\u56de\u7b54\u95ee\u9898\u7684\u5f62\u5f0f\u8861\u91cf\u8bed\u8a00\u7406\u89e3\u7684\u7a0b\u5ea6\uff0c\u6240\u4ee5\u56de\u7b54\u7406\u89e3\u95ee\u9898\u7684\u4fe1\u606f\u90fd\u662f\u6765\u81ea\u4e8e\u6587\u7ae0\u672c\u8eab\u800c\u4e0d\u662f\u4efb\u4f55\u4e16\u754c\u77e5\u8bc6\u3002 \u95ee\u9898\u4e5f\u901a\u5e38\u662f\u4e3a\u4e86\u6d4b\u8bd5\u4e0d\u540c\u65b9\u9762\u7684\u9605\u8bfb\u7406\u89e3\u800c\u8bbe\u8ba1\u7684\u3002\u8fd9\u79cd\u533a\u522b\u7c7b\u4f3c\u4e8e\u4eba\u4eec\u901a\u5e38\u5728\u641c\u7d22\u5f15\u64ce\u4e0a\u95ee\u4ec0\u4e48\u95ee\u9898\uff0c\u800c\u5728\u4eba\u7c7b\u9605\u8bfb\u7406\u89e3\u6d4b\u8bd5\u4e2d\u901a\u5e38\u4f1a\u63d0\u51fa\u4ec0\u4e48\u7c7b\u578b\u7684\u95ee\u9898\u3002 \u65e9\u671f\u5de5\u4f5c\u4e2d\u4f7f\u7528\u672f\u8bed micro-reading \u548c macro-reading \u5b8f\u89c2\u9605\u8bfb\u4e0e\u5fae\u89c2\u9605\u8bfb \u6765\u533a\u5206\u8fd9\u4e24\u79cd\u60c5\u51b5\u3002\u524d\u8005\u96c6\u4e2d\u5728\u9605\u8bfb\u4e00\u4e2a\u6587\u672c\u6587\u6863\uff0c\u5e76\u65e8\u5728\u63d0\u53d6\u6587\u6863\u5b8c\u6574\u7684\u4fe1\u606f\u5185\u5bb9(\u7c7b\u4f3c\u4e8e\u6211\u4eec\u7684\u9605\u8bfb\u7406\u89e3\u7684\u8bbe\u5b9a),\u800c\u540e\u8005\u9700\u8981\u5927\u578b\u6587\u672c\u96c6\u5408(Web)\u4f5c\u4e3a\u8f93\u5165,\u5e76\u63d0\u53d6\u5927\u91cf\u7684\u4e8b\u5b9e\u5728\u6587\u672c\u4e2d\u8868\u8fbe,\u800c\u4e0d\u9700\u8981\u63d0\u53d6\u6bcf\u4e00\u4e2a\u4e8b\u5b9e\u3002\u5b8f\u89c2\u9605\u8bfb\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528\u6587\u6863\u4e2d\u4fe1\u606f\u7684\u5197\u4f59\uff0c\u91cd\u70b9\u5206\u6790\u6587\u672c\u4e2d\u4e8b\u5b9e\u7684\u7b80\u5355\u63aa\u8f9e\uff0c\u800c\u5fae\u89c2\u9605\u8bfb\u5219\u9700\u8981\u6df1\u5165\u7814\u7a76\u8bed\u8a00\u7406\u89e3\u3002","title":"2.3 Reading Comprehension vs. Question Answering"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#24-datasets-and-models","text":"\u9605\u8bfb\u7406\u89e3\u9886\u57df\u7684\u6210\u529f\u4e3b\u8981\u5f52\u7ed3\u4e8e\u4e24\u70b9\uff1a large-scale reading comprehension datasets \u5927\u89c4\u6a21\u7684\u6570\u636e\u96c6 end-to-end neural reading comprehension models \u7aef\u5230\u7aef\u7684\u6df1\u5ea6\u6a21\u578b \u4ed6\u4eec\u5171\u540c\u52aa\u529b\u63a8\u8fdb\u8fd9\u4e00\u9886\u57df\u7684\u53d1\u5c55\uff0c\u5e76\u63a8\u52a8\u5efa\u7acb\u66f4\u597d\u7684\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u7684\u8fb9\u754c: \u4e00\u65b9\u9762\uff0c\u5927\u89c4\u6a21\u9605\u8bfb\u7406\u89e3\u6570\u636e\u96c6\u7684\u521b\u5efa\u4f7f\u5f97\u8bad\u7ec3\u795e\u7ecf\u6a21\u578b\u6210\u4e3a\u53ef\u80fd\uff0c\u540c\u65f6\u4e5f\u5c55\u793a\u4e86\u5b83\u4eec\u76f8\u5bf9\u4e8e\u7b26\u53f7NLP\u7cfb\u7edf\u7684\u7ade\u4e89\u529b\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u7684\u53ef\u7528\u6027\u8fdb\u4e00\u6b65\u5438\u5f15\u4e86\u6211\u4eec\u7814\u7a76\u793e\u533a\u7684\u5927\u91cf\u5173\u6ce8\uff0c\u5e76\u6fc0\u53d1\u4e86\u4e00\u7cfb\u5217\u5efa\u6a21\u521b\u65b0\u3002\u7531\u4e8e\u6240\u6709\u8fd9\u4e9b\u52aa\u529b\uff0c\u5df2\u7ecf\u53d6\u5f97\u4e86\u5de8\u5927\u7684\u8fdb\u5c55\u3002 \u53e6\u4e00\u65b9\u9762\u4e86\u89e3\u73b0\u6709\u6a21\u578b\u7684\u6027\u80fd\u6709\u52a9\u4e8e\u8fdb\u4e00\u6b65\u8ba4\u8bc6\u73b0\u6709\u6570\u636e\u96c6\u7684\u5c40\u9650\u6027\u3002\u8fd9\u4fc3\u4f7f\u6211\u4eec\u5bfb\u6c42\u66f4\u597d\u7684\u65b9\u5f0f\u6765\u6784\u5efa\u66f4\u591a\u7684\u6311\u6218 \u56fe2.2\u663e\u793a\u4e862016\u5e74\u540e\u5173\u952e\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u6700\u65b0\u5f00\u53d1\u65f6\u95f4\u8f74. \u6b63\u5982\u6240\u770b\u5230\u7684\uff0c\u5c3d\u7ba1\u53ea\u6709\u4e09\u5e74\u7684\u65f6\u95f4\uff0c\u8fd9\u4e2a\u9886\u57df\u5df2\u7ecf\u53d6\u5f97\u4e86\u60ca\u4eba\u7684\u8fdb\u5c55\u3002\u5728\u5efa\u7acb\u66f4\u597d\u7684\u6570\u636e\u96c6\u548c\u66f4\u6709\u6548\u7684\u6a21\u578b\u65b9\u9762\u7684\u521b\u65b0\u4ea4\u66ff\u51fa\u73b0\uff0c\u5e76\u5bf9\u8be5\u9886\u57df\u7684\u53d1\u5c55\u4f5c\u51fa\u4e86\u8d21\u732e\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u8ba4\u4e3a\u7ee7\u7eed\u53d1\u5c55\u8fd9\u4e24\u4e2a\u90e8\u5206\u540c\u6837\u91cd\u8981\u3002 \u5728\u4e0b\u4e00\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u4e3b\u8981\u5173\u6ce8\u5efa\u6a21\u65b9\u9762\uff0c\u4f7f\u7528\u6211\u4eec\u524d\u9762\u6240\u63cf\u8ff0\u5f97\u66f4\u5177\u6709\u4ee3\u8868\u6027\u7684\u7684\u4e24\u4e2a\u6570\u636e\u96c6: CNN/Daily MAIL \u548c SQUAD \u3002\u5728\u7b2c\u56db\u7ae0\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u66f4\u591a\u5173\u4e8e\u6570\u636e\u96c6\u548c\u6a21\u578b\u7684\u8fdb\u5c55\u548c\u672a\u6765\u7684\u5de5\u4f5c","title":"2.4 Datasets and Models"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#chapter-3-neural-reading-comprehension-models","text":"","title":"Chapter 3 Neural Reading Comprehension Models"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#31-previous-approaches-feature-based-models","text":"\u4ee5\u5f80\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u7814\u7a76\u65b9\u6cd5\u5927\u591a\u57fa\u4e8e\u7279\u5f81\u5efa\u6a21\uff0c\u4ee5\u9648\u4e39\u7426\uff082016\uff09\u7684\u5728CNN/daily mail\u4e0a\u4f7f\u7528\u7684\u65b9\u6cd5\u4e3a\u4f8b\u3002\u5b83\u7684\u4e3b\u8981\u601d\u60f3\u662f\u6784\u5efa\u4e00\u4e2a\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u63d0\u53d6\u7684\u5206\u7c7b\u5668\uff0c\u4ee5\u68c0\u6d4b\u54ea\u4e9b\u7279\u5f81\u5bf9\u4e8e\u8be5\u4efb\u52a1\u800c\u8a00\u6bd4\u8f83\u91cd\u8981\u3002 \u4e3a\u6bcf\u4e00\u4e2a\u5019\u9009\u5b9e\u4f53\u8bbe\u8ba1\u4e00\u4e2a\u7279\u5f81\u5411\u91cf \\(f_{p,q}(e)\\) \uff0c\u5b66\u4e60\u4e00\u4e2a\u6743\u91cd\u5411\u91cf \\(W_T\\) \u4f7f\u5f97\u6b63\u786e\u7b54\u6848\u7684ranking\u6bd4\u5176\u4ed6\u5019\u9009\u5b9e\u4f53\u9ad8\uff08\u5373\u8f6c\u6362\u6210\u5019\u9009\u5b9e\u4f53\u7684ranking\u95ee\u9898\uff0c\u5c06ranking\u5f97\u5206\u6700\u9ad8\u7684\u5b9e\u4f53\u4f5c\u4e3a\u4f5c\u4e3a\u7b54\u6848\uff09 $$ \\mathbf{w}^{\\top} f_{p, q}(a)>\\mathbf{w}^{\\top} f_{p, q}(e), \\forall e \\in \\mathcal{E} \\backslash a $$ \u4e3a\u6bcf\u4e00\u4e2a\u5b9e\u4f53\u6784\u5efa\u7279\u5f81\u5411\u91cf\u540e\uff0c\u4f7f\u7528\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u73b0rank\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u6784\u5efa\u6709\u7528\u7684\u7279\u5f81\u5411\u91cf\u3002 \u5982\u8868\u6240\u793a\uff0c\u8fd9\u4e9b\u7279\u5f81\u88ab\u5f88\u597d\u5730\u8bbe\u8ba1\u5e76\u63cf\u8ff0\u4e86\u5b9e\u4f53\u7684\u4fe1\u606f(\u4f8b\u5982\uff0c\u9891\u7387\u3001\u4f4d\u7f6e\u4ee5\u53ca\u5b83\u662f\u5426\u662f\u4e00\u4e2a\u95ee\u9898/\u77ed\u6587\u8bcd)\uff0c\u4ee5\u53ca\u5b83\u4eec\u5982\u4f55\u4e0e\u6587\u7ae0/\u95ee\u9898\u5bf9\u9f50(\u4f8b\u5982\uff0c\u5171\u73b0\u3001\u8ddd\u79bb\u3001\u7ebf\u6027\u548c\u8bed\u6cd5\u5339\u914d)\u3002\u4e00\u4e9b\u7279\u6027(#6\u548c #8 )\u4e5f\u4f9d\u8d56\u4e8e\u8bed\u8a00\u5de5\u5177\uff0c\u6bd4\u5982\u4f9d\u8d56\u5173\u7cfb\u89e3\u6790\u548c\u8bcd\u6027\u6807\u8bb0(\u51b3\u5b9a\u4e00\u4e2a\u5355\u8bcd\u662f\u5426\u662f\u52a8\u8bcd)\u3002 \u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8e\u975e\u795e\u7ecf\u6a21\u578b\uff0c\u5982\u4f55\u6784\u9020\u4e00\u7ec4\u6709\u7528\u7684\u7279\u5f81\u59cb\u7ec8\u662f\u4e00\u4e2a\u6311\u6218\u3002\u6709\u7528\u7684\u7279\u6027\u5fc5\u987b\u662f\u975e\u6b63\u5f0f\u7684\uff0c\u5e76\u4e14\u80fd\u591f\u5f88\u597d\u5730\u9002\u5e94\u7279\u5b9a\u7684\u4efb\u52a1\uff0c\u540c\u65f6\u53c8\u4e0d\u80fd \u8fc7\u4e8e\u7a00\u758f \u800c\u4e0d\u80fd\u5f88\u597d\u5730\u4ece\u8bad\u7ec3\u96c6\u4e2d\u6982\u62ec\u51fa\u6765\u3002\u6211\u4eec\u5728\u4e4b\u524d\u76842.1.2\u8282\u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7\uff0c\u8fd9\u5728\u5927\u591a\u6570\u57fa\u4e8e\u7279\u6027\u7684\u6a21\u578b\u4e2d\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u3002\u6b64\u5916\uff0c\u4f7f\u7528\u73b0\u6210\u7684\u8bed\u8a00\u5de5\u5177\u4f7f\u6a21\u578b\u66f4\u52a0\u6602\u8d35\uff0c\u5b83\u4eec\u7684\u6700\u7ec8\u6027\u80fd\u53d6\u51b3\u4e8e\u8fd9\u4e9b\u6ce8\u91ca\u7684\u51c6\u786e\u6027\u3002 \u5176\u4ed6\u6784\u5efa\u57fa\u4e8e\u7279\u5f81\u7684\u6a21\u578b\u5728\u672c\u8d28\u4e0a\u4e0e\u6211\u4eec\u7684\u76f8\u4f3c\uff08\u5bf9\u4e8e\u8fd9\u4e9b\u8de8\u5ea6\u9884\u6d4b\u4efb\u52a1\uff0c\u5b83\u4eec\u9700\u8981\u9996\u5148\u786e\u5b9a\u4e00\u7ec4\u53ef\u80fd\u7684\u7b54\u6848\uff09","title":"3.1 Previous Approaches: Feature-based Models"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#32-a-neural-approach-the-stanford-attentive-reader","text":"","title":"3.2 A Neural Approach: The Stanford Attentive Reader"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#321-preliminaries","text":"","title":"3.2.1 Preliminaries"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#word-embeddings","text":"\u7b2c\u4e00\u4e2a\u5173\u952e\u7684idea\u5c31\u662f\u5c06\u5355\u8bcd\u8868\u793a\u4e3a\u4f4e\u7ef4\u7684\u3001\u771f\u5b9e\u6570\u503c\u7684\u5411\u91cf\u3002\u4ee5\u5f80\u7684One-hot \u5411\u91cf\u7684\u6700\u5927\u7684\u95ee\u9898\u662f\u4ed6\u4eec\u5728\u5355\u8bcd\u4e4b\u95f4\u6ca1\u6709\u4efb\u4f55\u8bed\u4e49\u76f8\u4f3c\u6027\uff0c\u5373\u5bf9\u4e8e\u4efb\u610f\u4e00\u5bf9\u4e0d\u540c\u7684\u5355\u8bcd \\(a,b,cos(va,vb)=0\\) \u3002\u4f4e\u7ef4\u5355\u8bcd\u5d4c\u5165\u6709\u6548\u5730\u89e3\u51b3\u4e86\u8fd9\u4e00\u95ee\u9898\uff0c\u76f8\u4f3c\u7684\u5355\u8bcd\u53ef\u4ee5\u5728\u51e0\u4f55\u7a7a\u95f4\u4e2d\u7f16\u7801\u4e3a\u76f8\u4f3c\u7684\u5411\u91cf\uff1a \\(cos(v_{car},v_{vechicle})<cos(v_{car},v_{man})\\) \u3002\u8fd9\u4e9b\u8bcd\u7684\u5d4c\u5165\u53ef\u4ee5\u4ece\u5927\u578b\u65e0\u6807\u8bb0\u6587\u672c\u8bed\u6599\u5e93\u4e2d\u6709\u6548\u5730\u5b66\u4e60\u5230\uff0c\u8fd9\u662f\u57fa\u4e8e\u5355\u8bcd\u51fa\u73b0\u5728\u76f8\u4f3c\u7684\u4e0a\u4e0b\u6587\u4e2d\u5f80\u5f80\u5177\u6709\u76f8\u4f3c\u7684\u542b\u4e49\u8fd9\u4e00\u5047\u8bbe(\u53c8\u79f0\u5206\u5e03\u5047\u8bf4)\u3002 \u6700\u8fd1\u7684\u53ef\u4f38\u7f29\u7b97\u6cd5\u548c\u53d1\u5e03\u7684\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5d4c\u5165\u96c6\u6700\u7ec8\u666e\u53ca\u4e86\u5355\u8bcd\u5d4c\u5165\uff0c\u5982word2vec (Mikolov et al., 2013)\uff0cGlove(Pennington et al.,2014)\u548cFASTTEXT (Bojanowski et al.,2017)\u3002\u5b83\u4eec\u5df2\u6210\u4e3a\u73b0\u4ee3NLP\u7cfb\u7edf\u7684\u4e2d\u6d41\u7825\u67f1\u3002","title":"WORD EMBEDDINGS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#recurrent-neural-networks","text":"\u7b2c\u4e8c\u4e2a\u91cd\u8981\u7684\u601d\u60f3\u662f\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc(RNNs)\u6765\u5efa\u6a21NLP\u4e2d\u7684\u53e5\u5b50\u6216\u6bb5\u843d\u3002\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u662f\u4e00\u7c7b\u9002\u5408\u5904\u7406\u53d8\u957f\u5e8f\u5217\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5b83\u4eec\u9012\u5f52\u5730\u5c06\u53c2\u6570\u5316\u51fd\u6570\u5e94\u7528\u4e8e\u5e8f\u5217 \\(x_1,\u2026,x_n\\) \\[ \\mathbf{h}_{t}=f\\left(\\mathbf{h}_{t-1}, \\mathbf{x}_{t} ; \\Theta\\right) \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{h h} \\in \\mathbb{R}^{h \\times h}, \\mathbf{W}^{h x} \\in \\mathbb{R}^{h \\times d}, \\mathbf{b} \\in \\mathbb{R}^{h}\\) \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\u3002 \u53d8\u4f53LSTM\u548cGRU\u662f\u5e38\u7528\u7684\u4e24\u79cd\uff0cLSTM\u4ecd\u7136\u662f\u5f53\u4ecaNLP\u5e94\u7528\u4e2d\u6700\u6709\u7ade\u4e89\u529b\u7684RNN\u53d8\u4f53\uff0c\u4e5f\u662f\u6211\u4eec\u5c06\u63cf\u8ff0\u7684\u795e\u7ecf\u6a21\u578b\u7684\u9ed8\u8ba4\u9009\u62e9\u3002 \\[ \\begin{aligned} \\mathbf{i}_{t} &=\\sigma\\left(\\mathbf{W}^{i h} \\mathbf{h}_{t-1}+\\mathbf{W}^{i x} \\mathbf{x}_{t}+\\mathbf{b}^{i}\\right) \\\\ \\mathbf{f}_{t} &=\\sigma\\left(\\mathbf{W}^{f h} \\mathbf{h}_{t-1}+\\mathbf{W}^{f x} \\mathbf{x}_{t}+\\mathbf{b}^{f}\\right) \\\\ \\mathbf{o}_{t} &=\\sigma\\left(\\mathbf{W}^{o h} \\mathbf{h}_{t-1}+\\mathbf{W}^{o x} \\mathbf{x}_{t}+\\mathbf{b}^{o}\\right) \\\\ \\mathbf{g}_{t} &=\\tanh \\left(\\mathbf{W}^{g h} \\mathbf{h}_{t-1}+\\mathbf{W}^{g x} \\mathbf{x}_{t}+\\mathbf{b}^{g}\\right) \\\\ \\mathbf{c}_{t} &=\\mathbf{f}_{t} \\odot \\mathbf{c}_{t-1}+\\mathbf{i}_{t} \\odot \\mathbf{g}_{t} \\\\ \\mathbf{h}_{t} &=\\mathbf{o}_{t} \\odot \\tanh \\left(\\mathbf{c}_{t}\\right) \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{i h}, \\mathbf{W}^{f h}, \\mathbf{W}^{o h}, \\mathbf{W}^{g h} \\in \\mathbb{R}^{h \\times h}, \\mathbf{W}^{i x}, \\mathbf{W}^{f x}, \\mathbf{W}^{o x}, \\mathbf{W}^{g x} \\in \\mathbb{R}^{h \\times d}\\) and \\(\\mathbf{b}^{i}, \\mathbf{b}^{f}, \\mathbf{b}^{o}, \\mathbf{b}^{g} \\in \\mathbb{R}^{h}\\) \u662f\u8981\u5b66\u4e60\u7684\u53c2\u6570\u3002 \u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u6709\u7528\u7684\u7cbe\u5de7\u8bbe\u8ba1BiRNN\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u5f88\u7b80\u5355:\u5bf9\u4e8e\u4e00\u4e2a\u53e5\u5b50\u6216\u4e00\u4e2a\u6bb5\u843d\uff0c \\(x=x_1,\u2026,x_n\\) \u524d\u5411RNN\u4ece\u5de6\u5230\u53f3\uff0c\u540e\u5411RNN\u4ece\u53f3\u5230\u5de6\uff1a \\[ \\begin{aligned} \\overrightarrow{\\mathbf{h}}_{t} &=f\\left(\\overrightarrow{\\mathbf{h}}_{t-1}, \\mathbf{x}_{t} ; \\overrightarrow{\\Theta}\\right), \\quad t=1, \\ldots, n \\\\ \\overleftarrow{\\mathbf{h}}_{t} &=f\\left(\\overleftarrow{\\mathbf{h}}_{t+1}, \\mathbf{x}_{t} ; \\overleftarrow{\\Theta}\\right), \\quad t=n, \\ldots, 1 \\end{aligned} \\] \u6211\u4eec\u5b9a\u4e49 \\(\\mathbf{h}_{t}=\\left[\\overrightarrow{\\mathbf{h}}_{t} ; \\overleftarrow{\\mathbf{h}_{t}}\\right] \\in \\mathbb{R}^{2 h}\\) \uff0c\u5bf9\u6765\u81eaRNNs\u7684\u4e24\u4e2a\u65b9\u5411\u7684\u9690\u85cf\u5411\u91cf\u8fdb\u884c\u62fc\u63a5\u3002\u8fd9\u4e9b\u8868\u793a\u53ef\u4ee5\u6709\u6548\u5730\u5bf9\u6765\u81ea\u5de6\u4e0a\u4e0b\u6587\u548c\u53f3\u4e0a\u4e0b\u6587\u7684\u4fe1\u606f\u8fdb\u884c\u7f16\u7801\uff0c\u9002\u7528\u4e8e\u8bb8\u591aNLP\u4efb\u52a1\u7684\u901a\u7528\u53ef\u8bad\u7ec3\u7279\u5f81\u63d0\u53d6\u7ec4\u4ef6","title":"RECURRENT NEURAL NETWORKS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#attention-mechanism","text":"\u7b2c\u4e09\u4e2a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u662f\u6ce8\u610f\u673a\u5236\u3002\u9996\u6b21\u5f15\u5165sequence-to-sequence(seq2seq)\u6a21\u578b\u7528\u4e8e\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\uff0c\u5e76\u5df2\u6269\u5c55\u5230\u5176\u4ed6NLP\u4efb\u52a1\u3002 \u5173\u952e\u7684\u601d\u60f3\u662f\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u9884\u6d4b\u4e00\u4e2a\u53e5\u5b50\u7684\u60c5\u7eea\uff0c\u6216\u8005\u628a\u4e00\u4e2a\u53e5\u5b50\u4ece\u4e00\u79cd\u8bed\u8a00\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd\u8bed\u8a00\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u6765\u7f16\u7801\u4e00\u4e2a\u53e5\u5b50(\u6216\u8005\u673a\u5668\u7ffb\u8bd1\u7684\u6e90\u53e5): \\(h_1,h_2,\u2026,h_n\\) \uff0c\u5e76\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u65f6\u95f4\u6b65 \\(h_n\\) \u9884\u6d4b\u60c5\u611f\u6807\u7b7e\u6216\u76ee\u6807\u8bed\u8a00\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd: \\[ P(Y=y)=\\frac{\\exp \\left(\\mathbf{W}_{y} \\mathbf{h}_{n}\\right)}{\\sum_{y^{\\prime}} \\exp \\left(\\mathbf{W}_{y^{\\prime}} \\mathbf{h}_{n}\\right)} \\] \u8fd9\u5c31\u8981\u6c42\u8be5\u6a21\u578b\u80fd\u591f\u5c06\u4e00\u4e2a\u53e5\u5b50\u7684\u6240\u6709\u5fc5\u8981\u4fe1\u606f\u538b\u7f29\u6210\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u5411\u91cf\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u63d0\u9ad8\u6027\u80fd\u7684\u4fe1\u606f\u74f6\u9888\u3002\u8bbe\u8ba1\u4e86\u4e00\u79cd\u6ce8\u610f\u673a\u5236\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898:\u5b83\u4e0d\u662f\u5c06\u6240\u6709\u4fe1\u606f\u538b\u7f29\u5230\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5411\u91cf\u4e2d\uff0c\u800c\u662f\u5728\u6240\u6709\u65f6\u95f4\u6b65\u9aa4\u4e2d\u67e5\u770b\u9690\u85cf\u5411\u91cf\u5e76\u81ea\u9002\u5e94\u5730\u9009\u53d6\u8fd9\u4e9b\u5411\u91cf\u7684\u5b50\u96c6: \\[ \\begin{aligned} \\alpha_{i} &=\\frac{\\exp \\left(g\\left(\\mathbf{h}_{i}, \\mathbf{w} ; \\Theta_{g}\\right)\\right)}{\\sum_{i^{\\prime}=1}^{n} \\exp \\left(g\\left(\\mathbf{h}_{i^{\\prime}}, \\mathbf{w} ; \\Theta_{g}\\right)\\right)} \\\\ \\mathbf{c} &=\\sum_{i=1}^{n} \\alpha_{i} \\mathbf{h}_{i} \\end{aligned} \\] \u8fd9\u91ccw\u53ef\u4ee5\u662f\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u5b66\u4e60\u5230\u7684\u4efb\u52a1\u7279\u5b9a\u5411\u91cf\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u673a\u5668\u7ffb\u8bd1\u4e2d\u5f53\u524d\u76ee\u6807\u9690\u85cf\u72b6\u6001\uff0cg\u662f\u53c2\u6570\u51fd\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u70b9\u79ef\u3001\u53cc\u7ebf\u6027\u79ef\u3001\u6216MLP \\[ \\begin{aligned} g_{dot}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{h}_{i}^{\\top} \\mathbf{w} \\\\ g_{bilinear}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{h}_{i}^{\\top} \\mathbf{W} \\mathbf{w} \\\\ g_{MLP}\\left(\\mathbf{h}_{i}, \\mathbf{w}\\right) &=\\mathbf{v}^{\\top} \\tanh \\left(\\mathbf{W}^{h} \\mathbf{h}_{i}+\\mathbf{W}^{w} \\mathbf{w}\\right) \\end{aligned} \\] \u7b80\u5355\u6765\u8bf4\uff0cAttention\u673a\u5236\u4f1a\u4e3a\u6bcf\u4e00\u4e2ahihi\u8ba1\u7b97\u4e00\u4e2a\u76f8\u4f3c\u5ea6\u5206\u6570\uff0c\u7136\u540e\u4f7f\u7528softmax\u505a\u5f52\u4e00\u5316\u3002\u56e0\u6b64\u03b1\u03b1\u57fa\u672c\u4e0a\u80fd\u591f\u6355\u83b7\u53e5\u5b50\u4e2d\u7684\u90a3\u4e00\u90e8\u5206\u662f\u771f\u6b63\u76f8\u5173\u7684\uff0ccc\u5219\u7528\u52a0\u6743\u548c\u8868\u793a\u6240\u6709\u65f6\u95f4\u6b65\u957f\u7684\u603b\u548c\uff0c\u53ef\u4ee5\u7528\u4e8e\u6700\u7ec8\u9884\u6d4b\u3002 \u6ce8\u610f\u673a\u5236\u5df2\u88ab\u8bc1\u660e\u5728\u4f17\u591a\u5e94\u7528\u4e2d\u5177\u6709\u5e7f\u6cdb\u7684\u6709\u6548\u6027\uff0c\u6210\u4e3a\u795e\u7ecfNLP\u6a21\u578b\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u6700\u8fd1\uff0cParikh et al.(2016)\u548cVaswani et al.(2017)\u63a8\u6d4b\u6ce8\u610f\u673a\u5236\u4e0d\u5fc5\u4e0e\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\u7ed3\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u5b8c\u5168\u57fa\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u524d\u9988\u7f51\u7edc\u6784\u5efa\uff0c\u540c\u65f6\u63d0\u4f9b\u6700\u5c0f\u7684\u5e8f\u5217\u4fe1\u606f\u3002\u8fd9\u7c7b\u6a21\u578b\u901a\u5e38\u9700\u8981\u66f4\u5c11\u7684\u53c2\u6570\uff0c\u5e76\u4e14\u5177\u6709\u66f4\u5f3a\u7684\u5e76\u884c\u6027\u548c\u53ef\u4f38\u7f29\u6027\u2014\u2014\u7279\u522b\u662f\u5728Vaswani et al.(2017)\u4e2d\u63d0\u51fa\u7684Transformer\u6a21\u578b\u5df2\u7ecf\u6210\u4e3a\u4e00\u4e2a\u7814\u7a76\u70ed\u70b9\u3002","title":"ATTENTION MECHANISM"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#322-the-model","text":"THE STANFORD ATTENTIVE READER \u662f\u53d7\u5230\u4e86 ATTENTIVE READER \u548c\u5176\u4ed6\u5e76\u884c\u5de5\u4f5c\u7684\u542f\u53d1\uff0c\u76ee\u6807\u662f\u662f\u6a21\u578b\u53d8\u5f97\u7b80\u5355\u800c\u5f3a\u5927\u3002\u6211\u4eec\u9996\u5148\u63cf\u8ff0\u4e86Chen\u7b49\u4eba(2017)\u4ecb\u7ecd\u7684\u8de8\u5ea6\u9884\u6d4b\u95ee\u9898\u7684\u5b8c\u6574\u5f62\u5f0f\uff0c\u7136\u540e\u8ba8\u8bba\u4e86\u5b83\u7684\u5176\u4ed6\u53d8\u4f53\u3002 \u5bf9\u4e8e\u57fa\u4e8e\u8303\u56f4\u7684\u95ee\u9898\u800c\u8a00\uff0c\u7ed9\u5b9a\u4e00\u7bc7\u6587\u7ae0 \\(p\\) \u7531 \\(l_p\\) \u4e2atokens \\((p_1,p_2,...,p_{l_p})\\) \u6784\u6210\u548c\u4e00\u4e2a\u95ee\u9898 \\(q\\) \u7531 \\(l_q\\) \u4e2atokens \\((q_1,q_2,...,q_{l_q})\\) \u6784\u6210\uff0c\u76ee\u6807\u662f\u4e3a\u4e86\u9884\u6d4b\u4e00\u4e2a\u8303\u56f4 \\(a_{start},a_{end}\\) \uff0c\u662f\u95ee\u9898\u7684\u7b54\u6848\u3002 \u4e0a\u56fe\u662f\u6a21\u578b\u7684\u6574\u4f53\u7ed3\u6784\u56fe\u3002\u8be5\u6a21\u578b\u9996\u5148\u4e3a\u95ee\u9898\u6784\u5efa\u4e00\u4e2a\u5411\u91cf\u8868\u793a\uff0c\u5e76\u4e14\u4e3a\u6587\u4e2d\u7684\u6bcf\u4e00\u4e2atoken\u6784\u5efa\u5411\u91cf\u8868\u793a\uff0c\u7136\u540e\u8ba1\u7b97\u4e0a\u4e0b\u6587\u4e2d\u95ee\u9898\u53ca\u5176\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\u51fd\u6570\uff0c\u7136\u540e\u4f7f\u7528\u95ee\u9898-\u5355\u8bcd\u76f8\u4f3c\u5ea6\u8bc4\u5206\u6765\u51b3\u5b9a\u7b54\u6848\u8de8\u5ea6\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002\u8be5\u6a21\u578b\u5efa\u7acb\u5728\u6587\u7ae0\u548c\u95ee\u9898\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u4f4e\u7ef4\u3001\u9884\u5148\u8bad\u7ec3\u7684\u5355\u8bcd\u5d4c\u5165\u7684\u57fa\u7840\u4e0a(\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u8bed\u8a00\u6ce8\u91ca)\u3002\u5bf9\u6587\u7ae0/\u95ee\u9898\u7f16\u7801\u7684\u6240\u6709\u53c2\u6570\u548c\u76f8\u4f3c\u5ea6\u51fd\u6570\u8fdb\u884c\u8054\u5408\u4f18\u5316\uff0c\u5b9e\u73b0\u6700\u7ec8\u7684\u7b54\u6848\u9884\u6d4b\u3002\u8ba9\u6211\u4eec\u8fdb\u4e00\u6b65\u4e86\u89e3\u6bcf\u4e2a\u7ec4\u4ef6\u7684\u7ec6\u8282:","title":"3.2.2 The Model"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#question-encoding","text":"\u95ee\u9898\u7f16\u7801\u76f8\u5bf9\u7b80\u5355:\u9996\u5148\u5c06\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcdqiqi\u6620\u5c04\u5230\u5176\u5d4c\u5165\u7684\u5355\u8bcd \\(\\mathbf{E}\\left(q_{i}\\right) \\in \\mathbb{R}^{d}\\) \u4e2d\uff0c\u7136\u540e\u5728\u5176\u4e0a\u5e94\u7528\u53cc\u5411LSTM\uff0c\u6700\u7ec8\u5f97\u5230 \\[ \\mathbf{q}_{1}, \\mathbf{q}_{2}, \\ldots, \\mathbf{q}_{l_{q}}=\\operatorname{BiLSTM}\\left(\\mathbf{E}\\left(q_{1}\\right), \\mathbf{E}\\left(q_{2}\\right), \\ldots, \\mathbf{E}\\left(q_{l_{q}}\\right) ; \\Theta^{(q)}\\right) \\in \\mathbb{R}^{h} \\] \u7136\u540e\u6211\u4eec\u5c06\u8fd9\u4e9b\u9690\u85cf\u7684\u5355\u4f4d\u901a\u8fc7\u4e00\u4e2a\u6ce8\u610f\u529b\u5c42\u805a\u5408\u6210\u4e00\u4e2a\u5411\u91cf \\[ \\begin{aligned} b_{j} &=\\frac{\\exp \\left(\\mathbf{w}^{q \\top} \\mathbf{q}_{j}\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\mathbf{w}^{q \\top} \\mathbf{q}_{j^{\\prime}}\\right)} \\\\ \\mathbf{q} &=\\sum_{j} b_{j} \\mathbf{q}_{j} \\end{aligned} \\] \\(b_j\\) \u5ea6\u91cf\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcd\u7684\u91cd\u8981\u6027\uff0c \\(w_q\u2208R_h\\) \u662f\u4e00\u4e2a\u9700\u8981\u5b66\u4e60\u7684\u6743\u5411\u91cf\u3002\u56e0\u6b64\uff0c \\(q\u2208R_h\\) \u662f\u95ee\u9898\u7684\u6700\u7ec8\u5411\u91cf\u8868\u793a\u3002\u5b9e\u9645\u4e0a\uff0c\u5c06 \\(q\\) \u8868\u793a\u4e3aLSTMs\u5728\u4e24\u4e2a\u65b9\u5411\u4e0a\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u5411\u91cf\u7684\u8fde\u63a5\u66f4\u7b80\u5355(\u4e5f\u66f4\u5e38\u89c1)\u3002\u7136\u800c\uff0c\u57fa\u4e8e\u7ecf\u9a8c\u7684\u8868\u73b0\uff0c\u6211\u4eec\u53d1\u73b0\u6dfb\u52a0\u8fd9\u4e2a\u6ce8\u610f\u5c42\u6709\u52a9\u4e8e\u4e00\u81f4\u6027\uff0c\u56e0\u4e3a\u5b83\u4e3a\u66f4\u76f8\u5173\u7684\u95ee\u9898\u8bcd\u589e\u52a0\u4e86\u66f4\u591a\u7684\u6743\u91cd\u3002","title":"QUESTION ENCODING"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#passage-encoding","text":"\u9996\u5148\u4e3a\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u5f62\u6210\u4e00\u4e2a\u8f93\u5165\u8868\u793a \\(\\tilde{\\mathbf{p}}_{i} \\in \\mathbb{R}^{\\overline{d}}\\) \uff0c\u5e76\u4e14\u5b83\u4eec\u7a7f\u8fc7\u53e6\u4e00\u4e2a\u53cc\u5411LSTM: \\[ \\mathbf{p}_{1}, \\mathbf{p}_{2}, \\ldots, \\mathbf{p}_{l_{p}}=\\operatorname{BiLSTM}\\left(\\tilde{\\mathbf{p}}_{1}, \\tilde{\\mathbf{p}}_{2}, \\ldots, \\tilde{\\mathbf{p}}_{l_{p}} ; \\Theta^{(p)}\\right) \\in \\mathbb{R}^{h} \\] \u8f93\u5165\u8868\u793a \\(\\tilde{\\mathbf{p}}_{i}\\) \u53ef\u5206\u4e3a\u4e24\u7c7b: \u4e00\u662f\u7f16\u7801\u6bcf\u4e2a\u5355\u8bcd\u672c\u8eab\u7684\u5c5e\u6027,,\u53e6\u4e00\u4e2a\u662f\u7f16\u7801\u5176\u4e0e\u95ee\u9898\u7684\u76f8\u5173\u6027 \u3002 properties of each word itself, its relevance with respect to the question","title":"PASSAGE ENCODING"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#_1","text":"\u9664\u4e86\u8bcd\u5d4c\u5165 \\(f_{emb}(p_i)=E(p_i)\u2208\\mathbb{R}^d\\) ,\u6211\u4eec\u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e9b\u4eba\u5de5\u7279\u5f81\u53cd\u6620\u8bcdpipi\u5728\u5b83\u7684\u4e0a\u4e0b\u6587\u7684\u6027\u8d28,\u5305\u62ec\u5b83\u7684\u8bcd\u6027(POS)\u548c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b(NER)\u53ca\u5176\u9891\u7387(\u89c4\u8303\u5316)\u8bcd\u9891(TF): \\(f_{\\text {token}}\\left(p_{i}\\right)=\\left(\\operatorname{POS}\\left(p_{i}\\right), \\mathrm{NER}\\left(p_{i}\\right), \\mathrm{TF}\\left(p_{i}\\right)\\right)\\) \u3002\u5bf9\u4e8ePOS\u548cNER\u6807\u8bb0\uff0c\u6211\u4eec\u8fd0\u884c\u73b0\u6210\u7684\u5de5\u5177\u5e76\u5c06\u5176\u8f6c\u6362\u4e3aOne-hot\u8868\u793a\uff0c\u56e0\u4e3a\u6807\u8bb0\u96c6\u5f88\u5c0f\u3002TF\u7279\u5f81\u662f\u5b9e\u503c\u6570\uff0c\u5b83\u5ea6\u91cf\u5355\u8bcd\u5728\u6587\u7ae0\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u9664\u4ee5\u5355\u8bcd\u603b\u6570\u3002","title":"\u5355\u8bcd\u672c\u8eab\u7684\u5c5e\u6027"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#_2","text":"\u8003\u8651\u4e86\u4e24\u79cd\u8868\u793a Exact match : \\(f_{\\text {exact-match}}\\left(p_{i}\\right)=\\mathbb{I}\\left(p_{i} \\in q\\right) \\in \\mathbb{R}.\\) \u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4e09\u4e2a\u7b80\u5355\u7684\u4e8c\u8fdb\u5236\u7279\u6027\uff0c\u8868\u660e \\(p_i\\) \u662f\u5426\u80fd\u591f\u7cbe\u786e\u5730\u5339\u914d\u95ee\u9898 \\(q\\) \u4e2d\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u65e0\u8bba\u662f\u539f\u59cb\u7684\u3001\u5c0f\u5199\u7684\u8fd8\u662f\u5f15\u7406\u5f62\u5f0f\u7684\u3002 Aligned question embeddings : Exact match\u7279\u6027\u7f16\u7801\u4e86\u95ee\u9898\u8bcd\u548c\u6bb5\u843d\u8bcd\u4e4b\u95f4\u7684\u786c\u5bf9\u9f50\u3002\u5bf9\u9f50\u95ee\u9898\u5d4c\u5165(Aligned question embeddings)\u7684\u76ee\u7684\u662f\u5728word embedding\u7a7a\u95f4\u4e2d\u7f16\u7801\u5355\u8bcd\u4e4b\u95f4\u8f6f\u5bf9\u9f50\u7684\u6982\u5ff5\uff0c\u8fd9\u6837\u7c7b\u4f3c(\u4f46\u4e0d\u76f8\u540c)\u7684\u5355\u8bcd\uff0c\u4f8b\u5982car\u548cvehicle\uff0c\u5c31\u53ef\u4ee5\u5f88\u597d\u5730\u5bf9\u9f50\u3002\u5177\u4f53\u5730\u8bf4,\u6211\u4eec\u4f7f\u7528 \\[ f_{a l i g n}\\left(p_{i}\\right)=\\sum_{j} a_{i, j} \\mathbf{E}\\left(q_{j}\\right) \\] \u5176\u4e2d\uff0c \\(a_{i,j}\\) \u662f\u8861\u91cf\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd \\(p_i\\) \u548c\u95ee\u9898\u4e2d\u7684\u5355\u8bcd \\(qj\\) \u503c\u95f4\u76f8\u4f3c\u5ea6\u7684\u6ce8\u610f\u529b\u6743\u91cd\u503c\uff0c \\(\\mathbf{E}\\left(q_{j}\\right) \\in \\mathbb{R}^{d}\\) \u662f\u95ee\u9898\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8bcd\u5d4c\u5165\u3002 \\(a_{i,j}\\) \u7531\u8bcd\u5d4c\u5165\u7684\u975e\u7ebf\u6027\u6620\u5c04\u4e4b\u95f4\u7684\u70b9\u79ef\u8ba1\u7b97\uff1a \\[ a_{i, j}=\\frac{\\exp \\left(\\operatorname{MLP}\\left(\\mathbf{E}\\left(p_{i}\\right)\\right)^{T} \\operatorname{MLP}\\left(\\mathbf{E}\\left(q_{j}\\right)\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(\\operatorname{MLP}\\left(\\mathbf{E}\\left(p_{i}\\right)\\right) ^T{MLP}\\left(\\mathbf{E}\\left(q_{j^{\\prime}}\\right)\\right)\\right)} \\] \u5176\u4e2d \\(\\operatorname{MLP}(\\mathbf{x})=\\max \\left(0, \\mathbf{W}_{\\operatorname{MLP}} \\mathbf{x}+\\mathbf{b}_{\\mathrm{MLP}}\\right)\\) \u662f\u5177\u6709\u975e\u7ebf\u6027\u51fd\u6570\u7684\u5355\u5c42dense\u5c42\uff0c \\(\\mathbf{W}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d \\times d} \\text { and } \\mathbf{b}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d}.\\) and \\(\\mathbf{W}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d \\times d} \\text { and } \\mathbf{b}_{\\mathrm{MLP}} \\in \\mathbb{R}^{d}\\) \u6700\u540e\uff0c\u6211\u4eec\u5c06\u56db\u4e2a\u7ec4\u4ef6\u8fde\u63a5\u8d77\u6765\uff0c\u5f62\u6210\u8f93\u5165\u8868\u793a: \\[ \\tilde{\\mathbf{p}}_{i}=\\left(f_{e m b}\\left(p_{i}\\right), f_{t o k e n}\\left(p_{i}\\right), f_{e x a c t-m a t c h}\\left(p_{i}\\right), f_{a l i g n}\\left(p_{i}\\right)\\right) \\in \\mathbb{R}^{\\tilde{d}} \\] \u8fd9\u90e8\u5206\u5728\u6a21\u578b\u4e2d\u7684\u4f53\u73b0\u5982\u4e0b","title":"\u4e0e\u95ee\u9898\u7684\u76f8\u5173\u6027"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#answer-prediction","text":"\u73b0\u5728\u6211\u4eec\u6709\u4e86\u6587\u7ae0\u548c\u95ee\u9898\u7684\u5411\u91cf\u8868\u793a\u4e86\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u9884\u6d4b\u6700\u53ef\u80fd\u662f\u6b63\u786e\u7b54\u6848\u7684\u8303\u56f4\u3002\u6211\u4eec\u518d\u6b21\u8fd0\u7528\u6ce8\u610f\u529b\u673a\u5236\u7684\u601d\u60f3\uff0c\u8bad\u7ec3\u4e24\u4e2a\u72ec\u7acb\u7684\u5206\u7c7b\u5668\uff0c\u4e00\u4e2a\u662f\u9884\u6d4b\u8de8\u5ea6\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u53e6\u4e00\u4e2a\u662f\u9884\u6d4b\u8de8\u5ea6\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528\u53cc\u7ebf\u6027\u4e58\u79ef\u6765\u6355\u6349pipi\u548cqq\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027: \\[ \\begin{aligned} P^{(\\mathrm{start})}(i) &=\\frac{\\exp \\left(\\mathbf{p}_{i} \\mathbf{W}^{(\\mathrm{sart})} \\mathbf{q}\\right)}{\\sum_{i^{\\prime}} \\exp \\left(\\mathbf{p}_{i^{\\prime}} \\mathbf{W}^{(\\mathrm{start})} \\mathbf{q}\\right)} \\\\ P^{(\\mathrm{end})}(i) &=\\frac{\\exp \\left(\\mathbf{p}_{i} \\mathbf{W}^{(\\mathrm{end})} \\mathbf{q}\\right)}{\\sum_{i^{\\prime}} \\exp \\left(\\mathbf{p}_{i^{\\prime}} \\mathbf{W}^{(\\mathrm{end})} \\mathbf{q}\\right)} \\end{aligned} \\] \u5176\u4e2d\uff0c \\(\\mathbf{W}^{(\\text { start })}, \\mathbf{W}^{(\\text { end })} \\in \\mathbb{R}^{h \\times h}\\) \u662f\u8981\u5b66\u4e60\u7684\u989d\u5916\u53d8\u91cf\u3002\u8fd9\u548c\u6ce8\u610f\u529b\u7684\u8868\u8fbe\u5f0f\u7565\u6709\u4e0d\u540c\u56e0\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u5bf9\u6240\u6709\u5411\u91cf\u8868\u793a\u53d6\u52a0\u6743\u548c\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4f7f\u7528\u6807\u51c6\u5316\u7684\u6743\u91cd\u6765\u8fdb\u884c\u76f4\u63a5\u9884\u6d4b\u3002\u6211\u4eec\u4f7f\u7528\u53cc\u7ebf\u6027\u4e58\u79ef\u662f\u56e0\u4e3a\u6211\u4eec\u53d1\u73b0\u5b83\u4eec\u5728\u7ecf\u9a8c\u4e0a\u662f\u6709\u6548\u7684\u3002","title":"ANSWER PREDICTION"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#training-and-inference","text":"\u6700\u7ec8\u7684\u8bad\u7ec3\u76ee\u6807\u662f\u6700\u5c0f\u5316\u4ea4\u53c9\u71b5\u635f\u5931\uff1a \\[ \\mathcal{L}=-\\sum \\log P^{(\\mathrm{start})}\\left(a_{\\mathrm{start}}\\right)-\\sum \\log P^{(\\mathrm{end})}\\left(a_{\\mathrm{end}}\\right) \\] \u5176\u4e2d\uff0c\u6240\u6709\u7684\u53c2\u6570 \\(\\Theta=\\Theta^{(p)}, \\Theta^{(q)}, \\mathbf{w}^{(q)}, \\mathbf{W}_{\\mathrm{MLP}}, \\mathbf{b}_{\\mathrm{MLP}}, \\mathbf{W}^{(\\mathrm{start})}, \\mathbf{W}^{(\\mathrm{end})}\\) \u90fd\u662f\u901a\u8fc7SGD\u8fdb\u884c\u4f18\u5316\u7684\u3002 \u5728\u63a8\u7406\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u8303\u56f4 \\(p_{i}, \\dots, p_{i^{\\prime}}, i \\leq i^{\\prime} \\leq i+max\\_{len}\\) \u5e76\u4e14 \\(P^{(\\text { start })}(i) \\times P^{(\\text { end })}\\left(i^{\\prime}\\right)\\) \u53d6\u6700\u5927\u503c\u3002 \\(max\\_len\\) \u662f\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u5e38\u91cf\uff0c\u63a7\u5236\u7b54\u6848\u7684\u6700\u5927\u957f\u5ea6\u3002","title":"TRAINING AND INFERENCE"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#323-extensions","text":"\u63a5\u4e0b\u6765\u6211\u4eec\u7ed9\u51fa\u4e00\u4e9b\u53d8\u4f53\uff0c\u662f\u7528\u4e8e\u89e3\u51b3\u5176\u4ed6\u7c7b\u578b\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u6a21\u578b\u9075\u5faa\u76f8\u540c\u7684\u8fc7\u7a0b\uff0c\u6587\u7ae0\u7f16\u7801\u548c\u95ee\u9898\u7f16\u7801\u90fd\u5982\u4e0a\u6587\u6240\u8ff0\u3002\u56e0\u6b64\u6211\u4eec\u73b0\u5728\u6709\u4e86 \\(\\mathbf{p}_{1}, \\mathbf{p}_{2}, \\dots, \\mathbf{p}_{l_{p}} \\in \\mathbb{R}^{h} \\text { and } \\mathbf{q} \\in \\mathbb{R}^{h}\\) \uff0c\u6211\u4eec\u53ea\u8ba8\u8bbaAnswer prediction\u7ec4\u4ef6\u548c\u8bad\u7ec3\u76ee\u6807\u3002","title":"3.2.3 Extensions"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#cloze-style","text":"\u540c\u6837\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u95ee\u9898\u5bf9\u6587\u7ae0\u4e2d\u6240\u6709\u5355\u8bcd\u7684\u53cc\u7ebf\u6027\u4e58\u79ef\u6765\u8ba1\u7b97\u6ce8\u610f\u529b\u51fd\u6570\uff0c\u7136\u540e\u8ba1\u7b97\u4e00\u4e2a\u8f93\u51fa\u5411\u91cfo\uff0c\u5b83\u5bf9\u6240\u6709\u6bb5\u843d\u8868\u793a\u5f62\u5f0f\u8fdb\u884c\u52a0\u6743\u548c \\[ P(Y=e | p, q)=\\frac{\\exp \\left(\\mathbf{W}_{e}^{(a)} \\mathbf{o}\\right)}{\\sum_{e^{\\prime} \\in \\mathcal{E}} \\exp \\left(\\mathbf{W}_{e^{\\prime}}^{(a)} \\mathbf{o}\\right)} \\] \u5176\u4e2d\uff0c \\(\\mathcal{E}\\) \u8868\u793a\u5019\u9009\u7684\u5355\u8bcd\u6216\u5b9e\u4f53\u7684\u96c6\u5408\u3002\u91c7\u7528\u8d1f\u5bf9\u6570\u4f3c\u7136\u76ee\u6807\u8fdb\u884c\u8bad\u7ec3\uff0c\u5728\u9884\u6d4b\u8fc7\u7a0b\u4e2d\u9009\u62e9 \\(e \\in \\mathcal{E}\\) \u4f7f \\(\\mathbf{W}_{e}^{(a)} \\mathbf{o}\\) \u6700\u5927\u5316\uff0c\u662f\u5f88\u7b80\u5355\u7684\u3002","title":"CLOZE STYLE"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#multiple-choice","text":"\u5728\u8fd9\u4e00\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u7ed9\u51fak\u4e2a\u5047\u5b9a\u7b54\u6848 \\(\\mathcal{A}=\\left\\{a_{1}, \\dots, a_{k}\\right\\}\\) \uff0c\u901a\u8fc7\u4f7f\u7528\u7b2c\u4e09\u4e2aBiLSTM\u5c06\u6bcf\u4e2a\u90fd\u7f16\u7801\u4e3a\u5411\u91cfai , \u7c7b\u4f3c\u4e8e\u6211\u4eec\u7684\u95ee\u9898\u7f16\u7801\u6b65\u9aa4\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8f93\u51fa\u5411\u91cfo\u5e76\u4e14\u901a\u8fc7\u53e6\u4e00\u4e2a\u53cc\u7ebf\u6027\u4e58\u79ef\u7684\u76f8\u4f3c\u6027\u51fd\u6570\uff0c\u628a\u5b83\u548c\u6bcf\u4e2a\u5047\u5b9a\u7b54\u6848\u7684\u5411\u91cf ai\u8fdb\u884c\u6bd4\u8f83 \\[ P(Y=i | p, q)=\\frac{\\exp \\left(\\mathbf{a}_{i} \\mathbf{W}^{(a)} \\mathbf{o}\\right)}{\\sum_{i^{\\prime}=1, \\ldots, k} \\exp \\left(\\mathbf{a}_{i^{\\prime}}^{\\prime} \\mathbf{W}^{(a)} \\mathbf{o}\\right)} \\] \u8bad\u7ec3\u65f6\u4f7f\u7528\u4ea4\u53c9\u71b5Loss\u51fd\u6570\u3002","title":"MULTIPLE CHOICE"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#free-form-answer","text":"\u8fd9\u79cd\u95ee\u9898\u7684\u7b54\u6848\u4e0d\u9650\u5b9a\u4e0e\u4e00\u4e2a\u5b9e\u4f53\u6216\u662f\u6587\u4e2d\u7684\u4e00\u4e2a\u8303\u56f4\uff0c\u53ef\u4ee5\u53d6\u4efb\u4f55\u5355\u8bcd\u5e8f\u5217\uff0c\u6700\u5e38\u89c1\u7684\u89e3\u51b3\u65b9\u6848\u662f\u5c06LSTM\u7684\u5e8f\u5217decoder\u5408\u5e76\u5230\u5f53\u524d\u6846\u67b6\u4e2d\u3002\u5177\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u5047\u5b9a\u4e00\u4e2a\u7b54\u6848\u5b57\u7b26\u4e32\u4e3a \\(a=\\left(a_{1}, a_{2}, \\dots, a_{l_{a}}\\right)\\) \u4ee5\u53ca\u4e00\u4e2a\u7279\u6b8a\u7684\u5e8f\u5217\u7ec8\u70b9token\u27e8eos\u27e9\u27e8eos\u27e9\u4f1a\u88ab\u6dfb\u52a0\u5230\u6bcf\u4e00\u4e2a\u7b54\u6848\u7684\u672b\u5c3e\u3002\u6211\u4eec\u53ef\u4ee5\u540c\u6837\u4f7f\u7528\u8f93\u51fa\u5411\u91cfo\u5e76\u4e14decoder\u4f1a\u6bcf\u6b21\u751f\u6210\u4e00\u4e2a\u5355\u8bcd\uff0c\u56e0\u6b64\u6761\u4ef6\u6982\u7387\u53ef\u4ee5\u5206\u89e3\u4e3a: \\[ P(a | p, q)=P(a | \\mathbf{o})=\\prod_{j=1}^{l_{a}} P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right) \\] $$P\\left(A_{1} A_{2} \\cdots A_{n}\\right)=P\\left(A_{1}\\right) P\\left(A_{2} | A_{1}\\right) \\cdots P\\left(A_{n} | A_{1} A_{2} \\cdots A_{n-1}\\right) $$ \u5176\u4e2d\uff0c \\(P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right)\\) \u662f\u4e00\u4e2aLSTM\u7684\u53c2\u6570\u5316\u8868\u793a\uff0c\u8be5LSTM\u4ee5\u8f93\u51fa\u5411\u91cfoo\u4e3a\u521d\u59cb\u9690\u5c42\u5411\u91cf\uff0c\u5728\u5b8c\u6574\u7684\u8bcd\u6c47\u8868 \\(\\mathcal{V} \\cup\\{\\langle\\text { eos }\\rangle\\}\\) \u4e2d\uff0c\u6839\u636e\u9690\u5c42\u5411\u91cf \\(h_j\\) \u9884\u6d4b\u51fa \\(a_j\\) \uff0c\u8bad\u7ec3\u76ee\u6807\u4e3a \\[ \\mathcal{L}=-\\log P(a | p, q)=-\\log \\sum_{j=1}^{l_{a}} P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right) \\] \u5bf9\u4e8e\u9884\u6d4b\uff0c\u6bcf\u6b21\u9884\u6d4b\u4e00\u4e2a\u5355\u8bcd\uff0c\u4f7f\u5f97 \\(P\\left(a_{j} | a_{<j}, \\mathbf{o}\\right)\\) \u6700\u5927\uff0c\u7136\u540e\u8f93\u5165\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u77e5\u9053\u9884\u6d4b\u5230token\u27e8eos\u27e9\u27e8eos\u27e9\u3002 \u7531\u4e8e\u81ea\u7531\u5f62\u5f0f\u7684\u7b54\u9898\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u66f4\u52a0\u590d\u6742\uff0c\u4e5f\u66f4\u96be\u8bc4\u4f30\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u65b9\u6cd5\u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u95ee\u9898\u76f8\u6bd4\u8fd8\u6ca1\u6709\u5f97\u5230\u5145\u5206\u7684\u63a2\u7d22\u3002\u6700\u540e\uff0c\u6211\u4eec\u8ba4\u4e3a (Gu et al., 2016; See et al., 2017)\u63d0\u51fa\u4e86\u4e00\u79cd\u7528\u4e8e\u603b\u7ed3\u4efb\u52a1\u7684\u590d\u5236\u673a\u5236\u3002\u5b83\u5141\u8bb8\u89e3\u7801\u5668\u9009\u62e9\u4ece\u6e90\u6587\u672c\u4e2d\u590d\u5236\u4e00\u4e2a\u5355\u8bcd\uff0c\u6216\u8005\u4ece\u8bcd\u6c47\u8868\u4e2d\u751f\u6210\u4e00\u4e2a\u5355\u8bcd\uff0c\u8fd9\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u4e5f\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u7b54\u6848\u5355\u8bcd\u4ecd\u7136\u53ef\u80fd\u51fa\u73b0\u5728\u6bb5\u843d\u6216\u95ee\u9898\u4e2d\u3002\u6211\u4eec\u5c06\u5728\u7b2c6.3\u8282\u4e2d\u8ba8\u8bba\u4e00\u4e2a\u5177\u6709\u590d\u5236\u673a\u5236\u7684\u6a21\u578b\u3002","title":"FREE-FORM ANSWER"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#33-experiments","text":"","title":"3.3 Experiments"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#331-datasets","text":"\u7531\u4e8e\u6570\u636e\u96c6\u7684\u6784\u9020\u65b9\u5f0f\uff0c CNN/Daily Mail \u6bd4 SQUAD \u5927\u7684\u591a\u3002\u6b64\u5916\uff0c\u524d\u8005\u7684\u6587\u7ae0\u957f\u5ea6\u4e5f\u8981\u957f\u7684\u591a\u3002\u6700\u540e\uff0c SQUAD \u7684\u7b54\u6848\u5e73\u5747\u53ea\u5305\u542b3.1\u4e2atoken\uff0c\u8fd9\u53cd\u6620\u51fa\u5176\u95ee\u9898\u5927\u90e8\u5206\u662f\u4e8b\u5b9e\uff0c\u5927\u90e8\u5206\u7684\u7b54\u6848\u662f\u5e38\u89c1\u7684\u540d\u8bcd\u6216\u547d\u540d\u5b9e\u4f53\u3002","title":"3.3.1 Datasets"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#332-implementation-details","text":"","title":"3.3.2 Implementation Details"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#stacked-bilstms","text":"\u589e\u5927\u95ee\u9898\u548c\u6587\u7ae0\u7f16\u7801\u7684\u53cc\u5411LSTM\u7684\u6df1\u5ea6\uff0c\u5c06\u4f1a\u8ba1\u7b97 \\(\\mathbf{h}_{t}=\\left[\\overrightarrow{\\mathbf{h}}_{t} ; \\overleftarrow{\\mathbf{h}}_{t}\\right] \\in \\mathbb{R}^{2 h}\\) \u5e76\u4e14\u628a \\(h_t\\) \u4f5c\u4e3a\u4e0b\u4e00\u5c42\u7684\u8f93\u5165 \\(X_t\\) \uff0c\u4f20\u9012\u5230\u53e6\u4e00\u5c42BiLSTM\u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0cStack\u6bd4\u5355\u5c42\u6548\u679c\u597d\uff0c\u5b9e\u9a8c\u91c7\u7528\u4e86\u4e09\u5c42\u3002","title":"STACKED BILSTMS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#dropout","text":"\u5728\u795e\u7ecf\u7f51\u7edc\u6b63\u5219\u5316\u4e2d\uff0cDropout\u662f\u4e00\u79cd\u6709\u6548\u4e14\u5e94\u7528\u5e7f\u6cdb\u7684\u65b9\u6cd5\u3002\u7b80\u5355\u5730\u8bf4\uff0cdropout\u662f\u6307\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u968f\u673a\u5c4f\u853d\u6389\u4e00\u4e9b\u5355\u5143\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u6a21\u578b\uff0c\u53ef\u4ee5\u5c06dropout\u6dfb\u52a0\u5230\u6bcf\u4e2aLSTM\u5c42\u7684\u5d4c\u5165\u3001\u8f93\u5165\u5411\u91cf\u548c\u9690\u85cf\u5411\u91cf\u4e2d\u3002\u6700\u540e\uff0c variational dropout \u662f\u5df2\u7ecf\u8bc1\u660e\u5728RNNs\u89c4\u8303\u5316\u4e2d\u6bd4\u6807\u51c6\u7684Dropout\u6548\u679c\u66f4\u597d\u7684\u65b9\u6cd5\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u5e94\u7528\u76f8\u540c\u7684dropout mask\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u5165\uff0c\u8f93\u51fa\u548c\u5faa\u73af\u5c42\uff0c\u5373\u5728\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e2d\u4f1a\u4e22\u5f03\u76f8\u540c\u7684\u5355\u4f4d\u3002\u6211\u4eec\u5efa\u8bae\u8bfb\u8005\u5728\u5b9e\u8df5\u4e2d\u4f7f\u7528\u8fd9\u79cd\u53d8\u4f53\u3002","title":"DROPOUT"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#handling-word-embeddings","text":"\u5904\u7406\u5355\u8bcd\u5d4c\u5165\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5(\u4e5f\u662f\u6211\u4eec\u7684\u9ed8\u8ba4\u9009\u62e9)\u662f\u5c06\u6700\u9891\u7e41\u7684 \\(K(\\mathrm{e.} \\mathrm{g.}, K=500,000)\\) \u5355\u8bcd\u7c7b\u578b\u4fdd\u5b58\u5728\u8bad\u7ec3\u96c6\u4e2d\uff0c\u5e76\u5c06\u6240\u6709\u5176\u4ed6\u5355\u8bcd\u6620\u5c04\u5230 \\(\u27e8unk\u27e9\\) \u4e2d\uff0c\u7136\u540e\u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\u6765\u521d\u59cb\u5316\u8fd9KK\u4e2a\u5355\u8bcd\u3002\u901a\u5e38\uff0c\u5f53\u8bad\u7ec3\u96c6\u8db3\u591f\u5927\u65f6\uff0c\u6211\u4eec\u5bf9\u6240\u6709\u5355\u8bcdembeddings\u8fdb\u884c\u5fae\u8c03\uff1b\u5f53\u8bad\u7ec3\u96c6\u76f8\u5bf9\u8f83\u5c0f\u65f6(\u4f8b\u5982\uff0cSQUAD)\uff0c\u6211\u4eec\u901a\u5e38\u5c06\u6240\u6709\u5355\u8bcdembeddings\u56fa\u5b9a\u4e3a\u9759\u6001\u7279\u6027\u3002\u5728 Chen et al. (2017)\u7684\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5bf9\u6700\u5e38\u89c1\u7684\u7591\u95ee\u8bcd\u8fdb\u884c\u5fae\u8c03\u662f\u6709\u5e2e\u52a9\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5173\u952e\u8bcd\u7684\u8868\u5f81\uff0c\u5982what, how, which\u53ef\u80fd\u5bf9\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u81f3\u5173\u91cd\u8981\u3002\u7814\u7a76\u8868\u660e\uff0c\u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u597d\u7684\u5d4c\u5165\u4ee5\u53ca\u5904\u7406\u8bcd\u6c47\u5916\u5355\u8bcd\u7684\u65b9\u6cd5\u5bf9\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u7684\u8868\u73b0\u6709\u5f88\u5927\u7684\u5f71\u54cd\u3002","title":"HANDLING WORD EMBEDDINGS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#model-specifications","text":"\u5bf9\u4e8e\u6240\u6709\u9700\u8981\u8bed\u8a00\u6ce8\u91ca\u7684\u5b9e\u9a8c(\u5f15\u7406\u3001\u8bcd\u6027\u6807\u8bb0\u3001\u547d\u540d\u5b9e\u4f53\u6807\u8bb0\u3001\u4f9d\u8d56\u89e3\u6790)\uff0c\u6211\u4eec\u4f7f\u7528Stanford CoreNLP toolkit (Manning et al., 2014)\u8fdb\u884c\u9884\u5904\u7406\u3002\u4e3a\u4e86\u8bad\u7ec3\u6240\u6709\u7684\u795e\u7ecf\u6a21\u578b\uff0c\u6211\u4eec\u6309\u7167\u6587\u7ae0\u957f\u5ea6\u5bf9\u6240\u6709\u7684\u793a\u4f8b\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u66f4\u65b0\u968f\u673a\u62bd\u53d6\u5927\u5c0f\u4e3a32\u7684\u5c0f\u6279\u6837\u672c\u3002 CNN/DAILY MAIL \u4e2d\u4f7f\u7528\u5c0f\u5199\u7684100\u7ef4\u9884\u8bad\u7ec3\u7684GLOVE\u8bcd\u5411\u91cf\uff0c\u5728Wikipedia\u548cGigaword\u4e0a\u521d\u59cb\u5316\u3002 attention\u548couput\u7684\u53c2\u6570\u521d\u59cb\u5316\u4e3a[-0.01, 0.01]\u5747\u5300\u5206\u5e03\u3002\u5355\u5c42BiLSTM\u6743\u91cd\u521d\u59cb\u5316\u4f7f\u7528\u9ad8\u65af\u5206\u5e03 \\(\\mathcal{N}(0,0.1)\\) \u3002\u4f7f\u7528\u4e86\u5355\u5c42\u7684BiLSTM\uff0c\u9690\u85cf\u5c42\u5927\u5c0f\u4e3aCNN(128)\u3001Dailymail(256)\u3002\u4f18\u5316\u51fd\u6570\u91c7\u7528SGD\u548c\u56fa\u5b9a\u7684\u5b66\u4e60\u73870.1\uff0c\u5e76\u5728Embedding\u5c42\u4f7f\u7528dropout 0.2\uff0c\u5f53\u68af\u5ea6\u7684\u8303\u6570\u8d85\u8fc710\u65f6\uff0c\u5bf9\u5d4c\u5165\u5c42\u8fdb\u884c\u68af\u5ea6\u88c1\u526a\u3002 SQuAD\u4e2d\u4f7f\u75283\u5c42BiLSTM(h=128)\uff0c\u4f7f\u7528\u4e86\u4f18\u5316\u51fd\u6570Adamax\uff0c\u5728\u8bcd\u5d4c\u5165\u548c\u6240\u6709LSTM\u9690\u5c42\u4e2ddropout 0.3\u3002\u4f7f\u7528300\u7ef4\u7684GLOVE\u8bcd\u5411\u91cf\uff08fine-tune 1000\u4e2a\u9891\u7387\u6700\u9ad8\u7684\u95ee\u9898\u4e2d\u51fa\u73b0\u7684\u8bcd\uff09 16\u548c17\u5e74\u7684\u4e24\u7bc7\u8bba\u6587\u4e2d\u7684\u5b9e\u9a8c\u7ed3\u679c\u6709\u6240\u4e0d\u540c\u3002\u5173\u952e\u7684\u4e0d\u540c\u5728\u4e8eCNN/DAILY MAIL\u4e2d\u76f4\u63a5\u4f7f\u7528\u4e86\u8bcd\u5d4c\u5165\uff0c\u6ca1\u6709\u989d\u5916\u7684\u4e24\u79cd\u7279\u6027\uff1b\u6ca1\u6709\u5728\u95ee\u9898\u7684\u7f16\u7801\u5c42\u4e2d\u4f7f\u7528attention\u5c42\uff0c\u53ea\u662f\u628a\u53cc\u5411LSTM\u7684\u6700\u540e\u4e00\u4e2a\u9690\u5c42\u5411\u91cf\u8fde\u63a5\u8d77\u6765\u3002","title":"MODEL SPECIFICATIONS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#333-experimental-results","text":"","title":"3.3.3 Experimental Results"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#3333-ablation-studies","text":"\u572817\u5e74\u7684\u8bba\u6587\u4e2d\u5bf9\u6587\u7ae0\u7684\u8868\u5f81\u8fdb\u884c\u4e86\u6a21\u578b\u7b80\u5316\u6d4b\u8bd5\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6ca1\u6709\u5bf9\u9f50\u7684\u95ee\u9898\u5d4c\u5165(\u53ea\u6709word\u5d4c\u5165\u548c\u4e00\u4e9b\u624b\u52a8\u7279\u6027)\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4ecd\u7136\u80fd\u591f\u5b9e\u73b0F1\u8d85\u8fc777%\u3002\u7cbe\u786e\u5339\u914d\u7279\u5f81\u7684\u6709\u6548\u6027\u4e5f\u8868\u660e\uff0c\u5728\u8be5\u6570\u636e\u96c6\u4e0a\uff0c\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u5b58\u5728\u5927\u91cf\u7684\u5355\u8bcd\u91cd\u53e0\u3002\u66f4\u6709\u8da3\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u540c\u65f6\u5220\u9664 \\(f_{aligned }\\) \u548c \\(f_{exact match}\\) \uff0c\u6027\u80fd\u4f1a\u663e\u8457\u4e0b\u964d\uff0c\u56e0\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff0c\u8fd9\u4e24\u4e2a\u7279\u6027\u5728\u7279\u5f81\u8868\u793a\u65b9\u9762\u53d1\u6325\u7740\u76f8\u4f3c\u4f46\u4e92\u8865\u7684\u4f5c\u7528\uff0c\u5c31\u50cf\u95ee\u9898\u548c\u6587\u7ae0\u5355\u8bcd\u4e4b\u95f4\u7684\u786c\u5bf9\u9f50\u548c\u8f6f\u5bf9\u9f50\u4e00\u6837","title":"3.3.3.3 ABLATION STUDIES"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#334-analysis-what-have-the-models-learned","text":"\u6211\u4eec\u8bd5\u56fe\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u6a21\u578b\u5b9e\u9645\u4e0a\u5b66\u5230\u4e86\u4ec0\u4e48\uff0c\u4ee5\u53ca\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u591a\u5927\u7684\u8bed\u8a00\u7406\u89e3\u6df1\u5ea6\u3002\u6211\u4eec\u901a\u8fc7\u5bf9CNN\u6570\u636e\u96c6\u5f00\u53d1\u96c6\u4e2d\u7684100\u4e2a\u968f\u673a\u62bd\u6837\u793a\u4f8b\u8fdb\u884c\u4ed4\u7ec6\u7684\u624b\u5de5\u5206\u6790\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002 \u6211\u4eec\u5927\u81f4\u5c06\u5176\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b(\u5982\u679c\u4e00\u4e2a\u4f8b\u5b50\u6ee1\u8db3\u4e00\u4e2a\u4ee5\u4e0a\u7684\u7c7b\u522b\uff0c\u6211\u4eec\u5c06\u5176\u5206\u4e3a\u6700\u65e9\u7684\u7c7b\u522b): Exact match : \u95ee\u9898\u4e2d\u7684\u5360\u4f4d\u7b26\u5468\u56f4\u7684\u6700\u8fd1\u7684\u5355\u8bcd\u4e5f\u53ef\u4ee5\u5728\u56f4\u7ed5\u5b9e\u4f53\u6807\u8bb0\u7684\u6bb5\u843d\u4e2d\u627e\u5230\u3002\u7b54\u6848\u4e0d\u8a00\u81ea\u660e\u3002 Sentence-level paraphrasing : \u95ee\u9898\u7684\u6587\u672c\u5c31\u6765\u81ea\u4e0e\u6587\u7ae0\u4e2d\u7684\u4e00\u53e5\u8bdd\uff08\u6539\u5199\u6765\uff09\uff0c\u6240\u4ee5\u7b54\u6848\u80af\u5b9a\u53ef\u4ee5\u4ece\u90a3\u4e2a\u53e5\u5b50\u786e\u5b9a\u3002 Partial clue : \u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u6211\u4eec\u4e0d\u80fd\u5728\u95ee\u9898\u6587\u672c\u548c\u4e00\u4e9b\u53e5\u5b50\u4e4b\u95f4\u627e\u5230\u4e00\u4e2a\u5b8c\u5168\u7684\u8bed\u4e49\u5339\u914d\uff0c\u6211\u4eec\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u90e8\u5206\u7ebf\u7d22\u6765\u63a8\u65ad\u7b54\u6848\uff0c\u6bd4\u5982\u4e00\u4e9b\u5355\u8bcd/\u6982\u5ff5\u91cd\u53e0\u3002 Multiple sentences : \u591a\u53e5\u8bdd\u5fc5\u987b\u7ecf\u8fc7\u5904\u7406\u624d\u80fd\u63a8\u65ad\u51fa\u6b63\u786e\u7684\u7b54\u6848\u3002 Coreference errors : \u5728\u6570\u636e\u96c6\u4e2d\u4e0d\u53ef\u907f\u514d\u5730\u5b58\u5728\u7740\u5927\u91cf\u7684\u6307\u4ee3\u9519\u8bef\u3002\u8fd9\u4e00\u7c7b\u522b\u5305\u62ec\u5bf9\u51fa\u73b0\u5728\u95ee\u9898\u4e2d\u7684\u7b54\u6848\u5b9e\u4f53\u6216\u5173\u952e\u5b9e\u4f53\u5177\u6709\u5173\u952e\u6307\u4ee3\u9519\u8bef\u7684\u793a\u4f8b\u3002\u57fa\u672c\u4e0a\u6211\u4eec\u628a\u8fd9\u4e2a\u7c7b\u522b\u5f53\u4f5c\u201c\u4e0d\u53ef\u56de\u7b54\u7684\u201d\u3002 Ambiguous or hard : \u8fd9\u4e00\u7c7b\u5305\u62ec\u6211\u4eec\u8ba4\u4e3a\u4eba\u7c7b\u65e0\u6cd5(\u81ea\u4fe1\u5730)\u83b7\u5f97\u6b63\u786e\u7b54\u6848\u7684\u4f8b\u5b50\u3002 \u52a0\u4e0a\u6700\u7b80\u5355\u7684\u7cbe\u786e\u5339\u914d\u7c7b\u522b\uff0c\u6211\u4eec\u5047\u8bbe\u5927\u90e8\u5206\u793a\u4f8b(\u8fd9\u4e2a\u5b50\u96c6\u4e2d73%)\u80fd\u591f\u901a\u8fc7\u8bc6\u522b\u6700\u76f8\u5173\u7684(\u5355\u4e2a)\u53e5\u5b50\u5e76\u6839\u636e\u5b83\u63a8\u65ad\u51fa\u7b54\u6848\u3002\u6b64\u5916\uff0c\u53ea\u6709\u4e24\u4e2a\u4f8b\u5b50\u9700\u8981\u591a\u4e2a\u53e5\u5b50\u8fdb\u884c\u63a8\u7406\u3002\u8fd9\u6bd4\u6211\u4eec\u9884\u671f\u7684\u8981\u4f4e\uff0c\u8fd9\u8868\u660e\u6570\u636e\u96c6\u9700\u8981\u7684\u63a8\u7406\u6bd4\u4e4b\u524d\u8ba4\u4e3a\u7684\u8981\u5c11\u3002\u4ee4\u6211\u4eec\u60ca\u8bb6\u7684\u662f\uff0c\u6839\u636e\u6211\u4eec\u7684\u624b\u5de5\u5206\u6790\uff0c\u201c\u5171\u53c2\u9519\u8bef\u201d\u548c\u201c\u6a21\u7cca/\u56f0\u96be\u201d\u7684\u60c5\u51b5\u5360\u8fd9\u4e2a\u6837\u672c\u96c6\u768425%\uff0c\u8fd9\u5bf9\u4e8e\u51c6\u786e\u7387\u8fdc\u8fdc\u9ad8\u4e8e75%\u7684\u8bad\u7ec3\u6a21\u578b\u6765\u8bf4\u80af\u5b9a\u662f\u4e00\u4e2a\u969c\u788d(\u5f53\u7136\uff0c\u6a21\u578b\u6709\u65f6\u53ef\u80fd\u4f1a\u505a\u51fa\u5e78\u8fd0\u7684\u731c\u6d4b)\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u7684\u96c6\u6210\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5728\u5f00\u53d1\u96c6\u4e0a\u5df2\u7ecf\u80fd\u591f\u8fbe\u523076.5%\uff0c\u6211\u4eec\u8ba4\u4e3a\u5728\u8fd9\u4e2a\u6570\u636e\u96c6\u4e0a\u8fdb\u4e00\u6b65\u6539\u8fdb\u7684\u524d\u666f\u662f\u5f88\u5c0f\u7684\u3002 \u5728\u4e0a\u8ff0\u5206\u7c7b\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u7814\u7a76\u795e\u7ecf\u7f51\u7edc\u548c\u57fa\u4e8e\u7279\u5f81\u7684\u5206\u7c7b\u5668\u7684\u5206\u7c7b\u6027\u80fd\u3002\u5982\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5f97\u5230\u4ee5\u4e0b\u89c2\u5bdf\u7ed3\u679c:(i)\u7cbe\u786e\u5339\u914d\u7684\u60c5\u51b5\u975e\u5e38\u7b80\u5355\uff0c\u4e24\u4e2a\u7cfb\u7edf\u7684tems\u90fd\u5f97\u5230100%\u7684\u6b63\u786e\u3002(ii)\u5bf9\u4e8e ambiguous/hard \u4ee5\u53ca entity-linking-error\u7684\u60c5\u51b5\uff0c\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u8fd9\u4e24\u4e2a\u7cfb\u7edf\u7684\u6027\u80fd\u90fd\u5f88\u5dee\u3002(\u4e09)\u4e24\u79cd\u7cfb\u7edf\u4e3b\u8981\u4e0d\u540c\u4e4b\u5904\u5728\u4e8eparaphrasing\u7684\u60c5\u51b5\uff0c\u4ee5\u53ca\u90e8\u5206partial clue\u7684\u60c5\u51b5\u3002\u8fd9\u6e05\u695a\u5730\u663e\u793a\u4e86\u795e\u7ecf\u7cfb\u7edf\u7f51\u7edc\u80fd\u591f\u66f4\u597d\u5730\u5b66\u4e60\u8bed\u4e49\u5339\u914d\uff0c\u5305\u62ec \u91ca\u4e49\u6216\u4e24\u4e2a\u53e5\u5b50\u4e4b\u95f4\u7684\u8bcd\u6c47\u53d8\u5316 \u3002(4)\u6211\u4eec\u8ba4\u4e3a\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5728\u6240\u6709\u7684\u5355\u53e5\u548c\u660e\u786e\u7684\u60c5\u51b5\u4e0b single-sentence and unambiguous \u90fd\u5df2\u7ecf\u8fbe\u5230\u4e86\u8fd1\u4e4e\u6700\u4f18\u7684\u6027\u80fd\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u53d1\u73b0\u4e0e\u4f20\u7edf\u7684\u57fa\u4e8e\u7279\u5f81\u7684\u6a21\u578b\u76f8\u6bd4\uff0c\u795e\u7ecf\u7f51\u7edc\u5728\u8bc6\u522b\u8bcd\u6c47\u5339\u914d\u548c\u91ca\u4e49\u65b9\u9762\u65e0\u7591\u66f4\u5f3a\u5927\uff1b\u867d\u7136\u76ee\u524d\u8fd8\u4e0d\u6e05\u695a\u4ed6\u4eec\u662f\u5426\u4e5f\u8d62\u5f97\u4e86\u9700\u8981\u66f4\u590d\u6742\u7684\u6587\u672c\u63a8\u7406\u7684\u4f8b\u5b50\uff0c\u56e0\u4e3a\u76ee\u524d\u7684\u6570\u636e\u96c6\u5728\u8fd9\u65b9\u9762\u4ecd\u7136\u975e\u5e38\u6709\u9650\u3002","title":"3.3.4 Analysis: What Have the Models Learned?"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#34-further-advances","text":"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u7684\u6700\u65b0\u8fdb\u5c55\u3002\u6211\u4eec\u5c06\u5b83\u4eec\u5206\u4e3a\u4ee5\u4e0b\u56db\u7c7b: word representations attention mechanisms alternatives to LSTMs others (such as training objectives, data augmentation) \u6700\u540e\u5bf9\u5176\u91cd\u8981\u6027\u8fdb\u884c\u4e86\u603b\u7ed3\u548c\u8ba8\u8bba\u3002","title":"3.4 Further Advances"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#341-word-representations","text":"\u9996\u5148\u662f\u5bf9question\u548cpassage words \u7684\u66f4\u597d\u7684\u5355\u8bcd\u8868\u793a\uff0c\u56e0\u6b64\u795e\u7ecf\u6a21\u578b\u662f\u5efa\u7acb\u5728\u66f4\u597d\u7684\u57fa\u7840\u4e0a\u7684\u3002\u4ece\u6587\u672c\u6216\u662f\u627e\u5230\u6700\u597d\u7684\u5b57\u5d4c\u5165\u96c6\u5408\u4e3a\u7279\u5b9a\u7684\u4efb\u52a1\u5b66\u4e60\u66f4\u597d\u7684 distributed \u8bcd\u8868\u793a\u4ecd\u7136\u662f\u4e00\u4e2a\u6d3b\u8dc3\u7684\u7814\u7a76\u8bfe\u9898\u2014\u2014\u4f8b\u5982\uff0c Mikolov et al. (2017)\u53d1\u73b0\uff0c\u7528 FASTTEXT \u53d6\u4ee3GLOVE\u7684\u9884\u8bad\u7ec3\u5411\u91cf\u4e3a\u6211\u4eec\u7684\u6a21\u578b\u5728SQUAD\u4e2d\u5e26\u6765\u4e861%\u7684\u63d0\u5347\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6709\u4e24\u4e2a\u5173\u952e\u7684\u60f3\u6cd5\u5df2\u7ecf\u88ab\u8bc1\u660e(\u975e\u5e38)\u6709\u7528\uff1a","title":"3.4.1 Word Representations"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#character-embeddings","text":"\u7528\u5b57\u7b26\u7ea7\u522b\u7684\u5d4c\u5165\u65b9\u5f0f\u6765\u8868\u5f81\u5355\u8bcd\uff0c\u53ef\u4ee5\u8ba9\u6a21\u578b\u5728\u5f88\u5c11\u89c1\u7684\u5355\u8bcd\u4ee5\u53ca\u8bcd\u5e93\u4ee5\u5916\u7684\u5355\u8bcd\u4e0a\u6709\u63d0\u5347\u3002\u73b0\u5728\u5e38\u7528\u7684\u662f\u5c06\u6bcf\u4e2a\u5355\u8bcd\u7528\u4e00\u4e32\u5b57\u7b26\u5411\u91cf\u8868\u793a\uff0c\u7136\u540e\u7528\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u5bf9\u5b57\u7b26\u5411\u91cf\u505a\u5377\u79ef\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u5229\u7528n-gram\u5b57\u7b26\u7684 surface patterns\u3002\u5177\u4f53\u6765\u8bf4\uff0c \\(C\\) \u662f\u5b57\u7b26\u7684\u8bcd\u6c47\u8868\uff0c\u6bcf\u4e2a\u5355\u8bcd\u7c7b\u578b \\(x\\) \u90fd\u53ef\u4ee5\u8868\u793a\u4e3a\u5b57\u7b26\u5e8f\u5217 \\(\\left(c_{1}, \\ldots, c_{|x|}\\right), \\forall c_{i} \\in \\mathcal{C}.\\) \u6211\u4eec\u9996\u5148\u5c06 \\(C\\) \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5b57\u7b26\u90fd\u6620\u5c04\u4e3a\u4e00\u4e2a \\(d_c\\) \u7ef4\u5ea6\u7684\u5411\u91cf\uff0c\u6240\u4ee5\u5355\u8bcdxx\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a \\(\\mathbf{c}_{1}, \\dots, \\mathbf{c}_{|x|}\\) \u3002 \u63a5\u4e0b\u6765\u6211\u6211\u4eec\u4f7f\u7528\u5e26\u6709\u4e00\u4e2a \\(\\mathbf{w} \\in \\mathbb{R}^{d_{c} \\times w}\\) \u7684\u5bbd\u5ea6\u4e3aww\u7684\u5377\u79ef\u6838\u7684\u5377\u79ef\u5c42\uff0c \\(\\mathbf{c}_{i : i+j}\\) \u8868\u793a \\(\\mathbf{c}_{i}, \\mathbf{c}_{i+1}, \\ldots, \\mathbf{c}_{i+j}\\) \u3002\u56e0\u6b64\uff0c \\(for \\ i=1, \\ldots,|x|-w+1\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5377\u79ef\u6838\u5e76\u6dfb\u52a0\u504f\u5dee\u548c\u975e\u7ebf\u6027\u51fd\u6570 \\(tanh\\) : \\[ f_{i}=\\tanh \\left(\\mathbf{w}^{\\top} \\mathbf{c}_{i : i+w-1}+b\\right) \\] \u6700\u540e\u6211\u4eec\u518d\u5bf9\u83b7\u5f97 \\(f_{1}, \\ldots, f_{|x|-w+1}\\) \u7684\u4f7f\u7528 max-pooling \uff0c\u83b7\u5f97\u4e00\u4e2a\u6807\u91cf\u7279\u5f81\uff1a \\[ f=\\max _{i}\\left\\{f_{i}\\right\\} \\] \u83b7\u5f97\u7279\u5f81\u672c\u8d28\u4e0a\u662f\u9009\u62e9\u4e00\u4e2a\u5b57\u7b26\u7684n-gram\uff0c\u5176\u4e2dn-gram\u5927\u5c0f\u4e0e\u8fc7\u6ee4\u5668\u7684\u5bbd\u5ea6w\u76f8\u5173\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5377\u79ef\u6838 \\(\\mathbf{w}_{1}, \\dots, \\mathbf{w}_{d^{*}}\\) \u91cd\u590d\u5982\u4e0a\u7684\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6bcf\u4e2a\u5355\u8bcd\u7c7b\u578b \\(\\mathbf{E}_{c}(x) \\in \\mathbb{R}^{d^{*}}\\) \u7684\u57fa\u4e8e\u5b57\u7b26\u7684\u5355\u8bcd\u8868\u793a\u3002\u6240\u6709\u7684\u5b57\u7b26\u5d4c\u5165\uff0c\u8fc7\u6ee4\u5668\u6743\u91cd \\(w\\) \u548c\u504f\u5dee \\(b\\) \u90fd\u662f\u5728\u8bad\u7ec3\u4e2d\u5b66\u4e60\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u5b57\u7b26\u5d4c\u5165\u7684\u7ef4\u6570 \\(d_c\\) \u901a\u5e38\u53d6\u4e00\u4e2a\u5c0f\u503c(\u4f8b\u598220)\uff0c\u5bbd\u5ea6w\u901a\u5e38\u53d63 - 5\uff0c\u800c100\u662f \\(d^\u2217\\) \u7684\u4e00\u4e2a\u5178\u578b\u503c\u3002","title":"CHARACTER EMBEDDINGS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#contextualized-word-embeddings","text":"\u4e0e\u4f20\u7edf\u7684\u8bcd\u5d4c\u5165\u65b9\u5f0f\u4e0d\u540c\uff0c\u4f20\u7edf\u65b9\u6cd5\u4e2d\u4e00\u4e2a\u5355\u8bcd\u5bf9\u5e94\u4e00\u4e2a\u8bcd\u5411\u91cf\uff0c\u4f46\u662f\u60c5\u666f\u5316\u8bcd\u5d4c\u5165\u5c06\u6bcf\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6574\u4e2a\u8f93\u5165\u8bed\u53e5\u7684\u51fd\u6570\u5206\u914d\u4e00\u4e2a\u5411\u91cf\uff0c\u8fd9\u6837\u8bcd\u5411\u91cf\u80fd\u591f\u53cd\u6620\u66f4\u4e3a\u590d\u6742\u7684\u7279\u5f81(\u4f8b\u5982\u8bed\u6cd5\u548c\u8bed\u4e49)\uff0c\u5e76\u4e14\u5355\u8bcd\u7684\u5411\u91cf\u8fd8\u80fd\u6839\u636e\u4e0a\u4e0b\u6587\u610f\u601d\u8fdb\u884c\u6539\u53d8(\u4f8b\u5982\u4e00\u8bcd\u591a\u4e49) \u4ee5 ELMO \u4e3a\u4f8b\uff0c\u4ed6\u4eec\u7684\u60c5\u666f\u5316\u8bcd\u5d4c\u5165\u662f\u5728\u4e00\u4e2a\u5927\u578b\u6587\u672c\u8bed\u6599\u5e93\u4e0a\u9884\u5148\u8bad\u7ec3\u7684\u6df1\u5c42\u53cc\u5411\u8bed\u8a00\u6a21\u578b\u7684\u5185\u90e8\u72b6\u6001\u7684\u5b66\u4e60\u51fd\u6570\u3002\u57fa\u672c\u4e0a\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5355\u8bcd\u5e8f\u5217 \\(\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)\\) \uff0c\u5b83\u4eec\u8fd0\u884cLL\u5c42\u6b63\u5411LSTM\uff0c\u5e8f\u5217\u6982\u7387\u6a21\u578b\u4e3a: \\[ P\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)=\\prod_{k=1}^{n} P\\left(x_{k} | x_{1}, \\ldots, x_{k-1}\\right) \\] \u53ea\u6709\u6700\u9876\u5c42\u7684LSTM\u7684 \\(\\overrightarrow{\\mathrm{h}}_{k}^{(L)}\\) \u88ab\u7528\u6765\u9884\u6d4b\u4e0b\u4e00\u4e2atoken \\(x_{k+1}\\) \u3002\u7c7b\u4f3c\u7684\u53e6\u4e00\u4e2a \\(L\\) \u5c42LSTM\u53cd\u5411\u8fd0\u884c\u83b7\u5f97 \\(\\overleftarrow{\\mathbf{h}}_{k}^{(L)}\\) \u6765\u9884\u6d4btoken \\(x_{k-1}\\) \u3002\u603b\u4f53\u7684\u8bad\u7ec3\u76ee\u6807\u662f\u6700\u5927\u5316\u4e24\u4e2a\u65b9\u5411\u7684\u4f3c\u7136\u4f30\u8ba1\uff1a \\[ \\sum_{k=1}^{n}\\left(\\log P\\left(x_{k} | x_{1}, \\ldots, x_{k-1} ; \\Theta_{x}, \\overrightarrow{\\Theta}_{\\mathrm{LSTM}}, \\Theta_{s}\\right)+\\log P\\left(x_{k} | x_{k+1}, \\ldots, x_{n} ; \\Theta_{x}, \\overleftarrow{\\Theta}_{\\mathrm{LSTM}}, \\Theta_{s}\\right)\\right) \\] \u5176\u4e2d\uff0c \\(\\Theta_{x} ,\\Theta_{s}\\) \u662f\u4e24\u4e2aLSTM\u90fd\u5171\u4eab\u7684\u8bcd\u5d4c\u5165\u548csoftmax\u53c2\u6570\u3002\u6700\u7ec8\u7684\u60c5\u666f\u8bcd\u5d4c\u5165\u662f\u901a\u8fc7\u6240\u6709\u53cc\u5411LSTM\u5c42\u548c\u8f93\u5165\u8bcd\u5d4c\u5165\u7684\u7ebf\u6027\u7ec4\u5408\uff0c\u4e58\u4ee5\u4e00\u4e2a\u7ebf\u6027\u6807\u91cf: \\[ \\operatorname{ELMO}\\left(x_{k}\\right)=\\gamma\\left(s_{0} \\mathbf{x}_{k}+\\sum_{j=1}^{L} \\overrightarrow{s}_{j} \\overrightarrow{\\mathbf{h}}_{k}^{(j)}+\\sum_{j=1}^{L} \\overleftarrow{s}_{j} \\overleftarrow{\\mathbf{h}}_{k}^{(j)}\\right) \\] \u6240\u6709\u7684\u6743\u91cd \\(\\gamma, s_{0}, \\overrightarrow{s}_{j},\\overleftarrow{s}_{j}\\) \u90fd\u662f\u9488\u5bf9\u7279\u5b9a\u4efb\u52a1\u5728\u8bad\u7ec3\u4e2d\u5b66\u4e60\u7684\u3002 \u8fd9\u4e9b\u60c5\u666f\u5316\u7684\u5355\u8bcd\u5d4c\u5165\u901a\u5e38\u4e0e\u4f20\u7edf\u7684\u5355\u8bcd\u7c7b\u578b\u5d4c\u5165\u548c\u5b57\u7b26\u5d4c\u5165\u4e00\u8d77\u4f7f\u7528\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8fd9\u79cd\u5728\u975e\u5e38\u5927\u7684\u6587\u672c\u8bed\u6599\u5e93\u4e0a\u9884\u5148\u8bad\u7ec3\u8fc7\u7684\u8bcd\u5d4c\u5165\u662f\u975e\u5e38\u6709\u6548\u7684\u3002 \u6700\u8fd1\uff0cRadford et al. (2018) and Devlin et al. (2018)\u53d1\u73b0\u8fd9\u4e9bcontextualized word embeddings\u4e0d\u4ec5\u53ef\u4ee5\u4f5c\u4e3a\u4efb\u52a1\u7279\u5b9a\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784(\u5728\u672c\u6587\u4e2d\u662f\u4e00\u4e2a\u9605\u8bfb\u7406\u89e3\u6a21\u578b)\u4e2d\u5355\u8bcd\u8868\u793a\u7684\u7279\u5f81\uff0c\u800c\u4e14\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5fae\u8c03\u6df1\u5c42\u8bed\u8a00\u6a21\u578b\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u6700\u5c0f\u7684\u4fee\u6539\u5c31\u53ef\u4ee5\u6267\u884c\u540e\u7eed\u4efb\u52a1\u3002\u6b64\u5916, Devlin et al. (2018)\u63d0\u51fa\u4e86\u4e00\u4e2a\u806a\u660e\u7684\u65b9\u5f0f\u6765\u8bad\u7ec3\u53cc\u5411\u8bed\u8a00\u6a21\u578b: \u800c\u4e0d\u662f\u603b\u5728\u4e00\u4e2a\u65b9\u5411\u4e0a\u53e0\u52a0LSTMs\u548c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd \u867d\u7136ELMo\u91c7\u7528biLSTM\uff0c\u4f46\u5b83\u672c\u8d28\u4e0a\u662f\u4f7f\u7528\u4e24\u4e2a\u5355\u5411lstm\u5728\u4e24\u4e2a\u65b9\u5411\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd ,\u5b83\u4eec\u5728\u8f93\u5165\u5c42\u968f\u673a\u5c4f\u853d\u4e00\u4e9b\u5355\u8bcd\uff0c\u5728\u53cc\u5411\u5c42\u53e0\u52a0\uff0c\u5e76\u5728\u9876\u5c42\u9884\u6d4b\u8fd9\u4e9b\u5c4f\u853d\u5355\u8bcd\u3002\u4ed6\u4eec\u53d1\u73b0\u8fd9\u79cd\u8bad\u7ec3\u7b56\u7565\u5728\u7ecf\u9a8c\u4e0a\u975e\u5e38\u6709\u7528\u3002","title":"CONTEXTUALIZED WORD EMBEDDINGS"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#342-attention-mechanisms","text":"\u9488\u5bf9\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\uff0c\u5df2\u7ecf\u63d0\u51fa\u4e86\u8bb8\u591aAttention\u673a\u5236\uff0c\u5b83\u4eec\u7684\u76ee\u7684\u662f\u5728\u4e0d\u540c\u5c42\u6b21\u3001\u4e0d\u540c\u7c92\u5ea6\u6216\u5206\u5c42\u7684\u65b9\u5f0f\u4e0a\u6355\u6349\u95ee\u9898\u548c\u6587\u7ae0\u4e4b\u95f4\u7684\u8bed\u4e49\u76f8\u4f3c\u6027\u3002\u636e\u6211\u4eec\u6240\u77e5\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u4e00\u4e2a\u7ed3\u8bba\u3002\u6211\u4eec\u7684 THE STANFORD ATTENTIVE READER \u91c7\u7528\u7684\u662f\u6700\u7b80\u5355\u7684attention\u5f62\u5f0f\uff0c\u6b64\u5916\u6211\u4eec\u8ba4\u4e3a\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u5584\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6027\u80fd\uff1a","title":"3.4.2 Attention Mechanisms"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#bidirectional-attention","text":"\u9664\u4e86\u6211\u4eec\u5df2\u7ecf\u62e5\u6709\u7684\uff0c\u5173\u952e\u7684\u533a\u522b\u662f\u4ed6\u4eec\u6709 question-to-passage \u7684\u6ce8\u610f\u529b\uff0c\u8fd9\u610f\u5473\u7740\u54ea\u4e9b\u6bb5\u843d\u5355\u8bcd\u4e0e\u6bcf\u4e2a\u95ee\u9898\u5355\u8bcd\u6700\u76f8\u4f3c\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u8fd9\u53ef\u4ee5\u5b9e\u73b0\u4e3a:\u5bf9\u4e8e\u95ee\u9898\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u6240\u6709\u77ed\u6587\u5355\u8bcd\u7684\u6ce8\u610f\u56fe\uff0c\u4f46\u662f\u662f\u53cc\u5411\u7684\uff1a \\[ f_{q-\\text {align}}\\left(q_{i}\\right)=\\sum_{j} b_{i, j} \\mathbf{E}\\left(p_{j}\\right) \\] \u4e4b\u540e\u53ef\u4ee5\u7528\u5b83\u4f5c\u4e3a\u95ee\u9898\u7f16\u7801\u8f93\u5165\u5c42\u7684\u4e00\u90e8\u5206\u3002 Seo\u7b49\u4eba(2017)\u7684\u6ce8\u610f\u673a\u5236\u6bd4\u8f83\u590d\u6742\uff0c\u4f46\u6211\u4eec\u8ba4\u4e3a\u662f\u76f8\u4f3c\u7684\u3002\u6211\u4eec\u8fd8\u8ba4\u4e3a\uff0c\u5728\u8fd9\u4e2a\u65b9\u5411\u4e0a\u7684\u6ce8\u610f\u529b\u529f\u80fd\u6ca1\u6709\u90a3\u4e48\u6709\u7528\uff0cSeo\u7b49\u4eba(2017)\u4e5f\u8bc1\u660e\u4e86\u8fd9\u4e00\u70b9\u3002\u8fd9\u662f\u56e0\u4e3a\u95ee\u9898\u4e00\u822c\u90fd\u5f88\u77ed(\u5e73\u574710-20\u4e2a\u5355\u8bcd)\uff0c\u4f7f\u7528\u4e00\u4e2aLSTM\u8fdb\u884c\u95ee\u9898\u7f16\u7801(\u65e0\u9700\u989d\u5916\u6ce8\u610f)\u901a\u5e38\u5c31\u8db3\u591f\u4e86\u3002","title":"BIDIRECTIONAL ATTENTION"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#self-attention-over-passage","text":"\u76f4\u89c2\u7684\u611f\u89c9\u662f\uff0c\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd\u53ef\u4ee5\u4e0e\u5176\u4ed6\u6587\u7ae0\u4e2d\u7684\u5355\u8bcd\u5bf9\u9f50\uff0c\u5e0c\u671b\u5b83\u53ef\u4ee5\u89e3\u51b3\u6307\u4ee3\u95ee\u9898\uff0c\u5e76\u4ece\u6587\u7ae0\u4e2d\u7684\u591a\u4e2a\u4f4d\u7f6e\u805a(\u540c\u4e00\u5b9e\u4f53\u7684\u4fe1\u606f\u3002 \u9996\u5148\u8ba1\u7b97\u51fa\u6587\u7ae0\u7684\u9690\u5c42\u5411\u91cf \\(\\mathbf{p}_{1}, \\mathbf{p}_{2}, \\dots, \\mathbf{p}_{l_{p}}\\) \uff0c\u7136\u540e\u901a\u8fc7\u5728\u5176\u4e0a\u4e3a\u6bcf\u4e00\u4e2api\u4f7f\u7528MLP\u5b9e\u73b0\u6ce8\u610f\u529b\u51fd\u6570\uff1a \\[ \\begin{aligned} a_{i, j} &=\\frac{\\exp \\left(g_{\\mathrm{MLP}}\\left(\\mathbf{p}_{i}, \\mathbf{p}_{j}\\right)\\right)}{\\sum_{j^{\\prime}} \\exp \\left(g_{\\mathrm{MLP}}\\left(\\mathbf{p}_{i}, \\mathbf{p}_{j^{\\prime}}\\right)\\right)} \\\\ \\mathbf{c}_{i} &=\\sum_{j} a_{i, j} \\mathbf{p}_{j} \\end{aligned} \\] \u968f\u540e\uff0c \\(c_i\\) \u548c \\(p_i\\) \u90fd\u88ab\u8fde\u63a5\u5e76\u6295\u5165\u5230\u53e6\u4e00\u4e2aBiLSTM : \\(\\mathbf{h}_{i}^{(p)}=\\operatorname{BiLSTM}\\left(\\mathbf{h}_{i-1}^{(p)},\\left[\\mathbf{p}_{i}, \\mathbf{c}_{i}\\right]\\right)\\) \u4e2d\uff0c\u53ef\u4ee5\u88ab\u7528\u505a\u6700\u7ec8\u7684\u6587\u7ae0\u8868\u793a\u3002","title":"SELF-ATTENTION OVER PASSAGE"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#343-alternatives-to-lstms","text":"\u6df1\u5c42\u7684LSTM\u6bd4\u6d45\u5c42\u7684LSTM\u8981\u597d\uff0c\u4f46\u662f\u4f1a\u5e26\u6765\u4e24\u4e2a\u96be\u4ee5\u4f18\u5316\u7684\u95ee\u9898\uff1a\u68af\u5ea6\u6d88\u5931\uff1b\u53ef\u6269\u5c55\u6027\u5dee\uff0c\u56e0\u4e3a\u968f\u7740\u5c42\u6570\u7684\u589e\u52a0\uff0c\u8bad\u7ec3/\u63a8\u7406\u65f6\u95f4\u5448\u7ebf\u6027\u589e\u957f\u3002\u7531\u4e8eLSTMs\u7684\u987a\u5e8f\u6027\uff0c\u5b83\u5f88\u96be\u5e76\u884c\u5316\uff0c\u56e0\u6b64\u4f38\u7f29\u6027\u5f88\u5dee\u3002 \u4e00\u65b9\u9762\uff0c\u6709\u4e00\u4e9b\u5de5\u4f5c\u5c1d\u8bd5\u5728\u5c42\u4e0e\u5c42\u4e4b\u95f4\u6dfb\u52a0 highway \u8fde\u63a5\u6216residual\u8fde\u63a5(He et al.\uff0c 2016)\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u4f18\u5316\u8fc7\u7a0b\uff0c\u80fd\u591f\u8bad\u7ec3\u66f4\u591a\u5c42\u7684LSTMs\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u4eba\u4eec\u5f00\u59cb\u5bfb\u627eLSTMs\u7684\u66ff\u4ee3\u54c1\uff0c\u5728\u6d88\u9664\u91cd\u590d\u7ed3\u6784\u7684\u540c\u65f6\uff0c\u6027\u80fd\u4ecd\u7136\u7c7b\u4f3c\u751a\u81f3\u66f4\u597d\u3002 \u8fd9\u65b9\u9762\u6700\u503c\u5f97\u6ce8\u610f\u7684\u5de5\u4f5c\u662f\u8c37\u6b4c\u7814\u7a76\u4eba\u5458\u63d0\u51fa\u7684 TRANSFORMER \u6a21\u578b\u3002\u4ec5\u5efa\u7acb\u5728\u5355\u8bcd\u5d4c\u5165\u548c\u7b80\u5355\u7684\u4f4d\u7f6e\u7f16\u7801\u4e4b\u4e0a\uff0c\u8fd9\u4e9b\u4f4d\u7f6e\u7f16\u7801\u5177\u6709\u5806\u53e0\u7684\u81ea\u6211\u5173\u6ce8\u5c42\u548c position-wise \u7684\u5168\u8fde\u63a5\u5c42\u3002\u901a\u8fc7\u6b8b\u5dee\u8fde\u63a5\uff0c\u8be5\u6a21\u578b\u80fd\u591f\u5728\u591a\u4e2a\u5c42\u6b21\u4e0a\u5feb\u901f\u8bad\u7ec3\u3002\u5b83\u9996\u5148\u5728L = 6\u5c42\u7684\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u4e0a\u8868\u73b0\u51fa\u4f18\u5f02\u7684\u6027\u80fd(\u6bcf\u5c42\u7531\u4e00\u4e2a\u81ea\u6211\u6ce8\u610f\u548c\u4e00\u4e2a\u5b8c\u5168\u8fde\u63a5\u7684\u524d\u9988\u7f51\u7edc\u7ec4\u6210)\uff0c\u7136\u540e\u88abYu\u7b49\u4eba(2018)\u6539\u7f16\u7528\u4e8e\u9605\u8bfb\u7406\u89e3 \u8be5\u6a21\u578b\u540d\u4e3a QANET (Yu ET al.,2018)\uff0c\u5b83\u5806\u53e0\u4e86\u591a\u4e2a\u5377\u79ef\u5c42\uff0c\u4ee5self-attention\u548c\u5168\u8fde\u63a5\u5c42\u4e3a\u4e2d\u5fc3\uff0c\u4f5c\u4e3a\u95ee\u9898\u548c\u6bb5\u843d\u7f16\u7801\u7684\u6784\u5efa\u5757\uff0c\u4ee5\u53ca\u5728\u6700\u7ec8\u9884\u6d4b\u4e4b\u524d\u5806\u53e0\u7684\u51e0\u4e2a\u5c42\u3002\u8be5\u6a21\u578b\u663e\u793a\u4e86\u5f53\u65f6\u6700\u5148\u8fdb\u7684\u6027\u80fd(\u88683.4)\uff0c\u540c\u65f6\u663e\u793a\u4e86\u663e\u8457\u7684\u52a0\u901f\u3002 \u6539\u8fdb\u7684simple recurrent unit( SRU )\uff0c\u7b80\u5316\u5faa\u73af\u7684\u540c\u65f6\u4fdd\u6301\u6a21\u578b\u80fd\u529b\u3002","title":"3.4.3 Alternatives to LSTMs"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#344-others","text":"","title":"3.4.4 Others"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#training-objectives","text":"cloze style\u6216\u8005multiple choice \u901a\u5e38\u76f4\u63a5\u4f7f\u7528\u4ea4\u53c9\u71b5\u6216\u8005\u662f\u6700\u5927\u8fb9\u754c\u635f\u5931\uff0c\u4f46\u662f\u5bf9\u4e8e\u8303\u56f4\u9884\u6d4b\u95ee\u9898\uff0c Xiong et al. (2018)\u63d0\u51fa\u9884\u6d4b\u7b54\u6848\u4e24\u4e2a\u7aef\u70b9\u7684\u4ea4\u53c9\u71b5\u635f\u5931\u4e0e\u6700\u7ec8\u8bc4\u4ef7\u6307\u6807\u4e4b\u95f4\u5b58\u5728\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u5373 gold answer\u4e0e ground truth\u4e4b\u95f4\u5b58\u5728\u91cd\u53e0\u3002\u4f8b\u5982: Span \u201cWarriors\u201d \u4e5f\u662f\u4e00\u4e2a\u6b63\u786e\u7684\u7b54\u6848\uff0c\u4f46\u662f\u4ece\u4ea4\u53c9\u71b5\u8bad\u7ec3\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5b83\u5e76\u4e0d\u6bd4 span \u201chistory\u201d\u66f4\u597d\u3002Xiong\u7b49\u4eba(2018)\u63d0\u51fa\u4e86\u4e00\u79cd\u6df7\u5408\u8bad\u7ec3\u76ee\u6807\uff0c\u5c06\u4f4d\u7f6e\u4ea4\u53c9\u71b5\u635f\u5931\u548c\u8bad\u7ec3\u540e\u7684\u5355\u8bcd\u91cd\u53e0\u91cf\u4e0e\u5f3a\u5316\u5b66\u4e60\u76f8\u7ed3\u5408\u3002\u57fa\u672c\u4e0a\uff0c\u4ed6\u4eec\u4f7f\u7528 \\(P^{(start)}{(i)}\\) \u548c \\(P^{(end)}{(i)}\\) \u91c7\u7528\u4ea4\u53c9\u71b5\u8bad\u7ec3\uff0c\u62bd\u53d6\u7b54\u6848\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u4f5c\u4e3a\u6837\u672c\uff0c\u7136\u540e\u4f7f\u7528F1 Score\u4f5c\u4e3a\u5956\u52b1\u51fd\u6570\u3002 \u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u81ea\u7531\u5f62\u5f0f\u56de\u7b54\uff0c\u8fd1\u5e74\u6765\u5728\u8bad\u7ec3\u66f4\u597d\u7684seq2seq\u6a21\u578b\u65b9\u9762\u6709\u4e86\u8bb8\u591a\u8fdb\u5c55\uff0c\u5c24\u5176\u662f\u5728\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u7684\u80cc\u666f\u4e0b\uff0c\u5982sentence-level training (Ranzato et al.,2016)\u548c minimum risk training (Shen et al.,2016)\u3002\u7136\u800c\uff0c\u6211\u4eec\u5728\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e0a\u8fd8\u6ca1\u6709\u770b\u5230\u5f88\u591a\u8fd9\u6837\u7684\u5e94\u7528\u3002","title":"TRAINING OBJECTIVES"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#data-augmentation","text":"\u5229\u7528\u4e86\u4e24\u79cd\u6700\u5148\u8fdb\u7684\u795e\u7ecf\u673a\u5668\u7ffb\u8bd1\u6a21\u578b:\u4e00\u79cd\u662f\u4ece\u82f1\u8bed\u5230\u6cd5\u8bed\u7684\u6a21\u578b\uff0c\u53e6\u4e00\u79cd\u662f\u4ece\u6cd5\u8bed\u5230\u82f1\u8bed\u7684\u6a21\u578b\u3002\u5c06\u6cd5\u8bed\u7ffb\u8bd1\u6210\u82f1\u8bed\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c\u8fd9\u4e24\u4e2a\u6a21\u578b\u6765\u89e3\u91ca\u6587\u7ae0\u4e2d\u7684\u6bcf\u4e00\u4e2a\u53e5\u5b50(\u5982\u679c\u9700\u8981\u7684\u8bdd\uff0c\u5bf9\u7b54\u6848\u505a\u4e00\u4e9b\u4fee\u6539)\u3002","title":"DATA AUGMENTATION"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#345-summary","text":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u4e0d\u540c\u65b9\u9762\u7684\u6700\u65b0\u8fdb\u5c55\uff0c\u8fd9\u4e9b\u8fdb\u5c55\u5bf9\u5f53\u524d\u9605\u8bfb\u7406\u89e3\u57fa\u51c6\u6d4b\u8bd5(\u5c24\u5176\u662fSQUAD)\u7684\u6700\u65b0\u8fdb\u5c55\u505a\u51fa\u4e86\u8d21\u732e\u3002\u54ea\u4e9b\u7ec4\u4ef6\u6bd4\u5176\u4ed6\u7ec4\u4ef6\u66f4\u91cd\u8981?\u6211\u4eec\u9700\u8981\u628a\u8fd9\u4e9b\u90fd\u52a0\u8d77\u6765\u5417?\u8fd9\u4e9b\u6700\u65b0\u7684\u8fdb\u5c55\u662f\u5426\u53ef\u4ee5\u63a8\u5e7f\u5230\u5176\u4ed6\u9605\u8bfb\u7406\u89e3\u4efb\u52a1?\u5b83\u4eec\u5982\u4f55\u4e0e\u4e0d\u540c\u7684\u8bed\u8a00\u7406\u89e3\u80fd\u529b\u76f8\u5173\u8054?\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u95ee\u9898\u4e2d\u7684\u5927\u591a\u6570\u8fd8\u6ca1\u6709\u4e00\u4e2a\u660e\u786e\u7684\u7b54\u6848\uff0c\u4ecd\u7136\u9700\u8981\u5927\u91cf\u7684\u8c03\u67e5\u3002 \u6b63\u5982\u6240\u770b\u5230\u7684\uff0c\u6240\u6709\u8fd9\u4e9b\u7ec4\u4ef6\u6216\u591a\u6216\u5c11\u90fd\u4f1a\u5bf9\u6700\u7ec8\u7684\u6027\u80fd\u505a\u51fa\u8d21\u732e\u3002\u6700\u91cd\u8981\u7684\u521b\u65b0\u53ef\u80fd\u662f\u4f7f\u7528\u60c5\u666f\u5316\u5355\u8bcd\u5d4c\u5165(\u4f8b\u5982ELMO)\uff0c\u800c\u6ce8\u610f\u529f\u80fd\u7684\u8868\u8fbe\u4e5f\u5f88\u91cd\u8981\u3002\u7814\u7a76\u8fd9\u4e9b\u8fdb\u6b65\u662f\u5426\u53ef\u4ee5\u63a8\u5e7f\u5230\u672a\u6765\u7684\u5176\u4ed6\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\uff0c\u5c06\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002","title":"3.4.5 Summary"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#chapter-4-the-future-of-reading-comprehension","text":"\u9996\u5148\u5728\u4e4b\u524d\u7684\u7ae0\u8282\u4e2d\u5df2\u7ecf\u63cf\u8ff0\u4e86\u795e\u7ecf\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u5728\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u4e2d\u7684\u6210\u529f\u5e94\u7528\u4ee5\u53ca\u4ed6\u4eec\u7684\u4e00\u4e9b\u5173\u952e\u70b9\u3002\u5c3d\u7ba1\u5df2\u7ecf\u6709\u4e86\u5f88\u5927\u7684\u8fdb\u6b65\uff0c\u4f46\u662f\u8ddd\u79bb\u4eba\u5de5\u9605\u8bfb\u7406\u89e3\u8fd8\u662f\u5b58\u5728\u6709\u4e00\u5b9a\u7684\u5dee\u8ddd\u3002 \u57284.1\u4e3b\u8981\u662f\u63d0\u51fa\u4e00\u4e9b\u73b0\u5b58\u6a21\u578b\u9884\u6d4b\u9519\u8bef\u7684\u4f8b\u5b50\uff0c\u8bf4\u660e\u8fd9\u4e9b\u6a21\u578b\u867d\u7136\u80fd\u591f\u5728\u4e00\u822c\u7684\u5e94\u7528\u4e0a\u53d6\u5f97\u9ad8\u6027\u80fd\uff0c\u4f46\u662f\u5374\u4ecd\u7136\u5728\u5f88\u591a\u7b80\u5355\u7684\u7684\u5c0f\u95ee\u9898\u4e0a\u51fa\u73b0\u9884\u6d4b\u9519\u8bef\uff1b\u57284.2\u548c4.3\u5206\u522b\u8bb2\u8ff0\u6570\u636e\u96c6\u548c\u6a21\u578b\u5bf9\u4e8e\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u7684\u5f71\u54cd\u548c\u5b58\u5728\u7684\u4e0d\u8db3\u4ee5\u53ca\u9700\u8981\u6df1\u5165\u7814\u7a76\u7684\u65b9\u5411\uff1b\u57284.4\u56de\u987e\u672c\u9886\u57df\u51e0\u4e2a\u91cd\u8981\u7684\u7814\u7a76\u95ee\u9898\u3002","title":"Chapter 4 The Future of Reading Comprehension"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#41-is-squad-solved-yet","text":"\u5c3d\u7ba1\u5728SQuAD\u6570\u636e\u96c6\u4e0a\uff0c\u673a\u5668\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8d85\u8d8a\u4eba\u7c7b\u7684\u8868\u73b0\uff0c\u4f46\u662f\u901a\u8fc7\u5206\u6790\u53ef\u4ee5\u53d1\u73b0\uff0c\u6a21\u578b\u4f9d\u65e7\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\u3002\u4ece\u4e00\u4e9b\u9519\u8bef\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0c\u5373\u4fbf\u662f\u5728\u8be5\u6570\u636e\u96c6\u4e0a\u8868\u73b0\u6700\u4f73\u7684bert\u6a21\u578b\uff0c\u4ecd\u7136\u7f3a\u4e4f\u5bf9\u6587\u672c\u4e3b\u4f53\u548c\u4e8b\u4ef6\u4e4b\u95f4\u5185\u5728\u7ed3\u6784\u7684\u7406\u89e3\u3002\u8fd9\u4e9b\u6a21\u578b\u4e00\u76f4\u5728\u8fdb\u884c\u975e\u5e38\u590d\u6742\u7684\u6587\u672c\u5339\u914d\uff0c\u4f46\u5b83\u4eec\u4ecd\u7136\u96be\u4ee5\u7406\u89e3\u5b9e\u4f53\u548c\u6587\u672c\u4e2d\u6240\u8868\u8fbe\u7684\u4e8b\u4ef6\u4e4b\u95f4\u7684\u5185\u5728\u7ed3\u6784\u3002 \u8fd8\u6709\u5b66\u8005\u53d1\u73b0\u5728**\u6587\u672b**\u6dfb\u52a0\u4e00\u4e9b\u5206\u6563\u6ce8\u610f\u529b\u7684\u53e5\u5b50\uff0c\u8fd9\u4e9b\u53e5\u5b50\u4e0e\u95ee\u9898\u6709\u5355\u8bcd\u91cd\u53e0\uff0c\u4f46\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u4e0e\u6b63\u786e\u7b54\u6848\u76f8\u77db\u76fe\uff0c\u4e5f\u6ca1\u6709\u8bef\u5bfc\u4eba\u7c7b\u7684\u7406\u89e3\uff0c\u4f46\u5374\u4f1a\u8ba9\u6a21\u578b\u8868\u73b0\u5927\u5e45\u4e0b\u964d\u3002\u5982\u679c\u6dfb\u52a0\u4e0d\u7b26\u5408\u8bed\u6cd5\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u6548\u679c\u4f1a\u66f4\u7cdf\u3002\u8fd9\u8bf4\u660e\u76ee\u524d\u7684\u6a21\u578b \u4e25\u91cd\u4f9d\u8d56\u4e8e\u6587\u7ae0\u548c\u95ee\u9898\u4e4b\u95f4\u7684\u8bcd\u6c47\u7ebf\u7d22 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5206\u6563\u6ce8\u610f\u529b\u7684\u53e5\u5b50\u4f1a\u5982\u6b64\u5177\u6709\u7834\u574f\u6027 \u5bf9\u4e8e\u5bf9\u6297\u6027\u6837\u672c\u5b58\u5728\u9c81\u68d2\u6027\u5dee \u7b49\u7f3a\u70b9 \u8fd9\u662f\u76d1\u7763\u5b66\u4e60\u7684\u4e00\u4e2a\u5173\u952e\u95ee\u9898\uff0c\u5b83\u4f7f\u5f97\u73b0\u6709\u7684\u6a21\u578b\u96be\u4ee5\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u90e8\u7f72 \u603b\u4e4b\uff0c\u5c3d\u7ba1\u6a21\u578b\u5728SQuAD\u4e0a\u6709\u4e86\u5f88\u9ad8\u7684\u6b63\u786e\u7387\uff0c\u4f46\u8fd9\u4e9b\u6a21\u578b\u4f9d\u65e7\u505c\u7559\u5728\u5bf9\u6587\u672c\u6d45\u5c42\u6b21\u7ed3\u6784\u4fe1\u606f\u7684\u7406\u89e3\u4e0a\uff0c\u5bf9\u4e8e\u6df1\u5c42\u6b21\u7ed3\u6784\u7684\u7406\u89e3\u8fd8\u662f\u4f1a\u72af\u5f88\u591a\u7b80\u5355\u7684\u9519\u8bef\u3002\u5728SQUAD\u4e2d\u6709\u4e00\u4e9b\u56f0\u96be\u7684\u4f8b\u5b50\u9700\u8981\u590d\u6742\u7684\u63a8\u7406\uff0c\u4f46\u662f\u7531\u4e8e\u5b83\u4eec\u7684\u7a00\u7f3a\u6027\uff0c\u8fd9\u7c7b\u95ee\u9898\u7684\u51c6\u786e\u6027\u5e76\u6ca1\u6709\u771f\u6b63\u53cd\u6620\u5728\u5e73\u5747\u5ea6\u91cf\u7ed3\u679c\u4e2d\u3002\u6b64\u5916\uff0c\u9ad8\u51c6\u786e\u7387\u53ea\u6709\u5728\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\u6765\u81ea\u540c\u4e00\u5206\u5e03\u65f6\u624d\u6210\u7acb\uff0c\u5206\u5e03\u4e0d\u540c\u5219\u5177\u6709\u4e25\u91cd\u7684\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u9700\u8981\u5efa\u7acb\u66f4\u4e3a\u5168\u9762\u7684\u6570\u636e\u96c6\u4ee5\u53ca\u66f4\u6709\u6548\u7684\u6a21\u578b\u3002","title":"4.1 Is SQuAD Solved Yet?"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#42-future-work-datasets","text":"\u4e0a\u6587\u4e2d\u6211\u4eec\u8ba8\u8bba\u5e76\u8bc1\u660e\u4e86\uff1a\u795e\u7ecf\u6a21\u578b\u80fd\u591f\u5b9e\u73b0\u8d85\u4eba\u7c7b\u6216\u9876\u5cf0\u6027\u80fd\uff1b\u867d\u7136\u8fd9\u4e9b\u6570\u636e\u96c6\u975e\u5e38\u6709\u7528\uff0c\u4f46\u5927\u591a\u6570\u4f8b\u5b50\u90fd\u5f88\u7b80\u5355\uff0c\u4e14\u4e0d\u9700\u8981\u592a\u591a\u63a8\u7406\u3002\u8fd9\u4e9b\u6570\u636e\u96c6\u4e2d\u7f3a\u5c11\u4e86\u4ec0\u4e48\u5c5e\u6027\u5462\uff1f\u6211\u4eec\u63a5\u4e0b\u6765\u5e94\u8be5\u5236\u4f5c\u600e\u6837\u7684\u6570\u636e\u96c6\uff0c\u600e\u6837\u6536\u96c6\u66f4\u597d\u7684\u6570\u636e\u96c6\u5462\uff1f \u4ee5SQUAD\u4e3a\u4f8b\uff0c\u4e3b\u8981\u7531\u4ee5\u4e0b\u9650\u5236\uff1a \u95ee\u7b54\u7684\u95ee\u9898\u662f\u6839\u636e\u8fd9\u7bc7\u6587\u7ae0\u63d0\u51fa\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u63d0\u95ee\u8005\u5728\u63d0\u95ee\u65f6\u770b\u7740\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4ed6\u4eec\u5f88\u53ef\u80fd\u4f1a\u6a21\u4eff\u53e5\u5b50\u7ed3\u6784\uff0c\u91cd\u590d\u4f7f\u7528\u76f8\u540c\u7684\u5355\u8bcd\u3002\u8fd9\u51cf\u8f7b\u4e86\u56de\u7b54\u95ee\u9898\u7684\u96be\u5ea6\uff0c\u56e0\u4e3a\u8bb8\u591a\u95ee\u9898\u7684\u5355\u8bcd\u4e0e\u6587\u7ae0\u4e2d\u7684**\u5355\u8bcd\u91cd\u53e0** \u3002 \u95ee\u7b54\u7684\u95ee\u9898\u662f\u6587\u672c\u77ed\u8ddd\u79bb\u7684\u8de8\u5ea6\u9884\u6d4b\u3002\u8fd9\u4e0d\u4ec5\u610f\u5473\u7740\u6240\u6709\u7684\u95ee\u9898\u90fd\u662f\u53ef\u56de\u7b54\u7684\uff0c\u800c\u4e14\u8fd8\u6392\u9664\u4e86\u8bb8\u591a\u53ef\u80fd\u63d0\u51fa\u7684\u95ee\u9898\uff0c\u5982 yes/no \u3001 count \u95ee\u9898\u3002\u6b63\u5982\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u8fc7\u7684\uff0cSQUAD\u4e2d\u7684\u5927\u591a\u6570\u95ee\u9898\u90fd\u662f\u4e8b\u5b9e\u6027\u7684\u95ee\u9898\uff0c\u7b54\u6848\u901a\u5e38\u90fd\u5f88\u77ed(\u5e73\u57473.1 tokens)\u3002\u56e0\u6b64\uff0c\u6570\u636e\u96c6\u4e2d\u4e5f\u5f88\u5c11\u6709 why (\u56e0\u679c\u5173\u7cfb)\u548c how (\u8fc7\u7a0b)\u7684\u95ee\u9898\u3002 \u5927\u90e8\u5206\u7684\u95ee\u7b54\u95ee\u9898\u90fd\u662f\u901a\u8fc7\u5355\u4e2a\u53e5\u5b50\u6765\u9884\u6d4b\uff0c\u57fa\u672c\u4e0d\u9700\u8981\u591a\u6bb5\u6587\u5b57\u63a8\u7406\u3002\u5e76\u4e14\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5728\u89e3\u51b3\u6307\u4ee3\u95ee\u9898\uff0c\u800c\u6307\u4ee3\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u6307\u4ee3\u7cfb\u7edf\u6765\u89e3\u51b3 \u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u9650\u5236\uff0c\u51fa\u73b0\u4e86\u5f88\u591a\u65b0\u7684\u6570\u636e\u96c6\uff1a TriviaQA \u5148\u6536\u96c6\u95ee\u9898/\u7b54\u6848\u5bf9\uff0c\u7136\u540e\u6784\u5efa\u76f8\u5e94\u7684\u6bb5\u843d\uff0c\u6570\u636e\u91cf\u6781\u5927\uff0c\u4f46\u662f\u4e0d\u80fd\u4fdd\u8bc1P\u63d0\u4f9b\u4e86Q\u7684A RACE \u7528\u4eba\u7c7b\u7684\u6807\u51c6\u5316\u6d4b\u8bd5\u8bc4\u4f30\u673a\u5668\u9605\u8bfb\u7406\u89e3\u80fd\u529b\uff0c\u4e13\u5bb6\u8bbe\u5b9a\u95ee\u9898\u548c\u7b54\u6848\uff084\u4e2a\u5019\u9009\uff09\uff0c\u5e76\u4e14\u6709\u00bc\u662f\u9700\u8981\u591a\u4e2a\u8bed\u53e5\u63a8\u7406\u7684 NarrativeQA \u6839\u636e\u4e66\u6216\u7535\u5f71\u7684\u60c5\u8282\u6458\u8981\u8fdb\u884c\u63d0\u95ee\uff0c\u6ce8\u91ca\u8005\u88ab\u9f13\u52b1\u4f7f\u7528\u81ea\u5df1\u7684\u6587\u5b57\u5e76\u4e14\u4e0d\u5141\u8bb8\u590d\u5236\u6587\u4e2d\u7684\u8bed\u53e5\u3002\u60c5\u8282\u6458\u8981\u901a\u5e38\u5305\u542b\u66f4\u591a\u7684\u4eba\u7269\u548c\u4e8b\u4ef6\uff0c\u6bd4\u65b0\u95fb\u6587\u7ae0\u6216\u7ef4\u57fa\u767e\u79d1\u6bb5\u843d\u66f4\u590d\u6742\u3002\u6709\u57fa\u4e8e\u6458\u8981\u7684(\u5e73\u5747659tokens)\u548c\u57fa\u4e8e\u5b8c\u6574\u4e66\u7c4d/\u7535\u5f71\u811a\u672c(\u5e73\u574762528tokens)\u56de\u7b54\u7684\u3002\u7531\u4e8e\u7b54\u6848\u662f\u81ea\u7531\u5f62\u5f0f\u7684\uff0c\u7f3a\u4e4f\u4e00\u81f4\u6027\uff0c\u5f88\u96be\u8bc4\u4f30 SQuAD 2.0 \u589e\u52a0\u8d1f\u6837\u672c\u4f8b\u5b50\u3002\u8fd9\u4e9b\u95ee\u9898\u4e0d\u80fd\u4ece\u6587\u7ae0\u4e2d\u5f97\u5230\u7b54\u6848\uff0c\u4f46\u662f\u770b\u8d77\u6765\u548c\u6b63\u6837\u672c\u95ee\u9898(\u76f8\u5173\u7684\uff0c\u6587\u7ae0\u4e2d\u6709\u4e00\u4e2a\u53ef\u4fe1\u7684\u7b54\u6848)\u5f88\u76f8\u4f3c\u3002 \u4e3a\u4e86\u5f88\u597d\u5730\u5904\u7406\u6570\u636e\u96c6\uff0c\u7cfb\u7edf\u4e0d\u4ec5\u9700\u8981\u56de\u7b54\u95ee\u9898\uff0c\u8fd8\u9700\u8981\u786e\u5b9a\u6bb5\u843d\u4e2d\u4ec0\u4e48\u65f6\u5019\u4e0d\u652f\u6301\u56de\u7b54\uff0c\u5e76\u907f\u514d\u56de\u7b54 \u3002\u8fd9\u662f\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u9762\uff0c\u4f46\u5728\u4ee5\u524d\u7684\u6570\u636e\u96c6\u4e2d\u88ab\u5ffd\u7565\u4e86\u3002 HotpotQA \u95ee\u7b54\u95ee\u9898\u9700\u8981\u5206\u6790\u591a\u4e2a\u652f\u6301\u6587\u6863\u3002\u7b2c\u4e00\u4e2a\u662f\u5e72\u6270\u8bbe\u7f6e\uff0c\u5176\u4e2d\u6bcf\u4e2a\u95ee\u9898\u90fd\u63d0\u4f9b10\u4e2a\u6bb5\u843d\uff0c\u5305\u62ec\u7528\u4e8e\u6784\u5efa\u95ee\u9898\u7684\u4e24\u4e2a\u6bb5\u843d\u548c\u4eceWikipedia\u68c0\u7d22\u5230\u76848\u4e2a\u5e72\u6270\u6bb5\u843d;\u7b2c\u4e8c\u4e2a\u8bbe\u7f6e\u662f\u4f7f\u7528\u5b8c\u6574\u7684Wikipedia\u6765\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\u3002 \u4e0e SQUAD \u76f8\u6bd4\uff0c\u8fd9\u4e9b\u6570\u636e\u96c6\u8981\u4e48\u9700\u8981\u66f4\u590d\u6742\u7684\u8de8\u65f6\u6001\u6216\u6587\u6863\u63a8\u7406\uff0c\u8981\u4e48\u9700\u8981\u5904\u7406\u66f4\u957f\u7684\u6587\u6863\uff0c\u8981\u4e48\u9700\u8981\u751f\u6210\u81ea\u7531\u5f62\u5f0f\u7684\u7b54\u6848\u800c\u4e0d\u662f\u63d0\u53d6\u5355\u4e2a\u8de8\u5ea6\uff0c\u8981\u4e48\u9700\u8981\u9884\u6d4b\u6587\u7ae0\u4e2d\u4f55\u65f6\u6ca1\u6709\u7b54\u6848\u3002\u5b83\u4eec\u5e26\u6765\u4e86\u65b0\u7684\u6311\u6218\uff0c\u8bb8\u591a\u6311\u6218\u4ecd\u7136\u8d85\u51fa\u4e86\u73b0\u6709\u6a21\u578b\u7684\u8303\u56f4\u3002 \u6211\u4eec\u76f8\u4fe1\u8fd9\u4e9b\u6570\u636e\u96c6\u5c06\u5728\u672a\u6765\u8fdb\u4e00\u6b65\u6fc0\u53d1\u4e00\u7cfb\u5217\u7684\u5efa\u6a21\u521b\u65b0\u3002\u5f53\u6211\u4eec\u7684\u6a21\u578b\u8fbe\u5230\u4e0b\u4e00\u4e2a\u6027\u80fd\u7ea7\u522b\u540e\uff0c\u6211\u4eec\u5c06\u9700\u8981\u5f00\u59cb\u6784\u5efa\u66f4\u52a0\u56f0\u96be\u7684\u6570\u636e\u96c6\u6765\u89e3\u51b3\u3002","title":"4.2 Future Work: Datasets"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#43-future-work-models","text":"\u6211\u4eec\u63a5\u4e0b\u6765\u4ecb\u7ecd\u672a\u6765\u5de5\u4f5c\u6a21\u578b\u7684\u7814\u7a76\u65b9\u5411\u3002 \u6211\u4eec\u9996\u5148\u63cf\u8ff0\u4e86\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u7684\u671f\u671b\uff1a\u73b0\u6709\u7684\u5927\u90e8\u5206\u5de5\u4f5c\u53ea\u6ce8\u91cd\u51c6\u786e\u6027,\u7ed9\u5b9a\u4e00\u4e2a\u6570\u636e\u96c6\u5206\u5272,\u4e3b\u8981\u76ee\u6807\u662f\u5f97\u5230\u6700\u597d\u7684\u6d4b\u8bd5\u51c6\u786e\u6027\u5206\u6570\u3002\u4f46\u662f,\u6211\u4eec\u8ba4\u4e3a\u8fd8\u6709\u5176\u4ed6\u91cd\u8981\u7684\u65b9\u9762\u88ab\u5ffd\u89c6\u4e86,\u6211\u4eec\u5728\u672a\u6765\u9700\u8981\u5305\u62ec**\u901f\u5ea6\u548c\u53ef\u6269\u5c55\u6027\u3001\u5065\u58ee\u6027\u548c\u53ef\u89e3\u91ca**\u6027\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u5f53\u524d\u6a21\u578b\u4e2d\u8fd8\u7f3a\u5c11\u54ea\u4e9b\u91cd\u8981\u5143\u7d20","title":"4.3 Future Work: Models"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#431-desiderata","text":"\u9664\u4e86\u51c6\u786e\u6027(\u5728\u6807\u51c6\u6570\u636e\u96c6\u4e0a\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u5206\u6570)\uff0c\u540e\u7eed\u7684\u9700\u6c42\u5bf9\u672a\u6765\u7684\u5de5\u4f5c\u4e5f\u975e\u5e38\u91cd\u8981\uff1a Speed and Scalability \u5982\u4f55\u6784\u5efa\u66f4\u5feb\u7684\u6a21\u578b(train\u548cinference\u90fd\u8981\u5feb)\uff0c\u4ee5\u53ca\u5982\u4f55\u6269\u5c55\u5230\u66f4\u957f\u7684\u6587\u6863\uff0c\u8fd9\u4e9b\u90fd\u662f\u9700\u8981\u7814\u7a76\u7684\u91cd\u8981\u65b9\u5411\u3002\u5efa\u7acb\u66f4\u5feb\u7684\u8bad\u7ec3\u6a21\u578b\u53ef\u4ee5\u964d\u4f4e\u5b9e\u9a8c\u7684\u5468\u8f6c\u65f6\u95f4\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u6211\u4eec\u5728\u66f4\u5927\u7684\u6570\u636e\u96c6\u4e0a\u8fdb\u884c\u8bad\u7ec3\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u90e8\u7f72\u6a21\u578b\u65f6\uff0c\u4e3a\u63a8\u7406\u6784\u5efa\u66f4\u5feb\u7684\u6a21\u578b\u975e\u5e38\u6709\u7528\u3002\u6b64\u5916\uff0c\u7f16\u7801\u5f88\u957f\u7684\u6587\u6863\u662f\u4e0d\u73b0\u5b9e\u7684 (\u4f8b\u5982\uff0cTRIVIAQA)\uff0c\u751a\u81f3\u662f\u4e00\u6574\u672c\u4e66(\u4f8b\u5982\uff0cNARRATIVEQA)\u4f7f\u7528RNN\uff0c\u8fd9\u4ecd\u7136\u662f\u4e00\u4e2a\u4e25\u5cfb\u7684\u6311\u6218\u3002 \u73b0\u6709\u7684\u89e3\u51b3\u529e\u6cd5\u5305\u62ec\uff1a \u4f7f\u7528Transformer\u6216SRU\u4ee3\u66ffLSTM Train\u9636\u6bb5\uff0c\u5b66\u4e60\u8df3\u8fc7\u90e8\u5206\u6587\u6863\u4e0d\u9700\u8981\u9605\u8bfb\u6240\u6709\u7684\u5185\u5bb9\uff0c\u8fd0\u884c\u66f4\u5feb\u5e76\u4e14\u4fdd\u6301\u7c7b\u4f3c\u6027\u80fd \u4f18\u5316\u7b97\u6cd5\u7684\u9009\u62e9\u4e5f\u4f1a\u6781\u5927\u5730\u5f71\u54cd\u6536\u655b\u901f\u5ea6\uff0c\u591aGPU\u8bad\u7ec3\u548c\u786c\u4ef6\u6027\u80fd\u4e5f\u662f\u9700\u8981\u8003\u8651\u7684\u91cd\u8981\u65b9\u9762 Robustness \u5982\u4f55\u5728\u8bad\u7ec3\u8fc7\u7a0b\u6dfb\u52a0\u66f4\u591a\u7684\u5bf9\u6297\u6837\u672c \u5728\u591a\u6570\u636e\u96c6\u4e0a\u505a\u8fc1\u79fb\u5b66\u4e60\u548c\u591a\u4efb\u52a1\u5b66\u4e60\u4ee5\u5b9e\u73b0\u8de8\u6570\u636e\u96c6\u7684\u8f83\u597d\u8868\u73b0 \u6253\u7834\u6807\u51c6\u7684\u76d1\u7763\u5b66\u4e60\u65b9\u6cd5\uff0c\u521b\u9020\u66f4\u597d\u7684\u6a21\u578b\u8bc4\u4f30\u65b9\u6cd5\u4ee5\u4fbf\u6784\u5efa\u66f4\u5065\u58ee\u7684\u6a21\u578b Interpretability \u4f7f\u6a21\u578b\u4ece\u6587\u6863\u4e2d\u63d0\u53d6\u7247\u6bb5\u4f5c\u4e3a\u56de\u7b54\u4f9d\u636e\u6216\u751f\u6210\u7406\u8bba\u4f9d\u636e \u901a\u8fc7\u600e\u6837\u7684\u8bad\u7ec3\u96c6\u8fbe\u5230\u8fd9\u79cd\u53ef\u89e3\u91ca\u6027\u6c34\u5e73\u3002\u4ece\u6700\u7ec8\u7b54\u6848\u4e2d\u63a8\u65ad\u51fa\u7406\u8bba\u4f9d\u636e\u662f\u53ef\u884c\u7684\uff0c\u4f46\u76f8\u5f53\u56f0\u96be\u3002\u6211\u4eec\u5e94\u8be5\u8003\u8651\u6536\u96c6\u4eba\u7c7b\u7684\u89e3\u91ca\u7528\u6765\u76d1\u7763\u5b66\u4e60","title":"4.3.1 Desiderata"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#432-structures-and-modules","text":"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u89e3\u51b3\u66f4\u56f0\u96be\u7684\u9605\u8bfb\u7406\u89e3\u95ee\u9898\uff0c\u5f53\u524d\u6a21\u578b\u4e2d\u7f3a\u5931\u7684\u7ed3\u6784\u5316\u4e0e\u6a21\u5757\u5316\u3002\u7ed3\u6784\u5316\u88ab\u8bc1\u5b9e\u53ef\u4ee5\u5e2e\u52a9\u6a21\u578b\u627e\u5230\u5f88\u591a\u76f8\u5173\u4fe1\u606f\uff0c\u6709\u52a9\u4e8e\u56de\u7b54\u95ee\u9898\uff1b\u6a21\u5757\u5316\u4efb\u52a1\u53ef\u4ee5\u5c06\u4efb\u52a1\u4ece\u590d\u6742\u4efb\u52a1\u5206\u89e3\u6210\u7b80\u5355\u4efb\u52a1\uff0c\u6709\u52a9\u4e8e\u6a21\u578b\u5728\u590d\u6742\u95ee\u9898\u4e0a\u7684\u6269\u5c55\u3002 \u9996\u5148\uff0c\u5f53\u524d\u7684\u6a21\u578b\u8981\u4e48\u5efa\u7acb\u5728\u5e8f\u5217\u6a21\u578b\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u4e48\u5bf9\u79f0\u5730\u5904\u7406\u6240\u6709\u5355\u8bcd\u5bf9(Transformer)\uff0c\u5ffd\u7565\u8bed\u8a00\u7684\u56fa\u6709\u7ed3\u6784\u3002\u4e00\u65b9\u9762\uff0c\u8fd9\u8feb\u4f7f\u6211\u4eec\u7684\u6a21\u578b\u4ece\u5934\u5f00\u59cb\u5b66\u4e60\u6240\u6709\u76f8\u5173\u7684\u8bed\u8a00\u4fe1\u606f\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u7684\u6a21\u578b\u7684\u5b66\u4e60\u66f4\u52a0\u56f0\u96be\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u591a\u5e74\u6765\uff0cNLP\u793e\u533a\u5728\u8bed\u8a00\u8868\u793a\u4efb\u52a1(\u5982\u53e5\u6cd5\u5206\u6790\u3001\u6307\u4ee3)\u7684\u7814\u7a76\u548c\u8bed\u8a00\u8d44\u6e90\u548c\u5de5\u5177\u7684\u6784\u5efa\u4e0a\u6295\u5165\u4e86\u5927\u91cf\u7684\u7cbe\u529b\u3002\u8bed\u8a00\u6309\u7167\u5355\u8bcd\u5e8f\u5217\u4e0a\u7684\u5c42\u6b21\u7ed3\u6784\u548c\u5d4c\u5957\u7ed3\u6784\u5bf9\u610f\u4e49\u8fdb\u884c\u7f16\u7801\u3002\u5728\u6211\u4eec\u7684\u9605\u8bfb\u7406\u89e3\u6a21\u578b\u4e2d\u66f4\u660e\u786e\u5730\u7f16\u7801\u8bed\u8a00\u7ed3\u6784\u662f\u5426\u4ecd\u7136\u6709\u7528\uff1f \u4e0a\u56fe\u5c55\u793a\u4e86CORENLP\u8f93\u51fa\u7684\u51e0\u4e2aSQUAD\u4e2d\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u6837\u7684\u7ed3\u6784\u5316\u4fe1\u606f\u662f\u6709\u7528\u7684\uff1a 2400\u662fprofessors\u7684\u6570\u5b57\u4fee\u9970\u8bed\u3002\u8fd9\u4e00\u4fe1\u606f\u5e94\u8be5\u6709\u52a9\u4e8e\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a\u54c8\u4f5b\u5927\u5b66\u6559\u6388\u3001\u8bb2\u5e08\u548c\u8bb2\u5e08\u7684\u603b\u6570\u662f\u591a\u5c11\uff1f \u6307\u4ee3\u4fe1\u606f\u6709\u52a9\u4e8e\u56de\u7b54\u4ece\u54ea\u4e00\u5e74\u5f00\u59cb\uff0c\u54c8\u4f5b\u5927\u5b66\u5728\u4e16\u754c\u5927\u5b66\u7684\u5b66\u672f\u6392\u540d\u4e2d\u540d\u5217\u524d\u8305\uff1f \u56e0\u6b64\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u4e9b\u8bed\u8a00\u77e5\u8bc6/\u7ed3\u6784\u4ecd\u7136\u662f\u5bf9\u73b0\u6709\u6a21\u578b\u7684\u6709\u76ca\u8865\u5145\u3002 \u5269\u4e0b\u7684\u6211\u4eec\u9700\u8981\u56de\u7b54\u7684\u95ee\u9898\u662f: \u5c06\u8fd9\u4e9b\u7ed3\u6784\u5408\u5e76\u5230\u5e8f\u5217\u6a21\u578b\u4e2d\u6700\u597d\u7684\u65b9\u6cd5\u662f\u4ec0\u4e48 \u6211\u4eec\u662f\u5c06\u7ed3\u6784\u5efa\u6a21\u4e3a\u6f5c\u5728\u53d8\u91cf\uff0c\u8fd8\u662f\u4f9d\u8d56\u73b0\u6210\u7684\u8bed\u8a00\u5de5\u5177? \u5bf9\u4e8e\u540e\u4e00\u79cd\u60c5\u51b5\uff0c\u5f53\u524d\u7684\u5de5\u5177\u662f\u5426\u8db3\u591f\u597d\uff0c\u4ece\u800c\u4f7f\u6a21\u578b\u80fd\u591f\u53d7\u76ca\u66f4\u591a (\u800c\u4e0d\u662f\u5fcd\u53d7\u566a\u97f3)?\u6211\u4eec\u80fd\u8fdb\u4e00\u6b65\u63d0\u9ad8\u8fd9\u4e9b\u4ee3\u8868\u4efb\u52a1\u7684\u6027\u80fd\u5417? \u6211\u4eec\u8ba4\u4e3a\uff0c\u5927\u591a\u6570\u73b0\u6709\u6a21\u578b\u4ecd\u7136\u7f3a\u5c11\u7684\u53e6\u4e00\u4e2a\u65b9\u9762\u662f***modules***\u6a21\u5757\u3002\u9605\u8bfb\u7406\u89e3\u7684\u4efb\u52a1\u672c\u8d28\u4e0a\u662f\u975e\u5e38\u590d\u6742\u7684\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u4f8b\u5b50\u9700\u8981\u4e0d\u540c\u7c7b\u578b\u7684\u63a8\u7406\u80fd\u529b\u3002\u5982\u679c\u6211\u4eec\u60f3\u901a\u8fc7\u4e00\u4e2a\u5de8\u5927\u7684\u795e\u7ecf\u7f51\u7edc\u6765\u5b66\u4e60\u6240\u6709\u7684\u4e1c\u897f\uff0c\u8fd9\u4ecd\u7136\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6311\u6218(\u8fd9\u8ba9\u4eba\u60f3\u8d77\u4e3a\u4ec0\u4e48\u63d0\u51fa\u6ce8\u610f\u529b\u673a\u5236\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u60f3\u628a\u4e00\u4e2a\u53e5\u5b50\u6216\u4e00\u6bb5\u8bdd\u7684\u610f\u601d\u538b\u7f29\u6210\u4e00\u4e2a\u5411\u91cf!)\u6211\u4eec\u76f8\u4fe1\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u8fbe\u5230\u66f4\u6df1\u5c42\u6b21\u7684\u9605\u8bfb\u7406\u89e3\uff0c\u6211\u4eec\u672a\u6765\u7684\u6a21\u578b\u5c06\u66f4\u52a0\u7ed3\u6784\u5316\u3001\u6a21\u5757\u5316\uff0c\u89e3\u51b3\u4e00\u4e2a\u7efc\u5408\u6027\u7684\u4efb\u52a1\u53ef\u4ee5\u5206\u89e3\u6210\u8bb8\u591a\u5b50\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u89e3\u51b3\u6bcf\u4e00\u4e2a\u8f83\u5c0f\u7684\u5b50\u95ee\u9898(\u4f8b\u5982\uff0c\u6bcf\u4e00\u79cd\u63a8\u7406\u7c7b\u578b)\uff0c\u5e76\u6700\u7ec8\u5c06\u5b83\u4eec\u7ec4\u5408\u8d77\u6765\u3002 \u8fd9\u79cd\u6a21\u5757\u5316\u7684\u601d\u60f3\u662f(Andreas et al., 2016) \u63d0\u51faNEURAL MODULE NETWORKS (NMN)\u3002\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u76ee\u524d\u662f\u5728\u89c6\u89c9\u95ee\u7b54\u9886\u57df\u6216\u8005\u5c0f\u7684\u6570\u636e\u96c6\u95ee\u7b54\u95ee\u9898\u4e2d\u8fdb\u884c\u7814\u7a76\uff0c\u5bf9\u4e8e\u5927\u89c4\u6a21\u8bed\u6599\u9605\u8bfb\u7406\u89e3\u95ee\u9898\u8fd8\u9762\u4e34\u5de8\u5927\u7684\u6311\u6218\u3002","title":"4.3.2 Structures and Modules"},{"location":"Neural%20Reading%20Comprehension%20and%20beyond/#44-research-questions","text":"\u5982\u4f55\u8861\u91cf\u6a21\u578b\u5728\u8fd9\u4e00\u9886\u57df\u53d6\u5f97\u7684\u8fdb\u6b65\uff1a\u7528\u4eba\u7c7b\u7684\u6807\u51c6\u5316\u6d4b\u8bd5\u6765\u8bc4\u4ef7\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7cfb\u7edf\u6027\u80fd\uff1b\u5c06\u591a\u4e2a\u6570\u636e\u96c6\u96c6\u6210\u4e3a\u4e00\u4e2a\u6d4b\u8bd5\u96c6\u8fdb\u884c\u8bc4\u4f30\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u5bf9\u5355\u4e2a\u6570\u636e\u96c6\u8fdb\u884c\u6d4b\u8bd5 Sugawara\u7b49\u4eba(2017)\u8bd5\u56fe\u5c06\u9605\u8bfb\u7406\u89e3\u6280\u80fd\u5206\u4e3a\u4e24\u7c7b:\u524d\u63d0\u6280\u80fd\u548c\u53ef\u8bfb\u6027\u3002\u5148\u51b3\u6280\u80fd\u8861\u91cf\u7684\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u63a8\u7406\u548c\u7b54\u9898\u6240\u9700\u7684\u77e5\u8bc6\u5e76\u5b9a\u4e49\u4e8613\u9879\u6280\u80fd:\u5bf9\u8c61\u8ddf\u8e2a\u3001\u6570\u5b66\u63a8\u7406\u3001\u6307\u4ee3\u6d88\u89e3\u3001\u903b\u8f91\u63a8\u7406\u3001\u7c7b\u6bd4\u3001\u56e0\u679c\u5173\u7cfb\u3001\u65f6\u7a7a\u5173\u7cfb\u3001\u7701\u7565\u53f7\u3001\u8854\u63a5\u3001\u7cbe\u5316\u3001\u5143\u77e5\u8bc6\u3001schematic clause relation\u548c\u6807\u70b9\u7b26\u53f7\u3002\u53ef\u8bfb\u6027\u5ea6\u91cf\u201c\u6587\u672c\u5904\u7406\u7684\u6613\u7528\u6027\u201d\uff0c\u5e76\u4f7f\u7528\u4e86\u5e7f\u6cdb\u7684\u8bed\u8a00\u7279\u6027/\u4eba\u7c7b\u53ef\u8bfb\u6027\u5ea6\u91cf\u3002\u4f5c\u8005\u7684\u7ed3\u8bba\u662f\uff0c\u8fd9\u4e24\u4e2a\u96c6\u5408\u662f\u5f31\u76f8\u5173\u7684\uff0c\u4ece\u6613\u4e8e\u9605\u8bfb\u7684\u4e0a\u4e0b\u6587\u4e2d\u8bbe\u8ba1\u96be\u7684\u95ee\u9898\u662f\u53ef\u80fd\u7684\u3002\u8fd9\u4e9b\u7814\u7a76\u8868\u660e\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u57fa\u4e8e\u8fd9\u4e9b\u5c5e\u6027\u6784\u5efa\u6570\u636e\u96c6\u548c\u5f00\u53d1\u6a21\u578b\u3002 \u6a21\u578b\u8868\u5f81\u548c\u7ed3\u6784\u54ea\u4e2a\u66f4\u91cd\u8981\uff1a\u6709\u65f6\u5019\u7b80\u5355\u6a21\u578b\u4e5f\u80fd\u8fbe\u5230\u8f83\u597d\u7684\u6027\u80fd\uff0c\u4f46\u662f\u6a21\u578b\u6355\u6349\u5230\u7684\u6587\u7ae0\u7279\u5f81\u5c31\u4f1a\u5c11\u5f88\u591a\uff0c\u4e24\u8005\u7684\u7ed3\u5408\u53ef\u80fd\u662f\u672a\u6765\u7684\u8d8b\u52bf\uff08\u4e0b\u56fe\u5de6\u53f3\u5206\u522b\u4e3a\u590d\u6742\u6a21\u578b\u548c\u7b80\u5355\u6a21\u578b\uff09\u3002","title":"4.4 Research Questions"},{"location":"Normalization/","text":"Normalization \u00b6 Introduction \u00b6 \u5f52\u4e00\u5316\u5c42\uff0c\u76ee\u524d\u4e3b\u8981\u6709\u8fd9\u51e0\u4e2a\u65b9\u6cd5 Batch Normalization\uff082015\u5e74\uff09 Layer Normalization\uff082016\u5e74\uff09 Instance Normalization\uff082017\u5e74\uff09 Group Normalization\uff082018\u5e74\uff09 Switchable Normalization\uff082018\u5e74\uff09 \u5c06\u8f93\u5165\u7684\u56fe\u50cfshape\u8bb0\u4e3a[N, C, H, W]\uff0c\u8fd9\u51e0\u4e2a\u65b9\u6cd5\u4e3b\u8981\u7684\u533a\u522b\u5c31\u662f\u5728 batchNorm\u662f\u5728batch\u4e0a\uff0c\u5bf9NHW\u505a\u5f52\u4e00\u5316\uff0c\u5bf9\u5c0fbatchsize\u6548\u679c\u4e0d\u597d layerNorm\u5728\u901a\u9053\u65b9\u5411\u4e0a\uff0c\u5bf9CHW\u5f52\u4e00\u5316\uff0c\u4e3b\u8981\u5bf9RNN\u4f5c\u7528\u660e\u663e instanceNorm\u5728\u56fe\u50cf\u50cf\u7d20\u4e0a\uff0c\u5bf9HW\u505a\u5f52\u4e00\u5316\uff0c\u7528\u5728\u98ce\u683c\u5316\u8fc1\u79fb GroupNorm\u5c06channel\u5206\u7ec4\uff0c\u7136\u540e\u518d\u505a\u5f52\u4e00\u5316 SwitchableNorm\u662f\u5c06BN\u3001LN\u3001IN\u7ed3\u5408\uff0c\u8d4b\u4e88\u6743\u91cd\uff0c\u8ba9\u7f51\u7edc\u81ea\u5df1\u53bb\u5b66\u4e60\u5f52\u4e00\u5316\u5c42\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48\u65b9\u6cd5\u3002 Explanation \u00b6 Batch Normalization \u00b6 x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 0 , 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 3.5 ]] [[ 9.5 ]]]] ( 1 , 2 , 1 , 1 ) \u5728batch\u65b9\u5411\u4e0a\uff0c\u5373\u5bf9\u540c\u4e00mini-batch\u5185\u7684\u67d0\u4e00\u901a\u9053\u7684\u6240\u6709\u6570\u636e\uff0c\u6c42\u5f97\u5747\u503c\u4e0e\u65b9\u5dee \u4f7f\u7528\u6781\u5c0f\u503c \\(\\epsilon\\) \u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u5206\u6bcd\u4e3a0\u7684\u60c5\u51b5 \u52a0\u5165\u7f29\u653e\u548c\u5e73\u79fb\u53d8\u91cf \\(\\gamma\\) \u548c \\(\\beta\\) ,\u5f52\u4e00\u5316\u540e\u7684\u503c\uff0c \\(y=\\gamma x+\\beta\\) \u4fdd\u8bc1\u6bcf\u4e00\u6b21\u6570\u636e\u7ecf\u8fc7\u5f52\u4e00\u5316\u540e\u8fd8\u4fdd\u7559\u539f\u6709\u5b66\u4e60\u6765\u7684\u7279\u5f81\uff0c\u540c\u65f6\u53c8\u80fd\u5b8c\u6210\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u52a0\u901f\u8bad\u7ec3 \u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u53ef\u5b66\u4e60\u7684\u53c2\u6570 Pros & Cons \u00b6 \u5bf9batchsize\u7684\u5927\u5c0f\u6bd4\u8f83\u654f\u611f\uff0c\u7531\u4e8e\u6bcf\u6b21\u8ba1\u7b97\u5747\u503c\u548c\u65b9\u5dee\u662f\u5728\u4e00\u4e2abatch\u4e0a\uff0c\u6240\u4ee5\u5982\u679cbatchsize\u592a\u5c0f\uff0c\u5219\u8ba1\u7b97\u7684\u5747\u503c\u3001\u65b9\u5dee\u4e0d\u8db3\u4ee5\u4ee3\u8868\u6574\u4e2a\u6570\u636e\u5206\u5e03\uff1b BN\u5b9e\u9645\u4f7f\u7528\u65f6\u9700\u8981\u8ba1\u7b97\u5e76\u4e14\u4fdd\u5b58\u67d0\u4e00\u5c42\u795e\u7ecf\u7f51\u7edcbatch\u7684\u5747\u503c\u548c\u65b9\u5dee\u7b49\u7edf\u8ba1\u4fe1\u606f\uff0c \u5bf9\u4e00\u4e2a\u56fa\u5b9a\u6df1\u5ea6\u7684\u524d\u5411\u795e\u7ecf\u7f51\u7edc\uff08DNN\uff0cCNN\uff09\u4f7f\u7528BN\uff0c\u5f88\u65b9\u4fbf\uff1b \u4f46\u5bf9\u4e8eRNN\u6765\u8bf4\uff0csequence\u7684\u957f\u5ea6\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u6362\u53e5\u8bdd\u8bf4RNN\u7684\u6df1\u5ea6\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u4e0d\u540c\u7684time-step\u9700\u8981\u4fdd\u5b58\u4e0d\u540c\u7684statics\u7279\u5f81\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u4e2a\u7279\u6b8asequence\u6bd4\u5176\u4ed6sequence\u957f\u5f88\u591a\uff0c\u8fd9\u6837training\u65f6\uff0c\u8ba1\u7b97\u5f88\u9ebb\u70e6\u3002 BN \u6bd4\u8f83\u9002\u7528\u7684\u573a\u666f\u662f\uff1a\u6bcf\u4e2a mini-batch \u6bd4\u8f83\u5927\uff0c\u6570\u636e\u5206\u5e03\u6bd4\u8f83\u63a5\u8fd1\u3002\u5728\u8fdb\u884c\u8bad\u7ec3\u4e4b\u524d\uff0c\u8981\u505a\u597d\u5145\u5206\u7684 shuffle. \u5426\u5219\u6548\u679c\u4f1a\u5dee\u5f88\u591a \u4e0d\u9002\u7528\u4e8e\u52a8\u6001\u7684\u7f51\u7edc\u7ed3\u6784\u548cRNN\u7f51\u7edc Notes \u00b6 Layer Normalization \u00b6 x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 1 , 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 6.5 ]]] [[[ 6.5 ]]]] ( 2 , 1 , 1 , 1 ) \u5728Channel\u65b9\u5411\u4e0a\uff0c\u5bf9\u540c\u4e00\u8f93\u5165\u6837\u672c\u7684\u6240\u6709channel\u5185\u7684\u6570\u636e\uff0c\u6c42\u5f97\u5747\u503c\u548c\u65b9\u5dee \u5176\u4e2d \\(i\\) \u679a\u4e3e\u4e86\u8be5\u5c42\u6240\u6709\u7684\u8f93\u5165\u795e\u7ecf\u5143\u3002\u5bf9\u5e94\u5230\u6807\u51c6\u516c\u5f0f\u4e2d\uff0c\u56db\u5927\u53c2\u6570 \\(\\mu,\\sigma,g,b\\) \u4e3a\u6807\u91cf\uff08BN\u4e2d\u662f\u5411\u91cf\uff09\uff0c\u6240\u6709\u8f93\u5165\u5171\u4eab\u4e00\u4e2a\u89c4\u8303\u5316\u53d8\u6362\u3002 LN \u9488\u5bf9\u5355\u4e2a\u8bad\u7ec3\u6837\u672c\u8fdb\u884c\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u5176\u4ed6\u6570\u636e\uff0c\u56e0\u6b64\u53ef\u4ee5\u907f\u514d BN \u4e2d\u53d7 mini-batch \u6570\u636e\u5206\u5e03\u5f71\u54cd\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u7528\u4e8e \u5c0fmini-batch\u573a\u666f\u3001\u52a8\u6001\u7f51\u7edc\u573a\u666f\u548c RNN\uff0c\u7279\u522b\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df\u3002\u6b64\u5916\uff0cLN \u4e0d\u9700\u8981\u4fdd\u5b58 mini-batch \u7684\u5747\u503c\u548c\u65b9\u5dee\uff0c\u8282\u7701\u4e86\u989d\u5916\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 \u4f46\u662f\uff0cBN \u7684\u8f6c\u6362\u662f\u9488\u5bf9\u5355\u4e2a\u795e\u7ecf\u5143\u53ef\u8bad\u7ec3\u7684\u2014\u2014\u4e0d\u540c\u795e\u7ecf\u5143\u7684\u8f93\u5165\u7ecf\u8fc7\u518d\u5e73\u79fb\u548c\u518d\u7f29\u653e\u540e\u5206\u5e03\u5728\u4e0d\u540c\u7684\u533a\u95f4\uff0c\u800c LN \u5bf9\u4e8e\u4e00\u6574\u5c42\u7684\u795e\u7ecf\u5143\u8bad\u7ec3\u5f97\u5230\u540c\u4e00\u4e2a\u8f6c\u6362\u2014\u2014\u6240\u6709\u7684\u8f93\u5165\u90fd\u5728\u540c\u4e00\u4e2a\u533a\u95f4\u8303\u56f4\u5185\u3002 \u5982\u679c\u4e0d\u540c\u8f93\u5165\u7279\u5f81\u4e0d\u5c5e\u4e8e\u76f8\u4f3c\u7684\u7c7b\u522b\uff08\u6bd4\u5982\u989c\u8272\u548c\u5927\u5c0f\uff09\uff0c\u90a3\u4e48 LN \u7684\u5904\u7406\u53ef\u80fd\u4f1a\u964d\u4f4e\u6a21\u578b\u7684\u8868\u8fbe\u80fd\u529b\u3002 Pros & Cons \u00b6 LN\u4e2d\u540c\u5c42\u795e\u7ecf\u5143\u8f93\u5165\u62e5\u6709\u76f8\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee\uff0c\u540cBatch\u5185\u7684\u4e0d\u540c\u7684\u8f93\u5165\u6837\u672c\u6709\u4e0d\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee BN\u4e2d\u5219\u9488\u5bf9\u4e0d\u540c\u795e\u7ecf\u5143\u8f93\u5165\u8ba1\u7b97\u5747\u503c\u548c\u65b9\u5dee\uff0c\u540c\u4e00\u4e2abatch\u4e2d\u7684\u8f93\u5165\u62e5\u6709\u76f8\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee \u6240\u4ee5\uff0cLN\u4e0d\u4f9d\u8d56\u4e8ebatch\u7684\u5927\u5c0f\u548c\u8f93\u5165sequence\u7684\u6df1\u5ea6\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u4e8ebatchsize\u4e3a1\u548cRNN\u4e2d\u5bf9\u8fb9\u957f\u7684\u8f93\u5165sequence\u7684normalize\u64cd\u4f5c LN\u7528\u4e8eRNN\u6548\u679c\u6bd4\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5728CNN\u4e0a\uff0c\u4e0d\u5982BN Instance Normalization \u00b6 x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 3.5 ]] [[ 9.5 ]]] [[[ 3.5 ]] [[ 9.5 ]]]] ( 2 , 2 , 1 , 1 ) \u5bf9\u6bcf\u4e2a\u8f93\u5165\u6837\u672c\u7684\u6bcf\u4e2aChannel\u5185\u7684\u6240\u6709\u6570\u636e\uff0c\u5206\u522b\u6c42\u5f97\u5747\u503c\u548c\u65b9\u5dee Pros & Cons \u00b6 BN\u6ce8\u91cd\u5bf9\u6bcf\u4e2abatch\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u4fdd\u8bc1\u6570\u636e\u5206\u5e03\u4e00\u81f4\uff0c\u56e0\u4e3a\u5224\u522b\u6a21\u578b\u4e2d\u7ed3\u679c\u53d6\u51b3\u4e8e\u6570\u636e\u6574\u4f53\u5206\u5e03 \u4f46\u662f\u56fe\u50cf\u98ce\u683c\u5316\u4e2d\uff0c\u751f\u6210\u7ed3\u679c\u4e3b\u8981\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u56fe\u50cf\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5bf9\u6574\u4e2abatch\u5f52\u4e00\u5316\u4e0d\u9002\u5408\u56fe\u50cf\u98ce\u683c\u5316\u4e2d\uff0c\u56e0\u800c\u5bf9HW\u505a\u5f52\u4e00\u5316\u3002\u53ef\u4ee5\u52a0\u901f\u6a21\u578b\u6536\u655b\uff0c\u5e76\u4e14\u4fdd\u6301\u6bcf\u4e2a\u56fe\u50cf\u5b9e\u4f8b\u4e4b\u95f4\u7684\u72ec\u7acb Group Normalization \u00b6 # Python code of Group Norm based on TensorFlow. def GroupNorm ( x , gamma , beta , G , eps = 1e-5 ): # x: input features with shape [N,C,H,W] # gamma, beta: scale and offset, with shape [1,C,1,1] # G: number of groups for GN N , C , H , W = x . shape x = tf . reshape ( x , [ N , G , C // G , H , W ]) mean , var = tf . nn . moments ( x , [ 2 , 3 , 4 ], keep dims = True ) x = ( x - mean ) / tf . sqrt ( var + eps ) x = tf . reshape ( x , [ N , C , H , W ]) return x * gamma + beta \u9488\u5bf9BN\u5bf9\u5c0fbatch_size\u6548\u679c\u5dee\u7684\u95ee\u9898\uff0c\u5c06channel\u65b9\u5411\u5206\u6210group\uff0c\u5e76\u5bf9\u6bcf\u4e2agroup\u5185\u505a\u5f52\u4e00\u5316\uff0c\u7b97 \\((C//G)*H*W\\) \u7684\u5747\u503c\uff0c\u8fd9\u6837\u4e0ebatchsize\u65e0\u5173\uff0c\u4e0d\u53d7\u5176\u7ea6\u675f \u76f8\u5f53\u4e8e\u5c06**Layer Norm**\u7684\u57fa\u7840\u4e0a\uff0c\u628achannel\u65b9\u5411\u4e0a\u5206\u4e3a\u591a\u7ec4\u5e76\u5206\u522b\u5f52\u4e00\u5316\uff0c\u53ef\u4ee5\u8bf4\u662f\u4ecb\u4e8e**Layer Norm**\u548c **Instance Norm**\u4e4b\u95f4 Switchable Normalization \u00b6 \u672c\u7bc7\u8bba\u6587\u4f5c\u8005\u8ba4\u4e3a\uff0c 1. \u5f52\u4e00\u5316\u867d\u7136\u63d0\u9ad8\u6a21\u578b\u6cdb\u5316\u80fd\u529b\uff0c\u7136\u800c\u5f52\u4e00\u5316\u5c42\u7684\u64cd\u4f5c\u662f\u4eba\u5de5\u8bbe\u8ba1\u7684\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u89e3\u51b3\u4e0d\u540c\u7684\u95ee\u9898\u539f\u5219\u4e0a\u9700\u8981\u8bbe\u8ba1\u4e0d\u540c\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u5e76\u6ca1\u6709\u4e00\u4e2a\u901a\u7528\u7684\u5f52\u4e00\u5316\u65b9\u6cd5\u80fd\u591f\u89e3\u51b3\u6240\u6709\u5e94\u7528\u95ee\u9898\uff1b 2. \u7b2c\u4e8c\uff0c\u4e00\u4e2a\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u5f80\u5f80\u5305\u542b\u51e0\u5341\u4e2a\u5f52\u4e00\u5316\u5c42\uff0c\u901a\u5e38\u8fd9\u4e9b\u5f52\u4e00\u5316\u5c42\u90fd\u4f7f\u7528\u540c\u6837\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u56e0\u4e3a\u624b\u5de5\u4e3a\u6bcf\u4e00\u4e2a\u5f52\u4e00\u5316\u5c42\u8bbe\u8ba1\u64cd\u4f5c\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7684\u5b9e\u9a8c\u3002 \u56e0\u6b64\u4f5c\u8005\u63d0\u51fa\u81ea\u9002\u914d\u5f52\u4e00\u5316\u65b9\u6cd5\u2014\u2014Switchable Normalization\uff08SN\uff09\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u4e0e\u5f3a\u5316\u5b66\u4e60\u4e0d\u540c\uff0cSN\u4f7f\u7528\u53ef\u5fae\u5206\u5b66\u4e60\uff0c\u4e3a\u4e00\u4e2a\u6df1\u5ea6\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5f52\u4e00\u5316\u5c42\u786e\u5b9a\u5408\u9002\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\u3002 \u6df1\u5ea6\u5256\u6790 | \u53ef\u5fae\u5206\u5b66\u4e60\u7684\u81ea\u9002\u914d\u5f52\u4e00\u5316 Weight Normalization \u00b6 BN \u548c LN \u5747\u5c06\u89c4\u8303\u5316\u5e94\u7528\u4e8e\u8f93\u5165\u7684\u7279\u5f81\u6570\u636e \\(X\\) \uff0c\u800c WN \u5219\u53e6\u8f9f\u8e4a\u5f84\uff0c\u5c06\u89c4\u8303\u5316\u5e94\u7528\u4e8e\u7ebf\u6027\u53d8\u6362\u51fd\u6570\u7684\u6743\u91cd \\(w\\) \uff0c\u8fd9\u5c31\u662f WN \u540d\u79f0\u7684\u6765\u6e90\u3002 WN \u63d0\u51fa\u7684\u65b9\u6848\u662f\uff0c \u5c06\u6743\u91cd\u5411\u91cf \\(w\\) \u5206\u89e3\u4e3a\u5411\u91cf\u65b9\u5411 \\(\\hat {v}\\) \u548c\u5411\u91cf\u6a21 \\(g\\) \u4e24\u90e8\u5206 \uff1a \\[ w = g \\cdot \\hat{v} = g \\cdot \\frac {v}{||v||} \\] \\[ f_w(WN(x)) = w \\cdot WN(x) = g \\cdot \\frac {v}{||v||} \\cdot x = v \\cdot g \\cdot \\frac {x}{||v||}= f_v(g \\cdot \\frac {x}{||v||}) \\] Pros & Cons \u00b6 BN \u548c LN \u662f\u7528\u8f93\u5165\u7684\u7279\u5f81\u6570\u636e\u7684\u65b9\u5dee\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c scale\uff0c\u800c WN \u5219\u662f\u7528 \u795e\u7ecf\u5143\u7684\u6743\u91cd\u7684\u6b27\u6c0f\u8303\u5f0f\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c scale\u3002 \u867d\u7136\u5728\u539f\u59cb\u65b9\u6cd5\u4e2d\u5206\u522b\u8fdb\u884c\u7684\u662f\u7279\u5f81\u6570\u636e\u89c4\u8303\u5316\u548c\u53c2\u6570\u7684\u89c4\u8303\u5316\uff0c\u4f46\u672c\u8d28\u4e0a\u90fd\u5b9e\u73b0\u4e86\u5bf9\u6570\u636e\u7684\u89c4\u8303\u5316\uff0c\u53ea\u662f\u7528\u4e8e scale \u7684\u53c2\u6570\u6765\u6e90\u4e0d\u540c\u3002 \u53e6\u5916\uff0c\u6211\u4eec\u770b\u5230\u8fd9\u91cc\u7684\u89c4\u8303\u5316\u53ea\u662f\u5bf9\u6570\u636e\u8fdb\u884c\u4e86 scale\uff0c\u800c\u6ca1\u6709\u8fdb\u884c shift\uff0c\u56e0\u4e3a\u6211\u4eec\u7b80\u5355\u5730\u4ee4 \\(\\mu = 0\\) \u4f46\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u91cc\u7559\u4e0b\u4e86\u4e0e BN \u6216\u8005 LN \u76f8\u7ed3\u5408\u7684\u4f59\u5730\u2014\u2014\u90a3\u5c31\u662f\u5229\u7528 BN \u6216\u8005 LN \u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u8f93\u5165\u6570\u636e\u7684\u5747\u503c \\(\\mu\\) \u3002 WN \u7684\u89c4\u8303\u5316\u4e0d\u76f4\u63a5\u4f7f\u7528\u8f93\u5165\u6570\u636e\u7684\u7edf\u8ba1\u91cf\uff0c\u56e0\u6b64\u907f\u514d\u4e86 BN \u8fc7\u4e8e\u4f9d\u8d56 mini-batch \u7684\u4e0d\u8db3\uff0c\u4ee5\u53ca LN \u6bcf\u5c42\u552f\u4e00\u8f6c\u6362\u5668\u7684\u9650\u5236\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u7528\u4e8e\u52a8\u6001\u7f51\u7edc\u7ed3\u6784\u3002 \u901a\u8fc7\u5bf9weight\u8fdb\u884cnormalization\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u5728\u68af\u5ea6\u56de\u4f20\u7684\u65f6\u5019\uff0c\u5982\u679c\u68af\u5ea6\u8d8anoisy\uff08\u68af\u5ea6\u8d8a\u5927\uff09\uff0cv\u7684norm\u5c31\u8d8a\u5927\uff0c\u90a3\u4e48g/||v||\u5c31\u8d8a\u5c0f\uff0c\u4ece\u800c\u5c31\u4f1a\u6291\u5236\u68af\u5ea6\u3002\u505a\u5230\u4e86\u68af\u5ea6\u7684\u81ea\u7a33\u5b9a\uff08self-stabilize\uff09\u3002 Cosine Normalization \u00b6 \\[ f_w(x) = cos\\theta = \\frac {w \\cdot x}{||w|| \\cdot ||x||} \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u662f \\(w\\) \u548c \\(x\\) \u7684\u5939\u89d2 \u5bf9\u8f93\u5165\u6570\u636e \\(x\\) \u7684\u53d8\u6362\u5df2\u7ecf\u505a\u8fc7\u4e86\uff0c\u6a2a\u7740\u6765\u662f LN\uff0c\u7eb5\u7740\u6765\u662f BN\u3002 \u5bf9\u6a21\u578b\u53c2\u6570 \\(w\\) \u7684\u53d8\u6362\u4e5f\u5df2\u7ecf\u505a\u8fc7\u4e86\uff0c\u5c31\u662f WN\u3002 \u800cCosine Norm\u76ef\u4e0a\u4e86\u8ba1\u7b97\u65b9\u5f0f\u2014\u2014\u70b9\u79ef \u5411\u91cf\u70b9\u79ef\u662f\u65e0\u754c\uff08unbounded\uff09\u7684 \u5411\u91cf\u70b9\u79ef\u662f\u8861\u91cf\u4e24\u4e2a\u5411\u91cf\u76f8\u4f3c\u5ea6\u7684\u65b9\u6cd5\u4e4b\u4e00\u3002 \u5939\u89d2\u4f59\u5f26\u4e5f\u662f\u5176\u4e2d\u4e4b\u4e00\uff0c\u800c\u4e14\u5173\u952e\u7684\u662f\uff0c\u5939\u89d2\u4f59\u5f26\u662f\u6709\u786e\u5b9a\u754c\u7684\u554a\uff0c[-1, 1] \u7684\u53d6\u503c\u8303\u56f4 \u4e0d\u8fc7\uff0c\u56de\u8fc7\u5934\u6765\u770b\uff0cCN \u4e0e WN \u8fd8\u662f\u5f88\u76f8\u4f3c\u7684\u3002\u6211\u4eec\u770b\u5230\u4e0a\u5f0f\u4e2d\uff0c\u5206\u5b50\u8fd8\u662f \\(w\\) \u548c \\(x\\) \u7684\u5185\u79ef\uff0c\u800c\u5206\u6bcd\u5219\u53ef\u4ee5\u770b\u505a\u7528 \\(w\\) \u548c \\(x\\) \u4e8c\u8005\u7684\u6a21\u4e4b\u79ef\u8fdb\u884c\u89c4\u8303\u5316\u3002\u5bf9\u6bd4\u4e00\u4e0b WN \u7684\u516c\u5f0f\uff1a \\[ f_w(WN(x))) = f_v(g\\cdot \\frac {x}{||v||}) \\] \u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0cWN \u7528 \u6743\u91cd\u7684\u6a21 \\(||v||\\) \u5bf9\u8f93\u5165\u5411\u91cf\u8fdb\u884c scale\uff0c\u800c CN \u5728\u6b64\u57fa\u7840\u4e0a\u7528\u8f93\u5165\u5411\u91cf\u7684\u6a21 \\(||x||\\) \u5bf9\u8f93\u5165\u5411\u91cf\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u7684 scale Pros & Cons \u00b6 CN \u901a\u8fc7\u7528\u4f59\u5f26\u8ba1\u7b97\u4ee3\u66ff\u5185\u79ef\u8ba1\u7b97\u5b9e\u73b0\u4e86\u89c4\u8303\u5316\uff0c\u4f46\u6210\u4e5f\u8427\u4f55\u8d25\u8427\u4f55\u3002\u539f\u59cb\u7684\u5185\u79ef\u8ba1\u7b97\uff0c\u5176\u51e0\u4f55\u610f\u4e49\u662f \u8f93\u5165\u5411\u91cf\u5728\u6743\u91cd\u5411\u91cf\u4e0a\u7684\u6295\u5f71\uff0c\u65e2\u5305\u542b \u4e8c\u8005\u7684\u5939\u89d2\u4fe1\u606f\uff0c\u4e5f\u5305\u542b \u4e24\u4e2a\u5411\u91cf\u7684scale\u4fe1\u606f\u3002\u53bb\u6389scale\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u8868\u8fbe\u80fd\u529b\u7684\u4e0b\u964d\uff0c\u56e0\u6b64\u4e5f\u5f15\u8d77\u4e86\u4e00\u4e9b\u4e89\u8bae\u548c\u8ba8\u8bba\u3002\u5177\u4f53\u6548\u679c\u5982\u4f55\uff0c\u53ef\u80fd\u9700\u8981\u5728\u7279\u5b9a\u7684\u573a\u666f\u4e0b\u6df1\u5165\u5b9e\u9a8c\u3002 Why Normalization work \u00b6 Reference \u00b6 BatchNormalization\u3001LayerNormalization\u3001InstanceNorm\u3001GroupNorm\u3001SwitchableNorm\u603b\u7ed3 \u8be6\u89e3\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684Normalization\uff0cBN/LN/WN \u8bb2\u7684\u5f88\u5230\u4f4d https://blog.csdn.net/wsp_1138886114/article/details/81535272 \u52a0\u901f\u7f51\u7edc\u6536\u655b\u2014\u2014BN\u3001LN\u3001WN\u4e0eselu switchablenorms \u6df1\u5ea6\u5256\u6790 | \u53ef\u5fae\u5206\u5b66\u4e60\u7684\u81ea\u9002\u914d\u5f52\u4e00\u5316","title":"Normalization"},{"location":"Normalization/#normalization","text":"","title":"Normalization"},{"location":"Normalization/#introduction","text":"\u5f52\u4e00\u5316\u5c42\uff0c\u76ee\u524d\u4e3b\u8981\u6709\u8fd9\u51e0\u4e2a\u65b9\u6cd5 Batch Normalization\uff082015\u5e74\uff09 Layer Normalization\uff082016\u5e74\uff09 Instance Normalization\uff082017\u5e74\uff09 Group Normalization\uff082018\u5e74\uff09 Switchable Normalization\uff082018\u5e74\uff09 \u5c06\u8f93\u5165\u7684\u56fe\u50cfshape\u8bb0\u4e3a[N, C, H, W]\uff0c\u8fd9\u51e0\u4e2a\u65b9\u6cd5\u4e3b\u8981\u7684\u533a\u522b\u5c31\u662f\u5728 batchNorm\u662f\u5728batch\u4e0a\uff0c\u5bf9NHW\u505a\u5f52\u4e00\u5316\uff0c\u5bf9\u5c0fbatchsize\u6548\u679c\u4e0d\u597d layerNorm\u5728\u901a\u9053\u65b9\u5411\u4e0a\uff0c\u5bf9CHW\u5f52\u4e00\u5316\uff0c\u4e3b\u8981\u5bf9RNN\u4f5c\u7528\u660e\u663e instanceNorm\u5728\u56fe\u50cf\u50cf\u7d20\u4e0a\uff0c\u5bf9HW\u505a\u5f52\u4e00\u5316\uff0c\u7528\u5728\u98ce\u683c\u5316\u8fc1\u79fb GroupNorm\u5c06channel\u5206\u7ec4\uff0c\u7136\u540e\u518d\u505a\u5f52\u4e00\u5316 SwitchableNorm\u662f\u5c06BN\u3001LN\u3001IN\u7ed3\u5408\uff0c\u8d4b\u4e88\u6743\u91cd\uff0c\u8ba9\u7f51\u7edc\u81ea\u5df1\u53bb\u5b66\u4e60\u5f52\u4e00\u5316\u5c42\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48\u65b9\u6cd5\u3002","title":"Introduction"},{"location":"Normalization/#explanation","text":"","title":"Explanation"},{"location":"Normalization/#batch-normalization","text":"x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 0 , 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 3.5 ]] [[ 9.5 ]]]] ( 1 , 2 , 1 , 1 ) \u5728batch\u65b9\u5411\u4e0a\uff0c\u5373\u5bf9\u540c\u4e00mini-batch\u5185\u7684\u67d0\u4e00\u901a\u9053\u7684\u6240\u6709\u6570\u636e\uff0c\u6c42\u5f97\u5747\u503c\u4e0e\u65b9\u5dee \u4f7f\u7528\u6781\u5c0f\u503c \\(\\epsilon\\) \u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u5206\u6bcd\u4e3a0\u7684\u60c5\u51b5 \u52a0\u5165\u7f29\u653e\u548c\u5e73\u79fb\u53d8\u91cf \\(\\gamma\\) \u548c \\(\\beta\\) ,\u5f52\u4e00\u5316\u540e\u7684\u503c\uff0c \\(y=\\gamma x+\\beta\\) \u4fdd\u8bc1\u6bcf\u4e00\u6b21\u6570\u636e\u7ecf\u8fc7\u5f52\u4e00\u5316\u540e\u8fd8\u4fdd\u7559\u539f\u6709\u5b66\u4e60\u6765\u7684\u7279\u5f81\uff0c\u540c\u65f6\u53c8\u80fd\u5b8c\u6210\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u52a0\u901f\u8bad\u7ec3 \u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u53ef\u5b66\u4e60\u7684\u53c2\u6570","title":"Batch Normalization"},{"location":"Normalization/#pros-cons","text":"\u5bf9batchsize\u7684\u5927\u5c0f\u6bd4\u8f83\u654f\u611f\uff0c\u7531\u4e8e\u6bcf\u6b21\u8ba1\u7b97\u5747\u503c\u548c\u65b9\u5dee\u662f\u5728\u4e00\u4e2abatch\u4e0a\uff0c\u6240\u4ee5\u5982\u679cbatchsize\u592a\u5c0f\uff0c\u5219\u8ba1\u7b97\u7684\u5747\u503c\u3001\u65b9\u5dee\u4e0d\u8db3\u4ee5\u4ee3\u8868\u6574\u4e2a\u6570\u636e\u5206\u5e03\uff1b BN\u5b9e\u9645\u4f7f\u7528\u65f6\u9700\u8981\u8ba1\u7b97\u5e76\u4e14\u4fdd\u5b58\u67d0\u4e00\u5c42\u795e\u7ecf\u7f51\u7edcbatch\u7684\u5747\u503c\u548c\u65b9\u5dee\u7b49\u7edf\u8ba1\u4fe1\u606f\uff0c \u5bf9\u4e00\u4e2a\u56fa\u5b9a\u6df1\u5ea6\u7684\u524d\u5411\u795e\u7ecf\u7f51\u7edc\uff08DNN\uff0cCNN\uff09\u4f7f\u7528BN\uff0c\u5f88\u65b9\u4fbf\uff1b \u4f46\u5bf9\u4e8eRNN\u6765\u8bf4\uff0csequence\u7684\u957f\u5ea6\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u6362\u53e5\u8bdd\u8bf4RNN\u7684\u6df1\u5ea6\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u4e0d\u540c\u7684time-step\u9700\u8981\u4fdd\u5b58\u4e0d\u540c\u7684statics\u7279\u5f81\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u4e2a\u7279\u6b8asequence\u6bd4\u5176\u4ed6sequence\u957f\u5f88\u591a\uff0c\u8fd9\u6837training\u65f6\uff0c\u8ba1\u7b97\u5f88\u9ebb\u70e6\u3002 BN \u6bd4\u8f83\u9002\u7528\u7684\u573a\u666f\u662f\uff1a\u6bcf\u4e2a mini-batch \u6bd4\u8f83\u5927\uff0c\u6570\u636e\u5206\u5e03\u6bd4\u8f83\u63a5\u8fd1\u3002\u5728\u8fdb\u884c\u8bad\u7ec3\u4e4b\u524d\uff0c\u8981\u505a\u597d\u5145\u5206\u7684 shuffle. \u5426\u5219\u6548\u679c\u4f1a\u5dee\u5f88\u591a \u4e0d\u9002\u7528\u4e8e\u52a8\u6001\u7684\u7f51\u7edc\u7ed3\u6784\u548cRNN\u7f51\u7edc","title":"Pros &amp; Cons"},{"location":"Normalization/#notes","text":"","title":"Notes"},{"location":"Normalization/#layer-normalization","text":"x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 1 , 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 6.5 ]]] [[[ 6.5 ]]]] ( 2 , 1 , 1 , 1 ) \u5728Channel\u65b9\u5411\u4e0a\uff0c\u5bf9\u540c\u4e00\u8f93\u5165\u6837\u672c\u7684\u6240\u6709channel\u5185\u7684\u6570\u636e\uff0c\u6c42\u5f97\u5747\u503c\u548c\u65b9\u5dee \u5176\u4e2d \\(i\\) \u679a\u4e3e\u4e86\u8be5\u5c42\u6240\u6709\u7684\u8f93\u5165\u795e\u7ecf\u5143\u3002\u5bf9\u5e94\u5230\u6807\u51c6\u516c\u5f0f\u4e2d\uff0c\u56db\u5927\u53c2\u6570 \\(\\mu,\\sigma,g,b\\) \u4e3a\u6807\u91cf\uff08BN\u4e2d\u662f\u5411\u91cf\uff09\uff0c\u6240\u6709\u8f93\u5165\u5171\u4eab\u4e00\u4e2a\u89c4\u8303\u5316\u53d8\u6362\u3002 LN \u9488\u5bf9\u5355\u4e2a\u8bad\u7ec3\u6837\u672c\u8fdb\u884c\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u5176\u4ed6\u6570\u636e\uff0c\u56e0\u6b64\u53ef\u4ee5\u907f\u514d BN \u4e2d\u53d7 mini-batch \u6570\u636e\u5206\u5e03\u5f71\u54cd\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u7528\u4e8e \u5c0fmini-batch\u573a\u666f\u3001\u52a8\u6001\u7f51\u7edc\u573a\u666f\u548c RNN\uff0c\u7279\u522b\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df\u3002\u6b64\u5916\uff0cLN \u4e0d\u9700\u8981\u4fdd\u5b58 mini-batch \u7684\u5747\u503c\u548c\u65b9\u5dee\uff0c\u8282\u7701\u4e86\u989d\u5916\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 \u4f46\u662f\uff0cBN \u7684\u8f6c\u6362\u662f\u9488\u5bf9\u5355\u4e2a\u795e\u7ecf\u5143\u53ef\u8bad\u7ec3\u7684\u2014\u2014\u4e0d\u540c\u795e\u7ecf\u5143\u7684\u8f93\u5165\u7ecf\u8fc7\u518d\u5e73\u79fb\u548c\u518d\u7f29\u653e\u540e\u5206\u5e03\u5728\u4e0d\u540c\u7684\u533a\u95f4\uff0c\u800c LN \u5bf9\u4e8e\u4e00\u6574\u5c42\u7684\u795e\u7ecf\u5143\u8bad\u7ec3\u5f97\u5230\u540c\u4e00\u4e2a\u8f6c\u6362\u2014\u2014\u6240\u6709\u7684\u8f93\u5165\u90fd\u5728\u540c\u4e00\u4e2a\u533a\u95f4\u8303\u56f4\u5185\u3002 \u5982\u679c\u4e0d\u540c\u8f93\u5165\u7279\u5f81\u4e0d\u5c5e\u4e8e\u76f8\u4f3c\u7684\u7c7b\u522b\uff08\u6bd4\u5982\u989c\u8272\u548c\u5927\u5c0f\uff09\uff0c\u90a3\u4e48 LN \u7684\u5904\u7406\u53ef\u80fd\u4f1a\u964d\u4f4e\u6a21\u578b\u7684\u8868\u8fbe\u80fd\u529b\u3002","title":"Layer Normalization"},{"location":"Normalization/#pros-cons_1","text":"LN\u4e2d\u540c\u5c42\u795e\u7ecf\u5143\u8f93\u5165\u62e5\u6709\u76f8\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee\uff0c\u540cBatch\u5185\u7684\u4e0d\u540c\u7684\u8f93\u5165\u6837\u672c\u6709\u4e0d\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee BN\u4e2d\u5219\u9488\u5bf9\u4e0d\u540c\u795e\u7ecf\u5143\u8f93\u5165\u8ba1\u7b97\u5747\u503c\u548c\u65b9\u5dee\uff0c\u540c\u4e00\u4e2abatch\u4e2d\u7684\u8f93\u5165\u62e5\u6709\u76f8\u540c\u7684\u5747\u503c\u548c\u65b9\u5dee \u6240\u4ee5\uff0cLN\u4e0d\u4f9d\u8d56\u4e8ebatch\u7684\u5927\u5c0f\u548c\u8f93\u5165sequence\u7684\u6df1\u5ea6\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u4e8ebatchsize\u4e3a1\u548cRNN\u4e2d\u5bf9\u8fb9\u957f\u7684\u8f93\u5165sequence\u7684normalize\u64cd\u4f5c LN\u7528\u4e8eRNN\u6548\u679c\u6bd4\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5728CNN\u4e0a\uff0c\u4e0d\u5982BN","title":"Pros &amp; Cons"},{"location":"Normalization/#instance-normalization","text":"x = np . array ([[[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]], [[[ 1 , 2 , 3 ], [ 4 , 5 , 6 ]], [[ 7 , 8 , 9 ], [ 10 , 11 , 12 ]]]]); # print(x.shape) # (2, 2, 2, 3) b = np . mean ( x , axis = ( 2 , 3 ), keepdims = True ) print ( b , b . shape ) [[[[ 3.5 ]] [[ 9.5 ]]] [[[ 3.5 ]] [[ 9.5 ]]]] ( 2 , 2 , 1 , 1 ) \u5bf9\u6bcf\u4e2a\u8f93\u5165\u6837\u672c\u7684\u6bcf\u4e2aChannel\u5185\u7684\u6240\u6709\u6570\u636e\uff0c\u5206\u522b\u6c42\u5f97\u5747\u503c\u548c\u65b9\u5dee","title":"Instance Normalization"},{"location":"Normalization/#pros-cons_2","text":"BN\u6ce8\u91cd\u5bf9\u6bcf\u4e2abatch\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u4fdd\u8bc1\u6570\u636e\u5206\u5e03\u4e00\u81f4\uff0c\u56e0\u4e3a\u5224\u522b\u6a21\u578b\u4e2d\u7ed3\u679c\u53d6\u51b3\u4e8e\u6570\u636e\u6574\u4f53\u5206\u5e03 \u4f46\u662f\u56fe\u50cf\u98ce\u683c\u5316\u4e2d\uff0c\u751f\u6210\u7ed3\u679c\u4e3b\u8981\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u56fe\u50cf\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5bf9\u6574\u4e2abatch\u5f52\u4e00\u5316\u4e0d\u9002\u5408\u56fe\u50cf\u98ce\u683c\u5316\u4e2d\uff0c\u56e0\u800c\u5bf9HW\u505a\u5f52\u4e00\u5316\u3002\u53ef\u4ee5\u52a0\u901f\u6a21\u578b\u6536\u655b\uff0c\u5e76\u4e14\u4fdd\u6301\u6bcf\u4e2a\u56fe\u50cf\u5b9e\u4f8b\u4e4b\u95f4\u7684\u72ec\u7acb","title":"Pros &amp; Cons"},{"location":"Normalization/#group-normalization","text":"# Python code of Group Norm based on TensorFlow. def GroupNorm ( x , gamma , beta , G , eps = 1e-5 ): # x: input features with shape [N,C,H,W] # gamma, beta: scale and offset, with shape [1,C,1,1] # G: number of groups for GN N , C , H , W = x . shape x = tf . reshape ( x , [ N , G , C // G , H , W ]) mean , var = tf . nn . moments ( x , [ 2 , 3 , 4 ], keep dims = True ) x = ( x - mean ) / tf . sqrt ( var + eps ) x = tf . reshape ( x , [ N , C , H , W ]) return x * gamma + beta \u9488\u5bf9BN\u5bf9\u5c0fbatch_size\u6548\u679c\u5dee\u7684\u95ee\u9898\uff0c\u5c06channel\u65b9\u5411\u5206\u6210group\uff0c\u5e76\u5bf9\u6bcf\u4e2agroup\u5185\u505a\u5f52\u4e00\u5316\uff0c\u7b97 \\((C//G)*H*W\\) \u7684\u5747\u503c\uff0c\u8fd9\u6837\u4e0ebatchsize\u65e0\u5173\uff0c\u4e0d\u53d7\u5176\u7ea6\u675f \u76f8\u5f53\u4e8e\u5c06**Layer Norm**\u7684\u57fa\u7840\u4e0a\uff0c\u628achannel\u65b9\u5411\u4e0a\u5206\u4e3a\u591a\u7ec4\u5e76\u5206\u522b\u5f52\u4e00\u5316\uff0c\u53ef\u4ee5\u8bf4\u662f\u4ecb\u4e8e**Layer Norm**\u548c **Instance Norm**\u4e4b\u95f4","title":"Group Normalization"},{"location":"Normalization/#switchable-normalization","text":"\u672c\u7bc7\u8bba\u6587\u4f5c\u8005\u8ba4\u4e3a\uff0c 1. \u5f52\u4e00\u5316\u867d\u7136\u63d0\u9ad8\u6a21\u578b\u6cdb\u5316\u80fd\u529b\uff0c\u7136\u800c\u5f52\u4e00\u5316\u5c42\u7684\u64cd\u4f5c\u662f\u4eba\u5de5\u8bbe\u8ba1\u7684\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u89e3\u51b3\u4e0d\u540c\u7684\u95ee\u9898\u539f\u5219\u4e0a\u9700\u8981\u8bbe\u8ba1\u4e0d\u540c\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u5e76\u6ca1\u6709\u4e00\u4e2a\u901a\u7528\u7684\u5f52\u4e00\u5316\u65b9\u6cd5\u80fd\u591f\u89e3\u51b3\u6240\u6709\u5e94\u7528\u95ee\u9898\uff1b 2. \u7b2c\u4e8c\uff0c\u4e00\u4e2a\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u5f80\u5f80\u5305\u542b\u51e0\u5341\u4e2a\u5f52\u4e00\u5316\u5c42\uff0c\u901a\u5e38\u8fd9\u4e9b\u5f52\u4e00\u5316\u5c42\u90fd\u4f7f\u7528\u540c\u6837\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\uff0c\u56e0\u4e3a\u624b\u5de5\u4e3a\u6bcf\u4e00\u4e2a\u5f52\u4e00\u5316\u5c42\u8bbe\u8ba1\u64cd\u4f5c\u9700\u8981\u8fdb\u884c\u5927\u91cf\u7684\u5b9e\u9a8c\u3002 \u56e0\u6b64\u4f5c\u8005\u63d0\u51fa\u81ea\u9002\u914d\u5f52\u4e00\u5316\u65b9\u6cd5\u2014\u2014Switchable Normalization\uff08SN\uff09\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u4e0e\u5f3a\u5316\u5b66\u4e60\u4e0d\u540c\uff0cSN\u4f7f\u7528\u53ef\u5fae\u5206\u5b66\u4e60\uff0c\u4e3a\u4e00\u4e2a\u6df1\u5ea6\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5f52\u4e00\u5316\u5c42\u786e\u5b9a\u5408\u9002\u7684\u5f52\u4e00\u5316\u64cd\u4f5c\u3002 \u6df1\u5ea6\u5256\u6790 | \u53ef\u5fae\u5206\u5b66\u4e60\u7684\u81ea\u9002\u914d\u5f52\u4e00\u5316","title":"Switchable Normalization"},{"location":"Normalization/#weight-normalization","text":"BN \u548c LN \u5747\u5c06\u89c4\u8303\u5316\u5e94\u7528\u4e8e\u8f93\u5165\u7684\u7279\u5f81\u6570\u636e \\(X\\) \uff0c\u800c WN \u5219\u53e6\u8f9f\u8e4a\u5f84\uff0c\u5c06\u89c4\u8303\u5316\u5e94\u7528\u4e8e\u7ebf\u6027\u53d8\u6362\u51fd\u6570\u7684\u6743\u91cd \\(w\\) \uff0c\u8fd9\u5c31\u662f WN \u540d\u79f0\u7684\u6765\u6e90\u3002 WN \u63d0\u51fa\u7684\u65b9\u6848\u662f\uff0c \u5c06\u6743\u91cd\u5411\u91cf \\(w\\) \u5206\u89e3\u4e3a\u5411\u91cf\u65b9\u5411 \\(\\hat {v}\\) \u548c\u5411\u91cf\u6a21 \\(g\\) \u4e24\u90e8\u5206 \uff1a \\[ w = g \\cdot \\hat{v} = g \\cdot \\frac {v}{||v||} \\] \\[ f_w(WN(x)) = w \\cdot WN(x) = g \\cdot \\frac {v}{||v||} \\cdot x = v \\cdot g \\cdot \\frac {x}{||v||}= f_v(g \\cdot \\frac {x}{||v||}) \\]","title":"Weight Normalization"},{"location":"Normalization/#pros-cons_3","text":"BN \u548c LN \u662f\u7528\u8f93\u5165\u7684\u7279\u5f81\u6570\u636e\u7684\u65b9\u5dee\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c scale\uff0c\u800c WN \u5219\u662f\u7528 \u795e\u7ecf\u5143\u7684\u6743\u91cd\u7684\u6b27\u6c0f\u8303\u5f0f\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c scale\u3002 \u867d\u7136\u5728\u539f\u59cb\u65b9\u6cd5\u4e2d\u5206\u522b\u8fdb\u884c\u7684\u662f\u7279\u5f81\u6570\u636e\u89c4\u8303\u5316\u548c\u53c2\u6570\u7684\u89c4\u8303\u5316\uff0c\u4f46\u672c\u8d28\u4e0a\u90fd\u5b9e\u73b0\u4e86\u5bf9\u6570\u636e\u7684\u89c4\u8303\u5316\uff0c\u53ea\u662f\u7528\u4e8e scale \u7684\u53c2\u6570\u6765\u6e90\u4e0d\u540c\u3002 \u53e6\u5916\uff0c\u6211\u4eec\u770b\u5230\u8fd9\u91cc\u7684\u89c4\u8303\u5316\u53ea\u662f\u5bf9\u6570\u636e\u8fdb\u884c\u4e86 scale\uff0c\u800c\u6ca1\u6709\u8fdb\u884c shift\uff0c\u56e0\u4e3a\u6211\u4eec\u7b80\u5355\u5730\u4ee4 \\(\\mu = 0\\) \u4f46\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u91cc\u7559\u4e0b\u4e86\u4e0e BN \u6216\u8005 LN \u76f8\u7ed3\u5408\u7684\u4f59\u5730\u2014\u2014\u90a3\u5c31\u662f\u5229\u7528 BN \u6216\u8005 LN \u7684\u65b9\u6cd5\u6765\u8ba1\u7b97\u8f93\u5165\u6570\u636e\u7684\u5747\u503c \\(\\mu\\) \u3002 WN \u7684\u89c4\u8303\u5316\u4e0d\u76f4\u63a5\u4f7f\u7528\u8f93\u5165\u6570\u636e\u7684\u7edf\u8ba1\u91cf\uff0c\u56e0\u6b64\u907f\u514d\u4e86 BN \u8fc7\u4e8e\u4f9d\u8d56 mini-batch \u7684\u4e0d\u8db3\uff0c\u4ee5\u53ca LN \u6bcf\u5c42\u552f\u4e00\u8f6c\u6362\u5668\u7684\u9650\u5236\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u7528\u4e8e\u52a8\u6001\u7f51\u7edc\u7ed3\u6784\u3002 \u901a\u8fc7\u5bf9weight\u8fdb\u884cnormalization\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u5728\u68af\u5ea6\u56de\u4f20\u7684\u65f6\u5019\uff0c\u5982\u679c\u68af\u5ea6\u8d8anoisy\uff08\u68af\u5ea6\u8d8a\u5927\uff09\uff0cv\u7684norm\u5c31\u8d8a\u5927\uff0c\u90a3\u4e48g/||v||\u5c31\u8d8a\u5c0f\uff0c\u4ece\u800c\u5c31\u4f1a\u6291\u5236\u68af\u5ea6\u3002\u505a\u5230\u4e86\u68af\u5ea6\u7684\u81ea\u7a33\u5b9a\uff08self-stabilize\uff09\u3002","title":"Pros &amp; Cons"},{"location":"Normalization/#cosine-normalization","text":"\\[ f_w(x) = cos\\theta = \\frac {w \\cdot x}{||w|| \\cdot ||x||} \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u662f \\(w\\) \u548c \\(x\\) \u7684\u5939\u89d2 \u5bf9\u8f93\u5165\u6570\u636e \\(x\\) \u7684\u53d8\u6362\u5df2\u7ecf\u505a\u8fc7\u4e86\uff0c\u6a2a\u7740\u6765\u662f LN\uff0c\u7eb5\u7740\u6765\u662f BN\u3002 \u5bf9\u6a21\u578b\u53c2\u6570 \\(w\\) \u7684\u53d8\u6362\u4e5f\u5df2\u7ecf\u505a\u8fc7\u4e86\uff0c\u5c31\u662f WN\u3002 \u800cCosine Norm\u76ef\u4e0a\u4e86\u8ba1\u7b97\u65b9\u5f0f\u2014\u2014\u70b9\u79ef \u5411\u91cf\u70b9\u79ef\u662f\u65e0\u754c\uff08unbounded\uff09\u7684 \u5411\u91cf\u70b9\u79ef\u662f\u8861\u91cf\u4e24\u4e2a\u5411\u91cf\u76f8\u4f3c\u5ea6\u7684\u65b9\u6cd5\u4e4b\u4e00\u3002 \u5939\u89d2\u4f59\u5f26\u4e5f\u662f\u5176\u4e2d\u4e4b\u4e00\uff0c\u800c\u4e14\u5173\u952e\u7684\u662f\uff0c\u5939\u89d2\u4f59\u5f26\u662f\u6709\u786e\u5b9a\u754c\u7684\u554a\uff0c[-1, 1] \u7684\u53d6\u503c\u8303\u56f4 \u4e0d\u8fc7\uff0c\u56de\u8fc7\u5934\u6765\u770b\uff0cCN \u4e0e WN \u8fd8\u662f\u5f88\u76f8\u4f3c\u7684\u3002\u6211\u4eec\u770b\u5230\u4e0a\u5f0f\u4e2d\uff0c\u5206\u5b50\u8fd8\u662f \\(w\\) \u548c \\(x\\) \u7684\u5185\u79ef\uff0c\u800c\u5206\u6bcd\u5219\u53ef\u4ee5\u770b\u505a\u7528 \\(w\\) \u548c \\(x\\) \u4e8c\u8005\u7684\u6a21\u4e4b\u79ef\u8fdb\u884c\u89c4\u8303\u5316\u3002\u5bf9\u6bd4\u4e00\u4e0b WN \u7684\u516c\u5f0f\uff1a \\[ f_w(WN(x))) = f_v(g\\cdot \\frac {x}{||v||}) \\] \u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0cWN \u7528 \u6743\u91cd\u7684\u6a21 \\(||v||\\) \u5bf9\u8f93\u5165\u5411\u91cf\u8fdb\u884c scale\uff0c\u800c CN \u5728\u6b64\u57fa\u7840\u4e0a\u7528\u8f93\u5165\u5411\u91cf\u7684\u6a21 \\(||x||\\) \u5bf9\u8f93\u5165\u5411\u91cf\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u7684 scale","title":"Cosine Normalization"},{"location":"Normalization/#pros-cons_4","text":"CN \u901a\u8fc7\u7528\u4f59\u5f26\u8ba1\u7b97\u4ee3\u66ff\u5185\u79ef\u8ba1\u7b97\u5b9e\u73b0\u4e86\u89c4\u8303\u5316\uff0c\u4f46\u6210\u4e5f\u8427\u4f55\u8d25\u8427\u4f55\u3002\u539f\u59cb\u7684\u5185\u79ef\u8ba1\u7b97\uff0c\u5176\u51e0\u4f55\u610f\u4e49\u662f \u8f93\u5165\u5411\u91cf\u5728\u6743\u91cd\u5411\u91cf\u4e0a\u7684\u6295\u5f71\uff0c\u65e2\u5305\u542b \u4e8c\u8005\u7684\u5939\u89d2\u4fe1\u606f\uff0c\u4e5f\u5305\u542b \u4e24\u4e2a\u5411\u91cf\u7684scale\u4fe1\u606f\u3002\u53bb\u6389scale\u4fe1\u606f\uff0c\u53ef\u80fd\u5bfc\u81f4\u8868\u8fbe\u80fd\u529b\u7684\u4e0b\u964d\uff0c\u56e0\u6b64\u4e5f\u5f15\u8d77\u4e86\u4e00\u4e9b\u4e89\u8bae\u548c\u8ba8\u8bba\u3002\u5177\u4f53\u6548\u679c\u5982\u4f55\uff0c\u53ef\u80fd\u9700\u8981\u5728\u7279\u5b9a\u7684\u573a\u666f\u4e0b\u6df1\u5165\u5b9e\u9a8c\u3002","title":"Pros &amp; Cons"},{"location":"Normalization/#why-normalization-work","text":"","title":"Why Normalization work"},{"location":"Normalization/#reference","text":"BatchNormalization\u3001LayerNormalization\u3001InstanceNorm\u3001GroupNorm\u3001SwitchableNorm\u603b\u7ed3 \u8be6\u89e3\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684Normalization\uff0cBN/LN/WN \u8bb2\u7684\u5f88\u5230\u4f4d https://blog.csdn.net/wsp_1138886114/article/details/81535272 \u52a0\u901f\u7f51\u7edc\u6536\u655b\u2014\u2014BN\u3001LN\u3001WN\u4e0eselu switchablenorms \u6df1\u5ea6\u5256\u6790 | \u53ef\u5fae\u5206\u5b66\u4e60\u7684\u81ea\u9002\u914d\u5f52\u4e00\u5316","title":"Reference"},{"location":"Notes%20on%20NCRF%2B%2B/","text":"NCRF++\u5b66\u4e60\u7b14\u8bb0 \u00b6 \u6587\u6863\u5b66\u4e60 \u00b6 Readme.md \u00b6 Introduction \u00b6 \u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u5728\u8bb8\u591aNLP\u4efb\u52a1\u4e2d\u975e\u5e38\u6d41\u884c\uff0c\u4f8b\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08NER\uff09\uff0c\u8bcd\u6027\uff08POS\uff09\u6807\u8bb0\u548c\u5206\u8bcd\u3002\u6700\u5148\u8fdb\u7684\u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u4e3b\u8981\u5229\u7528\u5177\u6709\u8f93\u5165\u5b57\u7279\u5f81\u7684CRF\u7ed3\u6784\u3002 LSTM\uff08\u6216\u53cc\u5411LSTM\uff09\u662f\u5e8f\u5217\u6807\u8bb0\u4efb\u52a1\u4e2d\u6d41\u884c\u7684\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u7279\u5f81\u63d0\u53d6\u5668\u3002\u5e76\u4e14\u7531\u4e8e\u66f4\u5feb\u7684\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528CNN\u3002\u6b64\u5916\uff0c\u5355\u8bcd\u4e2d\u7684\u7279\u5f81\u5bf9\u4e8e\u8868\u793a\u5355\u8bcd\u4e5f\u662f\u6709\u7528\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b57\u7b26LSTM\u6216\u5b57\u7b26CNN\u7ed3\u6784\u6216\u4eba\u7c7b\u5b9a\u4e49\u7684\u795e\u7ecf\u7279\u5f81\u6765\u6355\u83b7\u5355\u8bcd\u3002 NCRF ++\u662f\u4e00\u4e2a\u57fa\u4e8ePyTorch\u7684\u6846\u67b6\uff0c\u53ef\u7075\u6d3b\u9009\u62e9\u8f93\u5165\u7279\u5f81\u548c\u8f93\u51fa\u7ed3\u6784\u3002\u4f7f\u7528NCRF ++\u7684\u795e\u7ecf\u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u7684\u8bbe\u8ba1\u53ef\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5b8c\u5168\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4e0d\u9700\u8981\u4efb\u4f55\u4ee3\u7801\u5de5\u4f5c\u3002 NCRF ++\u53ef\u4ee5\u88ab\u89c6\u4e3a CRF++ \u7684\u795e\u7ecf\u7f51\u7edc\u7248\u672c\uff0c\u8fd9\u662f\u4e00\u4e2a\u8457\u540d\u7684\u7edf\u8ba1CRF\u6846\u67b6\u3002 \u8be5\u6846\u67b6\u5df2\u88ab ACL 2018 \u63a5\u53d7\u4e3a demo \u8bba\u6587\u3002\u4f7f\u7528NCRF ++\u7684\u8be6\u7ec6\u5b9e\u9a8c\u62a5\u544a\u548c\u5206\u6790\u5df2\u88ab COLING 2018 \u63a5\u53d7\u4e3a\u6700\u4f73\u8bba\u6587\u3002 NCRF ++\u652f\u6301\u4e09\u4e2a\u7ea7\u522b\u7684\u4e0d\u540c\u7ed3\u6784\u7ec4\u5408\uff1acharacter sequence layer; word sequence layer and inference layer. \u5b57\u7b26\u5e8f\u5217\u8868\u793a\uff1a\u5b57\u7b26LSTM\uff0c\u5b57\u7b26GRU\uff0c\u5b57\u7b26CNN\u548c\u624b\u5de5\u5236\u4f5c\u7684\u5355\u8bcd\u7279\u5f81\u3002 \u5355\u8bcd\u5e8f\u5217\u8868\u793a\uff1a\u5355\u8bcdLSTM\uff0c\u5355\u8bcdGRU\uff0c\u5355\u8bcdCNN\u3002 \u63a8\u7406\u5c42\uff1aSoftmax\uff0cCRF\u3002 Requirement \u00b6 Python: 2 or 3 PyTorch: 1.0 PyTorch 0.3 compatible version is here. Advantages \u00b6 \u5b8c\u5168\u53ef\u914d\u7f6e\uff1a\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u6240\u6709\u795e\u7ecf\u6a21\u578b\u7ed3\u6784\u3002 \u6700\u5148\u8fdb\u7684\u7cfb\u7edf\u6027\u80fd\uff1a\u4e0e\u6700\u5148\u8fdb\u7684\u6a21\u578b\u76f8\u6bd4\uff0c\u57fa\u4e8eNCRF ++\u7684\u6a21\u578b\u53ef\u4ee5\u63d0\u4f9b\u76f8\u5f53\u6216\u66f4\u597d\u7684\u7ed3\u679c\u3002 \u7075\u6d3b\u7684\u7279\u5f81\uff1a\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u7279\u5f81\u548c\u9884\u8bad\u7ec3\u7684\u7279\u5f81\u5d4c\u5165\u3002 \u5feb\u901f\u8fd0\u884c\u901f\u5ea6\uff1aNCRF ++\u5229\u7528\u5b8c\u5168\u6279\u91cf\u64cd\u4f5c\uff0c\u5728GPU\u7684\u5e2e\u52a9\u4e0b\u4f7f\u7cfb\u7edf\u9ad8\u6548\uff08> 1000sent / s\u7528\u4e8e\u8bad\u7ec3\uff0c> 2000sents / s\u7528\u4e8e\u89e3\u7801\uff09 N best output: NCRF++ \u652f\u6301 nbest decoding (with their probabilities). Usage \u00b6 NCRF ++\u652f\u6301\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u8bbe\u8ba1\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u3002\u8be5\u7a0b\u5e8f\u53ef\u4ee5\u8fd0\u884c\u4e24\u79cd\u72b6\u6001 \u8bad\u7ec3\u548c\u89e3\u7801 \u3002 \uff08\u793a\u4f8b\u914d\u7f6e\u548c\u6570\u636e\u5df2\u5305\u542b\u5728\u6b64\u5b58\u50a8\u5e93\u4e2d\uff09 In training status: python main.py --config demo.train.config In decoding status: python main.py --config demo.decode.config \u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u7f51\u7edc\u7ed3\u6784\uff0cI / O\uff0c\u8bad\u7ec3\u8bbe\u7f6e\u548c\u8d85\u53c2\u6570\u3002 Detail configurations and explanations are listed here . NCRF ++\u8bbe\u8ba1\u4e3a\u4e09\u5c42\uff08\u5982\u4e0b\u6240\u793a\uff09\uff1a\u5b57\u7b26\u5e8f\u5217\u5c42;\u5355\u8bcd\u5e8f\u5217\u5c42\u548c\u63a8\u7406\u5c42\u3002\u901a\u8fc7\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u8f7b\u677e\u590d\u5236\u5927\u591a\u6570\u6700\u5148\u8fdb\u7684\u6a21\u578b\u800c\u65e0\u9700\u7f16\u7801\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8bbe\u8ba1\u81ea\u5df1\u7684\u6a21\u5757\u6765\u6269\u5c55\u6bcf\u4e00\u5c42\uff08\u4f8b\u5982\uff0c\u4ed6\u4eec\u53ef\u80fd\u60f3\u8981\u8bbe\u8ba1\u9664CNN / LSTM / GRU\u4e4b\u5916\u7684\u5176\u4ed6\u795e\u7ecf\u7ed3\u6784\uff09\u3002\u6211\u4eec\u7684\u5c42\u8bbe\u8ba1\u4f7f\u6a21\u5757\u6269\u5c55\u65b9\u4fbf\uff0c\u6a21\u5757\u6269\u5c55\u7684\u6307\u4ee4\u53ef\u4ee5\u5728 \u8fd9\u91cc \u627e\u5230\u3002 \u56fe\u4e2d\u7684\u7ea2\u8272\u5706\u5708\u6307word embedding\uff0c\u9ec4\u8272\u6307 charCNN/RNN \u751f\u6210\u7684 word embedding\uff0c\u7070\u8272\u662f\u81ea\u5b9a\u4e49\u7684 handcrafted \u7279\u5f81\u3002 Data Format \u00b6 You can refer the data format in sample_data . NCRF++ supports both BIO and BIOES(BMES) tag scheme. Notice that IOB format ( different from BIO) is currently not supported, because this tag scheme is old and works worse than other schemes Reimers and Gurevych, 2017 . The difference among these three tag schemes is explained in this paper . I have written a script which converts the tag scheme among IOB/BIO/BIOES. Welcome to have a try. Performance \u00b6 Results on CONLL 2003 English NER task are better or comparable with SOTA results with the same structures. CharLSTM+WordLSTM+CRF: 91.20 vs 90.94 of Lample .etc, NAACL16 ; CharCNN+WordLSTM+CRF: 91.35 vs 91.21 of Ma .etc, ACL16 . By default, LSTM is bidirectional LSTM. ID Model Nochar CharLSTM CharCNN 1 WordLSTM 88.57 90.84 90.73 2 WordLSTM+CRF 89.45 91.20 91.35 3 WordCNN 88.56 90.46 90.30 4 WordCNN+CRF 88.90 90.70 90.43 We have compared twelve neural sequence labeling models ( {charLSTM, charCNN, None} x {wordLSTM, wordCNN} x {softmax, CRF} ) on three benchmarks (POS, Chunking, NER) under statistical experiments, detail results and comparisons can be found in our COLING 2018 paper Design Challenges and Misconceptions in Neural Sequence Labeling . Add Handcrafted Features \u00b6 NCRF++ \u96c6\u6210\u4e86\u6700\u5148\u8fdb\u7684\u51e0\u4e2a\u795e\u7ecf\u7279\u5f81\u5e8f\u5217\u7279\u5f81\u63d0\u53d6\u5668\uff1aCNN ( Ma .etc, ACL16 ), LSTM ( Lample .etc, NAACL16 ) and GRU ( Yang .etc, ICLR17 ). \u6b64\u5916\uff0c\u624b\u5de5\u5236\u4f5c\u7684\u7279\u5f81\u5df2\u88ab\u8bc1\u660e\u5728\u5e8f\u5217\u6807\u8bb0\u4efb\u52a1\u4e2d\u5f88\u91cd\u8981\u3002 NCRF ++\u5141\u8bb8\u7528\u6237\u8bbe\u8ba1\u81ea\u5df1\u7684\u7279\u5f81\uff0c\u5982\u5927\u5199\uff0cPOS\u6807\u7b7e\u6216\u4efb\u4f55\u5176\u4ed6\u7279\u5f81\uff08\u4e0a\u56fe\u4e2d\u7684\u7070\u8272\u5706\u5708\uff09\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e\u81ea\u5b9a\u4e49\u7279\u5f81\uff08\u7279\u5f81\u5d4c\u5165\u5927\u5c0f\uff0c\u9884\u8bad\u7ec3\u7279\u5f81\u5d4c\u5165\u7b49\uff09\u3002\u6837\u672c\u8f93\u5165\u6570\u636e\u683c\u5f0f\u5728 train.cappos.bmes \u4e2d\uff0c\u5176\u4e2d\u5305\u62ec\u4e24\u4e2a\u4eba\u4e3a\u5b9a\u4e49\u7684\u7279\u5f81[POS]\u548c[Cap]\uff08[POS]\u548c[Cap]\u662f\u4e24\u4e2a\u793a\u4f8b\uff0c\u60a8\u53ef\u4ee5\u4e3a\u60a8\u7684\u7279\u5f81\u63d0\u4f9b\u6240\u9700\u7684\u4efb\u4f55\u540d\u79f0\uff0c\u53ea\u9700\u6309\u7167\u683c\u5f0f[xx]\u5e76\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u76f8\u540c\u540d\u79f0\u7684\u7279\u5f81\u3002\uff09\u7528\u6237\u53ef\u4ee5\u914d\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u7279\u5f81\uff0c\u901a\u8fc7\u4f7f\u7528 feature=[POS] emb_size=20 emb_dir=%your_pretrained_POS_embedding feature=[Cap] emb_size=20 emb_dir=%your_pretrained_Cap_embedding \u6ca1\u6709\u9884\u8bad\u7ec3\u5d4c\u5165\u7684\u7279\u5f81\u5c06\u88ab\u968f\u673a\u521d\u59cb\u5316\u3002 Speed \u00b6 NCRF ++\u4f7f\u7528\u5b8c\u5168\u6279\u91cf\u8ba1\u7b97\u5b9e\u73b0\uff0c\u4f7f\u5176\u5728\u6a21\u578b\u8bad\u7ec3\u548c\u89e3\u7801\u65b9\u9762\u90fd\u975e\u5e38\u6709\u6548\u3002\u5728GPU\uff08Nvidia GTX 1080\uff09\u548c\u5927\u6279\u91cf\u5927\u5c0f\u7684\u5e2e\u52a9\u4e0b\uff0c\u4f7f\u7528NCRF ++\u6784\u5efa\u7684LSTMCRF\u6a21\u578b\u5206\u522b\u5728\u8bad\u7ec3\u548c\u89e3\u7801\u72b6\u6001\u4e0b\u53ef\u8fbe\u52301000\u4e2asents / s\u548c2000\u4e2asents / s\u3002 N best Decoding \u00b6 \u4f20\u7edf\u7684CRF\u7ed3\u6784\u4ec5\u89e3\u7801\u5177\u6709\u6700\u5927\u53ef\u80fd\u6027\u7684\u4e00\u4e2a\u6807\u7b7e\u5e8f\u5217\uff08\u53731\u4e2a\u6700\u4f73\u8f93\u51fa\uff09\u3002\u800cNCRF ++\u53ef\u4ee5\u63d0\u4f9b\u5927\u91cf\u9009\u62e9\uff0c\u5b83\u53ef\u4ee5\u89e3\u7801\u5177\u6709 top n \u6982\u7387\u7684n\u4e2a\u6807\u7b7e\u5e8f\u5217\uff08\u5373n-best output\uff09\u3002nbest \u89e3\u7801\u5df2\u5f97\u5230\u51e0\u4e2a\u6d41\u884c\u7684 \u7edf\u8ba1 CRF\u6846\u67b6\u7684\u652f\u6301\u3002\u7136\u800c\u636e\u6211\u4eec\u6240\u77e5\uff0cNCRF ++\u662f\u795e\u7ecfCRF\u6a21\u578b\u4e2d\u552f\u4e00\u652f\u6301nbest\u89e3\u7801\u7684\u5de5\u5177\u5305\u3002 \u5728\u6211\u4eec\u7684\u5b9e\u73b0\u4e2d\uff0c\u5f53 nbest = 10 \u65f6\uff0c\u5728NCRF ++\u4e2d\u6784\u5efa\u7684CharCNN + WordLSTM + CRF\u6a21\u578b\u5728CoNLL 2003 NER\u4efb\u52a1\u4e0a\u53ef\u4ee5\u7ed9\u51fa97.47\uff05\u7684oracle F1\u503c\uff08\u5f53nbest = 1\u65f6F1 = 91.35\uff05\uff09\u3002 Reproduce Paper Results and Hyperparameter Tuning \u00b6 To reproduce the results in our COLING 2018 paper, you only need to set the iteration=1 as iteration=100 in configuration file demo.train.config and configure your file directory in this configuration file. The default configuration file describes the Char CNN + Word LSTM + CRF model, you can build your own model by modifing the configuration accordingly. The parameters in this demo configuration file are the same in our paper. (Notice the Word CNN related models need slightly different parameters, details can be found in our COLING paper.) If you want to use this framework in new tasks or datasets, here are some tuning tips by @Victor0118 . Configuration.md \u00b6 \u672c\u6587\u6863\u4e0e demo.train.config \u76f8\u5bf9\u5e94 I/O \u00b6 \u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 train_dir=xx string (necessary in training). Set training file directory. \u8bad\u7ec3\u96c6\u4f4d\u7f6e dev_dir=xx string (necessary in training). Set dev file directory. \u5f00\u53d1\u96c6\u4f4d\u7f6e test_dir=xx string . Set test file directory. \u6d4b\u8bd5\u96c6\u4f4d\u7f6e model_dir=xx string (optional). Set saved model file directory. \u8f93\u51fa \u6a21\u578b\u5b58\u50a8\u4f4d\u7f6e model_dir=lstmcrf \u5219 model \u4fdd\u5b58\u4e3a lstm.0.model \uff0c\u76f8\u5173\u53c2\u6570\u8bcd\u5178\u4e3a lstm.dset word_emb_dir=xx string (optional). Set pretrained word embedding file directory. \u9884\u8bad\u7ec3\u8bcd\u5d4c\u5165\u7684\u4f4d\u7f6e raw_dir=xx string (optional). Set input raw file directory. \u539f\u59cb\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e decode_dir=xx string (necessary in decoding). Set decoded file directory. \u8f93\u51fa \u89e3\u7801\u7ed3\u679c\u7684\u4f4d\u7f6e dset_dir=xx string (necessary). Set saved model file directory. \u6a21\u578b\u53c2\u6570\u8bcd\u5178\u4fdd\u5b58\u7684\u4f4d\u7f6e load_model_dir=xx string (necessary in decoding). Set loaded model file directory. (when decoding) \u6a21\u578b\u7684\u4f4d\u7f6e char_emb_dir=xx string (optional). Set pretrained character embedding file directory. \u9884\u8bad\u7ec3\u7684\u5b57\u7b26\u5d4c\u5165\u6587\u4ef6\u7684\u4f4d\u7f6e norm_word_emb=False boolen. If normalize the pretrained word embedding. \u662f\u5426\u5bf9\u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\u6807\u51c6\u5316 norm_char_emb=False boolen. If normalize the pretrained character embedding. \u662f\u5426\u5bf9\u9884\u8bad\u7ec3\u7684\u5b57\u7b26\u5d4c\u5165\u6807\u51c6\u5316 number_normalized=True boolen. If normalize the digit into 0 for input files. \u662f\u5426\u5c06\u6570\u5b57\u6807\u51c6\u5316\u4e3a\u8f93\u5165\u6587\u4ef6\u7684\u201c0\u201d seg=True boolen. If task is segmentation like, tasks with token accuracy evaluation (e.g. POS, CCG) is False; tasks with F-value evaluation(e.g. Word Segmentation, NER, Chunking) is True . \u5982\u679c\u4efb\u52a1\u662f segmentation\uff0c\u4ee4\u724c\u51c6\u786e\u5ea6\u8bc4\u4f30\u7684\u4efb\u52a1\uff08\u4f8b\u5982POS\uff0cCCG\uff09\u4e3a False ; F\u503c\u8bc4\u4f30\u7684\u4efb\u52a1\uff08\u4f8b\u5982\uff0cWord Segmentation, NER, Chunking\uff09\u4e3a True \u3002 word_emb_dim=50 int. Word embedding dimension, if model use pretrained word embedding, word_emb_dim will be reset as the same dimension as pretrained embedidng. \u8bcd\u5d4c\u5165\u7ef4\u5ea6 (\u5982\u679c\u6a21\u578b\u4f7f\u7528\u9884\u8bad\u7ec3\u5355\u8bcd\u5d4c\u5165\uff0c word_emb_dim \u5c06\u88ab\u91cd\u7f6e\u4e3a\u4e0e\u9884\u8bad\u7ec3 embedidng \u76f8\u540c\u7684\u7ef4\u5ea6) char_emb_dim=30 int. Character embedding dimension, if model use pretrained character embedding, char_emb_dim will be reset as the same dimension as pretrained embedidng. \u5b57\u7b26\u5d4c\u5165\u7ef4\u5ea6 (\u5982\u679c\u6a21\u578b\u4f7f\u7528\u9884\u8bad\u7ec3\u5355\u8bcd\u5d4c\u5165\uff0c char_emb_dim \u5c06\u88ab\u91cd\u7f6e\u4e3a\u4e0e\u9884\u8bad\u7ec3 embedidng \u76f8\u540c\u7684\u7ef4\u5ea6) NetworkConfiguration \u00b6 \u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 use_crf=True boolen (necessary in training). Flag of if using CRF layer. If it is set as False, then Softmax is used in inference layer. True : CRF; False : Softmax use_char=True boolen (necessary in training). Flag of if using character sequence layer. True : \u4f7f\u7528\u5b57\u7b26\u5e8f\u5217\u5c42 word_seq_feature=XX boolen (necessary in training): CNN/LSTM/GRU. Neural structure selection for word sequence. \u8bcd\u5e8f\u5217\u7279\u5f81\u63d0\u53d6\u6a21\u578b\uff1aCNN/LSTM/GRU char_seq_feature=CNN boolen (necessary in training): CNN/LSTM/GRU. Neural structure selection for character sequence, it only be used when use_char=True. \u5b57\u7b26\u7279\u5f81\u63d0\u53d6\u6a21\u578b\uff1aCNN/LSTM/GRU feature=[POS] emb_size=20 emb_dir=xx emb_norm=false feature configuration. It includes the feature prefix [POS], pretrained feature embedding file and the embedding size. \u7279\u5f81\u914d\u7f6e\uff1a feature=[\u7279\u5f81\u540d\u79f0] emb_size=20 emb_dir=xx emb_norm=false feature=[Cap] emb_size=20 emb_dir=xx emb_norm=false feature configuration. Another feature [Cap]. \u540c\u4e0a nbest=1 int (necessary in decoding). Set the nbest size during decoding. \u8bbe\u7f6e nbest \u7684 size TrainingSetting \u00b6 \u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 status=train string: train or decode. Set the program running in training or decoding mode. train / decode \u6a21\u5f0f optimizer=SGD string: SGD/Adagrad/AdaDelta/RMSprop/Adam. optimizer selection. \u4f18\u5316\u5668\u9009\u62e9 iteration=1 int. Set the iteration number of training. \u8fed\u4ee3\u6b21\u6570 batch_size=10 int. Set the batch size of training or decoding. \u6279\u91cf\u5927\u5c0f ave_batch_loss=False boolen. Set average the batched loss during training. \u662f\u5426\u8bbe\u7f6e loss \u4e3a\u6279\u91cf\u635f\u5931\u7684\u5747\u503c Hyperparameters \u00b6 \u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 cnn_layer=4 int. CNN layer number for word sequence layer. \u8bcd\u5e8f\u5217\u5c42\u7684CNN \u5c42\u7684\u6df1\u5ea6\uff0c\u4ece\u800c\u66f4\u597d\u5730\u5b66\u4e60\u957f\u8ddd\u79bb\u7684\u4f9d\u8d56\u5173\u7cfb char_hidden_dim=50 int. Character hidden vector dimension for character sequence layer. \u5b57\u7b26\u5e8f\u5217\u5c42\u7684\u5b57\u7b26\u9690\u5c42\u5411\u91cf\u7684\u7ef4\u5ea6 hidden_dim=200 int. Word hidden vector dimension for word sequence layer. \u8bcd\u5e8f\u5217\u5c42\u7684\u8bcd\u9690\u5c42\u5411\u91cf\u7684\u7ef4\u5ea6 dropout=0.5 float. Dropout probability. Dropout \u6982\u7387 lstm_layer=1 int. LSTM layer number for word sequence layer. LSTM \u5c42\u6570 bilstm=True boolen. If use bidirection lstm for word seuquence layer. \u662f\u5426\u5728\u8bcd\u5e8f\u5217\u5c42\u4e2d\u4f7f\u7528\u53cc\u5411 LSTM learning_rate=0.015 float. Learning rate. \u5b66\u4e60\u7387 lr_decay=0.05 float. Learning rate decay rate, only works when optimizer=SGD. SGD \u4e2d\u7684\u5b66\u4e60\u7387\u8870\u51cf\u6982\u7387 momentum=0 float. Momentum \u52a8\u91cf\u503c l2=1e-8 float. L2-regulization. L2 \u6b63\u5219\u5316\u53c2\u6570 gpu=True boolen. If use GPU, generally it depends on the hardward environment. \u662f\u5426\u4f7f\u7528 GPU clip= float. Clip the gradient which is larger than the setted number. \u68af\u5ea6\u88c1\u526a\u7684\u8bbe\u5b9a\u6570\u503c Extension.md \u00b6 Module Extension. \u00b6 If you want to extend character sequence layer: please refer to the file charlstm.py . If you want to extend word sequence layer: please refer to the file wordsequence.py . More details will be updated soon. Hyperparameter_tuning.md \u00b6 Hyperparamter tuning on CoNLL 2003 English NER task \u00b6 \u5982\u679c\u60a8\u4f7f\u7528\u5927\u6279\u91cf\uff08\u4f8b\u5982batch_size> 100\uff09\uff0c\u60a8\u6700\u597d\u8bbe\u7f6e avg_batch_loss = True \u4ee5\u83b7\u5f97\u7a33\u5b9a\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002\u5bf9\u4e8e\u5c0f\u6279\u91cf\uff0c avg_batch_loss = True \u5c06\u66f4\u5feb\u6536\u655b\uff0c\u6709\u65f6\u4f1a\u63d0\u4f9b\u66f4\u597d\u7684\u6027\u80fd\uff08\u4f8b\u5982CoNLL 2003 NER\uff09\u3002 \u5982\u679c\u4f7f\u7528100-d\u9884\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf \u6b64\u5904 \u800c\u4e0d\u662f50-d\u9884\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\uff0c\u5219\u53ef\u4ee5\u5728CoNLL 2003\u82f1\u8bed\u6570\u636e\u96c6\u4e0a\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002 \u5982\u679c\u8981\u7f16\u5199\u811a\u672c\u6765\u8c03\u6574\u8d85\u53c2\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528 main_parse.py \u5728\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u8bbe\u7f6e\u8d85\u53c2\u6570 \u6a21\u578b\u6027\u80fd\u5bf9 lr \u654f\u611f\uff0c\u9700\u8981\u5728\u4e0d\u540c\u7ed3\u6784\u4e0b\u4ed4\u7ec6\u8c03\u6574\uff1a Word level LSTM models (e.g. char LSTM + word LSTM + CRF) would prefer a lr around 0.015. Word level CNN models (e.g. char LSTM + word CNN + CRF) would prefer a lr around 0.005 and with more iterations. You can refer the COLING paper \" Design Challenges and Misconceptions in Neural Sequence Labeling \" for more hyperparameter settings. \u6e90\u7801\u5b66\u4e60 \u00b6 \u67b6\u6784\u68b3\u7406 \u00b6 \u6846\u67b6\u9996\u5148\u5c06\u6240\u6709\u7684\u6570\u636e\u5904\u7406\u7684\u90e8\u5206\uff0c\u90fd\u653e\u5728\u4e86\u6a21\u578b\u4e4b\u5916\uff0c\u6a21\u578b\u7684\u8f93\u5165\u5747\u4e3a\u5904\u7406\u540e\u7684 word / char \u7684 index \u6a21\u578b\u5206\u4e3a\u4e09\u5c42\uff1a char sequence layer : \u652f\u6301\u9884\u8bad\u7ec3\u4ee5\u53ca\u968f\u673a\u521d\u59cb\u5316\u4e24\u79cd\u65b9\u5f0f\uff0c\u83b7\u5f97 char-level embedding \uff0c\u518d\u5f97\u5230 word embedding\u3002\u65b9\u6cd5\u5305\u62ec charRNN, charCNN\uff0c\u5e76\u4e14\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528 (concatenate embedding_dim \u5373\u53ef) word sequence layer : \u652f\u6301\u9884\u8bad\u7ec3\u4ee5\u53ca\u968f\u673a\u521d\u59cb\u5316\u4e24\u79cd\u65b9\u5f0f\uff0c\u83b7\u5f97 word-level embedding\uff0c\u800c\u540e\u4e0e char sequence layer \u5f97\u5230\u7684 word embedding \u4ee5\u53ca handcrafted feature (\u5982 POS ) \u7684embedding\uff08\u540c\u6837\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff09\u8fdb\u884c concatenate\uff0c\u6700\u540e\u5f97\u5230 hybrid \u7684 word embedding\uff0c\u518d\u7ecf\u8fc7 \u591a\u5c42 CNN / LSTM / GRU \uff0c\u5f97\u5230\u6700\u7ec8\u7684 hidden_state inference layer : \u652f\u6301 CRF \u4e0e Softmax \u4e24\u79cd\u65b9\u5f0f \u6d41\u7a0b\u68b3\u7406 \u00b6 \u6846\u67b6\u9996\u5148\u8bfb\u53d6\u7528\u6237\u5b9a\u4e49\u597d\u7684 config \u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u62ec\u4e86 I/O, Network, Training, Hyperparameters \u56db\u90e8\u5206\u7684\u53c2\u6570\u8bbe\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 config \u6587\u4ef6\uff0c\u6216\u662f\u4ee5 --parameter value \u7684\u5f62\u5f0f\u5728\u8fd0\u884c\u65f6\u4fee\u6539\u3002\u8fd0\u884c\u6307\u4ee4\u5982\u4e0b\uff1a python main.py --config train.config training status \u9996\u5148\u8bfb\u53d6\u521d\u59cb\u5316\u8fd0\u884c\u53c2\u6570\uff0c\u8bfb\u53d6\u914d\u7f6e\u8986\u76d6\u521d\u59cb\u53c2\u6570\uff0c\u800c\u540e\u5bf9\u6570\u636e\u8fdb\u884c\u521d\u6b65\u5904\u7406\u5e76\u8bfb\u53d6/\u521d\u59cb\u5316\u6240\u9700\u7684 embedding \uff0c\u5305\u62ec \u5efa\u7acb feature \u7684\u5b57\u6bcd\u8868 alphabet \u548c \u8bad\u7ec3\u96c6 / \u5f00\u53d1\u96c6 / \u6d4b\u8bd5\u96c6 \u7684 word / char / label / feature_list \u7684\u5b57\u6bcd\u8868 \u5b57\u6bcd\u8868\u4e3b\u8981\u662f\u5305\u62ec\u5b58\u50a8 instance \u7684 list \u4ee5\u53ca \\(\\{ \\mathbf{key:instance}, \\mathbf{value:index}\\}\\) \u7684 dict \u5efa\u7acb instance_text \u548c instance_Ids \u4e24\u4e2a list \uff0c\u5176\u6bcf\u4e00\u9879\u4e3a [words, features, chars, labels] \u548c [word_Ids, feature_Ids, char_Ids, label_Ids] \uff08\u4ee5 NER \u4efb\u52a1\u4e3a\u4f8b\uff0c\u7279\u5f81\u4f7f\u7528\u7684\u662f POS\uff09\uff0c\u5206\u522b\u662f sequence \u4e2d\u7684\u6240\u6709\u5355\u8bcd\u6784\u6210\u7684 [\u2018good\u2019] \uff0c\u6240\u6709\u7279\u5f81\u6784\u6210\u7684 [\u2018JJ\u2019] \uff0c\u6240\u6709\u5b57\u7b26\u6784\u6210\u7684 [[\u2018g\u2019, \u2018o\u2019, \u2019o\u2019, \u2018d\u2019]] \uff0c\u6240\u6709 label \u6784\u6210\u7684 ['O'] \uff0c\u4ee5\u53ca\u4e0a\u8ff0\u5185\u5bb9\u5728\u5404\u81ea\u7684\u5b57\u6bcd\u8868\u4e2d\u5bf9\u5e94\u7684 index \u6784\u6210\u7684 xxx_Ids \u5bf9\u5efa\u7acb\u597d\u7684 word / char / label / feature_list \u7684\u5b57\u6bcd\u8868\uff0c\u904d\u5386\u5b57\u6bcd\u8868\u4e2d\u7684\u6240\u6709 instance \uff0c\u5206\u522b\u5efa\u7acb Embedding \u77e9\u9635\u3002\u8bfb\u53d6 word / char / feature \u7684 pretrain embedding\uff0c\u5982\u679c\u672a\u6307\u5b9a pretrain embedding \u7684\u6587\u4ef6\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5747\u968f\u673a\u521d\u59cb\u5316\uff0c\u5426\u5219\u4f1a\u5206\u4e3a\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\u5206\u522b\u5904\u7406 perfect match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u627e\u5230\u4e86\u5b57\u6bcd\u8868\u91cc\u7684 instance \uff0c\u5219\u5c06\u5176 embedding \u5bf9\u5e94\u8d4b\u503c\uff0c\u5426\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65 case_match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u627e\u5230\u4e86\u5b57\u6bcd\u8868\u91cc\u7684 instance \u7684 lower \u7248\u672c\u7684 embedding\uff0c\u5219\u540c\u6837\u5bf9\u5e94\u8d4b\u503c\uff0c\u5426\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65 not_match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u6ca1\u6709\u627e\u5230\u5b57\u6bcd\u8868\u91cc\u7684 instance \u7684 raw / lower \u7248\u672c\uff0c\u5219\u968f\u673a\u521d\u59cb\u5316 \u63a5\u7740\u5904\u7406\u6a21\u578b\u5404\u5c42\u7684\u8f93\u5165\u6570\u636e\uff08 batch_size \u81ea\u5b9a\u4e49\uff09\uff0c\u5305\u62ec batch_word, batch_features, batch_wordlen, batch_wordrecover, batch_char, batch_charlen, batch_charrecover, batch_label, mask \u5c06 instance_Ids \u63d0\u53d6\u51fa batch \u4e2a item\uff0c\u6bcf\u4e2a item \u90fd\u662f [words, features, chars, labels] \u6784\u6210\u7684\u5d4c\u5957 list \u5c06 batch \u6570\u636e\u4e2d\u56db\u7c7b\u6570\u636e\u5206\u522b\u62bd\u53d6\u5efa\u7acb\u4e3a list \uff0c\u5305\u62ec words, features, chars, labels \uff0c\u800c\u540e\u5efa\u7acb\u8d77\u5bf9\u5e94\u7684 zeros Tensor \u4ee5\u53ca mask Tensor\uff0c\u5e76\u7edf\u8ba1\u6700\u957f\u53e5\u5b50\u957f\u5ea6\u7b49\u4fe1\u606f \u5206\u522b\u5728 zeros Tensor \u4e2d\u586b\u5145 words, labels, mask, features \u7684 Tensor Pytorch \u4e2d\u63d0\u4f9b\u4e86 torch.nn.utils.rnn.PackedSequence \u7684\u76f8\u5173 API\uff0c\u8f93\u5165\u65f6\u9700\u8981\u5c06 sequence \u6309\u7167\u771f\u5b9e\u957f\u5ea6\u964d\u5e8f\u6392\u5217\uff0c\u5e76\u8f93\u5165 sequence \u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u771f\u5b9e\u957f\u5ea6\uff0c\u4e8e\u662f\uff1a python # \u7edf\u8ba1 batch \u4e2d\u6bcf\u4e2a sequence \u7684\u957f\u5ea6 word_seq_lengths = torch.LongTensor(list(map(len, words))) # \u964d\u5e8f\u6392\u5e8f\u540e\u83b7\u5f97\u5176\u6392\u5e8f\u7ed3\u679c\u4ee5\u53ca\u8be5\u7ed3\u679c\u4e2d\u7684\u5bf9\u5e94\u6bcf\u4e00\u9879\u5728\u539f\u5e8f\u5217\u4e2d\u7684 index word_seq_lengths, word_perm_idx = word_seq_lengths.sort(0, descending=True) \u4e3e\u4e2a\u4f8b\u5b50\uff1a \u539f\u5e8f\u5217 word_seq_lengths = [9, 7, 11]\uff0c\u90a3\u4e48\u6392\u5e8f\u540e\u7684\u8fd4\u56de\u503c\u4e3a word_seq_lengths = [11, 9, 7] \uff0cword_perm_idx = [2, 0, 1] \u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06 length \u5bf9\u5e94\u7684 size \u4e3a \\(\\text{batch_size} \\times \\text{max_seq_len}\\) \u7684 word_seq_tensor \u4ee5\u53ca label_seq_tensor \u7b49\u8fdb\u884c\u91cd\u6392\u5217\uff0c\u5373 - word_seq_tensor = word_seq_tensor[word_perm_idx] \u90a3\u4e48\u73b0\u5728\u7684 word / label / length \u5c31\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u4e86\uff0cfeature, mask \u4e5f\u662f\u540c\u7406\u64cd\u4f5c \u5982\u4e0a\u64cd\u4f5c\u540e\uff0csequence \u4e2d\u7684 word-level \u7684 padding \u4ee5\u53ca\u6392\u5e8f\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\uff0c\u968f\u540e\u8fdb\u884c char-level \u7684 padding \u4ee5\u53ca\u6392\u5e8f\u5de5\u4f5c \u8fd9\u91cc\u7684 word-level \u7684 padding\uff0c\u662f\u5bf9\u6bcf\u4e2a batch \u7684\u6bcf\u4e2a\u53e5\u5b50\uff0c\u90fd\u586b\u5145\u4e3a\u6700\u957f\u7684\u53e5\u5b50\u957f\u5ea6 \u9996\u5148\u5c06\u539f\u672c\u7684 chars \u5217\u8868\u8fdb\u884c padding \uff1a chars list \u4e2d\u7684chars[3] \u5982\u4e0b\u56fe\u6240\u793a \u53ef\u4ee5\u770b\u5230 chars[3] \u4e2d\u7684\u4e3a\u4e00\u4e2a sequence \uff0c\u5176\u4e2d\u6bcf\u4e00\u9879\u5747\u4e3a sequence \u4e2d\u7684\u67d0\u4e00\u4e2a\u5355\u8bcd\uff0c\u5982 chars[3] \u7684\u7b2c 8 \u9879\u5373\u4e3a\u4e00\u4e2a\u957f\u5ea6\u4e3a 2 \u7684\u5355\u8bcd\uff0c\u7531\u5b57\u7b26 15 \u548c 40 \u7ec4\u6210 \u5148\u5bf9\u6bcf\u4e2a sequence \u8fdb\u884c padding\uff0c\u4fdd\u8bc1 sequence \u7684\u957f\u5ea6\u5747\u4e3a max_seq_len \u5373\u5bf9 chars[3] \u8fd9\u4e00 sequence \u672b\u5c3e\uff0c\u6dfb\u52a0[[0], [0], [0], \u2026\u2026 , [0]] \u800c\u540e\u5bf9\u672c batch \u5185\u7684\u6240\u6709 sequence \u4e2d\u7684\u6240\u6709 word \u7edf\u8ba1\u5f97\u5230\u6700\u957f\u5355\u8bcd\u957f\u5ea6 max_word_len \u521d\u59cb\u5316 size \u4e3a batch_size, max_seq_len, max_word_len \u7684 zeros Tensor char_seq_tensor \uff0c\u7edf\u8ba1\u5f53\u524d chars \u4e2d\u6240\u6709\u5355\u8bcd\u7684\u957f\u5ea6\uff0c\u83b7\u5f97 size \u4e3a batch_size, max_seq_len \u7684 char_seq_lengths \u5c06\u6bcf\u4e2a sequence \u7684\u6bcf\u4e2a word \u7684\u6bcf\u4e2a char_Id \u586b\u5165 char_seq_tensor \u4e2d\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86 char-level \u7684 padding \u5de5\u4f5c \u63a5\u7740\u6211\u4eec\u6211\u4eec\u5bf9\u6570\u636e\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406 \u9996\u5148\u901a\u8fc7 word_perm_idx \u5c06\u5e8f\u5217\u7684\u987a\u5e8f\u8c03\u6574\u7684\u4e0e word \u548c label \u7684\u987a\u5e8f\u4e00\u81f4\uff0c\u7136\u540e\u662f\u5bf9 char_seq_tensor, char_seq_lengths \u8fdb\u884c\u538b\u5b9e\u64cd\u4f5c\uff0c\u5c06\u5176 size \u8c03\u6574\u4e3a (batch_size * max_seq_len, max_word_len) \u548c (batch_size * max_seq_len,) \u63a5\u7740\u8fdb\u884c\u540c\u6837\u7684\u6392\u5e8f\u4e0e\u8c03\u5e8f\u64cd\u4f5c\uff0c\u5c06 word \u7684\u987a\u5e8f\u8c03\u6574\u4e3a\u6309\u7167 word_len \u964d\u5e8f\u6392\u5217 \u8fd9\u662f\u6211\u4eec\u5e94\u8be5\u6ce8\u610f\u5230\uff0c\u5355\u8bcd\u7684\u987a\u5e8f\u5728 char sequence layer \u4e2d\u88ab\u6253\u4e71\u4e86\uff0c\u6211\u4eec\u5728\u7ecf\u8fc7charCNN / charRNN \u7684\u5904\u7406\u540e\uff0c\u5f97\u5230\u7684\u8f93\u51fa\u9700\u8981\u8f93\u5165\u5230 word sequence layer \u4e2d\uff0c\u987a\u5e8f\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u9700\u8981\u5728\u8f93\u51fa\u65f6\u5c06\u987a\u5e8f\u8c03\u6574\u56de\u53bb \u56de\u5230\u4e4b\u524d\u7684\u4f8b\u5b50\uff1a \u539f\u5e8f\u5217 word_seq_lengths = [9, 7, 11]\uff0c\u90a3\u4e48\u6392\u5e8f\u540e\u7684\u8fd4\u56de\u503c\u4e3a word_seq_lengths = [11, 9, 7] \uff0cword_perm_idx = [2, 0, 1] \u6211\u4eec\u5bf9 word_perm_idx \u8fdb\u884c\u5347\u5e8f\u6392\u5217\uff0c\u5f97\u5230\u8fd4\u56de\u503c\u4e3a [0, 1, 2] \u548c [1, 2, 0]\uff0c\u8fd9\u65f6\u5019\u4ee4 word_seq_lengths = word_seq_lengths[1, 2, 0] \uff0c\u6211\u4eec\u5c31\u4f1a\u53d1\u73b0 word_seq_lengths \u53d8\u56de\u4e86\u539f\u5e8f\u5217 \u5f53 char sequence layer \u5c06\u5176\u83b7\u5f97\u7684\u6bcf\u4e2a word \u7684 embedding \u8f93\u51fa\u81f3 word sequence layer \u65f6\uff0c\u9700\u8981\u4f7f\u7528\u4e4b\u524d\u4fdd\u5b58\u7684 char_seq_recover \u5c06 word \u7684\u987a\u5e8f\u8fd8\u539f \u81f3\u6b64\uff0c\u5404\u5c42\u6240\u9700\u7684\u8f93\u5165\u6570\u636e\u90fd\u51c6\u5907\u5b8c\u6bd5\u3002 \u8fd0\u884c\u65f6\uff0c\u6a21\u578b\u9996\u5148\u9700\u8981\u5b8c\u6210\u5bf9 char sequence layer \u7684\u8fd0\u7b97\uff0c\u83b7\u5f97 char-level \u7684 word embedding\uff0c\u7136\u540e\u4e0e word embedding \u548c feature embedding \u8fdb\u884c concatenate\uff0c\u5f97\u5230\u6700\u7ec8\u7684 word embedding\uff0c\u518d\u901a\u8fc7\u591a\u5c42\u7684 LSTM / GRU / CNN \u5f97\u5230\u6700\u7ec8\u7684 size \u4e3a batch_size, seq_len, classes \u7684\u7279\u5f81\u5411\u91cf \u6700\u540e\u7684 inference layer \u53ef\u4ee5\u6709\u4e24\u79cd\u9009\u62e9\uff1aCRF / Softmax \uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u8ba8\u8bba Softmax \u7684\u65b9\u5f0f\u3002\u5bf9\u7279\u5f81\u5411\u91cf\u7684\u6700\u540e\u4e00\u7ef4\u505a log_softmax \uff0c\u800c\u540e\u8ba1\u7b97\u5176 NLLLoss \u5e76\u5c06\u5176\u6700\u5927\u503c\u5bf9\u5e94\u7684 class \u4f5c\u4e3a\u5206\u7c7b\u7ed3\u679c\u3002 CRF \u7b14\u8bb0 \u00b6 \u6761\u4ef6\u968f\u673a\u573a(Conditional Random Fields, \u4ee5\u4e0b\u7b80\u79f0CRF)\u662f\u7ed9\u5b9a\u4e00\u7ec4\u8f93\u5165\u968f\u673a\u53d8\u91cf\u6761\u4ef6\u4e0b\u53e6\u4e00\u7ec4\u8f93\u51fa\u968f\u673a\u53d8\u91cf\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\u6a21\u578b\u3002\u5176\u7279\u70b9\u662f\u5047\u8bbe\u8f93\u51fa\u968f\u673a\u53d8\u91cf\u6784\u6210\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u3002\u6761\u4ef6\u968f\u673a\u573a\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u7684\u9884\u6d4b\u95ee\u9898\uff0c\u672c\u6587\u8ba8\u8bba\u7684\u662f\u5176\u5728\u6807\u6ce8\u95ee\u9898\u4e2d\u7684\u5e94\u7528\uff0c\u56e0\u6b64\u4e3b\u8981\u8bb2\u8ff0\u7ebf\u6027\u94fe\u6761\u4ef6\u968f\u673a\u573a\u3002\u8fd9\u65f6\uff0c\u95ee\u9898\u53d8\u6210\u7531\u8f93\u5165\u5e8f\u5217\u5bf9\u8f93\u51fa\u5e8f\u5217\u9884\u6d4b\u7684\u5224\u522b\u6a21\u578b\uff0c\u5f62\u5f0f\u4e3a\u5bf9\u6570\u7ebf\u6027\u6a21\u578b\uff0c\u5176\u5b66\u4e60\u65b9\u6cd5\u901a\u5e38\u662f\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u6216\u6b63\u5219\u5316\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u3002 \u4ec0\u4e48\u6837\u7684\u95ee\u9898\u9700\u8981CRF\u6a21\u578b \u00b6 \u5bf9\u4e8e A \u7684\u4e00\u5929\u4ece\u65e9\u5230\u665a\u7684\u4e00\u7cfb\u5217\u7167\u7247\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u6bcf\u5f20\u7167\u7247\u5bf9\u5e94\u7684\u6d3b\u52a8\uff0c\u5982\u679c\u6211\u4eec\u7528\u4f20\u7edf\u7684\u5206\u7c7b\u601d\u8def\u53bb\u505a\uff0c\u5373\u5bf9\u6bcf\u5f20\u7167\u7247\u5206\u522b\u9884\u6d4b\u5176\u6d3b\u52a8\u7c7b\u522b\uff0c\u8fd9\u5c31\u5ffd\u7565\u4e86\u6d3b\u52a8\u4e4b\u95f4\u7684\u5173\u8054\u6027\u548c\u5185\u5728\u7ea6\u675f\uff0c\u6bd4\u5982\u5bf9\u4e8e\u4e00\u5f20 A \u95ed\u7740\u5634\u5df4\u7684\u7167\u7247\uff0c\u5982\u679c\u524d\u4e00\u5f20\u7167\u7247\u662f A \u5728\u5403\u4e1c\u897f\u7684\u7167\u7247\uff0c\u90a3\u4e48\u6b64\u65f6 A \u5c31\u662f\u5728\u5480\u56bc\uff1b\u5982\u679c\u524d\u4e00\u5f20\u7167\u7247\u662f A \u5728\u5531\u6b4c\u7684\u7167\u7247\uff0c\u90a3\u4e48\u6b64\u65f6 A \u5c31\u662f\u5728\u5531\u6b4c\u3002 \u8fd9\u5c31\u9700\u8981\u6211\u4eec\u8003\u8651 \u76f8\u90bb\u6570\u636e\u7684\u6807\u8bb0\u4fe1\u606f \u3002\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684**\u8bcd\u6027\u6807\u6ce8**(Part-Of-Speech Tagging)\u6b63\u662f\u6b64\u7c7b\u95ee\u9898\u7684\u7ecf\u5178\u4efb\u52a1\u3002 \u968f\u673a\u573a\uff0c\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff0c\u6761\u4ef6\u968f\u673a\u573a \u00b6 \u968f\u673a\u573a\uff1a\u5f53\u7ed9\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u4e2d\u6309\u7167\u67d0\u79cd\u5206\u5e03\u968f\u673a\u8d4b\u4e88\u76f8\u7a7a\u95f4\u7684\u4e00\u4e2a\u503c\u4e4b\u540e\uff0c\u5176\u5168\u4f53\u5c31\u53eb\u505a\u968f\u673a\u573a\u3002\u6211\u4eec\u4e0d\u59a8\u62ff\u79cd\u5730\u6765\u6253\u4e2a\u6bd4\u65b9\u3002\u5176\u4e2d\u6709\u4e24\u4e2a\u6982\u5ff5\uff1a\u4f4d\u7f6e\uff08site\uff09\uff0c\u76f8\u7a7a\u95f4\uff08phase space\uff09\u3002\u201c\u4f4d\u7f6e\u201d\u597d\u6bd4\u662f\u4e00\u4ea9\u4ea9\u519c\u7530\uff1b\u201c\u76f8\u7a7a\u95f4\u201d\u597d\u6bd4\u662f\u79cd\u7684\u5404\u79cd\u5e84\u7a3c\u3002\u6211\u4eec\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u5730\u79cd\u4e0a\u4e0d\u540c\u7684\u5e84\u7a3c\uff0c\u8fd9\u5c31\u597d\u6bd4\u7ed9\u968f\u673a\u573a\u7684\u6bcf\u4e2a\u201c\u4f4d\u7f6e\u201d\uff0c\u8d4b\u4e88\u76f8\u7a7a\u95f4\u91cc\u4e0d\u540c\u7684\u503c\u3002\u6240\u4ee5\uff0c\u4fd7\u6c14\u70b9\u8bf4\uff0c\u968f\u673a\u573a\u5c31\u662f\u5728\u54ea\u5757\u5730\u91cc\u79cd\u4ec0\u4e48\u5e84\u7a3c\u7684\u4e8b\u60c5\u3002 \u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff1a\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u662f\u968f\u673a\u573a\u7684\u7279\u4f8b\uff0c\u5b83\u5047\u8bbe\u968f\u673a\u573a\u4e2d\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u7684\u8d4b\u503c\u4ec5\u4ec5\u4e0e\u548c\u5b83\u76f8\u90bb\u7684\u4f4d\u7f6e\u7684\u8d4b\u503c\u6709\u5173\uff0c\u548c\u4e0e\u5176\u4e0d\u76f8\u90bb\u7684\u4f4d\u7f6e\u7684\u8d4b\u503c\u65e0\u5173\u3002 \u9a6c\u5c14\u79d1\u592b\u6027\u8d28\uff1a\u5b83\u6307\u7684\u662f\u4e00\u4e2a\u968f\u673a\u53d8\u91cf\u5e8f\u5217\u6309\u65f6\u95f4\u5148\u540e\u5173\u7cfb\u4f9d\u6b21\u6392\u5f00\u7684\u65f6\u5019\uff0c\u7b2cN+1\u65f6\u523b\u7684\u5206\u5e03\u7279\u6027\uff0c\u4e0eN\u65f6\u523b\u4ee5\u524d\u7684\u968f\u673a\u53d8\u91cf\u7684\u53d6\u503c\u65e0\u5173\u3002\u62ff\u5929\u6c14\u6765\u6253\u4e2a\u6bd4\u65b9\u3002\u5982\u679c\u6211\u4eec\u5047\u5b9a\u5929\u6c14\u662f\u9a6c\u5c14\u53ef\u592b\u7684\uff0c\u5176\u610f\u601d\u5c31\u662f\u6211\u4eec\u5047\u8bbe\u4eca\u5929\u7684\u5929\u6c14\u4ec5\u4ec5\u4e0e\u6628\u5929\u7684\u5929\u6c14\u5b58\u5728\u6982\u7387\u4e0a\u7684\u5173\u8054\uff0c\u800c\u4e0e\u524d\u5929\u53ca\u524d\u5929\u4ee5\u524d\u7684\u5929\u6c14\u6ca1\u6709\u5173\u7cfb\u3002\u5176\u5b83\u5982\u4f20\u67d3\u75c5\u548c\u8c23\u8a00\u7684\u4f20\u64ad\u89c4\u5f8b\uff0c\u5c31\u662f\u9a6c\u5c14\u53ef\u592b\u7684\u3002 CRF\u662f\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u7684\u7279\u4f8b\uff0c\u5b83\u5047\u8bbe\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u4e2d\u53ea\u6709X\u548cY\u4e24\u79cd\u53d8\u91cf\uff0cX\u4e00\u822c\u662f\u7ed9\u5b9a\u7684\uff0c\u800cY\u4e00\u822c\u662f\u5728\u7ed9\u5b9aX\u7684\u6761\u4ef6\u4e0b\u7684\u8f93\u51fa\u3002\u8fd9\u6837\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u5c31\u7279\u5316\u6210\u4e86\u6761\u4ef6\u968f\u673a\u573a\u3002\u8bbeX\u4e0eY\u662f\u968f\u673a\u53d8\u91cf\uff0cP(Y|X)\u662f\u7ed9\u5b9aX\u65f6Y\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\uff0c\u82e5\u968f\u673a\u53d8\u91cfY\u6784\u6210\u7684\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff0c\u5219\u79f0\u6761\u4ef6\u6982\u7387\u5206\u5e03P(Y|X)\u662f\u6761\u4ef6\u968f\u673a\u573a\u3002 Softmax \u4e0e CRF \u00b6 \u4e0a\u56fe\u4e3a\u7528 CNN \u6216\u8005 RNN \u5bf9\u5e8f\u5217\u8fdb\u884c\u7f16\u7801\u540e\uff0c\u4f7f\u7528 Softmax \u4f5c\u4e3a\u5206\u7c7b\u5668\uff0c\u5b8c\u6210 POS \u4efb\u52a1\u3002 \u4ee5 RNN \u4e3a\u4f8b\uff0c\u5bf9\u4e8e t \u65f6\u523b\u6765\u8bf4\uff0c\u8f93\u51fa\u5c42 yt \u53d7\u5230\u9690\u5c42 ht\uff08\u5305\u542b\u4e0a\u4e0b\u6587\u4fe1\u606f\uff09\u548c\u8f93\u5165\u5c42 xt\uff08\u5f53\u524d\u7684\u8f93\u5165\uff09\u7684\u5f71\u54cd\uff0c\u4f46\u662fyt\u548c\u5176\u4ed6\u65f6\u523b\u7684yt'\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u5e76\u6ca1\u6709\u76f4\u63a5\u8003\u8651\u8f93\u51fa\u7684\u4e0a\u4e0b\u6587\u5173\u7cfb\u3002 \u4e0a\u56fe\u4e3a\u4f7f\u7528 CRF \u8fdb\u884c POS \u65f6\uff0c\u7531 CRF \u5bf9\u8f93\u51fa\u5c42\u7684\u4e0a\u4e0b\u6587\u5173\u7cfb\u8fdb\u884c\u76f4\u63a5\u5173\u8054\uff0c\u5373 CRF \u5728\u8f93\u51fa\u7aef\u663e\u5f0f\u5730\u8003\u8651\u4e86\u4e0a\u4e0b\u6587\u5173\u8054\u3002 \u516c\u5f0f\u63a8\u5bfc \u00b6 CRF \u7684\u771f\u6b63\u7cbe\u5de7\u7684\u5730\u65b9\uff0c\u662f\u5b83\u4ee5\u8def\u5f84\u4e3a\u5355\u4f4d\uff0c\u8003\u8651\u7684\u662f\u8def\u5f84\u7684\u6982\u7387\u3002 \u5047\u5982\u4e00\u4e2a\u8f93\u5165\u6709 n \u5e27\uff0c\u6bcf\u4e00\u5e27\u7684\u6807\u7b7e\u6709 k \u79cd\u53ef\u80fd\u6027\uff0c\u90a3\u4e48\u7406\u8bba\u4e0a\u5c31\u6709 \\(k^n\\) \u4e2d\u4e0d\u540c\u7684\u7ed3\u679c\u6807\u7b7e\u5e8f\u5217\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u7528\u5982\u4e0b\u7684\u7f51\u7edc\u56fe\u8fdb\u884c\u7b80\u5355\u7684\u53ef\u89c6\u5316\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6bcf\u4e2a\u70b9\u4ee3\u8868\u4e00\u4e2a\u6807\u7b7e\u7684\u53ef\u80fd\u6027\uff0c\u70b9\u4e4b\u95f4\u7684\u8fde\u7ebf\u8868\u793a\u6807\u7b7e\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u800c\u6bcf\u4e00\u79cd\u6807\u6ce8\u7ed3\u679c\uff0c\u90fd\u5bf9\u5e94\u7740\u56fe\u4e0a\u7684\u4e00\u6761\u5b8c\u6574\u7684\u8def\u5f84\u3002 \u800c\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u7684\u6b63\u786e\u7b54\u6848\u662f\u4e00\u822c\u662f\u552f\u4e00\u7684\u3002\u6bd4\u5982\u201c\u4eca\u5929\u5929\u6c14\u4e0d\u9519\u201d\uff0c\u5982\u679c\u5bf9\u5e94\u7684\u5206\u8bcd\u7ed3\u679c\u662f\u201c\u4eca\u5929/\u5929\u6c14/\u4e0d/\u9519\u201d\uff0c\u90a3\u4e48\u76ee\u6807\u8f93\u51fa\u5e8f\u5217\u5c31\u662f bebess\uff0c\u9664\u6b64\u4e4b\u5916\u522b\u7684\u8def\u5f84\u90fd\u4e0d\u7b26\u5408\u8981\u6c42\u3002 \u6362\u8a00\u4e4b\uff0c\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u7684\u7814\u7a76\u7684\u57fa\u672c\u5355\u4f4d\u5e94\u8be5\u662f\u8def\u5f84\uff0c\u6211\u4eec\u8981\u505a\u7684\u4e8b\u60c5\uff0c\u662f\u4ece \\(k^n\\) \u6761\u8def\u5f84\u9009\u51fa\u6b63\u786e\u7684\u4e00\u6761\uff0c\u90a3\u5c31\u610f\u5473\u7740\uff0c\u5982\u679c\u5c06\u5b83\u89c6\u4e3a\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898\uff0c\u90a3\u4e48\u5c06\u662f \\(k^n\\) \u7c7b\u4e2d\u9009\u4e00\u7c7b\u7684\u5206\u7c7b\u95ee\u9898\u3002 \u9010\u5e27 softmax \u548c CRF \u7684\u6839\u672c\u533a\u522b \u524d\u8005\u5c06\u5e8f\u5217\u6807\u6ce8\u770b\u6210\u662f n \u4e2a k \u5206\u7c7b\u95ee\u9898\uff0c\u540e\u8005\u5c06\u5e8f\u5217\u6807\u6ce8\u770b\u6210\u662f 1 \u4e2a k^n \u5206\u7c7b\u95ee\u9898 \u5177\u4f53\u6765\u8bb2\uff0c\u5728 CRF \u7684\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u7684\u662f\u6761\u4ef6\u6982\u7387\uff1a \\[ P\\left(y_{1}, \\ldots, y_{n} | x_{1}, \\ldots, x_{n}\\right)=P\\left(y_{1}, \\ldots, y_{n} | x\\right), \\quad x=\\left(x_{1}, \\ldots, x_{n}\\right) \\] \u4e3a\u4e86\u5f97\u5230\u8fd9\u4e2a\u6982\u7387\u7684\u4f30\u8ba1\uff0cCRF \u505a\u4e86\u4e24\u4e2a\u5047\u8bbe\uff1a \u5047\u8bbe\u4e00\uff1a\u8be5\u5206\u5e03\u662f\u6307\u6570\u65cf\u5206\u5e03 \u8fd9\u4e2a\u5047\u8bbe\u610f\u5473\u7740\u5b58\u5728\u51fd\u6570 \\(f(y_1,\u2026,y_n;x)\\) \uff0c\u4f7f\u5f97 \\[ P\\left(y_{1}, \\ldots, y_{n} | \\mathbf{x}\\right)=\\frac{1}{Z(\\mathbf{x})} \\exp \\left(f\\left(y_{1}, \\ldots, y_{n} ; \\mathbf{x}\\right)\\right) \\] \u5176\u4e2d \\(Z(x)\\) \u662f\u5f52\u4e00\u5316\u56e0\u5b50\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u662f\u6761\u4ef6\u5206\u5e03\uff0c\u6240\u4ee5\u5f52\u4e00\u5316\u56e0\u5b50\u8ddf x \u6709\u5173\u3002\u8fd9\u4e2a f \u51fd\u6570\u53ef\u4ee5\u89c6\u4e3a\u4e00\u4e2a\u6253\u5206\u51fd\u6570\uff0c\u6253\u5206\u51fd\u6570\u53d6\u6307\u6570\u5e76\u5f52\u4e00\u5316\u540e\u5c31\u5f97\u5230\u6982\u7387\u5206\u5e03\u3002 \u5047\u8bbe\u4e8c\uff1a\u8f93\u51fa\u4e4b\u95f4\u7684\u5173\u8054\u4ec5\u53d1\u751f\u5728\u76f8\u90bb\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5173\u8054\u662f\u6307\u6570\u52a0\u6027\u7684 \u4e0b\u5f0f\u4e3a\u94fe\u5f0f\u7ed3\u6784\u7684\u6761\u4ef6\u6982\u7387\uff08\u5373 x \u4e0e y \u7684\u7ed3\u6784\u76f8\u540c\uff09 \\[ p(\\mathbf{y} | \\mathbf{x}, \\theta)=\\frac{1}{Z(\\mathbf{x}, \\theta)} \\exp \\left(\\sum_{t=1}^{T} \\theta_{1}^{\\mathrm{T}} f_{1}\\left(\\mathbf{x}, y_{t}\\right)+\\sum_{t=1}^{T-1} \\theta_{2}^{\\mathrm{T}} f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\right) \\] \u5176\u4e2d\uff0c \\(f_{1}\\left(\\mathbf{x}, y_{t}\\right)\\) \u4e3a\u72b6\u6001\u7279\u5f81\uff0c\u4e0e\u4f4d\u7f6e \\(t\\) \u76f8\u5173\uff1b \\(f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\) \u4e3a\u8f6c\u79fb\u7279\u5f81\u3002 \u635f\u5931\u51fd\u6570 \u6781\u5927\u4f3c\u7136\u4f30\u8ba1 $$ L(x) = -\\log P\\left(y_{1}, \\ldots, y_{n} | x\\right) \\ = log(Z(x)) -\\left(\\sum_{t=1}^{T} \\theta_{1}^{\\mathrm{T}} f_{1}\\left(\\mathbf{x}, y_{t}\\right)+\\sum_{t=1}^{T-1} \\theta_{2}^{\\mathrm{T}} f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\right) $$ \u9884\u6d4b\u95ee\u9898 \u6a21\u578b\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u5982\u4f55\u6839\u636e\u8f93\u5165\u627e\u51fa\u6700\u4f18\u8def\u5f84\uff1f\u540c\u6837\u7684\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u4ece \\(k^n\\) \u6761\u8def\u5f84\u4e2d\u9009\u6700\u4f18\u7684\u95ee\u9898\uff0c\u800c\u56e0\u4e3a\u9a6c\u5c14\u53ef\u592b\u5047\u8bbe\u7684\u5b58\u5728\uff0c\u5b83\u53ef\u4ee5\u8f6c\u5316\u4e3a\u4e00\u4e2a\u52a8\u6001\u89c4\u5212\u95ee\u9898\uff0c\u7528 viterbi \u7b97\u6cd5\u89e3\u51b3\uff0c\u8ba1\u7b97\u91cf\u6b63\u6bd4\u4e8e n\u3002 \u9012\u5f52\u601d\u60f3\u5c31\u662f\uff1a\u4e00\u6761\u6700\u4f18\u8def\u5f84\u5207\u6210\u4e24\u6bb5\uff0c\u90a3\u4e48\u6bcf\u4e00\u6bb5\u90fd\u662f\u4e00\u6761\uff08\u5c40\u90e8\uff09\u6700\u4f18\u8def\u5f84 Pytorch API \u00b6 \u6211\u4eec\u5148\u6765\u4ecb\u7ecd\u51e0\u4e2a\u9700\u8981\u7528\u5230\u7684 API gather \u00b6 \u7406\u89e3\uff1a\u5c06 input \u6309\u7167 dim \u6307\u5b9a\u7684\u7ef4\u5ea6\u4ee5\u53ca index \u4e2d\u6307\u5b9a\u7684\u987a\u5e8f\uff0c\u53d6\u51fa\u7684\u5bf9\u5e94\u503c torch . gather ( input , dim , index , out = None , sparse_grad = False ) \u2192 Tensor Gathers values along an axis specified by dim. For a 3-D tensor the output is specified by: out [ i ][ j ][ k ] = input [ index [ i ][ j ][ k ]][ j ][ k ] # if dim == 0 out [ i ][ j ][ k ] = input [ i ][ index [ i ][ j ][ k ]][ k ] # if dim == 1 out [ i ][ j ][ k ] = input [ i ][ j ][ index [ i ][ j ][ k ]] # if dim == 2 If input is an n-dimensional tensor with size \\((x_0, x_1..., x_{i-1}, x_i, x_{i+1}, ..., x_{n-1})\\) and dim = i , then index must be an n-dimensional tensor with size \\((x_0, x_1, ..., x_{i-1}, y, x_{i+1}, ..., x_{n-1})\\) where \\(y \\geq 1\\) and out will have the same size as index . Parameters input ( Tensor ) \u2013 the source tensor dim ( int ) \u2013 the axis along which to index index ( LongTensor ) \u2013 the indices of elements to gather out ( Tensor , optional ) \u2013 the destination tensor sparse_grad ( bool ,optional ) \u2013 If True , gradient w.r.t. input will be a sparse tensor. Example: >>> t = torch . tensor ([[ 1 , 2 ],[ 3 , 4 ]]) >>> torch . gather ( t , 1 , torch . tensor ([[ 0 , 0 ],[ 1 , 0 ]])) tensor ([[ 1 , 1 ], [ 4 , 3 ]]) scatter \u00b6 \u5c06 src \u7684\u503c\u6309\u7167 dim \u548c index \u7684\u8981\u6c42\u586b\u5165 self \u4e2d scatter_ ( dim , index , src ) \u2192 Tensor Writes all values from the tensor src into self at the indices specified in the index tensor. For each value in src , its output index is specified by its index in src for dimension != dim and by the corresponding value in index for dimension = dim . For a 3-D tensor, self is updated as: self [ index [ i ][ j ][ k ]][ j ][ k ] = src [ i ][ j ][ k ] # if dim == 0 self [ i ][ index [ i ][ j ][ k ]][ k ] = src [ i ][ j ][ k ] # if dim == 1 self [ i ][ j ][ index [ i ][ j ][ k ]] = src [ i ][ j ][ k ] # if dim == 2 This is the reverse operation of the manner described in gather() . self , index and src (if it is a Tensor) should have same number of dimensions. It is also required that index.size(d) <= src.size(d) for all dimensions d , and that index.size(d) <= self.size(d) for all dimensions d != dim . Moreover, as for gather() , the values of index must be between 0 and self.size(dim) - 1 inclusive, and all values in a row along the specified dimension dim must be unique. Parameters dim ( int ) \u2013 the axis along which to index index ( LongTensor ) \u2013 the indices of elements to scatter, can be either empty or the same size of src. When empty, the operation returns identity src ( Tensor ) \u2013 the source element(s) to scatter, incase value is not specified value ( float ) \u2013 the source element(s) to scatter, incase src is not specified Example: >>> x = torch . rand ( 2 , 5 ) >>> x tensor ([[ 0.3992 , 0.2908 , 0.9044 , 0.4850 , 0.6004 ], [ 0.5735 , 0.9006 , 0.6797 , 0.4152 , 0.1732 ]]) >>> torch . zeros ( 3 , 5 ) . scatter_ ( 0 , torch . tensor ([[ 0 , 1 , 2 , 0 , 0 ], [ 2 , 0 , 0 , 1 , 2 ]]), x ) tensor ([[ 0.3992 , 0.9006 , 0.6797 , 0.4850 , 0.6004 ], [ 0.0000 , 0.2908 , 0.0000 , 0.4152 , 0.0000 ], [ 0.5735 , 0.0000 , 0.9044 , 0.0000 , 0.1732 ]]) >>> z = torch . zeros ( 2 , 4 ) . scatter_ ( 1 , torch . tensor ([[ 2 ], [ 3 ]]), 1.23 ) >>> z tensor ([[ 0.0000 , 0.0000 , 1.2300 , 0.0000 ], [ 0.0000 , 0.0000 , 0.0000 , 1.2300 ]]) masked_select \u00b6 \u4ece input \u4e2d\u9009\u51fa mask \u4e2d\u4e3a 1 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684\u503c\uff0c\u62fc\u4e3a\u65b0\u7684 Tensor \u5e76\u8fd4\u56de torch . masked_select ( input , mask , out = None ) \u2192 Tensor Returns a new 1-D tensor which indexes the input tensor according to the binary mask mask which is a ByteTensor. The shapes of the mask tensor and the input tensor don\u2019t need to match, but they must be broadcastable . NOTE The returned tensor does not use the same storage as the original tensor Parameters input ( Tensor ) \u2013 the input data mask ( ByteTensor ) \u2013 the tensor containing the binary mask to index with out ( Tensor , optional ) \u2013 the output tensor Example: >>> x = torch . randn ( 3 , 4 ) >>> x tensor ([[ 0.3552 , - 2.3825 , - 0.8297 , 0.3477 ], [ - 1.2035 , 1.2252 , 0.5002 , 0.6248 ], [ 0.1307 , - 2.0608 , 0.1244 , 2.0139 ]]) >>> mask = x . ge ( 0.5 ) >>> mask tensor ([[ 0 , 0 , 0 , 0 ], [ 0 , 1 , 1 , 1 ], [ 0 , 0 , 0 , 1 ]], dtype = torch . uint8 ) >>> torch . masked_select ( x , mask ) tensor ([ 1.2252 , 0.5002 , 0.6248 , 2.0139 ]) masked_scatter_ \u00b6 \u5c06 mask \u4e3a 1 \u7684\u5bf9\u5e94 source \u4e2d\u7684\u503c\u590d\u5236\u5230 self \u4e2d masked_scatter_ ( mask , source ) Copies elements from source into self tensor at positions where the mask is one. The shape of mask must be broadcastable with the shape of the underlying tensor. The source should have at least as many elements as the number of ones in mask Parameters mask ( ByteTensor ) \u2013 the binary mask source ( Tensor ) \u2013 the tensor to copy from NOTE The mask operates on the self tensor, not on the given source tensor. masked_fill_ \u00b6 \u5c06 mask \u4e3a 1 \u7684 self \u4e2d\u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684\u503c\u6539\u4e3a value masked_fill_ ( mask , value ) Fills elements of self tensor with value where mask is one. The shape of mask must be broadcastable with the shape of the underlying tensor. Parameters mask ( ByteTensor ) \u2013 the binary mask value ( float ) \u2013 the value to fill in with CRF \u6e90\u7801\u89e3\u6790 \u00b6 \u73b0\u5728\u6765\u770b CRF \uff0cCRF \u8003\u8651\u7684\u4e0d\u662f\u6bcf\u6b21\u8f6c\u79fb\u65f6\u7684\u6700\u4f18\u6982\u7387\uff0c\u8003\u8651\u7684\u6574\u4f53\u5e8f\u5217\u7684\u53ef\u80fd\u6027\u3002 Previous_to \\(\\to\\) current_from CRF \u7684\u6838\u5fc3\u662f\u5b83\u4e0d\u50cfLSTM\u7b49\u6a21\u578b\uff0c\u80fd\u591f\u8003\u8651\u957f\u8fdc\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c \u5b83\u66f4\u591a\u8003\u8651\u7684\u662f\u6574\u4e2a\u53e5\u5b50\u7684\u5c40\u90e8\u7279\u5f81\u7684\u7ebf\u6027\u52a0\u6743\u7ec4\u5408\uff08\u901a\u8fc7\u7279\u5f81\u6a21\u7248\u53bb\u626b\u63cf\u6574\u4e2a\u53e5\u5b50\uff09 \u3002\u5173\u952e\u7684\u4e00\u70b9\u662f\uff0cCRF\u7684\u6a21\u578b\u4e3ap(y | x, w)\uff0c\u6ce8\u610f\u8fd9\u91ccy\u548cx\u90fd\u662f\u5e8f\u5217\uff0c\u5b83\u6709\u70b9\u50cflist wise\uff0c\u4f18\u5316\u7684\u662f\u4e00\u4e2a\u5e8f\u5217y = (y1, y2, \u2026, yn)\uff0c\u800c\u4e0d\u662f\u67d0\u4e2a\u65f6\u523b\u7684yt\uff0c\u5373\u627e\u5230\u4e00\u4e2a\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217y = (y1, y2, \u2026, yn)\u4f7f\u5f97p(y1, y2, \u2026, yn| x, w)\u6700\u9ad8\uff0c\u5b83\u8ba1\u7b97\u7684\u662f\u4e00\u79cd\u8054\u5408\u6982\u7387\uff0c\u4f18\u5316\u7684\u662f\u6574\u4e2a\u5e8f\u5217\uff08\u6700\u7ec8\u76ee\u6807\uff09\uff0c\u800c\u4e0d\u662f\u5c06\u6bcf\u4e2a\u65f6\u523b\u7684\u6700\u4f18\u62fc\u63a5\u8d77\u6765\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0aCRF\u8981\u4f18\u4e8eLSTM\u3002 \u8f6c\u79fb\u77e9\u9635\u7684 \\([i, j]\\) \u4ee3\u8868\u7684\u662f\u7531\u72b6\u6001 \\(i\\) \u8f6c\u79fb\u5230\u72b6\u6001 \\(j\\) \u7684\u53ef\u80fd\u6027 \u6ce8\u610f\uff0cCRF \u4e2d\u7684 tag_size \u662f\u771f\u5b9e\u7684 tag_size + 2 _calculate_PZ(self, feats, mask) \u00b6 \u9996\u5148\u6211\u4eec\u5c06\u83b7\u5f97\u7684 size \u4e3a batch_size, seq_len, tag_size \u7684\u7279\u5f81\u5411\u91cf\u8c03\u6574\u4e3a seq_len, batch_size, tag_size \uff0c\u65b9\u4fbf\u968f\u540e\u4f9d\u65f6\u95f4\u6b65\u8bbf\u95ee\u5e8f\u5217\u3002 \u800c\u540e\u518d\u8c03\u6574\u4e3a seq_len * batch_size, 1, tag_size \uff0c\u518d\u6269\u5c55\u6210\u4e3a seq_len * batch_size, tag_size, tag_size \u4e0e\u8f6c\u79fb\u77e9\u9635\u76f8\u52a0\u5f97\u5230 scores \u3002 \u53ef\u4ee5\u7406\u89e3\u6210\u662f\u5c06\u901a\u8fc7 model \u83b7\u5f97\u5230\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u6240\u6709\u7684 tag \u7684\u53ef\u80fd\u6027\u90fd\u52a0\u5230\u8f6c\u79fb\u77e9\u9635\u4e4b\u4e0a\uff0c\u5373\u5f53\u6211\u4eec\u6309\u65f6\u95f4\u6b65\u904d\u5386\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e0a\u7684 size \u4e3a batch_size, tag_size, tag_size \u7684 cur_values \u77e9\u9635\u65f6\uff0c\u8fd9\u91cc\u7684\u77e9\u9635\u662f\u7531\u539f\u59cb\u7684\u8f6c\u79fb\u77e9\u9635 + \u4e4b\u524d model \u5f97\u5230\u7684\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684 word \u7684\u6bcf\u79cd tag \u7684\u53ef\u80fd\u6027\u3002\u8fd9\u91cc\u6211\u4eec\u5c06\u7279\u5f81\u5411\u91cf feature \u4ece\u4e00\u4e2a\u884c\u5411\u91cf(\u4e0d\u770b batch_size )\u6269\u5c55\u4e3a\u4e00\u4e2a\u77e9\u9635\uff0c\u5176\u5b9e\u5c31\u662f\u4e0d\u7ba1 start \u72b6\u6001\u662f\u4ec0\u4e48\uff0c\u8f6c\u79fb\u5230 j \u72b6\u6001\u7684\u53ef\u80fd\u6027\u90fd\u4f1a\u52a0\u4e0a \u6269\u5c55\u524d\u7684 feature[j]\u3002 \u800c\u5728\u6bcf\u6b21\u968f\u65f6\u95f4\u6b65\u7684\u8fed\u4ee3\u4e2d\uff0c\u6211\u4eec\u90fd\u4f1a\u5c06\u524d\u4e00\u65f6\u95f4\u6b65\u4f20\u6765\u7684 size \u4e3a batch_size, tag_size, 1 \u7684 partition \u6570\u7ec4\uff0c\u6269\u5c55\u4e3a batch_size, tag_size, tag_size \u5e76\u52a0\u4e0a cur_values \u3002 \u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0cpartition \u662f\u7531 inivalues[:, START_TAG, :].clone().view(batch_size, tag_size, 1 \u5f97\u5230\u7684\uff0c\u5176\u542b\u4e49\u662f start_tag \u4e4b\u540e\u7684\u4e0b\u4e00\u4e2a tag \u7684\u6982\u7387\u503c\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u65f6\u95f4\u6b65\u5bf9\u5e94\u7684 word \u7684 tag \u7684\u53ef\u80fd\u6027\u3002\u5c06\u8fd9\u4e00 \u5217\u5411\u91cf \u6269\u5c55\u540e\u5e76\u4e0e cur_values \u76f8\u52a0\u540e\uff0c\u76f8\u5f53\u4e8e\u6bcf\u4e00\u884c\u7684\u5404\u4e2a\u6570\u503c\u90fd\u52a0\u4e0a\u4e86\u540c\u4e00\u503c\uff0c\u4e5f\u5c31\u662f\u4ece\u72b6\u6001 i \u5230\u5176\u4ed6\u4efb\u4f55\u72b6\u6001\u90fd\u52a0\u4e0a\u4e86 inivalues[START_TAG, i] (\u4e0d\u770b batch_size )\u3002 \u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e00\u6570\u503c\u7684\u542b\u4e49\u662f\u4ece start_tag \u5230\u72b6\u6001 i \u7684\u53ef\u80fd\u6027\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u72b6\u6001\u4e3a i \u7684\u53ef\u80fd\u6027\u3002 \u90a3\u4e48 cur_values \u9700\u8981\u5c06\u7531\u72b6\u6001 i \u51fa\u53d1\u7684\u6240\u6709\u72b6\u6001 j \u7684\u53ef\u80fd\u6027\u90fd\u589e\u52a0\u8fd9\u4e00\u6570\u503c\uff0c\u5373cur_values[i] = inivalues[START_TAG, i].view(1, tag_size) + cur_values[i]\u3002\u5bf9\u6bcf\u884c\u5206\u522b\u5904\u7406\u4e00\u6b21\uff0c\u7ecf\u8fc7\u8fd9\u6837\u7684 tag_size \u6b21\u8fd0\u7b97\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u3001\u8003\u8651\u5230\u524d\u4e00\u72b6\u6001\u8f6c\u79fb\u77e9\u9635\u7684\uff0c\u65b0\u7684\u72b6\u6001\u8f6c\u79fb\u77e9\u9635\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e00\u77e9\u9635\u8fdb\u884c\u5904\u7406\uff0c\u5f97\u5230\u65b0\u7684 partition \u4f20\u9012\u7ed9\u4e0b\u4e00\u6b21\u7684\u8fed\u4ee3\u3002\u6211\u4eec\u5148\u8ba1\u7b97\u77e9\u9635\u6bcf\u4e00\u5217\u7684\u6700\u5927\u503c\uff0c\u6784\u6210\u4e00\u4e2a\u884c\u5411\u91cf max_value \uff0cmax_value[j] \u542b\u4e49\u662f\u4e0b\u4e00\u72b6\u6001\u4e3a j \u7684\u6700\u5927\u8f6c\u79fb\u53ef\u80fd\u6027\uff0c \u5c06\u5176\u62d3\u5c55\u4e3a\u548c\u8f93\u5165\u7684 partition \u4e00\u6837\u7684 size \u540e\u7528 partition - max_value\uff0c\u77e9\u9635\u7684\u6240\u6709\u503c\u90fd\u662f\u975e\u6b63\u6570\uff0c\u9010\u5143\u7d20\u4f5c\u7528 exp \u51fd\u6570\u5c06\u5176\u6309\u5217 sum (\u7b2c i \u5217\u7684\u548c\u7684\u610f\u4e49\u662f\u4e0b\u4e00\u72b6\u6001\u4e3a i \u7684\u53ef\u80fd\u6027\u4e4b\u548c) \uff0c\u9010\u5143\u7d20\u4f5c\u7528 log \u51fd\u6570\uff0c\u6700\u7ec8\u5f97\u5230\u7684\u65b0\u7684\u77e9\u9635 temp \u662f\u4e00\u4e2a\u884c\u5411\u91cf(\u4e0d\u770b batch_size )\uff0ctemp[j] \u4ee3\u8868\u7684\u662f\u8f6c\u79fb\u5230\u72b6\u6001 j \u7684\u53ef\u80fd\u6027\u4e4b\u548c\u3002\u518d\u5c06\u5176\u4e0e max_score\u76f8\u52a0\uff0c\u5f97\u5230\u6700\u7ec8\u7684 cur_partition\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u8ff0\u8fc7\u7a0b\u672a\u63d0\u53ca mask \u6b65\u9aa4\uff0c\u5b9e\u9645\u64cd\u4f5c\u4e2d\u9700\u8981\u4f7f\u7528 mask \u64cd\u4f5c\u5b8c\u6210\u5bf9 partition \u7684\u66f4\u65b0 \u5373\uff0c\u5c06 cur_partition \u4e2d\u5bf9\u5e94 mask \u4e3a 1 \u7684\u53d6\u51fa\u5e76\u62fc\u63a5\u4e3a\u4e00\u7ef4\u7684 masked_cur_partition \uff0c\u518d\u5c06masked_cur_partition \u4e2d \u66f4\u65b0\u5230 partition \u7684\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u83b7\u5f97\u65b0\u7684 partition \u904d\u5386\u5b8c\u5e8f\u5217\u540e\uff0c\u5f97\u5230 final_partition = cur_partition[:, STOP_TAG] \uff0c\u5373\u5404\u4e2a\u72b6\u6001\u8f6c\u79fb\u5230 stop_tag \u7684\u53ef\u80fd\u6027\uff0c\u6c42\u5f97\u5176 sum \u5e76\u8fd4\u56de sum \u4e0e scores _score_sentence(self, scores, mask, tags) \u00b6 \u800c\u4eca\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u4e86 forward_score, scores \uff0c\u63a5\u4e0b\u6765\u7ee7\u7eed\u8ba1\u7b97 gold_score tags \u7684 size \u4e3a (batch, seq_len) \uff0c\u5b58\u653e\u7684\u662f\u6bcf\u4e2a batch \u5185\u6bcf\u4e2a sequence \u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684 tag \u7c7b\u578b\u3002\u4e3a\u4e86\u80fd\u591f\u4ece scores \u4e2d\u53d6\u51fa\u5bf9\u5e94\u7684 tg_energy\uff0c\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9996\u5148\u5c06 size \u4e3a (seq_len, batch, tag_size, tag_size) \u7684 scores \u8c03\u6574\u4e3a (seq_len, batch, tag_size * tag_size) \u63a5\u7740\u5c06 tags \u7684\u6570\u503c\u8c03\u6574\u4e3a new_tags[:, idx] = tags[:, idx - 1] * tag_size + tags[:, idx] \uff0c\u6b64\u65f6\u7684\u77e9\u9635\u5b58\u50a8\u7684\u6570\u503c\u6b63\u548c scores \u77e9\u9635\u538b\u7f29\u540e\u7684\u5bf9\u5e94\u4f4d\u7f6e\u4e00\u81f4\uff0c\u5373\u5c06 from_tag & to_tag \u7684\u4fe1\u606f\u5b58\u50a8\u5728\u4e86\u8fd9\u4e00\u6570\u503c\u4e2d\uff0cnew_tags \u7684 size \u4e3a (batch_size, seq_len) \u5c06 new_tags \u4ea4\u6362 0 1 \u7ef4\u5e76\u8c03\u6574\u4e3a (seq_len, batch_size, 1)\uff0c\u7136\u540e\u4ece scores \u4e2d\u53d6\u51fa\u5bf9\u5e94\u7684 tg_energy \uff0csize \u4e3a (seq_len, batch_size) \u518d\u4f7f\u7528 mask \u77e9\u9635\u8fc7\u6ee4\u4e00\u904d \u53d6\u51fa\u8f6c\u79fb\u77e9\u9635\u4e2d\u6240\u6709 tag \u53d8\u4e3a STOP_TAG \u7684\u6982\u7387\u503c\u5e76\u6269\u5c55\u4e3a (batch_size, tag_size) \u4f5c\u4e3a end_transition \u901a\u8fc7\u5bf9 size \u4e3a (batch, seq_len) \u7684 mask \u7684\u6bcf\u884c\u6c42\u548c\uff0c\u5f97\u5230\u6bcf\u4e2a sequence \u7684 length\uff0c\u518d\u4ece\u539f tags \u4e2d\u53d6\u51fa\u6bcf\u4e2a sequence \u7684\u6700\u540e\u4e00\u4e2a tag \u7684 ID \u5f62\u6210 size \u4e3a (batch_size, 1) \u7684 end_ids \u63a5\u7740\u4ece end_transition \u4e2d\u53d6\u51fa end_ids \u5bf9\u5e94\u7684 end_energy \u5bf9 tg_energy \u548c end_energy \u5206\u522b\u6c42\u548c\u5e76\u76f8\u52a0\uff0c\u5f97\u5230 gold_score _viterbi_decode(self, feats, mask) \u00b6 \u73b0\u5728\u6211\u4eec\u6765\u770b viterbi_decode \u9996\u5148\u548c\u4e4b\u524d _calculate_PZ \u7684\u8ba1\u7b97\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u5f97\u5230 scores \u77e9\u9635\u540e\u8fdb\u884c\u904d\u5386\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u9700\u8981\u8bb0\u5f55\u6240\u6709\u7684 partition \u4ee5\u53ca cur_bp \u5206\u522b\u4fdd\u5b58\u5728 partition_history \u548c back_points \uff0c\u5e76\u4e14\u8ba1\u7b97\u65b9\u5f0f\u4e3a partition, cur_bp = torch.max(cur_values, 1) \uff0c\u6b64\u5916 mask \u9700\u8981 reverse \uff0c\u5373 mask = (1 - mask.long()).byte() \uff0c\u6b64\u65f6 mask \u4e2d\u4e3a 1 \u7684\u90e8\u5206\u8868\u793a padding partition \u4e3a\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u5404\u4e2a to_target \u7684\u6700\u5927\u53ef\u80fd\u6027 cur_bp \u4e3a partition \u7684\u6bcf\u4e2a\u503c\u7684 from_target \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 1 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0 \u63a5\u7740\uff0c\u901a\u8fc7 length_mask \u83b7\u5f97 last_position \u5373\u6bcf\u4e2a sequence \u7684\u7ed3\u675f\u4f4d\u7f6e\u7684 index\uff0c\u518d\u4ece partition_history \u4e2d\u53d6\u51fa last_partition \uff0c\u4e0e\u8f6c\u79fb\u77e9\u9635 transitions \u76f8\u52a0\uff0c\u5f97\u5230\u5e8f\u5217\u7684\u7ed3\u5c3e\u5904\u7684\u8f6c\u79fb\u77e9\u9635 last_values \uff0c\u800c\u540e\u6c42\u5f97\u5176\u6bcf\u5217\u7684\u6700\u5927\u503c\u5bf9\u5e94\u7684 index \uff0c\u518d\u53d6\u51fa STOP_TAG \u5bf9\u5e94\u7684\u5217\uff0c\u5c31\u83b7\u5f97\u4e86 size \u4e3a (batch_size) \u7684pointer \uff0c\u5373\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \u3002\u518d\u5c06\u8fd9\u4e00 from_target \u653e\u5230 back_points \u7684\u672b\u5c3e \u6700\u540e\u8ba1\u7b97 decode_idx\uff0c\u7528\u4e8e\u5728 decode \u9636\u6bb5\u89e3\u6790\u5f97\u5230 decoded sequence pointer \u662f decode_idx \u7684\u6700\u540e\u4e00\u9879\uff0c\u56e0\u4e3a\u5176\u4fdd\u5b58\u7684\u662f\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \uff0c\u5373 end_id \u5012\u5e8f\u89e3\u7801\u65f6\uff0c\u540e\u4e00\u65f6\u95f4\u6b65\u7684 pointer \u5373\u4e3a\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u4e86\uff0c\u6240\u4ee5\u5bf9\u5e94\u4ece back_points \u4e2d\u53d6\u5f97\u5176 from_target \u5e76\u4fdd\u5b58\u5728 decode_idx \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8 _viterbi_decode_nbest(self, feats, mask, nbest) \u00b6 \u9996\u5148\u548c _calculate_PZ \u7684\u8ba1\u7b97\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u83b7\u5f97 scores \u77e9\u9635\uff0c\u518d\u53d6\u51fa start_tag \u4e4b\u540e\u7684\u4e0b\u4e00\u4e2a tag \u7684\u6982\u7387\u503c\uff0c\u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest) \uff0c\u5728\u6dfb\u52a0\u5230 partition_history \u4e2d\uff0c\u6b64\u65f6 idx \u4e3a 0\u3002\u6b64\u5916 mask \u9700\u8981 reverse \uff0c\u5373 mask = (1 - mask.long()).byte() \uff0c\u6b64\u65f6 mask \u4e2d\u4e3a 1 \u7684\u90e8\u5206\u8868\u793a padding \u63a5\u7740\u904d\u5386 scores \u7b2c\u4e00\u6b21\u904d\u5386\u65f6 idx \u5df2\u7ecf\u4e3a 1 , \u5c06 cur_values \u4e0e partition \u76f8\u52a0\u83b7\u5f97 size \u4e3a (batch_size, tag_size, tag_size) \u7684 \u65b0 cur_values \u63a5\u7740\u53d6\u51fa cur_values \u4e2d\u7684 topk dim=1 \u7684\u6392\u5e8f\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 partition \u4ee5\u53ca\u5bf9\u5e94\u7684 index -- cur_bp\uff0c\u5373\u83b7\u5f97\u4e86\u4e0b\u4e00\u72b6\u6001\u7684 topk \u7684\u53ef\u80fd\u6027\u4ee5\u53ca\u5bf9\u5e94\u7684 from_target \uff0csize \u5747\u4e3a (batch_size, nbest, tag_size) \u5c06 cur_bp \u7684\u6240\u6709\u503c\u90fd * nbest \uff0c\u4e0e\u540e\u7eed\u7684 index \u4e00\u81f4 \u5c06 partition \u548c cur_bp \u7684 1 2 \u7ef4\u5bf9\u8c03\uff0csize \u53d8\u4e3a (batch_size, tag_size, nbest)\uff0c\u5e76\u5c06 partition \u4fdd\u5b58\u5728 partition_history \u4e2d \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 0 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0\uff0c\u5e76\u5c06 cur_bp \u4fdd\u5b58\u5728 back_points \u4e2d \u5176\u4ed6\u65f6\u5019 \\(\\text{idx} \\gt 1\\) \uff0c\u5c06 cur_values \u8c03\u6574\u4e3a (batch_size, tag_size, 1, tag_size) \u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \uff0c\u5c06 partition \u8c03\u6574\u4e3a (batch_size, tag_size, nbest, 1) \u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \uff0c\u518d\u5c06\u4e24\u8005\u76f8\u52a0\uff0c\u83b7\u5f97\u65b0\u7684 cur_values \u5e76\u8c03\u6574size \u4e3a (batch_size, tag_size * nbest, tag_size) \u8fd9\u91cc\u7684\u4e24\u6b21\u6269\u5c55\uff1a\u5bf9\u4e8e nbest \u800c\u8a00\uff0ccur_values \u662f\u4e0d\u53d8\u7684\uff0c\u6545\u53ef\u4ee5\u76f4\u63a5\u62d3\u5c55\uff0c\u800c partition \u8c03\u6574\u4e3a (batch_size, tag_size, nbest, 1) \u540e\u7684\u542b\u4e49\u662f\u4e0a\u4e00\u65f6\u95f4\u6b65\u4f5c\u4e3a to_target \u7684\u6bcf\u79cd tag \u7684 topk \u7684\u6982\u7387\u503c\uff0c\u5373\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u6bcf\u4e00\u79cd tag \u4f5c\u4e3a from_target \u7684 topk \u7684\u6982\u7387\u503c\uff0c\u6269\u5c55\u540e\u76f8\u5f53\u4e8e topk \u4e2d\u6bcf\u4e2a topn \u5bf9\u5e94\u7684 (tag_size, tag_size) \u7684\u8f6c\u79fb\u77e9\u9635\uff0c\u8fd9\u91cc\u7684\u8f6c\u79fb\u77e9\u9635\u662f\u7531 (tag_size, 1) \u7684\u5217\u5411\u91cf\u6269\u5c55\u800c\u6765\u7684\uff0c\u76f8\u5f53\u4e8e\u65e0\u8bba\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u662f\u4ec0\u4e48\uff0c \u7279\u5b9a from_target \u7684\u8f6c\u79fb\u6982\u7387\u662f\u4e00\u6837\u7684 \u76f8\u52a0\u540e\u8c03\u6574\u4e3a (batch_size, tag_size * nbest, tag_size) \u63a5\u7740\u53d6\u51fa cur_values \u4e2d\u7684 topk dim=1 \u7684\u6392\u5e8f\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 partition \u4ee5\u53ca\u5bf9\u5e94\u7684 index -- cur_bp\uff0c\u5373\u83b7\u5f97\u4e86\u4e0b\u4e00\u72b6\u6001\u7684 topk \u7684\u53ef\u80fd\u6027\u4ee5\u53ca\u5bf9\u5e94\u7684 from_target \uff0csize \u5747\u4e3a (batch_size, nbest, tag_size) \u7531\u4e8e\u5df2\u7ecf\u5c06 size \u8c03\u6574\u4e3a (batch_size, tag_size * nbest, tag_size) \uff0c\u6240\u4ee5 topk \u7684\u6392\u5e8f\u8303\u56f4\u662f tag_size * nbest \uff0c\u5373\u5bf9\u8bb0\u5f55\u7684 tag_size \u4e2a size \u4e3a [nbest, tag_size] \u7684\u8f6c\u79fb\u77e9\u9635\u7eb5\u5411\u8fde\u63a5\u5f62\u6210 (tag_size * nbest, tag_size) \u7684\u77e9\u9635\uff0c\u800c\u540e\u5bf9\u6bcf\u5217\u7684 topk \u53d6\u51fa\u6570\u503c\u4e0e index \u8fd9\u91cc\u7684 index \u7684\u8303\u56f4\u662f [0, tag_size * nbest - 1]\uff0cindex / nbest \u5c31\u53ef\u4ee5\u5f97\u5230\u8303\u56f4\u4e3a [0, tag_size - 1] \u7684\u771f\u5b9e\u7684 index \uff0c\u5373 from_target \u4f8b\u5982from_target \u4e3a 5 \u7684 top2 \u7684 nbest \u4e0b\u7684 index \u5c31\u4e3a nbest * 5 + 2\uff0c index / nbest \u540e\u5373\u53ef\u5f97\u5230 from_target = 5 \u5c06 partition \u548c cur_bp \u7684 1 2 \u7ef4\u5bf9\u8c03\uff0csize \u53d8\u4e3a (batch_size, tag_size, nbest)\uff0c\u5e76\u5c06 partition \u4fdd\u5b58\u5728 partition_history \u4e2d \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 0 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0\uff0c\u5e76\u5c06 cur_bp \u4fdd\u5b58\u5728 back_points \u4e2d \u83b7\u5f97\u4e86 size \u4e3a (batch_size, seq_len, nbest, tag_size) \u7684 partition_history\uff0c\u901a\u8fc7 length_mask \u83b7\u5f97 size \u4e3a (batch_size, 1, tag_size, nbest) \u7684 last_position\uff0c\u518d\u4ece partition_history \u53d6\u51fa sequence \u672b\u5c3e\u5f97\u5230 last_partition \u5e76\u8c03\u6574\u5176 size \u4e3a (batch_size, tag_size, nbest, 1)\uff0c\u518d\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \u5e76\u4e0e\u8f6c\u79fb\u77e9\u9635 transitions \u76f8\u52a0\uff0c\u5f97\u5230\u5e8f\u5217\u7684\u7ed3\u5c3e\u5904\u7684\u8f6c\u79fb\u77e9\u9635 last_values \u63a5\u7740\u4e0e\u904d\u5386 scores \u65f6\u7c7b\u4f3c\uff0c\u53d6\u51fa\u538b\u7f29\u540e\u7684 end_partition \u548c end_bp \u5e76\u53d6\u51fa STOP_TAG \u5bf9\u5e94\u7684\u77e9\u9635\uff0c\u5c31\u83b7\u5f97\u4e86 size \u4e3a (batch_size, nbest) \u7684pointer \uff0c\u5373\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \u3002\u518d\u5c06\u8fd9\u4e00 from_target \u653e\u5230 back_points \u7684\u672b\u5c3e \u6700\u540e\u8ba1\u7b97 decode_idx\uff0c\u7528\u4e8e\u5728 decode \u9636\u6bb5\u89e3\u6790\u5f97\u5230 decoded sequence pointer \u662f decode_idx \u7684\u6700\u540e\u4e00\u9879\uff0c\u56e0\u4e3a\u5176\u4fdd\u5b58\u7684\u662f\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \uff0c\u5373 end_id \uff0c\u4f46\u7531\u4e8e\u4e4b\u524d\u5df2\u5c06 index \u538b\u7f29\uff0c\u6240\u4ee5 decode_idx[-1] = pointer.data / nbest \uff0c\u4ece\u800c\u83b7\u5f97\u771f\u6b63\u7684 index \u5012\u5e8f\u89e3\u7801\u65f6\uff0c\u540e\u4e00\u65f6\u95f4\u6b65\u7684 pointer \u5373\u4e3a\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u4e86\uff0c\u6240\u4ee5\u5bf9\u5e94\u4ece back_points \u4e2d\u53d6\u5f97\u5176 from_target \u5e76 / nbest\uff0c\u7136\u540e\u4fdd\u5b58\u5728 decode_idx \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8 \u6ce8\u610f\uff0c\u6b64\u5904\u7684 pointer \u9700\u8981\u4fdd\u5b58 the last end nbest ids for non longest \u6240\u6709\u7684 back_points \u4fdd\u5b58\u7684\u90fd\u662f\u7ecf\u8fc7 mask \u5904\u7406\u7684 tag_id \uff0cpadding \u7684 tag_id \u5747\u4e3a 0 \u5bf9\u4e8e _viterbi_decode \u7684\u89e3\u7801\u8fc7\u7a0b\uff0cpointer \u6269\u5c55\u4e3a (batch_size, 1, tag_size) \u540e\u6210\u4e3a insert_last \u5e76\u653e\u5728 sequence \u7684 last_position \u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5bf9\u4e8e\u67d0\u4e00 sequence \u800c\u8a00\uff0c\u4e0d\u7ba1\u5230\u8fbe\u8fd9\u4e00\u4f4d\u7f6e\u7684 pointer \u7684\u5bf9\u5e94\u4f4d\u7f6e\u662f\u51e0\uff0c\u53ea\u8981\u5230\u8fbe\u4e86\u8be5 sequence \u7684\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u4f1a\u5f97\u5230\u5176 tag\uff0c\u4ece\u800c\u5b8c\u6210\u5bf9\u5e94\u7684\u89e3\u7801 \u5bf9\u4e8e nbest \u65f6\u7684\u89e3\u7801\u8fc7\u7a0b\uff0c\u9700\u8981\u8003\u8651 n \u79cd\u60c5\u51b5\uff0c\u5728\u89e3\u7801\u7684\u7b2c\u4e00\u6b21\u66f4\u65b0 pointer \u65f6\uff0c\u6240\u6709\u957f\u5ea6\u5c0f\u4e8e\u6700\u5927\u957f\u5ea6\u7684 sequence \u7684 pointer \u90fd\u4f1a\u53d8\u4e3a 0\uff0c\u800c\u7531\u4e8e back_points[idx] \u88ab\u8c03\u6574\u4e3a (batch_size, tag_size * nbest)\uff0c \u65e0\u6cd5\u5bf9\u6bcf\u4e2a nbest \u90fd\u8bbf\u95ee 0 \u4ee5\u83b7\u5f97\u5176 last end nbest ids \uff0c\u538b\u7f29\u540e\u6240\u6709\u7684 0 \u90fd\u53ea\u80fd\u8bbf\u95ee\u5230\u540c\u4e00\u4e2a\u503c\uff0c\u8fd9\u53ea\u662f top1 \u7684 last end id\uff0c\u90a3\u4e48\u5c31\u4f1a\u4e22\u5931 last end nbest ids\u3002\u6240\u4ee5\u9700\u8981\u5c06\u4f1a\u88ab 0 \u8986\u76d6\u6389\u7684 last end nbest ids \u4fdd\u5b58\u5e76\u91cd\u65b0\u8986\u76d6 \u4f7f\u7528\u7684\u7b2c\u4e00\u4e2a pointer \u662f\u6240\u6709 sequence \u7684\u6700\u540e\u4e00\u4e2a tag_id\uff0c\u5373\u4f7f tag_id \u5e76\u4e0d\u662f back_points[idx] \u7684 to_target \u4e5f\u6ca1\u5173\u7cfb\uff0c\u53d6\u5f97\u7684 from_target \u4ecd\u7136\u4f1a\u56e0\u4e3a\u4e4b\u524d\u7684 mask \u5904\u7406 \u800c\u4e3a 0\uff1b\u968f\u540e\u7684 pointer \u4ea6\u7136 Reference \u00b6 \u300a\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u300b CRFS \u7406\u89e3\u6761\u4ef6\u968f\u673a\u573a \u6761\u4ef6\u968f\u673a\u573aCRF \u7b80\u660e\u6761\u4ef6\u968f\u673a\u573aCRF\u4ecb\u7ecd | \u9644\u5e26\u7eafKeras\u5b9e\u73b0 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e4b\u5e8f\u5217\u6807\u6ce8\u95ee\u9898","title":"NCRF++"},{"location":"Notes%20on%20NCRF%2B%2B/#ncrf","text":"","title":"NCRF++\u5b66\u4e60\u7b14\u8bb0"},{"location":"Notes%20on%20NCRF%2B%2B/#_1","text":"","title":"\u6587\u6863\u5b66\u4e60"},{"location":"Notes%20on%20NCRF%2B%2B/#readmemd","text":"","title":"Readme.md"},{"location":"Notes%20on%20NCRF%2B%2B/#introduction","text":"\u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u5728\u8bb8\u591aNLP\u4efb\u52a1\u4e2d\u975e\u5e38\u6d41\u884c\uff0c\u4f8b\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08NER\uff09\uff0c\u8bcd\u6027\uff08POS\uff09\u6807\u8bb0\u548c\u5206\u8bcd\u3002\u6700\u5148\u8fdb\u7684\u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u4e3b\u8981\u5229\u7528\u5177\u6709\u8f93\u5165\u5b57\u7279\u5f81\u7684CRF\u7ed3\u6784\u3002 LSTM\uff08\u6216\u53cc\u5411LSTM\uff09\u662f\u5e8f\u5217\u6807\u8bb0\u4efb\u52a1\u4e2d\u6d41\u884c\u7684\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u7279\u5f81\u63d0\u53d6\u5668\u3002\u5e76\u4e14\u7531\u4e8e\u66f4\u5feb\u7684\u8ba1\u7b97\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528CNN\u3002\u6b64\u5916\uff0c\u5355\u8bcd\u4e2d\u7684\u7279\u5f81\u5bf9\u4e8e\u8868\u793a\u5355\u8bcd\u4e5f\u662f\u6709\u7528\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b57\u7b26LSTM\u6216\u5b57\u7b26CNN\u7ed3\u6784\u6216\u4eba\u7c7b\u5b9a\u4e49\u7684\u795e\u7ecf\u7279\u5f81\u6765\u6355\u83b7\u5355\u8bcd\u3002 NCRF ++\u662f\u4e00\u4e2a\u57fa\u4e8ePyTorch\u7684\u6846\u67b6\uff0c\u53ef\u7075\u6d3b\u9009\u62e9\u8f93\u5165\u7279\u5f81\u548c\u8f93\u51fa\u7ed3\u6784\u3002\u4f7f\u7528NCRF ++\u7684\u795e\u7ecf\u5e8f\u5217\u6807\u8bb0\u6a21\u578b\u7684\u8bbe\u8ba1\u53ef\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5b8c\u5168\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4e0d\u9700\u8981\u4efb\u4f55\u4ee3\u7801\u5de5\u4f5c\u3002 NCRF ++\u53ef\u4ee5\u88ab\u89c6\u4e3a CRF++ \u7684\u795e\u7ecf\u7f51\u7edc\u7248\u672c\uff0c\u8fd9\u662f\u4e00\u4e2a\u8457\u540d\u7684\u7edf\u8ba1CRF\u6846\u67b6\u3002 \u8be5\u6846\u67b6\u5df2\u88ab ACL 2018 \u63a5\u53d7\u4e3a demo \u8bba\u6587\u3002\u4f7f\u7528NCRF ++\u7684\u8be6\u7ec6\u5b9e\u9a8c\u62a5\u544a\u548c\u5206\u6790\u5df2\u88ab COLING 2018 \u63a5\u53d7\u4e3a\u6700\u4f73\u8bba\u6587\u3002 NCRF ++\u652f\u6301\u4e09\u4e2a\u7ea7\u522b\u7684\u4e0d\u540c\u7ed3\u6784\u7ec4\u5408\uff1acharacter sequence layer; word sequence layer and inference layer. \u5b57\u7b26\u5e8f\u5217\u8868\u793a\uff1a\u5b57\u7b26LSTM\uff0c\u5b57\u7b26GRU\uff0c\u5b57\u7b26CNN\u548c\u624b\u5de5\u5236\u4f5c\u7684\u5355\u8bcd\u7279\u5f81\u3002 \u5355\u8bcd\u5e8f\u5217\u8868\u793a\uff1a\u5355\u8bcdLSTM\uff0c\u5355\u8bcdGRU\uff0c\u5355\u8bcdCNN\u3002 \u63a8\u7406\u5c42\uff1aSoftmax\uff0cCRF\u3002","title":"Introduction"},{"location":"Notes%20on%20NCRF%2B%2B/#requirement","text":"Python: 2 or 3 PyTorch: 1.0 PyTorch 0.3 compatible version is here.","title":"Requirement"},{"location":"Notes%20on%20NCRF%2B%2B/#advantages","text":"\u5b8c\u5168\u53ef\u914d\u7f6e\uff1a\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u6240\u6709\u795e\u7ecf\u6a21\u578b\u7ed3\u6784\u3002 \u6700\u5148\u8fdb\u7684\u7cfb\u7edf\u6027\u80fd\uff1a\u4e0e\u6700\u5148\u8fdb\u7684\u6a21\u578b\u76f8\u6bd4\uff0c\u57fa\u4e8eNCRF ++\u7684\u6a21\u578b\u53ef\u4ee5\u63d0\u4f9b\u76f8\u5f53\u6216\u66f4\u597d\u7684\u7ed3\u679c\u3002 \u7075\u6d3b\u7684\u7279\u5f81\uff1a\u7528\u6237\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u7279\u5f81\u548c\u9884\u8bad\u7ec3\u7684\u7279\u5f81\u5d4c\u5165\u3002 \u5feb\u901f\u8fd0\u884c\u901f\u5ea6\uff1aNCRF ++\u5229\u7528\u5b8c\u5168\u6279\u91cf\u64cd\u4f5c\uff0c\u5728GPU\u7684\u5e2e\u52a9\u4e0b\u4f7f\u7cfb\u7edf\u9ad8\u6548\uff08> 1000sent / s\u7528\u4e8e\u8bad\u7ec3\uff0c> 2000sents / s\u7528\u4e8e\u89e3\u7801\uff09 N best output: NCRF++ \u652f\u6301 nbest decoding (with their probabilities).","title":"Advantages"},{"location":"Notes%20on%20NCRF%2B%2B/#usage","text":"NCRF ++\u652f\u6301\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u8bbe\u8ba1\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u3002\u8be5\u7a0b\u5e8f\u53ef\u4ee5\u8fd0\u884c\u4e24\u79cd\u72b6\u6001 \u8bad\u7ec3\u548c\u89e3\u7801 \u3002 \uff08\u793a\u4f8b\u914d\u7f6e\u548c\u6570\u636e\u5df2\u5305\u542b\u5728\u6b64\u5b58\u50a8\u5e93\u4e2d\uff09 In training status: python main.py --config demo.train.config In decoding status: python main.py --config demo.decode.config \u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u7f51\u7edc\u7ed3\u6784\uff0cI / O\uff0c\u8bad\u7ec3\u8bbe\u7f6e\u548c\u8d85\u53c2\u6570\u3002 Detail configurations and explanations are listed here . NCRF ++\u8bbe\u8ba1\u4e3a\u4e09\u5c42\uff08\u5982\u4e0b\u6240\u793a\uff09\uff1a\u5b57\u7b26\u5e8f\u5217\u5c42;\u5355\u8bcd\u5e8f\u5217\u5c42\u548c\u63a8\u7406\u5c42\u3002\u901a\u8fc7\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u8f7b\u677e\u590d\u5236\u5927\u591a\u6570\u6700\u5148\u8fdb\u7684\u6a21\u578b\u800c\u65e0\u9700\u7f16\u7801\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8bbe\u8ba1\u81ea\u5df1\u7684\u6a21\u5757\u6765\u6269\u5c55\u6bcf\u4e00\u5c42\uff08\u4f8b\u5982\uff0c\u4ed6\u4eec\u53ef\u80fd\u60f3\u8981\u8bbe\u8ba1\u9664CNN / LSTM / GRU\u4e4b\u5916\u7684\u5176\u4ed6\u795e\u7ecf\u7ed3\u6784\uff09\u3002\u6211\u4eec\u7684\u5c42\u8bbe\u8ba1\u4f7f\u6a21\u5757\u6269\u5c55\u65b9\u4fbf\uff0c\u6a21\u5757\u6269\u5c55\u7684\u6307\u4ee4\u53ef\u4ee5\u5728 \u8fd9\u91cc \u627e\u5230\u3002 \u56fe\u4e2d\u7684\u7ea2\u8272\u5706\u5708\u6307word embedding\uff0c\u9ec4\u8272\u6307 charCNN/RNN \u751f\u6210\u7684 word embedding\uff0c\u7070\u8272\u662f\u81ea\u5b9a\u4e49\u7684 handcrafted \u7279\u5f81\u3002","title":"Usage"},{"location":"Notes%20on%20NCRF%2B%2B/#data-format","text":"You can refer the data format in sample_data . NCRF++ supports both BIO and BIOES(BMES) tag scheme. Notice that IOB format ( different from BIO) is currently not supported, because this tag scheme is old and works worse than other schemes Reimers and Gurevych, 2017 . The difference among these three tag schemes is explained in this paper . I have written a script which converts the tag scheme among IOB/BIO/BIOES. Welcome to have a try.","title":"Data Format"},{"location":"Notes%20on%20NCRF%2B%2B/#performance","text":"Results on CONLL 2003 English NER task are better or comparable with SOTA results with the same structures. CharLSTM+WordLSTM+CRF: 91.20 vs 90.94 of Lample .etc, NAACL16 ; CharCNN+WordLSTM+CRF: 91.35 vs 91.21 of Ma .etc, ACL16 . By default, LSTM is bidirectional LSTM. ID Model Nochar CharLSTM CharCNN 1 WordLSTM 88.57 90.84 90.73 2 WordLSTM+CRF 89.45 91.20 91.35 3 WordCNN 88.56 90.46 90.30 4 WordCNN+CRF 88.90 90.70 90.43 We have compared twelve neural sequence labeling models ( {charLSTM, charCNN, None} x {wordLSTM, wordCNN} x {softmax, CRF} ) on three benchmarks (POS, Chunking, NER) under statistical experiments, detail results and comparisons can be found in our COLING 2018 paper Design Challenges and Misconceptions in Neural Sequence Labeling .","title":"Performance"},{"location":"Notes%20on%20NCRF%2B%2B/#add-handcrafted-features","text":"NCRF++ \u96c6\u6210\u4e86\u6700\u5148\u8fdb\u7684\u51e0\u4e2a\u795e\u7ecf\u7279\u5f81\u5e8f\u5217\u7279\u5f81\u63d0\u53d6\u5668\uff1aCNN ( Ma .etc, ACL16 ), LSTM ( Lample .etc, NAACL16 ) and GRU ( Yang .etc, ICLR17 ). \u6b64\u5916\uff0c\u624b\u5de5\u5236\u4f5c\u7684\u7279\u5f81\u5df2\u88ab\u8bc1\u660e\u5728\u5e8f\u5217\u6807\u8bb0\u4efb\u52a1\u4e2d\u5f88\u91cd\u8981\u3002 NCRF ++\u5141\u8bb8\u7528\u6237\u8bbe\u8ba1\u81ea\u5df1\u7684\u7279\u5f81\uff0c\u5982\u5927\u5199\uff0cPOS\u6807\u7b7e\u6216\u4efb\u4f55\u5176\u4ed6\u7279\u5f81\uff08\u4e0a\u56fe\u4e2d\u7684\u7070\u8272\u5706\u5708\uff09\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e\u81ea\u5b9a\u4e49\u7279\u5f81\uff08\u7279\u5f81\u5d4c\u5165\u5927\u5c0f\uff0c\u9884\u8bad\u7ec3\u7279\u5f81\u5d4c\u5165\u7b49\uff09\u3002\u6837\u672c\u8f93\u5165\u6570\u636e\u683c\u5f0f\u5728 train.cappos.bmes \u4e2d\uff0c\u5176\u4e2d\u5305\u62ec\u4e24\u4e2a\u4eba\u4e3a\u5b9a\u4e49\u7684\u7279\u5f81[POS]\u548c[Cap]\uff08[POS]\u548c[Cap]\u662f\u4e24\u4e2a\u793a\u4f8b\uff0c\u60a8\u53ef\u4ee5\u4e3a\u60a8\u7684\u7279\u5f81\u63d0\u4f9b\u6240\u9700\u7684\u4efb\u4f55\u540d\u79f0\uff0c\u53ea\u9700\u6309\u7167\u683c\u5f0f[xx]\u5e76\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u76f8\u540c\u540d\u79f0\u7684\u7279\u5f81\u3002\uff09\u7528\u6237\u53ef\u4ee5\u914d\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a\u7279\u5f81\uff0c\u901a\u8fc7\u4f7f\u7528 feature=[POS] emb_size=20 emb_dir=%your_pretrained_POS_embedding feature=[Cap] emb_size=20 emb_dir=%your_pretrained_Cap_embedding \u6ca1\u6709\u9884\u8bad\u7ec3\u5d4c\u5165\u7684\u7279\u5f81\u5c06\u88ab\u968f\u673a\u521d\u59cb\u5316\u3002","title":"Add Handcrafted Features"},{"location":"Notes%20on%20NCRF%2B%2B/#speed","text":"NCRF ++\u4f7f\u7528\u5b8c\u5168\u6279\u91cf\u8ba1\u7b97\u5b9e\u73b0\uff0c\u4f7f\u5176\u5728\u6a21\u578b\u8bad\u7ec3\u548c\u89e3\u7801\u65b9\u9762\u90fd\u975e\u5e38\u6709\u6548\u3002\u5728GPU\uff08Nvidia GTX 1080\uff09\u548c\u5927\u6279\u91cf\u5927\u5c0f\u7684\u5e2e\u52a9\u4e0b\uff0c\u4f7f\u7528NCRF ++\u6784\u5efa\u7684LSTMCRF\u6a21\u578b\u5206\u522b\u5728\u8bad\u7ec3\u548c\u89e3\u7801\u72b6\u6001\u4e0b\u53ef\u8fbe\u52301000\u4e2asents / s\u548c2000\u4e2asents / s\u3002","title":"Speed"},{"location":"Notes%20on%20NCRF%2B%2B/#n-best-decoding","text":"\u4f20\u7edf\u7684CRF\u7ed3\u6784\u4ec5\u89e3\u7801\u5177\u6709\u6700\u5927\u53ef\u80fd\u6027\u7684\u4e00\u4e2a\u6807\u7b7e\u5e8f\u5217\uff08\u53731\u4e2a\u6700\u4f73\u8f93\u51fa\uff09\u3002\u800cNCRF ++\u53ef\u4ee5\u63d0\u4f9b\u5927\u91cf\u9009\u62e9\uff0c\u5b83\u53ef\u4ee5\u89e3\u7801\u5177\u6709 top n \u6982\u7387\u7684n\u4e2a\u6807\u7b7e\u5e8f\u5217\uff08\u5373n-best output\uff09\u3002nbest \u89e3\u7801\u5df2\u5f97\u5230\u51e0\u4e2a\u6d41\u884c\u7684 \u7edf\u8ba1 CRF\u6846\u67b6\u7684\u652f\u6301\u3002\u7136\u800c\u636e\u6211\u4eec\u6240\u77e5\uff0cNCRF ++\u662f\u795e\u7ecfCRF\u6a21\u578b\u4e2d\u552f\u4e00\u652f\u6301nbest\u89e3\u7801\u7684\u5de5\u5177\u5305\u3002 \u5728\u6211\u4eec\u7684\u5b9e\u73b0\u4e2d\uff0c\u5f53 nbest = 10 \u65f6\uff0c\u5728NCRF ++\u4e2d\u6784\u5efa\u7684CharCNN + WordLSTM + CRF\u6a21\u578b\u5728CoNLL 2003 NER\u4efb\u52a1\u4e0a\u53ef\u4ee5\u7ed9\u51fa97.47\uff05\u7684oracle F1\u503c\uff08\u5f53nbest = 1\u65f6F1 = 91.35\uff05\uff09\u3002","title":"N best Decoding"},{"location":"Notes%20on%20NCRF%2B%2B/#reproduce-paper-results-and-hyperparameter-tuning","text":"To reproduce the results in our COLING 2018 paper, you only need to set the iteration=1 as iteration=100 in configuration file demo.train.config and configure your file directory in this configuration file. The default configuration file describes the Char CNN + Word LSTM + CRF model, you can build your own model by modifing the configuration accordingly. The parameters in this demo configuration file are the same in our paper. (Notice the Word CNN related models need slightly different parameters, details can be found in our COLING paper.) If you want to use this framework in new tasks or datasets, here are some tuning tips by @Victor0118 .","title":"Reproduce Paper Results and Hyperparameter Tuning"},{"location":"Notes%20on%20NCRF%2B%2B/#configurationmd","text":"\u672c\u6587\u6863\u4e0e demo.train.config \u76f8\u5bf9\u5e94","title":"Configuration.md"},{"location":"Notes%20on%20NCRF%2B%2B/#io","text":"\u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 train_dir=xx string (necessary in training). Set training file directory. \u8bad\u7ec3\u96c6\u4f4d\u7f6e dev_dir=xx string (necessary in training). Set dev file directory. \u5f00\u53d1\u96c6\u4f4d\u7f6e test_dir=xx string . Set test file directory. \u6d4b\u8bd5\u96c6\u4f4d\u7f6e model_dir=xx string (optional). Set saved model file directory. \u8f93\u51fa \u6a21\u578b\u5b58\u50a8\u4f4d\u7f6e model_dir=lstmcrf \u5219 model \u4fdd\u5b58\u4e3a lstm.0.model \uff0c\u76f8\u5173\u53c2\u6570\u8bcd\u5178\u4e3a lstm.dset word_emb_dir=xx string (optional). Set pretrained word embedding file directory. \u9884\u8bad\u7ec3\u8bcd\u5d4c\u5165\u7684\u4f4d\u7f6e raw_dir=xx string (optional). Set input raw file directory. \u539f\u59cb\u6570\u636e\u6587\u4ef6\u7684\u4f4d\u7f6e decode_dir=xx string (necessary in decoding). Set decoded file directory. \u8f93\u51fa \u89e3\u7801\u7ed3\u679c\u7684\u4f4d\u7f6e dset_dir=xx string (necessary). Set saved model file directory. \u6a21\u578b\u53c2\u6570\u8bcd\u5178\u4fdd\u5b58\u7684\u4f4d\u7f6e load_model_dir=xx string (necessary in decoding). Set loaded model file directory. (when decoding) \u6a21\u578b\u7684\u4f4d\u7f6e char_emb_dir=xx string (optional). Set pretrained character embedding file directory. \u9884\u8bad\u7ec3\u7684\u5b57\u7b26\u5d4c\u5165\u6587\u4ef6\u7684\u4f4d\u7f6e norm_word_emb=False boolen. If normalize the pretrained word embedding. \u662f\u5426\u5bf9\u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\u6807\u51c6\u5316 norm_char_emb=False boolen. If normalize the pretrained character embedding. \u662f\u5426\u5bf9\u9884\u8bad\u7ec3\u7684\u5b57\u7b26\u5d4c\u5165\u6807\u51c6\u5316 number_normalized=True boolen. If normalize the digit into 0 for input files. \u662f\u5426\u5c06\u6570\u5b57\u6807\u51c6\u5316\u4e3a\u8f93\u5165\u6587\u4ef6\u7684\u201c0\u201d seg=True boolen. If task is segmentation like, tasks with token accuracy evaluation (e.g. POS, CCG) is False; tasks with F-value evaluation(e.g. Word Segmentation, NER, Chunking) is True . \u5982\u679c\u4efb\u52a1\u662f segmentation\uff0c\u4ee4\u724c\u51c6\u786e\u5ea6\u8bc4\u4f30\u7684\u4efb\u52a1\uff08\u4f8b\u5982POS\uff0cCCG\uff09\u4e3a False ; F\u503c\u8bc4\u4f30\u7684\u4efb\u52a1\uff08\u4f8b\u5982\uff0cWord Segmentation, NER, Chunking\uff09\u4e3a True \u3002 word_emb_dim=50 int. Word embedding dimension, if model use pretrained word embedding, word_emb_dim will be reset as the same dimension as pretrained embedidng. \u8bcd\u5d4c\u5165\u7ef4\u5ea6 (\u5982\u679c\u6a21\u578b\u4f7f\u7528\u9884\u8bad\u7ec3\u5355\u8bcd\u5d4c\u5165\uff0c word_emb_dim \u5c06\u88ab\u91cd\u7f6e\u4e3a\u4e0e\u9884\u8bad\u7ec3 embedidng \u76f8\u540c\u7684\u7ef4\u5ea6) char_emb_dim=30 int. Character embedding dimension, if model use pretrained character embedding, char_emb_dim will be reset as the same dimension as pretrained embedidng. \u5b57\u7b26\u5d4c\u5165\u7ef4\u5ea6 (\u5982\u679c\u6a21\u578b\u4f7f\u7528\u9884\u8bad\u7ec3\u5355\u8bcd\u5d4c\u5165\uff0c char_emb_dim \u5c06\u88ab\u91cd\u7f6e\u4e3a\u4e0e\u9884\u8bad\u7ec3 embedidng \u76f8\u540c\u7684\u7ef4\u5ea6)","title":"I/O"},{"location":"Notes%20on%20NCRF%2B%2B/#networkconfiguration","text":"\u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 use_crf=True boolen (necessary in training). Flag of if using CRF layer. If it is set as False, then Softmax is used in inference layer. True : CRF; False : Softmax use_char=True boolen (necessary in training). Flag of if using character sequence layer. True : \u4f7f\u7528\u5b57\u7b26\u5e8f\u5217\u5c42 word_seq_feature=XX boolen (necessary in training): CNN/LSTM/GRU. Neural structure selection for word sequence. \u8bcd\u5e8f\u5217\u7279\u5f81\u63d0\u53d6\u6a21\u578b\uff1aCNN/LSTM/GRU char_seq_feature=CNN boolen (necessary in training): CNN/LSTM/GRU. Neural structure selection for character sequence, it only be used when use_char=True. \u5b57\u7b26\u7279\u5f81\u63d0\u53d6\u6a21\u578b\uff1aCNN/LSTM/GRU feature=[POS] emb_size=20 emb_dir=xx emb_norm=false feature configuration. It includes the feature prefix [POS], pretrained feature embedding file and the embedding size. \u7279\u5f81\u914d\u7f6e\uff1a feature=[\u7279\u5f81\u540d\u79f0] emb_size=20 emb_dir=xx emb_norm=false feature=[Cap] emb_size=20 emb_dir=xx emb_norm=false feature configuration. Another feature [Cap]. \u540c\u4e0a nbest=1 int (necessary in decoding). Set the nbest size during decoding. \u8bbe\u7f6e nbest \u7684 size","title":"NetworkConfiguration"},{"location":"Notes%20on%20NCRF%2B%2B/#trainingsetting","text":"\u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 status=train string: train or decode. Set the program running in training or decoding mode. train / decode \u6a21\u5f0f optimizer=SGD string: SGD/Adagrad/AdaDelta/RMSprop/Adam. optimizer selection. \u4f18\u5316\u5668\u9009\u62e9 iteration=1 int. Set the iteration number of training. \u8fed\u4ee3\u6b21\u6570 batch_size=10 int. Set the batch size of training or decoding. \u6279\u91cf\u5927\u5c0f ave_batch_loss=False boolen. Set average the batched loss during training. \u662f\u5426\u8bbe\u7f6e loss \u4e3a\u6279\u91cf\u635f\u5931\u7684\u5747\u503c","title":"TrainingSetting"},{"location":"Notes%20on%20NCRF%2B%2B/#hyperparameters","text":"\u6307\u4ee4 \u89e3\u91ca \u5907\u6ce8 cnn_layer=4 int. CNN layer number for word sequence layer. \u8bcd\u5e8f\u5217\u5c42\u7684CNN \u5c42\u7684\u6df1\u5ea6\uff0c\u4ece\u800c\u66f4\u597d\u5730\u5b66\u4e60\u957f\u8ddd\u79bb\u7684\u4f9d\u8d56\u5173\u7cfb char_hidden_dim=50 int. Character hidden vector dimension for character sequence layer. \u5b57\u7b26\u5e8f\u5217\u5c42\u7684\u5b57\u7b26\u9690\u5c42\u5411\u91cf\u7684\u7ef4\u5ea6 hidden_dim=200 int. Word hidden vector dimension for word sequence layer. \u8bcd\u5e8f\u5217\u5c42\u7684\u8bcd\u9690\u5c42\u5411\u91cf\u7684\u7ef4\u5ea6 dropout=0.5 float. Dropout probability. Dropout \u6982\u7387 lstm_layer=1 int. LSTM layer number for word sequence layer. LSTM \u5c42\u6570 bilstm=True boolen. If use bidirection lstm for word seuquence layer. \u662f\u5426\u5728\u8bcd\u5e8f\u5217\u5c42\u4e2d\u4f7f\u7528\u53cc\u5411 LSTM learning_rate=0.015 float. Learning rate. \u5b66\u4e60\u7387 lr_decay=0.05 float. Learning rate decay rate, only works when optimizer=SGD. SGD \u4e2d\u7684\u5b66\u4e60\u7387\u8870\u51cf\u6982\u7387 momentum=0 float. Momentum \u52a8\u91cf\u503c l2=1e-8 float. L2-regulization. L2 \u6b63\u5219\u5316\u53c2\u6570 gpu=True boolen. If use GPU, generally it depends on the hardward environment. \u662f\u5426\u4f7f\u7528 GPU clip= float. Clip the gradient which is larger than the setted number. \u68af\u5ea6\u88c1\u526a\u7684\u8bbe\u5b9a\u6570\u503c","title":"Hyperparameters"},{"location":"Notes%20on%20NCRF%2B%2B/#extensionmd","text":"","title":"Extension.md"},{"location":"Notes%20on%20NCRF%2B%2B/#module-extension","text":"If you want to extend character sequence layer: please refer to the file charlstm.py . If you want to extend word sequence layer: please refer to the file wordsequence.py . More details will be updated soon.","title":"Module Extension."},{"location":"Notes%20on%20NCRF%2B%2B/#hyperparameter_tuningmd","text":"","title":"Hyperparameter_tuning.md"},{"location":"Notes%20on%20NCRF%2B%2B/#hyperparamter-tuning-on-conll-2003-english-ner-task","text":"\u5982\u679c\u60a8\u4f7f\u7528\u5927\u6279\u91cf\uff08\u4f8b\u5982batch_size> 100\uff09\uff0c\u60a8\u6700\u597d\u8bbe\u7f6e avg_batch_loss = True \u4ee5\u83b7\u5f97\u7a33\u5b9a\u7684\u8bad\u7ec3\u8fc7\u7a0b\u3002\u5bf9\u4e8e\u5c0f\u6279\u91cf\uff0c avg_batch_loss = True \u5c06\u66f4\u5feb\u6536\u655b\uff0c\u6709\u65f6\u4f1a\u63d0\u4f9b\u66f4\u597d\u7684\u6027\u80fd\uff08\u4f8b\u5982CoNLL 2003 NER\uff09\u3002 \u5982\u679c\u4f7f\u7528100-d\u9884\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf \u6b64\u5904 \u800c\u4e0d\u662f50-d\u9884\u8bad\u7ec3\u5355\u8bcd\u5411\u91cf\uff0c\u5219\u53ef\u4ee5\u5728CoNLL 2003\u82f1\u8bed\u6570\u636e\u96c6\u4e0a\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002 \u5982\u679c\u8981\u7f16\u5199\u811a\u672c\u6765\u8c03\u6574\u8d85\u53c2\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528 main_parse.py \u5728\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u8bbe\u7f6e\u8d85\u53c2\u6570 \u6a21\u578b\u6027\u80fd\u5bf9 lr \u654f\u611f\uff0c\u9700\u8981\u5728\u4e0d\u540c\u7ed3\u6784\u4e0b\u4ed4\u7ec6\u8c03\u6574\uff1a Word level LSTM models (e.g. char LSTM + word LSTM + CRF) would prefer a lr around 0.015. Word level CNN models (e.g. char LSTM + word CNN + CRF) would prefer a lr around 0.005 and with more iterations. You can refer the COLING paper \" Design Challenges and Misconceptions in Neural Sequence Labeling \" for more hyperparameter settings.","title":"Hyperparamter tuning on CoNLL 2003 English NER task"},{"location":"Notes%20on%20NCRF%2B%2B/#_2","text":"","title":"\u6e90\u7801\u5b66\u4e60"},{"location":"Notes%20on%20NCRF%2B%2B/#_3","text":"\u6846\u67b6\u9996\u5148\u5c06\u6240\u6709\u7684\u6570\u636e\u5904\u7406\u7684\u90e8\u5206\uff0c\u90fd\u653e\u5728\u4e86\u6a21\u578b\u4e4b\u5916\uff0c\u6a21\u578b\u7684\u8f93\u5165\u5747\u4e3a\u5904\u7406\u540e\u7684 word / char \u7684 index \u6a21\u578b\u5206\u4e3a\u4e09\u5c42\uff1a char sequence layer : \u652f\u6301\u9884\u8bad\u7ec3\u4ee5\u53ca\u968f\u673a\u521d\u59cb\u5316\u4e24\u79cd\u65b9\u5f0f\uff0c\u83b7\u5f97 char-level embedding \uff0c\u518d\u5f97\u5230 word embedding\u3002\u65b9\u6cd5\u5305\u62ec charRNN, charCNN\uff0c\u5e76\u4e14\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528 (concatenate embedding_dim \u5373\u53ef) word sequence layer : \u652f\u6301\u9884\u8bad\u7ec3\u4ee5\u53ca\u968f\u673a\u521d\u59cb\u5316\u4e24\u79cd\u65b9\u5f0f\uff0c\u83b7\u5f97 word-level embedding\uff0c\u800c\u540e\u4e0e char sequence layer \u5f97\u5230\u7684 word embedding \u4ee5\u53ca handcrafted feature (\u5982 POS ) \u7684embedding\uff08\u540c\u6837\u652f\u6301\u4e24\u79cd\u65b9\u5f0f\uff09\u8fdb\u884c concatenate\uff0c\u6700\u540e\u5f97\u5230 hybrid \u7684 word embedding\uff0c\u518d\u7ecf\u8fc7 \u591a\u5c42 CNN / LSTM / GRU \uff0c\u5f97\u5230\u6700\u7ec8\u7684 hidden_state inference layer : \u652f\u6301 CRF \u4e0e Softmax \u4e24\u79cd\u65b9\u5f0f","title":"\u67b6\u6784\u68b3\u7406"},{"location":"Notes%20on%20NCRF%2B%2B/#_4","text":"\u6846\u67b6\u9996\u5148\u8bfb\u53d6\u7528\u6237\u5b9a\u4e49\u597d\u7684 config \u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u62ec\u4e86 I/O, Network, Training, Hyperparameters \u56db\u90e8\u5206\u7684\u53c2\u6570\u8bbe\u7f6e\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 config \u6587\u4ef6\uff0c\u6216\u662f\u4ee5 --parameter value \u7684\u5f62\u5f0f\u5728\u8fd0\u884c\u65f6\u4fee\u6539\u3002\u8fd0\u884c\u6307\u4ee4\u5982\u4e0b\uff1a python main.py --config train.config training status \u9996\u5148\u8bfb\u53d6\u521d\u59cb\u5316\u8fd0\u884c\u53c2\u6570\uff0c\u8bfb\u53d6\u914d\u7f6e\u8986\u76d6\u521d\u59cb\u53c2\u6570\uff0c\u800c\u540e\u5bf9\u6570\u636e\u8fdb\u884c\u521d\u6b65\u5904\u7406\u5e76\u8bfb\u53d6/\u521d\u59cb\u5316\u6240\u9700\u7684 embedding \uff0c\u5305\u62ec \u5efa\u7acb feature \u7684\u5b57\u6bcd\u8868 alphabet \u548c \u8bad\u7ec3\u96c6 / \u5f00\u53d1\u96c6 / \u6d4b\u8bd5\u96c6 \u7684 word / char / label / feature_list \u7684\u5b57\u6bcd\u8868 \u5b57\u6bcd\u8868\u4e3b\u8981\u662f\u5305\u62ec\u5b58\u50a8 instance \u7684 list \u4ee5\u53ca \\(\\{ \\mathbf{key:instance}, \\mathbf{value:index}\\}\\) \u7684 dict \u5efa\u7acb instance_text \u548c instance_Ids \u4e24\u4e2a list \uff0c\u5176\u6bcf\u4e00\u9879\u4e3a [words, features, chars, labels] \u548c [word_Ids, feature_Ids, char_Ids, label_Ids] \uff08\u4ee5 NER \u4efb\u52a1\u4e3a\u4f8b\uff0c\u7279\u5f81\u4f7f\u7528\u7684\u662f POS\uff09\uff0c\u5206\u522b\u662f sequence \u4e2d\u7684\u6240\u6709\u5355\u8bcd\u6784\u6210\u7684 [\u2018good\u2019] \uff0c\u6240\u6709\u7279\u5f81\u6784\u6210\u7684 [\u2018JJ\u2019] \uff0c\u6240\u6709\u5b57\u7b26\u6784\u6210\u7684 [[\u2018g\u2019, \u2018o\u2019, \u2019o\u2019, \u2018d\u2019]] \uff0c\u6240\u6709 label \u6784\u6210\u7684 ['O'] \uff0c\u4ee5\u53ca\u4e0a\u8ff0\u5185\u5bb9\u5728\u5404\u81ea\u7684\u5b57\u6bcd\u8868\u4e2d\u5bf9\u5e94\u7684 index \u6784\u6210\u7684 xxx_Ids \u5bf9\u5efa\u7acb\u597d\u7684 word / char / label / feature_list \u7684\u5b57\u6bcd\u8868\uff0c\u904d\u5386\u5b57\u6bcd\u8868\u4e2d\u7684\u6240\u6709 instance \uff0c\u5206\u522b\u5efa\u7acb Embedding \u77e9\u9635\u3002\u8bfb\u53d6 word / char / feature \u7684 pretrain embedding\uff0c\u5982\u679c\u672a\u6307\u5b9a pretrain embedding \u7684\u6587\u4ef6\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5747\u968f\u673a\u521d\u59cb\u5316\uff0c\u5426\u5219\u4f1a\u5206\u4e3a\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\u5206\u522b\u5904\u7406 perfect match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u627e\u5230\u4e86\u5b57\u6bcd\u8868\u91cc\u7684 instance \uff0c\u5219\u5c06\u5176 embedding \u5bf9\u5e94\u8d4b\u503c\uff0c\u5426\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65 case_match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u627e\u5230\u4e86\u5b57\u6bcd\u8868\u91cc\u7684 instance \u7684 lower \u7248\u672c\u7684 embedding\uff0c\u5219\u540c\u6837\u5bf9\u5e94\u8d4b\u503c\uff0c\u5426\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65 not_match : \u5982\u679c\u5728 pretrain embedding \u4e2d\u6ca1\u6709\u627e\u5230\u5b57\u6bcd\u8868\u91cc\u7684 instance \u7684 raw / lower \u7248\u672c\uff0c\u5219\u968f\u673a\u521d\u59cb\u5316 \u63a5\u7740\u5904\u7406\u6a21\u578b\u5404\u5c42\u7684\u8f93\u5165\u6570\u636e\uff08 batch_size \u81ea\u5b9a\u4e49\uff09\uff0c\u5305\u62ec batch_word, batch_features, batch_wordlen, batch_wordrecover, batch_char, batch_charlen, batch_charrecover, batch_label, mask \u5c06 instance_Ids \u63d0\u53d6\u51fa batch \u4e2a item\uff0c\u6bcf\u4e2a item \u90fd\u662f [words, features, chars, labels] \u6784\u6210\u7684\u5d4c\u5957 list \u5c06 batch \u6570\u636e\u4e2d\u56db\u7c7b\u6570\u636e\u5206\u522b\u62bd\u53d6\u5efa\u7acb\u4e3a list \uff0c\u5305\u62ec words, features, chars, labels \uff0c\u800c\u540e\u5efa\u7acb\u8d77\u5bf9\u5e94\u7684 zeros Tensor \u4ee5\u53ca mask Tensor\uff0c\u5e76\u7edf\u8ba1\u6700\u957f\u53e5\u5b50\u957f\u5ea6\u7b49\u4fe1\u606f \u5206\u522b\u5728 zeros Tensor \u4e2d\u586b\u5145 words, labels, mask, features \u7684 Tensor Pytorch \u4e2d\u63d0\u4f9b\u4e86 torch.nn.utils.rnn.PackedSequence \u7684\u76f8\u5173 API\uff0c\u8f93\u5165\u65f6\u9700\u8981\u5c06 sequence \u6309\u7167\u771f\u5b9e\u957f\u5ea6\u964d\u5e8f\u6392\u5217\uff0c\u5e76\u8f93\u5165 sequence \u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u771f\u5b9e\u957f\u5ea6\uff0c\u4e8e\u662f\uff1a python # \u7edf\u8ba1 batch \u4e2d\u6bcf\u4e2a sequence \u7684\u957f\u5ea6 word_seq_lengths = torch.LongTensor(list(map(len, words))) # \u964d\u5e8f\u6392\u5e8f\u540e\u83b7\u5f97\u5176\u6392\u5e8f\u7ed3\u679c\u4ee5\u53ca\u8be5\u7ed3\u679c\u4e2d\u7684\u5bf9\u5e94\u6bcf\u4e00\u9879\u5728\u539f\u5e8f\u5217\u4e2d\u7684 index word_seq_lengths, word_perm_idx = word_seq_lengths.sort(0, descending=True) \u4e3e\u4e2a\u4f8b\u5b50\uff1a \u539f\u5e8f\u5217 word_seq_lengths = [9, 7, 11]\uff0c\u90a3\u4e48\u6392\u5e8f\u540e\u7684\u8fd4\u56de\u503c\u4e3a word_seq_lengths = [11, 9, 7] \uff0cword_perm_idx = [2, 0, 1] \u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06 length \u5bf9\u5e94\u7684 size \u4e3a \\(\\text{batch_size} \\times \\text{max_seq_len}\\) \u7684 word_seq_tensor \u4ee5\u53ca label_seq_tensor \u7b49\u8fdb\u884c\u91cd\u6392\u5217\uff0c\u5373 - word_seq_tensor = word_seq_tensor[word_perm_idx] \u90a3\u4e48\u73b0\u5728\u7684 word / label / length \u5c31\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u4e86\uff0cfeature, mask \u4e5f\u662f\u540c\u7406\u64cd\u4f5c \u5982\u4e0a\u64cd\u4f5c\u540e\uff0csequence \u4e2d\u7684 word-level \u7684 padding \u4ee5\u53ca\u6392\u5e8f\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\uff0c\u968f\u540e\u8fdb\u884c char-level \u7684 padding \u4ee5\u53ca\u6392\u5e8f\u5de5\u4f5c \u8fd9\u91cc\u7684 word-level \u7684 padding\uff0c\u662f\u5bf9\u6bcf\u4e2a batch \u7684\u6bcf\u4e2a\u53e5\u5b50\uff0c\u90fd\u586b\u5145\u4e3a\u6700\u957f\u7684\u53e5\u5b50\u957f\u5ea6 \u9996\u5148\u5c06\u539f\u672c\u7684 chars \u5217\u8868\u8fdb\u884c padding \uff1a chars list \u4e2d\u7684chars[3] \u5982\u4e0b\u56fe\u6240\u793a \u53ef\u4ee5\u770b\u5230 chars[3] \u4e2d\u7684\u4e3a\u4e00\u4e2a sequence \uff0c\u5176\u4e2d\u6bcf\u4e00\u9879\u5747\u4e3a sequence \u4e2d\u7684\u67d0\u4e00\u4e2a\u5355\u8bcd\uff0c\u5982 chars[3] \u7684\u7b2c 8 \u9879\u5373\u4e3a\u4e00\u4e2a\u957f\u5ea6\u4e3a 2 \u7684\u5355\u8bcd\uff0c\u7531\u5b57\u7b26 15 \u548c 40 \u7ec4\u6210 \u5148\u5bf9\u6bcf\u4e2a sequence \u8fdb\u884c padding\uff0c\u4fdd\u8bc1 sequence \u7684\u957f\u5ea6\u5747\u4e3a max_seq_len \u5373\u5bf9 chars[3] \u8fd9\u4e00 sequence \u672b\u5c3e\uff0c\u6dfb\u52a0[[0], [0], [0], \u2026\u2026 , [0]] \u800c\u540e\u5bf9\u672c batch \u5185\u7684\u6240\u6709 sequence \u4e2d\u7684\u6240\u6709 word \u7edf\u8ba1\u5f97\u5230\u6700\u957f\u5355\u8bcd\u957f\u5ea6 max_word_len \u521d\u59cb\u5316 size \u4e3a batch_size, max_seq_len, max_word_len \u7684 zeros Tensor char_seq_tensor \uff0c\u7edf\u8ba1\u5f53\u524d chars \u4e2d\u6240\u6709\u5355\u8bcd\u7684\u957f\u5ea6\uff0c\u83b7\u5f97 size \u4e3a batch_size, max_seq_len \u7684 char_seq_lengths \u5c06\u6bcf\u4e2a sequence \u7684\u6bcf\u4e2a word \u7684\u6bcf\u4e2a char_Id \u586b\u5165 char_seq_tensor \u4e2d\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86 char-level \u7684 padding \u5de5\u4f5c \u63a5\u7740\u6211\u4eec\u6211\u4eec\u5bf9\u6570\u636e\u505a\u8fdb\u4e00\u6b65\u7684\u5904\u7406 \u9996\u5148\u901a\u8fc7 word_perm_idx \u5c06\u5e8f\u5217\u7684\u987a\u5e8f\u8c03\u6574\u7684\u4e0e word \u548c label \u7684\u987a\u5e8f\u4e00\u81f4\uff0c\u7136\u540e\u662f\u5bf9 char_seq_tensor, char_seq_lengths \u8fdb\u884c\u538b\u5b9e\u64cd\u4f5c\uff0c\u5c06\u5176 size \u8c03\u6574\u4e3a (batch_size * max_seq_len, max_word_len) \u548c (batch_size * max_seq_len,) \u63a5\u7740\u8fdb\u884c\u540c\u6837\u7684\u6392\u5e8f\u4e0e\u8c03\u5e8f\u64cd\u4f5c\uff0c\u5c06 word \u7684\u987a\u5e8f\u8c03\u6574\u4e3a\u6309\u7167 word_len \u964d\u5e8f\u6392\u5217 \u8fd9\u662f\u6211\u4eec\u5e94\u8be5\u6ce8\u610f\u5230\uff0c\u5355\u8bcd\u7684\u987a\u5e8f\u5728 char sequence layer \u4e2d\u88ab\u6253\u4e71\u4e86\uff0c\u6211\u4eec\u5728\u7ecf\u8fc7charCNN / charRNN \u7684\u5904\u7406\u540e\uff0c\u5f97\u5230\u7684\u8f93\u51fa\u9700\u8981\u8f93\u5165\u5230 word sequence layer \u4e2d\uff0c\u987a\u5e8f\u662f\u4e0d\u4e00\u81f4\u7684\uff0c\u9700\u8981\u5728\u8f93\u51fa\u65f6\u5c06\u987a\u5e8f\u8c03\u6574\u56de\u53bb \u56de\u5230\u4e4b\u524d\u7684\u4f8b\u5b50\uff1a \u539f\u5e8f\u5217 word_seq_lengths = [9, 7, 11]\uff0c\u90a3\u4e48\u6392\u5e8f\u540e\u7684\u8fd4\u56de\u503c\u4e3a word_seq_lengths = [11, 9, 7] \uff0cword_perm_idx = [2, 0, 1] \u6211\u4eec\u5bf9 word_perm_idx \u8fdb\u884c\u5347\u5e8f\u6392\u5217\uff0c\u5f97\u5230\u8fd4\u56de\u503c\u4e3a [0, 1, 2] \u548c [1, 2, 0]\uff0c\u8fd9\u65f6\u5019\u4ee4 word_seq_lengths = word_seq_lengths[1, 2, 0] \uff0c\u6211\u4eec\u5c31\u4f1a\u53d1\u73b0 word_seq_lengths \u53d8\u56de\u4e86\u539f\u5e8f\u5217 \u5f53 char sequence layer \u5c06\u5176\u83b7\u5f97\u7684\u6bcf\u4e2a word \u7684 embedding \u8f93\u51fa\u81f3 word sequence layer \u65f6\uff0c\u9700\u8981\u4f7f\u7528\u4e4b\u524d\u4fdd\u5b58\u7684 char_seq_recover \u5c06 word \u7684\u987a\u5e8f\u8fd8\u539f \u81f3\u6b64\uff0c\u5404\u5c42\u6240\u9700\u7684\u8f93\u5165\u6570\u636e\u90fd\u51c6\u5907\u5b8c\u6bd5\u3002 \u8fd0\u884c\u65f6\uff0c\u6a21\u578b\u9996\u5148\u9700\u8981\u5b8c\u6210\u5bf9 char sequence layer \u7684\u8fd0\u7b97\uff0c\u83b7\u5f97 char-level \u7684 word embedding\uff0c\u7136\u540e\u4e0e word embedding \u548c feature embedding \u8fdb\u884c concatenate\uff0c\u5f97\u5230\u6700\u7ec8\u7684 word embedding\uff0c\u518d\u901a\u8fc7\u591a\u5c42\u7684 LSTM / GRU / CNN \u5f97\u5230\u6700\u7ec8\u7684 size \u4e3a batch_size, seq_len, classes \u7684\u7279\u5f81\u5411\u91cf \u6700\u540e\u7684 inference layer \u53ef\u4ee5\u6709\u4e24\u79cd\u9009\u62e9\uff1aCRF / Softmax \uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u8ba8\u8bba Softmax \u7684\u65b9\u5f0f\u3002\u5bf9\u7279\u5f81\u5411\u91cf\u7684\u6700\u540e\u4e00\u7ef4\u505a log_softmax \uff0c\u800c\u540e\u8ba1\u7b97\u5176 NLLLoss \u5e76\u5c06\u5176\u6700\u5927\u503c\u5bf9\u5e94\u7684 class \u4f5c\u4e3a\u5206\u7c7b\u7ed3\u679c\u3002","title":"\u6d41\u7a0b\u68b3\u7406"},{"location":"Notes%20on%20NCRF%2B%2B/#crf","text":"\u6761\u4ef6\u968f\u673a\u573a(Conditional Random Fields, \u4ee5\u4e0b\u7b80\u79f0CRF)\u662f\u7ed9\u5b9a\u4e00\u7ec4\u8f93\u5165\u968f\u673a\u53d8\u91cf\u6761\u4ef6\u4e0b\u53e6\u4e00\u7ec4\u8f93\u51fa\u968f\u673a\u53d8\u91cf\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\u6a21\u578b\u3002\u5176\u7279\u70b9\u662f\u5047\u8bbe\u8f93\u51fa\u968f\u673a\u53d8\u91cf\u6784\u6210\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u3002\u6761\u4ef6\u968f\u673a\u573a\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u7684\u9884\u6d4b\u95ee\u9898\uff0c\u672c\u6587\u8ba8\u8bba\u7684\u662f\u5176\u5728\u6807\u6ce8\u95ee\u9898\u4e2d\u7684\u5e94\u7528\uff0c\u56e0\u6b64\u4e3b\u8981\u8bb2\u8ff0\u7ebf\u6027\u94fe\u6761\u4ef6\u968f\u673a\u573a\u3002\u8fd9\u65f6\uff0c\u95ee\u9898\u53d8\u6210\u7531\u8f93\u5165\u5e8f\u5217\u5bf9\u8f93\u51fa\u5e8f\u5217\u9884\u6d4b\u7684\u5224\u522b\u6a21\u578b\uff0c\u5f62\u5f0f\u4e3a\u5bf9\u6570\u7ebf\u6027\u6a21\u578b\uff0c\u5176\u5b66\u4e60\u65b9\u6cd5\u901a\u5e38\u662f\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u6216\u6b63\u5219\u5316\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u3002","title":"CRF \u7b14\u8bb0"},{"location":"Notes%20on%20NCRF%2B%2B/#crf_1","text":"\u5bf9\u4e8e A \u7684\u4e00\u5929\u4ece\u65e9\u5230\u665a\u7684\u4e00\u7cfb\u5217\u7167\u7247\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u6bcf\u5f20\u7167\u7247\u5bf9\u5e94\u7684\u6d3b\u52a8\uff0c\u5982\u679c\u6211\u4eec\u7528\u4f20\u7edf\u7684\u5206\u7c7b\u601d\u8def\u53bb\u505a\uff0c\u5373\u5bf9\u6bcf\u5f20\u7167\u7247\u5206\u522b\u9884\u6d4b\u5176\u6d3b\u52a8\u7c7b\u522b\uff0c\u8fd9\u5c31\u5ffd\u7565\u4e86\u6d3b\u52a8\u4e4b\u95f4\u7684\u5173\u8054\u6027\u548c\u5185\u5728\u7ea6\u675f\uff0c\u6bd4\u5982\u5bf9\u4e8e\u4e00\u5f20 A \u95ed\u7740\u5634\u5df4\u7684\u7167\u7247\uff0c\u5982\u679c\u524d\u4e00\u5f20\u7167\u7247\u662f A \u5728\u5403\u4e1c\u897f\u7684\u7167\u7247\uff0c\u90a3\u4e48\u6b64\u65f6 A \u5c31\u662f\u5728\u5480\u56bc\uff1b\u5982\u679c\u524d\u4e00\u5f20\u7167\u7247\u662f A \u5728\u5531\u6b4c\u7684\u7167\u7247\uff0c\u90a3\u4e48\u6b64\u65f6 A \u5c31\u662f\u5728\u5531\u6b4c\u3002 \u8fd9\u5c31\u9700\u8981\u6211\u4eec\u8003\u8651 \u76f8\u90bb\u6570\u636e\u7684\u6807\u8bb0\u4fe1\u606f \u3002\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684**\u8bcd\u6027\u6807\u6ce8**(Part-Of-Speech Tagging)\u6b63\u662f\u6b64\u7c7b\u95ee\u9898\u7684\u7ecf\u5178\u4efb\u52a1\u3002","title":"\u4ec0\u4e48\u6837\u7684\u95ee\u9898\u9700\u8981CRF\u6a21\u578b"},{"location":"Notes%20on%20NCRF%2B%2B/#_5","text":"\u968f\u673a\u573a\uff1a\u5f53\u7ed9\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u4e2d\u6309\u7167\u67d0\u79cd\u5206\u5e03\u968f\u673a\u8d4b\u4e88\u76f8\u7a7a\u95f4\u7684\u4e00\u4e2a\u503c\u4e4b\u540e\uff0c\u5176\u5168\u4f53\u5c31\u53eb\u505a\u968f\u673a\u573a\u3002\u6211\u4eec\u4e0d\u59a8\u62ff\u79cd\u5730\u6765\u6253\u4e2a\u6bd4\u65b9\u3002\u5176\u4e2d\u6709\u4e24\u4e2a\u6982\u5ff5\uff1a\u4f4d\u7f6e\uff08site\uff09\uff0c\u76f8\u7a7a\u95f4\uff08phase space\uff09\u3002\u201c\u4f4d\u7f6e\u201d\u597d\u6bd4\u662f\u4e00\u4ea9\u4ea9\u519c\u7530\uff1b\u201c\u76f8\u7a7a\u95f4\u201d\u597d\u6bd4\u662f\u79cd\u7684\u5404\u79cd\u5e84\u7a3c\u3002\u6211\u4eec\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u5730\u79cd\u4e0a\u4e0d\u540c\u7684\u5e84\u7a3c\uff0c\u8fd9\u5c31\u597d\u6bd4\u7ed9\u968f\u673a\u573a\u7684\u6bcf\u4e2a\u201c\u4f4d\u7f6e\u201d\uff0c\u8d4b\u4e88\u76f8\u7a7a\u95f4\u91cc\u4e0d\u540c\u7684\u503c\u3002\u6240\u4ee5\uff0c\u4fd7\u6c14\u70b9\u8bf4\uff0c\u968f\u673a\u573a\u5c31\u662f\u5728\u54ea\u5757\u5730\u91cc\u79cd\u4ec0\u4e48\u5e84\u7a3c\u7684\u4e8b\u60c5\u3002 \u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff1a\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u662f\u968f\u673a\u573a\u7684\u7279\u4f8b\uff0c\u5b83\u5047\u8bbe\u968f\u673a\u573a\u4e2d\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u7684\u8d4b\u503c\u4ec5\u4ec5\u4e0e\u548c\u5b83\u76f8\u90bb\u7684\u4f4d\u7f6e\u7684\u8d4b\u503c\u6709\u5173\uff0c\u548c\u4e0e\u5176\u4e0d\u76f8\u90bb\u7684\u4f4d\u7f6e\u7684\u8d4b\u503c\u65e0\u5173\u3002 \u9a6c\u5c14\u79d1\u592b\u6027\u8d28\uff1a\u5b83\u6307\u7684\u662f\u4e00\u4e2a\u968f\u673a\u53d8\u91cf\u5e8f\u5217\u6309\u65f6\u95f4\u5148\u540e\u5173\u7cfb\u4f9d\u6b21\u6392\u5f00\u7684\u65f6\u5019\uff0c\u7b2cN+1\u65f6\u523b\u7684\u5206\u5e03\u7279\u6027\uff0c\u4e0eN\u65f6\u523b\u4ee5\u524d\u7684\u968f\u673a\u53d8\u91cf\u7684\u53d6\u503c\u65e0\u5173\u3002\u62ff\u5929\u6c14\u6765\u6253\u4e2a\u6bd4\u65b9\u3002\u5982\u679c\u6211\u4eec\u5047\u5b9a\u5929\u6c14\u662f\u9a6c\u5c14\u53ef\u592b\u7684\uff0c\u5176\u610f\u601d\u5c31\u662f\u6211\u4eec\u5047\u8bbe\u4eca\u5929\u7684\u5929\u6c14\u4ec5\u4ec5\u4e0e\u6628\u5929\u7684\u5929\u6c14\u5b58\u5728\u6982\u7387\u4e0a\u7684\u5173\u8054\uff0c\u800c\u4e0e\u524d\u5929\u53ca\u524d\u5929\u4ee5\u524d\u7684\u5929\u6c14\u6ca1\u6709\u5173\u7cfb\u3002\u5176\u5b83\u5982\u4f20\u67d3\u75c5\u548c\u8c23\u8a00\u7684\u4f20\u64ad\u89c4\u5f8b\uff0c\u5c31\u662f\u9a6c\u5c14\u53ef\u592b\u7684\u3002 CRF\u662f\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u7684\u7279\u4f8b\uff0c\u5b83\u5047\u8bbe\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u4e2d\u53ea\u6709X\u548cY\u4e24\u79cd\u53d8\u91cf\uff0cX\u4e00\u822c\u662f\u7ed9\u5b9a\u7684\uff0c\u800cY\u4e00\u822c\u662f\u5728\u7ed9\u5b9aX\u7684\u6761\u4ef6\u4e0b\u7684\u8f93\u51fa\u3002\u8fd9\u6837\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\u5c31\u7279\u5316\u6210\u4e86\u6761\u4ef6\u968f\u673a\u573a\u3002\u8bbeX\u4e0eY\u662f\u968f\u673a\u53d8\u91cf\uff0cP(Y|X)\u662f\u7ed9\u5b9aX\u65f6Y\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\uff0c\u82e5\u968f\u673a\u53d8\u91cfY\u6784\u6210\u7684\u662f\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff0c\u5219\u79f0\u6761\u4ef6\u6982\u7387\u5206\u5e03P(Y|X)\u662f\u6761\u4ef6\u968f\u673a\u573a\u3002","title":"\u968f\u673a\u573a\uff0c\u9a6c\u5c14\u79d1\u592b\u968f\u673a\u573a\uff0c\u6761\u4ef6\u968f\u673a\u573a"},{"location":"Notes%20on%20NCRF%2B%2B/#softmax-crf","text":"\u4e0a\u56fe\u4e3a\u7528 CNN \u6216\u8005 RNN \u5bf9\u5e8f\u5217\u8fdb\u884c\u7f16\u7801\u540e\uff0c\u4f7f\u7528 Softmax \u4f5c\u4e3a\u5206\u7c7b\u5668\uff0c\u5b8c\u6210 POS \u4efb\u52a1\u3002 \u4ee5 RNN \u4e3a\u4f8b\uff0c\u5bf9\u4e8e t \u65f6\u523b\u6765\u8bf4\uff0c\u8f93\u51fa\u5c42 yt \u53d7\u5230\u9690\u5c42 ht\uff08\u5305\u542b\u4e0a\u4e0b\u6587\u4fe1\u606f\uff09\u548c\u8f93\u5165\u5c42 xt\uff08\u5f53\u524d\u7684\u8f93\u5165\uff09\u7684\u5f71\u54cd\uff0c\u4f46\u662fyt\u548c\u5176\u4ed6\u65f6\u523b\u7684yt'\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u5e76\u6ca1\u6709\u76f4\u63a5\u8003\u8651\u8f93\u51fa\u7684\u4e0a\u4e0b\u6587\u5173\u7cfb\u3002 \u4e0a\u56fe\u4e3a\u4f7f\u7528 CRF \u8fdb\u884c POS \u65f6\uff0c\u7531 CRF \u5bf9\u8f93\u51fa\u5c42\u7684\u4e0a\u4e0b\u6587\u5173\u7cfb\u8fdb\u884c\u76f4\u63a5\u5173\u8054\uff0c\u5373 CRF \u5728\u8f93\u51fa\u7aef\u663e\u5f0f\u5730\u8003\u8651\u4e86\u4e0a\u4e0b\u6587\u5173\u8054\u3002","title":"Softmax \u4e0e CRF"},{"location":"Notes%20on%20NCRF%2B%2B/#_6","text":"CRF \u7684\u771f\u6b63\u7cbe\u5de7\u7684\u5730\u65b9\uff0c\u662f\u5b83\u4ee5\u8def\u5f84\u4e3a\u5355\u4f4d\uff0c\u8003\u8651\u7684\u662f\u8def\u5f84\u7684\u6982\u7387\u3002 \u5047\u5982\u4e00\u4e2a\u8f93\u5165\u6709 n \u5e27\uff0c\u6bcf\u4e00\u5e27\u7684\u6807\u7b7e\u6709 k \u79cd\u53ef\u80fd\u6027\uff0c\u90a3\u4e48\u7406\u8bba\u4e0a\u5c31\u6709 \\(k^n\\) \u4e2d\u4e0d\u540c\u7684\u7ed3\u679c\u6807\u7b7e\u5e8f\u5217\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u7528\u5982\u4e0b\u7684\u7f51\u7edc\u56fe\u8fdb\u884c\u7b80\u5355\u7684\u53ef\u89c6\u5316\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6bcf\u4e2a\u70b9\u4ee3\u8868\u4e00\u4e2a\u6807\u7b7e\u7684\u53ef\u80fd\u6027\uff0c\u70b9\u4e4b\u95f4\u7684\u8fde\u7ebf\u8868\u793a\u6807\u7b7e\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u800c\u6bcf\u4e00\u79cd\u6807\u6ce8\u7ed3\u679c\uff0c\u90fd\u5bf9\u5e94\u7740\u56fe\u4e0a\u7684\u4e00\u6761\u5b8c\u6574\u7684\u8def\u5f84\u3002 \u800c\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u7684\u6b63\u786e\u7b54\u6848\u662f\u4e00\u822c\u662f\u552f\u4e00\u7684\u3002\u6bd4\u5982\u201c\u4eca\u5929\u5929\u6c14\u4e0d\u9519\u201d\uff0c\u5982\u679c\u5bf9\u5e94\u7684\u5206\u8bcd\u7ed3\u679c\u662f\u201c\u4eca\u5929/\u5929\u6c14/\u4e0d/\u9519\u201d\uff0c\u90a3\u4e48\u76ee\u6807\u8f93\u51fa\u5e8f\u5217\u5c31\u662f bebess\uff0c\u9664\u6b64\u4e4b\u5916\u522b\u7684\u8def\u5f84\u90fd\u4e0d\u7b26\u5408\u8981\u6c42\u3002 \u6362\u8a00\u4e4b\uff0c\u5728\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u7684\u7814\u7a76\u7684\u57fa\u672c\u5355\u4f4d\u5e94\u8be5\u662f\u8def\u5f84\uff0c\u6211\u4eec\u8981\u505a\u7684\u4e8b\u60c5\uff0c\u662f\u4ece \\(k^n\\) \u6761\u8def\u5f84\u9009\u51fa\u6b63\u786e\u7684\u4e00\u6761\uff0c\u90a3\u5c31\u610f\u5473\u7740\uff0c\u5982\u679c\u5c06\u5b83\u89c6\u4e3a\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898\uff0c\u90a3\u4e48\u5c06\u662f \\(k^n\\) \u7c7b\u4e2d\u9009\u4e00\u7c7b\u7684\u5206\u7c7b\u95ee\u9898\u3002 \u9010\u5e27 softmax \u548c CRF \u7684\u6839\u672c\u533a\u522b \u524d\u8005\u5c06\u5e8f\u5217\u6807\u6ce8\u770b\u6210\u662f n \u4e2a k \u5206\u7c7b\u95ee\u9898\uff0c\u540e\u8005\u5c06\u5e8f\u5217\u6807\u6ce8\u770b\u6210\u662f 1 \u4e2a k^n \u5206\u7c7b\u95ee\u9898 \u5177\u4f53\u6765\u8bb2\uff0c\u5728 CRF \u7684\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u7684\u662f\u6761\u4ef6\u6982\u7387\uff1a \\[ P\\left(y_{1}, \\ldots, y_{n} | x_{1}, \\ldots, x_{n}\\right)=P\\left(y_{1}, \\ldots, y_{n} | x\\right), \\quad x=\\left(x_{1}, \\ldots, x_{n}\\right) \\] \u4e3a\u4e86\u5f97\u5230\u8fd9\u4e2a\u6982\u7387\u7684\u4f30\u8ba1\uff0cCRF \u505a\u4e86\u4e24\u4e2a\u5047\u8bbe\uff1a \u5047\u8bbe\u4e00\uff1a\u8be5\u5206\u5e03\u662f\u6307\u6570\u65cf\u5206\u5e03 \u8fd9\u4e2a\u5047\u8bbe\u610f\u5473\u7740\u5b58\u5728\u51fd\u6570 \\(f(y_1,\u2026,y_n;x)\\) \uff0c\u4f7f\u5f97 \\[ P\\left(y_{1}, \\ldots, y_{n} | \\mathbf{x}\\right)=\\frac{1}{Z(\\mathbf{x})} \\exp \\left(f\\left(y_{1}, \\ldots, y_{n} ; \\mathbf{x}\\right)\\right) \\] \u5176\u4e2d \\(Z(x)\\) \u662f\u5f52\u4e00\u5316\u56e0\u5b50\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u662f\u6761\u4ef6\u5206\u5e03\uff0c\u6240\u4ee5\u5f52\u4e00\u5316\u56e0\u5b50\u8ddf x \u6709\u5173\u3002\u8fd9\u4e2a f \u51fd\u6570\u53ef\u4ee5\u89c6\u4e3a\u4e00\u4e2a\u6253\u5206\u51fd\u6570\uff0c\u6253\u5206\u51fd\u6570\u53d6\u6307\u6570\u5e76\u5f52\u4e00\u5316\u540e\u5c31\u5f97\u5230\u6982\u7387\u5206\u5e03\u3002 \u5047\u8bbe\u4e8c\uff1a\u8f93\u51fa\u4e4b\u95f4\u7684\u5173\u8054\u4ec5\u53d1\u751f\u5728\u76f8\u90bb\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5173\u8054\u662f\u6307\u6570\u52a0\u6027\u7684 \u4e0b\u5f0f\u4e3a\u94fe\u5f0f\u7ed3\u6784\u7684\u6761\u4ef6\u6982\u7387\uff08\u5373 x \u4e0e y \u7684\u7ed3\u6784\u76f8\u540c\uff09 \\[ p(\\mathbf{y} | \\mathbf{x}, \\theta)=\\frac{1}{Z(\\mathbf{x}, \\theta)} \\exp \\left(\\sum_{t=1}^{T} \\theta_{1}^{\\mathrm{T}} f_{1}\\left(\\mathbf{x}, y_{t}\\right)+\\sum_{t=1}^{T-1} \\theta_{2}^{\\mathrm{T}} f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\right) \\] \u5176\u4e2d\uff0c \\(f_{1}\\left(\\mathbf{x}, y_{t}\\right)\\) \u4e3a\u72b6\u6001\u7279\u5f81\uff0c\u4e0e\u4f4d\u7f6e \\(t\\) \u76f8\u5173\uff1b \\(f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\) \u4e3a\u8f6c\u79fb\u7279\u5f81\u3002 \u635f\u5931\u51fd\u6570 \u6781\u5927\u4f3c\u7136\u4f30\u8ba1 $$ L(x) = -\\log P\\left(y_{1}, \\ldots, y_{n} | x\\right) \\ = log(Z(x)) -\\left(\\sum_{t=1}^{T} \\theta_{1}^{\\mathrm{T}} f_{1}\\left(\\mathbf{x}, y_{t}\\right)+\\sum_{t=1}^{T-1} \\theta_{2}^{\\mathrm{T}} f_{2}\\left(\\mathbf{x}, y_{t}, y_{t+1}\\right)\\right) $$ \u9884\u6d4b\u95ee\u9898 \u6a21\u578b\u8bad\u7ec3\u5b8c\u6210\u540e\uff0c\u5982\u4f55\u6839\u636e\u8f93\u5165\u627e\u51fa\u6700\u4f18\u8def\u5f84\uff1f\u540c\u6837\u7684\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u4ece \\(k^n\\) \u6761\u8def\u5f84\u4e2d\u9009\u6700\u4f18\u7684\u95ee\u9898\uff0c\u800c\u56e0\u4e3a\u9a6c\u5c14\u53ef\u592b\u5047\u8bbe\u7684\u5b58\u5728\uff0c\u5b83\u53ef\u4ee5\u8f6c\u5316\u4e3a\u4e00\u4e2a\u52a8\u6001\u89c4\u5212\u95ee\u9898\uff0c\u7528 viterbi \u7b97\u6cd5\u89e3\u51b3\uff0c\u8ba1\u7b97\u91cf\u6b63\u6bd4\u4e8e n\u3002 \u9012\u5f52\u601d\u60f3\u5c31\u662f\uff1a\u4e00\u6761\u6700\u4f18\u8def\u5f84\u5207\u6210\u4e24\u6bb5\uff0c\u90a3\u4e48\u6bcf\u4e00\u6bb5\u90fd\u662f\u4e00\u6761\uff08\u5c40\u90e8\uff09\u6700\u4f18\u8def\u5f84","title":"\u516c\u5f0f\u63a8\u5bfc"},{"location":"Notes%20on%20NCRF%2B%2B/#pytorch-api","text":"\u6211\u4eec\u5148\u6765\u4ecb\u7ecd\u51e0\u4e2a\u9700\u8981\u7528\u5230\u7684 API","title":"Pytorch API"},{"location":"Notes%20on%20NCRF%2B%2B/#gather","text":"\u7406\u89e3\uff1a\u5c06 input \u6309\u7167 dim \u6307\u5b9a\u7684\u7ef4\u5ea6\u4ee5\u53ca index \u4e2d\u6307\u5b9a\u7684\u987a\u5e8f\uff0c\u53d6\u51fa\u7684\u5bf9\u5e94\u503c torch . gather ( input , dim , index , out = None , sparse_grad = False ) \u2192 Tensor Gathers values along an axis specified by dim. For a 3-D tensor the output is specified by: out [ i ][ j ][ k ] = input [ index [ i ][ j ][ k ]][ j ][ k ] # if dim == 0 out [ i ][ j ][ k ] = input [ i ][ index [ i ][ j ][ k ]][ k ] # if dim == 1 out [ i ][ j ][ k ] = input [ i ][ j ][ index [ i ][ j ][ k ]] # if dim == 2 If input is an n-dimensional tensor with size \\((x_0, x_1..., x_{i-1}, x_i, x_{i+1}, ..., x_{n-1})\\) and dim = i , then index must be an n-dimensional tensor with size \\((x_0, x_1, ..., x_{i-1}, y, x_{i+1}, ..., x_{n-1})\\) where \\(y \\geq 1\\) and out will have the same size as index . Parameters input ( Tensor ) \u2013 the source tensor dim ( int ) \u2013 the axis along which to index index ( LongTensor ) \u2013 the indices of elements to gather out ( Tensor , optional ) \u2013 the destination tensor sparse_grad ( bool ,optional ) \u2013 If True , gradient w.r.t. input will be a sparse tensor. Example: >>> t = torch . tensor ([[ 1 , 2 ],[ 3 , 4 ]]) >>> torch . gather ( t , 1 , torch . tensor ([[ 0 , 0 ],[ 1 , 0 ]])) tensor ([[ 1 , 1 ], [ 4 , 3 ]])","title":"gather"},{"location":"Notes%20on%20NCRF%2B%2B/#scatter","text":"\u5c06 src \u7684\u503c\u6309\u7167 dim \u548c index \u7684\u8981\u6c42\u586b\u5165 self \u4e2d scatter_ ( dim , index , src ) \u2192 Tensor Writes all values from the tensor src into self at the indices specified in the index tensor. For each value in src , its output index is specified by its index in src for dimension != dim and by the corresponding value in index for dimension = dim . For a 3-D tensor, self is updated as: self [ index [ i ][ j ][ k ]][ j ][ k ] = src [ i ][ j ][ k ] # if dim == 0 self [ i ][ index [ i ][ j ][ k ]][ k ] = src [ i ][ j ][ k ] # if dim == 1 self [ i ][ j ][ index [ i ][ j ][ k ]] = src [ i ][ j ][ k ] # if dim == 2 This is the reverse operation of the manner described in gather() . self , index and src (if it is a Tensor) should have same number of dimensions. It is also required that index.size(d) <= src.size(d) for all dimensions d , and that index.size(d) <= self.size(d) for all dimensions d != dim . Moreover, as for gather() , the values of index must be between 0 and self.size(dim) - 1 inclusive, and all values in a row along the specified dimension dim must be unique. Parameters dim ( int ) \u2013 the axis along which to index index ( LongTensor ) \u2013 the indices of elements to scatter, can be either empty or the same size of src. When empty, the operation returns identity src ( Tensor ) \u2013 the source element(s) to scatter, incase value is not specified value ( float ) \u2013 the source element(s) to scatter, incase src is not specified Example: >>> x = torch . rand ( 2 , 5 ) >>> x tensor ([[ 0.3992 , 0.2908 , 0.9044 , 0.4850 , 0.6004 ], [ 0.5735 , 0.9006 , 0.6797 , 0.4152 , 0.1732 ]]) >>> torch . zeros ( 3 , 5 ) . scatter_ ( 0 , torch . tensor ([[ 0 , 1 , 2 , 0 , 0 ], [ 2 , 0 , 0 , 1 , 2 ]]), x ) tensor ([[ 0.3992 , 0.9006 , 0.6797 , 0.4850 , 0.6004 ], [ 0.0000 , 0.2908 , 0.0000 , 0.4152 , 0.0000 ], [ 0.5735 , 0.0000 , 0.9044 , 0.0000 , 0.1732 ]]) >>> z = torch . zeros ( 2 , 4 ) . scatter_ ( 1 , torch . tensor ([[ 2 ], [ 3 ]]), 1.23 ) >>> z tensor ([[ 0.0000 , 0.0000 , 1.2300 , 0.0000 ], [ 0.0000 , 0.0000 , 0.0000 , 1.2300 ]])","title":"scatter"},{"location":"Notes%20on%20NCRF%2B%2B/#masked_select","text":"\u4ece input \u4e2d\u9009\u51fa mask \u4e2d\u4e3a 1 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684\u503c\uff0c\u62fc\u4e3a\u65b0\u7684 Tensor \u5e76\u8fd4\u56de torch . masked_select ( input , mask , out = None ) \u2192 Tensor Returns a new 1-D tensor which indexes the input tensor according to the binary mask mask which is a ByteTensor. The shapes of the mask tensor and the input tensor don\u2019t need to match, but they must be broadcastable . NOTE The returned tensor does not use the same storage as the original tensor Parameters input ( Tensor ) \u2013 the input data mask ( ByteTensor ) \u2013 the tensor containing the binary mask to index with out ( Tensor , optional ) \u2013 the output tensor Example: >>> x = torch . randn ( 3 , 4 ) >>> x tensor ([[ 0.3552 , - 2.3825 , - 0.8297 , 0.3477 ], [ - 1.2035 , 1.2252 , 0.5002 , 0.6248 ], [ 0.1307 , - 2.0608 , 0.1244 , 2.0139 ]]) >>> mask = x . ge ( 0.5 ) >>> mask tensor ([[ 0 , 0 , 0 , 0 ], [ 0 , 1 , 1 , 1 ], [ 0 , 0 , 0 , 1 ]], dtype = torch . uint8 ) >>> torch . masked_select ( x , mask ) tensor ([ 1.2252 , 0.5002 , 0.6248 , 2.0139 ])","title":"masked_select"},{"location":"Notes%20on%20NCRF%2B%2B/#masked_scatter_","text":"\u5c06 mask \u4e3a 1 \u7684\u5bf9\u5e94 source \u4e2d\u7684\u503c\u590d\u5236\u5230 self \u4e2d masked_scatter_ ( mask , source ) Copies elements from source into self tensor at positions where the mask is one. The shape of mask must be broadcastable with the shape of the underlying tensor. The source should have at least as many elements as the number of ones in mask Parameters mask ( ByteTensor ) \u2013 the binary mask source ( Tensor ) \u2013 the tensor to copy from NOTE The mask operates on the self tensor, not on the given source tensor.","title":"masked_scatter_"},{"location":"Notes%20on%20NCRF%2B%2B/#masked_fill_","text":"\u5c06 mask \u4e3a 1 \u7684 self \u4e2d\u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684\u503c\u6539\u4e3a value masked_fill_ ( mask , value ) Fills elements of self tensor with value where mask is one. The shape of mask must be broadcastable with the shape of the underlying tensor. Parameters mask ( ByteTensor ) \u2013 the binary mask value ( float ) \u2013 the value to fill in with","title":"masked_fill_"},{"location":"Notes%20on%20NCRF%2B%2B/#crf_2","text":"\u73b0\u5728\u6765\u770b CRF \uff0cCRF \u8003\u8651\u7684\u4e0d\u662f\u6bcf\u6b21\u8f6c\u79fb\u65f6\u7684\u6700\u4f18\u6982\u7387\uff0c\u8003\u8651\u7684\u6574\u4f53\u5e8f\u5217\u7684\u53ef\u80fd\u6027\u3002 Previous_to \\(\\to\\) current_from CRF \u7684\u6838\u5fc3\u662f\u5b83\u4e0d\u50cfLSTM\u7b49\u6a21\u578b\uff0c\u80fd\u591f\u8003\u8651\u957f\u8fdc\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c \u5b83\u66f4\u591a\u8003\u8651\u7684\u662f\u6574\u4e2a\u53e5\u5b50\u7684\u5c40\u90e8\u7279\u5f81\u7684\u7ebf\u6027\u52a0\u6743\u7ec4\u5408\uff08\u901a\u8fc7\u7279\u5f81\u6a21\u7248\u53bb\u626b\u63cf\u6574\u4e2a\u53e5\u5b50\uff09 \u3002\u5173\u952e\u7684\u4e00\u70b9\u662f\uff0cCRF\u7684\u6a21\u578b\u4e3ap(y | x, w)\uff0c\u6ce8\u610f\u8fd9\u91ccy\u548cx\u90fd\u662f\u5e8f\u5217\uff0c\u5b83\u6709\u70b9\u50cflist wise\uff0c\u4f18\u5316\u7684\u662f\u4e00\u4e2a\u5e8f\u5217y = (y1, y2, \u2026, yn)\uff0c\u800c\u4e0d\u662f\u67d0\u4e2a\u65f6\u523b\u7684yt\uff0c\u5373\u627e\u5230\u4e00\u4e2a\u6982\u7387\u6700\u9ad8\u7684\u5e8f\u5217y = (y1, y2, \u2026, yn)\u4f7f\u5f97p(y1, y2, \u2026, yn| x, w)\u6700\u9ad8\uff0c\u5b83\u8ba1\u7b97\u7684\u662f\u4e00\u79cd\u8054\u5408\u6982\u7387\uff0c\u4f18\u5316\u7684\u662f\u6574\u4e2a\u5e8f\u5217\uff08\u6700\u7ec8\u76ee\u6807\uff09\uff0c\u800c\u4e0d\u662f\u5c06\u6bcf\u4e2a\u65f6\u523b\u7684\u6700\u4f18\u62fc\u63a5\u8d77\u6765\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0aCRF\u8981\u4f18\u4e8eLSTM\u3002 \u8f6c\u79fb\u77e9\u9635\u7684 \\([i, j]\\) \u4ee3\u8868\u7684\u662f\u7531\u72b6\u6001 \\(i\\) \u8f6c\u79fb\u5230\u72b6\u6001 \\(j\\) \u7684\u53ef\u80fd\u6027 \u6ce8\u610f\uff0cCRF \u4e2d\u7684 tag_size \u662f\u771f\u5b9e\u7684 tag_size + 2","title":"CRF \u6e90\u7801\u89e3\u6790"},{"location":"Notes%20on%20NCRF%2B%2B/#_calculate_pzself-feats-mask","text":"\u9996\u5148\u6211\u4eec\u5c06\u83b7\u5f97\u7684 size \u4e3a batch_size, seq_len, tag_size \u7684\u7279\u5f81\u5411\u91cf\u8c03\u6574\u4e3a seq_len, batch_size, tag_size \uff0c\u65b9\u4fbf\u968f\u540e\u4f9d\u65f6\u95f4\u6b65\u8bbf\u95ee\u5e8f\u5217\u3002 \u800c\u540e\u518d\u8c03\u6574\u4e3a seq_len * batch_size, 1, tag_size \uff0c\u518d\u6269\u5c55\u6210\u4e3a seq_len * batch_size, tag_size, tag_size \u4e0e\u8f6c\u79fb\u77e9\u9635\u76f8\u52a0\u5f97\u5230 scores \u3002 \u53ef\u4ee5\u7406\u89e3\u6210\u662f\u5c06\u901a\u8fc7 model \u83b7\u5f97\u5230\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u7684\u6240\u6709\u7684 tag \u7684\u53ef\u80fd\u6027\u90fd\u52a0\u5230\u8f6c\u79fb\u77e9\u9635\u4e4b\u4e0a\uff0c\u5373\u5f53\u6211\u4eec\u6309\u65f6\u95f4\u6b65\u904d\u5386\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e0a\u7684 size \u4e3a batch_size, tag_size, tag_size \u7684 cur_values \u77e9\u9635\u65f6\uff0c\u8fd9\u91cc\u7684\u77e9\u9635\u662f\u7531\u539f\u59cb\u7684\u8f6c\u79fb\u77e9\u9635 + \u4e4b\u524d model \u5f97\u5230\u7684\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684 word \u7684\u6bcf\u79cd tag \u7684\u53ef\u80fd\u6027\u3002\u8fd9\u91cc\u6211\u4eec\u5c06\u7279\u5f81\u5411\u91cf feature \u4ece\u4e00\u4e2a\u884c\u5411\u91cf(\u4e0d\u770b batch_size )\u6269\u5c55\u4e3a\u4e00\u4e2a\u77e9\u9635\uff0c\u5176\u5b9e\u5c31\u662f\u4e0d\u7ba1 start \u72b6\u6001\u662f\u4ec0\u4e48\uff0c\u8f6c\u79fb\u5230 j \u72b6\u6001\u7684\u53ef\u80fd\u6027\u90fd\u4f1a\u52a0\u4e0a \u6269\u5c55\u524d\u7684 feature[j]\u3002 \u800c\u5728\u6bcf\u6b21\u968f\u65f6\u95f4\u6b65\u7684\u8fed\u4ee3\u4e2d\uff0c\u6211\u4eec\u90fd\u4f1a\u5c06\u524d\u4e00\u65f6\u95f4\u6b65\u4f20\u6765\u7684 size \u4e3a batch_size, tag_size, 1 \u7684 partition \u6570\u7ec4\uff0c\u6269\u5c55\u4e3a batch_size, tag_size, tag_size \u5e76\u52a0\u4e0a cur_values \u3002 \u7b2c\u4e00\u6b21\u8fed\u4ee3\u4e2d\uff0cpartition \u662f\u7531 inivalues[:, START_TAG, :].clone().view(batch_size, tag_size, 1 \u5f97\u5230\u7684\uff0c\u5176\u542b\u4e49\u662f start_tag \u4e4b\u540e\u7684\u4e0b\u4e00\u4e2a tag \u7684\u6982\u7387\u503c\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u65f6\u95f4\u6b65\u5bf9\u5e94\u7684 word \u7684 tag \u7684\u53ef\u80fd\u6027\u3002\u5c06\u8fd9\u4e00 \u5217\u5411\u91cf \u6269\u5c55\u540e\u5e76\u4e0e cur_values \u76f8\u52a0\u540e\uff0c\u76f8\u5f53\u4e8e\u6bcf\u4e00\u884c\u7684\u5404\u4e2a\u6570\u503c\u90fd\u52a0\u4e0a\u4e86\u540c\u4e00\u503c\uff0c\u4e5f\u5c31\u662f\u4ece\u72b6\u6001 i \u5230\u5176\u4ed6\u4efb\u4f55\u72b6\u6001\u90fd\u52a0\u4e0a\u4e86 inivalues[START_TAG, i] (\u4e0d\u770b batch_size )\u3002 \u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e00\u6570\u503c\u7684\u542b\u4e49\u662f\u4ece start_tag \u5230\u72b6\u6001 i \u7684\u53ef\u80fd\u6027\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u72b6\u6001\u4e3a i \u7684\u53ef\u80fd\u6027\u3002 \u90a3\u4e48 cur_values \u9700\u8981\u5c06\u7531\u72b6\u6001 i \u51fa\u53d1\u7684\u6240\u6709\u72b6\u6001 j \u7684\u53ef\u80fd\u6027\u90fd\u589e\u52a0\u8fd9\u4e00\u6570\u503c\uff0c\u5373cur_values[i] = inivalues[START_TAG, i].view(1, tag_size) + cur_values[i]\u3002\u5bf9\u6bcf\u884c\u5206\u522b\u5904\u7406\u4e00\u6b21\uff0c\u7ecf\u8fc7\u8fd9\u6837\u7684 tag_size \u6b21\u8fd0\u7b97\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u3001\u8003\u8651\u5230\u524d\u4e00\u72b6\u6001\u8f6c\u79fb\u77e9\u9635\u7684\uff0c\u65b0\u7684\u72b6\u6001\u8f6c\u79fb\u77e9\u9635\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e00\u77e9\u9635\u8fdb\u884c\u5904\u7406\uff0c\u5f97\u5230\u65b0\u7684 partition \u4f20\u9012\u7ed9\u4e0b\u4e00\u6b21\u7684\u8fed\u4ee3\u3002\u6211\u4eec\u5148\u8ba1\u7b97\u77e9\u9635\u6bcf\u4e00\u5217\u7684\u6700\u5927\u503c\uff0c\u6784\u6210\u4e00\u4e2a\u884c\u5411\u91cf max_value \uff0cmax_value[j] \u542b\u4e49\u662f\u4e0b\u4e00\u72b6\u6001\u4e3a j \u7684\u6700\u5927\u8f6c\u79fb\u53ef\u80fd\u6027\uff0c \u5c06\u5176\u62d3\u5c55\u4e3a\u548c\u8f93\u5165\u7684 partition \u4e00\u6837\u7684 size \u540e\u7528 partition - max_value\uff0c\u77e9\u9635\u7684\u6240\u6709\u503c\u90fd\u662f\u975e\u6b63\u6570\uff0c\u9010\u5143\u7d20\u4f5c\u7528 exp \u51fd\u6570\u5c06\u5176\u6309\u5217 sum (\u7b2c i \u5217\u7684\u548c\u7684\u610f\u4e49\u662f\u4e0b\u4e00\u72b6\u6001\u4e3a i \u7684\u53ef\u80fd\u6027\u4e4b\u548c) \uff0c\u9010\u5143\u7d20\u4f5c\u7528 log \u51fd\u6570\uff0c\u6700\u7ec8\u5f97\u5230\u7684\u65b0\u7684\u77e9\u9635 temp \u662f\u4e00\u4e2a\u884c\u5411\u91cf(\u4e0d\u770b batch_size )\uff0ctemp[j] \u4ee3\u8868\u7684\u662f\u8f6c\u79fb\u5230\u72b6\u6001 j \u7684\u53ef\u80fd\u6027\u4e4b\u548c\u3002\u518d\u5c06\u5176\u4e0e max_score\u76f8\u52a0\uff0c\u5f97\u5230\u6700\u7ec8\u7684 cur_partition\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u8ff0\u8fc7\u7a0b\u672a\u63d0\u53ca mask \u6b65\u9aa4\uff0c\u5b9e\u9645\u64cd\u4f5c\u4e2d\u9700\u8981\u4f7f\u7528 mask \u64cd\u4f5c\u5b8c\u6210\u5bf9 partition \u7684\u66f4\u65b0 \u5373\uff0c\u5c06 cur_partition \u4e2d\u5bf9\u5e94 mask \u4e3a 1 \u7684\u53d6\u51fa\u5e76\u62fc\u63a5\u4e3a\u4e00\u7ef4\u7684 masked_cur_partition \uff0c\u518d\u5c06masked_cur_partition \u4e2d \u66f4\u65b0\u5230 partition \u7684\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u83b7\u5f97\u65b0\u7684 partition \u904d\u5386\u5b8c\u5e8f\u5217\u540e\uff0c\u5f97\u5230 final_partition = cur_partition[:, STOP_TAG] \uff0c\u5373\u5404\u4e2a\u72b6\u6001\u8f6c\u79fb\u5230 stop_tag \u7684\u53ef\u80fd\u6027\uff0c\u6c42\u5f97\u5176 sum \u5e76\u8fd4\u56de sum \u4e0e scores","title":"_calculate_PZ(self, feats, mask)"},{"location":"Notes%20on%20NCRF%2B%2B/#_score_sentenceself-scores-mask-tags","text":"\u800c\u4eca\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u4e86 forward_score, scores \uff0c\u63a5\u4e0b\u6765\u7ee7\u7eed\u8ba1\u7b97 gold_score tags \u7684 size \u4e3a (batch, seq_len) \uff0c\u5b58\u653e\u7684\u662f\u6bcf\u4e2a batch \u5185\u6bcf\u4e2a sequence \u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684 tag \u7c7b\u578b\u3002\u4e3a\u4e86\u80fd\u591f\u4ece scores \u4e2d\u53d6\u51fa\u5bf9\u5e94\u7684 tg_energy\uff0c\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9996\u5148\u5c06 size \u4e3a (seq_len, batch, tag_size, tag_size) \u7684 scores \u8c03\u6574\u4e3a (seq_len, batch, tag_size * tag_size) \u63a5\u7740\u5c06 tags \u7684\u6570\u503c\u8c03\u6574\u4e3a new_tags[:, idx] = tags[:, idx - 1] * tag_size + tags[:, idx] \uff0c\u6b64\u65f6\u7684\u77e9\u9635\u5b58\u50a8\u7684\u6570\u503c\u6b63\u548c scores \u77e9\u9635\u538b\u7f29\u540e\u7684\u5bf9\u5e94\u4f4d\u7f6e\u4e00\u81f4\uff0c\u5373\u5c06 from_tag & to_tag \u7684\u4fe1\u606f\u5b58\u50a8\u5728\u4e86\u8fd9\u4e00\u6570\u503c\u4e2d\uff0cnew_tags \u7684 size \u4e3a (batch_size, seq_len) \u5c06 new_tags \u4ea4\u6362 0 1 \u7ef4\u5e76\u8c03\u6574\u4e3a (seq_len, batch_size, 1)\uff0c\u7136\u540e\u4ece scores \u4e2d\u53d6\u51fa\u5bf9\u5e94\u7684 tg_energy \uff0csize \u4e3a (seq_len, batch_size) \u518d\u4f7f\u7528 mask \u77e9\u9635\u8fc7\u6ee4\u4e00\u904d \u53d6\u51fa\u8f6c\u79fb\u77e9\u9635\u4e2d\u6240\u6709 tag \u53d8\u4e3a STOP_TAG \u7684\u6982\u7387\u503c\u5e76\u6269\u5c55\u4e3a (batch_size, tag_size) \u4f5c\u4e3a end_transition \u901a\u8fc7\u5bf9 size \u4e3a (batch, seq_len) \u7684 mask \u7684\u6bcf\u884c\u6c42\u548c\uff0c\u5f97\u5230\u6bcf\u4e2a sequence \u7684 length\uff0c\u518d\u4ece\u539f tags \u4e2d\u53d6\u51fa\u6bcf\u4e2a sequence \u7684\u6700\u540e\u4e00\u4e2a tag \u7684 ID \u5f62\u6210 size \u4e3a (batch_size, 1) \u7684 end_ids \u63a5\u7740\u4ece end_transition \u4e2d\u53d6\u51fa end_ids \u5bf9\u5e94\u7684 end_energy \u5bf9 tg_energy \u548c end_energy \u5206\u522b\u6c42\u548c\u5e76\u76f8\u52a0\uff0c\u5f97\u5230 gold_score","title":"_score_sentence(self, scores, mask, tags)"},{"location":"Notes%20on%20NCRF%2B%2B/#_viterbi_decodeself-feats-mask","text":"\u73b0\u5728\u6211\u4eec\u6765\u770b viterbi_decode \u9996\u5148\u548c\u4e4b\u524d _calculate_PZ \u7684\u8ba1\u7b97\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u5f97\u5230 scores \u77e9\u9635\u540e\u8fdb\u884c\u904d\u5386\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u9700\u8981\u8bb0\u5f55\u6240\u6709\u7684 partition \u4ee5\u53ca cur_bp \u5206\u522b\u4fdd\u5b58\u5728 partition_history \u548c back_points \uff0c\u5e76\u4e14\u8ba1\u7b97\u65b9\u5f0f\u4e3a partition, cur_bp = torch.max(cur_values, 1) \uff0c\u6b64\u5916 mask \u9700\u8981 reverse \uff0c\u5373 mask = (1 - mask.long()).byte() \uff0c\u6b64\u65f6 mask \u4e2d\u4e3a 1 \u7684\u90e8\u5206\u8868\u793a padding partition \u4e3a\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u5404\u4e2a to_target \u7684\u6700\u5927\u53ef\u80fd\u6027 cur_bp \u4e3a partition \u7684\u6bcf\u4e2a\u503c\u7684 from_target \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 1 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0 \u63a5\u7740\uff0c\u901a\u8fc7 length_mask \u83b7\u5f97 last_position \u5373\u6bcf\u4e2a sequence \u7684\u7ed3\u675f\u4f4d\u7f6e\u7684 index\uff0c\u518d\u4ece partition_history \u4e2d\u53d6\u51fa last_partition \uff0c\u4e0e\u8f6c\u79fb\u77e9\u9635 transitions \u76f8\u52a0\uff0c\u5f97\u5230\u5e8f\u5217\u7684\u7ed3\u5c3e\u5904\u7684\u8f6c\u79fb\u77e9\u9635 last_values \uff0c\u800c\u540e\u6c42\u5f97\u5176\u6bcf\u5217\u7684\u6700\u5927\u503c\u5bf9\u5e94\u7684 index \uff0c\u518d\u53d6\u51fa STOP_TAG \u5bf9\u5e94\u7684\u5217\uff0c\u5c31\u83b7\u5f97\u4e86 size \u4e3a (batch_size) \u7684pointer \uff0c\u5373\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \u3002\u518d\u5c06\u8fd9\u4e00 from_target \u653e\u5230 back_points \u7684\u672b\u5c3e \u6700\u540e\u8ba1\u7b97 decode_idx\uff0c\u7528\u4e8e\u5728 decode \u9636\u6bb5\u89e3\u6790\u5f97\u5230 decoded sequence pointer \u662f decode_idx \u7684\u6700\u540e\u4e00\u9879\uff0c\u56e0\u4e3a\u5176\u4fdd\u5b58\u7684\u662f\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \uff0c\u5373 end_id \u5012\u5e8f\u89e3\u7801\u65f6\uff0c\u540e\u4e00\u65f6\u95f4\u6b65\u7684 pointer \u5373\u4e3a\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u4e86\uff0c\u6240\u4ee5\u5bf9\u5e94\u4ece back_points \u4e2d\u53d6\u5f97\u5176 from_target \u5e76\u4fdd\u5b58\u5728 decode_idx \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8","title":"_viterbi_decode(self, feats, mask)"},{"location":"Notes%20on%20NCRF%2B%2B/#_viterbi_decode_nbestself-feats-mask-nbest","text":"\u9996\u5148\u548c _calculate_PZ \u7684\u8ba1\u7b97\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u83b7\u5f97 scores \u77e9\u9635\uff0c\u518d\u53d6\u51fa start_tag \u4e4b\u540e\u7684\u4e0b\u4e00\u4e2a tag \u7684\u6982\u7387\u503c\uff0c\u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest) \uff0c\u5728\u6dfb\u52a0\u5230 partition_history \u4e2d\uff0c\u6b64\u65f6 idx \u4e3a 0\u3002\u6b64\u5916 mask \u9700\u8981 reverse \uff0c\u5373 mask = (1 - mask.long()).byte() \uff0c\u6b64\u65f6 mask \u4e2d\u4e3a 1 \u7684\u90e8\u5206\u8868\u793a padding \u63a5\u7740\u904d\u5386 scores \u7b2c\u4e00\u6b21\u904d\u5386\u65f6 idx \u5df2\u7ecf\u4e3a 1 , \u5c06 cur_values \u4e0e partition \u76f8\u52a0\u83b7\u5f97 size \u4e3a (batch_size, tag_size, tag_size) \u7684 \u65b0 cur_values \u63a5\u7740\u53d6\u51fa cur_values \u4e2d\u7684 topk dim=1 \u7684\u6392\u5e8f\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 partition \u4ee5\u53ca\u5bf9\u5e94\u7684 index -- cur_bp\uff0c\u5373\u83b7\u5f97\u4e86\u4e0b\u4e00\u72b6\u6001\u7684 topk \u7684\u53ef\u80fd\u6027\u4ee5\u53ca\u5bf9\u5e94\u7684 from_target \uff0csize \u5747\u4e3a (batch_size, nbest, tag_size) \u5c06 cur_bp \u7684\u6240\u6709\u503c\u90fd * nbest \uff0c\u4e0e\u540e\u7eed\u7684 index \u4e00\u81f4 \u5c06 partition \u548c cur_bp \u7684 1 2 \u7ef4\u5bf9\u8c03\uff0csize \u53d8\u4e3a (batch_size, tag_size, nbest)\uff0c\u5e76\u5c06 partition \u4fdd\u5b58\u5728 partition_history \u4e2d \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 0 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0\uff0c\u5e76\u5c06 cur_bp \u4fdd\u5b58\u5728 back_points \u4e2d \u5176\u4ed6\u65f6\u5019 \\(\\text{idx} \\gt 1\\) \uff0c\u5c06 cur_values \u8c03\u6574\u4e3a (batch_size, tag_size, 1, tag_size) \u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \uff0c\u5c06 partition \u8c03\u6574\u4e3a (batch_size, tag_size, nbest, 1) \u5e76\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \uff0c\u518d\u5c06\u4e24\u8005\u76f8\u52a0\uff0c\u83b7\u5f97\u65b0\u7684 cur_values \u5e76\u8c03\u6574size \u4e3a (batch_size, tag_size * nbest, tag_size) \u8fd9\u91cc\u7684\u4e24\u6b21\u6269\u5c55\uff1a\u5bf9\u4e8e nbest \u800c\u8a00\uff0ccur_values \u662f\u4e0d\u53d8\u7684\uff0c\u6545\u53ef\u4ee5\u76f4\u63a5\u62d3\u5c55\uff0c\u800c partition \u8c03\u6574\u4e3a (batch_size, tag_size, nbest, 1) \u540e\u7684\u542b\u4e49\u662f\u4e0a\u4e00\u65f6\u95f4\u6b65\u4f5c\u4e3a to_target \u7684\u6bcf\u79cd tag \u7684 topk \u7684\u6982\u7387\u503c\uff0c\u5373\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u6bcf\u4e00\u79cd tag \u4f5c\u4e3a from_target \u7684 topk \u7684\u6982\u7387\u503c\uff0c\u6269\u5c55\u540e\u76f8\u5f53\u4e8e topk \u4e2d\u6bcf\u4e2a topn \u5bf9\u5e94\u7684 (tag_size, tag_size) \u7684\u8f6c\u79fb\u77e9\u9635\uff0c\u8fd9\u91cc\u7684\u8f6c\u79fb\u77e9\u9635\u662f\u7531 (tag_size, 1) \u7684\u5217\u5411\u91cf\u6269\u5c55\u800c\u6765\u7684\uff0c\u76f8\u5f53\u4e8e\u65e0\u8bba\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u662f\u4ec0\u4e48\uff0c \u7279\u5b9a from_target \u7684\u8f6c\u79fb\u6982\u7387\u662f\u4e00\u6837\u7684 \u76f8\u52a0\u540e\u8c03\u6574\u4e3a (batch_size, tag_size * nbest, tag_size) \u63a5\u7740\u53d6\u51fa cur_values \u4e2d\u7684 topk dim=1 \u7684\u6392\u5e8f\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 partition \u4ee5\u53ca\u5bf9\u5e94\u7684 index -- cur_bp\uff0c\u5373\u83b7\u5f97\u4e86\u4e0b\u4e00\u72b6\u6001\u7684 topk \u7684\u53ef\u80fd\u6027\u4ee5\u53ca\u5bf9\u5e94\u7684 from_target \uff0csize \u5747\u4e3a (batch_size, nbest, tag_size) \u7531\u4e8e\u5df2\u7ecf\u5c06 size \u8c03\u6574\u4e3a (batch_size, tag_size * nbest, tag_size) \uff0c\u6240\u4ee5 topk \u7684\u6392\u5e8f\u8303\u56f4\u662f tag_size * nbest \uff0c\u5373\u5bf9\u8bb0\u5f55\u7684 tag_size \u4e2a size \u4e3a [nbest, tag_size] \u7684\u8f6c\u79fb\u77e9\u9635\u7eb5\u5411\u8fde\u63a5\u5f62\u6210 (tag_size * nbest, tag_size) \u7684\u77e9\u9635\uff0c\u800c\u540e\u5bf9\u6bcf\u5217\u7684 topk \u53d6\u51fa\u6570\u503c\u4e0e index \u8fd9\u91cc\u7684 index \u7684\u8303\u56f4\u662f [0, tag_size * nbest - 1]\uff0cindex / nbest \u5c31\u53ef\u4ee5\u5f97\u5230\u8303\u56f4\u4e3a [0, tag_size - 1] \u7684\u771f\u5b9e\u7684 index \uff0c\u5373 from_target \u4f8b\u5982from_target \u4e3a 5 \u7684 top2 \u7684 nbest \u4e0b\u7684 index \u5c31\u4e3a nbest * 5 + 2\uff0c index / nbest \u540e\u5373\u53ef\u5f97\u5230 from_target = 5 \u5c06 partition \u548c cur_bp \u7684 1 2 \u7ef4\u5bf9\u8c03\uff0csize \u53d8\u4e3a (batch_size, tag_size, nbest)\uff0c\u5e76\u5c06 partition \u4fdd\u5b58\u5728 partition_history \u4e2d \u518d\u901a\u8fc7 mask \u5c06 cur_bp \u4e2dmask \u4e3a 0 \u7684\u5bf9\u5e94\u4f4d\u7f6e\u8d4b\u503c\u4e3a 0\uff0c\u5e76\u5c06 cur_bp \u4fdd\u5b58\u5728 back_points \u4e2d \u83b7\u5f97\u4e86 size \u4e3a (batch_size, seq_len, nbest, tag_size) \u7684 partition_history\uff0c\u901a\u8fc7 length_mask \u83b7\u5f97 size \u4e3a (batch_size, 1, tag_size, nbest) \u7684 last_position\uff0c\u518d\u4ece partition_history \u53d6\u51fa sequence \u672b\u5c3e\u5f97\u5230 last_partition \u5e76\u8c03\u6574\u5176 size \u4e3a (batch_size, tag_size, nbest, 1)\uff0c\u518d\u6269\u5c55\u4e3a (batch_size, tag_size, nbest, tag_size) \u5e76\u4e0e\u8f6c\u79fb\u77e9\u9635 transitions \u76f8\u52a0\uff0c\u5f97\u5230\u5e8f\u5217\u7684\u7ed3\u5c3e\u5904\u7684\u8f6c\u79fb\u77e9\u9635 last_values \u63a5\u7740\u4e0e\u904d\u5386 scores \u65f6\u7c7b\u4f3c\uff0c\u53d6\u51fa\u538b\u7f29\u540e\u7684 end_partition \u548c end_bp \u5e76\u53d6\u51fa STOP_TAG \u5bf9\u5e94\u7684\u77e9\u9635\uff0c\u5c31\u83b7\u5f97\u4e86 size \u4e3a (batch_size, nbest) \u7684pointer \uff0c\u5373\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \u3002\u518d\u5c06\u8fd9\u4e00 from_target \u653e\u5230 back_points \u7684\u672b\u5c3e \u6700\u540e\u8ba1\u7b97 decode_idx\uff0c\u7528\u4e8e\u5728 decode \u9636\u6bb5\u89e3\u6790\u5f97\u5230 decoded sequence pointer \u662f decode_idx \u7684\u6700\u540e\u4e00\u9879\uff0c\u56e0\u4e3a\u5176\u4fdd\u5b58\u7684\u662f\u6700\u6709\u53ef\u80fd\u8f6c\u79fb\u81f3 STOP_TAG \u7684 from_target \uff0c\u5373 end_id \uff0c\u4f46\u7531\u4e8e\u4e4b\u524d\u5df2\u5c06 index \u538b\u7f29\uff0c\u6240\u4ee5 decode_idx[-1] = pointer.data / nbest \uff0c\u4ece\u800c\u83b7\u5f97\u771f\u6b63\u7684 index \u5012\u5e8f\u89e3\u7801\u65f6\uff0c\u540e\u4e00\u65f6\u95f4\u6b65\u7684 pointer \u5373\u4e3a\u5f53\u524d\u65f6\u95f4\u6b65\u7684 to_target \u4e86\uff0c\u6240\u4ee5\u5bf9\u5e94\u4ece back_points \u4e2d\u53d6\u5f97\u5176 from_target \u5e76 / nbest\uff0c\u7136\u540e\u4fdd\u5b58\u5728 decode_idx \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8 \u6ce8\u610f\uff0c\u6b64\u5904\u7684 pointer \u9700\u8981\u4fdd\u5b58 the last end nbest ids for non longest \u6240\u6709\u7684 back_points \u4fdd\u5b58\u7684\u90fd\u662f\u7ecf\u8fc7 mask \u5904\u7406\u7684 tag_id \uff0cpadding \u7684 tag_id \u5747\u4e3a 0 \u5bf9\u4e8e _viterbi_decode \u7684\u89e3\u7801\u8fc7\u7a0b\uff0cpointer \u6269\u5c55\u4e3a (batch_size, 1, tag_size) \u540e\u6210\u4e3a insert_last \u5e76\u653e\u5728 sequence \u7684 last_position \u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5bf9\u4e8e\u67d0\u4e00 sequence \u800c\u8a00\uff0c\u4e0d\u7ba1\u5230\u8fbe\u8fd9\u4e00\u4f4d\u7f6e\u7684 pointer \u7684\u5bf9\u5e94\u4f4d\u7f6e\u662f\u51e0\uff0c\u53ea\u8981\u5230\u8fbe\u4e86\u8be5 sequence \u7684\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u4f1a\u5f97\u5230\u5176 tag\uff0c\u4ece\u800c\u5b8c\u6210\u5bf9\u5e94\u7684\u89e3\u7801 \u5bf9\u4e8e nbest \u65f6\u7684\u89e3\u7801\u8fc7\u7a0b\uff0c\u9700\u8981\u8003\u8651 n \u79cd\u60c5\u51b5\uff0c\u5728\u89e3\u7801\u7684\u7b2c\u4e00\u6b21\u66f4\u65b0 pointer \u65f6\uff0c\u6240\u6709\u957f\u5ea6\u5c0f\u4e8e\u6700\u5927\u957f\u5ea6\u7684 sequence \u7684 pointer \u90fd\u4f1a\u53d8\u4e3a 0\uff0c\u800c\u7531\u4e8e back_points[idx] \u88ab\u8c03\u6574\u4e3a (batch_size, tag_size * nbest)\uff0c \u65e0\u6cd5\u5bf9\u6bcf\u4e2a nbest \u90fd\u8bbf\u95ee 0 \u4ee5\u83b7\u5f97\u5176 last end nbest ids \uff0c\u538b\u7f29\u540e\u6240\u6709\u7684 0 \u90fd\u53ea\u80fd\u8bbf\u95ee\u5230\u540c\u4e00\u4e2a\u503c\uff0c\u8fd9\u53ea\u662f top1 \u7684 last end id\uff0c\u90a3\u4e48\u5c31\u4f1a\u4e22\u5931 last end nbest ids\u3002\u6240\u4ee5\u9700\u8981\u5c06\u4f1a\u88ab 0 \u8986\u76d6\u6389\u7684 last end nbest ids \u4fdd\u5b58\u5e76\u91cd\u65b0\u8986\u76d6 \u4f7f\u7528\u7684\u7b2c\u4e00\u4e2a pointer \u662f\u6240\u6709 sequence \u7684\u6700\u540e\u4e00\u4e2a tag_id\uff0c\u5373\u4f7f tag_id \u5e76\u4e0d\u662f back_points[idx] \u7684 to_target \u4e5f\u6ca1\u5173\u7cfb\uff0c\u53d6\u5f97\u7684 from_target \u4ecd\u7136\u4f1a\u56e0\u4e3a\u4e4b\u524d\u7684 mask \u5904\u7406 \u800c\u4e3a 0\uff1b\u968f\u540e\u7684 pointer \u4ea6\u7136","title":"_viterbi_decode_nbest(self, feats, mask, nbest)"},{"location":"Notes%20on%20NCRF%2B%2B/#reference","text":"\u300a\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u300b CRFS \u7406\u89e3\u6761\u4ef6\u968f\u673a\u573a \u6761\u4ef6\u968f\u673a\u573aCRF \u7b80\u660e\u6761\u4ef6\u968f\u673a\u573aCRF\u4ecb\u7ecd | \u9644\u5e26\u7eafKeras\u5b9e\u73b0 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e4b\u5e8f\u5217\u6807\u6ce8\u95ee\u9898","title":"Reference"},{"location":"Protocol%20Buffers/","text":"Protocol Buffers \u00b6 \u534f\u8bae\u7f13\u51b2\u533a( Protocol Buffers )\u662f\u8c37\u6b4c\u7684\u8bed\u8a00\u65e0\u5173\u7684\u3001\u5e73\u53f0\u65e0\u5173\u7684\u3001\u53ef\u6269\u5c55\u7684\u5e8f\u5217\u5316\u7ed3\u6784\u5316\u6570\u636e\u7684\u673a\u5236\uff0c\u76f8\u8f83\u4e8e XML \uff0c Protobuf \u66f4\u5c0f\u3001\u66f4\u5feb\u3001\u66f4\u7b80\u5355\u3002\u4e00\u65e6\u5b9a\u4e49\u4e86\u6570\u636e\u7ed3\u6784\u5316\u7684\u65b9\u5f0f\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 Protobuf \u7f16\u8bd1\u5668\u751f\u6210\u7684\u6e90\u4ee3\u7801\u8f7b\u677e\u5730\u5728\u5404\u79cd\u6570\u636e\u6d41\u4e4b\u95f4\u548c\u5e73\u53f0\u4e4b\u95f4\uff0c\u4f7f\u7528\u5404\u79cd\u8bed\u8a00\u7f16\u5199\u548c\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u3002 Hello World! \u00b6 \u7a0b\u5e8f\u7531Writer\u548cReader\u7ec4\u6210 Writer \u8d1f\u8d23\u5c06\u4e00\u4e9b\u7ed3\u6784\u5316\u7684\u6570\u636e\u5199\u5165\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6 Reader \u5219\u8d1f\u8d23\u4ece\u8be5\u78c1\u76d8\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u5e76\u6253\u5370\u5230\u5c4f\u5e55\u4e0a helloworld.proto \u547d\u540d\u89c4\u5219\uff1a MessageName.proto package lm ; message helloworld { required int32 id = 1 ; required string str = 2 ; optional int32 opt = 3 ; //optional field } \u5728\u4e0a\u4f8b\u4e2d\uff0cpackage\u540d\u5b57\u53eb\u505a lm\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6d88\u606f helloworld \u8be5\u6d88\u606f\u6709\u4e09\u4e2a\u6210\u5458\uff0c\u7c7b\u578b\u4e3a int32 \u7684 id\uff0c\u53e6\u4e00\u4e2a\u4e3a\u7c7b\u578b\u4e3a string \u7684\u6210\u5458 str opt \u662f\u4e00\u4e2a\u53ef\u9009\u7684\u6210\u5458\uff0c\u5373\u6d88\u606f\u4e2d\u53ef\u4ee5\u4e0d\u5305\u542b\u8be5\u6210\u5458 \u7f16\u8bd1 \u00b6 \u5199\u597d proto \u6587\u4ef6\u4e4b\u540e\u5c31\u53ef\u4ee5\u7528 Protobuf \u7f16\u8bd1\u5668\u5c06\u8be5\u6587\u4ef6\u7f16\u8bd1\u6210\u76ee\u6807\u8bed\u8a00\u4e86\u3002\u672c\u4f8b\u4e2d\u6211\u4eec\u5c06\u4f7f\u7528 C++\u3002 protoc -I=$SRC_DIR --cpp_out=$DST_DIR $SRC_DIR/filename.proto => helloworld.pb.h \uff0c\u751f\u6210\u7c7b\u7684\u5934\u6587\u4ef6 => helloworld.pb.cc \uff0c\u7c7b\u7684\u5b9e\u73b0 \u5728\u751f\u6210\u7684\u5934\u6587\u4ef6\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a C++ \u7c7b helloworld\uff0c\u540e\u9762\u7684 Writer \u548c Reader \u5c06\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u6765\u5bf9\u6d88\u606f\u8fdb\u884c\u64cd\u4f5c\u3002\u8bf8\u5982\u5bf9\u6d88\u606f\u7684\u6210\u5458\u8fdb\u884c\u8d4b\u503c\uff0c\u5c06\u6d88\u606f\u5e8f\u5217\u5316\u7b49\u76f8\u5e94\u7684\u65b9\u6cd5\u3002 \u7f16\u5199Writer\u548cReader \u00b6 \u4f7f\u7528 Protobuf\uff0cWriter \u7684\u5de5\u4f5c\u5f88\u7b80\u5355\uff0c\u9700\u8981\u5904\u7406\u7684\u7ed3\u6784\u5316\u6570\u636e\u7531 .proto \u6587\u4ef6\u63cf\u8ff0\uff0c\u7ecf\u8fc7\u4e0a\u4e00\u8282\u4e2d\u7684\u7f16\u8bd1\u8fc7\u7a0b\u540e\uff0c\u8be5\u6570\u636e\u5316\u7ed3\u6784\u5bf9\u5e94\u4e86\u4e00\u4e2a C++ \u7684\u7c7b\uff0c\u5e76\u5b9a\u4e49\u5728 lm.helloworld.pb.h \u4e2d\u3002\u5bf9\u4e8e\u672c\u4f8b\uff0c\u7c7b\u540d\u4e3a lm::helloworld \u3002Writer \u9700\u8981 include \u8be5\u5934\u6587\u4ef6\uff0c\u7136\u540e\u4fbf\u53ef\u4ee5\u4f7f\u7528\u8be5\u7c7b\u3002 \u73b0\u5728\uff0c\u5728 Writer \u4ee3\u7801\u4e2d\uff0c\u5c06\u8981\u5b58\u5165\u78c1\u76d8\u7684\u7ed3\u6784\u5316\u6570\u636e\u7531\u4e00\u4e2a lm::helloworld \u7c7b\u7684\u5bf9\u8c61\u8868\u793a\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684 get/set \u51fd\u6570\u7528\u6765\u4fee\u6539\u548c\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u4e2d\u7684\u6570\u636e\u6210\u5458\uff0c\u6216\u8005\u53eb field\u3002 \u5f53\u6211\u4eec\u9700\u8981\u5c06\u8be5\u7ed3\u6784\u5316\u6570\u636e\u4fdd\u5b58\u5230\u78c1\u76d8\u4e0a\u65f6\uff0c\u7c7b lm::helloworld \u5df2\u7ecf\u63d0\u4f9b\u76f8\u5e94\u7684\u65b9\u6cd5\u6765\u628a\u4e00\u4e2a\u590d\u6742\u7684\u6570\u636e\u53d8\u6210\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5b57\u8282\u5e8f\u5217\u5199\u5165\u78c1\u76d8\u3002\u5bf9\u4e8e\u60f3\u8981\u8bfb\u53d6\u8fd9\u4e2a\u6570\u636e\u7684\u7a0b\u5e8f\u6765\u8bf4\uff0c\u4e5f\u53ea\u9700\u8981\u4f7f\u7528\u7c7b lm::helloworld \u7684\u76f8\u5e94\u53cd\u5e8f\u5217\u5316\u65b9\u6cd5\u6765\u5c06\u8fd9\u4e2a\u5b57\u8282\u5e8f\u5217\u91cd\u65b0\u8f6c\u6362\u56de\u7ed3\u6784\u5316\u6570\u636e\u3002 // writer.cc #include \"helloworld.pb.h\" #include <fstream> #include <iostream> using namespace std ; int main ( void ) { lm :: helloworld msg1 ; msg1 . set_id ( 101 ); msg1 . set_str ( \"hello\" ); fstream output ( \"./write_log\" , ios :: out | ios :: trunc | ios :: binary ); if ( ! msg1 . SerializeToOstream ( & output )) { cerr << \"Failed to write msg.\" << endl ; return -1 ; } return 0 ; } Msg1 \u662f\u4e00\u4e2a helloworld \u7c7b\u7684\u5bf9\u8c61\uff0c set_id() \u7528\u6765\u8bbe\u7f6e id \u7684\u503c\u3002 SerializeToOstream \u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u540e\u5199\u5165\u4e00\u4e2a fstream \u6d41\u3002 // reader.cc #include \"helloworld.pb.h\" #include <fstream> #include <iostream> using namespace std ; void ListMsg ( const lm :: helloworld & msg ) { cout << msg . id () << endl ; cout << msg . str () << endl ; } int main ( int argc , char * argv []) { lm :: helloworld msg1 ; { fstream input ( \"./write_log\" , ios :: in | ios :: binary ); if ( ! msg1 . ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return -1 ; } } ListMsg ( msg1 ); fstream out ( \"./reader_log\" , ios :: out ); if ( out . is_open ()) { out << msg1 . id () << endl ; out << msg1 . str () << endl ; out . close (); } } \u540c\u6837\uff0cReader \u58f0\u660e\u7c7b helloworld \u7684\u5bf9\u8c61 msg1\uff0c\u7136\u540e\u5229\u7528 ParseFromIstream \u4ece\u4e00\u4e2a fstream \u6d41\u4e2d\u8bfb\u53d6\u4fe1\u606f\u5e76\u53cd\u5e8f\u5217\u5316\u3002\u6b64\u540e\uff0cListMsg \u4e2d\u91c7\u7528 get \u65b9\u6cd5\u8bfb\u53d6\u6d88\u606f\u7684\u5185\u90e8\u4fe1\u606f\uff0c\u5e76\u8fdb\u884c\u6253\u5370\u8f93\u51fa\u64cd\u4f5c\u3002 $ cd protobuf $ g++ helloworld.pb.cc writer.cc -o writer ` pkg-config --cflags --libs protobuf ` -lpthread $ g++ helloworld.pb.cc reader.cc -o reader ` pkg-config --cflags --libs protobuf ` -lpthread $ ./writer $ ./reader $ 101 $ hello Con&Pro \u00b6 \u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u5feb \u7f3a\u70b9\uff1a\u529f\u80fd\u7b80\u5355\uff0c\u4e0d\u80fd\u8868\u8ff0\u590d\u6742\u6982\u5ff5\uff0c\u901a\u7528\u6027\u5dee \u7531\u4e8e\u6587\u672c\u5e76\u4e0d\u9002\u5408\u7528\u6765\u63cf\u8ff0\u6570\u636e\u7ed3\u6784\uff0c\u6240\u4ee5 Protobuf \u4e5f\u4e0d\u9002\u5408\u7528\u6765\u5bf9\u57fa\u4e8e\u6587\u672c\u7684\u6807\u8bb0\u6587\u6863\uff08\u5982 HTML\uff09\u5efa\u6a21\u3002\u53e6\u5916\uff0c\u7531\u4e8e XML \u5177\u6709\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u7684\u81ea\u89e3\u91ca\u6027\uff0c\u5b83\u53ef\u4ee5\u88ab\u4eba\u76f4\u63a5\u8bfb\u53d6\u7f16\u8f91\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a Protobuf \u4ee5\u4e8c\u8fdb\u5236\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u9664\u975e\u4f60\u6709 .proto \u5b9a\u4e49\uff0c\u5426\u5219\u4f60\u6ca1\u6cd5\u76f4\u63a5\u8bfb\u51fa Protobuf \u7684\u4efb\u4f55\u5185\u5bb9 \u9ad8\u7ea7\u7528\u6cd5 \u00b6 \u5d4c\u5957message \u00b6 syntax = \"proto2\" ; package tutorial ; message Person { required string name = 1 ; required int32 id = 2 ; optional string email = 3 ; enum PhoneType { MOBILE = 0 ; HOME = 1 ; WORK = 2 ; } message PhoneNumber { required string number = 1 ; optional PhoneType type = 2 [ default = HOME ]; } repeated PhoneNumber phones = 4 ; } message AddressBook { repeated Person people = 1 ; } \u6570\u636e\u7c7b\u578b\u5305\u62ec bool \u3001 int32 \u3001 float \u3001 double \u3001 string \uff0c\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b enum \u5728 Person \u4e2d\uff0c\u5b9a\u4e49\u4e86\u5d4c\u5957\u6d88\u606f PhoneNumber\uff0c\u5e76\u7528\u6765\u5b9a\u4e49 Person \u6d88\u606f\u4e2d\u7684 phones \u57df\uff0c\u8fd9\u5c31\u53ef\u4ee5\u5b9e\u73b0\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784 \u6bcf\u4e2a\u5b57\u6bb5\u90fd\u9700\u8981\u4e0b\u5217\u4fee\u9970\u7b26\u4e4b\u4e00\u8fdb\u884c\u4fee\u9970 required \u5fc5\u987b\u63d0\u4f9b\u521d\u59cb\u5316\u503c\uff0c\u5426\u5219\u89c6\u4e3a\u672a\u521d\u59cb\u5316\u5e76\u5bfc\u81f4\u89e3\u6790\u65b9\u6cd5\u8fd4\u56defalse\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u4e0e optional \u4e00\u6837\u3002 optional \u53ef\u4ee5\u8bbe\u7f6e\u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u5c31\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u81ea\u5df1\u6307\u5b9a\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u4f1a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002\uff080\u3001\u7a7a\u5b57\u7b26\u4e32\u3001false\uff09\uff0c\u5e76\u4e14\u5728writer\u4e2d\u53ef\u4ee5\u901a\u8fc7 has_() \u8fdb\u884c\u5224\u65ad repeated \u8be5\u5b57\u6bb5\u53ef\u4ee5\u91cd\u590d\u4efb\u610f\u6b21\u6570(\u5305\u62ec0\u6b21)\uff0c\u91cd\u590d\u503c\u7684\u987a\u5e8f\u5c06\u4fdd\u7559\u5728\u534f\u8bae\u7f13\u51b2\u533a\u4e2d\uff0c\u53ef\u4ee5\u770b\u4f5c\u52a8\u6001\u5927\u5c0f\u7684\u6570\u7ec4\u3002 Writer \u00b6 # include < iostream > # include < fstream > # include < string > # include \"addressbook.pb.h\" using namespace std ; // This function fills in a Person message based on user input. void PromptForAddress ( tutorial :: Person * person ) { cout << \"Enter person ID number: \" ; int id ; cin >> id ; person - > set_id ( id ); cin.ignore ( 256 , '\\n' ); cout << \"Enter name: \" ; getline ( cin , * person - > mutable_name ()); cout << \"Enter email address (blank for none): \" ; string email ; getline ( cin , email ); if ( ! email.empty ()) { person - > set_email ( email ); } while ( true ) { cout << \"Enter a phone number (or leave blank to finish): \" ; string number ; getline ( cin , number ); if ( number.empty ()) { break ; } tutorial :: Person :: PhoneNumber * phone_number = person - > add_phones (); phone_number - > set_number ( number ); cout << \"Is this a mobile, home, or work phone? \" ; string type ; getline ( cin , type ); if ( type == \"mobile\" ) { phone_number - > set_type ( tutorial :: Person :: MOBILE ); } else if ( type == \"home\" ) { phone_number - > set_type ( tutorial :: Person :: HOME ); } else if ( type == \"work\" ) { phone_number - > set_type ( tutorial :: Person :: WORK ); } else { cout << \"Unknown phone type. Using default.\" << endl ; } } } // Main function: Reads the entire address book from a file, // adds one person based on user input, then writes it back out to the same // file. int main ( int argc , char * argv []) { // Verify that the version of the library that we linked against is // compatible with the version of the headers we compiled against. GOOGLE_PROTOBUF_VERIFY_VERSION ; if ( argc ! = 2 ) { cerr << \"Usage: \" << argv [ 0 ] << \" ADDRESS_BOOK_FILE\" << endl ; return - 1 ; } tutorial :: AddressBook address_book ; { // Read the existing address book. fstream input ( argv [ 1 ], ios :: in | ios :: binary ); if ( ! input ) { cout << argv [ 1 ] << \": File not found. Creating a new file.\" << endl ; } else if ( ! address_book.ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return - 1 ; } } // Add an address. PromptForAddress ( address_book.add_people ()); { // Write the new address book back to disk. fstream output ( argv [ 1 ], ios :: out | ios :: trunc | ios :: binary ); if ( ! address_book.SerializeToOstream ( & output )) { cerr << \"Failed to write address book.\" << endl ; return - 1 ; } } // Optional: Delete all global objects allocated by libprotobuf. google :: protobuf :: ShutdownProtobufLibrary (); return 0 ; } Reader \u00b6 # include < iostream > # include < fstream > # include < string > # include \"addressbook.pb.h\" using namespace std ; // Iterates though all people in the AddressBook and prints info about them. void ListPeople ( const tutorial :: AddressBook & address_book ) { for ( int i = 0 ; i < address_book.people_size (); i ++ ) { const tutorial :: Person & person = address_book.people ( i ); cout << \"Person ID: \" << person.id () << endl ; cout << \" Name: \" << person.name () << endl ; if ( person.has_email ()) { cout << \" E-mail address: \" << person.email () << endl ; } for ( int j = 0 ; j < person.phones_size (); j ++ ) { const tutorial :: Person :: PhoneNumber & phone_number = person.phones ( j ); switch ( phone_number.type ()) { case tutorial :: Person :: MOBILE : cout << \" Mobile phone #: \" ; break ; case tutorial :: Person :: HOME : cout << \" Home phone #: \" ; break ; case tutorial :: Person :: WORK : cout << \" Work phone #: \" ; break ; } cout << phone_number.number () << endl ; } } } // Main function: Reads the entire address book from a file and prints all // the information inside. int main ( int argc , char * argv []) { // Verify that the version of the library that we linked against is // compatible with the version of the headers we compiled against. GOOGLE_PROTOBUF_VERIFY_VERSION ; if ( argc ! = 2 ) { cerr << \"Usage: \" << argv [ 0 ] << \" ADDRESS_BOOK_FILE\" << endl ; return - 1 ; } tutorial :: AddressBook address_book ; { // Read the existing address book. fstream input ( argv [ 1 ], ios :: in | ios :: binary ); if ( ! address_book.ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return - 1 ; } } ListPeople ( address_book ); // Optional: Delete all global objects allocated by libprotobuf. google :: protobuf :: ShutdownProtobufLibrary (); return 0 ; } Run \u00b6 $ protoc -I = ./ --cpp_out = ./ ./addressbook.proto $ g++ addressbook.pb.cc reader.cc -o reader ` pkg-config --cflags --libs protobuf ` -lpthread $ g++ addressbook.pb.cc writer.cc -o writer ` pkg-config --cflags --libs protobuf ` -lpthread $ ./writer addressbook addressbook: File not found. Creating a new file. Enter person ID number: 123456 Enter name: XiaoXu Enter email address ( blank for none ) : LooperXX@outlook.com Enter a phone number ( or leave blank to finish ) : 77777777777 Is this a mobile, home, or work phone? mobile Enter a phone number ( or leave blank to finish ) : $ ./reader addressbook Person ID: 123456 Name: XiaoXu E-mail address: LooperXX@outlook.com Mobile phone #: 77777777777 Import \u00b6 \u5728\u4e00\u4e2a .proto \u6587\u4ef6\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u7528 Import \u5173\u952e\u5b57\u5f15\u5165\u5728\u5176\u4ed6 .proto \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u6d88\u606f\uff0c\u8fd9\u53ef\u4ee5\u79f0\u505a Import Message\uff0c\u6216\u8005 Dependency Message\u3002 \u4f8b\u4e2d ,common.info_header\u5b9a\u4e49\u5728common.header\u5305\u5185\u3002 import common.header ; message youMsg { required common.info_header header = 1 ; required string youPrivateData = 2 ; } \u52a8\u6001\u7f16\u8bd1 \u00b6 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4eba\u4eec\u65e0\u6cd5\u9884\u5148\u77e5\u9053 .proto \u6587\u4ef6\uff0c\u4ed6\u4eec\u9700\u8981\u52a8\u6001\u5904\u7406\u4e00\u4e9b\u672a\u77e5\u7684 .proto \u6587\u4ef6\u3002\u6bd4\u5982\u4e00\u4e2a\u901a\u7528\u7684\u6d88\u606f\u8f6c\u53d1\u4e2d\u95f4\u4ef6\uff0c\u5b83\u4e0d\u53ef\u80fd\u9884\u77e5\u9700\u8981\u5904\u7406\u600e\u6837\u7684\u6d88\u606f\u3002\u8fd9\u9700\u8981\u52a8\u6001\u7f16\u8bd1 .proto \u6587\u4ef6\uff0c\u5e76\u4f7f\u7528\u5176\u4e2d\u7684 Message \u3002 Protobuf \u63d0\u4f9b\u4e86 google::protobuf::compiler \u5305\u6765\u5b8c\u6210\u52a8\u6001\u7f16\u8bd1\u7684\u529f\u80fd\u3002\u4e3b\u8981\u7684\u7c7b\u53eb\u505a importer \uff0c\u5b9a\u4e49\u5728 importer.h \u4e2d\u3002\u4f7f\u7528 Importer \u975e\u5e38\u7b80\u5355\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86\u4e0e Import \u548c\u5176\u5b83\u51e0\u4e2a\u91cd\u8981\u7684\u7c7b\u7684\u5173\u7cfb\u3002 Import \u7c7b\u5bf9\u8c61\u4e2d\u5305\u542b\u4e09\u4e2a\u4e3b\u8981\u7684\u5bf9\u8c61\uff0c\u5206\u522b\u4e3a\u5904\u7406\u9519\u8bef\u7684 MultiFileErrorCollector \u7c7b\uff0c\u5b9a\u4e49 .proto \u6587\u4ef6\u6e90\u76ee\u5f55\u7684 SourceTree \u7c7b\u3002 google :: protobuf :: compiler :: MultiFileErrorCollector errorCollector \uff1b google :: protobuf :: compiler :: DiskSourceTree sourceTree ; google :: protobuf :: compiler :: Importer importer ( & sourceTree , & errorCollector ); sourceTree . MapPath ( \"\" , protosrc ); importer . import ( \"lm.helloworld.proto\" ); \u9996\u5148\u6784\u9020\u4e00\u4e2a importer \u5bf9\u8c61\u3002\u6784\u9020\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u5165\u53e3\u53c2\u6570\uff0c\u4e00\u4e2a\u662f sourceTree \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u6307\u5b9a\u4e86\u5b58\u653e .proto \u6587\u4ef6\u7684\u6e90\u76ee\u5f55\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a error collector \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u6709\u4e00\u4e2a AddError \u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u89e3\u6790 .proto \u6587\u4ef6\u65f6\u9047\u5230\u7684\u8bed\u6cd5\u9519\u8bef\u3002\u4e4b\u540e\uff0c\u9700\u8981\u52a8\u6001\u7f16\u8bd1\u4e00\u4e2a .proto \u6587\u4ef6\u65f6\uff0c\u53ea\u9700\u8c03\u7528 importer \u5bf9\u8c61\u7684 import \u65b9\u6cd5\u3002\u975e\u5e38\u7b80\u5355\u3002 \u5982\u4f55\u4f7f\u7528\u52a8\u6001\u7f16\u8bd1\u540e\u7684 Message \u5462\uff1f Package google::protobuf::compiler \u4e2d\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u7c7b\uff0c\u7528\u6765\u8868\u793a\u4e00\u4e2a .proto \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684 message \uff0c\u4ee5\u53ca Message \u4e2d\u7684 field \uff0c\u5982\u56fe\u6240\u793a\u3002 \u7c7b FileDescriptor \u8868\u793a\u4e00\u4e2a\u7f16\u8bd1\u540e\u7684 .proto \u6587\u4ef6\uff1b\u7c7b Descriptor \u5bf9\u5e94\u8be5\u6587\u4ef6\u4e2d\u7684\u4e00\u4e2a Message \uff1b\u7c7b FieldDescriptor \u63cf\u8ff0\u4e00\u4e2a Message \u4e2d\u7684\u4e00\u4e2a\u5177\u4f53 Field \u3002 \u6bd4\u5982\u7f16\u8bd1\u5b8c lm.helloworld.proto \u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u4ee3\u7801\u5f97\u5230 lm.helloworld.id \u7684\u5b9a\u4e49\uff1a const protobuf :: Descriptor * desc = importer_ . pool () -> FindMessageTypeByName ( \u201c lm . helloworld \u201d ); const protobuf :: FieldDescriptor * field = desc -> pool () -> FindFileByName ( \u201c id \u201d ); \u901a\u8fc7 Descriptor \uff0c FieldDescriptor \u7684\u5404\u79cd\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u83b7\u5f97\u5404\u79cd\u5173\u4e8e Message \u5b9a\u4e49\u7684\u4fe1\u606f\u3002\u6bd4\u5982\u901a\u8fc7 field->name() \u5f97\u5230 field \u7684\u540d\u5b57\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u52a8\u6001\u5b9a\u4e49\u7684\u6d88\u606f\u4e86\u3002","title":"Protocol Buffers"},{"location":"Protocol%20Buffers/#protocol-buffers","text":"\u534f\u8bae\u7f13\u51b2\u533a( Protocol Buffers )\u662f\u8c37\u6b4c\u7684\u8bed\u8a00\u65e0\u5173\u7684\u3001\u5e73\u53f0\u65e0\u5173\u7684\u3001\u53ef\u6269\u5c55\u7684\u5e8f\u5217\u5316\u7ed3\u6784\u5316\u6570\u636e\u7684\u673a\u5236\uff0c\u76f8\u8f83\u4e8e XML \uff0c Protobuf \u66f4\u5c0f\u3001\u66f4\u5feb\u3001\u66f4\u7b80\u5355\u3002\u4e00\u65e6\u5b9a\u4e49\u4e86\u6570\u636e\u7ed3\u6784\u5316\u7684\u65b9\u5f0f\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 Protobuf \u7f16\u8bd1\u5668\u751f\u6210\u7684\u6e90\u4ee3\u7801\u8f7b\u677e\u5730\u5728\u5404\u79cd\u6570\u636e\u6d41\u4e4b\u95f4\u548c\u5e73\u53f0\u4e4b\u95f4\uff0c\u4f7f\u7528\u5404\u79cd\u8bed\u8a00\u7f16\u5199\u548c\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u3002","title":"Protocol Buffers"},{"location":"Protocol%20Buffers/#hello-world","text":"\u7a0b\u5e8f\u7531Writer\u548cReader\u7ec4\u6210 Writer \u8d1f\u8d23\u5c06\u4e00\u4e9b\u7ed3\u6784\u5316\u7684\u6570\u636e\u5199\u5165\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6 Reader \u5219\u8d1f\u8d23\u4ece\u8be5\u78c1\u76d8\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u5e76\u6253\u5370\u5230\u5c4f\u5e55\u4e0a helloworld.proto \u547d\u540d\u89c4\u5219\uff1a MessageName.proto package lm ; message helloworld { required int32 id = 1 ; required string str = 2 ; optional int32 opt = 3 ; //optional field } \u5728\u4e0a\u4f8b\u4e2d\uff0cpackage\u540d\u5b57\u53eb\u505a lm\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6d88\u606f helloworld \u8be5\u6d88\u606f\u6709\u4e09\u4e2a\u6210\u5458\uff0c\u7c7b\u578b\u4e3a int32 \u7684 id\uff0c\u53e6\u4e00\u4e2a\u4e3a\u7c7b\u578b\u4e3a string \u7684\u6210\u5458 str opt \u662f\u4e00\u4e2a\u53ef\u9009\u7684\u6210\u5458\uff0c\u5373\u6d88\u606f\u4e2d\u53ef\u4ee5\u4e0d\u5305\u542b\u8be5\u6210\u5458","title":"Hello World!"},{"location":"Protocol%20Buffers/#_1","text":"\u5199\u597d proto \u6587\u4ef6\u4e4b\u540e\u5c31\u53ef\u4ee5\u7528 Protobuf \u7f16\u8bd1\u5668\u5c06\u8be5\u6587\u4ef6\u7f16\u8bd1\u6210\u76ee\u6807\u8bed\u8a00\u4e86\u3002\u672c\u4f8b\u4e2d\u6211\u4eec\u5c06\u4f7f\u7528 C++\u3002 protoc -I=$SRC_DIR --cpp_out=$DST_DIR $SRC_DIR/filename.proto => helloworld.pb.h \uff0c\u751f\u6210\u7c7b\u7684\u5934\u6587\u4ef6 => helloworld.pb.cc \uff0c\u7c7b\u7684\u5b9e\u73b0 \u5728\u751f\u6210\u7684\u5934\u6587\u4ef6\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a C++ \u7c7b helloworld\uff0c\u540e\u9762\u7684 Writer \u548c Reader \u5c06\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u6765\u5bf9\u6d88\u606f\u8fdb\u884c\u64cd\u4f5c\u3002\u8bf8\u5982\u5bf9\u6d88\u606f\u7684\u6210\u5458\u8fdb\u884c\u8d4b\u503c\uff0c\u5c06\u6d88\u606f\u5e8f\u5217\u5316\u7b49\u76f8\u5e94\u7684\u65b9\u6cd5\u3002","title":"\u7f16\u8bd1"},{"location":"Protocol%20Buffers/#writerreader","text":"\u4f7f\u7528 Protobuf\uff0cWriter \u7684\u5de5\u4f5c\u5f88\u7b80\u5355\uff0c\u9700\u8981\u5904\u7406\u7684\u7ed3\u6784\u5316\u6570\u636e\u7531 .proto \u6587\u4ef6\u63cf\u8ff0\uff0c\u7ecf\u8fc7\u4e0a\u4e00\u8282\u4e2d\u7684\u7f16\u8bd1\u8fc7\u7a0b\u540e\uff0c\u8be5\u6570\u636e\u5316\u7ed3\u6784\u5bf9\u5e94\u4e86\u4e00\u4e2a C++ \u7684\u7c7b\uff0c\u5e76\u5b9a\u4e49\u5728 lm.helloworld.pb.h \u4e2d\u3002\u5bf9\u4e8e\u672c\u4f8b\uff0c\u7c7b\u540d\u4e3a lm::helloworld \u3002Writer \u9700\u8981 include \u8be5\u5934\u6587\u4ef6\uff0c\u7136\u540e\u4fbf\u53ef\u4ee5\u4f7f\u7528\u8be5\u7c7b\u3002 \u73b0\u5728\uff0c\u5728 Writer \u4ee3\u7801\u4e2d\uff0c\u5c06\u8981\u5b58\u5165\u78c1\u76d8\u7684\u7ed3\u6784\u5316\u6570\u636e\u7531\u4e00\u4e2a lm::helloworld \u7c7b\u7684\u5bf9\u8c61\u8868\u793a\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684 get/set \u51fd\u6570\u7528\u6765\u4fee\u6539\u548c\u8bfb\u53d6\u7ed3\u6784\u5316\u6570\u636e\u4e2d\u7684\u6570\u636e\u6210\u5458\uff0c\u6216\u8005\u53eb field\u3002 \u5f53\u6211\u4eec\u9700\u8981\u5c06\u8be5\u7ed3\u6784\u5316\u6570\u636e\u4fdd\u5b58\u5230\u78c1\u76d8\u4e0a\u65f6\uff0c\u7c7b lm::helloworld \u5df2\u7ecf\u63d0\u4f9b\u76f8\u5e94\u7684\u65b9\u6cd5\u6765\u628a\u4e00\u4e2a\u590d\u6742\u7684\u6570\u636e\u53d8\u6210\u4e00\u4e2a\u5b57\u8282\u5e8f\u5217\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5b57\u8282\u5e8f\u5217\u5199\u5165\u78c1\u76d8\u3002\u5bf9\u4e8e\u60f3\u8981\u8bfb\u53d6\u8fd9\u4e2a\u6570\u636e\u7684\u7a0b\u5e8f\u6765\u8bf4\uff0c\u4e5f\u53ea\u9700\u8981\u4f7f\u7528\u7c7b lm::helloworld \u7684\u76f8\u5e94\u53cd\u5e8f\u5217\u5316\u65b9\u6cd5\u6765\u5c06\u8fd9\u4e2a\u5b57\u8282\u5e8f\u5217\u91cd\u65b0\u8f6c\u6362\u56de\u7ed3\u6784\u5316\u6570\u636e\u3002 // writer.cc #include \"helloworld.pb.h\" #include <fstream> #include <iostream> using namespace std ; int main ( void ) { lm :: helloworld msg1 ; msg1 . set_id ( 101 ); msg1 . set_str ( \"hello\" ); fstream output ( \"./write_log\" , ios :: out | ios :: trunc | ios :: binary ); if ( ! msg1 . SerializeToOstream ( & output )) { cerr << \"Failed to write msg.\" << endl ; return -1 ; } return 0 ; } Msg1 \u662f\u4e00\u4e2a helloworld \u7c7b\u7684\u5bf9\u8c61\uff0c set_id() \u7528\u6765\u8bbe\u7f6e id \u7684\u503c\u3002 SerializeToOstream \u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u540e\u5199\u5165\u4e00\u4e2a fstream \u6d41\u3002 // reader.cc #include \"helloworld.pb.h\" #include <fstream> #include <iostream> using namespace std ; void ListMsg ( const lm :: helloworld & msg ) { cout << msg . id () << endl ; cout << msg . str () << endl ; } int main ( int argc , char * argv []) { lm :: helloworld msg1 ; { fstream input ( \"./write_log\" , ios :: in | ios :: binary ); if ( ! msg1 . ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return -1 ; } } ListMsg ( msg1 ); fstream out ( \"./reader_log\" , ios :: out ); if ( out . is_open ()) { out << msg1 . id () << endl ; out << msg1 . str () << endl ; out . close (); } } \u540c\u6837\uff0cReader \u58f0\u660e\u7c7b helloworld \u7684\u5bf9\u8c61 msg1\uff0c\u7136\u540e\u5229\u7528 ParseFromIstream \u4ece\u4e00\u4e2a fstream \u6d41\u4e2d\u8bfb\u53d6\u4fe1\u606f\u5e76\u53cd\u5e8f\u5217\u5316\u3002\u6b64\u540e\uff0cListMsg \u4e2d\u91c7\u7528 get \u65b9\u6cd5\u8bfb\u53d6\u6d88\u606f\u7684\u5185\u90e8\u4fe1\u606f\uff0c\u5e76\u8fdb\u884c\u6253\u5370\u8f93\u51fa\u64cd\u4f5c\u3002 $ cd protobuf $ g++ helloworld.pb.cc writer.cc -o writer ` pkg-config --cflags --libs protobuf ` -lpthread $ g++ helloworld.pb.cc reader.cc -o reader ` pkg-config --cflags --libs protobuf ` -lpthread $ ./writer $ ./reader $ 101 $ hello","title":"\u7f16\u5199Writer\u548cReader"},{"location":"Protocol%20Buffers/#conpro","text":"\u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u5feb \u7f3a\u70b9\uff1a\u529f\u80fd\u7b80\u5355\uff0c\u4e0d\u80fd\u8868\u8ff0\u590d\u6742\u6982\u5ff5\uff0c\u901a\u7528\u6027\u5dee \u7531\u4e8e\u6587\u672c\u5e76\u4e0d\u9002\u5408\u7528\u6765\u63cf\u8ff0\u6570\u636e\u7ed3\u6784\uff0c\u6240\u4ee5 Protobuf \u4e5f\u4e0d\u9002\u5408\u7528\u6765\u5bf9\u57fa\u4e8e\u6587\u672c\u7684\u6807\u8bb0\u6587\u6863\uff08\u5982 HTML\uff09\u5efa\u6a21\u3002\u53e6\u5916\uff0c\u7531\u4e8e XML \u5177\u6709\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u7684\u81ea\u89e3\u91ca\u6027\uff0c\u5b83\u53ef\u4ee5\u88ab\u4eba\u76f4\u63a5\u8bfb\u53d6\u7f16\u8f91\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a Protobuf \u4ee5\u4e8c\u8fdb\u5236\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u9664\u975e\u4f60\u6709 .proto \u5b9a\u4e49\uff0c\u5426\u5219\u4f60\u6ca1\u6cd5\u76f4\u63a5\u8bfb\u51fa Protobuf \u7684\u4efb\u4f55\u5185\u5bb9","title":"Con&amp;Pro"},{"location":"Protocol%20Buffers/#_2","text":"","title":"\u9ad8\u7ea7\u7528\u6cd5"},{"location":"Protocol%20Buffers/#message","text":"syntax = \"proto2\" ; package tutorial ; message Person { required string name = 1 ; required int32 id = 2 ; optional string email = 3 ; enum PhoneType { MOBILE = 0 ; HOME = 1 ; WORK = 2 ; } message PhoneNumber { required string number = 1 ; optional PhoneType type = 2 [ default = HOME ]; } repeated PhoneNumber phones = 4 ; } message AddressBook { repeated Person people = 1 ; } \u6570\u636e\u7c7b\u578b\u5305\u62ec bool \u3001 int32 \u3001 float \u3001 double \u3001 string \uff0c\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b enum \u5728 Person \u4e2d\uff0c\u5b9a\u4e49\u4e86\u5d4c\u5957\u6d88\u606f PhoneNumber\uff0c\u5e76\u7528\u6765\u5b9a\u4e49 Person \u6d88\u606f\u4e2d\u7684 phones \u57df\uff0c\u8fd9\u5c31\u53ef\u4ee5\u5b9e\u73b0\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784 \u6bcf\u4e2a\u5b57\u6bb5\u90fd\u9700\u8981\u4e0b\u5217\u4fee\u9970\u7b26\u4e4b\u4e00\u8fdb\u884c\u4fee\u9970 required \u5fc5\u987b\u63d0\u4f9b\u521d\u59cb\u5316\u503c\uff0c\u5426\u5219\u89c6\u4e3a\u672a\u521d\u59cb\u5316\u5e76\u5bfc\u81f4\u89e3\u6790\u65b9\u6cd5\u8fd4\u56defalse\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u4e0e optional \u4e00\u6837\u3002 optional \u53ef\u4ee5\u8bbe\u7f6e\u4e5f\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\u3002\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u5c31\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002\u9ed8\u8ba4\u503c\u53ef\u4ee5\u81ea\u5df1\u6307\u5b9a\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5c31\u4f1a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u3002\uff080\u3001\u7a7a\u5b57\u7b26\u4e32\u3001false\uff09\uff0c\u5e76\u4e14\u5728writer\u4e2d\u53ef\u4ee5\u901a\u8fc7 has_() \u8fdb\u884c\u5224\u65ad repeated \u8be5\u5b57\u6bb5\u53ef\u4ee5\u91cd\u590d\u4efb\u610f\u6b21\u6570(\u5305\u62ec0\u6b21)\uff0c\u91cd\u590d\u503c\u7684\u987a\u5e8f\u5c06\u4fdd\u7559\u5728\u534f\u8bae\u7f13\u51b2\u533a\u4e2d\uff0c\u53ef\u4ee5\u770b\u4f5c\u52a8\u6001\u5927\u5c0f\u7684\u6570\u7ec4\u3002","title":"\u5d4c\u5957message"},{"location":"Protocol%20Buffers/#writer","text":"# include < iostream > # include < fstream > # include < string > # include \"addressbook.pb.h\" using namespace std ; // This function fills in a Person message based on user input. void PromptForAddress ( tutorial :: Person * person ) { cout << \"Enter person ID number: \" ; int id ; cin >> id ; person - > set_id ( id ); cin.ignore ( 256 , '\\n' ); cout << \"Enter name: \" ; getline ( cin , * person - > mutable_name ()); cout << \"Enter email address (blank for none): \" ; string email ; getline ( cin , email ); if ( ! email.empty ()) { person - > set_email ( email ); } while ( true ) { cout << \"Enter a phone number (or leave blank to finish): \" ; string number ; getline ( cin , number ); if ( number.empty ()) { break ; } tutorial :: Person :: PhoneNumber * phone_number = person - > add_phones (); phone_number - > set_number ( number ); cout << \"Is this a mobile, home, or work phone? \" ; string type ; getline ( cin , type ); if ( type == \"mobile\" ) { phone_number - > set_type ( tutorial :: Person :: MOBILE ); } else if ( type == \"home\" ) { phone_number - > set_type ( tutorial :: Person :: HOME ); } else if ( type == \"work\" ) { phone_number - > set_type ( tutorial :: Person :: WORK ); } else { cout << \"Unknown phone type. Using default.\" << endl ; } } } // Main function: Reads the entire address book from a file, // adds one person based on user input, then writes it back out to the same // file. int main ( int argc , char * argv []) { // Verify that the version of the library that we linked against is // compatible with the version of the headers we compiled against. GOOGLE_PROTOBUF_VERIFY_VERSION ; if ( argc ! = 2 ) { cerr << \"Usage: \" << argv [ 0 ] << \" ADDRESS_BOOK_FILE\" << endl ; return - 1 ; } tutorial :: AddressBook address_book ; { // Read the existing address book. fstream input ( argv [ 1 ], ios :: in | ios :: binary ); if ( ! input ) { cout << argv [ 1 ] << \": File not found. Creating a new file.\" << endl ; } else if ( ! address_book.ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return - 1 ; } } // Add an address. PromptForAddress ( address_book.add_people ()); { // Write the new address book back to disk. fstream output ( argv [ 1 ], ios :: out | ios :: trunc | ios :: binary ); if ( ! address_book.SerializeToOstream ( & output )) { cerr << \"Failed to write address book.\" << endl ; return - 1 ; } } // Optional: Delete all global objects allocated by libprotobuf. google :: protobuf :: ShutdownProtobufLibrary (); return 0 ; }","title":"Writer"},{"location":"Protocol%20Buffers/#reader","text":"# include < iostream > # include < fstream > # include < string > # include \"addressbook.pb.h\" using namespace std ; // Iterates though all people in the AddressBook and prints info about them. void ListPeople ( const tutorial :: AddressBook & address_book ) { for ( int i = 0 ; i < address_book.people_size (); i ++ ) { const tutorial :: Person & person = address_book.people ( i ); cout << \"Person ID: \" << person.id () << endl ; cout << \" Name: \" << person.name () << endl ; if ( person.has_email ()) { cout << \" E-mail address: \" << person.email () << endl ; } for ( int j = 0 ; j < person.phones_size (); j ++ ) { const tutorial :: Person :: PhoneNumber & phone_number = person.phones ( j ); switch ( phone_number.type ()) { case tutorial :: Person :: MOBILE : cout << \" Mobile phone #: \" ; break ; case tutorial :: Person :: HOME : cout << \" Home phone #: \" ; break ; case tutorial :: Person :: WORK : cout << \" Work phone #: \" ; break ; } cout << phone_number.number () << endl ; } } } // Main function: Reads the entire address book from a file and prints all // the information inside. int main ( int argc , char * argv []) { // Verify that the version of the library that we linked against is // compatible with the version of the headers we compiled against. GOOGLE_PROTOBUF_VERIFY_VERSION ; if ( argc ! = 2 ) { cerr << \"Usage: \" << argv [ 0 ] << \" ADDRESS_BOOK_FILE\" << endl ; return - 1 ; } tutorial :: AddressBook address_book ; { // Read the existing address book. fstream input ( argv [ 1 ], ios :: in | ios :: binary ); if ( ! address_book.ParseFromIstream ( & input )) { cerr << \"Failed to parse address book.\" << endl ; return - 1 ; } } ListPeople ( address_book ); // Optional: Delete all global objects allocated by libprotobuf. google :: protobuf :: ShutdownProtobufLibrary (); return 0 ; }","title":"Reader"},{"location":"Protocol%20Buffers/#run","text":"$ protoc -I = ./ --cpp_out = ./ ./addressbook.proto $ g++ addressbook.pb.cc reader.cc -o reader ` pkg-config --cflags --libs protobuf ` -lpthread $ g++ addressbook.pb.cc writer.cc -o writer ` pkg-config --cflags --libs protobuf ` -lpthread $ ./writer addressbook addressbook: File not found. Creating a new file. Enter person ID number: 123456 Enter name: XiaoXu Enter email address ( blank for none ) : LooperXX@outlook.com Enter a phone number ( or leave blank to finish ) : 77777777777 Is this a mobile, home, or work phone? mobile Enter a phone number ( or leave blank to finish ) : $ ./reader addressbook Person ID: 123456 Name: XiaoXu E-mail address: LooperXX@outlook.com Mobile phone #: 77777777777","title":"Run"},{"location":"Protocol%20Buffers/#import","text":"\u5728\u4e00\u4e2a .proto \u6587\u4ef6\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u7528 Import \u5173\u952e\u5b57\u5f15\u5165\u5728\u5176\u4ed6 .proto \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u6d88\u606f\uff0c\u8fd9\u53ef\u4ee5\u79f0\u505a Import Message\uff0c\u6216\u8005 Dependency Message\u3002 \u4f8b\u4e2d ,common.info_header\u5b9a\u4e49\u5728common.header\u5305\u5185\u3002 import common.header ; message youMsg { required common.info_header header = 1 ; required string youPrivateData = 2 ; }","title":"Import"},{"location":"Protocol%20Buffers/#_3","text":"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4eba\u4eec\u65e0\u6cd5\u9884\u5148\u77e5\u9053 .proto \u6587\u4ef6\uff0c\u4ed6\u4eec\u9700\u8981\u52a8\u6001\u5904\u7406\u4e00\u4e9b\u672a\u77e5\u7684 .proto \u6587\u4ef6\u3002\u6bd4\u5982\u4e00\u4e2a\u901a\u7528\u7684\u6d88\u606f\u8f6c\u53d1\u4e2d\u95f4\u4ef6\uff0c\u5b83\u4e0d\u53ef\u80fd\u9884\u77e5\u9700\u8981\u5904\u7406\u600e\u6837\u7684\u6d88\u606f\u3002\u8fd9\u9700\u8981\u52a8\u6001\u7f16\u8bd1 .proto \u6587\u4ef6\uff0c\u5e76\u4f7f\u7528\u5176\u4e2d\u7684 Message \u3002 Protobuf \u63d0\u4f9b\u4e86 google::protobuf::compiler \u5305\u6765\u5b8c\u6210\u52a8\u6001\u7f16\u8bd1\u7684\u529f\u80fd\u3002\u4e3b\u8981\u7684\u7c7b\u53eb\u505a importer \uff0c\u5b9a\u4e49\u5728 importer.h \u4e2d\u3002\u4f7f\u7528 Importer \u975e\u5e38\u7b80\u5355\uff0c\u4e0b\u56fe\u5c55\u793a\u4e86\u4e0e Import \u548c\u5176\u5b83\u51e0\u4e2a\u91cd\u8981\u7684\u7c7b\u7684\u5173\u7cfb\u3002 Import \u7c7b\u5bf9\u8c61\u4e2d\u5305\u542b\u4e09\u4e2a\u4e3b\u8981\u7684\u5bf9\u8c61\uff0c\u5206\u522b\u4e3a\u5904\u7406\u9519\u8bef\u7684 MultiFileErrorCollector \u7c7b\uff0c\u5b9a\u4e49 .proto \u6587\u4ef6\u6e90\u76ee\u5f55\u7684 SourceTree \u7c7b\u3002 google :: protobuf :: compiler :: MultiFileErrorCollector errorCollector \uff1b google :: protobuf :: compiler :: DiskSourceTree sourceTree ; google :: protobuf :: compiler :: Importer importer ( & sourceTree , & errorCollector ); sourceTree . MapPath ( \"\" , protosrc ); importer . import ( \"lm.helloworld.proto\" ); \u9996\u5148\u6784\u9020\u4e00\u4e2a importer \u5bf9\u8c61\u3002\u6784\u9020\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u5165\u53e3\u53c2\u6570\uff0c\u4e00\u4e2a\u662f sourceTree \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u6307\u5b9a\u4e86\u5b58\u653e .proto \u6587\u4ef6\u7684\u6e90\u76ee\u5f55\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a error collector \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u6709\u4e00\u4e2a AddError \u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u89e3\u6790 .proto \u6587\u4ef6\u65f6\u9047\u5230\u7684\u8bed\u6cd5\u9519\u8bef\u3002\u4e4b\u540e\uff0c\u9700\u8981\u52a8\u6001\u7f16\u8bd1\u4e00\u4e2a .proto \u6587\u4ef6\u65f6\uff0c\u53ea\u9700\u8c03\u7528 importer \u5bf9\u8c61\u7684 import \u65b9\u6cd5\u3002\u975e\u5e38\u7b80\u5355\u3002 \u5982\u4f55\u4f7f\u7528\u52a8\u6001\u7f16\u8bd1\u540e\u7684 Message \u5462\uff1f Package google::protobuf::compiler \u4e2d\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u7c7b\uff0c\u7528\u6765\u8868\u793a\u4e00\u4e2a .proto \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684 message \uff0c\u4ee5\u53ca Message \u4e2d\u7684 field \uff0c\u5982\u56fe\u6240\u793a\u3002 \u7c7b FileDescriptor \u8868\u793a\u4e00\u4e2a\u7f16\u8bd1\u540e\u7684 .proto \u6587\u4ef6\uff1b\u7c7b Descriptor \u5bf9\u5e94\u8be5\u6587\u4ef6\u4e2d\u7684\u4e00\u4e2a Message \uff1b\u7c7b FieldDescriptor \u63cf\u8ff0\u4e00\u4e2a Message \u4e2d\u7684\u4e00\u4e2a\u5177\u4f53 Field \u3002 \u6bd4\u5982\u7f16\u8bd1\u5b8c lm.helloworld.proto \u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u4ee3\u7801\u5f97\u5230 lm.helloworld.id \u7684\u5b9a\u4e49\uff1a const protobuf :: Descriptor * desc = importer_ . pool () -> FindMessageTypeByName ( \u201c lm . helloworld \u201d ); const protobuf :: FieldDescriptor * field = desc -> pool () -> FindFileByName ( \u201c id \u201d ); \u901a\u8fc7 Descriptor \uff0c FieldDescriptor \u7684\u5404\u79cd\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u83b7\u5f97\u5404\u79cd\u5173\u4e8e Message \u5b9a\u4e49\u7684\u4fe1\u606f\u3002\u6bd4\u5982\u901a\u8fc7 field->name() \u5f97\u5230 field \u7684\u540d\u5b57\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u52a8\u6001\u5b9a\u4e49\u7684\u6d88\u606f\u4e86\u3002","title":"\u52a8\u6001\u7f16\u8bd1"},{"location":"Transfer%20Learning/","text":"Transfer Learning in Natural Language Processing \u00b6 Sebastian Ruder: Transfer Learning in Open-Source Natural Language Processing (spaCy IRL 2019) The State of Transfer Learning in NLP Transfer Learning in Natural Language Processing Tutorial Follow along with the tutorial: Slides: http://tiny.cc/NAACLTransfer Colab: http://tiny.cc/NAACLTransferColab Code: http://tiny.cc/NAACLTransferCode What is transfer learning ? Pan and Yang (2010) \u5728\u8bb8\u591a\u673a\u5668\u5b66\u4e60\u548c\u6570\u636e\u6316\u6398\u7b97\u6cd5\u4e2d\uff0c\u4e00\u4e2a\u4e3b\u8981\u7684\u5047\u8bbe\u662f\u8bad\u7ec3\u548c\u672a\u6765\u7684\u6570\u636e\u5fc5\u987b\u5728\u76f8\u540c\u7684\u7279\u5f81\u7a7a\u95f4\u4e2d\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u7684\u5206\u5e03\u3002\u7136\u800c\uff0c\u5728\u8bb8\u591a\u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u79cd\u5047\u8bbe\u53ef\u80fd\u4e0d\u6210\u7acb\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u65f6\u5728\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\u4e2d\u6709\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u5728\u53e6\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\u4e2d\u6709\u8db3\u591f\u7684\u8bad\u7ec3\u6570\u636e\uff0c\u5e76\u4e14\u540e\u8005\u53ef\u80fd\u4f4d\u4e8e\u4e0d\u540c\u7684\u7279\u5f81\u7a7a\u95f4\u6216\u9075\u5faa\u4e0d\u540c\u7684\u6570\u636e\u5206\u5e03\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6210\u529f\u5730\u8fdb\u884c\u77e5\u8bc6\u8f6c\u79fb\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u6602\u8d35\u7684\u6570\u636e\u6807\u8bb0\u5de5\u4f5c\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u5b66\u4e60\u6027\u80fd\u3002\u8fd1\u5e74\u6765\uff0c\u8fc1\u79fb\u5b66\u4e60\u4f5c\u4e3a\u4e00\u79cd\u65b0\u7684\u5b66\u4e60\u6846\u67b6\u5e94\u8fd0\u800c\u751f\u3002\u672c\u7814\u7a76\u7684\u91cd\u70b9\u662f\u5206\u7c7b\u548c\u56de\u987e\u76ee\u524d\u8fc1\u79fb\u5b66\u4e60\u5728\u5206\u7c7b\u3001\u56de\u5f52\u548c\u805a\u7c7b\u95ee\u9898\u4e0a\u7684\u8fdb\u5c55\u3002\u5728\u672c\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u8fc1\u79fb\u5b66\u4e60\u4e0e\u5176\u4ed6\u76f8\u5173\u673a\u5668\u5b66\u4e60\u6280\u672f\u7684\u5173\u7cfb\uff0c\u5982\u9886\u57df\u9002\u5e94\u3001\u591a\u4efb\u52a1\u5b66\u4e60\u3001\u6837\u672c\u9009\u62e9\u504f\u5dee\u4ee5\u53ca\u534f\u53d8\u91cf\u504f\u79fb\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u63a2\u8ba8\u4e86\u8fc1\u79fb\u5b66\u4e60\u7814\u7a76\u4e2d\u4e00\u4e9b\u6f5c\u5728\u7684\u672a\u6765\u95ee\u9898\u3002 Why transfer learning in NLP ? \u8bb8\u591aNLP\u4efb\u52a1\u5171\u4eab\u5173\u4e8e\u8bed\u8a00\u7684\u5171\u540c\u77e5\u8bc6(\u4f8b\u5982\u8bed\u8a00\u8868\u793a\u3001\u7ed3\u6784\u76f8\u4f3c\u6027) \u53ef\u4ee5\u8de8\u4efb\u52a1\u5171\u4eab\u7684\u4e0d\u540c\u5c42\u6b21\u7684\u542b\u4e49\u548c\u7ed3\u6784\u7684\u8868\u793a \u4efb\u52a1\u4e4b\u95f4\u53ef\u4ee5\u4e92\u901a\u6709\u65e0\u2014\u2014\u4f8b\u5982\u8bed\u6cd5\u548c\u8bed\u4e49 \u5e26\u6ce8\u91ca\u7684\u6570\u636e\u5f88\u5c11\u89c1\uff0c\u5c3d\u53ef\u80fd\u591a\u5730\u5229\u7528\u76d1\u7763\u5b66\u4e60 \u7ecf\u9a8c\u4e0a\u770b\uff0c\u8fc1\u79fb\u5b66\u4e60\u4fc3\u6210\u4e86\u8bb8\u591a\u6709\u76d1\u7763\u7684 NLP \u4efb\u52a1\u7684 SOTA (\u5982\u5206\u7c7b\u3001\u4fe1\u606f\u63d0\u53d6\u3001\u95ee\u7b54\u7b49)\u3002 Why transfer learning in NLP? (Empirically) Types of transfer learning in NLP What this tutorial is about and what it\u2019s not about \u76ee\u6807\uff1a\u63d0\u4f9bNLP\u4e2d\u8f6c\u79fb\u65b9\u6cd5\u7684\u5e7f\u6cdb\u6982\u8ff0\uff0c\u91cd\u70b9\u4ecb\u7ecd\u622a\u81f3\u76ee\u524d(2019\u5e74\u5e74\u4e2d)\u6700\u6210\u529f\u7684\u7ecf\u9a8c\u65b9\u6cd5\u3002 \u63d0\u4f9b\u5b9e\u7528\u7684\uff0c\u52a8\u624b\u7684\u5efa\u8bae\u2192\u5728\u6559\u7a0b\u7ed3\u675f\u65f6\uff0c\u6bcf\u4e2a\u4eba\u90fd\u6709\u80fd\u529b\u5e94\u7528\u6700\u65b0\u7684\u8fdb\u5c55\u5230\u6587\u672c\u5206\u7c7b\u4efb\u52a1 \u8fd9\u4e0d\u662f\u4ec0\u4e48\uff1a\u5168\u9762\u7684(\u4e0d\u53ef\u80fd\u5728\u4e00\u4e2a\u6559\u7a0b\u4e2d\u6db5\u76d6\u6240\u6709\u76f8\u5173\u7684\u8bba\u6587\uff01) (Bender Rule\uff1a\u672c\u6559\u7a0b\u4e3b\u8981\u9488\u5bf9\u7528\u82f1\u8bed\u5b8c\u6210\u7684\u5de5\u4f5c\uff0c\u5bf9\u5176\u4ed6\u8bed\u8a00\u7684\u53ef\u6269\u5c55\u6027\u53d6\u51b3\u4e8e\u6570\u636e\u548c\u8d44\u6e90\u7684\u53ef\u7528\u6027\u3002) 1. Introduction \u00b6 Sequential transfer learning \u6307\u7684\u662f\u5728\u4e00\u4e2a\u4efb\u52a1/\u6570\u636e\u96c6\u4e0a\u5b66\u4e60\u540e\u8fc1\u79fb\u5230\u5176\u4ed6\u4efb\u52a1/\u6570\u636e\u96c6\u4e0a\u3002 Pretraining tasks and datasets Unlabeled data and self-supervision \u5f88\u5bb9\u6613\u6536\u96c6\u975e\u5e38\u5927\u7684\u8bed\u6599\u5e93\uff1a\u7ef4\u57fa\u767e\u79d1\uff0c\u65b0\u95fb\uff0c\u7f51\u9875\u6293\u53d6\uff0c\u793e\u4ea4\u5a92\u4f53\u7b49\u3002 \u5229\u7528\u5206\u5e03\u5047\u8bbe\u8fdb\u884c\u8bad\u7ec3\uff1a\u201cYou shall know a word by the company it keeps\u201d(Firth, 1957)\uff0c\u901a\u5e38\u5f62\u5f0f\u5316\u4e3a\u8bad\u7ec3\u67d0\u79cd\u8bed\u8a00\u6a21\u578b\u7684\u53d8\u4f53 \u5173\u6ce8\u4f7f\u7528\u6709\u6548\u7684\u7b97\u6cd5\u4ee5\u5229\u7528\u4e30\u5bcc\u7684\u6570\u636e Supervised pretraining \u5728\u89c6\u89c9\u9886\u57df\u5f88\u5e38\u89c1\uff0c\u4f46\u7531\u4e8e\u7f3a\u4e4f\u5927\u578b\u76d1\u7763\u6570\u636e\u96c6\uff0c\u5728NLP\u4e2d\u8f83\u5c11 \u673a\u5668\u7ffb\u8bd1 NLI\u7528\u4e8e\u53e5\u5b50\u8868\u793a \u4efb\u52a1\u7279\u5b9a\u2014\u2014\u4ece\u4e00\u4e2a\u95ee\u7b54\u6570\u636e\u96c6\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a Target tasks and datasets \u76ee\u6807\u4efb\u52a1\u901a\u5e38\u662f\u76d1\u7763\u7684\uff0c\u5e76\u8de8\u8d8a\u4e00\u7cfb\u5217\u5e38\u89c1\u7684NLP\u4efb\u52a1: \u53e5\u5b50\u6216\u6587\u6863\u5206\u7c7b(\u4f8b\u5982\u60c5\u7eea) \u53e5\u5b50\u5bf9\u5206\u7c7b(\u5982NLI\uff0c\u89e3\u91ca) \u5355\u8bcd\u7ea7\u522b(\u5982\u5e8f\u5217\u6807\u6ce8\u3001\u62bd\u53d6\u95ee\u7b54) \u7ed3\u6784\u5316\u9884\u6d4b(\u4f8b\u5982\u89e3\u6790) \u751f\u6210(\u4f8b\u5982\u5bf9\u8bdd\u3001\u603b\u7ed3) Major themes: LM pretraining \u8bb8\u591a\u6210\u529f\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\u90fd\u662f\u57fa\u4e8e\u8bed\u8a00\u6a21\u578b\u7684 \u975e\u6b63\u5f0f\u5730\uff0c\u8bed\u8a00\u6a21\u578b\u5b66\u4e60 \\(P_{\\theta}(\\text { text }) \\text { or } P_{\\theta}(\\text { text } | \\text { some other text })\\) \u4e0d\u9700\u8981\u4eba\u5de5\u6ce8\u91ca \u8bb8\u591a\u8bed\u8a00\u90fd\u6709\u8db3\u591f\u7684\u6587\u672c\u6765\u5b66\u4e60\u9ad8\u5bb9\u91cf\u6a21\u578b \u8bed\u8a00\u6a21\u578b\u662f\u201c\u591a\u624d\u591a\u827a\u201d\u7684\u2014\u2014\u53ef\u4ee5\u5b66\u4e60\u53e5\u5b50\u548c\u5355\u8bcd\u7684\u8868\u793a\uff0c\u5177\u6709\u591a\u79cd\u76ee\u6807\u51fd\u6570 Major themes: From shallow to deep Bengio et al 2003 : A Neural Probabilistic Language Model Devlin et al 2019: BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding Major themes: pretraining vs target task \u9884\u8bad\u7ec3\u7684\u9009\u62e9\u548c\u76ee\u6807\u4efb\u52a1\u662f\u8026\u5408\u7684 \u53e5\u5b50/\u6587\u6863\u8868\u793a\u5bf9\u5355\u8bcd\u7ea7\u522b\u7684\u9884\u6d4b\u6ca1\u6709\u5e2e\u52a9 \u8bcd\u5411\u91cf\u53ef\u4ee5\u8de8\u4e0a\u4e0b\u6587\u805a\u5408\uff0c\u4f46\u901a\u5e38\u4f1a\u88ab\u5176\u4ed6\u65b9\u6cd5\u8d85\u8d8a \u5728\u8bed\u5883\u8bcd\u5411\u91cf\u4e2d\uff0c\u53cc\u5411\u8bed\u5883\u975e\u5e38\u91cd\u8981 \u901a\u5e38 \u76f8\u4f3c\u7684\u9884\u8bad\u7ec3\u548c\u76ee\u6807\u4efb\u52a1 \u2192 \u6700\u597d\u7ed3\u679c 2. Pretraining \u00b6 LM pretraining \u00b6 word2vec \u4ee5 CBOW \u4e3a\u4f8b\uff0c\u8f93\u5165\u5c42\u5c06\u76ee\u6807\u8bcd\u8bed\u5883 c \u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7b80\u5355\u6c42\u548c\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u6c42\u5e73\u5747\uff09\u540e\u5f97\u5230\u8bed\u5883\u5411\u91cf\uff0c\u7136\u540e\u76f4\u63a5\u4e0e\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u6c42\u70b9\u79ef\uff0c\u76ee\u6807\u51fd\u6570\u4e5f\u5c31\u662f\u8981\u8ba9\u8fd9\u4e2a\u4e0e\u76ee\u6807\u8bcd\u5411\u91cf\u7684\u70b9\u79ef\u53d6\u5f97\u6700\u5927\u503c\uff0c\u5bf9\u5e94\u7684\u4e0e\u975e\u76ee\u6807\u8bcd\u7684\u70b9\u79ef\u5c3d\u91cf\u53d6\u5f97\u6700\u5c0f\u503c\u3002 word2vec \u7684\u51fa\u73b0\uff0c\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u7684\u53d1\u5c55\uff0c\u5c24\u5176\u662f\u4fc3\u8fdb\u4e86\u6df1\u5ea6\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u5e94\u7528\uff08\u4e0d\u8fc7\u6709\u610f\u601d\u7684\u662f\uff0cword2vec \u7b97\u6cd5\u672c\u8eab\u5176\u5b9e\u5e76\u4e0d\u662f\u4e00\u4e2a\u6df1\u5ea6\u6a21\u578b\uff0c\u5b83\u53ea\u6709\u4e24\u5c42\u5168\u8fde\u63a5\uff09\uff0c \u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u8bcd\u5411\u91cf\u6765\u521d\u59cb\u5316\u7f51\u7edc\u7ed3\u6784\u7684\u7b2c\u4e00\u5c42\u51e0\u4e4e\u5df2\u7ecf\u6210\u4e86\u6807\u914d\uff0c\u5c24\u5176\u662f\u5728\u53ea\u6709\u5c11\u91cf\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u62ff\u9884\u8bad\u7ec3\u7684 embedding \u521d\u59cb\u5316\u7b2c\u4e00\u5c42\uff0c\u51e0\u4e4e\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u5728\u86ee\u5e72\u3002 Skip-Thought \u501f\u9274 Skip-gram \u7684\u601d\u60f3\uff0c Skip-thoughts \u76f4\u63a5\u5728\u53e5\u5b50\u95f4\u8fdb\u884c\u9884\u6d4b\uff0c\u4e5f\u5c31\u662f\u5c06 Skip-gram \u4e2d\u4ee5\u8bcd\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u66ff\u6362\u6210\u4e86\u4ee5\u53e5\u5b50\u4e3a\u57fa\u672c\u5355\u4f4d \uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u9009\u5b9a\u4e00\u4e2a\u7a97\u53e3\uff0c\u904d\u5386\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u7136\u540e\u5206\u522b\u5229\u7528\u5f53\u524d\u53e5\u5b50\u53bb\u9884\u6d4b\u548c\u8f93\u51fa\u5b83\u7684\u4e0a\u4e00\u53e5\u548c\u4e0b\u4e00\u53e5\u3002 \u4e0d\u8fc7\u548c\u666e\u901a\u6846\u67b6\u4e0d\u4e00\u6837\u7684\u662f\uff0cSkip-thoughts\u6709\u4e24\u4e2aDecoder\u3002\u5728\u4eca\u5929\u770b\u6765\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u6709\u5f88\u591a\u4e0d\u5b8c\u5584\u6216\u8005\u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff08\u4f5c\u8005\u4e5f\u5728\u8bba\u6587\u4e2d\u5206\u522b\u63d0\u5230\u4e86\u8fd9\u4e9bfuture works\uff09\uff0c\u6bd4\u5982\u8f93\u5165\u7684Encoder\u53ef\u4ee5\u5f15\u5165attention\u673a\u5236\uff0c\u4ece\u800c\u8ba9Decoder\u7684\u8f93\u5165\u4e0d\u518d\u53ea\u662f\u4f9d\u8d56Encoder\u6700\u540e\u4e00\u4e2a\u65f6\u523b\u7684\u8f93\u51fa\uff1bEncoder\u548cDecoder\u53ef\u4ee5\u5229\u7528\u66f4\u6df1\u5c42\u7684\u7ed3\u6784\uff1bDecoder\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6269\u5927\uff0c\u53ef\u4ee5\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u66f4\u591a\u7684\u53e5\u5b50\uff1bRNN\u4e5f\u4e0d\u662f\u552f\u4e00\u7684\u9009\u62e9\uff0c\u8bf8\u5982CNN\u4ee5\u53ca2017\u5e74\u8c37\u6b4c\u63d0\u51fa\u7684Transformer\u7684\u7ed3\u6784\u4e5f\u53ef\u4ee5\u5229\u7528\u8fdb\u6765\uff0c\u540e\u6765\u679c\u4e0d\u5176\u7136\u8c37\u6b4c\u7684BERT\u4fbf\u501f\u9274\u4e86\u8fd9\u4e00\u601d\u8def\u3002 Quick-thoughts \u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u5c06\u751f\u6210\u4efb\u52a1\u6539\u4e3a\u5206\u7c7b\u4efb\u52a1\u3002\u5177\u4f53\u8bf4\u6765\u5c31\u662f\u628a\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u6b63\u4f8b\uff0c\u628a\u4e0d\u662f\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u8d1f\u4f8b\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u8f93\u5165\u6a21\u578b\uff0c\u8ba9\u6a21\u578b\u5224\u65ad\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u662f\u5426\u662f\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002 \u53ef\u4ee5\u8bf4\uff0c\u4ec5\u4ec5\u51e0\u4e2a\u6708\u4e4b\u540e\u7684BERT\u6b63\u662f\u5229\u7528\u7684\u8fd9\u79cd\u601d\u8def\u3002\u800c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u548cSkip-thoughts\u4e00\u8109\u76f8\u627f\u3002 ELMo word2vec \u6700\u663e\u8457\u7684\u95ee\u9898\u662f\u591a\u4e49\u8bcd\u95ee\u9898\uff0c13 \u5e74\u63d0\u51fa\u540e\u6709\u5f88\u591a\u65b9\u6cd5\u8bd5\u56fe\u89e3\u51b3\u591a\u4e49\u8bcd\u95ee\u9898\uff0c\u4f46\u90fd\u6210\u672c\u592a\u9ad8\u6216\u8005\u592a\u7e41\u7410\u4e86\u3002 \u300aDeep contextualized word representations\u300b\u4e00\u6587\u63d0\u51fa\u4e86 ELMo\uff0c\u57fa\u672c\u6846\u67b6\u662f2-stacked biLSTM + Residual\u7684\u7ed3\u6784 \u4f7f\u7528\u8fd9\u4e2a\u7f51\u7edc\u7ed3\u6784\u5229\u7528\u5927\u91cf\u8bed\u6599\u505a\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u5c31\u80fd\u9884\u5148\u8bad\u7ec3\u597d\u8fd9\u4e2a\u7f51\u7edc\uff0c\u5982\u679c\u8bad\u7ec3\u597d\u8fd9\u4e2a\u7f51\u7edc\u540e\uff0c\u8f93\u5165\u4e00\u4e2a\u65b0\u53e5\u5b50\uff0c\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u90fd\u80fd\u5f97\u5230\u5bf9\u5e94\u7684\u4e09\u4e2aEmbedding:\u6700\u5e95\u5c42\u662f\u5355\u8bcd\u7684Word Embedding\uff0c\u5f80\u4e0a\u8d70\u662f\u7b2c\u4e00\u5c42\u53cc\u5411LSTM\u4e2d\u5bf9\u5e94\u5355\u8bcd\u4f4d\u7f6e\u7684Embedding\uff0c\u8fd9\u5c42\u7f16\u7801\u5355\u8bcd\u7684\u53e5\u6cd5\u4fe1\u606f\u66f4\u591a\u4e00\u4e9b\uff1b\u518d\u5f80\u4e0a\u8d70\u662f\u7b2c\u4e8c\u5c42LSTM\u4e2d\u5bf9\u5e94\u5355\u8bcd\u4f4d\u7f6e\u7684Embedding\uff0c\u8fd9\u5c42\u7f16\u7801\u5355\u8bcd\u7684\u8bed\u4e49\u4fe1\u606f\u66f4\u591a\u4e00\u4e9b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cELMO\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u4e0d\u4ec5\u4ec5\u5b66\u4f1a\u5355\u8bcd\u7684Word Embedding\uff0c\u8fd8\u5b66\u4f1a\u4e86\u4e00\u4e2a\u53cc\u5c42\u53cc\u5411\u7684LSTM\u7f51\u7edc\u7ed3\u6784\uff0c\u800c\u8fd9\u4e24\u8005\u540e\u9762\u90fd\u6709\u7528\u3002 \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u53ef\u4ee5\u6839\u636e\u4e0b\u9762\u7684\u5f0f\u5b50\u5f97\u5230\u5b83\u7684\u5411\u91cf\uff0c\u5176\u4e2d \u03b3 \u662f\u4e00\u4e2ascale\u56e0\u5b50\uff0c\u52a0\u5165\u8fd9\u4e2a\u56e0\u5b50\u4e3b\u8981\u662f\u60f3\u8981\u5c06ELMo\u7684\u5411\u91cf\u4e8e\u5177\u4f53\u4efb\u52a1\u7684\u5411\u91cf\u5206\u5e03\u62c9\u5e73\u5230\u540c\u4e00\u4e2a\u5206\u5e03\u6c34\u5e73\uff0c\u8fd9\u4e2a\u65f6\u5019\u4fbf\u9700\u8981\u8fd9\u4e48\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u4e86\u3002\u53e6\u5916\uff0c \\(s_j\\) \u4fbf\u662f\u9488\u5bf9\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u5229\u7528\u4e00\u4e2asoftmax\u7684\u53c2\u6570\u6765\u5b66\u4e60\u4e0d\u540c\u5c42\u7684\u6743\u503c\u53c2\u6570\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u9700\u8981\u7684\u8bcd\u8bed\u610f\u4e49\u7684\u7c92\u5ea6\u4e5f\u4e0d\u4e00\u81f4\uff0c\u4e00\u822c\u8ba4\u4e3a\u6d45\u5c42\u7684\u8868\u5f81\u6bd4\u8f83\u503e\u5411\u4e8e\u53e5\u6cd5\uff0c\u800c\u9ad8\u5c42\u8f93\u51fa\u7684\u5411\u91cf\u6bd4\u8f83\u503e\u5411\u4e8e\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u901a\u8fc7\u4e00\u4e2asoftmax\u7684\u7ed3\u6784\u8ba9\u4efb\u52a1\u81ea\u52a8\u53bb\u5b66\u4e60\u5404\u5c42\u4e4b\u95f4\u7684\u6743\u91cd\uff0c\u81ea\u7136\u4e5f\u662f\u6bd4\u8f83\u5408\u7406\u7684\u505a\u6cd5\u3002 \u6b64\u5916\uff0cELMo \u8fd8\u4f7f\u7528\u4e86\u300aExploring the Limits of Language Modeling\u300b\u4e2d\u63d0\u51fa\u7684 char-based CNN \u7ed3\u6784\uff0c\u5e94\u7528\u5230\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4e0a\uff0c\u51cf\u5c11\u4e86\u53c2\u6570\u89c4\u6a21\uff0c\u5e76\u89e3\u51b3\u4e86\u4ee4\u4eba\u5934\u75db\u7684 OOV \u95ee\u9898\u3002 ELMo \u4f7f\u7528LSTM \u800c\u4e0d\u662f Transformer \u4f5c\u4e3a\u7279\u5f81\u62bd\u53d6\u5668\uff0c\u800c\u5f88\u591a\u7814\u7a76\u5df2\u7ecf\u8bc1\u660e\u4e86Transformer\u63d0\u53d6\u7279\u5f81\u7684\u80fd\u529b\u662f\u8981\u8fdc\u5f3a\u4e8eLSTM\u7684\uff1b\u53e6\u5916\uff0cELMO\u91c7\u53d6\u53cc\u5411\u62fc\u63a5\u8fd9\u79cd\u878d\u5408\u7279\u5f81\u7684\u80fd\u529b\u53ef\u80fd\u6bd4Bert\u4e00\u4f53\u5316\u7684\u878d\u5408\u7279\u5f81\u65b9\u5f0f\u5f31\uff0c\u4f46\u662f\uff0c\u8fd9\u53ea\u662f\u4e00\u79cd\u4ece\u9053\u7406\u63a8\u65ad\u4ea7\u751f\u7684\u6000\u7591\uff0c\u76ee\u524d\u5e76\u6ca1\u6709\u5177\u4f53\u5b9e\u9a8c\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002 ELMo \u4ee3\u8868\u7740\u57fa\u4e8e\u7279\u5f81\u878d\u5408\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\uff0c\u800c GPT \u5219\u662f\u57fa\u4e8eFine-tuning\u7684\u6a21\u5f0f\u7684\u5f00\u521b\u8005\u3002 GPT GPT\u4e5f\u91c7\u7528\u4e24\u9636\u6bb5\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u662f\u5229\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u7b2c\u4e8c\u9636\u6bb5\u901a\u8fc7Fine-tuning\u7684\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u4e0b\u56fe\u5c55\u793a\u4e86GPT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\uff08\u6309\u7167\u8bba\u6587\u4e2d\u7684\u8bf4\u6cd5\uff0cGPT\u4e2d\u4f7f\u7528\u7684Transformer\u662f\u53ea\u7528\u4e86Decoder\uff09\uff0c\u5176\u5b9e\u548cELMO\u662f\u7c7b\u4f3c\u7684\uff0c\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u4e24\u70b9\uff1a\u9996\u5148\uff0c\u7279\u5f81\u62bd\u53d6\u5668\u4e0d\u662f\u7528\u7684RNN\uff0c\u800c\u662f\u7528\u7684Transformer\uff0c\u4e0a\u9762\u63d0\u5230\u8fc7\u5b83\u7684\u7279\u5f81\u62bd\u53d6\u80fd\u529b\u8981\u5f3a\u4e8eRNN\uff0c\u8fd9\u4e2a\u9009\u62e9\u5f88\u660e\u663e\u662f\u5f88\u660e\u667a\u7684\uff1b\u5176\u6b21\uff0cGPT\u7684\u9884\u8bad\u7ec3\u867d\u7136\u4ecd\u7136\u662f\u4ee5\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a\u76ee\u6807\u4efb\u52a1\uff0c\u4f46\u662f\u91c7\u7528\u7684\u662f\u5355\u5411\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u6240\u8c13\u201c\u5355\u5411\u201d\u7684\u542b\u4e49\u662f\u6307\uff1a\u8bed\u8a00\u6a21\u578b\u8bad\u7ec3\u7684\u4efb\u52a1\u76ee\u6807\u662f\u6839\u636e\u5355\u8bcd\u7684\u4e0a\u4e0b\u6587\u53bb\u6b63\u786e\u9884\u6d4b\u5355\u8bcd \uff0cGPT\u5219\u53ea\u91c7\u7528\u8fd9\u4e2a\u5355\u8bcd\u7684\u4e0a\u6587\u6765\u8fdb\u884c\u9884\u6d4b\uff0c\u800c\u629b\u5f00\u4e86\u4e0b\u6587\u3002 \u4e0b\u6e38\u4efb\u52a1\u600e\u4e48\u4f7f\u7528 GPT \u5462\uff1f\u9996\u5148\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u4e0b\u6e38\u4efb\u52a1\u6765\u8bf4\uff0c\u672c\u6765\u4f60\u53ef\u4ee5\u4efb\u610f\u8bbe\u8ba1\u81ea\u5df1\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u73b0\u5728\u4e0d\u884c\u4e86\uff0c\u4f60\u8981\u5411GPT\u7684\u7f51\u7edc\u7ed3\u6784\u770b\u9f50\uff0c\u628a\u4efb\u52a1\u7684\u7f51\u7edc\u7ed3\u6784\u6539\u9020\u6210\u548cGPT\u7684\u7f51\u7edc\u7ed3\u6784\u662f\u4e00\u6837\u7684\u3002\u7136\u540e\uff0c\u5728\u505a\u4e0b\u6e38\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u5229\u7528\u7b2c\u4e00\u6b65\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\u521d\u59cb\u5316GPT\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u8fd9\u6837\u901a\u8fc7\u9884\u8bad\u7ec3\u5b66\u5230\u7684\u8bed\u8a00\u5b66\u77e5\u8bc6\u5c31\u88ab\u5f15\u5165\u5230\u4f60\u624b\u5934\u7684\u4efb\u52a1\u91cc\u6765\u4e86\uff0c\u8fd9\u662f\u4e2a\u975e\u5e38\u597d\u7684\u4e8b\u60c5\u3002\u518d\u6b21\uff0c\u4f60\u53ef\u4ee5\u7528\u624b\u5934\u7684\u4efb\u52a1\u53bb\u8bad\u7ec3\u8fd9\u4e2a\u7f51\u7edc\uff0c\u5bf9\u7f51\u7edc\u53c2\u6570\u8fdb\u884cFine-tuning\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u7f51\u7edc\u66f4\u9002\u5408\u89e3\u51b3\u624b\u5934\u7684\u95ee\u9898\u3002 \u5bf9\u4e8eNLP\u5404\u79cd\u82b1\u6837\u7684\u4e0d\u540c\u4efb\u52a1\uff0c\u600e\u4e48\u6539\u9020\u624d\u80fd\u9760\u8fd1GPT\u7684\u7f51\u7edc\u7ed3\u6784\u5462\uff1f GPT\u8bba\u6587\u7ed9\u4e86\u4e00\u4e2a\u6539\u9020\u65bd\u5de5\u56fe\u5982\u4e0a\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff1a\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0d\u7528\u600e\u4e48\u52a8\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\u5373\u53ef\uff1b\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u95ee\u9898\uff0c\u6bd4\u5982Entailment\uff0c\u4e24\u4e2a\u53e5\u5b50\u4e2d\u95f4\u518d\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\uff1b\u5bf9\u6587\u672c\u76f8\u4f3c\u6027\u5224\u65ad\u95ee\u9898\uff0c\u628a\u4e24\u4e2a\u53e5\u5b50\u987a\u5e8f\u98a0\u5012\u4e0b\u505a\u51fa\u4e24\u4e2a\u8f93\u5165\u5373\u53ef\uff0c\u8fd9\u662f\u4e3a\u4e86\u544a\u8bc9\u6a21\u578b\u53e5\u5b50\u987a\u5e8f\u4e0d\u91cd\u8981\uff1b\u5bf9\u4e8e\u591a\u9879\u9009\u62e9\u95ee\u9898\uff0c\u5219\u591a\u8def\u8f93\u5165\uff0c\u6bcf\u4e00\u8def\u628a\u6587\u7ae0\u548c\u7b54\u6848\u9009\u9879\u62fc\u63a5\u4f5c\u4e3a\u8f93\u5165\u5373\u53ef\u3002\u4ece\u4e0a\u56fe\u53ef\u770b\u51fa\uff0c\u8fd9\u79cd\u6539\u9020\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4e0d\u540c\u4efb\u52a1\u53ea\u9700\u8981\u5728\u8f93\u5165\u90e8\u5206\u65bd\u5de5\u5373\u53ef\u3002 BERT Bert \u91c7\u7528\u548cGPT\u5b8c\u5168\u76f8\u540c\u7684\u4e24\u9636\u6bb5\u6a21\u578b\uff0c\u9996\u5148\u662f\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\uff1b\u5176\u6b21\u662f\u4f7f\u7528Fine-Tuning\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u548cGPT\u7684\u6700\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u91c7\u7528\u4e86\u7c7b\u4f3cELMO\u7684\u53cc\u5411\u8bed\u8a00\u6a21\u578b\uff0c\u5f53\u7136\u53e6\u5916\u4e00\u70b9\u662f\u8bed\u8a00\u6a21\u578b\u7684\u6570\u636e\u89c4\u6a21\u8981\u6bd4GPT\u5927\u3002 BERT\u6700\u4e3b\u8981\u7684\u51e0\u4e2a\u7279\u5f81\u5206\u522b\u662f \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684Transformer \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684Mask-LM(Mask-Language Model) \u5229\u7528Next Sentence Prediction\u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86GPT\u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97BERT\u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1 \u9884\u8bad\u7ec3\u9636\u6bb5 \u56e0\u4e3aEncoder\u4e2d\u7528\u4e86Self-attention\u673a\u5236\uff0c\u800c\u8fd9\u4e2a\u673a\u5236\u4f1a\u5c06\u6bcf\u4e00\u4e2a\u8bcd\u5728\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5f97\u5230\u65b0\u7684\u8868\u5f81\uff0c\u66f4\u901a\u4fd7\u7684\u8bf4\u6cd5\u662f\u6bcf\u4e00\u4e2a\u8bcd\u5728\u7ecf\u8fc7Self-attention\u4e4b\u540e\uff0c\u5176\u65b0\u7684\u8868\u5f81\u5c06\u4f1a\u662f\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\uff08\u5f53\u7136\u4e5f\u5305\u62ec\u5b83\u672c\u8eab\uff09\u7684\u52a0\u6743\u6c42\u548c\u3002\u5728ELMo\u4e0eGPT\u4e2d\uff0c\u5b83\u4eec\u5e76\u6ca1\u6709\u7528\u4e0a\u8fd9\u79cd\u4ea4\u878d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u5b83\u4eec\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u5355\u5411\u7684\u6a21\u578b\uff0cELMo\u7a0d\u5fae\u597d\u4e00\u70b9\uff0c\u5c06\u4e24\u4e2a\u5355\u5411\u6a21\u578b\u7684\u4fe1\u606fconcat\u8d77\u6765\uff0cGPT\u5219\u53ea\u7528\u4e86\u5355\u5411\u6a21\u578b\uff0c\u8fd9\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709\u7528\u4e0aTransformer Encoder\uff0c\u53ea\u7528\u4e86Decdoer\u7684\u5929\u751f\u57fa\u56e0\u51b3\u5b9a\u7684\uff0c\u5176\u5b9e\uff0c\u5f88\u591a\u4eba\u5c31\u628a\u8fd9\u79cdleft-to-right\u7684Transformer\u6846\u67b6\u53eb\u505aDecoder\uff0c\u56e0\u4e3a\u4e8b\u5b9e\u4e0aDecoder\u5c31\u662f\u5982\u6b64\uff08\u5177\u4f53\u505a\u7684\u65f6\u5019\u9700\u8981\u63d0\u524d\u628a\u672a\u6765\u5f85\u751f\u6210\u7684\u8bcd\u505a\u597dmask\uff0c\u7ec6\u8282\u4e0a\u901a\u8fc7\u4e0a\u4e09\u89d2\u77e9\u9635\u6765\u5b9e\u73b0\uff09\uff0c\u8fd9\u4e5f\u662fOpenAI\u628a\u4ed6\u4eec\u7684\u6a21\u578b\u53eb\u505a\"Generative\"\u7684\u539f\u56e0\u6240\u5728\u3002 Masked-LM \u53cc\u5411Transformer\u4e0b\u7684\u8bed\u8a00\u6a21\u578b \u7136\u800c\u5728\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u67d0\u4e2a\u8bcd\u7684\u4e0a\u4e0b\u6587\u8bed\u5883\u9884\u6d4b\u5f53\u524d\u8bcd\u7684\u6982\u7387\uff0c\u5982\u679c\u76f4\u63a5\u628a\u8fd9\u4e2a\u5957\u7528\u5230Transformer\u7684Encoder\u4e2d\uff0c\u4f1a\u53d1\u73b0\u5f85\u9884\u6d4b\u7684\u8f93\u51fa\u548c\u5e8f\u5217\u8f93\u5165\u5df2\u7ecf\u7cc5\u5408\u5728\u4e00\u5757\u4e86\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u89e3\u51b3Self-attention\u4e2d\u5e26\u6765\u4e86\u8868\u5f81\u6027\u80fd\u5353\u8d8a\u7684\u53cc\u5411\u673a\u5236\uff0c\u5374\u53c8\u540c\u65f6\u5e26\u6765\u4e86\u4fe1\u606f\u6cc4\u9732\u7684\u8fd9\u4e00\u95ee\u9898\uff1fBert \u53d7\u5230\u5b8c\u5f62\u586b\u7a7a\u4efb\u52a1\u7684\u542f\u53d1\uff1a\u8f93\u5165\u5e8f\u5217\u4f9d\u7136\u548c\u666e\u901aTransformer\u4fdd\u6301\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u628a\u6316\u6389\u7684\u4e00\u4e2a\u8bcd\u7528\"[MASK]\"\u66ff\u6362 \uff0cTransformer\u7684Encoder\u90e8\u5206\u6309\u6b63\u5e38\u8fdb\u884c\uff0c\u8f93\u51fa\u5c42\u5728\u88ab\u6316\u6389\u7684\u8bcd\u4f4d\u7f6e\uff0c\u63a5\u4e00\u4e2a\u5206\u7c7b\u5c42\u505a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5f97\u5230\u88abmask\u6389\u7684\u8bcd\u6982\u7387\u5927\u5c0f\u3002 \u76f4\u63a5\u628a\u666e\u901a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u751f\u6210\u95ee\u9898\uff08\u6b63\u5982GPT\u4e2d\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u751f\u6210\u95ee\u9898\u4e00\u6837\uff0c\u867d\u7136\u5176\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5e8f\u5217\u751f\u6210\u95ee\u9898\uff09\uff0c\u53d8\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5e76\u4e14\u4e5f\u76f4\u63a5\u89e3\u51b3\u4e86Encoder\u4e2d\u591a\u5c42Self-attention\u7684\u53cc\u5411\u673a\u5236\u5e26\u6765\u7684\u6cc4\u5bc6\u95ee\u9898\uff08\u5355\u5c42Self-attention\u662f\u771f\u53cc\u5411\uff0c\u4f46\u4e0d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff0c\u53ea\u6709\u591a\u5c42\u7d2f\u52a0\u7684Self-attention\u624d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff09\uff0c\u4f7f\u5f97\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u771f\u53cc\u5411\u673a\u5236\u53d8\u4e3a\u73b0\u5b9e\u3002 \u4e0d\u8fc7\uff0cBERT\u9488\u5bf9\u5982\u4f55\u505a\u201c[MASK]\u201d\uff0c\u505a\u4e86\u4e00\u4e9b\u66f4\u6df1\u5165\u7684\u7814\u7a76\uff0c\u5b83\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9009\u53d6\u8bed\u6599\u4e2d\u6240\u6709\u8bcd\u768415%\u8fdb\u884c\u968f\u673amask \u9009\u4e2d\u7684\u8bcd\u572880%\u7684\u6982\u7387\u4e0b\u88ab\u771f\u5b9emask \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u800c\u88ab\u968f\u673a\u66ff\u6362\u6210\u5176\u4ed6\u4e00\u4e2a\u8bcd \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u4ecd\u7136\u4fdd\u7559\u539f\u6765\u771f\u5b9e\u7684\u8bcd \u8fd9\u4f7f\u5f97Transformer\u7f16\u7801\u5668\u4e0d\u77e5\u9053\u5b83\u5c06\u88ab\u8981\u6c42\u9884\u6d4b\u54ea\u4e9b\u5355\u8bcd\u6216\u54ea\u4e9b\u5355\u8bcd\u5df2\u88ab\u968f\u673a\u5355\u8bcd\u66ff\u6362\uff0c\u56e0\u6b64\u5b83\u88ab\u8feb\u4fdd\u6301\u6bcf\u4e2a\u8f93\u5165\u6807\u8bb0\u7684\u5206\u5e03\u5f0f\u4e0a\u4e0b\u6587\u8868\u793a\u3002 Next Sentence Prediction \u5229\u7528\u548c\u501f\u9274\u4e86Skip-thoughts\u65b9\u6cd5\u4e2d\u7684\u53e5\u5b50\u9884\u6d4b\u95ee\u9898\uff0c\u6765\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u5177\u4f53\u505a\u6cd5\u5219\u662f\u5c06\u4e24\u4e2a\u53e5\u5b50\u7ec4\u5408\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u5f53\u7136\u7ec4\u5408\u65b9\u5f0f\u4f1a\u6309\u7167\u4e0b\u9762\u5c06\u8981\u4ecb\u7ecd\u7684\u65b9\u5f0f\uff0c\u7136\u540e\u8ba9\u6a21\u578b\u9884\u6d4b\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u662f\u5148\u540e\u8fd1\u90bb\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u4e5f\u5c31\u662f\u4f1a\u628a\"Next Sentence Prediction\"\u95ee\u9898\u5efa\u6a21\u6210\u4e3a\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\u3002\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u6570\u636e\u4e2d\u670950%\u7684\u60c5\u51b5\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5148\u540e\u5173\u7cfb\uff0c\u800c\u53e6\u591650%\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u968f\u673a\u4ece\u8bed\u6599\u4e2d\u51d1\u5230\u4e00\u8d77\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u5177\u5907\u5148\u540e\u5173\u7cfb\uff0c\u4ee5\u6b64\u6765\u6784\u9020\u8bad\u7ec3\u6570\u636e\u3002\u53e5\u5b50\u7ea7\u522b\u7684\u9884\u6d4b\u601d\u8def\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684Skip-thoughts\u57fa\u672c\u4e00\u81f4\uff0c\u5f53\u7136\u66f4\u672c\u8d28\u7684\u601d\u60f3\u6765\u6e90\u8fd8\u662f\u6765\u81ea\u4e8eword2vec\u4e2d\u7684skip-gram\u6a21\u578b\u3002 \u8981\u6c42\u6a21\u578b\u9664\u4e86\u505a\u4e0a\u8ff0\u7684Masked\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u5916\uff0c\u9644\u5e26\u518d\u505a\u4e2a\u53e5\u5b50\u5173\u7cfb\u9884\u6d4b\uff0c\u5224\u65ad\u7b2c\u4e8c\u4e2a\u53e5\u5b50\u662f\u4e0d\u662f\u771f\u7684\u662f\u7b2c\u4e00\u4e2a\u53e5\u5b50\u7684\u540e\u7eed\u53e5\u5b50\u3002\u4e4b\u6240\u4ee5\u8fd9\u4e48\u505a\uff0c\u662f\u8003\u8651\u5230\u5f88\u591aNLP\u4efb\u52a1\u662f\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\uff0c\u5355\u8bcd\u9884\u6d4b\u7c92\u5ea6\u7684\u8bad\u7ec3\u5230\u4e0d\u4e86\u53e5\u5b50\u5173\u7cfb\u8fd9\u4e2a\u5c42\u7ea7\uff0c\u589e\u52a0\u8fd9\u4e2a\u4efb\u52a1\u6709\u52a9\u4e8e\u4e0b\u6e38\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\u3002\u6240\u4ee5\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u7684\u9884\u8bad\u7ec3\u662f\u4e2a\u591a\u4efb\u52a1\u8fc7\u7a0b\u3002\u8fd9\u4e5f\u662fBert\u7684\u4e00\u4e2a\u521b\u65b0\u3002 \u5728\u9884\u8bad\u7ec3\u9636\u6bb5\uff0c\u56e0\u4e3a\u6709\u4e24\u4e2a\u4efb\u52a1\u9700\u8981\u8bad\u7ec3\uff1aMask-LM\u548cNext Sentence Prediction\uff0c\u56e0\u6b64BERT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2aMulti-task Learning\uff0c\u5177\u4f53\u8bf4\u6765\uff0cBERT\u7684\u635f\u5931\u51fd\u6570\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u6765\u81ea\u4e8eMask-LM\u7684\u5355\u8bcd\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\uff0c\u53ef\u4ee5\u4f7f\u5f97BERT\u5b66\u4e60\u5230\u7684\u8868\u5f81\u65e2\u6709token\u7ea7\u522b\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u5305\u542b\u4e86\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u4fe1\u606f\u3002\u5177\u4f53\u7684\u635f\u5931\u51fd\u6570\u5982\u4e0b Fine-Tuning \u9636\u6bb5 \u8f93\u5165\u5c42 \uff1a\u5982\u679c\u8f93\u5165\u53ea\u6709\u4e00\u4e2a\u53e5\u5b50\u7684\u8bdd\uff0c\u5219\u76f4\u63a5\u5728\u53e5\u5b50\u7684\u524d\u540e\u6dfb\u52a0\u53e5\u5b50\u7684\u8d77\u59cb\u6807\u8bb0\u4f4d\u548c\u53e5\u5b50\u7684\u7ed3\u675f\u7b26\u53f7\uff0c\u5728BERT\u4e2d\uff0c\u8d77\u59cb\u6807\u8bb0\u90fd\u7528\u201c[CLS]\u201d\u6765\u8868\u793a\uff0c\u7ed3\u675f\u6807\u8bb0\u7b26\u7528\"[SEP]\"\u8868\u793a\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u53e5\u5b50\u7684\u8f93\u5165\u60c5\u51b5\uff0c\u9664\u4e86\u8d77\u59cb\u6807\u8bb0\u548c\u7ed3\u675f\u6807\u8bb0\u4e4b\u5916\uff0c\u4e24\u4e2a\u53e5\u5b50\u95f4\u901a\u8fc7\"[SEP]\"\u6765\u8fdb\u884c\u533a\u5206\u3002\u9664\u4e86\u8fd9\u4e9b\u4e4b\u5916\uff0cBERT\u8fd8\u7528\u4e86\u4e24\u4e2a\u8868\u793a\u5f53\u524d\u662f\u53e5\u5b50A\u8fd8\u662f\u53e5\u5b50B\u7684\u5411\u91cf\u6765\u8fdb\u884c\u8868\u793a\uff0c\u5bf9\u4e8e\u53e5\u5b50A\u6765\u8bf4\uff0c\u6bcf\u4e00\u8bcd\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u540c\u6837\u7684\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50A\u7684\u5411\u91cf\uff0c\u76f8\u5e94\u7684\uff0c\u5982\u679c\u6709\u53e5\u5b50B\u7684\u8bdd\uff0c\u53e5\u5b50B\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u4e5f\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50B\u7684\u5411\u91cf\u3002 NLP \u7684**\u56db\u5927\u4efb\u52a1**\uff1a\u4e00\u7c7b\u662f\u5e8f\u5217\u6807\u6ce8\uff0c\u8fd9\u662f\u6700\u5178\u578b\u7684NLP\u4efb\u52a1\uff0c\u6bd4\u5982\u4e2d\u6587\u5206\u8bcd\uff0c\u8bcd\u6027\u6807\u6ce8\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u8bed\u4e49\u89d2\u8272\u6807\u6ce8\u7b49\u90fd\u53ef\u4ee5\u5f52\u5165\u8fd9\u4e00\u7c7b\u95ee\u9898\uff0c\u5b83\u7684\u7279\u70b9\u662f\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u8981\u6c42\u6a21\u578b\u6839\u636e\u4e0a\u4e0b\u6587\u90fd\u8981\u7ed9\u51fa\u4e00\u4e2a\u5206\u7c7b\u7c7b\u522b\u3002\u7b2c\u4e8c\u7c7b\u662f\u5206\u7c7b\u4efb\u52a1\uff0c\u6bd4\u5982\u6211\u4eec\u5e38\u89c1\u7684\u6587\u672c\u5206\u7c7b\uff0c\u60c5\u611f\u8ba1\u7b97\u7b49\u90fd\u53ef\u4ee5\u5f52\u5165\u8fd9\u4e00\u7c7b\u3002\u5b83\u7684\u7279\u70b9\u662f\u4e0d\u7ba1\u6587\u7ae0\u6709\u591a\u957f\uff0c\u603b\u4f53\u7ed9\u51fa\u4e00\u4e2a\u5206\u7c7b\u7c7b\u522b\u5373\u53ef\u3002\u7b2c\u4e09\u7c7b\u4efb\u52a1\u662f\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\uff0c\u6bd4\u5982Entailment\uff0cQA\uff0c\u8bed\u4e49\u6539\u5199\uff0c\u81ea\u7136\u8bed\u8a00\u63a8\u7406\u7b49\u4efb\u52a1\u90fd\u662f\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u5b83\u7684\u7279\u70b9\u662f\u7ed9\u5b9a\u4e24\u4e2a\u53e5\u5b50\uff0c\u6a21\u578b\u5224\u65ad\u51fa\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u5177\u5907\u67d0\u79cd\u8bed\u4e49\u5173\u7cfb\uff1b\u7b2c\u56db\u7c7b\u662f\u751f\u6210\u5f0f\u4efb\u52a1\uff0c\u6bd4\u5982\u673a\u5668\u7ffb\u8bd1\uff0c\u6587\u672c\u6458\u8981\uff0c\u5199\u8bd7\u9020\u53e5\uff0c\u770b\u56fe\u8bf4\u8bdd\u7b49\u90fd\u5c5e\u4e8e\u8fd9\u4e00\u7c7b\u3002\u5b83\u7684\u7279\u70b9\u662f\u8f93\u5165\u6587\u672c\u5185\u5bb9\u540e\uff0c\u9700\u8981\u81ea\u4e3b\u751f\u6210\u53e6\u5916\u4e00\u6bb5\u6587\u5b57\u3002 \u5bf9\u4e8e\u79cd\u7c7b\u5982\u6b64\u7e41\u591a\u800c\u4e14\u5404\u5177\u7279\u70b9\u7684\u4e0b\u6e38NLP\u4efb\u52a1\uff0cBert\u5982\u4f55\u6539\u9020\u8f93\u5165\u8f93\u51fa\u90e8\u5206\u4f7f\u5f97\u5927\u90e8\u5206NLP\u4efb\u52a1\u90fd\u53ef\u4ee5\u4f7f\u7528Bert\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u53c2\u6570\u5462\uff1f\u4e0a\u56fe\u7ed9\u51fa\u793a\u4f8b\uff0c\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u7c7b\u4efb\u52a1\uff0c\u5f88\u7b80\u5355\uff0c\u548cGPT\u7c7b\u4f3c\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\uff0c\u53e5\u5b50\u4e4b\u95f4\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\u3002\u5bf9\u4e8e\u8f93\u51fa\u6765\u8bf4\uff0c\u628a\u7b2c\u4e00\u4e2a\u8d77\u59cb\u7b26\u53f7\u5bf9\u5e94\u7684Transformer\u6700\u540e\u4e00\u5c42\u4f4d\u7f6e\u4e0a\u9762\u4e32\u63a5\u4e00\u4e2asoftmax\u5206\u7c7b\u5c42\u5373\u53ef\u3002\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0eGPT\u4e00\u6837\uff0c\u53ea\u9700\u8981\u589e\u52a0\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\uff0c\u8f93\u51fa\u90e8\u5206\u548c\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\u7c7b\u4f3c\u6539\u9020\uff1b\u5bf9\u4e8e\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\uff0c\u8f93\u5165\u90e8\u5206\u548c\u5355\u53e5\u5206\u7c7b\u662f\u4e00\u6837\u7684\uff0c\u53ea\u9700\u8981\u8f93\u51fa\u90e8\u5206Transformer\u6700\u540e\u4e00\u5c42\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u5e94\u4f4d\u7f6e\u90fd\u8fdb\u884c\u5206\u7c7b\u5373\u53ef\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c\u4e0a\u9762\u5217\u51fa\u7684NLP\u56db\u5927\u4efb\u52a1\u91cc\u9762\uff0c\u9664\u4e86\u751f\u6210\u7c7b\u4efb\u52a1\u5916\uff0cBert\u5176\u5b83\u90fd\u8986\u76d6\u5230\u4e86\uff0c\u800c\u4e14\u6539\u9020\u8d77\u6765\u5f88\u7b80\u5355\u76f4\u89c2\u3002\u5c3d\u7ba1Bert\u8bba\u6587\u6ca1\u6709\u63d0\uff0c\u4f46\u662f\u7a0d\u5fae\u52a8\u52a8\u8111\u5b50\u5c31\u53ef\u4ee5\u60f3\u5230\uff0c\u5176\u5b9e\u5bf9\u4e8e\u673a\u5668\u7ffb\u8bd1\u6216\u8005\u6587\u672c\u6458\u8981\uff0c\u804a\u5929\u673a\u5668\u4eba\u8fd9\u79cd\u751f\u6210\u5f0f\u4efb\u52a1\uff0c\u540c\u6837\u53ef\u4ee5\u7a0d\u4f5c\u6539\u9020\u5373\u53ef\u5f15\u5165Bert\u7684\u9884\u8bad\u7ec3\u6210\u679c\u3002\u53ea\u9700\u8981\u9644\u7740\u5728S2S\u7ed3\u6784\u4e0a\uff0cencoder\u90e8\u5206\u662f\u4e2a\u6df1\u5ea6Transformer\u7ed3\u6784\uff0cdecoder\u90e8\u5206\u4e5f\u662f\u4e2a\u6df1\u5ea6Transformer\u7ed3\u6784\u3002\u6839\u636e\u4efb\u52a1\u9009\u62e9\u4e0d\u540c\u7684\u9884\u8bad\u7ec3\u6570\u636e\u521d\u59cb\u5316encoder\u548cdecoder\u5373\u53ef\u3002\u8fd9\u662f\u76f8\u5f53\u76f4\u89c2\u7684\u4e00\u79cd\u6539\u9020\u65b9\u6cd5\u3002\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u66f4\u7b80\u5355\u4e00\u70b9\uff0c\u6bd4\u5982\u76f4\u63a5\u5728\u5355\u4e2aTransformer\u7ed3\u6784\u4e0a\u52a0\u88c5\u9690\u5c42\u4ea7\u751f\u8f93\u51fa\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\u4e0d\u8bba\u5982\u4f55\uff0c\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0cNLP\u56db\u5927\u7c7b\u4efb\u52a1\u90fd\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u5730\u6539\u9020\u6210Bert\u80fd\u591f\u63a5\u53d7\u7684\u65b9\u5f0f\u3002\u8fd9\u5176\u5b9e\u662fBert\u7684\u975e\u5e38\u5927\u7684\u4f18\u70b9\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u51e0\u4e4e\u53ef\u4ee5\u505a\u4efb\u4f55NLP\u7684\u4e0b\u6e38\u4efb\u52a1\uff0c\u5177\u5907\u666e\u9002\u6027\uff0c\u8fd9\u662f\u5f88\u5f3a\u7684\u3002 \u6700\u540e\uff0c\u6211\u4eec\u518d\u6b21\u603b\u7ed3\u4e0bBERT\u7684\u51e0\u4e2a\u4e3b\u8981\u7279\u70b9\uff1a Transformer Encoder\u56e0\u4e3a\u6709Self-attention\u673a\u5236\uff0c\u56e0\u6b64BERT\u81ea\u5e26\u53cc\u5411\u529f\u80fd \u56e0\u4e3a\u53cc\u5411\u529f\u80fd\u4ee5\u53ca\u591a\u5c42Self-attention\u673a\u5236\u7684\u5f71\u54cd\uff0c\u4f7f\u5f97BERT\u5fc5\u987b\u4f7f\u7528Cloze\u7248\u7684\u8bed\u8a00\u6a21\u578bMasked-LM\u6765\u5b8c\u6210token\u7ea7\u522b\u7684\u9884\u8bad\u7ec3 \u4e3a\u4e86\u83b7\u53d6\u6bd4\u8bcd\u66f4\u9ad8\u7ea7\u522b\u7684\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u8868\u5f81\uff0cBERT\u52a0\u5165\u4e86Next Sentence Prediction\u6765\u548cMasked-LM\u4e00\u8d77\u505a\u8054\u5408\u8bad\u7ec3 \u4e3a\u4e86\u9002\u914d\u591a\u4efb\u52a1\u4e0b\u7684\u8fc1\u79fb\u5b66\u4e60\uff0cBERT\u8bbe\u8ba1\u4e86\u66f4\u901a\u7528\u7684\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42 \u7136\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u770bBERT\u7684\u5de5\u4f5c\u90fd\u7ad9\u5728\u4e86\u54ea\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff1a \u9488\u5bf9\u7b2c\u4e00\u70b9\uff0c\u53cc\u5411\u529f\u80fd\u662fTransformer Encoder\u81ea\u5e26\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662fTransformer \u7b2c\u4e8c\u70b9\u4e2dMasked-LM\u7684\u5de8\u4eba\u80a9\u8180\u662f\u8bed\u8a00\u6a21\u578b\uff0cCBOW\u4ee5\u53caCloze\u95ee\u9898 \u7b2c\u4e09\u70b9\u4e2dNext Sentence Prediction\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662fSkip-gram\uff0cSkip-thoughts\u548cQuick-thoughts\u7b49\u5de5\u4f5c \u7b2c\u56db\u70b9\u4e2d\uff0c\u5bf9\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u6539\u9020\uff0c\u501f\u9274\u4e86T-DMCA\u4ee5\u53caGPT\u7684\u505a\u6cd5 Word vectors \u00b6 \u4e3a\u4ec0\u4e48\u8981\u8bcd\u5d4c\u5165\uff1f \u8bcd\u5d4c\u5165\u662f\u53ef\u4ee5\u5b66\u4e60\u7684\u53c2\u6570 \u5728\u4e0d\u540c\u4efb\u52a1\u4e2d\u5171\u4eab\u8868\u793a \u4f4e\u7ef4\u7a7a\u95f4\u66f4\u597d\u8ba1\u7b97\u2014\u2014\u96be\u4ee5\u5904\u7406\u7a00\u758f\u5411\u91cf Unsupervised pretraining: Pre-Neural Word vector pretraining Word2vec \u4e0e NNLM \u90fd\u662f\u8bed\u8a00\u6a21\u578b\uff0c\u4f46\u4e0d\u540c\u7684\u662f word2vec \u7684\u91cd\u70b9\u662f\u901a\u8fc7\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u4ece\u800c\u5f97\u5230\u8bcd\u5411\u91cf\uff0c\u56e0\u6b64\u4ee5\u8bcd\u5411\u91cf\u4e3a\u91cd\u70b9\u5bf9 NNLM \u8fdb\u884c\u4e86\u6539\u8fdb\u4f18\u5316\uff0c\u5e76\u4e14\u4f7f\u7528 CBOW \u548c Skip-gram \u4e24\u79cd\u65b9\u5f0f\u5b66\u4e60\u8bcd\u5411\u91cf\uff0cGloVe \u5219\u901a\u8fc7\u6784\u5efa\u5171\u73b0\u77e9\u9635\uff0c\u4e0d\u901a\u8fc7\u4f20\u7edf\u7684 SVD \u8fdb\u884c\u8ba1\u7b97\u590d\u6742\u5ea6\u8f83\u9ad8\u7684\u77e9\u9635\u5206\u89e3\uff0c\u800c\u662f\u4f7f\u7528\u5e73\u65b9\u8bef\u5dee\u4fc3\u4f7f\u70b9\u79ef\u5c3d\u53ef\u80fd\u5f97\u63a5\u8fd1\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u56e0\u4e3a\u5982\u679c\u4f7f\u5411\u91cf\u70b9\u79ef\u7b49\u4e8e\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u5411\u91cf\u5dee\u5f02\u53d8\u6210\u4e86\u5171\u73b0\u6982\u7387\u7684\u6bd4\u7387\u5373\u5355\u8bcd j \u51fa\u73b0\u5728\u5355\u8bcd i \u7684\u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\uff0c\u8fd9\u4e00\u6bd4\u503c\u8574\u542b\u4e86\u8bed\u4e49\u4fe1\u606f\u3002 \u76f8\u6bd4word2vec\uff0cGloVe\u5374\u66f4\u52a0\u5145\u5206\u7684\u5229\u7528\u4e86\u8bcd\u7684\u5171\u73b0\u4fe1\u606f \uff0cword2vec\u4e2d\u5219\u662f\u76f4\u63a5\u7c97\u66b4\u7684\u8ba9\u4e24\u4e2a\u5411\u91cf\u7684\u70b9\u4e58\u76f8\u6bd4\u5176\u4ed6\u8bcd\u7684\u70b9\u4e58\u6700\u5927\uff0c\u81f3\u5c11\u5728\u8868\u9762\u4e0a\u770b\u6765\u4f3c\u4e4e\u662f\u6ca1\u6709\u7528\u5230\u8bcd\u7684\u5171\u73b0\u4fe1\u606f\uff0c\u4e0d\u50cfGloVe\u8fd9\u91cc\u660e\u786e\u7684\u5c31\u662f\u62df\u5408\u8bcd\u5bf9\u7684\u5171\u73b0\u9891\u7387\u3002 fastText\u5219\u662f\u5229\u7528\u5e26\u6709\u76d1\u7763\u6807\u8bb0\u7684\u6587\u672c\u5206\u7c7b\u6570\u636e\u5b8c\u6210\u8bad\u7ec3\uff0c\u6846\u67b6\u548c CBOW \u4e00\u81f4\uff0c\u4e0d\u8fc7\u8f93\u5165\u6570\u636e\u4e0d\u518d\u662f bag-of-words \u7684\u4fe1\u606f\uff0c\u8fd8\u52a0\u4e0a\u4e86 ngram \u4fe1\u606f\uff0c\u8fd9\u5c31\u52a0\u5165\u4e86\u8bed\u5e8f\u4fe1\u606f\uff0c\u800c\u4e14\u8f93\u51fa\u7684\u662f\u5f53\u524d\u8f93\u5165\u6587\u672c\u7684\u7c7b\u522b\u3002\u6b64\u5916\u8fd8\u5f15\u5165subword\u6765\u5904\u7406\u957f\u8bcd\uff0c\u5904\u7406 OOV \u95ee\u9898\u3002 Sentence and document vectors \u00b6 Paragraph vector PV-DM\u7684\u5168\u79f0\u662fDistributed Memory Model of Paragraph Vectors\uff0c\u548cCBOW\u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u4e0a\u4e0b\u6587\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u4e0d\u8fc7\u5728\u8f93\u5165\u5c42\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4e5f\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6587\u6863ID\u6620\u5c04\u5230\u4e00\u4e2a\u5411\u91cf\u7684look-up table\uff0c\u6a21\u578b\u7684\u76ee\u7684\u4fbf\u662f\u5c06\u5f53\u524d\u6587\u6863\u7684\u5411\u91cf\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5411\u91cf\u8054\u5408\u8f93\u5165\u6a21\u578b\uff0c\u5e76\u8ba9\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5bf9\u4e8e\u73b0\u6709\u7684\u6587\u6863\uff0c\u4fbf\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u5feb\u901f\u5f97\u5230\u8be5\u6587\u6863\u7684\u5411\u91cf\uff0c\u800c\u5bf9\u4e8e\u65b0\u7684\u4e00\u7bc7\u6587\u6863\uff0c\u90a3\u4e48\u5219\u9700\u8981\u5c06\u5df2\u6709\u7684look-up table\u6dfb\u52a0\u76f8\u5e94\u7684\u5217\uff0c\u7136\u540e\u91cd\u65b0\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u53ea\u4e0d\u8fc7\u6b64\u65f6\u56fa\u5b9a\u597d\u5176\u4ed6\u7684\u53c2\u6570\uff0c\u53ea\u8c03\u6574look-up table\uff0c\u6536\u655b\u540e\u4fbf\u53ef\u4ee5\u5f97\u5230\u65b0\u6587\u6863\u5bf9\u5e94\u7684\u5411\u91cf\u4e86\u3002PV-DBOW\u7684\u5168\u79f0\u5219\u662fDistributed Bag of Words version of Paragraph Vector\uff0c\u548cSkip-gram\u7c7b\u4f3c\uff0c\u901a\u8fc7\u6587\u6863\u6765\u9884\u6d4b\u6587\u6863\u5185\u7684\u8bcd\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u6587\u672c\u7247\u6bb5\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u7247\u6bb5\u4e2d\u91c7\u6837\u4e00\u4e2a\u8bcd\uff0c\u8ba9PV-DBOW\u6a21\u578b\u6765\u9884\u6d4b\u8fd9\u4e2a\u8bcd\uff0c\u4ee5\u6b64\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u8bad\u7ec3\u65b9\u6cd5\uff0c\u8bf4\u767d\u4e86\uff0c\u672c\u8d28\u4e0a\u548cSkip-gram\u662f\u4e00\u6837\u7684\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u81f4\u547d\u7684\u5f31\u70b9\uff0c\u5c31\u662f\u4e3a\u4e86\u83b7\u53d6\u65b0\u6587\u6863\u7684\u5411\u91cf\uff0c\u8fd8\u5f97\u7ee7\u7eed\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u5e76\u4e14\u7531\u4e8e\u6a21\u578b\u4e3b\u8981\u662f\u9488\u5bf9\u6587\u6863\u5411\u91cf\u9884\u6d4b\u8bcd\u5411\u91cf\u7684\u8fc7\u7a0b\u8fdb\u884c\u5efa\u6a21\uff0c\u5176\u5b9e\u5f88\u96be\u53bb\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u66f4\u4e30\u5bcc\u7684\u8bed\u4e49\u7ed3\u6784\uff0c\u6240\u4ee5\u8fd9\u4e24\u79cd\u83b7\u53d6\u6587\u6863\u5411\u91cf\u7684\u65b9\u6cd5\u90fd\u672a\u80fd\u5927\u89c4\u6a21\u5e94\u7528\u5f00\u6765\u3002 Skip-Thought Vectors Autoencoder pretraining Semi-supervised Sequence Learning \u8bba\u6587\u63d0\u51fa\u4e862\u4e2a\u65b9\u6cd5\uff0c\u7528\u65e0\u6807\u7b7e\u6570\u636e\u8fdb\u884c\u65e0\u76d1\u7763\u8bad\u7ec3\u7684\u53c2\u6570\u6765\u521d\u59cb\u5316\u6709\u76d1\u7763\u5b66\u4e60\u7684\u6a21\u578b\uff1a\u4e00\u79cd\u662f\u7528\u57fa\u7840\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53e6\u4e00\u79cd\u662f\u7528seq2seq\u81ea\u7f16\u7801\u6a21\u578b\uff08sequence autoencoder\uff0c SA-LSTM\uff09\uff0cencoder\u8f93\u5165\u4e3a\u8fd9\u4e2aWXYZ\uff0cdecoder\u8f93\u51fa\u4e3a\u4f9d\u7136\u4e3aWXYZ\uff0c\u548c\u666e\u901a\u7684seq2seq\u6a21\u578b\u76f8\u6bd4\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u91cc\u7684encoder\u548cdecoder\u9690\u5c42\u662f\u5171\u4eab\u7684\u3002\u6709\u79cd\u63d0\u524d\u8ba9\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u5b66\u4f1a\u53e5\u5b50\u7684\u8868\u8fbe\uff0c\u518d\u4e4b\u540e\u6839\u636e\u6807\u7b7e\u53bb\u5b66\u4e60\u5206\u7c7b\u7684\u80fd\u529b\u7684\u601d\u60f3\u3002 Supervised sentence embeddings \u4e5f\u53ef\u4ee5\u6709\u76d1\u7763\u8bad\u7ec3\u53e5\u5b50\u5d4c\u5165 Paragram-phrase: uses paraphrase database for supervision, best for paraphrase and semantic similarity ( Wieting et al. 2016 ) InferSent: bi-LSTM trained on SNLI + MNLI ( Conneau et al. 2017 ) GenSen: multitask training(skip-thought, machine translation, NLI, parsing) ( Subramanian et al. 2018 ) InferSent \u662f\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\u5728\u65af\u5766\u798f\u7684SNLI\uff08Stanford Natural Language Inference\uff09\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\uff0c\u5c14\u540e\u5c06\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u4ee5\u6b64\u6765\u83b7\u5f97\u4e00\u4e2a\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a\uff0c\u518d\u5c06\u8fd9\u4e2a\u53e5\u5b50\u7684\u8868\u793a\u5e94\u7528\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\uff0c\u6765\u8bc4\u4f30\u53e5\u5b50\u5411\u91cf\u7684\u4f18\u52a3\u3002\u6846\u67b6\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a \u8fd9\u4e2a\u6846\u67b6\u6700\u5e95\u5c42\u662f\u4e00\u4e2a Encoder\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u8981\u83b7\u53d6\u7684\u53e5\u5b50\u5411\u91cf\u63d0\u53d6\u5668\uff0c\u7136\u540e\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u5411\u91cf\u901a\u8fc7\u4e00\u4e9b\u5411\u91cf\u64cd\u4f5c\u540e\u5f97\u5230\u53e5\u5b50\u5bf9\u7684\u6df7\u5408\u8bed\u4e49\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u5168\u8fde\u63a5\u5c42\u5e76\u505a SNLI \u4e0a\u7684\u4e09\u5206\u7c7b\u4efb\u52a1\u3002 Contextual word vectors \u00b6 Motivation \u8bcd\u5411\u91cf\u5c06\u6240\u6709\u7684\u4e0a\u4e0b\u6587\u90fd\u538b\u7f29\u5230\u4e00\u4e2a\u5355\u4e00\u5411\u91cf\u4e2d Key Idea \u4e0d\u662f\u6bcf\u4e2a\u5355\u8bcd\u5b66\u4e60\u4e00\u4e2a\u5411\u91cf\uff0c\u800c\u662f\u5b66\u4e60\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u7684\u5411\u91cf\u3002 context2vec http://u.cs.biu.ac.il/~melamuo/publications/context2vec_conll16.pdf \u57fa\u4e8e CBOW \u6846\u67b6\uff0c\u4e3a\u4e86\u6355\u6349\u53e5\u5b50\u8bed\u5883\u7684\u672c\u8d28\uff0c\u4f7f\u7528\u53cc\u5411 LSTM \u63d0\u53d6\u7279\u5f81\u3002 TagLM https://arxiv.org/pdf/1705.00108.pdf \u4e0e\u4e0a\u6587\u65e0\u5173\u7684\u5355\u8bcd\u5d4c\u5165 + RNN model \u5f97\u5230\u7684 hidden states \u4f5c\u4e3a\u7279\u5f81\u8f93\u5165 $$ \\mathbf{h} {k, l}=\\left[\\overrightarrow{\\mathbf{h}} ; \\overleftarrow{\\mathbf{h}} {k, 1} ; \\mathbf{h} ^{L M}\\right] $$ Char CNN / RNN + Token Embedding \u4f5c\u4e3a bi-LSTM \u7684\u8f93\u5165 \u5f97\u5230\u7684 hidden states \u4e0e Pre-trained bi-LM\uff08\u51bb\u7ed3\u7684\uff09 \u7684 hidden states \u8fde\u63a5\u8d77\u6765\u8f93\u5165\u5230\u7b2c\u4e8c\u5c42\u7684 bi-LSTM \u4e2d Unsupervised Pretraining for Seq2Seq https://arxiv.org/pdf/1611.02683.pdf \u63d0\u51fa\u4e00\u79cd\u901a\u7528\u7684\u63d0\u9ad8seq2seq\u6a21\u578b\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u3002seq2seq\u6a21\u578b\u7684encoder\u548cdecoder\u7684\u6743\u91cd\u7528\u4e24\u4e2a\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u521d\u59cb\u5316\u7136\u540e\u5fae\u8c03\u3002 seq2seq\u6a21\u578b\u7684\u7f3a\u70b9\uff1a\u76d1\u7763\u5b66\u4e60\u7684\u8bed\u6599\u6709\u9650\uff0c\u5bb9\u6613\u8fc7\u62df\u5408\u3002\u672c\u6587\u63d0\u51fa\u4e86\u6539\u5584seq2seq\u6548\u679c\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u3002\u5728\u5fae\u8c03\u9636\u6bb5\uff0c\u8bad\u7ec3\u4efb\u52a1\u4e3a\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u548cseq2seq\u7684\u8054\u5408\u4efb\u52a1\u3002(\u5f00\u59cbfune-tuning\u53ef\u80fd\u5bfc\u81f4\u707e\u96be\u6027\u7684\u9057\u5fd8\uff1a\u6a21\u578b\u5728\u8bed\u8a00\u6a21\u578b\u4e0a\u7684\u6027\u80fd\u6025\u5267\u4e0b\u964d\uff0c\u53ef\u80fd\u635f\u5bb3\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\u3002\u4e3a\u4fdd\u8bc1\u6a21\u578b\u4e0d\u5728\u6709\u76d1\u7763\u8bed\u6599\u4e0a\u8fc7\u62df\u5408\uff0c\u5728fine-tuning\u9636\u6bb5\u7ee7\u7eed\u5355\u8bed\u8a00\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\uff0cseq2seq\u548c\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u7684\u635f\u5931\u76f8\u52a0\u4f5c\u4e3a\u6700\u7ec8\u635f\u5931\u3002) \u6b64\u5916\u8fd8\u7528\u4e86\u6b8b\u5dee\u8fde\u63a5\uff0cEncoder \u548c Decoder \u4e4b\u95f4\u4e5f\u7528\u4e86 Attention\u3002 CoVe https://arxiv.org/pdf/1708.00107.pdf CoVe\u66f4\u4fa7\u91cd\u4e8e\u5982\u4f55\u5c06\u73b0\u6709\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5f97\u5230\u7684\u8868\u5f81\u8fc1\u79fb\u5230\u65b0\u4efb\u52a1\u573a\u666f\u4e2d\uff0c\u800c\u4e4b\u524d\u7684\u53e5\u5b50\u7ea7\u4efb\u52a1\u4e2d\u5927\u591a\u6570\u90fd\u53ea\u628a\u8fc1\u79fb\u8fc7\u7a0b\u5f53\u505a\u4e00\u4e2a\u8bc4\u4f30\u4ed6\u4eec\u8868\u5f81\u6548\u679c\u7684\u624b\u6bb5\uff0c\u56e0\u6b64\u89c2\u5ff5\u4e0a\u6709\u6240\u4e0d\u540c \u4e5f\u6709\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u5e8f\u5217\u6a21\u578b\u4e3a\u5176\u4ed6NLP\u6a21\u578b\u63d0\u4f9b\u4e0a\u4e0b\u6587\u7684\u60f3\u6cd5 \u60f3\u6cd5\uff1a\u673a\u5668\u7ffb\u8bd1\u662f\u4e3a\u4e86\u4fdd\u5b58\u610f\u601d\uff0c\u6240\u4ee5\u8fd9\u4e5f\u8bb8\u662f\u4e2a\u597d\u76ee\u6807\uff1f \u4f7f\u7528seq2seq + attention NMT system\u4e2d\u7684Encoder\uff0c\u5373 2\u5c42 bi-LSTM \uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005 \u6240\u5f97\u5230\u7684 CoVe \u5411\u91cf\u5728\u5404\u79cd\u4efb\u52a1\u4e0a\u90fd\u4f18\u4e8e GloVe \u5411\u91cf \u4f46\u662f\uff0c\u7ed3\u679c\u5e76\u4e0d\u50cf\u5176\u4ed6\u66f4\u7b80\u5355\u7684NLM\u57f9\u8bad\u90a3\u4e48\u597d\uff0c\u6240\u4ee5\u4f3c\u4e4e\u88ab\u653e\u5f03\u4e86 \u4e5f\u8bb8NMT\u53ea\u662f\u6bd4\u8bed\u8a00\u5efa\u6a21\u66f4\u96be\uff1f \u6216\u8bb8\u6709\u4e00\u5929\u8fd9\u4e2a\u60f3\u6cd5\u4f1a\u56de\u6765\uff1f ELMo https://arxiv.org/abs/1802.05365.pdf \u4f7f\u7528\u957f\u4e0a\u4e0b\u6587\u800c\u4e0d\u662f\u4e0a\u4e0b\u6587\u7a97\u53e3\u5b66\u4e60 word token \u5411\u91cf(\u8fd9\u91cc\uff0c\u6574\u4e2a\u53e5\u5b50\u53ef\u80fd\u66f4\u957f) \u5b66\u4e60\u6df1\u5ea6Bi-NLM\uff0c\u5e76\u5728\u9884\u6d4b\u4e2d\u4f7f\u7528\u5b83\u7684\u6240\u6709\u5c42 \u8bad\u7ec3\u4e00\u4e2a\u53cc\u5411LM \u76ee\u6807\u662f performant \u4f46LM\u4e0d\u8981\u592a\u5927 \u4f7f\u75282\u4e2abiLSTM\u5c42 \u8fd9\u4e24\u4e2abiLSTM NLM\u5c42\u6709\u4e0d\u540c\u7684\u7528\u9014/\u542b\u4e49 \u4f4e\u5c42\u66f4\u9002\u5408\u4f4e\u7ea7\u8bed\u6cd5\uff0c\u4f8b\u5982 \u8bcd\u6027\u6807\u6ce8(part-of-speech tagging)\u3001\u53e5\u6cd5\u4f9d\u8d56(syntacticdependency)\u3001NER \u9ad8\u5c42\u66f4\u9002\u5408\u66f4\u9ad8\u7ea7\u522b\u7684\u8bed\u4e49 \u60c5\u7eea\u3001Semantic role labeling \u8bed\u4e49\u89d2\u8272\u6807\u8bb0 \u3001question answering\u3001SNLI \u76ee\u6807\u51fd\u6570\u4e3a \\(\\sum_{k=1}^{N} \\log p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)+\\log p\\left(t_{k} | t_{k+1}, \\ldots, t_{N}\\right)\\) (\u4ec5)\u4f7f\u7528\u5b57\u7b26CNN\u6784\u5efa\u521d\u59cb\u5355\u8bcd\u8868\u793a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u5747\u4f7f\u7528\u4e86\u5982\u4e0bCNN\u7ed3\u6784\uff0c\u51cf\u5c11\u4e86\u53c2\u6570\u89c4\u6a21\uff0c\u89e3\u51b3\u4e86 OOV \u95ee\u9898\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u8ba1\u7b97\u53ef\u4ee5\u9884\u5148\u505a\u597d\uff0c\u66f4\u80fd\u591f\u51cf\u8f7binference\u9636\u6bb5\u7684\u8ba1\u7b97\u538b\u529b\u3002 2048 \u4e2a char n-gram filters \u548c 2 \u4e2a highway layers\uff0c512 \u7ef4\u7684 projection 4096 dim hidden/cell LSTM\u72b6\u6001\uff0c\u4f7f\u7528 512 dim\u7684\u5bf9\u4e0b\u4e00\u4e2a\u8f93\u5165\u7684\u6295\u5f71 \u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5 \u7ed1\u5b9a token \u7684\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53c2\u6570(softmax)\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53c2\u6570\u7ed1\u5b9a\u5230\u6b63\u5411\u548c\u53cd\u5411LMs\u4e4b\u95f4 ELMo\u5b66\u4e60biLM\u8868\u793a\u7684\u7279\u5b9a\u4efb\u52a1\u7ec4\u5408 \u8fd9\u662f\u4e00\u4e2a\u521b\u65b0\uff0cTagLM \u4e2d\u4ec5\u4ec5\u4f7f\u7528\u5806\u53e0LSTM\u7684\u9876\u5c42\uff0cELMo \u8ba4\u4e3aBiLSTM\u6240\u6709\u5c42\u90fd\u662f\u6709\u7528\u7684 \\[ \\begin{aligned} R_{k} &=\\left\\{\\mathbf{x}_{k}^{L M}, \\overrightarrow{\\mathbf{h}}_{k, j}^{L M}, \\overleftarrow{\\mathbf{h}}_{k, j}^{L M} | j=1, \\ldots, L\\right\\} \\\\ &=\\left\\{\\mathbf{h}_{k, j}^{L M} | j=0, \\ldots, L\\right\\} \\end{aligned} \\\\ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o}_{k}^{t a s k}=E\\left(R_{k} ; \\Theta^{t a s k}\\right)=\\gamma^{t a s k} \\sum_{j=0}^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j}^{L M} \\] \\(\\gamma^{t a s k}\\) \u8861\u91cfELMo\u5bf9\u4efb\u52a1\u7684\u603b\u4f53\u6709\u7528\u6027\uff0c\u662f\u4e3a\u7279\u5b9a\u4efb\u52a1\u5b66\u4e60\u7684\u5168\u5c40\u6bd4\u4f8b\u56e0\u5b50 \\(\\mathbf{s}^{t a s k}\\) \u662f softmax \u5f52\u4e00\u5316\u7684\u6df7\u5408\u6a21\u578b\u6743\u91cd\uff0c\u662f BiLSTM \u7684\u52a0\u6743\u5e73\u5747\u503c\u7684\u6743\u91cd\uff0c\u5bf9\u4e0d\u540c\u7684\u4efb\u52a1\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e0d\u540c\u5c42\u7684 BiLSTM \u7684 ULMFit https://arxiv.org/pdf/1801.06146.pdf \u5728\u5927\u578b\u901a\u7528\u9886\u57df\u7684\u65e0\u76d1\u7763\u8bed\u6599\u5e93\u4e0a\u4f7f\u7528 biLM \u8bad\u7ec3 \u5728\u76ee\u6807\u4efb\u52a1\u6570\u636e\u4e0a\u8c03\u6574 LM \u5bf9\u7279\u5b9a\u4efb\u52a1\u5c06\u5206\u7c7b\u5668\u8fdb\u884c\u5fae\u8c03 \u4f7f\u7528\u5408\u7406\u5927\u5c0f\u7684\u201c1 GPU\u201d\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e0d\u662f\u771f\u7684\u5f88\u5927 \u5728LM\u8c03\u4f18\u4e2d\u8981\u6ce8\u610f\u5f88\u591a ULMFit\u7684\u9884\u8bad\u7ec3\u548cfinetune\u8fc7\u7a0b\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff0c\u5206\u522b\u662f\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\uff08\u6bd4\u5982Wikitext 103\uff0c\u6709103million\u4e2a\u8bcd\uff09\u5148\u9884\u8bad\u7ec3\uff0c\u7136\u540e\u518d\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u5177\u4f53\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u91cd\u65b0\u5229\u7528\u8bed\u8a00\u6a21\u578b\u6765finetune\u4e00\u4e0b\uff08\u8fd9\u662f\u7b2c\u4e00\u6b21finetune\uff0c\u53eb\u505aLM finetune\uff09\uff0c\u5c14\u540e\u518d\u6839\u636e\u5177\u4f53\u4efb\u52a1\u8bbe\u8ba1\u7684\u4e00\u4e2a\u6a21\u578b\u4e0a\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u8fd9\u4e2a\u4efb\u52a1\u6a21\u578b\u7684\u591a\u5c42\uff0c\u518d\u4e00\u6b21finetune\uff08\u8fd9\u662f\u7b2c\u4e8c\u6b21finetune\uff0c\u5982\u679c\u662f\u5206\u7c7b\u95ee\u9898\u7684\u8bdd\u53ef\u4ee5\u53eb\u505aClassifier finetune\uff09 AWD-LSTM \\(w_{k+1}=w_{k}-\\gamma_{k} \\nabla f\\left(w_{k}\\right), w=\\frac{1}{K-T+1} \\sum_{i=T}^{K} w_{i}\\) \u5176\u4e2dT\u662f\u4e00\u4e2a\u9608\u503c\uff0c\u800cK\u5219\u662f\u603b\u5171\u7684\u8fed\u4ee3\u6b21\u6570\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u628a\u8fed\u4ee3\u5230\u7b2cT\u6b21\u4e4b\u540e\uff0c\u5bf9\u8be5\u53c2\u6570\u5728\u5176\u540e\u7684\u7b2cT\u8f6e\u5230\u6700\u540e\u4e00\u8f6e\u4e4b\u95f4\u7684\u6240\u6709\u503c\u6c42\u5e73\u5747\uff0c\u4ece\u800c\u5f97\u5230\u6700\u540e\u6a21\u578b\u7684\u8be5\u53c2\u6570\u503c\uff0c\u800c\u76f8\u5e94\u7684\uff0c\u666e\u901a\u7684SGD\u5219\u662f\u76f4\u63a5\u53d6 \\(w = w_K\\) \u4f5c\u4e3a\u6700\u540e\u6a21\u578b\u7684\u53c2\u6570\u503c\u3002 \u5e76\u4e14\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e4b\u95f4\u90fd\u662f\u7528\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u5e76\u4e14\u4f7f\u7528DropConnect\u7684\u65b9\u6cd5\u968f\u673adrop\u6389\u4e00\u4e9b\u8fde\u63a5\u51cf\u5c11\u4e00\u4e9b\u8fc7\u62df\u5408\u7684\u98ce\u9669 \u5fae\u8c03\u6280\u5de7 discriminative fine-tuning \u9488\u5bf9\u4e0d\u540c\u7684\u5c42\u5728\u8bad\u7ec3\u66f4\u65b0\u53c2\u6570\u7684\u65f6\u5019\uff0c\u8d4b\u4e88\u4e0d\u540c\u7684\u5b66\u4e60\u7387\u3002\u8fd9\u91cc\u7684\u51fa\u53d1\u70b9\u662f\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8eNLP\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6765\u8bf4\uff0c\u4e0d\u540c\u5c42\u7684\u8868\u5f81\u6709\u4e0d\u540c\u7684\u7269\u7406\u542b\u4e49\uff0c\u6bd4\u5982\u6d45\u5c42\u504f\u53e5\u6cd5\u4fe1\u606f\uff0c\u9ad8\u5c42\u504f\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e0d\u540c\u5c42\u7684\u5b66\u4e60\u7387\u4e0d\u540c\uff0c\u81ea\u7136\u5c31\u662f\u6bd4\u8f83\u5408\u7406\u7684\u4e86\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u516c\u5f0f\u5982\u4e0b \\(\\theta_{t}^{l}=\\theta_{t-1}^{l}+\\eta^{l} \\nabla_{\\theta^{l}} J(\\theta)\\) \uff0c\u8fd9\u91cc\u7684 \\(n^l\\) \u4fbf\u662f\u4e0d\u540c\u7684\u5c42 \\(l\\) \u6709\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u539f\u6587\u4e5f\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u9009\u62e9\uff1a\u5148\u6307\u5b9a\u6700\u540e\u4e00\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u7136\u540e\u6839\u636e\u4e0b\u5f0f\u5f97\u5230\u524d\u9762\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u57fa\u672c\u601d\u60f3\u662f\u8ba9\u6d45\u5c42\u7684\u5b66\u4e60\u7387\u8981\u66f4\u5c0f\u4e00\u4e9b\u3002 \\(\\eta^{l-1}=\\frac{\\eta^{l}}{2.6}\\) slanted triangular learning rates \u5728finetune\u7684\u7b2c\u4e00\u9636\u6bb5\uff0c\u5e0c\u671b\u80fd\u591f\u5148\u7a33\u5b9a\u4f4f\u539f\u6765\u5df2\u7ecf\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u9009\u62e9\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684finetune\u5b66\u4e60\u7387\uff1b\u5c14\u540e\u5e0c\u671b\u80fd\u591f\u9010\u6b65\u52a0\u5927\u5b66\u4e60\u7387\uff0c\u4f7f\u5f97\u5b66\u4e60\u8fc7\u7a0b\u80fd\u591f\u5c3d\u91cf\u5feb\u901f\uff1b\u6700\u540e\uff0c\u5f53\u8bad\u7ec3\u63a5\u8fd1\u5c3e\u58f0\u65f6\uff0c\u9010\u6b65\u51cf\u5c0f\u5b66\u4e60\u7387\uff0c\u8fd9\u6837\u8ba9\u6a21\u578b\u9010\u6e10\u5e73\u7a33\u6536\u655b\uff08\u8fd9\u4e2a\u601d\u60f3\u5927\u6982\u501f\u9274\u4e862017\u5e74\u8c37\u6b4c\u63d0\u51faTransformer\u65f6\u7528\u5230\u7684warm up\u7684\u5b66\u4e60\u7387\u8c03\u8282\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u662f\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u5148\u5c06\u5b66\u4e60\u7387\u9010\u6b65\u589e\u5927\uff0c\u5c14\u540e\u518d\u9010\u6b65\u51cf\u5c0f\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u4e00\u4e2a\u4e09\u6bb5\u8bba\u5f0f\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u7528\u56fe\u8868\u793a\u5982\u4e0b\uff1a gradual unfreezing \u4e3b\u8981\u601d\u60f3\u662f\u628a\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u5728\u65b0\u4efb\u52a1\u4e0afinetune\u65f6\uff0c\u9010\u5c42\u89e3\u51bb\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u5148finetune\u6700\u540e\u4e00\u5c42\uff0c\u7136\u540e\u518d\u89e3\u51bb\u5012\u6570\u7b2c\u4e8c\u5c42\uff0c\u628a\u5012\u6570\u7b2c\u4e8c\u5c42\u548c\u6700\u540e\u4e00\u5c42\u4e00\u8d77finetune\uff0c\u7136\u540e\u518d\u89e3\u51bb\u7b2c\u4e09\u5c42\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u9010\u5c42\u5f80\u6d45\u5c42\u63a8\u8fdb\uff0c\u6700\u7ec8finetune\u6574\u4e2a\u6a21\u578b\u6216\u8005\u7ec8\u6b62\u5230\u67d0\u4e2a\u4e2d\u95f4\u5c42\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86finetune\u7684\u8fc7\u7a0b\u80fd\u591f\u66f4\u5e73\u7a33\u3002 \u56e0\u4e3aULMFiT\u4e2d\u5305\u542b\u4e86\u4e24\u6b21finetune\uff0c\u5373\u5728\u65b0\u4efb\u52a1\u4e0a\u7528\u8bed\u8a00\u6a21\u578bfinetune\u548c\u5728\u65b0\u4efb\u52a1\u4e0afinetune\u8bad\u7ec3\u4e00\u4e2a\u6700\u7ec8\u7684task-specifi-model\uff08\u6bd4\u5982\u5206\u7c7b\u5668\uff09\uff0c\u800c\u8bba\u6587\u4e2d\u4e3b\u8981\u628adiscriminative fine-tuning, slanted triangular learning rates\u8fd9\u4e24\u4e2a\u6280\u5de7\u7528\u5728\u4e86\u8bed\u8a00\u6a21\u578b\u7684finetune\u9636\u6bb5\uff0c\u628a\u6700\u540e\u4e00\u4e2agradual unfreezing\u7684\u6280\u5de7\u5e94\u7528\u5728\u6700\u7ec8task-specifi-model\u7684finetune\u9636\u6bb5\u3002 \u4f7f\u7528\u5927\u578b\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u79cd\u63d0\u9ad8\u6027\u80fd\u7684\u975e\u5e38\u6709\u6548\u7684\u65b9\u6cd5 GPT GPT\u91c7\u7528\u4e24\u9636\u6bb5\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u662f\u5229\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u7b2c\u4e8c\u9636\u6bb5\u901a\u8fc7Fine-tuning\u7684\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u4e0a\u56fe\u5c55\u793a\u4e86GPT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u5176\u5b9e\u548cELMO\u662f\u7c7b\u4f3c\u7684\uff0c\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u4e24\u70b9\uff1a\u9996\u5148\uff0c\u7279\u5f81\u62bd\u53d6\u91c7\u7528Transformer\uff1b\u5176\u6b21\uff0cGPT\u7684\u9884\u8bad\u7ec3\u867d\u7136\u4ecd\u7136\u662f\u4ee5\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a\u76ee\u6807\u4efb\u52a1\uff0c\u4f46\u662f\u91c7\u7528\u7684\u662f\u5355\u5411\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u6240\u8c13\u201c\u5355\u5411\u201d\u7684\u542b\u4e49\u662f\u6307\uff1a\u53ea\u4f7f\u7528\u5355\u8bcd\u7684\u4e0a\u6587\u8fdb\u884c\u9884\u6d4b\uff0c\u800c\u629b\u5f00\u4e86\u4e0b\u6587\u3002 GPT\u8bba\u6587\u7ed9\u4e86\u4e00\u4e2a\u6539\u9020\u65bd\u5de5\u56fe\u5982\u4e0a\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff1a\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0d\u7528\u600e\u4e48\u52a8\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\u5373\u53ef\uff1b\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u95ee\u9898\uff0c\u6bd4\u5982Entailment\uff0c\u4e24\u4e2a\u53e5\u5b50\u4e2d\u95f4\u518d\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\uff1b\u5bf9\u6587\u672c\u76f8\u4f3c\u6027\u5224\u65ad\u95ee\u9898\uff0c\u628a\u4e24\u4e2a\u53e5\u5b50\u987a\u5e8f\u98a0\u5012\u4e0b\u505a\u51fa\u4e24\u4e2a\u8f93\u5165\u5373\u53ef\uff0c\u8fd9\u662f\u4e3a\u4e86\u544a\u8bc9\u6a21\u578b\u53e5\u5b50\u987a\u5e8f\u4e0d\u91cd\u8981\uff1b\u5bf9\u4e8e\u591a\u9879\u9009\u62e9\u95ee\u9898\uff0c\u5219\u591a\u8def\u8f93\u5165\uff0c\u6bcf\u4e00\u8def\u628a\u6587\u7ae0\u548c\u7b54\u6848\u9009\u9879\u62fc\u63a5\u4f5c\u4e3a\u8f93\u5165\u5373\u53ef\u3002\u4ece\u4e0a\u56fe\u53ef\u770b\u51fa\uff0c\u8fd9\u79cd\u6539\u9020\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4e0d\u540c\u4efb\u52a1\u53ea\u9700\u8981\u5728\u8f93\u5165\u90e8\u5206\u65bd\u5de5\u5373\u53ef\u3002 BERT \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684Transformer \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684Mask-LM(Mask-Language Model) \u5229\u7528Next Sentence Prediction\u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86GPT\u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97BERT\u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1 Why does language modeling work so well? \u8bed\u8a00\u5efa\u6a21\u662f\u4e00\u9879\u975e\u5e38\u56f0\u96be\u7684\u4efb\u52a1\uff0c\u5373\u4f7f\u5bf9\u4eba\u7c7b\u6765\u8bf4\u4e5f\u662f\u5982\u6b64\u3002 \u9884\u671f\u8bed\u8a00\u6a21\u578b\u5c06\u4efb\u4f55\u53ef\u80fd\u7684\u4e0a\u4e0b\u6587\u538b\u7f29\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\uff0c\u8be5\u5411\u91cf\u6982\u62ec\u4e86\u53ef\u80fd\u7684\u5b8c\u6210\u540e\u7684\u53e5\u5b50\u3002 \u201cThey walked down the street to ???\u201d \u4e3a\u4e86\u6709\u673a\u4f1a\u89e3\u51b3\u8fd9\u4e2a\u4efb\u52a1\uff0c\u6a21\u578b\u5fc5\u987b\u5b66\u4e60\u8bed\u6cd5\u3001\u8bed\u4e49\u3001\u5bf9\u4e16\u754c\u4e8b\u5b9e\u7f16\u7801\u7b49\u7b49\u3002 \u7ed9\u5b9a\u8db3\u591f\u7684\u6570\u636e\u3001\u4e00\u4e2a\u5de8\u5927\u7684\u6a21\u578b\u548c\u8db3\u591f\u7684\u8ba1\u7b97\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e00\u9879\u5408\u7406\u7684\u5de5\u4f5c\uff01 \u4ece\u7ecf\u9a8c\u4e0a\u770b\uff0c\u8bed\u8a00\u6a21\u578b\u6bd4\u7ffb\u8bd1\uff0c\u81ea\u7f16\u7801\u66f4\u6709\u6548\uff1a\u201cLanguage Modeling Teaches You More Syntax than Translation Does\u201d ( Zhang et al. 2018 ) Interesting properties of pretraining \u00b6 Pretraining reduces need for annotated data Scaling up pretraining \u4e0a\u56fe\u4e3a GloVe \u4e2d\u589e\u52a0\u8bed\u6599\u5e93\u89c4\u6a21\u5bf9\u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd\u3002 \u6570\u636e\u96c6\u8d8a\u5927\u8d8a\u597d\uff0c\u5e76\u4e14\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\u6bd4\u65b0\u95fb\u6587\u672c\u6570\u636e\u96c6\u8981\u597d \u56e0\u4e3a\u7ef4\u57fa\u767e\u79d1\u5c31\u662f\u5728\u89e3\u91ca\u6982\u5ff5\u4ee5\u53ca\u4ed6\u4eec\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u8054\uff0c\u66f4\u591a\u7684\u8bf4\u660e\u6027\u6587\u672c\u663e\u793a\u4e86\u4e8b\u7269\u4e4b\u95f4\u7684\u6240\u6709\u8054\u7cfb \u800c\u65b0\u95fb\u5e76\u4e0d\u53bb\u89e3\u91ca\uff0c\u800c\u53ea\u662f\u53bb\u9610\u8ff0\u4e00\u4e9b\u4e8b\u4ef6 Cross-lingual pretraining \u00b6 Much work on training cross-lingual word embeddings(Overview: Ruder et al. (2017) ) Idea: train each language separately, then align. Recent work aligning ELMo: Schuster et al., (NAACL 2019) ACL 2019 Tutorial on Unsupervised Cross-lingual Representation Learning CS224n-2019-20 The Future of NLP + Deep Learning Cross-lingual Polyglot Pretraining \u5173\u952e\u601d\u60f3:\u901a\u8fc7\u5728\u591a\u79cd\u8bed\u8a00\u4e0a\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\uff0c\u5b9e\u73b0\u8de8\u8bed\u8a00\u7684\u8bcd\u6c47\u8868\u548c\u8868\u793a\u3002 \u4f18\u70b9:\u6613\u4e8e\u5b9e\u73b0\uff0c\u53ef\u5355\u72ec\u8fdb\u884c\u8de8\u8bed\u8a00\u9884\u57f9\u8bad \u7f3a\u70b9:\u4f4e\u8d44\u6e90\u8bed\u8a00\u5bfc\u81f4\u5176\u8868\u793a\u5b66\u4e60\u7684\u4e0d\u591f\u597d LASER:Use parallel data for sentence representations( Artetxe & Schwenk, 2018 ) Multilingual BERT : BERT trained jointly on 100 languages Rosita:Polyglot contextual representations( Mulcaire et al., NAACL 2019 ) XLM: Cross lingualLM ( Lample & Conneau, 2019 ) Hands-on #1 : Pretraining a Transformer Language Model \u00b6 \u4e24\u4e2a mask padding_mask masks the padding tokens. It is specific to each sample in the batch: attn_mask is the same for all samples in the batch. It masks the previous tokens for causal transformers: 3. What is in a Representation? \u00b6 Why care about what is in a representation? \u5e26\u6709\u4e0b\u6e38\u4efb\u52a1\u7684\u5916\u90e8\u8bc4\u4f30 \u590d\u6742\u591a\u6837\uff0c\u968f\u7279\u5b9a\u4efb\u52a1\u800c\u4e0d\u540c \u77e5\u9053\u8bed\u8a00\u7684\u8868\u793a \u6cdb\u5316\u5230\u5176\u4ed6\u4efb\u52a1\u7684\u65b0\u7684\u8f93\u5165 \u4f5c\u4e3a\u53ef\u80fd\u6539\u8fdb\u9884\u8bad\u7ec3\u5de5\u4f5c\u7684\u4e2d\u95f4 \u53ef\u89e3\u91ca\uff01 \u6211\u4eec\u5f97\u5230\u7ed3\u679c\u7684\u539f\u56e0\u662f\u5426\u6b63\u786e? \u53d1\u73b0\u504f\u89c1\u2026\u2026 What to analyze? Analysis Method 1: Visualization Hold the embeddings / network activations static or frozen Plotting embeddings in a lower dimensional (2D/3D) space t-SNE van der Maaten & Hinton, 2008 PCA projections Visualizing word analogies Mikolov et al. 2013 \u7a7a\u95f4\u5173\u8054 \\(w_{king} - w_{man} + w_{woman} \\approx w_{queen}\\) High-level view of lexical semantics Only a limited number of examples Connection to other tasks is unclear Goldberg, 2017 \u795e\u7ecf\u5143\u6fc0\u6d3b\u503c\u4e0e\u7279\u5f81/\u6807\u7b7e\u76f8\u5173 \u8868\u793a\u5bf9\u53ef\u8bc6\u522b\u7279\u5f81\u7684\u5b66\u4e60 \u5982\u4f55\u9009\u62e9\u54ea\u4e2a\u795e\u7ecf\u5143\uff1f \u53ef\u89e3\u91ca != \u91cd\u8981( Morcos et al., 2018 ) \u6d41\u884c\u4e8e\u673a\u5668\u7ffb\u8bd1\uff0c\u6216\u5176\u4ed6seq2seq\u67b6\u6784: \u6e90\u548c\u76ee\u6807\u5b57\u4e4b\u95f4\u7684\u5bf9\u9f50\u3002 \u957f\u8ddd\u79bb\u8bcd-\u8bcd\u4f9d\u8d56(\u53e5\u5185\u6ce8\u610f) \u7ed3\u6784\u4e0a\u7684\u4eae\u70b9 \u62e5\u6709\u590d\u6742\u7684\u6ce8\u610f\u529b\u673a\u5236\u53ef\u80fd\u662f\u4e00\u4ef6\u597d\u4e8b! \u5206\u5c42\u7684 \u89e3\u91ca\u53ef\u80fd\u5f88\u68d8\u624b \u53ea\u6709\u51e0\u4e2a\u4f8b\u5b50\uff1f Robust corpus-wide trends? Next ! Analysis Method 2: Behavioral Probes RNN-based\u8bed\u8a00\u6a21\u578b \u4e3b\u8c13\u5173\u7cfb\u4e2d\u7684\u6570\u5b57\u4e00\u81f4\u6027 \u81ea\u7136\u7684\u3001\u4e0d\u81ea\u7136\u7684\u6216\u4e0d\u5408\u8bed\u6cd5\u7684\u53e5\u5b50 \u5bf9\u8f93\u51fa\u56f0\u60d1\u5ea6\u8fdb\u884c\u8bc4\u4f30 RNNs\u4f18\u4e8e\u5176\u4ed6\u975e\u795e\u7ecfBaseline \u5f53\u663e\u5f0f\u5730\u4f7f\u7528\u8bed\u6cd5\u8bad\u7ec3\u65f6\uff0c\u6027\u80fd\u4f1a\u63d0\u9ad8(Kuncoro\u7b49\uff0c2018)\u3002 Probe:\u53ef\u80fd\u6613\u53d7\u5171\u73b0\u504f\u5dee\u7684\u5f71\u54cd \u201cdogs in the neighborhood bark(s)\u201d \u4ee5\u524d\u7684\u53e5\u5b50\u53ef\u80fd\u548c\u539f\u6765\u7684\u592a\u4e0d\u4e00\u6837\u4e86\u2026 Analysis Method 3: Classifier Probes Hold the embeddings / network activations static and train a simple supervised model on top Probing Surface-level Features \u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\uff0c\u9884\u6d4b\u5c5e\u6027\u5982 \u957f\u5ea6 \u8fd9\u4e2a\u53e5\u5b50\u91cc\u6709\u4e00\u4e2a\u5355\u8bcd\u5417 \u7ed9\u51fa\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u9884\u6d4b\u5c5e\u6027\uff0c\u4f8b\u5982\uff1a \u4ee5\u524d\u89c1\u8fc7\u7684\u8bcd\uff0c\u4e0e\u8bed\u8a00\u6a21\u578b\u5f62\u6210\u5bf9\u6bd4 \u8bcd\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e \u68c0\u67e5\u8bb0\u5fc6\u7684\u80fd\u529b \u8bad\u7ec3\u6709\u7d20\u7684\u3001\u66f4\u4e30\u5bcc\u7684\u4f53\u7cfb\u7ed3\u6784\u5f80\u5f80\u8fd0\u884c\u5f97\u66f4\u597d \u5728\u8bed\u8a00\u6570\u636e\u4e0a\u8bad\u7ec3\u80fd\u8bb0\u5fc6\u7684\u66f4\u597d Probing Morphology, Syntax, Semantics \u5f62\u6001 \u8bcd\u7ea7\u522b\u7684\u8bed\u6cd5 POS tags, CCG supertags Constituent parent, grandparent \u90e8\u5206\u8bed\u6cd5 \u4f9d\u8d56\u5173\u7cfb \u90e8\u5206\u8bed\u4e49 \u5b9e\u4f53\u5173\u7cfb \u6307\u79f0\u76f8\u540c \u89d2\u8272 Probing classifier findings Contextualized > non-contextualized \u5c24\u5176\u662f\u5728\u53e5\u6cd5\u4efb\u52a1\u4e0a \u8bed\u4e49\u4efb\u52a1\u7684\u66f4\u7d27\u5bc6\u6027\u80fd \u53cc\u5411\u4e0a\u4e0b\u6587\u5f88\u91cd\u8981 BERT (large) almost always gets the highest performance Grain of salt: \u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u5728\u4e0d\u540c\u7684\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u67b6\u6784\u2026\u2026 Probing: Layers of the network RNN\u5c42: \u901a\u7528\u8bed\u8a00\u5c5e\u6027 \u6700\u4f4e\u5c42:\u5f62\u6001\u5b66 \u4e2d\u95f4\u5c42:\u8bed\u6cd5 \u6700\u9ad8\u5c42\u6b21:\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u8bed\u4e49 Transformer \u5c42: \u4e0d\u540c\u4efb\u52a1\u7684\u4e0d\u540c\u8d8b\u52bf\uff1bmiddle-heavy \u53c2\u89c1 Tenney et. al., 2019 Probing: Pretraining Objectives \u8bed\u8a00\u5efa\u6a21\u4f18\u4e8e\u5176\u4ed6\u975e\u76d1\u7763\u548c\u76d1\u7763\u76ee\u6807\u3002 \u673a\u5668\u7ffb\u8bd1 \u4f9d\u8d56\u6027\u89e3\u6790 Skip-thought \u4f4e\u8d44\u6e90\u8bbe\u7f6e(\u8bad\u7ec3\u6570\u636e\u7684\u5927\u5c0f)\u53ef\u80fd\u5bfc\u81f4\u76f8\u53cd\u7684\u8d8b\u52bf\u3002 What have we learnt so far? \u8868\u5f81\u662f\u5bf9\u67d0\u4e9b\u8bed\u8a00\u73b0\u8c61\u7684\u9884\u6d4b: \u7ffb\u8bd1\u4e2d\u7684\u5bf9\u9f50\uff0c\u53e5\u6cd5\u5c42\u6b21 \u6709\u8bed\u6cd5\u548c\u6ca1\u6709\u8bed\u6cd5\u7684\u9884\u8bad\u7ec3: \u6709\u8bed\u6cd5\u7684\u9884\u8bad\u7ec3\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd \u4f46\u662f\u5982\u679c\u6ca1\u6709\u8bed\u6cd5\uff0c\u81f3\u5c11\u8fd8\u662f\u4f1a\u5b66\u5230\u4e9b\u8bed\u6cd5\u6982\u5ff5 ( Williams et al. 2018 ) \u7f51\u7edc\u67b6\u6784\u51b3\u5b9a\u4e86\u8868\u793a\u4e2d\u7684\u5185\u5bb9 \u53e5\u6cd5\u4e0eBert Transformer ( Tenney et al., 2019 ; Goldberg, 2019 ) \u8de8\u67b6\u6784\u7684\u4e0d\u540c\u5c42\u6b21\u8d8b\u52bf Open questions about probes \u4e00\u4e2a\u597d\u7684\u63a2\u6d4b\u5668\u5e94\u8be5\u5bfb\u627e\u4ec0\u4e48\u4fe1\u606f? \u63a2\u7d22\u4e00\u4e2a\u63a2\u6d4b\u5668 \u63a2\u6d4b\u6027\u80fd\u544a\u8bc9\u6211\u4eec\u4ec0\u4e48? \u5f88\u96be\u7efc\u5408\u5404\u79cd\u57fa\u7ebf\u7684\u7ed3\u679c\u2026 \u5b83\u672c\u8eab\u4f1a\u5e26\u6765\u4e00\u4e9b\u590d\u6742\u6027\u5417 \u7ebf\u6027\u6216\u975e\u7ebf\u6027\u5206\u7c7b\u3002 \u884c\u4e3a:\u8f93\u5165\u53e5\u5b50\u7684\u8bbe\u8ba1 \u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u63a2\u9488\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807\u5417? \u53ef\u80fd\u4f1a\u7834\u574f\u76ee\u7684\u2026 Analysis Method 4: Model Alterations Li et al., 2016 \u9010\u6b65\u5220\u9664\u6216\u5c4f\u853d\u7f51\u7edc\u7ec4\u4ef6 \u8bcd\u5d4c\u5165\u7ef4\u5ea6 \u9690\u85cf\u5355\u4f4d \u8f93\u5165-\u5355\u8bcd/\u77ed\u8bed So, what is in a representation? \u8fd9\u8981\u770b\u4f60\u600e\u4e48\u770b\u4e86! \u53ef\u89c6\u5316: \u9e1f\u77b0 \u5f88\u5c11\u7684\u6837\u54c1\u2014\u2014\u53ef\u80fd\u4f1a\u8ba9\u4eba\u60f3\u8d77\u6311\u9009 \u8c03\u67e5: \u53d1\u73b0\u5fae\u7c92\u8303\u56f4\u5185\u7684\u7279\u5b9a\u5c5e\u6027 \u53ef\u80fd\u4f1a\u5f15\u5165\u81ea\u5df1\u7684\u504f\u89c1\u2026 \u7f51\u7edc\u7684\u66ff\u4ee3\u54c1: \u5bf9\u6539\u8fdb\u5efa\u6a21\u5f88\u6709\u5e2e\u52a9\uff0c \u53ef\u4ee5\u662f\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684 Interpretability + transferability to downstream tasks is key 4. Adaptation \u00b6 How to adapt the pretrained model \u6211\u4eec\u53ef\u4ee5\u5728\u51e0\u4e2a\u6b63\u4ea4\u65b9\u5411\u4e0a\u505a\u51b3\u5b9a: \u7ed3\u6784\u7684\u4fee\u6539\uff1f \u4e3a\u4e86\u9002\u5e94\uff0c\u9700\u8981\u5bf9\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4f53\u7cfb\u7ed3\u6784\u8fdb\u884c\u591a\u5927\u7684\u66f4\u6539 \u4f18\u5316\u65b9\u6848\uff1f \u5728\u9002\u5e94\u8fc7\u7a0b\u4e2d\u9700\u8981\u8bad\u7ec3\u54ea\u4e9b\u91cd\u91cf\u4ee5\u53ca\u9075\u5faa\u4ec0\u4e48\u65f6\u95f4\u8868 \u66f4\u591a\u4fe1\u53f7:\u5f31\u76d1\u7763\u3001\u591a\u4efb\u52a1\u548c Ensembling \u5982\u4f55\u4e3a\u76ee\u6807\u4efb\u52a1\u83b7\u53d6\u66f4\u591a\u7684\u76d1\u63a7\u4fe1\u53f7 4.1 Architecture \u00b6 \u4e24\u4e2a\u901a\u7528\u9009\u9879\uff1a \u4fdd\u6301\u9884\u8bad\u7ec3\u6a21\u578b\u5185\u90e8\u4e0d\u53d8 \u5728\u9876\u90e8\u6dfb\u52a0\u5206\u7c7b\u5668\uff0c\u5728\u5e95\u90e8\u6dfb\u52a0\u5d4c\u5165\uff0c\u5c06\u8f93\u51fa\u4f5c\u4e3a\u7279\u5f81 \u4fee\u6539\u9884\u5148\u8bad\u7ec3\u7684\u6a21\u578b\u5185\u90e8\u67b6\u6784 \u521d\u59cb\u5316\u7f16\u7801\u5668-\u89e3\u7801\u5668\u3001\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539\u3001\u9002\u914d\u5668 4.1.A \u2013 Architecture: Keep model unchanged \u00b6 \u5e38\u89c4\u5de5\u4f5c\u6d41 \u5982\u679c\u5bf9\u76ee\u6807\u4efb\u52a1\u65e0\u6548\uff0c\u5219\u5220\u9664 \u9884\u8bad\u7ec3\u7684\u4efb\u52a1\u5934 \u793a\u4f8b\uff1a\u4ece\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u4e2d\u5220\u9664softmax\u5206\u7c7b\u5668 \u4e0d\u603b\u662f\u9700\u8981:\u4e00\u4e9b\u9002\u5e94\u65b9\u6848\u91cd\u7528\u4e86\u9884\u8bad\u7ec3\u7684\u76ee\u6807/\u4efb\u52a1\uff0c\u4f8b\u5982\u7528\u4e8e\u591a\u4efb\u52a1\u5b66\u4e60 \u5728\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u9876\u90e8/\u5e95\u90e8\u6dfb\u52a0\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u76ee\u6807\u5c42 \u7b80\u5355\uff1a\u5728\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4e0a\u6dfb\u52a0\u7ebf\u6027\u5c42 \u66f4\u590d\u6742\u7684:\u5c06\u6a21\u578b\u8f93\u51fa\u4f5c\u4e3a\u5355\u72ec\u6a21\u578b\u7684\u8f93\u5165 \u5f53\u76ee\u6807\u4efb\u52a1\u9700\u8981\u9884\u5148\u8bad\u7ec3\u7684\u5d4c\u5165\u4e2d\u4e0d\u53ef\u7528\u7684\u4ea4\u4e92\u65f6\uff0c\u901a\u5e38\u662f\u6709\u76ca\u7684 4.1.B \u2013 Architecture: Modifying model internals \u00b6 \u5404\u79cd\u5404\u6837\u7684\u539f\u56e0: \u9002\u5e94\u7ed3\u6784\u4e0a\u4e0d\u540c\u7684\u76ee\u6807\u4efb\u52a1 \u4f8b\u5982:\u4f7f\u7528\u5355\u4e2a\u8f93\u5165\u5e8f\u5217(\u4f8b\u5982:\u8bed\u8a00\u5efa\u6a21)\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u4f46\u662f\u9002\u5e94\u591a\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u4efb\u52a1(\u4f8b\u5982:\u7ffb\u8bd1\u3001\u6761\u4ef6\u751f\u6210\u2026\u2026) \u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u6743\u91cd\u5c3d\u53ef\u80fd\u521d\u59cb\u5316\u7ed3\u6784\u4e0d\u540c\u7684\u76ee\u6807\u4efb\u52a1\u6a21\u578b \u4f8b\u5982:\u4f7f\u7528\u5355\u8bedLMs\u521d\u59cb\u5316MT\u7684\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u53c2\u6570 \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539 \u63d0\u4f9b\u5bf9\u76ee\u6807\u4efb\u52a1\u6709\u7528\u7684\u9884\u8bad\u7ec3\u6a21\u578b \u4f8b\u5982\uff1a\u6dfb\u52a0\u8df3\u8fc7/\u5269\u4f59\u8fde\u63a5\uff0c\u6ce8\u610f\u529b \u4f7f\u7528\u8f83\u5c11\u7684\u53c2\u6570\u8fdb\u884c\u8c03\u6574: \u66f4\u5c11\u7684\u53c2\u6570\u8fdb\u884c\u5fae\u8c03 \u5728\u6a21\u578b\u53c2\u6570\u4e0d\u65ad\u589e\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u975e\u5e38\u6709\u7528 \u4f8b\u5982:\u5728\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u5c42\u4e4b\u95f4\u6dfb\u52a0\u74f6\u9888\u6a21\u5757(\u201c\u9002\u914d\u5668\u201d)( Rebuffi et al., NIPS 2017 ; CVPR 2018 ) Adapters \u901a\u5e38\u5728\u4e8e\u73b0\u6709\u5c42\u5e73\u884c\u7684\u57fa\u7840\u4e0a\u4f7f\u7528\u5269\u4f59\u8fde\u63a5\u8fde\u63a5 \u6bcf\u5c42\u653e\u7f6e\u6548\u679c\u6700\u4f73(\u5e95\u5c42\u6548\u679c\u8f83\u5c0f) \u4e0d\u540c\u7684\u64cd\u4f5c(\u5377\u79ef\uff0c\u81ea\u6211\u6ce8\u610f)\u662f\u53ef\u80fd\u7684 \u7279\u522b\u9002\u5408 Transformer \u7b49\u6a21\u5757\u5316\u67b6\u6784( Houlsby et al., ICML 2019 ; Stickland and Murray, ICML 2019 ) Adapters ( Stickland & Murray, ICML 2019 ) \u591a\u5934\u7684\u5173\u6ce8(MH;\u8de8\u5c42\u5171\u4eab)\u4e0eBERT\u7684self-attention (SA)\u5c42\u5e76\u884c\u4f7f\u7528 \u4e24\u8005\u90fd\u88ab\u52a0\u5728\u4e00\u8d77\uff0c\u5e76\u8f93\u5165\u5230 Layer-norm (LN)\u4e2d Hands-on #2 : Adapting our pretrained model \u00b6 Let\u2019s see how a simple fine-tuning scheme can be implemented with our pretrained model: Plan Start from our Transformer language model Adapt the model to a target task: keep the model core unchanged, load the pretrained weights add a linear layer on top, newly initialized use additional embeddings at the bottom, newly initialized Adaptation task \u6211\u4eec\u9009\u62e9\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u4e0b\u6e38\u4efb\u52a1 TREC-6: The Text REtrieval Conference (TREC) Question Classification (Li et al., COLING 2002) TREC consists of open-domain, fact-based questions divided into broad semantic categories contains 5500 labeled training questions & 500 testing questions with 6 labels: NUM, LOC, HUM, DESC, ENTY, ABBR \u4f8b\u5982 \u8fc1\u79fb\u5b66\u4e60\u6a21\u578b\u9002\u7528\u4e8e\u8fd9\u79cd\u4f4e\u8d44\u6e90\u7684\u4efb\u52a1 First adaptation scheme \u4fee\u6539: \u4fdd\u6301\u6a21\u578b\u5185\u90e8\u4e0d\u53d8 \u5728\u4e0a\u9762\u6dfb\u52a0\u4e00\u4e2a\u7ebf\u6027\u56fe\u5c42 \u5728\u5e95\u90e8\u6dfb\u52a0\u989d\u5916\u7684\u5d4c\u5165(\u5206\u7c7b\u6807\u8bb0) \u8ba1\u7b97\u6d41\u7a0b: \u6a21\u578b\u8f93\u5165:\u6700\u540e\u5e26\u6709\u5206\u7c7b\u6807\u8bb0\u7684\u6807\u8bb0\u5316\u95ee\u9898 \u63d0\u53d6\u4e0e\u5206\u7c7b\u4ee4\u724c\u5173\u8054\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \u901a\u8fc7\u7ebf\u6027\u5c42\u4e2d\u7684\u9690\u85cf\u72b6\u6001\u548csoftmax\u5f97\u5230\u7c7b\u6982\u7387 \u5907\u6ce8: \u9519\u8bef\u7387\u4e0b\u964d\u5f97\u5f88\u5feb\uff01\u5728\u4e00\u4e2a\u5faa\u73af\u4e4b\u540e\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86>90%\u7684\u51c6\u786e\u7387\u3002 Fine-tuning \u5728 Transfer Learning \u4e2d\u662f\u9ad8\u5ea6\u6570\u636e\u9ad8\u6548\u7684 \u6211\u4eec\u7684\u9884\u8bad\u7ec3\u548c\u5fae\u8c03\u8d85\u53c2\u6570\u76f4\u63a5\u6765\u81ea\u4e8e\u76f8\u5173\u6a21\u578b\u7684\u6587\u732e Fine-tuning \u5f80\u5f80\u5728\u7cbe\u786e\u8d85\u53c2\u6570\u7684\u9009\u62e9\u4e0b\u662f\u5065\u58ee\u7684 \u8ba9\u6211\u4eec\u7528\u4e00\u4e9b\u5173\u4e8e\u7a33\u5065\u6027\u548c\u65b9\u5dee\u7684\u989d\u5916\u8bcd\u6c47\u6765\u7ed3\u675f\u8fd9\u4e2a\u5b9e\u8df5 \u5927\u578b\u9884\u8bad\u7ec3\u6a21\u578b(\u5982BERT Large)\u5728\u5bf9\u5c0f\u8bad\u7ec3\u96c6\u7684\u4efb\u52a1\u8fdb\u884c\u5fae\u8c03\u65f6\uff0c\u5bb9\u6613\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002 \u89c2\u5bdf\u5230\u7684\u884c\u4e3a\u901a\u5e38\u662f\u201c\u65ad\u65ad\u7eed\u7eed\u7684\u201d:\u8981\u4e48\u6548\u679c\u5f88\u597d\uff0c\u8981\u4e48\u6839\u672c\u4e0d\u7ba1\u7528\u3002 \u7406\u89e3\u8fd9\u79cd\u884c\u4e3a\u7684\u6761\u4ef6\u548c\u539f\u56e0(\u6a21\u578b\u3001\u9002\u5e94\u65b9\u6848)\u662f\u4e00\u4e2a\u5f00\u653e\u7684\u7814\u7a76\u95ee\u9898\u3002 4.2 Optimization \u00b6 \u6d89\u53ca\u5230\u4f18\u5316\u672c\u8eab\u7684\u51e0\u4e2a\u65b9\u5411: \u9009\u62e9\u6211\u4eec\u5e94\u8be5\u66f4\u65b0\u7684\u6743\u91cd Feature extraction, fine-tuning, adapters \u9009\u62e9\u5982\u4f55\u4ee5\u53ca\u4f55\u65f6\u66f4\u65b0\u6743\u91cd From top to bottom, gradual unfreezing, discriminative fine-tuning \u8003\u8651\u5b9e\u4e8b\u6c42\u662f\u7684\u6743\u8861 Space and time complexity, performance 4.2.A \u2013 Optimization: Which weights? \u00b6 \u4e3b\u8981\u95ee\u9898:\u8c03\u6574\u8fd8\u662f\u4e0d\u8c03\u6574(\u9884\u5148\u8bad\u7ec3\u597d\u7684\u91cd\u91cf)? \u4e0d\u6539\u53d8\u9884\u5148\u8bad\u7ec3\u7684\u91cd\u91cf Feature extraction, adapters \u6539\u53d8\u9884\u8bad\u7ec3\u6743\u91cd fine-tuning \u4e0d\u8981\u78b0\u9884\u5148\u8bad\u7ec3\u597d\u7684\u6743\u91cd\uff01 Feature extraction: (\u9884\u8bad\u7ec3\u7684)\u6743\u91cd\u88ab\u51bb\u7ed3 \u7ebf\u6027\u5206\u7c7b\u5668\u662f\u5728\u9884\u8bad\u7ec3\u7684\u8868\u793a\u4e0a\u8fdb\u884c\u8bad\u7ec3\u7684 \u4e0d\u8981\u53ea\u4f7f\u7528\u9876\u5c42\u7684\u7279\u6027! \u5b66\u4e60\u5c42\u7684\u7ebf\u6027\u7ec4\u5408 \u6216\u8005\uff0c\u5728\u4e0b\u6e38\u6a21\u578b\u4e2d\u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u7684\u8868\u793a\u4f5c\u4e3a\u7279\u6027 Adapters\uff1a \u5728\u73b0\u6709\u5c42\u4e4b\u95f4\u6dfb\u52a0\u7684\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6a21\u5757 \u53ea\u6709 adapters \u88ab\u8bad\u7ec3 \u4fee\u6539\u9884\u8bad\u7ec3\u6743\u91cd\uff01 Fine-tuning: \u91c7\u7528\u9884\u8bad\u7ec3\u7684\u6743\u503c\u4f5c\u4e3a\u4e0b\u6e38\u6a21\u578b\u53c2\u6570\u7684\u521d\u59cb\u5316 \u6574\u4e2a\u9884\u8bad\u7ec3\u7684\u4f53\u7cfb\u7ed3\u6784\u5728\u9002\u5e94\u9636\u6bb5\u8fdb\u884c\u57f9\u8bad Hands-on #3 : Using Adapters and freezing \u00b6 Second adaptation scheme: Using Adapters Modifications: add Adapters inside the backbone model: Linear \u21e8 ReLU \u21e8 Linear with a skip-connection As previously: add a linear layer on top use an additional embedding (classification token) at the bottom We will only train the adapters, the added linear layer and the embeddings. The other parameters of the model will be frozen . 4.2.B \u2013 Optimization: What schedule? \u00b6 \u6211\u4eec\u5df2\u7ecf\u51b3\u5b9a\u8981\u66f4\u65b0\u54ea\u4e9b\u6743\u91cd\uff0c\u4f46\u662f\u4ee5\u4ec0\u4e48\u987a\u5e8f\u4ee5\u53ca\u5982\u4f55\u66f4\u65b0\u5b83\u4eec\uff1f \u52a8\u673a\uff1a\u6211\u4eec\u5e0c\u671b\u907f\u514d\u8986\u76d6\u6709\u7528\u7684\u9884\u8bad\u7ec3\u4fe1\u606f\u5e76\u6700\u5927\u5316\u79ef\u6781\u7684\u77e5\u8bc6\u8fc1\u79fb\u3002 \u76f8\u5173\u6982\u5ff5\uff1a\u707e\u96be\u9057\u5fd8\uff08McCloskey\uff06Cohen\uff0c1989; French\uff0c1999\uff09\u4e00\u4e2a\u6a21\u578b\u5fd8\u8bb0\u4e86\u5b83\u6700\u521d\u53d7\u8fc7\u8bad\u7ec3\u7684\u4efb\u52a1 \u6307\u5bfc\u539f\u5219\uff1a\u4ece\u4e0a\u5230\u4e0b\u66f4\u65b0 \u65f6\u95f4\u4e0a\u6e10\u8fdb\uff1a\u51bb\u7ed3 \u5f3a\u5ea6\u4e0a\u6e10\u8fdb\uff1a\u6539\u53d8\u5b66\u4e60\u901f\u5ea6 \u6e10\u8fdb\u4e0e\u9884\u8bad\u7ec3\u6a21\u578b:\u6b63\u5219\u5316 Optimization: Freezing \u4e3b\u8981\u76f4\u89c9\uff1a\u5728\u4e0d\u540c\u5206\u5e03\u548c\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u540c\u65f6\u8bad\u7ec3\u6240\u6709\u5c42\u53ef\u80fd\u5bfc\u81f4\u4e0d\u7a33\u5b9a\u7684\u4e0d\u826f\u89e3\u51b3\u65b9\u6848\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5355\u72ec\u8bad\u7ec3\u6bcf\u4e00\u5c42\uff0c\u4f7f\u4ed6\u4eec\u6709\u65f6\u95f4\u9002\u5e94\u65b0\u7684\u4efb\u52a1\u548c\u6570\u636e\u3002 \u56de\u5230\u65e9\u671f\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u7684\u5206\u5c42\u8bad\u7ec3\uff08 Hinton et al., 2006 ; Bengio et al., 2007 \uff09 \u76f8\u5173\u5b9e\u4f8b Freezing all but the top layer ( Long et al., ICML 2015 ) Chain-thaw ( Felbo et al., EMNLP 2017 ):\u6bcf\u6b21\u8bad\u7ec3\u4e00\u5c42 \u5148\u8bad\u7ec3\u65b0\u589e\u7684\u5c42 \u518d\u81ea\u5e95\u5411\u4e0a\uff0c\u6bcf\u6b21\u8bad\u7ec3\u4e00\u5c42\uff08\u4e0d\u518d\u8bad\u7ec3\u65b0\u589e\u7684\u90a3\u4e00\u5c42\uff0c\u5176\u4f59\u5c42\u4ee5\u4f1a\u5728\u4e0d\u8bad\u7ec3\u65f6\u88ab\u540c\u65f6\u51bb\u7ed3\uff09 \u8bad\u7ec3\u6240\u6709\u5c42\uff08\u5305\u62ec\u65b0\u589e\u5c42\uff09 Gradually unfreezing ( Howard & Ruder, ACL 2018 ): \u9010\u5c42\u89e3\u51bb\uff08\u81ea\u9876\u5411\u4e0b\uff09 Sequential unfreezing ( Chronopoulou et al., NAACL 2019 ): \u8d85\u53c2\u6570\u63a7\u5236\u5fae\u8c03\u8f6e\u6570 \u5fae\u8c03 n \u8f6e\u6b21\u65b0\u589e\u53c2\u6570\uff08\u51bb\u7ed3\u9664\u4e86\u65b0\u589e\u5c42\u4ee5\u5916\u7684\u5c42\uff09 \u5fae\u8c03 k \u8f6e\u6b21\u5d4c\u5165\u5c42\u4ee5\u5916\u7684\u9884\u8bad\u7ec3\u5c42 \u8bad\u7ec3\u6240\u6709\u5c42\u76f4\u5230\u6536\u655b \u5171\u6027\uff1a\u6700\u540e\u5bf9\u6240\u6709\u53c2\u6570\u8fdb\u884c\u8054\u5408\u8bad\u7ec3 Hands-on #4 :Using gradual unfreezing \u00b6 \u9010\u6b65\u89e3\u51bb\u7c7b\u4f3c\u4e8e\u6211\u4eec\u4e4b\u524d\u7684\u51bb\u7ed3\u8fc7\u7a0b\u3002\u6211\u4eec\u5148\u51bb\u7ed3\u9664\u65b0\u589e\u53c2\u6570\u5916\u7684\u6240\u6709\u6a21\u578b: \u7136\u540e\u6211\u4eec\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u9010\u6e10\u89e3\u51bb\u4e00\u4e2a\u989d\u5916\u7684\u6a21\u5757\uff0c\u8fd9\u6837\u6211\u4eec\u5728\u6700\u540e\u5c31\u53ef\u4ee5\u8bad\u7ec3\u5b8c\u6574\u7684\u6a21\u578b\u4e86: Transformer \u4e2d\u7684\u9010\u6b65\u89e3\u51bb\u5c1a\u672a\u5f97\u5230\u8be6\u7ec6\u7684\u7814\u7a76 \u6ca1\u6709\u6587\u732e\u63d0\u5230\u5177\u4f53\u7684\u8d85\u53c2\u6570 \u6b8b\u5dee\u8fde\u63a5\u53ef\u80fd\u4f1a\u5bf9\u65b9\u6cd5\u4ea7\u751f\u5f71\u54cd \u5e94\u8be5\u9002\u5e94 LSTM \u8d85\u53c2\u6570 4.2.B \u2013 Optimization: Learning rates \u00b6 \u4e3b\u8981\u60f3\u6cd5\uff1a\u4f7f\u7528\u66f4\u4f4e\u7684\u5b66\u4e60\u7387\u6765\u907f\u514d\u8986\u76d6\u6389\u6709\u7528\u7684\u4fe1\u606f \u5728\u54ea\u91cc\u4ee5\u53ca\u5728\u4ec0\u4e48\u65f6\u5019\uff1f \u4f4e\u5c42(\u6355\u83b7\u4e00\u822c\u4fe1\u606f) \u8bad\u7ec3\u521d\u671f(\u6a21\u578b\u4ecd\u9700\u9002\u5e94\u76ee\u6807\u5206\u5e03) \u8bad\u7ec3\u540e\u671f(\u6a21\u578b\u63a5\u8fd1\u6536\u655b) \u76f8\u5173\u5b9e\u4f8b ( Howard & Ruder, ACL 2018 ) Lower layers capture general information \u2192 Use lower learning rates for lower layers Discriminative fine-tuning \u8f83\u4f4e\u7684\u5c42\u6355\u83b7\u4e00\u822c\u4fe1\u606f \u5bf9\u8f83\u4f4e\u7684\u5c42\u6b21\u4f7f\u7528\u8f83\u4f4e\u7684\u5b66\u4e60\u7387 \\(\\eta^{(i)}=\\eta \\times d_{f}^{-i}\\) Triangular learning rates \u5feb\u901f\u79fb\u52a8\u5230\u4e00\u4e2a\u5408\u9002\u7684\u533a\u57df\uff0c\u7136\u540e\u968f\u7740\u65f6\u95f4\u6162\u6162\u6536\u655b \u4e5f\u88ab\u79f0\u4e3a \u201clearning rate warm-up\u201d \u7528\u4e8e Transformer ( Vaswani et al., NIPS 2017 ) \u548c Transformer-based methods (BERT, GPT) \u7b49 \u6709\u5229\u4e8e\u4f18\u5316\uff1b\u66f4\u5bb9\u6613\u6446\u8131\u6b21\u4f18\u5c40\u90e8\u6781\u5c0f\u503c 4.2.B \u2013 Optimization: Regularization \u00b6 \u4e3b\u8981\u601d\u60f3\uff1a\u901a\u8fc7\u4f7f\u7528\u6b63\u5219\u5316\u9879 \\(\\Omega\\) \u9f13\u52b1\u76ee\u6807\u6a21\u578b\u53c2\u6570\u63a5\u8fd1\u9884\u5148\u8bad\u7ec3\u7684\u6a21\u578b\u53c2\u6570\uff0c\u5c06\u707e\u96be\u6027\u9057\u5fd8\u6700\u5c0f\u5316\u3002 \u7b80\u5355\u7684\u65b9\u6cd5:\u5c06\u65b0\u53c2\u6570\u6b63\u5219\u5316\uff0c\u4e0d\u8981\u4e0e\u9884\u8bad\u7ec3\u7684\u53c2\u6570\u504f\u79bb\u592a\u591a ( Wiese et al., CoNLL 2017 ) \\(\\Omega=\\Sigma_{1}\\left\\|L_{i}-L_{i}^{\\prime}\\right\\|_{2}\\) \u66f4\u9ad8\u7ea7(elastic weight consolidation; EWC )( Kirkpatrick et al., PNAS 2017 ) \u57fa\u4e8e Fisher\u4fe1\u606f\u77e9\u9635 F \uff0c\u5173\u6ce8\u5bf9\u9884\u8bad\u7ec3\u4efb\u52a1\u91cd\u8981\u7684\u53c2\u6570 \\(\\Omega=\\sum_{i} \\frac{\\lambda}{2} F_{i}\\left(\\theta_{i}^{\\prime}-\\theta_{i}\\right)^{2}\\) EWC\u5728\u6301\u7eed\u5b66\u4e60\u65b9\u9762\u6709\u7f3a\u70b9: \u53ef\u80fd\u8fc7\u5ea6\u7ea6\u675f\u53c2\u6570 \u8ba1\u7b97\u6210\u672c\u4e0e\u4efb\u52a1\u6570\u91cf\u6210\u7ebf\u6027\u5173\u7cfb( Schwarz et al., ICML 2018 ) \u5982\u679c\u4efb\u52a1\u76f8\u4f3c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u9f13\u52b1\u57fa\u4e8e\u4ea4\u53c9\u71b5\u7684\u6e90\u548c\u76ee\u6807\u9884\u6d4b\u63a5\u8fd1\uff0c\u7c7b\u4f3c\u4e8e\u84b8\u998f: \\(\\Omega=\\mathcal{H}\\left(\\hat{y}, \\hat{y}^{\\prime}\\right)\\) Hands-on #5 :Using discriminative learning \u00b6 4.2.C \u2013 Optimization: Trade-offs \u00b6 \u5728\u9009\u62e9\u66f4\u65b0\u54ea\u4e9b\u6743\u91cd\u65f6\uff0c\u9700\u8981\u6743\u8861\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a A. \u7a7a\u95f4\u590d\u6742\u5ea6 \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539\u3001\u9644\u52a0\u53c2\u6570\u3001\u53c2\u6570\u91cd\u7528 B. \u65f6\u95f4\u590d\u6742\u5ea6 \u8bad\u7ec3\u65f6\u95f4 C. \u6027\u80fd \u7ecf\u9a8c\u6cd5\u5219\uff1a\u5982\u679c\u4efb\u52a1\u6e90\u548c\u76ee\u6807\u4efb\u52a1\u4e0d\u76f8\u4f3c*\uff0c\u4f7f\u7528\u7279\u5f81\u63d0\u53d6( Peters et al., 2019 ) \u5426\u5219\uff0c\u7279\u5f81\u63d0\u53d6\u548c\u5fae\u8c03\u5e38\u5e38\u6548\u679c\u7c7b\u4f3c\uff08\u6b64\u65f6\u7528\u5fae\u8c03\u66f4\u597d\uff09 \u5728\u6587\u672c\u76f8\u4f3c\u6027\u4efb\u52a1\u4e0a\u5bf9BERT\u8fdb\u884c\u5fae\u8c03\uff0c\u6548\u679c\u660e\u663e\u66f4\u597d \u9002\u914d\u5668\u5b9e\u73b0\u4e86\u4e0e\u5fae\u8c03\u76f8\u6bd4\u5177\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd \u6709\u8da3\u7684\u662f\uff0cTransformer \u6bd4 LSTMs \u66f4\u5bb9\u6613\u5fae\u8c03(\u5bf9\u8d85\u53c2\u6570\u4e0d\u90a3\u4e48\u654f\u611f) *\u4e0d\u76f8\u4f3c\uff1a\u67d0\u4e9b\u80fd\u529b(\u4f8b\u5982\u53e5\u5b50\u95f4\u5173\u7cfb\u5efa\u6a21)\u5bf9\u76ee\u6807\u4efb\u52a1\u662f\u6709\u76ca\u7684\uff0c\u4f46\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u7f3a\u4e4f\u8fd9\u4e9b\u80fd\u529b\u80fd(\u53c2\u89c1\u540e\u9762\u7684\u66f4\u591a\u5185\u5bb9) 4.3 \u2013 Getting more signal \u00b6 \u76ee\u6807\u4efb\u52a1\u901a\u5e38\u662f\u4f4e\u8d44\u6e90\u4efb\u52a1\u3002\u6211\u4eec\u7ecf\u5e38\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u4e0d\u540c\u7684\u4fe1\u53f7\uff0c\u63d0\u9ad8\u8fc1\u79fb\u5b66\u4e60\u7684\u6548\u679c: \u5728\u5355\u4e2a\u9002\u5e94\u4efb\u52a1\u4e0a\u5fae\u8c03\u5355\u4e2a\u6a21\u578b \u57fa\u672c\u539f\u7406\uff1a\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u76ee\u6807\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03 \u5176\u4ed6\u6570\u636e\u96c6\u548c\u76f8\u5173\u4efb\u52a1\u4e2d\u6536\u96c6\u4fe1\u53f7\u3002 \u5fae\u8c03\u4e0e\u5f31\u76d1\u7763\uff0c\u591a\u4efb\u52a1\u548c\u987a\u5e8f\u9002\u5e94 \u96c6\u6210\u6a21\u578b \u7ed3\u5408\u51e0\u4e2a\u5fae\u8c03\u6a21\u578b\u7684\u9884\u6d4b 4.3.A \u2013 Getting more signal: Basic fine-tuning \u00b6 \u5fae\u8c03\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u7684\u7b80\u5355\u4f8b\u5b50: \u4ece\u6a21\u578b\u4e2d\u63d0\u53d6\u5355\u4e2a\u5b9a\u957f\u5411\u91cf: \u7b2c\u4e00\u4e2a/\u6700\u540e\u4e00\u4e2a\u4ee4\u724c\u7684\u9690\u85cf\u72b6\u6001\uff0c\u6216\u8005\u662f\u9690\u85cf\u72b6\u6001\u7684\u5e73\u5747\u503c/\u6700\u5927\u503c \u4f7f\u7528\u9644\u52a0\u7684\u5206\u7c7b\u5668\u6295\u5f71\u5230\u5206\u7c7b\u7a7a\u95f4 \u7528\u5206\u7c7b\u76ee\u6807\u51fd\u6570\u8bad\u7ec3 4.3.B \u2013 Getting more signal: Related datasets/tasks \u00b6 \u987a\u5e8f\u9002\u5e94 Sequential adaptation \u5bf9\u76f8\u5173\u6570\u636e\u96c6\u548c\u4efb\u52a1\u8fdb\u884c\u4e2d\u95f4\u5fae\u8c03 \u4e0e\u76f8\u5173\u4efb\u52a1\u8fdb\u884c\u591a\u4efb\u52a1\u5fae\u8c03 \u5982 GLUE \u4e2d\u7684 NLI \u4efb\u52a1 \u6570\u636e\u96c6\u5206\u5272 \u5f53\u6a21\u578b\u5728\u7279\u5b9a\u7684\u6570\u636e\u7247\u4e0a\u59cb\u7ec8\u8868\u73b0\u4e0d\u4f73\u65f6 \u534a\u76d1\u7763\u5b66\u4e60 \u4f7f\u7528\u672a\u6807\u8bb0\u7684\u6570\u636e\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u4e00\u81f4\u6027 4.3.B \u2013 Getting more signal: Sequential adaptation \u00b6 \u5728\u76f8\u5173\u9ad8\u8d44\u6e90\u6570\u636e\u96c6\u8fdb\u884c\u5fae\u8c03 \u5728\u62e5\u6709\u66f4\u591a\u7684\u6570\u636e\u7684\u76f8\u5173\u4efb\u52a1\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03 \u5728\u76ee\u6807\u4efb\u52a1\u4e0a\u5fae\u8c03\u6570\u636e\u96c6 \u5bf9\u4e8e\u6570\u636e\u6709\u9650\u5e76\u4e14\u6709\u7c7b\u4f3c\u4efb\u52a1\u7684\u4efb\u52a1\u5c24\u5176\u6709\u7528( Phang et al., 2018 ) \u63d0\u9ad8\u76ee\u6807\u4efb\u52a1\u7684\u6837\u672c\u590d\u6742\u5ea6( Yogatama et al., 2019 ) 4.3.B \u2013 Getting more signal: Multi-task fine-tuning \u00b6 \u5728\u76f8\u5173\u4efb\u52a1\u4e0a\u5171\u540c\u5fae\u8c03\u6a21\u578b \u5bf9\u4e8e\u6bcf\u4e2a\u4f18\u5316\u6b65\u9aa4\uff0c\u53d6\u6837\u4e00\u4e2a\u4efb\u52a1\u548c\u4e00\u6279\u6570\u636e\u8fdb\u884c\u8bad\u7ec3 \u901a\u8fc7\u591a\u4efb\u52a1\u5b66\u4e60\u8bad\u7ec3\u591a\u8f6e \u53ea\u5728\u6700\u540e\u51e0\u4e2a\u9636\u6bb5\u5bf9\u76ee\u6807\u4efb\u52a1\u8fdb\u884c\u5fae\u8c03 \u8bed\u8a00\u5efa\u6a21\u662f\u4e00\u4e2a\u76f8\u5173\u7684\u4efb\u52a1\uff01 \u5fae\u8c03\u8bed\u8a00\u6a21\u578b\u6709\u52a9\u4e8e\u5c06\u9884\u8bad\u7ec3\u7684\u53c2\u6570\u8c03\u6574\u5230\u76ee\u6807\u6570\u636e\u96c6 \u5373\u4f7f\u6ca1\u6709\u9884\u8bad\u7ec3\uff0c\u4e5f\u4f1a\u8d77\u5230\u5e2e\u52a9( Rei et al., ACL 2017 ) \u53ef\u9009\u9000\u706b\u6bd4 \\(\\lambda\\) ( Chronopoulou et al., NAACL 2019 ) \u4f5c\u4e3aULMFiT\u4e2d\u7684\u4e00\u4e2a\u5355\u72ec\u6b65\u9aa4\u4f7f\u7528 4.3.B \u2013 Getting more signal: Dataset slicing \u00b6 \u4f7f\u7528\u4ec5\u5728\u6570\u636e\u7684\u7279\u5b9a\u5b50\u96c6\u4e0a\u8bad\u7ec3\u7684\u8f85\u52a9\u5934 \u5206\u6790\u6a21\u578b\u8bef\u5dee \u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u81ea\u52a8\u8bc6\u522b\u8bad\u7ec3\u6570\u636e\u7684\u6311\u6218\u6027\u5b50\u96c6 \u4e0e\u4e3b\u5934\u4e00\u8d77\u8054\u5408\u8bad\u7ec3\u8f85\u52a9\u5934 See also Massive Multi-task Learning with Snorkel MeTaL 4.3.B \u2013 Getting more signal: Semi-supervised learning \u00b6 \u4f7f\u7528\u672a\u6807\u8bb0\u7684\u6570\u636e\u53ef\u4ee5\u4f7f\u6a21\u578b\u9884\u6d4b\u66f4\u52a0\u4e00\u81f4 \u4e3b\u8981\u601d\u60f3:\u4f7f\u5bf9\u539f\u59cb\u8f93\u5165 x \u548c\u6270\u52a8\u8f93\u5165 x' \u7684\u9884\u6d4b\u4e4b\u95f4\u7684\u8ddd\u79bb\u6700\u5c0f\u5316 \u6270\u52a8\u53ef\u4ee5\u662f\u566a\u58f0\u3001\u63a9\u853d( Clark et al., EMNLP 2018 )\u3001\u6570\u636e\u589e\u5f3a\uff0c\u4f8b\u5982 back-translation ( Xie et al., 2019 ) 4.3.C \u2013 Getting more signal: Ensembling \u00b6 \u901a\u8fc7\u96c6\u6210\u72ec\u7acb\u7684\u5fae\u8c03\u6a21\u578b\u8fbe\u5230\u6700\u5148\u8fdb\u6c34\u5e73 - \u96c6\u6210\u6a21\u578b\uff1a\u4f7f\u7528\u5404\u79cd\u8d85\u53c2\u6570\u5fae\u8c03\u6a21\u578b\u9884\u6d4b\u7684\u7ec4\u5408 <img src=\"imgs/image-20190905003312221.png\" alt=\"image-20190905003312221\" style=\"zoom:50%;\" /> - \u5728\u4e0d\u540c\u7684\u4efb\u52a1 - \u5728\u4e0d\u540c\u7684\u6570\u636e\u96c6\u5206\u5757 - \u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570(dropout, initializations\u2026) - \u6765\u81ea\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u53d8\u4f53(\u4f8b\u5982 cased/uncased ) \u77e5\u8bc6\u84b8\u998f\uff1a\u5728\u4e00\u4e2a\u66f4\u5c0f\u7684\u6a21\u578b\u4e2d\u63d0\u53d6\u4e00\u7ec4\u8c03\u4f18\u6a21\u578b \u77e5\u8bc6\u84b8\u998f\uff1a\u5728\u6559\u5e08\uff08\u96c6\u6210\u6a21\u578b\uff09\u5236\u4f5c\u7684\u8f6f\u76ee\u6807\u4e0a\u8bad\u7ec3\u5b66\u751f\u6a21\u578b \\(-\\sum_{c} Q(c | X) \\log \\left(P_{r}(c | X)\\right)\\) \u6559\u5e08\u6807\u7b7e\u7684\u76f8\u5bf9\u6982\u7387\u5305\u542b\u6559\u5e08\u5982\u4f55\u6982\u62ec\u7684\u4fe1\u606f Hands-on #6 :Using multi-task learning \u00b6 5. Downstream applications Hands-on examples \u00b6 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u6cbf\u4e24\u4e2a\u6b63\u4ea4\u65b9\u5411\u63a2\u7d22\u4e0b\u6e38\u7684\u5e94\u7528\u548c\u5b9e\u9645\u8003\u8651: \u8fc1\u79fb\u5b66\u4e60\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5404\u79cd\u5e94\u7528\u662f\u4ec0\u4e48 \u6587\u6863/\u53e5\u5b50\u5206\u7c7b\u3001\u4ee4\u724c\u7ea7\u5206\u7c7b\u3001\u7ed3\u6784\u5316\u9884\u6d4b\u548c\u8bed\u8a00\u751f\u6210 \u5982\u4f55\u5229\u7528\u591a\u4e2a\u6846\u67b6\u548c\u5e93\u6765\u5b9e\u73b0\u5b9e\u9645\u5e94\u7528 Tensorflow\u3001PyTorch\u3001Keras\u548c\u7b2c\u4e09\u65b9\u5e93\uff0c\u4f8b\u5982 fast.ai, HuggingFace\u2026\u2026 \u53e5\u5b50\u548c\u6587\u6863\u7ea7\u5206\u7c7b \u52a8\u624b\u5b9e\u8df5\uff1a\u6587\u6863\u7ea7\u5206\u7c7b(fast.ai) \u4ee4\u724c\u5206\u7c7b \u5b9e\u8df5\uff1a\u95ee\u7b54(\u8c37\u6b4cBERT & Tensorflow/TF Hub) \u8bed\u8a00\u751f\u6210 \u5b9e\u8df5\uff1a\u5bf9\u8bdd\u751f\u6210(OpenAI GPT & HuggingFace/PyTorch Hub) 5.A \u2013 Sequence & document level classification \u00b6 \u4f7f\u7528 fast.ai \u5e93\u5b8c\u6210\u6587\u6863\u5206\u7c7b\u7684\u8fc1\u79fb\u5b66\u4e60 \u76ee\u6807\u4efb\u52a1 IMDB\uff1a\u4e00\u4e2a\u4e8c\u5143\u60c5\u7eea\u5206\u7c7b\u6570\u636e\u96c6\uff0c\u5305\u542b\u7528\u4e8e\u8bad\u7ec3\u768425k\u4e2a\u9ad8\u5ea6\u6781\u6027\u7684\u7535\u5f71\u8bc4\u8bba\uff0c\u7528\u4e8e\u6d4b\u8bd5\u768425k\u4e2a\uff0c\u4ee5\u53ca\u5176\u4ed6\u672a\u6807\u8bb0\u7684\u6570\u636e\u3002 http://ai.stanford.edu/~amaas/data/sentiment/ Fast.ai \u7279\u522b\u63d0\u4f9b\u4e86: \u4e00\u4e2a\u9884\u5148\u8bad\u7ec3\u7684\u82f1\u6587\u6a21\u578b\u53ef\u4f9b\u4e0b\u8f7d \u4e00\u4e2a\u6807\u51c6\u5316\u7684\u6570\u636e\u5757API \u6613\u4e8e\u8bbf\u95ee\u6807\u51c6\u6570\u636e\u96c6\uff0c\u5982IMDB fast.ai \u57fa\u4e8e PyTorch fast.ai \u4e3a\u89c6\u89c9\u3001\u6587\u672c\u3001\u8868\u683c\u6570\u636e\u548c\u534f\u540c\u8fc7\u6ee4\u63d0\u4f9b\u4e86\u8bb8\u591a\u5f00\u7bb1\u5373\u7528\u7684\u9ad8\u7ea7API \u5e93\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u52a0\u5feb\u5b9e\u9a8c\u7684\u901f\u5ea6\uff0c\u4f8b\u5982\u5728\u4e92\u52a8\u8ba1\u7b97\u73af\u5883\u4e2d\u4e00\u6b21\u5bfc\u5165\u6240\u6709\u5fc5\u9700\u7684\u6a21\u5757\uff0c\u4f8b\u5982: Fast.ai \u5305\u542b\u5feb\u901f\u8bbe\u7f6e\u8fc1\u79fb\u5b66\u4e60\u5b9e\u9a8c\u6240\u9700\u7684\u6240\u6709\u9ad8\u7ea7\u6a21\u5757\u3002 \u52a0\u8f7d\u6570\u636e\u96c6 \u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u548c\u5206\u7c7b\u5668\u7684 DataBunch \u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u635f\u5931\u51fd\u6570\uff0c\u5728 WikiText-103 \u4e0a\u9884\u8bad\u7ec3\u7684 AWD-LSTM \u5e76\u5728 IMDB \u6570\u636e\u96c6\u4e0a\u5fae\u8c03 \u4e00\u65e6\u6211\u4eec\u6709\u4e86\u5fae\u8c03\u7684\u8bed\u8a00\u6a21\u578b(AWD-LSTM)\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u5668\uff0c\u6dfb\u52a0\u4e00\u4e2a\u5206\u7c7b\u5934: - \u5c06RNN\u7684\u6700\u7ec8\u8f93\u51fa\u7684\u6700\u5927\u503c\u4e0e\u6240\u6709\u4e2d\u95f4\u8f93\u51fa(\u6cbf\u7740\u5e8f\u5217\u957f\u5ea6)\u7684\u5e73\u5747\u503c\u8fde\u63a5\u8d77\u6765\u7684\u5c42 - Two blocks of nn.BatchNorm1d \u21e8 nn.Dropout \u21e8 nn.Linear \u21e8 nn.ReLU \u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a50 - \u5206\u4e24\u6b65\u5fae\u8c03 - \u53ea\u8bad\u7ec3\u5206\u7c7b\u5934\uff0c\u540c\u65f6\u4fdd\u6301\u8bed\u8a00\u6a21\u578b\u4e0d\u53d8 - \u5fae\u8c03\u6574\u4e2a\u7ed3\u6784 - Colab: http://tiny.cc/NAACLTransferFastAiColab 5.B \u2013 Token level classification: BERT & Tensorflow \u00b6 \u7528\u4e8e\u4ee4\u724c\u7ea7\u5206\u7c7b\u7684\u8f6c\u79fb\u5b66\u4e60:\u8c37\u6b4c\u7684BERT in TensorFlow \u76ee\u6807\u4efb\u52a1: SQuAD: \u56de\u7b54\u95ee\u9898\u7684\u6570\u636e\u96c6 https://rajpurkar.github.io/SQuAD-explorer/ \u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u76f4\u63a5\u4f7f\u7528 Tensorflow checkpoint \u4f8b\u5982\uff1a https://github.com/google-research/bert \u6211\u4eec\u4f7f\u7528\u901a\u5e38\u7684Tensorflow\u5de5\u4f5c\u6d41\uff1a\u521b\u5efa\u5305\u542b\u6838\u5fc3\u6a21\u578b\u548c\u6dfb\u52a0/\u4fee\u6539\u5143\u7d20\u7684\u6a21\u578b\u56fe \u52a0\u8f7d\u68c0\u67e5\u70b9\u65f6\u8981\u6ce8\u610f\u53d8\u91cf\u5206\u914d \u8bed\u8a00\u751f\u6210\u8fc1\u79fb\u5b66\u4e60\uff1aOpenAI GPT \u548c HuggingFace \u5e93 \u76ee\u6807\u4efb\u52a1: ConvAI2 -\u7b2c\u4e8c\u5c4a\u4f1a\u8bdd\u667a\u80fd\u6311\u6218\uff0c\u7528\u4e8e\u8bad\u7ec3\u548c\u8bc4\u4f30\u975e\u76ee\u6807\u5bfc\u5411\u5bf9\u8bdd\u7cfb\u7edf\u7684\u6a21\u578b\uff0c\u4f8b\u5982\u95f2\u804a http://convai.io \u9884\u8bad\u7ec3\u6a21\u578b\u7684 HuggingFace \u4ed3\u5e93 \u5927\u578b\u9884\u5148\u8bad\u7ec3\u6a21\u578b BERT, GPT, GPT-2, Transformer-XL \u7684\u4ed3\u5e93 \u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u4e0b\u8f7d\u3001\u5b9e\u4f8b\u5316\u548c\u8bad\u7ec3PyTorch\u4e2d\u9884\u5148\u8bad\u7ec3\u597d\u7684\u6a21\u578b HuggingFace\u7684\u6a21\u578b\u73b0\u5728\u4e5f\u53ef\u4ee5\u901a\u8fc7PyTorch Hub\u8bbf\u95ee \u8bed\u8a00\u751f\u6210\u4efb\u52a1\u63a5\u8fd1\u8bed\u8a00\u5efa\u6a21\u8bad\u7ec3\u524d\u7684\u76ee\u6807\uff0c\u4f46\u662f: \u8bed\u8a00\u5efa\u6a21\u524d\u7684\u8bad\u7ec3\u53ea\u9700\u8981\u4e00\u4e2a\u8f93\u5165\uff1a\u4e00\u7cfb\u5217\u5355\u8bcd \u5728\u5bf9\u8bdd\u6846\u8bbe\u7f6e\u4e2d\uff1a\u63d0\u4f9b\u4e86\u51e0\u79cd\u7c7b\u578b\u7684\u4e0a\u4e0b\u6587\u6765\u751f\u6210\u8f93\u51fa\u5e8f\u5217 \u77e5\u8bc6\u5e93\uff1a\u89d2\u8272\u53e5 \u5bf9\u8bdd\u7684\u5386\u53f2\uff1a\u81f3\u5c11\u662f\u7528\u6237\u7684\u6700\u540e\u4e00\u53e5\u8bdd \u5df2\u751f\u6210\u7684\u8f93\u51fa\u5e8f\u5217\u7684\u6807\u8bb0 \u6211\u4eec\u5e94\u8be5\u5982\u4f55\u9002\u5e94\u8fd9\u79cd\u6a21\u5f0f? 6. Open problems and future directions \u00b6 Shortcomings of pretrained language models \u6982\u8ff0\uff1a\u8bed\u8a00\u6a21\u578b\u53ef\u89c6\u4e3a\u4e00\u822c\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff1b\u6709\u4e86\u8db3\u591f\u7684\u6570\u636e\u3001\u8ba1\u7b97\u548c\u5bb9\u91cf\uff0cLM\u53ef\u4ee5\u5b66\u5230\u5f88\u591a\u4e1c\u897f \u5728\u5b9e\u8df5\u4e2d\uff0c\u8bb8\u591a\u5728\u6587\u672c\u4e2d\u8868\u793a\u8f83\u5c11\u7684\u4e1c\u897f\u66f4\u96be\u5b66\u4e60 \u9884\u5148\u8bad\u7ec3\u597d\u7684\u8bed\u8a00\u6a21\u578b\u5e76\u4e0d\u64c5\u957f \u7ec6\u7c92\u5ea6\u8bed\u8a00\u4efb\u52a1 ( Liu et al., NAACL 2019 ) \u5e38\u8bc6(\u5f53\u4f60\u771f\u7684\u8ba9\u5b83\u53d8\u5f97\u56f0\u96be Zellers et al., ACL 2019 )\uff1b\u81ea\u7136\u8bed\u8a00\u751f\u6210(\u7ef4\u62a4\u957f\u671f\u4f9d\u8d56\u3001\u5173\u7cfb\u3001\u4e00\u81f4\u6027\u7b49) \u5f53\u5fae\u8c03\u65f6\uff0c\u503e\u5411\u4e8e\u8fc7\u5ea6\u9002\u5e94\u8868\u9762\u5f62\u6210\u7684\u4fe1\u606f\uff1b\u2018rapid surface learners\u2019 \u5927\u578b\u7684\u3001\u9884\u5148\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\u5f88\u96be\u4f18\u5316\u3002 \u5fae\u8c03\u901a\u5e38\u662f\u4e0d\u7a33\u5b9a\u7684\uff0c\u5e76\u4e14\u6709\u5f88\u9ad8\u7684\u65b9\u5dee\uff0c\u7279\u522b\u662f\u5728\u76ee\u6807\u6570\u636e\u96c6\u975e\u5e38\u5c0f\u7684\u60c5\u51b5\u4e0b Devlin et al. (NAACL 2019) \u6307\u51fa\uff0cBERT\u7684\u5927\u7248\u672c(24\u5c42)\u7279\u522b\u5bb9\u6613\u5bfc\u81f4\u6027\u80fd\u9000\u5316\uff1b\u591a\u6b21\u968f\u673a\u91cd\u542f\u6709\u65f6\u662f\u5fc5\u8981\u7684\uff0c\u8fd9\u5728( Phang et al., 2018 )\u4e2d\u4e5f\u6709\u8be6\u7ec6\u7684\u7814\u7a76 \u5f53\u524d\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u975e\u5e38\u5927\u3002 \u6211\u4eec\u771f\u7684\u9700\u8981\u6240\u6709\u8fd9\u4e9b\u53c2\u6570\u5417\uff1f \u6700\u8fd1\u7684\u7814\u7a76\u8868\u660e\uff0cBERT\u4e2d\u53ea\u9700\u8981\u51e0\u4e2a\u6ce8\u610f\u529b\u5934( Voita et al., ACL 2019 ) \u9700\u8981\u505a\u66f4\u591a\u7684\u5de5\u4f5c\u6765\u7406\u89e3\u6a21\u578b\u53c2\u6570 \u4fee\u526a\u548c\u84b8\u998f\u662f\u4e24\u79cd\u5904\u7406\u65b9\u6cd5 \u53c2\u89c1:\u5f69\u7968\u5047\u8bf4( Frankle et al., ICLR 2019 ) Pretraining tasks \u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u7684\u4e0d\u8db3 \u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u6a21\u578b \u5982\u679c\u6211\u4eec\u9700\u8981\u66f4\u591a\u7684\u8f93\u5165\uff0c\u5c31\u9700\u8981\u5bf9\u8fd9\u4e9b\u90e8\u4ef6\u8fdb\u884c\u9884\u57f9\u8bad \u4f8b\u5982\u5e8f\u5217\u5230\u5e8f\u5217\u5b66\u4e60\u4e2d\u7684\u89e3\u7801\u5668( Song et al., ICML 2019 ) \u4ece\u5de6\u5230\u53f3\u7684\u504f\u89c1\u5e76\u4e0d\u603b\u662f\u6700\u597d\u7684 \u8003\u8651\u66f4\u591a\u4e0a\u4e0b\u6587(\u5982\u5c4f\u853d)\u7684\u76ee\u6807\u4f3c\u4e4e\u6709\u7528(\u91c7\u6837\u6548\u7387\u8f83\u4f4e) \u53ef\u80fd\u7ec4\u5408\u4e0d\u540cLM\u53d8\u79cd( Dong et al., 2019 ) \u8bed\u4e49\u548c\u957f\u671f\u4e0a\u4e0b\u6587\u7684\u5f31\u4fe1\u53f7\u4e0e\u8bed\u6cd5\u548c\u77ed\u671f\u5355\u8bcd\u5171\u5b58\u7684\u5f3a\u4fe1\u53f7 \u9700\u8981\u6fc0\u52b1\u673a\u5236\u6765\u4fc3\u8fdb\u6211\u4eec\u6240\u5173\u5fc3\u7684\u7f16\u7801\uff0c\u4f8b\u5982\u8bed\u4e49 \u66f4\u52a0\u591a\u6837\u5316\u7684\u81ea\u6211\u76d1\u7763\u76ee\u6807 \u4ece\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u83b7\u5f97\u7075\u611f \u8bed\u8a00\u4e2d\u7684\u81ea\u6211\u76d1\u7763\u4e3b\u8981\u57fa\u4e8e\u8bcd\u7684\u5171\u73b0( Ando and Zhang, 2005 ) \u4e0d\u540c\u5c42\u6b21\u610f\u4e49\u4e0a\u7684\u76d1\u7763 \u8bba\u8ff0\u3001\u6587\u4ef6\u3001\u53e5\u5b50\u7b49\u3002 \u4f7f\u7528\u5176\u4ed6\u4fe1\u53f7\uff0c\u4f8b\u5982\u5143\u6570\u636e \u5f3a\u8c03\u8bed\u8a00\u7684\u4e0d\u540c\u6027\u8d28 \u62bd\u6837\u4e00\u4e2a\u8865\u4e01\u548c\u4e00\u4e2a\u90bb\u5c45\uff0c\u5e76\u9884\u6d4b\u5b83\u4eec\u7684\u7a7a\u95f4\u914d\u7f6e( Doersch et al., ICCV 2015 ) \u56fe\u7247\u7740\u8272 ( Zhang et al., ECCV 2016 ) \u4e13\u95e8\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\u6765\u6559\u6211\u4eec\u7684\u6a21\u578b\u7f3a\u5c11\u7684\u4e1c\u897f \u5236\u5b9a\u4e13\u95e8\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff0c\u660e\u786e\u5b66\u4e60\u8fd9\u4e9b\u5173\u7cfb \u83b7\u53d6\u80cc\u666f\u77e5\u8bc6\u7684\u5355\u8bcd\u5bf9\u5173\u7cfb ( Joshi et al., NAACL 2019 ) \u8303\u56f4\u7ea7\u8868\u793a( Swayamdipta et al., EMNLP 2018 ) \u4e0d\u540c\u7684\u9884\u8bad\u7ec3\u8bcd\u5d4c\u5165\u662f\u6709\u7528\u7684( Kiela et al., EMNLP 2018 ) \u5176\u4ed6\u9884\u8bad\u7ec3\u7684\u4efb\u52a1\u53ef\u4ee5\u660e\u786e\u5730\u5b66\u4e60\u63a8\u7406\u6216\u7406\u89e3 \u7b97\u672f\u3001\u65f6\u95f4\u3001\u56e0\u679c\u7b49\uff1b\u8bdd\u8bed\u3001\u53d9\u8ff0\u3001\u8c08\u8bdd\u7b49\u3002 \u9884\u8bad\u7ec3\u7684\u8868\u793a\u53ef\u4ee5\u4ee5\u7a00\u758f\u548c\u6a21\u5757\u5316\u7684\u65b9\u5f0f\u8fde\u63a5 \u57fa\u4e8e\u8bed\u8a00\u5b50\u7ed3\u6784( Andreas et al., NAACL 2016 ) \u6216\u4e13\u5bb6 ( Shazeer et al., ICLR 2017 ) Need for grounded representations \u5206\u5e03\u5f0f\u5047\u8bbe\u7684\u5c40\u9650\u6027\u2014\u2014\u5f88\u96be\u4ece\u539f\u59cb\u6587\u672c\u4e2d\u5b66\u4e60\u7279\u5b9a\u7c7b\u578b\u7684\u4fe1\u606f \u4eba\u7c7b\u62a5\u544a\u504f\u89c1\uff1a\u4e0d\u9648\u8ff0\u663e\u800c\u6613\u89c1\u7684( Gordon and Van Durme, AKBC 2013 ) \u5e38\u8bc6\u4e0d\u662f\u5199\u4e0b\u6765\u7684 \u5173\u4e8e\u547d\u540d\u5b9e\u4f53\u7684\u4e8b\u5b9e \u6ca1\u6709\u5176\u4ed6\u6a21\u5f0f\u7684\u57fa\u7840 \u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u5f0f: \u5438\u6536\u5176\u4ed6\u7ed3\u6784\u5316\u77e5\u8bc6(e.g. knowledge bases like ERNIE, Zhang et al 2019 ) \u591a\u6a21\u6001\u5b66\u4e60(e.g. with visual representations like VideoBERT, Sun et al. 2019 ) \u4ea4\u4e92\u5f0f/human-in-the-loop \u7684\u65b9\u6cd5(e.g. dialog, Hancock et al. 2018 ) Tasks and task similarity \u8bb8\u591a\u4efb\u52a1\u53ef\u4ee5\u8868\u793a\u4e3a\u8bed\u8a00\u5efa\u6a21\u7684\u53d8\u4f53 \u8bed\u8a00\u672c\u8eab\u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e\u6307\u5b9a\u4efb\u52a1\u3001\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7\u6784\u5efaQA ( McCann et al., 2018 ) \u57fa\u4e8e\u5bf9\u8bdd\u7684\u5b66\u4e60\uff0c\u4e0d\u53d7\u6b63\u5411\u9884\u6d4b\u7684\u76d1\u7763 ( Weston, NIPS 2016 ) \u5c06NLP\u4efb\u52a1\u5236\u5b9a\u4e3a\u5b8c\u5f62\u586b\u7a7a\u9884\u6d4b\u76ee\u6807 (Children Book Test, LAMBADA, Winograd, ...) \u901a\u8fc7\u63d0\u793a\u89e6\u53d1\u4efb\u52a1\u884c\u4e3a\uff0c\u4f8b\u5982\u7ffb\u8bd1\u63d0\u793a ( Radford, Wu et al. 2019 ); \u4f7fzero-shot\u9002\u5e94 \u8d28\u7591NLP\u4e2d\u7684\u201c\u4efb\u52a1\u201d\u6982\u5ff5 \u9884\u8bad\u7ec3\u548c\u76ee\u6807\u4efb\u52a1(NLI\uff0c\u5206\u7c7b)\u7684\u76f4\u89c9\u76f8\u4f3c\u6027\u4e0e\u8f83\u597d\u7684\u4e0b\u6e38\u6027\u80fd\u76f8\u5173 \u4e0d\u6e05\u695a\u4e24\u4e2a\u4efb\u52a1\u5728\u4ec0\u4e48\u65f6\u5019\u4ee5\u53ca\u5982\u4f55\u76f8\u4f3c\u548c\u76f8\u5173 \u83b7\u5f97\u66f4\u591a\u7406\u89e3\u7684\u65b9\u6cd5\u4e4b\u4e00\uff1a\u5927\u89c4\u6a21\u7684\u8fc1\u79fb\u5b9e\u8bc1\u7814\u7a76\uff0c\u5982 Taskonomy ( Zamir et al., CVPR 2018 ) \u662f\u5426\u6709\u52a9\u4e8e\u8bbe\u8ba1\u66f4\u597d\u548c\u66f4\u4e13\u4e1a\u7684\u9884\u8bad\u7ec3\u4efb\u52a1 Continual and meta-learning \u5f53\u524d\u8fc1\u79fb\u5b66\u4e60\u53ea\u8fdb\u884c\u4e00\u6b21\u9002\u5e94\u3002 \u6700\u7ec8\uff0c\u6211\u4eec\u5e0c\u671b\u62e5\u6709\u80fd\u591f\u5728\u8bb8\u591a\u4efb\u52a1\u4e2d\u6301\u7eed\u4fdd\u7559\u548c\u79ef\u7d2f\u77e5\u8bc6\u7684\u6a21\u578b( Yogatama et al., 2019 ) \u9884\u8bad\u7ec3\u548c\u9002\u5e94\u4e4b\u95f4\u6ca1\u6709\u533a\u522b\uff1b\u53ea\u6709\u4e00\u4e2a\u4efb\u52a1\u6d41 \u4e3b\u8981\u7684\u6311\u6218\u662f:\u707e\u96be\u6027\u7684\u9057\u5fd8 \u4e0d\u540c\u7684\u7814\u7a76\u65b9\u6cd5\uff1a \u8bb0\u5fc6\u3001\u6b63\u5219\u5316\u3001\u4efb\u52a1\u7279\u5b9a\u6743\u91cd\u7b49 \u8f6c\u79fb\u5b66\u4e60\u7684\u76ee\u7684\uff1a\u5b66\u4e60\u4e00\u79cd\u5bf9\u8bb8\u591a\u4efb\u52a1\u90fd\u901a\u7528\u4e14\u6709\u7528\u7684\u8868\u793a\u65b9\u6cd5 \u5ba2\u89c2\u56e0\u7d20\u4e0d\u4f1a\u523a\u6fc0\u9002\u5e94\u7684\u6613\u7528\u6027(\u901a\u5e38\u4e0d\u7a33\u5b9a)\uff1b\u6ca1\u6709\u5b66\u4f1a\u5982\u4f55\u9002\u5e94\u5b83 \u5143\u5b66\u4e60\u4e0e\u8fc1\u79fb\u5b66\u4e60\u76f8\u7ed3\u5408\u53ef\u4ee5\u4f7f\u8fd9\u4e00\u65b9\u6cd5\u66f4\u52a0\u53ef\u884c \u7136\u800c\uff0c\u5927\u591a\u6570\u73b0\u6709\u7684\u65b9\u6cd5\u90fd\u5c40\u9650\u4e8efew-shot\u573a\u666f\uff0c\u5e76\u4e14\u53ea\u5b66\u4e60\u4e86\u51e0\u4e2a\u9002\u5e94\u6b65\u9aa4 Bias \u504f\u89c1\u5df2\u7ecf\u88ab\u8bc1\u660e\u666e\u904d\u5b58\u5728\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u4e00\u822c\u7684\u795e\u7ecf\u6a21\u578b\u4e2d \u5927\u578b\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u5fc5\u7136\u6709\u81ea\u5df1\u7684\u4e00\u5957\u504f\u89c1 \u5e38\u8bc6\u548c\u504f\u89c1\u4e4b\u95f4\u7684\u754c\u9650\u5f88\u6a21\u7cca \u6211\u4eec\u9700\u8981\u5728\u9002\u5e94\u8fc7\u7a0b\u4e2d\u6d88\u9664\u8fd9\u79cd\u504f\u89c1 \u4e00\u4e2a\u5c0f\u7684\u5fae\u8c03\u6a21\u578b\u5e94\u8be5\u66f4\u4e0d\u6613\u88ab\u8bef\u7528 Conclusion \u00b6 \u4e3b\u9898\uff1a\u8bed\u5883\u4e2d\u7684\u8bcd\u6c47\uff0c\u8bed\u8a00\u6a21\u578b\u9884\u57f9\u8bad\uff0c\u6df1\u5ea6\u6a21\u578b \u9884\u8bad\u7ec3\u5177\u6709\u8f83\u597d\u7684 sample-efficiency \uff0c\u53ef\u6309\u6bd4\u4f8b\u653e\u5927 \u5bf9\u67d0\u4e9b\u7279\u6027\u7684\u9884\u6d4b\u2014\u2014\u53d6\u51b3\u4e8e\u60a8\u5982\u4f55\u770b\u5f85\u5b83 \u6027\u80fd\u6743\u8861\uff0c\u81ea\u9876\u5411\u4e0b \u8fc1\u79fb\u5b66\u4e60\u6613\u4e8e\u5b9e\u73b0\uff0c\u5b9e\u7528\u6027\u5f3a \u4ecd\u7136\u5b58\u5728\u8bb8\u591a\u4e0d\u8db3\u548c\u5c1a\u672a\u89e3\u51b3\u7684\u95ee\u9898 Reference \u00b6 NLP\u7684\u5de8\u4eba\u80a9\u8180 - weizier\u7684\u6587\u7ae0 - \u77e5\u4e4e \u4eceWord Embedding\u5230Bert\u6a21\u578b\u2014\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u9884\u8bad\u7ec3\u6280\u672f\u53d1\u5c55\u53f2 - \u5f20\u4fca\u6797\u7684\u6587\u7ae0 - \u77e5\u4e4e \u4eceSVD\u5230PCA\u2014\u2014\u5947\u5999\u7684\u6570\u5b66\u6e38\u620f \u3010\u8bba\u6587\u7b14\u8bb0\u3011Semi-supervised Sequence Learning \u8bba\u6587\u7b14\u8bb0-Unsupervised Pretraining for Sequence to Sequence Learning","title":"Transfer Learning in Natural Language Processing"},{"location":"Transfer%20Learning/#transfer-learning-in-natural-language-processing","text":"Sebastian Ruder: Transfer Learning in Open-Source Natural Language Processing (spaCy IRL 2019) The State of Transfer Learning in NLP Transfer Learning in Natural Language Processing Tutorial Follow along with the tutorial: Slides: http://tiny.cc/NAACLTransfer Colab: http://tiny.cc/NAACLTransferColab Code: http://tiny.cc/NAACLTransferCode What is transfer learning ? Pan and Yang (2010) \u5728\u8bb8\u591a\u673a\u5668\u5b66\u4e60\u548c\u6570\u636e\u6316\u6398\u7b97\u6cd5\u4e2d\uff0c\u4e00\u4e2a\u4e3b\u8981\u7684\u5047\u8bbe\u662f\u8bad\u7ec3\u548c\u672a\u6765\u7684\u6570\u636e\u5fc5\u987b\u5728\u76f8\u540c\u7684\u7279\u5f81\u7a7a\u95f4\u4e2d\uff0c\u5e76\u4e14\u5177\u6709\u76f8\u540c\u7684\u5206\u5e03\u3002\u7136\u800c\uff0c\u5728\u8bb8\u591a\u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u79cd\u5047\u8bbe\u53ef\u80fd\u4e0d\u6210\u7acb\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u65f6\u5728\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\u4e2d\u6709\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u5728\u53e6\u4e00\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\u4e2d\u6709\u8db3\u591f\u7684\u8bad\u7ec3\u6570\u636e\uff0c\u5e76\u4e14\u540e\u8005\u53ef\u80fd\u4f4d\u4e8e\u4e0d\u540c\u7684\u7279\u5f81\u7a7a\u95f4\u6216\u9075\u5faa\u4e0d\u540c\u7684\u6570\u636e\u5206\u5e03\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6210\u529f\u5730\u8fdb\u884c\u77e5\u8bc6\u8f6c\u79fb\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u6602\u8d35\u7684\u6570\u636e\u6807\u8bb0\u5de5\u4f5c\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u5b66\u4e60\u6027\u80fd\u3002\u8fd1\u5e74\u6765\uff0c\u8fc1\u79fb\u5b66\u4e60\u4f5c\u4e3a\u4e00\u79cd\u65b0\u7684\u5b66\u4e60\u6846\u67b6\u5e94\u8fd0\u800c\u751f\u3002\u672c\u7814\u7a76\u7684\u91cd\u70b9\u662f\u5206\u7c7b\u548c\u56de\u987e\u76ee\u524d\u8fc1\u79fb\u5b66\u4e60\u5728\u5206\u7c7b\u3001\u56de\u5f52\u548c\u805a\u7c7b\u95ee\u9898\u4e0a\u7684\u8fdb\u5c55\u3002\u5728\u672c\u7814\u7a76\u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u8fc1\u79fb\u5b66\u4e60\u4e0e\u5176\u4ed6\u76f8\u5173\u673a\u5668\u5b66\u4e60\u6280\u672f\u7684\u5173\u7cfb\uff0c\u5982\u9886\u57df\u9002\u5e94\u3001\u591a\u4efb\u52a1\u5b66\u4e60\u3001\u6837\u672c\u9009\u62e9\u504f\u5dee\u4ee5\u53ca\u534f\u53d8\u91cf\u504f\u79fb\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u63a2\u8ba8\u4e86\u8fc1\u79fb\u5b66\u4e60\u7814\u7a76\u4e2d\u4e00\u4e9b\u6f5c\u5728\u7684\u672a\u6765\u95ee\u9898\u3002 Why transfer learning in NLP ? \u8bb8\u591aNLP\u4efb\u52a1\u5171\u4eab\u5173\u4e8e\u8bed\u8a00\u7684\u5171\u540c\u77e5\u8bc6(\u4f8b\u5982\u8bed\u8a00\u8868\u793a\u3001\u7ed3\u6784\u76f8\u4f3c\u6027) \u53ef\u4ee5\u8de8\u4efb\u52a1\u5171\u4eab\u7684\u4e0d\u540c\u5c42\u6b21\u7684\u542b\u4e49\u548c\u7ed3\u6784\u7684\u8868\u793a \u4efb\u52a1\u4e4b\u95f4\u53ef\u4ee5\u4e92\u901a\u6709\u65e0\u2014\u2014\u4f8b\u5982\u8bed\u6cd5\u548c\u8bed\u4e49 \u5e26\u6ce8\u91ca\u7684\u6570\u636e\u5f88\u5c11\u89c1\uff0c\u5c3d\u53ef\u80fd\u591a\u5730\u5229\u7528\u76d1\u7763\u5b66\u4e60 \u7ecf\u9a8c\u4e0a\u770b\uff0c\u8fc1\u79fb\u5b66\u4e60\u4fc3\u6210\u4e86\u8bb8\u591a\u6709\u76d1\u7763\u7684 NLP \u4efb\u52a1\u7684 SOTA (\u5982\u5206\u7c7b\u3001\u4fe1\u606f\u63d0\u53d6\u3001\u95ee\u7b54\u7b49)\u3002 Why transfer learning in NLP? (Empirically) Types of transfer learning in NLP What this tutorial is about and what it\u2019s not about \u76ee\u6807\uff1a\u63d0\u4f9bNLP\u4e2d\u8f6c\u79fb\u65b9\u6cd5\u7684\u5e7f\u6cdb\u6982\u8ff0\uff0c\u91cd\u70b9\u4ecb\u7ecd\u622a\u81f3\u76ee\u524d(2019\u5e74\u5e74\u4e2d)\u6700\u6210\u529f\u7684\u7ecf\u9a8c\u65b9\u6cd5\u3002 \u63d0\u4f9b\u5b9e\u7528\u7684\uff0c\u52a8\u624b\u7684\u5efa\u8bae\u2192\u5728\u6559\u7a0b\u7ed3\u675f\u65f6\uff0c\u6bcf\u4e2a\u4eba\u90fd\u6709\u80fd\u529b\u5e94\u7528\u6700\u65b0\u7684\u8fdb\u5c55\u5230\u6587\u672c\u5206\u7c7b\u4efb\u52a1 \u8fd9\u4e0d\u662f\u4ec0\u4e48\uff1a\u5168\u9762\u7684(\u4e0d\u53ef\u80fd\u5728\u4e00\u4e2a\u6559\u7a0b\u4e2d\u6db5\u76d6\u6240\u6709\u76f8\u5173\u7684\u8bba\u6587\uff01) (Bender Rule\uff1a\u672c\u6559\u7a0b\u4e3b\u8981\u9488\u5bf9\u7528\u82f1\u8bed\u5b8c\u6210\u7684\u5de5\u4f5c\uff0c\u5bf9\u5176\u4ed6\u8bed\u8a00\u7684\u53ef\u6269\u5c55\u6027\u53d6\u51b3\u4e8e\u6570\u636e\u548c\u8d44\u6e90\u7684\u53ef\u7528\u6027\u3002)","title":"Transfer Learning in Natural Language Processing"},{"location":"Transfer%20Learning/#1-introduction","text":"Sequential transfer learning \u6307\u7684\u662f\u5728\u4e00\u4e2a\u4efb\u52a1/\u6570\u636e\u96c6\u4e0a\u5b66\u4e60\u540e\u8fc1\u79fb\u5230\u5176\u4ed6\u4efb\u52a1/\u6570\u636e\u96c6\u4e0a\u3002 Pretraining tasks and datasets Unlabeled data and self-supervision \u5f88\u5bb9\u6613\u6536\u96c6\u975e\u5e38\u5927\u7684\u8bed\u6599\u5e93\uff1a\u7ef4\u57fa\u767e\u79d1\uff0c\u65b0\u95fb\uff0c\u7f51\u9875\u6293\u53d6\uff0c\u793e\u4ea4\u5a92\u4f53\u7b49\u3002 \u5229\u7528\u5206\u5e03\u5047\u8bbe\u8fdb\u884c\u8bad\u7ec3\uff1a\u201cYou shall know a word by the company it keeps\u201d(Firth, 1957)\uff0c\u901a\u5e38\u5f62\u5f0f\u5316\u4e3a\u8bad\u7ec3\u67d0\u79cd\u8bed\u8a00\u6a21\u578b\u7684\u53d8\u4f53 \u5173\u6ce8\u4f7f\u7528\u6709\u6548\u7684\u7b97\u6cd5\u4ee5\u5229\u7528\u4e30\u5bcc\u7684\u6570\u636e Supervised pretraining \u5728\u89c6\u89c9\u9886\u57df\u5f88\u5e38\u89c1\uff0c\u4f46\u7531\u4e8e\u7f3a\u4e4f\u5927\u578b\u76d1\u7763\u6570\u636e\u96c6\uff0c\u5728NLP\u4e2d\u8f83\u5c11 \u673a\u5668\u7ffb\u8bd1 NLI\u7528\u4e8e\u53e5\u5b50\u8868\u793a \u4efb\u52a1\u7279\u5b9a\u2014\u2014\u4ece\u4e00\u4e2a\u95ee\u7b54\u6570\u636e\u96c6\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a Target tasks and datasets \u76ee\u6807\u4efb\u52a1\u901a\u5e38\u662f\u76d1\u7763\u7684\uff0c\u5e76\u8de8\u8d8a\u4e00\u7cfb\u5217\u5e38\u89c1\u7684NLP\u4efb\u52a1: \u53e5\u5b50\u6216\u6587\u6863\u5206\u7c7b(\u4f8b\u5982\u60c5\u7eea) \u53e5\u5b50\u5bf9\u5206\u7c7b(\u5982NLI\uff0c\u89e3\u91ca) \u5355\u8bcd\u7ea7\u522b(\u5982\u5e8f\u5217\u6807\u6ce8\u3001\u62bd\u53d6\u95ee\u7b54) \u7ed3\u6784\u5316\u9884\u6d4b(\u4f8b\u5982\u89e3\u6790) \u751f\u6210(\u4f8b\u5982\u5bf9\u8bdd\u3001\u603b\u7ed3) Major themes: LM pretraining \u8bb8\u591a\u6210\u529f\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\u90fd\u662f\u57fa\u4e8e\u8bed\u8a00\u6a21\u578b\u7684 \u975e\u6b63\u5f0f\u5730\uff0c\u8bed\u8a00\u6a21\u578b\u5b66\u4e60 \\(P_{\\theta}(\\text { text }) \\text { or } P_{\\theta}(\\text { text } | \\text { some other text })\\) \u4e0d\u9700\u8981\u4eba\u5de5\u6ce8\u91ca \u8bb8\u591a\u8bed\u8a00\u90fd\u6709\u8db3\u591f\u7684\u6587\u672c\u6765\u5b66\u4e60\u9ad8\u5bb9\u91cf\u6a21\u578b \u8bed\u8a00\u6a21\u578b\u662f\u201c\u591a\u624d\u591a\u827a\u201d\u7684\u2014\u2014\u53ef\u4ee5\u5b66\u4e60\u53e5\u5b50\u548c\u5355\u8bcd\u7684\u8868\u793a\uff0c\u5177\u6709\u591a\u79cd\u76ee\u6807\u51fd\u6570 Major themes: From shallow to deep Bengio et al 2003 : A Neural Probabilistic Language Model Devlin et al 2019: BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding Major themes: pretraining vs target task \u9884\u8bad\u7ec3\u7684\u9009\u62e9\u548c\u76ee\u6807\u4efb\u52a1\u662f\u8026\u5408\u7684 \u53e5\u5b50/\u6587\u6863\u8868\u793a\u5bf9\u5355\u8bcd\u7ea7\u522b\u7684\u9884\u6d4b\u6ca1\u6709\u5e2e\u52a9 \u8bcd\u5411\u91cf\u53ef\u4ee5\u8de8\u4e0a\u4e0b\u6587\u805a\u5408\uff0c\u4f46\u901a\u5e38\u4f1a\u88ab\u5176\u4ed6\u65b9\u6cd5\u8d85\u8d8a \u5728\u8bed\u5883\u8bcd\u5411\u91cf\u4e2d\uff0c\u53cc\u5411\u8bed\u5883\u975e\u5e38\u91cd\u8981 \u901a\u5e38 \u76f8\u4f3c\u7684\u9884\u8bad\u7ec3\u548c\u76ee\u6807\u4efb\u52a1 \u2192 \u6700\u597d\u7ed3\u679c","title":"1. Introduction"},{"location":"Transfer%20Learning/#2-pretraining","text":"","title":"2. Pretraining"},{"location":"Transfer%20Learning/#lm-pretraining","text":"word2vec \u4ee5 CBOW \u4e3a\u4f8b\uff0c\u8f93\u5165\u5c42\u5c06\u76ee\u6807\u8bcd\u8bed\u5883 c \u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7b80\u5355\u6c42\u548c\uff08\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u6c42\u5e73\u5747\uff09\u540e\u5f97\u5230\u8bed\u5883\u5411\u91cf\uff0c\u7136\u540e\u76f4\u63a5\u4e0e\u76ee\u6807\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\u6c42\u70b9\u79ef\uff0c\u76ee\u6807\u51fd\u6570\u4e5f\u5c31\u662f\u8981\u8ba9\u8fd9\u4e2a\u4e0e\u76ee\u6807\u8bcd\u5411\u91cf\u7684\u70b9\u79ef\u53d6\u5f97\u6700\u5927\u503c\uff0c\u5bf9\u5e94\u7684\u4e0e\u975e\u76ee\u6807\u8bcd\u7684\u70b9\u79ef\u5c3d\u91cf\u53d6\u5f97\u6700\u5c0f\u503c\u3002 word2vec \u7684\u51fa\u73b0\uff0c\u6781\u5927\u4fc3\u8fdb\u4e86 NLP \u7684\u53d1\u5c55\uff0c\u5c24\u5176\u662f\u4fc3\u8fdb\u4e86\u6df1\u5ea6\u5b66\u4e60\u5728 NLP \u4e2d\u7684\u5e94\u7528\uff08\u4e0d\u8fc7\u6709\u610f\u601d\u7684\u662f\uff0cword2vec \u7b97\u6cd5\u672c\u8eab\u5176\u5b9e\u5e76\u4e0d\u662f\u4e00\u4e2a\u6df1\u5ea6\u6a21\u578b\uff0c\u5b83\u53ea\u6709\u4e24\u5c42\u5168\u8fde\u63a5\uff09\uff0c \u5229\u7528\u9884\u8bad\u7ec3\u597d\u7684\u8bcd\u5411\u91cf\u6765\u521d\u59cb\u5316\u7f51\u7edc\u7ed3\u6784\u7684\u7b2c\u4e00\u5c42\u51e0\u4e4e\u5df2\u7ecf\u6210\u4e86\u6807\u914d\uff0c\u5c24\u5176\u662f\u5728\u53ea\u6709\u5c11\u91cf\u76d1\u7763\u6570\u636e\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u62ff\u9884\u8bad\u7ec3\u7684 embedding \u521d\u59cb\u5316\u7b2c\u4e00\u5c42\uff0c\u51e0\u4e4e\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u5728\u86ee\u5e72\u3002 Skip-Thought \u501f\u9274 Skip-gram \u7684\u601d\u60f3\uff0c Skip-thoughts \u76f4\u63a5\u5728\u53e5\u5b50\u95f4\u8fdb\u884c\u9884\u6d4b\uff0c\u4e5f\u5c31\u662f\u5c06 Skip-gram \u4e2d\u4ee5\u8bcd\u4e3a\u57fa\u672c\u5355\u4f4d\uff0c\u66ff\u6362\u6210\u4e86\u4ee5\u53e5\u5b50\u4e3a\u57fa\u672c\u5355\u4f4d \uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u9009\u5b9a\u4e00\u4e2a\u7a97\u53e3\uff0c\u904d\u5386\u5176\u4e2d\u7684\u53e5\u5b50\uff0c\u7136\u540e\u5206\u522b\u5229\u7528\u5f53\u524d\u53e5\u5b50\u53bb\u9884\u6d4b\u548c\u8f93\u51fa\u5b83\u7684\u4e0a\u4e00\u53e5\u548c\u4e0b\u4e00\u53e5\u3002 \u4e0d\u8fc7\u548c\u666e\u901a\u6846\u67b6\u4e0d\u4e00\u6837\u7684\u662f\uff0cSkip-thoughts\u6709\u4e24\u4e2aDecoder\u3002\u5728\u4eca\u5929\u770b\u6765\uff0c\u8fd9\u4e2a\u6846\u67b6\u8fd8\u6709\u5f88\u591a\u4e0d\u5b8c\u5584\u6216\u8005\u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff08\u4f5c\u8005\u4e5f\u5728\u8bba\u6587\u4e2d\u5206\u522b\u63d0\u5230\u4e86\u8fd9\u4e9bfuture works\uff09\uff0c\u6bd4\u5982\u8f93\u5165\u7684Encoder\u53ef\u4ee5\u5f15\u5165attention\u673a\u5236\uff0c\u4ece\u800c\u8ba9Decoder\u7684\u8f93\u5165\u4e0d\u518d\u53ea\u662f\u4f9d\u8d56Encoder\u6700\u540e\u4e00\u4e2a\u65f6\u523b\u7684\u8f93\u51fa\uff1bEncoder\u548cDecoder\u53ef\u4ee5\u5229\u7528\u66f4\u6df1\u5c42\u7684\u7ed3\u6784\uff1bDecoder\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6269\u5927\uff0c\u53ef\u4ee5\u9884\u6d4b\u4e0a\u4e0b\u6587\u4e2d\u66f4\u591a\u7684\u53e5\u5b50\uff1bRNN\u4e5f\u4e0d\u662f\u552f\u4e00\u7684\u9009\u62e9\uff0c\u8bf8\u5982CNN\u4ee5\u53ca2017\u5e74\u8c37\u6b4c\u63d0\u51fa\u7684Transformer\u7684\u7ed3\u6784\u4e5f\u53ef\u4ee5\u5229\u7528\u8fdb\u6765\uff0c\u540e\u6765\u679c\u4e0d\u5176\u7136\u8c37\u6b4c\u7684BERT\u4fbf\u501f\u9274\u4e86\u8fd9\u4e00\u601d\u8def\u3002 Quick-thoughts \u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u6539\u8fdb\uff0c\u5c06\u751f\u6210\u4efb\u52a1\u6539\u4e3a\u5206\u7c7b\u4efb\u52a1\u3002\u5177\u4f53\u8bf4\u6765\u5c31\u662f\u628a\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u6b63\u4f8b\uff0c\u628a\u4e0d\u662f\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\u7684\u53e5\u5b50\u5bf9\u6807\u8bb0\u4e3a\u8d1f\u4f8b\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u8f93\u5165\u6a21\u578b\uff0c\u8ba9\u6a21\u578b\u5224\u65ad\u8fd9\u4e9b\u53e5\u5b50\u5bf9\u662f\u5426\u662f\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u4e2a\u5206\u7c7b\u4efb\u52a1\u3002 \u53ef\u4ee5\u8bf4\uff0c\u4ec5\u4ec5\u51e0\u4e2a\u6708\u4e4b\u540e\u7684BERT\u6b63\u662f\u5229\u7528\u7684\u8fd9\u79cd\u601d\u8def\u3002\u800c\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u548cSkip-thoughts\u4e00\u8109\u76f8\u627f\u3002 ELMo word2vec \u6700\u663e\u8457\u7684\u95ee\u9898\u662f\u591a\u4e49\u8bcd\u95ee\u9898\uff0c13 \u5e74\u63d0\u51fa\u540e\u6709\u5f88\u591a\u65b9\u6cd5\u8bd5\u56fe\u89e3\u51b3\u591a\u4e49\u8bcd\u95ee\u9898\uff0c\u4f46\u90fd\u6210\u672c\u592a\u9ad8\u6216\u8005\u592a\u7e41\u7410\u4e86\u3002 \u300aDeep contextualized word representations\u300b\u4e00\u6587\u63d0\u51fa\u4e86 ELMo\uff0c\u57fa\u672c\u6846\u67b6\u662f2-stacked biLSTM + Residual\u7684\u7ed3\u6784 \u4f7f\u7528\u8fd9\u4e2a\u7f51\u7edc\u7ed3\u6784\u5229\u7528\u5927\u91cf\u8bed\u6599\u505a\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u5c31\u80fd\u9884\u5148\u8bad\u7ec3\u597d\u8fd9\u4e2a\u7f51\u7edc\uff0c\u5982\u679c\u8bad\u7ec3\u597d\u8fd9\u4e2a\u7f51\u7edc\u540e\uff0c\u8f93\u5165\u4e00\u4e2a\u65b0\u53e5\u5b50\uff0c\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u90fd\u80fd\u5f97\u5230\u5bf9\u5e94\u7684\u4e09\u4e2aEmbedding:\u6700\u5e95\u5c42\u662f\u5355\u8bcd\u7684Word Embedding\uff0c\u5f80\u4e0a\u8d70\u662f\u7b2c\u4e00\u5c42\u53cc\u5411LSTM\u4e2d\u5bf9\u5e94\u5355\u8bcd\u4f4d\u7f6e\u7684Embedding\uff0c\u8fd9\u5c42\u7f16\u7801\u5355\u8bcd\u7684\u53e5\u6cd5\u4fe1\u606f\u66f4\u591a\u4e00\u4e9b\uff1b\u518d\u5f80\u4e0a\u8d70\u662f\u7b2c\u4e8c\u5c42LSTM\u4e2d\u5bf9\u5e94\u5355\u8bcd\u4f4d\u7f6e\u7684Embedding\uff0c\u8fd9\u5c42\u7f16\u7801\u5355\u8bcd\u7684\u8bed\u4e49\u4fe1\u606f\u66f4\u591a\u4e00\u4e9b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cELMO\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u4e0d\u4ec5\u4ec5\u5b66\u4f1a\u5355\u8bcd\u7684Word Embedding\uff0c\u8fd8\u5b66\u4f1a\u4e86\u4e00\u4e2a\u53cc\u5c42\u53cc\u5411\u7684LSTM\u7f51\u7edc\u7ed3\u6784\uff0c\u800c\u8fd9\u4e24\u8005\u540e\u9762\u90fd\u6709\u7528\u3002 \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\uff0c\u53ef\u4ee5\u6839\u636e\u4e0b\u9762\u7684\u5f0f\u5b50\u5f97\u5230\u5b83\u7684\u5411\u91cf\uff0c\u5176\u4e2d \u03b3 \u662f\u4e00\u4e2ascale\u56e0\u5b50\uff0c\u52a0\u5165\u8fd9\u4e2a\u56e0\u5b50\u4e3b\u8981\u662f\u60f3\u8981\u5c06ELMo\u7684\u5411\u91cf\u4e8e\u5177\u4f53\u4efb\u52a1\u7684\u5411\u91cf\u5206\u5e03\u62c9\u5e73\u5230\u540c\u4e00\u4e2a\u5206\u5e03\u6c34\u5e73\uff0c\u8fd9\u4e2a\u65f6\u5019\u4fbf\u9700\u8981\u8fd9\u4e48\u4e00\u4e2a\u7f29\u653e\u56e0\u5b50\u4e86\u3002\u53e6\u5916\uff0c \\(s_j\\) \u4fbf\u662f\u9488\u5bf9\u6bcf\u4e00\u5c42\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u5229\u7528\u4e00\u4e2asoftmax\u7684\u53c2\u6570\u6765\u5b66\u4e60\u4e0d\u540c\u5c42\u7684\u6743\u503c\u53c2\u6570\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u9700\u8981\u7684\u8bcd\u8bed\u610f\u4e49\u7684\u7c92\u5ea6\u4e5f\u4e0d\u4e00\u81f4\uff0c\u4e00\u822c\u8ba4\u4e3a\u6d45\u5c42\u7684\u8868\u5f81\u6bd4\u8f83\u503e\u5411\u4e8e\u53e5\u6cd5\uff0c\u800c\u9ad8\u5c42\u8f93\u51fa\u7684\u5411\u91cf\u6bd4\u8f83\u503e\u5411\u4e8e\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u901a\u8fc7\u4e00\u4e2asoftmax\u7684\u7ed3\u6784\u8ba9\u4efb\u52a1\u81ea\u52a8\u53bb\u5b66\u4e60\u5404\u5c42\u4e4b\u95f4\u7684\u6743\u91cd\uff0c\u81ea\u7136\u4e5f\u662f\u6bd4\u8f83\u5408\u7406\u7684\u505a\u6cd5\u3002 \u6b64\u5916\uff0cELMo \u8fd8\u4f7f\u7528\u4e86\u300aExploring the Limits of Language Modeling\u300b\u4e2d\u63d0\u51fa\u7684 char-based CNN \u7ed3\u6784\uff0c\u5e94\u7528\u5230\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4e0a\uff0c\u51cf\u5c11\u4e86\u53c2\u6570\u89c4\u6a21\uff0c\u5e76\u89e3\u51b3\u4e86\u4ee4\u4eba\u5934\u75db\u7684 OOV \u95ee\u9898\u3002 ELMo \u4f7f\u7528LSTM \u800c\u4e0d\u662f Transformer \u4f5c\u4e3a\u7279\u5f81\u62bd\u53d6\u5668\uff0c\u800c\u5f88\u591a\u7814\u7a76\u5df2\u7ecf\u8bc1\u660e\u4e86Transformer\u63d0\u53d6\u7279\u5f81\u7684\u80fd\u529b\u662f\u8981\u8fdc\u5f3a\u4e8eLSTM\u7684\uff1b\u53e6\u5916\uff0cELMO\u91c7\u53d6\u53cc\u5411\u62fc\u63a5\u8fd9\u79cd\u878d\u5408\u7279\u5f81\u7684\u80fd\u529b\u53ef\u80fd\u6bd4Bert\u4e00\u4f53\u5316\u7684\u878d\u5408\u7279\u5f81\u65b9\u5f0f\u5f31\uff0c\u4f46\u662f\uff0c\u8fd9\u53ea\u662f\u4e00\u79cd\u4ece\u9053\u7406\u63a8\u65ad\u4ea7\u751f\u7684\u6000\u7591\uff0c\u76ee\u524d\u5e76\u6ca1\u6709\u5177\u4f53\u5b9e\u9a8c\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002 ELMo \u4ee3\u8868\u7740\u57fa\u4e8e\u7279\u5f81\u878d\u5408\u7684\u9884\u8bad\u7ec3\u65b9\u6cd5\uff0c\u800c GPT \u5219\u662f\u57fa\u4e8eFine-tuning\u7684\u6a21\u5f0f\u7684\u5f00\u521b\u8005\u3002 GPT GPT\u4e5f\u91c7\u7528\u4e24\u9636\u6bb5\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u662f\u5229\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u7b2c\u4e8c\u9636\u6bb5\u901a\u8fc7Fine-tuning\u7684\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u4e0b\u56fe\u5c55\u793a\u4e86GPT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\uff08\u6309\u7167\u8bba\u6587\u4e2d\u7684\u8bf4\u6cd5\uff0cGPT\u4e2d\u4f7f\u7528\u7684Transformer\u662f\u53ea\u7528\u4e86Decoder\uff09\uff0c\u5176\u5b9e\u548cELMO\u662f\u7c7b\u4f3c\u7684\uff0c\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u4e24\u70b9\uff1a\u9996\u5148\uff0c\u7279\u5f81\u62bd\u53d6\u5668\u4e0d\u662f\u7528\u7684RNN\uff0c\u800c\u662f\u7528\u7684Transformer\uff0c\u4e0a\u9762\u63d0\u5230\u8fc7\u5b83\u7684\u7279\u5f81\u62bd\u53d6\u80fd\u529b\u8981\u5f3a\u4e8eRNN\uff0c\u8fd9\u4e2a\u9009\u62e9\u5f88\u660e\u663e\u662f\u5f88\u660e\u667a\u7684\uff1b\u5176\u6b21\uff0cGPT\u7684\u9884\u8bad\u7ec3\u867d\u7136\u4ecd\u7136\u662f\u4ee5\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a\u76ee\u6807\u4efb\u52a1\uff0c\u4f46\u662f\u91c7\u7528\u7684\u662f\u5355\u5411\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u6240\u8c13\u201c\u5355\u5411\u201d\u7684\u542b\u4e49\u662f\u6307\uff1a\u8bed\u8a00\u6a21\u578b\u8bad\u7ec3\u7684\u4efb\u52a1\u76ee\u6807\u662f\u6839\u636e\u5355\u8bcd\u7684\u4e0a\u4e0b\u6587\u53bb\u6b63\u786e\u9884\u6d4b\u5355\u8bcd \uff0cGPT\u5219\u53ea\u91c7\u7528\u8fd9\u4e2a\u5355\u8bcd\u7684\u4e0a\u6587\u6765\u8fdb\u884c\u9884\u6d4b\uff0c\u800c\u629b\u5f00\u4e86\u4e0b\u6587\u3002 \u4e0b\u6e38\u4efb\u52a1\u600e\u4e48\u4f7f\u7528 GPT \u5462\uff1f\u9996\u5148\uff0c\u5bf9\u4e8e\u4e0d\u540c\u7684\u4e0b\u6e38\u4efb\u52a1\u6765\u8bf4\uff0c\u672c\u6765\u4f60\u53ef\u4ee5\u4efb\u610f\u8bbe\u8ba1\u81ea\u5df1\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u73b0\u5728\u4e0d\u884c\u4e86\uff0c\u4f60\u8981\u5411GPT\u7684\u7f51\u7edc\u7ed3\u6784\u770b\u9f50\uff0c\u628a\u4efb\u52a1\u7684\u7f51\u7edc\u7ed3\u6784\u6539\u9020\u6210\u548cGPT\u7684\u7f51\u7edc\u7ed3\u6784\u662f\u4e00\u6837\u7684\u3002\u7136\u540e\uff0c\u5728\u505a\u4e0b\u6e38\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u5229\u7528\u7b2c\u4e00\u6b65\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\u521d\u59cb\u5316GPT\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u8fd9\u6837\u901a\u8fc7\u9884\u8bad\u7ec3\u5b66\u5230\u7684\u8bed\u8a00\u5b66\u77e5\u8bc6\u5c31\u88ab\u5f15\u5165\u5230\u4f60\u624b\u5934\u7684\u4efb\u52a1\u91cc\u6765\u4e86\uff0c\u8fd9\u662f\u4e2a\u975e\u5e38\u597d\u7684\u4e8b\u60c5\u3002\u518d\u6b21\uff0c\u4f60\u53ef\u4ee5\u7528\u624b\u5934\u7684\u4efb\u52a1\u53bb\u8bad\u7ec3\u8fd9\u4e2a\u7f51\u7edc\uff0c\u5bf9\u7f51\u7edc\u53c2\u6570\u8fdb\u884cFine-tuning\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u7f51\u7edc\u66f4\u9002\u5408\u89e3\u51b3\u624b\u5934\u7684\u95ee\u9898\u3002 \u5bf9\u4e8eNLP\u5404\u79cd\u82b1\u6837\u7684\u4e0d\u540c\u4efb\u52a1\uff0c\u600e\u4e48\u6539\u9020\u624d\u80fd\u9760\u8fd1GPT\u7684\u7f51\u7edc\u7ed3\u6784\u5462\uff1f GPT\u8bba\u6587\u7ed9\u4e86\u4e00\u4e2a\u6539\u9020\u65bd\u5de5\u56fe\u5982\u4e0a\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff1a\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0d\u7528\u600e\u4e48\u52a8\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\u5373\u53ef\uff1b\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u95ee\u9898\uff0c\u6bd4\u5982Entailment\uff0c\u4e24\u4e2a\u53e5\u5b50\u4e2d\u95f4\u518d\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\uff1b\u5bf9\u6587\u672c\u76f8\u4f3c\u6027\u5224\u65ad\u95ee\u9898\uff0c\u628a\u4e24\u4e2a\u53e5\u5b50\u987a\u5e8f\u98a0\u5012\u4e0b\u505a\u51fa\u4e24\u4e2a\u8f93\u5165\u5373\u53ef\uff0c\u8fd9\u662f\u4e3a\u4e86\u544a\u8bc9\u6a21\u578b\u53e5\u5b50\u987a\u5e8f\u4e0d\u91cd\u8981\uff1b\u5bf9\u4e8e\u591a\u9879\u9009\u62e9\u95ee\u9898\uff0c\u5219\u591a\u8def\u8f93\u5165\uff0c\u6bcf\u4e00\u8def\u628a\u6587\u7ae0\u548c\u7b54\u6848\u9009\u9879\u62fc\u63a5\u4f5c\u4e3a\u8f93\u5165\u5373\u53ef\u3002\u4ece\u4e0a\u56fe\u53ef\u770b\u51fa\uff0c\u8fd9\u79cd\u6539\u9020\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4e0d\u540c\u4efb\u52a1\u53ea\u9700\u8981\u5728\u8f93\u5165\u90e8\u5206\u65bd\u5de5\u5373\u53ef\u3002 BERT Bert \u91c7\u7528\u548cGPT\u5b8c\u5168\u76f8\u540c\u7684\u4e24\u9636\u6bb5\u6a21\u578b\uff0c\u9996\u5148\u662f\u8bed\u8a00\u6a21\u578b\u9884\u8bad\u7ec3\uff1b\u5176\u6b21\u662f\u4f7f\u7528Fine-Tuning\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u548cGPT\u7684\u6700\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u5728\u9884\u8bad\u7ec3\u9636\u6bb5\u91c7\u7528\u4e86\u7c7b\u4f3cELMO\u7684\u53cc\u5411\u8bed\u8a00\u6a21\u578b\uff0c\u5f53\u7136\u53e6\u5916\u4e00\u70b9\u662f\u8bed\u8a00\u6a21\u578b\u7684\u6570\u636e\u89c4\u6a21\u8981\u6bd4GPT\u5927\u3002 BERT\u6700\u4e3b\u8981\u7684\u51e0\u4e2a\u7279\u5f81\u5206\u522b\u662f \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684Transformer \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684Mask-LM(Mask-Language Model) \u5229\u7528Next Sentence Prediction\u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86GPT\u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97BERT\u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1 \u9884\u8bad\u7ec3\u9636\u6bb5 \u56e0\u4e3aEncoder\u4e2d\u7528\u4e86Self-attention\u673a\u5236\uff0c\u800c\u8fd9\u4e2a\u673a\u5236\u4f1a\u5c06\u6bcf\u4e00\u4e2a\u8bcd\u5728\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u8fdb\u884c\u52a0\u6743\u6c42\u548c\u5f97\u5230\u65b0\u7684\u8868\u5f81\uff0c\u66f4\u901a\u4fd7\u7684\u8bf4\u6cd5\u662f\u6bcf\u4e00\u4e2a\u8bcd\u5728\u7ecf\u8fc7Self-attention\u4e4b\u540e\uff0c\u5176\u65b0\u7684\u8868\u5f81\u5c06\u4f1a\u662f\u6574\u4e2a\u8f93\u5165\u5e8f\u5217\u4e2d\u6240\u6709\u8bcd\uff08\u5f53\u7136\u4e5f\u5305\u62ec\u5b83\u672c\u8eab\uff09\u7684\u52a0\u6743\u6c42\u548c\u3002\u5728ELMo\u4e0eGPT\u4e2d\uff0c\u5b83\u4eec\u5e76\u6ca1\u6709\u7528\u4e0a\u8fd9\u79cd\u4ea4\u878d\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u5b83\u4eec\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u5355\u5411\u7684\u6a21\u578b\uff0cELMo\u7a0d\u5fae\u597d\u4e00\u70b9\uff0c\u5c06\u4e24\u4e2a\u5355\u5411\u6a21\u578b\u7684\u4fe1\u606fconcat\u8d77\u6765\uff0cGPT\u5219\u53ea\u7528\u4e86\u5355\u5411\u6a21\u578b\uff0c\u8fd9\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709\u7528\u4e0aTransformer Encoder\uff0c\u53ea\u7528\u4e86Decdoer\u7684\u5929\u751f\u57fa\u56e0\u51b3\u5b9a\u7684\uff0c\u5176\u5b9e\uff0c\u5f88\u591a\u4eba\u5c31\u628a\u8fd9\u79cdleft-to-right\u7684Transformer\u6846\u67b6\u53eb\u505aDecoder\uff0c\u56e0\u4e3a\u4e8b\u5b9e\u4e0aDecoder\u5c31\u662f\u5982\u6b64\uff08\u5177\u4f53\u505a\u7684\u65f6\u5019\u9700\u8981\u63d0\u524d\u628a\u672a\u6765\u5f85\u751f\u6210\u7684\u8bcd\u505a\u597dmask\uff0c\u7ec6\u8282\u4e0a\u901a\u8fc7\u4e0a\u4e09\u89d2\u77e9\u9635\u6765\u5b9e\u73b0\uff09\uff0c\u8fd9\u4e5f\u662fOpenAI\u628a\u4ed6\u4eec\u7684\u6a21\u578b\u53eb\u505a\"Generative\"\u7684\u539f\u56e0\u6240\u5728\u3002 Masked-LM \u53cc\u5411Transformer\u4e0b\u7684\u8bed\u8a00\u6a21\u578b \u7136\u800c\u5728\u8bed\u8a00\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u67d0\u4e2a\u8bcd\u7684\u4e0a\u4e0b\u6587\u8bed\u5883\u9884\u6d4b\u5f53\u524d\u8bcd\u7684\u6982\u7387\uff0c\u5982\u679c\u76f4\u63a5\u628a\u8fd9\u4e2a\u5957\u7528\u5230Transformer\u7684Encoder\u4e2d\uff0c\u4f1a\u53d1\u73b0\u5f85\u9884\u6d4b\u7684\u8f93\u51fa\u548c\u5e8f\u5217\u8f93\u5165\u5df2\u7ecf\u7cc5\u5408\u5728\u4e00\u5757\u4e86\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u89e3\u51b3Self-attention\u4e2d\u5e26\u6765\u4e86\u8868\u5f81\u6027\u80fd\u5353\u8d8a\u7684\u53cc\u5411\u673a\u5236\uff0c\u5374\u53c8\u540c\u65f6\u5e26\u6765\u4e86\u4fe1\u606f\u6cc4\u9732\u7684\u8fd9\u4e00\u95ee\u9898\uff1fBert \u53d7\u5230\u5b8c\u5f62\u586b\u7a7a\u4efb\u52a1\u7684\u542f\u53d1\uff1a\u8f93\u5165\u5e8f\u5217\u4f9d\u7136\u548c\u666e\u901aTransformer\u4fdd\u6301\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u628a\u6316\u6389\u7684\u4e00\u4e2a\u8bcd\u7528\"[MASK]\"\u66ff\u6362 \uff0cTransformer\u7684Encoder\u90e8\u5206\u6309\u6b63\u5e38\u8fdb\u884c\uff0c\u8f93\u51fa\u5c42\u5728\u88ab\u6316\u6389\u7684\u8bcd\u4f4d\u7f6e\uff0c\u63a5\u4e00\u4e2a\u5206\u7c7b\u5c42\u505a\u8bcd\u5178\u5927\u5c0f\u4e0a\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5f97\u5230\u88abmask\u6389\u7684\u8bcd\u6982\u7387\u5927\u5c0f\u3002 \u76f4\u63a5\u628a\u666e\u901a\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u751f\u6210\u95ee\u9898\uff08\u6b63\u5982GPT\u4e2d\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u751f\u6210\u95ee\u9898\u4e00\u6837\uff0c\u867d\u7136\u5176\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5e8f\u5217\u751f\u6210\u95ee\u9898\uff09\uff0c\u53d8\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u95ee\u9898\uff0c\u5e76\u4e14\u4e5f\u76f4\u63a5\u89e3\u51b3\u4e86Encoder\u4e2d\u591a\u5c42Self-attention\u7684\u53cc\u5411\u673a\u5236\u5e26\u6765\u7684\u6cc4\u5bc6\u95ee\u9898\uff08\u5355\u5c42Self-attention\u662f\u771f\u53cc\u5411\uff0c\u4f46\u4e0d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff0c\u53ea\u6709\u591a\u5c42\u7d2f\u52a0\u7684Self-attention\u624d\u4f1a\u5e26\u6765\u6cc4\u5bc6\u95ee\u9898\uff09\uff0c\u4f7f\u5f97\u8bed\u8a00\u6a21\u578b\u4e2d\u7684\u771f\u53cc\u5411\u673a\u5236\u53d8\u4e3a\u73b0\u5b9e\u3002 \u4e0d\u8fc7\uff0cBERT\u9488\u5bf9\u5982\u4f55\u505a\u201c[MASK]\u201d\uff0c\u505a\u4e86\u4e00\u4e9b\u66f4\u6df1\u5165\u7684\u7814\u7a76\uff0c\u5b83\u505a\u4e86\u5982\u4e0b\u5904\u7406 \u9009\u53d6\u8bed\u6599\u4e2d\u6240\u6709\u8bcd\u768415%\u8fdb\u884c\u968f\u673amask \u9009\u4e2d\u7684\u8bcd\u572880%\u7684\u6982\u7387\u4e0b\u88ab\u771f\u5b9emask \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u800c\u88ab\u968f\u673a\u66ff\u6362\u6210\u5176\u4ed6\u4e00\u4e2a\u8bcd \u9009\u4e2d\u7684\u8bcd\u572810%\u7684\u6982\u7387\u4e0b\u4e0d\u505amask\uff0c\u4ecd\u7136\u4fdd\u7559\u539f\u6765\u771f\u5b9e\u7684\u8bcd \u8fd9\u4f7f\u5f97Transformer\u7f16\u7801\u5668\u4e0d\u77e5\u9053\u5b83\u5c06\u88ab\u8981\u6c42\u9884\u6d4b\u54ea\u4e9b\u5355\u8bcd\u6216\u54ea\u4e9b\u5355\u8bcd\u5df2\u88ab\u968f\u673a\u5355\u8bcd\u66ff\u6362\uff0c\u56e0\u6b64\u5b83\u88ab\u8feb\u4fdd\u6301\u6bcf\u4e2a\u8f93\u5165\u6807\u8bb0\u7684\u5206\u5e03\u5f0f\u4e0a\u4e0b\u6587\u8868\u793a\u3002 Next Sentence Prediction \u5229\u7528\u548c\u501f\u9274\u4e86Skip-thoughts\u65b9\u6cd5\u4e2d\u7684\u53e5\u5b50\u9884\u6d4b\u95ee\u9898\uff0c\u6765\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u5177\u4f53\u505a\u6cd5\u5219\u662f\u5c06\u4e24\u4e2a\u53e5\u5b50\u7ec4\u5408\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u5f53\u7136\u7ec4\u5408\u65b9\u5f0f\u4f1a\u6309\u7167\u4e0b\u9762\u5c06\u8981\u4ecb\u7ecd\u7684\u65b9\u5f0f\uff0c\u7136\u540e\u8ba9\u6a21\u578b\u9884\u6d4b\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u662f\u5148\u540e\u8fd1\u90bb\u7684\u4e24\u4e2a\u53e5\u5b50\uff0c\u4e5f\u5c31\u662f\u4f1a\u628a\"Next Sentence Prediction\"\u95ee\u9898\u5efa\u6a21\u6210\u4e3a\u4e00\u4e2a\u4e8c\u5206\u7c7b\u95ee\u9898\u3002\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u6570\u636e\u4e2d\u670950%\u7684\u60c5\u51b5\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u5148\u540e\u5173\u7cfb\uff0c\u800c\u53e6\u591650%\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e24\u4e2a\u53e5\u5b50\u662f\u968f\u673a\u4ece\u8bed\u6599\u4e2d\u51d1\u5230\u4e00\u8d77\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u5177\u5907\u5148\u540e\u5173\u7cfb\uff0c\u4ee5\u6b64\u6765\u6784\u9020\u8bad\u7ec3\u6570\u636e\u3002\u53e5\u5b50\u7ea7\u522b\u7684\u9884\u6d4b\u601d\u8def\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684Skip-thoughts\u57fa\u672c\u4e00\u81f4\uff0c\u5f53\u7136\u66f4\u672c\u8d28\u7684\u601d\u60f3\u6765\u6e90\u8fd8\u662f\u6765\u81ea\u4e8eword2vec\u4e2d\u7684skip-gram\u6a21\u578b\u3002 \u8981\u6c42\u6a21\u578b\u9664\u4e86\u505a\u4e0a\u8ff0\u7684Masked\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u5916\uff0c\u9644\u5e26\u518d\u505a\u4e2a\u53e5\u5b50\u5173\u7cfb\u9884\u6d4b\uff0c\u5224\u65ad\u7b2c\u4e8c\u4e2a\u53e5\u5b50\u662f\u4e0d\u662f\u771f\u7684\u662f\u7b2c\u4e00\u4e2a\u53e5\u5b50\u7684\u540e\u7eed\u53e5\u5b50\u3002\u4e4b\u6240\u4ee5\u8fd9\u4e48\u505a\uff0c\u662f\u8003\u8651\u5230\u5f88\u591aNLP\u4efb\u52a1\u662f\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\uff0c\u5355\u8bcd\u9884\u6d4b\u7c92\u5ea6\u7684\u8bad\u7ec3\u5230\u4e0d\u4e86\u53e5\u5b50\u5173\u7cfb\u8fd9\u4e2a\u5c42\u7ea7\uff0c\u589e\u52a0\u8fd9\u4e2a\u4efb\u52a1\u6709\u52a9\u4e8e\u4e0b\u6e38\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\u3002\u6240\u4ee5\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u7684\u9884\u8bad\u7ec3\u662f\u4e2a\u591a\u4efb\u52a1\u8fc7\u7a0b\u3002\u8fd9\u4e5f\u662fBert\u7684\u4e00\u4e2a\u521b\u65b0\u3002 \u5728\u9884\u8bad\u7ec3\u9636\u6bb5\uff0c\u56e0\u4e3a\u6709\u4e24\u4e2a\u4efb\u52a1\u9700\u8981\u8bad\u7ec3\uff1aMask-LM\u548cNext Sentence Prediction\uff0c\u56e0\u6b64BERT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2aMulti-task Learning\uff0c\u5177\u4f53\u8bf4\u6765\uff0cBERT\u7684\u635f\u5931\u51fd\u6570\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u6765\u81ea\u4e8eMask-LM\u7684\u5355\u8bcd\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u53e5\u5b50\u7ea7\u522b\u7684\u5206\u7c7b\u4efb\u52a1\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u4efb\u52a1\u7684\u8054\u5408\u5b66\u4e60\uff0c\u53ef\u4ee5\u4f7f\u5f97BERT\u5b66\u4e60\u5230\u7684\u8868\u5f81\u65e2\u6709token\u7ea7\u522b\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u5305\u542b\u4e86\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u4fe1\u606f\u3002\u5177\u4f53\u7684\u635f\u5931\u51fd\u6570\u5982\u4e0b Fine-Tuning \u9636\u6bb5 \u8f93\u5165\u5c42 \uff1a\u5982\u679c\u8f93\u5165\u53ea\u6709\u4e00\u4e2a\u53e5\u5b50\u7684\u8bdd\uff0c\u5219\u76f4\u63a5\u5728\u53e5\u5b50\u7684\u524d\u540e\u6dfb\u52a0\u53e5\u5b50\u7684\u8d77\u59cb\u6807\u8bb0\u4f4d\u548c\u53e5\u5b50\u7684\u7ed3\u675f\u7b26\u53f7\uff0c\u5728BERT\u4e2d\uff0c\u8d77\u59cb\u6807\u8bb0\u90fd\u7528\u201c[CLS]\u201d\u6765\u8868\u793a\uff0c\u7ed3\u675f\u6807\u8bb0\u7b26\u7528\"[SEP]\"\u8868\u793a\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u53e5\u5b50\u7684\u8f93\u5165\u60c5\u51b5\uff0c\u9664\u4e86\u8d77\u59cb\u6807\u8bb0\u548c\u7ed3\u675f\u6807\u8bb0\u4e4b\u5916\uff0c\u4e24\u4e2a\u53e5\u5b50\u95f4\u901a\u8fc7\"[SEP]\"\u6765\u8fdb\u884c\u533a\u5206\u3002\u9664\u4e86\u8fd9\u4e9b\u4e4b\u5916\uff0cBERT\u8fd8\u7528\u4e86\u4e24\u4e2a\u8868\u793a\u5f53\u524d\u662f\u53e5\u5b50A\u8fd8\u662f\u53e5\u5b50B\u7684\u5411\u91cf\u6765\u8fdb\u884c\u8868\u793a\uff0c\u5bf9\u4e8e\u53e5\u5b50A\u6765\u8bf4\uff0c\u6bcf\u4e00\u8bcd\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u540c\u6837\u7684\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50A\u7684\u5411\u91cf\uff0c\u76f8\u5e94\u7684\uff0c\u5982\u679c\u6709\u53e5\u5b50B\u7684\u8bdd\uff0c\u53e5\u5b50B\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8bcd\u4e5f\u90fd\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u53e5\u5b50\u4e3a\u53e5\u5b50B\u7684\u5411\u91cf\u3002 NLP \u7684**\u56db\u5927\u4efb\u52a1**\uff1a\u4e00\u7c7b\u662f\u5e8f\u5217\u6807\u6ce8\uff0c\u8fd9\u662f\u6700\u5178\u578b\u7684NLP\u4efb\u52a1\uff0c\u6bd4\u5982\u4e2d\u6587\u5206\u8bcd\uff0c\u8bcd\u6027\u6807\u6ce8\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u8bed\u4e49\u89d2\u8272\u6807\u6ce8\u7b49\u90fd\u53ef\u4ee5\u5f52\u5165\u8fd9\u4e00\u7c7b\u95ee\u9898\uff0c\u5b83\u7684\u7279\u70b9\u662f\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u8981\u6c42\u6a21\u578b\u6839\u636e\u4e0a\u4e0b\u6587\u90fd\u8981\u7ed9\u51fa\u4e00\u4e2a\u5206\u7c7b\u7c7b\u522b\u3002\u7b2c\u4e8c\u7c7b\u662f\u5206\u7c7b\u4efb\u52a1\uff0c\u6bd4\u5982\u6211\u4eec\u5e38\u89c1\u7684\u6587\u672c\u5206\u7c7b\uff0c\u60c5\u611f\u8ba1\u7b97\u7b49\u90fd\u53ef\u4ee5\u5f52\u5165\u8fd9\u4e00\u7c7b\u3002\u5b83\u7684\u7279\u70b9\u662f\u4e0d\u7ba1\u6587\u7ae0\u6709\u591a\u957f\uff0c\u603b\u4f53\u7ed9\u51fa\u4e00\u4e2a\u5206\u7c7b\u7c7b\u522b\u5373\u53ef\u3002\u7b2c\u4e09\u7c7b\u4efb\u52a1\u662f\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\uff0c\u6bd4\u5982Entailment\uff0cQA\uff0c\u8bed\u4e49\u6539\u5199\uff0c\u81ea\u7136\u8bed\u8a00\u63a8\u7406\u7b49\u4efb\u52a1\u90fd\u662f\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u5b83\u7684\u7279\u70b9\u662f\u7ed9\u5b9a\u4e24\u4e2a\u53e5\u5b50\uff0c\u6a21\u578b\u5224\u65ad\u51fa\u4e24\u4e2a\u53e5\u5b50\u662f\u5426\u5177\u5907\u67d0\u79cd\u8bed\u4e49\u5173\u7cfb\uff1b\u7b2c\u56db\u7c7b\u662f\u751f\u6210\u5f0f\u4efb\u52a1\uff0c\u6bd4\u5982\u673a\u5668\u7ffb\u8bd1\uff0c\u6587\u672c\u6458\u8981\uff0c\u5199\u8bd7\u9020\u53e5\uff0c\u770b\u56fe\u8bf4\u8bdd\u7b49\u90fd\u5c5e\u4e8e\u8fd9\u4e00\u7c7b\u3002\u5b83\u7684\u7279\u70b9\u662f\u8f93\u5165\u6587\u672c\u5185\u5bb9\u540e\uff0c\u9700\u8981\u81ea\u4e3b\u751f\u6210\u53e6\u5916\u4e00\u6bb5\u6587\u5b57\u3002 \u5bf9\u4e8e\u79cd\u7c7b\u5982\u6b64\u7e41\u591a\u800c\u4e14\u5404\u5177\u7279\u70b9\u7684\u4e0b\u6e38NLP\u4efb\u52a1\uff0cBert\u5982\u4f55\u6539\u9020\u8f93\u5165\u8f93\u51fa\u90e8\u5206\u4f7f\u5f97\u5927\u90e8\u5206NLP\u4efb\u52a1\u90fd\u53ef\u4ee5\u4f7f\u7528Bert\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u53c2\u6570\u5462\uff1f\u4e0a\u56fe\u7ed9\u51fa\u793a\u4f8b\uff0c\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u7c7b\u4efb\u52a1\uff0c\u5f88\u7b80\u5355\uff0c\u548cGPT\u7c7b\u4f3c\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\uff0c\u53e5\u5b50\u4e4b\u95f4\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\u3002\u5bf9\u4e8e\u8f93\u51fa\u6765\u8bf4\uff0c\u628a\u7b2c\u4e00\u4e2a\u8d77\u59cb\u7b26\u53f7\u5bf9\u5e94\u7684Transformer\u6700\u540e\u4e00\u5c42\u4f4d\u7f6e\u4e0a\u9762\u4e32\u63a5\u4e00\u4e2asoftmax\u5206\u7c7b\u5c42\u5373\u53ef\u3002\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0eGPT\u4e00\u6837\uff0c\u53ea\u9700\u8981\u589e\u52a0\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\uff0c\u8f93\u51fa\u90e8\u5206\u548c\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u4efb\u52a1\u7c7b\u4f3c\u6539\u9020\uff1b\u5bf9\u4e8e\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\uff0c\u8f93\u5165\u90e8\u5206\u548c\u5355\u53e5\u5206\u7c7b\u662f\u4e00\u6837\u7684\uff0c\u53ea\u9700\u8981\u8f93\u51fa\u90e8\u5206Transformer\u6700\u540e\u4e00\u5c42\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u5e94\u4f4d\u7f6e\u90fd\u8fdb\u884c\u5206\u7c7b\u5373\u53ef\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c\u4e0a\u9762\u5217\u51fa\u7684NLP\u56db\u5927\u4efb\u52a1\u91cc\u9762\uff0c\u9664\u4e86\u751f\u6210\u7c7b\u4efb\u52a1\u5916\uff0cBert\u5176\u5b83\u90fd\u8986\u76d6\u5230\u4e86\uff0c\u800c\u4e14\u6539\u9020\u8d77\u6765\u5f88\u7b80\u5355\u76f4\u89c2\u3002\u5c3d\u7ba1Bert\u8bba\u6587\u6ca1\u6709\u63d0\uff0c\u4f46\u662f\u7a0d\u5fae\u52a8\u52a8\u8111\u5b50\u5c31\u53ef\u4ee5\u60f3\u5230\uff0c\u5176\u5b9e\u5bf9\u4e8e\u673a\u5668\u7ffb\u8bd1\u6216\u8005\u6587\u672c\u6458\u8981\uff0c\u804a\u5929\u673a\u5668\u4eba\u8fd9\u79cd\u751f\u6210\u5f0f\u4efb\u52a1\uff0c\u540c\u6837\u53ef\u4ee5\u7a0d\u4f5c\u6539\u9020\u5373\u53ef\u5f15\u5165Bert\u7684\u9884\u8bad\u7ec3\u6210\u679c\u3002\u53ea\u9700\u8981\u9644\u7740\u5728S2S\u7ed3\u6784\u4e0a\uff0cencoder\u90e8\u5206\u662f\u4e2a\u6df1\u5ea6Transformer\u7ed3\u6784\uff0cdecoder\u90e8\u5206\u4e5f\u662f\u4e2a\u6df1\u5ea6Transformer\u7ed3\u6784\u3002\u6839\u636e\u4efb\u52a1\u9009\u62e9\u4e0d\u540c\u7684\u9884\u8bad\u7ec3\u6570\u636e\u521d\u59cb\u5316encoder\u548cdecoder\u5373\u53ef\u3002\u8fd9\u662f\u76f8\u5f53\u76f4\u89c2\u7684\u4e00\u79cd\u6539\u9020\u65b9\u6cd5\u3002\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u66f4\u7b80\u5355\u4e00\u70b9\uff0c\u6bd4\u5982\u76f4\u63a5\u5728\u5355\u4e2aTransformer\u7ed3\u6784\u4e0a\u52a0\u88c5\u9690\u5c42\u4ea7\u751f\u8f93\u51fa\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\u4e0d\u8bba\u5982\u4f55\uff0c\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0cNLP\u56db\u5927\u7c7b\u4efb\u52a1\u90fd\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u5730\u6539\u9020\u6210Bert\u80fd\u591f\u63a5\u53d7\u7684\u65b9\u5f0f\u3002\u8fd9\u5176\u5b9e\u662fBert\u7684\u975e\u5e38\u5927\u7684\u4f18\u70b9\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u51e0\u4e4e\u53ef\u4ee5\u505a\u4efb\u4f55NLP\u7684\u4e0b\u6e38\u4efb\u52a1\uff0c\u5177\u5907\u666e\u9002\u6027\uff0c\u8fd9\u662f\u5f88\u5f3a\u7684\u3002 \u6700\u540e\uff0c\u6211\u4eec\u518d\u6b21\u603b\u7ed3\u4e0bBERT\u7684\u51e0\u4e2a\u4e3b\u8981\u7279\u70b9\uff1a Transformer Encoder\u56e0\u4e3a\u6709Self-attention\u673a\u5236\uff0c\u56e0\u6b64BERT\u81ea\u5e26\u53cc\u5411\u529f\u80fd \u56e0\u4e3a\u53cc\u5411\u529f\u80fd\u4ee5\u53ca\u591a\u5c42Self-attention\u673a\u5236\u7684\u5f71\u54cd\uff0c\u4f7f\u5f97BERT\u5fc5\u987b\u4f7f\u7528Cloze\u7248\u7684\u8bed\u8a00\u6a21\u578bMasked-LM\u6765\u5b8c\u6210token\u7ea7\u522b\u7684\u9884\u8bad\u7ec3 \u4e3a\u4e86\u83b7\u53d6\u6bd4\u8bcd\u66f4\u9ad8\u7ea7\u522b\u7684\u53e5\u5b50\u7ea7\u522b\u7684\u8bed\u4e49\u8868\u5f81\uff0cBERT\u52a0\u5165\u4e86Next Sentence Prediction\u6765\u548cMasked-LM\u4e00\u8d77\u505a\u8054\u5408\u8bad\u7ec3 \u4e3a\u4e86\u9002\u914d\u591a\u4efb\u52a1\u4e0b\u7684\u8fc1\u79fb\u5b66\u4e60\uff0cBERT\u8bbe\u8ba1\u4e86\u66f4\u901a\u7528\u7684\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42 \u7136\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u770bBERT\u7684\u5de5\u4f5c\u90fd\u7ad9\u5728\u4e86\u54ea\u4e9b\u201c\u5de8\u4eba\u80a9\u8180\u201d\u4e0a\uff1a \u9488\u5bf9\u7b2c\u4e00\u70b9\uff0c\u53cc\u5411\u529f\u80fd\u662fTransformer Encoder\u81ea\u5e26\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662fTransformer \u7b2c\u4e8c\u70b9\u4e2dMasked-LM\u7684\u5de8\u4eba\u80a9\u8180\u662f\u8bed\u8a00\u6a21\u578b\uff0cCBOW\u4ee5\u53caCloze\u95ee\u9898 \u7b2c\u4e09\u70b9\u4e2dNext Sentence Prediction\u7684\u201c\u5de8\u4eba\u80a9\u8180\u201d\u662fSkip-gram\uff0cSkip-thoughts\u548cQuick-thoughts\u7b49\u5de5\u4f5c \u7b2c\u56db\u70b9\u4e2d\uff0c\u5bf9\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u7684\u6539\u9020\uff0c\u501f\u9274\u4e86T-DMCA\u4ee5\u53caGPT\u7684\u505a\u6cd5","title":"LM pretraining"},{"location":"Transfer%20Learning/#word-vectors","text":"\u4e3a\u4ec0\u4e48\u8981\u8bcd\u5d4c\u5165\uff1f \u8bcd\u5d4c\u5165\u662f\u53ef\u4ee5\u5b66\u4e60\u7684\u53c2\u6570 \u5728\u4e0d\u540c\u4efb\u52a1\u4e2d\u5171\u4eab\u8868\u793a \u4f4e\u7ef4\u7a7a\u95f4\u66f4\u597d\u8ba1\u7b97\u2014\u2014\u96be\u4ee5\u5904\u7406\u7a00\u758f\u5411\u91cf Unsupervised pretraining: Pre-Neural Word vector pretraining Word2vec \u4e0e NNLM \u90fd\u662f\u8bed\u8a00\u6a21\u578b\uff0c\u4f46\u4e0d\u540c\u7684\u662f word2vec \u7684\u91cd\u70b9\u662f\u901a\u8fc7\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u4ece\u800c\u5f97\u5230\u8bcd\u5411\u91cf\uff0c\u56e0\u6b64\u4ee5\u8bcd\u5411\u91cf\u4e3a\u91cd\u70b9\u5bf9 NNLM \u8fdb\u884c\u4e86\u6539\u8fdb\u4f18\u5316\uff0c\u5e76\u4e14\u4f7f\u7528 CBOW \u548c Skip-gram \u4e24\u79cd\u65b9\u5f0f\u5b66\u4e60\u8bcd\u5411\u91cf\uff0cGloVe \u5219\u901a\u8fc7\u6784\u5efa\u5171\u73b0\u77e9\u9635\uff0c\u4e0d\u901a\u8fc7\u4f20\u7edf\u7684 SVD \u8fdb\u884c\u8ba1\u7b97\u590d\u6742\u5ea6\u8f83\u9ad8\u7684\u77e9\u9635\u5206\u89e3\uff0c\u800c\u662f\u4f7f\u7528\u5e73\u65b9\u8bef\u5dee\u4fc3\u4f7f\u70b9\u79ef\u5c3d\u53ef\u80fd\u5f97\u63a5\u8fd1\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u56e0\u4e3a\u5982\u679c\u4f7f\u5411\u91cf\u70b9\u79ef\u7b49\u4e8e\u5171\u73b0\u6982\u7387\u7684\u5bf9\u6570\uff0c\u5411\u91cf\u5dee\u5f02\u53d8\u6210\u4e86\u5171\u73b0\u6982\u7387\u7684\u6bd4\u7387\u5373\u5355\u8bcd j \u51fa\u73b0\u5728\u5355\u8bcd i \u7684\u4e0a\u4e0b\u6587\u4e2d\u7684\u6982\u7387\uff0c\u8fd9\u4e00\u6bd4\u503c\u8574\u542b\u4e86\u8bed\u4e49\u4fe1\u606f\u3002 \u76f8\u6bd4word2vec\uff0cGloVe\u5374\u66f4\u52a0\u5145\u5206\u7684\u5229\u7528\u4e86\u8bcd\u7684\u5171\u73b0\u4fe1\u606f \uff0cword2vec\u4e2d\u5219\u662f\u76f4\u63a5\u7c97\u66b4\u7684\u8ba9\u4e24\u4e2a\u5411\u91cf\u7684\u70b9\u4e58\u76f8\u6bd4\u5176\u4ed6\u8bcd\u7684\u70b9\u4e58\u6700\u5927\uff0c\u81f3\u5c11\u5728\u8868\u9762\u4e0a\u770b\u6765\u4f3c\u4e4e\u662f\u6ca1\u6709\u7528\u5230\u8bcd\u7684\u5171\u73b0\u4fe1\u606f\uff0c\u4e0d\u50cfGloVe\u8fd9\u91cc\u660e\u786e\u7684\u5c31\u662f\u62df\u5408\u8bcd\u5bf9\u7684\u5171\u73b0\u9891\u7387\u3002 fastText\u5219\u662f\u5229\u7528\u5e26\u6709\u76d1\u7763\u6807\u8bb0\u7684\u6587\u672c\u5206\u7c7b\u6570\u636e\u5b8c\u6210\u8bad\u7ec3\uff0c\u6846\u67b6\u548c CBOW \u4e00\u81f4\uff0c\u4e0d\u8fc7\u8f93\u5165\u6570\u636e\u4e0d\u518d\u662f bag-of-words \u7684\u4fe1\u606f\uff0c\u8fd8\u52a0\u4e0a\u4e86 ngram \u4fe1\u606f\uff0c\u8fd9\u5c31\u52a0\u5165\u4e86\u8bed\u5e8f\u4fe1\u606f\uff0c\u800c\u4e14\u8f93\u51fa\u7684\u662f\u5f53\u524d\u8f93\u5165\u6587\u672c\u7684\u7c7b\u522b\u3002\u6b64\u5916\u8fd8\u5f15\u5165subword\u6765\u5904\u7406\u957f\u8bcd\uff0c\u5904\u7406 OOV \u95ee\u9898\u3002","title":"Word vectors"},{"location":"Transfer%20Learning/#sentence-and-document-vectors","text":"Paragraph vector PV-DM\u7684\u5168\u79f0\u662fDistributed Memory Model of Paragraph Vectors\uff0c\u548cCBOW\u7c7b\u4f3c\uff0c\u4e5f\u662f\u901a\u8fc7\u4e0a\u4e0b\u6587\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u4e0d\u8fc7\u5728\u8f93\u5165\u5c42\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4e5f\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6587\u6863ID\u6620\u5c04\u5230\u4e00\u4e2a\u5411\u91cf\u7684look-up table\uff0c\u6a21\u578b\u7684\u76ee\u7684\u4fbf\u662f\u5c06\u5f53\u524d\u6587\u6863\u7684\u5411\u91cf\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5411\u91cf\u8054\u5408\u8f93\u5165\u6a21\u578b\uff0c\u5e76\u8ba9\u6a21\u578b\u9884\u6d4b\u4e0b\u4e00\u4e2a\u8bcd\uff0c\u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u5bf9\u4e8e\u73b0\u6709\u7684\u6587\u6863\uff0c\u4fbf\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u5feb\u901f\u5f97\u5230\u8be5\u6587\u6863\u7684\u5411\u91cf\uff0c\u800c\u5bf9\u4e8e\u65b0\u7684\u4e00\u7bc7\u6587\u6863\uff0c\u90a3\u4e48\u5219\u9700\u8981\u5c06\u5df2\u6709\u7684look-up table\u6dfb\u52a0\u76f8\u5e94\u7684\u5217\uff0c\u7136\u540e\u91cd\u65b0\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u53ea\u4e0d\u8fc7\u6b64\u65f6\u56fa\u5b9a\u597d\u5176\u4ed6\u7684\u53c2\u6570\uff0c\u53ea\u8c03\u6574look-up table\uff0c\u6536\u655b\u540e\u4fbf\u53ef\u4ee5\u5f97\u5230\u65b0\u6587\u6863\u5bf9\u5e94\u7684\u5411\u91cf\u4e86\u3002PV-DBOW\u7684\u5168\u79f0\u5219\u662fDistributed Bag of Words version of Paragraph Vector\uff0c\u548cSkip-gram\u7c7b\u4f3c\uff0c\u901a\u8fc7\u6587\u6863\u6765\u9884\u6d4b\u6587\u6863\u5185\u7684\u8bcd\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u968f\u673a\u91c7\u6837\u4e00\u4e9b\u6587\u672c\u7247\u6bb5\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u7247\u6bb5\u4e2d\u91c7\u6837\u4e00\u4e2a\u8bcd\uff0c\u8ba9PV-DBOW\u6a21\u578b\u6765\u9884\u6d4b\u8fd9\u4e2a\u8bcd\uff0c\u4ee5\u6b64\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u8bad\u7ec3\u65b9\u6cd5\uff0c\u8bf4\u767d\u4e86\uff0c\u672c\u8d28\u4e0a\u548cSkip-gram\u662f\u4e00\u6837\u7684\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u81f4\u547d\u7684\u5f31\u70b9\uff0c\u5c31\u662f\u4e3a\u4e86\u83b7\u53d6\u65b0\u6587\u6863\u7684\u5411\u91cf\uff0c\u8fd8\u5f97\u7ee7\u7eed\u8d70\u4e00\u904d\u8bad\u7ec3\u6d41\u7a0b\uff0c\u5e76\u4e14\u7531\u4e8e\u6a21\u578b\u4e3b\u8981\u662f\u9488\u5bf9\u6587\u6863\u5411\u91cf\u9884\u6d4b\u8bcd\u5411\u91cf\u7684\u8fc7\u7a0b\u8fdb\u884c\u5efa\u6a21\uff0c\u5176\u5b9e\u5f88\u96be\u53bb\u8868\u5f81\u8bcd\u8bed\u4e4b\u95f4\u7684\u66f4\u4e30\u5bcc\u7684\u8bed\u4e49\u7ed3\u6784\uff0c\u6240\u4ee5\u8fd9\u4e24\u79cd\u83b7\u53d6\u6587\u6863\u5411\u91cf\u7684\u65b9\u6cd5\u90fd\u672a\u80fd\u5927\u89c4\u6a21\u5e94\u7528\u5f00\u6765\u3002 Skip-Thought Vectors Autoencoder pretraining Semi-supervised Sequence Learning \u8bba\u6587\u63d0\u51fa\u4e862\u4e2a\u65b9\u6cd5\uff0c\u7528\u65e0\u6807\u7b7e\u6570\u636e\u8fdb\u884c\u65e0\u76d1\u7763\u8bad\u7ec3\u7684\u53c2\u6570\u6765\u521d\u59cb\u5316\u6709\u76d1\u7763\u5b66\u4e60\u7684\u6a21\u578b\uff1a\u4e00\u79cd\u662f\u7528\u57fa\u7840\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53e6\u4e00\u79cd\u662f\u7528seq2seq\u81ea\u7f16\u7801\u6a21\u578b\uff08sequence autoencoder\uff0c SA-LSTM\uff09\uff0cencoder\u8f93\u5165\u4e3a\u8fd9\u4e2aWXYZ\uff0cdecoder\u8f93\u51fa\u4e3a\u4f9d\u7136\u4e3aWXYZ\uff0c\u548c\u666e\u901a\u7684seq2seq\u6a21\u578b\u76f8\u6bd4\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u91cc\u7684encoder\u548cdecoder\u9690\u5c42\u662f\u5171\u4eab\u7684\u3002\u6709\u79cd\u63d0\u524d\u8ba9\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u5b66\u4f1a\u53e5\u5b50\u7684\u8868\u8fbe\uff0c\u518d\u4e4b\u540e\u6839\u636e\u6807\u7b7e\u53bb\u5b66\u4e60\u5206\u7c7b\u7684\u80fd\u529b\u7684\u601d\u60f3\u3002 Supervised sentence embeddings \u4e5f\u53ef\u4ee5\u6709\u76d1\u7763\u8bad\u7ec3\u53e5\u5b50\u5d4c\u5165 Paragram-phrase: uses paraphrase database for supervision, best for paraphrase and semantic similarity ( Wieting et al. 2016 ) InferSent: bi-LSTM trained on SNLI + MNLI ( Conneau et al. 2017 ) GenSen: multitask training(skip-thought, machine translation, NLI, parsing) ( Subramanian et al. 2018 ) InferSent \u662f\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\u5728\u65af\u5766\u798f\u7684SNLI\uff08Stanford Natural Language Inference\uff09\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\uff0c\u5c14\u540e\u5c06\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u7279\u5f81\u63d0\u53d6\u5668\uff0c\u4ee5\u6b64\u6765\u83b7\u5f97\u4e00\u4e2a\u53e5\u5b50\u7684\u5411\u91cf\u8868\u793a\uff0c\u518d\u5c06\u8fd9\u4e2a\u53e5\u5b50\u7684\u8868\u793a\u5e94\u7528\u5728\u65b0\u7684\u5206\u7c7b\u4efb\u52a1\u4e0a\uff0c\u6765\u8bc4\u4f30\u53e5\u5b50\u5411\u91cf\u7684\u4f18\u52a3\u3002\u6846\u67b6\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a \u8fd9\u4e2a\u6846\u67b6\u6700\u5e95\u5c42\u662f\u4e00\u4e2a Encoder\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u8981\u83b7\u53d6\u7684\u53e5\u5b50\u5411\u91cf\u63d0\u53d6\u5668\uff0c\u7136\u540e\u5c06\u5f97\u5230\u7684\u53e5\u5b50\u5411\u91cf\u901a\u8fc7\u4e00\u4e9b\u5411\u91cf\u64cd\u4f5c\u540e\u5f97\u5230\u53e5\u5b50\u5bf9\u7684\u6df7\u5408\u8bed\u4e49\u7279\u5f81\uff0c\u6700\u540e\u63a5\u4e0a\u5168\u8fde\u63a5\u5c42\u5e76\u505a SNLI \u4e0a\u7684\u4e09\u5206\u7c7b\u4efb\u52a1\u3002","title":"Sentence and document vectors"},{"location":"Transfer%20Learning/#contextual-word-vectors","text":"Motivation \u8bcd\u5411\u91cf\u5c06\u6240\u6709\u7684\u4e0a\u4e0b\u6587\u90fd\u538b\u7f29\u5230\u4e00\u4e2a\u5355\u4e00\u5411\u91cf\u4e2d Key Idea \u4e0d\u662f\u6bcf\u4e2a\u5355\u8bcd\u5b66\u4e60\u4e00\u4e2a\u5411\u91cf\uff0c\u800c\u662f\u5b66\u4e60\u4f9d\u8d56\u4e8e\u4e0a\u4e0b\u6587\u7684\u5411\u91cf\u3002 context2vec http://u.cs.biu.ac.il/~melamuo/publications/context2vec_conll16.pdf \u57fa\u4e8e CBOW \u6846\u67b6\uff0c\u4e3a\u4e86\u6355\u6349\u53e5\u5b50\u8bed\u5883\u7684\u672c\u8d28\uff0c\u4f7f\u7528\u53cc\u5411 LSTM \u63d0\u53d6\u7279\u5f81\u3002 TagLM https://arxiv.org/pdf/1705.00108.pdf \u4e0e\u4e0a\u6587\u65e0\u5173\u7684\u5355\u8bcd\u5d4c\u5165 + RNN model \u5f97\u5230\u7684 hidden states \u4f5c\u4e3a\u7279\u5f81\u8f93\u5165 $$ \\mathbf{h} {k, l}=\\left[\\overrightarrow{\\mathbf{h}} ; \\overleftarrow{\\mathbf{h}} {k, 1} ; \\mathbf{h} ^{L M}\\right] $$ Char CNN / RNN + Token Embedding \u4f5c\u4e3a bi-LSTM \u7684\u8f93\u5165 \u5f97\u5230\u7684 hidden states \u4e0e Pre-trained bi-LM\uff08\u51bb\u7ed3\u7684\uff09 \u7684 hidden states \u8fde\u63a5\u8d77\u6765\u8f93\u5165\u5230\u7b2c\u4e8c\u5c42\u7684 bi-LSTM \u4e2d Unsupervised Pretraining for Seq2Seq https://arxiv.org/pdf/1611.02683.pdf \u63d0\u51fa\u4e00\u79cd\u901a\u7528\u7684\u63d0\u9ad8seq2seq\u6a21\u578b\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u3002seq2seq\u6a21\u578b\u7684encoder\u548cdecoder\u7684\u6743\u91cd\u7528\u4e24\u4e2a\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u521d\u59cb\u5316\u7136\u540e\u5fae\u8c03\u3002 seq2seq\u6a21\u578b\u7684\u7f3a\u70b9\uff1a\u76d1\u7763\u5b66\u4e60\u7684\u8bed\u6599\u6709\u9650\uff0c\u5bb9\u6613\u8fc7\u62df\u5408\u3002\u672c\u6587\u63d0\u51fa\u4e86\u6539\u5584seq2seq\u6548\u679c\u7684\u65e0\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\u3002\u5728\u5fae\u8c03\u9636\u6bb5\uff0c\u8bad\u7ec3\u4efb\u52a1\u4e3a\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u548cseq2seq\u7684\u8054\u5408\u4efb\u52a1\u3002(\u5f00\u59cbfune-tuning\u53ef\u80fd\u5bfc\u81f4\u707e\u96be\u6027\u7684\u9057\u5fd8\uff1a\u6a21\u578b\u5728\u8bed\u8a00\u6a21\u578b\u4e0a\u7684\u6027\u80fd\u6025\u5267\u4e0b\u964d\uff0c\u53ef\u80fd\u635f\u5bb3\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\u3002\u4e3a\u4fdd\u8bc1\u6a21\u578b\u4e0d\u5728\u6709\u76d1\u7763\u8bed\u6599\u4e0a\u8fc7\u62df\u5408\uff0c\u5728fine-tuning\u9636\u6bb5\u7ee7\u7eed\u5355\u8bed\u8a00\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\uff0cseq2seq\u548c\u8bed\u8a00\u6a21\u578b\u4efb\u52a1\u7684\u635f\u5931\u76f8\u52a0\u4f5c\u4e3a\u6700\u7ec8\u635f\u5931\u3002) \u6b64\u5916\u8fd8\u7528\u4e86\u6b8b\u5dee\u8fde\u63a5\uff0cEncoder \u548c Decoder \u4e4b\u95f4\u4e5f\u7528\u4e86 Attention\u3002 CoVe https://arxiv.org/pdf/1708.00107.pdf CoVe\u66f4\u4fa7\u91cd\u4e8e\u5982\u4f55\u5c06\u73b0\u6709\u6570\u636e\u4e0a\u9884\u8bad\u7ec3\u5f97\u5230\u7684\u8868\u5f81\u8fc1\u79fb\u5230\u65b0\u4efb\u52a1\u573a\u666f\u4e2d\uff0c\u800c\u4e4b\u524d\u7684\u53e5\u5b50\u7ea7\u4efb\u52a1\u4e2d\u5927\u591a\u6570\u90fd\u53ea\u628a\u8fc1\u79fb\u8fc7\u7a0b\u5f53\u505a\u4e00\u4e2a\u8bc4\u4f30\u4ed6\u4eec\u8868\u5f81\u6548\u679c\u7684\u624b\u6bb5\uff0c\u56e0\u6b64\u89c2\u5ff5\u4e0a\u6709\u6240\u4e0d\u540c \u4e5f\u6709\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u5e8f\u5217\u6a21\u578b\u4e3a\u5176\u4ed6NLP\u6a21\u578b\u63d0\u4f9b\u4e0a\u4e0b\u6587\u7684\u60f3\u6cd5 \u60f3\u6cd5\uff1a\u673a\u5668\u7ffb\u8bd1\u662f\u4e3a\u4e86\u4fdd\u5b58\u610f\u601d\uff0c\u6240\u4ee5\u8fd9\u4e5f\u8bb8\u662f\u4e2a\u597d\u76ee\u6807\uff1f \u4f7f\u7528seq2seq + attention NMT system\u4e2d\u7684Encoder\uff0c\u5373 2\u5c42 bi-LSTM \uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005 \u6240\u5f97\u5230\u7684 CoVe \u5411\u91cf\u5728\u5404\u79cd\u4efb\u52a1\u4e0a\u90fd\u4f18\u4e8e GloVe \u5411\u91cf \u4f46\u662f\uff0c\u7ed3\u679c\u5e76\u4e0d\u50cf\u5176\u4ed6\u66f4\u7b80\u5355\u7684NLM\u57f9\u8bad\u90a3\u4e48\u597d\uff0c\u6240\u4ee5\u4f3c\u4e4e\u88ab\u653e\u5f03\u4e86 \u4e5f\u8bb8NMT\u53ea\u662f\u6bd4\u8bed\u8a00\u5efa\u6a21\u66f4\u96be\uff1f \u6216\u8bb8\u6709\u4e00\u5929\u8fd9\u4e2a\u60f3\u6cd5\u4f1a\u56de\u6765\uff1f ELMo https://arxiv.org/abs/1802.05365.pdf \u4f7f\u7528\u957f\u4e0a\u4e0b\u6587\u800c\u4e0d\u662f\u4e0a\u4e0b\u6587\u7a97\u53e3\u5b66\u4e60 word token \u5411\u91cf(\u8fd9\u91cc\uff0c\u6574\u4e2a\u53e5\u5b50\u53ef\u80fd\u66f4\u957f) \u5b66\u4e60\u6df1\u5ea6Bi-NLM\uff0c\u5e76\u5728\u9884\u6d4b\u4e2d\u4f7f\u7528\u5b83\u7684\u6240\u6709\u5c42 \u8bad\u7ec3\u4e00\u4e2a\u53cc\u5411LM \u76ee\u6807\u662f performant \u4f46LM\u4e0d\u8981\u592a\u5927 \u4f7f\u75282\u4e2abiLSTM\u5c42 \u8fd9\u4e24\u4e2abiLSTM NLM\u5c42\u6709\u4e0d\u540c\u7684\u7528\u9014/\u542b\u4e49 \u4f4e\u5c42\u66f4\u9002\u5408\u4f4e\u7ea7\u8bed\u6cd5\uff0c\u4f8b\u5982 \u8bcd\u6027\u6807\u6ce8(part-of-speech tagging)\u3001\u53e5\u6cd5\u4f9d\u8d56(syntacticdependency)\u3001NER \u9ad8\u5c42\u66f4\u9002\u5408\u66f4\u9ad8\u7ea7\u522b\u7684\u8bed\u4e49 \u60c5\u7eea\u3001Semantic role labeling \u8bed\u4e49\u89d2\u8272\u6807\u8bb0 \u3001question answering\u3001SNLI \u76ee\u6807\u51fd\u6570\u4e3a \\(\\sum_{k=1}^{N} \\log p\\left(t_{k} | t_{1}, \\ldots, t_{k-1}\\right)+\\log p\\left(t_{k} | t_{k+1}, \\ldots, t_{N}\\right)\\) (\u4ec5)\u4f7f\u7528\u5b57\u7b26CNN\u6784\u5efa\u521d\u59cb\u5355\u8bcd\u8868\u793a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u5747\u4f7f\u7528\u4e86\u5982\u4e0bCNN\u7ed3\u6784\uff0c\u51cf\u5c11\u4e86\u53c2\u6570\u89c4\u6a21\uff0c\u89e3\u51b3\u4e86 OOV \u95ee\u9898\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u8bcd\u5411\u91cf\u7684\u8ba1\u7b97\u53ef\u4ee5\u9884\u5148\u505a\u597d\uff0c\u66f4\u80fd\u591f\u51cf\u8f7binference\u9636\u6bb5\u7684\u8ba1\u7b97\u538b\u529b\u3002 2048 \u4e2a char n-gram filters \u548c 2 \u4e2a highway layers\uff0c512 \u7ef4\u7684 projection 4096 dim hidden/cell LSTM\u72b6\u6001\uff0c\u4f7f\u7528 512 dim\u7684\u5bf9\u4e0b\u4e00\u4e2a\u8f93\u5165\u7684\u6295\u5f71 \u4f7f\u7528\u6b8b\u5dee\u8fde\u63a5 \u7ed1\u5b9a token \u7684\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53c2\u6570(softmax)\uff0c\u5e76\u5c06\u8fd9\u4e9b\u53c2\u6570\u7ed1\u5b9a\u5230\u6b63\u5411\u548c\u53cd\u5411LMs\u4e4b\u95f4 ELMo\u5b66\u4e60biLM\u8868\u793a\u7684\u7279\u5b9a\u4efb\u52a1\u7ec4\u5408 \u8fd9\u662f\u4e00\u4e2a\u521b\u65b0\uff0cTagLM \u4e2d\u4ec5\u4ec5\u4f7f\u7528\u5806\u53e0LSTM\u7684\u9876\u5c42\uff0cELMo \u8ba4\u4e3aBiLSTM\u6240\u6709\u5c42\u90fd\u662f\u6709\u7528\u7684 \\[ \\begin{aligned} R_{k} &=\\left\\{\\mathbf{x}_{k}^{L M}, \\overrightarrow{\\mathbf{h}}_{k, j}^{L M}, \\overleftarrow{\\mathbf{h}}_{k, j}^{L M} | j=1, \\ldots, L\\right\\} \\\\ &=\\left\\{\\mathbf{h}_{k, j}^{L M} | j=0, \\ldots, L\\right\\} \\end{aligned} \\\\ \\mathbf{E} \\mathbf{L} \\mathbf{M} \\mathbf{o}_{k}^{t a s k}=E\\left(R_{k} ; \\Theta^{t a s k}\\right)=\\gamma^{t a s k} \\sum_{j=0}^{L} s_{j}^{t a s k} \\mathbf{h}_{k, j}^{L M} \\] \\(\\gamma^{t a s k}\\) \u8861\u91cfELMo\u5bf9\u4efb\u52a1\u7684\u603b\u4f53\u6709\u7528\u6027\uff0c\u662f\u4e3a\u7279\u5b9a\u4efb\u52a1\u5b66\u4e60\u7684\u5168\u5c40\u6bd4\u4f8b\u56e0\u5b50 \\(\\mathbf{s}^{t a s k}\\) \u662f softmax \u5f52\u4e00\u5316\u7684\u6df7\u5408\u6a21\u578b\u6743\u91cd\uff0c\u662f BiLSTM \u7684\u52a0\u6743\u5e73\u5747\u503c\u7684\u6743\u91cd\uff0c\u5bf9\u4e0d\u540c\u7684\u4efb\u52a1\u662f\u4e0d\u540c\u7684\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u4efb\u52a1\u5bf9\u4e0d\u540c\u5c42\u7684 BiLSTM \u7684 ULMFit https://arxiv.org/pdf/1801.06146.pdf \u5728\u5927\u578b\u901a\u7528\u9886\u57df\u7684\u65e0\u76d1\u7763\u8bed\u6599\u5e93\u4e0a\u4f7f\u7528 biLM \u8bad\u7ec3 \u5728\u76ee\u6807\u4efb\u52a1\u6570\u636e\u4e0a\u8c03\u6574 LM \u5bf9\u7279\u5b9a\u4efb\u52a1\u5c06\u5206\u7c7b\u5668\u8fdb\u884c\u5fae\u8c03 \u4f7f\u7528\u5408\u7406\u5927\u5c0f\u7684\u201c1 GPU\u201d\u8bed\u8a00\u6a21\u578b\uff0c\u5e76\u4e0d\u662f\u771f\u7684\u5f88\u5927 \u5728LM\u8c03\u4f18\u4e2d\u8981\u6ce8\u610f\u5f88\u591a ULMFit\u7684\u9884\u8bad\u7ec3\u548cfinetune\u8fc7\u7a0b\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff0c\u5206\u522b\u662f\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\uff08\u6bd4\u5982Wikitext 103\uff0c\u6709103million\u4e2a\u8bcd\uff09\u5148\u9884\u8bad\u7ec3\uff0c\u7136\u540e\u518d\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5728\u5177\u4f53\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u91cd\u65b0\u5229\u7528\u8bed\u8a00\u6a21\u578b\u6765finetune\u4e00\u4e0b\uff08\u8fd9\u662f\u7b2c\u4e00\u6b21finetune\uff0c\u53eb\u505aLM finetune\uff09\uff0c\u5c14\u540e\u518d\u6839\u636e\u5177\u4f53\u4efb\u52a1\u8bbe\u8ba1\u7684\u4e00\u4e2a\u6a21\u578b\u4e0a\uff0c\u5c06\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5f53\u505a\u8fd9\u4e2a\u4efb\u52a1\u6a21\u578b\u7684\u591a\u5c42\uff0c\u518d\u4e00\u6b21finetune\uff08\u8fd9\u662f\u7b2c\u4e8c\u6b21finetune\uff0c\u5982\u679c\u662f\u5206\u7c7b\u95ee\u9898\u7684\u8bdd\u53ef\u4ee5\u53eb\u505aClassifier finetune\uff09 AWD-LSTM \\(w_{k+1}=w_{k}-\\gamma_{k} \\nabla f\\left(w_{k}\\right), w=\\frac{1}{K-T+1} \\sum_{i=T}^{K} w_{i}\\) \u5176\u4e2dT\u662f\u4e00\u4e2a\u9608\u503c\uff0c\u800cK\u5219\u662f\u603b\u5171\u7684\u8fed\u4ee3\u6b21\u6570\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u628a\u8fed\u4ee3\u5230\u7b2cT\u6b21\u4e4b\u540e\uff0c\u5bf9\u8be5\u53c2\u6570\u5728\u5176\u540e\u7684\u7b2cT\u8f6e\u5230\u6700\u540e\u4e00\u8f6e\u4e4b\u95f4\u7684\u6240\u6709\u503c\u6c42\u5e73\u5747\uff0c\u4ece\u800c\u5f97\u5230\u6700\u540e\u6a21\u578b\u7684\u8be5\u53c2\u6570\u503c\uff0c\u800c\u76f8\u5e94\u7684\uff0c\u666e\u901a\u7684SGD\u5219\u662f\u76f4\u63a5\u53d6 \\(w = w_K\\) \u4f5c\u4e3a\u6700\u540e\u6a21\u578b\u7684\u53c2\u6570\u503c\u3002 \u5e76\u4e14\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u4e4b\u95f4\u90fd\u662f\u7528\u4e00\u4e2a\u5168\u8fde\u63a5\u5c42\uff0c\u5e76\u4e14\u4f7f\u7528DropConnect\u7684\u65b9\u6cd5\u968f\u673adrop\u6389\u4e00\u4e9b\u8fde\u63a5\u51cf\u5c11\u4e00\u4e9b\u8fc7\u62df\u5408\u7684\u98ce\u9669 \u5fae\u8c03\u6280\u5de7 discriminative fine-tuning \u9488\u5bf9\u4e0d\u540c\u7684\u5c42\u5728\u8bad\u7ec3\u66f4\u65b0\u53c2\u6570\u7684\u65f6\u5019\uff0c\u8d4b\u4e88\u4e0d\u540c\u7684\u5b66\u4e60\u7387\u3002\u8fd9\u91cc\u7684\u51fa\u53d1\u70b9\u662f\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8eNLP\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6765\u8bf4\uff0c\u4e0d\u540c\u5c42\u7684\u8868\u5f81\u6709\u4e0d\u540c\u7684\u7269\u7406\u542b\u4e49\uff0c\u6bd4\u5982\u6d45\u5c42\u504f\u53e5\u6cd5\u4fe1\u606f\uff0c\u9ad8\u5c42\u504f\u8bed\u4e49\u4fe1\u606f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e0d\u540c\u5c42\u7684\u5b66\u4e60\u7387\u4e0d\u540c\uff0c\u81ea\u7136\u5c31\u662f\u6bd4\u8f83\u5408\u7406\u7684\u4e86\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u516c\u5f0f\u5982\u4e0b \\(\\theta_{t}^{l}=\\theta_{t-1}^{l}+\\eta^{l} \\nabla_{\\theta^{l}} J(\\theta)\\) \uff0c\u8fd9\u91cc\u7684 \\(n^l\\) \u4fbf\u662f\u4e0d\u540c\u7684\u5c42 \\(l\\) \u6709\u4e0d\u540c\u7684\u5b66\u4e60\u7387\uff0c\u539f\u6587\u4e5f\u7ed9\u51fa\u4e86\u5177\u4f53\u7684\u9009\u62e9\uff1a\u5148\u6307\u5b9a\u6700\u540e\u4e00\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u7136\u540e\u6839\u636e\u4e0b\u5f0f\u5f97\u5230\u524d\u9762\u5c42\u7684\u5b66\u4e60\u7387\uff0c\u57fa\u672c\u601d\u60f3\u662f\u8ba9\u6d45\u5c42\u7684\u5b66\u4e60\u7387\u8981\u66f4\u5c0f\u4e00\u4e9b\u3002 \\(\\eta^{l-1}=\\frac{\\eta^{l}}{2.6}\\) slanted triangular learning rates \u5728finetune\u7684\u7b2c\u4e00\u9636\u6bb5\uff0c\u5e0c\u671b\u80fd\u591f\u5148\u7a33\u5b9a\u4f4f\u539f\u6765\u5df2\u7ecf\u5728\u5927\u89c4\u6a21\u8bed\u6599\u96c6\u4e0a\u5df2\u7ecf\u9884\u8bad\u7ec3\u597d\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u9009\u62e9\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684finetune\u5b66\u4e60\u7387\uff1b\u5c14\u540e\u5e0c\u671b\u80fd\u591f\u9010\u6b65\u52a0\u5927\u5b66\u4e60\u7387\uff0c\u4f7f\u5f97\u5b66\u4e60\u8fc7\u7a0b\u80fd\u591f\u5c3d\u91cf\u5feb\u901f\uff1b\u6700\u540e\uff0c\u5f53\u8bad\u7ec3\u63a5\u8fd1\u5c3e\u58f0\u65f6\uff0c\u9010\u6b65\u51cf\u5c0f\u5b66\u4e60\u7387\uff0c\u8fd9\u6837\u8ba9\u6a21\u578b\u9010\u6e10\u5e73\u7a33\u6536\u655b\uff08\u8fd9\u4e2a\u601d\u60f3\u5927\u6982\u501f\u9274\u4e862017\u5e74\u8c37\u6b4c\u63d0\u51faTransformer\u65f6\u7528\u5230\u7684warm up\u7684\u5b66\u4e60\u7387\u8c03\u8282\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u662f\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u5148\u5c06\u5b66\u4e60\u7387\u9010\u6b65\u589e\u5927\uff0c\u5c14\u540e\u518d\u9010\u6b65\u51cf\u5c0f\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u4e00\u4e2a\u4e09\u6bb5\u8bba\u5f0f\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u7528\u56fe\u8868\u793a\u5982\u4e0b\uff1a gradual unfreezing \u4e3b\u8981\u601d\u60f3\u662f\u628a\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u5728\u65b0\u4efb\u52a1\u4e0afinetune\u65f6\uff0c\u9010\u5c42\u89e3\u51bb\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u5148finetune\u6700\u540e\u4e00\u5c42\uff0c\u7136\u540e\u518d\u89e3\u51bb\u5012\u6570\u7b2c\u4e8c\u5c42\uff0c\u628a\u5012\u6570\u7b2c\u4e8c\u5c42\u548c\u6700\u540e\u4e00\u5c42\u4e00\u8d77finetune\uff0c\u7136\u540e\u518d\u89e3\u51bb\u7b2c\u4e09\u5c42\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u9010\u5c42\u5f80\u6d45\u5c42\u63a8\u8fdb\uff0c\u6700\u7ec8finetune\u6574\u4e2a\u6a21\u578b\u6216\u8005\u7ec8\u6b62\u5230\u67d0\u4e2a\u4e2d\u95f4\u5c42\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86finetune\u7684\u8fc7\u7a0b\u80fd\u591f\u66f4\u5e73\u7a33\u3002 \u56e0\u4e3aULMFiT\u4e2d\u5305\u542b\u4e86\u4e24\u6b21finetune\uff0c\u5373\u5728\u65b0\u4efb\u52a1\u4e0a\u7528\u8bed\u8a00\u6a21\u578bfinetune\u548c\u5728\u65b0\u4efb\u52a1\u4e0afinetune\u8bad\u7ec3\u4e00\u4e2a\u6700\u7ec8\u7684task-specifi-model\uff08\u6bd4\u5982\u5206\u7c7b\u5668\uff09\uff0c\u800c\u8bba\u6587\u4e2d\u4e3b\u8981\u628adiscriminative fine-tuning, slanted triangular learning rates\u8fd9\u4e24\u4e2a\u6280\u5de7\u7528\u5728\u4e86\u8bed\u8a00\u6a21\u578b\u7684finetune\u9636\u6bb5\uff0c\u628a\u6700\u540e\u4e00\u4e2agradual unfreezing\u7684\u6280\u5de7\u5e94\u7528\u5728\u6700\u7ec8task-specifi-model\u7684finetune\u9636\u6bb5\u3002 \u4f7f\u7528\u5927\u578b\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u662f\u4e00\u79cd\u63d0\u9ad8\u6027\u80fd\u7684\u975e\u5e38\u6709\u6548\u7684\u65b9\u6cd5 GPT GPT\u91c7\u7528\u4e24\u9636\u6bb5\u8fc7\u7a0b\uff0c\u7b2c\u4e00\u4e2a\u9636\u6bb5\u662f\u5229\u7528\u8bed\u8a00\u6a21\u578b\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u7b2c\u4e8c\u9636\u6bb5\u901a\u8fc7Fine-tuning\u7684\u6a21\u5f0f\u89e3\u51b3\u4e0b\u6e38\u4efb\u52a1\u3002\u4e0a\u56fe\u5c55\u793a\u4e86GPT\u7684\u9884\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u5176\u5b9e\u548cELMO\u662f\u7c7b\u4f3c\u7684\uff0c\u4e3b\u8981\u4e0d\u540c\u5728\u4e8e\u4e24\u70b9\uff1a\u9996\u5148\uff0c\u7279\u5f81\u62bd\u53d6\u91c7\u7528Transformer\uff1b\u5176\u6b21\uff0cGPT\u7684\u9884\u8bad\u7ec3\u867d\u7136\u4ecd\u7136\u662f\u4ee5\u8bed\u8a00\u6a21\u578b\u4f5c\u4e3a\u76ee\u6807\u4efb\u52a1\uff0c\u4f46\u662f\u91c7\u7528\u7684\u662f\u5355\u5411\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u6240\u8c13\u201c\u5355\u5411\u201d\u7684\u542b\u4e49\u662f\u6307\uff1a\u53ea\u4f7f\u7528\u5355\u8bcd\u7684\u4e0a\u6587\u8fdb\u884c\u9884\u6d4b\uff0c\u800c\u629b\u5f00\u4e86\u4e0b\u6587\u3002 GPT\u8bba\u6587\u7ed9\u4e86\u4e00\u4e2a\u6539\u9020\u65bd\u5de5\u56fe\u5982\u4e0a\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff1a\u5bf9\u4e8e\u5206\u7c7b\u95ee\u9898\uff0c\u4e0d\u7528\u600e\u4e48\u52a8\uff0c\u52a0\u4e0a\u4e00\u4e2a\u8d77\u59cb\u548c\u7ec8\u7ed3\u7b26\u53f7\u5373\u53ef\uff1b\u5bf9\u4e8e\u53e5\u5b50\u5173\u7cfb\u5224\u65ad\u95ee\u9898\uff0c\u6bd4\u5982Entailment\uff0c\u4e24\u4e2a\u53e5\u5b50\u4e2d\u95f4\u518d\u52a0\u4e2a\u5206\u9694\u7b26\u5373\u53ef\uff1b\u5bf9\u6587\u672c\u76f8\u4f3c\u6027\u5224\u65ad\u95ee\u9898\uff0c\u628a\u4e24\u4e2a\u53e5\u5b50\u987a\u5e8f\u98a0\u5012\u4e0b\u505a\u51fa\u4e24\u4e2a\u8f93\u5165\u5373\u53ef\uff0c\u8fd9\u662f\u4e3a\u4e86\u544a\u8bc9\u6a21\u578b\u53e5\u5b50\u987a\u5e8f\u4e0d\u91cd\u8981\uff1b\u5bf9\u4e8e\u591a\u9879\u9009\u62e9\u95ee\u9898\uff0c\u5219\u591a\u8def\u8f93\u5165\uff0c\u6bcf\u4e00\u8def\u628a\u6587\u7ae0\u548c\u7b54\u6848\u9009\u9879\u62fc\u63a5\u4f5c\u4e3a\u8f93\u5165\u5373\u53ef\u3002\u4ece\u4e0a\u56fe\u53ef\u770b\u51fa\uff0c\u8fd9\u79cd\u6539\u9020\u8fd8\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4e0d\u540c\u4efb\u52a1\u53ea\u9700\u8981\u5728\u8f93\u5165\u90e8\u5206\u65bd\u5de5\u5373\u53ef\u3002 BERT \u5229\u7528\u4e86\u771f\u53cc\u5411\u7684Transformer \u4e3a\u4e86\u5229\u7528\u53cc\u5411\u4fe1\u606f\uff0c\u6539\u8fdb\u4e86\u666e\u901a\u8bed\u8a00\u6a21\u578b\u6210\u4e3a\u5b8c\u5f62\u586b\u7a7a\u5f0f\u7684Mask-LM(Mask-Language Model) \u5229\u7528Next Sentence Prediction\u4efb\u52a1\u5b66\u4e60\u53e5\u5b50\u7ea7\u522b\u4fe1\u606f \u8fdb\u4e00\u6b65\u5b8c\u5584\u548c\u6269\u5c55\u4e86GPT\u4e2d\u8bbe\u8ba1\u7684\u901a\u7528\u4efb\u52a1\u6846\u67b6\uff0c\u4f7f\u5f97BERT\u80fd\u591f\u652f\u6301\u5305\u62ec\uff1a\u53e5\u5b50\u5bf9\u5206\u7c7b\u4efb\u52a1\u3001\u5355\u53e5\u5b50\u5206\u7c7b\u4efb\u52a1\u3001\u9605\u8bfb\u7406\u89e3\u4efb\u52a1\u548c\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1 Why does language modeling work so well? \u8bed\u8a00\u5efa\u6a21\u662f\u4e00\u9879\u975e\u5e38\u56f0\u96be\u7684\u4efb\u52a1\uff0c\u5373\u4f7f\u5bf9\u4eba\u7c7b\u6765\u8bf4\u4e5f\u662f\u5982\u6b64\u3002 \u9884\u671f\u8bed\u8a00\u6a21\u578b\u5c06\u4efb\u4f55\u53ef\u80fd\u7684\u4e0a\u4e0b\u6587\u538b\u7f29\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\uff0c\u8be5\u5411\u91cf\u6982\u62ec\u4e86\u53ef\u80fd\u7684\u5b8c\u6210\u540e\u7684\u53e5\u5b50\u3002 \u201cThey walked down the street to ???\u201d \u4e3a\u4e86\u6709\u673a\u4f1a\u89e3\u51b3\u8fd9\u4e2a\u4efb\u52a1\uff0c\u6a21\u578b\u5fc5\u987b\u5b66\u4e60\u8bed\u6cd5\u3001\u8bed\u4e49\u3001\u5bf9\u4e16\u754c\u4e8b\u5b9e\u7f16\u7801\u7b49\u7b49\u3002 \u7ed9\u5b9a\u8db3\u591f\u7684\u6570\u636e\u3001\u4e00\u4e2a\u5de8\u5927\u7684\u6a21\u578b\u548c\u8db3\u591f\u7684\u8ba1\u7b97\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e00\u9879\u5408\u7406\u7684\u5de5\u4f5c\uff01 \u4ece\u7ecf\u9a8c\u4e0a\u770b\uff0c\u8bed\u8a00\u6a21\u578b\u6bd4\u7ffb\u8bd1\uff0c\u81ea\u7f16\u7801\u66f4\u6709\u6548\uff1a\u201cLanguage Modeling Teaches You More Syntax than Translation Does\u201d ( Zhang et al. 2018 )","title":"Contextual word vectors"},{"location":"Transfer%20Learning/#interesting-properties-of-pretraining","text":"Pretraining reduces need for annotated data Scaling up pretraining \u4e0a\u56fe\u4e3a GloVe \u4e2d\u589e\u52a0\u8bed\u6599\u5e93\u89c4\u6a21\u5bf9\u6a21\u578b\u51c6\u786e\u5ea6\u7684\u5f71\u54cd\u3002 \u6570\u636e\u96c6\u8d8a\u5927\u8d8a\u597d\uff0c\u5e76\u4e14\u7ef4\u57fa\u767e\u79d1\u6570\u636e\u96c6\u6bd4\u65b0\u95fb\u6587\u672c\u6570\u636e\u96c6\u8981\u597d \u56e0\u4e3a\u7ef4\u57fa\u767e\u79d1\u5c31\u662f\u5728\u89e3\u91ca\u6982\u5ff5\u4ee5\u53ca\u4ed6\u4eec\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u8054\uff0c\u66f4\u591a\u7684\u8bf4\u660e\u6027\u6587\u672c\u663e\u793a\u4e86\u4e8b\u7269\u4e4b\u95f4\u7684\u6240\u6709\u8054\u7cfb \u800c\u65b0\u95fb\u5e76\u4e0d\u53bb\u89e3\u91ca\uff0c\u800c\u53ea\u662f\u53bb\u9610\u8ff0\u4e00\u4e9b\u4e8b\u4ef6","title":"Interesting properties of pretraining"},{"location":"Transfer%20Learning/#cross-lingual-pretraining","text":"Much work on training cross-lingual word embeddings(Overview: Ruder et al. (2017) ) Idea: train each language separately, then align. Recent work aligning ELMo: Schuster et al., (NAACL 2019) ACL 2019 Tutorial on Unsupervised Cross-lingual Representation Learning CS224n-2019-20 The Future of NLP + Deep Learning Cross-lingual Polyglot Pretraining \u5173\u952e\u601d\u60f3:\u901a\u8fc7\u5728\u591a\u79cd\u8bed\u8a00\u4e0a\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\uff0c\u5b9e\u73b0\u8de8\u8bed\u8a00\u7684\u8bcd\u6c47\u8868\u548c\u8868\u793a\u3002 \u4f18\u70b9:\u6613\u4e8e\u5b9e\u73b0\uff0c\u53ef\u5355\u72ec\u8fdb\u884c\u8de8\u8bed\u8a00\u9884\u57f9\u8bad \u7f3a\u70b9:\u4f4e\u8d44\u6e90\u8bed\u8a00\u5bfc\u81f4\u5176\u8868\u793a\u5b66\u4e60\u7684\u4e0d\u591f\u597d LASER:Use parallel data for sentence representations( Artetxe & Schwenk, 2018 ) Multilingual BERT : BERT trained jointly on 100 languages Rosita:Polyglot contextual representations( Mulcaire et al., NAACL 2019 ) XLM: Cross lingualLM ( Lample & Conneau, 2019 )","title":"Cross-lingual pretraining"},{"location":"Transfer%20Learning/#hands-on-1-pretraining-a-transformer-language-model","text":"\u4e24\u4e2a mask padding_mask masks the padding tokens. It is specific to each sample in the batch: attn_mask is the same for all samples in the batch. It masks the previous tokens for causal transformers:","title":"Hands-on #1: Pretraining a Transformer Language Model"},{"location":"Transfer%20Learning/#3-what-is-in-a-representation","text":"Why care about what is in a representation? \u5e26\u6709\u4e0b\u6e38\u4efb\u52a1\u7684\u5916\u90e8\u8bc4\u4f30 \u590d\u6742\u591a\u6837\uff0c\u968f\u7279\u5b9a\u4efb\u52a1\u800c\u4e0d\u540c \u77e5\u9053\u8bed\u8a00\u7684\u8868\u793a \u6cdb\u5316\u5230\u5176\u4ed6\u4efb\u52a1\u7684\u65b0\u7684\u8f93\u5165 \u4f5c\u4e3a\u53ef\u80fd\u6539\u8fdb\u9884\u8bad\u7ec3\u5de5\u4f5c\u7684\u4e2d\u95f4 \u53ef\u89e3\u91ca\uff01 \u6211\u4eec\u5f97\u5230\u7ed3\u679c\u7684\u539f\u56e0\u662f\u5426\u6b63\u786e? \u53d1\u73b0\u504f\u89c1\u2026\u2026 What to analyze? Analysis Method 1: Visualization Hold the embeddings / network activations static or frozen Plotting embeddings in a lower dimensional (2D/3D) space t-SNE van der Maaten & Hinton, 2008 PCA projections Visualizing word analogies Mikolov et al. 2013 \u7a7a\u95f4\u5173\u8054 \\(w_{king} - w_{man} + w_{woman} \\approx w_{queen}\\) High-level view of lexical semantics Only a limited number of examples Connection to other tasks is unclear Goldberg, 2017 \u795e\u7ecf\u5143\u6fc0\u6d3b\u503c\u4e0e\u7279\u5f81/\u6807\u7b7e\u76f8\u5173 \u8868\u793a\u5bf9\u53ef\u8bc6\u522b\u7279\u5f81\u7684\u5b66\u4e60 \u5982\u4f55\u9009\u62e9\u54ea\u4e2a\u795e\u7ecf\u5143\uff1f \u53ef\u89e3\u91ca != \u91cd\u8981( Morcos et al., 2018 ) \u6d41\u884c\u4e8e\u673a\u5668\u7ffb\u8bd1\uff0c\u6216\u5176\u4ed6seq2seq\u67b6\u6784: \u6e90\u548c\u76ee\u6807\u5b57\u4e4b\u95f4\u7684\u5bf9\u9f50\u3002 \u957f\u8ddd\u79bb\u8bcd-\u8bcd\u4f9d\u8d56(\u53e5\u5185\u6ce8\u610f) \u7ed3\u6784\u4e0a\u7684\u4eae\u70b9 \u62e5\u6709\u590d\u6742\u7684\u6ce8\u610f\u529b\u673a\u5236\u53ef\u80fd\u662f\u4e00\u4ef6\u597d\u4e8b! \u5206\u5c42\u7684 \u89e3\u91ca\u53ef\u80fd\u5f88\u68d8\u624b \u53ea\u6709\u51e0\u4e2a\u4f8b\u5b50\uff1f Robust corpus-wide trends? Next ! Analysis Method 2: Behavioral Probes RNN-based\u8bed\u8a00\u6a21\u578b \u4e3b\u8c13\u5173\u7cfb\u4e2d\u7684\u6570\u5b57\u4e00\u81f4\u6027 \u81ea\u7136\u7684\u3001\u4e0d\u81ea\u7136\u7684\u6216\u4e0d\u5408\u8bed\u6cd5\u7684\u53e5\u5b50 \u5bf9\u8f93\u51fa\u56f0\u60d1\u5ea6\u8fdb\u884c\u8bc4\u4f30 RNNs\u4f18\u4e8e\u5176\u4ed6\u975e\u795e\u7ecfBaseline \u5f53\u663e\u5f0f\u5730\u4f7f\u7528\u8bed\u6cd5\u8bad\u7ec3\u65f6\uff0c\u6027\u80fd\u4f1a\u63d0\u9ad8(Kuncoro\u7b49\uff0c2018)\u3002 Probe:\u53ef\u80fd\u6613\u53d7\u5171\u73b0\u504f\u5dee\u7684\u5f71\u54cd \u201cdogs in the neighborhood bark(s)\u201d \u4ee5\u524d\u7684\u53e5\u5b50\u53ef\u80fd\u548c\u539f\u6765\u7684\u592a\u4e0d\u4e00\u6837\u4e86\u2026 Analysis Method 3: Classifier Probes Hold the embeddings / network activations static and train a simple supervised model on top Probing Surface-level Features \u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50\uff0c\u9884\u6d4b\u5c5e\u6027\u5982 \u957f\u5ea6 \u8fd9\u4e2a\u53e5\u5b50\u91cc\u6709\u4e00\u4e2a\u5355\u8bcd\u5417 \u7ed9\u51fa\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u9884\u6d4b\u5c5e\u6027\uff0c\u4f8b\u5982\uff1a \u4ee5\u524d\u89c1\u8fc7\u7684\u8bcd\uff0c\u4e0e\u8bed\u8a00\u6a21\u578b\u5f62\u6210\u5bf9\u6bd4 \u8bcd\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e \u68c0\u67e5\u8bb0\u5fc6\u7684\u80fd\u529b \u8bad\u7ec3\u6709\u7d20\u7684\u3001\u66f4\u4e30\u5bcc\u7684\u4f53\u7cfb\u7ed3\u6784\u5f80\u5f80\u8fd0\u884c\u5f97\u66f4\u597d \u5728\u8bed\u8a00\u6570\u636e\u4e0a\u8bad\u7ec3\u80fd\u8bb0\u5fc6\u7684\u66f4\u597d Probing Morphology, Syntax, Semantics \u5f62\u6001 \u8bcd\u7ea7\u522b\u7684\u8bed\u6cd5 POS tags, CCG supertags Constituent parent, grandparent \u90e8\u5206\u8bed\u6cd5 \u4f9d\u8d56\u5173\u7cfb \u90e8\u5206\u8bed\u4e49 \u5b9e\u4f53\u5173\u7cfb \u6307\u79f0\u76f8\u540c \u89d2\u8272 Probing classifier findings Contextualized > non-contextualized \u5c24\u5176\u662f\u5728\u53e5\u6cd5\u4efb\u52a1\u4e0a \u8bed\u4e49\u4efb\u52a1\u7684\u66f4\u7d27\u5bc6\u6027\u80fd \u53cc\u5411\u4e0a\u4e0b\u6587\u5f88\u91cd\u8981 BERT (large) almost always gets the highest performance Grain of salt: \u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u8868\u793a\u5728\u4e0d\u540c\u7684\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u67b6\u6784\u2026\u2026 Probing: Layers of the network RNN\u5c42: \u901a\u7528\u8bed\u8a00\u5c5e\u6027 \u6700\u4f4e\u5c42:\u5f62\u6001\u5b66 \u4e2d\u95f4\u5c42:\u8bed\u6cd5 \u6700\u9ad8\u5c42\u6b21:\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u8bed\u4e49 Transformer \u5c42: \u4e0d\u540c\u4efb\u52a1\u7684\u4e0d\u540c\u8d8b\u52bf\uff1bmiddle-heavy \u53c2\u89c1 Tenney et. al., 2019 Probing: Pretraining Objectives \u8bed\u8a00\u5efa\u6a21\u4f18\u4e8e\u5176\u4ed6\u975e\u76d1\u7763\u548c\u76d1\u7763\u76ee\u6807\u3002 \u673a\u5668\u7ffb\u8bd1 \u4f9d\u8d56\u6027\u89e3\u6790 Skip-thought \u4f4e\u8d44\u6e90\u8bbe\u7f6e(\u8bad\u7ec3\u6570\u636e\u7684\u5927\u5c0f)\u53ef\u80fd\u5bfc\u81f4\u76f8\u53cd\u7684\u8d8b\u52bf\u3002 What have we learnt so far? \u8868\u5f81\u662f\u5bf9\u67d0\u4e9b\u8bed\u8a00\u73b0\u8c61\u7684\u9884\u6d4b: \u7ffb\u8bd1\u4e2d\u7684\u5bf9\u9f50\uff0c\u53e5\u6cd5\u5c42\u6b21 \u6709\u8bed\u6cd5\u548c\u6ca1\u6709\u8bed\u6cd5\u7684\u9884\u8bad\u7ec3: \u6709\u8bed\u6cd5\u7684\u9884\u8bad\u7ec3\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd \u4f46\u662f\u5982\u679c\u6ca1\u6709\u8bed\u6cd5\uff0c\u81f3\u5c11\u8fd8\u662f\u4f1a\u5b66\u5230\u4e9b\u8bed\u6cd5\u6982\u5ff5 ( Williams et al. 2018 ) \u7f51\u7edc\u67b6\u6784\u51b3\u5b9a\u4e86\u8868\u793a\u4e2d\u7684\u5185\u5bb9 \u53e5\u6cd5\u4e0eBert Transformer ( Tenney et al., 2019 ; Goldberg, 2019 ) \u8de8\u67b6\u6784\u7684\u4e0d\u540c\u5c42\u6b21\u8d8b\u52bf Open questions about probes \u4e00\u4e2a\u597d\u7684\u63a2\u6d4b\u5668\u5e94\u8be5\u5bfb\u627e\u4ec0\u4e48\u4fe1\u606f? \u63a2\u7d22\u4e00\u4e2a\u63a2\u6d4b\u5668 \u63a2\u6d4b\u6027\u80fd\u544a\u8bc9\u6211\u4eec\u4ec0\u4e48? \u5f88\u96be\u7efc\u5408\u5404\u79cd\u57fa\u7ebf\u7684\u7ed3\u679c\u2026 \u5b83\u672c\u8eab\u4f1a\u5e26\u6765\u4e00\u4e9b\u590d\u6742\u6027\u5417 \u7ebf\u6027\u6216\u975e\u7ebf\u6027\u5206\u7c7b\u3002 \u884c\u4e3a:\u8f93\u5165\u53e5\u5b50\u7684\u8bbe\u8ba1 \u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u63a2\u9488\u4f5c\u4e3a\u8bc4\u4f30\u6307\u6807\u5417? \u53ef\u80fd\u4f1a\u7834\u574f\u76ee\u7684\u2026 Analysis Method 4: Model Alterations Li et al., 2016 \u9010\u6b65\u5220\u9664\u6216\u5c4f\u853d\u7f51\u7edc\u7ec4\u4ef6 \u8bcd\u5d4c\u5165\u7ef4\u5ea6 \u9690\u85cf\u5355\u4f4d \u8f93\u5165-\u5355\u8bcd/\u77ed\u8bed So, what is in a representation? \u8fd9\u8981\u770b\u4f60\u600e\u4e48\u770b\u4e86! \u53ef\u89c6\u5316: \u9e1f\u77b0 \u5f88\u5c11\u7684\u6837\u54c1\u2014\u2014\u53ef\u80fd\u4f1a\u8ba9\u4eba\u60f3\u8d77\u6311\u9009 \u8c03\u67e5: \u53d1\u73b0\u5fae\u7c92\u8303\u56f4\u5185\u7684\u7279\u5b9a\u5c5e\u6027 \u53ef\u80fd\u4f1a\u5f15\u5165\u81ea\u5df1\u7684\u504f\u89c1\u2026 \u7f51\u7edc\u7684\u66ff\u4ee3\u54c1: \u5bf9\u6539\u8fdb\u5efa\u6a21\u5f88\u6709\u5e2e\u52a9\uff0c \u53ef\u4ee5\u662f\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684 Interpretability + transferability to downstream tasks is key","title":"3. What is in a Representation?"},{"location":"Transfer%20Learning/#4-adaptation","text":"How to adapt the pretrained model \u6211\u4eec\u53ef\u4ee5\u5728\u51e0\u4e2a\u6b63\u4ea4\u65b9\u5411\u4e0a\u505a\u51b3\u5b9a: \u7ed3\u6784\u7684\u4fee\u6539\uff1f \u4e3a\u4e86\u9002\u5e94\uff0c\u9700\u8981\u5bf9\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4f53\u7cfb\u7ed3\u6784\u8fdb\u884c\u591a\u5927\u7684\u66f4\u6539 \u4f18\u5316\u65b9\u6848\uff1f \u5728\u9002\u5e94\u8fc7\u7a0b\u4e2d\u9700\u8981\u8bad\u7ec3\u54ea\u4e9b\u91cd\u91cf\u4ee5\u53ca\u9075\u5faa\u4ec0\u4e48\u65f6\u95f4\u8868 \u66f4\u591a\u4fe1\u53f7:\u5f31\u76d1\u7763\u3001\u591a\u4efb\u52a1\u548c Ensembling \u5982\u4f55\u4e3a\u76ee\u6807\u4efb\u52a1\u83b7\u53d6\u66f4\u591a\u7684\u76d1\u63a7\u4fe1\u53f7","title":"4. Adaptation"},{"location":"Transfer%20Learning/#41-architecture","text":"\u4e24\u4e2a\u901a\u7528\u9009\u9879\uff1a \u4fdd\u6301\u9884\u8bad\u7ec3\u6a21\u578b\u5185\u90e8\u4e0d\u53d8 \u5728\u9876\u90e8\u6dfb\u52a0\u5206\u7c7b\u5668\uff0c\u5728\u5e95\u90e8\u6dfb\u52a0\u5d4c\u5165\uff0c\u5c06\u8f93\u51fa\u4f5c\u4e3a\u7279\u5f81 \u4fee\u6539\u9884\u5148\u8bad\u7ec3\u7684\u6a21\u578b\u5185\u90e8\u67b6\u6784 \u521d\u59cb\u5316\u7f16\u7801\u5668-\u89e3\u7801\u5668\u3001\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539\u3001\u9002\u914d\u5668","title":"4.1 Architecture"},{"location":"Transfer%20Learning/#41a-architecture-keep-model-unchanged","text":"\u5e38\u89c4\u5de5\u4f5c\u6d41 \u5982\u679c\u5bf9\u76ee\u6807\u4efb\u52a1\u65e0\u6548\uff0c\u5219\u5220\u9664 \u9884\u8bad\u7ec3\u7684\u4efb\u52a1\u5934 \u793a\u4f8b\uff1a\u4ece\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u4e2d\u5220\u9664softmax\u5206\u7c7b\u5668 \u4e0d\u603b\u662f\u9700\u8981:\u4e00\u4e9b\u9002\u5e94\u65b9\u6848\u91cd\u7528\u4e86\u9884\u8bad\u7ec3\u7684\u76ee\u6807/\u4efb\u52a1\uff0c\u4f8b\u5982\u7528\u4e8e\u591a\u4efb\u52a1\u5b66\u4e60 \u5728\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u9876\u90e8/\u5e95\u90e8\u6dfb\u52a0\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u76ee\u6807\u5c42 \u7b80\u5355\uff1a\u5728\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u4e0a\u6dfb\u52a0\u7ebf\u6027\u5c42 \u66f4\u590d\u6742\u7684:\u5c06\u6a21\u578b\u8f93\u51fa\u4f5c\u4e3a\u5355\u72ec\u6a21\u578b\u7684\u8f93\u5165 \u5f53\u76ee\u6807\u4efb\u52a1\u9700\u8981\u9884\u5148\u8bad\u7ec3\u7684\u5d4c\u5165\u4e2d\u4e0d\u53ef\u7528\u7684\u4ea4\u4e92\u65f6\uff0c\u901a\u5e38\u662f\u6709\u76ca\u7684","title":"4.1.A \u2013 Architecture: Keep model unchanged"},{"location":"Transfer%20Learning/#41b-architecture-modifying-model-internals","text":"\u5404\u79cd\u5404\u6837\u7684\u539f\u56e0: \u9002\u5e94\u7ed3\u6784\u4e0a\u4e0d\u540c\u7684\u76ee\u6807\u4efb\u52a1 \u4f8b\u5982:\u4f7f\u7528\u5355\u4e2a\u8f93\u5165\u5e8f\u5217(\u4f8b\u5982:\u8bed\u8a00\u5efa\u6a21)\u8fdb\u884c\u9884\u8bad\u7ec3\uff0c\u4f46\u662f\u9002\u5e94\u591a\u4e2a\u8f93\u5165\u5e8f\u5217\u7684\u4efb\u52a1(\u4f8b\u5982:\u7ffb\u8bd1\u3001\u6761\u4ef6\u751f\u6210\u2026\u2026) \u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u6743\u91cd\u5c3d\u53ef\u80fd\u521d\u59cb\u5316\u7ed3\u6784\u4e0d\u540c\u7684\u76ee\u6807\u4efb\u52a1\u6a21\u578b \u4f8b\u5982:\u4f7f\u7528\u5355\u8bedLMs\u521d\u59cb\u5316MT\u7684\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u53c2\u6570 \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539 \u63d0\u4f9b\u5bf9\u76ee\u6807\u4efb\u52a1\u6709\u7528\u7684\u9884\u8bad\u7ec3\u6a21\u578b \u4f8b\u5982\uff1a\u6dfb\u52a0\u8df3\u8fc7/\u5269\u4f59\u8fde\u63a5\uff0c\u6ce8\u610f\u529b \u4f7f\u7528\u8f83\u5c11\u7684\u53c2\u6570\u8fdb\u884c\u8c03\u6574: \u66f4\u5c11\u7684\u53c2\u6570\u8fdb\u884c\u5fae\u8c03 \u5728\u6a21\u578b\u53c2\u6570\u4e0d\u65ad\u589e\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u975e\u5e38\u6709\u7528 \u4f8b\u5982:\u5728\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u5c42\u4e4b\u95f4\u6dfb\u52a0\u74f6\u9888\u6a21\u5757(\u201c\u9002\u914d\u5668\u201d)( Rebuffi et al., NIPS 2017 ; CVPR 2018 ) Adapters \u901a\u5e38\u5728\u4e8e\u73b0\u6709\u5c42\u5e73\u884c\u7684\u57fa\u7840\u4e0a\u4f7f\u7528\u5269\u4f59\u8fde\u63a5\u8fde\u63a5 \u6bcf\u5c42\u653e\u7f6e\u6548\u679c\u6700\u4f73(\u5e95\u5c42\u6548\u679c\u8f83\u5c0f) \u4e0d\u540c\u7684\u64cd\u4f5c(\u5377\u79ef\uff0c\u81ea\u6211\u6ce8\u610f)\u662f\u53ef\u80fd\u7684 \u7279\u522b\u9002\u5408 Transformer \u7b49\u6a21\u5757\u5316\u67b6\u6784( Houlsby et al., ICML 2019 ; Stickland and Murray, ICML 2019 ) Adapters ( Stickland & Murray, ICML 2019 ) \u591a\u5934\u7684\u5173\u6ce8(MH;\u8de8\u5c42\u5171\u4eab)\u4e0eBERT\u7684self-attention (SA)\u5c42\u5e76\u884c\u4f7f\u7528 \u4e24\u8005\u90fd\u88ab\u52a0\u5728\u4e00\u8d77\uff0c\u5e76\u8f93\u5165\u5230 Layer-norm (LN)\u4e2d","title":"4.1.B \u2013 Architecture: Modifying model internals"},{"location":"Transfer%20Learning/#hands-on-2-adapting-our-pretrained-model","text":"Let\u2019s see how a simple fine-tuning scheme can be implemented with our pretrained model: Plan Start from our Transformer language model Adapt the model to a target task: keep the model core unchanged, load the pretrained weights add a linear layer on top, newly initialized use additional embeddings at the bottom, newly initialized Adaptation task \u6211\u4eec\u9009\u62e9\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4f5c\u4e3a\u4e0b\u6e38\u4efb\u52a1 TREC-6: The Text REtrieval Conference (TREC) Question Classification (Li et al., COLING 2002) TREC consists of open-domain, fact-based questions divided into broad semantic categories contains 5500 labeled training questions & 500 testing questions with 6 labels: NUM, LOC, HUM, DESC, ENTY, ABBR \u4f8b\u5982 \u8fc1\u79fb\u5b66\u4e60\u6a21\u578b\u9002\u7528\u4e8e\u8fd9\u79cd\u4f4e\u8d44\u6e90\u7684\u4efb\u52a1 First adaptation scheme \u4fee\u6539: \u4fdd\u6301\u6a21\u578b\u5185\u90e8\u4e0d\u53d8 \u5728\u4e0a\u9762\u6dfb\u52a0\u4e00\u4e2a\u7ebf\u6027\u56fe\u5c42 \u5728\u5e95\u90e8\u6dfb\u52a0\u989d\u5916\u7684\u5d4c\u5165(\u5206\u7c7b\u6807\u8bb0) \u8ba1\u7b97\u6d41\u7a0b: \u6a21\u578b\u8f93\u5165:\u6700\u540e\u5e26\u6709\u5206\u7c7b\u6807\u8bb0\u7684\u6807\u8bb0\u5316\u95ee\u9898 \u63d0\u53d6\u4e0e\u5206\u7c7b\u4ee4\u724c\u5173\u8054\u7684\u6700\u540e\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \u901a\u8fc7\u7ebf\u6027\u5c42\u4e2d\u7684\u9690\u85cf\u72b6\u6001\u548csoftmax\u5f97\u5230\u7c7b\u6982\u7387 \u5907\u6ce8: \u9519\u8bef\u7387\u4e0b\u964d\u5f97\u5f88\u5feb\uff01\u5728\u4e00\u4e2a\u5faa\u73af\u4e4b\u540e\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86>90%\u7684\u51c6\u786e\u7387\u3002 Fine-tuning \u5728 Transfer Learning \u4e2d\u662f\u9ad8\u5ea6\u6570\u636e\u9ad8\u6548\u7684 \u6211\u4eec\u7684\u9884\u8bad\u7ec3\u548c\u5fae\u8c03\u8d85\u53c2\u6570\u76f4\u63a5\u6765\u81ea\u4e8e\u76f8\u5173\u6a21\u578b\u7684\u6587\u732e Fine-tuning \u5f80\u5f80\u5728\u7cbe\u786e\u8d85\u53c2\u6570\u7684\u9009\u62e9\u4e0b\u662f\u5065\u58ee\u7684 \u8ba9\u6211\u4eec\u7528\u4e00\u4e9b\u5173\u4e8e\u7a33\u5065\u6027\u548c\u65b9\u5dee\u7684\u989d\u5916\u8bcd\u6c47\u6765\u7ed3\u675f\u8fd9\u4e2a\u5b9e\u8df5 \u5927\u578b\u9884\u8bad\u7ec3\u6a21\u578b(\u5982BERT Large)\u5728\u5bf9\u5c0f\u8bad\u7ec3\u96c6\u7684\u4efb\u52a1\u8fdb\u884c\u5fae\u8c03\u65f6\uff0c\u5bb9\u6613\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002 \u89c2\u5bdf\u5230\u7684\u884c\u4e3a\u901a\u5e38\u662f\u201c\u65ad\u65ad\u7eed\u7eed\u7684\u201d:\u8981\u4e48\u6548\u679c\u5f88\u597d\uff0c\u8981\u4e48\u6839\u672c\u4e0d\u7ba1\u7528\u3002 \u7406\u89e3\u8fd9\u79cd\u884c\u4e3a\u7684\u6761\u4ef6\u548c\u539f\u56e0(\u6a21\u578b\u3001\u9002\u5e94\u65b9\u6848)\u662f\u4e00\u4e2a\u5f00\u653e\u7684\u7814\u7a76\u95ee\u9898\u3002","title":"Hands-on #2: Adapting our pretrained model"},{"location":"Transfer%20Learning/#42-optimization","text":"\u6d89\u53ca\u5230\u4f18\u5316\u672c\u8eab\u7684\u51e0\u4e2a\u65b9\u5411: \u9009\u62e9\u6211\u4eec\u5e94\u8be5\u66f4\u65b0\u7684\u6743\u91cd Feature extraction, fine-tuning, adapters \u9009\u62e9\u5982\u4f55\u4ee5\u53ca\u4f55\u65f6\u66f4\u65b0\u6743\u91cd From top to bottom, gradual unfreezing, discriminative fine-tuning \u8003\u8651\u5b9e\u4e8b\u6c42\u662f\u7684\u6743\u8861 Space and time complexity, performance","title":"4.2 Optimization"},{"location":"Transfer%20Learning/#42a-optimization-which-weights","text":"\u4e3b\u8981\u95ee\u9898:\u8c03\u6574\u8fd8\u662f\u4e0d\u8c03\u6574(\u9884\u5148\u8bad\u7ec3\u597d\u7684\u91cd\u91cf)? \u4e0d\u6539\u53d8\u9884\u5148\u8bad\u7ec3\u7684\u91cd\u91cf Feature extraction, adapters \u6539\u53d8\u9884\u8bad\u7ec3\u6743\u91cd fine-tuning \u4e0d\u8981\u78b0\u9884\u5148\u8bad\u7ec3\u597d\u7684\u6743\u91cd\uff01 Feature extraction: (\u9884\u8bad\u7ec3\u7684)\u6743\u91cd\u88ab\u51bb\u7ed3 \u7ebf\u6027\u5206\u7c7b\u5668\u662f\u5728\u9884\u8bad\u7ec3\u7684\u8868\u793a\u4e0a\u8fdb\u884c\u8bad\u7ec3\u7684 \u4e0d\u8981\u53ea\u4f7f\u7528\u9876\u5c42\u7684\u7279\u6027! \u5b66\u4e60\u5c42\u7684\u7ebf\u6027\u7ec4\u5408 \u6216\u8005\uff0c\u5728\u4e0b\u6e38\u6a21\u578b\u4e2d\u4f7f\u7528\u9884\u5148\u8bad\u7ec3\u7684\u8868\u793a\u4f5c\u4e3a\u7279\u6027 Adapters\uff1a \u5728\u73b0\u6709\u5c42\u4e4b\u95f4\u6dfb\u52a0\u7684\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u6a21\u5757 \u53ea\u6709 adapters \u88ab\u8bad\u7ec3 \u4fee\u6539\u9884\u8bad\u7ec3\u6743\u91cd\uff01 Fine-tuning: \u91c7\u7528\u9884\u8bad\u7ec3\u7684\u6743\u503c\u4f5c\u4e3a\u4e0b\u6e38\u6a21\u578b\u53c2\u6570\u7684\u521d\u59cb\u5316 \u6574\u4e2a\u9884\u8bad\u7ec3\u7684\u4f53\u7cfb\u7ed3\u6784\u5728\u9002\u5e94\u9636\u6bb5\u8fdb\u884c\u57f9\u8bad","title":"4.2.A \u2013 Optimization: Which weights?"},{"location":"Transfer%20Learning/#hands-on-3-using-adapters-and-freezing","text":"Second adaptation scheme: Using Adapters Modifications: add Adapters inside the backbone model: Linear \u21e8 ReLU \u21e8 Linear with a skip-connection As previously: add a linear layer on top use an additional embedding (classification token) at the bottom We will only train the adapters, the added linear layer and the embeddings. The other parameters of the model will be frozen .","title":"Hands-on #3: Using Adapters and freezing"},{"location":"Transfer%20Learning/#42b-optimization-what-schedule","text":"\u6211\u4eec\u5df2\u7ecf\u51b3\u5b9a\u8981\u66f4\u65b0\u54ea\u4e9b\u6743\u91cd\uff0c\u4f46\u662f\u4ee5\u4ec0\u4e48\u987a\u5e8f\u4ee5\u53ca\u5982\u4f55\u66f4\u65b0\u5b83\u4eec\uff1f \u52a8\u673a\uff1a\u6211\u4eec\u5e0c\u671b\u907f\u514d\u8986\u76d6\u6709\u7528\u7684\u9884\u8bad\u7ec3\u4fe1\u606f\u5e76\u6700\u5927\u5316\u79ef\u6781\u7684\u77e5\u8bc6\u8fc1\u79fb\u3002 \u76f8\u5173\u6982\u5ff5\uff1a\u707e\u96be\u9057\u5fd8\uff08McCloskey\uff06Cohen\uff0c1989; French\uff0c1999\uff09\u4e00\u4e2a\u6a21\u578b\u5fd8\u8bb0\u4e86\u5b83\u6700\u521d\u53d7\u8fc7\u8bad\u7ec3\u7684\u4efb\u52a1 \u6307\u5bfc\u539f\u5219\uff1a\u4ece\u4e0a\u5230\u4e0b\u66f4\u65b0 \u65f6\u95f4\u4e0a\u6e10\u8fdb\uff1a\u51bb\u7ed3 \u5f3a\u5ea6\u4e0a\u6e10\u8fdb\uff1a\u6539\u53d8\u5b66\u4e60\u901f\u5ea6 \u6e10\u8fdb\u4e0e\u9884\u8bad\u7ec3\u6a21\u578b:\u6b63\u5219\u5316 Optimization: Freezing \u4e3b\u8981\u76f4\u89c9\uff1a\u5728\u4e0d\u540c\u5206\u5e03\u548c\u4efb\u52a1\u7684\u6570\u636e\u4e0a\u540c\u65f6\u8bad\u7ec3\u6240\u6709\u5c42\u53ef\u80fd\u5bfc\u81f4\u4e0d\u7a33\u5b9a\u7684\u4e0d\u826f\u89e3\u51b3\u65b9\u6848\u3002 \u89e3\u51b3\u65b9\u6848\uff1a\u5355\u72ec\u8bad\u7ec3\u6bcf\u4e00\u5c42\uff0c\u4f7f\u4ed6\u4eec\u6709\u65f6\u95f4\u9002\u5e94\u65b0\u7684\u4efb\u52a1\u548c\u6570\u636e\u3002 \u56de\u5230\u65e9\u671f\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u7684\u5206\u5c42\u8bad\u7ec3\uff08 Hinton et al., 2006 ; Bengio et al., 2007 \uff09 \u76f8\u5173\u5b9e\u4f8b Freezing all but the top layer ( Long et al., ICML 2015 ) Chain-thaw ( Felbo et al., EMNLP 2017 ):\u6bcf\u6b21\u8bad\u7ec3\u4e00\u5c42 \u5148\u8bad\u7ec3\u65b0\u589e\u7684\u5c42 \u518d\u81ea\u5e95\u5411\u4e0a\uff0c\u6bcf\u6b21\u8bad\u7ec3\u4e00\u5c42\uff08\u4e0d\u518d\u8bad\u7ec3\u65b0\u589e\u7684\u90a3\u4e00\u5c42\uff0c\u5176\u4f59\u5c42\u4ee5\u4f1a\u5728\u4e0d\u8bad\u7ec3\u65f6\u88ab\u540c\u65f6\u51bb\u7ed3\uff09 \u8bad\u7ec3\u6240\u6709\u5c42\uff08\u5305\u62ec\u65b0\u589e\u5c42\uff09 Gradually unfreezing ( Howard & Ruder, ACL 2018 ): \u9010\u5c42\u89e3\u51bb\uff08\u81ea\u9876\u5411\u4e0b\uff09 Sequential unfreezing ( Chronopoulou et al., NAACL 2019 ): \u8d85\u53c2\u6570\u63a7\u5236\u5fae\u8c03\u8f6e\u6570 \u5fae\u8c03 n \u8f6e\u6b21\u65b0\u589e\u53c2\u6570\uff08\u51bb\u7ed3\u9664\u4e86\u65b0\u589e\u5c42\u4ee5\u5916\u7684\u5c42\uff09 \u5fae\u8c03 k \u8f6e\u6b21\u5d4c\u5165\u5c42\u4ee5\u5916\u7684\u9884\u8bad\u7ec3\u5c42 \u8bad\u7ec3\u6240\u6709\u5c42\u76f4\u5230\u6536\u655b \u5171\u6027\uff1a\u6700\u540e\u5bf9\u6240\u6709\u53c2\u6570\u8fdb\u884c\u8054\u5408\u8bad\u7ec3","title":"4.2.B \u2013 Optimization: What schedule?"},{"location":"Transfer%20Learning/#hands-on-4using-gradual-unfreezing","text":"\u9010\u6b65\u89e3\u51bb\u7c7b\u4f3c\u4e8e\u6211\u4eec\u4e4b\u524d\u7684\u51bb\u7ed3\u8fc7\u7a0b\u3002\u6211\u4eec\u5148\u51bb\u7ed3\u9664\u65b0\u589e\u53c2\u6570\u5916\u7684\u6240\u6709\u6a21\u578b: \u7136\u540e\u6211\u4eec\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u9010\u6e10\u89e3\u51bb\u4e00\u4e2a\u989d\u5916\u7684\u6a21\u5757\uff0c\u8fd9\u6837\u6211\u4eec\u5728\u6700\u540e\u5c31\u53ef\u4ee5\u8bad\u7ec3\u5b8c\u6574\u7684\u6a21\u578b\u4e86: Transformer \u4e2d\u7684\u9010\u6b65\u89e3\u51bb\u5c1a\u672a\u5f97\u5230\u8be6\u7ec6\u7684\u7814\u7a76 \u6ca1\u6709\u6587\u732e\u63d0\u5230\u5177\u4f53\u7684\u8d85\u53c2\u6570 \u6b8b\u5dee\u8fde\u63a5\u53ef\u80fd\u4f1a\u5bf9\u65b9\u6cd5\u4ea7\u751f\u5f71\u54cd \u5e94\u8be5\u9002\u5e94 LSTM \u8d85\u53c2\u6570","title":"Hands-on #4:Using gradual unfreezing"},{"location":"Transfer%20Learning/#42b-optimization-learning-rates","text":"\u4e3b\u8981\u60f3\u6cd5\uff1a\u4f7f\u7528\u66f4\u4f4e\u7684\u5b66\u4e60\u7387\u6765\u907f\u514d\u8986\u76d6\u6389\u6709\u7528\u7684\u4fe1\u606f \u5728\u54ea\u91cc\u4ee5\u53ca\u5728\u4ec0\u4e48\u65f6\u5019\uff1f \u4f4e\u5c42(\u6355\u83b7\u4e00\u822c\u4fe1\u606f) \u8bad\u7ec3\u521d\u671f(\u6a21\u578b\u4ecd\u9700\u9002\u5e94\u76ee\u6807\u5206\u5e03) \u8bad\u7ec3\u540e\u671f(\u6a21\u578b\u63a5\u8fd1\u6536\u655b) \u76f8\u5173\u5b9e\u4f8b ( Howard & Ruder, ACL 2018 ) Lower layers capture general information \u2192 Use lower learning rates for lower layers Discriminative fine-tuning \u8f83\u4f4e\u7684\u5c42\u6355\u83b7\u4e00\u822c\u4fe1\u606f \u5bf9\u8f83\u4f4e\u7684\u5c42\u6b21\u4f7f\u7528\u8f83\u4f4e\u7684\u5b66\u4e60\u7387 \\(\\eta^{(i)}=\\eta \\times d_{f}^{-i}\\) Triangular learning rates \u5feb\u901f\u79fb\u52a8\u5230\u4e00\u4e2a\u5408\u9002\u7684\u533a\u57df\uff0c\u7136\u540e\u968f\u7740\u65f6\u95f4\u6162\u6162\u6536\u655b \u4e5f\u88ab\u79f0\u4e3a \u201clearning rate warm-up\u201d \u7528\u4e8e Transformer ( Vaswani et al., NIPS 2017 ) \u548c Transformer-based methods (BERT, GPT) \u7b49 \u6709\u5229\u4e8e\u4f18\u5316\uff1b\u66f4\u5bb9\u6613\u6446\u8131\u6b21\u4f18\u5c40\u90e8\u6781\u5c0f\u503c","title":"4.2.B \u2013 Optimization: Learning rates"},{"location":"Transfer%20Learning/#42b-optimization-regularization","text":"\u4e3b\u8981\u601d\u60f3\uff1a\u901a\u8fc7\u4f7f\u7528\u6b63\u5219\u5316\u9879 \\(\\Omega\\) \u9f13\u52b1\u76ee\u6807\u6a21\u578b\u53c2\u6570\u63a5\u8fd1\u9884\u5148\u8bad\u7ec3\u7684\u6a21\u578b\u53c2\u6570\uff0c\u5c06\u707e\u96be\u6027\u9057\u5fd8\u6700\u5c0f\u5316\u3002 \u7b80\u5355\u7684\u65b9\u6cd5:\u5c06\u65b0\u53c2\u6570\u6b63\u5219\u5316\uff0c\u4e0d\u8981\u4e0e\u9884\u8bad\u7ec3\u7684\u53c2\u6570\u504f\u79bb\u592a\u591a ( Wiese et al., CoNLL 2017 ) \\(\\Omega=\\Sigma_{1}\\left\\|L_{i}-L_{i}^{\\prime}\\right\\|_{2}\\) \u66f4\u9ad8\u7ea7(elastic weight consolidation; EWC )( Kirkpatrick et al., PNAS 2017 ) \u57fa\u4e8e Fisher\u4fe1\u606f\u77e9\u9635 F \uff0c\u5173\u6ce8\u5bf9\u9884\u8bad\u7ec3\u4efb\u52a1\u91cd\u8981\u7684\u53c2\u6570 \\(\\Omega=\\sum_{i} \\frac{\\lambda}{2} F_{i}\\left(\\theta_{i}^{\\prime}-\\theta_{i}\\right)^{2}\\) EWC\u5728\u6301\u7eed\u5b66\u4e60\u65b9\u9762\u6709\u7f3a\u70b9: \u53ef\u80fd\u8fc7\u5ea6\u7ea6\u675f\u53c2\u6570 \u8ba1\u7b97\u6210\u672c\u4e0e\u4efb\u52a1\u6570\u91cf\u6210\u7ebf\u6027\u5173\u7cfb( Schwarz et al., ICML 2018 ) \u5982\u679c\u4efb\u52a1\u76f8\u4f3c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u9f13\u52b1\u57fa\u4e8e\u4ea4\u53c9\u71b5\u7684\u6e90\u548c\u76ee\u6807\u9884\u6d4b\u63a5\u8fd1\uff0c\u7c7b\u4f3c\u4e8e\u84b8\u998f: \\(\\Omega=\\mathcal{H}\\left(\\hat{y}, \\hat{y}^{\\prime}\\right)\\)","title":"4.2.B \u2013 Optimization: Regularization"},{"location":"Transfer%20Learning/#hands-on-5using-discriminative-learning","text":"","title":"Hands-on #5:Using discriminative learning"},{"location":"Transfer%20Learning/#42c-optimization-trade-offs","text":"\u5728\u9009\u62e9\u66f4\u65b0\u54ea\u4e9b\u6743\u91cd\u65f6\uff0c\u9700\u8981\u6743\u8861\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a A. \u7a7a\u95f4\u590d\u6742\u5ea6 \u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u4fee\u6539\u3001\u9644\u52a0\u53c2\u6570\u3001\u53c2\u6570\u91cd\u7528 B. \u65f6\u95f4\u590d\u6742\u5ea6 \u8bad\u7ec3\u65f6\u95f4 C. \u6027\u80fd \u7ecf\u9a8c\u6cd5\u5219\uff1a\u5982\u679c\u4efb\u52a1\u6e90\u548c\u76ee\u6807\u4efb\u52a1\u4e0d\u76f8\u4f3c*\uff0c\u4f7f\u7528\u7279\u5f81\u63d0\u53d6( Peters et al., 2019 ) \u5426\u5219\uff0c\u7279\u5f81\u63d0\u53d6\u548c\u5fae\u8c03\u5e38\u5e38\u6548\u679c\u7c7b\u4f3c\uff08\u6b64\u65f6\u7528\u5fae\u8c03\u66f4\u597d\uff09 \u5728\u6587\u672c\u76f8\u4f3c\u6027\u4efb\u52a1\u4e0a\u5bf9BERT\u8fdb\u884c\u5fae\u8c03\uff0c\u6548\u679c\u660e\u663e\u66f4\u597d \u9002\u914d\u5668\u5b9e\u73b0\u4e86\u4e0e\u5fae\u8c03\u76f8\u6bd4\u5177\u6709\u7ade\u4e89\u529b\u7684\u6027\u80fd \u6709\u8da3\u7684\u662f\uff0cTransformer \u6bd4 LSTMs \u66f4\u5bb9\u6613\u5fae\u8c03(\u5bf9\u8d85\u53c2\u6570\u4e0d\u90a3\u4e48\u654f\u611f) *\u4e0d\u76f8\u4f3c\uff1a\u67d0\u4e9b\u80fd\u529b(\u4f8b\u5982\u53e5\u5b50\u95f4\u5173\u7cfb\u5efa\u6a21)\u5bf9\u76ee\u6807\u4efb\u52a1\u662f\u6709\u76ca\u7684\uff0c\u4f46\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u7f3a\u4e4f\u8fd9\u4e9b\u80fd\u529b\u80fd(\u53c2\u89c1\u540e\u9762\u7684\u66f4\u591a\u5185\u5bb9)","title":"4.2.C \u2013 Optimization: Trade-offs"},{"location":"Transfer%20Learning/#43-getting-more-signal","text":"\u76ee\u6807\u4efb\u52a1\u901a\u5e38\u662f\u4f4e\u8d44\u6e90\u4efb\u52a1\u3002\u6211\u4eec\u7ecf\u5e38\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u4e0d\u540c\u7684\u4fe1\u53f7\uff0c\u63d0\u9ad8\u8fc1\u79fb\u5b66\u4e60\u7684\u6548\u679c: \u5728\u5355\u4e2a\u9002\u5e94\u4efb\u52a1\u4e0a\u5fae\u8c03\u5355\u4e2a\u6a21\u578b \u57fa\u672c\u539f\u7406\uff1a\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u5206\u7c7b\u76ee\u6807\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03 \u5176\u4ed6\u6570\u636e\u96c6\u548c\u76f8\u5173\u4efb\u52a1\u4e2d\u6536\u96c6\u4fe1\u53f7\u3002 \u5fae\u8c03\u4e0e\u5f31\u76d1\u7763\uff0c\u591a\u4efb\u52a1\u548c\u987a\u5e8f\u9002\u5e94 \u96c6\u6210\u6a21\u578b \u7ed3\u5408\u51e0\u4e2a\u5fae\u8c03\u6a21\u578b\u7684\u9884\u6d4b","title":"4.3 \u2013 Getting more signal"},{"location":"Transfer%20Learning/#43a-getting-more-signal-basic-fine-tuning","text":"\u5fae\u8c03\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u7684\u7b80\u5355\u4f8b\u5b50: \u4ece\u6a21\u578b\u4e2d\u63d0\u53d6\u5355\u4e2a\u5b9a\u957f\u5411\u91cf: \u7b2c\u4e00\u4e2a/\u6700\u540e\u4e00\u4e2a\u4ee4\u724c\u7684\u9690\u85cf\u72b6\u6001\uff0c\u6216\u8005\u662f\u9690\u85cf\u72b6\u6001\u7684\u5e73\u5747\u503c/\u6700\u5927\u503c \u4f7f\u7528\u9644\u52a0\u7684\u5206\u7c7b\u5668\u6295\u5f71\u5230\u5206\u7c7b\u7a7a\u95f4 \u7528\u5206\u7c7b\u76ee\u6807\u51fd\u6570\u8bad\u7ec3","title":"4.3.A \u2013 Getting more signal: Basic fine-tuning"},{"location":"Transfer%20Learning/#43b-getting-more-signal-related-datasetstasks","text":"\u987a\u5e8f\u9002\u5e94 Sequential adaptation \u5bf9\u76f8\u5173\u6570\u636e\u96c6\u548c\u4efb\u52a1\u8fdb\u884c\u4e2d\u95f4\u5fae\u8c03 \u4e0e\u76f8\u5173\u4efb\u52a1\u8fdb\u884c\u591a\u4efb\u52a1\u5fae\u8c03 \u5982 GLUE \u4e2d\u7684 NLI \u4efb\u52a1 \u6570\u636e\u96c6\u5206\u5272 \u5f53\u6a21\u578b\u5728\u7279\u5b9a\u7684\u6570\u636e\u7247\u4e0a\u59cb\u7ec8\u8868\u73b0\u4e0d\u4f73\u65f6 \u534a\u76d1\u7763\u5b66\u4e60 \u4f7f\u7528\u672a\u6807\u8bb0\u7684\u6570\u636e\u6765\u63d0\u9ad8\u6a21\u578b\u7684\u4e00\u81f4\u6027","title":"4.3.B \u2013 Getting more signal: Related datasets/tasks"},{"location":"Transfer%20Learning/#43b-getting-more-signal-sequential-adaptation","text":"\u5728\u76f8\u5173\u9ad8\u8d44\u6e90\u6570\u636e\u96c6\u8fdb\u884c\u5fae\u8c03 \u5728\u62e5\u6709\u66f4\u591a\u7684\u6570\u636e\u7684\u76f8\u5173\u4efb\u52a1\u5bf9\u6a21\u578b\u8fdb\u884c\u5fae\u8c03 \u5728\u76ee\u6807\u4efb\u52a1\u4e0a\u5fae\u8c03\u6570\u636e\u96c6 \u5bf9\u4e8e\u6570\u636e\u6709\u9650\u5e76\u4e14\u6709\u7c7b\u4f3c\u4efb\u52a1\u7684\u4efb\u52a1\u5c24\u5176\u6709\u7528( Phang et al., 2018 ) \u63d0\u9ad8\u76ee\u6807\u4efb\u52a1\u7684\u6837\u672c\u590d\u6742\u5ea6( Yogatama et al., 2019 )","title":"4.3.B \u2013 Getting more signal: Sequential adaptation"},{"location":"Transfer%20Learning/#43b-getting-more-signal-multi-task-fine-tuning","text":"\u5728\u76f8\u5173\u4efb\u52a1\u4e0a\u5171\u540c\u5fae\u8c03\u6a21\u578b \u5bf9\u4e8e\u6bcf\u4e2a\u4f18\u5316\u6b65\u9aa4\uff0c\u53d6\u6837\u4e00\u4e2a\u4efb\u52a1\u548c\u4e00\u6279\u6570\u636e\u8fdb\u884c\u8bad\u7ec3 \u901a\u8fc7\u591a\u4efb\u52a1\u5b66\u4e60\u8bad\u7ec3\u591a\u8f6e \u53ea\u5728\u6700\u540e\u51e0\u4e2a\u9636\u6bb5\u5bf9\u76ee\u6807\u4efb\u52a1\u8fdb\u884c\u5fae\u8c03 \u8bed\u8a00\u5efa\u6a21\u662f\u4e00\u4e2a\u76f8\u5173\u7684\u4efb\u52a1\uff01 \u5fae\u8c03\u8bed\u8a00\u6a21\u578b\u6709\u52a9\u4e8e\u5c06\u9884\u8bad\u7ec3\u7684\u53c2\u6570\u8c03\u6574\u5230\u76ee\u6807\u6570\u636e\u96c6 \u5373\u4f7f\u6ca1\u6709\u9884\u8bad\u7ec3\uff0c\u4e5f\u4f1a\u8d77\u5230\u5e2e\u52a9( Rei et al., ACL 2017 ) \u53ef\u9009\u9000\u706b\u6bd4 \\(\\lambda\\) ( Chronopoulou et al., NAACL 2019 ) \u4f5c\u4e3aULMFiT\u4e2d\u7684\u4e00\u4e2a\u5355\u72ec\u6b65\u9aa4\u4f7f\u7528","title":"4.3.B \u2013 Getting more signal: Multi-task fine-tuning"},{"location":"Transfer%20Learning/#43b-getting-more-signal-dataset-slicing","text":"\u4f7f\u7528\u4ec5\u5728\u6570\u636e\u7684\u7279\u5b9a\u5b50\u96c6\u4e0a\u8bad\u7ec3\u7684\u8f85\u52a9\u5934 \u5206\u6790\u6a21\u578b\u8bef\u5dee \u4f7f\u7528\u542f\u53d1\u5f0f\u65b9\u6cd5\u81ea\u52a8\u8bc6\u522b\u8bad\u7ec3\u6570\u636e\u7684\u6311\u6218\u6027\u5b50\u96c6 \u4e0e\u4e3b\u5934\u4e00\u8d77\u8054\u5408\u8bad\u7ec3\u8f85\u52a9\u5934 See also Massive Multi-task Learning with Snorkel MeTaL","title":"4.3.B \u2013 Getting more signal: Dataset slicing"},{"location":"Transfer%20Learning/#43b-getting-more-signal-semi-supervised-learning","text":"\u4f7f\u7528\u672a\u6807\u8bb0\u7684\u6570\u636e\u53ef\u4ee5\u4f7f\u6a21\u578b\u9884\u6d4b\u66f4\u52a0\u4e00\u81f4 \u4e3b\u8981\u601d\u60f3:\u4f7f\u5bf9\u539f\u59cb\u8f93\u5165 x \u548c\u6270\u52a8\u8f93\u5165 x' \u7684\u9884\u6d4b\u4e4b\u95f4\u7684\u8ddd\u79bb\u6700\u5c0f\u5316 \u6270\u52a8\u53ef\u4ee5\u662f\u566a\u58f0\u3001\u63a9\u853d( Clark et al., EMNLP 2018 )\u3001\u6570\u636e\u589e\u5f3a\uff0c\u4f8b\u5982 back-translation ( Xie et al., 2019 )","title":"4.3.B \u2013 Getting more signal: Semi-supervised learning"},{"location":"Transfer%20Learning/#43c-getting-more-signal-ensembling","text":"\u901a\u8fc7\u96c6\u6210\u72ec\u7acb\u7684\u5fae\u8c03\u6a21\u578b\u8fbe\u5230\u6700\u5148\u8fdb\u6c34\u5e73 - \u96c6\u6210\u6a21\u578b\uff1a\u4f7f\u7528\u5404\u79cd\u8d85\u53c2\u6570\u5fae\u8c03\u6a21\u578b\u9884\u6d4b\u7684\u7ec4\u5408 <img src=\"imgs/image-20190905003312221.png\" alt=\"image-20190905003312221\" style=\"zoom:50%;\" /> - \u5728\u4e0d\u540c\u7684\u4efb\u52a1 - \u5728\u4e0d\u540c\u7684\u6570\u636e\u96c6\u5206\u5757 - \u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570(dropout, initializations\u2026) - \u6765\u81ea\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u53d8\u4f53(\u4f8b\u5982 cased/uncased ) \u77e5\u8bc6\u84b8\u998f\uff1a\u5728\u4e00\u4e2a\u66f4\u5c0f\u7684\u6a21\u578b\u4e2d\u63d0\u53d6\u4e00\u7ec4\u8c03\u4f18\u6a21\u578b \u77e5\u8bc6\u84b8\u998f\uff1a\u5728\u6559\u5e08\uff08\u96c6\u6210\u6a21\u578b\uff09\u5236\u4f5c\u7684\u8f6f\u76ee\u6807\u4e0a\u8bad\u7ec3\u5b66\u751f\u6a21\u578b \\(-\\sum_{c} Q(c | X) \\log \\left(P_{r}(c | X)\\right)\\) \u6559\u5e08\u6807\u7b7e\u7684\u76f8\u5bf9\u6982\u7387\u5305\u542b\u6559\u5e08\u5982\u4f55\u6982\u62ec\u7684\u4fe1\u606f","title":"4.3.C \u2013 Getting more signal: Ensembling"},{"location":"Transfer%20Learning/#hands-on-6using-multi-task-learning","text":"","title":"Hands-on #6:Using multi-task learning"},{"location":"Transfer%20Learning/#5-downstream-applications-hands-on-examples","text":"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u6cbf\u4e24\u4e2a\u6b63\u4ea4\u65b9\u5411\u63a2\u7d22\u4e0b\u6e38\u7684\u5e94\u7528\u548c\u5b9e\u9645\u8003\u8651: \u8fc1\u79fb\u5b66\u4e60\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5404\u79cd\u5e94\u7528\u662f\u4ec0\u4e48 \u6587\u6863/\u53e5\u5b50\u5206\u7c7b\u3001\u4ee4\u724c\u7ea7\u5206\u7c7b\u3001\u7ed3\u6784\u5316\u9884\u6d4b\u548c\u8bed\u8a00\u751f\u6210 \u5982\u4f55\u5229\u7528\u591a\u4e2a\u6846\u67b6\u548c\u5e93\u6765\u5b9e\u73b0\u5b9e\u9645\u5e94\u7528 Tensorflow\u3001PyTorch\u3001Keras\u548c\u7b2c\u4e09\u65b9\u5e93\uff0c\u4f8b\u5982 fast.ai, HuggingFace\u2026\u2026 \u53e5\u5b50\u548c\u6587\u6863\u7ea7\u5206\u7c7b \u52a8\u624b\u5b9e\u8df5\uff1a\u6587\u6863\u7ea7\u5206\u7c7b(fast.ai) \u4ee4\u724c\u5206\u7c7b \u5b9e\u8df5\uff1a\u95ee\u7b54(\u8c37\u6b4cBERT & Tensorflow/TF Hub) \u8bed\u8a00\u751f\u6210 \u5b9e\u8df5\uff1a\u5bf9\u8bdd\u751f\u6210(OpenAI GPT & HuggingFace/PyTorch Hub)","title":"5. Downstream applications Hands-on examples"},{"location":"Transfer%20Learning/#5a-sequence-document-level-classification","text":"\u4f7f\u7528 fast.ai \u5e93\u5b8c\u6210\u6587\u6863\u5206\u7c7b\u7684\u8fc1\u79fb\u5b66\u4e60 \u76ee\u6807\u4efb\u52a1 IMDB\uff1a\u4e00\u4e2a\u4e8c\u5143\u60c5\u7eea\u5206\u7c7b\u6570\u636e\u96c6\uff0c\u5305\u542b\u7528\u4e8e\u8bad\u7ec3\u768425k\u4e2a\u9ad8\u5ea6\u6781\u6027\u7684\u7535\u5f71\u8bc4\u8bba\uff0c\u7528\u4e8e\u6d4b\u8bd5\u768425k\u4e2a\uff0c\u4ee5\u53ca\u5176\u4ed6\u672a\u6807\u8bb0\u7684\u6570\u636e\u3002 http://ai.stanford.edu/~amaas/data/sentiment/ Fast.ai \u7279\u522b\u63d0\u4f9b\u4e86: \u4e00\u4e2a\u9884\u5148\u8bad\u7ec3\u7684\u82f1\u6587\u6a21\u578b\u53ef\u4f9b\u4e0b\u8f7d \u4e00\u4e2a\u6807\u51c6\u5316\u7684\u6570\u636e\u5757API \u6613\u4e8e\u8bbf\u95ee\u6807\u51c6\u6570\u636e\u96c6\uff0c\u5982IMDB fast.ai \u57fa\u4e8e PyTorch fast.ai \u4e3a\u89c6\u89c9\u3001\u6587\u672c\u3001\u8868\u683c\u6570\u636e\u548c\u534f\u540c\u8fc7\u6ee4\u63d0\u4f9b\u4e86\u8bb8\u591a\u5f00\u7bb1\u5373\u7528\u7684\u9ad8\u7ea7API \u5e93\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u52a0\u5feb\u5b9e\u9a8c\u7684\u901f\u5ea6\uff0c\u4f8b\u5982\u5728\u4e92\u52a8\u8ba1\u7b97\u73af\u5883\u4e2d\u4e00\u6b21\u5bfc\u5165\u6240\u6709\u5fc5\u9700\u7684\u6a21\u5757\uff0c\u4f8b\u5982: Fast.ai \u5305\u542b\u5feb\u901f\u8bbe\u7f6e\u8fc1\u79fb\u5b66\u4e60\u5b9e\u9a8c\u6240\u9700\u7684\u6240\u6709\u9ad8\u7ea7\u6a21\u5757\u3002 \u52a0\u8f7d\u6570\u636e\u96c6 \u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u548c\u5206\u7c7b\u5668\u7684 DataBunch \u4f7f\u7528\u8bed\u8a00\u6a21\u578b\u635f\u5931\u51fd\u6570\uff0c\u5728 WikiText-103 \u4e0a\u9884\u8bad\u7ec3\u7684 AWD-LSTM \u5e76\u5728 IMDB \u6570\u636e\u96c6\u4e0a\u5fae\u8c03 \u4e00\u65e6\u6211\u4eec\u6709\u4e86\u5fae\u8c03\u7684\u8bed\u8a00\u6a21\u578b(AWD-LSTM)\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u5668\uff0c\u6dfb\u52a0\u4e00\u4e2a\u5206\u7c7b\u5934: - \u5c06RNN\u7684\u6700\u7ec8\u8f93\u51fa\u7684\u6700\u5927\u503c\u4e0e\u6240\u6709\u4e2d\u95f4\u8f93\u51fa(\u6cbf\u7740\u5e8f\u5217\u957f\u5ea6)\u7684\u5e73\u5747\u503c\u8fde\u63a5\u8d77\u6765\u7684\u5c42 - Two blocks of nn.BatchNorm1d \u21e8 nn.Dropout \u21e8 nn.Linear \u21e8 nn.ReLU \u7684\u9690\u85cf\u7ef4\u5ea6\u4e3a50 - \u5206\u4e24\u6b65\u5fae\u8c03 - \u53ea\u8bad\u7ec3\u5206\u7c7b\u5934\uff0c\u540c\u65f6\u4fdd\u6301\u8bed\u8a00\u6a21\u578b\u4e0d\u53d8 - \u5fae\u8c03\u6574\u4e2a\u7ed3\u6784 - Colab: http://tiny.cc/NAACLTransferFastAiColab","title":"5.A \u2013 Sequence &amp; document level classification"},{"location":"Transfer%20Learning/#5b-token-level-classification-bert-tensorflow","text":"\u7528\u4e8e\u4ee4\u724c\u7ea7\u5206\u7c7b\u7684\u8f6c\u79fb\u5b66\u4e60:\u8c37\u6b4c\u7684BERT in TensorFlow \u76ee\u6807\u4efb\u52a1: SQuAD: \u56de\u7b54\u95ee\u9898\u7684\u6570\u636e\u96c6 https://rajpurkar.github.io/SQuAD-explorer/ \u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u76f4\u63a5\u4f7f\u7528 Tensorflow checkpoint \u4f8b\u5982\uff1a https://github.com/google-research/bert \u6211\u4eec\u4f7f\u7528\u901a\u5e38\u7684Tensorflow\u5de5\u4f5c\u6d41\uff1a\u521b\u5efa\u5305\u542b\u6838\u5fc3\u6a21\u578b\u548c\u6dfb\u52a0/\u4fee\u6539\u5143\u7d20\u7684\u6a21\u578b\u56fe \u52a0\u8f7d\u68c0\u67e5\u70b9\u65f6\u8981\u6ce8\u610f\u53d8\u91cf\u5206\u914d \u8bed\u8a00\u751f\u6210\u8fc1\u79fb\u5b66\u4e60\uff1aOpenAI GPT \u548c HuggingFace \u5e93 \u76ee\u6807\u4efb\u52a1: ConvAI2 -\u7b2c\u4e8c\u5c4a\u4f1a\u8bdd\u667a\u80fd\u6311\u6218\uff0c\u7528\u4e8e\u8bad\u7ec3\u548c\u8bc4\u4f30\u975e\u76ee\u6807\u5bfc\u5411\u5bf9\u8bdd\u7cfb\u7edf\u7684\u6a21\u578b\uff0c\u4f8b\u5982\u95f2\u804a http://convai.io \u9884\u8bad\u7ec3\u6a21\u578b\u7684 HuggingFace \u4ed3\u5e93 \u5927\u578b\u9884\u5148\u8bad\u7ec3\u6a21\u578b BERT, GPT, GPT-2, Transformer-XL \u7684\u4ed3\u5e93 \u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u4e0b\u8f7d\u3001\u5b9e\u4f8b\u5316\u548c\u8bad\u7ec3PyTorch\u4e2d\u9884\u5148\u8bad\u7ec3\u597d\u7684\u6a21\u578b HuggingFace\u7684\u6a21\u578b\u73b0\u5728\u4e5f\u53ef\u4ee5\u901a\u8fc7PyTorch Hub\u8bbf\u95ee \u8bed\u8a00\u751f\u6210\u4efb\u52a1\u63a5\u8fd1\u8bed\u8a00\u5efa\u6a21\u8bad\u7ec3\u524d\u7684\u76ee\u6807\uff0c\u4f46\u662f: \u8bed\u8a00\u5efa\u6a21\u524d\u7684\u8bad\u7ec3\u53ea\u9700\u8981\u4e00\u4e2a\u8f93\u5165\uff1a\u4e00\u7cfb\u5217\u5355\u8bcd \u5728\u5bf9\u8bdd\u6846\u8bbe\u7f6e\u4e2d\uff1a\u63d0\u4f9b\u4e86\u51e0\u79cd\u7c7b\u578b\u7684\u4e0a\u4e0b\u6587\u6765\u751f\u6210\u8f93\u51fa\u5e8f\u5217 \u77e5\u8bc6\u5e93\uff1a\u89d2\u8272\u53e5 \u5bf9\u8bdd\u7684\u5386\u53f2\uff1a\u81f3\u5c11\u662f\u7528\u6237\u7684\u6700\u540e\u4e00\u53e5\u8bdd \u5df2\u751f\u6210\u7684\u8f93\u51fa\u5e8f\u5217\u7684\u6807\u8bb0 \u6211\u4eec\u5e94\u8be5\u5982\u4f55\u9002\u5e94\u8fd9\u79cd\u6a21\u5f0f?","title":"5.B \u2013 Token level classification: BERT &amp; Tensorflow"},{"location":"Transfer%20Learning/#6-open-problems-and-future-directions","text":"Shortcomings of pretrained language models \u6982\u8ff0\uff1a\u8bed\u8a00\u6a21\u578b\u53ef\u89c6\u4e3a\u4e00\u822c\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff1b\u6709\u4e86\u8db3\u591f\u7684\u6570\u636e\u3001\u8ba1\u7b97\u548c\u5bb9\u91cf\uff0cLM\u53ef\u4ee5\u5b66\u5230\u5f88\u591a\u4e1c\u897f \u5728\u5b9e\u8df5\u4e2d\uff0c\u8bb8\u591a\u5728\u6587\u672c\u4e2d\u8868\u793a\u8f83\u5c11\u7684\u4e1c\u897f\u66f4\u96be\u5b66\u4e60 \u9884\u5148\u8bad\u7ec3\u597d\u7684\u8bed\u8a00\u6a21\u578b\u5e76\u4e0d\u64c5\u957f \u7ec6\u7c92\u5ea6\u8bed\u8a00\u4efb\u52a1 ( Liu et al., NAACL 2019 ) \u5e38\u8bc6(\u5f53\u4f60\u771f\u7684\u8ba9\u5b83\u53d8\u5f97\u56f0\u96be Zellers et al., ACL 2019 )\uff1b\u81ea\u7136\u8bed\u8a00\u751f\u6210(\u7ef4\u62a4\u957f\u671f\u4f9d\u8d56\u3001\u5173\u7cfb\u3001\u4e00\u81f4\u6027\u7b49) \u5f53\u5fae\u8c03\u65f6\uff0c\u503e\u5411\u4e8e\u8fc7\u5ea6\u9002\u5e94\u8868\u9762\u5f62\u6210\u7684\u4fe1\u606f\uff1b\u2018rapid surface learners\u2019 \u5927\u578b\u7684\u3001\u9884\u5148\u8bad\u7ec3\u7684\u8bed\u8a00\u6a21\u578b\u5f88\u96be\u4f18\u5316\u3002 \u5fae\u8c03\u901a\u5e38\u662f\u4e0d\u7a33\u5b9a\u7684\uff0c\u5e76\u4e14\u6709\u5f88\u9ad8\u7684\u65b9\u5dee\uff0c\u7279\u522b\u662f\u5728\u76ee\u6807\u6570\u636e\u96c6\u975e\u5e38\u5c0f\u7684\u60c5\u51b5\u4e0b Devlin et al. (NAACL 2019) \u6307\u51fa\uff0cBERT\u7684\u5927\u7248\u672c(24\u5c42)\u7279\u522b\u5bb9\u6613\u5bfc\u81f4\u6027\u80fd\u9000\u5316\uff1b\u591a\u6b21\u968f\u673a\u91cd\u542f\u6709\u65f6\u662f\u5fc5\u8981\u7684\uff0c\u8fd9\u5728( Phang et al., 2018 )\u4e2d\u4e5f\u6709\u8be6\u7ec6\u7684\u7814\u7a76 \u5f53\u524d\u7684\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u975e\u5e38\u5927\u3002 \u6211\u4eec\u771f\u7684\u9700\u8981\u6240\u6709\u8fd9\u4e9b\u53c2\u6570\u5417\uff1f \u6700\u8fd1\u7684\u7814\u7a76\u8868\u660e\uff0cBERT\u4e2d\u53ea\u9700\u8981\u51e0\u4e2a\u6ce8\u610f\u529b\u5934( Voita et al., ACL 2019 ) \u9700\u8981\u505a\u66f4\u591a\u7684\u5de5\u4f5c\u6765\u7406\u89e3\u6a21\u578b\u53c2\u6570 \u4fee\u526a\u548c\u84b8\u998f\u662f\u4e24\u79cd\u5904\u7406\u65b9\u6cd5 \u53c2\u89c1:\u5f69\u7968\u5047\u8bf4( Frankle et al., ICLR 2019 ) Pretraining tasks \u8bed\u8a00\u5efa\u6a21\u76ee\u6807\u7684\u4e0d\u8db3 \u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u6a21\u578b \u5982\u679c\u6211\u4eec\u9700\u8981\u66f4\u591a\u7684\u8f93\u5165\uff0c\u5c31\u9700\u8981\u5bf9\u8fd9\u4e9b\u90e8\u4ef6\u8fdb\u884c\u9884\u57f9\u8bad \u4f8b\u5982\u5e8f\u5217\u5230\u5e8f\u5217\u5b66\u4e60\u4e2d\u7684\u89e3\u7801\u5668( Song et al., ICML 2019 ) \u4ece\u5de6\u5230\u53f3\u7684\u504f\u89c1\u5e76\u4e0d\u603b\u662f\u6700\u597d\u7684 \u8003\u8651\u66f4\u591a\u4e0a\u4e0b\u6587(\u5982\u5c4f\u853d)\u7684\u76ee\u6807\u4f3c\u4e4e\u6709\u7528(\u91c7\u6837\u6548\u7387\u8f83\u4f4e) \u53ef\u80fd\u7ec4\u5408\u4e0d\u540cLM\u53d8\u79cd( Dong et al., 2019 ) \u8bed\u4e49\u548c\u957f\u671f\u4e0a\u4e0b\u6587\u7684\u5f31\u4fe1\u53f7\u4e0e\u8bed\u6cd5\u548c\u77ed\u671f\u5355\u8bcd\u5171\u5b58\u7684\u5f3a\u4fe1\u53f7 \u9700\u8981\u6fc0\u52b1\u673a\u5236\u6765\u4fc3\u8fdb\u6211\u4eec\u6240\u5173\u5fc3\u7684\u7f16\u7801\uff0c\u4f8b\u5982\u8bed\u4e49 \u66f4\u52a0\u591a\u6837\u5316\u7684\u81ea\u6211\u76d1\u7763\u76ee\u6807 \u4ece\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u83b7\u5f97\u7075\u611f \u8bed\u8a00\u4e2d\u7684\u81ea\u6211\u76d1\u7763\u4e3b\u8981\u57fa\u4e8e\u8bcd\u7684\u5171\u73b0( Ando and Zhang, 2005 ) \u4e0d\u540c\u5c42\u6b21\u610f\u4e49\u4e0a\u7684\u76d1\u7763 \u8bba\u8ff0\u3001\u6587\u4ef6\u3001\u53e5\u5b50\u7b49\u3002 \u4f7f\u7528\u5176\u4ed6\u4fe1\u53f7\uff0c\u4f8b\u5982\u5143\u6570\u636e \u5f3a\u8c03\u8bed\u8a00\u7684\u4e0d\u540c\u6027\u8d28 \u62bd\u6837\u4e00\u4e2a\u8865\u4e01\u548c\u4e00\u4e2a\u90bb\u5c45\uff0c\u5e76\u9884\u6d4b\u5b83\u4eec\u7684\u7a7a\u95f4\u914d\u7f6e( Doersch et al., ICCV 2015 ) \u56fe\u7247\u7740\u8272 ( Zhang et al., ECCV 2016 ) \u4e13\u95e8\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\u6765\u6559\u6211\u4eec\u7684\u6a21\u578b\u7f3a\u5c11\u7684\u4e1c\u897f \u5236\u5b9a\u4e13\u95e8\u7684\u9884\u8bad\u7ec3\u4efb\u52a1\uff0c\u660e\u786e\u5b66\u4e60\u8fd9\u4e9b\u5173\u7cfb \u83b7\u53d6\u80cc\u666f\u77e5\u8bc6\u7684\u5355\u8bcd\u5bf9\u5173\u7cfb ( Joshi et al., NAACL 2019 ) \u8303\u56f4\u7ea7\u8868\u793a( Swayamdipta et al., EMNLP 2018 ) \u4e0d\u540c\u7684\u9884\u8bad\u7ec3\u8bcd\u5d4c\u5165\u662f\u6709\u7528\u7684( Kiela et al., EMNLP 2018 ) \u5176\u4ed6\u9884\u8bad\u7ec3\u7684\u4efb\u52a1\u53ef\u4ee5\u660e\u786e\u5730\u5b66\u4e60\u63a8\u7406\u6216\u7406\u89e3 \u7b97\u672f\u3001\u65f6\u95f4\u3001\u56e0\u679c\u7b49\uff1b\u8bdd\u8bed\u3001\u53d9\u8ff0\u3001\u8c08\u8bdd\u7b49\u3002 \u9884\u8bad\u7ec3\u7684\u8868\u793a\u53ef\u4ee5\u4ee5\u7a00\u758f\u548c\u6a21\u5757\u5316\u7684\u65b9\u5f0f\u8fde\u63a5 \u57fa\u4e8e\u8bed\u8a00\u5b50\u7ed3\u6784( Andreas et al., NAACL 2016 ) \u6216\u4e13\u5bb6 ( Shazeer et al., ICLR 2017 ) Need for grounded representations \u5206\u5e03\u5f0f\u5047\u8bbe\u7684\u5c40\u9650\u6027\u2014\u2014\u5f88\u96be\u4ece\u539f\u59cb\u6587\u672c\u4e2d\u5b66\u4e60\u7279\u5b9a\u7c7b\u578b\u7684\u4fe1\u606f \u4eba\u7c7b\u62a5\u544a\u504f\u89c1\uff1a\u4e0d\u9648\u8ff0\u663e\u800c\u6613\u89c1\u7684( Gordon and Van Durme, AKBC 2013 ) \u5e38\u8bc6\u4e0d\u662f\u5199\u4e0b\u6765\u7684 \u5173\u4e8e\u547d\u540d\u5b9e\u4f53\u7684\u4e8b\u5b9e \u6ca1\u6709\u5176\u4ed6\u6a21\u5f0f\u7684\u57fa\u7840 \u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u5f0f: \u5438\u6536\u5176\u4ed6\u7ed3\u6784\u5316\u77e5\u8bc6(e.g. knowledge bases like ERNIE, Zhang et al 2019 ) \u591a\u6a21\u6001\u5b66\u4e60(e.g. with visual representations like VideoBERT, Sun et al. 2019 ) \u4ea4\u4e92\u5f0f/human-in-the-loop \u7684\u65b9\u6cd5(e.g. dialog, Hancock et al. 2018 ) Tasks and task similarity \u8bb8\u591a\u4efb\u52a1\u53ef\u4ee5\u8868\u793a\u4e3a\u8bed\u8a00\u5efa\u6a21\u7684\u53d8\u4f53 \u8bed\u8a00\u672c\u8eab\u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e\u6307\u5b9a\u4efb\u52a1\u3001\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7\u6784\u5efaQA ( McCann et al., 2018 ) \u57fa\u4e8e\u5bf9\u8bdd\u7684\u5b66\u4e60\uff0c\u4e0d\u53d7\u6b63\u5411\u9884\u6d4b\u7684\u76d1\u7763 ( Weston, NIPS 2016 ) \u5c06NLP\u4efb\u52a1\u5236\u5b9a\u4e3a\u5b8c\u5f62\u586b\u7a7a\u9884\u6d4b\u76ee\u6807 (Children Book Test, LAMBADA, Winograd, ...) \u901a\u8fc7\u63d0\u793a\u89e6\u53d1\u4efb\u52a1\u884c\u4e3a\uff0c\u4f8b\u5982\u7ffb\u8bd1\u63d0\u793a ( Radford, Wu et al. 2019 ); \u4f7fzero-shot\u9002\u5e94 \u8d28\u7591NLP\u4e2d\u7684\u201c\u4efb\u52a1\u201d\u6982\u5ff5 \u9884\u8bad\u7ec3\u548c\u76ee\u6807\u4efb\u52a1(NLI\uff0c\u5206\u7c7b)\u7684\u76f4\u89c9\u76f8\u4f3c\u6027\u4e0e\u8f83\u597d\u7684\u4e0b\u6e38\u6027\u80fd\u76f8\u5173 \u4e0d\u6e05\u695a\u4e24\u4e2a\u4efb\u52a1\u5728\u4ec0\u4e48\u65f6\u5019\u4ee5\u53ca\u5982\u4f55\u76f8\u4f3c\u548c\u76f8\u5173 \u83b7\u5f97\u66f4\u591a\u7406\u89e3\u7684\u65b9\u6cd5\u4e4b\u4e00\uff1a\u5927\u89c4\u6a21\u7684\u8fc1\u79fb\u5b9e\u8bc1\u7814\u7a76\uff0c\u5982 Taskonomy ( Zamir et al., CVPR 2018 ) \u662f\u5426\u6709\u52a9\u4e8e\u8bbe\u8ba1\u66f4\u597d\u548c\u66f4\u4e13\u4e1a\u7684\u9884\u8bad\u7ec3\u4efb\u52a1 Continual and meta-learning \u5f53\u524d\u8fc1\u79fb\u5b66\u4e60\u53ea\u8fdb\u884c\u4e00\u6b21\u9002\u5e94\u3002 \u6700\u7ec8\uff0c\u6211\u4eec\u5e0c\u671b\u62e5\u6709\u80fd\u591f\u5728\u8bb8\u591a\u4efb\u52a1\u4e2d\u6301\u7eed\u4fdd\u7559\u548c\u79ef\u7d2f\u77e5\u8bc6\u7684\u6a21\u578b( Yogatama et al., 2019 ) \u9884\u8bad\u7ec3\u548c\u9002\u5e94\u4e4b\u95f4\u6ca1\u6709\u533a\u522b\uff1b\u53ea\u6709\u4e00\u4e2a\u4efb\u52a1\u6d41 \u4e3b\u8981\u7684\u6311\u6218\u662f:\u707e\u96be\u6027\u7684\u9057\u5fd8 \u4e0d\u540c\u7684\u7814\u7a76\u65b9\u6cd5\uff1a \u8bb0\u5fc6\u3001\u6b63\u5219\u5316\u3001\u4efb\u52a1\u7279\u5b9a\u6743\u91cd\u7b49 \u8f6c\u79fb\u5b66\u4e60\u7684\u76ee\u7684\uff1a\u5b66\u4e60\u4e00\u79cd\u5bf9\u8bb8\u591a\u4efb\u52a1\u90fd\u901a\u7528\u4e14\u6709\u7528\u7684\u8868\u793a\u65b9\u6cd5 \u5ba2\u89c2\u56e0\u7d20\u4e0d\u4f1a\u523a\u6fc0\u9002\u5e94\u7684\u6613\u7528\u6027(\u901a\u5e38\u4e0d\u7a33\u5b9a)\uff1b\u6ca1\u6709\u5b66\u4f1a\u5982\u4f55\u9002\u5e94\u5b83 \u5143\u5b66\u4e60\u4e0e\u8fc1\u79fb\u5b66\u4e60\u76f8\u7ed3\u5408\u53ef\u4ee5\u4f7f\u8fd9\u4e00\u65b9\u6cd5\u66f4\u52a0\u53ef\u884c \u7136\u800c\uff0c\u5927\u591a\u6570\u73b0\u6709\u7684\u65b9\u6cd5\u90fd\u5c40\u9650\u4e8efew-shot\u573a\u666f\uff0c\u5e76\u4e14\u53ea\u5b66\u4e60\u4e86\u51e0\u4e2a\u9002\u5e94\u6b65\u9aa4 Bias \u504f\u89c1\u5df2\u7ecf\u88ab\u8bc1\u660e\u666e\u904d\u5b58\u5728\u4e8e\u5355\u8bcd\u5d4c\u5165\u548c\u4e00\u822c\u7684\u795e\u7ecf\u6a21\u578b\u4e2d \u5927\u578b\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u5fc5\u7136\u6709\u81ea\u5df1\u7684\u4e00\u5957\u504f\u89c1 \u5e38\u8bc6\u548c\u504f\u89c1\u4e4b\u95f4\u7684\u754c\u9650\u5f88\u6a21\u7cca \u6211\u4eec\u9700\u8981\u5728\u9002\u5e94\u8fc7\u7a0b\u4e2d\u6d88\u9664\u8fd9\u79cd\u504f\u89c1 \u4e00\u4e2a\u5c0f\u7684\u5fae\u8c03\u6a21\u578b\u5e94\u8be5\u66f4\u4e0d\u6613\u88ab\u8bef\u7528","title":"6. Open problems and future directions"},{"location":"Transfer%20Learning/#conclusion","text":"\u4e3b\u9898\uff1a\u8bed\u5883\u4e2d\u7684\u8bcd\u6c47\uff0c\u8bed\u8a00\u6a21\u578b\u9884\u57f9\u8bad\uff0c\u6df1\u5ea6\u6a21\u578b \u9884\u8bad\u7ec3\u5177\u6709\u8f83\u597d\u7684 sample-efficiency \uff0c\u53ef\u6309\u6bd4\u4f8b\u653e\u5927 \u5bf9\u67d0\u4e9b\u7279\u6027\u7684\u9884\u6d4b\u2014\u2014\u53d6\u51b3\u4e8e\u60a8\u5982\u4f55\u770b\u5f85\u5b83 \u6027\u80fd\u6743\u8861\uff0c\u81ea\u9876\u5411\u4e0b \u8fc1\u79fb\u5b66\u4e60\u6613\u4e8e\u5b9e\u73b0\uff0c\u5b9e\u7528\u6027\u5f3a \u4ecd\u7136\u5b58\u5728\u8bb8\u591a\u4e0d\u8db3\u548c\u5c1a\u672a\u89e3\u51b3\u7684\u95ee\u9898","title":"Conclusion"},{"location":"Transfer%20Learning/#reference","text":"NLP\u7684\u5de8\u4eba\u80a9\u8180 - weizier\u7684\u6587\u7ae0 - \u77e5\u4e4e \u4eceWord Embedding\u5230Bert\u6a21\u578b\u2014\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u9884\u8bad\u7ec3\u6280\u672f\u53d1\u5c55\u53f2 - \u5f20\u4fca\u6797\u7684\u6587\u7ae0 - \u77e5\u4e4e \u4eceSVD\u5230PCA\u2014\u2014\u5947\u5999\u7684\u6570\u5b66\u6e38\u620f \u3010\u8bba\u6587\u7b14\u8bb0\u3011Semi-supervised Sequence Learning \u8bba\u6587\u7b14\u8bb0-Unsupervised Pretraining for Sequence to Sequence Learning","title":"Reference"},{"location":"%5BPresentation%5DLSTM/","text":"1 Language Models \u00b6 1.1 Introduction \u8bed\u8a00\u6a21\u578b\u8ba1\u7b97\u7279\u5b9a\u5e8f\u5217\u4e2d\u591a\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u6982\u7387\u3002\u4e00\u4e2a m \u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(\\left\\{w_{1}, \\dots, w_{m}\\right\\}\\) \u7684\u6982\u7387\u5b9a\u4e49\u4e3a \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u3002\u5355\u8bcd \\(w_i\\) \u524d\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5355\u8bcd\uff0c\u5176\u7279\u6027\u4f1a\u6839\u636e\u5b83\u5728\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u800c\u6539\u53d8\uff0c \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u4e00\u822c\u53ea\u8003\u8651\u524d \\(n\\) \u4e2a\u5355\u8bcd\u800c\u4e0d\u662f\u8003\u8651\u5168\u90e8\u4e4b\u524d\u7684\u5355\u8bcd\u3002 \\[ P\\left(w_{1}, \\ldots, w_{m}\\right)=\\prod_{i=1}^{i=m} P\\left(w_{i} | w_{1}, \\ldots, w_{i-1}\\right) \\approx \\prod_{i=1}^{i=m} P\\left(w_{i} | w_{i-n}, \\ldots, w_{i-1}\\right) \\] \u4e0a\u9762\u7684\u516c\u5f0f\u5728\u8bed\u97f3\u8bc6\u522b\u548c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u5224\u65ad\u4e00\u4e2a\u8bcd\u5e8f\u5217\u662f\u5426\u4e3a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u51c6\u786e\u7ffb\u8bd1\u8d77\u5230\u4e86\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u73b0\u6709\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u6bcf\u4e2a\u77ed\u8bed/\u53e5\u5b50\u7ffb\u8bd1\uff0c\u7cfb\u7edf\u751f\u6210\u4e00\u4e9b\u5019\u9009\u7684\u8bcd\u5e8f\u5217\uff08\u4f8b\u5982\uff0c{I have,I has,I had,me have,me had}\uff09\uff0c\u5e76\u5bf9\u5176\u8bc4\u5206\u4ee5\u786e\u5b9a\u6700\u53ef\u80fd\u7684\u7ffb\u8bd1\u5e8f\u5217\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u5bf9\u4e00\u4e2a\u8f93\u5165\u77ed\u8bed\uff0c\u901a\u8fc7\u8bc4\u5224\u6bcf\u4e2a\u5019\u9009\u8f93\u51fa\u8bcd\u5e8f\u5217\u7684\u5f97\u5206\u7684\u9ad8\u4f4e\uff0c\u6765\u9009\u51fa\u6700\u597d\u7684\u8bcd\u987a\u5e8f\u3002\u4e3a\u6b64\uff0c\u6a21\u578b\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5355\u8bcd\u6392\u5e8f\u6216\u5355\u8bcd\u9009\u62e9\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002\u5b83\u5c06\u901a\u8fc7\u4e00\u4e2a\u6982\u7387\u51fd\u6570\u8fd0\u884c\u6240\u6709\u5355\u8bcd\u5e8f\u5217\u5019\u9009\u9879\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5019\u9009\u9879\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u6700\u9ad8\u5f97\u5206\u7684\u5e8f\u5217\u5c31\u662f\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u76f8\u6bd4 small is the cat\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 the cat is small \u66f4\u9ad8\u7684\u5f97\u5206\uff1b\u76f8\u6bd4 walking house after school\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 walking home after school \u66f4\u9ad8\u7684\u5f97\u5206\u3002 1.2 n-gram Language Models \u4e3a\u4e86\u8ba1\u7b97\u8fd9\u4e9b\u6982\u7387\uff0c\u6bcf\u4e2a n-gram \u7684\u8ba1\u6570\u5c06\u4e0e\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u4e2a\u79f0\u4e3a n-gram \u8bed\u8a00\u6a21\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9 bi-gram \u6a21\u578b\uff0c\u6bcf\u4e00\u4e2a bi-gram \u7684\u9891\u7387\uff0c\u901a\u8fc7\u5c06\u5355\u8bcd\u4e0e\u5176\u524d\u4e00\u4e2a\u5355\u8bcd\u76f8\u7ed3\u5408\u8fdb\u884c\u8ba1\u7b97\uff0c\u7136\u540e\u9664\u4ee5\u5bf9\u5e94\u7684 uni-gram \u7684\u9891\u7387\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u516c\u5f0f\u5c55\u793a\u4e86 bi-gram \u6a21\u578b\u548c tri-gram \u6a21\u578b\u7684\u533a\u522b\u3002 \\[ \\begin{aligned} p\\left(w_{2} | w_{1}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}\\right)}{\\operatorname{count}\\left(w_{1}\\right)} \\\\ p\\left(w_{3} | w_{1}, w_{2}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}, w_{3}\\right)}{\\operatorname{count}\\left(w_{1}, w_{2}\\right)} \\end{aligned} \\] \u4e0a\u5f0f tri-gram \u6a21\u578b\u7684\u5173\u7cfb\u4e3b\u8981\u662f\u57fa\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u5373\u524dn\u4e2a\u5355\u8bcd)\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e00\u822c n \u7684\u53d6\u503c\u4e3a\u591a\u5927\u624d\u597d\u5462\uff1f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u8fde\u7eed\u7684 n \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3\u53ef\u80fd\u4e0d\u8db3\u4ee5\u6355\u83b7\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u53e5\u5b50\uff08\u7c7b\u4f3c\u5b8c\u5f62\u586b\u7a7a\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff09 \u201cAsthe proctor started the clock, the students opened their ____\u201d\u3002\u5982\u679c\u7a97\u53e3\u53ea\u662f\u57fa\u4e8e\u524d\u9762\u7684\u4e09\u4e2a\u5355\u8bcd\u201cthe students opened their\u201d\uff0c\u90a3\u4e48\u6025\u4e8e\u8fd9\u4e9b\u8bed\u6599\u8ba1\u7b97\u7684\u4e0b\u5212\u7ebf\u4e2d\u6700\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u5c31\u662f\u4e3a\u201cbooks\u201d\u2014\u2014\u4f46\u662f\u5982\u679c n \u8db3\u591f\u5927\uff0c\u80fd\u5305\u62ec\u5168\u90e8\u7684\u4e0a\u4e0b\u6587\uff0c\u90a3\u4e48\u4e0b\u5212\u7ebf\u4e2d\u6700\u4f18\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u662f\u201cexam\u201d\u3002 \u8fd9\u5c31\u5f15\u51fa\u4e86 n-gram \u8bed\u8a00\u6a21\u578b\u7684\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a\u7a00\u758f\u6027\u548c\u5b58\u50a8\u3002 Sparsity problems with n-gram Language models n-gram \u8bed\u8a00\u6a21\u578b\u7684\u95ee\u9898\u6e90\u4e8e\u4e24\u4e2a\u95ee\u9898\u3002 \u9996\u5148\uff0c\u6ce8\u610f\u516c\u5f0f\u4e2d\u7684\u5206\u5b50\u3002\u5982\u679c \\(w_1,w_2.w_3\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c31\u662f 0\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u8ba1\u6570\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u5f88\u5c0f\u7684 \\(\\delta\\) \uff0c\u8fd9\u5c31\u662f\u5e73\u6ed1\u64cd\u4f5c\u3002 \u7136\u540e\uff0c\u8003\u8651\u516c\u5f0f\u4e2d\u7684\u5206\u6bcd\u3002 \u5982\u679c \\(w_1,w_2\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c06\u4f1a\u65e0\u6cd5\u8ba1\u7b97\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5\u53ea\u662f\u5355\u72ec\u8003\u8651 \\(w_2\\) \uff0c\u8fd9\u5c31\u662f\u201cbackoff\u201d\u64cd\u4f5c\u3002 \u589e\u52a0 n \u4f1a\u8ba9\u7a00\u758f\u95ee\u9898\u66f4\u52a0\u4e25\u91cd\uff0c\u6240\u4ee5\u4e00\u822c \\(n \\leq 5\\) \u3002 Storage problems with n-gram Language models \u6211\u4eec\u77e5\u9053\u9700\u8981\u5b58\u50a8\u5728\u8bed\u6599\u5e93\u4e2d\u770b\u5230\u7684\u6240\u6709 n-gram \u7684\u7edf\u8ba1\u6570\u3002\u968f\u7740 n \u7684\u589e\u52a0(\u6216\u8bed\u6599\u5e93\u5927\u5c0f\u7684\u589e\u52a0)\uff0c\u6a21\u578b\u7684\u5927\u5c0f\u4e5f\u4f1a\u589e\u52a0\u3002 1.3 Window-based Neural Language Model Bengio \u7684\u8bba\u6587\u300aA Neural Probabilistic Language Model\u300b\u4e2d\u9996\u6b21\u89e3\u51b3\u4e86\u4e0a\u9762\u6240\u8bf4\u7684\u201c\u7ef4\u5ea6\u707e\u96be\u201d\uff0c\u8fd9\u7bc7\u8bba\u6587\u63d0\u51fa\u4e00\u4e2a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5927\u89c4\u6a21\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e2a\u6a21\u578b\u80fd\u591f\u901a\u8fc7\u5b66\u4e60\u5355\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ee5\u53ca\u7528\u8fd9\u4e9b\u8868\u793a\u6765\u8868\u793a\u5355\u8bcd\u7684\u6982\u7387\u51fd\u6570\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u5bf9\u5e94\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u8f93\u5165\u5411\u91cf\u5728\u9690\u85cf\u5c42\u548c\u8f93\u51fa\u5c42\u4e2d\u90fd\u88ab\u4f7f\u7528\u3002 \u4e0b\u9762\u516c\u5f0f\u5c55\u793a\u4e86\u7531\u6807\u51c6 tanh \u51fd\u6570\uff08\u5373\u9690\u85cf\u5c42\uff09\u7ec4\u6210\u7684 softmax \u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u7ebf\u6027\u51fd\u6570 \\(W^{(3)} x+b^{(3)}\\) \uff0c\u6355\u83b7\u6240\u6709\u524d\u9762 n \u4e2a\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\[ \\hat{y}=\\operatorname{softmax}\\left(W^{(2)} \\tanh \\left(W^{(1)}x+b^{(1)}\\right)+W^{(3)} x+b^{(3)}\\right) \\] \u6ce8\u610f\u6743\u91cd\u77e9\u9635 \\(W^{(1)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\u4e0a\uff08\u4e0a\u56fe\u4e2d\u7684\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\uff0c \\(W^{(2)}\\) \u662f\u5e94\u7528\u5728\u9690\u85cf\u5c42\uff08\u4e5f\u662f\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\u548c \\(W^{(3)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\uff08\u7eff\u8272\u865a\u7ebf\u7bad\u5934\uff09\u3002 \u8fd9\u4e2a\u6a21\u578b\u7684\u7b80\u5316\u7248\u672c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u84dd\u8272\u7684\u5c42\u8868\u793a\u8f93\u5165\u5355\u8bcd\u7684 embedding \u62fc\u63a5\uff1a \\(e=\\left[e^{(1)} ; e^{(2)} ; e^{(3)} ; e^{(4)}\\right]\\) \uff0c\u7ea2\u8272\u7684\u5c42\u8868\u793a\u9690\u85cf\u5c42\uff1a \\(\\boldsymbol{h}=f\\left(\\boldsymbol{W} e+\\boldsymbol{b}_{1}\\right)\\) \uff0c\u7eff\u8272\u7684\u8f93\u51fa\u5206\u5e03\u662f\u5bf9\u8bcd\u8868\u7684\u4e00\u4e2a softmax \u6982\u7387\u5206\u5e03\uff1a \\(\\hat{y}=\\operatorname{softmax}\\left(U h+b_{2}\\right)\\) \u3002 2 Recurrent Neural Networks (RNN) \u00b6 \u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u53ea\u80fd\u4ee5\u6709\u9650\u7a97\u53e3\u5927\u5c0f\u7684\u524d n \u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\uff0c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0e\u5176\u4e0d\u540c\uff0cRNN \u6709\u80fd\u529b\u4ee5\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u524d\u9762\u7684\u5355\u8bcd\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\u3002 \u4e0b\u56fe\u5c55\u793a\u7684 RNN \u7684\u67b6\u6784\uff0c\u5176\u4e2d\u77e9\u5f62\u6846\u662f\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u4e00\u4e2a\u9690\u85cf\u5c42 t\u3002 \u6bcf\u4e2a\u8fd9\u6837\u7684\u9690\u85cf\u5c42\u90fd\u6709\u82e5\u5e72\u4e2a\u795e\u7ecf\u5143\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u5bf9\u8f93\u5165\u5411\u91cf\u7528\u4e00\u4e2a\u7ebf\u6027\u77e9\u9635\u8fd0\u7b97\u7136\u540e\u901a\u8fc7\u975e\u7ebf\u6027\u53d8\u5316\uff08\u4f8b\u5982 tanh \u51fd\u6570\uff09\u5f97\u5230\u8f93\u51fa\u3002\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u9690\u85cf\u5c42\u90fd\u6709\u4e24\u4e2a\u8f93\u5165\uff1a\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \uff0c\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u901a\u8fc7\u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hh)}\\) \u76f8\u4e58\u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hx)}\\) \u76f8\u4e58\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_t\\) \uff0c\u7136\u540e\u518d\u5c06 \\(h_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(S)}\\) \u76f8\u4e58\uff0c\u63a5\u7740\u5bf9\u6574\u4e2a\u8bcd\u8868\u901a\u8fc7 softmax \u8ba1\u7b97\u5f97\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u9884\u6d4b\u7ed3\u679c \\(\\hat y\\) \uff0c\u5982\u4e0b\u9762\u516c\u5f0f\u6240\u793a\uff1a \\[ \\begin{aligned} h_{t} &=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{[t]}\\right) \\\\ \\hat{y} &=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right) \\end{aligned} \\] \u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u662f\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd \\(W^{(hh)}\\) \u548c \\(W^{(hx)}\\) \u3002\u8fd9\u6837\u6a21\u578b\u9700\u8981\u5b66\u4e60\u7684\u53c2\u6570\u5c31\u53d8\u5c11\u4e86\uff0c\u8fd9\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6\u65e0\u5173\u2014\u2014\u8fd9\u4ece\u800c\u89e3\u51b3\u4e86\u7ef4\u5ea6\u707e\u96be\u3002 \u4ee5\u4e0b\u662f\u7f51\u7edc\u4e2d\u6bcf\u4e2a\u53c2\u6570\u76f8\u5173\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \\(x_{1}, \\dots, x_{t-1}, x_{t}, x_{t+1}, \\dots x_{T}\\) \uff1a\u542b\u6709 T \u4e2a\u5355\u8bcd\u7684\u8bed\u6599\u5e93\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \\(h_{t}=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)\\) \uff1a\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa\u7279\u5f81\u7684\u8ba1\u7b97\u5173\u7cfb \\(x_{t} \\in \\mathbb{R}^{d}\\) \uff1a\u5728\u65f6\u95f4\u6b65 t \u7684\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\(W^{h x} \\in \\mathbb{R}^{D_{h} \\times d}\\) \uff1a\u8f93\u5165\u8bcd\u5411\u91cf \\(x_t\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(W^{h h} \\in \\mathbb{R}^{D_{h} \\times D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa \\(h_{t-1}\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(h_{t-1} \\in \\mathbb{R}^{D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65 t-1 \u7684\u975e\u7ebf\u6027\u51fd\u6570\u8f93\u51fa\u3002 \\(h_{0} \\in \\mathbb{R}^{D_{h}}\\) \u662f\u5728\u65f6\u95f4\u6b65 t=0 \u7684\u9690\u85cf\u5c42\u7684\u4e00\u4e2a\u521d\u59cb\u5316\u5411\u91cf\u3002 \\(\\sigma\\) \uff1a\u975e\u7ebf\u6027\u51fd\u6570\uff08\u8fd9\u91cc\u662f sigmoid \u51fd\u6570\uff09\u3002 \\(\\hat{y}=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right)\\) \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\u8f93\u51fa\u3002\u672c\u8d28\u4e0a\uff0c \\(\\hat y\\) \u662f\u7ed9\u5b9a\u6587\u6863\u4e0a\u4e0b\u6587\u5206\u6570\uff08\u4f8b\u5982 \\(h_{t-1}\\) \uff09\u548c\u6700\u540e\u89c2\u6d4b\u7684\u8bcd\u5411\u91cf \\(x_t\\) \uff0c\u5bf9\u4e00\u4e2a\u51fa\u73b0\u5355\u8bcd\u7684\u9884\u6d4b\u3002\u8fd9\u91cc\uff0c \\(W^{(S)} \\in \\mathbb{R}^{|V| \\times D_{h}}\\) \uff0c \\(\\hat{y} \\in \\mathbb{R}^{|V|}\\) \uff0c\u5176\u4e2d \\(|V|\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002 \u4e00\u4e2a RNN \u8bed\u8a00\u6a21\u578b\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\u3002\u4e0b\u56fe\u4e2d\u7684\u7b26\u53f7\u6709\u4e00\u4e9b\u7684\u4e0d\u540c\uff1a \\(W_h\\) \u7b49\u540c\u4e8e \\(W^{(hh)}\\) \uff0c \\(W_e\\) \u7b49\u540c\u4e8e \\(W^{(hx)}\\) \uff0c \\(U\\) \u7b49\u540c\u4e8e \\(W^{(S)}\\) \u3002 \\(E\\) \u8868\u793a\u5355\u8bcd\u8f93\u5165 \\(x^{(t)}\\) \u8f6c\u5316\u4e3a \\(e^{(t)}\\) \u3002 \u5728 RNN \u4e2d\u5e38\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u5728\u4e4b\u524d\u4ecb\u7ecd\u8fc7\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002\u4e0b\u9762\u7684\u516c\u5f0f\u662f\u8fd9\u4e2a\u51fd\u6570\u5728\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6c42\u548c\u3002\u6700\u540e\u8ba1\u7b97\u8bcd\u8868\u4e2d\u7684 softmax \u8ba1\u7b97\u7ed3\u679c\u5c55\u793a\u4e86\u57fa\u4e8e\u524d\u9762\u6240\u6709\u7684\u5355\u8bcd\u5bf9\u8f93\u51fa\u5355\u8bcd \\(x^{(5)}\\) \u7684\u4e0d\u540c\u9009\u62e9\u7684\u6982\u7387\u5206\u5e03\u3002\u8fd9\u65f6\u7684\u8f93\u5165\u53ef\u4ee5\u6bd4 4 \u5230 5 \u4e2a\u5355\u8bcd\u66f4\u957f\u3002 2.1 RNN Loss and Perplexity RNN \u7684\u635f\u5931\u51fd\u6570\u4e00\u822c\u662f\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002 \\[ J^{(t)}(\\theta)=\\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] \u5728\u5927\u5c0f\u4e3a T \u7684\u8bed\u6599\u5e93\u4e0a\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \\[ J=-\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] 2.2 Advantages, Disadvantages and Applications of RNNs RNN \u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u5b83\u53ef\u4ee5\u5904\u7406\u4efb\u610f\u957f\u5ea6\u7684\u5e8f\u5217 \u5bf9\u66f4\u957f\u7684\u8f93\u5165\u5e8f\u5217\u4e0d\u4f1a\u589e\u52a0\u6a21\u578b\u7684\u53c2\u6570\u5927\u5c0f \u5bf9\u65f6\u95f4\u6b65 t \u7684\u8ba1\u7b97\u7406\u8bba\u4e0a\u53ef\u4ee5\u5229\u7528\u524d\u9762\u5f88\u591a\u65f6\u95f4\u6b65\u7684\u4fe1\u606f \u5bf9\u8f93\u5165\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709\u5bf9\u79f0\u6027 \u4f46\u662f RNN \u4e5f\u6709\u4ee5\u4e0b\u7f3a\u70b9\uff1a \u8ba1\u7b97\u901f\u5ea6\u5f88\u6162\u2014\u2014\u56e0\u4e3a\u5b83\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u9700\u8981\u4f9d\u8d56\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u6240\u4ee5\u4e0d\u80fd\u5e76\u884c\u5316 \u5728\u5b9e\u9645\u4e2d\u56e0\u4e3a\u68af\u5ea6\u6d88\u5931\u548c\u68af\u5ea6\u7206\u70b8\uff0c\u5f88\u96be\u5229\u7528\u5230\u524d\u9762\u65f6\u95f4\u6b65\u7684\u4fe1\u606f\u3002 \u8fd0\u884c\u4e00\u5c42 RNN \u6240\u9700\u7684\u5185\u5b58\u91cf\u4e0e\u8bed\u6599\u5e93\u4e2d\u7684\u5355\u8bcd\u6570\u6210\u6b63\u6bd4\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u53e5\u5b50\u662f\u4e3a\u4e00\u4e2a mini batch\uff0c\u90a3\u4e48\u4e00\u4e2a\u6709 k \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u5728\u5185\u5b58\u4e2d\u5c31\u4f1a\u5360\u7528 k \u4e2a\u8bcd\u5411\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u540c\u65f6\uff0cRNN \u5fc5\u987b\u7ef4\u6301\u4e24\u5bf9 \\(W\\) \u548c \\(b\\) \u77e9\u9635\u3002\u7136\u800c \\(W\\) \u7684\u53ef\u80fd\u662f\u975e\u5e38\u5927\u7684\uff0c\u5b83\u7684\u5927\u5c0f\u4e0d\u4f1a\u968f\u7740\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u800c\u53d8\u5316\uff08\u4e0e\u4f20\u7edf\u7684\u8bed\u8a00\u6a21\u578b\u4e0d\u4e00\u6837\uff09\u3002\u5bf9\u4e8e\u5177\u6709 1000 \u4e2a\u5faa\u73af\u5c42\u7684 RNN\uff0c\u77e9\u9635 \\(W\\) \u7684\u5927\u5c0f\u4e3a \\(1000 \\times 1000\\) \u800c\u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u65e0\u5173\u3002 RNN \u53ef\u4ee5\u5e94\u7528\u5728\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u6807\u6ce8\u4efb\u52a1\uff08\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff09\uff0c\u53e5\u5b50\u5206\u7c7b\uff08\u60c5\u611f\u5206\u7c7b\uff09\uff0c\u7f16\u7801\u6a21\u5757\uff08\u95ee\u7b54\u4efb\u52a1\uff0c\u673a\u5668\u7ffb\u8bd1\u548c\u5176\u4ed6\u5f88\u591a\u4efb\u52a1\uff09\u3002\u5728\u540e\u9762\u7684\u4e24\u4e2a\u4efb\u52a1\uff0c\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u5bf9\u53e5\u5b50\u7684\u8868\u793a\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u91c7\u7528\u8be5\u53e5\u5b50\u4e2d\u65f6\u95f4\u6b65\u957f\u7684\u6240\u6709\u9690\u85cf\u72b6\u6001\u7684 \\(element-wise\\) \u7684\u6700\u5927\u503c\u6216\u5e73\u5747\u503c\u6765\u83b7\u5f97\u3002 \u4e0b\u56fe\u662f\u4e00\u4e9b\u51fa\u7248\u7269\u4e2d\u5bf9 RNN \u6a21\u578b\u7684\u53e6\u5916\u4e00\u79cd\u8868\u793a\u3002\u5b83\u5c06 RNN \u7684\u6bcf\u4e2a\u9690\u5c42\u7528\u4e00\u4e2a\u73af\u6765\u8868\u793a\u3002 Vanishing gradient intuition \u5f53\u8fd9\u4e9b\u68af\u5ea6\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53cd\u5411\u4f20\u64ad\u7684\u8d8a\u6df1\u5165\uff0c\u68af\u5ea6\u4fe1\u53f7\u5c31\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f Vanishing gradient proof sketch $$ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W} {h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right) $$ \u56e0\u6b64\u901a\u8fc7\u94fe\u5f0f\u6cd5\u5219\u5f97\u5230\uff1a \\[ \\frac{\\partial \\boldsymbol{h}^{(t)}}{\\partial \\boldsymbol{h}^{(t-1)}}=\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right) \\boldsymbol{W}_{h} \\] \u8003\u8651\u7b2c i \u6b65\u4e0a\u7684\u635f\u5931\u68af\u5ea6 \\(J^{(i)}(\\theta)\\) \uff0c\u76f8\u5bf9\u4e8e\u7b2c j \u6b65\u4e0a\u7684\u9690\u85cf\u72b6\u6001 \\(\\boldsymbol{h}^{(j)}\\) \u5982\u679c\u6743\u91cd\u77e9\u9635 \\(W_h\\) \u5f88\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e00\u9879\u4e5f\u4f1a\u968f\u7740 i \u548c j \u7684\u8ddd\u79bb\u8d8a\u6765\u8d8a\u8fdc\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f \u8003\u8651\u77e9\u9635\u7684 L2 \u8303\u6570 \\[ \\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\right\\| \\leq\\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(i)}}\\right\\|\\left\\|\\boldsymbol{W}_{h}\\right\\|^{(i-j)} \\prod_{j<t \\leq i}\\left\\|\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right)\\right\\| \\] Pascanu et al \u8868\u660e\uff0c\u5982\u679c \\(W_h\\) \u7684 \u6700\u5927\u7279\u5f81\u503c < 1 \uff0c\u68af\u5ea6 \\(\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\|\\) \u5c06\u5448\u6307\u6570\u8870\u51cf \u8fd9\u91cc\u7684\u754c\u9650\u662f1\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f sigmoid \u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u8bc1\u660e\u5c06\u4e00\u4e2a \u6700\u5927\u7684\u7279\u5f81\u503c >1 \u4e0e \u68af\u5ea6\u7206\u70b8 \u8054\u7cfb\u8d77\u6765 Why is vanishing gradient a problem? \u6765\u81ea\u8fdc\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u4f1a\u4e22\u5931\uff0c\u56e0\u4e3a\u5b83\u6bd4\u6765\u81ea\u8fd1\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u5c0f\u5f97\u591a\u3002 \u56e0\u6b64\uff0c\u6a21\u578b\u6743\u91cd\u53ea\u4f1a\u6839\u636e\u8fd1\u671f\u6548\u5e94\u800c\u4e0d\u662f\u957f\u671f\u6548\u5e94\u8fdb\u884c\u66f4\u65b0\u3002 \u53e6\u4e00\u79cd\u89e3\u91ca \uff1a \u68af\u5ea6 \u53ef\u4ee5\u88ab\u770b\u4f5c\u662f \u8fc7\u53bb\u5bf9\u672a\u6765\u7684\u5f71\u54cd \u7684\u8861\u91cf\u6807\u51c6 \u5982\u679c\u68af\u5ea6\u5728\u8f83\u957f\u4e00\u6bb5\u8ddd\u79bb\u5185(\u4ece\u65f6\u95f4\u6b65 t \u5230 t+n )\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u5224\u65ad: \u5728\u6570\u636e\u4e2d\uff0c\u6b65\u9aa4 t \u548c t+n \u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb \u6211\u4eec\u7528 \u9519\u8bef\u7684\u53c2\u6570 \u6765\u6355\u83b7 t \u548c t+n \u4e4b\u95f4\u7684\u771f\u6b63\u4f9d\u8d56\u5173\u7cfb Effect of vanishing gradient on RNN-LM \u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u4e3a\u4e86\u4ece\u8fd9\u4e2a\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5b66\u4e60\uff0cRNN-LM\u9700\u8981\u5bf9\u7b2c7\u6b65\u7684\u201ctickets\u201d\u548c\u6700\u540e\u7684\u76ee\u6807\u5355\u8bcd\u201ctickets\u201d\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5efa\u6a21\u3002 \u4f46\u662f\u5982\u679c\u68af\u5ea6\u5f88\u5c0f\uff0c\u6a21\u578b\u5c31 \u4e0d\u80fd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb \u56e0\u6b64\u6a21\u578b\u65e0\u6cd5\u5728\u6d4b\u8bd5\u65f6 \u9884\u6d4b\u7c7b\u4f3c\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb Correct answer : The writer of the books is planning a sequel \u8bed\u6cd5\u8fd1\u56e0 \u987a\u5e8f\u8fd1\u56e0 \u7531\u4e8e\u68af\u5ea6\u7684\u6d88\u5931\uff0cRNN-LMs\u66f4\u5584\u4e8e\u4ece \u987a\u5e8f\u8fd1\u56e0 \u5b66\u4e60\u800c\u4e0d\u662f \u8bed\u6cd5\u8fd1\u56e0 \uff0c\u6240\u4ee5\u4ed6\u4eec\u72af\u8fd9\u79cd\u9519\u8bef\u7684\u9891\u7387\u6bd4\u6211\u4eec\u5e0c\u671b\u7684\u8981\u9ad8[Linzen et al . 2016] Why is exploding gradient a problem? \u5982\u679c\u68af\u5ea6\u8fc7\u5927\uff0c\u5219SGD\u66f4\u65b0\u6b65\u9aa4\u8fc7\u5927 \u8fd9\u53ef\u80fd\u5bfc\u81f4 \u9519\u8bef\u7684\u66f4\u65b0 \uff1a\u6211\u4eec\u66f4\u65b0\u7684\u592a\u591a\uff0c\u5bfc\u81f4\u9519\u8bef\u7684\u53c2\u6570\u914d\u7f6e(\u635f\u5931\u5f88\u5927) \u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7f51\u7edc\u4e2d\u7684 Inf \u6216 NaN (\u7136\u540e\u60a8\u5fc5\u987b\u4ece\u8f83\u65e9\u7684\u68c0\u67e5\u70b9\u91cd\u65b0\u542f\u52a8\u8bad\u7ec3) Gradient clipping: solution for exploding gradient \u68af\u5ea6\u88c1\u526a \uff1a\u5982\u679c\u68af\u5ea6\u7684\u8303\u6570\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\uff0c\u5728\u5e94\u7528SGD\u66f4\u65b0\u4e4b\u524d\u5c06\u5176\u7f29\u5c0f \u76f4\u89c9 \uff1a\u671d\u7740\u540c\u6837\u7684\u65b9\u5411\u8fc8\u51fa\u4e00\u6b65\uff0c\u4f46\u8981\u5c0f\u4e00\u70b9 \u8fd9\u663e\u793a\u4e86\u4e00\u4e2a\u7b80\u5355RNN\u7684\u635f\u5931\u9762(\u9690\u85cf\u5c42\u72b6\u6001\u662f\u4e00\u4e2a\u6807\u91cf\u4e0d\u662f\u4e00\u4e2a\u5411\u91cf) \u201c\u60ac\u5d16\u201d\u662f\u5371\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u6709\u9661\u5761 \u5728\u5de6\u8fb9\uff0c\u7531\u4e8e\u9661\u5761\uff0c\u68af\u5ea6\u4e0b\u964d\u6709\u4e24\u4e2a\u975e\u5e38\u5927\u7684\u6b65\u9aa4\uff0c\u5bfc\u81f4\u6500\u767b\u60ac\u5d16\u7136\u540e\u5411\u53f3\u5c04\u51fb(\u90fd\u662f\u80e1\u6d69\u7684\u66f4\u65b0) \u5728\u53f3\u8fb9\uff0c\u68af\u5ea6\u526a\u88c1\u51cf\u5c11\u4e86\u8fd9\u4e9b\u6b65\u9aa4\u7684\u5927\u5c0f,\u6240\u4ee5\u6548\u679c\u4e0d\u592a\u6fc0\u70c8 How to fix vanishing gradient problem? \u4e3b\u8981\u95ee\u9898\u662fRNN\u5f88\u96be\u5b66\u4e60\u5728\u591a\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u60c5\u51b5\u4e0b\u4fdd\u5b58\u4fe1\u606f \u5728\u666e\u901a\u7684RNN\u4e2d\uff0c\u9690\u85cf\u72b6\u6001\u4e0d\u65ad\u88ab\u91cd\u5199 \\[ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}\\right) \\] \u4e00\u4e2a\u5177\u6709\u72ec\u7acb\u8bb0\u5fc6\u7684RNN\u600e\u4e48\u6837\uff1f 3 Long Short-Term Memory (LSTM) \u00b6 Hochreiter\u548cSchmidhuber\u57281997\u5e74\u63d0\u51fa\u4e86\u4e00\u79cdRNN\uff0c\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002 \u5728\u7b2c t \u6b65\uff0c\u6709\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u4e00\u4e2a\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u90fd\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5355\u5143\u5b58\u50a8\u957f\u671f\u4fe1\u606f LSTM\u53ef\u4ee5\u4ece\u5355\u5143\u4e2d\u5220\u9664\u3001\u5199\u5165\u548c\u8bfb\u53d6\u4fe1\u606f \u4fe1\u606f\u88ab \u64e6\u9664 / \u5199\u5165 / \u8bfb\u53d6 \u7684\u9009\u62e9\u7531\u4e09\u4e2a\u5bf9\u5e94\u7684\u95e8\u63a7\u5236 \u95e8\u4e5f\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u95e8\u7684\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u6253\u5f00(1)\u3001\u5173\u95ed(0)\u6216\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4 \u95e8\u662f\u52a8\u6001\u7684\uff1a\u5b83\u4eec\u7684\u503c\u662f\u57fa\u4e8e\u5f53\u524d\u4e0a\u4e0b\u6587\u8ba1\u7b97\u7684 \u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u5165\u5e8f\u5217 \\(x^{(t)}\\) \uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u7684\u5e8f\u5217\u3002\u5728\u65f6\u95f4\u6b65 t \u65f6 \u9057\u5fd8\u95e8\uff1a\u63a7\u5236\u4e0a\u4e00\u4e2a\u5355\u5143\u72b6\u6001\u7684\u4fdd\u5b58\u4e0e\u9057\u5fd8 \u8f93\u5165\u95e8\uff1a\u63a7\u5236\u5199\u5165\u5355\u5143\u683c\u7684\u65b0\u5355\u5143\u5185\u5bb9\u7684\u54ea\u4e9b\u90e8\u5206 \u8f93\u51fa\u95e8\uff1a\u63a7\u5236\u5355\u5143\u7684\u54ea\u4e9b\u5185\u5bb9\u8f93\u51fa\u5230\u9690\u85cf\u72b6\u6001 \u65b0\u5355\u5143\u5185\u5bb9\uff1a\u8fd9\u662f\u8981\u5199\u5165\u5355\u5143\u7684\u65b0\u5185\u5bb9 \u5355\u5143\u72b6\u6001\uff1a\u5220\u9664(\u201c\u5fd8\u8bb0\u201d)\u4e0a\u6b21\u5355\u5143\u72b6\u6001\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u5e76\u5199\u5165(\u201c\u8f93\u5165\u201d)\u4e00\u4e9b\u65b0\u7684\u5355\u5143\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u4ece\u5355\u5143\u4e2d\u8bfb\u53d6(\u201coutput\u201d)\u4e00\u4e9b\u5185\u5bb9 Sigmoid\u51fd\u6570\uff1a\u6240\u6709\u7684\u95e8\u7684\u503c\u90fd\u57280\u52301\u4e4b\u95f4 \u901a\u8fc7\u9010\u5143\u7d20\u7684\u4e58\u79ef\u6765\u5e94\u7528\u95e8 \u8fd9\u4e9b\u662f\u957f\u5ea6\u76f8\u540c\u7684\u5411\u91cf \u4f60\u53ef\u4ee5\u628aLSTM\u65b9\u7a0b\u60f3\u8c61\u6210\u8fd9\u6837\uff1a How does LSTM solve vanishing gradients? RNN\u7684LSTM\u67b6\u6784\u66f4\u5bb9\u6613\u4fdd\u5b58\u8bb8\u591a\u65f6\u95f4\u6b65\u4e0a\u7684\u4fe1\u606f \u5982\u679c\u5fd8\u8bb0\u95e8\u8bbe\u7f6e\u4e3a\u8bb0\u5f97\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u90a3\u4e48\u5355\u5143\u4e2d\u7684\u4fe1\u606f\u88ab\u65e0\u9650\u5730\u4fdd\u5b58 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u666e\u901aRNN\u66f4\u96be\u5b66\u4e60\u91cd\u590d\u4f7f\u7528\u5e76\u4e14\u5728\u9690\u85cf\u72b6\u6001\u4e2d\u4fdd\u5b58\u4fe1\u606f\u7684\u77e9\u9635 \\(W_h\\) LSTM\u5e76\u4e0d\u4fdd\u8bc1\u6ca1\u6709\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\uff0c\u4f46\u5b83\u786e\u5b9e\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5bb9\u6613\u7684\u65b9\u6cd5\u6765\u5b66\u4e60\u8fdc\u7a0b\u4f9d\u8d56\u5173\u7cfb 4 Recap \u00b6 Long-Short-Term-Memories \u662f\u548c GRU \u6709\u4e00\u70b9\u4e0d\u540c\u7684\u53e6\u5916\u4e00\u79cd\u7c7b\u578b\u7684\u590d\u6742\u6fc0\u6d3b\u795e\u7ecf\u5143\u3002\u5b83\u7684\u4f5c\u7528\u4e0e GRU \u7c7b\u4f3c\uff0c\u4f46\u662f\u795e\u7ecf\u5143\u7684\u7ed3\u6784\u6709\u4e00\u70b9\u533a\u522b\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b LSTM \u795e\u7ecf\u5143\u7684\u6570\u5b66\u516c\u5f0f\uff0c\u7136\u540e\u518d\u6df1\u5165\u4e86\u89e3\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8bbe\u8ba1\u67b6\u6784\uff1a \\[ \\begin{aligned} {i_{t}} & {=\\sigma\\left(W^{(i)} x_{t}+U^{(i)} h_{t-1}\\right)} & {\\text { (Input gate) }} \\\\ {f_{t}} & {=\\sigma\\left(W^{(f)} x_{t}+U^{(f)} h_{t-1}\\right)} & {\\text { (Forget gate) }} \\\\ {o_{t}} & {=\\sigma\\left(W^{(o)} x_{t}+U^{(o)} h_{t-1}\\right)} & {\\text { (Output/Exposure gate) }} \\\\ {\\tilde{c}_{t}} & {=\\tanh \\left(W^{(c)} x_{t}+U^{(c)} h_{t-1}\\right)} & {\\text { (New memory cell) }} \\\\ {c_{t}} & {=f_{t} \\circ c_{t-1}+i_{t} \\circ \\tilde{c}_{t}} & {\\text { (Final memory cell) }} \\\\ {h_{t}} & {=o_{t} \\circ \\tanh \\left(c_{t}\\right)} \\end{aligned} \\] \u4e0b\u56fe\u662fLSTM\u7684\u8ba1\u7b97\u56fe\u793a \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u4e86\u89e3 LSTM \u7684\u67b6\u6784\u4ee5\u53ca\u8fd9\u4e2a\u67b6\u6784\u80cc\u540e\u7684\u610f\u4e49\uff1a New memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u662f\u7c7b\u4f3c\u4e8e GRU \u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u7684\u9636\u6bb5\u3002\u6211\u4eec\u57fa\u672c\u4e0a\u662f\u7528\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u751f\u6210\u4e00\u4e2a\u5305\u62ec\u65b0\u5355\u8bcd \\(x^{(t)}\\) \u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{c}_{t}\\) \u3002 Input Gate \uff1a\u6211\u4eec\u770b\u5230\u5728\u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u4e4b\u524d\uff0c\u65b0\u7684\u8bb0\u5fc6\u7684\u751f\u6210\u9636\u6bb5\u4e0d\u4f1a\u68c0\u67e5\u65b0\u5355\u8bcd\u662f\u5426\u91cd\u8981\u2014\u2014\u8fd9\u9700\u8981\u8f93\u5165\u95e8\u51fd\u6570\u6765\u505a\u8fd9\u4e2a\u5224\u65ad\u3002\u8f93\u5165\u95e8\u4f7f\u7528\u8f93\u5165\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u51b3\u5b9a\u8f93\u5165\u503c\u662f\u5426\u503c\u5f97\u4fdd\u5b58\uff0c\u4ece\u800c\u7528\u6765\u8fdb\u5165\u65b0\u5185\u5b58\u3002\u56e0\u6b64\uff0c\u5b83\u4ea7\u751f\u5b83\u4f5c\u4e3a\u8fd9\u4e2a\u4fe1\u606f\u7684\u6307\u793a\u5668\u3002 Forget Gate \uff1a\u8fd9\u4e2a\u95e8\u4e0e\u8f93\u5165\u95e8\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u4e0d\u786e\u5b9a\u8f93\u5165\u5355\u8bcd\u7684\u6709\u7528\u6027\u2014\u2014\u800c\u662f\u8bc4\u4f30\u8fc7\u53bb\u7684\u8bb0\u5fc6\u662f\u5426\u5bf9\u5f53\u524d\u8bb0\u5fc6\u7684\u8ba1\u7b97\u6709\u7528\u3002\u56e0\u6b64\uff0c\u9057\u5fd8\u95e8\u67e5\u770b\u8f93\u5165\u5355\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff0c\u5e76\u751f\u6210 \\(f_t\\) \u3002 Final memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u9996\u5148\u6839\u636e\u5fd8\u8bb0\u95e8 \\(f_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u5fd8\u8bb0\u8fc7\u53bb\u7684\u8bb0\u5fc6 \\(c_{t-1}\\) \u3002\u7c7b\u4f3c\u5730\uff0c\u6839\u636e\u8f93\u5165\u95e8 \\(i_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u8f93\u5165\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde c_t\\) \u3002\u7136\u540e\u5c06\u4e0a\u9762\u7684\u4e24\u4e2a\u7ed3\u679c\u76f8\u52a0\u751f\u6210\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u3002 Output/Exposure Gate \uff1a\u8fd9\u662f GRU \u4e2d\u6ca1\u6709\u660e\u786e\u5b58\u5728\u7684\u95e8\u3002\u8fd9\u4e2a\u95e8\u7684\u76ee\u7684\u662f\u4ece\u9690\u85cf\u72b6\u6001\u4e2d\u5206\u79bb\u6700\u7ec8\u7684\u8bb0\u5fc6\u3002\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u5305\u542b\u5f88\u591a\u4e0d\u9700\u8981\u5b58\u50a8\u5728\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f\u3002\u9690\u85cf\u72b6\u6001\u7528\u4e8e LSTM \u7684\u6bcf\u4e2a\u5355\u4e2a\u95e8\uff0c\u56e0\u6b64\uff0c\u8be5\u95e8\u662f\u8981\u8bc4\u4f30\u5173\u4e8e\u8bb0\u5fc6\u5355\u5143 \\(c_t\\) \u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u663e\u9732\u5728\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u4e2d\u3002\u7528\u4e8e\u8bc4\u4f30\u7684\u4fe1\u53f7\u662f \\(o_t\\) \uff0c\u7136\u540e\u4e0e \\(c_t\\) \u901a\u8fc7 \\(o_{t} \\circ \\tanh \\left(c_{t}\\right)\\) \u8fd0\u7b97\u5f97\u5230\u6700\u7ec8\u7684 \\(h_t\\) \u3002","title":"[Presentation]LSTM"},{"location":"%5BPresentation%5DLSTM/#1-language-models","text":"1.1 Introduction \u8bed\u8a00\u6a21\u578b\u8ba1\u7b97\u7279\u5b9a\u5e8f\u5217\u4e2d\u591a\u4e2a\u5355\u8bcd\u7684\u51fa\u73b0\u6982\u7387\u3002\u4e00\u4e2a m \u4e2a\u5355\u8bcd\u7684\u5e8f\u5217 \\(\\left\\{w_{1}, \\dots, w_{m}\\right\\}\\) \u7684\u6982\u7387\u5b9a\u4e49\u4e3a \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u3002\u5355\u8bcd \\(w_i\\) \u524d\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5355\u8bcd\uff0c\u5176\u7279\u6027\u4f1a\u6839\u636e\u5b83\u5728\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u800c\u6539\u53d8\uff0c \\(P\\left(w_{1}, \\dots, w_{m}\\right)\\) \u4e00\u822c\u53ea\u8003\u8651\u524d \\(n\\) \u4e2a\u5355\u8bcd\u800c\u4e0d\u662f\u8003\u8651\u5168\u90e8\u4e4b\u524d\u7684\u5355\u8bcd\u3002 \\[ P\\left(w_{1}, \\ldots, w_{m}\\right)=\\prod_{i=1}^{i=m} P\\left(w_{i} | w_{1}, \\ldots, w_{i-1}\\right) \\approx \\prod_{i=1}^{i=m} P\\left(w_{i} | w_{i-n}, \\ldots, w_{i-1}\\right) \\] \u4e0a\u9762\u7684\u516c\u5f0f\u5728\u8bed\u97f3\u8bc6\u522b\u548c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u5224\u65ad\u4e00\u4e2a\u8bcd\u5e8f\u5217\u662f\u5426\u4e3a\u4e00\u4e2a\u8f93\u5165\u53e5\u5b50\u7684\u51c6\u786e\u7ffb\u8bd1\u8d77\u5230\u4e86\u91cd\u8981\u7684\u4f5c\u7528\u3002\u5728\u73b0\u6709\u7684\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u4e2d\uff0c\u5bf9\u6bcf\u4e2a\u77ed\u8bed/\u53e5\u5b50\u7ffb\u8bd1\uff0c\u7cfb\u7edf\u751f\u6210\u4e00\u4e9b\u5019\u9009\u7684\u8bcd\u5e8f\u5217\uff08\u4f8b\u5982\uff0c{I have,I has,I had,me have,me had}\uff09\uff0c\u5e76\u5bf9\u5176\u8bc4\u5206\u4ee5\u786e\u5b9a\u6700\u53ef\u80fd\u7684\u7ffb\u8bd1\u5e8f\u5217\u3002 \u5728\u673a\u5668\u7ffb\u8bd1\u4e2d\uff0c\u5bf9\u4e00\u4e2a\u8f93\u5165\u77ed\u8bed\uff0c\u901a\u8fc7\u8bc4\u5224\u6bcf\u4e2a\u5019\u9009\u8f93\u51fa\u8bcd\u5e8f\u5217\u7684\u5f97\u5206\u7684\u9ad8\u4f4e\uff0c\u6765\u9009\u51fa\u6700\u597d\u7684\u8bcd\u987a\u5e8f\u3002\u4e3a\u6b64\uff0c\u6a21\u578b\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5355\u8bcd\u6392\u5e8f\u6216\u5355\u8bcd\u9009\u62e9\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002\u5b83\u5c06\u901a\u8fc7\u4e00\u4e2a\u6982\u7387\u51fd\u6570\u8fd0\u884c\u6240\u6709\u5355\u8bcd\u5e8f\u5217\u5019\u9009\u9879\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5019\u9009\u9879\u5206\u914d\u4e00\u4e2a\u5206\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u6700\u9ad8\u5f97\u5206\u7684\u5e8f\u5217\u5c31\u662f\u7ffb\u8bd1\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u76f8\u6bd4 small is the cat\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 the cat is small \u66f4\u9ad8\u7684\u5f97\u5206\uff1b\u76f8\u6bd4 walking house after school\uff0c\u7ffb\u8bd1\u7cfb\u7edf\u4f1a\u7ed9 walking home after school \u66f4\u9ad8\u7684\u5f97\u5206\u3002 1.2 n-gram Language Models \u4e3a\u4e86\u8ba1\u7b97\u8fd9\u4e9b\u6982\u7387\uff0c\u6bcf\u4e2a n-gram \u7684\u8ba1\u6570\u5c06\u4e0e\u6bcf\u4e2a\u5355\u8bcd\u7684\u9891\u7387\u8fdb\u884c\u6bd4\u8f83\uff0c\u8fd9\u4e2a\u79f0\u4e3a n-gram \u8bed\u8a00\u6a21\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9009\u62e9 bi-gram \u6a21\u578b\uff0c\u6bcf\u4e00\u4e2a bi-gram \u7684\u9891\u7387\uff0c\u901a\u8fc7\u5c06\u5355\u8bcd\u4e0e\u5176\u524d\u4e00\u4e2a\u5355\u8bcd\u76f8\u7ed3\u5408\u8fdb\u884c\u8ba1\u7b97\uff0c\u7136\u540e\u9664\u4ee5\u5bf9\u5e94\u7684 uni-gram \u7684\u9891\u7387\u3002\u4e0b\u9762\u7684\u4e24\u4e2a\u516c\u5f0f\u5c55\u793a\u4e86 bi-gram \u6a21\u578b\u548c tri-gram \u6a21\u578b\u7684\u533a\u522b\u3002 \\[ \\begin{aligned} p\\left(w_{2} | w_{1}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}\\right)}{\\operatorname{count}\\left(w_{1}\\right)} \\\\ p\\left(w_{3} | w_{1}, w_{2}\\right) &=\\frac{\\operatorname{count}\\left(w_{1}, w_{2}, w_{3}\\right)}{\\operatorname{count}\\left(w_{1}, w_{2}\\right)} \\end{aligned} \\] \u4e0a\u5f0f tri-gram \u6a21\u578b\u7684\u5173\u7cfb\u4e3b\u8981\u662f\u57fa\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3(\u5373\u524dn\u4e2a\u5355\u8bcd)\u9884\u6d4b\u4e0b\u4e00\u4e2a\u5355\u8bcd\u3002\u4e00\u822c n \u7684\u53d6\u503c\u4e3a\u591a\u5927\u624d\u597d\u5462\uff1f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u8fde\u7eed\u7684 n \u4e2a\u5355\u8bcd\u7684\u7a97\u53e3\u53ef\u80fd\u4e0d\u8db3\u4ee5\u6355\u83b7\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u8003\u8651\u53e5\u5b50\uff08\u7c7b\u4f3c\u5b8c\u5f62\u586b\u7a7a\uff0c\u9884\u6d4b\u4e0b\u4e00\u4e2a\u6700\u53ef\u80fd\u7684\u5355\u8bcd\uff09 \u201cAsthe proctor started the clock, the students opened their ____\u201d\u3002\u5982\u679c\u7a97\u53e3\u53ea\u662f\u57fa\u4e8e\u524d\u9762\u7684\u4e09\u4e2a\u5355\u8bcd\u201cthe students opened their\u201d\uff0c\u90a3\u4e48\u6025\u4e8e\u8fd9\u4e9b\u8bed\u6599\u8ba1\u7b97\u7684\u4e0b\u5212\u7ebf\u4e2d\u6700\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u5c31\u662f\u4e3a\u201cbooks\u201d\u2014\u2014\u4f46\u662f\u5982\u679c n \u8db3\u591f\u5927\uff0c\u80fd\u5305\u62ec\u5168\u90e8\u7684\u4e0a\u4e0b\u6587\uff0c\u90a3\u4e48\u4e0b\u5212\u7ebf\u4e2d\u6700\u4f18\u53ef\u80fd\u51fa\u73b0\u7684\u5355\u8bcd\u4f1a\u662f\u201cexam\u201d\u3002 \u8fd9\u5c31\u5f15\u51fa\u4e86 n-gram \u8bed\u8a00\u6a21\u578b\u7684\u4e24\u4e2a\u4e3b\u8981\u95ee\u9898\uff1a\u7a00\u758f\u6027\u548c\u5b58\u50a8\u3002 Sparsity problems with n-gram Language models n-gram \u8bed\u8a00\u6a21\u578b\u7684\u95ee\u9898\u6e90\u4e8e\u4e24\u4e2a\u95ee\u9898\u3002 \u9996\u5148\uff0c\u6ce8\u610f\u516c\u5f0f\u4e2d\u7684\u5206\u5b50\u3002\u5982\u679c \\(w_1,w_2.w_3\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c31\u662f 0\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u6bcf\u4e2a\u5355\u8bcd\u8ba1\u6570\u540e\u9762\u52a0\u4e0a\u4e00\u4e2a\u5f88\u5c0f\u7684 \\(\\delta\\) \uff0c\u8fd9\u5c31\u662f\u5e73\u6ed1\u64cd\u4f5c\u3002 \u7136\u540e\uff0c\u8003\u8651\u516c\u5f0f\u4e2d\u7684\u5206\u6bcd\u3002 \u5982\u679c \\(w_1,w_2\\) \u5728\u8bed\u6599\u4e2d\u4ece\u672a\u51fa\u73b0\u8fc7\uff0c\u90a3\u4e48 \\(w_3\\) \u7684\u6982\u7387\u5c06\u4f1a\u65e0\u6cd5\u8ba1\u7b97\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u91cc\u53ef\u4ee5\u53ea\u662f\u5355\u72ec\u8003\u8651 \\(w_2\\) \uff0c\u8fd9\u5c31\u662f\u201cbackoff\u201d\u64cd\u4f5c\u3002 \u589e\u52a0 n \u4f1a\u8ba9\u7a00\u758f\u95ee\u9898\u66f4\u52a0\u4e25\u91cd\uff0c\u6240\u4ee5\u4e00\u822c \\(n \\leq 5\\) \u3002 Storage problems with n-gram Language models \u6211\u4eec\u77e5\u9053\u9700\u8981\u5b58\u50a8\u5728\u8bed\u6599\u5e93\u4e2d\u770b\u5230\u7684\u6240\u6709 n-gram \u7684\u7edf\u8ba1\u6570\u3002\u968f\u7740 n \u7684\u589e\u52a0(\u6216\u8bed\u6599\u5e93\u5927\u5c0f\u7684\u589e\u52a0)\uff0c\u6a21\u578b\u7684\u5927\u5c0f\u4e5f\u4f1a\u589e\u52a0\u3002 1.3 Window-based Neural Language Model Bengio \u7684\u8bba\u6587\u300aA Neural Probabilistic Language Model\u300b\u4e2d\u9996\u6b21\u89e3\u51b3\u4e86\u4e0a\u9762\u6240\u8bf4\u7684\u201c\u7ef4\u5ea6\u707e\u96be\u201d\uff0c\u8fd9\u7bc7\u8bba\u6587\u63d0\u51fa\u4e00\u4e2a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5927\u89c4\u6a21\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u8fd9\u4e2a\u6a21\u578b\u80fd\u591f\u901a\u8fc7\u5b66\u4e60\u5355\u8bcd\u7684\u5206\u5e03\u5f0f\u8868\u793a\uff0c\u4ee5\u53ca\u7528\u8fd9\u4e9b\u8868\u793a\u6765\u8868\u793a\u5355\u8bcd\u7684\u6982\u7387\u51fd\u6570\u3002\u4e0b\u56fe\u5c55\u793a\u4e86\u5bf9\u5e94\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u8f93\u5165\u5411\u91cf\u5728\u9690\u85cf\u5c42\u548c\u8f93\u51fa\u5c42\u4e2d\u90fd\u88ab\u4f7f\u7528\u3002 \u4e0b\u9762\u516c\u5f0f\u5c55\u793a\u4e86\u7531\u6807\u51c6 tanh \u51fd\u6570\uff08\u5373\u9690\u85cf\u5c42\uff09\u7ec4\u6210\u7684 softmax \u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u7ebf\u6027\u51fd\u6570 \\(W^{(3)} x+b^{(3)}\\) \uff0c\u6355\u83b7\u6240\u6709\u524d\u9762 n \u4e2a\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\[ \\hat{y}=\\operatorname{softmax}\\left(W^{(2)} \\tanh \\left(W^{(1)}x+b^{(1)}\\right)+W^{(3)} x+b^{(3)}\\right) \\] \u6ce8\u610f\u6743\u91cd\u77e9\u9635 \\(W^{(1)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\u4e0a\uff08\u4e0a\u56fe\u4e2d\u7684\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\uff0c \\(W^{(2)}\\) \u662f\u5e94\u7528\u5728\u9690\u85cf\u5c42\uff08\u4e5f\u662f\u7eff\u8272\u5b9e\u7ebf\u7bad\u5934\uff09\u548c \\(W^{(3)}\\) \u662f\u5e94\u7528\u5728\u8bcd\u5411\u91cf\uff08\u7eff\u8272\u865a\u7ebf\u7bad\u5934\uff09\u3002 \u8fd9\u4e2a\u6a21\u578b\u7684\u7b80\u5316\u7248\u672c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u84dd\u8272\u7684\u5c42\u8868\u793a\u8f93\u5165\u5355\u8bcd\u7684 embedding \u62fc\u63a5\uff1a \\(e=\\left[e^{(1)} ; e^{(2)} ; e^{(3)} ; e^{(4)}\\right]\\) \uff0c\u7ea2\u8272\u7684\u5c42\u8868\u793a\u9690\u85cf\u5c42\uff1a \\(\\boldsymbol{h}=f\\left(\\boldsymbol{W} e+\\boldsymbol{b}_{1}\\right)\\) \uff0c\u7eff\u8272\u7684\u8f93\u51fa\u5206\u5e03\u662f\u5bf9\u8bcd\u8868\u7684\u4e00\u4e2a softmax \u6982\u7387\u5206\u5e03\uff1a \\(\\hat{y}=\\operatorname{softmax}\\left(U h+b_{2}\\right)\\) \u3002","title":"1 Language Models"},{"location":"%5BPresentation%5DLSTM/#2-recurrent-neural-networks-rnn","text":"\u4f20\u7edf\u7684\u7ffb\u8bd1\u6a21\u578b\u53ea\u80fd\u4ee5\u6709\u9650\u7a97\u53e3\u5927\u5c0f\u7684\u524d n \u4e2a\u5355\u8bcd\u4f5c\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\uff0c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u4e0e\u5176\u4e0d\u540c\uff0cRNN \u6709\u80fd\u529b\u4ee5\u8bed\u6599\u5e93\u4e2d\u6240\u6709\u524d\u9762\u7684\u5355\u8bcd\u4e3a\u6761\u4ef6\u8fdb\u884c\u8bed\u8a00\u6a21\u578b\u5efa\u6a21\u3002 \u4e0b\u56fe\u5c55\u793a\u7684 RNN \u7684\u67b6\u6784\uff0c\u5176\u4e2d\u77e9\u5f62\u6846\u662f\u5728\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u4e00\u4e2a\u9690\u85cf\u5c42 t\u3002 \u6bcf\u4e2a\u8fd9\u6837\u7684\u9690\u85cf\u5c42\u90fd\u6709\u82e5\u5e72\u4e2a\u795e\u7ecf\u5143\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u5bf9\u8f93\u5165\u5411\u91cf\u7528\u4e00\u4e2a\u7ebf\u6027\u77e9\u9635\u8fd0\u7b97\u7136\u540e\u901a\u8fc7\u975e\u7ebf\u6027\u53d8\u5316\uff08\u4f8b\u5982 tanh \u51fd\u6570\uff09\u5f97\u5230\u8f93\u51fa\u3002\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u9690\u85cf\u5c42\u90fd\u6709\u4e24\u4e2a\u8f93\u5165\uff1a\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \uff0c\u524d\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_{t-1}\\) \u901a\u8fc7\u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hh)}\\) \u76f8\u4e58\u548c\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u8f93\u5165 \\(x_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(hx)}\\) \u76f8\u4e58\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6b65\u7684\u9690\u85cf\u5c42 \\(h_t\\) \uff0c\u7136\u540e\u518d\u5c06 \\(h_t\\) \u548c\u6743\u91cd\u77e9\u9635 \\(W^{(S)}\\) \u76f8\u4e58\uff0c\u63a5\u7740\u5bf9\u6574\u4e2a\u8bcd\u8868\u901a\u8fc7 softmax \u8ba1\u7b97\u5f97\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u9884\u6d4b\u7ed3\u679c \\(\\hat y\\) \uff0c\u5982\u4e0b\u9762\u516c\u5f0f\u6240\u793a\uff1a \\[ \\begin{aligned} h_{t} &=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{[t]}\\right) \\\\ \\hat{y} &=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right) \\end{aligned} \\] \u6bcf\u4e2a\u795e\u7ecf\u5143\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u8fd9\u91cc\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u662f\u5728\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd \\(W^{(hh)}\\) \u548c \\(W^{(hx)}\\) \u3002\u8fd9\u6837\u6a21\u578b\u9700\u8981\u5b66\u4e60\u7684\u53c2\u6570\u5c31\u53d8\u5c11\u4e86\uff0c\u8fd9\u4e0e\u8f93\u5165\u5e8f\u5217\u7684\u957f\u5ea6\u65e0\u5173\u2014\u2014\u8fd9\u4ece\u800c\u89e3\u51b3\u4e86\u7ef4\u5ea6\u707e\u96be\u3002 \u4ee5\u4e0b\u662f\u7f51\u7edc\u4e2d\u6bcf\u4e2a\u53c2\u6570\u76f8\u5173\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \\(x_{1}, \\dots, x_{t-1}, x_{t}, x_{t+1}, \\dots x_{T}\\) \uff1a\u542b\u6709 T \u4e2a\u5355\u8bcd\u7684\u8bed\u6599\u5e93\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u3002 \\(h_{t}=\\sigma\\left(W^{(h h)} h_{t-1}+W^{(h x)} x_{t}\\right)\\) \uff1a\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u7684\u9690\u85cf\u5c42\u7684\u8f93\u51fa\u7279\u5f81\u7684\u8ba1\u7b97\u5173\u7cfb \\(x_{t} \\in \\mathbb{R}^{d}\\) \uff1a\u5728\u65f6\u95f4\u6b65 t \u7684\u8f93\u5165\u8bcd\u5411\u91cf\u3002 \\(W^{h x} \\in \\mathbb{R}^{D_{h} \\times d}\\) \uff1a\u8f93\u5165\u8bcd\u5411\u91cf \\(x_t\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(W^{h h} \\in \\mathbb{R}^{D_{h} \\times D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\u7684\u8f93\u51fa \\(h_{t-1}\\) \u5bf9\u5e94\u7684\u6743\u91cd\u77e9\u9635\u3002 \\(h_{t-1} \\in \\mathbb{R}^{D_{h}}\\) \uff1a\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65 t-1 \u7684\u975e\u7ebf\u6027\u51fd\u6570\u8f93\u51fa\u3002 \\(h_{0} \\in \\mathbb{R}^{D_{h}}\\) \u662f\u5728\u65f6\u95f4\u6b65 t=0 \u7684\u9690\u85cf\u5c42\u7684\u4e00\u4e2a\u521d\u59cb\u5316\u5411\u91cf\u3002 \\(\\sigma\\) \uff1a\u975e\u7ebf\u6027\u51fd\u6570\uff08\u8fd9\u91cc\u662f sigmoid \u51fd\u6570\uff09\u3002 \\(\\hat{y}=\\operatorname{softmax}\\left(W^{(S)} h_{t}\\right)\\) \uff1a\u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6982\u7387\u5206\u5e03\u8f93\u51fa\u3002\u672c\u8d28\u4e0a\uff0c \\(\\hat y\\) \u662f\u7ed9\u5b9a\u6587\u6863\u4e0a\u4e0b\u6587\u5206\u6570\uff08\u4f8b\u5982 \\(h_{t-1}\\) \uff09\u548c\u6700\u540e\u89c2\u6d4b\u7684\u8bcd\u5411\u91cf \\(x_t\\) \uff0c\u5bf9\u4e00\u4e2a\u51fa\u73b0\u5355\u8bcd\u7684\u9884\u6d4b\u3002\u8fd9\u91cc\uff0c \\(W^{(S)} \\in \\mathbb{R}^{|V| \\times D_{h}}\\) \uff0c \\(\\hat{y} \\in \\mathbb{R}^{|V|}\\) \uff0c\u5176\u4e2d \\(|V|\\) \u662f\u8bcd\u6c47\u8868\u7684\u5927\u5c0f\u3002 \u4e00\u4e2a RNN \u8bed\u8a00\u6a21\u578b\u7684\u4f8b\u5b50\u5982\u4e0b\u56fe\u6240\u793a\u3002\u4e0b\u56fe\u4e2d\u7684\u7b26\u53f7\u6709\u4e00\u4e9b\u7684\u4e0d\u540c\uff1a \\(W_h\\) \u7b49\u540c\u4e8e \\(W^{(hh)}\\) \uff0c \\(W_e\\) \u7b49\u540c\u4e8e \\(W^{(hx)}\\) \uff0c \\(U\\) \u7b49\u540c\u4e8e \\(W^{(S)}\\) \u3002 \\(E\\) \u8868\u793a\u5355\u8bcd\u8f93\u5165 \\(x^{(t)}\\) \u8f6c\u5316\u4e3a \\(e^{(t)}\\) \u3002 \u5728 RNN \u4e2d\u5e38\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u5728\u4e4b\u524d\u4ecb\u7ecd\u8fc7\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002\u4e0b\u9762\u7684\u516c\u5f0f\u662f\u8fd9\u4e2a\u51fd\u6570\u5728\u65f6\u95f4\u6b65 t \u5168\u90e8\u5355\u8bcd\u7684\u6c42\u548c\u3002\u6700\u540e\u8ba1\u7b97\u8bcd\u8868\u4e2d\u7684 softmax \u8ba1\u7b97\u7ed3\u679c\u5c55\u793a\u4e86\u57fa\u4e8e\u524d\u9762\u6240\u6709\u7684\u5355\u8bcd\u5bf9\u8f93\u51fa\u5355\u8bcd \\(x^{(5)}\\) \u7684\u4e0d\u540c\u9009\u62e9\u7684\u6982\u7387\u5206\u5e03\u3002\u8fd9\u65f6\u7684\u8f93\u5165\u53ef\u4ee5\u6bd4 4 \u5230 5 \u4e2a\u5355\u8bcd\u66f4\u957f\u3002 2.1 RNN Loss and Perplexity RNN \u7684\u635f\u5931\u51fd\u6570\u4e00\u822c\u662f\u4ea4\u53c9\u71b5\u8bef\u5dee\u3002 \\[ J^{(t)}(\\theta)=\\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] \u5728\u5927\u5c0f\u4e3a T \u7684\u8bed\u6599\u5e93\u4e0a\u7684\u4ea4\u53c9\u71b5\u8bef\u5dee\u7684\u8ba1\u7b97\u5982\u4e0b\uff1a \\[ J=-\\frac{1}{T} \\sum_{t=1}^{T} J^{(t)}(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{j=1}^{|V|} y_{t, j} \\times \\log \\left(\\hat{y}_{t, j}\\right) \\] 2.2 Advantages, Disadvantages and Applications of RNNs RNN \u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a \u5b83\u53ef\u4ee5\u5904\u7406\u4efb\u610f\u957f\u5ea6\u7684\u5e8f\u5217 \u5bf9\u66f4\u957f\u7684\u8f93\u5165\u5e8f\u5217\u4e0d\u4f1a\u589e\u52a0\u6a21\u578b\u7684\u53c2\u6570\u5927\u5c0f \u5bf9\u65f6\u95f4\u6b65 t \u7684\u8ba1\u7b97\u7406\u8bba\u4e0a\u53ef\u4ee5\u5229\u7528\u524d\u9762\u5f88\u591a\u65f6\u95f4\u6b65\u7684\u4fe1\u606f \u5bf9\u8f93\u5165\u7684\u6bcf\u4e2a\u65f6\u95f4\u6b65\u90fd\u5e94\u7528\u76f8\u540c\u7684\u6743\u91cd\uff0c\u56e0\u6b64\u5728\u5904\u7406\u8f93\u5165\u65f6\u5177\u6709\u5bf9\u79f0\u6027 \u4f46\u662f RNN \u4e5f\u6709\u4ee5\u4e0b\u7f3a\u70b9\uff1a \u8ba1\u7b97\u901f\u5ea6\u5f88\u6162\u2014\u2014\u56e0\u4e3a\u5b83\u6bcf\u4e00\u4e2a\u65f6\u95f4\u6b65\u9700\u8981\u4f9d\u8d56\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6b65\uff0c\u6240\u4ee5\u4e0d\u80fd\u5e76\u884c\u5316 \u5728\u5b9e\u9645\u4e2d\u56e0\u4e3a\u68af\u5ea6\u6d88\u5931\u548c\u68af\u5ea6\u7206\u70b8\uff0c\u5f88\u96be\u5229\u7528\u5230\u524d\u9762\u65f6\u95f4\u6b65\u7684\u4fe1\u606f\u3002 \u8fd0\u884c\u4e00\u5c42 RNN \u6240\u9700\u7684\u5185\u5b58\u91cf\u4e0e\u8bed\u6599\u5e93\u4e2d\u7684\u5355\u8bcd\u6570\u6210\u6b63\u6bd4\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u53e5\u5b50\u662f\u4e3a\u4e00\u4e2a mini batch\uff0c\u90a3\u4e48\u4e00\u4e2a\u6709 k \u4e2a\u5355\u8bcd\u7684\u53e5\u5b50\u5728\u5185\u5b58\u4e2d\u5c31\u4f1a\u5360\u7528 k \u4e2a\u8bcd\u5411\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u3002\u540c\u65f6\uff0cRNN \u5fc5\u987b\u7ef4\u6301\u4e24\u5bf9 \\(W\\) \u548c \\(b\\) \u77e9\u9635\u3002\u7136\u800c \\(W\\) \u7684\u53ef\u80fd\u662f\u975e\u5e38\u5927\u7684\uff0c\u5b83\u7684\u5927\u5c0f\u4e0d\u4f1a\u968f\u7740\u8bed\u6599\u5e93\u7684\u5927\u5c0f\u800c\u53d8\u5316\uff08\u4e0e\u4f20\u7edf\u7684\u8bed\u8a00\u6a21\u578b\u4e0d\u4e00\u6837\uff09\u3002\u5bf9\u4e8e\u5177\u6709 1000 \u4e2a\u5faa\u73af\u5c42\u7684 RNN\uff0c\u77e9\u9635 \\(W\\) \u7684\u5927\u5c0f\u4e3a \\(1000 \\times 1000\\) \u800c\u4e0e\u8bed\u6599\u5e93\u5927\u5c0f\u65e0\u5173\u3002 RNN \u53ef\u4ee5\u5e94\u7528\u5728\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u6807\u6ce8\u4efb\u52a1\uff08\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff09\uff0c\u53e5\u5b50\u5206\u7c7b\uff08\u60c5\u611f\u5206\u7c7b\uff09\uff0c\u7f16\u7801\u6a21\u5757\uff08\u95ee\u7b54\u4efb\u52a1\uff0c\u673a\u5668\u7ffb\u8bd1\u548c\u5176\u4ed6\u5f88\u591a\u4efb\u52a1\uff09\u3002\u5728\u540e\u9762\u7684\u4e24\u4e2a\u4efb\u52a1\uff0c\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u5bf9\u53e5\u5b50\u7684\u8868\u793a\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u91c7\u7528\u8be5\u53e5\u5b50\u4e2d\u65f6\u95f4\u6b65\u957f\u7684\u6240\u6709\u9690\u85cf\u72b6\u6001\u7684 \\(element-wise\\) \u7684\u6700\u5927\u503c\u6216\u5e73\u5747\u503c\u6765\u83b7\u5f97\u3002 \u4e0b\u56fe\u662f\u4e00\u4e9b\u51fa\u7248\u7269\u4e2d\u5bf9 RNN \u6a21\u578b\u7684\u53e6\u5916\u4e00\u79cd\u8868\u793a\u3002\u5b83\u5c06 RNN \u7684\u6bcf\u4e2a\u9690\u5c42\u7528\u4e00\u4e2a\u73af\u6765\u8868\u793a\u3002 Vanishing gradient intuition \u5f53\u8fd9\u4e9b\u68af\u5ea6\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53cd\u5411\u4f20\u64ad\u7684\u8d8a\u6df1\u5165\uff0c\u68af\u5ea6\u4fe1\u53f7\u5c31\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f Vanishing gradient proof sketch $$ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W} {h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right) $$ \u56e0\u6b64\u901a\u8fc7\u94fe\u5f0f\u6cd5\u5219\u5f97\u5230\uff1a \\[ \\frac{\\partial \\boldsymbol{h}^{(t)}}{\\partial \\boldsymbol{h}^{(t-1)}}=\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right) \\boldsymbol{W}_{h} \\] \u8003\u8651\u7b2c i \u6b65\u4e0a\u7684\u635f\u5931\u68af\u5ea6 \\(J^{(i)}(\\theta)\\) \uff0c\u76f8\u5bf9\u4e8e\u7b2c j \u6b65\u4e0a\u7684\u9690\u85cf\u72b6\u6001 \\(\\boldsymbol{h}^{(j)}\\) \u5982\u679c\u6743\u91cd\u77e9\u9635 \\(W_h\\) \u5f88\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e00\u9879\u4e5f\u4f1a\u968f\u7740 i \u548c j \u7684\u8ddd\u79bb\u8d8a\u6765\u8d8a\u8fdc\u800c\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f \u8003\u8651\u77e9\u9635\u7684 L2 \u8303\u6570 \\[ \\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\right\\| \\leq\\left\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(i)}}\\right\\|\\left\\|\\boldsymbol{W}_{h}\\right\\|^{(i-j)} \\prod_{j<t \\leq i}\\left\\|\\operatorname{diag}\\left(\\sigma^{\\prime}\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}_{1}\\right)\\right)\\right\\| \\] Pascanu et al \u8868\u660e\uff0c\u5982\u679c \\(W_h\\) \u7684 \u6700\u5927\u7279\u5f81\u503c < 1 \uff0c\u68af\u5ea6 \\(\\|\\frac{\\partial J^{(i)}(\\theta)}{\\partial \\boldsymbol{h}^{(j)}}\\|\\) \u5c06\u5448\u6307\u6570\u8870\u51cf \u8fd9\u91cc\u7684\u754c\u9650\u662f1\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u975e\u7ebf\u6027\u51fd\u6570\u662f sigmoid \u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u8bc1\u660e\u5c06\u4e00\u4e2a \u6700\u5927\u7684\u7279\u5f81\u503c >1 \u4e0e \u68af\u5ea6\u7206\u70b8 \u8054\u7cfb\u8d77\u6765 Why is vanishing gradient a problem? \u6765\u81ea\u8fdc\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u4f1a\u4e22\u5931\uff0c\u56e0\u4e3a\u5b83\u6bd4\u6765\u81ea\u8fd1\u5904\u7684\u68af\u5ea6\u4fe1\u53f7\u5c0f\u5f97\u591a\u3002 \u56e0\u6b64\uff0c\u6a21\u578b\u6743\u91cd\u53ea\u4f1a\u6839\u636e\u8fd1\u671f\u6548\u5e94\u800c\u4e0d\u662f\u957f\u671f\u6548\u5e94\u8fdb\u884c\u66f4\u65b0\u3002 \u53e6\u4e00\u79cd\u89e3\u91ca \uff1a \u68af\u5ea6 \u53ef\u4ee5\u88ab\u770b\u4f5c\u662f \u8fc7\u53bb\u5bf9\u672a\u6765\u7684\u5f71\u54cd \u7684\u8861\u91cf\u6807\u51c6 \u5982\u679c\u68af\u5ea6\u5728\u8f83\u957f\u4e00\u6bb5\u8ddd\u79bb\u5185(\u4ece\u65f6\u95f4\u6b65 t \u5230 t+n )\u53d8\u5f97\u8d8a\u6765\u8d8a\u5c0f\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u5224\u65ad: \u5728\u6570\u636e\u4e2d\uff0c\u6b65\u9aa4 t \u548c t+n \u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb \u6211\u4eec\u7528 \u9519\u8bef\u7684\u53c2\u6570 \u6765\u6355\u83b7 t \u548c t+n \u4e4b\u95f4\u7684\u771f\u6b63\u4f9d\u8d56\u5173\u7cfb Effect of vanishing gradient on RNN-LM \u8bed\u8a00\u6a21\u578b\u4efb\u52a1 \u4e3a\u4e86\u4ece\u8fd9\u4e2a\u8bad\u7ec3\u793a\u4f8b\u4e2d\u5b66\u4e60\uff0cRNN-LM\u9700\u8981\u5bf9\u7b2c7\u6b65\u7684\u201ctickets\u201d\u548c\u6700\u540e\u7684\u76ee\u6807\u5355\u8bcd\u201ctickets\u201d\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5efa\u6a21\u3002 \u4f46\u662f\u5982\u679c\u68af\u5ea6\u5f88\u5c0f\uff0c\u6a21\u578b\u5c31 \u4e0d\u80fd\u5b66\u4e60\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb \u56e0\u6b64\u6a21\u578b\u65e0\u6cd5\u5728\u6d4b\u8bd5\u65f6 \u9884\u6d4b\u7c7b\u4f3c\u7684\u957f\u8ddd\u79bb\u4f9d\u8d56\u5173\u7cfb Correct answer : The writer of the books is planning a sequel \u8bed\u6cd5\u8fd1\u56e0 \u987a\u5e8f\u8fd1\u56e0 \u7531\u4e8e\u68af\u5ea6\u7684\u6d88\u5931\uff0cRNN-LMs\u66f4\u5584\u4e8e\u4ece \u987a\u5e8f\u8fd1\u56e0 \u5b66\u4e60\u800c\u4e0d\u662f \u8bed\u6cd5\u8fd1\u56e0 \uff0c\u6240\u4ee5\u4ed6\u4eec\u72af\u8fd9\u79cd\u9519\u8bef\u7684\u9891\u7387\u6bd4\u6211\u4eec\u5e0c\u671b\u7684\u8981\u9ad8[Linzen et al . 2016] Why is exploding gradient a problem? \u5982\u679c\u68af\u5ea6\u8fc7\u5927\uff0c\u5219SGD\u66f4\u65b0\u6b65\u9aa4\u8fc7\u5927 \u8fd9\u53ef\u80fd\u5bfc\u81f4 \u9519\u8bef\u7684\u66f4\u65b0 \uff1a\u6211\u4eec\u66f4\u65b0\u7684\u592a\u591a\uff0c\u5bfc\u81f4\u9519\u8bef\u7684\u53c2\u6570\u914d\u7f6e(\u635f\u5931\u5f88\u5927) \u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7f51\u7edc\u4e2d\u7684 Inf \u6216 NaN (\u7136\u540e\u60a8\u5fc5\u987b\u4ece\u8f83\u65e9\u7684\u68c0\u67e5\u70b9\u91cd\u65b0\u542f\u52a8\u8bad\u7ec3) Gradient clipping: solution for exploding gradient \u68af\u5ea6\u88c1\u526a \uff1a\u5982\u679c\u68af\u5ea6\u7684\u8303\u6570\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\uff0c\u5728\u5e94\u7528SGD\u66f4\u65b0\u4e4b\u524d\u5c06\u5176\u7f29\u5c0f \u76f4\u89c9 \uff1a\u671d\u7740\u540c\u6837\u7684\u65b9\u5411\u8fc8\u51fa\u4e00\u6b65\uff0c\u4f46\u8981\u5c0f\u4e00\u70b9 \u8fd9\u663e\u793a\u4e86\u4e00\u4e2a\u7b80\u5355RNN\u7684\u635f\u5931\u9762(\u9690\u85cf\u5c42\u72b6\u6001\u662f\u4e00\u4e2a\u6807\u91cf\u4e0d\u662f\u4e00\u4e2a\u5411\u91cf) \u201c\u60ac\u5d16\u201d\u662f\u5371\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u6709\u9661\u5761 \u5728\u5de6\u8fb9\uff0c\u7531\u4e8e\u9661\u5761\uff0c\u68af\u5ea6\u4e0b\u964d\u6709\u4e24\u4e2a\u975e\u5e38\u5927\u7684\u6b65\u9aa4\uff0c\u5bfc\u81f4\u6500\u767b\u60ac\u5d16\u7136\u540e\u5411\u53f3\u5c04\u51fb(\u90fd\u662f\u80e1\u6d69\u7684\u66f4\u65b0) \u5728\u53f3\u8fb9\uff0c\u68af\u5ea6\u526a\u88c1\u51cf\u5c11\u4e86\u8fd9\u4e9b\u6b65\u9aa4\u7684\u5927\u5c0f,\u6240\u4ee5\u6548\u679c\u4e0d\u592a\u6fc0\u70c8 How to fix vanishing gradient problem? \u4e3b\u8981\u95ee\u9898\u662fRNN\u5f88\u96be\u5b66\u4e60\u5728\u591a\u4e2a\u65f6\u95f4\u6b65\u957f\u7684\u60c5\u51b5\u4e0b\u4fdd\u5b58\u4fe1\u606f \u5728\u666e\u901a\u7684RNN\u4e2d\uff0c\u9690\u85cf\u72b6\u6001\u4e0d\u65ad\u88ab\u91cd\u5199 \\[ \\boldsymbol{h}^{(t)}=\\sigma\\left(\\boldsymbol{W}_{h} \\boldsymbol{h}^{(t-1)}+\\boldsymbol{W}_{x} \\boldsymbol{x}^{(t)}+\\boldsymbol{b}\\right) \\] \u4e00\u4e2a\u5177\u6709\u72ec\u7acb\u8bb0\u5fc6\u7684RNN\u600e\u4e48\u6837\uff1f","title":"2 Recurrent Neural Networks (RNN)"},{"location":"%5BPresentation%5DLSTM/#3-long-short-term-memory-lstm","text":"Hochreiter\u548cSchmidhuber\u57281997\u5e74\u63d0\u51fa\u4e86\u4e00\u79cdRNN\uff0c\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u6d88\u5931\u95ee\u9898\u3002 \u5728\u7b2c t \u6b65\uff0c\u6709\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u4e00\u4e2a\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u90fd\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5355\u5143\u5b58\u50a8\u957f\u671f\u4fe1\u606f LSTM\u53ef\u4ee5\u4ece\u5355\u5143\u4e2d\u5220\u9664\u3001\u5199\u5165\u548c\u8bfb\u53d6\u4fe1\u606f \u4fe1\u606f\u88ab \u64e6\u9664 / \u5199\u5165 / \u8bfb\u53d6 \u7684\u9009\u62e9\u7531\u4e09\u4e2a\u5bf9\u5e94\u7684\u95e8\u63a7\u5236 \u95e8\u4e5f\u662f\u957f\u5ea6\u4e3a n \u7684\u5411\u91cf \u5728\u6bcf\u4e2a\u65f6\u95f4\u6b65\u957f\u4e0a\uff0c\u95e8\u7684\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u6253\u5f00(1)\u3001\u5173\u95ed(0)\u6216\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4 \u95e8\u662f\u52a8\u6001\u7684\uff1a\u5b83\u4eec\u7684\u503c\u662f\u57fa\u4e8e\u5f53\u524d\u4e0a\u4e0b\u6587\u8ba1\u7b97\u7684 \u6211\u4eec\u6709\u4e00\u4e2a\u8f93\u5165\u5e8f\u5217 \\(x^{(t)}\\) \uff0c\u6211\u4eec\u5c06\u8ba1\u7b97\u4e00\u4e2a\u9690\u85cf\u72b6\u6001 \\(h^{(t)}\\) \u548c\u5355\u5143\u72b6\u6001 \\(c^{(t)}\\) \u7684\u5e8f\u5217\u3002\u5728\u65f6\u95f4\u6b65 t \u65f6 \u9057\u5fd8\u95e8\uff1a\u63a7\u5236\u4e0a\u4e00\u4e2a\u5355\u5143\u72b6\u6001\u7684\u4fdd\u5b58\u4e0e\u9057\u5fd8 \u8f93\u5165\u95e8\uff1a\u63a7\u5236\u5199\u5165\u5355\u5143\u683c\u7684\u65b0\u5355\u5143\u5185\u5bb9\u7684\u54ea\u4e9b\u90e8\u5206 \u8f93\u51fa\u95e8\uff1a\u63a7\u5236\u5355\u5143\u7684\u54ea\u4e9b\u5185\u5bb9\u8f93\u51fa\u5230\u9690\u85cf\u72b6\u6001 \u65b0\u5355\u5143\u5185\u5bb9\uff1a\u8fd9\u662f\u8981\u5199\u5165\u5355\u5143\u7684\u65b0\u5185\u5bb9 \u5355\u5143\u72b6\u6001\uff1a\u5220\u9664(\u201c\u5fd8\u8bb0\u201d)\u4e0a\u6b21\u5355\u5143\u72b6\u6001\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u5e76\u5199\u5165(\u201c\u8f93\u5165\u201d)\u4e00\u4e9b\u65b0\u7684\u5355\u5143\u5185\u5bb9 \u9690\u85cf\u72b6\u6001\uff1a\u4ece\u5355\u5143\u4e2d\u8bfb\u53d6(\u201coutput\u201d)\u4e00\u4e9b\u5185\u5bb9 Sigmoid\u51fd\u6570\uff1a\u6240\u6709\u7684\u95e8\u7684\u503c\u90fd\u57280\u52301\u4e4b\u95f4 \u901a\u8fc7\u9010\u5143\u7d20\u7684\u4e58\u79ef\u6765\u5e94\u7528\u95e8 \u8fd9\u4e9b\u662f\u957f\u5ea6\u76f8\u540c\u7684\u5411\u91cf \u4f60\u53ef\u4ee5\u628aLSTM\u65b9\u7a0b\u60f3\u8c61\u6210\u8fd9\u6837\uff1a How does LSTM solve vanishing gradients? RNN\u7684LSTM\u67b6\u6784\u66f4\u5bb9\u6613\u4fdd\u5b58\u8bb8\u591a\u65f6\u95f4\u6b65\u4e0a\u7684\u4fe1\u606f \u5982\u679c\u5fd8\u8bb0\u95e8\u8bbe\u7f6e\u4e3a\u8bb0\u5f97\u6bcf\u4e00\u65f6\u95f4\u6b65\u4e0a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u90a3\u4e48\u5355\u5143\u4e2d\u7684\u4fe1\u606f\u88ab\u65e0\u9650\u5730\u4fdd\u5b58 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u666e\u901aRNN\u66f4\u96be\u5b66\u4e60\u91cd\u590d\u4f7f\u7528\u5e76\u4e14\u5728\u9690\u85cf\u72b6\u6001\u4e2d\u4fdd\u5b58\u4fe1\u606f\u7684\u77e9\u9635 \\(W_h\\) LSTM\u5e76\u4e0d\u4fdd\u8bc1\u6ca1\u6709\u6d88\u5931/\u7206\u70b8\u68af\u5ea6\uff0c\u4f46\u5b83\u786e\u5b9e\u4e3a\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5bb9\u6613\u7684\u65b9\u6cd5\u6765\u5b66\u4e60\u8fdc\u7a0b\u4f9d\u8d56\u5173\u7cfb","title":"3 Long Short-Term Memory (LSTM)"},{"location":"%5BPresentation%5DLSTM/#4-recap","text":"Long-Short-Term-Memories \u662f\u548c GRU \u6709\u4e00\u70b9\u4e0d\u540c\u7684\u53e6\u5916\u4e00\u79cd\u7c7b\u578b\u7684\u590d\u6742\u6fc0\u6d3b\u795e\u7ecf\u5143\u3002\u5b83\u7684\u4f5c\u7528\u4e0e GRU \u7c7b\u4f3c\uff0c\u4f46\u662f\u795e\u7ecf\u5143\u7684\u7ed3\u6784\u6709\u4e00\u70b9\u533a\u522b\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u770b LSTM \u795e\u7ecf\u5143\u7684\u6570\u5b66\u516c\u5f0f\uff0c\u7136\u540e\u518d\u6df1\u5165\u4e86\u89e3\u8fd9\u4e2a\u795e\u7ecf\u5143\u7684\u8bbe\u8ba1\u67b6\u6784\uff1a \\[ \\begin{aligned} {i_{t}} & {=\\sigma\\left(W^{(i)} x_{t}+U^{(i)} h_{t-1}\\right)} & {\\text { (Input gate) }} \\\\ {f_{t}} & {=\\sigma\\left(W^{(f)} x_{t}+U^{(f)} h_{t-1}\\right)} & {\\text { (Forget gate) }} \\\\ {o_{t}} & {=\\sigma\\left(W^{(o)} x_{t}+U^{(o)} h_{t-1}\\right)} & {\\text { (Output/Exposure gate) }} \\\\ {\\tilde{c}_{t}} & {=\\tanh \\left(W^{(c)} x_{t}+U^{(c)} h_{t-1}\\right)} & {\\text { (New memory cell) }} \\\\ {c_{t}} & {=f_{t} \\circ c_{t-1}+i_{t} \\circ \\tilde{c}_{t}} & {\\text { (Final memory cell) }} \\\\ {h_{t}} & {=o_{t} \\circ \\tanh \\left(c_{t}\\right)} \\end{aligned} \\] \u4e0b\u56fe\u662fLSTM\u7684\u8ba1\u7b97\u56fe\u793a \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u4e86\u89e3 LSTM \u7684\u67b6\u6784\u4ee5\u53ca\u8fd9\u4e2a\u67b6\u6784\u80cc\u540e\u7684\u610f\u4e49\uff1a New memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u662f\u7c7b\u4f3c\u4e8e GRU \u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u7684\u9636\u6bb5\u3002\u6211\u4eec\u57fa\u672c\u4e0a\u662f\u7528\u8f93\u5165\u5355\u8bcd \\(x_t\\) \u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u751f\u6210\u4e00\u4e2a\u5305\u62ec\u65b0\u5355\u8bcd \\(x^{(t)}\\) \u7684\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde{c}_{t}\\) \u3002 Input Gate \uff1a\u6211\u4eec\u770b\u5230\u5728\u751f\u6210\u65b0\u7684\u8bb0\u5fc6\u4e4b\u524d\uff0c\u65b0\u7684\u8bb0\u5fc6\u7684\u751f\u6210\u9636\u6bb5\u4e0d\u4f1a\u68c0\u67e5\u65b0\u5355\u8bcd\u662f\u5426\u91cd\u8981\u2014\u2014\u8fd9\u9700\u8981\u8f93\u5165\u95e8\u51fd\u6570\u6765\u505a\u8fd9\u4e2a\u5224\u65ad\u3002\u8f93\u5165\u95e8\u4f7f\u7528\u8f93\u5165\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\u6765\u51b3\u5b9a\u8f93\u5165\u503c\u662f\u5426\u503c\u5f97\u4fdd\u5b58\uff0c\u4ece\u800c\u7528\u6765\u8fdb\u5165\u65b0\u5185\u5b58\u3002\u56e0\u6b64\uff0c\u5b83\u4ea7\u751f\u5b83\u4f5c\u4e3a\u8fd9\u4e2a\u4fe1\u606f\u7684\u6307\u793a\u5668\u3002 Forget Gate \uff1a\u8fd9\u4e2a\u95e8\u4e0e\u8f93\u5165\u95e8\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b83\u4e0d\u786e\u5b9a\u8f93\u5165\u5355\u8bcd\u7684\u6709\u7528\u6027\u2014\u2014\u800c\u662f\u8bc4\u4f30\u8fc7\u53bb\u7684\u8bb0\u5fc6\u662f\u5426\u5bf9\u5f53\u524d\u8bb0\u5fc6\u7684\u8ba1\u7b97\u6709\u7528\u3002\u56e0\u6b64\uff0c\u9057\u5fd8\u95e8\u67e5\u770b\u8f93\u5165\u5355\u8bcd\u548c\u8fc7\u53bb\u7684\u9690\u85cf\u72b6\u6001\uff0c\u5e76\u751f\u6210 \\(f_t\\) \u3002 Final memory generation \uff1a\u8fd9\u4e2a\u9636\u6bb5\u9996\u5148\u6839\u636e\u5fd8\u8bb0\u95e8 \\(f_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u5fd8\u8bb0\u8fc7\u53bb\u7684\u8bb0\u5fc6 \\(c_{t-1}\\) \u3002\u7c7b\u4f3c\u5730\uff0c\u6839\u636e\u8f93\u5165\u95e8 \\(i_t\\) \u7684\u5224\u65ad\uff0c\u76f8\u5e94\u5730\u8f93\u5165\u65b0\u7684\u8bb0\u5fc6 \\(\\tilde c_t\\) \u3002\u7136\u540e\u5c06\u4e0a\u9762\u7684\u4e24\u4e2a\u7ed3\u679c\u76f8\u52a0\u751f\u6210\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u3002 Output/Exposure Gate \uff1a\u8fd9\u662f GRU \u4e2d\u6ca1\u6709\u660e\u786e\u5b58\u5728\u7684\u95e8\u3002\u8fd9\u4e2a\u95e8\u7684\u76ee\u7684\u662f\u4ece\u9690\u85cf\u72b6\u6001\u4e2d\u5206\u79bb\u6700\u7ec8\u7684\u8bb0\u5fc6\u3002\u6700\u7ec8\u7684\u8bb0\u5fc6 \\(c_t\\) \u5305\u542b\u5f88\u591a\u4e0d\u9700\u8981\u5b58\u50a8\u5728\u9690\u85cf\u72b6\u6001\u7684\u4fe1\u606f\u3002\u9690\u85cf\u72b6\u6001\u7528\u4e8e LSTM \u7684\u6bcf\u4e2a\u5355\u4e2a\u95e8\uff0c\u56e0\u6b64\uff0c\u8be5\u95e8\u662f\u8981\u8bc4\u4f30\u5173\u4e8e\u8bb0\u5fc6\u5355\u5143 \\(c_t\\) \u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u663e\u9732\u5728\u9690\u85cf\u72b6\u6001 \\(h_t\\) \u4e2d\u3002\u7528\u4e8e\u8bc4\u4f30\u7684\u4fe1\u53f7\u662f \\(o_t\\) \uff0c\u7136\u540e\u4e0e \\(c_t\\) \u901a\u8fc7 \\(o_{t} \\circ \\tanh \\left(c_{t}\\right)\\) \u8fd0\u7b97\u5f97\u5230\u6700\u7ec8\u7684 \\(h_t\\) \u3002","title":"4 Recap"},{"location":"%5BPresentation%5DTransformers/","text":"RNN \u00b6 \u5b66\u4e60\u53d8\u957f\u6570\u636e\u7684\u8868\u793a\uff0c\u8fd9\u662f\u5e8f\u5217\u5b66\u4e60\u7684\u57fa\u672c\u7ec4\u4ef6\uff08\u5e8f\u5217\u5b66\u4e60\u5305\u62ec NMT, text summarization, QA\uff09 \u901a\u5e38\u4f7f\u7528 RNN \u5b66\u4e60\u53d8\u957f\u7684\u8868\u793a\uff1aRNN \u672c\u8eab\u9002\u5408\u53e5\u5b50\u548c\u50cf\u7d20\u5e8f\u5217 LSTMs, GRUs \u548c\u5176\u53d8\u4f53\u5728\u5faa\u73af\u6a21\u578b\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002 \u4f46\u662f\u5e8f\u5217\u8ba1\u7b97\u6291\u5236\u4e86\u5e76\u884c\u5316\u3002 \u6ca1\u6709\u5bf9\u957f\u671f\u548c\u77ed\u671f\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u663e\u5f0f\u5efa\u6a21\u3002 \u6211\u4eec\u60f3\u8981\u5bf9\u5c42\u6b21\u7ed3\u6784\u5efa\u6a21\u3002 RNNs(\u987a\u5e8f\u5bf9\u9f50\u7684\u72b6\u6001)\u770b\u8d77\u6765\u5f88\u6d6a\u8d39\uff01 CNN \u00b6 \u5e76\u884c\u5316(\u6bcf\u5c42)\u5f88\u7b80\u5355 \u5229\u7528\u5c40\u90e8\u4f9d\u8d56 \u4e0d\u540c\u4f4d\u7f6e\u7684\u4ea4\u4e92\u8ddd\u79bb\u662f\u7ebf\u6027\u6216\u662f\u5bf9\u6570\u7684 \u8fdc\u7a0b\u4f9d\u8d56\u9700\u8981\u591a\u5c42 Attention \u00b6 NMT \u4e2d\uff0c\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u4e4b\u95f4\u7684 Attention \u662f\u81f3\u5173\u91cd\u8981\u7684 \u4e3a\u4ec0\u4e48\u4e0d\u628a\u6ce8\u610f\u529b\u7528\u4e8e\u8868\u793a\u5462\uff1f Self-Attention \u4efb\u4f55\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u662f\u5e38\u6570\u7ea7\u522b\u7684 \u95e8\u63a7 / \u4e58\u6cd5 \u7684\u4ea4\u4e92 \u53ef\u4ee5\u5e76\u884c\u5316\uff08\u6bcf\u5c42\uff09 \u53ef\u4ee5\u5b8c\u5168\u66ff\u4ee3\u5e8f\u5217\u8ba1\u7b97\u5417\uff1f The Transformer \u00b6 Encoder Self-Attention Decoder Self-Attention \u590d\u6742\u5ea6 \u7531\u4e8e\u8ba1\u7b97\u53ea\u6d89\u53ca\u5230\u4e24\u4e2a\u77e9\u9635\u4e58\u6cd5\uff0c\u6240\u4ee5\u662f\u5e8f\u5217\u957f\u5ea6\u7684\u5e73\u65b9 \u5f53\u7ef4\u5ea6\u6bd4\u957f\u5ea6\u5927\u5f97\u591a\u7684\u65f6\u5019\uff0c\u975e\u5e38\u6709\u6548 Problem \u00b6 \u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8c01\u5bf9\u8c01\u505a\u4e86\u4ec0\u4e48\uff0c\u901a\u8fc7\u5377\u79ef\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684**\u4e0d\u540c\u7684**\u7ebf\u6027\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u83b7\u53d6\u5230 who, did what, to whom \u7684\u4fe1\u606f\u3002 \u4f46\u662f\u5bf9\u4e8e Attention \u800c\u8a00\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aAttention layer\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u53e5\u8bdd\u91cc\u7684\u6bcf\u4e2a\u8bcd\u90fd\u662f\u540c\u6837\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u4e0d\u80fd\u591f\u505a\u5230\u5728**\u4e0d\u540c\u7684\u4f4d\u7f6e\u63d0\u53d6\u4e0d\u540c\u7684\u4fe1\u606f** \u8fd9\u5c31\u662f\u591a\u5934\u6ce8\u610f\u529b\u7684\u6765\u6e90\uff0c\u7075\u611f\u6765\u6e90\u4e8e CNN \u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u8bbe\u8ba1 Solution \u00b6 Who, Did What, To Whom \u5206\u522b\u62e5\u6709\u6ce8\u610f\u529b\u5934 \u5c06\u6ce8\u610f\u529b\u5c42\u89c6\u4e3a\u7279\u5f81\u63a2\u6d4b\u5668 \u53ef\u4ee5\u5e76\u884c\u5b8c\u6210 \u4e3a\u4e86\u6548\u7387\uff0c\u51cf\u5c11\u6ce8\u610f\u529b\u5934\u7684\u7ef4\u5ea6\uff0c\u5e76\u884c\u64cd\u4f5c\u8fd9\u4e9b\u6ce8\u610f\u529b\u5c42\uff0c\u5f25\u8865\u4e86\u8ba1\u7b97 \u5dee\u8ddd Results \u00b6 \u4f46\u6211\u4eec\u5e76\u4e0d\u4e00\u5b9a\u6bd4 LSTM \u53d6\u5f97\u4e86\u66f4\u597d\u7684\u8868\u793a\uff0c\u53ea\u662f\u6211\u4eec\u66f4\u9002\u5408 SGD\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u8bad\u7ec3 \u6211\u4eec\u53ef\u4ee5\u5bf9\u4efb\u610f\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u6784\u5efa\u8fde\u63a5","title":"[Presentation]Transformers"},{"location":"%5BPresentation%5DTransformers/#rnn","text":"\u5b66\u4e60\u53d8\u957f\u6570\u636e\u7684\u8868\u793a\uff0c\u8fd9\u662f\u5e8f\u5217\u5b66\u4e60\u7684\u57fa\u672c\u7ec4\u4ef6\uff08\u5e8f\u5217\u5b66\u4e60\u5305\u62ec NMT, text summarization, QA\uff09 \u901a\u5e38\u4f7f\u7528 RNN \u5b66\u4e60\u53d8\u957f\u7684\u8868\u793a\uff1aRNN \u672c\u8eab\u9002\u5408\u53e5\u5b50\u548c\u50cf\u7d20\u5e8f\u5217 LSTMs, GRUs \u548c\u5176\u53d8\u4f53\u5728\u5faa\u73af\u6a21\u578b\u4e2d\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002 \u4f46\u662f\u5e8f\u5217\u8ba1\u7b97\u6291\u5236\u4e86\u5e76\u884c\u5316\u3002 \u6ca1\u6709\u5bf9\u957f\u671f\u548c\u77ed\u671f\u4f9d\u8d56\u5173\u7cfb\u8fdb\u884c\u663e\u5f0f\u5efa\u6a21\u3002 \u6211\u4eec\u60f3\u8981\u5bf9\u5c42\u6b21\u7ed3\u6784\u5efa\u6a21\u3002 RNNs(\u987a\u5e8f\u5bf9\u9f50\u7684\u72b6\u6001)\u770b\u8d77\u6765\u5f88\u6d6a\u8d39\uff01","title":"RNN"},{"location":"%5BPresentation%5DTransformers/#cnn","text":"\u5e76\u884c\u5316(\u6bcf\u5c42)\u5f88\u7b80\u5355 \u5229\u7528\u5c40\u90e8\u4f9d\u8d56 \u4e0d\u540c\u4f4d\u7f6e\u7684\u4ea4\u4e92\u8ddd\u79bb\u662f\u7ebf\u6027\u6216\u662f\u5bf9\u6570\u7684 \u8fdc\u7a0b\u4f9d\u8d56\u9700\u8981\u591a\u5c42","title":"CNN"},{"location":"%5BPresentation%5DTransformers/#attention","text":"NMT \u4e2d\uff0c\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\u4e4b\u95f4\u7684 Attention \u662f\u81f3\u5173\u91cd\u8981\u7684 \u4e3a\u4ec0\u4e48\u4e0d\u628a\u6ce8\u610f\u529b\u7528\u4e8e\u8868\u793a\u5462\uff1f Self-Attention \u4efb\u4f55\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u8def\u5f84\u957f\u5ea6\u90fd\u662f\u5e38\u6570\u7ea7\u522b\u7684 \u95e8\u63a7 / \u4e58\u6cd5 \u7684\u4ea4\u4e92 \u53ef\u4ee5\u5e76\u884c\u5316\uff08\u6bcf\u5c42\uff09 \u53ef\u4ee5\u5b8c\u5168\u66ff\u4ee3\u5e8f\u5217\u8ba1\u7b97\u5417\uff1f","title":"Attention"},{"location":"%5BPresentation%5DTransformers/#the-transformer","text":"Encoder Self-Attention Decoder Self-Attention \u590d\u6742\u5ea6 \u7531\u4e8e\u8ba1\u7b97\u53ea\u6d89\u53ca\u5230\u4e24\u4e2a\u77e9\u9635\u4e58\u6cd5\uff0c\u6240\u4ee5\u662f\u5e8f\u5217\u957f\u5ea6\u7684\u5e73\u65b9 \u5f53\u7ef4\u5ea6\u6bd4\u957f\u5ea6\u5927\u5f97\u591a\u7684\u65f6\u5019\uff0c\u975e\u5e38\u6709\u6548","title":"The Transformer"},{"location":"%5BPresentation%5DTransformers/#problem","text":"\u4e0a\u4f8b\u4e2d\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u9053\u8c01\u5bf9\u8c01\u505a\u4e86\u4ec0\u4e48\uff0c\u901a\u8fc7\u5377\u79ef\u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684**\u4e0d\u540c\u7684**\u7ebf\u6027\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u83b7\u53d6\u5230 who, did what, to whom \u7684\u4fe1\u606f\u3002 \u4f46\u662f\u5bf9\u4e8e Attention \u800c\u8a00\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aAttention layer\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u53e5\u8bdd\u91cc\u7684\u6bcf\u4e2a\u8bcd\u90fd\u662f\u540c\u6837\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u4e0d\u80fd\u591f\u505a\u5230\u5728**\u4e0d\u540c\u7684\u4f4d\u7f6e\u63d0\u53d6\u4e0d\u540c\u7684\u4fe1\u606f** \u8fd9\u5c31\u662f\u591a\u5934\u6ce8\u610f\u529b\u7684\u6765\u6e90\uff0c\u7075\u611f\u6765\u6e90\u4e8e CNN \u4e2d\u7684\u591a\u4e2a\u5377\u79ef\u6838\u7684\u8bbe\u8ba1","title":"Problem"},{"location":"%5BPresentation%5DTransformers/#solution","text":"Who, Did What, To Whom \u5206\u522b\u62e5\u6709\u6ce8\u610f\u529b\u5934 \u5c06\u6ce8\u610f\u529b\u5c42\u89c6\u4e3a\u7279\u5f81\u63a2\u6d4b\u5668 \u53ef\u4ee5\u5e76\u884c\u5b8c\u6210 \u4e3a\u4e86\u6548\u7387\uff0c\u51cf\u5c11\u6ce8\u610f\u529b\u5934\u7684\u7ef4\u5ea6\uff0c\u5e76\u884c\u64cd\u4f5c\u8fd9\u4e9b\u6ce8\u610f\u529b\u5c42\uff0c\u5f25\u8865\u4e86\u8ba1\u7b97 \u5dee\u8ddd","title":"Solution"},{"location":"%5BPresentation%5DTransformers/#results","text":"\u4f46\u6211\u4eec\u5e76\u4e0d\u4e00\u5b9a\u6bd4 LSTM \u53d6\u5f97\u4e86\u66f4\u597d\u7684\u8868\u793a\uff0c\u53ea\u662f\u6211\u4eec\u66f4\u9002\u5408 SGD\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u8bad\u7ec3 \u6211\u4eec\u53ef\u4ee5\u5bf9\u4efb\u610f\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u6784\u5efa\u8fde\u63a5","title":"Results"},{"location":"%5BPresentation%5DWord2Vec/","text":"Human language and word meaning \u00b6 \u4eba\u7c7b\u4e4b\u6240\u4ee5\u6bd4\u7c7b\u4eba\u733f\u66f4\u201c\u806a\u660e\u201d\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u6709\u8bed\u8a00\uff0c\u56e0\u6b64\u662f\u4e00\u4e2a\u4eba\u673a\u7f51\u7edc\uff0c\u5176\u4e2d\u4eba\u7c7b\u8bed\u8a00\u4f5c\u4e3a\u7f51\u7edc\u8bed\u8a00\u3002\u4eba\u7c7b\u8bed\u8a00\u5177\u6709 \u4fe1\u606f\u529f\u80fd \u548c \u793e\u4f1a\u529f\u80fd \u3002 \u636e\u4f30\u8ba1\uff0c\u4eba\u7c7b\u8bed\u8a00\u53ea\u6709\u5927\u7ea65000\u5e74\u7684\u77ed\u6682\u5386\u3002\u8bed\u8a00\u662f\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e3b\u8981\u539f\u56e0\u3002\u5199\u4f5c\u662f\u53e6\u4e00\u4ef6\u8ba9\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e8b\u60c5\u3002\u5b83\u662f\u4f7f\u77e5\u8bc6\u80fd\u591f\u5728\u7a7a\u95f4\u4e0a\u4f20\u9001\u5230\u4e16\u754c\u5404\u5730\uff0c\u5e76\u5728\u65f6\u95f4\u4e0a\u4f20\u9001\u7684\u4e00\u79cd\u5de5\u5177\u3002 \u4f46\u662f\uff0c\u76f8\u8f83\u4e8e\u5982\u4eca\u7684\u4e92\u8054\u7f51\u7684\u4f20\u64ad\u901f\u5ea6\u800c\u8a00\uff0c\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u79cd\u7f13\u6162\u7684\u8bed\u8a00\u3002\u7136\u800c\uff0c\u53ea\u9700\u4eba\u7c7b\u8bed\u8a00\u5f62\u5f0f\u7684\u51e0\u767e\u4f4d\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u6784\u5efa\u6574\u4e2a\u89c6\u89c9\u573a\u666f\u3002\u8fd9\u5c31\u662f\u81ea\u7136\u8bed\u8a00\u5982\u6b64\u8ff7\u4eba\u7684\u539f\u56e0\u3002 How do we represent the meaning of a word? meaning \u7528\u4e00\u4e2a\u8bcd\u3001\u8bcd\u7ec4\u7b49\u8868\u793a\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u4eba\u60f3\u7528\u8bed\u8a00\u3001\u7b26\u53f7\u7b49\u6765\u8868\u8fbe\u7684\u60f3\u6cd5\u3002 \u8868\u8fbe\u5728\u4f5c\u54c1\u3001\u827a\u672f\u7b49\u65b9\u9762\u7684\u601d\u60f3 \u7406\u89e3\u610f\u4e49\u7684\u6700\u666e\u904d\u7684\u8bed\u8a00\u65b9\u5f0f( linguistic way ) : \u8bed\u8a00\u7b26\u53f7\u4e0e\u8bed\u8a00\u7b26\u53f7\u7684\u610f\u4e49\u7684\u8f6c\u5316 $$ \\boxed{\\text{signifier(symbol)}\\Leftrightarrow \\text{signified(idea or thing)}} \\ = \\textbf{denotational semantics} $$ denotational semantics \u6307\u79f0\u8bed\u4e49 How do we have usable meaning in a computer? WordNet , \u4e00\u4e2a\u5305\u542b\u540c\u4e49\u8bcd\u96c6\u548c\u4e0a\u4f4d\u8bcd(\u201cis a\u201d\u5173\u7cfb) synonym sets and hypernyms \u7684\u5217\u8868\u7684\u8f9e\u5178 Problems with resources like WordNet \u4f5c\u4e3a\u4e00\u4e2a\u8d44\u6e90\u5f88\u597d\uff0c\u4f46\u5ffd\u7565\u4e86\u7ec6\u5fae\u5dee\u522b \u4f8b\u5982\u201cproficient\u201d\u88ab\u5217\u4e3a\u201cgood\u201d\u7684\u540c\u4e49\u8bcd\u3002\u8fd9\u53ea\u5728\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4e2d\u662f\u6b63\u786e\u7684\u3002 \u7f3a\u5c11\u5355\u8bcd\u7684\u65b0\u542b\u4e49 \u96be\u4ee5\u6301\u7eed\u66f4\u65b0 \u4f8b\u5982 wicked, badass, nifty, wizard, genius, ninja, bombest \u4e3b\u89c2\u7684 \u9700\u8981\u4eba\u7c7b\u52b3\u52a8\u6765\u521b\u9020\u548c\u8c03\u6574 \u65e0\u6cd5\u8ba1\u7b97\u5355\u8bcd\u76f8\u4f3c\u5ea6 Representing words as discrete symbols \u5728\u4f20\u7edf\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u628a\u8bcd\u8bed\u770b\u4f5c\u79bb\u6563\u7684\u7b26\u53f7: hotel, conference, motel - a localist representation\u3002\u5355\u8bcd\u53ef\u4ee5\u901a\u8fc7\u72ec\u70ed\u5411\u91cf(one-hot vectors\uff0c\u53ea\u6709\u4e00\u4e2a1\uff0c\u5176\u4f59\u5747\u4e3a0\u7684\u7a00\u758f\u5411\u91cf) \u3002\u5411\u91cf\u7ef4\u5ea6=\u8bcd\u6c47\u91cf(\u5982500,000)\u3002 \\[ motel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0] \\\\ hotel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0] \\] Problem with words as discrete symbols \u6240\u6709\u5411\u91cf\u662f\u6b63\u4ea4\u7684\u3002\u5bf9\u4e8e\u72ec\u70ed\u5411\u91cf\uff0c\u6ca1\u6709\u5173\u4e8e\u76f8\u4f3c\u6027\u6982\u5ff5\uff0c\u5e76\u4e14\u5411\u91cf\u7ef4\u5ea6\u8fc7\u5927\u3002 Solutions \u4f7f\u7528\u7c7b\u4f3c WordNet \u7684\u5de5\u5177\u4e2d\u7684\u5217\u8868\uff0c\u83b7\u5f97\u76f8\u4f3c\u5ea6\uff0c\u4f46\u4f1a\u56e0\u4e0d\u591f\u5b8c\u6574\u800c\u5931\u8d25 \u5b66\u4e60\u5728\u5411\u91cf\u672c\u8eab\u4e2d\u7f16\u7801\u76f8\u4f3c\u6027 Representing words by their context Distributional semantics \uff1a\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\u662f\u7531\u7ecf\u5e38\u51fa\u73b0\u5728\u5b83\u9644\u8fd1\u7684\u5355\u8bcd\u7ed9\u51fa\u7684 \u201cYou shall know a word by the company it keeps\u201d (J. R. Firth 1957: 11) \u73b0\u4ee3\u7edf\u8ba1NLP\u6700\u6210\u529f\u7684\u7406\u5ff5\u4e4b\u4e00 \u6709\u70b9\u7269\u4ee5\u7c7b\u805a\uff0c\u4eba\u4ee5\u7fa4\u5206\u7684\u611f\u89c9 \u5f53\u4e00\u4e2a\u5355\u8bcd \\(w\\) \u51fa\u73b0\u5728\u6587\u672c\u4e2d\u65f6\uff0c\u5b83\u7684\u4e0a\u4e0b\u6587\u662f\u51fa\u73b0\u5728\u5176\u9644\u8fd1\u7684\u4e00\u7ec4\u5355\u8bcd(\u5728\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d)\u3002 \u4f7f\u7528 \\(w\\) \u7684\u8bb8\u591a\u4e0a\u4e0b\u6587\u6765\u6784\u5efa \\(w\\) \u7684\u8868\u793a Word2vec introduction \u00b6 \u6211\u4eec\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u6784\u5efa\u4e00\u4e2a \u5bc6\u96c6 \u7684\u5411\u91cf\uff0c\u4f7f\u5176\u4e0e\u51fa\u73b0\u5728\u76f8\u4f3c\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u76f8\u4f3c \u8bcd\u5411\u91cf word vectors \u6709\u65f6\u88ab\u79f0\u4e3a\u8bcd\u5d4c\u5165 word embeddings \u6216\u8bcd\u8868\u793a word representations \u5b83\u4eec\u662f\u5206\u5e03\u5f0f\u8868\u793a distributed representation Word2vec (Mikolov et al. 2013)\u662f\u4e00\u4e2a\u5b66\u4e60\u5355\u8bcd\u5411\u91cf\u7684 \u6846\u67b6 IDEA \uff1a \u6211\u4eec\u6709\u5927\u91cf\u7684\u6587\u672c (corpus means 'body' in Latin. \u590d\u6570\u4e3acorpora) \u56fa\u5b9a\u8bcd\u6c47\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7531\u4e00\u4e2a\u5411\u91cf\u8868\u793a \u6587\u672c\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e \\(t\\) \uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e0a\u4e0b\u6587(\u201c\u5916\u90e8\u201d)\u5355\u8bcd \\(o\\) \u4f7f\u7528 \\(c\\) \u548c \\(o\\) \u7684 \u8bcd\u5411\u91cf\u7684\u76f8\u4f3c\u6027 \u6765\u8ba1\u7b97\u7ed9\u5b9a \\(c\\) \u7684 \\(o\\) \u7684 \u6982\u7387 (\u53cd\u4e4b\u4ea6\u7136) \u4e0d\u65ad\u8c03\u6574\u8bcd\u5411\u91cf \u6765\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u4e0b\u56fe\u4e3a\u7a97\u53e3\u5927\u5c0f \\(j=2\\) \u65f6\u7684 \\(P\\left(w_{t+j} | w_{t}\\right)\\) \u8ba1\u7b97\u8fc7\u7a0b\uff0ccenter word\u5206\u522b\u4e3a \\(into\\) \u548c \\(banking\\) Word2vec objective function \u00b6 \u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e \\(t=1, \\ldots, T\\) \uff0c\u5728\u5927\u5c0f\u4e3a \\(m\\) \u7684\u56fa\u5b9a\u7a97\u53e3\u5185\u9884\u6d4b\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(w_j\\) \\[ Likelihoood = L(\\theta) = \\prod^{T}_{t=1} \\prod_{-m \\leq j \\leq m \\atop j \\neq 0} P(w_{t+j} | w_{t} ; \\theta) \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u4e3a\u6240\u6709\u9700\u8981\u4f18\u5316\u7684\u53d8\u91cf \u76ee\u6807\u51fd\u6570 \\(J(\\theta)\\) (\u6709\u65f6\u88ab\u79f0\u4e3a\u4ee3\u4ef7\u51fd\u6570\u6216\u635f\u5931\u51fd\u6570) \u662f(\u5e73\u5747)\u8d1f\u5bf9\u6570\u4f3c\u7136 \\[ J(\\theta)=-\\frac{1}{T} \\log L(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\log P\\left(w_{t+j} | w_{t} ; \\theta\\right) \\] \u5176\u4e2dlog\u5f62\u5f0f\u662f\u65b9\u4fbf\u5c06\u8fde\u4e58\u8f6c\u5316\u4e3a\u6c42\u548c\uff0c\u8d1f\u53f7\u662f\u5e0c\u671b\u5c06\u6781\u5927\u5316\u4f3c\u7136\u7387\u8f6c\u5316\u4e3a\u6781\u5c0f\u5316\u635f\u5931\u51fd\u6570\u7684\u7b49\u4ef7\u95ee\u9898\u3002 \u5728\u8fde\u4e58\u4e4b\u524d\u4f7f\u7528log\u8f6c\u5316\u4e3a\u6c42\u548c\u975e\u5e38\u6709\u6548\uff0c\u7279\u522b\u662f\u5728\u505a\u4f18\u5316\u65f6 $$ \\log \\prod_i x_i = \\sum_i \\log x_i $$ \u6700\u5c0f\u5316\u76ee\u6807\u51fd\u6570 \\(\\Leftrightarrow\\) \u6700\u5927\u5316\u9884\u6d4b\u7cbe\u5ea6 \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97 \\(P(w_{t+j} | w_{t} ; \\theta)\\) \uff1f \u56de\u7b54 \uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u90fd\u662f\u7528\u4e24\u4e2a\u5411\u91cf \\(v_w\\) \u5f53 \\(w\\) \u662f\u4e2d\u5fc3\u8bcd\u65f6 \\(u_w\\) \u5f53 \\(w\\) \u662f\u4e0a\u4e0b\u6587\u8bcd\u65f6 \u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u516c\u5f0f\u4e2d\uff0c\u5411\u91cf \\(u_o\\) \u548c\u5411\u91cf \\(v_c\\) \u8fdb\u884c\u70b9\u4e58\u3002\u5411\u91cf\u4e4b\u95f4\u8d8a\u76f8\u4f3c\uff0c\u70b9\u4e58\u7ed3\u679c\u8d8a\u5927\uff0c\u4ece\u800c\u5f52\u4e00\u5316\u540e\u5f97\u5230\u7684\u6982\u7387\u503c\u4e5f\u8d8a\u5927\u3002\u6a21\u578b\u7684\u8bad\u7ec3\u6b63\u662f\u4e3a\u4e86\u4f7f\u5f97\u5177\u6709\u76f8\u4f3c\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\uff0c\u5177\u6709\u76f8\u4f3c\u7684\u5411\u91cf\u3002 Word2vec prediction function \u00b6 \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u53d6\u5e42\u4f7f\u4efb\u4f55\u6570\u90fd\u4e3a\u6b63 \u70b9\u79ef\u6bd4\u8f83o\u548cc\u7684\u76f8\u4f3c\u6027 \\(u^{T} v=u . v=\\sum_{i=1}^{n} u_{i} v_{i}\\) \uff0c\u70b9\u79ef\u8d8a\u5927\u5219\u6982\u7387\u8d8a\u5927 \u5206\u6bcd\uff1a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u8868\u8fdb\u884c\u6807\u51c6\u5316\uff0c\u4ece\u800c\u7ed9\u51fa\u6982\u7387\u5206\u5e03 softmax function \\(\\mathbb{R}^{n} \\rightarrow \\mathbb{R}^{n}\\) $$ \\operatorname{softmax}\\left(x_{i}\\right)=\\frac{\\exp \\left(x_{i}\\right)}{\\sum_{j=1}^{n} \\exp \\left(x_{j}\\right)}=p_{i} $$ \u5c06\u4efb\u610f\u503c \\(x_i\\) \u6620\u5c04\u5230\u6982\u7387\u5206\u5e03 \\(p_i\\) max \uff1a\u56e0\u4e3a\u653e\u5927\u4e86\u6700\u5927\u7684\u6982\u7387 soft \uff1a\u56e0\u4e3a\u4ecd\u7136\u4e3a\u8f83\u5c0f\u7684 \\(x_i\\) \u8d4b\u4e88\u4e86\u4e00\u5b9a\u6982\u7387 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5e38\u7528 \u9996\u5148\u6211\u4eec\u968f\u673a\u521d\u59cb\u5316 \\(u_{w}\\in\\mathbb{R}^d\\) \u548c \\(v_{w}\\in\\mathbb{R}^d\\) \uff0c\u800c\u540e\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u8fdb\u884c\u66f4\u65b0 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=\\frac{\\partial}{\\partial v_c}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)} \\end{align} \\] \u504f\u5bfc\u6570\u53ef\u4ee5\u79fb\u8fdb\u6c42\u548c\u4e2d\uff0c\u5bf9\u5e94\u4e0a\u65b9\u516c\u5f0f\u7684\u6700\u540e\u4e24\u884c\u7684\u63a8\u5bfc $$ \\frac{\\partial}{\\partial x}\\sum_iy_i = \\sum_i\\frac{\\partial}{\\partial x}y_i $$ \u6211\u4eec\u53ef\u4ee5\u5bf9\u4e0a\u8ff0\u7ed3\u679c\u91cd\u65b0\u6392\u5217\u5982\u4e0b\uff0c\u7b2c\u4e00\u9879\u662f\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7b2c\u4e8c\u9879\u662f\u9884\u6d4b\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u3002\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u4e0a\u4e0b\u6587\u5c06\u9010\u6b65\u63a5\u8fd1\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u3002 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=u_o-\\sum_{w\\in V}\\frac{\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}u_w\\\\ &=u_o-\\sum_{w\\in V}P(w|c)u_w \\end{align} \\] \u518d\u5bf9 \\(u_o\\) \u8fdb\u884c\u504f\u5fae\u5206\u8ba1\u7b97\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 \\(u_o\\) \u662f \\(u_{w=o}\\) \u7684\u7b80\u5199\uff0c\u6545\u53ef\u77e5 \\(\\frac{\\partial}{\\partial u_o}\\sum_{w \\in V } u_w^T v_c = \\frac{\\partial}{\\partial u_o} u_o^T v_c = \\frac{\\partial u_o}{\\partial u_o}v_c + \\frac{\\partial v_c}{\\partial u_o}u_o= v_c\\) \\[ \\begin{align} \\frac{\\partial}{\\partial u_o}\\log P(o|c) &=\\frac{\\partial}{\\partial u_o}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=v_c-\\frac{\\sum\\frac{\\partial}{\\partial u_o}\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)v_c}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}v_c\\\\ &=v_c - P(o|c)v_c\\\\ &=(1-P(o|c))v_c \\end{align} \\] \u53ef\u4ee5\u7406\u89e3\uff0c\u5f53 \\(P(o|c) \\to 1\\) \uff0c\u5373\u901a\u8fc7\u4e2d\u5fc3\u8bcd \\(c\\) \u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u9884\u6d4b\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \uff0c\u6b64\u65f6\u6211\u4eec\u4e0d\u9700\u8981\u8c03\u6574 \\(u_o\\) \uff0c\u53cd\u4e4b\uff0c\u5219\u76f8\u5e94\u8c03\u6574 \\(u_o\\) \u3002 Deeper \u00b6 \u4e24\u4e2a\u7b97\u6cd5 \uff1acontinuous bag-of-words\uff08CBOW\uff09\u548c skip-gram\u3002CBOW \u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u6765\u9884\u6d4b\u8be5\u8bcd\u7684\u8bcd\u5411\u91cf\u3002skip-gram \u5219\u76f8\u53cd\uff0c\u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u9884\u6d4b\u5468\u56f4\u4e0a\u4e0b\u6587\u7684\u8bcd\u7684\u6982\u7387\u5206\u5e03\u3002 \u4e24\u4e2a\u8bad\u7ec3\u65b9\u6cd5 \uff1anegative sampling \u548c hierarchical softmax\u3002Negative sampling \u901a\u8fc7\u62bd\u53d6\u8d1f\u6837\u672c\u6765\u5b9a\u4e49\u76ee\u6807\uff0chierarchical softmax \u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u6709\u6548\u7684\u6811\u7ed3\u6784\u6765\u8ba1\u7b97\u6240\u6709\u8bcd\u7684\u6982\u7387\u6765\u5b9a\u4e49\u76ee\u6807\u3002 Language Models (Unigrams, Bigrams, etc.) \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u6765\u4e3a\u4e00\u7cfb\u5217\u7684\u5355\u8bcd\u5206\u914d\u6982\u7387\u3002\u6211\u4eec\u4ece\u4e00\u4e2a\u4f8b\u5b50\u5f00\u59cb\uff1a \u201cThe cat jumped over the puddle\u201d \u4e00\u4e2a\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f1a\u7ed9\u8fd9\u4e2a\u53e5\u5b50\u5f88\u9ad8\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5728\u53e5\u6cd5\u548c\u8bed\u4e49\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168\u6709\u6548\u7684\u53e5\u5b50\u3002\u76f8\u4f3c\u5730\uff0c\u53e5\u5b50\u201cstock boil fish is toy\u201d\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u3002\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u79f0\u4e3a\u5bf9\u7ed9\u5b9a n \u4e2a\u8bcd\u7684\u5e8f\u5217\u7684\u6982\u7387\u662f\uff1a $$ P(w_{1}, w_{2}, \\ldots, w_{n}) $$ \u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u5143\u8bed\u8a00\u6a21\u578b\u65b9\u6cd5( Unigram model )\uff0c\u5047\u8bbe\u5355\u8bcd\u7684\u51fa\u73b0\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u4ece\u800c\u5206\u89e3\u6982\u7387 $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=1}^{n} P\\left(w_{i}\\right) $$ \u4f46\u662f\u6211\u4eec\u77e5\u9053\u8fd9\u662f\u4e0d\u5927\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u524d\u9762\u7684\u5355\u8bcd\u5e8f\u5217\u7684\u3002\u5982\u679c\u4f7f\u7528\u4e0a\u8ff0\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u5177\u6709\u5f88\u9ad8\u7684\u6982\u7387\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u5e8f\u5217\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u5e8f\u5217\u4e2d\u7684\u5355\u8bcd\u548c\u5176\u65c1\u8fb9\u7684\u5355\u8bcd\u7684\u6210\u5bf9\u6982\u7387\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a bigram \u6a21\u578b\uff1a $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=2}^{n} P\\left(w_{i} | w_{i-1}\\right) $$ \u4f46\u662f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u7b80\u5355\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u5173\u5fc3\u4e00\u5bf9\u90bb\u8fd1\u7684\u5355\u8bcd\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u6574\u4e2a\u53e5\u5b50\u6765\u8003\u8651\u3002\u4f46\u662f\u6211\u4eec\u5c06\u770b\u5230\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u6709\u663e\u8457\u7684\u63d0\u5347\u3002\u8003\u8651\u5728\u8bcd-\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\uff0c\u5171\u73b0\u7a97\u53e3\u4e3a 1\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u80fd\u5f97\u5230\u8fd9\u6837\u7684\u6210\u5bf9\u7684\u6982\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u53c8\u9700\u8981\u8ba1\u7b97\u548c\u5b58\u50a8\u5927\u91cf\u6570\u636e\u96c6\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u7406\u89e3\u4e86\u5982\u4f55\u8003\u8651\u5177\u6709\u6982\u7387\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u8ba9\u6211\u4eec\u89c2\u5bdf\u4e00\u4e9b\u80fd\u591f\u5b66\u4e60\u8fd9\u4e9b\u6982\u7387\u7684\u793a\u4f8b\u6a21\u578b\u3002 Continuous Bag of Words Model (CBOW) \u8fd9\u4e00\u65b9\u6cd5\u662f\u628a {\"The\",\"cat\",\"over\",\"the\",\"puddle\"} \u4f5c\u4e3a\u4e0a\u4e0b\u6587\uff0c\u5e0c\u671b\u4ece\u8fd9\u4e9b\u8bcd\u4e2d\u80fd\u591f\u9884\u6d4b\u6216\u8005\u751f\u6210\u4e2d\u5fc3\u8bcd\u201cjumped\u201d\u3002\u8fd9\u6837\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e4b\u4e3a continuous bag-of-words\uff08CBOW\uff09\u6a21\u578b\u3002 \u5b83\u662f\u4ece\u4e0a\u4e0b\u6587\u4e2d\u9884\u6d4b\u4e2d\u5fc3\u8bcd\u7684\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u5e0c\u671b\u5b66\u4e60\u4e24\u4e2a\u5411\u91cf \\(v\\) (\u8f93\u5165\u5411\u91cf) \u5f53\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d \\(u\\) (\u8f93\u51fa\u5411\u91cf) \u5f53\u8bcd\u662f\u4e2d\u5fc3\u8bcd \u9996\u5148\u6211\u4eec\u8bbe\u5b9a\u5df2\u77e5\u53c2\u6570\u3002\u4ee4\u6211\u4eec\u6a21\u578b\u7684\u5df2\u77e5\u53c2\u6570\u662f one-hot \u5f62\u5f0f\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\u6216\u8005\u4e0a\u4e0b\u6587\u6211\u4eec\u7528 \\(x^{(c)}\\) \u8868\u793a\uff0c\u8f93\u51fa\u7528 \\(y^{(c)}\\) \u8868\u793a\u3002\u5728 CBOW \u6a21\u578b\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\uff0c\u56e0\u6b64\u6211\u4eec\u628a y \u79f0\u4e3a\u662f\u5df2\u77e5\u4e2d\u5fc3\u8bcd\u7684\u7684 one-hot \u5411\u91cf\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5b9a\u4e49\u6a21\u578b\u7684\u672a\u77e5\u53c2\u6570\u3002 \u9996\u5148\u6211\u4eec\u5bf9 CBOW \u6a21\u578b\u4f5c\u51fa\u4ee5\u4e0b\u5b9a\u4e49 \\(w_{i}\\) \uff1a\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u5355\u8bcd \\(i\\) \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \uff1a\u8f93\u5165\u8bcd\u77e9\u9635 \\(v_{i} \uff1a \\mathcal{V}\\) \u7684\u7b2c i \u5217\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u5165\u5411\u91cf\u8868\u793a \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \uff1a\u8f93\u51fa\u8bcd\u77e9\u9635 \\(u_{i} \uff1a \\mathcal{U}\\) \u7684\u7b2c i \u884c\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u51fa\u5411\u91cf\u8868\u793a \u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u77e9\u9635\uff0c \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \u548c \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \u3002\u5176\u4e2d n \u662f\u5d4c\u5165\u7a7a\u95f4\u7684\u4efb\u610f\u7ef4\u5ea6\u5927\u5c0f\u3002 \\(\\mathcal{V}\\) \u662f\u8f93\u5165\u8bcd\u77e9\u9635\uff0c\u4f7f\u5f97\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{V}\\) \u7684\u7b2c i \u5217\u662f\u8bcd \\(w_{i}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49\u8fd9\u4e2a \\(n \\times 1\\) \u7684\u5411\u91cf\u4e3a \\(v_{i}\\) \u3002\u76f8\u4f3c\u5730\uff0c \\(\\mathcal{U}\\) \u662f\u8f93\u51fa\u8bcd\u77e9\u9635\u3002\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{U}\\) \u7684\u7b2c j \u884c\u662f\u8bcd \\(w_{j}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49 \\(\\mathcal{U}\\) \u7684\u8fd9\u884c\u4e3a \\(u_{j}\\) \u3002\u6ce8\u610f\u5b9e\u9645\u4e0a\u5bf9\u6bcf\u4e2a\u8bcd \\(w_{i}\\) \u6211\u4eec\u9700\u8981\u5b66\u4e60\u4e24\u4e2a\u8bcd\u5411\u91cf\uff08\u5373\u8f93\u5165\u8bcd\u5411\u91cf \\(v_{i}\\) \u548c\u8f93\u51fa\u8bcd\u5411\u91cf \\(u_{i}\\) \uff09\u3002 \u6211\u4eec\u5c06\u8fd9\u4e2a\u6a21\u578b\u5206\u89e3\u4e3a\u4ee5\u4e0b\u6b65\u9aa4 \u6211\u4eec\u4e3a\u5927\u5c0f\u4e3a m \u7684\u8f93\u5165\u4e0a\u4e0b\u6587\uff0c\u751f\u6210 one-hot \u8bcd\u5411\u91cf \\( \\((x^{(c-m)},...,x^{(c-1)},x^{(c+1)},...,x^{(c+m)}\\in \\mathbb{R}^{|V|})\\) \\) \u6211\u4eec\u4ece\u4e0a\u4e0b\u6587 \\((v_{c-m}=\\mathcal{V}x^{(c-m)},v_{c-m+1}=\\mathcal{V}x^{(c-m+1)},...,v_{c+m}=\\mathcal{V}x^{(c+m)}\\in \\mathbb{R}^{n})\\) \u5f97\u5230\u5d4c\u5165\u8bcd\u5411\u91cf\u3002 \u5bf9\u4e0a\u8ff0\u7684\u5411\u91cf\u6c42\u5e73\u5747\u503c \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1+...+v_{c+m}}}{2m}\\in \\mathbb{R}^{n}\\) \u3002 \u751f\u6210\u4e00\u4e2a\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}\\widehat{v}\\in \\mathbb{R}^{|V|}\\) \u3002\u5f53\u76f8\u4f3c\u5411\u91cf\u7684\u70b9\u79ef\u8d8a\u9ad8\uff0c\u5c31\u4f1a\u4ee4\u5230\u76f8\u4f3c\u7684\u8bcd\u66f4\u4e3a\u9760\u8fd1\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u9ad8\u7684\u5206\u6570\u3002\u5c06\u5206\u6570\u8f6c\u6362\u4e3a\u6982\u7387 \\(\\widehat{y}=softmax(z)\\in \\mathbb{R}^{|V|}\\) \u3002 \u8fd9\u91cc softmax \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u51fd\u6570\u3002\u5b83\u5c06\u4e00\u4e2a\u5411\u91cf\u8f6c\u6362\u4e3a\u53e6\u5916\u4e00\u4e2a\u5411\u91cf\uff0c\u5176\u4e2d\u8f6c\u6362\u540e\u7684\u5411\u91cf\u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u662f \\(\\frac{e^{\\widehat{y}_i}}{\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}}\\) \u3002\u56e0\u4e3a\u8be5\u51fd\u6570\u662f\u4e00\u4e2a\u6307\u6570\u51fd\u6570\uff0c\u6240\u4ee5\u503c\u4e00\u5b9a\u4e3a\u6b63\u6570\uff1b\u901a\u8fc7\u9664\u4ee5 \\(\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}\\) \u6765\u5f52\u4e00\u5316\u5411\u91cf\uff08\u4f7f\u5f97 \\(\\sum_{k=1}^{|V|}\\widehat{y}_k=1\\) \uff09\u5f97\u5230\u6982\u7387\u3002 \u6211\u4eec\u5e0c\u671b\u751f\u6210\u7684\u6982\u7387 \\(\\widehat{y} \\in \\mathbb{R}^{|V|}\\) \u4e0e\u5b9e\u9645\u7684\u6982\u7387 \\(y \\in \\mathbb{R}^{|V|}\\) \u5339\u914d\u3002\u4f7f\u5f97\u5176\u521a\u597d\u662f\u5b9e\u9645\u7684\u8bcd\u5c31\u662f\u8fd9\u4e2a one-hot \u5411\u91cf\u3002 \u4e0b\u56fe\u662f CBOW \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u5982\u679c\u6709 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u6211\u4eec\u5982\u4f55\u5b66\u4e60\u8fd9\u4e24\u4e2a\u77e9\u9635\u5462\uff1f\u8fd9\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u3002\u4e00\u822c\u6211\u4eec\u60f3\u4ece\u4e00\u4e9b\u771f\u5b9e\u7684\u6982\u7387\u4e2d\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\uff0c\u4fe1\u606f\u8bba\u63d0\u4f9b\u4e86\u4e00\u4e2a \u5ea6\u91cf\u4e24\u4e2a\u6982\u7387\u5206\u5e03\u7684\u8ddd\u79bb \u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4e00\u4e2a\u5e38\u89c1\u7684\u8ddd\u79bb/\u635f\u5931\u65b9\u6cd5\uff0c\u4ea4\u53c9\u71b5 \\(H(\\widehat{y}, y)\\) \u3002 \u5728\u79bb\u6563\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ea4\u53c9\u71b5\u53ef\u4ee5\u76f4\u89c2\u5730\u5f97\u51fa\u635f\u5931\u51fd\u6570\u7684\u516c\u5f0f $$ H(\\hat{y}, y)=-\\sum_{j=1}^{|V|} y_{j} \\log \\left(\\hat{y}_{j}\\right) $$ \u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0cy \u662f one-hot \u5411\u91cf\u3002\u56e0\u6b64\u4e0a\u9762\u7684\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a $$ H(\\widehat{y}, y)= - y_{j}\\,log(\\widehat{y}_{j}) $$ c \u662f\u6b63\u786e\u8bcd\u7684 one-hot \u5411\u91cf\u7684\u7d22\u5f15\u3002\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u6211\u4eec\u7684\u9884\u6d4b\u662f\u5b8c\u7f8e\u5e76\u4e14 \\(\\widehat{y}_{c}=1\\) \u7684\u60c5\u51b5\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97 \\(H(\\widehat{y}, y)=-1\\,log(1)=0\\) \u3002\u56e0\u6b64\uff0c\u5bf9\u4e00\u4e2a\u5b8c\u7f8e\u7684\u9884\u6d4b\uff0c\u6211\u4eec\u4e0d\u4f1a\u9762\u4e34\u4efb\u4f55\u60e9\u7f5a\u6216\u8005\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u76f8\u53cd\u7684\u60c5\u51b5\uff0c\u9884\u6d4b\u975e\u5e38\u5dee\u5e76\u4e14 \\(\\widehat{y}_{c}=0.01\\) \u3002\u548c\u524d\u9762\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u635f\u5931 \\(H(\\widehat{y}, y)=-1\\,log(0.01)=4.605\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u6982\u7387\u5206\u5e03\uff0c\u4ea4\u53c9\u71b5\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u8ddd\u79bb\u5ea6\u91cf\u3002\u56e0\u6b64\u6211\u4eec\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u516c\u5f0f\u4e3a\uff1a $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c} | w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m}\\right) \\ &=-\\log P\\left(u_{c} | \\hat{v}\\right) \\ &=-\\log \\frac{\\exp \\left(u_{c}^{T} \\hat{v}\\right)}{\\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right)} \\ &=-u_{c}^{T} \\hat{v}+\\log \\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right) \\end{aligned} $$ \u6211\u4eec\u4f7f\u7528 SGD \u6765\u66f4\u65b0\u6240\u6709\u76f8\u5173\u7684\u8bcd\u5411\u91cf \\(u_{c}\\) \u548c \\(v_{j}\\) \u3002SGD \u5bf9\u4e00\u4e2a\u7a97\u53e3\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u53c2\u6570\uff1a \\[ \\begin{array}{l}{\\mathcal{U}_{\\text {new}} \\leftarrow \\mathcal{U}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{U}} J} \\\\ {\\mathcal{V}_{\\text {old}} \\leftarrow \\mathcal{V}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{V}} J}\\end{array} \\] Skip-Gram Model Skip-Gram\u6a21\u578b\u4e0eCBOW\u5927\u4f53\u76f8\u540c\uff0c\u4f46\u662f\u4ea4\u6362\u4e86\u6211\u4eec\u7684 x \u548c y\uff0c\u5373 CBOW \u4e2d\u7684 x \u73b0\u5728\u662f y\uff0cy \u73b0\u5728\u662f x\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\uff08\u4e2d\u5fc3\u8bcd\uff09\u6211\u4eec\u8868\u793a\u4e3a x\uff0c\u8f93\u51fa\u5411\u91cf\u4e3a \\(y^{(j)}\\) \u3002\u6211\u4eec\u5b9a\u4e49\u7684 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \u662f\u548c CBOW \u4e00\u6837\u7684\u3002 \u751f\u6210\u4e2d\u5fc3\u8bcd\u7684 one-hot \u5411\u91cf \\(x\\in \\mathbb{R}^{|V|}\\) \u6211\u4eec\u5bf9\u4e2d\u5fc3\u8bcd \\(v_{c}=\\mathcal{V}x\\in \\mathbb{R}^{|V|}\\) \u5f97\u5230\u8bcd\u5d4c\u5165\u5411\u91cf \u751f\u6210\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}v_{c}\\) \u5c06\u5206\u6570\u5411\u91cf\u8f6c\u5316\u4e3a\u6982\u7387\uff0c \\(\\widehat{y}=softmax(z)\\) \u6ce8\u610f \\(\\widehat{y}_{c-m},...,\\widehat{y}_{c-1},\\widehat{y}_{c+1},...,\\widehat{y}_{c+m}\\) \u662f\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u89c2\u5bdf\u5230\u7684\u6982\u7387 \u6211\u4eec\u5e0c\u671b\u6211\u4eec\u751f\u6210\u7684\u6982\u7387\u5411\u91cf\u5339\u914d\u771f\u5b9e\u6982\u7387 \\(y^{(c-m)},...,y^{(c-1)},y^{(c+1)},...,y^{(c+m)}\\) \uff0cone-hot \u5411\u91cf\u662f\u5b9e\u9645\u7684\u8f93\u51fa\u3002 \u4e0b\u56fe\u662f Skip-Gram \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u548c CBOW \u6a21\u578b\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u6765\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u3002\u4e0e CBOW \u6a21\u578b\u7684\u4e00\u4e2a\u4e3b\u8981\u7684\u4e0d\u540c\u662f\u6211\u4eec\u5f15\u7528\u4e86\u4e00\u4e2a\u6734\u7d20\u7684\u8d1d\u53f6\u65af\u5047\u8bbe\u6765\u62c6\u5206\u6982\u7387\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u5f3a\uff08\u6734\u7d20\uff09\u7684\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u3002\u6362\u800c\u8a00\u4e4b\uff0c \u7ed9\u5b9a\u4e2d\u5fc3\u8bcd\uff0c\u6240\u6709\u8f93\u51fa\u7684\u8bcd\u662f\u5b8c\u5168\u72ec\u7acb\u7684 \u3002(\u5373\u516c\u5f0f1\u81f32\u884c) $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(w_{c-m+j} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(u_{c-m+j} | v_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} \\frac{\\exp \\left(u_{c-m+j}^{T} v_{c}\\right)}{\\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right)} \\ &=-\\sum_{j=0, j \\neq m}^{2 m} u_{c-m+j}^{T} v_{c}+2 m \\log \\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right) \\end{aligned} $$ \u901a\u8fc7\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0e\u672a\u77e5\u53c2\u6570\u76f8\u5173\u7684\u68af\u5ea6\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u901a\u8fc7 SGD \u6765\u66f4\u65b0\u5b83\u4eec\u3002 \u6ce8\u610f $$ \\begin{aligned} J &=-\\sum_{j=0, j \\neq m}^{2 m} \\log P\\left(u_{c-m+j} | v_{c}\\right) \\ &=\\sum_{j=0, j \\neq m}^{2 m} H\\left(\\hat{y}, y_{c-m+j}\\right) \\end{aligned} $$ \u5176\u4e2d \\(H(\\widehat{y},y_{c-m+j})\\) \u662f\u5411\u91cf \\(\\widehat{y}\\) \u7684\u6982\u7387\u548c one-hot \u5411\u91cf \\(y_{c-m+j}\\) \u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5\u3002 \u53ea\u6709\u4e00\u4e2a\u6982\u7387\u5411\u91cf \\(\\hat{y}\\) \u662f\u88ab\u8ba1\u7b97\u7684\u3002Skip-Gram \u5bf9\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u5355\u8bcd\u4e00\u89c6\u540c\u4ec1\uff1a\u8be5\u6a21\u578b\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u7684\u6982\u7387\uff0c\u800c\u4e0e\u5b83\u5230\u4e2d\u5fc3\u5355\u8bcd\u7684\u8ddd\u79bb\u65e0\u5173\u3002 Negative Sampling \u8ba9\u6211\u4eec\u518d\u56de\u5230\u76ee\u6807\u51fd\u6570\u4e0a\u3002\u6ce8\u610f\u5bf9 \\(|V|\\) \u7684\u6c42\u548c\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u4efb\u4f55\u7684\u66f4\u65b0\u6216\u8005\u5bf9\u76ee\u6807\u51fd\u6570\u7684\u8bc4\u4f30\u90fd\u8981\u82b1\u8d39 \\(O(|V|)\\) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4e0d\u53bb\u76f4\u63a5\u8ba1\u7b97\uff0c\u800c\u662f\u53bb\u6c42\u8fd1\u4f3c\u503c\u3002 \u5728\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u7684\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u4e0d\u53bb\u904d\u5386\u6574\u4e2a\u8bcd\u6c47\u8868\uff0c\u800c\u4ec5\u4ec5\u662f\u62bd\u53d6\u4e00\u4e9b\u8d1f\u6837\u4f8b\u3002\u6211\u4eec\u5bf9\u566a\u58f0\u5206\u5e03 \\(P_{n}(w)\\) \u201c\u62bd\u6837\u201d\uff0c\u8fd9\u4e2a\u6982\u7387\u662f\u548c\u8bcd\u9891\u7684\u6392\u5e8f\u76f8\u5339\u914d\u7684\u3002\u4e3a\u52a0\u5f3a\u5bf9\u95ee\u9898\u7684\u8868\u8ff0\u4ee5\u7eb3\u5165\u8d1f\u62bd\u6837\uff0c\u6211\u4eec\u53ea\u9700\u66f4\u65b0\u5176 \u76ee\u6807\u51fd\u6570 \u68af\u5ea6 \u66f4\u65b0\u89c4\u5219 Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u3002\u867d\u7136\u8d1f\u91c7\u6837\u662f\u57fa\u4e8e Skip-Gram \u6a21\u578b\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u5bf9\u4e00\u4e2a\u4e0d\u540c\u7684\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u4f18\u5316\u3002 \u8003\u8651\u4e00\u5bf9\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd \\((w,c)\\) \u3002\u8fd9\u8bcd\u5bf9\u662f\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u96c6\u5417\uff1f\u6211\u4eec\u901a\u8fc7 \\(P(D=1\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002\u76f8\u5e94\u5730\uff0c \\(P(D=0\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u4e0d\u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5bf9 \\(P(D=1\\mid w,c)\\) \u7528 sigmoid \u51fd\u6570\u5efa\u6a21\uff1a \\[ P(D=1 | w, c, \\theta)=\\sigma\\left(v_{c}^{T} v_{w}\\right)=\\frac{1}{1+e^{\\left(-v_{c}^{T} v_{w}\\right)}} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=1\\mid w,c)\\) \uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u4e0d\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=0\\mid w,c)\\) \u3002\u6211\u4eec\u5bf9\u8fd9\u4e24\u4e2a\u6982\u7387\u91c7\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7684\u65b9\u6cd5\uff08\u8fd9\u91cc\u6211\u4eec\u628a \\(\\theta\\) \u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0c\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u662f \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff09 \\[ \\begin{aligned} \\theta &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}} P(D=0 | w, c, \\theta) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}}(1-P(D=1 | w, c, \\theta)) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\sum_{(w, c) \\in D} \\log P(D=1 | w, c, \\theta)+\\sum_{(w, c) \\in \\widetilde{D}} \\log (1-P(D=1 | w, c, \\theta)) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(1-\\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}\\right) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\end{aligned} \\] \u6ce8\u610f\u6700\u5927\u5316\u4f3c\u7136\u51fd\u6570\u7b49\u540c\u4e8e\u6700\u5c0f\u5316\u8d1f\u5bf9\u6570\u4f3c\u7136\uff1a \\[ J=-\\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}-\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\] \u6ce8\u610f \\(\\widetilde{D}\\) \u662f\u201c\u5047\u7684\u201d\u6216\u8005\u201c\u8d1f\u7684\u201d\u8bed\u6599\u3002\u4f8b\u5982\u6211\u4eec\u6709\u53e5\u5b50\u7c7b\u4f3c\u201cstock boil fish is toy\u201d\uff0c\u8fd9\u79cd\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u51fa\u73b0\u65f6\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u6599\u5e93\u4e2d\u968f\u673a\u62bd\u6837\u51fa\u8d1f\u6837\u4f8b \\(\\widetilde{D}\\) \u3002 \u5bf9\u4e8e Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(c\\) \u6765\u89c2\u5bdf\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd \\(c-m+j\\) \u7684\u65b0\u76ee\u6807\u51fd\u6570\u4e3a \\[ -\\log \\sigma\\left(u_{c-m+j}^{T} \\cdot v_{c}\\right)-\\sum_{k=1}^{K} \\log \\sigma\\left(-\\tilde{u}_{k}^{T} \\cdot v_{c}\\right) \\] \u5bf9 CBOW \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u5411\u91cf \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1}+...+v_{c+m}}{2m}\\) \u6765\u89c2\u5bdf\u4e2d\u5fc3\u8bcd \\(u_{c}\\) \u7684\u65b0\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ -log\\,\\sigma(u_{c}^{T}\\cdot \\widehat{v})-\\sum_{k=1}^{K}log\\,\\sigma(-\\widetilde{u}_{k}^{T}\\cdot \\widehat{v}) \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\{\\widetilde{u}_{k}\\mid k=1...K\\}\\) \u662f\u4ece \\(P_{n}(w)\\) \u4e2d\u62bd\u6837\u3002\u6709\u5f88\u591a\u5173\u4e8e\u5982\u4f55\u5f97\u5230\u6700\u597d\u8fd1\u4f3c\u7684\u8ba8\u8bba\uff0c\u4ece\u5b9e\u9645\u6548\u679c\u770b\u6765\u6700\u597d\u7684\u662f\u6307\u6570\u4e3a \u00be \u7684 Unigram \u6a21\u578b\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u662f \u00be\uff1f\u4e0b\u9762\u6709\u4e00\u4e9b\u4f8b\u5982\u53ef\u80fd\u8ba9\u4f60\u6709\u4e00\u4e9b\u76f4\u89c2\u7684\u4e86\u89e3\uff1a \\[ \\begin{eqnarray} is: 0.9^{3/4} &=& 0.92 \\nonumber \\\\ Constitution: 0.09^{3/4}&=& 0.16 \\nonumber \\\\ bombastic:0.01^{3/4}&=& 0.032 \\nonumber \\end{eqnarray} \\] \u201cBombastic\u201d\u73b0\u5728\u88ab\u62bd\u6837\u7684\u6982\u7387\u662f\u4e4b\u524d\u7684\u4e09\u500d\uff0c\u800c\u201cis\u201d\u53ea\u6bd4\u4e4b\u524d\u7684\u624d\u63d0\u9ad8\u4e86\u4e00\u70b9\u70b9\u3002 Hierarchical Softmax Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86 hierarchical softmax\uff0c\u76f8\u6bd4\u666e\u901a\u7684 softmax \u8fd9\u662f\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6cd5\u3002 \u5728\u5b9e\u9645\u4e2d\uff0chierarchical softmax \u5bf9\u4f4e\u9891\u8bcd\u5f80\u5f80\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u8d1f\u91c7\u6837\u5bf9\u9ad8\u9891\u8bcd\u548c\u8f83\u4f4e\u7ef4\u5ea6\u5411\u91cf\u8868\u73b0\u5f97\u66f4\u597d \u3002 Hierarchical softmax \u4f7f\u7528\u4e00\u4e2a\u4e8c\u53c9\u6811\u6765\u8868\u793a\u8bcd\u8868\u4e2d\u7684\u6240\u6709\u8bcd\u3002\u6811\u4e2d\u7684\u6bcf\u4e2a\u53f6\u7ed3\u70b9\u90fd\u662f\u4e00\u4e2a\u5355\u8bcd\uff0c\u800c\u4e14\u53ea\u6709\u4e00\u6761\u8def\u5f84\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u3002\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u6ca1\u6709\u8bcd\u7684\u8f93\u51fa\u8868\u793a\u3002\u76f8\u53cd\uff0c\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\uff08\u6839\u8282\u70b9\u548c\u53f6\u7ed3\u70b9\u9664\u5916\uff09\u4e0e\u6a21\u578b\u8981\u5b66\u4e60\u7684\u5411\u91cf\u76f8\u5173\u8054\u3002\u5355\u8bcd\u4f5c\u4e3a\u8f93\u51fa\u5355\u8bcd\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\u4ece\u6839\u968f\u673a\u6e38\u8d70\u5230\u5355\u8bcd\u6240\u5bf9\u5e94\u7684\u53f6\u7684\u6982\u7387\u3002\u8ba1\u7b97\u6210\u672c\u53d8\u4e3a \\(O(log (|V|))\\) \u800c\u4e0d\u662f \\(O(|V|)\\) \u3002 \u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5411\u91cf \\(w_{i}\\) \u7684\u4e0b\u7684\u5355\u8bcd \\(w\\) \u7684\u6982\u7387 \\(p(w\\mid w_{i})\\) \uff0c\u7b49\u4e8e\u4ece\u6839\u7ed3\u70b9\u5f00\u59cb\u5230\u5bf9\u5e94 w \u7684\u53f6\u7ed3\u70b9\u7ed3\u675f\u7684\u968f\u673a\u6f2b\u6b65\u6982\u7387\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6700\u5927\u7684\u4f18\u52bf\u662f\u8ba1\u7b97\u6982\u7387\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ec5\u4ec5\u662f \\(O(log(|V|))\\) \uff0c\u5bf9\u5e94\u7740\u8def\u5f84\u7684\u957f\u5ea6\u3002 \u4e0b\u56fe\u662f Hierarchical softmax \u7684\u4e8c\u53c9\u6811\u793a\u610f\u56fe \u8ba9\u6211\u4eec\u5f15\u5165\u4e00\u4e9b\u6982\u5ff5\u3002\u4ee4 \\(L(w)\\) \u4e3a\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9 \\(w\\) \u7684\u8def\u5f84\u4e2d\u8282\u70b9\u6570\u76ee\u3002\u4f8b\u5982\uff0c\u4e0a\u56fe\u4e2d\u7684 \\(L(w_{2})\\) \u4e3a 3\u3002\u6211\u4eec\u5b9a\u4e49 \\(n(w,i)\\) \u4e3a\u4e0e\u5411\u91cf \\(v_{n(w,i)}\\) \u76f8\u5173\u7684\u8def\u5f84\u4e0a\u7b2c \\(i\\) \u4e2a\u7ed3\u70b9\u3002\u56e0\u6b64 \\(n(w,1)\\) \u662f\u6839\u7ed3\u70b9\uff0c\u800c \\(n(w,L(w))\\) \u662f \\(w\\) \u7684\u7236\u8282\u70b9\u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9 \\(n\\) \uff0c\u6211\u4eec\u4efb\u610f\u9009\u53d6\u4e00\u4e2a\u5b83\u7684\u5b50\u8282\u70b9\uff0c\u5b9a\u4e49\u4e3a \\(ch(n)\\) \uff08\u4e00\u822c\u662f\u5de6\u8282\u70b9\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6982\u7387\u4e3a \\[ p\\left(w | w_{i}\\right)=\\prod_{j=1}^{L(w)-1} \\sigma\\left([n(w, j+1)=\\operatorname{ch}(n(w, j))] \\cdot v_{n(w, j)}^{T} v_{w_{i}}\\right) \\] \u5176\u4e2d \\[ [x]=\\left\\{\\begin{array}{ll}{1} & {\\text { if } x \\text { is true }} \\\\ {-1} & {\\text { otherwise }}\\end{array}\\right. \\] \u8fd9\u4e2a\u516c\u5f0f\u770b\u8d77\u6765\u975e\u5e38\u590d\u6742\uff0c\u8ba9\u6211\u4eec\u7ec6\u7ec6\u68b3\u7406\u4e00\u4e0b\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5c06\u6839\u636e\u4ece\u6839\u8282\u70b9 \\((n(w,1))\\) \u5230\u53f6\u8282\u70b9 \\((w)\\) \u7684\u8def\u5f84\u7684\u5f62\u72b6\u6765\u8ba1\u7b97\u76f8\u4e58\u7684\u9879\u3002\u5982\u679c\u6211\u4eec\u5047\u8bbe \\(ch(n)\\) \u4e00\u76f4\u90fd\u662f \\(n\\) \u7684\u5de6\u8282\u70b9\uff0c\u7136\u540e\u5f53\u8def\u5f84\u5f80\u5de6\u65f6 \\([n(w,j+1)=ch(n(w,j))]\\) \u7684\u503c\u8fd4\u56de 1\uff0c\u5f80\u53f3\u5219\u8fd4\u56de 0\u3002 \u6b64\u5916\uff0c \\([n(w,j+1)=ch(n(w,j))]\\) \u63d0\u4f9b\u4e86\u5f52\u4e00\u5316\u7684\u4f5c\u7528\u3002\u5728\u8282\u70b9 \\(n\\) \u5904\uff0c\u5982\u679c\u6211\u4eec\u5c06\u53bb\u5f80\u5de6\u548c\u53f3\u8282\u70b9\u7684\u6982\u7387\u76f8\u52a0\uff0c\u5bf9\u4e8e \\(v_{n}^{T}v_{w_{i}}\\) \u7684\u4efb\u4f55\u503c\u5219\u53ef\u4ee5\u68c0\u67e5\uff0c \\[ \\sigma\\left(v_{n}^{T} v_{w_{i}}\\right)+\\sigma\\left(-v_{n}^{T} v_{w_{i}}\\right)=1 \\] \u5f52\u4e00\u5316\u4e5f\u4fdd\u8bc1\u4e86 \\(\\sum_{w=1}^{|V|}P(w\\mid w_{i})=1\\) \uff0c\u548c\u5728\u666e\u901a\u7684 softmax \u662f\u4e00\u6837\u7684\u3002 \u6700\u540e\u6211\u4eec\u8ba1\u7b97\u70b9\u79ef\u6765\u6bd4\u8f83\u8f93\u5165\u5411\u91cf \\(v_{w_{i}}\\) \u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u5411\u91cf \\(v_{n(w,j)}^{T}\\) \u7684\u76f8\u4f3c\u5ea6\u3002\u4e0b\u9762\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u4f8b\u5b50\u3002\u4ee5\u4e0a\u56fe\u4e2d\u7684 \\(w_{2}\\) \u4e3a\u4f8b\uff0c\u4ece\u6839\u8282\u70b9\u8981\u7ecf\u8fc7\u4e24\u6b21\u5de6\u8fb9\u7684\u8fb9\u548c\u4e00\u6b21\u53f3\u8fb9\u7684\u8fb9\u624d\u5230\u8fbe \\(w_{2}\\) \uff0c\u56e0\u6b64 \\[ \\begin{aligned} p\\left(w_{2} | w_{i}\\right) &=p\\left(n\\left(w_{2}, 1\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 2\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 3\\right), \\text { right }\\right) \\\\ &=\\sigma\\left(v_{n\\left(w_{2}, 1\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(v_{n\\left(w_{2}, 2\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(-v_{n\\left(w_{2}, 3\\right)}^{T} v_{w_{i}}\\right) \\end{aligned} \\] \u6211\u4eec\u8bad\u7ec3\u6a21\u578b\u7684\u76ee\u6807\u662f\u6700\u5c0f\u5316\u8d1f\u7684\u5bf9\u6570\u4f3c\u7136 \\(-log\\,P(w\\mid w_{i})\\) \u3002\u4e0d\u662f\u66f4\u65b0\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u800c\u662f\u66f4\u65b0\u66f4\u65b0\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u8282\u70b9\u7684\u5411\u91cf\u3002 \u8be5\u65b9\u6cd5\u7684\u901f\u5ea6\u7531\u6784\u5efa\u4e8c\u53c9\u6811\u7684\u65b9\u5f0f\u786e\u5b9a\uff0c\u5e76\u5c06\u8bcd\u5206\u914d\u7ed9\u53f6\u8282\u70b9\u3002Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u4f7f\u7528\u7684\u662f\u54c8\u592b\u66fc\u6811\uff0c\u5728\u6811\u4e2d\u5206\u914d\u9ad8\u9891\u8bcd\u5230\u8f83\u77ed\u7684\u8def\u5f84\u3002","title":"[Presentation]Word2Vec"},{"location":"%5BPresentation%5DWord2Vec/#human-language-and-word-meaning","text":"\u4eba\u7c7b\u4e4b\u6240\u4ee5\u6bd4\u7c7b\u4eba\u733f\u66f4\u201c\u806a\u660e\u201d\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u6709\u8bed\u8a00\uff0c\u56e0\u6b64\u662f\u4e00\u4e2a\u4eba\u673a\u7f51\u7edc\uff0c\u5176\u4e2d\u4eba\u7c7b\u8bed\u8a00\u4f5c\u4e3a\u7f51\u7edc\u8bed\u8a00\u3002\u4eba\u7c7b\u8bed\u8a00\u5177\u6709 \u4fe1\u606f\u529f\u80fd \u548c \u793e\u4f1a\u529f\u80fd \u3002 \u636e\u4f30\u8ba1\uff0c\u4eba\u7c7b\u8bed\u8a00\u53ea\u6709\u5927\u7ea65000\u5e74\u7684\u77ed\u6682\u5386\u3002\u8bed\u8a00\u662f\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e3b\u8981\u539f\u56e0\u3002\u5199\u4f5c\u662f\u53e6\u4e00\u4ef6\u8ba9\u4eba\u7c7b\u53d8\u5f97\u5f3a\u5927\u7684\u4e8b\u60c5\u3002\u5b83\u662f\u4f7f\u77e5\u8bc6\u80fd\u591f\u5728\u7a7a\u95f4\u4e0a\u4f20\u9001\u5230\u4e16\u754c\u5404\u5730\uff0c\u5e76\u5728\u65f6\u95f4\u4e0a\u4f20\u9001\u7684\u4e00\u79cd\u5de5\u5177\u3002 \u4f46\u662f\uff0c\u76f8\u8f83\u4e8e\u5982\u4eca\u7684\u4e92\u8054\u7f51\u7684\u4f20\u64ad\u901f\u5ea6\u800c\u8a00\uff0c\u4eba\u7c7b\u8bed\u8a00\u662f\u4e00\u79cd\u7f13\u6162\u7684\u8bed\u8a00\u3002\u7136\u800c\uff0c\u53ea\u9700\u4eba\u7c7b\u8bed\u8a00\u5f62\u5f0f\u7684\u51e0\u767e\u4f4d\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u6784\u5efa\u6574\u4e2a\u89c6\u89c9\u573a\u666f\u3002\u8fd9\u5c31\u662f\u81ea\u7136\u8bed\u8a00\u5982\u6b64\u8ff7\u4eba\u7684\u539f\u56e0\u3002 How do we represent the meaning of a word? meaning \u7528\u4e00\u4e2a\u8bcd\u3001\u8bcd\u7ec4\u7b49\u8868\u793a\u7684\u6982\u5ff5\u3002 \u4e00\u4e2a\u4eba\u60f3\u7528\u8bed\u8a00\u3001\u7b26\u53f7\u7b49\u6765\u8868\u8fbe\u7684\u60f3\u6cd5\u3002 \u8868\u8fbe\u5728\u4f5c\u54c1\u3001\u827a\u672f\u7b49\u65b9\u9762\u7684\u601d\u60f3 \u7406\u89e3\u610f\u4e49\u7684\u6700\u666e\u904d\u7684\u8bed\u8a00\u65b9\u5f0f( linguistic way ) : \u8bed\u8a00\u7b26\u53f7\u4e0e\u8bed\u8a00\u7b26\u53f7\u7684\u610f\u4e49\u7684\u8f6c\u5316 $$ \\boxed{\\text{signifier(symbol)}\\Leftrightarrow \\text{signified(idea or thing)}} \\ = \\textbf{denotational semantics} $$ denotational semantics \u6307\u79f0\u8bed\u4e49 How do we have usable meaning in a computer? WordNet , \u4e00\u4e2a\u5305\u542b\u540c\u4e49\u8bcd\u96c6\u548c\u4e0a\u4f4d\u8bcd(\u201cis a\u201d\u5173\u7cfb) synonym sets and hypernyms \u7684\u5217\u8868\u7684\u8f9e\u5178 Problems with resources like WordNet \u4f5c\u4e3a\u4e00\u4e2a\u8d44\u6e90\u5f88\u597d\uff0c\u4f46\u5ffd\u7565\u4e86\u7ec6\u5fae\u5dee\u522b \u4f8b\u5982\u201cproficient\u201d\u88ab\u5217\u4e3a\u201cgood\u201d\u7684\u540c\u4e49\u8bcd\u3002\u8fd9\u53ea\u5728\u67d0\u4e9b\u4e0a\u4e0b\u6587\u4e2d\u662f\u6b63\u786e\u7684\u3002 \u7f3a\u5c11\u5355\u8bcd\u7684\u65b0\u542b\u4e49 \u96be\u4ee5\u6301\u7eed\u66f4\u65b0 \u4f8b\u5982 wicked, badass, nifty, wizard, genius, ninja, bombest \u4e3b\u89c2\u7684 \u9700\u8981\u4eba\u7c7b\u52b3\u52a8\u6765\u521b\u9020\u548c\u8c03\u6574 \u65e0\u6cd5\u8ba1\u7b97\u5355\u8bcd\u76f8\u4f3c\u5ea6 Representing words as discrete symbols \u5728\u4f20\u7edf\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u628a\u8bcd\u8bed\u770b\u4f5c\u79bb\u6563\u7684\u7b26\u53f7: hotel, conference, motel - a localist representation\u3002\u5355\u8bcd\u53ef\u4ee5\u901a\u8fc7\u72ec\u70ed\u5411\u91cf(one-hot vectors\uff0c\u53ea\u6709\u4e00\u4e2a1\uff0c\u5176\u4f59\u5747\u4e3a0\u7684\u7a00\u758f\u5411\u91cf) \u3002\u5411\u91cf\u7ef4\u5ea6=\u8bcd\u6c47\u91cf(\u5982500,000)\u3002 \\[ motel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0] \\\\ hotel = [0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 1 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0 \\ 0] \\] Problem with words as discrete symbols \u6240\u6709\u5411\u91cf\u662f\u6b63\u4ea4\u7684\u3002\u5bf9\u4e8e\u72ec\u70ed\u5411\u91cf\uff0c\u6ca1\u6709\u5173\u4e8e\u76f8\u4f3c\u6027\u6982\u5ff5\uff0c\u5e76\u4e14\u5411\u91cf\u7ef4\u5ea6\u8fc7\u5927\u3002 Solutions \u4f7f\u7528\u7c7b\u4f3c WordNet \u7684\u5de5\u5177\u4e2d\u7684\u5217\u8868\uff0c\u83b7\u5f97\u76f8\u4f3c\u5ea6\uff0c\u4f46\u4f1a\u56e0\u4e0d\u591f\u5b8c\u6574\u800c\u5931\u8d25 \u5b66\u4e60\u5728\u5411\u91cf\u672c\u8eab\u4e2d\u7f16\u7801\u76f8\u4f3c\u6027 Representing words by their context Distributional semantics \uff1a\u4e00\u4e2a\u5355\u8bcd\u7684\u610f\u601d\u662f\u7531\u7ecf\u5e38\u51fa\u73b0\u5728\u5b83\u9644\u8fd1\u7684\u5355\u8bcd\u7ed9\u51fa\u7684 \u201cYou shall know a word by the company it keeps\u201d (J. R. Firth 1957: 11) \u73b0\u4ee3\u7edf\u8ba1NLP\u6700\u6210\u529f\u7684\u7406\u5ff5\u4e4b\u4e00 \u6709\u70b9\u7269\u4ee5\u7c7b\u805a\uff0c\u4eba\u4ee5\u7fa4\u5206\u7684\u611f\u89c9 \u5f53\u4e00\u4e2a\u5355\u8bcd \\(w\\) \u51fa\u73b0\u5728\u6587\u672c\u4e2d\u65f6\uff0c\u5b83\u7684\u4e0a\u4e0b\u6587\u662f\u51fa\u73b0\u5728\u5176\u9644\u8fd1\u7684\u4e00\u7ec4\u5355\u8bcd(\u5728\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\u4e2d)\u3002 \u4f7f\u7528 \\(w\\) \u7684\u8bb8\u591a\u4e0a\u4e0b\u6587\u6765\u6784\u5efa \\(w\\) \u7684\u8868\u793a","title":"Human language and word meaning"},{"location":"%5BPresentation%5DWord2Vec/#word2vec-introduction","text":"\u6211\u4eec\u4e3a\u6bcf\u4e2a\u5355\u8bcd\u6784\u5efa\u4e00\u4e2a \u5bc6\u96c6 \u7684\u5411\u91cf\uff0c\u4f7f\u5176\u4e0e\u51fa\u73b0\u5728\u76f8\u4f3c\u4e0a\u4e0b\u6587\u4e2d\u7684\u5355\u8bcd\u5411\u91cf\u76f8\u4f3c \u8bcd\u5411\u91cf word vectors \u6709\u65f6\u88ab\u79f0\u4e3a\u8bcd\u5d4c\u5165 word embeddings \u6216\u8bcd\u8868\u793a word representations \u5b83\u4eec\u662f\u5206\u5e03\u5f0f\u8868\u793a distributed representation Word2vec (Mikolov et al. 2013)\u662f\u4e00\u4e2a\u5b66\u4e60\u5355\u8bcd\u5411\u91cf\u7684 \u6846\u67b6 IDEA \uff1a \u6211\u4eec\u6709\u5927\u91cf\u7684\u6587\u672c (corpus means 'body' in Latin. \u590d\u6570\u4e3acorpora) \u56fa\u5b9a\u8bcd\u6c47\u8868\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u90fd\u7531\u4e00\u4e2a\u5411\u91cf\u8868\u793a \u6587\u672c\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e \\(t\\) \uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e0a\u4e0b\u6587(\u201c\u5916\u90e8\u201d)\u5355\u8bcd \\(o\\) \u4f7f\u7528 \\(c\\) \u548c \\(o\\) \u7684 \u8bcd\u5411\u91cf\u7684\u76f8\u4f3c\u6027 \u6765\u8ba1\u7b97\u7ed9\u5b9a \\(c\\) \u7684 \\(o\\) \u7684 \u6982\u7387 (\u53cd\u4e4b\u4ea6\u7136) \u4e0d\u65ad\u8c03\u6574\u8bcd\u5411\u91cf \u6765\u6700\u5927\u5316\u8fd9\u4e2a\u6982\u7387 \u4e0b\u56fe\u4e3a\u7a97\u53e3\u5927\u5c0f \\(j=2\\) \u65f6\u7684 \\(P\\left(w_{t+j} | w_{t}\\right)\\) \u8ba1\u7b97\u8fc7\u7a0b\uff0ccenter word\u5206\u522b\u4e3a \\(into\\) \u548c \\(banking\\)","title":"Word2vec introduction"},{"location":"%5BPresentation%5DWord2Vec/#word2vec-objective-function","text":"\u5bf9\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e \\(t=1, \\ldots, T\\) \uff0c\u5728\u5927\u5c0f\u4e3a \\(m\\) \u7684\u56fa\u5b9a\u7a97\u53e3\u5185\u9884\u6d4b\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(w_j\\) \\[ Likelihoood = L(\\theta) = \\prod^{T}_{t=1} \\prod_{-m \\leq j \\leq m \\atop j \\neq 0} P(w_{t+j} | w_{t} ; \\theta) \\] \u5176\u4e2d\uff0c \\(\\theta\\) \u4e3a\u6240\u6709\u9700\u8981\u4f18\u5316\u7684\u53d8\u91cf \u76ee\u6807\u51fd\u6570 \\(J(\\theta)\\) (\u6709\u65f6\u88ab\u79f0\u4e3a\u4ee3\u4ef7\u51fd\u6570\u6216\u635f\u5931\u51fd\u6570) \u662f(\u5e73\u5747)\u8d1f\u5bf9\u6570\u4f3c\u7136 \\[ J(\\theta)=-\\frac{1}{T} \\log L(\\theta)=-\\frac{1}{T} \\sum_{t=1}^{T} \\sum_{-m \\leq j \\leq m \\atop j \\neq 0} \\log P\\left(w_{t+j} | w_{t} ; \\theta\\right) \\] \u5176\u4e2dlog\u5f62\u5f0f\u662f\u65b9\u4fbf\u5c06\u8fde\u4e58\u8f6c\u5316\u4e3a\u6c42\u548c\uff0c\u8d1f\u53f7\u662f\u5e0c\u671b\u5c06\u6781\u5927\u5316\u4f3c\u7136\u7387\u8f6c\u5316\u4e3a\u6781\u5c0f\u5316\u635f\u5931\u51fd\u6570\u7684\u7b49\u4ef7\u95ee\u9898\u3002 \u5728\u8fde\u4e58\u4e4b\u524d\u4f7f\u7528log\u8f6c\u5316\u4e3a\u6c42\u548c\u975e\u5e38\u6709\u6548\uff0c\u7279\u522b\u662f\u5728\u505a\u4f18\u5316\u65f6 $$ \\log \\prod_i x_i = \\sum_i \\log x_i $$ \u6700\u5c0f\u5316\u76ee\u6807\u51fd\u6570 \\(\\Leftrightarrow\\) \u6700\u5927\u5316\u9884\u6d4b\u7cbe\u5ea6 \u95ee\u9898 \uff1a\u5982\u4f55\u8ba1\u7b97 \\(P(w_{t+j} | w_{t} ; \\theta)\\) \uff1f \u56de\u7b54 \uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u5355\u8bcd\u90fd\u662f\u7528\u4e24\u4e2a\u5411\u91cf \\(v_w\\) \u5f53 \\(w\\) \u662f\u4e2d\u5fc3\u8bcd\u65f6 \\(u_w\\) \u5f53 \\(w\\) \u662f\u4e0a\u4e0b\u6587\u8bcd\u65f6 \u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u4e2d\u5fc3\u8bcd \\(c\\) \u548c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u516c\u5f0f\u4e2d\uff0c\u5411\u91cf \\(u_o\\) \u548c\u5411\u91cf \\(v_c\\) \u8fdb\u884c\u70b9\u4e58\u3002\u5411\u91cf\u4e4b\u95f4\u8d8a\u76f8\u4f3c\uff0c\u70b9\u4e58\u7ed3\u679c\u8d8a\u5927\uff0c\u4ece\u800c\u5f52\u4e00\u5316\u540e\u5f97\u5230\u7684\u6982\u7387\u503c\u4e5f\u8d8a\u5927\u3002\u6a21\u578b\u7684\u8bad\u7ec3\u6b63\u662f\u4e3a\u4e86\u4f7f\u5f97\u5177\u6709\u76f8\u4f3c\u4e0a\u4e0b\u6587\u7684\u5355\u8bcd\uff0c\u5177\u6709\u76f8\u4f3c\u7684\u5411\u91cf\u3002","title":"Word2vec objective function"},{"location":"%5BPresentation%5DWord2Vec/#word2vec-prediction-function","text":"\\[ P(o | c)=\\frac{\\exp \\left(u_{o}^{T} v_{c}\\right)}{\\sum_{w \\in V} \\exp \\left(u_{w}^{T} v_{c}\\right)} \\] \u53d6\u5e42\u4f7f\u4efb\u4f55\u6570\u90fd\u4e3a\u6b63 \u70b9\u79ef\u6bd4\u8f83o\u548cc\u7684\u76f8\u4f3c\u6027 \\(u^{T} v=u . v=\\sum_{i=1}^{n} u_{i} v_{i}\\) \uff0c\u70b9\u79ef\u8d8a\u5927\u5219\u6982\u7387\u8d8a\u5927 \u5206\u6bcd\uff1a\u5bf9\u6574\u4e2a\u8bcd\u6c47\u8868\u8fdb\u884c\u6807\u51c6\u5316\uff0c\u4ece\u800c\u7ed9\u51fa\u6982\u7387\u5206\u5e03 softmax function \\(\\mathbb{R}^{n} \\rightarrow \\mathbb{R}^{n}\\) $$ \\operatorname{softmax}\\left(x_{i}\\right)=\\frac{\\exp \\left(x_{i}\\right)}{\\sum_{j=1}^{n} \\exp \\left(x_{j}\\right)}=p_{i} $$ \u5c06\u4efb\u610f\u503c \\(x_i\\) \u6620\u5c04\u5230\u6982\u7387\u5206\u5e03 \\(p_i\\) max \uff1a\u56e0\u4e3a\u653e\u5927\u4e86\u6700\u5927\u7684\u6982\u7387 soft \uff1a\u56e0\u4e3a\u4ecd\u7136\u4e3a\u8f83\u5c0f\u7684 \\(x_i\\) \u8d4b\u4e88\u4e86\u4e00\u5b9a\u6982\u7387 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5e38\u7528 \u9996\u5148\u6211\u4eec\u968f\u673a\u521d\u59cb\u5316 \\(u_{w}\\in\\mathbb{R}^d\\) \u548c \\(v_{w}\\in\\mathbb{R}^d\\) \uff0c\u800c\u540e\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u8fdb\u884c\u66f4\u65b0 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=\\frac{\\partial}{\\partial v_c}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial v_c}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)} \\end{align} \\] \u504f\u5bfc\u6570\u53ef\u4ee5\u79fb\u8fdb\u6c42\u548c\u4e2d\uff0c\u5bf9\u5e94\u4e0a\u65b9\u516c\u5f0f\u7684\u6700\u540e\u4e24\u884c\u7684\u63a8\u5bfc $$ \\frac{\\partial}{\\partial x}\\sum_iy_i = \\sum_i\\frac{\\partial}{\\partial x}y_i $$ \u6211\u4eec\u53ef\u4ee5\u5bf9\u4e0a\u8ff0\u7ed3\u679c\u91cd\u65b0\u6392\u5217\u5982\u4e0b\uff0c\u7b2c\u4e00\u9879\u662f\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\uff0c\u7b2c\u4e8c\u9879\u662f\u9884\u6d4b\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u3002\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\uff0c\u6a21\u578b\u7684\u9884\u6d4b\u4e0a\u4e0b\u6587\u5c06\u9010\u6b65\u63a5\u8fd1\u771f\u6b63\u7684\u4e0a\u4e0b\u6587\u3002 \\[ \\begin{align} \\frac{\\partial}{\\partial v_c}\\log P(o|c) &=u_o-\\frac{\\sum_{w\\in V}\\exp(u_w^Tv_c)u_w}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=u_o-\\sum_{w\\in V}\\frac{\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}u_w\\\\ &=u_o-\\sum_{w\\in V}P(w|c)u_w \\end{align} \\] \u518d\u5bf9 \\(u_o\\) \u8fdb\u884c\u504f\u5fae\u5206\u8ba1\u7b97\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 \\(u_o\\) \u662f \\(u_{w=o}\\) \u7684\u7b80\u5199\uff0c\u6545\u53ef\u77e5 \\(\\frac{\\partial}{\\partial u_o}\\sum_{w \\in V } u_w^T v_c = \\frac{\\partial}{\\partial u_o} u_o^T v_c = \\frac{\\partial u_o}{\\partial u_o}v_c + \\frac{\\partial v_c}{\\partial u_o}u_o= v_c\\) \\[ \\begin{align} \\frac{\\partial}{\\partial u_o}\\log P(o|c) &=\\frac{\\partial}{\\partial u_o}\\log \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(\\log \\exp(u_o^Tv_c)-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=\\frac{\\partial}{\\partial u_o}\\left(u_o^Tv_c-\\log{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\right)\\\\ &=v_c-\\frac{\\sum\\frac{\\partial}{\\partial u_o}\\exp(u_w^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)v_c}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}\\\\ &=v_c - \\frac{\\exp(u_o^Tv_c)}{\\sum_{w\\in V}\\exp(u_w^Tv_c)}v_c\\\\ &=v_c - P(o|c)v_c\\\\ &=(1-P(o|c))v_c \\end{align} \\] \u53ef\u4ee5\u7406\u89e3\uff0c\u5f53 \\(P(o|c) \\to 1\\) \uff0c\u5373\u901a\u8fc7\u4e2d\u5fc3\u8bcd \\(c\\) \u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u9884\u6d4b\u4e0a\u4e0b\u6587\u8bcd \\(o\\) \uff0c\u6b64\u65f6\u6211\u4eec\u4e0d\u9700\u8981\u8c03\u6574 \\(u_o\\) \uff0c\u53cd\u4e4b\uff0c\u5219\u76f8\u5e94\u8c03\u6574 \\(u_o\\) \u3002","title":"Word2vec prediction function"},{"location":"%5BPresentation%5DWord2Vec/#deeper","text":"\u4e24\u4e2a\u7b97\u6cd5 \uff1acontinuous bag-of-words\uff08CBOW\uff09\u548c skip-gram\u3002CBOW \u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u5468\u56f4\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd\u6765\u9884\u6d4b\u8be5\u8bcd\u7684\u8bcd\u5411\u91cf\u3002skip-gram \u5219\u76f8\u53cd\uff0c\u662f\u6839\u636e\u4e2d\u5fc3\u8bcd\u9884\u6d4b\u5468\u56f4\u4e0a\u4e0b\u6587\u7684\u8bcd\u7684\u6982\u7387\u5206\u5e03\u3002 \u4e24\u4e2a\u8bad\u7ec3\u65b9\u6cd5 \uff1anegative sampling \u548c hierarchical softmax\u3002Negative sampling \u901a\u8fc7\u62bd\u53d6\u8d1f\u6837\u672c\u6765\u5b9a\u4e49\u76ee\u6807\uff0chierarchical softmax \u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u6709\u6548\u7684\u6811\u7ed3\u6784\u6765\u8ba1\u7b97\u6240\u6709\u8bcd\u7684\u6982\u7387\u6765\u5b9a\u4e49\u76ee\u6807\u3002 Language Models (Unigrams, Bigrams, etc.) \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u6765\u4e3a\u4e00\u7cfb\u5217\u7684\u5355\u8bcd\u5206\u914d\u6982\u7387\u3002\u6211\u4eec\u4ece\u4e00\u4e2a\u4f8b\u5b50\u5f00\u59cb\uff1a \u201cThe cat jumped over the puddle\u201d \u4e00\u4e2a\u597d\u7684\u8bed\u8a00\u6a21\u578b\u4f1a\u7ed9\u8fd9\u4e2a\u53e5\u5b50\u5f88\u9ad8\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5728\u53e5\u6cd5\u548c\u8bed\u4e49\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168\u6709\u6548\u7684\u53e5\u5b50\u3002\u76f8\u4f3c\u5730\uff0c\u53e5\u5b50\u201cstock boil fish is toy\u201d\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u3002\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u79f0\u4e3a\u5bf9\u7ed9\u5b9a n \u4e2a\u8bcd\u7684\u5e8f\u5217\u7684\u6982\u7387\u662f\uff1a $$ P(w_{1}, w_{2}, \\ldots, w_{n}) $$ \u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u5143\u8bed\u8a00\u6a21\u578b\u65b9\u6cd5( Unigram model )\uff0c\u5047\u8bbe\u5355\u8bcd\u7684\u51fa\u73b0\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u4ece\u800c\u5206\u89e3\u6982\u7387 $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=1}^{n} P\\left(w_{i}\\right) $$ \u4f46\u662f\u6211\u4eec\u77e5\u9053\u8fd9\u662f\u4e0d\u5927\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u4e0b\u4e00\u4e2a\u5355\u8bcd\u662f\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u524d\u9762\u7684\u5355\u8bcd\u5e8f\u5217\u7684\u3002\u5982\u679c\u4f7f\u7528\u4e0a\u8ff0\u7684\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u5177\u6709\u5f88\u9ad8\u7684\u6982\u7387\u3002\u6240\u4ee5\u6211\u4eec\u8ba9\u5e8f\u5217\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u5e8f\u5217\u4e2d\u7684\u5355\u8bcd\u548c\u5176\u65c1\u8fb9\u7684\u5355\u8bcd\u7684\u6210\u5bf9\u6982\u7387\u3002\u6211\u4eec\u79f0\u4e4b\u4e3a bigram \u6a21\u578b\uff1a $$ P\\left(w_{1}, w_{2}, \\cdots, w_{n}\\right)=\\prod_{i=2}^{n} P\\left(w_{i} | w_{i-1}\\right) $$ \u4f46\u662f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u6709\u70b9\u7b80\u5355\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u5173\u5fc3\u4e00\u5bf9\u90bb\u8fd1\u7684\u5355\u8bcd\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u6574\u4e2a\u53e5\u5b50\u6765\u8003\u8651\u3002\u4f46\u662f\u6211\u4eec\u5c06\u770b\u5230\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u6709\u663e\u8457\u7684\u63d0\u5347\u3002\u8003\u8651\u5728\u8bcd-\u8bcd\u5171\u73b0\u77e9\u9635\u4e2d\uff0c\u5171\u73b0\u7a97\u53e3\u4e3a 1\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u80fd\u5f97\u5230\u8fd9\u6837\u7684\u6210\u5bf9\u7684\u6982\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u53c8\u9700\u8981\u8ba1\u7b97\u548c\u5b58\u50a8\u5927\u91cf\u6570\u636e\u96c6\u7684\u5168\u5c40\u4fe1\u606f\u3002 \u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u7406\u89e3\u4e86\u5982\u4f55\u8003\u8651\u5177\u6709\u6982\u7387\u7684\u5355\u8bcd\u5e8f\u5217\uff0c\u90a3\u4e48\u8ba9\u6211\u4eec\u89c2\u5bdf\u4e00\u4e9b\u80fd\u591f\u5b66\u4e60\u8fd9\u4e9b\u6982\u7387\u7684\u793a\u4f8b\u6a21\u578b\u3002 Continuous Bag of Words Model (CBOW) \u8fd9\u4e00\u65b9\u6cd5\u662f\u628a {\"The\",\"cat\",\"over\",\"the\",\"puddle\"} \u4f5c\u4e3a\u4e0a\u4e0b\u6587\uff0c\u5e0c\u671b\u4ece\u8fd9\u4e9b\u8bcd\u4e2d\u80fd\u591f\u9884\u6d4b\u6216\u8005\u751f\u6210\u4e2d\u5fc3\u8bcd\u201cjumped\u201d\u3002\u8fd9\u6837\u7684\u6a21\u578b\u6211\u4eec\u79f0\u4e4b\u4e3a continuous bag-of-words\uff08CBOW\uff09\u6a21\u578b\u3002 \u5b83\u662f\u4ece\u4e0a\u4e0b\u6587\u4e2d\u9884\u6d4b\u4e2d\u5fc3\u8bcd\u7684\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u5e0c\u671b\u5b66\u4e60\u4e24\u4e2a\u5411\u91cf \\(v\\) (\u8f93\u5165\u5411\u91cf) \u5f53\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d \\(u\\) (\u8f93\u51fa\u5411\u91cf) \u5f53\u8bcd\u662f\u4e2d\u5fc3\u8bcd \u9996\u5148\u6211\u4eec\u8bbe\u5b9a\u5df2\u77e5\u53c2\u6570\u3002\u4ee4\u6211\u4eec\u6a21\u578b\u7684\u5df2\u77e5\u53c2\u6570\u662f one-hot \u5f62\u5f0f\u7684\u8bcd\u5411\u91cf\u8868\u793a\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\u6216\u8005\u4e0a\u4e0b\u6587\u6211\u4eec\u7528 \\(x^{(c)}\\) \u8868\u793a\uff0c\u8f93\u51fa\u7528 \\(y^{(c)}\\) \u8868\u793a\u3002\u5728 CBOW \u6a21\u578b\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\uff0c\u56e0\u6b64\u6211\u4eec\u628a y \u79f0\u4e3a\u662f\u5df2\u77e5\u4e2d\u5fc3\u8bcd\u7684\u7684 one-hot \u5411\u91cf\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u5b9a\u4e49\u6a21\u578b\u7684\u672a\u77e5\u53c2\u6570\u3002 \u9996\u5148\u6211\u4eec\u5bf9 CBOW \u6a21\u578b\u4f5c\u51fa\u4ee5\u4e0b\u5b9a\u4e49 \\(w_{i}\\) \uff1a\u8bcd\u6c47\u8868 \\(V\\) \u4e2d\u7684\u5355\u8bcd \\(i\\) \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \uff1a\u8f93\u5165\u8bcd\u77e9\u9635 \\(v_{i} \uff1a \\mathcal{V}\\) \u7684\u7b2c i \u5217\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u5165\u5411\u91cf\u8868\u793a \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \uff1a\u8f93\u51fa\u8bcd\u77e9\u9635 \\(u_{i} \uff1a \\mathcal{U}\\) \u7684\u7b2c i \u884c\uff0c\u5355\u8bcd \\(w_{i}\\) \u7684\u8f93\u51fa\u5411\u91cf\u8868\u793a \u6211\u4eec\u521b\u5efa\u4e24\u4e2a\u77e9\u9635\uff0c \\(\\mathcal{V}\\in \\mathbb{R}^{n\\times |V|}\\) \u548c \\(\\mathcal{U}\\in \\mathbb{R}^{|V|\\times n}\\) \u3002\u5176\u4e2d n \u662f\u5d4c\u5165\u7a7a\u95f4\u7684\u4efb\u610f\u7ef4\u5ea6\u5927\u5c0f\u3002 \\(\\mathcal{V}\\) \u662f\u8f93\u5165\u8bcd\u77e9\u9635\uff0c\u4f7f\u5f97\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{V}\\) \u7684\u7b2c i \u5217\u662f\u8bcd \\(w_{i}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49\u8fd9\u4e2a \\(n \\times 1\\) \u7684\u5411\u91cf\u4e3a \\(v_{i}\\) \u3002\u76f8\u4f3c\u5730\uff0c \\(\\mathcal{U}\\) \u662f\u8f93\u51fa\u8bcd\u77e9\u9635\u3002\u5f53\u5176\u4e3a\u6a21\u578b\u7684\u8f93\u5165\u65f6\uff0c \\(\\mathcal{U}\\) \u7684\u7b2c j \u884c\u662f\u8bcd \\(w_{j}\\) \u7684 n \u7ef4\u5d4c\u5165\u5411\u91cf\u3002\u6211\u4eec\u5b9a\u4e49 \\(\\mathcal{U}\\) \u7684\u8fd9\u884c\u4e3a \\(u_{j}\\) \u3002\u6ce8\u610f\u5b9e\u9645\u4e0a\u5bf9\u6bcf\u4e2a\u8bcd \\(w_{i}\\) \u6211\u4eec\u9700\u8981\u5b66\u4e60\u4e24\u4e2a\u8bcd\u5411\u91cf\uff08\u5373\u8f93\u5165\u8bcd\u5411\u91cf \\(v_{i}\\) \u548c\u8f93\u51fa\u8bcd\u5411\u91cf \\(u_{i}\\) \uff09\u3002 \u6211\u4eec\u5c06\u8fd9\u4e2a\u6a21\u578b\u5206\u89e3\u4e3a\u4ee5\u4e0b\u6b65\u9aa4 \u6211\u4eec\u4e3a\u5927\u5c0f\u4e3a m \u7684\u8f93\u5165\u4e0a\u4e0b\u6587\uff0c\u751f\u6210 one-hot \u8bcd\u5411\u91cf \\( \\((x^{(c-m)},...,x^{(c-1)},x^{(c+1)},...,x^{(c+m)}\\in \\mathbb{R}^{|V|})\\) \\) \u6211\u4eec\u4ece\u4e0a\u4e0b\u6587 \\((v_{c-m}=\\mathcal{V}x^{(c-m)},v_{c-m+1}=\\mathcal{V}x^{(c-m+1)},...,v_{c+m}=\\mathcal{V}x^{(c+m)}\\in \\mathbb{R}^{n})\\) \u5f97\u5230\u5d4c\u5165\u8bcd\u5411\u91cf\u3002 \u5bf9\u4e0a\u8ff0\u7684\u5411\u91cf\u6c42\u5e73\u5747\u503c \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1+...+v_{c+m}}}{2m}\\in \\mathbb{R}^{n}\\) \u3002 \u751f\u6210\u4e00\u4e2a\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}\\widehat{v}\\in \\mathbb{R}^{|V|}\\) \u3002\u5f53\u76f8\u4f3c\u5411\u91cf\u7684\u70b9\u79ef\u8d8a\u9ad8\uff0c\u5c31\u4f1a\u4ee4\u5230\u76f8\u4f3c\u7684\u8bcd\u66f4\u4e3a\u9760\u8fd1\uff0c\u4ece\u800c\u83b7\u5f97\u66f4\u9ad8\u7684\u5206\u6570\u3002\u5c06\u5206\u6570\u8f6c\u6362\u4e3a\u6982\u7387 \\(\\widehat{y}=softmax(z)\\in \\mathbb{R}^{|V|}\\) \u3002 \u8fd9\u91cc softmax \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u51fd\u6570\u3002\u5b83\u5c06\u4e00\u4e2a\u5411\u91cf\u8f6c\u6362\u4e3a\u53e6\u5916\u4e00\u4e2a\u5411\u91cf\uff0c\u5176\u4e2d\u8f6c\u6362\u540e\u7684\u5411\u91cf\u7684\u7b2c \\(i\\) \u4e2a\u5143\u7d20\u662f \\(\\frac{e^{\\widehat{y}_i}}{\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}}\\) \u3002\u56e0\u4e3a\u8be5\u51fd\u6570\u662f\u4e00\u4e2a\u6307\u6570\u51fd\u6570\uff0c\u6240\u4ee5\u503c\u4e00\u5b9a\u4e3a\u6b63\u6570\uff1b\u901a\u8fc7\u9664\u4ee5 \\(\\sum_{k=1}^{|V|}e^{\\widehat{y}_k}\\) \u6765\u5f52\u4e00\u5316\u5411\u91cf\uff08\u4f7f\u5f97 \\(\\sum_{k=1}^{|V|}\\widehat{y}_k=1\\) \uff09\u5f97\u5230\u6982\u7387\u3002 \u6211\u4eec\u5e0c\u671b\u751f\u6210\u7684\u6982\u7387 \\(\\widehat{y} \\in \\mathbb{R}^{|V|}\\) \u4e0e\u5b9e\u9645\u7684\u6982\u7387 \\(y \\in \\mathbb{R}^{|V|}\\) \u5339\u914d\u3002\u4f7f\u5f97\u5176\u521a\u597d\u662f\u5b9e\u9645\u7684\u8bcd\u5c31\u662f\u8fd9\u4e2a one-hot \u5411\u91cf\u3002 \u4e0b\u56fe\u662f CBOW \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u5982\u679c\u6709 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff0c\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u6a21\u578b\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u90a3\u6211\u4eec\u5982\u4f55\u5b66\u4e60\u8fd9\u4e24\u4e2a\u77e9\u9635\u5462\uff1f\u8fd9\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u3002\u4e00\u822c\u6211\u4eec\u60f3\u4ece\u4e00\u4e9b\u771f\u5b9e\u7684\u6982\u7387\u4e2d\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\uff0c\u4fe1\u606f\u8bba\u63d0\u4f9b\u4e86\u4e00\u4e2a \u5ea6\u91cf\u4e24\u4e2a\u6982\u7387\u5206\u5e03\u7684\u8ddd\u79bb \u7684\u65b9\u6cd5\u3002\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u4e00\u4e2a\u5e38\u89c1\u7684\u8ddd\u79bb/\u635f\u5931\u65b9\u6cd5\uff0c\u4ea4\u53c9\u71b5 \\(H(\\widehat{y}, y)\\) \u3002 \u5728\u79bb\u6563\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ea4\u53c9\u71b5\u53ef\u4ee5\u76f4\u89c2\u5730\u5f97\u51fa\u635f\u5931\u51fd\u6570\u7684\u516c\u5f0f $$ H(\\hat{y}, y)=-\\sum_{j=1}^{|V|} y_{j} \\log \\left(\\hat{y}_{j}\\right) $$ \u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0cy \u662f one-hot \u5411\u91cf\u3002\u56e0\u6b64\u4e0a\u9762\u7684\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a $$ H(\\widehat{y}, y)= - y_{j}\\,log(\\widehat{y}_{j}) $$ c \u662f\u6b63\u786e\u8bcd\u7684 one-hot \u5411\u91cf\u7684\u7d22\u5f15\u3002\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u6211\u4eec\u7684\u9884\u6d4b\u662f\u5b8c\u7f8e\u5e76\u4e14 \\(\\widehat{y}_{c}=1\\) \u7684\u60c5\u51b5\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97 \\(H(\\widehat{y}, y)=-1\\,log(1)=0\\) \u3002\u56e0\u6b64\uff0c\u5bf9\u4e00\u4e2a\u5b8c\u7f8e\u7684\u9884\u6d4b\uff0c\u6211\u4eec\u4e0d\u4f1a\u9762\u4e34\u4efb\u4f55\u60e9\u7f5a\u6216\u8005\u635f\u5931\u3002\u73b0\u5728\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u76f8\u53cd\u7684\u60c5\u51b5\uff0c\u9884\u6d4b\u975e\u5e38\u5dee\u5e76\u4e14 \\(\\widehat{y}_{c}=0.01\\) \u3002\u548c\u524d\u9762\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u635f\u5931 \\(H(\\widehat{y}, y)=-1\\,log(0.01)=4.605\\) \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u6982\u7387\u5206\u5e03\uff0c\u4ea4\u53c9\u71b5\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u8ddd\u79bb\u5ea6\u91cf\u3002\u56e0\u6b64\u6211\u4eec\u7684\u4f18\u5316\u76ee\u6807\u51fd\u6570\u516c\u5f0f\u4e3a\uff1a $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c} | w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m}\\right) \\ &=-\\log P\\left(u_{c} | \\hat{v}\\right) \\ &=-\\log \\frac{\\exp \\left(u_{c}^{T} \\hat{v}\\right)}{\\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right)} \\ &=-u_{c}^{T} \\hat{v}+\\log \\sum_{j=1}^{|V|} \\exp \\left(u_{j}^{T} \\hat{v}\\right) \\end{aligned} $$ \u6211\u4eec\u4f7f\u7528 SGD \u6765\u66f4\u65b0\u6240\u6709\u76f8\u5173\u7684\u8bcd\u5411\u91cf \\(u_{c}\\) \u548c \\(v_{j}\\) \u3002SGD \u5bf9\u4e00\u4e2a\u7a97\u53e3\u8ba1\u7b97\u68af\u5ea6\u548c\u66f4\u65b0\u53c2\u6570\uff1a \\[ \\begin{array}{l}{\\mathcal{U}_{\\text {new}} \\leftarrow \\mathcal{U}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{U}} J} \\\\ {\\mathcal{V}_{\\text {old}} \\leftarrow \\mathcal{V}_{\\text {old}}-\\alpha \\nabla_{\\mathcal{V}} J}\\end{array} \\] Skip-Gram Model Skip-Gram\u6a21\u578b\u4e0eCBOW\u5927\u4f53\u76f8\u540c\uff0c\u4f46\u662f\u4ea4\u6362\u4e86\u6211\u4eec\u7684 x \u548c y\uff0c\u5373 CBOW \u4e2d\u7684 x \u73b0\u5728\u662f y\uff0cy \u73b0\u5728\u662f x\u3002\u8f93\u5165\u7684 one-hot \u5411\u91cf\uff08\u4e2d\u5fc3\u8bcd\uff09\u6211\u4eec\u8868\u793a\u4e3a x\uff0c\u8f93\u51fa\u5411\u91cf\u4e3a \\(y^{(j)}\\) \u3002\u6211\u4eec\u5b9a\u4e49\u7684 \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \u662f\u548c CBOW \u4e00\u6837\u7684\u3002 \u751f\u6210\u4e2d\u5fc3\u8bcd\u7684 one-hot \u5411\u91cf \\(x\\in \\mathbb{R}^{|V|}\\) \u6211\u4eec\u5bf9\u4e2d\u5fc3\u8bcd \\(v_{c}=\\mathcal{V}x\\in \\mathbb{R}^{|V|}\\) \u5f97\u5230\u8bcd\u5d4c\u5165\u5411\u91cf \u751f\u6210\u5206\u6570\u5411\u91cf \\(z = \\mathcal{U}v_{c}\\) \u5c06\u5206\u6570\u5411\u91cf\u8f6c\u5316\u4e3a\u6982\u7387\uff0c \\(\\widehat{y}=softmax(z)\\) \u6ce8\u610f \\(\\widehat{y}_{c-m},...,\\widehat{y}_{c-1},\\widehat{y}_{c+1},...,\\widehat{y}_{c+m}\\) \u662f\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u8bcd\u89c2\u5bdf\u5230\u7684\u6982\u7387 \u6211\u4eec\u5e0c\u671b\u6211\u4eec\u751f\u6210\u7684\u6982\u7387\u5411\u91cf\u5339\u914d\u771f\u5b9e\u6982\u7387 \\(y^{(c-m)},...,y^{(c-1)},y^{(c+1)},...,y^{(c+m)}\\) \uff0cone-hot \u5411\u91cf\u662f\u5b9e\u9645\u7684\u8f93\u51fa\u3002 \u4e0b\u56fe\u662f Skip-Gram \u6a21\u578b\u7684\u8ba1\u7b97\u56fe\u793a \u548c CBOW \u6a21\u578b\u4e00\u6837\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u6765\u8bc4\u4f30\u8fd9\u4e2a\u6a21\u578b\u3002\u4e0e CBOW \u6a21\u578b\u7684\u4e00\u4e2a\u4e3b\u8981\u7684\u4e0d\u540c\u662f\u6211\u4eec\u5f15\u7528\u4e86\u4e00\u4e2a\u6734\u7d20\u7684\u8d1d\u53f6\u65af\u5047\u8bbe\u6765\u62c6\u5206\u6982\u7387\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u5f3a\uff08\u6734\u7d20\uff09\u7684\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u3002\u6362\u800c\u8a00\u4e4b\uff0c \u7ed9\u5b9a\u4e2d\u5fc3\u8bcd\uff0c\u6240\u6709\u8f93\u51fa\u7684\u8bcd\u662f\u5b8c\u5168\u72ec\u7acb\u7684 \u3002(\u5373\u516c\u5f0f1\u81f32\u884c) $$ \\begin{aligned} \\text { minimize } J &=-\\log P\\left(w_{c-m}, \\ldots, w_{c-1}, w_{c+1}, \\ldots, w_{c+m} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(w_{c-m+j} | w_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} P\\left(u_{c-m+j} | v_{c}\\right) \\ &=-\\log \\prod_{j=0, j \\neq m}^{2 m} \\frac{\\exp \\left(u_{c-m+j}^{T} v_{c}\\right)}{\\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right)} \\ &=-\\sum_{j=0, j \\neq m}^{2 m} u_{c-m+j}^{T} v_{c}+2 m \\log \\sum_{k=1}^{|V|} \\exp \\left(u_{k}^{T} v_{c}\\right) \\end{aligned} $$ \u901a\u8fc7\u8fd9\u4e2a\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u4e0e\u672a\u77e5\u53c2\u6570\u76f8\u5173\u7684\u68af\u5ea6\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u901a\u8fc7 SGD \u6765\u66f4\u65b0\u5b83\u4eec\u3002 \u6ce8\u610f $$ \\begin{aligned} J &=-\\sum_{j=0, j \\neq m}^{2 m} \\log P\\left(u_{c-m+j} | v_{c}\\right) \\ &=\\sum_{j=0, j \\neq m}^{2 m} H\\left(\\hat{y}, y_{c-m+j}\\right) \\end{aligned} $$ \u5176\u4e2d \\(H(\\widehat{y},y_{c-m+j})\\) \u662f\u5411\u91cf \\(\\widehat{y}\\) \u7684\u6982\u7387\u548c one-hot \u5411\u91cf \\(y_{c-m+j}\\) \u4e4b\u95f4\u7684\u4ea4\u53c9\u71b5\u3002 \u53ea\u6709\u4e00\u4e2a\u6982\u7387\u5411\u91cf \\(\\hat{y}\\) \u662f\u88ab\u8ba1\u7b97\u7684\u3002Skip-Gram \u5bf9\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u5355\u8bcd\u4e00\u89c6\u540c\u4ec1\uff1a\u8be5\u6a21\u578b\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5728\u4e0a\u4e0b\u6587\u4e2d\u51fa\u73b0\u7684\u6982\u7387\uff0c\u800c\u4e0e\u5b83\u5230\u4e2d\u5fc3\u5355\u8bcd\u7684\u8ddd\u79bb\u65e0\u5173\u3002 Negative Sampling \u8ba9\u6211\u4eec\u518d\u56de\u5230\u76ee\u6807\u51fd\u6570\u4e0a\u3002\u6ce8\u610f\u5bf9 \\(|V|\\) \u7684\u6c42\u548c\u8ba1\u7b97\u91cf\u662f\u975e\u5e38\u5927\u7684\u3002\u4efb\u4f55\u7684\u66f4\u65b0\u6216\u8005\u5bf9\u76ee\u6807\u51fd\u6570\u7684\u8bc4\u4f30\u90fd\u8981\u82b1\u8d39 \\(O(|V|)\\) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4e0d\u53bb\u76f4\u63a5\u8ba1\u7b97\uff0c\u800c\u662f\u53bb\u6c42\u8fd1\u4f3c\u503c\u3002 \u5728\u6bcf\u4e00\u4e2a\u8bad\u7ec3\u7684\u65f6\u95f4\u6b65\uff0c\u6211\u4eec\u4e0d\u53bb\u904d\u5386\u6574\u4e2a\u8bcd\u6c47\u8868\uff0c\u800c\u4ec5\u4ec5\u662f\u62bd\u53d6\u4e00\u4e9b\u8d1f\u6837\u4f8b\u3002\u6211\u4eec\u5bf9\u566a\u58f0\u5206\u5e03 \\(P_{n}(w)\\) \u201c\u62bd\u6837\u201d\uff0c\u8fd9\u4e2a\u6982\u7387\u662f\u548c\u8bcd\u9891\u7684\u6392\u5e8f\u76f8\u5339\u914d\u7684\u3002\u4e3a\u52a0\u5f3a\u5bf9\u95ee\u9898\u7684\u8868\u8ff0\u4ee5\u7eb3\u5165\u8d1f\u62bd\u6837\uff0c\u6211\u4eec\u53ea\u9700\u66f4\u65b0\u5176 \u76ee\u6807\u51fd\u6570 \u68af\u5ea6 \u66f4\u65b0\u89c4\u5219 Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86\u8d1f\u91c7\u6837\u3002\u867d\u7136\u8d1f\u91c7\u6837\u662f\u57fa\u4e8e Skip-Gram \u6a21\u578b\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u5bf9\u4e00\u4e2a\u4e0d\u540c\u7684\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u4f18\u5316\u3002 \u8003\u8651\u4e00\u5bf9\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd \\((w,c)\\) \u3002\u8fd9\u8bcd\u5bf9\u662f\u6765\u81ea\u8bad\u7ec3\u6570\u636e\u96c6\u5417\uff1f\u6211\u4eec\u901a\u8fc7 \\(P(D=1\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002\u76f8\u5e94\u5730\uff0c \\(P(D=0\\mid w,c)\\) \u8868\u793a \\((w,c)\\) \u4e0d\u662f\u6765\u81ea\u8bed\u6599\u5e93\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5bf9 \\(P(D=1\\mid w,c)\\) \u7528 sigmoid \u51fd\u6570\u5efa\u6a21\uff1a \\[ P(D=1 | w, c, \\theta)=\\sigma\\left(v_{c}^{T} v_{w}\\right)=\\frac{1}{1+e^{\\left(-v_{c}^{T} v_{w}\\right)}} \\] \u73b0\u5728\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=1\\mid w,c)\\) \uff0c\u5982\u679c\u4e2d\u5fc3\u8bcd\u548c\u4e0a\u4e0b\u6587\u8bcd\u786e\u5b9e\u4e0d\u5728\u8bed\u6599\u5e93\u4e2d\uff0c\u5c31\u6700\u5927\u5316\u6982\u7387 \\(P(D=0\\mid w,c)\\) \u3002\u6211\u4eec\u5bf9\u8fd9\u4e24\u4e2a\u6982\u7387\u91c7\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u7684\u65b9\u6cd5\uff08\u8fd9\u91cc\u6211\u4eec\u628a \\(\\theta\\) \u4f5c\u4e3a\u6a21\u578b\u7684\u53c2\u6570\uff0c\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u662f \\(\\mathcal{V}\\) \u548c \\(\\mathcal{U}\\) \uff09 \\[ \\begin{aligned} \\theta &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}} P(D=0 | w, c, \\theta) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\prod_{(w, c) \\in D} P(D=1 | w, c, \\theta) \\prod_{(w, c) \\in \\widetilde{D}}(1-P(D=1 | w, c, \\theta)) \\\\ &=\\underset{\\theta}{\\operatorname{argmax}} \\sum_{(w, c) \\in D} \\log P(D=1 | w, c, \\theta)+\\sum_{(w, c) \\in \\widetilde{D}} \\log (1-P(D=1 | w, c, \\theta)) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(1-\\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}\\right) \\\\ &=\\arg \\max _{\\theta} \\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}+\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\end{aligned} \\] \u6ce8\u610f\u6700\u5927\u5316\u4f3c\u7136\u51fd\u6570\u7b49\u540c\u4e8e\u6700\u5c0f\u5316\u8d1f\u5bf9\u6570\u4f3c\u7136\uff1a \\[ J=-\\sum_{(w, c) \\in D} \\log \\frac{1}{1+\\exp \\left(-u_{w}^{T} v_{c}\\right)}-\\sum_{(w, c) \\in \\widetilde{D}} \\log \\left(\\frac{1}{1+\\exp \\left(u_{w}^{T} v_{c}\\right)}\\right) \\] \u6ce8\u610f \\(\\widetilde{D}\\) \u662f\u201c\u5047\u7684\u201d\u6216\u8005\u201c\u8d1f\u7684\u201d\u8bed\u6599\u3002\u4f8b\u5982\u6211\u4eec\u6709\u53e5\u5b50\u7c7b\u4f3c\u201cstock boil fish is toy\u201d\uff0c\u8fd9\u79cd\u65e0\u610f\u4e49\u7684\u53e5\u5b50\u51fa\u73b0\u65f6\u4f1a\u5f97\u5230\u4e00\u4e2a\u5f88\u4f4e\u7684\u6982\u7387\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u6599\u5e93\u4e2d\u968f\u673a\u62bd\u6837\u51fa\u8d1f\u6837\u4f8b \\(\\widetilde{D}\\) \u3002 \u5bf9\u4e8e Skip-Gram \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e2d\u5fc3\u8bcd \\(c\\) \u6765\u89c2\u5bdf\u7684\u4e0a\u4e0b\u6587\u5355\u8bcd \\(c-m+j\\) \u7684\u65b0\u76ee\u6807\u51fd\u6570\u4e3a \\[ -\\log \\sigma\\left(u_{c-m+j}^{T} \\cdot v_{c}\\right)-\\sum_{k=1}^{K} \\log \\sigma\\left(-\\tilde{u}_{k}^{T} \\cdot v_{c}\\right) \\] \u5bf9 CBOW \u6a21\u578b\uff0c\u6211\u4eec\u5bf9\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u5411\u91cf \\(\\widehat{v}=\\frac{v_{c-m}+v_{c-m+1}+...+v_{c+m}}{2m}\\) \u6765\u89c2\u5bdf\u4e2d\u5fc3\u8bcd \\(u_{c}\\) \u7684\u65b0\u7684\u76ee\u6807\u51fd\u6570\u4e3a \\[ -log\\,\\sigma(u_{c}^{T}\\cdot \\widehat{v})-\\sum_{k=1}^{K}log\\,\\sigma(-\\widetilde{u}_{k}^{T}\\cdot \\widehat{v}) \\] \u5728\u4e0a\u9762\u7684\u516c\u5f0f\u4e2d\uff0c \\(\\{\\widetilde{u}_{k}\\mid k=1...K\\}\\) \u662f\u4ece \\(P_{n}(w)\\) \u4e2d\u62bd\u6837\u3002\u6709\u5f88\u591a\u5173\u4e8e\u5982\u4f55\u5f97\u5230\u6700\u597d\u8fd1\u4f3c\u7684\u8ba8\u8bba\uff0c\u4ece\u5b9e\u9645\u6548\u679c\u770b\u6765\u6700\u597d\u7684\u662f\u6307\u6570\u4e3a \u00be \u7684 Unigram \u6a21\u578b\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u662f \u00be\uff1f\u4e0b\u9762\u6709\u4e00\u4e9b\u4f8b\u5982\u53ef\u80fd\u8ba9\u4f60\u6709\u4e00\u4e9b\u76f4\u89c2\u7684\u4e86\u89e3\uff1a \\[ \\begin{eqnarray} is: 0.9^{3/4} &=& 0.92 \\nonumber \\\\ Constitution: 0.09^{3/4}&=& 0.16 \\nonumber \\\\ bombastic:0.01^{3/4}&=& 0.032 \\nonumber \\end{eqnarray} \\] \u201cBombastic\u201d\u73b0\u5728\u88ab\u62bd\u6837\u7684\u6982\u7387\u662f\u4e4b\u524d\u7684\u4e09\u500d\uff0c\u800c\u201cis\u201d\u53ea\u6bd4\u4e4b\u524d\u7684\u624d\u63d0\u9ad8\u4e86\u4e00\u70b9\u70b9\u3002 Hierarchical Softmax Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u63d0\u51fa\u4e86 hierarchical softmax\uff0c\u76f8\u6bd4\u666e\u901a\u7684 softmax \u8fd9\u662f\u4e00\u79cd\u66f4\u6709\u6548\u7684\u66ff\u4ee3\u65b9\u6cd5\u3002 \u5728\u5b9e\u9645\u4e2d\uff0chierarchical softmax \u5bf9\u4f4e\u9891\u8bcd\u5f80\u5f80\u8868\u73b0\u5f97\u66f4\u597d\uff0c\u8d1f\u91c7\u6837\u5bf9\u9ad8\u9891\u8bcd\u548c\u8f83\u4f4e\u7ef4\u5ea6\u5411\u91cf\u8868\u73b0\u5f97\u66f4\u597d \u3002 Hierarchical softmax \u4f7f\u7528\u4e00\u4e2a\u4e8c\u53c9\u6811\u6765\u8868\u793a\u8bcd\u8868\u4e2d\u7684\u6240\u6709\u8bcd\u3002\u6811\u4e2d\u7684\u6bcf\u4e2a\u53f6\u7ed3\u70b9\u90fd\u662f\u4e00\u4e2a\u5355\u8bcd\uff0c\u800c\u4e14\u53ea\u6709\u4e00\u6761\u8def\u5f84\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u3002\u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u6ca1\u6709\u8bcd\u7684\u8f93\u51fa\u8868\u793a\u3002\u76f8\u53cd\uff0c\u56fe\u7684\u6bcf\u4e2a\u8282\u70b9\uff08\u6839\u8282\u70b9\u548c\u53f6\u7ed3\u70b9\u9664\u5916\uff09\u4e0e\u6a21\u578b\u8981\u5b66\u4e60\u7684\u5411\u91cf\u76f8\u5173\u8054\u3002\u5355\u8bcd\u4f5c\u4e3a\u8f93\u51fa\u5355\u8bcd\u7684\u6982\u7387\u5b9a\u4e49\u4e3a\u4ece\u6839\u968f\u673a\u6e38\u8d70\u5230\u5355\u8bcd\u6240\u5bf9\u5e94\u7684\u53f6\u7684\u6982\u7387\u3002\u8ba1\u7b97\u6210\u672c\u53d8\u4e3a \\(O(log (|V|))\\) \u800c\u4e0d\u662f \\(O(|V|)\\) \u3002 \u5728\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u5411\u91cf \\(w_{i}\\) \u7684\u4e0b\u7684\u5355\u8bcd \\(w\\) \u7684\u6982\u7387 \\(p(w\\mid w_{i})\\) \uff0c\u7b49\u4e8e\u4ece\u6839\u7ed3\u70b9\u5f00\u59cb\u5230\u5bf9\u5e94 w \u7684\u53f6\u7ed3\u70b9\u7ed3\u675f\u7684\u968f\u673a\u6f2b\u6b65\u6982\u7387\u3002\u8fd9\u4e2a\u65b9\u6cd5\u6700\u5927\u7684\u4f18\u52bf\u662f\u8ba1\u7b97\u6982\u7387\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ec5\u4ec5\u662f \\(O(log(|V|))\\) \uff0c\u5bf9\u5e94\u7740\u8def\u5f84\u7684\u957f\u5ea6\u3002 \u4e0b\u56fe\u662f Hierarchical softmax \u7684\u4e8c\u53c9\u6811\u793a\u610f\u56fe \u8ba9\u6211\u4eec\u5f15\u5165\u4e00\u4e9b\u6982\u5ff5\u3002\u4ee4 \\(L(w)\\) \u4e3a\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9 \\(w\\) \u7684\u8def\u5f84\u4e2d\u8282\u70b9\u6570\u76ee\u3002\u4f8b\u5982\uff0c\u4e0a\u56fe\u4e2d\u7684 \\(L(w_{2})\\) \u4e3a 3\u3002\u6211\u4eec\u5b9a\u4e49 \\(n(w,i)\\) \u4e3a\u4e0e\u5411\u91cf \\(v_{n(w,i)}\\) \u76f8\u5173\u7684\u8def\u5f84\u4e0a\u7b2c \\(i\\) \u4e2a\u7ed3\u70b9\u3002\u56e0\u6b64 \\(n(w,1)\\) \u662f\u6839\u7ed3\u70b9\uff0c\u800c \\(n(w,L(w))\\) \u662f \\(w\\) \u7684\u7236\u8282\u70b9\u3002\u73b0\u5728\u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9 \\(n\\) \uff0c\u6211\u4eec\u4efb\u610f\u9009\u53d6\u4e00\u4e2a\u5b83\u7684\u5b50\u8282\u70b9\uff0c\u5b9a\u4e49\u4e3a \\(ch(n)\\) \uff08\u4e00\u822c\u662f\u5de6\u8282\u70b9\uff09\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6982\u7387\u4e3a \\[ p\\left(w | w_{i}\\right)=\\prod_{j=1}^{L(w)-1} \\sigma\\left([n(w, j+1)=\\operatorname{ch}(n(w, j))] \\cdot v_{n(w, j)}^{T} v_{w_{i}}\\right) \\] \u5176\u4e2d \\[ [x]=\\left\\{\\begin{array}{ll}{1} & {\\text { if } x \\text { is true }} \\\\ {-1} & {\\text { otherwise }}\\end{array}\\right. \\] \u8fd9\u4e2a\u516c\u5f0f\u770b\u8d77\u6765\u975e\u5e38\u590d\u6742\uff0c\u8ba9\u6211\u4eec\u7ec6\u7ec6\u68b3\u7406\u4e00\u4e0b\u3002 \u9996\u5148\uff0c\u6211\u4eec\u5c06\u6839\u636e\u4ece\u6839\u8282\u70b9 \\((n(w,1))\\) \u5230\u53f6\u8282\u70b9 \\((w)\\) \u7684\u8def\u5f84\u7684\u5f62\u72b6\u6765\u8ba1\u7b97\u76f8\u4e58\u7684\u9879\u3002\u5982\u679c\u6211\u4eec\u5047\u8bbe \\(ch(n)\\) \u4e00\u76f4\u90fd\u662f \\(n\\) \u7684\u5de6\u8282\u70b9\uff0c\u7136\u540e\u5f53\u8def\u5f84\u5f80\u5de6\u65f6 \\([n(w,j+1)=ch(n(w,j))]\\) \u7684\u503c\u8fd4\u56de 1\uff0c\u5f80\u53f3\u5219\u8fd4\u56de 0\u3002 \u6b64\u5916\uff0c \\([n(w,j+1)=ch(n(w,j))]\\) \u63d0\u4f9b\u4e86\u5f52\u4e00\u5316\u7684\u4f5c\u7528\u3002\u5728\u8282\u70b9 \\(n\\) \u5904\uff0c\u5982\u679c\u6211\u4eec\u5c06\u53bb\u5f80\u5de6\u548c\u53f3\u8282\u70b9\u7684\u6982\u7387\u76f8\u52a0\uff0c\u5bf9\u4e8e \\(v_{n}^{T}v_{w_{i}}\\) \u7684\u4efb\u4f55\u503c\u5219\u53ef\u4ee5\u68c0\u67e5\uff0c \\[ \\sigma\\left(v_{n}^{T} v_{w_{i}}\\right)+\\sigma\\left(-v_{n}^{T} v_{w_{i}}\\right)=1 \\] \u5f52\u4e00\u5316\u4e5f\u4fdd\u8bc1\u4e86 \\(\\sum_{w=1}^{|V|}P(w\\mid w_{i})=1\\) \uff0c\u548c\u5728\u666e\u901a\u7684 softmax \u662f\u4e00\u6837\u7684\u3002 \u6700\u540e\u6211\u4eec\u8ba1\u7b97\u70b9\u79ef\u6765\u6bd4\u8f83\u8f93\u5165\u5411\u91cf \\(v_{w_{i}}\\) \u5bf9\u6bcf\u4e2a\u5185\u90e8\u8282\u70b9\u5411\u91cf \\(v_{n(w,j)}^{T}\\) \u7684\u76f8\u4f3c\u5ea6\u3002\u4e0b\u9762\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u4f8b\u5b50\u3002\u4ee5\u4e0a\u56fe\u4e2d\u7684 \\(w_{2}\\) \u4e3a\u4f8b\uff0c\u4ece\u6839\u8282\u70b9\u8981\u7ecf\u8fc7\u4e24\u6b21\u5de6\u8fb9\u7684\u8fb9\u548c\u4e00\u6b21\u53f3\u8fb9\u7684\u8fb9\u624d\u5230\u8fbe \\(w_{2}\\) \uff0c\u56e0\u6b64 \\[ \\begin{aligned} p\\left(w_{2} | w_{i}\\right) &=p\\left(n\\left(w_{2}, 1\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 2\\right), \\text {left}\\right) \\cdot p\\left(n\\left(w_{2}, 3\\right), \\text { right }\\right) \\\\ &=\\sigma\\left(v_{n\\left(w_{2}, 1\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(v_{n\\left(w_{2}, 2\\right)}^{T} v_{w_{i}}\\right) \\cdot \\sigma\\left(-v_{n\\left(w_{2}, 3\\right)}^{T} v_{w_{i}}\\right) \\end{aligned} \\] \u6211\u4eec\u8bad\u7ec3\u6a21\u578b\u7684\u76ee\u6807\u662f\u6700\u5c0f\u5316\u8d1f\u7684\u5bf9\u6570\u4f3c\u7136 \\(-log\\,P(w\\mid w_{i})\\) \u3002\u4e0d\u662f\u66f4\u65b0\u6bcf\u4e2a\u8bcd\u7684\u8f93\u51fa\u5411\u91cf\uff0c\u800c\u662f\u66f4\u65b0\u66f4\u65b0\u4e8c\u53c9\u6811\u4e2d\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u8282\u70b9\u7684\u5411\u91cf\u3002 \u8be5\u65b9\u6cd5\u7684\u901f\u5ea6\u7531\u6784\u5efa\u4e8c\u53c9\u6811\u7684\u65b9\u5f0f\u786e\u5b9a\uff0c\u5e76\u5c06\u8bcd\u5206\u914d\u7ed9\u53f6\u8282\u70b9\u3002Mikolov \u5728\u8bba\u6587\u300aDistributed Representations of Words and Phrases and their Compositionality.\u300b\u4e2d\u4f7f\u7528\u7684\u662f\u54c8\u592b\u66fc\u6811\uff0c\u5728\u6811\u4e2d\u5206\u914d\u9ad8\u9891\u8bcd\u5230\u8f83\u77ed\u7684\u8def\u5f84\u3002","title":"Deeper"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/","text":"\u4e13\u4e1a\u77e5\u8bc6\u9762\u8bd5\u51c6\u5907 \u00b6 Knowledge \u00b6 \u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u3001\u8ba1\u7b97\u673a\u7f51\u7edc\u3001\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5 \u53c2\u89c1 Reference \uff0c\u5bf9\u91cd\u70b9\u77e5\u8bc6\u9488\u5bf9\u6027\u590d\u4e60\u5373\u53ef \u4e0b\u9762\u4ec5\u5217\u51fa\u5173\u952e\u77e5\u8bc6\u70b9\u76ee\u5f55\uff0c\u501f\u6b64\u5f62\u6210\u77e5\u8bc6\u7f51\u7edc \u6ce8\u610f\u590d\u4e60\u672f\u8bed\u7684\u82f1\u6587\u8868\u8fbe \u64cd\u4f5c\u7cfb\u7edf \u00b6 \u8fdb\u7a0b\u7ba1\u7406 \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b \u8fdb\u7a0b\u72b6\u6001 \u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5 \u6279\u5904\u7406\u7cfb\u7edf \u4ea4\u4e92\u7cfb\u7edf \u8fdb\u7a0b\u540c\u6b65 \u8fdb\u7a0b\u901a\u4fe1 \u4f18\u7f3a\u70b9 \u7ebf\u7a0b\u901a\u4fe1 \u591a\u7ebf\u7a0b\u4e0e\u591a\u8fdb\u7a0b \u6b7b\u9501 \u6b7b\u9501\u539f\u56e0\u4e0e\u6b7b\u9501\u6761\u4ef6 \u6b7b\u9501\u68c0\u6d4b\u4e0e\u6062\u590d \u6b7b\u9501\u9884\u9632 \u6b7b\u9501\u907f\u514d \u5185\u5b58\u7ba1\u7406 \u865a\u62df\u5185\u5b58 \u5206\u9875 \u9875\u9762\u7f6e\u6362\u7b97\u6cd5 \u5206\u6bb5 \u6bb5\u9875\u5f0f \u5206\u9875\u4e0e\u5206\u6bb5 \u8bbe\u5907\u7ba1\u7406 \u78c1\u76d8\u7ed3\u6784 \u78c1\u76d8\u8c03\u5ea6\u7b97\u6cd5 \u67b6\u6784\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684\u5173\u7cfb \u8ba1\u7b97\u673a\u7f51\u7edc \u00b6 \u6982\u8ff0 ISP \u4e3b\u673a\u95f4\u901a\u4fe1\u65b9\u5f0f \u7535\u8def\u4ea4\u6362\u4e0e\u5206\u7ec4\u4ea4\u6362 \u65f6\u5ef6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784 \u7269\u7406\u5c42 \u6570\u636e\u94fe\u8def\u5c42 \u57fa\u672c\u95ee\u9898 \u5c01\u88c5\u6210\u5e27 \u900f\u660e\u4f20\u8f93 \u5dee\u9519\u68c0\u6d4b(CRC) \u4fe1\u9053\u5206\u7c7b \u70b9\u5bf9\u70b9\u4fe1\u9053 \u5e7f\u64ad\u4fe1\u9053 \u4fe1\u9053\u590d\u7528 CSMA/CD PPP MAC \u5c40\u57df\u7f51 \u4ee5\u592a\u7f51 \u4ea4\u6362\u673a \u865a\u62df\u5c40\u57df\u7f51 \u7f51\u7edc\u5c42 \u6982\u8ff0\uff1aIP\u534f\u8bae\u5c06\u5f02\u6784\u7684\u7269\u7406\u7f51\u7edc\u8fde\u63a5\u8d77\u6765\uff0c\u914d\u5957\u4f7f\u7528ARP ICMP IGMP IP\u6570\u636e\u62a5 IP\u5730\u5740 \u5730\u5740\u89e3\u6790\u534f\u8bae ARP \u7f51\u9645\u63a7\u5236\u62a5\u6587\u534f\u8bae ICMP \u865a\u62df\u4e13\u7528\u7f51 VPN \u7f51\u7edc\u5730\u5740\u8f6c\u6362 NAT \u8def\u7531\u5668\u7684\u7ed3\u6784 \u8def\u7531\u5668\u5206\u7ec4\u8f6c\u53d1\u6d41\u7a0b \u8def\u7531\u9009\u62e9\u534f\u8bae \u5185\u90e8\u7f51\u5173\u534f\u8bae RIP \u5185\u90e8\u7f51\u5173\u534f\u8bae OSPF \u5916\u90e8\u7f51\u5173\u534f\u8bae BGP \u4f20\u8f93\u5c42 UDP TCP \u4e09\u6b21\u63e1\u624b \u56db\u6b21\u6325\u624b \u53ef\u9760\u4f20\u8f93 \u6ed1\u52a8\u7a97\u53e3 \u6d41\u91cf\u63a7\u5236 \u62e5\u585e\u63a7\u5236 \u5e94\u7528\u5c42 \u57df\u540d\u7cfb\u7edf DNS \u6587\u4ef6\u4f20\u8f93\u534f\u8bae FTP \u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae DHCP \u8fdc\u7a0b\u767b\u5f55\u534f\u8bae TELENT \u7535\u5b50\u90ae\u4ef6\u534f\u8bae SMTP Web\u9875\u9762\u8bf7\u6c42\u8fc7\u7a0b HTTP Socket \u96c6\u7ebf\u5668 \u4ea4\u6362\u673a \u8def\u7531\u5668 \u6570\u636e\u5e93\u7cfb\u7edf\u539f\u7406 \u00b6 \u4e8b\u52a1 \u5e76\u53d1\u4e00\u81f4\u6027 \u5c01\u9501 \u8bbe\u8ba1\u7406\u8bba ER\u56fe \u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5 \u00b6 \u6570\u636e\u7ed3\u6784 \u00b6 \u7ebf\u6027\u8868 \u987a\u5e8f\u5b58\u50a8 \u94fe\u5f0f\u5b58\u50a8 \u6808\u548c\u961f\u5217 \u6808 \u961f\u5217 \u6570\u7ec4 \u6570\u4e0e\u4e8c\u53c9\u6811 \u4e8c\u53c9\u6811 \u4e09\u79cd\u904d\u5386 \u7ebf\u7d22\u4e8c\u53c9\u6811 \u5e73\u8861\u4e8c\u53c9\u6811 \u54c8\u592b\u66fc\u6811 \u6811\u548c\u68ee\u6797 \u6570\u7ec4 \u6811 \u56fe \u5b9a\u4e49 \u5b58\u50a8 \u904d\u5386 \u5e94\u7528 \u6700\u5c0f\u751f\u6210\u6811 \u6700\u77ed\u8def\u5f84 \u62d3\u6251\u6392\u5e8f \u5173\u952e\u8def\u5f84 \u67e5\u627e \u6392\u5e8f \u7b97\u6cd5 \u00b6 \u6392\u5e8f \u4e8c\u5206\u67e5\u627e \u641c\u7d22 \u8d2a\u5fc3 \u5206\u6cbb \u641c\u7d22 \u52a8\u6001\u89c4\u5212 \u6570\u5b66 \u53cc\u6307\u9488 Practice \u00b6 \u64cd\u4f5c\u7cfb\u7edf \u00b6 \u8ba1\u7b97\u673a\u7f51\u7edc \u00b6 \u6570\u636e\u5e93\u7cfb\u7edf\u539f\u7406 \u00b6 \u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5 \u00b6 Reference \u00b6 https://cyc2018.github.io/CS-Notes/ https://github.com/huihut/interview","title":"\u4e13\u4e1a\u77e5\u8bc6\u9762\u8bd5\u51c6\u5907"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_1","text":"","title":"\u4e13\u4e1a\u77e5\u8bc6\u9762\u8bd5\u51c6\u5907"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#knowledge","text":"\u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u3001\u8ba1\u7b97\u673a\u7f51\u7edc\u3001\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5 \u53c2\u89c1 Reference \uff0c\u5bf9\u91cd\u70b9\u77e5\u8bc6\u9488\u5bf9\u6027\u590d\u4e60\u5373\u53ef \u4e0b\u9762\u4ec5\u5217\u51fa\u5173\u952e\u77e5\u8bc6\u70b9\u76ee\u5f55\uff0c\u501f\u6b64\u5f62\u6210\u77e5\u8bc6\u7f51\u7edc \u6ce8\u610f\u590d\u4e60\u672f\u8bed\u7684\u82f1\u6587\u8868\u8fbe","title":"Knowledge"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_2","text":"\u8fdb\u7a0b\u7ba1\u7406 \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b \u8fdb\u7a0b\u72b6\u6001 \u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5 \u6279\u5904\u7406\u7cfb\u7edf \u4ea4\u4e92\u7cfb\u7edf \u8fdb\u7a0b\u540c\u6b65 \u8fdb\u7a0b\u901a\u4fe1 \u4f18\u7f3a\u70b9 \u7ebf\u7a0b\u901a\u4fe1 \u591a\u7ebf\u7a0b\u4e0e\u591a\u8fdb\u7a0b \u6b7b\u9501 \u6b7b\u9501\u539f\u56e0\u4e0e\u6b7b\u9501\u6761\u4ef6 \u6b7b\u9501\u68c0\u6d4b\u4e0e\u6062\u590d \u6b7b\u9501\u9884\u9632 \u6b7b\u9501\u907f\u514d \u5185\u5b58\u7ba1\u7406 \u865a\u62df\u5185\u5b58 \u5206\u9875 \u9875\u9762\u7f6e\u6362\u7b97\u6cd5 \u5206\u6bb5 \u6bb5\u9875\u5f0f \u5206\u9875\u4e0e\u5206\u6bb5 \u8bbe\u5907\u7ba1\u7406 \u78c1\u76d8\u7ed3\u6784 \u78c1\u76d8\u8c03\u5ea6\u7b97\u6cd5 \u67b6\u6784\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684\u5173\u7cfb","title":"\u64cd\u4f5c\u7cfb\u7edf"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_3","text":"\u6982\u8ff0 ISP \u4e3b\u673a\u95f4\u901a\u4fe1\u65b9\u5f0f \u7535\u8def\u4ea4\u6362\u4e0e\u5206\u7ec4\u4ea4\u6362 \u65f6\u5ef6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784 \u7269\u7406\u5c42 \u6570\u636e\u94fe\u8def\u5c42 \u57fa\u672c\u95ee\u9898 \u5c01\u88c5\u6210\u5e27 \u900f\u660e\u4f20\u8f93 \u5dee\u9519\u68c0\u6d4b(CRC) \u4fe1\u9053\u5206\u7c7b \u70b9\u5bf9\u70b9\u4fe1\u9053 \u5e7f\u64ad\u4fe1\u9053 \u4fe1\u9053\u590d\u7528 CSMA/CD PPP MAC \u5c40\u57df\u7f51 \u4ee5\u592a\u7f51 \u4ea4\u6362\u673a \u865a\u62df\u5c40\u57df\u7f51 \u7f51\u7edc\u5c42 \u6982\u8ff0\uff1aIP\u534f\u8bae\u5c06\u5f02\u6784\u7684\u7269\u7406\u7f51\u7edc\u8fde\u63a5\u8d77\u6765\uff0c\u914d\u5957\u4f7f\u7528ARP ICMP IGMP IP\u6570\u636e\u62a5 IP\u5730\u5740 \u5730\u5740\u89e3\u6790\u534f\u8bae ARP \u7f51\u9645\u63a7\u5236\u62a5\u6587\u534f\u8bae ICMP \u865a\u62df\u4e13\u7528\u7f51 VPN \u7f51\u7edc\u5730\u5740\u8f6c\u6362 NAT \u8def\u7531\u5668\u7684\u7ed3\u6784 \u8def\u7531\u5668\u5206\u7ec4\u8f6c\u53d1\u6d41\u7a0b \u8def\u7531\u9009\u62e9\u534f\u8bae \u5185\u90e8\u7f51\u5173\u534f\u8bae RIP \u5185\u90e8\u7f51\u5173\u534f\u8bae OSPF \u5916\u90e8\u7f51\u5173\u534f\u8bae BGP \u4f20\u8f93\u5c42 UDP TCP \u4e09\u6b21\u63e1\u624b \u56db\u6b21\u6325\u624b \u53ef\u9760\u4f20\u8f93 \u6ed1\u52a8\u7a97\u53e3 \u6d41\u91cf\u63a7\u5236 \u62e5\u585e\u63a7\u5236 \u5e94\u7528\u5c42 \u57df\u540d\u7cfb\u7edf DNS \u6587\u4ef6\u4f20\u8f93\u534f\u8bae FTP \u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae DHCP \u8fdc\u7a0b\u767b\u5f55\u534f\u8bae TELENT \u7535\u5b50\u90ae\u4ef6\u534f\u8bae SMTP Web\u9875\u9762\u8bf7\u6c42\u8fc7\u7a0b HTTP Socket \u96c6\u7ebf\u5668 \u4ea4\u6362\u673a \u8def\u7531\u5668","title":"\u8ba1\u7b97\u673a\u7f51\u7edc"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_4","text":"\u4e8b\u52a1 \u5e76\u53d1\u4e00\u81f4\u6027 \u5c01\u9501 \u8bbe\u8ba1\u7406\u8bba ER\u56fe","title":"\u6570\u636e\u5e93\u7cfb\u7edf\u539f\u7406"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_5","text":"","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_6","text":"\u7ebf\u6027\u8868 \u987a\u5e8f\u5b58\u50a8 \u94fe\u5f0f\u5b58\u50a8 \u6808\u548c\u961f\u5217 \u6808 \u961f\u5217 \u6570\u7ec4 \u6570\u4e0e\u4e8c\u53c9\u6811 \u4e8c\u53c9\u6811 \u4e09\u79cd\u904d\u5386 \u7ebf\u7d22\u4e8c\u53c9\u6811 \u5e73\u8861\u4e8c\u53c9\u6811 \u54c8\u592b\u66fc\u6811 \u6811\u548c\u68ee\u6797 \u6570\u7ec4 \u6811 \u56fe \u5b9a\u4e49 \u5b58\u50a8 \u904d\u5386 \u5e94\u7528 \u6700\u5c0f\u751f\u6210\u6811 \u6700\u77ed\u8def\u5f84 \u62d3\u6251\u6392\u5e8f \u5173\u952e\u8def\u5f84 \u67e5\u627e \u6392\u5e8f","title":"\u6570\u636e\u7ed3\u6784"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_7","text":"\u6392\u5e8f \u4e8c\u5206\u67e5\u627e \u641c\u7d22 \u8d2a\u5fc3 \u5206\u6cbb \u641c\u7d22 \u52a8\u6001\u89c4\u5212 \u6570\u5b66 \u53cc\u6307\u9488","title":"\u7b97\u6cd5"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#practice","text":"","title":"Practice"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_8","text":"","title":"\u64cd\u4f5c\u7cfb\u7edf"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_9","text":"","title":"\u8ba1\u7b97\u673a\u7f51\u7edc"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_10","text":"","title":"\u6570\u636e\u5e93\u7cfb\u7edf\u539f\u7406"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#_11","text":"","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5"},{"location":"%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/#reference","text":"https://cyc2018.github.io/CS-Notes/ https://github.com/huihut/interview","title":"Reference"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/","text":"Previous Coding Tests \u00b6 2019\u5317\u5927\u4fe1\u79d1\u7814\u7a76\u751f\u4e0a\u673a\u6d4b\u8bd5 \u00b6 A:\u62a4\u6797\u5458\u76d6\u623f\u5b50 \u00b6 /* * A:\u62a4\u6797\u5458\u76d6\u623f\u5b50 \u67e5\u770b \u63d0\u4ea4 \u7edf\u8ba1 \u63d0\u95ee \u603b\u65f6\u95f4\u9650\u5236: 1000ms \u5185\u5b58\u9650\u5236: 65536kB \u63cf\u8ff0 \u5728\u4e00\u7247\u4fdd\u62a4\u6797\u4e2d\uff0c\u62a4\u6797\u5458\u60f3\u8981\u76d6\u4e00\u5ea7\u623f\u5b50\u6765\u5c45\u4f4f\uff0c\u4f46\u4ed6\u4e0d\u80fd\u780d\u4f10\u4efb\u4f55\u6811\u6728\u3002 \u73b0\u5728\u8bf7\u4f60\u5e2e\u4ed6\u8ba1\u7b97\uff1a\u4fdd\u62a4\u6797\u4e2d\u6240\u80fd\u7528\u6765\u76d6\u623f\u5b50\u7684\u77e9\u5f62\u7a7a\u5730\u7684\u6700\u5927\u9762\u79ef\u3002 \u8f93\u5165 \u4fdd\u62a4\u6797\u7528\u4e00\u4e2a\u4e8c\u7ef4\u77e9\u9635\u6765\u8868\u793a\uff0c\u957f\u5bbd\u90fd\u4e0d\u8d85\u8fc720\uff08\u5373<=20\uff09\u3002 \u7b2c\u4e00\u884c\u662f\u4e24\u4e2a\u6b63\u6574\u6570m,n\uff0c\u8868\u793a\u77e9\u9635\u6709m\u884cn\u5217\u3002 \u7136\u540e\u662fm\u884c\uff0c\u6bcf\u884cn\u4e2a\u6574\u6570\uff0c\u75281\u4ee3\u8868\u6811\u6728\uff0c\u75280\u8868\u793a\u7a7a\u5730\u3002 \u8f93\u51fa \u4e00\u4e2a\u6b63\u6574\u6570\uff0c\u8868\u793a\u4fdd\u62a4\u6797\u4e2d\u80fd\u7528\u6765\u76d6\u623f\u5b50\u7684\u6700\u5927\u77e9\u5f62\u7a7a\u5730\u9762\u79ef\u3002 \u6837\u4f8b\u8f93\u5165 4 5 0 1 0 1 1 0 1 0 0 1 0 0 0 0 0 0 1 1 0 1 \u6837\u4f8b\u8f93\u51fa 5 \u63d0\u793a \u5b50\u77e9\u9635\u8fb9\u957f\u53ef\u4ee5\u4e3a1\uff0c\u4e5f\u5c31\u662f\u8bf4\uff1a 0 0 0 0 0 \u4f9d\u7136\u662f\u4e00\u4e2a\u53ef\u4ee5\u76d6\u623f\u5b50\u7684\u5b50\u77e9\u9635\u3002 \u6765\u6e90 2017\u533b\u5b66\u90e8\u8ba1\u7b97\u6982\u8bba-\u671f\u672b\u8003\u8bd5-\u7533\u535a */ #include <iostream> using namespace std ; const int maxn = 25 ; int nums [ maxn ][ maxn ]; // \u626b\u63cf\u7ebf\u6cd5 \u6c42\u6700\u5927\u7a7a\u5730\u9762\u79ef // \u4f7f\u7528\u4e09\u4e2a\u6570\u7ec4 // h[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u957f\u5ea6 // left[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u5de6\u8fb9\u754c // right[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u53f3\u8fb9\u754c // \u4ece\u4e0a\u5411\u4e0b\u626b\u63cf\uff0c\u4ece\u5de6\u5230\u53f3\u8ba1\u7b97 left \u6570\u7ec4\uff0c\u4ece\u53f3\u5230\u5de6\u8ba1\u7b97 right \u6570\u7ec4\uff0c\u5e76\u66f4\u65b0\u7b54\u6848 // \u5728\u5b9e\u73b0\u4e2d\uff0c\u6570\u7ec4\u964d\u7ef4\u4ee5\u8282\u7ea6\u7a7a\u95f4 int h [ maxn ], l [ maxn ], r [ maxn ]; int lb , rb ; // \u4e0e\u5f53\u524d\u70b9\u6700\u8fd1\u7684\u969c\u788d\u70b9 int ans = 0 ; int main () { int m , n ; cin >> m >> n ; for ( int i = 0 ; i < m ; i ++ ) { for ( int j = 0 ; j < n ; j ++ ) { cin >> nums [ i ][ j ]; } } for ( int j = 0 ; j < n ; j ++ ) { h [ j ] = 0 ; // \u521d\u59cb\u5316\u6bcf\u4e2a\u70b9\u5de6\u53f3\u8fb9\u754c \u53ea\u8981\u5728[0, n-1]\u4e4b\u5916\u5373\u53ef l [ j ] = -1 ; r [ j ] = n ; } for ( int i = 0 ; i < m ; i ++ ) { lb = -1 ; rb = n ; for ( int j = 0 ; j < n ; j ++ ) { // \u4ece\u5de6\u5230\u53f3\u626b\u63cf if ( nums [ i ][ j ] == 1 ) { // \u8be5\u70b9\u662f\u969c\u788d h [ j ] = 0 ; l [ j ] = -1 ; lb = j ; } else { // \u8be5\u70b9\u662f\u7a7a\u5730 h [ j ] ++ ; l [ j ] = max ( l [ j ], lb + 1 ); // \u6b64\u5904\u7684l[j] \u5b9e\u9645\u4e0a\u662fl[i-1,j] \u4e0a\u4e00\u884c\u7684\u8be5\u70b9\u7a7a\u5730\u5de6\u8fb9\u754c lb+1\u662f\u5f53\u524d\u884c\u7684\u5de6\u8fb9\u754c } } for ( int j = n - 1 ; j >= 0 ; j -- ) { // \u4ece\u53f3\u5230\u5de6\u626b\u63cf if ( nums [ i ][ j ] == 1 ) { // \u8be5\u70b9\u662f\u969c\u788d r [ j ] = n ; rb = j ; } else { // \u8be5\u70b9\u662f\u7a7a\u5730 r [ j ] = min ( r [ j ], rb - 1 ); ans = max ( ans , h [ j ] * ( r [ j ] - l [ j ] + 1 )); } } } cout << ans << endl ; return 0 ; } 2018\u5e74\u5317\u4eac\u5927\u5b66\u8f6f\u4ef6\u5de5\u7a0b\u5b66\u79d1\u590f\u4ee4\u8425\u4e0a\u673a\u7ec3\u4e60 \u00b6 https://blog.csdn.net/qq_34446253/article/details/51987082 2018\u5317\u4eac\u5927\u5b66\u8ba1\u7b97\u673a\u5b66\u79d1\u590f\u4ee4\u8425\u4e0a\u673a\u8003\u8bd5 \u00b6 E \u91cd\u8981\u9006\u5e8f\u5bf9 \u00b6 E:\u91cd\u8981\u9006\u5e8f\u5bf9 \u67e5\u770b \u63d0\u4ea4 \u7edf\u8ba1 \u63d0\u95ee \u603b\u65f6\u95f4\u9650\u5236: 10000ms \u5355\u4e2a\u6d4b\u8bd5\u70b9\u65f6\u95f4\u9650\u5236: 1000ms \u5185\u5b58\u9650\u5236: 65536kB \u63cf\u8ff0 \u7ed9\u5b9aN\u4e2a\u6570\u7684\u5e8f\u5217a1,a2,...aN\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6570\u5bf9(ai, aj)\u4e3a\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u5145\u8981\u6761\u4ef6\u4e3a i < j \u4e14 ai > 2aj\u3002\u6c42\u7ed9\u5b9a\u5e8f\u5217\u4e2d\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u4e2a\u6570\u3002 \u8f93\u5165 \u7b2c\u4e00\u884c\u4e3a\u5e8f\u5217\u4e2d\u6570\u5b57\u7684\u4e2a\u6570N\uff081 \u2264 N \u2264 200000\uff09\u3002 \u7b2c\u4e8c\u884c\u4e3a\u5e8f\u5217a1, a2 ... aN(0 \u2264a \u2264 10000000)\uff0c\u7531\u7a7a\u683c\u5206\u5f00\u3002 \u8f93\u51fa \u8f93\u51fa\u4e00\u4e2a\u6574\u6570\uff0c\u4e3a\u7ed9\u5e8f\u5217\u4e2d\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u4e2a\u6570\u3002 \u6837\u4f8b\u8f93\u5165 10 0 9 8 7 6 5 4 3 2 1 \u6837\u4f8b\u8f93\u51fa 16 \u63d0\u793a \u5982\u679c\u4f7f\u7528printf\u8f93\u51falong long\u7c7b\u578b\uff0c\u8bf7\u7528%lld \u6570\u636e\u8303\u56f4 \u5bf9\u4e8e40%\u7684\u6570\u636e\uff0c\u6709N \u2264 1000\u3002 // \u8ba1\u7b97\u91cd\u8981\u9006\u5e8f\u5bf9\u53ea\u9700\u8981\u5bf9\u5f52\u5e76\u6392\u5e8f\u89e3\u6cd5\u505a\u7b80\u5355\u7684\u66f4\u6539\uff0c\u4f46\u6392\u5e8f\u548c\u6c42\u9006\u5e8f\u5bf9\u6570\u9700\u8981\u5206\u79bb #include <bits/stdc++.h> using namespace std ; long long ans ; // \u91cd\u8981\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\uff0c\u9898\u76ee\u6697\u793a\u4f7f\u7528 long long /** * \u5f52\u5e76\u5de6\u53f3\u4e24\u6570\u7ec4 * * @param nums * @param left * @param mid * @param right */ void merge ( vector < int > & nums , int left , int mid , int right ) { // \u521b\u5efa\u4e34\u65f6\u6570\u7ec4 vector < int > L ; vector < int > R ; for ( int i = left ; i <= mid ; i ++ ) L . push_back ( nums [ i ]); for ( int j = mid + 1 ; j <= right ; j ++ ) R . push_back ( nums [ j ]); int i = 0 , j = 0 , k = left ; int l1 = mid - left + 1 , l2 = right - mid ; // \u5408\u5e76\u4e24\u6570\u7ec4\uff0c\u6ce8\u610f\u6392\u5e8f\u7684\u89c4\u5219\u5728\u672c\u9898\u4e2d\uff1a\u4e0d\u662f\u5355\u7eaf\u5730\u6bd4\u8f83\u539f\u59cb\u6570\u7ec4\u4e2d\u4e24\u6570\u5b57\u7684\u5927\u5c0f while ( i < l1 && j < l2 ) { if ( L [ i ] <= 2 * R [ j ]){ i ++ ; } else { j ++ ; ans += ( l1 - i ); } } i = 0 , j = 0 ; while ( i < l1 && j < l2 ) { if ( L [ i ] <= R [ j ]) nums [ k ++ ] = L [ i ++ ]; else nums [ k ++ ] = R [ j ++ ]; } while ( i < l1 ) nums [ k ++ ] = L [ i ++ ]; while ( j < l2 ) nums [ k ++ ] = R [ j ++ ]; } /** * \u9012\u5f52\u5b9e\u73b0\u7684\u5f52\u5e76\u6392\u5e8f * * @param nums * @param left * @param right */ void mergeSort ( vector < int > & nums , int left , int right ) { if ( left < right ) { // \u6ce8\u610f\u5224\u65ad int mid = left + ( right - left ) / 2 ; mergeSort ( nums , left , mid ); // \u95ed\u533a\u95f4[left, mid] mergeSort ( nums , mid + 1 , right ); // \u95ed\u533a\u95f4[mid + 1, right] merge ( nums , left , mid , right ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; vector < int > nums ; cin >> n ; int num ; for ( int i = 0 ; i < n ; i ++ ) { cin >> num ; nums . push_back ( num ); } mergeSort ( nums , 0 , nums . size () - 1 ); cout << ans ; return 0 ; } 2018\u5e74\u6e05\u534e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662\u590f\u4ee4\u8425\u673a\u8bd5 \u00b6 \u7b2c1\u9898 \u56de\u6587\u6570 \u00b6 \u8f93\u5165\u53ea\u6709\u4e00\u884c\uff0c\u5305\u542b\u4e24\u4e2a\u6574\u6570a,b\uff0c\u8981\u6c42\u8f93\u51fa[a,b]\u5185\u6240\u6709\u7684\u56de\u6587\u6570\uff0ca,b<10^6 #include <bits/stdc++.h> using namespace std ; int num [ 10 ]; // \u6570\u7ec4\u4f4e\u4f4d\u5b58\u6570\u5b57\u4f4e\u4f4d bool check ( int x ) { // sprintf \u53ef\u80fd\u7565\u5feb\u4e8e stringstream\uff0c\u4f46\u6b64\u5904\u4f7f\u7528\u624b\u52a8\u8f6c\u6362\uff0c\u7a0b\u5e8f\u6027\u80fd\u4f18\u52bf\u660e\u663e int len = 0 ; while ( x ) { num [ len ++ ] = x % 10 ; x /= 10 ; } int i = 0 , j = len - 1 ; while ( i < j ) { if ( num [ i ++ ] != num [ j -- ]) return false ; } return true ; } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int a , b ; cin >> a >> b ; if ( a > b ) swap ( a , b ); for ( int i = a ; i <= b ; i ++ ) { if ( check ( i )) cout << i << endl ; } return 0 ; } \u7b2c2\u9898 \u4e0a\u51f8\u51fd\u6570 \u00b6 \u5728\u4e00\u4e2a\u4e0a\u51f8\u51fd\u6570\u4e0a\u5747\u5300\u91c7\u6837\u5f97\u5230{f(i)|i=1,2\u2026N},\u6709M\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u8f93\u5165\u4e24\u4e2a\u6574\u6570a,b,\u6c42{f(i)-a*i-b|i=1,2\u2026N}\u7684\u6700\u5927\u503c\u3002 \u8f93\u5165\uff1a\u7b2c\u4e00\u884c,N\u548cM, \u5176\u4e2dN,M<5e5 \u7136\u540eN\u884c\uff0c\u6309\u987a\u5e8f\u8f93\u5165f(i) \u7136\u540eM\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 a,b \u601d\u8def \u00b6 \u8fd0\u7528\u6027\u8d28\uff1a f[i]-a*i-b \u6700\u5927\u503c\u5904\u7684f\u51fd\u6570\u7684\u5207\u7ebf\u659c\u7387\u7b49\u4e8ea \u4e8c\u5206\u67e5\u627ef'[i] = diff[i]\uff08\u79bb\u6563\u5dee\u5206\u6570\u7ec4\uff09\u4e2d\u6700\u5c0f\u7684\u5927\u4e8e\u7b49\u4e8ea\u7684\u6570\u7684\u5750\u6807i\uff08\u53ef\u80fd\u51fa\u73b0\u8fde\u7eed\u591a\u4e2adiff[i]\u76f8\u7b49\u7684\u60c5\u51b5\uff0c\u53d6\u8fb9\u7f18\uff09 f[i] - a * i - b \u53d6\u6700\u5c0f\u503c\u7684\u5750\u6807\u5728 [i - 1, i + 1] \u7684\u8303\u56f4\u5185 \u6ce8\u610f1\uff1ai\u5728diff\u6570\u7ec4\u4e24\u5934\u7684\u60c5\u51b5 \u6ce8\u610f2\uff1aC++\u4e2df[i]\u7684\u4e0b\u6807\u4ece0\u5f00\u59cb\uff0c\u4f46\u9898\u76ee\u4e2df(i)\u4e0b\u6807\u4ece1\u5f00\u59cb #include <bits/stdc++.h> using namespace std ; const int maxn = 5e5 + 5 , inf = 0x3f3f3f3f ; int n , m ; int f [ maxn ], diff [ maxn ]; // diff: f\u7684\u5dee\u5206\uff0c\u957f\u5ea6\u4e3an-1, \u7531\u4e8ef\u662f\u4e0a\u51f8\u51fd\u6570\uff0cdiff\u662f\u9012\u51cf\u51fd\u6570 int binary_search ( int a ) { // \u5728diff[i]\u4e2d\u641c\u7d22\u6700\u5c0f\u7684\u5927\u4e8e\u7b49\u4e8ea\u7684\u6570\u7684\u5750\u6807 int l = 0 , r = n - 2 , mid ; if ( diff [ 0 ] < a ) // diff \u9012\u51cf\uff0c\u4e4b\u540e\u4e0d\u53ef\u80fd\u641c\u7d22\u5230\u5927\u4e8e\u7b49\u4e8ea return 0 ; else if ( diff [ n - 2 ] > a ) return n - 2 ; while ( true ) { if ( l == r ) return l ; else if ( l + 1 == r && diff [ r ] < a && diff [ l ] >= a ) return r ; mid = ( l + r ) / 2 ; if ( diff [ mid ] >= a ) // \u641c\u7d22\u53f3\u533a\u95f4 l = mid ; else if ( diff [ mid ] < a ) // \u641c\u7d22\u5de6\u533a\u95f4 r = mid ; } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int i = 0 , a , b , ans1 , ans2 , ans3 ; cin >> n >> m ; // n\u662f\u51fd\u6570\u70b9\u7684\u6570\u91cf\uff0cm\u662f\u641c\u7d22\u6b21\u6570 for ( i = 0 ; i < n ; i ++ ) { cin >> f [ i ]; if ( i > 0 ) diff [ i - 1 ] = f [ i ] - f [ i - 1 ]; // \u79bb\u6563\u5dee\u5206\u8fd1\u4f3c\u5207\u7ebf\u659c\u7387 } // \u6ce8\u610f\u4e0b\u6807\u8303\u56f4 // f[0...(n-1)] // diff[0...(n-2)] while ( m -- ) { cin >> a >> b ; i = binary_search ( a ); if ( i == 0 ) { ans1 = f [ 0 ] - a - b ; ans2 = f [ 1 ] - a * 2 - b ; ans3 = f [ 2 ] - a * 3 - b ; } else if ( i == n - 2 ) { ans1 = f [ n - 1 ] - a * ( n - 1 + 1 ) - b ; ans2 = f [ n - 2 ] - a * ( n - 2 + 1 ) - b ; ans3 = f [ n - 3 ] - a * ( n - 3 + 1 ) - b ; } else { ans1 = f [ i ] - a * ( i + 1 ) - b ; ans2 = f [ i - 1 ] - a * ( i - 1 + 1 ) - b ; ans3 = f [ i + 1 ] - a * ( i + 1 + 1 ) - b ; } ans1 = max ( ans1 , max ( ans2 , ans3 )); printf ( \"%d \\n \" , ans1 ); } return 0 ; } \u7b2c3\u9898 \u8d28\u56e0\u5b50 \u00b6 \u7ed9\u5b9aN\u4e2a\u8d28\u6570\uff0c\u6784\u6210\u96c6\u5408S\uff0c\u8bbe\u96c6\u5408T\u4e3a\u7531\u8d28\u56e0\u5b50\u5168\u90e8\u5728S\u4e2d\u7684\u6574\u6570\u6784\u6210\u7684\u96c6\u5408\uff0c\u6c42T\u4e2d\u7b2ck\u5c0f\u7684\u6570\uff0c\u5176\u4e2d1<=N<=100,1<=k<=1e5,\u8f93\u51fa\u4fdd\u8bc1\u5728int\u7684\u8303\u56f4\u4e4b\u5185 \u8f93\u5165\uff1a\u7b2c\u4e00\u884c N\uff0ck \u7b2c\u4e8c\u884c N\u4e2a\u8d28\u6570 ```c++ tab=\"\u4e11\u6570\u601d\u8def\" // \u53c2\u8003 LeetCode 264. Ugly Number II \u590d\u4e60\uff0c\u4f46\u672c\u9898\u7684\u8d28\u6570\u6570\u91cf\u66f4\u591a include \u00b6 using namespace std; int main() { std::ios::sync_with_stdio(false); std::cin.tie(0); int n, k; int t; cin >> n >> k; vector<int> primes; // \u8d28\u6570\u96c6\u5408 vector<int> dp(k + 1); // dp[i] \u662f\u7b2ci\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570 vector<int> pointer(n, 0); // \u8d28\u6570\u7684\u6307\u9488 for (int i = 0; i < n; i++) { cin >> t; primes.push_back(t); } sort(primes.begin(), primes.end()); dp[0] = 1; for (int i = 1; i <= k; i++) { // \u9996\u5148\u627e\u5230\u4e0b\u4e00\u4e2a\u7b26\u5408\u8981\u6c42\u7684\u6570\uff0c\u7136\u540e\u5411\u540e\u79fb\u52a8\u6307\u9488 for (int j = 0; j < n; j++) { if (dp[i] == 0) dp[i] = dp[pointer[j]] * primes[j]; else dp[i] = min(dp[i], dp[pointer[j]] * primes[j]); } cout << \"dp[\" << i << \"]: \" << dp[i] << endl; for (int j = 0; j < n; j++) { if (dp[i] == dp[pointer[j]] * primes[j]) pointer[j]++; } } cout << dp[k]; return 0; } c++ tab=\"\u4f18\u5148\u961f\u5217\u601d\u8def\" include \u00b6 using namespace std; typedef long long ll; int n,k,s[110]; priority_queue ,greater\\ >que; int solve(){ while(que.size()) que.pop(); for(int i=0;i<n;++i) que.push(s[i]); int cnt=0,x,last; while(cnt<k){ x=que.top(); que.pop(); if(x==last) continue; ++cnt; last=x; for(int i=0;i<n;++i) que.push(s[i]*x); } return last; } int main(){ while(scanf(\"%d%d\",&n,&k)==2){ for(int i=0;i<n;++i) scanf(\"%d\",&s[i]); printf(\"%d\\n\",solve()); } return 0; } ``` \u7b2c\u56db\u9898 \u5806\u4f18\u5316\u53cc\u5411Dijkstra \u00b6 \u7f16\u53f7\u4e3a1\u5230N\u7684N\u4e2a\u57ce\u5e02\u95f4\u6709M\u6761\u94c1\u8def\uff0c\u901a\u8fc7\u6bcf\u6761\u94c1\u8def\u82b1\u8d39\u65f6\u95f4T_i,\u4e3a\u4e86\u51cf\u5c11\u4ece\u57ce\u5e021\u5230N\u7684\u65f6\u95f4\uff0c\u73b0\u5728\u51b3\u5b9a\u5c06\u5176\u4e2d\u4e00\u6761\u94c1\u8def\u6539\u5efa\u6210\u9ad8\u94c1\uff0c\u6539\u5efa\u540e\u901a\u8fc7\u8be5\u6761\u94c1\u8def\u7684\u65f6\u95f4\u5c06\u51cf\u534a\uff08\u5411\u4e0b\u53d6\u6574\u6570\uff09\uff0c\u6c42\u6539\u5efa\u54ea\u6761\u94c1\u8def\u53ef\u4ee5\u4f7f\u5f97\u6539\u5efa\u540e\u4ece\u57ce\u5e021\u5230\u57ce\u5e02N\u7684\u65f6\u95f4\u6700\u77ed \u8f93\u5165\uff1a\u7b2c\u4e00\u884cN\u548cM \u63a5\u4e0b\u6765M\u884c\uff0c\u6bcf\u884cA_i, B_i, T_i\u5206\u522b\u662f\u7b2ci\u6761\u94c1\u8def\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\uff0c\u4ee5\u53ca\u65f6\u95f4 \u8f93\u51fa\uff1a\u6539\u5efa\u7684\u94c1\u8def\u7f16\u53f7\u4ee5\u53ca\u6539\u5efa\u540e\u4ece1\u5230N\u7684\u65f6\u95f4 \u6ce8\u610f\uff1a\u94c1\u8def\u662f\u53cc\u5411\u7684\uff0c\u4fdd\u8bc1\u89e3\u552f\u4e00 80%\u6570\u636eN,M<5000,100%\u6570\u636eN,M<1000000 \u601d\u8def \u00b6 \u4ece\u8282\u70b91\u548c\u8282\u70b9n\u5206\u522b\u505a\u4e00\u6b21Dijkstra\u6c42\u4ece\u8282\u70b91\u51fa\u53d1\u7684\u5230\u6bcf\u4e2a\u70b9\u7684\u6700\u77ed\u8def\uff08\u4fdd\u5b58\u5728d1\u91cc\uff09\u548c\u4ece\u8282\u70b9n\u51fa\u53d1\u5230\u6bcf\u4e2a\u70b9\u7684\u6700\u77ed\u8def\uff08\u4fdd\u5b58\u5728d2\u91cc\uff09\u3002\u7136\u540e\u904d\u5386m\u6761\u8fb9\uff0c\u5efa\u9ad8\u94c1\u540e\u4ece\u8282\u70b91\u5230\u8282\u70b9n\u7684\u6700\u77ed\u8def\u4e3a min(d1[u] + d2[v] + len[u,v]) d1[u]\u7684\u8def\u5f84\u6709\u53ef\u80fd\u5305\u542b\u8fb9(u,v)\uff0cd2[v]\u7684\u8def\u5f84\u4e5f\u6709\u53ef\u80fd\u5305\u542b\u8fb9(u,v)\uff0c \u56e0\u6b64\u6700\u77ed\u8def\u7684\u8868\u8fbe\u5f0f\u5e94 min(min(d1[u] + d2[v], d1[v] + d2[u]) + len[u,v]) \u6570\u636e\u89c4\u6a21\u663e\u793a\u662f\u7a00\u758f\u56fe\uff0c\u56e0\u6b64\u7528\u5806\u4f18\u5316\u7684Dijkstra\uff0c\u76f8\u5e94\u7684\u91c7\u7528\u90bb\u63a5\u8868\u7684\u6570\u636e\u7ed3\u6784\uff08\u672c\u6765\u90bb\u63a5\u77e9\u9635\u5c31\u4f1a\u7206\u5185\u5b58\u2014\u2014vs\u663e\u793a\u6570\u7ec4\u8fc7\u5927\uff09\u5b58\u50a8\u8def\u7f51\u4fe1\u606f\uff0c\u590d\u6742\u5ea6\u4e3aO(mlogn + m) = O(mlogn) ```c++ tab=\"\u89e3\u6cd5\u4e00\" include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 include \u00b6 using namespace std; typedef long long ll; const int maxn=1e6+10,inf=10000000; int to1[maxn],ton[maxn],n,m; struct biedge{ int u,v,t; } biedges[maxn]; struct edge{ int v,t; edge(int v=0,int t=0){ this->v=v; this->t=t; } bool operator<(const edge& b)const {return t>b.t;} }; vector edges[maxn]; priority_queue que; void dij(int s,int *d){ fill(d,d+n+1,inf); while(que.size()) que.pop(); d[s]=0; que.push(edge(s,0)); while(que.size()){ int u=que.top().v,t=que.top().t; que.pop(); if(d[u]!=t) continue; for(int i=0;i<edges[u].size();++i){ int v=edges[u][i].v; if(d[u]+edges[u][i].t<d[v]){ d[v]=d[u]+edges[u][i].t; que.push(edge(v,d[v])); } } } } int main(){ while(scanf(\"%d%d\",&n,&m)==2){ for(int i=1;i<=m;++i){ int u,v,t; scanf(\"%d%d%d\",&u,&v,&t); biedges[i].u=u; biedges[i].v=v; biedges[i].t=t; edges[u].push_back(edge(v,t)); edges[v].push_back(edge(u,t)); } dij(1,to1); dij(n,ton); int res=inf,idx; for(int i=1;i<=m;++i){ int u=biedges[i].u,v=biedges[i].v; int tmp=to1[u]+ton[v]+biedges[i].t/2; if(tmp<res){ res=tmp; idx=i; } } printf(\"%d %d\\n\",idx,res); } return 0; } ```c++ tab=&quot;\u89e3\u6cd52&quot; // \u7528\u5806\u4f18\u5316\u7684Dijkstra\u7b97\u6cd5\u7b97\u4e24\u904d\uff0c\u5206\u522b\u4ece\u6e90\u70b9\u548c\u6c47\u70b9\u5f00\u59cb\u7b97\uff0c // \u7b97\u5f97d1\u6570\u7ec4\u8bb0\u5f55\u6240\u6709\u70b9\u5230\u6e90\u70b9\u7684\u8ddd\u79bb\uff0cd2\u6570\u7ec4\u8bb0\u5f55\u6240\u6709\u70b9\u5230\u6c47\u70b9\u7684\u8ddd\u79bb // \u904d\u5386m\u6761\u8fb9\uff0cans = min(min(d1[u] + d2[v], d1[v] + d2[u]) + len[u,v]) #include<cstdio> #include<queue> #include<vector> #include<cstring> const int NMAX = 1000005, INF = 0x3f3f3f3f; struct toEdge { int v,t; toEdge(int vv, int tt): v(vv), t(tt) {} toEdge(void) {} }; struct cmp { bool operator() (const toEdge & a, const toEdge & b) { return a.t > b.t; } }; struct Edge { int u, v, t; Edge(int uu, int vv, int tt): u(uu), v(vv), t(tt) {} Edge(void){} }edges[NMAX]; int n, m; std::vector<toEdge> E[NMAX]; // \u90bb\u63a5\u8868 int d[NMAX] = {}; int vis[NMAX] = {}; int d1[NMAX] = {}; // \u4ece\u8282\u70b91\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def int d2[NMAX] = {}; // \u4ece\u8282\u70b92\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def void dijkstra(int src) // \u7528Dijkstra\u7b97\u6cd5\u6c42\u4ecesrc\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def { int i, v, t; std::priority_queue<toEdge, std::vector<toEdge>, cmp> q; memset(vis, 0, sizeof(vis)); memset(d, 0x3f, sizeof(d)); vis[src] = 1; d[src] = 0; for (i = 0; i < E[src].size(); i++) { q.push(toEdge(E[src].at(i).v, E[src].at(i).t)); } while (!q.empty()) { v = q.top().v; while (vis[v]) { q.pop(); if (q.empty()) { return; } v = q.top().v; } vis[v] = 1; t = q.top().t; d[v] = t; for (i = 0; i < E[v].size(); i++) { if (!vis[E[v].at(i).v] && d[E[v].at(i).v] > E[v].at(i).t + t) { q.push(toEdge(E[v].at(i).v, E[v].at(i).t + t)); } } } } int main() { #ifndef ONLINE_JUDGE freopen(\"xlySE18_04.txt\", \"r\", stdin); #endif scanf(\"%d%d\", &n, &m); int i = 0, u, v, t, minv = INF, minid = -1; for (i=0; i<m; i++) { scanf(\"%d%d%d\", &u, &v, &t); E[u].push_back(toEdge(v,t)); E[v].push_back(toEdge(u,t)); edges[i] = Edge(u,v,t); } dijkstra(1); memcpy(d1, d, sizeof(d)); dijkstra(n); memcpy(d2, d, sizeof(d)); for (i=0; i<m; i++) { u = edges[i].u; v = edges[i].v; t = edges[i].t; if (t/2 + d1[u] + d2[v] < minv) // \u53d6std::min(d1[u] + d2[v], d1[v] + d2[u]) { minv = t/2 + d1[u] + d2[v]; minid = i + 1; } else if (t/2 + d1[v] + d2[u] < minv) { minv = t/2 + d1[v] + d2[u]; minid = i + 1; } } printf(\"%d %d\", minid, minv); return 0; } 2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd5 \u00b6 // 2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd51 \u5927\u6574\u6570\u4e58\u6cd5 // 2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd52 \u5927\u6574\u6570\u6392\u5217 #include <iostream> #include <sstream> #include <cstring> #include <algorithm> using namespace std ; const int maxlen = 1000 ; class BigInteger { public : int d [ maxlen ]; // \u5b58\u50a8\u5927\u6570\uff0c\u6570\u7ec4\u4f4e\u4f4d\u5b58\u50a8\u5927\u6570\u4f4e\u4f4d int len ; // \u8bb0\u5f55\u957f\u5ea6 void clear () { memset ( d , 0 , sizeof ( d )); len = 0 ; } BigInteger () { clear (); } BigInteger ( string str ) { clear (); for ( int i = str . size () - 1 ; i >= 0 ; i -- ) { d [ len ++ ] = str [ i ] - '0' ; } } string toString () { stringstream ss ; string str ; for ( int i = len - 1 ; i >= 0 ; i -- ) { ss << d [ i ]; } ss >> str ; return str ; } }; BigInteger next_permutation ( BigInteger bign ) { string str = bign . toString (); if ( str . empty () || str . size () == 1 ) return bign ; next_permutation ( str . begin (), str . end ()); return BigInteger ( str ); } /** * \u5927\u6574\u6570\u52a0\u6cd5 * \u5927\u6574\u6570\u4e58\u6cd5 * @param a \u5927\u6574\u6570 * @param b \u5927\u6574\u6570 * @return \u5927\u6574\u6570 a + b */ BigInteger add ( BigInteger a , BigInteger b ) { BigInteger res ; int carry = 0 ; for ( res . len = 0 ; res . len < max ( a . len , b . len ); res . len ++ ) { int sum = a . d [ res . len ] + b . d [ res . len ] + carry ; res . d [ res . len ] = sum % 10 ; carry = sum / 10 ; } if ( carry ) res . d [ res . len ++ ] = carry ; return res ; } /** * \u5927\u6574\u6570\u4e58\u4ee5int * @param a \u5927\u6574\u6570 * @param b \u6574\u6570 * @return \u5927\u6574\u6570 a * b */ BigInteger multiply ( BigInteger a , int b ) { BigInteger res ; int carry = 0 ; for ( res . len = 0 ; res . len < a . len ; ++ res . len ) { int product = a . d [ res . len ] * b + carry ; res . d [ res . len ] = product % 10 ; carry = product / 10 ; } if ( carry ) res . d [ res . len ++ ] = carry ; return res ; } /** * \u5927\u6574\u6570\u4e58\u6cd5 * @param a \u5927\u6574\u6570 * @param b \u5927\u6574\u6570 * @return \u5927\u6574\u6570 a * b */ BigInteger multiply ( BigInteger a , BigInteger b ) { BigInteger res ( \"0\" ); for ( int j = 0 ; j < b . len ; j ++ ) { BigInteger mul = multiply ( a , b . d [ j ]); for ( int k = 0 ; k < j ; k ++ ) { mul = multiply ( mul , 10 ); } res = add ( res , mul ); } return res ; } int main () { string a , b ; string res ; while ( cin >> a >> b ) { BigInteger biga ( a ); BigInteger bigb ( b ); res = add ( biga , bigb ). toString (); cout << \"sum: \" << res << endl ; res = multiply ( biga , bigb ). toString (); cout << \"product: \" << res << endl ; BigInteger bigc = next_permutation ( biga ); cout << \"next_permutation: \" << bigc . toString () << endl ; } return 0 ; } 2018\u6e05\u534e\u8ba1\u7b97\u673a\u4e0a\u673a\u7ec3\u4e60 \u00b6 \u3010\u9898\u76ee\u63cf\u8ff0\u3011 \u4eca\u5e74\uff0cn\u53ea\u601d\u8003\u718a\u53c2\u52a0\u4e86\u6e05\u534e\u5927\u5b66\u6821\u56ed\u9a6c\u62c9\u677e\u6bd4\u8d5b\u3002\u9a6c\u62c9\u677e\u7684\u8d5b\u9053\u662f\u73af\u5f62\u7684\uff0c\u6bcf\u5708 \u7684\u957f\u5ea6\u662fA\uff0c\u5b8c\u6210\u6bd4\u8d5b\u9700\u8981\u8dd1L\u5708\u3002 \u6bd4\u8d5b\u4e2d\uff0c\u7532\u9886\u5148\u4e59\u5f88\u957f\u8ddd\u79bb\uff0c\u7ed5\u8fc7\u4e00\u5708\u6216\u591a\u5708\u540e\u4ece\u540e\u9762\u8ffd\u4e0a\u4e86\u4e59\u7684\u73b0\u8c61\u53eb\u505a\u201c\u5957 \u5708\u201d\u3002\u5957\u5708\u73b0\u8c61\u975e\u5e38\u5e38\u89c1\uff0c\u4f8b\u5982\uff1a\u8dd1\u5f97\u6bd4\u8c01\u90fd\u5feb\u7684saffah\u718a\u53ef\u4ee5\u5957\u67d0\u4e9b\u718aL-1\u5708\uff1b ufozgg\u718a\u7ecf\u5e38\u8fdb\u884c\u65e5\u5e38\u8010\u529b\u8bad\u7ec3\uff0c\u5957\u5708\u6b21\u6570\u548c\u88ab\u5957\u5708\u6b21\u6570\u57fa\u672c\u6301\u5e73\uff1b\u800cMulab\u4f5c\u4e3a\u4e00 \u53ea\u8001\u5e74\u718a\uff0c\u5219\u662f\u88ab\u5957L-1\u5708\u7684\u90a3\u79cd\u3002 \u4e0e\u4eba\u4e0d\u540c\u7684\u662f\uff0c\u601d\u8003\u718a\u5728\u8dd1\u6b65\u65f6\u90fd\u662f\u5300\u901f\u8fd0\u52a8\u3002wyx\u718a\u662f\u8fd9\u6b21\u6bd4\u8d5b\u7684\u8ba1\u65f6\u5458\uff0c\u4ed6 \u7edf\u8ba1\u4e86\u53c2\u8d5b\u7684n\u53ea\u718a\u7684\u901f\u5ea6v1\uff0c v2\uff0c......\uff0cvn\uff08\u5176\u4e2d\u6700\u5927\u7684\u4e00\u4e2a\u662fsaffah\u718a\u7684\u901f\u5ea6\uff09\u3002\u73b0\u5728 wyx\u718a\u5e0c\u671b\u4f60\u544a\u8bc9\u4ed6\uff0c\u5f53\u901f\u5ea6\u6700\u5feb\u7684saffah\u718a\u5230\u8fbe\u7ec8\u70b9\u65f6\uff0c\u573a\u4e0a\u6240\u6709\u718a\u4e2d\u603b\u5171\u53d1\u751f\u4e86 \u591a\u5c11\u6b21\u5957\u5708\u73b0\u8c61\u3002 \u6ce8\u610f\uff1a\u5728saffah\u718a\u521a\u521a\u5230\u8fbe\u7ec8\u70b9\u90a3\u4e00\u523b\uff0c\u5982\u679c\u7532\u6070\u597d\u8ffd\u4e0a\u4e86\u4e59\uff0c\u6b64\u65f6\u4e5f\u7b97\u4f5c\u7532\u5c06\u4e59 \u5957\u5708\u3002 \u3010\u8f93\u5165\u683c\u5f0f\u3011 \u4ece\u6587\u4ef6running.in\u4e2d\u8bfb\u5165\u6570\u636e\u3002 \u8f93\u5165\u7684\u7b2c\u4e00\u884c\u5305\u542b2\u4e2a\u6574\u6570T;C\uff0c\u5206\u522b\u8868\u793a\u8fd9\u4e2a\u6d4b\u8bd5\u70b9\u5185\u6570\u636e\u7684\u7ec4\u6570\u548c\u8fd9\u4e2a\u6d4b\u8bd5 \u70b9\u7684\u7f16\u53f7\u3002\u5bf9\u4e8e\u6240\u6709\u6d4b\u8bd5\u70b9\uff0c\u4fdd\u8bc1T = 10\u3002 \u6bcf\u7ec4\u6570\u636e\u7684\u7b2c\u4e00\u884c\u5305\u542b3\u4e2a\u6b63\u6574\u6570n;A;L\uff0c\u5206\u522b\u8868\u793a\u601d\u8003\u718a\u7684\u53ea\u6570\uff0c\u8dd1\u9053\u6bcf\u5708\u7684\u957f \u5ea6\u548c\u5b8c\u6210\u6bd4\u8d5b\u6240\u9700\u8981\u7684\u5708\u6570\u3002\u4fdd\u8bc1A;L<10^8\u3002 \u7b2c\u4e8c\u884c\u5305\u542bn\u4e2a\u6b63\u6574\u6570v1\uff0c v2\uff0c......\uff0cvn\uff0c\u8868\u793a\u6bcf\u53ea\u601d\u8003\u718a\u7684\u901f\u5ea6\u3002\u4fdd\u8bc1\u8fd9\u4e9b\u6570\u4e92\u4e0d \u76f8\u540c\u3002 \u3010\u8f93\u51fa\u683c\u5f0f\u3011 \u8f93\u51fa\u5230\u6587\u4ef6running.out\u4e2d\u3002 \u8f93\u51faT\u884c\uff0c\u5206\u522b\u8868\u793a\u6bcf\u7ec4\u6570\u636e\u4e2d\uff0c\u6240\u6709\u718a\u53d1\u751f\u7684\u5957\u5708\u603b\u6b21\u6570\u3002 \u3010\u6837\u4f8b\u8f93\u5165\u3011 4 0 2 1000 15 2 5 2 1000 13 9 4 5 1000 10 8 10 2 5 6 5 1000 17 8 10 2 5 7 \u3010\u6837\u4f8b\u8f93\u51fa\u3011 9 7 38 61 \u3010\u6570\u636e\u8303\u56f4\u3011 n<=10^5,vi<=10^8 \u3010\u9898\u89e3\u3011 \u5957\u5708\u7684\u5708\u6570\u53ea\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u4eba\u8dd1\u4e86\u591a\u5c11\u5708\uff0c\u6240\u4ee5\u7b54\u6848\u4e3a\u4e24\u4e24\u4e4b\u95f4\u7684\u5708\u6570\u5dee\u5411\u4e0b\u53d6\u6574 \u56e0\u4e3a\u6709\u5708\u6570\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u65e0\u6cd5\u901a\u8fc7\u524d\u7f00\u548cO(n)\u8ba1\u7b97 \u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5c0f\u6570\u90e8\u5206\u548c\u6574\u6570\u90e8\u5206\u5206\u5f00\u505a \u6574\u6570\u90e8\u5206\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u5708\u6570\uff0c\u5982\u679c\u5c0f\u6570\u90e8\u5206\u7684\u5dee\u5c0f\u4e8e0\uff0c\u5c31\u518d\u51cf1 \u6bd4\u5982\u4e00\u4e2a\u8dd1\u4e865.1\u5708\uff0c\u4e00\u4e2a4.9\u5708\uff0c\u5b83\u4eec\u6574\u6570\u90e8\u5206\u5dee\u4e3a5-4=1\uff0c\u4f46\u662f\u56e0\u4e3a\u5c0f\u6570\u90e8\u52060.1-0.9<0\uff0c\u6240\u4ee5\u9700\u8981\u51cf1 \u6240\u4ee5\u9700\u8981\u627e\u51fa\u4e24\u4e2a\u6570i,j\uff0c\u6574\u6570\u90e8\u5206i>j\uff0c\u4f46\u5c0f\u6570i<j \u8fd9\u5c31\u662f\u9006\u5e8f\u5bf9\u88f8\u9898\u4e86\uff0c\u6811\u72b6\u6570\u7ec4\u5c31\u80fd\u641e\u5b9a\u3002 \u8fd8\u6709\u4e00\u4e2a\u5c0f\u4f18\u5316\uff0c\u56e0\u4e3a\u8dd1\u7684\u5708\u6570\u662f l * vi/ vmax\uff0c\u5206\u6bcd\u90fd\u76f8\u540c\uff0c\u53ef\u4ee5\u5168\u90e8\u53bb\u6389\u8f6c\u5316\u6210\u6574\u6570\u8ba1\u7b97\uff0c\u907f\u514d\u7cbe\u5ea6\u8bef\u5dee https://www.cnblogs.com/qwerfcxs/p/7802638.html https://blog.csdn.net/qq_40760407/article/details/83514782","title":"Previous Coding Tests"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#previous-coding-tests","text":"","title":"Previous Coding Tests"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2019","text":"","title":"2019\u5317\u5927\u4fe1\u79d1\u7814\u7a76\u751f\u4e0a\u673a\u6d4b\u8bd5"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#a","text":"/* * A:\u62a4\u6797\u5458\u76d6\u623f\u5b50 \u67e5\u770b \u63d0\u4ea4 \u7edf\u8ba1 \u63d0\u95ee \u603b\u65f6\u95f4\u9650\u5236: 1000ms \u5185\u5b58\u9650\u5236: 65536kB \u63cf\u8ff0 \u5728\u4e00\u7247\u4fdd\u62a4\u6797\u4e2d\uff0c\u62a4\u6797\u5458\u60f3\u8981\u76d6\u4e00\u5ea7\u623f\u5b50\u6765\u5c45\u4f4f\uff0c\u4f46\u4ed6\u4e0d\u80fd\u780d\u4f10\u4efb\u4f55\u6811\u6728\u3002 \u73b0\u5728\u8bf7\u4f60\u5e2e\u4ed6\u8ba1\u7b97\uff1a\u4fdd\u62a4\u6797\u4e2d\u6240\u80fd\u7528\u6765\u76d6\u623f\u5b50\u7684\u77e9\u5f62\u7a7a\u5730\u7684\u6700\u5927\u9762\u79ef\u3002 \u8f93\u5165 \u4fdd\u62a4\u6797\u7528\u4e00\u4e2a\u4e8c\u7ef4\u77e9\u9635\u6765\u8868\u793a\uff0c\u957f\u5bbd\u90fd\u4e0d\u8d85\u8fc720\uff08\u5373<=20\uff09\u3002 \u7b2c\u4e00\u884c\u662f\u4e24\u4e2a\u6b63\u6574\u6570m,n\uff0c\u8868\u793a\u77e9\u9635\u6709m\u884cn\u5217\u3002 \u7136\u540e\u662fm\u884c\uff0c\u6bcf\u884cn\u4e2a\u6574\u6570\uff0c\u75281\u4ee3\u8868\u6811\u6728\uff0c\u75280\u8868\u793a\u7a7a\u5730\u3002 \u8f93\u51fa \u4e00\u4e2a\u6b63\u6574\u6570\uff0c\u8868\u793a\u4fdd\u62a4\u6797\u4e2d\u80fd\u7528\u6765\u76d6\u623f\u5b50\u7684\u6700\u5927\u77e9\u5f62\u7a7a\u5730\u9762\u79ef\u3002 \u6837\u4f8b\u8f93\u5165 4 5 0 1 0 1 1 0 1 0 0 1 0 0 0 0 0 0 1 1 0 1 \u6837\u4f8b\u8f93\u51fa 5 \u63d0\u793a \u5b50\u77e9\u9635\u8fb9\u957f\u53ef\u4ee5\u4e3a1\uff0c\u4e5f\u5c31\u662f\u8bf4\uff1a 0 0 0 0 0 \u4f9d\u7136\u662f\u4e00\u4e2a\u53ef\u4ee5\u76d6\u623f\u5b50\u7684\u5b50\u77e9\u9635\u3002 \u6765\u6e90 2017\u533b\u5b66\u90e8\u8ba1\u7b97\u6982\u8bba-\u671f\u672b\u8003\u8bd5-\u7533\u535a */ #include <iostream> using namespace std ; const int maxn = 25 ; int nums [ maxn ][ maxn ]; // \u626b\u63cf\u7ebf\u6cd5 \u6c42\u6700\u5927\u7a7a\u5730\u9762\u79ef // \u4f7f\u7528\u4e09\u4e2a\u6570\u7ec4 // h[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u957f\u5ea6 // left[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u5de6\u8fb9\u754c // right[i, j] \u8868\u793a\u70b9 (i, j) \u5bf9\u5e94\u7684\u60ac\u7ebf\u53f3\u8fb9\u754c // \u4ece\u4e0a\u5411\u4e0b\u626b\u63cf\uff0c\u4ece\u5de6\u5230\u53f3\u8ba1\u7b97 left \u6570\u7ec4\uff0c\u4ece\u53f3\u5230\u5de6\u8ba1\u7b97 right \u6570\u7ec4\uff0c\u5e76\u66f4\u65b0\u7b54\u6848 // \u5728\u5b9e\u73b0\u4e2d\uff0c\u6570\u7ec4\u964d\u7ef4\u4ee5\u8282\u7ea6\u7a7a\u95f4 int h [ maxn ], l [ maxn ], r [ maxn ]; int lb , rb ; // \u4e0e\u5f53\u524d\u70b9\u6700\u8fd1\u7684\u969c\u788d\u70b9 int ans = 0 ; int main () { int m , n ; cin >> m >> n ; for ( int i = 0 ; i < m ; i ++ ) { for ( int j = 0 ; j < n ; j ++ ) { cin >> nums [ i ][ j ]; } } for ( int j = 0 ; j < n ; j ++ ) { h [ j ] = 0 ; // \u521d\u59cb\u5316\u6bcf\u4e2a\u70b9\u5de6\u53f3\u8fb9\u754c \u53ea\u8981\u5728[0, n-1]\u4e4b\u5916\u5373\u53ef l [ j ] = -1 ; r [ j ] = n ; } for ( int i = 0 ; i < m ; i ++ ) { lb = -1 ; rb = n ; for ( int j = 0 ; j < n ; j ++ ) { // \u4ece\u5de6\u5230\u53f3\u626b\u63cf if ( nums [ i ][ j ] == 1 ) { // \u8be5\u70b9\u662f\u969c\u788d h [ j ] = 0 ; l [ j ] = -1 ; lb = j ; } else { // \u8be5\u70b9\u662f\u7a7a\u5730 h [ j ] ++ ; l [ j ] = max ( l [ j ], lb + 1 ); // \u6b64\u5904\u7684l[j] \u5b9e\u9645\u4e0a\u662fl[i-1,j] \u4e0a\u4e00\u884c\u7684\u8be5\u70b9\u7a7a\u5730\u5de6\u8fb9\u754c lb+1\u662f\u5f53\u524d\u884c\u7684\u5de6\u8fb9\u754c } } for ( int j = n - 1 ; j >= 0 ; j -- ) { // \u4ece\u53f3\u5230\u5de6\u626b\u63cf if ( nums [ i ][ j ] == 1 ) { // \u8be5\u70b9\u662f\u969c\u788d r [ j ] = n ; rb = j ; } else { // \u8be5\u70b9\u662f\u7a7a\u5730 r [ j ] = min ( r [ j ], rb - 1 ); ans = max ( ans , h [ j ] * ( r [ j ] - l [ j ] + 1 )); } } } cout << ans << endl ; return 0 ; }","title":"A:\u62a4\u6797\u5458\u76d6\u623f\u5b50"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2018","text":"https://blog.csdn.net/qq_34446253/article/details/51987082","title":"2018\u5e74\u5317\u4eac\u5927\u5b66\u8f6f\u4ef6\u5de5\u7a0b\u5b66\u79d1\u590f\u4ee4\u8425\u4e0a\u673a\u7ec3\u4e60"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2018_1","text":"","title":"2018\u5317\u4eac\u5927\u5b66\u8ba1\u7b97\u673a\u5b66\u79d1\u590f\u4ee4\u8425\u4e0a\u673a\u8003\u8bd5"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#e","text":"E:\u91cd\u8981\u9006\u5e8f\u5bf9 \u67e5\u770b \u63d0\u4ea4 \u7edf\u8ba1 \u63d0\u95ee \u603b\u65f6\u95f4\u9650\u5236: 10000ms \u5355\u4e2a\u6d4b\u8bd5\u70b9\u65f6\u95f4\u9650\u5236: 1000ms \u5185\u5b58\u9650\u5236: 65536kB \u63cf\u8ff0 \u7ed9\u5b9aN\u4e2a\u6570\u7684\u5e8f\u5217a1,a2,...aN\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6570\u5bf9(ai, aj)\u4e3a\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u5145\u8981\u6761\u4ef6\u4e3a i < j \u4e14 ai > 2aj\u3002\u6c42\u7ed9\u5b9a\u5e8f\u5217\u4e2d\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u4e2a\u6570\u3002 \u8f93\u5165 \u7b2c\u4e00\u884c\u4e3a\u5e8f\u5217\u4e2d\u6570\u5b57\u7684\u4e2a\u6570N\uff081 \u2264 N \u2264 200000\uff09\u3002 \u7b2c\u4e8c\u884c\u4e3a\u5e8f\u5217a1, a2 ... aN(0 \u2264a \u2264 10000000)\uff0c\u7531\u7a7a\u683c\u5206\u5f00\u3002 \u8f93\u51fa \u8f93\u51fa\u4e00\u4e2a\u6574\u6570\uff0c\u4e3a\u7ed9\u5e8f\u5217\u4e2d\u201c\u91cd\u8981\u9006\u5e8f\u5bf9\u201d\u7684\u4e2a\u6570\u3002 \u6837\u4f8b\u8f93\u5165 10 0 9 8 7 6 5 4 3 2 1 \u6837\u4f8b\u8f93\u51fa 16 \u63d0\u793a \u5982\u679c\u4f7f\u7528printf\u8f93\u51falong long\u7c7b\u578b\uff0c\u8bf7\u7528%lld \u6570\u636e\u8303\u56f4 \u5bf9\u4e8e40%\u7684\u6570\u636e\uff0c\u6709N \u2264 1000\u3002 // \u8ba1\u7b97\u91cd\u8981\u9006\u5e8f\u5bf9\u53ea\u9700\u8981\u5bf9\u5f52\u5e76\u6392\u5e8f\u89e3\u6cd5\u505a\u7b80\u5355\u7684\u66f4\u6539\uff0c\u4f46\u6392\u5e8f\u548c\u6c42\u9006\u5e8f\u5bf9\u6570\u9700\u8981\u5206\u79bb #include <bits/stdc++.h> using namespace std ; long long ans ; // \u91cd\u8981\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\uff0c\u9898\u76ee\u6697\u793a\u4f7f\u7528 long long /** * \u5f52\u5e76\u5de6\u53f3\u4e24\u6570\u7ec4 * * @param nums * @param left * @param mid * @param right */ void merge ( vector < int > & nums , int left , int mid , int right ) { // \u521b\u5efa\u4e34\u65f6\u6570\u7ec4 vector < int > L ; vector < int > R ; for ( int i = left ; i <= mid ; i ++ ) L . push_back ( nums [ i ]); for ( int j = mid + 1 ; j <= right ; j ++ ) R . push_back ( nums [ j ]); int i = 0 , j = 0 , k = left ; int l1 = mid - left + 1 , l2 = right - mid ; // \u5408\u5e76\u4e24\u6570\u7ec4\uff0c\u6ce8\u610f\u6392\u5e8f\u7684\u89c4\u5219\u5728\u672c\u9898\u4e2d\uff1a\u4e0d\u662f\u5355\u7eaf\u5730\u6bd4\u8f83\u539f\u59cb\u6570\u7ec4\u4e2d\u4e24\u6570\u5b57\u7684\u5927\u5c0f while ( i < l1 && j < l2 ) { if ( L [ i ] <= 2 * R [ j ]){ i ++ ; } else { j ++ ; ans += ( l1 - i ); } } i = 0 , j = 0 ; while ( i < l1 && j < l2 ) { if ( L [ i ] <= R [ j ]) nums [ k ++ ] = L [ i ++ ]; else nums [ k ++ ] = R [ j ++ ]; } while ( i < l1 ) nums [ k ++ ] = L [ i ++ ]; while ( j < l2 ) nums [ k ++ ] = R [ j ++ ]; } /** * \u9012\u5f52\u5b9e\u73b0\u7684\u5f52\u5e76\u6392\u5e8f * * @param nums * @param left * @param right */ void mergeSort ( vector < int > & nums , int left , int right ) { if ( left < right ) { // \u6ce8\u610f\u5224\u65ad int mid = left + ( right - left ) / 2 ; mergeSort ( nums , left , mid ); // \u95ed\u533a\u95f4[left, mid] mergeSort ( nums , mid + 1 , right ); // \u95ed\u533a\u95f4[mid + 1, right] merge ( nums , left , mid , right ); } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int n ; vector < int > nums ; cin >> n ; int num ; for ( int i = 0 ; i < n ; i ++ ) { cin >> num ; nums . push_back ( num ); } mergeSort ( nums , 0 , nums . size () - 1 ); cout << ans ; return 0 ; }","title":"E \u91cd\u8981\u9006\u5e8f\u5bf9"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2018_2","text":"","title":"2018\u5e74\u6e05\u534e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662\u590f\u4ee4\u8425\u673a\u8bd5"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#1","text":"\u8f93\u5165\u53ea\u6709\u4e00\u884c\uff0c\u5305\u542b\u4e24\u4e2a\u6574\u6570a,b\uff0c\u8981\u6c42\u8f93\u51fa[a,b]\u5185\u6240\u6709\u7684\u56de\u6587\u6570\uff0ca,b<10^6 #include <bits/stdc++.h> using namespace std ; int num [ 10 ]; // \u6570\u7ec4\u4f4e\u4f4d\u5b58\u6570\u5b57\u4f4e\u4f4d bool check ( int x ) { // sprintf \u53ef\u80fd\u7565\u5feb\u4e8e stringstream\uff0c\u4f46\u6b64\u5904\u4f7f\u7528\u624b\u52a8\u8f6c\u6362\uff0c\u7a0b\u5e8f\u6027\u80fd\u4f18\u52bf\u660e\u663e int len = 0 ; while ( x ) { num [ len ++ ] = x % 10 ; x /= 10 ; } int i = 0 , j = len - 1 ; while ( i < j ) { if ( num [ i ++ ] != num [ j -- ]) return false ; } return true ; } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int a , b ; cin >> a >> b ; if ( a > b ) swap ( a , b ); for ( int i = a ; i <= b ; i ++ ) { if ( check ( i )) cout << i << endl ; } return 0 ; }","title":"\u7b2c1\u9898 \u56de\u6587\u6570"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2","text":"\u5728\u4e00\u4e2a\u4e0a\u51f8\u51fd\u6570\u4e0a\u5747\u5300\u91c7\u6837\u5f97\u5230{f(i)|i=1,2\u2026N},\u6709M\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u8f93\u5165\u4e24\u4e2a\u6574\u6570a,b,\u6c42{f(i)-a*i-b|i=1,2\u2026N}\u7684\u6700\u5927\u503c\u3002 \u8f93\u5165\uff1a\u7b2c\u4e00\u884c,N\u548cM, \u5176\u4e2dN,M<5e5 \u7136\u540eN\u884c\uff0c\u6309\u987a\u5e8f\u8f93\u5165f(i) \u7136\u540eM\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 a,b","title":"\u7b2c2\u9898 \u4e0a\u51f8\u51fd\u6570"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#_1","text":"\u8fd0\u7528\u6027\u8d28\uff1a f[i]-a*i-b \u6700\u5927\u503c\u5904\u7684f\u51fd\u6570\u7684\u5207\u7ebf\u659c\u7387\u7b49\u4e8ea \u4e8c\u5206\u67e5\u627ef'[i] = diff[i]\uff08\u79bb\u6563\u5dee\u5206\u6570\u7ec4\uff09\u4e2d\u6700\u5c0f\u7684\u5927\u4e8e\u7b49\u4e8ea\u7684\u6570\u7684\u5750\u6807i\uff08\u53ef\u80fd\u51fa\u73b0\u8fde\u7eed\u591a\u4e2adiff[i]\u76f8\u7b49\u7684\u60c5\u51b5\uff0c\u53d6\u8fb9\u7f18\uff09 f[i] - a * i - b \u53d6\u6700\u5c0f\u503c\u7684\u5750\u6807\u5728 [i - 1, i + 1] \u7684\u8303\u56f4\u5185 \u6ce8\u610f1\uff1ai\u5728diff\u6570\u7ec4\u4e24\u5934\u7684\u60c5\u51b5 \u6ce8\u610f2\uff1aC++\u4e2df[i]\u7684\u4e0b\u6807\u4ece0\u5f00\u59cb\uff0c\u4f46\u9898\u76ee\u4e2df(i)\u4e0b\u6807\u4ece1\u5f00\u59cb #include <bits/stdc++.h> using namespace std ; const int maxn = 5e5 + 5 , inf = 0x3f3f3f3f ; int n , m ; int f [ maxn ], diff [ maxn ]; // diff: f\u7684\u5dee\u5206\uff0c\u957f\u5ea6\u4e3an-1, \u7531\u4e8ef\u662f\u4e0a\u51f8\u51fd\u6570\uff0cdiff\u662f\u9012\u51cf\u51fd\u6570 int binary_search ( int a ) { // \u5728diff[i]\u4e2d\u641c\u7d22\u6700\u5c0f\u7684\u5927\u4e8e\u7b49\u4e8ea\u7684\u6570\u7684\u5750\u6807 int l = 0 , r = n - 2 , mid ; if ( diff [ 0 ] < a ) // diff \u9012\u51cf\uff0c\u4e4b\u540e\u4e0d\u53ef\u80fd\u641c\u7d22\u5230\u5927\u4e8e\u7b49\u4e8ea return 0 ; else if ( diff [ n - 2 ] > a ) return n - 2 ; while ( true ) { if ( l == r ) return l ; else if ( l + 1 == r && diff [ r ] < a && diff [ l ] >= a ) return r ; mid = ( l + r ) / 2 ; if ( diff [ mid ] >= a ) // \u641c\u7d22\u53f3\u533a\u95f4 l = mid ; else if ( diff [ mid ] < a ) // \u641c\u7d22\u5de6\u533a\u95f4 r = mid ; } } int main () { std :: ios :: sync_with_stdio ( false ); std :: cin . tie ( 0 ); int i = 0 , a , b , ans1 , ans2 , ans3 ; cin >> n >> m ; // n\u662f\u51fd\u6570\u70b9\u7684\u6570\u91cf\uff0cm\u662f\u641c\u7d22\u6b21\u6570 for ( i = 0 ; i < n ; i ++ ) { cin >> f [ i ]; if ( i > 0 ) diff [ i - 1 ] = f [ i ] - f [ i - 1 ]; // \u79bb\u6563\u5dee\u5206\u8fd1\u4f3c\u5207\u7ebf\u659c\u7387 } // \u6ce8\u610f\u4e0b\u6807\u8303\u56f4 // f[0...(n-1)] // diff[0...(n-2)] while ( m -- ) { cin >> a >> b ; i = binary_search ( a ); if ( i == 0 ) { ans1 = f [ 0 ] - a - b ; ans2 = f [ 1 ] - a * 2 - b ; ans3 = f [ 2 ] - a * 3 - b ; } else if ( i == n - 2 ) { ans1 = f [ n - 1 ] - a * ( n - 1 + 1 ) - b ; ans2 = f [ n - 2 ] - a * ( n - 2 + 1 ) - b ; ans3 = f [ n - 3 ] - a * ( n - 3 + 1 ) - b ; } else { ans1 = f [ i ] - a * ( i + 1 ) - b ; ans2 = f [ i - 1 ] - a * ( i - 1 + 1 ) - b ; ans3 = f [ i + 1 ] - a * ( i + 1 + 1 ) - b ; } ans1 = max ( ans1 , max ( ans2 , ans3 )); printf ( \"%d \\n \" , ans1 ); } return 0 ; }","title":"\u601d\u8def"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#3","text":"\u7ed9\u5b9aN\u4e2a\u8d28\u6570\uff0c\u6784\u6210\u96c6\u5408S\uff0c\u8bbe\u96c6\u5408T\u4e3a\u7531\u8d28\u56e0\u5b50\u5168\u90e8\u5728S\u4e2d\u7684\u6574\u6570\u6784\u6210\u7684\u96c6\u5408\uff0c\u6c42T\u4e2d\u7b2ck\u5c0f\u7684\u6570\uff0c\u5176\u4e2d1<=N<=100,1<=k<=1e5,\u8f93\u51fa\u4fdd\u8bc1\u5728int\u7684\u8303\u56f4\u4e4b\u5185 \u8f93\u5165\uff1a\u7b2c\u4e00\u884c N\uff0ck \u7b2c\u4e8c\u884c N\u4e2a\u8d28\u6570 ```c++ tab=\"\u4e11\u6570\u601d\u8def\" // \u53c2\u8003 LeetCode 264. Ugly Number II \u590d\u4e60\uff0c\u4f46\u672c\u9898\u7684\u8d28\u6570\u6570\u91cf\u66f4\u591a","title":"\u7b2c3\u9898 \u8d28\u56e0\u5b50"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include","text":"using namespace std; int main() { std::ios::sync_with_stdio(false); std::cin.tie(0); int n, k; int t; cin >> n >> k; vector<int> primes; // \u8d28\u6570\u96c6\u5408 vector<int> dp(k + 1); // dp[i] \u662f\u7b2ci\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570 vector<int> pointer(n, 0); // \u8d28\u6570\u7684\u6307\u9488 for (int i = 0; i < n; i++) { cin >> t; primes.push_back(t); } sort(primes.begin(), primes.end()); dp[0] = 1; for (int i = 1; i <= k; i++) { // \u9996\u5148\u627e\u5230\u4e0b\u4e00\u4e2a\u7b26\u5408\u8981\u6c42\u7684\u6570\uff0c\u7136\u540e\u5411\u540e\u79fb\u52a8\u6307\u9488 for (int j = 0; j < n; j++) { if (dp[i] == 0) dp[i] = dp[pointer[j]] * primes[j]; else dp[i] = min(dp[i], dp[pointer[j]] * primes[j]); } cout << \"dp[\" << i << \"]: \" << dp[i] << endl; for (int j = 0; j < n; j++) { if (dp[i] == dp[pointer[j]] * primes[j]) pointer[j]++; } } cout << dp[k]; return 0; } c++ tab=\"\u4f18\u5148\u961f\u5217\u601d\u8def\"","title":"include "},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_1","text":"using namespace std; typedef long long ll; int n,k,s[110]; priority_queue ,greater\\ >que; int solve(){ while(que.size()) que.pop(); for(int i=0;i<n;++i) que.push(s[i]); int cnt=0,x,last; while(cnt<k){ x=que.top(); que.pop(); if(x==last) continue; ++cnt; last=x; for(int i=0;i<n;++i) que.push(s[i]*x); } return last; } int main(){ while(scanf(\"%d%d\",&n,&k)==2){ for(int i=0;i<n;++i) scanf(\"%d\",&s[i]); printf(\"%d\\n\",solve()); } return 0; } ```","title":"include "},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#dijkstra","text":"\u7f16\u53f7\u4e3a1\u5230N\u7684N\u4e2a\u57ce\u5e02\u95f4\u6709M\u6761\u94c1\u8def\uff0c\u901a\u8fc7\u6bcf\u6761\u94c1\u8def\u82b1\u8d39\u65f6\u95f4T_i,\u4e3a\u4e86\u51cf\u5c11\u4ece\u57ce\u5e021\u5230N\u7684\u65f6\u95f4\uff0c\u73b0\u5728\u51b3\u5b9a\u5c06\u5176\u4e2d\u4e00\u6761\u94c1\u8def\u6539\u5efa\u6210\u9ad8\u94c1\uff0c\u6539\u5efa\u540e\u901a\u8fc7\u8be5\u6761\u94c1\u8def\u7684\u65f6\u95f4\u5c06\u51cf\u534a\uff08\u5411\u4e0b\u53d6\u6574\u6570\uff09\uff0c\u6c42\u6539\u5efa\u54ea\u6761\u94c1\u8def\u53ef\u4ee5\u4f7f\u5f97\u6539\u5efa\u540e\u4ece\u57ce\u5e021\u5230\u57ce\u5e02N\u7684\u65f6\u95f4\u6700\u77ed \u8f93\u5165\uff1a\u7b2c\u4e00\u884cN\u548cM \u63a5\u4e0b\u6765M\u884c\uff0c\u6bcf\u884cA_i, B_i, T_i\u5206\u522b\u662f\u7b2ci\u6761\u94c1\u8def\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\uff0c\u4ee5\u53ca\u65f6\u95f4 \u8f93\u51fa\uff1a\u6539\u5efa\u7684\u94c1\u8def\u7f16\u53f7\u4ee5\u53ca\u6539\u5efa\u540e\u4ece1\u5230N\u7684\u65f6\u95f4 \u6ce8\u610f\uff1a\u94c1\u8def\u662f\u53cc\u5411\u7684\uff0c\u4fdd\u8bc1\u89e3\u552f\u4e00 80%\u6570\u636eN,M<5000,100%\u6570\u636eN,M<1000000","title":"\u7b2c\u56db\u9898 \u5806\u4f18\u5316\u53cc\u5411Dijkstra"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#_2","text":"\u4ece\u8282\u70b91\u548c\u8282\u70b9n\u5206\u522b\u505a\u4e00\u6b21Dijkstra\u6c42\u4ece\u8282\u70b91\u51fa\u53d1\u7684\u5230\u6bcf\u4e2a\u70b9\u7684\u6700\u77ed\u8def\uff08\u4fdd\u5b58\u5728d1\u91cc\uff09\u548c\u4ece\u8282\u70b9n\u51fa\u53d1\u5230\u6bcf\u4e2a\u70b9\u7684\u6700\u77ed\u8def\uff08\u4fdd\u5b58\u5728d2\u91cc\uff09\u3002\u7136\u540e\u904d\u5386m\u6761\u8fb9\uff0c\u5efa\u9ad8\u94c1\u540e\u4ece\u8282\u70b91\u5230\u8282\u70b9n\u7684\u6700\u77ed\u8def\u4e3a min(d1[u] + d2[v] + len[u,v]) d1[u]\u7684\u8def\u5f84\u6709\u53ef\u80fd\u5305\u542b\u8fb9(u,v)\uff0cd2[v]\u7684\u8def\u5f84\u4e5f\u6709\u53ef\u80fd\u5305\u542b\u8fb9(u,v)\uff0c \u56e0\u6b64\u6700\u77ed\u8def\u7684\u8868\u8fbe\u5f0f\u5e94 min(min(d1[u] + d2[v], d1[v] + d2[u]) + len[u,v]) \u6570\u636e\u89c4\u6a21\u663e\u793a\u662f\u7a00\u758f\u56fe\uff0c\u56e0\u6b64\u7528\u5806\u4f18\u5316\u7684Dijkstra\uff0c\u76f8\u5e94\u7684\u91c7\u7528\u90bb\u63a5\u8868\u7684\u6570\u636e\u7ed3\u6784\uff08\u672c\u6765\u90bb\u63a5\u77e9\u9635\u5c31\u4f1a\u7206\u5185\u5b58\u2014\u2014vs\u663e\u793a\u6570\u7ec4\u8fc7\u5927\uff09\u5b58\u50a8\u8def\u7f51\u4fe1\u606f\uff0c\u590d\u6742\u5ea6\u4e3aO(mlogn + m) = O(mlogn) ```c++ tab=\"\u89e3\u6cd5\u4e00\"","title":"\u601d\u8def"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_2","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_3","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_4","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_5","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_6","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_7","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_8","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_9","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_10","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_11","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_12","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_13","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_14","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_15","text":"","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#include_16","text":"using namespace std; typedef long long ll; const int maxn=1e6+10,inf=10000000; int to1[maxn],ton[maxn],n,m; struct biedge{ int u,v,t; } biedges[maxn]; struct edge{ int v,t; edge(int v=0,int t=0){ this->v=v; this->t=t; } bool operator<(const edge& b)const {return t>b.t;} }; vector edges[maxn]; priority_queue que; void dij(int s,int *d){ fill(d,d+n+1,inf); while(que.size()) que.pop(); d[s]=0; que.push(edge(s,0)); while(que.size()){ int u=que.top().v,t=que.top().t; que.pop(); if(d[u]!=t) continue; for(int i=0;i<edges[u].size();++i){ int v=edges[u][i].v; if(d[u]+edges[u][i].t<d[v]){ d[v]=d[u]+edges[u][i].t; que.push(edge(v,d[v])); } } } } int main(){ while(scanf(\"%d%d\",&n,&m)==2){ for(int i=1;i<=m;++i){ int u,v,t; scanf(\"%d%d%d\",&u,&v,&t); biedges[i].u=u; biedges[i].v=v; biedges[i].t=t; edges[u].push_back(edge(v,t)); edges[v].push_back(edge(u,t)); } dij(1,to1); dij(n,ton); int res=inf,idx; for(int i=1;i<=m;++i){ int u=biedges[i].u,v=biedges[i].v; int tmp=to1[u]+ton[v]+biedges[i].t/2; if(tmp<res){ res=tmp; idx=i; } } printf(\"%d %d\\n\",idx,res); } return 0; } ```c++ tab=&quot;\u89e3\u6cd52&quot; // \u7528\u5806\u4f18\u5316\u7684Dijkstra\u7b97\u6cd5\u7b97\u4e24\u904d\uff0c\u5206\u522b\u4ece\u6e90\u70b9\u548c\u6c47\u70b9\u5f00\u59cb\u7b97\uff0c // \u7b97\u5f97d1\u6570\u7ec4\u8bb0\u5f55\u6240\u6709\u70b9\u5230\u6e90\u70b9\u7684\u8ddd\u79bb\uff0cd2\u6570\u7ec4\u8bb0\u5f55\u6240\u6709\u70b9\u5230\u6c47\u70b9\u7684\u8ddd\u79bb // \u904d\u5386m\u6761\u8fb9\uff0cans = min(min(d1[u] + d2[v], d1[v] + d2[u]) + len[u,v]) #include<cstdio> #include<queue> #include<vector> #include<cstring> const int NMAX = 1000005, INF = 0x3f3f3f3f; struct toEdge { int v,t; toEdge(int vv, int tt): v(vv), t(tt) {} toEdge(void) {} }; struct cmp { bool operator() (const toEdge & a, const toEdge & b) { return a.t > b.t; } }; struct Edge { int u, v, t; Edge(int uu, int vv, int tt): u(uu), v(vv), t(tt) {} Edge(void){} }edges[NMAX]; int n, m; std::vector<toEdge> E[NMAX]; // \u90bb\u63a5\u8868 int d[NMAX] = {}; int vis[NMAX] = {}; int d1[NMAX] = {}; // \u4ece\u8282\u70b91\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def int d2[NMAX] = {}; // \u4ece\u8282\u70b92\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def void dijkstra(int src) // \u7528Dijkstra\u7b97\u6cd5\u6c42\u4ecesrc\u51fa\u53d1\u5230\u5404\u70b9\u7684\u6700\u77ed\u8def { int i, v, t; std::priority_queue<toEdge, std::vector<toEdge>, cmp> q; memset(vis, 0, sizeof(vis)); memset(d, 0x3f, sizeof(d)); vis[src] = 1; d[src] = 0; for (i = 0; i < E[src].size(); i++) { q.push(toEdge(E[src].at(i).v, E[src].at(i).t)); } while (!q.empty()) { v = q.top().v; while (vis[v]) { q.pop(); if (q.empty()) { return; } v = q.top().v; } vis[v] = 1; t = q.top().t; d[v] = t; for (i = 0; i < E[v].size(); i++) { if (!vis[E[v].at(i).v] && d[E[v].at(i).v] > E[v].at(i).t + t) { q.push(toEdge(E[v].at(i).v, E[v].at(i).t + t)); } } } } int main() { #ifndef ONLINE_JUDGE freopen(\"xlySE18_04.txt\", \"r\", stdin); #endif scanf(\"%d%d\", &n, &m); int i = 0, u, v, t, minv = INF, minid = -1; for (i=0; i<m; i++) { scanf(\"%d%d%d\", &u, &v, &t); E[u].push_back(toEdge(v,t)); E[v].push_back(toEdge(u,t)); edges[i] = Edge(u,v,t); } dijkstra(1); memcpy(d1, d, sizeof(d)); dijkstra(n); memcpy(d2, d, sizeof(d)); for (i=0; i<m; i++) { u = edges[i].u; v = edges[i].v; t = edges[i].t; if (t/2 + d1[u] + d2[v] < minv) // \u53d6std::min(d1[u] + d2[v], d1[v] + d2[u]) { minv = t/2 + d1[u] + d2[v]; minid = i + 1; } else if (t/2 + d1[v] + d2[u] < minv) { minv = t/2 + d1[v] + d2[u]; minid = i + 1; } } printf(\"%d %d\", minid, minv); return 0; }","title":"include"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2018_3","text":"// 2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd51 \u5927\u6574\u6570\u4e58\u6cd5 // 2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd52 \u5927\u6574\u6570\u6392\u5217 #include <iostream> #include <sstream> #include <cstring> #include <algorithm> using namespace std ; const int maxlen = 1000 ; class BigInteger { public : int d [ maxlen ]; // \u5b58\u50a8\u5927\u6570\uff0c\u6570\u7ec4\u4f4e\u4f4d\u5b58\u50a8\u5927\u6570\u4f4e\u4f4d int len ; // \u8bb0\u5f55\u957f\u5ea6 void clear () { memset ( d , 0 , sizeof ( d )); len = 0 ; } BigInteger () { clear (); } BigInteger ( string str ) { clear (); for ( int i = str . size () - 1 ; i >= 0 ; i -- ) { d [ len ++ ] = str [ i ] - '0' ; } } string toString () { stringstream ss ; string str ; for ( int i = len - 1 ; i >= 0 ; i -- ) { ss << d [ i ]; } ss >> str ; return str ; } }; BigInteger next_permutation ( BigInteger bign ) { string str = bign . toString (); if ( str . empty () || str . size () == 1 ) return bign ; next_permutation ( str . begin (), str . end ()); return BigInteger ( str ); } /** * \u5927\u6574\u6570\u52a0\u6cd5 * \u5927\u6574\u6570\u4e58\u6cd5 * @param a \u5927\u6574\u6570 * @param b \u5927\u6574\u6570 * @return \u5927\u6574\u6570 a + b */ BigInteger add ( BigInteger a , BigInteger b ) { BigInteger res ; int carry = 0 ; for ( res . len = 0 ; res . len < max ( a . len , b . len ); res . len ++ ) { int sum = a . d [ res . len ] + b . d [ res . len ] + carry ; res . d [ res . len ] = sum % 10 ; carry = sum / 10 ; } if ( carry ) res . d [ res . len ++ ] = carry ; return res ; } /** * \u5927\u6574\u6570\u4e58\u4ee5int * @param a \u5927\u6574\u6570 * @param b \u6574\u6570 * @return \u5927\u6574\u6570 a * b */ BigInteger multiply ( BigInteger a , int b ) { BigInteger res ; int carry = 0 ; for ( res . len = 0 ; res . len < a . len ; ++ res . len ) { int product = a . d [ res . len ] * b + carry ; res . d [ res . len ] = product % 10 ; carry = product / 10 ; } if ( carry ) res . d [ res . len ++ ] = carry ; return res ; } /** * \u5927\u6574\u6570\u4e58\u6cd5 * @param a \u5927\u6574\u6570 * @param b \u5927\u6574\u6570 * @return \u5927\u6574\u6570 a * b */ BigInteger multiply ( BigInteger a , BigInteger b ) { BigInteger res ( \"0\" ); for ( int j = 0 ; j < b . len ; j ++ ) { BigInteger mul = multiply ( a , b . d [ j ]); for ( int k = 0 ; k < j ; k ++ ) { mul = multiply ( mul , 10 ); } res = add ( res , mul ); } return res ; } int main () { string a , b ; string res ; while ( cin >> a >> b ) { BigInteger biga ( a ); BigInteger bigb ( b ); res = add ( biga , bigb ). toString (); cout << \"sum: \" << res << endl ; res = multiply ( biga , bigb ). toString (); cout << \"product: \" << res << endl ; BigInteger bigc = next_permutation ( biga ); cout << \"next_permutation: \" << bigc . toString () << endl ; } return 0 ; }","title":"2018\u6e05\u534e\u8f6f\u9662\u4e5d\u63a8\u673a\u8bd5"},{"location":"%E5%8E%86%E5%B9%B4%E6%9C%BA%E8%AF%95/#2018_4","text":"\u3010\u9898\u76ee\u63cf\u8ff0\u3011 \u4eca\u5e74\uff0cn\u53ea\u601d\u8003\u718a\u53c2\u52a0\u4e86\u6e05\u534e\u5927\u5b66\u6821\u56ed\u9a6c\u62c9\u677e\u6bd4\u8d5b\u3002\u9a6c\u62c9\u677e\u7684\u8d5b\u9053\u662f\u73af\u5f62\u7684\uff0c\u6bcf\u5708 \u7684\u957f\u5ea6\u662fA\uff0c\u5b8c\u6210\u6bd4\u8d5b\u9700\u8981\u8dd1L\u5708\u3002 \u6bd4\u8d5b\u4e2d\uff0c\u7532\u9886\u5148\u4e59\u5f88\u957f\u8ddd\u79bb\uff0c\u7ed5\u8fc7\u4e00\u5708\u6216\u591a\u5708\u540e\u4ece\u540e\u9762\u8ffd\u4e0a\u4e86\u4e59\u7684\u73b0\u8c61\u53eb\u505a\u201c\u5957 \u5708\u201d\u3002\u5957\u5708\u73b0\u8c61\u975e\u5e38\u5e38\u89c1\uff0c\u4f8b\u5982\uff1a\u8dd1\u5f97\u6bd4\u8c01\u90fd\u5feb\u7684saffah\u718a\u53ef\u4ee5\u5957\u67d0\u4e9b\u718aL-1\u5708\uff1b ufozgg\u718a\u7ecf\u5e38\u8fdb\u884c\u65e5\u5e38\u8010\u529b\u8bad\u7ec3\uff0c\u5957\u5708\u6b21\u6570\u548c\u88ab\u5957\u5708\u6b21\u6570\u57fa\u672c\u6301\u5e73\uff1b\u800cMulab\u4f5c\u4e3a\u4e00 \u53ea\u8001\u5e74\u718a\uff0c\u5219\u662f\u88ab\u5957L-1\u5708\u7684\u90a3\u79cd\u3002 \u4e0e\u4eba\u4e0d\u540c\u7684\u662f\uff0c\u601d\u8003\u718a\u5728\u8dd1\u6b65\u65f6\u90fd\u662f\u5300\u901f\u8fd0\u52a8\u3002wyx\u718a\u662f\u8fd9\u6b21\u6bd4\u8d5b\u7684\u8ba1\u65f6\u5458\uff0c\u4ed6 \u7edf\u8ba1\u4e86\u53c2\u8d5b\u7684n\u53ea\u718a\u7684\u901f\u5ea6v1\uff0c v2\uff0c......\uff0cvn\uff08\u5176\u4e2d\u6700\u5927\u7684\u4e00\u4e2a\u662fsaffah\u718a\u7684\u901f\u5ea6\uff09\u3002\u73b0\u5728 wyx\u718a\u5e0c\u671b\u4f60\u544a\u8bc9\u4ed6\uff0c\u5f53\u901f\u5ea6\u6700\u5feb\u7684saffah\u718a\u5230\u8fbe\u7ec8\u70b9\u65f6\uff0c\u573a\u4e0a\u6240\u6709\u718a\u4e2d\u603b\u5171\u53d1\u751f\u4e86 \u591a\u5c11\u6b21\u5957\u5708\u73b0\u8c61\u3002 \u6ce8\u610f\uff1a\u5728saffah\u718a\u521a\u521a\u5230\u8fbe\u7ec8\u70b9\u90a3\u4e00\u523b\uff0c\u5982\u679c\u7532\u6070\u597d\u8ffd\u4e0a\u4e86\u4e59\uff0c\u6b64\u65f6\u4e5f\u7b97\u4f5c\u7532\u5c06\u4e59 \u5957\u5708\u3002 \u3010\u8f93\u5165\u683c\u5f0f\u3011 \u4ece\u6587\u4ef6running.in\u4e2d\u8bfb\u5165\u6570\u636e\u3002 \u8f93\u5165\u7684\u7b2c\u4e00\u884c\u5305\u542b2\u4e2a\u6574\u6570T;C\uff0c\u5206\u522b\u8868\u793a\u8fd9\u4e2a\u6d4b\u8bd5\u70b9\u5185\u6570\u636e\u7684\u7ec4\u6570\u548c\u8fd9\u4e2a\u6d4b\u8bd5 \u70b9\u7684\u7f16\u53f7\u3002\u5bf9\u4e8e\u6240\u6709\u6d4b\u8bd5\u70b9\uff0c\u4fdd\u8bc1T = 10\u3002 \u6bcf\u7ec4\u6570\u636e\u7684\u7b2c\u4e00\u884c\u5305\u542b3\u4e2a\u6b63\u6574\u6570n;A;L\uff0c\u5206\u522b\u8868\u793a\u601d\u8003\u718a\u7684\u53ea\u6570\uff0c\u8dd1\u9053\u6bcf\u5708\u7684\u957f \u5ea6\u548c\u5b8c\u6210\u6bd4\u8d5b\u6240\u9700\u8981\u7684\u5708\u6570\u3002\u4fdd\u8bc1A;L<10^8\u3002 \u7b2c\u4e8c\u884c\u5305\u542bn\u4e2a\u6b63\u6574\u6570v1\uff0c v2\uff0c......\uff0cvn\uff0c\u8868\u793a\u6bcf\u53ea\u601d\u8003\u718a\u7684\u901f\u5ea6\u3002\u4fdd\u8bc1\u8fd9\u4e9b\u6570\u4e92\u4e0d \u76f8\u540c\u3002 \u3010\u8f93\u51fa\u683c\u5f0f\u3011 \u8f93\u51fa\u5230\u6587\u4ef6running.out\u4e2d\u3002 \u8f93\u51faT\u884c\uff0c\u5206\u522b\u8868\u793a\u6bcf\u7ec4\u6570\u636e\u4e2d\uff0c\u6240\u6709\u718a\u53d1\u751f\u7684\u5957\u5708\u603b\u6b21\u6570\u3002 \u3010\u6837\u4f8b\u8f93\u5165\u3011 4 0 2 1000 15 2 5 2 1000 13 9 4 5 1000 10 8 10 2 5 6 5 1000 17 8 10 2 5 7 \u3010\u6837\u4f8b\u8f93\u51fa\u3011 9 7 38 61 \u3010\u6570\u636e\u8303\u56f4\u3011 n<=10^5,vi<=10^8 \u3010\u9898\u89e3\u3011 \u5957\u5708\u7684\u5708\u6570\u53ea\u53d6\u51b3\u4e8e\u6bcf\u4e2a\u4eba\u8dd1\u4e86\u591a\u5c11\u5708\uff0c\u6240\u4ee5\u7b54\u6848\u4e3a\u4e24\u4e24\u4e4b\u95f4\u7684\u5708\u6570\u5dee\u5411\u4e0b\u53d6\u6574 \u56e0\u4e3a\u6709\u5708\u6570\u5c0f\u6570\u90e8\u5206\uff0c\u6240\u4ee5\u65e0\u6cd5\u901a\u8fc7\u524d\u7f00\u548cO(n)\u8ba1\u7b97 \u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5c0f\u6570\u90e8\u5206\u548c\u6574\u6570\u90e8\u5206\u5206\u5f00\u505a \u6574\u6570\u90e8\u5206\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u5708\u6570\uff0c\u5982\u679c\u5c0f\u6570\u90e8\u5206\u7684\u5dee\u5c0f\u4e8e0\uff0c\u5c31\u518d\u51cf1 \u6bd4\u5982\u4e00\u4e2a\u8dd1\u4e865.1\u5708\uff0c\u4e00\u4e2a4.9\u5708\uff0c\u5b83\u4eec\u6574\u6570\u90e8\u5206\u5dee\u4e3a5-4=1\uff0c\u4f46\u662f\u56e0\u4e3a\u5c0f\u6570\u90e8\u52060.1-0.9<0\uff0c\u6240\u4ee5\u9700\u8981\u51cf1 \u6240\u4ee5\u9700\u8981\u627e\u51fa\u4e24\u4e2a\u6570i,j\uff0c\u6574\u6570\u90e8\u5206i>j\uff0c\u4f46\u5c0f\u6570i<j \u8fd9\u5c31\u662f\u9006\u5e8f\u5bf9\u88f8\u9898\u4e86\uff0c\u6811\u72b6\u6570\u7ec4\u5c31\u80fd\u641e\u5b9a\u3002 \u8fd8\u6709\u4e00\u4e2a\u5c0f\u4f18\u5316\uff0c\u56e0\u4e3a\u8dd1\u7684\u5708\u6570\u662f l * vi/ vmax\uff0c\u5206\u6bcd\u90fd\u76f8\u540c\uff0c\u53ef\u4ee5\u5168\u90e8\u53bb\u6389\u8f6c\u5316\u6210\u6574\u6570\u8ba1\u7b97\uff0c\u907f\u514d\u7cbe\u5ea6\u8bef\u5dee https://www.cnblogs.com/qwerfcxs/p/7802638.html https://blog.csdn.net/qq_40760407/article/details/83514782","title":"2018\u6e05\u534e\u8ba1\u7b97\u673a\u4e0a\u673a\u7ec3\u4e60"},{"location":"%E7%BB%8F%E5%85%B8%E7%BD%91%E7%BB%9C/","text":"Author: \u5510\u6770THU \u4e0a\u5468\u4e0a\u8bfe\u7528\u5230\u7684\u4e00\u9875ppt\uff0c\u52a9\u6559\u5927\u4eba\u5e2e\u5fd9\u505a\u7684\uff0c\u4ecb\u7ecd\u4e86\u6700\u8fd1\u7684\u4e00\u4e9bCNN\u8fdb\u5c55\u3002\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u7528 \u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u53d1\u5c55\uff0c\u6700\u65e9\u53ef\u4ee5\u8ffd\u6eaf\u52301962\u5e74\uff0cHubel\u548cWiesel\u5bf9\u732b\u5927\u8111\u4e2d\u7684\u89c6\u89c9\u7cfb\u7edf\u7684\u7814\u7a76\u3002\u57281980\u5e74\uff0c\u4e00\u4e2a\u65e5\u672c\u79d1\u5b66\u5bb6\u798f\u5c9b\u90a6\u5f66\u63d0\u51fa\u4e86\u4e00\u4e2a\u5305\u542b\u5377\u79ef\u5c42\u3001\u6c60\u5316\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u3002\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\uff0cYann Lecun\u5c06BP\u7b97\u6cd5\u5e94\u7528\u5230\u8fd9\u4e2a\u795e\u7ecf\u7f51\u7edc\u7ed3\u6784\u7684\u8bad\u7ec3\u4e0a\uff0c\u5c31\u5f62\u6210\u4e86\u5f53\u4ee3\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u96cf\u5f62\u3002 \u539f\u59cb\u7684CNN\u6548\u679c\u5e76\u4e0d\u7b97\u597d\uff0c\u800c\u4e14\u8bad\u7ec3\u4e5f\u975e\u5e38\u56f0\u96be\u3002\u867d\u7136\u4e5f\u5728\u9605\u8bfb\u652f\u7968\u3001\u8bc6\u522b\u6570\u5b57\u4e4b\u7c7b\u7684\u4efb\u52a1\u4e0a\u5f88\u6709\u6548\u679c\uff0c\u4f46\u7531\u4e8e\u5728\u4e00\u822c\u7684\u5b9e\u9645\u4efb\u52a1\u4e2d\u8868\u73b0\u4e0d\u5982SVM\u3001Boosting\u7b49\u7b97\u6cd5\u597d\uff0c\u4e00\u76f4\u5904\u4e8e\u5b66\u672f\u754c\u8fb9\u7f18\u7684\u5730\u4f4d\u3002\u76f4\u52302012\u5e74\uff0cImagenet\u56fe\u50cf\u8bc6\u522b\u5927\u8d5b\u4e2d\uff0cHinton\u7ec4\u7684Alexnet\u5f15\u5165\u4e86\u5168\u65b0\u7684\u6df1\u5c42\u7ed3\u6784\u548cdropout\u65b9\u6cd5\uff0c\u4e00\u4e0b\u5b50\u628aerror rate\u4ece25%\u4ee5\u4e0a\u63d0\u5347\u5230\u4e8615%\uff0c\u98a0\u8986\u4e86\u56fe\u50cf\u8bc6\u522b\u9886\u57df\u3002 Alexnet\u6709\u5f88\u591a\u521b\u65b0\u70b9\uff0c\u4f46\u73b0\u5728\u770b\u6765\u662f\u4e00\u9879\u975e\u5e38\u7b80\u964b\u7684\u5de5\u4f5c\u3002\u4ed6\u4e3b\u8981\u662f\u8ba9\u4eba\u4eec\u610f\u8bc6\u5230\u539f\u6765\u90a3\u4e2a\u798f\u5c9b\u90a6\u5f66\u63d0\u51fa\uff0cYann Lecun\u4f18\u5316\u7684Lenet\u7ed3\u6784\u662f\u6709\u5f88\u5927\u6539\u8fdb\u7a7a\u95f4\u7684\uff1b\u53ea\u8981\u901a\u8fc7\u4e00\u4e9b\u65b9\u6cd5\u80fd\u591f\u52a0\u6df1\u8fd9\u4e2a\u7f51\u7edc\u52308\u5c42\u5de6\u53f3\uff0c\u8ba9\u7f51\u7edc\u8868\u8fbe\u80fd\u529b\u63d0\u5347\uff0c\u5c31\u80fd\u5f97\u5230\u51fa\u4eba\u610f\u6599\u7684\u597d\u7ed3\u679c\u3002 \u987a\u7740Alexnet\u7684\u601d\u60f3\uff0cLecun\u7ec42013\u5e74\u63d0\u51fa\u4e00\u4e2aDropconnect\uff0c\u628aerror rate\u63d0\u5347\u5230\u4e8611%\u3002\u800cNUS\u7684\u989c\u6c34\u6210\u7ec4\u5219\u63d0\u51fa\u4e86Network in Network\uff0cNIN\u7684\u601d\u60f3\u662fCNN\u539f\u6765\u7684\u7ed3\u6784\u662f\u5b8c\u5168\u53ef\u53d8\u7684\uff0c\u7136\u540e\u52a0\u5165\u4e86\u4e00\u4e2a1*1conv\u5c42\uff0cNIN\u7684\u5e94\u7528\u4e5f\u5f97\u5230\u4e862014\u5e74Imagine\u53e6\u4e00\u4e2a\u6311\u6218\u2014\u2014\u56fe\u50cf\u68c0\u6d4b\u7684\u51a0\u519b\u3002Network in Network\u7684\u601d\u60f3\u662fCNN\u7ed3\u6784\u53ef\u4ee5\u5927\u80c6\u53bb\u53d8\u5316\uff0c\u7531\u6b64\uff0cInception\u548cVGG\u57282014\u5e74\u628a\u7f51\u7edc\u52a0\u6df1\u5230\u4e8620\u5c42\u5de6\u53f3\uff0c\u56fe\u50cf\u8bc6\u522b\u7684error rate\u4e5f\u5927\u5e45\u63d0\u5347\u52306.7%\uff0c\u63a5\u8fd1\u4eba\u7c7b\u76845.1%\u3002 2015\u5e74\uff0cMSRA\u7684\u4efb\u5c11\u537f\u3001\u4f55\u51ef\u660e\u3001\u5b59\u5251\u7b49\u4eba\uff0c\u5c1d\u8bd5\u628aidentity\u52a0\u5165\u5230\u795e\u7ecf\u7f51\u7edc\u4e2d\u3002\u6700\u7b80\u5355\u7684Identity\u5374\u51fa\u4eba\u610f\u6599\u7684\u6709\u6548\uff0c\u76f4\u63a5\u4f7fCNN\u80fd\u591f\u6df1\u5316\u5230152\u5c42\u30011202\u5c42\u7b49\uff0cerror rate\u4e5f\u964d\u5230\u4e863.6%\u3002\u540e\u6765\uff0cResNeXt, Residual-Attention\uff0cDenseNet\uff0cSENet\u7b49\u4e5f\u5404\u6709\u8d21\u732e\uff0c\u5404\u81ea\u5f15\u5165\u4e86Group convolution\uff0cAttention\uff0cDense connection\uff0cchannelwise-attention\u7b49\uff0c\u6700\u7ec8Imagenet\u4e0aerror rate\u964d\u5230\u4e862.2%\uff0c\u5b8c\u7206\u4eba\u7c7b\u3002\u73b0\u5728\uff0c\u5373\u4f7f\u624b\u673a\u4e0a\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u4e5f\u80fd\u8fbe\u5230\u8d85\u8fc7\u4eba\u7c7b\u7684\u6c34\u5e73\u3002 \u800c\u53e6\u4e00\u4e2a\u6311\u6218\u2014\u2014\u56fe\u50cf\u68c0\u6d4b\u4e2d\uff0c\u4e5f\u662f\u4efb\u5c11\u537f\u3001\u4f55\u51ef\u660e\u3001\u5b59\u5251\u7b49\u4f18\u5316\u4e86\u539f\u5148\u7684R-CNN, fast R-CNN\u7b49\u901a\u8fc7\u5176\u4ed6\u65b9\u6cd5\u63d0\u51faregion proposal,\u7136\u540e\u7528CNN\u53bb\u5224\u65ad\u662f\u5426\u662fobject\u7684\u65b9\u6cd5\uff0c\u63d0\u51fa\u4e86faster R-CNN\u3002Faster R-CNN\u7684\u4e3b\u8981\u8d21\u732e\u662f\u4f7f\u7528\u548c\u56fe\u50cf\u8bc6\u522b\u76f8\u540c\u7684CNN feature\uff0c\u53d1\u73b0\u90a3\u4e2afeature\u4e0d\u4ec5\u53ef\u4ee5\u8bc6\u522b\u56fe\u7247\u662f\u4ec0\u4e48\u4e1c\u897f\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u8bc6\u522b\u56fe\u7247\u5728\u54ea\u4e2a\u4f4d\u7f6e\uff01\u4e5f\u5c31\u662f\u8bf4\uff0cCNN\u7684feature\u975e\u5e38\u6709\u7528\uff0c\u5305\u542b\u4e86\u5927\u91cf\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u540c\u65f6\u7528\u6765\u505a\u4e0d\u540c\u7684task\u3002\u8fd9\u4e2a\u521b\u65b0\u4e00\u4e0b\u5b50\u628a\u56fe\u50cf\u68c0\u6d4b\u7684MAP\u4e5f\u7ffb\u500d\u4e86\u3002\u5728\u77ed\u77ed\u76844\u5e74\u4e2d\uff0cImagenet\u56fe\u50cf\u68c0\u6d4b\u7684MAP\u4ece\u6700\u521d\u76840.22\u8fbe\u5230\u4e86\u6700\u7ec8\u76840.73\u3002\u4f55\u51ef\u660e\u540e\u6765\u8fd8\u63d0\u51fa\u4e86Mask R-CNN,\u7ed9faster R-CNN\u53c8\u52a0\u4e86\u4e00\u4e2amask head\u3002\u5373\u4f7f\u53ea\u5728train\u4e2d\u4f7f\u7528mask head\uff0c\u4f46mask head\u7684\u4fe1\u606f\u4f20\u9012\u56de\u4e86\u539f\u5148\u7684CNN feature\u4e2d\uff0c\u56e0\u6b64\u4f7f\u5f97\u539f\u5148\u7684feature\u5305\u542b\u66f4\u7cbe\u7ec6\u7684\u4fe1\u606f\u3002\u7531\u6b64\uff0cMask R-CNN\u5f97\u5230\u4e86\u66f4\u597d\u7684\u7ed3\u679c\u3002 \u4f55\u51ef\u660e\u57282009\u5e74\u65f6\u5019\u5c31\u4ee5\u4e00\u4e2a\u7b80\u5355\u6709\u6548\u7684\u53bb\u96fe\u7b97\u6cd5\u5f97\u5230\u4e86CVPR best paper\uff0c\u5728\u8ba1\u7b97\u673a\u89c6\u89c9\u9886\u57df\u58f0\u540d\u9e4a\u8d77\u3002\u540e\u6765\u66f4\u662f\u63d0\u51fa\u4e86Resnet\u548cFaster R-CNN\u4e24\u5927\u521b\u65b0\uff0c\u76f4\u63a5\u98a0\u8986\u4e86\u6574\u4e2a\u8ba1\u7b97\u673a\u89c6\u89c9/\u673a\u5668\u5b66\u4e60\u9886\u57df\u3002\u524d\u4e9b\u5e74\u6709\u5f88\u591a\u8d28\u7591\u8bf4\u9ad8\u8003\u9009\u62d4\u51fa\u7684\u4e0d\u662f\u4eba\u624d\uff0c\u51e0\u5341\u5e74\u51e0\u5343\u4e2a\u72b6\u5143\u201c\u6ca1\u6709\u4e00\u4e2a\u53d6\u5f97\u6210\u5c31\u201d\u3002\u800c\u4f55\u51ef\u660e\u6b63\u662f2003\u5e74\u7684\u5e7f\u4e1c\u7406\u79d1\u72b6\u5143\uff0cDensenet\u7684\u5171\u540c\u4e00\u4f5c\u5218\u58ee\u662f2013\u5e74\u5b89\u5fbd\u7701\u7684\u72b6\u5143\uff0c\u8d28\u7591\u8005\u5bf9\u8fd9\u4e9b\u5374\u53c8\u89c6\u800c\u4e0d\u89c1\u4e86\u3002 CNN\u7ed3\u6784\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u4e8e\u662f\u8c37\u6b4c\u63d0\u51fa\u4e86Nasnet\u6765\u81ea\u52a8\u7528Reinforcement Learning \u53bbsearch\u4e00\u4e2a\u4f18\u5316\u7684\u7ed3\u6784\u3002Nas\u662f\u76ee\u524dCV\u754c\u4e00\u4e2a\u4e3b\u6d41\u7684\u65b9\u5411\uff0c\u81ea\u52a8\u5bfb\u627e\u51fa\u6700\u597d\u7684\u7ed3\u6784\uff0c\u4ee5\u53ca\u7ed9\u5b9a\u53c2\u6570\u6570\u91cf/\u8fd0\u7b97\u91cf\u4e0b\u6700\u597d\u7684\u7ed3\u6784\uff08\u8fd9\u6837\u5c31\u53ef\u4ee5\u5e94\u7528\u4e8e\u624b\u673a\uff09\uff0c\u662f\u76ee\u524d\u56fe\u50cf\u8bc6\u522b\u7684\u53d1\u5c55\u65b9\u5411\u3002\u4f46\u4f55\u51ef\u660e\u524d\u51e0\u5929\uff082019\u5e744\u6708\uff09\u53c8\u53d1\u8868\u4e86\u4e00\u7bc7\u8bba\u6587\uff0c\u8868\u793a\u5176\u5b9erandom\u751f\u6210\u7684\u7f51\u7edc\u8fde\u63a5\u7ed3\u6784\u53ea\u8981\u6309\u67d0\u4e9b\u6bd4\u8f83\u597d\u7684random\u65b9\u6cd5\uff0c\u90fd\u4f1a\u53d6\u5f97\u975e\u5e38\u597d\u7684\u6548\u679c\uff0c\u6bd4\u6807\u51c6\u7684\u597d\u5f88\u591a\u3002Random\u548cNas\u54ea\u4e2a\u662f\u771f\u7684\u6b63\u786e\u7684\u9053\u8def\uff0c\u8fd9\u5c31\u6709\u5f85\u7814\u7a76\u4e86\u3002 \u6b63\u7531\u4e8eCNN\u7684\u53d1\u5c55\uff0c\u624d\u5f15\u53d1\u5176\u4ed6\u9886\u57df\u5f88\u591a\u53d8\u9769\u3002\u5229\u7528CNN\uff0cAlphaGo\u6218\u80dc\u4e86\u674e\u4e16\u77f3\uff0c\u653b\u7834\u4e86\u56f4\u68cb\u3002\u4f46\u57fa\u7840\u7248\u672c\u7684AlphaGo\u5176\u5b9e\u548c\u4eba\u7c7b\u9ad8\u624b\u6bd4\u8d77\u6765\u662f\u6709\u80dc\u6709\u8d1f\u7684\u3002\u4f46\u5229\u7528\u4e86Resnet\u548cFaster-RCNN\u7684\u601d\u60f3\uff0c\u4e00\u5e74\u540e\u7684Master\u5219\u5b8c\u8650\u4e86\u6240\u6709\u4eba\u7c7b\u56f4\u68cb\u9ad8\u624b\uff0c\u8fbe\u5230\u795e\u4e00\u822c\u7684\u5883\u754c\uff0c\u4eba\u7c7b\u68cb\u624b\u6beb\u65e0\u80dc\u673a\u3002\u540e\u6765\u53c8\u6709\u5f88\u591a\u590d\u73b0\u7684\u5f00\u6e90\u56f4\u68cbAI\uff0c\u6bcf\u4e00\u4e2a\u90fd\u80fd\u7528\u4e0d\u5927\u7684\u8ba1\u7b97\u91cf\u540a\u6253\u6240\u6709\u7684\u4eba\u7c7b\u9ad8\u624b\u3002\u4ee5\u81f3\u4e8e\u73b0\u5728\u4eba\u4eec\u8bb2\u68cb\u7684\u65f6\u5019\uff0c\u90fd\u662f\u6309\u7740AI\u7684\u80dc\u7387\u6765\u8bb2\u4e86\u3002AI\u7684\u51fa\u73b0\u4e5f\u6253\u8138\u4e86\u5f88\u591a\u201d\u53e4\u4eca\u65e0\u7c7b\u4e4b\u5999\u624b\u201c\uff0c\u4eba\u4eec\u79f0\u9882\u4e86\u51e0\u767e\u5e74\u7684\u4e08\u548c\u3001\u79c0\u8363\u5999\u624b\uff0c\u5728\u5f53\u4e0b\u7684AI\u770b\u6765\uff0c\u53cd\u800c\u662f\u5927\u6076\u624b\u3002\u800c\u6709\u4e9b\u9ed8\u9ed8\u65e0\u95fb\uff0c\u4eba\u4eec\u90fd\u8ba4\u4e3a\u4e0b\u7684\u4e0d\u597d\u7684\u68cb\uff0c\u53cd\u800c\u5728AI\u5206\u6790\u540e\u5927\u653e\u5f02\u5f69\u4e86\u3002","title":"\u7ecf\u5178\u7f51\u7edc"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/","text":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b80\u4ecb \u00b6 \u5218\u77e5\u8fdc\u8001\u5e08 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b80\u4ecb \u4ec0\u4e48\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406 \u00b6 \u7b80\u5355\u5730\u8bf4\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08Natural Language Processing\uff0c\u7b80\u79f0NLP\uff09\u5c31\u662f\u7528\u8ba1\u7b97\u673a\u6765\u5904\u7406\u3001\u7406\u89e3\u4ee5\u53ca\u8fd0\u7528\u4eba\u7c7b\u8bed\u8a00(\u5982\u4e2d\u6587\u3001\u82f1\u6587\u7b49)\uff0c\u5b83\u5c5e\u4e8e\u4eba\u5de5\u667a\u80fd\u7684\u4e00\u4e2a\u5206\u652f\uff0c\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u8bed\u8a00\u5b66\u7684\u4ea4\u53c9\u5b66\u79d1\uff0c\u53c8\u5e38\u88ab\u79f0\u4e3a\u8ba1\u7b97\u8bed\u8a00\u5b66\u3002\u7531\u4e8e\u81ea\u7136\u8bed\u8a00\u662f\u4eba\u7c7b\u533a\u522b\u4e8e\u5176\u4ed6\u52a8\u7269\u7684\u6839\u672c\u6807\u5fd7\u3002\u6ca1\u6709\u8bed\u8a00\uff0c\u4eba\u7c7b\u7684\u601d\u7ef4\u4e5f\u5c31\u65e0\u4ece\u8c08\u8d77\uff0c\u6240\u4ee5\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f53\u73b0\u4e86\u4eba\u5de5\u667a\u80fd\u7684\u6700\u9ad8\u4efb\u52a1\u4e0e\u5883\u754c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5f53\u8ba1\u7b97\u673a\u5177\u5907\u4e86\u5904\u7406\u81ea\u7136\u8bed\u8a00\u7684\u80fd\u529b\u65f6\uff0c\u673a\u5668\u624d\u7b97\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u667a\u80fd\u3002 \u4ece\u7814\u7a76\u5185\u5bb9\u6765\u770b\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5305\u62ec\u8bed\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u3001\u7bc7\u7ae0\u7406\u89e3\u7b49\u3002\u4ece\u5e94\u7528\u89d2\u5ea6\u6765\u770b\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5177\u6709\u5e7f\u6cdb\u7684\u5e94\u7528\u524d\u666f\u3002\u7279\u522b\u662f\u5728\u4fe1\u606f\u65f6\u4ee3\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5e94\u7528\u5305\u7f57\u4e07\u8c61\uff0c\u4f8b\u5982\uff1a\u673a\u5668\u7ffb\u8bd1\u3001\u624b\u5199\u4f53\u548c\u5370\u5237\u4f53\u5b57\u7b26\u8bc6\u522b\u3001\u8bed\u97f3\u8bc6\u522b\u53ca\u6587\u8bed\u8f6c\u6362\u3001\u4fe1\u606f\u68c0\u7d22\u3001\u4fe1\u606f\u62bd\u53d6\u4e0e\u8fc7\u6ee4\u3001\u6587\u672c\u5206\u7c7b\u4e0e\u805a\u7c7b\u3001\u8206\u60c5\u5206\u6790\u548c\u89c2\u70b9\u6316\u6398\u7b49\uff0c\u5b83\u6d89\u53ca\u4e0e\u8bed\u8a00\u5904\u7406\u76f8\u5173\u7684\u6570\u636e\u6316\u6398\u3001\u673a\u5668\u5b66\u4e60\u3001\u77e5\u8bc6\u83b7\u53d6\u3001\u77e5\u8bc6\u5de5\u7a0b\u3001\u4eba\u5de5\u667a\u80fd\u7814\u7a76\u548c\u4e0e\u8bed\u8a00\u8ba1\u7b97\u76f8\u5173\u7684\u8bed\u8a00\u5b66\u7814\u7a76\u7b49\u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5174\u8d77\u4e0e\u673a\u5668\u7ffb\u8bd1\u8fd9\u4e00\u5177\u4f53\u4efb\u52a1\u6709\u7740\u5bc6\u5207\u8054\u7cfb\u3002\u673a\u5668\u7ffb\u8bd1\u6307\u7684\u662f\u5229\u7528\u8ba1\u7b97\u673a\u81ea\u52a8\u5730\u5c06\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u7ffb\u8bd1\u4e3a\u53e6\u5916\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u3002\u4f8b\u5982\u81ea\u52a8\u5c06\u82f1\u6587\u201cI like Beijing Tiananmen Square\u201d\u7ffb\u8bd1\u4e3a\u201c\u6211\u7231\u5317\u4eac\u5929\u5b89\u95e8\u201d\uff0c\u6216\u8005\u53cd\u8fc7\u6765\u5c06\u201c\u6211\u7231\u5317\u4eac\u5929\u5b89\u95e8\u201d\u7ffb\u8bd1\u4e3a\u201cI like Beijing Tiananmen Square\u201d\u3002\u7531\u4e8e\u4eba\u5de5\u8fdb\u884c\u7ffb\u8bd1\u9700\u8981\u8bad\u7ec3\u6709\u7d20\u7684\u53cc\u8bed\u4e13\u5bb6\uff0c\u7ffb\u8bd1\u5de5\u4f5c\u975e\u5e38\u8017\u65f6\u8017\u529b\u3002\u66f4\u4e0d\u7528\u8bf4\u9700\u8981\u7ffb\u8bd1\u4e00\u4e9b\u4e13\u4e1a\u9886\u57df\u6587\u732e\u65f6\uff0c\u8fd8\u9700\u8981\u7ffb\u8bd1\u8005\u4e86\u89e3\u8be5\u9886\u57df\u7684\u57fa\u672c\u77e5\u8bc6\u3002\u4e16\u754c\u4e0a\u6709\u8d85\u8fc7\u51e0\u5343\u79cd\u8bed\u8a00\uff0c\u800c\u4ec5\u8054\u5408\u56fd\u7684\u5de5\u4f5c\u8bed\u8a00\u5c31\u6709\u516d\u79cd\u4e4b\u591a\u3002\u5982\u679c\u80fd\u591f\u901a\u8fc7\u673a\u5668\u7ffb\u8bd1\u51c6\u786e\u5730\u8fdb\u884c\u8bed\u8a00\u95f4\u7684\u7ffb\u8bd1\uff0c\u5c06\u5927\u5927\u63d0\u9ad8\u4eba\u7c7b\u6c9f\u901a\u548c\u4e86\u89e3\u7684\u6548\u7387\u3002 \u300a\u5723\u7ecf\u300b\u91cc\u6709\u4e00\u4e2a\u6545\u4e8b\u8bf4\u5df4\u6bd4\u4f26\u4eba\u60f3\u5efa\u9020\u4e00\u5ea7\u5854\u76f4\u901a\u5929\u5802\u3002\u5efa\u5854\u7684\u4eba\u90fd\u8bf4\u7740\u540c\u4e00\u79cd\u8bed\u8a00\uff0c\u5fc3\u610f\u76f8\u901a\u3001\u9f50\u5fc3\u534f\u529b\u3002\u4e0a\u5e1d\u770b\u5230\u4eba\u7c7b\u7adf\u7136\u6562\u505a\u8fd9\u79cd\u4e8b\u60c5\uff0c\u5c31\u8ba9\u4ed6\u4eec\u7684\u8bed\u8a00\u53d8\u5f97\u4e0d\u4e00\u6837\u3002\u56e0\u4e3a\u4eba\u4eec\u542c\u4e0d\u61c2\u5bf9\u65b9\u5728\u8bb2\u4ec0\u4e48\uff0c\u4e8e\u662f\u5927\u5bb6\u6574\u5929\u5435\u5435\u95f9\u95f9\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5efa\u5854\u3002\u540e\u6765\u4eba\u4eec\u628a\u8fd9\u5ea7\u5854\u53eb\u4f5c\u5df4\u522b\u5854\uff0c\u800c\u201c\u5df4\u522b\u201d\u7684\u610f\u601d\u5c31\u662f\u201c\u5206\u6b67\u201d\u3002\u867d\u7136\u5df4\u522b\u5854\u505c\u5efa\u4e86\uff0c\u4f46\u4e00\u4e2a\u68a6\u60f3\u5374\u59cb\u7ec8\u8426\u7ed5\u5728\u4eba\u4eec\u5fc3\u4e2d\uff1a\u4eba\u7c7b\u4ec0\u4e48\u65f6\u5019\u624d\u80fd\u62e5\u6709\u76f8\u901a\u7684\u8bed\u8a00\uff0c\u91cd\u5efa\u5df4\u522b\u5854\u5462\uff1f\u673a\u5668\u7ffb\u8bd1\u88ab\u89c6\u4e3a\u201c\u91cd\u5efa\u5df4\u522b\u5854\u201d\u7684\u4f1f\u5927\u521b\u4e3e\u3002\u5047\u5982\u80fd\u591f\u5b9e\u73b0\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u7684\u673a\u5668\u7ffb\u8bd1\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7406\u89e3\u4e16\u754c\u4e0a\u4efb\u4f55\u4eba\u8bf4\u7684\u8bdd\uff0c\u4e0e\u4ed6\u4eec\u8fdb\u884c\u4ea4\u6d41\u548c\u6c9f\u901a\uff0c\u518d\u4e5f\u4e0d\u5fc5\u4e3a\u76f8\u4e92\u4e0d\u80fd\u7406\u89e3\u800c\u56f0\u6270\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u201c\u4eba\u5de5\u667a\u80fd\u201d\u88ab\u4f5c\u4e3a\u4e00\u4e2a\u7814\u7a76\u95ee\u9898\u6b63\u5f0f\u63d0\u51fa\u6765\u7684\u65f6\u5019\uff0c\u521b\u59cb\u4eba\u628a\u8ba1\u7b97\u673a\u56fd\u9645\u8c61\u68cb\u548c\u673a\u5668\u7ffb\u8bd1\u4f5c\u4e3a\u4e24\u4e2a\u6807\u5fd7\u6027\u7684\u4efb\u52a1\uff0c\u8ba4\u4e3a\u53ea\u8981\u56fd\u9645\u8c61\u68cb\u7cfb\u7edf\u80fd\u591f\u6253\u8d25\u4eba\u7c7b\u4e16\u754c\u51a0\u519b\uff0c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u8fbe\u5230\u4eba\u7c7b\u7ffb\u8bd1\u6c34\u5e73\uff0c\u5c31\u53ef\u4ee5\u5ba3\u544a\u4eba\u5de5\u667a\u80fd\u7684\u80dc\u5229\u3002\u56db\u5341\u5e74\u540e\u76841997\u5e74\uff0cIBM\u516c\u53f8\u7684\u6df1\u84dd\u8d85\u7ea7\u8ba1\u7b97\u673a\u5df2\u7ecf\u80fd\u591f\u6253\u8d25\u56fd\u9645\u8c61\u68cb\u4e16\u754c\u51a0\u519b\u5361\u65af\u5e15\u7f57\u592b\u3002\u800c\u673a\u5668\u7ffb\u8bd1\u5230\u73b0\u5728\u4ecd\u65e0\u6cd5\u4e0e\u4eba\u7c7b\u7ffb\u8bd1\u6c34\u5e73\u76f8\u6bd4\uff0c\u4ece\u6b64\u53ef\u4ee5\u770b\u51fa\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u591a\u4e48\u56f0\u96be\uff01 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u5174\u8d77\u4e8e\u7f8e\u56fd\u3002\u7b2c\u4e8c\u6b21\u4e16\u754c\u5927\u6218\u4e4b\u540e\uff0c\u4e8c\u5341\u4e16\u7eaa\u4e94\u5341\u5e74\u4ee3\uff0c\u5f53\u7535\u5b50\u8ba1\u7b97\u673a\u8fd8\u5728\u8941\u8913\u4e4b\u4e2d\u65f6\uff0c\u5229\u7528\u8ba1\u7b97\u673a\u5904\u7406\u4eba\u7c7b\u8bed\u8a00\u7684\u60f3\u6cd5\u5c31\u5df2\u7ecf\u51fa\u73b0\u3002\u5f53\u65f6\uff0c\u7f8e\u56fd\u5e0c\u671b\u80fd\u591f\u5229\u7528\u8ba1\u7b97\u673a\u5c06\u5927\u91cf\u4fc4\u8bed\u6750\u6599\u81ea\u52a8\u7ffb\u8bd1\u6210\u82f1\u8bed\uff0c\u4ee5\u7aa5\u63a2\u82cf\u8054\u79d1\u6280\u7684\u6700\u65b0\u53d1\u5c55\u3002\u7814\u7a76\u8005\u4ece\u7834\u8bd1\u519b\u4e8b\u5bc6\u7801\u4e2d\u5f97\u5230\u542f\u793a\uff0c\u8ba4\u4e3a\u4e0d\u540c\u7684\u8bed\u8a00\u53ea\u4e0d\u8fc7\u662f\u5bf9\u201c\u540c\u4e00\u8bed\u4e49\u201d\u7684\u4e0d\u540c\u7f16\u7801\u800c\u5df2\uff0c\u4ece\u800c\u60f3\u5f53\u7136\u5730\u8ba4\u4e3a\u53ef\u4ee5\u91c7\u7528\u8bd1\u7801\u6280\u672f\u50cf\u7834\u8bd1\u5bc6\u7801\u4e00\u6837\u201c\u7834\u8bd1\u201d\u8fd9\u4e9b\u8bed\u8a00\u3002 1954\u5e741\u67087\u65e5\uff0c\u7f8e\u56fd\u4e54\u6cbb\u6566\u5927\u5b66\u548cIBM\u516c\u53f8\u5408\u4f5c\u5b9e\u9a8c\u6210\u529f\u5730\u5c06\u8d85\u8fc760\u53e5\u4fc4\u8bed\u81ea\u52a8\u7ffb\u8bd1\u6210\u82f1\u8bed\u3002\u867d\u7136\u5f53\u65f6\u7684\u8fd9\u4e2a\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u975e\u5e38\u7b80\u5355\uff0c\u4ec5\u4ec5\u5305\u542b6\u4e2a\u8bed\u6cd5\u89c4\u5219\u548c250\u4e2a\u8bcd\uff0c\u4f46\u7531\u4e8e\u5a92\u4f53\u7684\u5e7f\u6cdb\u62a5\u9053\uff0c\u7eb7\u7eb7\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u8fdb\u6b65\uff0c\u5bfc\u81f4\u7f8e\u56fd\u653f\u5e9c\u5907\u53d7\u9f13\u821e\uff0c\u52a0\u5927\u4e86\u5bf9\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7814\u7a76\u7684\u6295\u8d44\u3002\u5b9e\u9a8c\u5b8c\u6210\u8005\u4e5f\u5f53\u5373\u81ea\u4fe1\u5730\u64b0\u6587\u79f0\uff0c\u5728\u4e09\u5230\u4e94\u5e74\u4e4b\u5185\u5c31\u80fd\u591f\u5b8c\u5168\u89e3\u51b3\u4ece\u4e00\u79cd\u8bed\u8a00\u5230\u53e6\u4e00\u79cd\u8bed\u8a00\u7684\u81ea\u52a8\u7ffb\u8bd1\u95ee\u9898\u3002\u4ed6\u4eec\u8ba4\u4e3a\u53ea\u8981\u5236\u5b9a\u597d\u5404\u79cd\u7ffb\u8bd1\u89c4\u5219\uff0c\u901a\u8fc7\u5927\u91cf\u89c4\u5219\u7684\u5806\u780c\u5c31\u80fd\u591f\u5b8c\u7f8e\u5730\u5b9e\u73b0\u8bed\u8a00\u95f4\u7684\u81ea\u52a8\u7ffb\u8bd1\u3002 \u7136\u800c\uff0c\u4e8b\u5b9e\u662f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u8fdc\u6bd4\u7834\u8bd1\u5bc6\u7801\u8981\u590d\u6742\u5f97\u591a\uff0c\u56e0\u6b64\u7814\u7a76\u8fdb\u5c55\u975e\u5e38\u7f13\u6162\u30021966\u5e74\u7684\u4e00\u4efd\u7814\u7a76\u62a5\u544a\u603b\u7ed3\u53d1\u73b0\uff0c\u7ecf\u8fc7\u5341\u5e74\u4e4b\u4e45\u7684\u7814\u7a76\uff0c\u7ed3\u679c\u8fdc\u8fdc\u672a\u80fd\u8fbe\u5230\u9884\u671f\uff0c\u56e0\u6b64\u652f\u6301\u8d44\u91d1\u6025\u5267\u4e0b\u964d\uff0c\u4f7f\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08\u7279\u522b\u662f\u673a\u5668\u7ffb\u8bd1\uff09\u7684\u7814\u7a76\u9677\u5165\u957f\u8fbe\u4e8c\u5341\u5e74\u7684\u4f4e\u6f6e\u3002\u76f4\u5230\u4e8c\u5341\u4e16\u7eaa\u516b\u5341\u5e74\u4ee3\uff0c\u968f\u7740\u7535\u5b50\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u80fd\u529b\u7684\u98de\u901f\u63d0\u9ad8\u548c\u5236\u9020\u6210\u672c\u7684\u5927\u5e45\u4e0b\u964d\uff0c\u7814\u7a76\u8005\u53c8\u5f00\u59cb\u91cd\u65b0\u5173\u6ce8\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8fd9\u4e2a\u6781\u5bcc\u6311\u6218\u7684\u7814\u7a76\u9886\u57df\u3002\u4e09\u5341\u5e74\u6ca7\u6d77\u6851\u7530\uff0c\u6b64\u65f6\u7814\u7a76\u8005\u5df2\u7ecf\u8ba4\u8bc6\u5230\u7b80\u5355\u7684\u8bed\u8a00\u89c4\u5219\u7684\u5806\u780c\u65e0\u6cd5\u5b9e\u73b0\u5bf9\u4eba\u7c7b\u8bed\u8a00\u7684\u771f\u6b63\u7406\u89e3\u3002\u7814\u7a76\u53d1\u73b0\uff0c\u901a\u8fc7\u5bf9\u5927\u91cf\u7684\u6587\u672c\u6570\u636e\u7684\u81ea\u52a8\u5b66\u4e60\u548c\u7edf\u8ba1\uff0c\u80fd\u591f\u66f4\u597d\u5730\u89e3\u51b3\u81ea\u7136\u8bed\u8a00\u5904\u7406\u95ee\u9898\uff0c\u5982\u8bed\u8a00\u7684\u81ea\u52a8\u7ffb\u8bd1\u3002\u8fd9\u4e00\u601d\u60f3\u88ab\u79f0\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u7edf\u8ba1\u5b66\u4e60\u6a21\u578b\uff0c\u81f3\u4eca\u65b9\u5174\u672a\u827e\u3002 \u90a3\u4e48\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5230\u5e95\u5b58\u5728\u54ea\u4e9b\u4e3b\u8981\u56f0\u96be\u6216\u6311\u6218\uff0c\u5438\u5f15\u90a3\u4e48\u591a\u7814\u7a76\u8005\u51e0\u5341\u5e74\u5982\u4e00\u65e5\u5b5c\u5b5c\u4e0d\u5026\u5730\u63a2\u7d22\u89e3\u51b3\u4e4b\u9053\u5462\uff1f \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u56f0\u96be \u00b6 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u56f0\u96be\u53ef\u4ee5\u7f57\u5217\u51fa\u6765\u5f88\u591a\uff0c\u4e0d\u8fc7\u5173\u952e\u5728\u4e8e\u6d88\u9664\u6b67\u4e49\u95ee\u9898\uff0c\u5982\u8bcd\u6cd5\u5206\u6790\u3001\u53e5\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u7b49\u8fc7\u7a0b\u4e2d\u5b58\u5728\u7684\u6b67\u4e49\u95ee\u9898\uff0c\u7b80\u79f0\u4e3a\u6d88\u6b67\u3002\u800c\u6b63\u786e\u7684\u6d88\u6b67\u9700\u8981\u5927\u91cf\u7684\u77e5\u8bc6\uff0c\u5305\u62ec\u8bed\u8a00\u5b66\u77e5\u8bc6\uff08\u5982\u8bcd\u6cd5\u3001\u53e5\u6cd5\u3001\u8bed\u4e49\u3001\u4e0a\u4e0b\u6587\u7b49\uff09\u548c\u4e16\u754c\u77e5\u8bc6\uff08\u4e0e\u8bed\u8a00\u65e0\u5173\uff09\u3002\u8fd9\u5e26\u6765\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e24\u4e2a\u4e3b\u8981\u56f0\u96be\u3002 \u9996\u5148\uff0c\u8bed\u8a00\u4e2d\u5145\u6ee1\u4e86\u5927\u91cf\u7684\u6b67\u4e49\uff0c\u8fd9\u4e3b\u8981\u4f53\u73b0\u5728\u8bcd\u6cd5\u3001\u53e5\u6cd5\u53ca\u8bed\u4e49\u4e09\u4e2a\u5c42\u6b21\u4e0a\u3002\u6b67\u4e49\u7684\u4ea7\u751f\u662f\u7531\u4e8e\u81ea\u7136\u8bed\u8a00\u6240\u63cf\u8ff0\u7684\u5bf9\u8c61\u2015\u2015\u4eba\u7c7b\u6d3b\u52a8\u975e\u5e38\u590d\u6742\uff0c\u800c\u8bed\u8a00\u7684\u8bcd\u6c47\u548c\u53e5\u6cd5\u89c4\u5219\u53c8\u662f\u6709\u9650\u7684\uff0c\u8fd9\u5c31\u9020\u6210\u540c\u4e00\u79cd\u8bed\u8a00\u5f62\u5f0f\u53ef\u80fd\u5177\u6709\u591a\u79cd\u542b\u4e49\u3002 \u4f8b\u5982\u5355\u8bcd\u5b9a\u754c\u95ee\u9898\u662f\u5c5e\u4e8e\u8bcd\u6cd5\u5c42\u9762\u7684\u6d88\u6b67\u4efb\u52a1\u3002\u5728\u53e3\u8bed\u4e2d\uff0c\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u901a\u5e38\u662f\u8fde\u8d2f\u8bf4\u51fa\u6765\u7684\u3002\u5728\u4e66\u9762\u8bed\u4e2d\uff0c\u4e2d\u6587\u7b49\u8bed\u8a00\u4e5f\u6ca1\u6709\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u8fb9\u754c\u3002\u7531\u4e8e\u5355\u8bcd\u662f\u627f\u8f7d\u8bed\u4e49\u7684\u6700\u5c0f\u5355\u5143\uff0c\u8981\u89e3\u51b3\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u5355\u8bcd\u7684\u8fb9\u754c\u754c\u5b9a\u95ee\u9898\u9996\u5f53\u5176\u51b2\u3002\u7279\u522b\u662f\u4e2d\u6587\u6587\u672c\u901a\u5e38\u7531\u8fde\u7eed\u7684\u5b57\u5e8f\u5217\u7ec4\u6210\uff0c\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7f3a\u5c11\u5929\u7136\u7684\u5206\u9694\u7b26\uff0c\u56e0\u6b64\u4e2d\u6587\u4fe1\u606f\u5904\u7406\u6bd4\u82f1\u6587\u7b49\u897f\u65b9\u8bed\u8a00\u591a\u4e00\u6b65\u5de5\u5e8f\uff0c\u5373\u786e\u5b9a\u8bcd\u7684\u8fb9\u754c\uff0c\u6211\u4eec\u79f0\u4e3a\u201c\u4e2d\u6587\u81ea\u52a8\u5206\u8bcd\u201d\u4efb\u52a1\u3002\u901a\u4fd7\u7684\u8bf4\u5c31\u662f\u8981\u7531\u8ba1\u7b97\u673a\u5728\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u81ea\u52a8\u52a0\u4e0a\u5206\u9694\u7b26\uff0c\u4ece\u800c\u5c06\u4e2d\u6587\u6587\u672c\u5207\u5206\u4e3a\u72ec\u7acb\u7684\u5355\u8bcd\u3002\u4f8b\u5982\u4e00\u4e2a\u53e5\u5b50\u201c\u4eca\u5929\u5929\u6c14\u6674\u6717\u201d\u7684\u5e26\u6709\u5206\u9694\u7b26\u7684\u5207\u5206\u6587\u672c\u662f\u201c\u4eca\u5929|\u5929\u6c14|\u6674\u6717\u201d\u3002\u4e2d\u6587\u81ea\u52a8\u5206\u8bcd\u5904\u4e8e\u4e2d\u6587\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5e95\u5c42\uff0c\u662f\u516c\u8ba4\u7684\u4e2d\u6587\u4fe1\u606f\u5904\u7406\u7684\u7b2c\u4e00\u9053\u5de5\u5e8f\uff0c\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\uff0c\u4e3b\u8981\u5b58\u5728\u65b0\u8bcd\u53d1\u73b0\u548c\u6b67\u4e49\u5207\u5206\u7b49\u95ee\u9898\u3002\u6211\u4eec\u6ce8\u610f\u5230\uff1a\u6b63\u786e\u7684\u5355\u8bcd\u5207\u5206\u53d6\u51b3\u4e8e\u5bf9\u6587\u672c\u8bed\u4e49\u7684\u6b63\u786e\u7406\u89e3\uff0c\u800c\u5355\u8bcd\u5207\u5206\u53c8\u662f\u7406\u89e3\u8bed\u8a00\u7684\u6700\u521d\u7684\u4e00\u9053\u5de5\u5e8f\u3002\u8fd9\u6837\u7684\u4e00\u4e2a\u201c\u9e21\u751f\u86cb\u3001\u86cb\u751f\u9e21\u201d\u7684\u95ee\u9898\u81ea\u7136\u6210\u4e86\uff08\u4e2d\u6587\uff09\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u7b2c\u4e00\u6761\u62e6\u8def\u864e\u3002 \u5176\u4ed6\u7ea7\u522b\u7684\u8bed\u8a00\u5355\u4f4d\u4e5f\u5b58\u5728\u7740\u5404\u79cd\u6b67\u4e49\u95ee\u9898\u3002\u4f8b\u5982\u5728\u77ed\u8bed\u7ea7\u522b\u4e0a\uff0c\u201c\u8fdb\u53e3\u5f69\u7535\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u52a8\u5bbe\u5173\u7cfb\uff08\u4ece\u56fd\u5916\u8fdb\u53e3\u4e86\u4e00\u6279\u5f69\u7535\uff09\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u504f\u6b63\u5173\u7cfb\uff08\u4ece\u56fd\u5916\u8fdb\u53e3\u7684\u5f69\u7535\uff09\u3002\u53c8\u5982\u5728\u53e5\u5b50\u7ea7\u522b\u4e0a\uff0c\u201c\u505a\u624b\u672f\u7684\u662f\u5979\u7684\u7236\u4eb2\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u5979\u7236\u4eb2\u751f\u75c5\u4e86\u9700\u8981\u505a\u624b\u672f\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u5979\u7236\u4eb2\u662f\u533b\u751f\uff0c\u5e2e\u522b\u4eba\u505a\u624b\u672f\u3002\u603b\u4e4b\uff0c\u540c\u6837\u4e00\u4e2a\u5355\u8bcd\u3001\u77ed\u8bed\u6216\u8005\u53e5\u5b50\u6709\u591a\u79cd\u53ef\u80fd\u7684\u7406\u89e3\uff0c\u8868\u793a\u591a\u79cd\u53ef\u80fd\u7684\u8bed\u4e49\u3002\u5982\u679c\u4e0d\u80fd\u89e3\u51b3\u597d\u5404\u7ea7\u8bed\u8a00\u5355\u4f4d\u7684\u6b67\u4e49\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u65e0\u6cd5\u6b63\u786e\u7406\u89e3\u8bed\u8a00\u8981\u8868\u8fbe\u7684\u610f\u601d\u3002 \u53e6\u5916\u4e00\u4e2a\u65b9\u9762\uff0c\u6d88\u9664\u6b67\u4e49\u6240\u9700\u8981\u7684\u77e5\u8bc6\u5728\u83b7\u53d6\u3001\u8868\u8fbe\u4ee5\u53ca\u8fd0\u7528\u4e0a\u5b58\u5728\u56f0\u96be\u3002\u7531\u4e8e\u8bed\u8a00\u5904\u7406\u7684\u590d\u6742\u6027\uff0c\u5408\u9002\u7684\u8bed\u8a00\u5904\u7406\u65b9\u6cd5\u548c\u6a21\u578b\u96be\u4ee5\u8bbe\u8ba1\u3002 \u4f8b\u5982\u4e0a\u4e0b\u6587\u77e5\u8bc6\u7684\u83b7\u53d6\u95ee\u9898\u3002\u5728\u8bd5\u56fe\u7406\u89e3\u4e00\u53e5\u8bdd\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u4e0d\u5b58\u5728\u6b67\u4e49\u95ee\u9898\uff0c\u6211\u4eec\u4e5f\u5f80\u5f80\u9700\u8981\u8003\u8651\u4e0a\u4e0b\u6587\u7684\u5f71\u54cd\u3002\u6240\u8c13\u7684\u201c\u4e0a\u4e0b\u6587\u201d\u6307\u7684\u662f\u5f53\u524d\u6240\u8bf4\u8fd9\u53e5\u8bdd\u6240\u5904\u7684\u8bed\u8a00\u73af\u5883\uff0c\u4f8b\u5982\u8bf4\u8bdd\u4eba\u6240\u5904\u7684\u73af\u5883\uff0c\u6216\u8005\u662f\u8fd9\u53e5\u8bdd\u7684\u524d\u51e0\u53e5\u8bdd\u6216\u8005\u540e\u51e0\u53e5\u8bdd\uff0c\u7b49\u7b49\u3002\u5047\u5982\u5f53\u524d\u8fd9\u53e5\u8bdd\u4e2d\u5b58\u5728\u6307\u4ee3\u8bcd\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u8fd9\u53e5\u8bdd\u524d\u9762\u7684\u53e5\u5b50\u6765\u63a8\u65ad\u8fd9\u4e2a\u6307\u4ee3\u8bcd\u662f\u6307\u7684\u4ec0\u4e48\u3002\u6211\u4eec\u4ee5\u201c\u5c0f\u660e\u6b3a\u8d1f\u5c0f\u4eae\uff0c\u56e0\u6b64\u6211\u6279\u8bc4\u4e86\u4ed6\u201d\u4e3a\u4f8b\u3002\u5728\u5176\u4e2d\u7684\u7b2c\u4e8c\u53e5\u8bdd\u4e2d\u7684\u201c\u4ed6\u201d\u662f\u6307\u4ee3\u201c\u5c0f\u660e\u201d\u8fd8\u662f\u201c\u5c0f\u4eae\u201d\u5462\uff1f\u8981\u6b63\u786e\u7406\u89e3\u8fd9\u53e5\u8bdd\uff0c\u6211\u4eec\u5c31\u8981\u7406\u89e3\u4e0a\u53e5\u8bdd\u201c\u5c0f\u660e\u6b3a\u8d1f\u5c0f\u4eae\u201d\u610f\u5473\u7740\u201c\u5c0f\u660e\u201d\u505a\u5f97\u4e0d\u5bf9\uff0c\u56e0\u6b64\u7b2c\u4e8c\u53e5\u4e2d\u7684\u201c\u4ed6\u201d\u5e94\u5f53\u6307\u4ee3\u7684\u662f\u201c\u5c0f\u660e\u201d\u3002\u7531\u4e8e\u4e0a\u4e0b\u6587\u5bf9\u4e8e\u5f53\u524d\u53e5\u5b50\u7684\u6697\u793a\u5f62\u5f0f\u662f\u591a\u79cd\u591a\u6837\u7684\uff0c\u56e0\u6b64\u5982\u4f55\u8003\u8651\u4e0a\u4e0b\u6587\u5f71\u54cd\u95ee\u9898\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u4e3b\u8981\u56f0\u96be\u4e4b\u4e00\u3002 \u518d\u5982\u80cc\u666f\u77e5\u8bc6\u95ee\u9898\u3002 \u6b63\u786e\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u8fd8\u8981\u6709\u8db3\u591f\u7684\u80cc\u666f\u77e5\u8bc6\u3002\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5728\u673a\u5668\u7ffb\u8bd1\u7814\u7a76\u7684\u521d\u671f\uff0c\u4eba\u4eec\u7ecf\u5e38\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u7684\u8270\u5de8\u6027\u3002\u5728\u82f1\u8bed\u4e2d\u201cThe spirit is willing but the flesh is weak.\u201d\uff0c\u610f\u601d\u662f\u201c\u5fc3\u6709\u4f59\u800c\u529b\u4e0d\u8db3\u201d\u3002\u4f46\u662f\u5f53\u65f6\u7684\u67d0\u4e2a\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5c06\u8fd9\u53e5\u82f1\u6587\u7ffb\u8bd1\u5230\u4fc4\u8bed\uff0c\u7136\u540e\u518d\u7ffb\u8bd1\u56de\u82f1\u8bed\u7684\u65f6\u5019\uff0c\u5374\u53d8\u6210\u4e86\u201cThe Voltka is strong but the meat is rotten.\u201d\uff0c\u610f\u601d\u662f\u201c\u4f0f\u7279\u52a0\u9152\u662f\u6d53\u7684\uff0c\u4f46\u8089\u5374\u8150\u70c2\u4e86\u201d\u3002\u4ece\u5b57\u9762\u610f\u4e49\u4e0a\u770b\uff0c\u201cspirit\u201d\uff08\u70c8\u6027\u9152\uff09\u4e0e\u201cVoltka\u201d\uff08\u4f0f\u7279\u52a0\uff09\u5bf9\u8bd1\u4f3c\u65e0\u95ee\u9898\uff0c\u800c\u201cflesh\u201d\u548c\u201cmeat\u201d\u4e5f\u90fd\u6709\u8089\u7684\u610f\u601d\u3002\u90a3\u4e48\u8fd9\u4e24\u53e5\u8bdd\u5728\u610f\u4e49\u4e0a\u4e3a\u4ec0\u4e48\u4f1a\u5357\u8f95\u5317\u8f99\u5462\uff1f\u5173\u952e\u7684\u95ee\u9898\u5c31\u5728\u4e8e\u5728\u7ffb\u8bd1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u4e8e\u82f1\u8bed\u6210\u8bed\u5e76\u65e0\u4e86\u89e3\uff0c\u4ec5\u4ec5\u662f\u4ece\u5b57\u9762\u4e0a\u8fdb\u884c\u7ffb\u8bd1\uff0c\u7ed3\u679c\u81ea\u7136\u5931\u4e4b\u6beb\u5398\uff0c\u5dee\u4e4b\u5343\u91cc\u3002 \u4ece\u4e0a\u9762\u7684\u4e24\u4e2a\u65b9\u9762\u7684\u4e3b\u8981\u56f0\u96be\uff0c\u6211\u4eec\u770b\u5230\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8fd9\u4e2a\u96be\u9898\u7684\u6839\u6e90\u5c31\u662f\u4eba\u7c7b\u8bed\u8a00\u7684\u590d\u6742\u6027\u548c\u8bed\u8a00\u63cf\u8ff0\u7684\u5916\u90e8\u4e16\u754c\u7684\u590d\u6742\u6027\u3002\u4eba\u7c7b\u8bed\u8a00\u627f\u62c5\u7740\u4eba\u7c7b\u8868\u8fbe\u60c5\u611f\u3001\u4ea4\u6d41\u601d\u60f3\u3001\u4f20\u64ad\u77e5\u8bc6\u7b49\u91cd\u8981\u529f\u80fd\uff0c\u56e0\u6b64\u9700\u8981\u5177\u5907\u5f3a\u5927\u7684\u7075\u6d3b\u6027\u548c\u8868\u8fbe\u80fd\u529b\uff0c\u800c\u7406\u89e3\u8bed\u8a00\u6240\u9700\u8981\u7684\u77e5\u8bc6\u53c8\u662f\u65e0\u6b62\u5883\u7684\u3002\u90a3\u4e48\u76ee\u524d\u4eba\u4eec\u662f\u5982\u4f55\u5c1d\u8bd5\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5462\uff1f \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u8d8b\u52bf \u00b6 \u76ee\u524d\uff0c\u4eba\u4eec\u4e3b\u8981\u901a\u8fc7\u4e24\u79cd\u601d\u8def\u6765\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\uff0c\u53e6\u5916\u4e00\u79cd\u662f\u57fa\u4e8e\u7edf\u8ba1\u7684\u7ecf\u9a8c\u4e3b\u4e49\u3002\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u8ba4\u4e3a\uff0c\u4eba\u7c7b\u8bed\u8a00\u4e3b\u8981\u662f\u7531\u8bed\u8a00\u89c4\u5219\u6765\u4ea7\u751f\u548c\u63cf\u8ff0\u7684\uff0c\u56e0\u6b64\u53ea\u8981\u80fd\u591f\u7528\u9002\u5f53\u7684\u5f62\u5f0f\u5c06\u4eba\u7c7b\u8bed\u8a00\u89c4\u5219\u8868\u793a\u51fa\u6765\uff0c\u5c31\u80fd\u591f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff0c\u5e76\u5b9e\u73b0\u8bed\u8a00\u4e4b\u95f4\u7684\u7ffb\u8bd1\u7b49\u5404\u79cd\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u3002\u800c\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u5219\u8ba4\u4e3a\uff0c\u4ece\u8bed\u8a00\u6570\u636e\u4e2d\u83b7\u53d6\u8bed\u8a00\u7edf\u8ba1\u77e5\u8bc6\uff0c\u6709\u6548\u5efa\u7acb\u8bed\u8a00\u7684\u7edf\u8ba1\u6a21\u578b\u3002\u56e0\u6b64\u53ea\u8981\u80fd\u591f\u6709\u8db3\u591f\u591a\u7684\u7528\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6570\u636e\uff0c\u5c31\u80fd\u591f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u3002\u7136\u800c\uff0c\u5f53\u9762\u5bf9\u73b0\u5b9e\u4e16\u754c\u5145\u6ee1\u6a21\u7cca\u4e0e\u4e0d\u786e\u5b9a\u6027\u65f6\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u9762\u4e34\u7740\u5404\u81ea\u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u4eba\u7c7b\u8bed\u8a00\u867d\u7136\u6709\u4e00\u5b9a\u7684\u89c4\u5219\uff0c\u4f46\u662f\u5728\u771f\u5b9e\u4f7f\u7528\u4e2d\u5f80\u5f80\u4f34\u968f\u5927\u91cf\u7684\u566a\u97f3\u548c\u4e0d\u89c4\u8303\u6027\u3002\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u7684\u4e00\u5927\u5f31\u70b9\u5c31\u662f\u9c81\u68d2\u6027\u5dee\uff0c\u53ea\u8981\u4e0e\u89c4\u5219\u7a0d\u6709\u504f\u79bb\u4fbf\u65e0\u6cd5\u5904\u7406\u3002\u800c\u5bf9\u4e8e\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u800c\u8a00\uff0c\u53c8\u4e0d\u80fd\u65e0\u9650\u5730\u83b7\u53d6\u8bed\u8a00\u6570\u636e\u8fdb\u884c\u7edf\u8ba1\u5b66\u4e60\uff0c\u56e0\u6b64\u4e5f\u4e0d\u80fd\u591f\u5b8c\u7f8e\u5730\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u3002\u4e8c\u5341\u4e16\u7eaa\u516b\u5341\u5e74\u4ee3\u4ee5\u6765\u7684\u8d8b\u52bf\u5c31\u662f\uff0c\u57fa\u4e8e\u8bed\u8a00\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u4e0d\u65ad\u53d7\u5230\u8d28\u7591\uff0c\u5927\u89c4\u6a21\u8bed\u8a00\u6570\u636e\u5904\u7406\u6210\u4e3a\u76ee\u524d\u548c\u672a\u6765\u4e00\u6bb5\u65f6\u671f\u5185\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u7814\u7a76\u76ee\u6807\u3002\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u8d8a\u6765\u8d8a\u53d7\u5230\u91cd\u89c6\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u8d8a\u6765\u8d8a\u591a\u5730\u4f7f\u7528\u673a\u5668\u81ea\u52a8\u5b66\u4e60\u7684\u65b9\u6cd5\u6765\u83b7\u53d6\u8bed\u8a00\u77e5\u8bc6\u3002 \u8fc8\u8fdb21\u4e16\u7eaa\uff0c\u6211\u4eec\u5df2\u7ecf\u8fdb\u5165\u4e86\u4ee5\u4e92\u8054\u7f51\u4e3a\u4e3b\u8981\u6807\u5fd7\u7684\u6d77\u91cf\u4fe1\u606f\u65f6\u4ee3\uff0c\u8fd9\u4e9b\u6d77\u91cf\u4fe1\u606f\u5927\u90e8\u5206\u662f\u4ee5\u81ea\u7136\u8bed\u8a00\u8868\u793a\u7684\u3002\u4e00\u65b9\u9762\uff0c\u6d77\u91cf\u4fe1\u606f\u4e5f\u4e3a\u8ba1\u7b97\u673a\u5b66\u4e60\u4eba\u7c7b\u8bed\u8a00\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u201c\u7d20\u6750\u201d\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4e5f\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u63d0\u4f9b\u4e86\u66f4\u52a0\u5bbd\u5e7f\u7684\u5e94\u7528\u821e\u53f0\u3002\u4f8b\u5982\uff0c\u4f5c\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u91cd\u8981\u5e94\u7528\uff0c\u641c\u7d22\u5f15\u64ce\u9010\u6e10\u6210\u4e3a\u4eba\u4eec\u83b7\u53d6\u4fe1\u606f\u7684\u91cd\u8981\u5de5\u5177\uff0c\u6d8c\u73b0\u51fa\u4ee5\u767e\u5ea6\u3001\u8c37\u6b4c\u7b49\u4e3a\u4ee3\u8868\u7684\u641c\u7d22\u5f15\u64ce\u5de8\u5934\uff1b\u673a\u5668\u7ffb\u8bd1\u4e5f\u4ece\u5b9e\u9a8c\u5ba4\u8d70\u5165\u5bfb\u5e38\u767e\u59d3\u5bb6\uff0c\u8c37\u6b4c\u3001\u767e\u5ea6\u7b49\u516c\u53f8\u90fd\u63d0\u4f9b\u4e86\u57fa\u4e8e\u6d77\u91cf\u7f51\u7edc\u6570\u636e\u7684\u673a\u5668\u7ffb\u8bd1\u548c\u8f85\u52a9\u7ffb\u8bd1\u5de5\u5177\uff1b\u57fa\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e2d\u6587\uff08\u8f93\u5165\u6cd5\u5982\u641c\u72d7\u3001\u5fae\u8f6f\u3001\u8c37\u6b4c\u7b49\u8f93\u5165\u6cd5\uff09\u6210\u4e3a\u8ba1\u7b97\u673a\u7528\u6237\u7684\u5fc5\u5907\u5de5\u5177\uff1b\u5e26\u6709\u8bed\u97f3\u8bc6\u522b\u7684\u8ba1\u7b97\u673a\u548c\u624b\u673a\u4e5f\u6b63\u5927\u884c\u5176\u9053\uff0c\u534f\u52a9\u7528\u6237\u66f4\u6709\u6548\u5730\u5de5\u4f5c\u5b66\u4e60\u3002\u603b\u4e4b\uff0c\u968f\u7740\u4e92\u8054\u7f51\u7684\u666e\u53ca\u548c\u6d77\u91cf\u4fe1\u606f\u7684\u6d8c\u73b0\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6b63\u5728\u4eba\u4eec\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\u626e\u6f14\u7740\u8d8a\u6765\u8d8a\u91cd\u8981\u7684\u4f5c\u7528\u3002\u7136\u800c\uff0c\u9762\u5411\u6d77\u91cf\u7684\u5927\u89c4\u6a21\u6587\u672c\u6570\u636e\uff0c\u4eba\u4eec\u9762\u4e34\u7684\u4e00\u4e2a\u4e25\u5cfb\u4e8b\u5b9e\u662f\uff0c\u5982\u4f55\u6709\u6548\u5229\u7528\u6d77\u91cf\u4fe1\u606f\uff0c\u4eba\u4eec\u9010\u6e10\u610f\u8bc6\u5230\uff0c\u5355\u7eaf\u4f9d\u9760\u7edf\u8ba1\u65b9\u6cd5\u5df2\u7ecf\u65e0\u6cd5\u5feb\u901f\u6709\u6548\u5730\u4ece\u6d77\u91cf\u6570\u636e\u4e2d\u5b66\u4e60\u8bed\u8a00\u77e5\u8bc6\u3002 \u968f\u77402013\u5e74word2vec\u6280\u672f\u7684\u53d1\u8868\uff0c\u4ee5\u795e\u7ecf\u7f51\u7edc\u4e3a\u57fa\u7840\u7684\u6df1\u5ea6\u5b66\u4e60\u6280\u672f\u5f00\u59cb\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u5e7f\u6cdb\u4f7f\u7528\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u5206\u5e03\u5f0f\u8bed\u4e49\u8868\u793a\u548c\u591a\u5c42\u7f51\u7edc\u67b6\u6784\u5177\u6709\u5f3a\u5927\u7684\u62df\u5408\u548c\u5b66\u4e60\u80fd\u529b\uff0c\u663e\u8457\u63d0\u5347\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5404\u79cd\u4efb\u52a1\u7684\u6027\u80fd\uff0c\u6210\u4e3a\u73b0\u9636\u6bb5\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u6280\u672f\u65b9\u6848\u3002 \u6df1\u5ea6\u5b66\u4e60\u662f\u7eaf\u7684\u6570\u636e\u9a71\u52a8\u6280\u672f\u65b9\u6848\uff0c\u9700\u8981\u4ece\u5927\u89c4\u6a21\u6807\u6ce8\u6570\u636e\u4e2d\u5b66\u4e60\u7279\u5b9a\u4efb\u52a1\u76f8\u5173\u7684\u590d\u6742\u6a21\u5f0f\u3002\u4e00\u65b9\u9762\uff0c\u6709\u4e9b\u5b66\u8005\u5f00\u59cb\u63a2\u7d22\u9762\u5411\u5927\u89c4\u6a21\u65e0\u6807\u6ce8\u6587\u672c\u6570\u636e\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u5982ELMo\uff0cGPT\u3001BERT\u7b49\uff0c\u53ef\u4ee5\u770b\u505a\u4ece\u5927\u89c4\u6a21\u6570\u636e\u4e2d\u5b66\u4e60\u77e5\u8bc6\u7684\u6781\u81f4\u63a2\u7d22\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u73b0\u6709\u6df1\u5ea6\u5b66\u4e60\u6280\u672f\u5c1a\u672a\u8003\u8651\u4eba\u7c7b\u79ef\u7d2f\u7684\u4e30\u5bcc\u77e5\u8bc6\uff08\u5305\u62ec\u8bed\u8a00\u77e5\u8bc6\u3001\u4e16\u754c\u77e5\u8bc6\u3001\u5e38\u8bc6\u77e5\u8bc6\u3001\u8ba4\u77e5\u77e5\u8bc6\u3001\u884c\u4e1a\u77e5\u8bc6\u7b49\uff09\uff0c\u5982\u679c\u5c06\u6df1\u5ea6\u5b66\u4e60\u770b\u505a\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\uff0c\u5c06\u7b26\u53f7\u77e5\u8bc6\u770b\u505a\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\uff0c\u90a3\u4e48\u5982\u4f55\u5145\u5206\u53d1\u6325\u57fa\u4e8e\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u548c\u57fa\u4e8e\u7edf\u8ba1\u7684\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u7684\u4f18\u52bf\uff0c\u4e24\u8005\u4e92\u76f8\u8865\u5145\uff0c\u66f4\u597d\u3001\u66f4\u5feb\u5730\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4ecd\u7136\u662f\u6211\u4eec\u9700\u8981\u63a2\u7d22\u7684\u91cd\u8981\u8bfe\u9898\u3002 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f5c\u4e3a\u4e00\u4e2a\u5e74\u9f84\u5c1a\u4e0d\u8db3\u4e00\u4e2a\u4e16\u7eaa\u7684\u65b0\u5174\u5b66\u79d1\uff0c\u6b63\u5728\u8fdb\u884c\u7740\u7a81\u98de\u731b\u8fdb\u7684\u53d1\u5c55\u3002\u56de\u987e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u5386\u7a0b\uff0c\u5e76\u4e0d\u662f\u4e00\u5e06\u98ce\u987a\uff0c\u6709\u8fc7\u4f4e\u8c37\uff0c\u4e5f\u6709\u8fc7\u9ad8\u6f6e\u3002\u800c\u73b0\u5728\u6211\u4eec\u6b63\u9762\u4e34\u7740\u65b0\u7684\u6311\u6218\u548c\u673a\u9047\u3002\u4f8b\u5982\uff0c\u76ee\u524d\u7f51\u7edc\u641c\u7d22\u5f15\u64ce\u57fa\u672c\u4e0a\u8fd8\u505c\u7559\u5728\u5173\u952e\u8bcd\u5339\u914d\uff0c\u7f3a\u4e4f\u6df1\u5c42\u6b21\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u548c\u7406\u89e3\u3002\u8bed\u97f3\u8bc6\u522b\u3001\u6587\u5b57\u8bc6\u522b\u3001\u95ee\u7b54\u7cfb\u7edf\u3001\u673a\u5668\u7ffb\u8bd1\u7b49\u76ee\u524d\u4e5f\u53ea\u80fd\u8fbe\u5230\u5f88\u57fa\u672c\u7684\u6c34\u5e73\u3002\u8def\u6f2b\u6f2b\u5176\u4fee\u8fdc\u516e\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f5c\u4e3a\u4e00\u4e2a\u9ad8\u5ea6\u4ea4\u53c9\u7684\u65b0\u5174\u5b66\u79d1\uff0c\u4e0d\u8bba\u662f\u63a2\u7a76\u81ea\u7136\u672c\u8d28\u8fd8\u662f\u4ed8\u8bf8\u5b9e\u9645\u5e94\u7528\uff0c\u5728\u5c06\u6765\u5fc5\u5b9a\u4f1a\u6709\u4ee4\u4eba\u671f\u5f85\u7684\u60ca\u559c\u548c\u5f02\u5e38\u5feb\u901f\u7684\u53d1\u5c55\u3002 \u4e0e\u8ba1\u7b97\u673a\u89c6\u89c9\u76f8\u6bd4\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u4ec0\u4e48\u7279\u70b9 \u00b6 \u4ece\u56fe\u50cf\u548c\u8bed\u8a00\u4e24\u79cd\u6a21\u6001\u6765\u770b\uff0c\u5bf9\u6587\u672c\u5904\u7406\u6280\u672f\u7684\u5927\u89c4\u6a21\u5e94\u7528\u8981\u65e9\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9\u3002\u5c06\u56fe\u50cf\u548c\u8bed\u8a00\u4e2d\u7684\u5904\u7406\u5bf9\u8c61\u505a\u4e00\u4e2a\u4e0d\u592a\u4e25\u8c28\u7684\u5bf9\u5e94\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5927\u4f53\u4e0a\u50cf\u7d20\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u5b57\u6bcd\uff1b\u56fe\u50cf\u4e2d\u7684\u5bf9\u8c61\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u5355\u8bcd/\u6982\u5ff5\uff1b\u56fe\u50cf\u4e2d\u5bf9\u8c61\u7ec4\u6210\u7684\u573a\u666f\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u53e5\u5b50\u8868\u8fbe\u7684\u8bed\u4e49\uff1b\u89c6\u9891\u5219\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u7bc7\u7ae0\uff08\u6587\u7ae0\uff09\u3002 \u5728\u8fd9\u79cd\u7c7b\u6bd4\u4e0b\u770b\uff0cNLP/IR\u5728\u5355\u8bcd\u5c42\u9762\u7684\u5904\u7406\u8981\u6bd4CV\u4e2d\u7684\u56fe\u50cf\u8bc6\u522b\u7b80\u5355\u5f97\u591a\uff0c\u53ea\u9700\u8981\u505a\u4e00\u4e0btokenization\u3001lemmatization\u3001stemming\u7b49\uff08\u4e2d\u6587\u590d\u6742\u4e00\u4e9b\u9700\u8981\u989d\u5916\u505a\u81ea\u52a8\u5206\u8bcd\uff09\uff0c\u5c31\u53ef\u4ee5\u5229\u7528\u5173\u952e\u8bcd\u5339\u914d\u5b8c\u6210\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u4fe1\u606f\u68c0\u7d22\u3001\u6587\u672c\u5206\u7c7b\u3001\u62fc\u5199\u7ea0\u9519\u3001\u60c5\u611f\u5206\u6790\u3001\u5173\u952e\u8bcd\u63d0\u53d6\u7b49\u7b49\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u5f97\u5230\u975e\u5e38\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u5982\u641c\u7d22\u5f15\u64ce\u3001\u62fc\u97f3\u8f93\u5165\u6cd5\u3001\u65b0\u95fb\u5206\u7c7b\u3001\u9605\u8bfb\u63a8\u8350\u7b49\u3002 \u800c\u7531\u4e8e\u56fe\u50cf\u4e2d\u5bf9\u8c61\u7684\u590d\u6742\u6027\u548c\u591a\u6837\u6027\uff0c\u4ec5\u5728\u5bf9\u8c61\u8bc6\u522b\u5c42\u9762\uff0c\u751a\u81f3\u7279\u5b9a\u7684\u4eba\u8138\u8bc6\u522b\uff0c\u8fd8\u6709\u5f88\u591a\u6280\u672f\u6311\u6218\u3002\u53ea\u4e0d\u8fc7\u662f\u8fd1\u5e74\u6765\uff0c\u7531\u4e8e\u6df1\u5ea6\u5b66\u4e60\u5bf9\u975e\u7ed3\u6784\u6570\u636e\u7684\u5f3a\u5927\u8868\u793a\u548c\u5b66\u4e60\u80fd\u529b\uff0c\u5f00\u59cb\u8ba9\u5bf9\u8c61\u8bc6\u522b\u8d70\u5411\u4e86\u5b9e\u7528\u5316\u3002 \u800c\u8fdb\u5165\u5230\u66f4\u9ad8\u5c42\u9762\uff0c\u4f8b\u5982\u9762\u5411\u56fe\u50cf\u7684\u573a\u666f\u56fe\u6784\u5efa\uff0c\u9762\u5411\u6587\u672c\u7684\u53e5\u6cd5\u8bed\u4e49\u5206\u6790\uff0c\u90fd\u9700\u8981\u5bf9\u590d\u6742\u8bed\u5883\uff08\u4e0a\u4e0b\u6587\uff09\u7684\u7cbe\u51c6\u800c\u5f3a\u5927\u7684\u5efa\u6a21\u80fd\u529b\u3002\u6240\u4ee5\u6211\u611f\u89c9\uff0c\u5e76\u975eNLP\u53d1\u5c55\u7f13\u6162\uff0c\u53ea\u662f\u4e24\u4e2a\u9886\u57df\u7684\u53d1\u5c55\u8282\u594f\u548c\u9636\u6bb5\u4e0d\u540c\u3002\u8fdb\u5165\u9ad8\u5c42\u4efb\u52a1\u540e\uff0c\u4e24\u4e2a\u9886\u57df\u90fd\u5c06\u9762\u4e34\u5171\u540c\u7684\u5173\u952e\u6311\u6218\uff0c\u90fd\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u590d\u6742\u8bed\u5883\u4e0b\u7684\u591a\u5bf9\u8c61\uff08\u56fe\u50cf\u4e2d\u662f\u4e0d\u540c\u5bf9\u8c61\uff0c\u6587\u672c\u4e2d\u662f\u4e0d\u540c\u6982\u5ff5\uff09\u7684\u8bed\u4e49\u7ec4\u5408\u95ee\u9898\u3002 \u4e2d\u6587NLP vs \u82f1\u6587NLP\u5728\u7406\u8bba\u3001\u5904\u7406\u4e0a\u6709\u4ec0\u4e48\u76f8\u540c\u548c\u4e0d\u540c, \u5c24\u5176\u662f\u4e2d\u6587 NLP\u6709\u4ec0\u4e48\u72ec\u7279\u4e4b\u5904 \u00b6 \u4ece\u5b9e\u7528\u6587\u672c\u5206\u6790\u6280\u672f\u800c\u8a00\uff0c\u5982\u679c\u53ea\u505a\u4e3b\u9898\u805a\u7c7b\u3001\u6587\u672c\u5206\u7c7b\u7b49\u4efb\u52a1\u7684\u8bdd\uff0c\u4e2d\u82f1\u6587\u6700\u5927\u5dee\u522b\u5c31\u5728\u4e8e\uff0c\u4e2d\u6587\u9700\u8981\u505a\u81ea\u52a8\u5206\u8bcd\uff0c\u76f8\u5173\u5de5\u5177\u5305\u5df2\u7ecf\u5f88\u591a\u4e86\uff0c\u5305\u62ec\u9898\u4e3b\u63d0\u5230\u7684Jieba\uff0c\u8fd8\u6709\u54c8\u5de5\u5927\u7684LTP\uff0c\u5317\u7406\u5de5\u7684ICTCLAS\uff0c\u8fd8\u6709\u6211\u4eec\u7ec4\u7814\u5236\u7684THULAC\u3002\u5f53\u7136\uff0c\u5728\u6587\u672c\u5206\u7c7b\u65f6\uff0c\u5230\u5e95\u662f\u9009\u8bcd\u8fd8\u662fNgram\u4f5c\u4e3a\u7279\u5f81\uff0c\u5728SVM+BOW\u65f6\u4ee3\u66fe\u662f\u4e2a\u95ee\u9898\u3002\u8fdb\u5165\u5230\u6df1\u5ea6\u5b66\u4e60\u65f6\u4ee3\uff0c\u5c31\u76f4\u63a5\u53ef\u4ee5\u7528\u57fa\u4e8e\u5b57\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u4e86\u3002 \u4eceNLP\u7814\u7a76\u89d2\u5ea6\u800c\u8a00\uff0c\u4e2d\u82f1\u6587\u5728\u8bcd\u6027\u6807\u6ce8\u3001\u53e5\u6cd5\u5206\u6790\u7b49\u4efb\u52a1\u4e0a\u9887\u6709\u5dee\u5f02\u3002\u4e3b\u8981\u4f53\u73b0\u5728\u82f1\u8bed\u6709\u660e\u663e\u7684\u5c48\u6298\u53d8\u5316\uff08\u5355\u590d\u6570\u3001\u65f6\u6001\u7b49\uff09\u800c\u6c49\u8bed\u7f3a\u5c11\u8fd9\u4e9b\u5c48\u6298\u53d8\u5316\uff0c\u4ea6\u5373\u6709\u5b66\u8005\u603b\u7ed3\u7684\u201c\u6c49\u8bed\u91cd\u4e49\u5408\uff0c\u82f1\u8bed\u91cd\u5f62\u5408\u201d\u3002\u6240\u4ee5\uff0c\u82f1\u8bed\u91cc\u4e00\u4e2a\u8bcd\u88ab\u6807\u4e3a\u52a8\u8bcd\u8fd8\u662f\u540d\u8bcd\uff0c\u6ca1\u6709\u592a\u591a\u4e89\u8bae\uff1b\u6c49\u8bed\u91cc\u4e00\u4e2a\u8bcd\u5e94\u8be5\u88ab\u6807\u4e3a\u52a8\u8bcd\u8fd8\u662f\u540d\u8bcd\uff0c\u4f8b\u5982\u201c\u70ed\u7231\u5b66\u4e60\u201d\u3001\u201c\u52b3\u52a8\u5149\u8363\u201d\u4e2d\u7684\u201c\u5b66\u4e60\u201d\u3001\u201c\u52b3\u52a8\u201d\u5982\u679c\u6309\u7167\u82f1\u6587\u8bed\u6cd5\u89c4\u8303\u5e94\u5f53\u6807\u6ce8\u4e3a\u540d\u8bcd\u3002\u8457\u540d\u8bed\u8a00\u5b66\u5bb6\u6c88\u5bb6\u714a\u5148\u751f\u5c31\u66fe\u63d0\u51fa\u201c\u6c49\u8bed\u52a8\u8bcd\u548c\u540d\u8bcd\u4e0d\u5206\u7acb\u201d\u7684\u7406\u8bba\u3002\u5728\u53e5\u6cd5\u5206\u6790\u5c42\u9762\u6c49\u8bed\u4e5f\u6709\u4e00\u4e9b\u81ea\u5df1\u7684\u7279\u70b9\uff0c\u5177\u4f53\u9700\u8981\u8bf7\u6559\u4e13\u4e1a\u7684\u8bed\u8a00\u5b66\u5bb6\u89e3\u7b54\u4e86\u3002 \u4e2d\u82f1\u6587\u76f8\u5173\u5206\u6790\u4efb\u52a1\u7684\u9519\u8bef\u7387\u95ee\u9898\u3002\u4e4b\u6240\u4ee5\u5728\u4e00\u4e9b\u4efb\u52a1\u4e0a\u4e2d\u6587\u5206\u6790\u6027\u80fd\u663e\u8457\u4f4e\u4e8e\u82f1\u6587\uff0c\u9664\u4e86\u4e2d\u6587\u7f3a\u5c11\u5c48\u8005\u53d8\u5316\u3001\u6709\u66f4\u591a\u81ea\u7531\u5ea6\u4ece\u800c\u63d0\u5347\u4e86\u5206\u6790\u96be\u5ea6\u7684\u539f\u56e0\u5916\uff0c\u4e2d\u6587\u6807\u6ce8\u8d44\u6e90\u76f8\u5bf9\u8f83\u5c11\u3001\u6807\u6ce8\u8d28\u91cf\u76f8\u5bf9\u8f83\u4f4e\u4e5f\u662f\u5173\u952e\u539f\u56e0\u4e4b\u4e00\u3002\u8bed\u8a00\u8d44\u6e90\u6807\u6ce8\u65e2\u9700\u8981\u8bed\u8a00\u5b66\u5bb6\u548c\u8ba1\u7b97\u673a\u5b66\u8005\u7684\u901a\u529b\u5408\u4f5c\uff0c\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7cbe\u529b\u548c\u65f6\u95f4\uff0c\u5728\u56fd\u5185\u73af\u5883\u4e0b\u592a\u8d39\u529b\u4e0d\u8ba8\u597d\u4e86\uff0c\u5e0c\u671b\u672a\u6765\u4f1a\u6709\u6539\u89c2\u3002 \u4ece\u66f4\u5e7f\u9614\u7684\u8bed\u8a00\u7814\u7a76\u89d2\u5ea6\u800c\u8a00\uff0c\u4e2d\u82f1\u7531\u4e8e\u5404\u81ea\u627f\u8f7d\u4e86\u4e24\u79cd\u622a\u7136\u4e0d\u540c\u7684\u4eba\u7c7b\u7fa4\u4f53\u7684\u6587\u5316\u4fe1\u606f\uff0c\u6240\u4ee5\u5728\u66f4\u6df1\u5c42\u7684\u6587\u5316\u5185\u6db5\u4f1a\u6709\u66f4\u660e\u663e\u7684\u5206\u91ce\uff0c\u4f8b\u5982\u4e24\u79cd\u8bed\u8a00\u7684\u8bcd\u6c47\u8054\u60f3\u7f51\u7edc\u3001\u9690\u55bb\u98ce\u683c\u7b49\uff0c\u53ef\u80fd\u4f1a\u6709\u66f4\u5927\u7684\u4e0d\u540c\u3002\u4e5f\u8bb8\u5728NLP\u6280\u672f\u65e5\u6e10\u6210\u719f\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u900f\u8fc7\u8bed\u8a00\u66f4\u52a0\u5b9a\u91cf\u5730\u5206\u6790\u4e24\u79cd\u4e0d\u540c\u6587\u5316\u7684\u5dee\u5f02\u3002 \u53c2\u8003\u6587\u732e \u00b6 \u5f20\u94b9. \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u8ba1\u7b97\u6a21\u578b. \u4e2d\u6587\u4fe1\u606f\u5b66\u62a5, 2007, 21(3):3-7. \u51af\u5fd7\u4f1f. \u300a\u7edf\u8ba1\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b\u5e8f\u8a00. 1\u7248. \u5317\u4eac: \u6e05\u534e\u5927\u5b66\u51fa\u7248\u793e, 2008. \u5b59\u8302\u677e. \u8bed\u8a00\u8ba1\u7b97:\u4fe1\u606f\u79d1\u5b66\u6280\u672f\u4e2d\u957f\u671f\u53d1\u5c55\u7684\u6218\u7565\u5236\u9ad8\u70b9. \u8bed\u8a00\u6587\u5b57\u5e94\u7528, 2005, 3:38-40.","title":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b80\u4ecb"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_1","text":"\u5218\u77e5\u8fdc\u8001\u5e08 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b80\u4ecb","title":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b80\u4ecb"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_2","text":"\u7b80\u5355\u5730\u8bf4\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08Natural Language Processing\uff0c\u7b80\u79f0NLP\uff09\u5c31\u662f\u7528\u8ba1\u7b97\u673a\u6765\u5904\u7406\u3001\u7406\u89e3\u4ee5\u53ca\u8fd0\u7528\u4eba\u7c7b\u8bed\u8a00(\u5982\u4e2d\u6587\u3001\u82f1\u6587\u7b49)\uff0c\u5b83\u5c5e\u4e8e\u4eba\u5de5\u667a\u80fd\u7684\u4e00\u4e2a\u5206\u652f\uff0c\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u8bed\u8a00\u5b66\u7684\u4ea4\u53c9\u5b66\u79d1\uff0c\u53c8\u5e38\u88ab\u79f0\u4e3a\u8ba1\u7b97\u8bed\u8a00\u5b66\u3002\u7531\u4e8e\u81ea\u7136\u8bed\u8a00\u662f\u4eba\u7c7b\u533a\u522b\u4e8e\u5176\u4ed6\u52a8\u7269\u7684\u6839\u672c\u6807\u5fd7\u3002\u6ca1\u6709\u8bed\u8a00\uff0c\u4eba\u7c7b\u7684\u601d\u7ef4\u4e5f\u5c31\u65e0\u4ece\u8c08\u8d77\uff0c\u6240\u4ee5\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f53\u73b0\u4e86\u4eba\u5de5\u667a\u80fd\u7684\u6700\u9ad8\u4efb\u52a1\u4e0e\u5883\u754c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5f53\u8ba1\u7b97\u673a\u5177\u5907\u4e86\u5904\u7406\u81ea\u7136\u8bed\u8a00\u7684\u80fd\u529b\u65f6\uff0c\u673a\u5668\u624d\u7b97\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u667a\u80fd\u3002 \u4ece\u7814\u7a76\u5185\u5bb9\u6765\u770b\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5305\u62ec\u8bed\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u3001\u7bc7\u7ae0\u7406\u89e3\u7b49\u3002\u4ece\u5e94\u7528\u89d2\u5ea6\u6765\u770b\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5177\u6709\u5e7f\u6cdb\u7684\u5e94\u7528\u524d\u666f\u3002\u7279\u522b\u662f\u5728\u4fe1\u606f\u65f6\u4ee3\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5e94\u7528\u5305\u7f57\u4e07\u8c61\uff0c\u4f8b\u5982\uff1a\u673a\u5668\u7ffb\u8bd1\u3001\u624b\u5199\u4f53\u548c\u5370\u5237\u4f53\u5b57\u7b26\u8bc6\u522b\u3001\u8bed\u97f3\u8bc6\u522b\u53ca\u6587\u8bed\u8f6c\u6362\u3001\u4fe1\u606f\u68c0\u7d22\u3001\u4fe1\u606f\u62bd\u53d6\u4e0e\u8fc7\u6ee4\u3001\u6587\u672c\u5206\u7c7b\u4e0e\u805a\u7c7b\u3001\u8206\u60c5\u5206\u6790\u548c\u89c2\u70b9\u6316\u6398\u7b49\uff0c\u5b83\u6d89\u53ca\u4e0e\u8bed\u8a00\u5904\u7406\u76f8\u5173\u7684\u6570\u636e\u6316\u6398\u3001\u673a\u5668\u5b66\u4e60\u3001\u77e5\u8bc6\u83b7\u53d6\u3001\u77e5\u8bc6\u5de5\u7a0b\u3001\u4eba\u5de5\u667a\u80fd\u7814\u7a76\u548c\u4e0e\u8bed\u8a00\u8ba1\u7b97\u76f8\u5173\u7684\u8bed\u8a00\u5b66\u7814\u7a76\u7b49\u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5174\u8d77\u4e0e\u673a\u5668\u7ffb\u8bd1\u8fd9\u4e00\u5177\u4f53\u4efb\u52a1\u6709\u7740\u5bc6\u5207\u8054\u7cfb\u3002\u673a\u5668\u7ffb\u8bd1\u6307\u7684\u662f\u5229\u7528\u8ba1\u7b97\u673a\u81ea\u52a8\u5730\u5c06\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u7ffb\u8bd1\u4e3a\u53e6\u5916\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u3002\u4f8b\u5982\u81ea\u52a8\u5c06\u82f1\u6587\u201cI like Beijing Tiananmen Square\u201d\u7ffb\u8bd1\u4e3a\u201c\u6211\u7231\u5317\u4eac\u5929\u5b89\u95e8\u201d\uff0c\u6216\u8005\u53cd\u8fc7\u6765\u5c06\u201c\u6211\u7231\u5317\u4eac\u5929\u5b89\u95e8\u201d\u7ffb\u8bd1\u4e3a\u201cI like Beijing Tiananmen Square\u201d\u3002\u7531\u4e8e\u4eba\u5de5\u8fdb\u884c\u7ffb\u8bd1\u9700\u8981\u8bad\u7ec3\u6709\u7d20\u7684\u53cc\u8bed\u4e13\u5bb6\uff0c\u7ffb\u8bd1\u5de5\u4f5c\u975e\u5e38\u8017\u65f6\u8017\u529b\u3002\u66f4\u4e0d\u7528\u8bf4\u9700\u8981\u7ffb\u8bd1\u4e00\u4e9b\u4e13\u4e1a\u9886\u57df\u6587\u732e\u65f6\uff0c\u8fd8\u9700\u8981\u7ffb\u8bd1\u8005\u4e86\u89e3\u8be5\u9886\u57df\u7684\u57fa\u672c\u77e5\u8bc6\u3002\u4e16\u754c\u4e0a\u6709\u8d85\u8fc7\u51e0\u5343\u79cd\u8bed\u8a00\uff0c\u800c\u4ec5\u8054\u5408\u56fd\u7684\u5de5\u4f5c\u8bed\u8a00\u5c31\u6709\u516d\u79cd\u4e4b\u591a\u3002\u5982\u679c\u80fd\u591f\u901a\u8fc7\u673a\u5668\u7ffb\u8bd1\u51c6\u786e\u5730\u8fdb\u884c\u8bed\u8a00\u95f4\u7684\u7ffb\u8bd1\uff0c\u5c06\u5927\u5927\u63d0\u9ad8\u4eba\u7c7b\u6c9f\u901a\u548c\u4e86\u89e3\u7684\u6548\u7387\u3002 \u300a\u5723\u7ecf\u300b\u91cc\u6709\u4e00\u4e2a\u6545\u4e8b\u8bf4\u5df4\u6bd4\u4f26\u4eba\u60f3\u5efa\u9020\u4e00\u5ea7\u5854\u76f4\u901a\u5929\u5802\u3002\u5efa\u5854\u7684\u4eba\u90fd\u8bf4\u7740\u540c\u4e00\u79cd\u8bed\u8a00\uff0c\u5fc3\u610f\u76f8\u901a\u3001\u9f50\u5fc3\u534f\u529b\u3002\u4e0a\u5e1d\u770b\u5230\u4eba\u7c7b\u7adf\u7136\u6562\u505a\u8fd9\u79cd\u4e8b\u60c5\uff0c\u5c31\u8ba9\u4ed6\u4eec\u7684\u8bed\u8a00\u53d8\u5f97\u4e0d\u4e00\u6837\u3002\u56e0\u4e3a\u4eba\u4eec\u542c\u4e0d\u61c2\u5bf9\u65b9\u5728\u8bb2\u4ec0\u4e48\uff0c\u4e8e\u662f\u5927\u5bb6\u6574\u5929\u5435\u5435\u95f9\u95f9\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5efa\u5854\u3002\u540e\u6765\u4eba\u4eec\u628a\u8fd9\u5ea7\u5854\u53eb\u4f5c\u5df4\u522b\u5854\uff0c\u800c\u201c\u5df4\u522b\u201d\u7684\u610f\u601d\u5c31\u662f\u201c\u5206\u6b67\u201d\u3002\u867d\u7136\u5df4\u522b\u5854\u505c\u5efa\u4e86\uff0c\u4f46\u4e00\u4e2a\u68a6\u60f3\u5374\u59cb\u7ec8\u8426\u7ed5\u5728\u4eba\u4eec\u5fc3\u4e2d\uff1a\u4eba\u7c7b\u4ec0\u4e48\u65f6\u5019\u624d\u80fd\u62e5\u6709\u76f8\u901a\u7684\u8bed\u8a00\uff0c\u91cd\u5efa\u5df4\u522b\u5854\u5462\uff1f\u673a\u5668\u7ffb\u8bd1\u88ab\u89c6\u4e3a\u201c\u91cd\u5efa\u5df4\u522b\u5854\u201d\u7684\u4f1f\u5927\u521b\u4e3e\u3002\u5047\u5982\u80fd\u591f\u5b9e\u73b0\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u7684\u673a\u5668\u7ffb\u8bd1\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7406\u89e3\u4e16\u754c\u4e0a\u4efb\u4f55\u4eba\u8bf4\u7684\u8bdd\uff0c\u4e0e\u4ed6\u4eec\u8fdb\u884c\u4ea4\u6d41\u548c\u6c9f\u901a\uff0c\u518d\u4e5f\u4e0d\u5fc5\u4e3a\u76f8\u4e92\u4e0d\u80fd\u7406\u89e3\u800c\u56f0\u6270\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u201c\u4eba\u5de5\u667a\u80fd\u201d\u88ab\u4f5c\u4e3a\u4e00\u4e2a\u7814\u7a76\u95ee\u9898\u6b63\u5f0f\u63d0\u51fa\u6765\u7684\u65f6\u5019\uff0c\u521b\u59cb\u4eba\u628a\u8ba1\u7b97\u673a\u56fd\u9645\u8c61\u68cb\u548c\u673a\u5668\u7ffb\u8bd1\u4f5c\u4e3a\u4e24\u4e2a\u6807\u5fd7\u6027\u7684\u4efb\u52a1\uff0c\u8ba4\u4e3a\u53ea\u8981\u56fd\u9645\u8c61\u68cb\u7cfb\u7edf\u80fd\u591f\u6253\u8d25\u4eba\u7c7b\u4e16\u754c\u51a0\u519b\uff0c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u8fbe\u5230\u4eba\u7c7b\u7ffb\u8bd1\u6c34\u5e73\uff0c\u5c31\u53ef\u4ee5\u5ba3\u544a\u4eba\u5de5\u667a\u80fd\u7684\u80dc\u5229\u3002\u56db\u5341\u5e74\u540e\u76841997\u5e74\uff0cIBM\u516c\u53f8\u7684\u6df1\u84dd\u8d85\u7ea7\u8ba1\u7b97\u673a\u5df2\u7ecf\u80fd\u591f\u6253\u8d25\u56fd\u9645\u8c61\u68cb\u4e16\u754c\u51a0\u519b\u5361\u65af\u5e15\u7f57\u592b\u3002\u800c\u673a\u5668\u7ffb\u8bd1\u5230\u73b0\u5728\u4ecd\u65e0\u6cd5\u4e0e\u4eba\u7c7b\u7ffb\u8bd1\u6c34\u5e73\u76f8\u6bd4\uff0c\u4ece\u6b64\u53ef\u4ee5\u770b\u51fa\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u591a\u4e48\u56f0\u96be\uff01 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u5174\u8d77\u4e8e\u7f8e\u56fd\u3002\u7b2c\u4e8c\u6b21\u4e16\u754c\u5927\u6218\u4e4b\u540e\uff0c\u4e8c\u5341\u4e16\u7eaa\u4e94\u5341\u5e74\u4ee3\uff0c\u5f53\u7535\u5b50\u8ba1\u7b97\u673a\u8fd8\u5728\u8941\u8913\u4e4b\u4e2d\u65f6\uff0c\u5229\u7528\u8ba1\u7b97\u673a\u5904\u7406\u4eba\u7c7b\u8bed\u8a00\u7684\u60f3\u6cd5\u5c31\u5df2\u7ecf\u51fa\u73b0\u3002\u5f53\u65f6\uff0c\u7f8e\u56fd\u5e0c\u671b\u80fd\u591f\u5229\u7528\u8ba1\u7b97\u673a\u5c06\u5927\u91cf\u4fc4\u8bed\u6750\u6599\u81ea\u52a8\u7ffb\u8bd1\u6210\u82f1\u8bed\uff0c\u4ee5\u7aa5\u63a2\u82cf\u8054\u79d1\u6280\u7684\u6700\u65b0\u53d1\u5c55\u3002\u7814\u7a76\u8005\u4ece\u7834\u8bd1\u519b\u4e8b\u5bc6\u7801\u4e2d\u5f97\u5230\u542f\u793a\uff0c\u8ba4\u4e3a\u4e0d\u540c\u7684\u8bed\u8a00\u53ea\u4e0d\u8fc7\u662f\u5bf9\u201c\u540c\u4e00\u8bed\u4e49\u201d\u7684\u4e0d\u540c\u7f16\u7801\u800c\u5df2\uff0c\u4ece\u800c\u60f3\u5f53\u7136\u5730\u8ba4\u4e3a\u53ef\u4ee5\u91c7\u7528\u8bd1\u7801\u6280\u672f\u50cf\u7834\u8bd1\u5bc6\u7801\u4e00\u6837\u201c\u7834\u8bd1\u201d\u8fd9\u4e9b\u8bed\u8a00\u3002 1954\u5e741\u67087\u65e5\uff0c\u7f8e\u56fd\u4e54\u6cbb\u6566\u5927\u5b66\u548cIBM\u516c\u53f8\u5408\u4f5c\u5b9e\u9a8c\u6210\u529f\u5730\u5c06\u8d85\u8fc760\u53e5\u4fc4\u8bed\u81ea\u52a8\u7ffb\u8bd1\u6210\u82f1\u8bed\u3002\u867d\u7136\u5f53\u65f6\u7684\u8fd9\u4e2a\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u975e\u5e38\u7b80\u5355\uff0c\u4ec5\u4ec5\u5305\u542b6\u4e2a\u8bed\u6cd5\u89c4\u5219\u548c250\u4e2a\u8bcd\uff0c\u4f46\u7531\u4e8e\u5a92\u4f53\u7684\u5e7f\u6cdb\u62a5\u9053\uff0c\u7eb7\u7eb7\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u8fdb\u6b65\uff0c\u5bfc\u81f4\u7f8e\u56fd\u653f\u5e9c\u5907\u53d7\u9f13\u821e\uff0c\u52a0\u5927\u4e86\u5bf9\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7814\u7a76\u7684\u6295\u8d44\u3002\u5b9e\u9a8c\u5b8c\u6210\u8005\u4e5f\u5f53\u5373\u81ea\u4fe1\u5730\u64b0\u6587\u79f0\uff0c\u5728\u4e09\u5230\u4e94\u5e74\u4e4b\u5185\u5c31\u80fd\u591f\u5b8c\u5168\u89e3\u51b3\u4ece\u4e00\u79cd\u8bed\u8a00\u5230\u53e6\u4e00\u79cd\u8bed\u8a00\u7684\u81ea\u52a8\u7ffb\u8bd1\u95ee\u9898\u3002\u4ed6\u4eec\u8ba4\u4e3a\u53ea\u8981\u5236\u5b9a\u597d\u5404\u79cd\u7ffb\u8bd1\u89c4\u5219\uff0c\u901a\u8fc7\u5927\u91cf\u89c4\u5219\u7684\u5806\u780c\u5c31\u80fd\u591f\u5b8c\u7f8e\u5730\u5b9e\u73b0\u8bed\u8a00\u95f4\u7684\u81ea\u52a8\u7ffb\u8bd1\u3002 \u7136\u800c\uff0c\u4e8b\u5b9e\u662f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u8fdc\u6bd4\u7834\u8bd1\u5bc6\u7801\u8981\u590d\u6742\u5f97\u591a\uff0c\u56e0\u6b64\u7814\u7a76\u8fdb\u5c55\u975e\u5e38\u7f13\u6162\u30021966\u5e74\u7684\u4e00\u4efd\u7814\u7a76\u62a5\u544a\u603b\u7ed3\u53d1\u73b0\uff0c\u7ecf\u8fc7\u5341\u5e74\u4e4b\u4e45\u7684\u7814\u7a76\uff0c\u7ed3\u679c\u8fdc\u8fdc\u672a\u80fd\u8fbe\u5230\u9884\u671f\uff0c\u56e0\u6b64\u652f\u6301\u8d44\u91d1\u6025\u5267\u4e0b\u964d\uff0c\u4f7f\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08\u7279\u522b\u662f\u673a\u5668\u7ffb\u8bd1\uff09\u7684\u7814\u7a76\u9677\u5165\u957f\u8fbe\u4e8c\u5341\u5e74\u7684\u4f4e\u6f6e\u3002\u76f4\u5230\u4e8c\u5341\u4e16\u7eaa\u516b\u5341\u5e74\u4ee3\uff0c\u968f\u7740\u7535\u5b50\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u80fd\u529b\u7684\u98de\u901f\u63d0\u9ad8\u548c\u5236\u9020\u6210\u672c\u7684\u5927\u5e45\u4e0b\u964d\uff0c\u7814\u7a76\u8005\u53c8\u5f00\u59cb\u91cd\u65b0\u5173\u6ce8\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8fd9\u4e2a\u6781\u5bcc\u6311\u6218\u7684\u7814\u7a76\u9886\u57df\u3002\u4e09\u5341\u5e74\u6ca7\u6d77\u6851\u7530\uff0c\u6b64\u65f6\u7814\u7a76\u8005\u5df2\u7ecf\u8ba4\u8bc6\u5230\u7b80\u5355\u7684\u8bed\u8a00\u89c4\u5219\u7684\u5806\u780c\u65e0\u6cd5\u5b9e\u73b0\u5bf9\u4eba\u7c7b\u8bed\u8a00\u7684\u771f\u6b63\u7406\u89e3\u3002\u7814\u7a76\u53d1\u73b0\uff0c\u901a\u8fc7\u5bf9\u5927\u91cf\u7684\u6587\u672c\u6570\u636e\u7684\u81ea\u52a8\u5b66\u4e60\u548c\u7edf\u8ba1\uff0c\u80fd\u591f\u66f4\u597d\u5730\u89e3\u51b3\u81ea\u7136\u8bed\u8a00\u5904\u7406\u95ee\u9898\uff0c\u5982\u8bed\u8a00\u7684\u81ea\u52a8\u7ffb\u8bd1\u3002\u8fd9\u4e00\u601d\u60f3\u88ab\u79f0\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u7edf\u8ba1\u5b66\u4e60\u6a21\u578b\uff0c\u81f3\u4eca\u65b9\u5174\u672a\u827e\u3002 \u90a3\u4e48\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5230\u5e95\u5b58\u5728\u54ea\u4e9b\u4e3b\u8981\u56f0\u96be\u6216\u6311\u6218\uff0c\u5438\u5f15\u90a3\u4e48\u591a\u7814\u7a76\u8005\u51e0\u5341\u5e74\u5982\u4e00\u65e5\u5b5c\u5b5c\u4e0d\u5026\u5730\u63a2\u7d22\u89e3\u51b3\u4e4b\u9053\u5462\uff1f","title":"\u4ec0\u4e48\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_3","text":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u56f0\u96be\u53ef\u4ee5\u7f57\u5217\u51fa\u6765\u5f88\u591a\uff0c\u4e0d\u8fc7\u5173\u952e\u5728\u4e8e\u6d88\u9664\u6b67\u4e49\u95ee\u9898\uff0c\u5982\u8bcd\u6cd5\u5206\u6790\u3001\u53e5\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u7b49\u8fc7\u7a0b\u4e2d\u5b58\u5728\u7684\u6b67\u4e49\u95ee\u9898\uff0c\u7b80\u79f0\u4e3a\u6d88\u6b67\u3002\u800c\u6b63\u786e\u7684\u6d88\u6b67\u9700\u8981\u5927\u91cf\u7684\u77e5\u8bc6\uff0c\u5305\u62ec\u8bed\u8a00\u5b66\u77e5\u8bc6\uff08\u5982\u8bcd\u6cd5\u3001\u53e5\u6cd5\u3001\u8bed\u4e49\u3001\u4e0a\u4e0b\u6587\u7b49\uff09\u548c\u4e16\u754c\u77e5\u8bc6\uff08\u4e0e\u8bed\u8a00\u65e0\u5173\uff09\u3002\u8fd9\u5e26\u6765\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e24\u4e2a\u4e3b\u8981\u56f0\u96be\u3002 \u9996\u5148\uff0c\u8bed\u8a00\u4e2d\u5145\u6ee1\u4e86\u5927\u91cf\u7684\u6b67\u4e49\uff0c\u8fd9\u4e3b\u8981\u4f53\u73b0\u5728\u8bcd\u6cd5\u3001\u53e5\u6cd5\u53ca\u8bed\u4e49\u4e09\u4e2a\u5c42\u6b21\u4e0a\u3002\u6b67\u4e49\u7684\u4ea7\u751f\u662f\u7531\u4e8e\u81ea\u7136\u8bed\u8a00\u6240\u63cf\u8ff0\u7684\u5bf9\u8c61\u2015\u2015\u4eba\u7c7b\u6d3b\u52a8\u975e\u5e38\u590d\u6742\uff0c\u800c\u8bed\u8a00\u7684\u8bcd\u6c47\u548c\u53e5\u6cd5\u89c4\u5219\u53c8\u662f\u6709\u9650\u7684\uff0c\u8fd9\u5c31\u9020\u6210\u540c\u4e00\u79cd\u8bed\u8a00\u5f62\u5f0f\u53ef\u80fd\u5177\u6709\u591a\u79cd\u542b\u4e49\u3002 \u4f8b\u5982\u5355\u8bcd\u5b9a\u754c\u95ee\u9898\u662f\u5c5e\u4e8e\u8bcd\u6cd5\u5c42\u9762\u7684\u6d88\u6b67\u4efb\u52a1\u3002\u5728\u53e3\u8bed\u4e2d\uff0c\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u901a\u5e38\u662f\u8fde\u8d2f\u8bf4\u51fa\u6765\u7684\u3002\u5728\u4e66\u9762\u8bed\u4e2d\uff0c\u4e2d\u6587\u7b49\u8bed\u8a00\u4e5f\u6ca1\u6709\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7684\u8fb9\u754c\u3002\u7531\u4e8e\u5355\u8bcd\u662f\u627f\u8f7d\u8bed\u4e49\u7684\u6700\u5c0f\u5355\u5143\uff0c\u8981\u89e3\u51b3\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u5355\u8bcd\u7684\u8fb9\u754c\u754c\u5b9a\u95ee\u9898\u9996\u5f53\u5176\u51b2\u3002\u7279\u522b\u662f\u4e2d\u6587\u6587\u672c\u901a\u5e38\u7531\u8fde\u7eed\u7684\u5b57\u5e8f\u5217\u7ec4\u6210\uff0c\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u7f3a\u5c11\u5929\u7136\u7684\u5206\u9694\u7b26\uff0c\u56e0\u6b64\u4e2d\u6587\u4fe1\u606f\u5904\u7406\u6bd4\u82f1\u6587\u7b49\u897f\u65b9\u8bed\u8a00\u591a\u4e00\u6b65\u5de5\u5e8f\uff0c\u5373\u786e\u5b9a\u8bcd\u7684\u8fb9\u754c\uff0c\u6211\u4eec\u79f0\u4e3a\u201c\u4e2d\u6587\u81ea\u52a8\u5206\u8bcd\u201d\u4efb\u52a1\u3002\u901a\u4fd7\u7684\u8bf4\u5c31\u662f\u8981\u7531\u8ba1\u7b97\u673a\u5728\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u81ea\u52a8\u52a0\u4e0a\u5206\u9694\u7b26\uff0c\u4ece\u800c\u5c06\u4e2d\u6587\u6587\u672c\u5207\u5206\u4e3a\u72ec\u7acb\u7684\u5355\u8bcd\u3002\u4f8b\u5982\u4e00\u4e2a\u53e5\u5b50\u201c\u4eca\u5929\u5929\u6c14\u6674\u6717\u201d\u7684\u5e26\u6709\u5206\u9694\u7b26\u7684\u5207\u5206\u6587\u672c\u662f\u201c\u4eca\u5929|\u5929\u6c14|\u6674\u6717\u201d\u3002\u4e2d\u6587\u81ea\u52a8\u5206\u8bcd\u5904\u4e8e\u4e2d\u6587\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5e95\u5c42\uff0c\u662f\u516c\u8ba4\u7684\u4e2d\u6587\u4fe1\u606f\u5904\u7406\u7684\u7b2c\u4e00\u9053\u5de5\u5e8f\uff0c\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\uff0c\u4e3b\u8981\u5b58\u5728\u65b0\u8bcd\u53d1\u73b0\u548c\u6b67\u4e49\u5207\u5206\u7b49\u95ee\u9898\u3002\u6211\u4eec\u6ce8\u610f\u5230\uff1a\u6b63\u786e\u7684\u5355\u8bcd\u5207\u5206\u53d6\u51b3\u4e8e\u5bf9\u6587\u672c\u8bed\u4e49\u7684\u6b63\u786e\u7406\u89e3\uff0c\u800c\u5355\u8bcd\u5207\u5206\u53c8\u662f\u7406\u89e3\u8bed\u8a00\u7684\u6700\u521d\u7684\u4e00\u9053\u5de5\u5e8f\u3002\u8fd9\u6837\u7684\u4e00\u4e2a\u201c\u9e21\u751f\u86cb\u3001\u86cb\u751f\u9e21\u201d\u7684\u95ee\u9898\u81ea\u7136\u6210\u4e86\uff08\u4e2d\u6587\uff09\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u7b2c\u4e00\u6761\u62e6\u8def\u864e\u3002 \u5176\u4ed6\u7ea7\u522b\u7684\u8bed\u8a00\u5355\u4f4d\u4e5f\u5b58\u5728\u7740\u5404\u79cd\u6b67\u4e49\u95ee\u9898\u3002\u4f8b\u5982\u5728\u77ed\u8bed\u7ea7\u522b\u4e0a\uff0c\u201c\u8fdb\u53e3\u5f69\u7535\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u52a8\u5bbe\u5173\u7cfb\uff08\u4ece\u56fd\u5916\u8fdb\u53e3\u4e86\u4e00\u6279\u5f69\u7535\uff09\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u504f\u6b63\u5173\u7cfb\uff08\u4ece\u56fd\u5916\u8fdb\u53e3\u7684\u5f69\u7535\uff09\u3002\u53c8\u5982\u5728\u53e5\u5b50\u7ea7\u522b\u4e0a\uff0c\u201c\u505a\u624b\u672f\u7684\u662f\u5979\u7684\u7236\u4eb2\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u5979\u7236\u4eb2\u751f\u75c5\u4e86\u9700\u8981\u505a\u624b\u672f\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u5979\u7236\u4eb2\u662f\u533b\u751f\uff0c\u5e2e\u522b\u4eba\u505a\u624b\u672f\u3002\u603b\u4e4b\uff0c\u540c\u6837\u4e00\u4e2a\u5355\u8bcd\u3001\u77ed\u8bed\u6216\u8005\u53e5\u5b50\u6709\u591a\u79cd\u53ef\u80fd\u7684\u7406\u89e3\uff0c\u8868\u793a\u591a\u79cd\u53ef\u80fd\u7684\u8bed\u4e49\u3002\u5982\u679c\u4e0d\u80fd\u89e3\u51b3\u597d\u5404\u7ea7\u8bed\u8a00\u5355\u4f4d\u7684\u6b67\u4e49\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u65e0\u6cd5\u6b63\u786e\u7406\u89e3\u8bed\u8a00\u8981\u8868\u8fbe\u7684\u610f\u601d\u3002 \u53e6\u5916\u4e00\u4e2a\u65b9\u9762\uff0c\u6d88\u9664\u6b67\u4e49\u6240\u9700\u8981\u7684\u77e5\u8bc6\u5728\u83b7\u53d6\u3001\u8868\u8fbe\u4ee5\u53ca\u8fd0\u7528\u4e0a\u5b58\u5728\u56f0\u96be\u3002\u7531\u4e8e\u8bed\u8a00\u5904\u7406\u7684\u590d\u6742\u6027\uff0c\u5408\u9002\u7684\u8bed\u8a00\u5904\u7406\u65b9\u6cd5\u548c\u6a21\u578b\u96be\u4ee5\u8bbe\u8ba1\u3002 \u4f8b\u5982\u4e0a\u4e0b\u6587\u77e5\u8bc6\u7684\u83b7\u53d6\u95ee\u9898\u3002\u5728\u8bd5\u56fe\u7406\u89e3\u4e00\u53e5\u8bdd\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u4e0d\u5b58\u5728\u6b67\u4e49\u95ee\u9898\uff0c\u6211\u4eec\u4e5f\u5f80\u5f80\u9700\u8981\u8003\u8651\u4e0a\u4e0b\u6587\u7684\u5f71\u54cd\u3002\u6240\u8c13\u7684\u201c\u4e0a\u4e0b\u6587\u201d\u6307\u7684\u662f\u5f53\u524d\u6240\u8bf4\u8fd9\u53e5\u8bdd\u6240\u5904\u7684\u8bed\u8a00\u73af\u5883\uff0c\u4f8b\u5982\u8bf4\u8bdd\u4eba\u6240\u5904\u7684\u73af\u5883\uff0c\u6216\u8005\u662f\u8fd9\u53e5\u8bdd\u7684\u524d\u51e0\u53e5\u8bdd\u6216\u8005\u540e\u51e0\u53e5\u8bdd\uff0c\u7b49\u7b49\u3002\u5047\u5982\u5f53\u524d\u8fd9\u53e5\u8bdd\u4e2d\u5b58\u5728\u6307\u4ee3\u8bcd\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u8fd9\u53e5\u8bdd\u524d\u9762\u7684\u53e5\u5b50\u6765\u63a8\u65ad\u8fd9\u4e2a\u6307\u4ee3\u8bcd\u662f\u6307\u7684\u4ec0\u4e48\u3002\u6211\u4eec\u4ee5\u201c\u5c0f\u660e\u6b3a\u8d1f\u5c0f\u4eae\uff0c\u56e0\u6b64\u6211\u6279\u8bc4\u4e86\u4ed6\u201d\u4e3a\u4f8b\u3002\u5728\u5176\u4e2d\u7684\u7b2c\u4e8c\u53e5\u8bdd\u4e2d\u7684\u201c\u4ed6\u201d\u662f\u6307\u4ee3\u201c\u5c0f\u660e\u201d\u8fd8\u662f\u201c\u5c0f\u4eae\u201d\u5462\uff1f\u8981\u6b63\u786e\u7406\u89e3\u8fd9\u53e5\u8bdd\uff0c\u6211\u4eec\u5c31\u8981\u7406\u89e3\u4e0a\u53e5\u8bdd\u201c\u5c0f\u660e\u6b3a\u8d1f\u5c0f\u4eae\u201d\u610f\u5473\u7740\u201c\u5c0f\u660e\u201d\u505a\u5f97\u4e0d\u5bf9\uff0c\u56e0\u6b64\u7b2c\u4e8c\u53e5\u4e2d\u7684\u201c\u4ed6\u201d\u5e94\u5f53\u6307\u4ee3\u7684\u662f\u201c\u5c0f\u660e\u201d\u3002\u7531\u4e8e\u4e0a\u4e0b\u6587\u5bf9\u4e8e\u5f53\u524d\u53e5\u5b50\u7684\u6697\u793a\u5f62\u5f0f\u662f\u591a\u79cd\u591a\u6837\u7684\uff0c\u56e0\u6b64\u5982\u4f55\u8003\u8651\u4e0a\u4e0b\u6587\u5f71\u54cd\u95ee\u9898\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u4e3b\u8981\u56f0\u96be\u4e4b\u4e00\u3002 \u518d\u5982\u80cc\u666f\u77e5\u8bc6\u95ee\u9898\u3002 \u6b63\u786e\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u8fd8\u8981\u6709\u8db3\u591f\u7684\u80cc\u666f\u77e5\u8bc6\u3002\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5728\u673a\u5668\u7ffb\u8bd1\u7814\u7a76\u7684\u521d\u671f\uff0c\u4eba\u4eec\u7ecf\u5e38\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u673a\u5668\u7ffb\u8bd1\u4efb\u52a1\u7684\u8270\u5de8\u6027\u3002\u5728\u82f1\u8bed\u4e2d\u201cThe spirit is willing but the flesh is weak.\u201d\uff0c\u610f\u601d\u662f\u201c\u5fc3\u6709\u4f59\u800c\u529b\u4e0d\u8db3\u201d\u3002\u4f46\u662f\u5f53\u65f6\u7684\u67d0\u4e2a\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5c06\u8fd9\u53e5\u82f1\u6587\u7ffb\u8bd1\u5230\u4fc4\u8bed\uff0c\u7136\u540e\u518d\u7ffb\u8bd1\u56de\u82f1\u8bed\u7684\u65f6\u5019\uff0c\u5374\u53d8\u6210\u4e86\u201cThe Voltka is strong but the meat is rotten.\u201d\uff0c\u610f\u601d\u662f\u201c\u4f0f\u7279\u52a0\u9152\u662f\u6d53\u7684\uff0c\u4f46\u8089\u5374\u8150\u70c2\u4e86\u201d\u3002\u4ece\u5b57\u9762\u610f\u4e49\u4e0a\u770b\uff0c\u201cspirit\u201d\uff08\u70c8\u6027\u9152\uff09\u4e0e\u201cVoltka\u201d\uff08\u4f0f\u7279\u52a0\uff09\u5bf9\u8bd1\u4f3c\u65e0\u95ee\u9898\uff0c\u800c\u201cflesh\u201d\u548c\u201cmeat\u201d\u4e5f\u90fd\u6709\u8089\u7684\u610f\u601d\u3002\u90a3\u4e48\u8fd9\u4e24\u53e5\u8bdd\u5728\u610f\u4e49\u4e0a\u4e3a\u4ec0\u4e48\u4f1a\u5357\u8f95\u5317\u8f99\u5462\uff1f\u5173\u952e\u7684\u95ee\u9898\u5c31\u5728\u4e8e\u5728\u7ffb\u8bd1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u673a\u5668\u7ffb\u8bd1\u7cfb\u7edf\u5bf9\u4e8e\u82f1\u8bed\u6210\u8bed\u5e76\u65e0\u4e86\u89e3\uff0c\u4ec5\u4ec5\u662f\u4ece\u5b57\u9762\u4e0a\u8fdb\u884c\u7ffb\u8bd1\uff0c\u7ed3\u679c\u81ea\u7136\u5931\u4e4b\u6beb\u5398\uff0c\u5dee\u4e4b\u5343\u91cc\u3002 \u4ece\u4e0a\u9762\u7684\u4e24\u4e2a\u65b9\u9762\u7684\u4e3b\u8981\u56f0\u96be\uff0c\u6211\u4eec\u770b\u5230\u81ea\u7136\u8bed\u8a00\u5904\u7406\u8fd9\u4e2a\u96be\u9898\u7684\u6839\u6e90\u5c31\u662f\u4eba\u7c7b\u8bed\u8a00\u7684\u590d\u6742\u6027\u548c\u8bed\u8a00\u63cf\u8ff0\u7684\u5916\u90e8\u4e16\u754c\u7684\u590d\u6742\u6027\u3002\u4eba\u7c7b\u8bed\u8a00\u627f\u62c5\u7740\u4eba\u7c7b\u8868\u8fbe\u60c5\u611f\u3001\u4ea4\u6d41\u601d\u60f3\u3001\u4f20\u64ad\u77e5\u8bc6\u7b49\u91cd\u8981\u529f\u80fd\uff0c\u56e0\u6b64\u9700\u8981\u5177\u5907\u5f3a\u5927\u7684\u7075\u6d3b\u6027\u548c\u8868\u8fbe\u80fd\u529b\uff0c\u800c\u7406\u89e3\u8bed\u8a00\u6240\u9700\u8981\u7684\u77e5\u8bc6\u53c8\u662f\u65e0\u6b62\u5883\u7684\u3002\u90a3\u4e48\u76ee\u524d\u4eba\u4eec\u662f\u5982\u4f55\u5c1d\u8bd5\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u5462\uff1f","title":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u56f0\u96be"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_4","text":"\u76ee\u524d\uff0c\u4eba\u4eec\u4e3b\u8981\u901a\u8fc7\u4e24\u79cd\u601d\u8def\u6765\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\uff0c\u53e6\u5916\u4e00\u79cd\u662f\u57fa\u4e8e\u7edf\u8ba1\u7684\u7ecf\u9a8c\u4e3b\u4e49\u3002\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u8ba4\u4e3a\uff0c\u4eba\u7c7b\u8bed\u8a00\u4e3b\u8981\u662f\u7531\u8bed\u8a00\u89c4\u5219\u6765\u4ea7\u751f\u548c\u63cf\u8ff0\u7684\uff0c\u56e0\u6b64\u53ea\u8981\u80fd\u591f\u7528\u9002\u5f53\u7684\u5f62\u5f0f\u5c06\u4eba\u7c7b\u8bed\u8a00\u89c4\u5219\u8868\u793a\u51fa\u6765\uff0c\u5c31\u80fd\u591f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\uff0c\u5e76\u5b9e\u73b0\u8bed\u8a00\u4e4b\u95f4\u7684\u7ffb\u8bd1\u7b49\u5404\u79cd\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u3002\u800c\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u5219\u8ba4\u4e3a\uff0c\u4ece\u8bed\u8a00\u6570\u636e\u4e2d\u83b7\u53d6\u8bed\u8a00\u7edf\u8ba1\u77e5\u8bc6\uff0c\u6709\u6548\u5efa\u7acb\u8bed\u8a00\u7684\u7edf\u8ba1\u6a21\u578b\u3002\u56e0\u6b64\u53ea\u8981\u80fd\u591f\u6709\u8db3\u591f\u591a\u7684\u7528\u4e8e\u7edf\u8ba1\u7684\u8bed\u8a00\u6570\u636e\uff0c\u5c31\u80fd\u591f\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u3002\u7136\u800c\uff0c\u5f53\u9762\u5bf9\u73b0\u5b9e\u4e16\u754c\u5145\u6ee1\u6a21\u7cca\u4e0e\u4e0d\u786e\u5b9a\u6027\u65f6\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u9762\u4e34\u7740\u5404\u81ea\u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u4eba\u7c7b\u8bed\u8a00\u867d\u7136\u6709\u4e00\u5b9a\u7684\u89c4\u5219\uff0c\u4f46\u662f\u5728\u771f\u5b9e\u4f7f\u7528\u4e2d\u5f80\u5f80\u4f34\u968f\u5927\u91cf\u7684\u566a\u97f3\u548c\u4e0d\u89c4\u8303\u6027\u3002\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u7684\u4e00\u5927\u5f31\u70b9\u5c31\u662f\u9c81\u68d2\u6027\u5dee\uff0c\u53ea\u8981\u4e0e\u89c4\u5219\u7a0d\u6709\u504f\u79bb\u4fbf\u65e0\u6cd5\u5904\u7406\u3002\u800c\u5bf9\u4e8e\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u800c\u8a00\uff0c\u53c8\u4e0d\u80fd\u65e0\u9650\u5730\u83b7\u53d6\u8bed\u8a00\u6570\u636e\u8fdb\u884c\u7edf\u8ba1\u5b66\u4e60\uff0c\u56e0\u6b64\u4e5f\u4e0d\u80fd\u591f\u5b8c\u7f8e\u5730\u7406\u89e3\u4eba\u7c7b\u8bed\u8a00\u3002\u4e8c\u5341\u4e16\u7eaa\u516b\u5341\u5e74\u4ee3\u4ee5\u6765\u7684\u8d8b\u52bf\u5c31\u662f\uff0c\u57fa\u4e8e\u8bed\u8a00\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u4e0d\u65ad\u53d7\u5230\u8d28\u7591\uff0c\u5927\u89c4\u6a21\u8bed\u8a00\u6570\u636e\u5904\u7406\u6210\u4e3a\u76ee\u524d\u548c\u672a\u6765\u4e00\u6bb5\u65f6\u671f\u5185\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u7814\u7a76\u76ee\u6807\u3002\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u8d8a\u6765\u8d8a\u53d7\u5230\u91cd\u89c6\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u8d8a\u6765\u8d8a\u591a\u5730\u4f7f\u7528\u673a\u5668\u81ea\u52a8\u5b66\u4e60\u7684\u65b9\u6cd5\u6765\u83b7\u53d6\u8bed\u8a00\u77e5\u8bc6\u3002 \u8fc8\u8fdb21\u4e16\u7eaa\uff0c\u6211\u4eec\u5df2\u7ecf\u8fdb\u5165\u4e86\u4ee5\u4e92\u8054\u7f51\u4e3a\u4e3b\u8981\u6807\u5fd7\u7684\u6d77\u91cf\u4fe1\u606f\u65f6\u4ee3\uff0c\u8fd9\u4e9b\u6d77\u91cf\u4fe1\u606f\u5927\u90e8\u5206\u662f\u4ee5\u81ea\u7136\u8bed\u8a00\u8868\u793a\u7684\u3002\u4e00\u65b9\u9762\uff0c\u6d77\u91cf\u4fe1\u606f\u4e5f\u4e3a\u8ba1\u7b97\u673a\u5b66\u4e60\u4eba\u7c7b\u8bed\u8a00\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u201c\u7d20\u6750\u201d\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4e5f\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u63d0\u4f9b\u4e86\u66f4\u52a0\u5bbd\u5e7f\u7684\u5e94\u7528\u821e\u53f0\u3002\u4f8b\u5982\uff0c\u4f5c\u4e3a\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u91cd\u8981\u5e94\u7528\uff0c\u641c\u7d22\u5f15\u64ce\u9010\u6e10\u6210\u4e3a\u4eba\u4eec\u83b7\u53d6\u4fe1\u606f\u7684\u91cd\u8981\u5de5\u5177\uff0c\u6d8c\u73b0\u51fa\u4ee5\u767e\u5ea6\u3001\u8c37\u6b4c\u7b49\u4e3a\u4ee3\u8868\u7684\u641c\u7d22\u5f15\u64ce\u5de8\u5934\uff1b\u673a\u5668\u7ffb\u8bd1\u4e5f\u4ece\u5b9e\u9a8c\u5ba4\u8d70\u5165\u5bfb\u5e38\u767e\u59d3\u5bb6\uff0c\u8c37\u6b4c\u3001\u767e\u5ea6\u7b49\u516c\u53f8\u90fd\u63d0\u4f9b\u4e86\u57fa\u4e8e\u6d77\u91cf\u7f51\u7edc\u6570\u636e\u7684\u673a\u5668\u7ffb\u8bd1\u548c\u8f85\u52a9\u7ffb\u8bd1\u5de5\u5177\uff1b\u57fa\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e2d\u6587\uff08\u8f93\u5165\u6cd5\u5982\u641c\u72d7\u3001\u5fae\u8f6f\u3001\u8c37\u6b4c\u7b49\u8f93\u5165\u6cd5\uff09\u6210\u4e3a\u8ba1\u7b97\u673a\u7528\u6237\u7684\u5fc5\u5907\u5de5\u5177\uff1b\u5e26\u6709\u8bed\u97f3\u8bc6\u522b\u7684\u8ba1\u7b97\u673a\u548c\u624b\u673a\u4e5f\u6b63\u5927\u884c\u5176\u9053\uff0c\u534f\u52a9\u7528\u6237\u66f4\u6709\u6548\u5730\u5de5\u4f5c\u5b66\u4e60\u3002\u603b\u4e4b\uff0c\u968f\u7740\u4e92\u8054\u7f51\u7684\u666e\u53ca\u548c\u6d77\u91cf\u4fe1\u606f\u7684\u6d8c\u73b0\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6b63\u5728\u4eba\u4eec\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\u626e\u6f14\u7740\u8d8a\u6765\u8d8a\u91cd\u8981\u7684\u4f5c\u7528\u3002\u7136\u800c\uff0c\u9762\u5411\u6d77\u91cf\u7684\u5927\u89c4\u6a21\u6587\u672c\u6570\u636e\uff0c\u4eba\u4eec\u9762\u4e34\u7684\u4e00\u4e2a\u4e25\u5cfb\u4e8b\u5b9e\u662f\uff0c\u5982\u4f55\u6709\u6548\u5229\u7528\u6d77\u91cf\u4fe1\u606f\uff0c\u4eba\u4eec\u9010\u6e10\u610f\u8bc6\u5230\uff0c\u5355\u7eaf\u4f9d\u9760\u7edf\u8ba1\u65b9\u6cd5\u5df2\u7ecf\u65e0\u6cd5\u5feb\u901f\u6709\u6548\u5730\u4ece\u6d77\u91cf\u6570\u636e\u4e2d\u5b66\u4e60\u8bed\u8a00\u77e5\u8bc6\u3002 \u968f\u77402013\u5e74word2vec\u6280\u672f\u7684\u53d1\u8868\uff0c\u4ee5\u795e\u7ecf\u7f51\u7edc\u4e3a\u57fa\u7840\u7684\u6df1\u5ea6\u5b66\u4e60\u6280\u672f\u5f00\u59cb\u5728\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u5e7f\u6cdb\u4f7f\u7528\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u5206\u5e03\u5f0f\u8bed\u4e49\u8868\u793a\u548c\u591a\u5c42\u7f51\u7edc\u67b6\u6784\u5177\u6709\u5f3a\u5927\u7684\u62df\u5408\u548c\u5b66\u4e60\u80fd\u529b\uff0c\u663e\u8457\u63d0\u5347\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5404\u79cd\u4efb\u52a1\u7684\u6027\u80fd\uff0c\u6210\u4e3a\u73b0\u9636\u6bb5\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u4e3b\u8981\u6280\u672f\u65b9\u6848\u3002 \u6df1\u5ea6\u5b66\u4e60\u662f\u7eaf\u7684\u6570\u636e\u9a71\u52a8\u6280\u672f\u65b9\u6848\uff0c\u9700\u8981\u4ece\u5927\u89c4\u6a21\u6807\u6ce8\u6570\u636e\u4e2d\u5b66\u4e60\u7279\u5b9a\u4efb\u52a1\u76f8\u5173\u7684\u590d\u6742\u6a21\u5f0f\u3002\u4e00\u65b9\u9762\uff0c\u6709\u4e9b\u5b66\u8005\u5f00\u59cb\u63a2\u7d22\u9762\u5411\u5927\u89c4\u6a21\u65e0\u6807\u6ce8\u6587\u672c\u6570\u636e\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u5982ELMo\uff0cGPT\u3001BERT\u7b49\uff0c\u53ef\u4ee5\u770b\u505a\u4ece\u5927\u89c4\u6a21\u6570\u636e\u4e2d\u5b66\u4e60\u77e5\u8bc6\u7684\u6781\u81f4\u63a2\u7d22\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u73b0\u6709\u6df1\u5ea6\u5b66\u4e60\u6280\u672f\u5c1a\u672a\u8003\u8651\u4eba\u7c7b\u79ef\u7d2f\u7684\u4e30\u5bcc\u77e5\u8bc6\uff08\u5305\u62ec\u8bed\u8a00\u77e5\u8bc6\u3001\u4e16\u754c\u77e5\u8bc6\u3001\u5e38\u8bc6\u77e5\u8bc6\u3001\u8ba4\u77e5\u77e5\u8bc6\u3001\u884c\u4e1a\u77e5\u8bc6\u7b49\uff09\uff0c\u5982\u679c\u5c06\u6df1\u5ea6\u5b66\u4e60\u770b\u505a\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\uff0c\u5c06\u7b26\u53f7\u77e5\u8bc6\u770b\u505a\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\uff0c\u90a3\u4e48\u5982\u4f55\u5145\u5206\u53d1\u6325\u57fa\u4e8e\u89c4\u5219\u7684\u7406\u6027\u4e3b\u4e49\u65b9\u6cd5\u548c\u57fa\u4e8e\u7edf\u8ba1\u7684\u7ecf\u9a8c\u4e3b\u4e49\u65b9\u6cd5\u7684\u4f18\u52bf\uff0c\u4e24\u8005\u4e92\u76f8\u8865\u5145\uff0c\u66f4\u597d\u3001\u66f4\u5feb\u5730\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff0c\u4ecd\u7136\u662f\u6211\u4eec\u9700\u8981\u63a2\u7d22\u7684\u91cd\u8981\u8bfe\u9898\u3002 \u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f5c\u4e3a\u4e00\u4e2a\u5e74\u9f84\u5c1a\u4e0d\u8db3\u4e00\u4e2a\u4e16\u7eaa\u7684\u65b0\u5174\u5b66\u79d1\uff0c\u6b63\u5728\u8fdb\u884c\u7740\u7a81\u98de\u731b\u8fdb\u7684\u53d1\u5c55\u3002\u56de\u987e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u5386\u7a0b\uff0c\u5e76\u4e0d\u662f\u4e00\u5e06\u98ce\u987a\uff0c\u6709\u8fc7\u4f4e\u8c37\uff0c\u4e5f\u6709\u8fc7\u9ad8\u6f6e\u3002\u800c\u73b0\u5728\u6211\u4eec\u6b63\u9762\u4e34\u7740\u65b0\u7684\u6311\u6218\u548c\u673a\u9047\u3002\u4f8b\u5982\uff0c\u76ee\u524d\u7f51\u7edc\u641c\u7d22\u5f15\u64ce\u57fa\u672c\u4e0a\u8fd8\u505c\u7559\u5728\u5173\u952e\u8bcd\u5339\u914d\uff0c\u7f3a\u4e4f\u6df1\u5c42\u6b21\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u548c\u7406\u89e3\u3002\u8bed\u97f3\u8bc6\u522b\u3001\u6587\u5b57\u8bc6\u522b\u3001\u95ee\u7b54\u7cfb\u7edf\u3001\u673a\u5668\u7ffb\u8bd1\u7b49\u76ee\u524d\u4e5f\u53ea\u80fd\u8fbe\u5230\u5f88\u57fa\u672c\u7684\u6c34\u5e73\u3002\u8def\u6f2b\u6f2b\u5176\u4fee\u8fdc\u516e\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4f5c\u4e3a\u4e00\u4e2a\u9ad8\u5ea6\u4ea4\u53c9\u7684\u65b0\u5174\u5b66\u79d1\uff0c\u4e0d\u8bba\u662f\u63a2\u7a76\u81ea\u7136\u672c\u8d28\u8fd8\u662f\u4ed8\u8bf8\u5b9e\u9645\u5e94\u7528\uff0c\u5728\u5c06\u6765\u5fc5\u5b9a\u4f1a\u6709\u4ee4\u4eba\u671f\u5f85\u7684\u60ca\u559c\u548c\u5f02\u5e38\u5feb\u901f\u7684\u53d1\u5c55\u3002","title":"\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u53d1\u5c55\u8d8b\u52bf"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_5","text":"\u4ece\u56fe\u50cf\u548c\u8bed\u8a00\u4e24\u79cd\u6a21\u6001\u6765\u770b\uff0c\u5bf9\u6587\u672c\u5904\u7406\u6280\u672f\u7684\u5927\u89c4\u6a21\u5e94\u7528\u8981\u65e9\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9\u3002\u5c06\u56fe\u50cf\u548c\u8bed\u8a00\u4e2d\u7684\u5904\u7406\u5bf9\u8c61\u505a\u4e00\u4e2a\u4e0d\u592a\u4e25\u8c28\u7684\u5bf9\u5e94\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5927\u4f53\u4e0a\u50cf\u7d20\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u5b57\u6bcd\uff1b\u56fe\u50cf\u4e2d\u7684\u5bf9\u8c61\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u5355\u8bcd/\u6982\u5ff5\uff1b\u56fe\u50cf\u4e2d\u5bf9\u8c61\u7ec4\u6210\u7684\u573a\u666f\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u53e5\u5b50\u8868\u8fbe\u7684\u8bed\u4e49\uff1b\u89c6\u9891\u5219\u7c7b\u4f3c\u4e8e\u8bed\u8a00\u4e2d\u7684\u7bc7\u7ae0\uff08\u6587\u7ae0\uff09\u3002 \u5728\u8fd9\u79cd\u7c7b\u6bd4\u4e0b\u770b\uff0cNLP/IR\u5728\u5355\u8bcd\u5c42\u9762\u7684\u5904\u7406\u8981\u6bd4CV\u4e2d\u7684\u56fe\u50cf\u8bc6\u522b\u7b80\u5355\u5f97\u591a\uff0c\u53ea\u9700\u8981\u505a\u4e00\u4e0btokenization\u3001lemmatization\u3001stemming\u7b49\uff08\u4e2d\u6587\u590d\u6742\u4e00\u4e9b\u9700\u8981\u989d\u5916\u505a\u81ea\u52a8\u5206\u8bcd\uff09\uff0c\u5c31\u53ef\u4ee5\u5229\u7528\u5173\u952e\u8bcd\u5339\u914d\u5b8c\u6210\u5f88\u591a\u4efb\u52a1\uff0c\u4f8b\u5982\u4fe1\u606f\u68c0\u7d22\u3001\u6587\u672c\u5206\u7c7b\u3001\u62fc\u5199\u7ea0\u9519\u3001\u60c5\u611f\u5206\u6790\u3001\u5173\u952e\u8bcd\u63d0\u53d6\u7b49\u7b49\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u5f97\u5230\u975e\u5e38\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u5982\u641c\u7d22\u5f15\u64ce\u3001\u62fc\u97f3\u8f93\u5165\u6cd5\u3001\u65b0\u95fb\u5206\u7c7b\u3001\u9605\u8bfb\u63a8\u8350\u7b49\u3002 \u800c\u7531\u4e8e\u56fe\u50cf\u4e2d\u5bf9\u8c61\u7684\u590d\u6742\u6027\u548c\u591a\u6837\u6027\uff0c\u4ec5\u5728\u5bf9\u8c61\u8bc6\u522b\u5c42\u9762\uff0c\u751a\u81f3\u7279\u5b9a\u7684\u4eba\u8138\u8bc6\u522b\uff0c\u8fd8\u6709\u5f88\u591a\u6280\u672f\u6311\u6218\u3002\u53ea\u4e0d\u8fc7\u662f\u8fd1\u5e74\u6765\uff0c\u7531\u4e8e\u6df1\u5ea6\u5b66\u4e60\u5bf9\u975e\u7ed3\u6784\u6570\u636e\u7684\u5f3a\u5927\u8868\u793a\u548c\u5b66\u4e60\u80fd\u529b\uff0c\u5f00\u59cb\u8ba9\u5bf9\u8c61\u8bc6\u522b\u8d70\u5411\u4e86\u5b9e\u7528\u5316\u3002 \u800c\u8fdb\u5165\u5230\u66f4\u9ad8\u5c42\u9762\uff0c\u4f8b\u5982\u9762\u5411\u56fe\u50cf\u7684\u573a\u666f\u56fe\u6784\u5efa\uff0c\u9762\u5411\u6587\u672c\u7684\u53e5\u6cd5\u8bed\u4e49\u5206\u6790\uff0c\u90fd\u9700\u8981\u5bf9\u590d\u6742\u8bed\u5883\uff08\u4e0a\u4e0b\u6587\uff09\u7684\u7cbe\u51c6\u800c\u5f3a\u5927\u7684\u5efa\u6a21\u80fd\u529b\u3002\u6240\u4ee5\u6211\u611f\u89c9\uff0c\u5e76\u975eNLP\u53d1\u5c55\u7f13\u6162\uff0c\u53ea\u662f\u4e24\u4e2a\u9886\u57df\u7684\u53d1\u5c55\u8282\u594f\u548c\u9636\u6bb5\u4e0d\u540c\u3002\u8fdb\u5165\u9ad8\u5c42\u4efb\u52a1\u540e\uff0c\u4e24\u4e2a\u9886\u57df\u90fd\u5c06\u9762\u4e34\u5171\u540c\u7684\u5173\u952e\u6311\u6218\uff0c\u90fd\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u590d\u6742\u8bed\u5883\u4e0b\u7684\u591a\u5bf9\u8c61\uff08\u56fe\u50cf\u4e2d\u662f\u4e0d\u540c\u5bf9\u8c61\uff0c\u6587\u672c\u4e2d\u662f\u4e0d\u540c\u6982\u5ff5\uff09\u7684\u8bed\u4e49\u7ec4\u5408\u95ee\u9898\u3002","title":"\u4e0e\u8ba1\u7b97\u673a\u89c6\u89c9\u76f8\u6bd4\uff0c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u6709\u4ec0\u4e48\u7279\u70b9"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#nlp-vs-nlp-nlp","text":"\u4ece\u5b9e\u7528\u6587\u672c\u5206\u6790\u6280\u672f\u800c\u8a00\uff0c\u5982\u679c\u53ea\u505a\u4e3b\u9898\u805a\u7c7b\u3001\u6587\u672c\u5206\u7c7b\u7b49\u4efb\u52a1\u7684\u8bdd\uff0c\u4e2d\u82f1\u6587\u6700\u5927\u5dee\u522b\u5c31\u5728\u4e8e\uff0c\u4e2d\u6587\u9700\u8981\u505a\u81ea\u52a8\u5206\u8bcd\uff0c\u76f8\u5173\u5de5\u5177\u5305\u5df2\u7ecf\u5f88\u591a\u4e86\uff0c\u5305\u62ec\u9898\u4e3b\u63d0\u5230\u7684Jieba\uff0c\u8fd8\u6709\u54c8\u5de5\u5927\u7684LTP\uff0c\u5317\u7406\u5de5\u7684ICTCLAS\uff0c\u8fd8\u6709\u6211\u4eec\u7ec4\u7814\u5236\u7684THULAC\u3002\u5f53\u7136\uff0c\u5728\u6587\u672c\u5206\u7c7b\u65f6\uff0c\u5230\u5e95\u662f\u9009\u8bcd\u8fd8\u662fNgram\u4f5c\u4e3a\u7279\u5f81\uff0c\u5728SVM+BOW\u65f6\u4ee3\u66fe\u662f\u4e2a\u95ee\u9898\u3002\u8fdb\u5165\u5230\u6df1\u5ea6\u5b66\u4e60\u65f6\u4ee3\uff0c\u5c31\u76f4\u63a5\u53ef\u4ee5\u7528\u57fa\u4e8e\u5b57\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u4e86\u3002 \u4eceNLP\u7814\u7a76\u89d2\u5ea6\u800c\u8a00\uff0c\u4e2d\u82f1\u6587\u5728\u8bcd\u6027\u6807\u6ce8\u3001\u53e5\u6cd5\u5206\u6790\u7b49\u4efb\u52a1\u4e0a\u9887\u6709\u5dee\u5f02\u3002\u4e3b\u8981\u4f53\u73b0\u5728\u82f1\u8bed\u6709\u660e\u663e\u7684\u5c48\u6298\u53d8\u5316\uff08\u5355\u590d\u6570\u3001\u65f6\u6001\u7b49\uff09\u800c\u6c49\u8bed\u7f3a\u5c11\u8fd9\u4e9b\u5c48\u6298\u53d8\u5316\uff0c\u4ea6\u5373\u6709\u5b66\u8005\u603b\u7ed3\u7684\u201c\u6c49\u8bed\u91cd\u4e49\u5408\uff0c\u82f1\u8bed\u91cd\u5f62\u5408\u201d\u3002\u6240\u4ee5\uff0c\u82f1\u8bed\u91cc\u4e00\u4e2a\u8bcd\u88ab\u6807\u4e3a\u52a8\u8bcd\u8fd8\u662f\u540d\u8bcd\uff0c\u6ca1\u6709\u592a\u591a\u4e89\u8bae\uff1b\u6c49\u8bed\u91cc\u4e00\u4e2a\u8bcd\u5e94\u8be5\u88ab\u6807\u4e3a\u52a8\u8bcd\u8fd8\u662f\u540d\u8bcd\uff0c\u4f8b\u5982\u201c\u70ed\u7231\u5b66\u4e60\u201d\u3001\u201c\u52b3\u52a8\u5149\u8363\u201d\u4e2d\u7684\u201c\u5b66\u4e60\u201d\u3001\u201c\u52b3\u52a8\u201d\u5982\u679c\u6309\u7167\u82f1\u6587\u8bed\u6cd5\u89c4\u8303\u5e94\u5f53\u6807\u6ce8\u4e3a\u540d\u8bcd\u3002\u8457\u540d\u8bed\u8a00\u5b66\u5bb6\u6c88\u5bb6\u714a\u5148\u751f\u5c31\u66fe\u63d0\u51fa\u201c\u6c49\u8bed\u52a8\u8bcd\u548c\u540d\u8bcd\u4e0d\u5206\u7acb\u201d\u7684\u7406\u8bba\u3002\u5728\u53e5\u6cd5\u5206\u6790\u5c42\u9762\u6c49\u8bed\u4e5f\u6709\u4e00\u4e9b\u81ea\u5df1\u7684\u7279\u70b9\uff0c\u5177\u4f53\u9700\u8981\u8bf7\u6559\u4e13\u4e1a\u7684\u8bed\u8a00\u5b66\u5bb6\u89e3\u7b54\u4e86\u3002 \u4e2d\u82f1\u6587\u76f8\u5173\u5206\u6790\u4efb\u52a1\u7684\u9519\u8bef\u7387\u95ee\u9898\u3002\u4e4b\u6240\u4ee5\u5728\u4e00\u4e9b\u4efb\u52a1\u4e0a\u4e2d\u6587\u5206\u6790\u6027\u80fd\u663e\u8457\u4f4e\u4e8e\u82f1\u6587\uff0c\u9664\u4e86\u4e2d\u6587\u7f3a\u5c11\u5c48\u8005\u53d8\u5316\u3001\u6709\u66f4\u591a\u81ea\u7531\u5ea6\u4ece\u800c\u63d0\u5347\u4e86\u5206\u6790\u96be\u5ea6\u7684\u539f\u56e0\u5916\uff0c\u4e2d\u6587\u6807\u6ce8\u8d44\u6e90\u76f8\u5bf9\u8f83\u5c11\u3001\u6807\u6ce8\u8d28\u91cf\u76f8\u5bf9\u8f83\u4f4e\u4e5f\u662f\u5173\u952e\u539f\u56e0\u4e4b\u4e00\u3002\u8bed\u8a00\u8d44\u6e90\u6807\u6ce8\u65e2\u9700\u8981\u8bed\u8a00\u5b66\u5bb6\u548c\u8ba1\u7b97\u673a\u5b66\u8005\u7684\u901a\u529b\u5408\u4f5c\uff0c\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7cbe\u529b\u548c\u65f6\u95f4\uff0c\u5728\u56fd\u5185\u73af\u5883\u4e0b\u592a\u8d39\u529b\u4e0d\u8ba8\u597d\u4e86\uff0c\u5e0c\u671b\u672a\u6765\u4f1a\u6709\u6539\u89c2\u3002 \u4ece\u66f4\u5e7f\u9614\u7684\u8bed\u8a00\u7814\u7a76\u89d2\u5ea6\u800c\u8a00\uff0c\u4e2d\u82f1\u7531\u4e8e\u5404\u81ea\u627f\u8f7d\u4e86\u4e24\u79cd\u622a\u7136\u4e0d\u540c\u7684\u4eba\u7c7b\u7fa4\u4f53\u7684\u6587\u5316\u4fe1\u606f\uff0c\u6240\u4ee5\u5728\u66f4\u6df1\u5c42\u7684\u6587\u5316\u5185\u6db5\u4f1a\u6709\u66f4\u660e\u663e\u7684\u5206\u91ce\uff0c\u4f8b\u5982\u4e24\u79cd\u8bed\u8a00\u7684\u8bcd\u6c47\u8054\u60f3\u7f51\u7edc\u3001\u9690\u55bb\u98ce\u683c\u7b49\uff0c\u53ef\u80fd\u4f1a\u6709\u66f4\u5927\u7684\u4e0d\u540c\u3002\u4e5f\u8bb8\u5728NLP\u6280\u672f\u65e5\u6e10\u6210\u719f\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u900f\u8fc7\u8bed\u8a00\u66f4\u52a0\u5b9a\u91cf\u5730\u5206\u6790\u4e24\u79cd\u4e0d\u540c\u6587\u5316\u7684\u5dee\u5f02\u3002","title":"\u4e2d\u6587NLP vs \u82f1\u6587NLP\u5728\u7406\u8bba\u3001\u5904\u7406\u4e0a\u6709\u4ec0\u4e48\u76f8\u540c\u548c\u4e0d\u540c, \u5c24\u5176\u662f\u4e2d\u6587 NLP\u6709\u4ec0\u4e48\u72ec\u7279\u4e4b\u5904"},{"location":"%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B/#_6","text":"\u5f20\u94b9. \u81ea\u7136\u8bed\u8a00\u5904\u7406\u7684\u8ba1\u7b97\u6a21\u578b. \u4e2d\u6587\u4fe1\u606f\u5b66\u62a5, 2007, 21(3):3-7. \u51af\u5fd7\u4f1f. \u300a\u7edf\u8ba1\u81ea\u7136\u8bed\u8a00\u5904\u7406\u300b\u5e8f\u8a00. 1\u7248. \u5317\u4eac: \u6e05\u534e\u5927\u5b66\u51fa\u7248\u793e, 2008. \u5b59\u8302\u677e. \u8bed\u8a00\u8ba1\u7b97:\u4fe1\u606f\u79d1\u5b66\u6280\u672f\u4e2d\u957f\u671f\u53d1\u5c55\u7684\u6218\u7565\u5236\u9ad8\u70b9. \u8bed\u8a00\u6587\u5b57\u5e94\u7528, 2005, 3:38-40.","title":"\u53c2\u8003\u6587\u732e"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/","text":"\u300a\u6df1\u5ea6\u5b66\u4e60\u300b\uff0c\u53c8\u540d\u201c\u82b1\u4e66\u201d\u3002\u8be5\u4e66\u7531\u4e09\u4f4d\u5927\u4f6c Ian Goodfellow\u3001Yoshua Bengio \u548c Aaron Courville \u64b0\u5199\uff0c\u662f\u6df1\u5ea6\u5b66\u4e60\u9886\u57df\u5960\u57fa\u6027\u7684\u7ecf\u5178\u6559\u6750\uff0c\u88ab\u8a89\u4e3a\u6df1\u5ea6\u5b66\u4e60\u201c\u5723\u7ecf\u201d\u3002 \u4e4b\u524d\u7ea2\u8272\u77f3\u5934\u4ecb\u7ecd\u8fc7\u4e00\u4efd\u6765\u81ea Microsoft \u8ba1\u7b97\u673a\u8f6f\u4ef6\u5de5\u7a0b\u5e08 Jeff Macaluso \u603b\u7ed3\u7684\u5173\u4e8e\u201c\u82b1\u4e66\u201d\u7684 Deep Learning Rules of Thumb \u3002\u5728\u7ebf\u9605\u8bfb\u5730\u5740\u4e3a\uff1a https://jeffmacaluso.github.io/post/DeepLearningRulesOfThumb/ \u4e0b\u9762\u662f\u201c\u82b1\u4e66\u201d\u7ecf\u9a8c\u6cd5\u5219\u7684\u7ffb\u8bd1\u7248\u6b63\u6587\u3002 TL:DR \u00b6 \u5c3d\u53ef\u80fd\u4f7f\u7528\u8fc1\u79fb\u5b66\u4e60\u3002\u5426\u5219\uff0c\u5bf9\u4e8e\u5df2\u7ecf\u662f\u5e7f\u6cdb\u7814\u7a76\u7684\u95ee\u9898\uff0c\u5148\u4ece\u590d\u5236\u7f51\u7edc\u7ed3\u6784\u5f00\u59cb\u3002 \u7f51\u7edc\u7ed3\u6784\u5e94\u8be5\u603b\u662f\u7531\u5b9e\u9a8c\u548c\u9a8c\u8bc1\u8bef\u5dee\u6765\u786e\u5b9a\u3002 \u66f4\u6df1\uff08\u5c42\u591a\uff09\uff0c\u66f4\u6d45\uff08\u5c42\u5c11\uff09\u7684\u7f51\u7edc\u66f4\u96be\u4f18\u5316\uff0c\u4f46\u662f\u66f4\u5bb9\u6613\u6709\u66f4\u597d\u7684\u6cdb\u5316\u8bef\u5dee\u3002 \u4e00\u5b9a\u8981\u4f7f\u7528 early stopping\uff08\u65e9\u505c\uff09\uff0c\u4e24\u79cd\u65b9\u6cd5\uff1a \u5728\u6574\u4e2a\u6570\u636e\u96c6\u4e0a\u4f7f\u7528\u65b0\u7684\u53c2\u6570\u518d\u6b21\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u5230\u8fbe\u5148\u524d\u6a21\u578b\u7684\u65e9\u505c\u70b9\u65f6\u505c\u6b62\u8bad\u7ec3\u3002 \u4fdd\u7559\u65e9\u505c\u70b9\u65f6\u7684\u53c2\u6570\uff0c\u7ee7\u7eed\u5728\u6240\u6709\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u5f53\u5e73\u5747\u8bad\u7ec3\u8bef\u5dee\u964d\u5230\u539f\u5148\u65e9\u505c\u70b9\u4ee5\u4e0b\u65f6\u505c\u6b62\u3002 \u4f7f\u7528 dropout \u6216\u8bb8\u662f\u4e2a\u597d\u4e3b\u610f\u3002 \u4f7f\u7528 0.8 \u4f5c\u4e3a\u8f93\u5165\u5c42\u7684\u4fdd\u7559\u6982\u7387\uff0c0.5 \u4f5c\u4e3a\u9690\u5c42\u7684\u4fdd\u7559\u6982\u7387\u3002 dropout \u4f1a\u9700\u8981\u66f4\u5927\u7684\u7f51\u7edc\u548c\u66f4\u957f\u7684\u8fed\u4ee3\u3002 ReLU \u662f\u7406\u60f3\u7684\u6fc0\u6d3b\u51fd\u6570\u3002\u5b83\u4e5f\u6709\u7f3a\u9677\uff0c\u56e0\u6b64\u4f7f\u7528 leaky ReLU \u6216 noisy ReLU \u6216\u8bb8\u6709\u6027\u80fd\u63d0\u5347\uff0c\u4f46\u662f\u4f1a\u6709\u66f4\u591a\u7684\u53c2\u6570\u8981\u8c03\u3002 \u8981\u5f97\u5230\u5dee\u4e0d\u591a\u53ef\u4ee5\u63a5\u6536\u7684\u6027\u80fd\uff0c\u81f3\u5c11\u9700\u8981\u6bcf\u4e2a\u7c7b 5000 \u4e2a\u6570\u636e\uff08>=10M\u53ef\u4ee5\u8fbe\u5230\u4eba\u7c7b\u7684\u6c34\u5e73\u6216\u66f4\u597d\uff09 \u5982\u679c\u4f4e\u4e8e 100,000\u4e2a\u6570\u636e\uff0c\u4f7f\u7528 K \u6298\u4ea4\u53c9\u9a8c\u8bc1\u800c\u4e0d\u662f train/validation/test \u5212\u5206\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528 GPU \u80fd\u505a\u5230\u7684\u6700\u5927\u7684 batch size\u3002 \u5c1d\u8bd5\u4e0d\u540c batch size\uff0c\u4ece 32 \u5f00\u59cb\u4ee5 2 \u7684\u6307\u6570\u589e\u52a0\u5230 256\uff0c\u5bf9\u4e8e\u592a\u5927\u7684\u6a21\u578b\u53ef\u4ee5\u4ece 16 \u5f00\u59cb\u3002 \u5e26\u52a8\u91cf\u548c\u5b66\u4e60\u7387\u8870\u51cf\u7684\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u662f\u4e2a\u4e0d\u9519\u7684\u5f00\u59cb\u3002 \u52a8\u91cf\u8d85\u53c2\u6570\u901a\u5e38\u7684\u503c\u6709 0.54, 0.9 \u548c 0.99\u3002\u53ef\u4ee5\u968f\u65f6\u95f4\u8c03\u6574\uff0c\u4ece\u5c0f\u503c\u5f00\u59cb\uff0c\u7136\u540e\u589e\u5927\u3002 \u6216\u8005\uff0c\u4f7f\u7528 Adam \u6216 RMSProp\u3002 \u5728\u5206\u5e03\u5f0f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4f7f\u7528\u5f02\u6b65 SGD\u3002 \u5b66\u4e60\u7387\u662f\u6700\u91cd\u8981\u7684\u8d85\u53c2\u6570\u3002\u5982\u679c\u65f6\u95f4\u6709\u9650\uff0c\u4e3b\u8981\u82b1\u65f6\u95f4\u6765\u8c03\u5b83\u3002 \u53ef\u4ee5\u901a\u8fc7\u7ed8\u5236\u5b66\u4e60\u66f2\u7ebf\uff08\u76ee\u6807\u51fd\u6570\u968f\u65f6\u95f4\u7684\u53d8\u5316\uff09\u6765\u89c2\u5bdf\u5b66\u4e60\u7387\u7684\u60c5\u51b5 \u6700\u4f18\u5b66\u4e60\u7387\u901a\u5e38\u9ad8\u4e8e\u524d 100 \u6b21\u8fed\u4ee3\u540e\u4ea7\u751f\u6700\u4f73\u6027\u80fd\u7684\u5b66\u4e60\u7387\uff0c\u4f46\u4e0d\u4f1a\u9ad8\u5230\u51fa\u73b0\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u3002 \u5bf9\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9\uff1a \u4f7f\u7528\u6570\u636e\u589e\u5f3a\uff0c\u53ea\u8981\u56fe\u50cf\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u6539\u53d8\u3002\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u662f\u53e6\u4e00\u4e2a\u5b89\u5168\u7684\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u6279\u91cf\u5f52\u4e00\u5316\uff0c\u6c60\u5316\u548c\u586b\u5145\u5728 CNN \u4e2d\u7ecf\u5e38\u4f7f\u7528\u3002\u5728\u6279\u91cf\u5f52\u4e00\u5316\u7684\u60c5\u51b5\u4e0b\u6216\u8bb8\u4e0d\u9700\u8981 dropout\u3002 \u5bf9\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff1a LSTM \u901a\u5e38\u6548\u679c\u6bd4\u5176\u4ed6\u7f51\u7edc\u597d\u3002 \u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\uff08word2vec, word2glove \u7b49\uff09\u662f\u5f88\u5f3a\u5927\u7684\u65b9\u6cd5\u3002 \u968f\u673a\u641c\u7d22\u901a\u5e38\u6bd4\u7f51\u683c\u641c\u7d22\u66f4\u5feb\u7684\u6536\u655b\u5230\u597d\u7684\u8d85\u53c2\u6570\u8bbe\u7f6e\u3002 \u8c03\u8bd5\u7b56\u7565\uff1a \u53ef\u89c6\u5316\u6a21\u578b\uff1a\u67e5\u770b\u6a21\u578b\u68c0\u6d4b\u7684\u56fe\u50cf\u6837\u672c\uff0c\u8fd9\u5bf9\u786e\u5b9a\u6027\u80fd\u6307\u6807\u662f\u5426\u5408\u7406\u6709\u5e2e\u52a9\u3002 \u53ef\u89c6\u5316\u6700\u5dee\u7684\u9519\u8bef\u60c5\u51b5\uff1a\u8fd9\u53ef\u4ee5\u53d1\u73b0\u9884\u5904\u7406\u548c\u6253\u6807\u7b7e\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002 \u5f53\u8bad\u7ec3\u8bef\u5dee\u592a\u9ad8\u65f6\u5148\u62df\u5408\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\uff1a\u8fd9\u80fd\u68c0\u67e5\u51fa\u662f\u6b20\u62df\u5408\u95ee\u9898\u8fd8\u662f\u8f6f\u4ef6\u7f3a\u9677\u3002 \u76d1\u89c6\u6fc0\u6d3b\u548c\u68af\u5ea6\u7684\u76f4\u65b9\u56fe\uff1a\u5b8c\u6210\u5927\u6982\u4e00\u4e2a epoch\u3002\u8fd9\u80fd\u544a\u8bc9\u6211\u4eec\u795e\u7ecf\u5143\u662f\u5426\u9971\u548c\u53ca\u5176\u9971\u548c\u9891\u7387\u3002\u68af\u5ea6\uff08\u503c\uff1f\uff09\u5e94\u8be5\u662f\u53c2\u6570\u7684 1% \u5de6\u53f3\u3002 \u5b8c\u6574\u7684\u7b14\u8bb0 \u00b6 \u7b2c\u4e00\u90e8\u5206 \u5e94\u7528\u6570\u5b66\u548c\u673a\u5668\u5b66\u4e60\u57fa\u7840 1. \u4ecb\u7ecd \u6bcf\u4e2a\u7c7b\u522b\u81f3\u5c11\u9700\u8981\u5927\u6982 5000 \u4e2a\u6837\u672c\u624d\u80fd\u5f97\u5230\u53ef\u63a5\u53d7\u7684\u6027\u80fd\u3002\u5927\u6982\u6bcf\u7c7b\u9700\u8981 10M \u4e2a\u6837\u672c\u624d\u80fd\u8fbe\u5230\u4eba\u7c7b\u6c34\u5e73\u6216\u66f4\u597d\u3002 4. \u6570\u503c\u8ba1\u7b97 \u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u9677\u5165\u5c40\u90e8\u6700\u4f18\u800c\u4e0d\u662f\u5168\u5c40\u6700\u4f18\uff0c\u8fd9\u662f\u7531\u4e8e\u590d\u6742\u6027\u548c\u975e\u51f8\u4f18\u5316\u7684\u95ee\u9898\u3002 5. \u673a\u5668\u5b66\u4e60\u57fa\u7840 \u5982\u679c\u6a21\u578b\u5177\u6709\u6700\u4f18\u7684\u5bb9\u91cf\uff0c\u4f46\u662f\u5728\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8bef\u5dee\u4e4b\u95f4\u4ecd\u6709\u8f83\u5927\u5dee\u8ddd\uff0c\u53bb\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\u6765\u3002 \u901a\u5e38\u4f7f\u7528 20% \u7684\u8bad\u7ec3\u96c6\u4f5c\u4e3a\u9a8c\u8bc1\u96c6\u3002 \u5982\u679c\u6570\u636e\u5c11\u4e8e 100000 \u4e2a\u6837\u672c\uff0c\u4f7f\u7528k\u6298\u4ea4\u53c9\u9a8c\u8bc1\u800c\u4e0d\u662f\u8bad\u7ec3/\u6d4b\u8bd5\u96c6\u5212\u5206\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528\u5747\u65b9\u8bef\u5dee\u65f6\uff0c\u589e\u52a0\u5bb9\u91cf\u4f1a\u964d\u4f4e\u504f\u5dee\u4f46\u662f\u4f1a\u589e\u52a0\u65b9\u5dee\u3002 \u8d1d\u53f6\u65af\u65b9\u6cd5\u5728\u8bad\u7ec3\u6570\u636e\u6709\u9650\u7684\u65f6\u5019\u6cdb\u5316\u6027\u80fd\u66f4\u597d\uff0c\u4f46\u662f\u8bad\u7ec3\u6837\u672c\u8f83\u591a\u65f6\u5b83\u7684\u8ba1\u7b97\u5f00\u9500\u5f88\u5927\u3002 \u6700\u5e38\u4f7f\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u8d1f\u5bf9\u6570\u4f3c\u7136\u3002\u56e0\u6b64\u6700\u5c0f\u5316\u635f\u5931\u51fd\u6570\u4e5f\u5c31\u662f\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u3002 \u7b2c\u4e8c\u90e8\u5206 \u6df1\u5ea6\u7f51\u7edc\uff1a\u73b0\u4ee3\u5b9e\u8df5 6. \u6df1\u5ea6\u524d\u9988\u7f51\u7edc \u00b6 ReLU \u5bf9\u4e8e\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u800c\u8a00\u662f\u4e00\u4e2a\u5b8c\u7f8e\u7684\u6fc0\u6d3b\u51fd\u6570\u3002 \u5b83\u6240\u57fa\u4e8e\u7684\u539f\u5219\u662f\uff0c\u63a5\u8fd1\u7ebf\u6027\u7684\u7279\u6027\u66f4\u52a0\u5bb9\u6613\u4f18\u5316\u3002 sigmoid \u5e94\u8be5\u7528\u4e8e ReLU \u4e0d\u80fd\u4f7f\u7528\u7684\u60c5\u51b5\u3002\u4f8b\u5982 RNN\uff0c\u5f88\u591a\u7684\u6982\u7387\u6a21\u578b\uff0c\u548c\u4e00\u4e9b\u81ea\u52a8\u7f16\u7801\u673a\u3002 \u5728\u57fa\u4e8e\u68af\u5ea6\u7684\u4f18\u5316\u95ee\u9898\u4e0a\uff0c\u7531\u4e8e\u68af\u5ea6\u6d88\u5931\u7684\u539f\u56e0\uff0c\u4ea4\u53c9\u71b5\u76f8\u6bd4 MSE \u548c MAE \u66f4\u597d\u3002 ReLU \u7684\u4f18\u70b9\uff1a\u51cf\u5c11\u4e86\u68af\u5ea6\u6d88\u5931\u7684\u6982\u7387\uff0c\u7a00\u758f\u6027\uff0c\u51cf\u5c11\u4e86\u8ba1\u7b97\u91cf\u3002 \u7f3a\u70b9\uff1a\u6709\u6b7b\u533a Dying ReLU\u3002\uff08leaky \u548c noisy ReLU \u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u5f15\u5165\u4e86\u989d\u5916\u7684\u53c2\u6570\uff09 \u5927\u7684\u68af\u5ea6\u5e2e\u52a9\u5b66\u4e60\u66f4\u5feb\uff0c\u4f46\u662f\u4efb\u610f\u5927\u4f1a\u5bfc\u81f4\u4e0d\u7a33\u5b9a\u3002 \u7f51\u7edc\u7ed3\u6784\u5e94\u8be5\u901a\u8fc7\u5b9e\u9a8c\u548c\u76d1\u89c6\u9a8c\u8bc1\u96c6\u8bef\u5dee\u6765\u786e\u5b9a\u3002 \u66f4\u6df1\u7684\u6a21\u578b\u51cf\u5c11\u4e86\u7528\u4e8e\u8868\u793a\u51fd\u6570\u7684\u795e\u7ecf\u5143\u6570\u91cf\uff0c\u4e5f\u964d\u4f4e\u4e86\u6cdb\u5316\u8bef\u5dee\u3002 \u76f4\u89c9\u4e0a\u8bf4\uff0c\u66f4\u6df1\u7684\u7f51\u7edc\u66f4\u597d\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u5b66\u4e60\u4e00\u7cfb\u5217\u51fd\u6570\u3002 7. \u6df1\u5ea6\u5b66\u4e60\u7684\u6b63\u5219\u9879 \u00b6 \u6700\u597d\u5728\u6bcf\u5c42\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u6b63\u5219\u7cfb\u6570\uff0c\u4f46\u662f\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd\u8870\u51cf\u3002 \u4f7f\u7528\u65e9\u505c early stopping\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u8c03\u7684\u8d85\u53c2\u6570\uff0c\u800c\u4e14\u4e5f\u51cf\u5c11\u4e86\u8ba1\u7b97\u91cf\u3002 \u5728\u6574\u4e2a\u6570\u636e\u96c6\u4e0a\u4f7f\u7528\u65b0\u7684\u53c2\u6570\u518d\u6b21\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u5230\u8fbe\u5148\u524d\u6a21\u578b\u7684\u65e9\u505c\u70b9\u65f6\u505c\u6b62\u8bad\u7ec3\u3002 \u4fdd\u7559\u65e9\u505c\u70b9\u65f6\u7684\u53c2\u6570\uff0c\u7ee7\u7eed\u5728\u6240\u6709\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u5f53\u5e73\u5747\u8bad\u7ec3\u8bef\u5dee\u964d\u5230\u539f\u5148\u65e9\u505c\u70b9\u4ee5\u4e0b\u65f6\u505c\u6b62\u3002 \u6a21\u578b\u5e73\u5747\uff08bagging, boosting \u7b49\uff09\u57fa\u672c\u4e0a\u603b\u4f1a\u63d0\u9ad8\u9884\u6d4b\u6027\u80fd\uff0c\u867d\u7136\u63d0\u9ad8\u4e86\u8ba1\u7b97\u91cf\u3002 dropout \u5728\u5bbd\u5c42\u7f51\u7edc\u5de5\u4f5c\u66f4\u597d\uff0c\u56e0\u4e3a\u5b83\u51cf\u5c11\u4e86\u4ece\u8f93\u5165\u5230\u8f93\u51fa\u7684\u8def\u5f84\u3002 \u901a\u5e38\u8f93\u5165\u5c42 dropout \u4e2d\u7684\u4fdd\u7559\u6982\u7387\u662f 0.8\uff0c\u9690\u5c42\u7684\u6982\u7387\u662f 0.5\u3002 \u4f7f\u7528 dropout \u7684\u6a21\u578b\u901a\u5e38\u8981\u66f4\u5927\uff0c\u8fed\u4ee3\u66f4\u957f\u3002 \u5982\u679c\u6570\u636e\u96c6\u8db3\u591f\u5927\uff0cdropout \u6ca1\u6709\u592a\u5927\u5e2e\u52a9\u3002\u53e6\u5916\uff0c\u5728\u5f88\u5c0f\uff08<5000\uff09\u7684\u8bad\u7ec3\u6837\u672c\u4e0adropout\u7684\u4f5c\u7528\u5f88\u6709\u9650\u3002 \u6279\u91cf\u6807\u51c6\u5316\u540c\u6837\u4e5f\u5f15\u5165\u4e86\u566a\u58f0\uff0c\u8fd9\u63d0\u4f9b\u4e86\u6b63\u5219\u7684\u4f5c\u7528\uff0c\u4f46\u4e5f\u53ef\u80fd\u8ba9 dropout \u6ca1\u6709\u592a\u5927\u5fc5\u8981\u3002 \u6a21\u578b\u5e73\u5747\u4e00\u822c\u90fd\u5de5\u4f5c\u5f97\u5f88\u597d\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u6a21\u578b\u4e0d\u592a\u53ef\u80fd\u72af\u76f8\u540c\u7684\u9519\u8bef\u3002 dropout \u901a\u8fc7\u521b\u5efa\u5b50\u7f51\u7edc\u5f62\u6210\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684 bagging \u65b9\u6cd5\u3002 8. \u8bad\u7ec3\u6df1\u5ea6\u6a21\u578b\u7684\u4f18\u5316 \u00b6 mini-batch \u7684\u5927\u5c0f\uff08batch size\uff09\uff1a\u5927\u7684 batch size \u4f1a\u63d0\u4f9b\u66f4\u5927\u7684\u68af\u5ea6\uff0c\u4f46\u662f\u901a\u5e38\u5185\u5b58\u662f\u4e2a\u9650\u5236\u6761\u4ef6\u3002 \u8ba9\u4f60\u7684 batch size \u5728\u5185\u5b58\u5141\u8bb8\u8303\u56f4\u5185\u5c3d\u53ef\u80fd\u5927\u3002 \u5728 GPU \u4e2d\uff0c\u4ece 32 \u5230 256 \u4ee5 2 \u7684\u6307\u6570\u7ea7\u522b\u589e\u957f\uff0c\u5bf9\u4e8e\u8f83\u5927\u7684\u6a21\u578b\u53ef\u4ee5\u4ece 16 \u5f00\u59cb\u3002 \u5c0f\u7684 batch size \u56e0\u4e3a\u566a\u58f0\u7684\u539f\u56e0\u53ef\u80fd\u6709\u6b63\u5219\u7684\u4f5c\u7528\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4\u6574\u4f53\u8fd0\u884c\u65f6\u95f4\u589e\u52a0\u3002\u8fd9\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u66f4\u5c0f\u7684\u5b66\u4e60\u7387\u6765\u63d0\u5347\u7a33\u5b9a\u6027\u3002 \u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6709\u591a\u4e2a\u5c40\u90e8\u6700\u4f18\uff0c\u4f46\u8fd9\u6ca1\u592a\u5927\u5173\u7cfb\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u6709\u76f8\u540c\u7684\u4ee3\u4ef7\u3002\u6700\u4e3b\u8981\u7684\u95ee\u9898\u662f\u5c40\u90e8\u6700\u4f18\u7684\u635f\u5931\u6bd4\u5168\u5c40\u6700\u4f18\u7684\u635f\u5931\u5927\u5f97\u591a\u3002 \u4e3a\u4e86\u6d4b\u8bd5\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u7ed8\u5236\u68af\u5ea6\u7684\u8303\u6570\u6765\u770b\u5b83\u662f\u5426\u968f\u65f6\u95f4\u8870\u51cf\u5230\u4e00\u4e2a\u975e\u5e38\u5c0f\u7684\u503c\u3002 \u5728\u9ad8\u7ef4\u975e\u51f8\u51fd\u6570\u4e2d\u978d\u70b9\u6bd4\u5c40\u90e8\u6700\u4f18\u66f4\u5e38\u89c1\uff0c\u68af\u5ea6\u4e0b\u964d\u5bf9\u4e8e\u978d\u70b9\u76f8\u5bf9\u6765\u8bf4\u66f4\u52a0\u9c81\u68d2\u3002 \u68af\u5ea6\u88c1\u526a\uff08clipping\uff09\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u7206\u70b8\u7684\u60c5\u51b5\u3002\u8fd9\u5728 RNN \u4e2d\u662f\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u3002 \u7ed8\u5236\u51fa\u76ee\u6807\u51fd\u6570\u968f\u65f6\u95f4\u7684\u53d8\u5316\u66f2\u7ebf\u6765\u9009\u62e9\u5b66\u4e60\u7387\u3002 \u6700\u4f18\u5b66\u4e60\u7387\u901a\u5e38\u9ad8\u4e8e\u524d 100 \u6b21\u8fed\u4ee3\u540e\u4ea7\u751f\u6700\u4f73\u6027\u80fd\u7684\u5b66\u4e60\u7387\u3002\u76d1\u89c6\u524d\u51e0\u6b21\u8fed\u4ee3\uff0c\u9009\u62e9\u4e00\u4e2a\u6bd4\u8868\u73b0\u6700\u597d\u7684\u5b66\u4e60\u7387\u66f4\u9ad8\u7684\u5b66\u4e60\u7387\uff0c\u540c\u65f6\u6ce8\u610f\u907f\u514d\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u3002 \u4f7f\u7528\u9ad8\u65af\u548c\u5747\u5300\u5206\u5e03\u6765\u521d\u59cb\u770b\u8d77\u6765\u6ca1\u6709\u592a\u5927\u5f71\u54cd\u3002 \u4f46\u662f\uff0c\u5bf9\u5c3a\u5ea6\uff08scale\uff09\u6709\u5f71\u54cd\u3002\u5927\u7684\u521d\u59cb\u6743\u91cd\u4f1a\u5e2e\u52a9\u907f\u514d\u5197\u4f59\u795e\u7ecf\u5143\uff0c\u4f46\u662f\u592a\u5927\u4f1a\u6709\u4e0d\u5229\u5f71\u54cd\u3002 \u6743\u91cd\u521d\u59cb\u5316\u53ef\u4ee5\u770b\u4f5c\u662f\u8d85\u53c2\u6570\uff0c\u5c24\u5176\u662f\u521d\u59cb\u5c3a\u5ea6\u7a00\u758f\u6216\u5bc6\u96c6\u7684\u60c5\u51b5\u3002\u67e5\u770b\u4e00\u4e2aminibatch\u5185\u6fc0\u6d3b\u6216\u68af\u5ea6\u7684\u8303\u56f4\u6216\u65b9\u5dee\u6765\u9009\u62e9\u5c3a\u5ea6\u3002 \u6ca1\u6709\u4e00\u4e2a\u4f18\u5316\u7b97\u6cd5\u660e\u663e\u7531\u4e8e\u5176\u4ed6\uff0c\u8fd9\u4e3b\u8981\u53d6\u51b3\u4e8e\u7528\u6237\u5bf9\u8d85\u53c2\u6570\u8c03\u6574\u7684\u719f\u6089\u60c5\u51b5\u3002 \u968f\u673a\u68af\u5ea6\u4e0b\u964d\uff08SGD\uff09\uff0c\u5e26\u52a8\u91cf\u7684SGD\uff0cRMSProp\uff0c\u5e26\u52a8\u91cf\u7684RMSProp\uff0cAdaDelta\uff0cAdam\u90fd\u662f\u6d41\u884c\u7684\u9009\u62e9\u3002\u6ce8\u610f\uff1aRMSProp\u5728\u8bad\u7ec3\u521d\u671f\u6216\u8bb8\u4f1a\u6709\u5f88\u9ad8\u7684\u504f\u5dee\u3002 \u901a\u5e38\u52a8\u91cf\u7684\u503c\u67090.5,0.9\uff0c0.99\u3002\u8fd9\u4e2a\u8d85\u53c2\u6570\u53ef\u4ee5\u968f\u65f6\u95f4\u53d8\u5316\uff0c\u4ece\u4e00\u4e2a\u5c0f\u503c\u5f00\u59cb\u589e\u52a0\u5230\u5927\u7684\u503c\u3002 Adam\u901a\u5e38\u662f\u8f83\u4e3a\u9c81\u68d2\u7684\u9009\u62e9\u3002\u4f46\u662f\u5b66\u4e60\u7387\u901a\u5e38\u8981\u6839\u636e\u9ed8\u8ba4\u503c\u6539\u52a8\u3002 \u5bf9\u8f6c\u5316\u540e\u7684\u503c\uff08transformed value\uff09\u800c\u4e0d\u662f\u8f93\u5165\u505a\u6279\u91cf\u5f52\u4e00\u5316\u3002\u5728\u5f15\u5165\u53ef\u5b66\u4e60\u7684\u53c2\u6570 \u03b2 \u4e0b\u53bb\u6389\u504f\u7f6e\u9879\u3002\u5bf9\u4e8e CNN \u5728\u6bcf\u4e2a\u7a7a\u95f4\u4f4d\u7f6e\u5e94\u7528\u8303\u56f4\u5f52\u4e00\u5316\uff08range normalization\uff09\u3002 \u592a\u6d45\u6216\u592a\u6df1\u7684\u7f51\u7edc\u66f4\u96be\u8bad\u7ec3\uff0c\u4f46\u662f\u4ed6\u4eec\u6709\u66f4\u597d\u7684\u6cdb\u5316\u8bef\u5dee\u3002 \u76f8\u5bf9\u4e8e\u4e00\u4e2a\u5f3a\u5927\u7684\u4f18\u5316\u7b97\u6cd5\uff0c\u9009\u62e9\u5bb9\u6613\u4f18\u5316\u7684\u6a21\u578b\u66f4\u91cd\u8981\u3002 9. \u5377\u79ef\u7f51\u7edc \u00b6 \u6c60\u5316\u5bf9\u4e8e\u63a7\u5236\u4e0d\u540c\u5927\u5c0f\u7684\u8f93\u5165\u662f\u975e\u5e38\u6709\u7528\u7684\u3002 0 \u586b\u5145\u53ef\u4ee5\u8ba9\u6211\u4eec\u72ec\u7acb\u7684\u8bbe\u7f6e\u5377\u79ef\u6838\u5927\u5c0f\u548c\u8f93\u51fa\u5927\u5c0f\uff0c\u800c\u4e0d\u4f1a\u8ba9\u7ef4\u5ea6\u8870\u51cf\u53d8\u6210\u4e00\u4e2a\u53d7\u9650\u56e0\u7d20\u3002 \u5bf9\u4e8e\u6d4b\u8bd5\u51c6\u786e\u7387\u800c\u8a00\u6700\u4f18\u7684 0 \u586b\u5145\u901a\u5e38\u5728\uff1a \u201cvalid \u5377\u79ef\u201d\uff0c\u4e0d\u4f7f\u7528 0 \u586b\u5145\uff0c\u5377\u79ef\u6838\u5728\u56fe\u50cf\u8303\u56f4\u5185\uff0c\u4f46\u662f\u6bcf\u5c42\u8f93\u51fa\u4f1a\u8870\u51cf\u3002 \u201csame \u5377\u79ef\u201d\uff0c\u4f7f\u7528\u8db3\u591f\u7684 0 \u586b\u5145\u8ba9\u8f93\u51fa\u7684\u5927\u5c0f\u7b49\u4e8e\u8f93\u5165\u5927\u5c0f\u3002 \u4e00\u4e2a\u6f5c\u5728\u7684\u9a8c\u8bc1\u5377\u79ef\u7ed3\u6784\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u968f\u673a\u6743\u91cd\uff0c\u5e76\u4e14\u53ea\u8bad\u7ec3\u6700\u540e\u4e00\u5c42\u3002 10. \u5e8f\u5217\u6a21\u578b\uff1a****\u5faa\u73af\u548c\u9012\u5f52\u7f51\u7edc \u00b6 \u53cc\u5411 RNN \u5728\u624b\u5199\u8bc6\u522b\uff0c\u8bed\u97f3\u8bc6\u522b\u548c\u751f\u7269\u4fe1\u606f\u65b9\u9762\u975e\u5e38\u6210\u529f\u3002 \u76f8\u6bd4\u8f83 CNN \u800c\u8a00\uff0cRNN \u7528\u4e8e\u56fe\u50cf\u901a\u5e38\u66f4\u56f0\u96be\uff0c\u4f46\u662f\u53ef\u4ee5\u8ba9\u76f8\u540c\u7279\u5f81\u56fe\u4e2d\u7684\u7279\u5f81\u8fdb\u884c\u8fdc\u7a0b\u6a2a\u5411\u4ea4\u4e92\u3002 \u65e0\u8bba\u4f55\u65f6 RNN \u8981\u8868\u793a\u957f\u671f\u4f9d\u8d56\uff0c\u957f\u671f\u4ea4\u4e92\u7684\u68af\u5ea6\u8981\u6307\u6570\u7ea7\u522b\u5c0f\u4e8e\u77ed\u671f\u4ea4\u4e92\u3002 \u5728\u56de\u6ce2\u72b6\u6001\u7f51\u7edc\u4e2d\u8bbe\u7f6e\u6743\u91cd\u7684\u6280\u672f\u53ef\u7528\u4e8e\u5728\u5b8c\u5168\u53ef\u8bad\u7ec3\u7684 RNN \u4e2d\u521d\u59cb\u5316\u6743\u91cd\u3002\u521d\u59cb\u5149\u8c31\u534a\u5f84\u4e3a 1.2\uff0c\u7a00\u758f\u521d\u59cb\u5316\u6027\u80fd\u826f\u597d\u3002 \u5b9e\u8df5\u4e2d\u6700\u6709\u6548\u7684\u5e8f\u5217\u6a21\u578b\u662f\u95e8\u63a7 RNN\uff0c\u5305\u62ec LSTM \u548c GRU\u3002 LSTM \u6bd4\u7b80\u5355\u7684 RNN \u66f4\u5bb9\u6613\u5b66\u5230\u957f\u671f\u4f9d\u8d56\u3002 \u7ed9\u9057\u5fd8\u95e8\u52a0\u5165\u504f\u7f6e 1 \u53ef\u4ee5\u8ba9 LSTM \u50cf GRN \u53d8\u79cd\u4e00\u6837\u5f3a\u5927\u3002 \u5728 LSTM \u4e2d\u4f7f\u7528 SGD \u901a\u5e38\u8003\u8651\u4e8c\u9636\u4f18\u5316\u65b9\u6cd5\u6765\u9632\u6b62\u4e8c\u6b21\u504f\u5bfc\u6d88\u5931\u3002 \u8bbe\u8ba1\u4e00\u4e2a\u5bb9\u6613\u4f18\u5316\u7684\u6a21\u578b\u901a\u5e38\u6bd4\u8bbe\u8ba1\u4e00\u4e2a\u5f3a\u5927\u7684\u7b97\u6cd5\u5bb9\u6613\u4e9b\u3002 \u6b63\u5219\u53c2\u6570\u9f13\u52b1\u201c\u4fe1\u606f\u6d41\u201d\uff0c\u5e76\u9884\u9632\u68af\u5ea6\u6d88\u5931\uff0c\u4f46\u662f\u540c\u6837\u9700\u8981\u68af\u5ea6\u88c1\u526a\u6765\u9884\u9632\u68af\u5ea6\u7206\u70b8\u3002\u4f46\u662f\u5927\u91cf\u7684\u6570\u636e\u4f8b\u5982\u8bed\u8a00\u5efa\u6a21\u5bf9\u4e8e LSTM \u800c\u8a00\u5c31\u4e0d\u662f\u90a3\u4e48\u9ad8\u6548\u4e86\u3002 11. \u5b9e\u8df5\u65b9\u6cd5 \u00b6 \u5728\u4e0d\u786e\u5b9a\u7684\u65f6\u5019\u8ba9\u6a21\u578b\u62d2\u7edd\u51b3\u7b56\u4e5f\u662f\u5f88\u6709\u5e2e\u52a9\u7684\uff0c\u4f46\u662f\u8fd9\u4e4b\u95f4\u4e5f\u5b58\u5728\u6298\u4e2d\u3002\u6536\u655b\u662f\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u53ef\u4ee5\u54cd\u5e94\u7684\u6837\u672c\u90e8\u5206\uff0c\u548c\u51c6\u786e\u7387\u4e4b\u95f4\u4e5f\u5b58\u5728\u6298\u4e2d\u3002 \u5bf9\u4e8e\u57fa\u7ebf\u6a21\u578b\u800c\u8a00\uff0cReLU \u53ca\u5176\u53d8\u79cd\u662f\u7406\u60f3\u7684\u6fc0\u6d3b\u51fd\u6570\u3002 \u5e26\u52a8\u91cf\u548c\u5b66\u4e60\u7387\u8870\u51cf\u7684 SGD \u662f\u57fa\u7ebf\u4f18\u5316\u7b97\u6cd5\u4e2d\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\u8870\u51cf\u65b9\u6cd5\u5305\u62ec\uff1a \u7ebf\u6027\u8870\u51cf\u76f4\u5230\u4e00\u4e2a\u56fa\u5b9a\u5c0f\u7684\u5b66\u4e60\u7387\u3002 \u6307\u6570\u8870\u51cf\u3002 \u6bcf\u6b21\u9a8c\u8bc1\u8bef\u5dee\u4e0d\u53d8\u65f6\u51cf\u5c11 2 \u5230 10 \u5206\u4e4b\u4e00\u3002 \u53e6\u4e00\u4e2a\u4e0d\u9519\u7684\u57fa\u7ebf\u4f18\u5316\u7b97\u6cd5\u662f Adam\u3002 \u5982\u679c\u4f18\u5316\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u7acb\u9a6c\u4f7f\u7528\u6279\u91cf\u5f52\u4e00\u5316\u3002 \u5982\u679c\u8bad\u7ec3\u96c6\u4e0d\u8db3 10M\uff0c\u4e00\u5f00\u59cb\u5c31\u91c7\u7528\u4e2d\u7b49\u5f3a\u5ea6\u7684\u6b63\u5219\u9879\u3002 \u57fa\u672c\u4e0a\u80af\u5b9a\u8981\u7528 early stopping\u3002 \u5728\u5927\u591a\u6570\u7ed3\u6784\u4e2d dropout \u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\u6279\u91cf\u5f52\u4e00\u5316\u4e5f\u662f\u4e2a\u53ef\u9009\u7684\u66ff\u4ee3\u54c1\u3002 \u5982\u679c\u5f53\u524d\u7684\u95ee\u9898\u5df2\u7ecf\u88ab\u7814\u7a76\u70c2\u4e86\uff0c\u76f4\u63a5\u62f7\u8d1d\u6a21\u578b\u5c31\u662f\u4e2a\u4e0d\u9519\u4e3b\u610f\uff0c\u6216\u8bb8\u53ef\u4ee5\u62f7\u8d1d\u8bad\u7ec3\u8fc7\u7684\u6a21\u578b\u3002 \u5982\u679c\u5df2\u77e5\u65e0\u76d1\u7763\u5b66\u4e60\u5bf9\u4e8e\u4f60\u7684\u5e94\u7528\u5f88\u91cd\u8981\uff08\u4f8b\u5982 NLP \u4e2d\u7684\u8bcd\u5d4c\u5165\uff09\uff0c\u90a3\u4e48\u5728\u57fa\u7ebf\u4e2d\u5c31\u628a\u5b83\u5305\u542b\u8fdb\u6765\u3002 \u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\uff1a \u5982\u679c\u65e0\u6cd5\u83b7\u5f97\u66f4\u591a\u7684\u6570\u636e\uff0c\u6700\u540e\u7684\u529e\u6cd5\u662f\u5c1d\u8bd5\u63d0\u5347\u5b66\u4e60\u7b97\u6cd5\u3002 \u4f7f\u7528\u5bf9\u6570\u6bd4\u4f8b\u7684\u5b66\u4e60\u66f2\u7ebf\u6765\u51b3\u5b9a\u8fd8\u9700\u8981\u591a\u5c11\u6570\u636e\u3002 \u5982\u679c\u8bad\u7ec3\u6027\u80fd\u5f88\u5dee\uff0c\u589e\u52a0\u6a21\u578b\u7684\u5927\u5c0f\uff0c\u8c03\u6574\u5b66\u4e60\u7b97\u6cd5\u3002\u5982\u679c\u8fd8\u662f\u5f88\u5dee\uff0c\u90a3\u662f\u6570\u636e\u8d28\u91cf\u95ee\u9898\uff0c\u91cd\u65b0\u5f00\u59cb\u6536\u96c6\u66f4\u5e72\u51c0\u7684\u6570\u636e\u6216\u66f4\u591a\u7684\u7279\u5f81\u3002 \u5982\u679c\u8bad\u7ec3\u6027\u80fd\u4e0d\u9519\u4f46\u662f\u6d4b\u8bd5\u6027\u80fd\u5f88\u5dee\uff0c\u5728\u53ef\u884c\u7684\u60c5\u51b5\u4e0b\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\u3002\u6216\u8005\uff0c\u5c1d\u8bd5\u964d\u4f4e\u6a21\u578b\u7684\u5927\u5c0f\u6216\u589e\u52a0\u6b63\u5219\u5f3a\u5ea6\u3002\u5982\u679c\u8fd9\u4e9b\u6ca1\u6709\u5e2e\u52a9\uff0c\u90a3\u4f60\u7684\u786e\u9700\u8981\u66f4\u591a\u7684\u6570\u636e\u3002 \u5b66\u4e60\u7387\u662f\u6700\u91cd\u8981\u7684\u8d85\u53c2\u6570\uff0c\u56e0\u4e3a\u5b83\u4ee5\u4e00\u79cd\u590d\u6742\u7684\u65b9\u5f0f\u63a7\u5236\u7740\u6a21\u578b\u7684\u6709\u6548\u5bb9\u91cf\u3002\u5982\u679c\u65f6\u95f4\u6709\u9650\uff0c\u5c31\u8c03\u5b83\u3002\u8c03\u5176\u4ed6\u7684\u8d85\u53c2\u6570\u9700\u8981\u76d1\u89c6\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8bef\u5dee\u6765\u5224\u65ad\u6a21\u578b\u662f\u6b20\u62df\u5408\u8fd8\u662f\u8fc7\u62df\u5408\u3002 \u5982\u679c\u8bad\u7ec3\u8bef\u5dee\u9ad8\u4e8e\u76ee\u6807\u8bef\u5dee\uff0c\u589e\u52a0\u5bb9\u91cf\u3002\u5982\u679c\u6ca1\u6709\u4f7f\u7528\u6b63\u5219\u9879\uff0c\u5e76\u786e\u5b9a\u4f18\u5316\u7b97\u6cd5\u5de5\u4f5c\u6b63\u786e\uff0c\u4f7f\u7528\u66f4\u591a\u7684\u9690\u5c42\u3002 \u5982\u679c\u6d4b\u8bd5\u8bef\u5dee\u9ad8\u4e8e\u76ee\u6807\u8bef\u5dee\u3002\u90a3\u4e48\u8f83\u5927\u7684\u6a21\u578b\u52a0\u5408\u9002\u7684\u6b63\u5219\u4f1a\u5e26\u6765\u6700\u597d\u7684\u6027\u80fd\u3002 \u53ea\u8981\u8bad\u7ec3\u8bef\u5dee\u5f88\u4f4e\uff0c\u4f60\u603b\u662f\u53ef\u4ee5\u901a\u8fc7\u6536\u96c6\u66f4\u591a\u6570\u636e\u6765\u51cf\u4f4e\u6cdb\u5316\u8bef\u5dee\u3002 \u7f51\u683c\u641c\u7d22\uff1a\u901a\u5e38\u5728\u5c11\u4e8e\u56db\u4e2a\u8d85\u53c2\u6570\u65f6\u4f7f\u7528\u3002 \u901a\u5e38\u6700\u597d\u4f7f\u7528\u5bf9\u6570\u5c3a\u5ea6\u6765\u6311\u9009\u503c\uff0c\u5e76\u4e14\u4e0d\u65ad\u91cd\u590d\u6765\u51cf\u5c11\u641c\u7d22\u8303\u56f4\u3002 \u8ba1\u7b97\u91cf\u968f\u7740\u8d85\u53c2\u6570\u7684\u6570\u91cf\u6307\u6570\u589e\u52a0\uff0c\u5373\u4f7f\u662f\u5e76\u884c\u4e5f\u4e0d\u80fd\u6709\u5f88\u597d\u7684\u5e2e\u52a9\u3002 \u968f\u5373\u641c\u7d22\uff1a\u4f7f\u7528\u8d77\u6765\u5f88\u7b80\u5355\uff0c\u76f8\u6bd4\u4e8e\u7f51\u683c\u641c\u7d22\u66f4\u5feb\u6536\u655b\u5230\u597d\u7684\u8d85\u53c2\u6570\u3002 \u5728\u51e0\u4e2a\u8d85\u53c2\u6570\u4e0d\u662f\u5f88\u5f3a\u70c8\u7684\u5f71\u54cd\u6027\u80fd\u6307\u6807\u65f6\uff0c\u968f\u673a\u641c\u7d22\u76f8\u5bf9\u4e8e\u7f51\u683c\u641c\u7d22\u53ef\u4ee5\u8fbe\u5230\u6307\u6570\u7ea7\u522b\u7684\u6548\u7387\u3002 \u6211\u4eec\u4e5f\u8bb8\u8981\u91cd\u590d\u8fd0\u884c\u5b83\u6765\u5f97\u5230\u66f4\u597d\u7684\u7ed3\u679c\u3002 \u968f\u673a\u641c\u7d22\u6bd4\u7f51\u683c\u641c\u7d22\u5feb\uff0c\u56e0\u4e3a\u5b83\u4e0d\u9700\u8981\u6307\u6570\u7ea7\u522b\u7684\u8fd0\u884c\u3002 \u901a\u5e38\u4e0d\u5efa\u8bae\u57fa\u4e8e\u8d85\u53c2\u6570\u6765\u8c03\u6574\u6a21\u578b\uff0c\u56e0\u4e3a\u5b83\u5f88\u5c11\u8d85\u8fc7\u4eba\u7c7b\u5e76\u4e14\u7ecf\u5e38\u5931\u8d25\u3002 \u8c03\u8bd5\u7b56\u7565\uff1a \u53ef\u89c6\u5316\u6a21\u578b\u7684\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u67e5\u770b\u56fe\u50cf\u6837\u672c\uff0c\u548c\u6a21\u578b\u68c0\u6d4b\u60c5\u51b5\u3002\u8fd9\u53ef\u4ee5\u770b\u5230\u91cf\u5316\u7684\u6027\u80fd\u6307\u6807\u662f\u5426\u5408\u7406\u3002 \u53ef\u89c6\u5316\u6700\u5dee\u7684\u9519\u8bef\u60c5\u51b5\uff1a\u8fd9\u53ef\u4ee5\u53d1\u73b0\u9884\u5904\u7406\u548c\u6253\u6807\u7b7e\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002 \u5f53\u8bad\u7ec3\u8bef\u5dee\u592a\u9ad8\u65f6\u5148\u62df\u5408\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\uff1a\u8fd9\u80fd\u68c0\u67e5\u51fa\u662f\u6b20\u62df\u5408\u95ee\u9898\u8fd8\u662f\u8f6f\u4ef6\u7f3a\u9677\u3002 \u76d1\u89c6\u6fc0\u6d3b\u548c\u68af\u5ea6\u7684\u76f4\u65b9\u56fe\uff1a\u5b8c\u6210\u5927\u6982\u4e00\u4e2a epoch\u3002\u8fd9\u80fd\u544a\u8bc9\u6211\u4eec\u795e\u7ecf\u5143\u662f\u5426\u9971\u548c\u53ca\u5176\u9971\u548c\u9891\u7387\u3002\u68af\u5ea6\u503c\u5e94\u8be5\u662f\u53c2\u6570\u76841%\u5de6\u53f3\u3002\u7a00\u758f\u7684\u6570\u636e\uff08\u5982 NLP\uff09\u6709\u5f88\u591a\u53c2\u6570\u5f88\u5c11\u66f4\u65b0\uff0c\u4e00\u5b9a\u8981\u8bb0\u5f97\u8fd9\u4e00\u70b9\u3002 12. \u5e94\u7528 \u00b6 \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u5f02\u6b65 SGD\u3002\u6bcf\u4e00\u6b65\u7684\u5e73\u5747\u63d0\u5347\u662f\u5f88\u5c0f\u7684\uff0c\u4f46\u662f\u6b65\u9aa4\u901f\u7387\u52a0\u5feb\u4e5f\u5bfc\u81f4\u4e86\u6574\u4f53\u7684\u52a0\u5feb\u3002 \u7ea7\u8054\uff08cascade\uff09\u5206\u7c7b\u5668\u662f\u76ee\u6807\u68c0\u6d4b\u4e2d\u4e00\u4e2a\u9ad8\u6548\u7684\u65b9\u6cd5\u3002\u4e00\u4e2a\u5206\u7c7b\u5668\u6709\u9ad8\u53ec\u56de\u7387\uff0c\u53e6\u4e00\u4e2a\u6709\u9ad8\u7cbe\u786e\u7387\uff0c\u597d\u7684\uff0c\u7ed3\u679c\u6709\u4e86\u3002 \u96c6\u6210\u65b9\u6cd5\u4e2d\u4e00\u4e2a\u51cf\u5c11\u63a8\u7406\u65f6\u95f4\u7684\u65b9\u6cd5\u662f\u8bad\u7ec3\u4e00\u4e2a\u63a7\u5236\u5668\u6765\u6311\u9009\u54ea\u4e2a\u7f51\u7edc\u5e94\u8be5\u6765\u505a\u63a8\u7406\u3002 \u6807\u51c6\u5316\u50cf\u7d20\u5c3a\u5ea6\u662f\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u552f\u4e00\u4e00\u4e2a\u5f3a\u5236\u7684\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u901a\u5e38\u662f\u4e00\u4e2a\u5b89\u5168\u7684\u8ba1\u7b97\u673a\u89c6\u89c9\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u5c3a\u5ea6\u53c2\u6570\u6216\u8005\u53ef\u4ee5\u8bbe\u7f6e\u4e3a 1\uff0c\u6216\u8005\u8ba9\u6bcf\u4e2a\u50cf\u7d20\u5728\u6574\u4f53\u6837\u672c\u4e0a\u6709\u63a5\u8fd11\u7684\u6807\u51c6\u68af\u5ea6\u3002 \u8fd1\u4f3c\u526a\u5207\u7684\u56fe\u50cf\u6570\u636e\u96c6\u53ef\u4ee5\u5b89\u5168\u7684\u8bbe\u7f6e \u03bb=0, \u03f5=1e\u22128\u3002 \u5c0f\u7684\u968f\u673a\u526a\u5207\u7684\u56fe\u50cf\u6570\u636e\u96c6\u9700\u8981\u66f4\u9ad8\u7684\u6b63\u5219\u5f3a\u5ea6\uff0c\u4f8b\u5982 \u03bb=10, \u03f5=0\u3002 \u5168\u5c40\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\uff08GCN\uff09\u662f\u5176\u4e2d\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4f46\u662f\u5b83\u5728\u4f4e\u5bf9\u6bd4\u5ea6\u7684\u60c5\u51b5\u4e0b\u4f1a\u964d\u4f4e\u8fb9\u7f18\u7684\u68c0\u6d4b\u3002 \u5c40\u90e8\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u901a\u5e38\u53ef\u4ee5\u7528\u5206\u79bb\u5377\u79ef\u8ba1\u7b97\u7279\u5f81\u56fe\u7684\u5c40\u90e8\u5747\u503c/\u65b9\u5dee\u6765\u5b9e\u73b0\uff0c\u7136\u540e\u5728\u4e0d\u540c\u7684\u7279\u5f81\u56fe\u4e0a\u505a\u5143\u7d20\u7ea7\u522b\u51cf/\u9664\u3002\u76f8\u6bd4\u4e8e\u5168\u5c40\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u66f4\u80fd\u51f8\u663e\u8fb9\u7f18\u3002 \u5728 NLP \u7684\u5b9e\u8df5\u4e2d\uff0c\u5206\u5c42 softmax \u76f8\u6bd4\u4e8e\u57fa\u4e8e\u91c7\u6837\u7684\u65b9\u6cd5\u6d4b\u8bd5\u7ed3\u679c\u66f4\u5dee\u3002 \u7b2c\u4e09\u90e8\u5206 \u6df1\u5ea6\u5b66\u4e60\u7814\u7a76 13. \u7ebf\u6027\u56e0\u5b50\u6a21\u578b \u00b6 \u7ebf\u6027\u56e0\u5b50\u6a21\u578b\u53ef\u4ee5\u6269\u5c55\u5230\u81ea\u52a8\u7f16\u7801\u5668\u548c\u6df1\u5ea6\u6982\u7387\u6a21\u578b\uff0c\u5b83\u4eec\u505a\u76f8\u540c\u7684\u4efb\u52a1\u4f46\u662f\u66f4\u7075\u6d3b\u66f4\u5f3a\u5927\u3002 14. \u81ea\u52a8\u7f16\u7801\u5668 \u00b6 \u7a00\u758f\u81ea\u52a8\u7f16\u7801\u5668\u5728\u5b66\u4e60\u7279\u5f81\u5982\u5206\u7c7b\u7b49\u4efb\u52a1\u4e0a\u8868\u73b0\u4e0d\u9519\u3002 \u81ea\u52a8\u7f16\u7801\u5668\u5728\u5b66\u4e60\u9690\u542b\u53d8\u91cf\u89e3\u91ca\u8f93\u5165\u65b9\u9762\u5f88\u6709\u7528\u3002\u5b83\u4eec\u53ef\u4ee5\u5b66\u5230\u6709\u7528\u7684\u7279\u5f81\u3002 \u867d\u7136\u5f88\u591a\u81ea\u52a8\u7f16\u7801\u5668\u53ea\u6709\u4e00\u4e2a\u7f16\u7801/\u89e3\u7801\u5c42\uff0c\u4f46\u5b83\u4eec\u6709\u6df1\u5ea6\u524d\u9988\u7f51\u7edc\u4e00\u6837\u7684\u4f18\u70b9\u3002 \u5728\u5f3a\u5316\u5bf9\u6bd4\u5ea6\u4f8b\u5982\u7a00\u758f\u6027\u65b9\u9762\u5c24\u5176\u6709\u7528\u3002 \u6df1\u5ea6\u51cf\u5c11\u4e86\u6307\u6570\u7ea7\u522b\u7684\u8ba1\u7b97\u91cf\uff0c\u4ee5\u53ca\u8868\u793a\u67d0\u4e9b\u51fd\u6570\u6240\u9700\u8bad\u7ec3\u6570\u636e\u7684\u6570\u91cf\u3002 \u901a\u5e38\u8bad\u7ec3\u6df1\u5ea6\u7f16\u7801\u5668\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u4e00\u7cfb\u5217\u6d45\u7684\u81ea\u52a8\u7f16\u7801\u5668\u6765\u8d2a\u5fc3\u7684\u9884\u8bad\u7ec3\u6df1\u5ea6\u7ed3\u6784\u3002 15. \u8868\u793a\u5b66\u4e60 \u00b6 \u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u4e00\u4e2a\u597d\u7684\u8868\u793a\u53ef\u4ee5\u8ba9\u540e\u7eed\u7684\u5b66\u4e60\u4efb\u52a1\u66f4\u52a0\u5bb9\u6613\u3002\u4f8b\u5982\u76d1\u7763\u524d\u9988\u7f51\u7edc\uff1a\u6bcf\u4e00\u5c42\u90fd\u4e3a\u6700\u540e\u7684\u5206\u7c7b\u5c42\u5b66\u4e60\u4e00\u4e2a\u66f4\u597d\u7684\u8868\u793a\u3002 \u8d2a\u5fc3\u7684\u5c42\u95f4\u65e0\u76d1\u7763\u8bad\u7ec3\u5bf9\u4e8e\u5206\u7c7b\u6d4b\u8bd5\u8bef\u5dee\u6709\u5e2e\u52a9\uff0c\u4f46\u662f\u5176\u4ed6\u4efb\u52a1\u4e0a\u4e0d\u884c\u3002 \u5bf9\u4e8e\u56fe\u50cf\u5206\u7c7b\u6ca1\u5565\u4f5c\u7528\uff0c\u4f46\u662f\u5bf9\u4e8e NLP \u5f88\u6709\u5e2e\u52a9\uff08\u4f8b\u5982\u8bcd\u5d4c\u5165\uff09\uff0c\u8fd9\u662f\u56e0\u4e3a\u521d\u59cb\u8868\u793a\u975e\u5e38\u5dee\u3002 \u5728\u6807\u7b7e\u6837\u672c\u5f88\u5c11\uff0c\u6216\u65e0\u6807\u7b7e\u6837\u672c\u5f88\u5927\u7684\u65f6\u5019\uff0c\u6b63\u5219\u5668\u975e\u5e38\u6709\u7528\u3002 \u5728\u8981\u5b66\u4e60\u7684\u51fd\u6570\u6781\u5176\u590d\u6742\u7684\u65f6\u5019\u5b83\u6700\u6709\u7528\u3002 \u6839\u636e\u76d1\u7763\u9636\u6bb5\u7684\u9a8c\u8bc1\u96c6\u8bef\u5dee\u6765\u9009\u62e9\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u8d85\u53c2\u6570\u3002 \u65e0\u76d1\u7763\u9884\u8bad\u7ec3\u57fa\u672c\u5df2\u7ecf\u88ab\u629b\u5f03\u4e86\uff0c\u9664\u4e86 NLP \u9886\u57df\uff08\u4f8b\u5982\u8bcd\u5d4c\u5165\uff09\u3002 \u5728\u6709\u4e9b\u7279\u5f81\u5bf9\u4e8e\u4e0d\u540c\u7684\u4efb\u52a1\u8bbe\u7f6e\u6709\u5e2e\u52a9\u7684\u65f6\u5019\uff0c\u8fc1\u79fb\u5b66\u4e60\uff0c\u591a\u4efb\u52a1\u5b66\u4e60\u548c\u57df\u9002\u5e94\u90fd\u53ef\u4ee5\u901a\u8fc7\u8868\u793a\u5b66\u4e60\u6765\u5b8c\u6210\u3002 \u5f53\u4e00\u4e2a\u5f88\u590d\u6742\u7684\u7ed3\u6784\u53ef\u4ee5\u7528\u66f4\u5c11\u7684\u53c2\u6570\u7d27\u51d1\u8868\u793a\u65f6\uff0c\u5206\u5e03\u5f0f\u8868\u793a\u76f8\u6bd4\u4e8e\u975e\u5206\u5e03\u5f0f\u8868\u793a\u66f4\u5177\u6709\u7edf\u8ba1\u4f18\u52bf\u3002\u4e00\u4e9b\u4f20\u7edf\u7684\u975e\u5206\u5e03\u5f0f\u7b97\u6cd5\u80fd\u6cdb\u5316\u662f\u7531\u4e8e\u5176\u5e73\u6ed1\u7684\u5047\u8bbe\uff0c\u4f46\u662f\u4f1a\u53d7\u9650\u4e8e\u7ef4\u5ea6\u8bc5\u5492\u3002 16. \u6df1\u5ea6\u5b66\u4e60\u7684\u7ed3\u6784\u5316\u6982\u7387\u6a21\u578b \u00b6 \u7ed3\u6784\u5316\u6982\u7387\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6846\u67b6\uff0c\u7528\u4e8e\u5bf9\u968f\u673a\u95f4\u9694\u7684\u76f4\u63a5\u4ea4\u4e92\u8fdb\u884c\u5efa\u6a21\uff0c\u8fd9\u4f7f\u5f97\u6a21\u578b\u53ef\u4ee5\u4f7f\u7528\u66f4\u5c11\u7684\u53c2\u6570\u3002\u6b63\u56e0\u4e3a\u6b64\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5728\u66f4\u5c11\u7684\u6570\u636e\u4e0b\u53ef\u9760\u5730\u4f30\u8ba1\uff0c\u5e76\u4e14\u51cf\u5c11\u4e86\u5b58\u50a8\u6a21\u578b\uff0c\u6267\u884c\u63a8\u7406\u548c\u91c7\u6837\u7684\u8ba1\u7b97\u91cf\u3002 \u5f88\u591a\u6df1\u5ea6\u5b66\u4e60\u7684\u751f\u6210\u6a21\u578b\u6216\u6ca1\u6709\u9690\u542b\u53d8\u91cf\uff0c\u6216\u8fd9\u7528\u4e00\u5c42\u9690\u542b\u53d8\u91cf\u3002\u4ed6\u4eec\u5728\u6a21\u578b\u4e2d\u4f7f\u7528\u6df1\u5ea6\u8ba1\u7b97\u56fe\u6765\u5b9a\u4e49\u6761\u4ef6\u5206\u5e03\u3002\u8fd9\u548c\u5927\u90e8\u5206\u6df1\u5ea6\u5b66\u4e60\u5e94\u7528\u4e2d\u6709\u6bd4\u53ef\u89c2\u5bdf\u53d8\u91cf\u66f4\u591a\u7684\u9690\u542b\u53d8\u91cf\u5f62\u6210\u5f3a\u70c8\u5bf9\u6bd4\u3002\u4ed6\u4eec\u662f\u4ece\u975e\u7ebf\u6027\u4ea4\u4e92\u4e2d\u5b66\u5f97\u7684\u3002 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u9690\u542b\u53d8\u91cf\u662f\u4e0d\u53d7\u9650\u7684\uff0c\u4f46\u662f\u5f88\u96be\u901a\u8fc7\u53ef\u89c6\u5316\u6765\u89e3\u91ca\u3002 \u5faa\u73af\u4fe1\u5ff5\u4f20\u64ad\uff08loopy belief propagation\uff09\u57fa\u672c\u4e0a\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4ece\u672a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u662f\u4f7f\u7528\u5409\u5e03\u65af\u91c7\u6837\u6216\u53d8\u5206\u63a8\u65ad\u7b97\u6cd5\u8bbe\u8ba1\u7684\u3002 17. Monte Carlo\u65b9\u6cd5 \u00b6 Monte Carlo Markov Chains\uff08MCMC\uff09\u8ba1\u7b97\u91cf\u5f88\u5927\uff0c\u8fd9\u662f\u7531\u4e8e\u5728\u5e73\u8861\u5206\u5e03\u201c\u71c3\u70e7\u201d\u9700\u8981\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u4e3a\u4e86\u4fdd\u8bc1\u6837\u672c\u95f4\u4e0d\u76f8\u5173\u800c\u8ba9\u6bcfn\u4e2a\u6837\u672c\u6709\u5e8f\u3002 \u5f53\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4eceMCMC\u91c7\u6837\u65f6\uff0c\u901a\u5e38\u9700\u8981\u8fd0\u884c\u4e00\u5b9a\u6570\u91cf\u7684\u5e76\u884c\u9a6c\u5c14\u79d1\u592b\u94fe\uff0c\u6570\u91cf\u4e0e\u4e00\u4e2aminibatch\u7684\u6837\u672c\u6570\u4e00\u6837\uff0c\u8ba9\u540e\u4ece\u4e2d\u91c7\u6837\u3002\u901a\u5e38\u4f7f\u7528\u7684\u6570\u5b57\u662f100\u3002 \u9a6c\u5c14\u79d1\u592b\u94fe\u4f1a\u5230\u8fbe\u5e73\u8861\u72b6\u6001\uff0c\u4f46\u6211\u4eec\u4e0d\u77e5\u9053\u8981\u591a\u4e45\uff0c\u9664\u975e\u5b83\u5df2\u7ecf\u5230\u8fbe\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u6d4b\u8bd5\u5b83\u662f\u5426\u6df7\u5408\u4e86\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u6bd4\u5982\u624b\u52a8\u68c0\u67e5\u6837\u672c\u6216\u6d4b\u91cf\u8fde\u7eed\u6837\u672c\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u3002 \u867d\u7136 Metropolis-Hastings \u7b97\u6cd5\u5728\u5176\u4ed6\u5b66\u79d1\u4e2d\u7ecf\u5e38\u4e0e\u9a6c\u5c14\u53ef\u592b\u94fe\u4e00\u8d77\u4f7f\u7528\uff0c\u4f46 Gibbs \u62bd\u6837\u662f\u6df1\u5ea6\u5b66\u4e60\u7684 de-facto \u65b9\u6cd5\u3002 19. \u8fd1\u4f3c\u63a8\u65ad \u00b6 Maximum a posteriori (MAP) \u63a8\u65ad\u901a\u5e38\u7528\u4e8e\u7279\u5f81\u63d0\u53d6\u548c\u5b66\u4e60\u673a\u5236\uff0c\u4e3b\u8981\u662f\u7a00\u758f\u7f16\u7801\u6a21\u578b\u3002 20. \u6df1\u5ea6\u751f\u6210\u6a21\u578b \u00b6 \u73bb\u5c14\u5179\u66fc\u673a\u7684\u53d8\u79cd\u65e9\u5df2\u8d85\u8fc7\u4e86\u6700\u521d\u7684\u6d41\u884c\u5ea6\u3002\u73bb\u5c14\u5179\u66fc\u673a\u5bf9\u4e8e\u89c2\u5bdf\u53d8\u91cf\u5c31\u50cf\u4e00\u4e2a\u7ebf\u6027\u9884\u6d4b\u5668\uff0c\u4f46\u662f\u5bf9\u4e8e\u672a\u89c2\u5bdf\u5230\u7684\u53d8\u91cf\u66f4\u52a0\u5f3a\u5927\u3002 \u4ece\u4e00\u7cfb\u5217\u53d7\u9650\u73bb\u5c14\u5179\u66fc\u673a\u4e2d\u521d\u59cb\u5316\u4e00\u4e2a\u6df1\u5ea6\u73bb\u5c14\u5179\u66fc\u673a\u65f6\uff0c\u7a0d\u5fae\u4fee\u6539\u4e0b\u53c2\u6570\u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002 \u4eca\u5929\u5f88\u5c11\u4f7f\u7528\u6df1\u5ea6\u4fe1\u5ff5\u7f51\u7edc\uff08DBN\uff09\uff0c\u56e0\u4e3a\u5176\u4ed6\u7b97\u6cd5\u5df2\u7ecf\u8d85\u8fc7\u5b83\u4e86\uff0c\u4f46\u662f\u5728\u5386\u53f2\u4e0a\u6709\u91cd\u8981\u5730\u4f4d\u3002\u7531\u4e8e DBN \u662f\u751f\u6210\u6a21\u578b\uff0c\u4e00\u4e2a\u8bad\u7ec3\u8fc7\u7684 DBN \u53ef\u4ee5\u7528\u4e8e\u521d\u59cb\u5316\u4e00\u4e2a MLP \u7684\u6743\u91cd\u6765\u505a\u5206\u7c7b\u3002 \u3010\u7565\u53bb\u73bb\u5c14\u5179\u66fc\u673a\u7684\u90e8\u5206\u5185\u5bb9\u3011 \u867d\u7136\u53d8\u5206\u81ea\u52a8\u7f16\u7801\u5668\uff08VAE\uff09\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5b83\u4eec\u901a\u5e38\u80fd\u5f97\u5230\u4e0d\u9519\u7684\u7ed3\u679c\uff0c\u4e5f\u662f\u6700\u540e\u7684\u751f\u6210\u6a21\u578b\u4e4b\u4e00\u3002\u6765\u81ea VAE \u7684\u56fe\u50cf\u901a\u5e38\u6a21\u7cca\uff0c\u539f\u56e0\u672a\u77e5\u3002 \u4e0d\u6536\u655b\u662f GAN \u6b20\u62df\u5408\uff08\u4e00\u4e2a\u7f51\u7edc\u62b5\u8fbe\u5c40\u90e8\u6700\u4f18\uff0c\u53e6\u4e00\u4e2a\u62b5\u8fbe\u5c40\u90e8\u6700\u5927\uff09\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u957f\u5ea6\u8fd8\u4e0d\u6e05\u695a\u3002 \u867d\u7136 GAN \u6709\u7a33\u5b9a\u6027\u7684\u95ee\u9898\uff0c\u4f46\u662f\u901a\u5e38\u5728\u7cbe\u5fc3\u9009\u62e9\u7684\u6a21\u578b\u548c\u8d85\u53c2\u6570\u60c5\u51b5\u4e0b\u6548\u679c\u5f88\u4e0d\u9519\u3002 GAN \u7684\u4e00\u4e2a\u53d8\u79cd LAPGAN\uff0c\u4ece\u4f4e\u5206\u8fa8\u7387\u5f00\u59cb\u4e0d\u65ad\u52a0\u5165\u7ec6\u8282\uff0c\u5b83\u7684\u7ed3\u679c\u7ecf\u5e38\u80fd\u9a97\u8fc7\u4eba\u7c7b\u3002 \u4e3a\u4e86\u4fdd\u8bc1 GAN \u7684\u751f\u6210\u5668\u4e0d\u4f1a\u5728\u4efb\u610f\u70b9\u53d8\u62100\u6982\u7387\uff0c\u9700\u8981\u5728\u6700\u540e\u4e00\u5c42\u7ed9\u6240\u6709\u56fe\u50cf\u52a0\u5165\u9ad8\u65af\u566a\u58f0\u3002 \u5728 GAN \u7684\u5224\u522b\u5668\u4e2d\u4e00\u5b9a\u8981\u4f7f\u7528 dropout\uff0c\u4e0d\u8fd9\u6837\u505a\u7ed3\u679c\u5f88\u5dee\u3002 \u751f\u6210\u77e9\u5339\u914d\u7f51\u7edc\u7684\u89c6\u89c9\u6837\u672c\u4ee4\u4eba\u5931\u671b\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u5c06\u5b83\u4eec\u4e0e\u81ea\u52a8\u7f16\u7801\u5668\u7ed3\u5408\u6765\u6539\u8fdb\u3002 \u5728\u751f\u6210\u56fe\u50cf\u65f6\uff0c\u4f7f\u7528\u8f6c\u7f6e\u5377\u79ef\u64cd\u4f5c\u901a\u5e38\u4f1a\u4ea7\u751f\u66f4\u771f\u5b9e\u7684\u56fe\u50cf\uff0c\u76f8\u6bd4\u4e8e\u6ca1\u6709\u53c2\u6570\u5171\u4eab\u7684\u5168\u8fde\u63a5\u5c42\u4f7f\u7528\u66f4\u5c11\u7684\u53c2\u6570\u3002 \u5373\u4f7f\u5728\u5377\u79ef\u751f\u6210\u7f51\u7edc\u4e2d\u4e0a\u91c7\u6837\u7684\u5047\u8bbe\u4e0d\u771f\u5b9e\uff0c\u4f46\u662f\u751f\u6210\u7684\u6837\u672c\u603b\u4f53\u6765\u8bf4\u8fd8\u662f\u4e0d\u9519\u7684\u3002 \u867d\u7136\u6709\u5f88\u591a\u4f7f\u7528\u751f\u6210\u6a21\u578b\u7684\u65b9\u6cd5\u6765\u751f\u6210\u6837\u672c\uff0cMCMC \u91c7\u6837\uff0cancestral sampling \u6216\u628a\u4e8c\u8005\u7ed3\u5408\u662f\u6bd4\u8f83\u6d41\u884c\u7684\u505a\u6cd5\u3002 \u5f53\u6bd4\u8f83\u751f\u6210\u6a21\u578b\u65f6\uff0c\u9884\u5904\u7406\u7684\u6539\u53d8\uff08\u5373\u4f7f\u5f88\u5c0f\uff0c\u5f88\u5fae\u5999\uff09\u662f\u5b8c\u5168\u4e0d\u80fd\u63a5\u6536\u7684\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6539\u53d8\u5206\u5e03\u4ece\u800c\u6839\u672c\u4e0a\u6539\u53d8\u4e86\u4efb\u52a1\u3002 \u5982\u679c\u901a\u8fc7\u89c2\u5bdf\u6837\u672c\u56fe\u7247\u6765\u8861\u91cf\u751f\u6210\u6a21\u578b\uff0c\u6700\u597d\u5728\u4e0d\u77e5\u9053\u6837\u672c\u6e90\u7684\u60c5\u51b5\u4e0b\u53bb\u505a\u5b9e\u9a8c\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u4e00\u4e2a\u5dee\u7684\u6a21\u578b\u4e5f\u53ef\u80fd\u4ea7\u751f\u597d\u7684\u6837\u672c\uff0c\u5fc5\u987b\u786e\u4fdd\u6a21\u578b\u4e0d\u662f\u4ec5\u4ec5\u590d\u5236\u4e86\u8bad\u7ec3\u56fe\u7247\u3002\u4f7f\u7528\u6b27\u6c0f\u8ddd\u79bb\u6765\u8fdb\u884c\u68c0\u67e5\u3002 \u5982\u679c\u8ba1\u7b97\u4e0a\u53ef\u884c\u7684\u5316\uff0c\u6700\u597d\u7684\u8861\u91cf\u751f\u6210\u6a21\u578b\u6837\u672c\u7684\u65b9\u6cd5\u662f\u8bc4\u4f30\u6a21\u578b\u5206\u914d\u7ed9\u6d4b\u8bd5\u6570\u636e\u7684\u5bf9\u6570\u4f3c\u7136\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u6709\u7f3a\u9677\uff0c\u4f8b\u5982\u4e00\u4e2a\u56fa\u5b9a\u7684\u7b80\u5355\u56fe\u7247\uff08\u5982\u7a7a\u767d\u80cc\u666f\uff09\u6709\u5f88\u9ad8\u7684\u4f3c\u7136\u3002 \u751f\u6210\u6a21\u578b\u6709\u5f88\u591a\u7528\u5904\uff0c\u56e0\u6b64\u6839\u636e\u7528\u9014\u6765\u6311\u9009\u8bc4\u4f30\u6307\u6807\u3002 \u4f8b\u5982\uff0c\u4e00\u4e9b\u751f\u6210\u6a21\u578b\u66f4\u64c5\u957f\u4e3a\u6700\u771f\u5b9e\u7684\u70b9\u5206\u914d\u9ad8\u6982\u7387\uff0c\u800c\u5176\u4ed6\u4e00\u4e9b\u6a21\u578b\u7ed9\u4e0d\u771f\u5b9e\u7684\u70b9\u4e0d\u5206\u914d\u9ad8\u6982\u7387\u505a\u7684\u66f4\u597d\u3002 \u5373\u4f7f\u5f53\u6307\u6807\u7f29\u5c0f\u5230\u6700\u5408\u9002\u7684\u4efb\u52a1\u4e0a\uff0c\u6240\u6709\u7684\u6307\u6807\u4e5f\u90fd\u6709\u5f88\u4e25\u91cd\u7684\u95ee\u9898\u3002 19 \u9875\u82b1\u4e66\u7cbe\u9ad3\u7b14\u8bb0\uff01\u4f60\u53ef\u80fd\u6b63\u9700\u8981\u8fd9\u4efd\u77e5\u8bc6\u6e05\u5355 \u6df1\u5ea6\u5b66\u4e60\u5723\u7ecf\u201c\u82b1\u4e66\u201d\u6838\u5fc3\u7b14\u8bb0\u3001\u4ee3\u7801\u53d1\u5e03","title":"\u82b1\u4e66\u7ecf\u9a8c\u6cd5\u5219"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#tldr","text":"\u5c3d\u53ef\u80fd\u4f7f\u7528\u8fc1\u79fb\u5b66\u4e60\u3002\u5426\u5219\uff0c\u5bf9\u4e8e\u5df2\u7ecf\u662f\u5e7f\u6cdb\u7814\u7a76\u7684\u95ee\u9898\uff0c\u5148\u4ece\u590d\u5236\u7f51\u7edc\u7ed3\u6784\u5f00\u59cb\u3002 \u7f51\u7edc\u7ed3\u6784\u5e94\u8be5\u603b\u662f\u7531\u5b9e\u9a8c\u548c\u9a8c\u8bc1\u8bef\u5dee\u6765\u786e\u5b9a\u3002 \u66f4\u6df1\uff08\u5c42\u591a\uff09\uff0c\u66f4\u6d45\uff08\u5c42\u5c11\uff09\u7684\u7f51\u7edc\u66f4\u96be\u4f18\u5316\uff0c\u4f46\u662f\u66f4\u5bb9\u6613\u6709\u66f4\u597d\u7684\u6cdb\u5316\u8bef\u5dee\u3002 \u4e00\u5b9a\u8981\u4f7f\u7528 early stopping\uff08\u65e9\u505c\uff09\uff0c\u4e24\u79cd\u65b9\u6cd5\uff1a \u5728\u6574\u4e2a\u6570\u636e\u96c6\u4e0a\u4f7f\u7528\u65b0\u7684\u53c2\u6570\u518d\u6b21\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u5230\u8fbe\u5148\u524d\u6a21\u578b\u7684\u65e9\u505c\u70b9\u65f6\u505c\u6b62\u8bad\u7ec3\u3002 \u4fdd\u7559\u65e9\u505c\u70b9\u65f6\u7684\u53c2\u6570\uff0c\u7ee7\u7eed\u5728\u6240\u6709\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u5f53\u5e73\u5747\u8bad\u7ec3\u8bef\u5dee\u964d\u5230\u539f\u5148\u65e9\u505c\u70b9\u4ee5\u4e0b\u65f6\u505c\u6b62\u3002 \u4f7f\u7528 dropout \u6216\u8bb8\u662f\u4e2a\u597d\u4e3b\u610f\u3002 \u4f7f\u7528 0.8 \u4f5c\u4e3a\u8f93\u5165\u5c42\u7684\u4fdd\u7559\u6982\u7387\uff0c0.5 \u4f5c\u4e3a\u9690\u5c42\u7684\u4fdd\u7559\u6982\u7387\u3002 dropout \u4f1a\u9700\u8981\u66f4\u5927\u7684\u7f51\u7edc\u548c\u66f4\u957f\u7684\u8fed\u4ee3\u3002 ReLU \u662f\u7406\u60f3\u7684\u6fc0\u6d3b\u51fd\u6570\u3002\u5b83\u4e5f\u6709\u7f3a\u9677\uff0c\u56e0\u6b64\u4f7f\u7528 leaky ReLU \u6216 noisy ReLU \u6216\u8bb8\u6709\u6027\u80fd\u63d0\u5347\uff0c\u4f46\u662f\u4f1a\u6709\u66f4\u591a\u7684\u53c2\u6570\u8981\u8c03\u3002 \u8981\u5f97\u5230\u5dee\u4e0d\u591a\u53ef\u4ee5\u63a5\u6536\u7684\u6027\u80fd\uff0c\u81f3\u5c11\u9700\u8981\u6bcf\u4e2a\u7c7b 5000 \u4e2a\u6570\u636e\uff08>=10M\u53ef\u4ee5\u8fbe\u5230\u4eba\u7c7b\u7684\u6c34\u5e73\u6216\u66f4\u597d\uff09 \u5982\u679c\u4f4e\u4e8e 100,000\u4e2a\u6570\u636e\uff0c\u4f7f\u7528 K \u6298\u4ea4\u53c9\u9a8c\u8bc1\u800c\u4e0d\u662f train/validation/test \u5212\u5206\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528 GPU \u80fd\u505a\u5230\u7684\u6700\u5927\u7684 batch size\u3002 \u5c1d\u8bd5\u4e0d\u540c batch size\uff0c\u4ece 32 \u5f00\u59cb\u4ee5 2 \u7684\u6307\u6570\u589e\u52a0\u5230 256\uff0c\u5bf9\u4e8e\u592a\u5927\u7684\u6a21\u578b\u53ef\u4ee5\u4ece 16 \u5f00\u59cb\u3002 \u5e26\u52a8\u91cf\u548c\u5b66\u4e60\u7387\u8870\u51cf\u7684\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u662f\u4e2a\u4e0d\u9519\u7684\u5f00\u59cb\u3002 \u52a8\u91cf\u8d85\u53c2\u6570\u901a\u5e38\u7684\u503c\u6709 0.54, 0.9 \u548c 0.99\u3002\u53ef\u4ee5\u968f\u65f6\u95f4\u8c03\u6574\uff0c\u4ece\u5c0f\u503c\u5f00\u59cb\uff0c\u7136\u540e\u589e\u5927\u3002 \u6216\u8005\uff0c\u4f7f\u7528 Adam \u6216 RMSProp\u3002 \u5728\u5206\u5e03\u5f0f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4f7f\u7528\u5f02\u6b65 SGD\u3002 \u5b66\u4e60\u7387\u662f\u6700\u91cd\u8981\u7684\u8d85\u53c2\u6570\u3002\u5982\u679c\u65f6\u95f4\u6709\u9650\uff0c\u4e3b\u8981\u82b1\u65f6\u95f4\u6765\u8c03\u5b83\u3002 \u53ef\u4ee5\u901a\u8fc7\u7ed8\u5236\u5b66\u4e60\u66f2\u7ebf\uff08\u76ee\u6807\u51fd\u6570\u968f\u65f6\u95f4\u7684\u53d8\u5316\uff09\u6765\u89c2\u5bdf\u5b66\u4e60\u7387\u7684\u60c5\u51b5 \u6700\u4f18\u5b66\u4e60\u7387\u901a\u5e38\u9ad8\u4e8e\u524d 100 \u6b21\u8fed\u4ee3\u540e\u4ea7\u751f\u6700\u4f73\u6027\u80fd\u7684\u5b66\u4e60\u7387\uff0c\u4f46\u4e0d\u4f1a\u9ad8\u5230\u51fa\u73b0\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u3002 \u5bf9\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9\uff1a \u4f7f\u7528\u6570\u636e\u589e\u5f3a\uff0c\u53ea\u8981\u56fe\u50cf\u6ca1\u6709\u672c\u8d28\u4e0a\u7684\u6539\u53d8\u3002\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u662f\u53e6\u4e00\u4e2a\u5b89\u5168\u7684\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u6279\u91cf\u5f52\u4e00\u5316\uff0c\u6c60\u5316\u548c\u586b\u5145\u5728 CNN \u4e2d\u7ecf\u5e38\u4f7f\u7528\u3002\u5728\u6279\u91cf\u5f52\u4e00\u5316\u7684\u60c5\u51b5\u4e0b\u6216\u8bb8\u4e0d\u9700\u8981 dropout\u3002 \u5bf9\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff1a LSTM \u901a\u5e38\u6548\u679c\u6bd4\u5176\u4ed6\u7f51\u7edc\u597d\u3002 \u9884\u8bad\u7ec3\u7684\u8bcd\u5d4c\u5165\uff08word2vec, word2glove \u7b49\uff09\u662f\u5f88\u5f3a\u5927\u7684\u65b9\u6cd5\u3002 \u968f\u673a\u641c\u7d22\u901a\u5e38\u6bd4\u7f51\u683c\u641c\u7d22\u66f4\u5feb\u7684\u6536\u655b\u5230\u597d\u7684\u8d85\u53c2\u6570\u8bbe\u7f6e\u3002 \u8c03\u8bd5\u7b56\u7565\uff1a \u53ef\u89c6\u5316\u6a21\u578b\uff1a\u67e5\u770b\u6a21\u578b\u68c0\u6d4b\u7684\u56fe\u50cf\u6837\u672c\uff0c\u8fd9\u5bf9\u786e\u5b9a\u6027\u80fd\u6307\u6807\u662f\u5426\u5408\u7406\u6709\u5e2e\u52a9\u3002 \u53ef\u89c6\u5316\u6700\u5dee\u7684\u9519\u8bef\u60c5\u51b5\uff1a\u8fd9\u53ef\u4ee5\u53d1\u73b0\u9884\u5904\u7406\u548c\u6253\u6807\u7b7e\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002 \u5f53\u8bad\u7ec3\u8bef\u5dee\u592a\u9ad8\u65f6\u5148\u62df\u5408\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\uff1a\u8fd9\u80fd\u68c0\u67e5\u51fa\u662f\u6b20\u62df\u5408\u95ee\u9898\u8fd8\u662f\u8f6f\u4ef6\u7f3a\u9677\u3002 \u76d1\u89c6\u6fc0\u6d3b\u548c\u68af\u5ea6\u7684\u76f4\u65b9\u56fe\uff1a\u5b8c\u6210\u5927\u6982\u4e00\u4e2a epoch\u3002\u8fd9\u80fd\u544a\u8bc9\u6211\u4eec\u795e\u7ecf\u5143\u662f\u5426\u9971\u548c\u53ca\u5176\u9971\u548c\u9891\u7387\u3002\u68af\u5ea6\uff08\u503c\uff1f\uff09\u5e94\u8be5\u662f\u53c2\u6570\u7684 1% \u5de6\u53f3\u3002","title":"TL:DR"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#_1","text":"\u7b2c\u4e00\u90e8\u5206 \u5e94\u7528\u6570\u5b66\u548c\u673a\u5668\u5b66\u4e60\u57fa\u7840 1. \u4ecb\u7ecd \u6bcf\u4e2a\u7c7b\u522b\u81f3\u5c11\u9700\u8981\u5927\u6982 5000 \u4e2a\u6837\u672c\u624d\u80fd\u5f97\u5230\u53ef\u63a5\u53d7\u7684\u6027\u80fd\u3002\u5927\u6982\u6bcf\u7c7b\u9700\u8981 10M \u4e2a\u6837\u672c\u624d\u80fd\u8fbe\u5230\u4eba\u7c7b\u6c34\u5e73\u6216\u66f4\u597d\u3002 4. \u6570\u503c\u8ba1\u7b97 \u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u9677\u5165\u5c40\u90e8\u6700\u4f18\u800c\u4e0d\u662f\u5168\u5c40\u6700\u4f18\uff0c\u8fd9\u662f\u7531\u4e8e\u590d\u6742\u6027\u548c\u975e\u51f8\u4f18\u5316\u7684\u95ee\u9898\u3002 5. \u673a\u5668\u5b66\u4e60\u57fa\u7840 \u5982\u679c\u6a21\u578b\u5177\u6709\u6700\u4f18\u7684\u5bb9\u91cf\uff0c\u4f46\u662f\u5728\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8bef\u5dee\u4e4b\u95f4\u4ecd\u6709\u8f83\u5927\u5dee\u8ddd\uff0c\u53bb\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\u6765\u3002 \u901a\u5e38\u4f7f\u7528 20% \u7684\u8bad\u7ec3\u96c6\u4f5c\u4e3a\u9a8c\u8bc1\u96c6\u3002 \u5982\u679c\u6570\u636e\u5c11\u4e8e 100000 \u4e2a\u6837\u672c\uff0c\u4f7f\u7528k\u6298\u4ea4\u53c9\u9a8c\u8bc1\u800c\u4e0d\u662f\u8bad\u7ec3/\u6d4b\u8bd5\u96c6\u5212\u5206\u7684\u65b9\u6cd5\u3002 \u4f7f\u7528\u5747\u65b9\u8bef\u5dee\u65f6\uff0c\u589e\u52a0\u5bb9\u91cf\u4f1a\u964d\u4f4e\u504f\u5dee\u4f46\u662f\u4f1a\u589e\u52a0\u65b9\u5dee\u3002 \u8d1d\u53f6\u65af\u65b9\u6cd5\u5728\u8bad\u7ec3\u6570\u636e\u6709\u9650\u7684\u65f6\u5019\u6cdb\u5316\u6027\u80fd\u66f4\u597d\uff0c\u4f46\u662f\u8bad\u7ec3\u6837\u672c\u8f83\u591a\u65f6\u5b83\u7684\u8ba1\u7b97\u5f00\u9500\u5f88\u5927\u3002 \u6700\u5e38\u4f7f\u7528\u7684\u635f\u5931\u51fd\u6570\u662f\u8d1f\u5bf9\u6570\u4f3c\u7136\u3002\u56e0\u6b64\u6700\u5c0f\u5316\u635f\u5931\u51fd\u6570\u4e5f\u5c31\u662f\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u3002 \u7b2c\u4e8c\u90e8\u5206 \u6df1\u5ea6\u7f51\u7edc\uff1a\u73b0\u4ee3\u5b9e\u8df5","title":"\u5b8c\u6574\u7684\u7b14\u8bb0"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#6","text":"ReLU \u5bf9\u4e8e\u524d\u9988\u795e\u7ecf\u7f51\u7edc\u800c\u8a00\u662f\u4e00\u4e2a\u5b8c\u7f8e\u7684\u6fc0\u6d3b\u51fd\u6570\u3002 \u5b83\u6240\u57fa\u4e8e\u7684\u539f\u5219\u662f\uff0c\u63a5\u8fd1\u7ebf\u6027\u7684\u7279\u6027\u66f4\u52a0\u5bb9\u6613\u4f18\u5316\u3002 sigmoid \u5e94\u8be5\u7528\u4e8e ReLU \u4e0d\u80fd\u4f7f\u7528\u7684\u60c5\u51b5\u3002\u4f8b\u5982 RNN\uff0c\u5f88\u591a\u7684\u6982\u7387\u6a21\u578b\uff0c\u548c\u4e00\u4e9b\u81ea\u52a8\u7f16\u7801\u673a\u3002 \u5728\u57fa\u4e8e\u68af\u5ea6\u7684\u4f18\u5316\u95ee\u9898\u4e0a\uff0c\u7531\u4e8e\u68af\u5ea6\u6d88\u5931\u7684\u539f\u56e0\uff0c\u4ea4\u53c9\u71b5\u76f8\u6bd4 MSE \u548c MAE \u66f4\u597d\u3002 ReLU \u7684\u4f18\u70b9\uff1a\u51cf\u5c11\u4e86\u68af\u5ea6\u6d88\u5931\u7684\u6982\u7387\uff0c\u7a00\u758f\u6027\uff0c\u51cf\u5c11\u4e86\u8ba1\u7b97\u91cf\u3002 \u7f3a\u70b9\uff1a\u6709\u6b7b\u533a Dying ReLU\u3002\uff08leaky \u548c noisy ReLU \u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u5f15\u5165\u4e86\u989d\u5916\u7684\u53c2\u6570\uff09 \u5927\u7684\u68af\u5ea6\u5e2e\u52a9\u5b66\u4e60\u66f4\u5feb\uff0c\u4f46\u662f\u4efb\u610f\u5927\u4f1a\u5bfc\u81f4\u4e0d\u7a33\u5b9a\u3002 \u7f51\u7edc\u7ed3\u6784\u5e94\u8be5\u901a\u8fc7\u5b9e\u9a8c\u548c\u76d1\u89c6\u9a8c\u8bc1\u96c6\u8bef\u5dee\u6765\u786e\u5b9a\u3002 \u66f4\u6df1\u7684\u6a21\u578b\u51cf\u5c11\u4e86\u7528\u4e8e\u8868\u793a\u51fd\u6570\u7684\u795e\u7ecf\u5143\u6570\u91cf\uff0c\u4e5f\u964d\u4f4e\u4e86\u6cdb\u5316\u8bef\u5dee\u3002 \u76f4\u89c9\u4e0a\u8bf4\uff0c\u66f4\u6df1\u7684\u7f51\u7edc\u66f4\u597d\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u5b66\u4e60\u4e00\u7cfb\u5217\u51fd\u6570\u3002","title":"6. \u6df1\u5ea6\u524d\u9988\u7f51\u7edc"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#7","text":"\u6700\u597d\u5728\u6bcf\u5c42\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u6b63\u5219\u7cfb\u6570\uff0c\u4f46\u662f\u4f7f\u7528\u76f8\u540c\u7684\u6743\u91cd\u8870\u51cf\u3002 \u4f7f\u7528\u65e9\u505c early stopping\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u8c03\u7684\u8d85\u53c2\u6570\uff0c\u800c\u4e14\u4e5f\u51cf\u5c11\u4e86\u8ba1\u7b97\u91cf\u3002 \u5728\u6574\u4e2a\u6570\u636e\u96c6\u4e0a\u4f7f\u7528\u65b0\u7684\u53c2\u6570\u518d\u6b21\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\uff0c\u5728\u5230\u8fbe\u5148\u524d\u6a21\u578b\u7684\u65e9\u505c\u70b9\u65f6\u505c\u6b62\u8bad\u7ec3\u3002 \u4fdd\u7559\u65e9\u505c\u70b9\u65f6\u7684\u53c2\u6570\uff0c\u7ee7\u7eed\u5728\u6240\u6709\u6570\u636e\u4e0a\u8bad\u7ec3\uff0c\u5f53\u5e73\u5747\u8bad\u7ec3\u8bef\u5dee\u964d\u5230\u539f\u5148\u65e9\u505c\u70b9\u4ee5\u4e0b\u65f6\u505c\u6b62\u3002 \u6a21\u578b\u5e73\u5747\uff08bagging, boosting \u7b49\uff09\u57fa\u672c\u4e0a\u603b\u4f1a\u63d0\u9ad8\u9884\u6d4b\u6027\u80fd\uff0c\u867d\u7136\u63d0\u9ad8\u4e86\u8ba1\u7b97\u91cf\u3002 dropout \u5728\u5bbd\u5c42\u7f51\u7edc\u5de5\u4f5c\u66f4\u597d\uff0c\u56e0\u4e3a\u5b83\u51cf\u5c11\u4e86\u4ece\u8f93\u5165\u5230\u8f93\u51fa\u7684\u8def\u5f84\u3002 \u901a\u5e38\u8f93\u5165\u5c42 dropout \u4e2d\u7684\u4fdd\u7559\u6982\u7387\u662f 0.8\uff0c\u9690\u5c42\u7684\u6982\u7387\u662f 0.5\u3002 \u4f7f\u7528 dropout \u7684\u6a21\u578b\u901a\u5e38\u8981\u66f4\u5927\uff0c\u8fed\u4ee3\u66f4\u957f\u3002 \u5982\u679c\u6570\u636e\u96c6\u8db3\u591f\u5927\uff0cdropout \u6ca1\u6709\u592a\u5927\u5e2e\u52a9\u3002\u53e6\u5916\uff0c\u5728\u5f88\u5c0f\uff08<5000\uff09\u7684\u8bad\u7ec3\u6837\u672c\u4e0adropout\u7684\u4f5c\u7528\u5f88\u6709\u9650\u3002 \u6279\u91cf\u6807\u51c6\u5316\u540c\u6837\u4e5f\u5f15\u5165\u4e86\u566a\u58f0\uff0c\u8fd9\u63d0\u4f9b\u4e86\u6b63\u5219\u7684\u4f5c\u7528\uff0c\u4f46\u4e5f\u53ef\u80fd\u8ba9 dropout \u6ca1\u6709\u592a\u5927\u5fc5\u8981\u3002 \u6a21\u578b\u5e73\u5747\u4e00\u822c\u90fd\u5de5\u4f5c\u5f97\u5f88\u597d\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u6a21\u578b\u4e0d\u592a\u53ef\u80fd\u72af\u76f8\u540c\u7684\u9519\u8bef\u3002 dropout \u901a\u8fc7\u521b\u5efa\u5b50\u7f51\u7edc\u5f62\u6210\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684 bagging \u65b9\u6cd5\u3002","title":"7. \u6df1\u5ea6\u5b66\u4e60\u7684\u6b63\u5219\u9879"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#8","text":"mini-batch \u7684\u5927\u5c0f\uff08batch size\uff09\uff1a\u5927\u7684 batch size \u4f1a\u63d0\u4f9b\u66f4\u5927\u7684\u68af\u5ea6\uff0c\u4f46\u662f\u901a\u5e38\u5185\u5b58\u662f\u4e2a\u9650\u5236\u6761\u4ef6\u3002 \u8ba9\u4f60\u7684 batch size \u5728\u5185\u5b58\u5141\u8bb8\u8303\u56f4\u5185\u5c3d\u53ef\u80fd\u5927\u3002 \u5728 GPU \u4e2d\uff0c\u4ece 32 \u5230 256 \u4ee5 2 \u7684\u6307\u6570\u7ea7\u522b\u589e\u957f\uff0c\u5bf9\u4e8e\u8f83\u5927\u7684\u6a21\u578b\u53ef\u4ee5\u4ece 16 \u5f00\u59cb\u3002 \u5c0f\u7684 batch size \u56e0\u4e3a\u566a\u58f0\u7684\u539f\u56e0\u53ef\u80fd\u6709\u6b63\u5219\u7684\u4f5c\u7528\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4\u6574\u4f53\u8fd0\u884c\u65f6\u95f4\u589e\u52a0\u3002\u8fd9\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u66f4\u5c0f\u7684\u5b66\u4e60\u7387\u6765\u63d0\u5347\u7a33\u5b9a\u6027\u3002 \u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6709\u591a\u4e2a\u5c40\u90e8\u6700\u4f18\uff0c\u4f46\u8fd9\u6ca1\u592a\u5927\u5173\u7cfb\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u6709\u76f8\u540c\u7684\u4ee3\u4ef7\u3002\u6700\u4e3b\u8981\u7684\u95ee\u9898\u662f\u5c40\u90e8\u6700\u4f18\u7684\u635f\u5931\u6bd4\u5168\u5c40\u6700\u4f18\u7684\u635f\u5931\u5927\u5f97\u591a\u3002 \u4e3a\u4e86\u6d4b\u8bd5\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u7ed8\u5236\u68af\u5ea6\u7684\u8303\u6570\u6765\u770b\u5b83\u662f\u5426\u968f\u65f6\u95f4\u8870\u51cf\u5230\u4e00\u4e2a\u975e\u5e38\u5c0f\u7684\u503c\u3002 \u5728\u9ad8\u7ef4\u975e\u51f8\u51fd\u6570\u4e2d\u978d\u70b9\u6bd4\u5c40\u90e8\u6700\u4f18\u66f4\u5e38\u89c1\uff0c\u68af\u5ea6\u4e0b\u964d\u5bf9\u4e8e\u978d\u70b9\u76f8\u5bf9\u6765\u8bf4\u66f4\u52a0\u9c81\u68d2\u3002 \u68af\u5ea6\u88c1\u526a\uff08clipping\uff09\u7528\u4e8e\u89e3\u51b3\u68af\u5ea6\u7206\u70b8\u7684\u60c5\u51b5\u3002\u8fd9\u5728 RNN \u4e2d\u662f\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u3002 \u7ed8\u5236\u51fa\u76ee\u6807\u51fd\u6570\u968f\u65f6\u95f4\u7684\u53d8\u5316\u66f2\u7ebf\u6765\u9009\u62e9\u5b66\u4e60\u7387\u3002 \u6700\u4f18\u5b66\u4e60\u7387\u901a\u5e38\u9ad8\u4e8e\u524d 100 \u6b21\u8fed\u4ee3\u540e\u4ea7\u751f\u6700\u4f73\u6027\u80fd\u7684\u5b66\u4e60\u7387\u3002\u76d1\u89c6\u524d\u51e0\u6b21\u8fed\u4ee3\uff0c\u9009\u62e9\u4e00\u4e2a\u6bd4\u8868\u73b0\u6700\u597d\u7684\u5b66\u4e60\u7387\u66f4\u9ad8\u7684\u5b66\u4e60\u7387\uff0c\u540c\u65f6\u6ce8\u610f\u907f\u514d\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u3002 \u4f7f\u7528\u9ad8\u65af\u548c\u5747\u5300\u5206\u5e03\u6765\u521d\u59cb\u770b\u8d77\u6765\u6ca1\u6709\u592a\u5927\u5f71\u54cd\u3002 \u4f46\u662f\uff0c\u5bf9\u5c3a\u5ea6\uff08scale\uff09\u6709\u5f71\u54cd\u3002\u5927\u7684\u521d\u59cb\u6743\u91cd\u4f1a\u5e2e\u52a9\u907f\u514d\u5197\u4f59\u795e\u7ecf\u5143\uff0c\u4f46\u662f\u592a\u5927\u4f1a\u6709\u4e0d\u5229\u5f71\u54cd\u3002 \u6743\u91cd\u521d\u59cb\u5316\u53ef\u4ee5\u770b\u4f5c\u662f\u8d85\u53c2\u6570\uff0c\u5c24\u5176\u662f\u521d\u59cb\u5c3a\u5ea6\u7a00\u758f\u6216\u5bc6\u96c6\u7684\u60c5\u51b5\u3002\u67e5\u770b\u4e00\u4e2aminibatch\u5185\u6fc0\u6d3b\u6216\u68af\u5ea6\u7684\u8303\u56f4\u6216\u65b9\u5dee\u6765\u9009\u62e9\u5c3a\u5ea6\u3002 \u6ca1\u6709\u4e00\u4e2a\u4f18\u5316\u7b97\u6cd5\u660e\u663e\u7531\u4e8e\u5176\u4ed6\uff0c\u8fd9\u4e3b\u8981\u53d6\u51b3\u4e8e\u7528\u6237\u5bf9\u8d85\u53c2\u6570\u8c03\u6574\u7684\u719f\u6089\u60c5\u51b5\u3002 \u968f\u673a\u68af\u5ea6\u4e0b\u964d\uff08SGD\uff09\uff0c\u5e26\u52a8\u91cf\u7684SGD\uff0cRMSProp\uff0c\u5e26\u52a8\u91cf\u7684RMSProp\uff0cAdaDelta\uff0cAdam\u90fd\u662f\u6d41\u884c\u7684\u9009\u62e9\u3002\u6ce8\u610f\uff1aRMSProp\u5728\u8bad\u7ec3\u521d\u671f\u6216\u8bb8\u4f1a\u6709\u5f88\u9ad8\u7684\u504f\u5dee\u3002 \u901a\u5e38\u52a8\u91cf\u7684\u503c\u67090.5,0.9\uff0c0.99\u3002\u8fd9\u4e2a\u8d85\u53c2\u6570\u53ef\u4ee5\u968f\u65f6\u95f4\u53d8\u5316\uff0c\u4ece\u4e00\u4e2a\u5c0f\u503c\u5f00\u59cb\u589e\u52a0\u5230\u5927\u7684\u503c\u3002 Adam\u901a\u5e38\u662f\u8f83\u4e3a\u9c81\u68d2\u7684\u9009\u62e9\u3002\u4f46\u662f\u5b66\u4e60\u7387\u901a\u5e38\u8981\u6839\u636e\u9ed8\u8ba4\u503c\u6539\u52a8\u3002 \u5bf9\u8f6c\u5316\u540e\u7684\u503c\uff08transformed value\uff09\u800c\u4e0d\u662f\u8f93\u5165\u505a\u6279\u91cf\u5f52\u4e00\u5316\u3002\u5728\u5f15\u5165\u53ef\u5b66\u4e60\u7684\u53c2\u6570 \u03b2 \u4e0b\u53bb\u6389\u504f\u7f6e\u9879\u3002\u5bf9\u4e8e CNN \u5728\u6bcf\u4e2a\u7a7a\u95f4\u4f4d\u7f6e\u5e94\u7528\u8303\u56f4\u5f52\u4e00\u5316\uff08range normalization\uff09\u3002 \u592a\u6d45\u6216\u592a\u6df1\u7684\u7f51\u7edc\u66f4\u96be\u8bad\u7ec3\uff0c\u4f46\u662f\u4ed6\u4eec\u6709\u66f4\u597d\u7684\u6cdb\u5316\u8bef\u5dee\u3002 \u76f8\u5bf9\u4e8e\u4e00\u4e2a\u5f3a\u5927\u7684\u4f18\u5316\u7b97\u6cd5\uff0c\u9009\u62e9\u5bb9\u6613\u4f18\u5316\u7684\u6a21\u578b\u66f4\u91cd\u8981\u3002","title":"8. \u8bad\u7ec3\u6df1\u5ea6\u6a21\u578b\u7684\u4f18\u5316"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#9","text":"\u6c60\u5316\u5bf9\u4e8e\u63a7\u5236\u4e0d\u540c\u5927\u5c0f\u7684\u8f93\u5165\u662f\u975e\u5e38\u6709\u7528\u7684\u3002 0 \u586b\u5145\u53ef\u4ee5\u8ba9\u6211\u4eec\u72ec\u7acb\u7684\u8bbe\u7f6e\u5377\u79ef\u6838\u5927\u5c0f\u548c\u8f93\u51fa\u5927\u5c0f\uff0c\u800c\u4e0d\u4f1a\u8ba9\u7ef4\u5ea6\u8870\u51cf\u53d8\u6210\u4e00\u4e2a\u53d7\u9650\u56e0\u7d20\u3002 \u5bf9\u4e8e\u6d4b\u8bd5\u51c6\u786e\u7387\u800c\u8a00\u6700\u4f18\u7684 0 \u586b\u5145\u901a\u5e38\u5728\uff1a \u201cvalid \u5377\u79ef\u201d\uff0c\u4e0d\u4f7f\u7528 0 \u586b\u5145\uff0c\u5377\u79ef\u6838\u5728\u56fe\u50cf\u8303\u56f4\u5185\uff0c\u4f46\u662f\u6bcf\u5c42\u8f93\u51fa\u4f1a\u8870\u51cf\u3002 \u201csame \u5377\u79ef\u201d\uff0c\u4f7f\u7528\u8db3\u591f\u7684 0 \u586b\u5145\u8ba9\u8f93\u51fa\u7684\u5927\u5c0f\u7b49\u4e8e\u8f93\u5165\u5927\u5c0f\u3002 \u4e00\u4e2a\u6f5c\u5728\u7684\u9a8c\u8bc1\u5377\u79ef\u7ed3\u6784\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u968f\u673a\u6743\u91cd\uff0c\u5e76\u4e14\u53ea\u8bad\u7ec3\u6700\u540e\u4e00\u5c42\u3002","title":"9. \u5377\u79ef\u7f51\u7edc"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#10","text":"\u53cc\u5411 RNN \u5728\u624b\u5199\u8bc6\u522b\uff0c\u8bed\u97f3\u8bc6\u522b\u548c\u751f\u7269\u4fe1\u606f\u65b9\u9762\u975e\u5e38\u6210\u529f\u3002 \u76f8\u6bd4\u8f83 CNN \u800c\u8a00\uff0cRNN \u7528\u4e8e\u56fe\u50cf\u901a\u5e38\u66f4\u56f0\u96be\uff0c\u4f46\u662f\u53ef\u4ee5\u8ba9\u76f8\u540c\u7279\u5f81\u56fe\u4e2d\u7684\u7279\u5f81\u8fdb\u884c\u8fdc\u7a0b\u6a2a\u5411\u4ea4\u4e92\u3002 \u65e0\u8bba\u4f55\u65f6 RNN \u8981\u8868\u793a\u957f\u671f\u4f9d\u8d56\uff0c\u957f\u671f\u4ea4\u4e92\u7684\u68af\u5ea6\u8981\u6307\u6570\u7ea7\u522b\u5c0f\u4e8e\u77ed\u671f\u4ea4\u4e92\u3002 \u5728\u56de\u6ce2\u72b6\u6001\u7f51\u7edc\u4e2d\u8bbe\u7f6e\u6743\u91cd\u7684\u6280\u672f\u53ef\u7528\u4e8e\u5728\u5b8c\u5168\u53ef\u8bad\u7ec3\u7684 RNN \u4e2d\u521d\u59cb\u5316\u6743\u91cd\u3002\u521d\u59cb\u5149\u8c31\u534a\u5f84\u4e3a 1.2\uff0c\u7a00\u758f\u521d\u59cb\u5316\u6027\u80fd\u826f\u597d\u3002 \u5b9e\u8df5\u4e2d\u6700\u6709\u6548\u7684\u5e8f\u5217\u6a21\u578b\u662f\u95e8\u63a7 RNN\uff0c\u5305\u62ec LSTM \u548c GRU\u3002 LSTM \u6bd4\u7b80\u5355\u7684 RNN \u66f4\u5bb9\u6613\u5b66\u5230\u957f\u671f\u4f9d\u8d56\u3002 \u7ed9\u9057\u5fd8\u95e8\u52a0\u5165\u504f\u7f6e 1 \u53ef\u4ee5\u8ba9 LSTM \u50cf GRN \u53d8\u79cd\u4e00\u6837\u5f3a\u5927\u3002 \u5728 LSTM \u4e2d\u4f7f\u7528 SGD \u901a\u5e38\u8003\u8651\u4e8c\u9636\u4f18\u5316\u65b9\u6cd5\u6765\u9632\u6b62\u4e8c\u6b21\u504f\u5bfc\u6d88\u5931\u3002 \u8bbe\u8ba1\u4e00\u4e2a\u5bb9\u6613\u4f18\u5316\u7684\u6a21\u578b\u901a\u5e38\u6bd4\u8bbe\u8ba1\u4e00\u4e2a\u5f3a\u5927\u7684\u7b97\u6cd5\u5bb9\u6613\u4e9b\u3002 \u6b63\u5219\u53c2\u6570\u9f13\u52b1\u201c\u4fe1\u606f\u6d41\u201d\uff0c\u5e76\u9884\u9632\u68af\u5ea6\u6d88\u5931\uff0c\u4f46\u662f\u540c\u6837\u9700\u8981\u68af\u5ea6\u88c1\u526a\u6765\u9884\u9632\u68af\u5ea6\u7206\u70b8\u3002\u4f46\u662f\u5927\u91cf\u7684\u6570\u636e\u4f8b\u5982\u8bed\u8a00\u5efa\u6a21\u5bf9\u4e8e LSTM \u800c\u8a00\u5c31\u4e0d\u662f\u90a3\u4e48\u9ad8\u6548\u4e86\u3002","title":"10. \u5e8f\u5217\u6a21\u578b\uff1a****\u5faa\u73af\u548c\u9012\u5f52\u7f51\u7edc"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#11","text":"\u5728\u4e0d\u786e\u5b9a\u7684\u65f6\u5019\u8ba9\u6a21\u578b\u62d2\u7edd\u51b3\u7b56\u4e5f\u662f\u5f88\u6709\u5e2e\u52a9\u7684\uff0c\u4f46\u662f\u8fd9\u4e4b\u95f4\u4e5f\u5b58\u5728\u6298\u4e2d\u3002\u6536\u655b\u662f\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u53ef\u4ee5\u54cd\u5e94\u7684\u6837\u672c\u90e8\u5206\uff0c\u548c\u51c6\u786e\u7387\u4e4b\u95f4\u4e5f\u5b58\u5728\u6298\u4e2d\u3002 \u5bf9\u4e8e\u57fa\u7ebf\u6a21\u578b\u800c\u8a00\uff0cReLU \u53ca\u5176\u53d8\u79cd\u662f\u7406\u60f3\u7684\u6fc0\u6d3b\u51fd\u6570\u3002 \u5e26\u52a8\u91cf\u548c\u5b66\u4e60\u7387\u8870\u51cf\u7684 SGD \u662f\u57fa\u7ebf\u4f18\u5316\u7b97\u6cd5\u4e2d\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\u8870\u51cf\u65b9\u6cd5\u5305\u62ec\uff1a \u7ebf\u6027\u8870\u51cf\u76f4\u5230\u4e00\u4e2a\u56fa\u5b9a\u5c0f\u7684\u5b66\u4e60\u7387\u3002 \u6307\u6570\u8870\u51cf\u3002 \u6bcf\u6b21\u9a8c\u8bc1\u8bef\u5dee\u4e0d\u53d8\u65f6\u51cf\u5c11 2 \u5230 10 \u5206\u4e4b\u4e00\u3002 \u53e6\u4e00\u4e2a\u4e0d\u9519\u7684\u57fa\u7ebf\u4f18\u5316\u7b97\u6cd5\u662f Adam\u3002 \u5982\u679c\u4f18\u5316\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u7acb\u9a6c\u4f7f\u7528\u6279\u91cf\u5f52\u4e00\u5316\u3002 \u5982\u679c\u8bad\u7ec3\u96c6\u4e0d\u8db3 10M\uff0c\u4e00\u5f00\u59cb\u5c31\u91c7\u7528\u4e2d\u7b49\u5f3a\u5ea6\u7684\u6b63\u5219\u9879\u3002 \u57fa\u672c\u4e0a\u80af\u5b9a\u8981\u7528 early stopping\u3002 \u5728\u5927\u591a\u6570\u7ed3\u6784\u4e2d dropout \u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\u6279\u91cf\u5f52\u4e00\u5316\u4e5f\u662f\u4e2a\u53ef\u9009\u7684\u66ff\u4ee3\u54c1\u3002 \u5982\u679c\u5f53\u524d\u7684\u95ee\u9898\u5df2\u7ecf\u88ab\u7814\u7a76\u70c2\u4e86\uff0c\u76f4\u63a5\u62f7\u8d1d\u6a21\u578b\u5c31\u662f\u4e2a\u4e0d\u9519\u4e3b\u610f\uff0c\u6216\u8bb8\u53ef\u4ee5\u62f7\u8d1d\u8bad\u7ec3\u8fc7\u7684\u6a21\u578b\u3002 \u5982\u679c\u5df2\u77e5\u65e0\u76d1\u7763\u5b66\u4e60\u5bf9\u4e8e\u4f60\u7684\u5e94\u7528\u5f88\u91cd\u8981\uff08\u4f8b\u5982 NLP \u4e2d\u7684\u8bcd\u5d4c\u5165\uff09\uff0c\u90a3\u4e48\u5728\u57fa\u7ebf\u4e2d\u5c31\u628a\u5b83\u5305\u542b\u8fdb\u6765\u3002 \u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\uff1a \u5982\u679c\u65e0\u6cd5\u83b7\u5f97\u66f4\u591a\u7684\u6570\u636e\uff0c\u6700\u540e\u7684\u529e\u6cd5\u662f\u5c1d\u8bd5\u63d0\u5347\u5b66\u4e60\u7b97\u6cd5\u3002 \u4f7f\u7528\u5bf9\u6570\u6bd4\u4f8b\u7684\u5b66\u4e60\u66f2\u7ebf\u6765\u51b3\u5b9a\u8fd8\u9700\u8981\u591a\u5c11\u6570\u636e\u3002 \u5982\u679c\u8bad\u7ec3\u6027\u80fd\u5f88\u5dee\uff0c\u589e\u52a0\u6a21\u578b\u7684\u5927\u5c0f\uff0c\u8c03\u6574\u5b66\u4e60\u7b97\u6cd5\u3002\u5982\u679c\u8fd8\u662f\u5f88\u5dee\uff0c\u90a3\u662f\u6570\u636e\u8d28\u91cf\u95ee\u9898\uff0c\u91cd\u65b0\u5f00\u59cb\u6536\u96c6\u66f4\u5e72\u51c0\u7684\u6570\u636e\u6216\u66f4\u591a\u7684\u7279\u5f81\u3002 \u5982\u679c\u8bad\u7ec3\u6027\u80fd\u4e0d\u9519\u4f46\u662f\u6d4b\u8bd5\u6027\u80fd\u5f88\u5dee\uff0c\u5728\u53ef\u884c\u7684\u60c5\u51b5\u4e0b\u6536\u96c6\u66f4\u591a\u7684\u6570\u636e\u3002\u6216\u8005\uff0c\u5c1d\u8bd5\u964d\u4f4e\u6a21\u578b\u7684\u5927\u5c0f\u6216\u589e\u52a0\u6b63\u5219\u5f3a\u5ea6\u3002\u5982\u679c\u8fd9\u4e9b\u6ca1\u6709\u5e2e\u52a9\uff0c\u90a3\u4f60\u7684\u786e\u9700\u8981\u66f4\u591a\u7684\u6570\u636e\u3002 \u5b66\u4e60\u7387\u662f\u6700\u91cd\u8981\u7684\u8d85\u53c2\u6570\uff0c\u56e0\u4e3a\u5b83\u4ee5\u4e00\u79cd\u590d\u6742\u7684\u65b9\u5f0f\u63a7\u5236\u7740\u6a21\u578b\u7684\u6709\u6548\u5bb9\u91cf\u3002\u5982\u679c\u65f6\u95f4\u6709\u9650\uff0c\u5c31\u8c03\u5b83\u3002\u8c03\u5176\u4ed6\u7684\u8d85\u53c2\u6570\u9700\u8981\u76d1\u89c6\u8bad\u7ec3\u548c\u6d4b\u8bd5\u8bef\u5dee\u6765\u5224\u65ad\u6a21\u578b\u662f\u6b20\u62df\u5408\u8fd8\u662f\u8fc7\u62df\u5408\u3002 \u5982\u679c\u8bad\u7ec3\u8bef\u5dee\u9ad8\u4e8e\u76ee\u6807\u8bef\u5dee\uff0c\u589e\u52a0\u5bb9\u91cf\u3002\u5982\u679c\u6ca1\u6709\u4f7f\u7528\u6b63\u5219\u9879\uff0c\u5e76\u786e\u5b9a\u4f18\u5316\u7b97\u6cd5\u5de5\u4f5c\u6b63\u786e\uff0c\u4f7f\u7528\u66f4\u591a\u7684\u9690\u5c42\u3002 \u5982\u679c\u6d4b\u8bd5\u8bef\u5dee\u9ad8\u4e8e\u76ee\u6807\u8bef\u5dee\u3002\u90a3\u4e48\u8f83\u5927\u7684\u6a21\u578b\u52a0\u5408\u9002\u7684\u6b63\u5219\u4f1a\u5e26\u6765\u6700\u597d\u7684\u6027\u80fd\u3002 \u53ea\u8981\u8bad\u7ec3\u8bef\u5dee\u5f88\u4f4e\uff0c\u4f60\u603b\u662f\u53ef\u4ee5\u901a\u8fc7\u6536\u96c6\u66f4\u591a\u6570\u636e\u6765\u51cf\u4f4e\u6cdb\u5316\u8bef\u5dee\u3002 \u7f51\u683c\u641c\u7d22\uff1a\u901a\u5e38\u5728\u5c11\u4e8e\u56db\u4e2a\u8d85\u53c2\u6570\u65f6\u4f7f\u7528\u3002 \u901a\u5e38\u6700\u597d\u4f7f\u7528\u5bf9\u6570\u5c3a\u5ea6\u6765\u6311\u9009\u503c\uff0c\u5e76\u4e14\u4e0d\u65ad\u91cd\u590d\u6765\u51cf\u5c11\u641c\u7d22\u8303\u56f4\u3002 \u8ba1\u7b97\u91cf\u968f\u7740\u8d85\u53c2\u6570\u7684\u6570\u91cf\u6307\u6570\u589e\u52a0\uff0c\u5373\u4f7f\u662f\u5e76\u884c\u4e5f\u4e0d\u80fd\u6709\u5f88\u597d\u7684\u5e2e\u52a9\u3002 \u968f\u5373\u641c\u7d22\uff1a\u4f7f\u7528\u8d77\u6765\u5f88\u7b80\u5355\uff0c\u76f8\u6bd4\u4e8e\u7f51\u683c\u641c\u7d22\u66f4\u5feb\u6536\u655b\u5230\u597d\u7684\u8d85\u53c2\u6570\u3002 \u5728\u51e0\u4e2a\u8d85\u53c2\u6570\u4e0d\u662f\u5f88\u5f3a\u70c8\u7684\u5f71\u54cd\u6027\u80fd\u6307\u6807\u65f6\uff0c\u968f\u673a\u641c\u7d22\u76f8\u5bf9\u4e8e\u7f51\u683c\u641c\u7d22\u53ef\u4ee5\u8fbe\u5230\u6307\u6570\u7ea7\u522b\u7684\u6548\u7387\u3002 \u6211\u4eec\u4e5f\u8bb8\u8981\u91cd\u590d\u8fd0\u884c\u5b83\u6765\u5f97\u5230\u66f4\u597d\u7684\u7ed3\u679c\u3002 \u968f\u673a\u641c\u7d22\u6bd4\u7f51\u683c\u641c\u7d22\u5feb\uff0c\u56e0\u4e3a\u5b83\u4e0d\u9700\u8981\u6307\u6570\u7ea7\u522b\u7684\u8fd0\u884c\u3002 \u901a\u5e38\u4e0d\u5efa\u8bae\u57fa\u4e8e\u8d85\u53c2\u6570\u6765\u8c03\u6574\u6a21\u578b\uff0c\u56e0\u4e3a\u5b83\u5f88\u5c11\u8d85\u8fc7\u4eba\u7c7b\u5e76\u4e14\u7ecf\u5e38\u5931\u8d25\u3002 \u8c03\u8bd5\u7b56\u7565\uff1a \u53ef\u89c6\u5316\u6a21\u578b\u7684\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u67e5\u770b\u56fe\u50cf\u6837\u672c\uff0c\u548c\u6a21\u578b\u68c0\u6d4b\u60c5\u51b5\u3002\u8fd9\u53ef\u4ee5\u770b\u5230\u91cf\u5316\u7684\u6027\u80fd\u6307\u6807\u662f\u5426\u5408\u7406\u3002 \u53ef\u89c6\u5316\u6700\u5dee\u7684\u9519\u8bef\u60c5\u51b5\uff1a\u8fd9\u53ef\u4ee5\u53d1\u73b0\u9884\u5904\u7406\u548c\u6253\u6807\u7b7e\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u3002 \u5f53\u8bad\u7ec3\u8bef\u5dee\u592a\u9ad8\u65f6\u5148\u62df\u5408\u4e00\u4e2a\u5c0f\u7684\u6570\u636e\u96c6\uff1a\u8fd9\u80fd\u68c0\u67e5\u51fa\u662f\u6b20\u62df\u5408\u95ee\u9898\u8fd8\u662f\u8f6f\u4ef6\u7f3a\u9677\u3002 \u76d1\u89c6\u6fc0\u6d3b\u548c\u68af\u5ea6\u7684\u76f4\u65b9\u56fe\uff1a\u5b8c\u6210\u5927\u6982\u4e00\u4e2a epoch\u3002\u8fd9\u80fd\u544a\u8bc9\u6211\u4eec\u795e\u7ecf\u5143\u662f\u5426\u9971\u548c\u53ca\u5176\u9971\u548c\u9891\u7387\u3002\u68af\u5ea6\u503c\u5e94\u8be5\u662f\u53c2\u6570\u76841%\u5de6\u53f3\u3002\u7a00\u758f\u7684\u6570\u636e\uff08\u5982 NLP\uff09\u6709\u5f88\u591a\u53c2\u6570\u5f88\u5c11\u66f4\u65b0\uff0c\u4e00\u5b9a\u8981\u8bb0\u5f97\u8fd9\u4e00\u70b9\u3002","title":"11. \u5b9e\u8df5\u65b9\u6cd5"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#12","text":"\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528\u5f02\u6b65 SGD\u3002\u6bcf\u4e00\u6b65\u7684\u5e73\u5747\u63d0\u5347\u662f\u5f88\u5c0f\u7684\uff0c\u4f46\u662f\u6b65\u9aa4\u901f\u7387\u52a0\u5feb\u4e5f\u5bfc\u81f4\u4e86\u6574\u4f53\u7684\u52a0\u5feb\u3002 \u7ea7\u8054\uff08cascade\uff09\u5206\u7c7b\u5668\u662f\u76ee\u6807\u68c0\u6d4b\u4e2d\u4e00\u4e2a\u9ad8\u6548\u7684\u65b9\u6cd5\u3002\u4e00\u4e2a\u5206\u7c7b\u5668\u6709\u9ad8\u53ec\u56de\u7387\uff0c\u53e6\u4e00\u4e2a\u6709\u9ad8\u7cbe\u786e\u7387\uff0c\u597d\u7684\uff0c\u7ed3\u679c\u6709\u4e86\u3002 \u96c6\u6210\u65b9\u6cd5\u4e2d\u4e00\u4e2a\u51cf\u5c11\u63a8\u7406\u65f6\u95f4\u7684\u65b9\u6cd5\u662f\u8bad\u7ec3\u4e00\u4e2a\u63a7\u5236\u5668\u6765\u6311\u9009\u54ea\u4e2a\u7f51\u7edc\u5e94\u8be5\u6765\u505a\u63a8\u7406\u3002 \u6807\u51c6\u5316\u50cf\u7d20\u5c3a\u5ea6\u662f\u8ba1\u7b97\u673a\u89c6\u89c9\u4e2d\u552f\u4e00\u4e00\u4e2a\u5f3a\u5236\u7684\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u901a\u5e38\u662f\u4e00\u4e2a\u5b89\u5168\u7684\u8ba1\u7b97\u673a\u89c6\u89c9\u9884\u5904\u7406\u6b65\u9aa4\u3002 \u5c3a\u5ea6\u53c2\u6570\u6216\u8005\u53ef\u4ee5\u8bbe\u7f6e\u4e3a 1\uff0c\u6216\u8005\u8ba9\u6bcf\u4e2a\u50cf\u7d20\u5728\u6574\u4f53\u6837\u672c\u4e0a\u6709\u63a5\u8fd11\u7684\u6807\u51c6\u68af\u5ea6\u3002 \u8fd1\u4f3c\u526a\u5207\u7684\u56fe\u50cf\u6570\u636e\u96c6\u53ef\u4ee5\u5b89\u5168\u7684\u8bbe\u7f6e \u03bb=0, \u03f5=1e\u22128\u3002 \u5c0f\u7684\u968f\u673a\u526a\u5207\u7684\u56fe\u50cf\u6570\u636e\u96c6\u9700\u8981\u66f4\u9ad8\u7684\u6b63\u5219\u5f3a\u5ea6\uff0c\u4f8b\u5982 \u03bb=10, \u03f5=0\u3002 \u5168\u5c40\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\uff08GCN\uff09\u662f\u5176\u4e2d\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4f46\u662f\u5b83\u5728\u4f4e\u5bf9\u6bd4\u5ea6\u7684\u60c5\u51b5\u4e0b\u4f1a\u964d\u4f4e\u8fb9\u7f18\u7684\u68c0\u6d4b\u3002 \u5c40\u90e8\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u901a\u5e38\u53ef\u4ee5\u7528\u5206\u79bb\u5377\u79ef\u8ba1\u7b97\u7279\u5f81\u56fe\u7684\u5c40\u90e8\u5747\u503c/\u65b9\u5dee\u6765\u5b9e\u73b0\uff0c\u7136\u540e\u5728\u4e0d\u540c\u7684\u7279\u5f81\u56fe\u4e0a\u505a\u5143\u7d20\u7ea7\u522b\u51cf/\u9664\u3002\u76f8\u6bd4\u4e8e\u5168\u5c40\u5bf9\u6bd4\u5ea6\u5f52\u4e00\u5316\u66f4\u80fd\u51f8\u663e\u8fb9\u7f18\u3002 \u5728 NLP \u7684\u5b9e\u8df5\u4e2d\uff0c\u5206\u5c42 softmax \u76f8\u6bd4\u4e8e\u57fa\u4e8e\u91c7\u6837\u7684\u65b9\u6cd5\u6d4b\u8bd5\u7ed3\u679c\u66f4\u5dee\u3002 \u7b2c\u4e09\u90e8\u5206 \u6df1\u5ea6\u5b66\u4e60\u7814\u7a76","title":"12. \u5e94\u7528"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#13","text":"\u7ebf\u6027\u56e0\u5b50\u6a21\u578b\u53ef\u4ee5\u6269\u5c55\u5230\u81ea\u52a8\u7f16\u7801\u5668\u548c\u6df1\u5ea6\u6982\u7387\u6a21\u578b\uff0c\u5b83\u4eec\u505a\u76f8\u540c\u7684\u4efb\u52a1\u4f46\u662f\u66f4\u7075\u6d3b\u66f4\u5f3a\u5927\u3002","title":"13. \u7ebf\u6027\u56e0\u5b50\u6a21\u578b"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#14","text":"\u7a00\u758f\u81ea\u52a8\u7f16\u7801\u5668\u5728\u5b66\u4e60\u7279\u5f81\u5982\u5206\u7c7b\u7b49\u4efb\u52a1\u4e0a\u8868\u73b0\u4e0d\u9519\u3002 \u81ea\u52a8\u7f16\u7801\u5668\u5728\u5b66\u4e60\u9690\u542b\u53d8\u91cf\u89e3\u91ca\u8f93\u5165\u65b9\u9762\u5f88\u6709\u7528\u3002\u5b83\u4eec\u53ef\u4ee5\u5b66\u5230\u6709\u7528\u7684\u7279\u5f81\u3002 \u867d\u7136\u5f88\u591a\u81ea\u52a8\u7f16\u7801\u5668\u53ea\u6709\u4e00\u4e2a\u7f16\u7801/\u89e3\u7801\u5c42\uff0c\u4f46\u5b83\u4eec\u6709\u6df1\u5ea6\u524d\u9988\u7f51\u7edc\u4e00\u6837\u7684\u4f18\u70b9\u3002 \u5728\u5f3a\u5316\u5bf9\u6bd4\u5ea6\u4f8b\u5982\u7a00\u758f\u6027\u65b9\u9762\u5c24\u5176\u6709\u7528\u3002 \u6df1\u5ea6\u51cf\u5c11\u4e86\u6307\u6570\u7ea7\u522b\u7684\u8ba1\u7b97\u91cf\uff0c\u4ee5\u53ca\u8868\u793a\u67d0\u4e9b\u51fd\u6570\u6240\u9700\u8bad\u7ec3\u6570\u636e\u7684\u6570\u91cf\u3002 \u901a\u5e38\u8bad\u7ec3\u6df1\u5ea6\u7f16\u7801\u5668\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u4e00\u7cfb\u5217\u6d45\u7684\u81ea\u52a8\u7f16\u7801\u5668\u6765\u8d2a\u5fc3\u7684\u9884\u8bad\u7ec3\u6df1\u5ea6\u7ed3\u6784\u3002","title":"14. \u81ea\u52a8\u7f16\u7801\u5668"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#15","text":"\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\uff0c\u4e00\u4e2a\u597d\u7684\u8868\u793a\u53ef\u4ee5\u8ba9\u540e\u7eed\u7684\u5b66\u4e60\u4efb\u52a1\u66f4\u52a0\u5bb9\u6613\u3002\u4f8b\u5982\u76d1\u7763\u524d\u9988\u7f51\u7edc\uff1a\u6bcf\u4e00\u5c42\u90fd\u4e3a\u6700\u540e\u7684\u5206\u7c7b\u5c42\u5b66\u4e60\u4e00\u4e2a\u66f4\u597d\u7684\u8868\u793a\u3002 \u8d2a\u5fc3\u7684\u5c42\u95f4\u65e0\u76d1\u7763\u8bad\u7ec3\u5bf9\u4e8e\u5206\u7c7b\u6d4b\u8bd5\u8bef\u5dee\u6709\u5e2e\u52a9\uff0c\u4f46\u662f\u5176\u4ed6\u4efb\u52a1\u4e0a\u4e0d\u884c\u3002 \u5bf9\u4e8e\u56fe\u50cf\u5206\u7c7b\u6ca1\u5565\u4f5c\u7528\uff0c\u4f46\u662f\u5bf9\u4e8e NLP \u5f88\u6709\u5e2e\u52a9\uff08\u4f8b\u5982\u8bcd\u5d4c\u5165\uff09\uff0c\u8fd9\u662f\u56e0\u4e3a\u521d\u59cb\u8868\u793a\u975e\u5e38\u5dee\u3002 \u5728\u6807\u7b7e\u6837\u672c\u5f88\u5c11\uff0c\u6216\u65e0\u6807\u7b7e\u6837\u672c\u5f88\u5927\u7684\u65f6\u5019\uff0c\u6b63\u5219\u5668\u975e\u5e38\u6709\u7528\u3002 \u5728\u8981\u5b66\u4e60\u7684\u51fd\u6570\u6781\u5176\u590d\u6742\u7684\u65f6\u5019\u5b83\u6700\u6709\u7528\u3002 \u6839\u636e\u76d1\u7763\u9636\u6bb5\u7684\u9a8c\u8bc1\u96c6\u8bef\u5dee\u6765\u9009\u62e9\u9884\u8bad\u7ec3\u9636\u6bb5\u7684\u8d85\u53c2\u6570\u3002 \u65e0\u76d1\u7763\u9884\u8bad\u7ec3\u57fa\u672c\u5df2\u7ecf\u88ab\u629b\u5f03\u4e86\uff0c\u9664\u4e86 NLP \u9886\u57df\uff08\u4f8b\u5982\u8bcd\u5d4c\u5165\uff09\u3002 \u5728\u6709\u4e9b\u7279\u5f81\u5bf9\u4e8e\u4e0d\u540c\u7684\u4efb\u52a1\u8bbe\u7f6e\u6709\u5e2e\u52a9\u7684\u65f6\u5019\uff0c\u8fc1\u79fb\u5b66\u4e60\uff0c\u591a\u4efb\u52a1\u5b66\u4e60\u548c\u57df\u9002\u5e94\u90fd\u53ef\u4ee5\u901a\u8fc7\u8868\u793a\u5b66\u4e60\u6765\u5b8c\u6210\u3002 \u5f53\u4e00\u4e2a\u5f88\u590d\u6742\u7684\u7ed3\u6784\u53ef\u4ee5\u7528\u66f4\u5c11\u7684\u53c2\u6570\u7d27\u51d1\u8868\u793a\u65f6\uff0c\u5206\u5e03\u5f0f\u8868\u793a\u76f8\u6bd4\u4e8e\u975e\u5206\u5e03\u5f0f\u8868\u793a\u66f4\u5177\u6709\u7edf\u8ba1\u4f18\u52bf\u3002\u4e00\u4e9b\u4f20\u7edf\u7684\u975e\u5206\u5e03\u5f0f\u7b97\u6cd5\u80fd\u6cdb\u5316\u662f\u7531\u4e8e\u5176\u5e73\u6ed1\u7684\u5047\u8bbe\uff0c\u4f46\u662f\u4f1a\u53d7\u9650\u4e8e\u7ef4\u5ea6\u8bc5\u5492\u3002","title":"15. \u8868\u793a\u5b66\u4e60"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#16","text":"\u7ed3\u6784\u5316\u6982\u7387\u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6846\u67b6\uff0c\u7528\u4e8e\u5bf9\u968f\u673a\u95f4\u9694\u7684\u76f4\u63a5\u4ea4\u4e92\u8fdb\u884c\u5efa\u6a21\uff0c\u8fd9\u4f7f\u5f97\u6a21\u578b\u53ef\u4ee5\u4f7f\u7528\u66f4\u5c11\u7684\u53c2\u6570\u3002\u6b63\u56e0\u4e3a\u6b64\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5728\u66f4\u5c11\u7684\u6570\u636e\u4e0b\u53ef\u9760\u5730\u4f30\u8ba1\uff0c\u5e76\u4e14\u51cf\u5c11\u4e86\u5b58\u50a8\u6a21\u578b\uff0c\u6267\u884c\u63a8\u7406\u548c\u91c7\u6837\u7684\u8ba1\u7b97\u91cf\u3002 \u5f88\u591a\u6df1\u5ea6\u5b66\u4e60\u7684\u751f\u6210\u6a21\u578b\u6216\u6ca1\u6709\u9690\u542b\u53d8\u91cf\uff0c\u6216\u8fd9\u7528\u4e00\u5c42\u9690\u542b\u53d8\u91cf\u3002\u4ed6\u4eec\u5728\u6a21\u578b\u4e2d\u4f7f\u7528\u6df1\u5ea6\u8ba1\u7b97\u56fe\u6765\u5b9a\u4e49\u6761\u4ef6\u5206\u5e03\u3002\u8fd9\u548c\u5927\u90e8\u5206\u6df1\u5ea6\u5b66\u4e60\u5e94\u7528\u4e2d\u6709\u6bd4\u53ef\u89c2\u5bdf\u53d8\u91cf\u66f4\u591a\u7684\u9690\u542b\u53d8\u91cf\u5f62\u6210\u5f3a\u70c8\u5bf9\u6bd4\u3002\u4ed6\u4eec\u662f\u4ece\u975e\u7ebf\u6027\u4ea4\u4e92\u4e2d\u5b66\u5f97\u7684\u3002 \u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u9690\u542b\u53d8\u91cf\u662f\u4e0d\u53d7\u9650\u7684\uff0c\u4f46\u662f\u5f88\u96be\u901a\u8fc7\u53ef\u89c6\u5316\u6765\u89e3\u91ca\u3002 \u5faa\u73af\u4fe1\u5ff5\u4f20\u64ad\uff08loopy belief propagation\uff09\u57fa\u672c\u4e0a\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4ece\u672a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u662f\u4f7f\u7528\u5409\u5e03\u65af\u91c7\u6837\u6216\u53d8\u5206\u63a8\u65ad\u7b97\u6cd5\u8bbe\u8ba1\u7684\u3002","title":"16. \u6df1\u5ea6\u5b66\u4e60\u7684\u7ed3\u6784\u5316\u6982\u7387\u6a21\u578b"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#17-monte-carlo","text":"Monte Carlo Markov Chains\uff08MCMC\uff09\u8ba1\u7b97\u91cf\u5f88\u5927\uff0c\u8fd9\u662f\u7531\u4e8e\u5728\u5e73\u8861\u5206\u5e03\u201c\u71c3\u70e7\u201d\u9700\u8981\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u4e3a\u4e86\u4fdd\u8bc1\u6837\u672c\u95f4\u4e0d\u76f8\u5173\u800c\u8ba9\u6bcfn\u4e2a\u6837\u672c\u6709\u5e8f\u3002 \u5f53\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u4eceMCMC\u91c7\u6837\u65f6\uff0c\u901a\u5e38\u9700\u8981\u8fd0\u884c\u4e00\u5b9a\u6570\u91cf\u7684\u5e76\u884c\u9a6c\u5c14\u79d1\u592b\u94fe\uff0c\u6570\u91cf\u4e0e\u4e00\u4e2aminibatch\u7684\u6837\u672c\u6570\u4e00\u6837\uff0c\u8ba9\u540e\u4ece\u4e2d\u91c7\u6837\u3002\u901a\u5e38\u4f7f\u7528\u7684\u6570\u5b57\u662f100\u3002 \u9a6c\u5c14\u79d1\u592b\u94fe\u4f1a\u5230\u8fbe\u5e73\u8861\u72b6\u6001\uff0c\u4f46\u6211\u4eec\u4e0d\u77e5\u9053\u8981\u591a\u4e45\uff0c\u9664\u975e\u5b83\u5df2\u7ecf\u5230\u8fbe\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u6d4b\u8bd5\u5b83\u662f\u5426\u6df7\u5408\u4e86\u542f\u53d1\u5f0f\u65b9\u6cd5\uff0c\u6bd4\u5982\u624b\u52a8\u68c0\u67e5\u6837\u672c\u6216\u6d4b\u91cf\u8fde\u7eed\u6837\u672c\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u3002 \u867d\u7136 Metropolis-Hastings \u7b97\u6cd5\u5728\u5176\u4ed6\u5b66\u79d1\u4e2d\u7ecf\u5e38\u4e0e\u9a6c\u5c14\u53ef\u592b\u94fe\u4e00\u8d77\u4f7f\u7528\uff0c\u4f46 Gibbs \u62bd\u6837\u662f\u6df1\u5ea6\u5b66\u4e60\u7684 de-facto \u65b9\u6cd5\u3002","title":"17. Monte Carlo\u65b9\u6cd5"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#19","text":"Maximum a posteriori (MAP) \u63a8\u65ad\u901a\u5e38\u7528\u4e8e\u7279\u5f81\u63d0\u53d6\u548c\u5b66\u4e60\u673a\u5236\uff0c\u4e3b\u8981\u662f\u7a00\u758f\u7f16\u7801\u6a21\u578b\u3002","title":"19. \u8fd1\u4f3c\u63a8\u65ad"},{"location":"%E8%8A%B1%E4%B9%A6%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/#20","text":"\u73bb\u5c14\u5179\u66fc\u673a\u7684\u53d8\u79cd\u65e9\u5df2\u8d85\u8fc7\u4e86\u6700\u521d\u7684\u6d41\u884c\u5ea6\u3002\u73bb\u5c14\u5179\u66fc\u673a\u5bf9\u4e8e\u89c2\u5bdf\u53d8\u91cf\u5c31\u50cf\u4e00\u4e2a\u7ebf\u6027\u9884\u6d4b\u5668\uff0c\u4f46\u662f\u5bf9\u4e8e\u672a\u89c2\u5bdf\u5230\u7684\u53d8\u91cf\u66f4\u52a0\u5f3a\u5927\u3002 \u4ece\u4e00\u7cfb\u5217\u53d7\u9650\u73bb\u5c14\u5179\u66fc\u673a\u4e2d\u521d\u59cb\u5316\u4e00\u4e2a\u6df1\u5ea6\u73bb\u5c14\u5179\u66fc\u673a\u65f6\uff0c\u7a0d\u5fae\u4fee\u6539\u4e0b\u53c2\u6570\u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002 \u4eca\u5929\u5f88\u5c11\u4f7f\u7528\u6df1\u5ea6\u4fe1\u5ff5\u7f51\u7edc\uff08DBN\uff09\uff0c\u56e0\u4e3a\u5176\u4ed6\u7b97\u6cd5\u5df2\u7ecf\u8d85\u8fc7\u5b83\u4e86\uff0c\u4f46\u662f\u5728\u5386\u53f2\u4e0a\u6709\u91cd\u8981\u5730\u4f4d\u3002\u7531\u4e8e DBN \u662f\u751f\u6210\u6a21\u578b\uff0c\u4e00\u4e2a\u8bad\u7ec3\u8fc7\u7684 DBN \u53ef\u4ee5\u7528\u4e8e\u521d\u59cb\u5316\u4e00\u4e2a MLP \u7684\u6743\u91cd\u6765\u505a\u5206\u7c7b\u3002 \u3010\u7565\u53bb\u73bb\u5c14\u5179\u66fc\u673a\u7684\u90e8\u5206\u5185\u5bb9\u3011 \u867d\u7136\u53d8\u5206\u81ea\u52a8\u7f16\u7801\u5668\uff08VAE\uff09\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5b83\u4eec\u901a\u5e38\u80fd\u5f97\u5230\u4e0d\u9519\u7684\u7ed3\u679c\uff0c\u4e5f\u662f\u6700\u540e\u7684\u751f\u6210\u6a21\u578b\u4e4b\u4e00\u3002\u6765\u81ea VAE \u7684\u56fe\u50cf\u901a\u5e38\u6a21\u7cca\uff0c\u539f\u56e0\u672a\u77e5\u3002 \u4e0d\u6536\u655b\u662f GAN \u6b20\u62df\u5408\uff08\u4e00\u4e2a\u7f51\u7edc\u62b5\u8fbe\u5c40\u90e8\u6700\u4f18\uff0c\u53e6\u4e00\u4e2a\u62b5\u8fbe\u5c40\u90e8\u6700\u5927\uff09\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u957f\u5ea6\u8fd8\u4e0d\u6e05\u695a\u3002 \u867d\u7136 GAN \u6709\u7a33\u5b9a\u6027\u7684\u95ee\u9898\uff0c\u4f46\u662f\u901a\u5e38\u5728\u7cbe\u5fc3\u9009\u62e9\u7684\u6a21\u578b\u548c\u8d85\u53c2\u6570\u60c5\u51b5\u4e0b\u6548\u679c\u5f88\u4e0d\u9519\u3002 GAN \u7684\u4e00\u4e2a\u53d8\u79cd LAPGAN\uff0c\u4ece\u4f4e\u5206\u8fa8\u7387\u5f00\u59cb\u4e0d\u65ad\u52a0\u5165\u7ec6\u8282\uff0c\u5b83\u7684\u7ed3\u679c\u7ecf\u5e38\u80fd\u9a97\u8fc7\u4eba\u7c7b\u3002 \u4e3a\u4e86\u4fdd\u8bc1 GAN \u7684\u751f\u6210\u5668\u4e0d\u4f1a\u5728\u4efb\u610f\u70b9\u53d8\u62100\u6982\u7387\uff0c\u9700\u8981\u5728\u6700\u540e\u4e00\u5c42\u7ed9\u6240\u6709\u56fe\u50cf\u52a0\u5165\u9ad8\u65af\u566a\u58f0\u3002 \u5728 GAN \u7684\u5224\u522b\u5668\u4e2d\u4e00\u5b9a\u8981\u4f7f\u7528 dropout\uff0c\u4e0d\u8fd9\u6837\u505a\u7ed3\u679c\u5f88\u5dee\u3002 \u751f\u6210\u77e9\u5339\u914d\u7f51\u7edc\u7684\u89c6\u89c9\u6837\u672c\u4ee4\u4eba\u5931\u671b\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u5c06\u5b83\u4eec\u4e0e\u81ea\u52a8\u7f16\u7801\u5668\u7ed3\u5408\u6765\u6539\u8fdb\u3002 \u5728\u751f\u6210\u56fe\u50cf\u65f6\uff0c\u4f7f\u7528\u8f6c\u7f6e\u5377\u79ef\u64cd\u4f5c\u901a\u5e38\u4f1a\u4ea7\u751f\u66f4\u771f\u5b9e\u7684\u56fe\u50cf\uff0c\u76f8\u6bd4\u4e8e\u6ca1\u6709\u53c2\u6570\u5171\u4eab\u7684\u5168\u8fde\u63a5\u5c42\u4f7f\u7528\u66f4\u5c11\u7684\u53c2\u6570\u3002 \u5373\u4f7f\u5728\u5377\u79ef\u751f\u6210\u7f51\u7edc\u4e2d\u4e0a\u91c7\u6837\u7684\u5047\u8bbe\u4e0d\u771f\u5b9e\uff0c\u4f46\u662f\u751f\u6210\u7684\u6837\u672c\u603b\u4f53\u6765\u8bf4\u8fd8\u662f\u4e0d\u9519\u7684\u3002 \u867d\u7136\u6709\u5f88\u591a\u4f7f\u7528\u751f\u6210\u6a21\u578b\u7684\u65b9\u6cd5\u6765\u751f\u6210\u6837\u672c\uff0cMCMC \u91c7\u6837\uff0cancestral sampling \u6216\u628a\u4e8c\u8005\u7ed3\u5408\u662f\u6bd4\u8f83\u6d41\u884c\u7684\u505a\u6cd5\u3002 \u5f53\u6bd4\u8f83\u751f\u6210\u6a21\u578b\u65f6\uff0c\u9884\u5904\u7406\u7684\u6539\u53d8\uff08\u5373\u4f7f\u5f88\u5c0f\uff0c\u5f88\u5fae\u5999\uff09\u662f\u5b8c\u5168\u4e0d\u80fd\u63a5\u6536\u7684\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6539\u53d8\u5206\u5e03\u4ece\u800c\u6839\u672c\u4e0a\u6539\u53d8\u4e86\u4efb\u52a1\u3002 \u5982\u679c\u901a\u8fc7\u89c2\u5bdf\u6837\u672c\u56fe\u7247\u6765\u8861\u91cf\u751f\u6210\u6a21\u578b\uff0c\u6700\u597d\u5728\u4e0d\u77e5\u9053\u6837\u672c\u6e90\u7684\u60c5\u51b5\u4e0b\u53bb\u505a\u5b9e\u9a8c\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u4e00\u4e2a\u5dee\u7684\u6a21\u578b\u4e5f\u53ef\u80fd\u4ea7\u751f\u597d\u7684\u6837\u672c\uff0c\u5fc5\u987b\u786e\u4fdd\u6a21\u578b\u4e0d\u662f\u4ec5\u4ec5\u590d\u5236\u4e86\u8bad\u7ec3\u56fe\u7247\u3002\u4f7f\u7528\u6b27\u6c0f\u8ddd\u79bb\u6765\u8fdb\u884c\u68c0\u67e5\u3002 \u5982\u679c\u8ba1\u7b97\u4e0a\u53ef\u884c\u7684\u5316\uff0c\u6700\u597d\u7684\u8861\u91cf\u751f\u6210\u6a21\u578b\u6837\u672c\u7684\u65b9\u6cd5\u662f\u8bc4\u4f30\u6a21\u578b\u5206\u914d\u7ed9\u6d4b\u8bd5\u6570\u636e\u7684\u5bf9\u6570\u4f3c\u7136\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u6709\u7f3a\u9677\uff0c\u4f8b\u5982\u4e00\u4e2a\u56fa\u5b9a\u7684\u7b80\u5355\u56fe\u7247\uff08\u5982\u7a7a\u767d\u80cc\u666f\uff09\u6709\u5f88\u9ad8\u7684\u4f3c\u7136\u3002 \u751f\u6210\u6a21\u578b\u6709\u5f88\u591a\u7528\u5904\uff0c\u56e0\u6b64\u6839\u636e\u7528\u9014\u6765\u6311\u9009\u8bc4\u4f30\u6307\u6807\u3002 \u4f8b\u5982\uff0c\u4e00\u4e9b\u751f\u6210\u6a21\u578b\u66f4\u64c5\u957f\u4e3a\u6700\u771f\u5b9e\u7684\u70b9\u5206\u914d\u9ad8\u6982\u7387\uff0c\u800c\u5176\u4ed6\u4e00\u4e9b\u6a21\u578b\u7ed9\u4e0d\u771f\u5b9e\u7684\u70b9\u4e0d\u5206\u914d\u9ad8\u6982\u7387\u505a\u7684\u66f4\u597d\u3002 \u5373\u4f7f\u5f53\u6307\u6807\u7f29\u5c0f\u5230\u6700\u5408\u9002\u7684\u4efb\u52a1\u4e0a\uff0c\u6240\u6709\u7684\u6307\u6807\u4e5f\u90fd\u6709\u5f88\u4e25\u91cd\u7684\u95ee\u9898\u3002 19 \u9875\u82b1\u4e66\u7cbe\u9ad3\u7b14\u8bb0\uff01\u4f60\u53ef\u80fd\u6b63\u9700\u8981\u8fd9\u4efd\u77e5\u8bc6\u6e05\u5355 \u6df1\u5ea6\u5b66\u4e60\u5723\u7ecf\u201c\u82b1\u4e66\u201d\u6838\u5fc3\u7b14\u8bb0\u3001\u4ee3\u7801\u53d1\u5e03","title":"20. \u6df1\u5ea6\u751f\u6210\u6a21\u578b"},{"location":"%E9%9D%A2%E7%BB%8F/","text":"\u9762\u7ecf \u00b6 58\u7535\u9762 2019/4/12 \u00b6 \u5728 @syh \u5927\u4f6c\u7ecf\u5386\u4e86\u5341\u5206\u53ef\u6015\u7684\u996d\u70b9\u98df\u5802\u7535\u9762\u4e4b\u540e\uff0c\u4ea4\u6d41\u4e86\u4e00\u6ce2\uff0c\u7136\u800c\u672c\u6765\u6253\u7b97\u5348\u7761\u9192\u4e86\u770b\u770b\u4ed6\u9047\u5230\u7684\u95ee\u9898\uff0c\u7ed3\u679c\u521a\u4e0b\u5e8a\u7535\u8bdd\u5c31\u54cd\u4e86\uff01\u6ca1\u9519\u662f\u771f\u7684\u521a\u521a\u8df3\u4e0b\u5e8a\u5c31\u63a5\u5230\u4e86\u7535\u8bdd \u4ee5\u4e0b\u5305\u62ec\u90e8\u5206 @syh \u540c\u5b66\u7684\u9762\u7ecf \u5148\u662f\u5bb6\u4e61\u3001\u8bfb\u7814\u6253\u7b97\u3001\u5b9e\u8bad\u65f6\u95f4\u4fdd\u8bc1 ML&DL \u00b6 \u8fd9\u90e8\u5206\u4e3b\u8981\u56f4\u7ed5\u4e2a\u4eba\u9879\u76ee\u7ecf\u5386\u5c55\u5f00\u8bf4 \u8bf4\u5230\u54ea\u513f\u95ee\u5230\u54ea\u513f \u7b80\u5386\u4e0a\u7684\u9879\u76ee\u7ecf\u5386( CV ``NLP \u5206\u7c7b\u6a21\u578b) Attention \u600e\u4e48\u4f7f\u7528\u7684\uff1f RNN \u7684\u68af\u5ea6\u7206\u70b8\u548c\u68af\u5ea6\u6d88\u5931 LSTM \uff1f\u5982\u4f55\u5904\u7406\u68af\u5ea6\u7206\u70b8\u95ee\u9898\uff1f word2vec \u539f\u7406 \u600e\u4e48\u66f4\u65b0\u7684 \u600e\u4e48\u89e3\u51b3\u8bcd\u5178\u91cc\u6ca1\u6709\u7684\u8bcd(\u7528\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b) \u8fc7\u62df\u5408\u6709\u54ea\u4e9b\u89e3\u51b3\u65b9\u6848\uff1f Batch_size \u662f\u600e\u4e48\u8c03\u6574\u7684\uff1f CV \u7684\u63d0\u53d6\u5230\u7684\u7279\u5f81\u662f\u4ec0\u4e48\u6837\u7684\uff1f CNN \u7684\u5c3a\u5bf8\u8ba1\u7b97\u516c\u5f0f \u5206\u7c7b\u6a21\u578b\u9879\u76ee\u63cf\u8ff0 \u8fd8\u77e5\u9053\u5176\u4ed6\u5206\u7c7b\u6a21\u578b\u5417\uff1f SVM \uff1f \u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5 \u00b6 \u5806\u6392\u548c\u5feb\u6392\u7684\u4f7f\u7528\u573a\u666f \u6570\u636e\u91cf\u5f88\u5927\u7684\u65f6\u5019 \u6c42topk \u7528\u54ea\u4e2a \u4e8c\u5206\u67e5\u627e\u548c\u54c8\u5e0c\u67e5\u627e\u7684\u4f7f\u7528\u573a\u666f \u54c8\u5e0c\u7684\u51b2\u7a81\u600e\u4e48\u89e3\u51b3 \u7ebf\u6027\u63a2\u67e5 \u5176\u4ed6\u65b9\u6cd5\u8fd8\u6709\u5417 \u8ba1\u7f51 \u00b6 UDP \u548c TCP \u54ea\u4e2a\u5feb\uff1f\u4e3a\u4ec0\u4e48\uff1f TCP \u4e3a\u4ec0\u4e48\u4e09\u6b21\u63e1\u624b\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u662f\u4e24\u6b21\uff1f \u6570\u636e\u5e93 \u00b6 \u4ec0\u4e48\u4e0d\u80fd\u505a\u6570\u636e\u5e93\u7684\u7d22\u5f15\uff1f OS&Linux \u00b6 \u67e5\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u547d\u4ee4 mkdir \u600e\u4e48\u5efa\u7acb\u591a\u7ea7\u76ee\u5f55 OS \u5bf9\u5806\u548c\u6808\u7684\u5229\u7528\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f \u8fdb\u7a0b\u548c\u7ebf\u7a0b\u6709\u4ec0\u4e48\u533a\u522b\uff1f Linux \u4e2d\u67e5\u770b CPU \u4f7f\u7528\u7387\u7684\u547d\u4ee4\u6709\u54ea\u4e9b Java \u00b6 \u9762\u5411\u5bf9\u8c61\u7684\u91cd\u8f7d\u548c\u91cd\u5199\u6709\u5565\u533a\u522b\uff1f\u591a\u6001\uff1f \u7f16\u8bd1\u578b\u591a\u6001\u548c\u8fd0\u884c\u65f6\u591a\u6001\u662f\u4ec0\u4e48\uff1f C++ \u00b6 \u6570\u7ec4\u548c\u6307\u9488\u7684\u5dee\u522b Python \u00b6 list \u548c tuple \u7684\u5dee\u522b dict \u6392\u5e8f yiled \uff1f \u6700\u540e\u51e0\u4e2a\u95ee\u9898 \u00b6 string \u8f6c \u6570\u5b57 \uff08\u81ea\u5df1\u5199\u51fd\u6570\uff09 \u7ed9\u5b9a\u4e24\u4e2a\u65e0\u5e8f\u6570\u7ec4\u548c\u4e00\u4e2a target \uff0c\u6c42\u6240\u6709\u548c\u4e3a target \u7684 pair \u53cc\u94fe\u8868\u5982\u4f55\u627e\u4e2d\u95f4\u5143\u7d20 \u5355\u94fe\u8868\u5982\u4f55\u627e\u4e2d\u95f4\u5143\u7d20 \u6709\u5565\u95ee\u9898\u95ee\u6211\uff1f \u00b6 58 AI Lab \u505a\u4ec0\u4e48\uff1f \u6df1\u5ea6\u5b66\u4e60\u4e91\u5e73\u53f0\u7684\u7ba1\u7406 \u667a\u80fd\u5ba2\u670d \u667a\u80fd\u8bed\u97f3\u62e8\u53f7\uff08\u673a\u5668\u4eba\u7ed9\u4f60\u6253\u7535\u8bdd\uff09 \u6587\u672c\u751f\u6210\uff08\u7ed9\u5b9a\u4e3b\u9898\u751f\u6210\u5ba3\u4f20\u6587\u5b57\uff09","title":"\u9762\u7ecf"},{"location":"%E9%9D%A2%E7%BB%8F/#_1","text":"","title":"\u9762\u7ecf"},{"location":"%E9%9D%A2%E7%BB%8F/#58-2019412","text":"\u5728 @syh \u5927\u4f6c\u7ecf\u5386\u4e86\u5341\u5206\u53ef\u6015\u7684\u996d\u70b9\u98df\u5802\u7535\u9762\u4e4b\u540e\uff0c\u4ea4\u6d41\u4e86\u4e00\u6ce2\uff0c\u7136\u800c\u672c\u6765\u6253\u7b97\u5348\u7761\u9192\u4e86\u770b\u770b\u4ed6\u9047\u5230\u7684\u95ee\u9898\uff0c\u7ed3\u679c\u521a\u4e0b\u5e8a\u7535\u8bdd\u5c31\u54cd\u4e86\uff01\u6ca1\u9519\u662f\u771f\u7684\u521a\u521a\u8df3\u4e0b\u5e8a\u5c31\u63a5\u5230\u4e86\u7535\u8bdd \u4ee5\u4e0b\u5305\u62ec\u90e8\u5206 @syh \u540c\u5b66\u7684\u9762\u7ecf \u5148\u662f\u5bb6\u4e61\u3001\u8bfb\u7814\u6253\u7b97\u3001\u5b9e\u8bad\u65f6\u95f4\u4fdd\u8bc1","title":"58\u7535\u9762 2019/4/12"},{"location":"%E9%9D%A2%E7%BB%8F/#mldl","text":"\u8fd9\u90e8\u5206\u4e3b\u8981\u56f4\u7ed5\u4e2a\u4eba\u9879\u76ee\u7ecf\u5386\u5c55\u5f00\u8bf4 \u8bf4\u5230\u54ea\u513f\u95ee\u5230\u54ea\u513f \u7b80\u5386\u4e0a\u7684\u9879\u76ee\u7ecf\u5386( CV ``NLP \u5206\u7c7b\u6a21\u578b) Attention \u600e\u4e48\u4f7f\u7528\u7684\uff1f RNN \u7684\u68af\u5ea6\u7206\u70b8\u548c\u68af\u5ea6\u6d88\u5931 LSTM \uff1f\u5982\u4f55\u5904\u7406\u68af\u5ea6\u7206\u70b8\u95ee\u9898\uff1f word2vec \u539f\u7406 \u600e\u4e48\u66f4\u65b0\u7684 \u600e\u4e48\u89e3\u51b3\u8bcd\u5178\u91cc\u6ca1\u6709\u7684\u8bcd(\u7528\u9884\u8bad\u7ec3\u597d\u7684\u6a21\u578b) \u8fc7\u62df\u5408\u6709\u54ea\u4e9b\u89e3\u51b3\u65b9\u6848\uff1f Batch_size \u662f\u600e\u4e48\u8c03\u6574\u7684\uff1f CV \u7684\u63d0\u53d6\u5230\u7684\u7279\u5f81\u662f\u4ec0\u4e48\u6837\u7684\uff1f CNN \u7684\u5c3a\u5bf8\u8ba1\u7b97\u516c\u5f0f \u5206\u7c7b\u6a21\u578b\u9879\u76ee\u63cf\u8ff0 \u8fd8\u77e5\u9053\u5176\u4ed6\u5206\u7c7b\u6a21\u578b\u5417\uff1f SVM \uff1f","title":"ML&amp;DL"},{"location":"%E9%9D%A2%E7%BB%8F/#_2","text":"\u5806\u6392\u548c\u5feb\u6392\u7684\u4f7f\u7528\u573a\u666f \u6570\u636e\u91cf\u5f88\u5927\u7684\u65f6\u5019 \u6c42topk \u7528\u54ea\u4e2a \u4e8c\u5206\u67e5\u627e\u548c\u54c8\u5e0c\u67e5\u627e\u7684\u4f7f\u7528\u573a\u666f \u54c8\u5e0c\u7684\u51b2\u7a81\u600e\u4e48\u89e3\u51b3 \u7ebf\u6027\u63a2\u67e5 \u5176\u4ed6\u65b9\u6cd5\u8fd8\u6709\u5417","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5"},{"location":"%E9%9D%A2%E7%BB%8F/#_3","text":"UDP \u548c TCP \u54ea\u4e2a\u5feb\uff1f\u4e3a\u4ec0\u4e48\uff1f TCP \u4e3a\u4ec0\u4e48\u4e09\u6b21\u63e1\u624b\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u662f\u4e24\u6b21\uff1f","title":"\u8ba1\u7f51"},{"location":"%E9%9D%A2%E7%BB%8F/#_4","text":"\u4ec0\u4e48\u4e0d\u80fd\u505a\u6570\u636e\u5e93\u7684\u7d22\u5f15\uff1f","title":"\u6570\u636e\u5e93"},{"location":"%E9%9D%A2%E7%BB%8F/#oslinux","text":"\u67e5\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u547d\u4ee4 mkdir \u600e\u4e48\u5efa\u7acb\u591a\u7ea7\u76ee\u5f55 OS \u5bf9\u5806\u548c\u6808\u7684\u5229\u7528\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f \u8fdb\u7a0b\u548c\u7ebf\u7a0b\u6709\u4ec0\u4e48\u533a\u522b\uff1f Linux \u4e2d\u67e5\u770b CPU \u4f7f\u7528\u7387\u7684\u547d\u4ee4\u6709\u54ea\u4e9b","title":"OS&amp;Linux"},{"location":"%E9%9D%A2%E7%BB%8F/#java","text":"\u9762\u5411\u5bf9\u8c61\u7684\u91cd\u8f7d\u548c\u91cd\u5199\u6709\u5565\u533a\u522b\uff1f\u591a\u6001\uff1f \u7f16\u8bd1\u578b\u591a\u6001\u548c\u8fd0\u884c\u65f6\u591a\u6001\u662f\u4ec0\u4e48\uff1f","title":"Java"},{"location":"%E9%9D%A2%E7%BB%8F/#c","text":"\u6570\u7ec4\u548c\u6307\u9488\u7684\u5dee\u522b","title":"C++"},{"location":"%E9%9D%A2%E7%BB%8F/#python","text":"list \u548c tuple \u7684\u5dee\u522b dict \u6392\u5e8f yiled \uff1f","title":"Python"},{"location":"%E9%9D%A2%E7%BB%8F/#_5","text":"string \u8f6c \u6570\u5b57 \uff08\u81ea\u5df1\u5199\u51fd\u6570\uff09 \u7ed9\u5b9a\u4e24\u4e2a\u65e0\u5e8f\u6570\u7ec4\u548c\u4e00\u4e2a target \uff0c\u6c42\u6240\u6709\u548c\u4e3a target \u7684 pair \u53cc\u94fe\u8868\u5982\u4f55\u627e\u4e2d\u95f4\u5143\u7d20 \u5355\u94fe\u8868\u5982\u4f55\u627e\u4e2d\u95f4\u5143\u7d20","title":"\u6700\u540e\u51e0\u4e2a\u95ee\u9898"},{"location":"%E9%9D%A2%E7%BB%8F/#_6","text":"58 AI Lab \u505a\u4ec0\u4e48\uff1f \u6df1\u5ea6\u5b66\u4e60\u4e91\u5e73\u53f0\u7684\u7ba1\u7406 \u667a\u80fd\u5ba2\u670d \u667a\u80fd\u8bed\u97f3\u62e8\u53f7\uff08\u673a\u5668\u4eba\u7ed9\u4f60\u6253\u7535\u8bdd\uff09 \u6587\u672c\u751f\u6210\uff08\u7ed9\u5b9a\u4e3b\u9898\u751f\u6210\u5ba3\u4f20\u6587\u5b57\uff09","title":"\u6709\u5565\u95ee\u9898\u95ee\u6211\uff1f"}]}